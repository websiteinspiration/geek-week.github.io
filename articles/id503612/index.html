<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌊 👨🏿‍🎓 👩🏿‍⚕️ Praktik terbaik Kubernetes. Memetakan layanan eksternal 🗻 🐊 💩</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Praktik terbaik Kubernetes. Membuat Kontainer Kecil 
 Kubernetes Praktik Terbaik. Organisasi Kubernetes dengan Kubernetes 
 Best Practices Namespace. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Praktik terbaik Kubernetes. Memetakan layanan eksternal</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/503612/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Praktik terbaik Kubernetes. Membuat Kontainer Kecil </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes Praktik Terbaik. Organisasi Kubernetes dengan Kubernetes </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Best Practices Namespace. Uji Kelayakan Kubernetes dengan Tes Kesiapan dan Uji Kekuatan </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Praktik Terbaik </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">Kubernetes </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">. Mengatur Kueri dan Batas Sumber Daya </font></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Praktik Terbaik Kubernetes. Pemutusan yang benar dari Terminate</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Jika Anda seperti kebanyakan orang, kemungkinan besar Anda menggunakan sumber daya yang beroperasi di luar cluster Anda. Anda mungkin menggunakan Taleo API untuk mengirim pesan teks atau menganalisis gambar menggunakan Google Cloud Vision API.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda menggunakan titik akhir yang sama - titik penerimaan permintaan sisi server di semua lingkungan Anda dan tidak berencana untuk mentransfer server Anda ke Kubernetes, maka sangat normal untuk memiliki layanan titik akhir langsung dalam kode Anda. Namun, ada banyak skenario lain. Dalam seri Praktik Terbaik Kubernetes ini, Anda akan belajar cara menggunakan mekanisme bawaan Kubernetes untuk menemukan layanan di dalam dan di luar cluster. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh dari layanan eksternal yang tersebar luas adalah database yang berjalan di luar cluster Kubernetes. Tidak seperti basis data cloud seperti Google Cloud Data Store atau Google Cloud Spanner, yang menggunakan titik akhir yang sama untuk semua jenis akses, kebanyakan basis data memiliki titik akhir yang terpisah untuk keadaan yang berbeda.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Praktik terbaik untuk menggunakan database tradisional, seperti MySQL dan MongoDB, biasanya mengharuskan Anda untuk terhubung ke komponen yang berbeda untuk lingkungan yang berbeda. Anda mungkin memiliki mesin besar untuk data produksi dan mesin yang lebih kecil untuk lingkungan pengujian. Masing-masing dari mereka akan memiliki alamat IP atau nama domain sendiri, tetapi Anda mungkin tidak ingin mengubah kode Anda ketika berpindah dari satu lingkungan ke lingkungan lain. Oleh karena itu, alih-alih mengkodekan alamat-alamat ini, Anda dapat menggunakan layanan bawaan Kubernetes untuk menemukan layanan eksternal berbasis DNS dengan cara yang sama seperti untuk layanan asli Kubernetes. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qg/lz/vj/qglzvjg0ysvnlejo7v6pvtqc1se.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalkan Anda menjalankan database MongoDB di Google Compute Engine. Anda akan terjebak di dunia hybrid ini hingga Anda berhasil mentransfernya ke sebuah cluster.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untungnya, Anda dapat menggunakan layanan statis Kubernetes untuk membuat hidup Anda sedikit lebih mudah. Dalam contoh ini, saya membuat server MongoDB menggunakan Google Cloud Launcher. Karena dibuat di jaringan yang sama (atau kluster Kubernetes VPC), ini diakses menggunakan alamat IP internal berkinerja tinggi. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r3/ou/z8/r3ouz8pak0n-al5obbd6y81qkke.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah pengaturan default di Google Cloud, jadi Anda tidak perlu mengonfigurasi apa pun. Sekarang Anda memiliki alamat IP, langkah pertama adalah membuat layanan. Anda mungkin memperhatikan bahwa tidak ada penyeleksi perapian untuk layanan ini. Artinya, kami menciptakan layanan yang tidak akan tahu ke mana harus mengirim lalu lintas. Ini akan memungkinkan Anda untuk secara manual membuat objek titik akhir, yang akan menerima lalu lintas dari layanan ini.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jo/tc/sr/jotcsra7vszs8kmlivxwl_awqsq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh kode berikut menunjukkan bahwa titik akhir menentukan alamat IP untuk database menggunakan nama mongo yang sama dengan layanan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y9/dz/cb/y9dzcbounajojfgkqd-7osjcxka.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetes akan menggunakan semua alamat IP untuk menemukan titik akhir seolah-olah mereka adalah pod Kubernet biasa, jadi sekarang Anda dapat mengakses database menggunakan string koneksi sederhana ke nama di atas mongodb: // mongo. Namun, sama sekali tidak perlu menggunakan alamat IP dalam kode Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika alamat IP berubah di masa mendatang, Anda dapat memperbarui titik akhir dengan alamat IP baru, dan aplikasi Anda tidak perlu diubah dengan cara tambahan apa pun.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda menggunakan database yang dihosting pada host pihak ketiga, maka kemungkinan besar pemilik host memberi Anda URI pengidentifikasi sumber daya terpadu untuk koneksi. Jadi jika Anda diberi alamat IP, Anda cukup menggunakan metode sebelumnya. Contoh ini menunjukkan bahwa saya memiliki dua database MongoDB yang di-host pada host mLab. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bd/er/w9/bderw9_a42oa_nap45ol_au_jla.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salah satunya adalah database pengembang, dan yang lainnya adalah database produksi. String koneksi untuk database ini adalah sebagai berikut - mLab memberi Anda URI dinamis dan port dinamis. Seperti yang Anda lihat, mereka berbeda. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fu/t9/v5/fut9v5yv1qtskdkx8tju2rmkmnq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengabaikan ini, kami menggunakan Kubernetes dan terhubung ke database pengembang. Anda dapat membuat nama layanan Kubernetes eksternal, yang akan memberi Anda layanan statis yang akan mengarahkan lalu lintas ke layanan eksternal.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jo/63/u6/jo63u6uv1quvocf8fxh1bnv_6om.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Layanan ini akan melakukan pengalihan CNAME tingkat kernel sederhana, yang akan memiliki dampak kinerja minimal. Berkat ini, Anda dapat menggunakan string koneksi yang lebih sederhana. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/es/ip/jm/esipjmsa8t8nagtrwu4slv55isa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi karena nama eksternal menggunakan pengalihan CNAME, itu tidak dapat melakukan penerusan port. Oleh karena itu, solusi ini hanya berlaku untuk port statis dan tidak dapat digunakan dengan port dinamis. Tetapi Tier Gratis mLab gratis, secara default, memberikan pengguna dengan nomor port dinamis, dan Anda tidak dapat mengubahnya. Ini berarti bahwa untuk dev dan prod Anda memerlukan baris perintah koneksi yang berbeda. Kabar buruknya adalah Anda perlu meng-hard-code nomor port. Jadi, bagaimana Anda mendapatkan penerusan port untuk bekerja?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Langkah pertama adalah mendapatkan alamat IP dari URI. Jika Anda menjalankan perintah nslookup, nama host atau ping URI, Anda bisa mendapatkan alamat IP dari database. Jika pada saat yang sama layanan mengembalikan beberapa alamat IP kepada Anda, maka semua alamat ini dapat digunakan pada titik akhir objek. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ox/ki/ox/oxkioxus5e4idcigbaufhqfyquk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ingatlah bahwa IP URI dapat berubah tanpa pemberitahuan sebelumnya, sehingga cukup berisiko untuk menggunakannya dalam prod. Dengan menggunakan alamat IP ini, Anda dapat terhubung ke basis data jauh tanpa menentukan port. Dengan demikian, layanan Kubernetes melakukan penerusan port dengan cukup transparan.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rs/iu/eo/rsiueor-lvslhr5vscjlowggkho.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memetakan, atau memetakan sumber daya eksternal ke sumber internal, memberi Anda kemampuan untuk secara fleksibel menggunakan layanan ini di dalam cluster di masa depan sambil meminimalkan upaya refactoring. </font><font style="vertical-align: inherit;">Ini juga memfasilitasi manajemen dan memberikan wawasan tentang layanan eksternal apa yang digunakan perusahaan Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akan dilanjutkan segera ...</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/fvpq4jqtuZ8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sedikit iklan :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terima kasih untuk tetap bersama kami. Apakah Anda suka artikel kami? Ingin melihat materi yang lebih menarik? Dukung kami dengan melakukan pemesanan atau merekomendasikan kepada teman Anda </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS berbasis cloud untuk pengembang mulai $ 4,99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analog unik dari server entry-level yang diciptakan oleh kami untuk Anda: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seluruh kebenaran tentang VPS (KVM) E5-2697 v3 (6 Cores) 10GB DDR4 480GB SSD 1Gbps mulai dari $ 19 atau cara membagi server?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (opsi tersedia dengan RAID1 dan RAID10, hingga 24 core dan hingga 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 kali lebih murah di pusat data Equinix Tier IV di Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hanya kami yang memiliki </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV dari $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di Belanda!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - mulai dari $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baca tentang</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cara Membangun Infrastruktur Bldg. </font><font style="vertical-align: inherit;">kelas c menggunakan server Dell R730xd E5-2650 v4 seharga 9.000 euro untuk satu sen?</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id503600/index.html">STM32MP1: U-Boot, Buildroot, Arch Linux dan sedikit Debian</a></li>
<li><a href="../id503604/index.html">Sergey dan "pemrograman lebih baik daripada seks"</a></li>
<li><a href="../id503606/index.html">Swift 5.3: Apa yang Baru?</a></li>
<li><a href="../id503608/index.html">Bagaimana kami mencari filter virus</a></li>
<li><a href="../id503610/index.html">Mengapa tidak membuat Lisp Anda sendiri untuk web?</a></li>
<li><a href="../id503616/index.html">Bagaimana kami membuat merchandiser robot prototipe dan apa yang berikutnya</a></li>
<li><a href="../id503620/index.html">Berita dari dunia OpenStreetMap No. 512 (05.05.2020-11.05.2020)</a></li>
<li><a href="../id503624/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 416 (18-24 Mei, 2020)</a></li>
<li><a href="../id503626/index.html">Pengujian. Kesalahan sertifikasi ISTQB atau memecahkan sejuta contoh</a></li>
<li><a href="../id503630/index.html">Kacamata augmented reality: di mana kita sekarang?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>