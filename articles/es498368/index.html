<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äç‚ù§Ô∏è‚Äçüë© üßóüèø üë®‚Äç‚ù§Ô∏è‚Äçüë® La historia de un interruptor üå¥ üóùÔ∏è üë©üèø‚Äçü§ù‚Äçüë©üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En nuestra agregaci√≥n LAN, hab√≠a seis pares de conmutadores Arista DCS-7050CX3-32S y un par de conmutadores Brocade VDX 6940-36Q. No es que los conmut...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>La historia de un interruptor</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/selectel/blog/498368/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/y6/hn/ng/y6hnnglhd7cga9rdsoloimhiism.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En nuestra agregaci√≥n LAN, hab√≠a seis pares de conmutadores Arista DCS-7050CX3-32S y un par de conmutadores Brocade VDX 6940-36Q. </font><font style="vertical-align: inherit;">No es que los conmutadores Brocade en esta red hayan ejercido mucha presi√≥n sobre nosotros, trabajan y realizan sus funciones, pero est√°bamos preparando la automatizaci√≥n total de algunas acciones, y no ten√≠amos estas capacidades en estos conmutadores. </font><font style="vertical-align: inherit;">Tambi√©n quer√≠a cambiar de las interfaces 40GE a la posibilidad de usar 100GE para hacer una reserva para los pr√≥ximos 2-3 a√±os. </font><font style="vertical-align: inherit;">Entonces decidimos cambiar Brocade por Arista.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estos conmutadores son conmutadores de agregaci√≥n LAN para cada centro de datos. </font><font style="vertical-align: inherit;">Los conmutadores de distribuci√≥n (el segundo nivel de agregaci√≥n) se conectan directamente a ellos, que ya est√°n ensamblados en ellos mismos. Los conmutadores LAN Top-of-Rack en los bastidores del servidor.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/wr/_k/mn/wr_kmn_mxcbk5pzlszif5fwpmmy.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada servidor est√° incluido en uno o dos conmutadores de acceso. Los conmutadores de acceso est√°n conectados a un par de conmutadores de distribuci√≥n (dos conmutadores de distribuci√≥n y dos enlaces f√≠sicos desde el conmutador de acceso a diferentes conmutadores de distribuci√≥n se utilizan para redundancia). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada servidor puede ser utilizado por su cliente, por lo que se asigna una VLAN separada al cliente. La misma VLAN se asigna a otro servidor de este cliente en cualquier rack. El centro de datos consta de varias de esas filas (POD), cada fila de bastidores tiene sus propios conmutadores de distribuci√≥n. Luego, estos conmutadores de distribuci√≥n se conectan a los conmutadores de agregaci√≥n.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/oc/2p/r5/oc2pr5parnr_c3-m4s1fswgxlcm.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los clientes pueden ordenar un servidor en cualquier fila, es imposible predecir de antemano que el servidor se asignar√° o instalar√° en una fila particular en un rack en particular, por lo tanto, hay alrededor de 2500 VLAN en cada centro de datos en los conmutadores de agregaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El equipo para DCI (Interconexi√≥n del centro de datos) se conecta a los conmutadores de agregaci√≥n. Se puede usar para conectividad L2 (un par de conmutadores que forman un t√∫nel VXLAN a otro centro de datos) y para conectividad L3 (dos enrutadores MPLS).</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/eh/2a/pg/eh2apgb0jx6excyolzu7hlqwwiy.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como ya escrib√≠, para unificar los procesos de automatizaci√≥n de la configuraci√≥n de servicios en equipos en un centro de datos, fue necesario reemplazar los conmutadores de agregaci√≥n central. </font><font style="vertical-align: inherit;">Instalamos nuevos interruptores junto a los existentes, los combinamos en un par MLAG y comenzamos a prepararnos para el trabajo. </font><font style="vertical-align: inherit;">Se conectaron de inmediato a los conmutadores de agregaci√≥n existentes, de modo que ten√≠an un dominio L2 com√∫n en todas las VLAN de los clientes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Detalles del circuito</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por especificidad, llamaremos a los viejos conmutadores de agregaci√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , los nuevos: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Imagine que en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hay servidores de un cliente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , la VLAN del cliente se indica en azul. Este cliente utiliza el servicio de conectividad L2 con otro centro de datos, por lo que su VLAN se sirve en un par de conmutadores VXLAN. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El cliente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coloca los servidores en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , denotamos la VLAN del cliente como verde oscuro. Este cliente tambi√©n usa el servicio de conectividad con otro centro de datos, pero L3, por lo que su VLAN se sirve en un par de enrutadores L3VPN.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/pl/tx/8t/pltx8tm018xdgys6sbk08dng6_w.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Necesitamos las VLAN del cliente para comprender en qu√© etapas del trabajo de reemplazo sucede, d√≥nde se produce la interrupci√≥n de la comunicaci√≥n y cu√°l puede ser su duraci√≥n. </font><font style="vertical-align: inherit;">El protocolo STP no se utiliza en este esquema, ya que el ancho del √°rbol en este caso es grande, y la convergencia del protocolo crece exponencialmente a partir del n√∫mero de dispositivos y enlaces entre ellos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos los dispositivos conectados por enlaces dobles forman una pila, un par MLAG o una f√°brica VCS-Ethernet. </font><font style="vertical-align: inherit;">Dichas tecnolog√≠as no se utilizan para un par de enrutadores L3VPN, ya que no hay necesidad de redundancia L2, es suficiente que tengan conectividad L2 entre s√≠ a trav√©s de conmutadores de agregaci√≥n.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opciones de implementaci√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al analizar las opciones para otros eventos, nos dimos cuenta de que hay varias formas de llevar a cabo estos trabajos. </font><font style="vertical-align: inherit;">Desde una interrupci√≥n global en toda la red local, hasta peque√±as interrupciones de 1 a 2 segundos en partes de la red.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Red, de pie! </font><font style="vertical-align: inherit;">Interruptores, reemplazar!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La manera m√°s f√°cil - es, por supuesto, anunciar una globales lazos de quiebre en todo el POD y todos los servicios de DNI y cambiar todos los enlaces desde el interruptor </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en los conmutadores </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/oe/ru/gj/oerugjzsi4pdh1lqcnu5bxyzlra.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s del descanso, el tiempo que no podemos garantizar para predecir (s√≠, sabemos la cantidad de enlaces, pero no sabemos cu√°ntas veces algo saldr√° mal, desde un cable de conexi√≥n roto o un conector da√±ado hasta un puerto o transceptor defectuoso), a√∫n no podemos para predecir de antemano si la longitud de los cables de conexi√≥n, DAC, AOC, conectados a los viejos interruptores A, es suficiente para alcanzarlos, aunque de pie junto a ellos, pero a√∫n ligeramente separados, los nuevos interruptores N y si los mismos transceptores funcionar√°n / DAC / AOC de los conmutadores Brocade en los conmutadores Arista.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y todo esto en condiciones de severa presi√≥n por parte de los clientes y el soporte t√©cnico ("Natasha, lev√°ntate, Natasha, ¬°todo no funciona all√≠! ¬°Natasha, ya escribimos soporte t√©cnico, honestamente, honestamente! ¬°Natasha, ya han dejado todo ah√≠! ¬°Natasha, pero cu√°nto no! ¬øFuncionar√°? ¬°Natasha, y cuando funcione? ‚Äù). </font><font style="vertical-align: inherit;">Incluso a pesar de un descanso previamente anunciado y una notificaci√≥n a los clientes, se garantiza una afluencia de llamadas en ese momento.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Espera, 1-2-3-4!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y si no es para declarar un corte global, sino para anunciar una serie de peque√±os cortes en la comunicaci√≥n sobre los servicios POD y DCI. </font><font style="vertical-align: inherit;">En el primer descanso, cambie </font><font style="vertical-align: inherit;">solo los </font><font style="vertical-align: inherit;">conmutadores </font><b><font style="vertical-align: inherit;">POD 1 a </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , en el segundo, despu√©s de un par de d√≠as, </font><b><font style="vertical-align: inherit;">POD 2</font></b><font style="vertical-align: inherit;"> , luego despu√©s de un par de d√≠as </font><b><font style="vertical-align: inherit;">POD 3</font></b><font style="vertical-align: inherit;"> , luego </font><b><font style="vertical-align: inherit;">POD 4 ... [N]</font></b><font style="vertical-align: inherit;"> , luego conmutadores VXLAN y luego enrutadores L3VPN.</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/dg/1n/8o/dg1n8oei0wx04clgnk2a0emzu-o.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con tal organizaci√≥n de trabajo de conmutaci√≥n, reducimos la complejidad del trabajo de una sola vez y aumentamos nuestro tiempo para resolver problemas si algo sale mal de repente. La conectividad del POD 1 despu√©s de cambiar con otro POD y DCI no se pierde. Pero el trabajo en s√≠ mismo se retrasa por mucho tiempo, para el tiempo de este trabajo en el centro de datos, se requiere un ingeniero para realizar f√≠sicamente el cambio, y durante el trabajo (y dicho trabajo generalmente se realiza de noche, de 2 a 5 de la ma√±ana), la presencia de un ingeniero de red en l√≠nea es bastante alta. calificaciones Pero, por otro lado, tenemos breves pausas en la comunicaci√≥n, por lo general, el trabajo puede llevarse a cabo en el intervalo de media hora con un descanso de hasta 2 minutos (en la pr√°ctica, a menudo 20-30 segundos con el comportamiento esperado del equipo). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el ejemplo anterior, el cliente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o el cliente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tendr√° que advertir sobre el trabajo con una interrupci√≥n en las comunicaciones al menos tres veces: la primera vez para realizar el trabajo en un POD, en el que se encuentra uno de sus servidores, la segunda vez, en la segunda y la tercera vez, al cambiar de equipo para los servicios de DCI.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cambio de canales de comunicaci√≥n agregados</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPor qu√© estamos hablando del comportamiento esperado del equipo y c√≥mo pueden cambiar los canales agregados con la minimizaci√≥n de las interrupciones de comunicaci√≥n? </font><font style="vertical-align: inherit;">Imagine la siguiente imagen:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/s0/g5/4b/s0g54bkj-ujiumk0egmyp7ookv0.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por un lado, el enlace es los interruptores de distribuci√≥n POD - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , forman un par MLAG (pila, VCS factory, par vPC), por otro lado, dos enlaces - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enlace 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enlace 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - est√°n incluidos en el viejo par MLAG switch de agregaci√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">En el lado conmuta </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> form√≥ interfaz agregada llamado </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port-canal A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , en el lado de la agregaci√≥n de los interruptores </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - interfaz agregada llama </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port D-canal</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las interfaces agregadas usan LACP en su trabajo, es decir, los conmutadores en ambos lados intercambian regularmente paquetes LACPDU en ambos enlaces para asegurarse de que los enlaces:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trabajadores;</font></font></li>
<li>       .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al intercambiar paquetes en un paquete, se transmite el valor de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">id</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> del </font><b><font style="vertical-align: inherit;">sistema</font></b><font style="vertical-align: inherit;"> , que indica el dispositivo donde se incluyen estos enlaces. Para un par MLAG (pila, f√°brica, etc.), el valor de id del sistema para los dispositivos que forman la interfaz agregada es el mismo. El interruptor </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> env√≠a un </font><font style="vertical-align: inherit;">valor de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enlace 1 </font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">id-D del sistema</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y el interruptor </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> env√≠a un </font><font style="vertical-align: inherit;">valor de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enlace 2 </font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">id-D del sistema</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los conmutadores </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> analizan los paquetes LACPDU recibidos en la misma interfaz Po D y verifican que la identificaci√≥n del sistema en ellos coincida. Si la identificaci√≥n del sistema recibida por alg√∫n enlace difiere repentinamente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">del valor de trabajo actual</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, este enlace se elimina de la interfaz agregada hasta que se corrige la situaci√≥n. </font><font style="vertical-align: inherit;">Ahora cambiamos a la parte </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> del valor actual del sistema de LACP-id-socio - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y los interruptores en el lado </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - el valor del sistema-id actual de LACP-socio - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si necesita cambiar la interfaz agregada, podemos hacer dos formas diferentes:</font></font></b></blockquote><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todo 1 - Simple</font></font></b>
                        <div class="spoiler_text"><b>     A</b>.      .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/4x/y3/1f/4xy31fons85dmc1xqmyoatx3cok.jpeg"></div></a><br>
       <b>N</b>,       LACP,   <b>Po D</b>   <b>N</b>      <b>system-id N</b>.<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/9o/-x/d2/9o-xd2p6oyk3x_yxroz_tlh6hbc.jpeg"></div></a><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todo 2: minimizar el descanso</font></font></b>
                        <div class="spoiler_text"><b>   2  Link 2</b>.     <b></b>  <b>D</b>       ,      .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/hw/u-/zy/hwu-zy2rypxofaqv9llskenulbm.jpeg"></div></a><br>
<b> Link 2   N2</b>.   <b>N</b>     <b>Po DN</b>,   <b>N2</b>    LACPDU <b>system-id N</b>.       ,   <b>N2</b>    ,   <b>Link 2</b>,       <b>Up</b>,     LACPDU      .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/cw/cy/st/cwcysth25wi_quoldhjghlysgx8.jpeg"></div></a><br>
  ,   <b>D2</b>    <b>Po A</b>   <b>Link 2   system-id N,      system-id A</b>,    <b>D</b>  <b>Link 2</b>     <b>Po A</b>.  <b>N</b>    <b>Link 2</b>  ,          LACP-  <b>D2</b>.     <b>Link 2</b>  .<br>
<br>
<b>    Link 1   A1</b>,     <b></b>  <b>D</b>   .  ,    <b>D</b>     system-id   <b>Po A</b>.<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/me/uw/8u/meuw8uq0g5lglbxkt6qwbdiodtg.jpeg"></div></a><br>
   <b>D</b>  <b>N</b>    system-id <b>A-N</b>   <b>Po A</b>  <b>Po DN</b>,        <b>Link 2</b>.     ,  ,  2 .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/rj/zs/ai/rjzsai50lw8dbbxbk0ntlicofoa.jpeg"></div></a><br>
<b>     Link 1   N1</b>,       <b>Po A</b>  <b>Po DN</b>.           system-id    ,    .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/vd/8_/3c/vd8_3cszxwsxtwdcrewohql3arg.jpeg"></div></a><br>
</div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enlaces adicionales</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero el cambio se puede hacer sin la presencia de un ingeniero en el momento del cambio. </font><font style="vertical-align: inherit;">Para ello, es necesario comprobar la validez de laicos enlaces adicionales entre los </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> switches de distribuci√≥n </font><font style="vertical-align: inherit;">y los nuevos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> switches de agregaci√≥n </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/du/sb/3h/dusb3hcwgnj_rt8kgkusiitltdk.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estamos estableciendo nuevos enlaces entre los </font><font style="vertical-align: inherit;">conmutadores de </font><font style="vertical-align: inherit;">agregaci√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y todos los conmutadores de distribuci√≥n POD. Esto requiere el orden y la colocaci√≥n de los cables de conexi√≥n adicionales, e instalar transceptores adicionales en ambos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Podemos hacer esto porque tenemos </font><font style="vertical-align: inherit;">puertos libres </font><font style="vertical-align: inherit;">en los conmutadores </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font><font style="vertical-align: inherit;">cada POD (o los liberamos primero). </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado, cada POD est√° f√≠sicamente conectado por dos enlaces a los viejos interruptores A y a los nuevos interruptores N.</font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/32/wj/m-/32wjm-s5ehe6o1vlkvtrhcpn_mq.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se forman dos interfaces agregadas </font><font style="vertical-align: inherit;">
en el conmutador </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Po A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con los enlaces </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enlace 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enlace 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Po N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con los enlaces </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enlace N1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enlace N2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En esta etapa, verificamos la conexi√≥n correcta de las interfaces y los enlaces, los niveles de se√±ales √≥pticas en ambos extremos de los enlaces (a trav√©s de la informaci√≥n DDM de los interruptores), incluso podemos verificar la capacidad de trabajo del enlace bajo carga o monitorear el estado de las se√±ales √≥pticas y las temperaturas del transceptor durante un par de d√≠as. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tr√°fico todav√≠a se transmite a trav√©s de la </font><font style="vertical-align: inherit;">interfaz </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Po A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mientras que la interfaz </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Po N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est√° </font><font style="vertical-align: inherit;">libre de tr√°fico. La configuraci√≥n de las interfaces es aproximadamente la siguiente:</font></font><br>
<br>
<pre><code class="plaintext hljs">Interface Port-channel A<font></font>
Switchport mode trunk<font></font>
Switchport allowed vlan C1, C2<font></font>
<font></font>
Interface Port-channel N<font></font>
Switchport mode trunk<font></font>
Switchport allowed vlan none</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los interruptores D, como regla, admiten el cambio de configuraci√≥n de sesi√≥n; se utilizan los modelos de interruptor que tienen esta funcionalidad. Entonces podemos cambiar la configuraci√≥n de las interfaces Po A y Po N de una vez:</font></font><br>
<br>
<pre><code class="plaintext hljs">Configure session<font></font>
Interface Port-channel A<font></font>
Switchport allowed vlan none<font></font>
Interface Port-channel N<font></font>
Switchport allowed vlan C1, C2<font></font>
Commit</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego, el cambio de configuraci√≥n suceder√° lo suficientemente r√°pido, y la interrupci√≥n ser√°, en la pr√°ctica, no m√°s de 5 segundos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este m√©todo nos permite realizar todo el trabajo preparatorio por adelantado, realizar todas las verificaciones necesarias, coordinar el trabajo con los participantes en el proceso, pronosticar en detalle las acciones para la producci√≥n del trabajo, sin trabajo creativo, cuando "todo sali√≥ mal", y tener a la mano un plan para volver a la configuraci√≥n anterior. </font><font style="vertical-align: inherit;">El trabajo en este plan lo lleva a cabo un ingeniero de red sin la presencia de un centro de datos en el sitio del ingeniero que f√≠sicamente realiza la conmutaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo que es m√°s importante con este m√©todo de conmutaci√≥n: todos los enlaces nuevos ya est√°n preconfigurados para el monitoreo. </font><font style="vertical-align: inherit;">Errores, inclusi√≥n de enlaces en la unidad, carga de enlaces: toda la informaci√≥n necesaria ya est√° en el sistema de monitoreo y ya est√° dibujada en los mapas.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√≠a D</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vaina</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Elegimos el menos doloroso para los clientes y el menos propenso a la ruta de cambio "algo sali√≥ mal" con enlaces adicionales. </font><font style="vertical-align: inherit;">As√≠ que durante un par de noches cambiamos todos los POD a los nuevos conmutadores de agregaci√≥n.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/lm/c0/oa/lmc0oafevg5twt9amzd2thudqgm.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero queda por cambiar el equipo que proporciona servicios de DCI.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L2</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el caso de equipos que proporcionan conectividad L2, no podr√≠amos llevar a cabo un trabajo similar con enlaces adicionales. </font><font style="vertical-align: inherit;">Hay al menos dos razones para esto:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Falta de puertos libres de la velocidad requerida en los conmutadores VXLAN.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Falta de funcionalidad para cambios de configuraci√≥n de sesi√≥n en conmutadores VXLAN.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No cambiamos los enlaces "uno a la vez" con un descanso solo durante la aprobaci√≥n de un nuevo par de identificaci√≥n del sistema, ya que no ten√≠amos una confianza del 100% de que el procedimiento funcionar√≠a correctamente, y una prueba en el laboratorio mostr√≥ que, en caso si "algo sale mal", todav√≠a tenemos una interrupci√≥n en la comunicaci√≥n, y lo peor no es solo para los clientes que tienen conectividad L2 con otros centros de datos, sino en general para todos los clientes de este centro de datos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Realizamos trabajos de propaganda para cambiar de canales L2 con anticipaci√≥n, por lo que el n√∫mero de clientes afectados por las operaciones en los conmutadores VXLAN ya era varias veces menor que hace un a√±o. </font><font style="vertical-align: inherit;">Como resultado, decidimos interrumpir la comunicaci√≥n en el servicio de conectividad L2, siempre que mantengamos el funcionamiento normal de los servicios de red locales en un centro de datos. </font><font style="vertical-align: inherit;">Adem√°s, el SLA para este servicio ofrece la posibilidad de trabajo programado con un descanso.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPor qu√© recomendamos a todos que cambien a usar L3VPN al organizar los servicios DCI? Una de las razones es la capacidad de trabajar en uno de los enrutadores que proporcionan este servicio, simplemente con una reducci√≥n en el nivel de redundancia a N + 0, sin interrupci√≥n en la comunicaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere el esquema de prestaci√≥n de servicios m√°s de cerca. En este servicio, el segmento L2 va de los servidores cliente solo a los enrutadores Selectel L3VPN. En los enrutadores, la red del cliente finaliza. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada servidor cliente, por ejemplo, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el diagrama anterior, tiene sus propias direcciones IP privadas: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.2/24 para el servidor S2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.3/24 para el servidor S3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Direcciones </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.252/24</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.253/24</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">asignado por Selectel a los enrutadores </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , respectivamente. </font><font style="vertical-align: inherit;">La direcci√≥n IP </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.254/24 es una direcci√≥n VIP VRRP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en los enrutadores Selectel.</font></font><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puede </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">leer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> m√°s sobre el servicio L3VPN </font><font style="vertical-align: inherit;">en nuestro blog.</font></font></b></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasta el momento de cambiar todo parec√≠a aproximadamente como en el diagrama:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/lu/z9/_l/luz9_l1950pk5r3vr5hrn-tdnss.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dos routers </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> estaban conectados a la vieja agregaci√≥n conmutador </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">El maestro para las direcciones VIP VRRP 10.0.0.254 es el enrutador </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Tiene la prioridad establecida en esta direcci√≥n m√°s alta que la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">del</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> enrutador </font><b><font style="vertical-align: inherit;">L3VPN-2</font></b><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="plaintext hljs">unit 1006 {<font></font>
    description C2;<font></font>
    vlan-id 1006;<font></font>
    family inet {       <font></font>
        address 10.0.0.252/24 {<font></font>
            vrrp-group 1 {<font></font>
                priority 200;<font></font>
                virtual-address 10.100.0.254;<font></font>
                preempt {<font></font>
                    hold-time 120;<font></font>
                }<font></font>
                accept-data;<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El servidor S2 usa la puerta de enlace 10.0.0.254 para comunicarse con servidores en otras ubicaciones. </font><font style="vertical-align: inherit;">Por lo tanto, desconectar el enrutador L3VPN-2 de la red (por supuesto, si primero lo desconecta del dominio MPLS) no afecta la conectividad de los servidores del cliente. </font><font style="vertical-align: inherit;">En este punto, el nivel de redundancia del circuito simplemente disminuye.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/gj/oi/sk/gjoiskqum4kmknfm8u36cf5v44w.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, podemos volver a conectar de forma segura el enrutador </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> al par de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> interruptores </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dise√±e enlaces, cambie transceptores. </font><font style="vertical-align: inherit;">Las interfaces l√≥gicas del enrutador, de las cuales depende el trabajo de los servicios del cliente, hasta que se confirme que todo funciona como deber√≠a, se desactivan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de verificar los enlaces, transceptores, niveles de se√±al, niveles de error en las interfaces, el enrutador entra en funcionamiento, pero ya est√° conectado a un nuevo par de conmutadores.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/jb/dh/cs/jbdhcsuakuma1fofufzc-pp0poy.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, bajamos la prioridad VRRP del enrutador L3VPN-1, y la direcci√≥n VIP 10.0.0.254 se mueve al enrutador L3VPN-2. </font><font style="vertical-align: inherit;">Estos trabajos tambi√©n se llevan a cabo sin interrupci√≥n de la comunicaci√≥n.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/ix/uq/lq/ixuqlq5wx5veluojqgpwfy8yewu.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Transferencia direcci√≥n VIP al router 10.0.0.254 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> le permite desactivar el router </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sin interrupci√≥n de contacto para el cliente y conectarlo a tener un nuevo par de agregaci√≥n de los interruptores </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/lx/vo/jv/lxvojv_hiozuurqfsyonclwjez4.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si devolver o no VRRP VIP al enrutador L3VPN-1 es otro asunto, y si regresa, se hace sin interrupci√≥n.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de todos estos pasos, realmente reemplazamos los conmutadores de agregaci√≥n en uno de nuestros centros de datos, al tiempo que minimizamos los descansos para nuestros clientes.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/fw/d1/jx/fwd1jxarjvfl1agcko-4fhezx7s.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo lo que queda es desmantelar. </font><font style="vertical-align: inherit;">Desmontaje de conmutadores antiguos, desmontaje de enlaces antiguos entre los conmutadores A y D, desmontaje de transceptores de estos enlaces, fijaci√≥n de monitorizaci√≥n, fijaci√≥n de diagramas de red en documentaci√≥n y monitorizaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podemos usar interruptores, transceptores, cables de conexi√≥n, AOC, DAC despu√©s de la conmutaci√≥n, en otros proyectos u otras conmutaciones similares. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Natasha, cambiamos todo!"</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es498352/index.html">SHISHUA: el generador de n√∫meros pseudoaleatorios m√°s r√°pido del mundo</a></li>
<li><a href="../es498354/index.html">C√≥mo traducir "Lista de deseos" en "hardware", o semi-escritorio semi-m√≥vil semi-ideal</a></li>
<li><a href="../es498358/index.html">Aprenda franc√©s o c√≥mo obtener un adaptador universal de un esc√°ner de diagn√≥stico PSA</a></li>
<li><a href="../es498360/index.html">Evaluaci√≥n integrada de m√©tricas de carga del servidor</a></li>
<li><a href="../es498362/index.html">Kingston mantiene el liderazgo en env√≠os SSD: ¬øc√≥mo lo hacemos?</a></li>
<li><a href="../es498370/index.html">SAP UI5 y Windows de confirmaci√≥n: nuevamente sobre el contexto</a></li>
<li><a href="../es498372/index.html">Simulador de red tutorial ns-3. Cap√≠tulo 5</a></li>
<li><a href="../es498374/index.html">Computaci√≥n GPU: por qu√©, cu√°ndo y c√≥mo. Adem√°s de algunas pruebas</a></li>
<li><a href="../es498378/index.html">Anuncio de la escuela vespertina de Slurm por Agile</a></li>
<li><a href="../es498380/index.html">La ventana de Overton en acci√≥n: c√≥mo se usa una pandemia para limitar nuestra libertad</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>