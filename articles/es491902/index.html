<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•ò üçÄ üëàüèª Escribir un editor WYSIWYG simple con ProseMirror üçè üßõüèª üèÇüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cuando Sports.ru necesitaba su propio editor WYSIWYG , decidimos hacerlo basado en la biblioteca ProseMirror. Una de las caracter√≠sticas clave de esta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Escribir un editor WYSIWYG simple con ProseMirror</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sports_ru/blog/491902/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuando Sports.ru necesitaba su propio </font><font style="vertical-align: inherit;">editor </font></font><abbr title="Lo que ves, es lo que tienes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WYSIWYG</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , decidimos hacerlo basado en la biblioteca ProseMirror. </font><font style="vertical-align: inherit;">Una de las caracter√≠sticas clave de esta herramienta es su modularidad y amplias posibilidades de personalizaci√≥n, por lo que con su ayuda puede adaptar el editor a cualquier proyecto. </font><font style="vertical-align: inherit;">En particular, ProseMirror ya se est√° utilizando en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The New York Times</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Guardian</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">En este art√≠culo, hablaremos sobre c√≥mo escribir su editor WYSIWYG usando ProseMirror.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kf/to/_b/kfto_btseokytxzu3k5jsbltebs.png" alt="Escribir un editor WYSIWYG simple con ProseMirror"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descripci√≥n general de ProseMirror</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La autora de ProseMirror es </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marijn Haverbeke,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conocida en la comunidad de desarrolladores frontend principalmente como la autora del popular libro </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eloquent Javascript</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Al comienzo de nuestro trabajo (oto√±o de 2018), no hab√≠a materiales para trabajar con esta biblioteca, excepto documentaci√≥n oficial y tutoriales del autor. El paquete de documentaci√≥n del autor incluye varias secciones, las m√°s √∫tiles son la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gu√≠a ProseMirror</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (descripci√≥n de conceptos b√°sicos) y el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manual de referencia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (especificaci√≥n de la biblioteca). A continuaci√≥n se muestra un resumen de las ideas clave de la Gu√≠a ProseMirror.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ProseMirror siempre almacena el estado de un documento en su propia estructura de datos. Y ya desde esta estructura en tiempo de ejecuci√≥n, los elementos DOM correspondientes se generan en la p√°gina con la que interact√∫a el usuario final. Adem√°s, ProseMirror almacena no solo el estado actual (estado), sino tambi√©n el historial de cambios anteriores, que pueden revertirse si es necesario. Cualquier cambio en el estado debe ocurrir a trav√©s de transacciones, las manipulaciones habituales con el √°rbol DOM no funcionar√°n directamente aqu√≠. Una transacci√≥n es una abstracci√≥n que describe la l√≥gica de un cambio de estado paso a paso. La esencia de su trabajo es una reminiscencia de enviar y ejecutar acciones en bibliotecas para la gesti√≥n del estado, por ejemplo, Redux y Vuex.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La biblioteca en s√≠ est√° construida sobre m√≥dulos independientes que se pueden deshabilitar o agregar seg√∫n las necesidades. </font><font style="vertical-align: inherit;">Una lista de los m√≥dulos principales que pensamos que ser√≠a necesaria para casi todos:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo de prosemirror</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : un modelo de documento que describe todos los componentes de un documento, sus propiedades y acciones que se pueden realizar en ellos;</font></font><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prosemirror-state</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : una estructura de datos que describe el estado del documento creado en un determinado momento, incluidos fragmentos y transacciones seleccionados para pasar de un estado a otro;</font></font><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prosemirror-view</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : presentaci√≥n del documento en el navegador y las herramientas para que el usuario pueda interactuar con el documento;</font></font><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prosemirror-transform</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : una funci√≥n para almacenar el historial de transacciones, con la ayuda de las transacciones que se implementan y que le permite retroceder a estados anteriores o realizar un desarrollo conjunto de un documento</font></font><br>
 </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s de este conjunto m√≠nimo, los siguientes m√≥dulos tambi√©n pueden ser √∫tiles:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comandos de prosemirror</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : un conjunto de comandos listos para editar. </font><font style="vertical-align: inherit;">Como regla general, debe escribir algo m√°s complejo o individual, pero Marijn Haverbeke ya ha hecho algunas cosas por nosotros, por ejemplo, eliminar un fragmento de texto seleccionado;</font></font><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prosemirror-keymap</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : un m√≥dulo de dos m√©todos para especificar m√©todos abreviados de teclado;</font></font><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">prosemirror-history</a> ‚Äì          , ..    ,    ,  ,       ;<br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">prosemirror-schema-list</a> ‚Äì      ,     (      DOM-,   ,      ).<br>
 </li>
</ul><br>
<h2>   ProseMirror</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comencemos creando un esquema del editor. El esquema en ProseMirror define una lista de elementos que pueden estar en nuestro documento y sus propiedades. Cada elemento tiene un m√©todo toDOM, que determina c√≥mo se representar√° este elemento en el √°rbol DOM de la p√°gina web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El principio de WYSIWYG se realiza precisamente en el hecho de que al crear el esquema tenemos control total sobre c√≥mo se muestra el contenido editable en la p√°gina y, en consecuencia, podemos dar a cada elemento una estructura HTML y establecer estilos como el contenido que se va a ver. Los nodos se pueden crear y personalizar seg√∫n sus requisitos, en particular, lo m√°s probable es que necesite p√°rrafos, encabezados, listas, im√°genes, p√°rrafos, medios.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponga que cada p√°rrafo del texto debe estar envuelto en una etiqueta "p" con la clase "p√°rrafo", que determina las reglas de los estilos de p√°rrafo necesarios para el dise√±o. Entonces el esquema ProseMirror en este caso puede verse as√≠:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { Schema } <span class="hljs-keyword">from</span> <span class="hljs-string">"prosemirror-model"</span>;<font></font>
<font></font>
<span class="hljs-keyword">const</span> mySchema = <span class="hljs-keyword">new</span> Schema({
    <span class="hljs-attr">nodes</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;    <span class="hljs-attr">doc</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">content</span>: <span class="hljs-string">'block'</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-attr">text</span>: {},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-attr">paragraph</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    <span class="hljs-attr">content</span>: <span class="hljs-string">'inline'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;<span class="hljs-attr">group</span>: <span class="hljs-string">'block'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="hljs-attr">toDOM</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toDOM</span>(<span class="hljs-params">node</span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    <span class="hljs-keyword">return</span> [<span class="hljs-string">'p'</span>, {<span class="hljs-attr">class</span>: <span class="hljs-string">'paragraph'</span>}, <span class="hljs-number">0</span>];<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  },<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  },<font></font>
    },<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, importamos el constructor para crear nuestro esquema y pasarle un objeto que describa los nodos (en adelante denominados nodos) en el futuro editor. Los nodos son abstracciones que describen los tipos de contenido que se crean. Por ejemplo, con dicho esquema, solo los nodos de tipos de texto y p√°rrafo pueden estar en el editor. Doc es el nombre del nodo de nivel superior, que consistir√° solo en elementos de bloque, es decir en este caso solo de p√°rrafos (porque no hemos descrito otros). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El texto son nodos de texto, algo similar a los nodos DOM de texto. Usando la propiedad group, podemos agrupar nuestros nodos de diferentes maneras para que se pueda acceder m√°s f√°cilmente en c√≥digo. Los grupos se pueden configurar de cualquier manera conveniente para nosotros. En nuestro caso, dividimos los nodos solo en bloque e en l√≠nea. El texto est√° en l√≠nea de forma predeterminada, por lo que se puede omitir expl√≠citamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una cosa completamente diferente es el p√°rrafo (p√°rrafo). </font><font style="vertical-align: inherit;">Anunciamos que los p√°rrafos consisten en elementos de texto en l√≠nea y tambi√©n tienen su propia representaci√≥n en el DOM. </font><font style="vertical-align: inherit;">Un p√°rrafo ser√° un elemento de bloque, aproximadamente en el sentido de que lo son los elementos de bloque DOM. </font><font style="vertical-align: inherit;">De acuerdo con este esquema, los p√°rrafos de la p√°gina se presentar√°n en el editor en l√≠nea de la siguiente manera:</font></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"paragraph"</span>&gt;</span>Content of the paragraph<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora puede crear el editor en s√≠:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { EditorState } <span class="hljs-keyword">from</span> <span class="hljs-string">"prosemirror-state"</span>;
<span class="hljs-keyword">import</span> { EditorView } <span class="hljs-keyword">from</span> <span class="hljs-string">"prosemirror-view"</span>;
<span class="hljs-keyword">import</span> { Schema } <span class="hljs-keyword">from</span> <span class="hljs-string">"prosemirror-model"</span>;<font></font>
<font></font>
<span class="hljs-keyword">const</span> mySchema = <span class="hljs-keyword">new</span> Schema({
    <span class="hljs-attr">nodes</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;    <span class="hljs-attr">doc</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    <span class="hljs-attr">content</span>: <span class="hljs-string">'block+'</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-attr">text</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    <span class="hljs-attr">group</span>: <span class="hljs-string">'inline'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-attr">inline</span>: <span class="hljs-literal">true</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<span class="hljs-attr">paragraph</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-attr">content</span>: <span class="hljs-string">'inline*'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-attr">group</span>: <span class="hljs-string">'block'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-attr">toDOM</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toDOM</span>(<span class="hljs-params">node</span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    <span class="hljs-keyword">return</span> [<span class="hljs-string">'p'</span>, {<span class="hljs-attr">class</span>: <span class="hljs-string">'paragraph'</span>}, <span class="hljs-number">0</span>];<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;    },<font></font>
    },<font></font>
});<font></font>
<font></font>
<span class="hljs-comment">/**
 * @classdesc  
 * @param {Object} el DOM-,    
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Wysiwyg</span> </span>{
    <span class="hljs-keyword">constructor</span>(el) {
        <span class="hljs-keyword">this</span>.el = el;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/**
      * <span class="hljs-doctag">@description </span>    
&nbsp;    &nbsp;* <span class="hljs-doctag">@param <span class="hljs-type">{Object}</span> </span>content ,    
&nbsp;     */</span><font></font>
    setArticle(content) {<font></font>
        <span class="hljs-keyword">const</span> state = EditorState.fromJSON(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;        {<span class="hljs-attr">schema</span>: mySchema},<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;        content,<font></font>
        );<font></font>
        <span class="hljs-keyword">const</span> view = <span class="hljs-keyword">new</span> EditorView(<span class="hljs-keyword">this</span>.el, {<span class="hljs-attr">state</span>: state});<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al principio, como de costumbre, importamos todos los constructores necesarios de los m√≥dulos correspondientes y tomamos el esquema descrito anteriormente. Creamos el editor como una clase con un conjunto de m√©todos necesarios. Para que la p√°gina web pueda editar y crear contenido, debe crear un estado, utilizando el dise√±o y el contenido del art√≠culo, y presentando el contenido del estado actual en el elemento ra√≠z dado. Ponemos estas acciones en el m√©todo setArticle, excepto que hasta ahora no se necesita nada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al mismo tiempo, el contenido es opcional. Si no es as√≠, obtienes un editor vac√≠o, y el contenido ya se puede crear directamente en el acto. Digamos que tenemos un archivo HTML con este marcado:</font></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para crear un editor WYSIWYG vac√≠o en una p√°gina, solo necesita unas pocas l√≠neas en un script que se ejecuta en una p√°gina con este marcado:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//     </span>
<span class="hljs-keyword">import</span> Wysiwyg <span class="hljs-keyword">from</span> <span class="hljs-string">'wysiwyg'</span>;<font></font>
<font></font>
<span class="hljs-keyword">const</span> root = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'editor'</span>);
<span class="hljs-keyword">const</span> myWysiwyg = <span class="hljs-keyword">new</span> Wysiwyg(root);<font></font>
myWysiwyg.setArticle();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con este c√≥digo, puede escribir cualquier texto desde cero. </font><font style="vertical-align: inherit;">En este punto, ya puedes ver c√≥mo funciona ProseMirror. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando un usuario escribe texto en este editor, se producen transacciones de estado. </font><font style="vertical-align: inherit;">Por ejemplo, si escribe la frase "Este es mi nuevo y genial editor WYSIWYG" en el editor con el esquema anterior, ProseMirror responder√° a la entrada del teclado invocando el conjunto apropiado de transacciones, y una vez completada la entrada, el contenido en el estado del documento se ver√° as√≠:</font></font><br>
<br>
<pre><code class="javascript hljs">content: [<font></font>
    {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;    <span class="hljs-attr">type</span>: <span class="hljs-string">'paragraph'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-attr">value</span>: <span class="hljs-string">'    WYSIWYG-'</span>,<font></font>
    },<font></font>
]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si queremos que alg√∫n texto, por ejemplo, el contenido de un art√≠culo ya creado anteriormente, se abra en el editor para editarlo, entonces este contenido debe corresponder al esquema creado anteriormente. </font><font style="vertical-align: inherit;">Entonces el c√≥digo de inicializaci√≥n del editor se ver√° un poco diferente:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//     </span>
<span class="hljs-keyword">import</span> Wysiwyg <span class="hljs-keyword">from</span> <span class="hljs-string">'wysiwyg'</span>;<font></font>
<font></font>
<span class="hljs-keyword">const</span> root = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'editor'</span>);
<span class="hljs-keyword">const</span> myWysiwyg = <span class="hljs-keyword">new</span> Wysiwyg(root);
<span class="hljs-keyword">const</span> content = {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'doc'</span>,
    <span class="hljs-attr">content</span>: [<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;    {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    <span class="hljs-attr">type</span>: <span class="hljs-string">'paragraph'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-attr">value</span>: <span class="hljs-string">'Hello, world!'</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<span class="hljs-attr">type</span>: <span class="hljs-string">'paragraph'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-attr">value</span>: <span class="hljs-string">'This is my first wysiwyg-editor'</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;}<font></font>
    ],<font></font>
};<font></font>
myWysiwyg.setArticle(content);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Hurra! </font><font style="vertical-align: inherit;">Creamos nuestro primer editor, que puede crear una p√°gina limpia para crear contenido nuevo y abrir los existentes para editarlos.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu√© hacer con el editor a continuaci√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero incluso con un conjunto completo de nodos, nuestro editor a√∫n carece de funciones importantes: formatear texto, p√°rrafos. Para esto, adem√°s de los nodos, tambi√©n se debe transferir al circuito un objeto con configuraciones para formatear, marcas. Por simplicidad, los llamamos as√≠: marcas. Y para controlar la adici√≥n, eliminaci√≥n y formateo de todos estos elementos, los usuarios necesitar√°n un men√∫. Los men√∫s se pueden agregar utilizando complementos personalizados que estilizan los objetos del men√∫ y describen el cambio en el estado de un documento al elegir ciertas acciones.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando complementos, puede crear cualquier dise√±o que ampl√≠e las caracter√≠sticas integradas del editor. La idea principal de los complementos es que procesan ciertas acciones del usuario para generar transacciones que les correspondan. Por ejemplo, si desea hacer clic en el icono de la lista en el men√∫ para crear una nueva lista vac√≠a y mover el cursor al comienzo del primer elemento, entonces definitivamente debemos describir esta transacci√≥n en el complemento correspondiente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede leer m√°s sobre la configuraci√≥n de formato y los complementos en la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentaci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oficial </font><font style="vertical-align: inherit;">, as√≠ como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ejemplos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> muy peque√±os √∫tiles </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">sobre el</font></a><font style="vertical-align: inherit;"> uso de las funciones de ProseMirror </font><font style="vertical-align: inherit;">pueden ser muy √∫tiles </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si est√° interesado en c√≥mo integramos un nuevo editor basado en ProseMirror en un proyecto existente, hablamos de esto en otro </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">art√≠culo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es491886/index.html">KnowledgeConf 2020 Online: implementando la gesti√≥n del conocimiento paso a paso</a></li>
<li><a href="../es491888/index.html">GitLab CI: 6 caracter√≠sticas de los √∫ltimos lanzamientos que hemos estado esperando</a></li>
<li><a href="../es491890/index.html">Conducir anatom√≠a: SSD</a></li>
<li><a href="../es491896/index.html">C√≥mo en Cyan mejoramos un producto a trav√©s de la investigaci√≥n de la experiencia del usuario</a></li>
<li><a href="../es491900/index.html">Flexibilidad y automatizaci√≥n en el aprendizaje autom√°tico.</a></li>
<li><a href="../es491904/index.html">C√≥mo escribir c√≥digo seguro de Python. Comidas Kushal Das</a></li>
<li><a href="../es491916/index.html">Crear entornos virtuales e instalar bibliotecas para Python 3 en PyCharm IDE</a></li>
<li><a href="../es491924/index.html">PVS-Studio analizador beta test # en Linux y macOS</a></li>
<li><a href="../es491926/index.html">Desarrollo de aplicaciones m√≥viles multiplataforma en 2020</a></li>
<li><a href="../es491934/index.html">Perfiles psicol√≥gicos de los inversores burs√°tiles: c√≥mo funciona</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>