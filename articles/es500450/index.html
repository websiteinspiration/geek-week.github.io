<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëò üèîÔ∏è üôÖ Hacer un teclado MIDI a partir de un sintetizador para ni√±os viejos üíÇ üë©üèø‚Äçüöí üëí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Un d√≠a, volviendo a casa, cerca del vertedero de basura en la entrada, vi un sintetizador de juguetes para ni√±os viejos. Pas√© por alto, ya que era "pe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Hacer un teclado MIDI a partir de un sintetizador para ni√±os viejos</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500450/"><img src="https://habrastorage.org/webt/-g/1_/nu/-g1_nu7zf-kudqjkv5ygvqjysao.jpeg" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un d√≠a, volviendo a casa, cerca del vertedero de basura en la entrada, vi un sintetizador de juguetes para ni√±os viejos. Pas√© por alto, ya que era "pecaminoso" sacarlo de la basura, pero en mi coraz√≥n quer√≠a sacarlo de all√≠. Ya a altas horas de la noche, alrededor de las 2 en punto, decid√≠ ver si ella todav√≠a estaba parada all√≠. ¬°Y s√≠, ella todav√≠a estaba all√≠! En apariencia, estaba completamente completa y limpia, por lo que no hab√≠a aprensi√≥n para no tomarla. Entonces s√≠, la llev√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hace tiempo que quer√≠a un piano para m√≠, no soy m√∫sico profesional, pero solo para complacerme, ¬øpor qu√© no? Al comprar algo "por el mimo" me "estrangul√≥ un sapo", y aqu√≠, un juguete gratis. Cuando lo saqu√© de la basura, ni siquiera pens√© en usarlo como un juguete para ni√±os, inmediatamente pens√©: "Ohhhh ... una buena base para intentar hacer un teclado MIDI".</font></font><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como ya tengo cierta experiencia en la comunicaci√≥n con teclados profesionales y teclados MIDI, entend√≠ de inmediato todas las desventajas de mi idea. Es decir, un juguete seguir√° siendo un juguete. Sobre esta base, ser√° imposible darse cuenta del poder de las pulsaciones de teclas. Las propias teclas de pl√°stico "livianas", que tambi√©n est√°n incompletas, no permitir√°n realizar algo que valga la pena. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En primer lugar, el sintetizador de juguetes se desmont√≥ "al tornillo", todo el pl√°stico se lav√≥ bien con jab√≥n. Los tableros y los grupos de contacto de llaves tambi√©n se limpian.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s del desmontaje, se comprendi√≥ por qu√© la gente lo tir√≥. Un juguete (no s√© por qu√©: de vez en cuando, por la calidad de los componentes chinos o por un funcionamiento dif√≠cil) en primer lugar: los altavoces incorporados se desmoronaron, y en segundo lugar: un conector roto de ellos se clav√≥ en la toma de auriculares, por lo que pr√°cticamente no hab√≠a forma de sacarlo . Probablemente, despu√©s de que el juguete dej√≥ de jugar con los altavoces incorporados, lo usaron con auriculares, y luego, despu√©s de que rompieron el conector all√≠, simplemente lo tiraron.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el interior, el sintetizador de juguete constaba de tres tableros que estaban interconectados por un bucle de cable. La placa central, que era responsable de generar sonido y otras cosas, se solt√≥ inmediatamente de las otras dos placas y se dej√≥ a un lado. En los otros dos tableros hab√≠a contactos para los botones en el panel frontal del juguete y las teclas del piano. Les solde√© los conectores PBS, especialmente porque el paso del agujero en las placas era de solo 2,54 mm. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bp/mh/qc/bpmhqcxmblsmtoqy7zu7wfbqwm4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/nj/dr/us/njdrusxpjqa57hm8ezczbzidcu0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, pas√© un par de horas dibujando diagramas de estos tableros con llaves. Al final result√≥ que, el esquema es un teclado de matriz simple. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yt/uh/m6/ytuhm6oamte_d4mo60zuvzucqfm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la imagen en c√≠rculos amarillos, los n√∫meros son los n√∫meros de los contactos "horizontales", y los n√∫meros en las teclas son los n√∫meros de los contactos "verticales" en el conector PBS-13 en la placa del teclado.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/m6/qc/lk/m6qclkogjo6vprfkk4ywi2qtqzq.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/n0/lz/tf/n0lztfhulhpdeytl2ltfl0zxqna.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/bw/w2/pa/bww2pa-cgsmxubbn2ixa2sr373w.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, todo esto fue arrojado a una esquina y desempolvado durante un a√±o. Y luego comenz√≥ el per√≠odo de autoaislamiento ... Se volvi√≥ aburrido y quise hacer algo con mis propias manos, especialmente porque no hay a d√≥nde ir, y es imposible ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al final, decid√≠ tratar de terminar este juguete al menos un poco. La placa Arduino se tom√≥ como base para el controlador, y dado que la cantidad de llaveros es mayor que la cantidad de pines Arduino UNO, decid√≠ usar los registros de desplazamiento 74HC595 y 74HC165. Como resultado, obtuvimos tal esquema.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_j/y9/m9/_jy9m906okczf38_zjmeyvy9qbc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El circuito se ensambl√≥ originalmente en una placa de prueba sin soldadura. Para probar la operabilidad del circuito (que no hay errores en las conexiones en ninguna parte), se desarroll√≥ un programa de prueba que mostr√≥ que todo parec√≠a funcionar. El algoritmo del programa de prueba era simple: una de las salidas del chip de salida de cambio se activa y los valores se leen en un ciclo desde el chip de entrada de cambio, mientras se presionan las teclas. A primera vista, nada presagiaba problemas ... y todo parec√≠a funcionar bien ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bx/uh/an/bxuhanfuxtixrojargnmaeqv5oe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los siguientes d√≠as, lentamente trabaj√© en "tarea", es decir, soldar cuidadosamente todos los componentes del tablero en una placa de pruebas. Lo recog√≠ todo de lo que estaba en mi casa. Tom√≥ el Arduino NANO como tablero de control.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2o/h9/f-/2oh9f-a8fplwk8bqnt5dultsxee.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tal "emparedado" de las tablas se debe al hecho de que las dos tablas del juguete (una con botones y la otra con el teclado) se encuentran en diferentes niveles, y antes de soldarlo todo pens√©: "¬øEs posible conectarlo de alguna manera? ¬øQu√© componentes tengo en casa para parecer m√°s o menos buenos? Y as√≠ result√≥ este dise√±o de dos placas interconectadas por conectores. Desde mi punto de vista, para la opci√≥n de casa, cuando nos sentamos en autoaislamiento, result√≥ bastante bien. Todo lo que ten√≠a que hacer era cortar la placa de pruebas y modificar ligeramente el cuerpo del juguete para poder conectar el cable USB a la placa Arduino.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bb/xz/md/bbxzmdv5zabj-jq6hlyg7jhjpxy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al finalizar el programa de prueba, me di cuenta de que el dispositivo no funciona exactamente como quer√≠a. El algoritmo era simple: encienda cada salida del chip 74HC595, teniendo en cuenta el estado de las entradas del chip 74HC165, y escriba el resultado en variables separadas. En total, 5 salidas del 74HC595 est√°n conectadas al teclado, por lo que al final obtuve 40 bits (5 * 8) de datos despu√©s de esta encuesta. Se emiti√≥ una cadena de 40 bits a la consola y se presionaron las teclas para ver c√≥mo el dispositivo maneja las pulsaciones simult√°neas de varias teclas.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/d0/ra/o7/d0rao77gsxvrvtbeumy1ufguxsw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ es donde surgi√≥ el problema: si presiona una tecla, todo estaba bien, pero cuando intenta presionar m√°s de 2 teclas al mismo tiempo, surgi√≥ una situaci√≥n en la que era imposible predecir lo que se leer√≠a. El resultado podr√≠a ser correcto con una combinaci√≥n, y con otra podr√≠a ser completamente impredecible. El problema era que la caracter√≠stica de este esquema no se ten√≠a en cuenta. Cuando se presionan varias teclas al mismo tiempo, no solo se bloquean varias verticales del escaneo del teclado (esto est√° permitido), sino que se pueden cerrar varias l√≠neas horizontales a trav√©s de las teclas (lo que de ninguna manera est√° permitido). Puede leer m√°s sobre este problema y c√≥mo resolverlo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Eleg√≠ la "soluci√≥n cardinal" del problema, a saber: decid√≠ que para cada tecla del teclado habr√° un diodo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mi cabeza, ya comenc√© a pensar mentalmente c√≥mo tendr√≠a que cortar las pistas en el tablero y colocar el diodo en el caso de SMD en la brecha. Sub√≠ a mis cuartos de almacenamiento y vi que simplemente no ten√≠a tantos diodos en el caso de SMD (no olviden que todos nos sentamos en el autoaislamiento e ir a la tienda por componentes de radio no es muy posible, ya que estos definitivamente no son bienes esenciales). Un poco molesto, decid√≠ mirar m√°s de cerca la placa: puede ser posible colocar diodos de salida en algunas de las pistas (tambi√©n tuve algunas). Y luego vi que cada tecla tiene un puente (la placa es de un solo lado) y el circuito est√° hecho para que en lugar de este puente pueda poner un diodo. Inmediatamente pens√©: ni siquiera tiene que cortar nada, solo tiene que poner diodos de salida en lugar de puentes en todas partes.Tampoco ten√≠a tantos diodos de salida. Un pensamiento cruz√≥ por mi cabeza: "¬øquiz√°s LED?" El circuito funciona a + 5V y si coloca LED rojos que tienen una ca√≠da de voltaje m√≠nima (entre los LED), al final debe haber un nivel l√≥gico para la determinaci√≥n correcta: la tecla se presiona o no.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ff/1c/37/ff1c37wrrsclbwl0d7edw1x-ork.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con esto en mente, volv√≠ a subir a mis acciones y agarr√© los LED rojos de donde sea posible. ¬°Hab√≠a exactamente tantas como las teclas del teclado! Esta es una se√±al, pens√©, y soldamos varios LED en lugar de puentes para probar. Los resultados de la prueba mostraron que la soluci√≥n est√° funcionando. Despu√©s de eso, solde√© los LED restantes en lugar de los puentes. El programa de prueba mostr√≥ que puede presionar al menos todas las teclas al mismo tiempo, y todas se leen correctamente. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g8/i0/-b/g8i0-b1rwc2ykc3oq1hcecu-ohs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Decid√≠ no poner diodos en los botones adicionales que est√°n en el juguete, porque es poco probable que sean presionados por varias piezas a la vez. Adem√°s, en el programa todav√≠a no tengo procesamiento para hacer clic en estos botones. Bueno, todav√≠a no he decidido c√≥mo usarlos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ha llegado el momento de descubrir c√≥mo hacer que este dispositivo aparezca en su computadora como un teclado MIDI y en qu√© formato necesita enviar datos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La informaci√≥n que se encuentra en Internet me dijo que es posible hacer un teclado MIDI de Arduino de manera muy f√°cil y sencilla simplemente agregando firmware, lo que har√° que la computadora lo vea no como un puerto COM, sino como un teclado MIDI. Inicialmente, me </font><font style="vertical-align: inherit;">gui√© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">por esta decisi√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , no particularmente en c√≥mo se implementa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, cuando llegu√© a √©l y lo le√≠ cuidadosamente, me di cuenta de que mi placa Arduino NANO no ser√≠a adecuada para esta soluci√≥n, ya que ten√≠a un puerto COM basado en el chip CH340. </font><font style="vertical-align: inherit;">Para usar el firmware del enlace anterior, solo son adecuadas las tarjetas que ya tienen un puerto USB en el controlador (por ejemplo: AtMega32u4) o la comunicaci√≥n a trav√©s del puerto COM no se realiza en chips de conversi√≥n de tipo FT232RL o similares, sino en microcontroladores AtMega. </font><font style="vertical-align: inherit;">Por lo tanto, el firmware de la placa debe enviar los datos en formato MIDI al puerto COM, y en la computadora deber√° instalar y configurar el software que interceptar√° estos datos y los transmitir√° al puerto MIDI virtual. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El algoritmo para leer teclas y generar comandos MIDI fue el siguiente:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jj/-2/d6/jj-2d67yncypthxguaeyvotcvue.jpeg"><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El programa para el controlador Arduino NANO ahora se ve as√≠.</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">//    +5V<font></font>
//   ST_CP  74HC595<font></font>
#define latchPin      11<font></font>
//   SH_CP  74HC595<font></font>
#define clockPin      13<font></font>
//   DS  74HC595<font></font>
#define dataPin       12<font></font>
<font></font>
//     +5V<font></font>
#define latchPin_IN   9<font></font>
#define clockPin_IN   10<font></font>
#define dataPin_IN    8<font></font>
<font></font>
// ,       1-16    <font></font>
#define BUT_OUT0      7<font></font>
#define BUT_OUT1      6<font></font>
#define BUT_OUT2      5<font></font>
#define BUT_OUT3      4<font></font>
<font></font>
byte but_out[4] = {BUT_OUT0, BUT_OUT1, BUT_OUT2, BUT_OUT3};<font></font>
//       <font></font>
byte kbd_in[5] = {0, 0, 0, 0, 0};<font></font>
byte kbd_in_new[5] = {0, 0, 0, 0, 0};<font></font>
<font></font>
//       <font></font>
byte btn_in[4] = {0, 0, 0, 0};<font></font>
byte btn_in_new[4] = {0, 0, 0, 0};<font></font>
<font></font>
//  3  -   (1 - , 0 - )<font></font>
byte kbd_out = 0b11100000;<font></font>
<font></font>
//  <font></font>
void init_electronics() {<font></font>
  //  ,   +5V<font></font>
  //  OUTPUT<font></font>
  pinMode(latchPin, OUTPUT);<font></font>
  pinMode(clockPin, OUTPUT);<font></font>
  pinMode(dataPin, OUTPUT);<font></font>
<font></font>
  //  ,   +5V<font></font>
  pinMode(latchPin_IN, OUTPUT);<font></font>
  pinMode(clockPin_IN, OUTPUT);<font></font>
  pinMode(dataPin_IN, INPUT);<font></font>
<font></font>
  //          <font></font>
  for (byte i = 0; i &lt; 4; i++) pinMode(but_out[i], OUTPUT);<font></font>
}<font></font>
<font></font>
//      74HC595<font></font>
void write_5V(byte a) {<font></font>
    digitalWrite(latchPin, LOW);<font></font>
    //    dataPin<font></font>
    shiftOut(dataPin, clockPin, MSBFIRST, a); <font></font>
     //"" ,      <font></font>
    digitalWrite(latchPin, HIGH); <font></font>
}<font></font>
<font></font>
void read_5V(byte *btn, byte *kbd) {<font></font>
  digitalWrite(clockPin_IN, HIGH);<font></font>
  digitalWrite(latchPin_IN, LOW);<font></font>
  digitalWrite(latchPin_IN, HIGH);<font></font>
  <font></font>
  //    -    <font></font>
  *btn = shiftIn(dataPin_IN, clockPin_IN, LSBFIRST);<font></font>
  <font></font>
  //    -    <font></font>
  *kbd = shiftIn(dataPin_IN, clockPin_IN, LSBFIRST);<font></font>
}<font></font>
<font></font>
void setup() {<font></font>
  init_electronics();<font></font>
  write_5V(kbd_out);<font></font>
  Serial.begin(115200);<font></font>
}<font></font>
<font></font>
//       ,   <font></font>
void read_kbd_and_btn_state(byte *btn, byte *kbd) {<font></font>
 byte tmp;<font></font>
  for (byte i = 0; i &lt; 5; i++) {<font></font>
    write_5V(kbd_out | (1 &lt;&lt; i));<font></font>
    read_5V(&amp;tmp, &amp;kbd[i]);<font></font>
  }<font></font>
}<font></font>
<font></font>
void noteOn(int cmd, int pitch, int velocity) {<font></font>
  Serial.write(cmd);<font></font>
  Serial.write(pitch);<font></font>
  Serial.write(velocity);<font></font>
}<font></font>
<font></font>
//     num  ,   <font></font>
// 0 -  0,  0<font></font>
// 1 -  0,  1<font></font>
// 2 -  1,  1<font></font>
// 3 -  1,  0<font></font>
byte compare_bit(byte old_state, byte new_state, byte num) {<font></font>
  byte tmp_old, tmp_new;<font></font>
  tmp_old = (old_state &gt;&gt; num) &amp; 1;<font></font>
  tmp_new = (new_state &gt;&gt; num) &amp; 1;<font></font>
  if ((tmp_old == 0) &amp;&amp; (tmp_new == 0)) return 0;<font></font>
  if ((tmp_old == 0) &amp;&amp; (tmp_new == 1)) return 1;<font></font>
  if ((tmp_old == 1) &amp;&amp; (tmp_new == 1)) return 2; <font></font>
  if ((tmp_old == 1) &amp;&amp; (tmp_new == 0)) return 3;  <font></font>
}<font></font>
<font></font>
void loop() {<font></font>
  read_kbd_and_btn_state(btn_in_new, kbd_in_new);<font></font>
  for (byte i = 0; i &lt; 5; i++) {<font></font>
    for (byte j = 0; j &lt; 8; j++) {<font></font>
      switch (compare_bit(kbd_in[i], kbd_in_new[i], 7 - j)) {<font></font>
        //  <font></font>
        case 1: noteOn(0x90, 0x1D + (8 * i + j), 0x7F);<font></font>
                break;<font></font>
        //  <font></font>
        case 2: //noteOn(0x00, 0x1D + (8 * i + j), 0x7F);<font></font>
                break;<font></font>
        //  <font></font>
        case 3: noteOn(0x90, 0x1D + (8 * i + j), 0x00);<font></font>
                break;<font></font>
      }<font></font>
    }<font></font>
    kbd_in[i] = kbd_in_new[i];<font></font>
  }<font></font>
} <font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No tiene sentido pintar en detalle c√≥mo trabajar con datos MIDI, porque se puede leer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Me detendr√© en m√°s detalles sobre el software para la computadora y los problemas que encontr√©. Surgieron problemas, simplemente debido a la falta de documentaci√≥n normal para este software. Entonces, para que la computadora pueda recibir con √©xito datos MIDI de un dispositivo como el m√≠o, necesitar√° dos programas: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loopMIDI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serial-Midi Converter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Para Serial-MIDI Converter, tambi√©n necesita instalar Java, si no est√° instalado en la computadora. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Iniciamos el programa loopMIDI y creamos dos puertos virtuales. Los llam√© Arduino IN y Arduino OUT. Este programa ser√° un dispositivo MIDI virtual.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/e8/do/hee8doojjloz3jiocd58qpugocg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, ejecute el convertidor Serial-MIDI y, al inicio, realizaremos el proceso de configuraci√≥n. Desafortunadamente, debe hacer esto cada vez que lo inicia, pero no da mucho miedo, se hace literalmente con cuatro pulsaciones de teclas en el teclado. El n√∫mero de puerto COM puede ser diferente; aparece en la computadora cuando se conecta la placa Arduino NANO. La velocidad del puerto se establece en el firmware Arduino NANO. Las flechas rojas indican mi configuraci√≥n, en la que todo funcion√≥ para m√≠. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zu/qj/l0/zuqjl0ruk96yomobfupdvbstgps.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En realidad, el proceso de configuraci√≥n se ha completado y ya puede utilizar alg√∫n software que reproducir√° sonidos al aceptar las pulsaciones de teclas del dispositivo. En la configuraci√≥n del software, debe seleccionar "Arduino_OUT" como entrada. En la imagen a continuaci√≥n, un ejemplo de configuraci√≥n de Kontakt Player. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qs/eu/uu/qseuuugs_lbaywuoplve0qgc2wg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En √∫ltima instancia, funciona as√≠:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/cOnQOAYKlg0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQue sigue? </font><font style="vertical-align: inherit;">Y luego todo sucedi√≥ exactamente como esperaba: el juguete sigue siendo un juguete con exactamente todas las deficiencias que mencion√© al principio. </font><font style="vertical-align: inherit;">Probablemente, el ni√±o tocar√° este en un zumbido, pero para un adulto, despu√©s de los teclados normales ... Es m√°s f√°cil comprar cualquier teclado MIDI usado a bajo precio y ser√° mucho mejor que este juguete. </font><font style="vertical-align: inherit;">Decid√≠ dejar este juguete como est√°, pero realizo algunas modificaciones:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deja el estuche original.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coloque altavoces que funcionen y haga un amplificador para ellos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haga que funcione en el modo "juguete para ni√±os" sin conectarse a una computadora, es decir, para que pueda reproducir sonidos por s√≠ mismo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haga posible conectar FootSwitch (el mismo pedal en el piano a continuaci√≥n) para que pueda mantener el sonido despu√©s de soltar las teclas, como en un instrumento normal.</font></font></li>
<li>    ,       .</li>
<li>    ,      -,      .</li>
</ol><br>
<img src="https://habrastorage.org/webt/qa/79/bk/qa79bkjnapd9sf84teo-y_nxn0g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No puedo hacer la implementaci√≥n de la mayor√≠a de los puntos, mientras todos estamos juntos "en casa", ya que simplemente no tengo todos los componentes necesarios para esto en casa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para implementar el p√°rrafo 3 en Internet, se encontr√≥ una soluci√≥n llamada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SamplerBox</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . La esencia del proyecto es que puede conectar cualquier teclado MIDI a la placa Raspberry Pi, que procesa comandos MIDI desde el teclado y reproduce sonidos o conmuta instrumentos, etc. Solo queda colocar la placa Raspberry Pi dentro del cuerpo del juguete, sin la posibilidad de reemplazar la tarjeta SD (sin desmontar la carcasa), configurar los botones en el cuerpo del juguete para que cambien las herramientas y esto ser√° suficiente para dejar este proyecto en esta forma. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero todo esto suceder√° despu√©s de que termine el per√≠odo de autoaislamiento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espero que alguien encuentre √∫til mi experiencia.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es500436/index.html">Procedente de redes neuronales binarias basadas en neuronas aleatorias y funciones l√≥gicas.</a></li>
<li><a href="../es500438/index.html">SFTP y FTPS</a></li>
<li><a href="../es500444/index.html">9 habilidades de programaci√≥n en Python que distinguen a un principiante de un experimentado</a></li>
<li><a href="../es500446/index.html">Algunas palabras sobre R2DBC y PostgreSQL</a></li>
<li><a href="../es500448/index.html">Prometheus: monitoreo HTTP a trav√©s del exportador Blackbox</a></li>
<li><a href="../es500452/index.html">Alto razonamiento en aprendizaje profundo</a></li>
<li><a href="../es500454/index.html">"¬øQu√© puertos deportivos?" o controlamos el controlador a trav√©s de bluetooth usando una aplicaci√≥n m√≥vil en Xamarin (Android)</a></li>
<li><a href="../es500456/index.html">BpfTrace: finalmente, un reemplazo completo para Dtrace en Linux</a></li>
<li><a href="../es500458/index.html">Caracter√≠sticas t√©cnicas del discurso en l√≠nea: paquete de inicio</a></li>
<li><a href="../es500462/index.html">Detectar cambios de escena y guardar videoclips h264 en Raspberry Pi sin decodificar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>