<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍔 👨🏽‍🎨 ✊🏿 Red Hat OpenShift Messaging Berbasis Cloud Menggunakan Quarkus dan AMQ Online 👨🏼‍🎨 🗼 🧀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya! Ini dia - pos terakhir kami dari seri Quarkus! (Ngomong-ngomong, lihat webinar kami "Ini adalah Quarkus - kerangka kerja asli Jawa Kube...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Red Hat OpenShift Messaging Berbasis Cloud Menggunakan Quarkus dan AMQ Online</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/503940/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Halo semuanya! Ini dia - pos terakhir kami dari seri Quarkus! (Ngomong-ngomong, lihat webinar kami </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Ini adalah Quarkus - kerangka kerja asli Jawa Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">"</font></a><font style="vertical-align: inherit;"> Kami akan menunjukkan cara memulai dari awal atau mentransfer solusi yang sudah jadi) </font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/ux/ir/pouxirwqx8fafftuhwwcma0jw5q.jpeg" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam </font><font style="vertical-align: inherit;">posting </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebelumnya</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami melihat alat yang tepat yang dapat digunakan untuk mengukur peningkatan yang dilakukan sebagai hasil dari memodernisasi Java. aplikasi.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dimulai dengan versi 0.17.0, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quarkus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mendukung penggunaan Advanced Message Queuing Protocol ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AMQP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), yang merupakan standar terbuka untuk mentransfer pesan bisnis antara aplikasi atau organisasi. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Red Hat AMQ Online</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah layanan yang dibangun berdasarkan proyek </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EnMasse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terbuka </font><font style="vertical-align: inherit;">dan mengimplementasikan mekanisme </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">pengiriman</font></a><font style="vertical-align: inherit;"> pesan berdasarkan platform </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Red Hat OpenShift</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Pelajari lebih lanjut tentang cara kerjanya, lihat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di sini (untuk EN)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Hari ini kami menunjukkan cara menggabungkan AMQ Online dan Quarkus untuk membangun sistem pesan modern berbasis OpenShift menggunakan dua teknologi baru yang terkait dengan pemrosesan pesan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diasumsikan bahwa Anda telah menggunakan AMQ Online pada platform OpenShift (jika tidak, lihat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">panduan instalasi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memulai, kita akan membuat aplikasi Quarkus, yang akan menjadi sistem pemrosesan pesanan sederhana menggunakan pesan reaktif. </font><font style="vertical-align: inherit;">Aplikasi ini akan menyertakan generator pesanan yang mengirim pesanan ke antrian pesan dengan interval tetap, serta pemroses pesanan yang akan memproses pesan dari antrian dan menghasilkan konfirmasi yang dapat dilihat di browser. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah membuat aplikasi, kami akan menunjukkan cara menerapkan konfigurasi sistem pesan di dalamnya dan menggunakan AMQ Online untuk menginisialisasi sumber daya yang kami butuhkan di sistem ini.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aplikasi Quarkus</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aplikasi Quarkus kami berjalan pada OpenShift dan merupakan versi modifikasi dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amqp-quickstart</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Contoh lengkap dari sisi klien dapat ditemukan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pesan generator</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Generator setiap 5 detik secara monoton mengirimkan pengenal pesanan yang tumbuh ke alamat "pesanan".</font></font><br>
<br>
<pre><code class="plaintext hljs">@ApplicationScoped<font></font>
public class OrderGenerator {<font></font>
 <font></font>
    private int orderId = 1;<font></font>
 <font></font>
    @Outgoing("orders")<font></font>
    public Flowable&lt;Integer&gt; generate() {<font></font>
        return Flowable.interval(5, TimeUnit.SECONDS)<font></font>
        .map(tick -&gt; orderId++);<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penangan pesanan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prosesor pesanan lebih sederhana, itu hanya mengembalikan pengidentifikasi konfirmasi ke alamat "konfirmasi".</font></font><br>
<br>
<pre><code class="plaintext hljs">@ApplicationScoped<font></font>
public class OrderProcessor {<font></font>
    @Incoming("orders")<font></font>
    @Outgoing("confirmations")<font></font>
    public Integer process(Integer order) {<font></font>
        //       &lt;img draggable="false" class="emoji" alt=":-)" src="https://s.w.org/images/core/emoji/11.2.0/svg/1f642.svg"&gt;<font></font>
        return order * 2;<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sumber Daya Konfirmasi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sumber konfirmasi adalah titik akhir HTTP untuk daftar konfirmasi yang dihasilkan oleh aplikasi kami.</font></font><br>
<br>
<pre><code class="plaintext hljs">@Path("/confirmations")<font></font>
public class ConfirmationResource {<font></font>
 <font></font>
    @Inject<font></font>
    @Stream("confirmations") Publisher&lt;Integer&gt; orders;<font></font>
 <font></font>
    @GET<font></font>
    @Produces(MediaType.TEXT_PLAIN)<font></font>
    public String hello() {<font></font>
        return "hello";<font></font>
    }<font></font>
 <font></font>
 <font></font>
    @GET<font></font>
    @Path("/stream")<font></font>
    @Produces(MediaType.SERVER_SENT_EVENTS)<font></font>
    public Publisher&lt;Integer&gt; stream() {<font></font>
        return orders;<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kustomisasi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk terhubung ke AMQ Online, aplikasi kami akan memerlukan beberapa data konfigurasi, yaitu: konfigurasi konektor Quarkus, informasi titik akhir AMQP, dan kredensial klien. </font><font style="vertical-align: inherit;">Tentu saja, lebih baik menyimpan semua data konfigurasi di satu tempat, tetapi kami akan memisahkannya secara khusus untuk menunjukkan opsi yang memungkinkan untuk menyiapkan aplikasi Quarkus.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konektor</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konfigurasi konektor dapat disediakan pada tahap kompilasi menggunakan file properti aplikasi:</font></font><br>
<br>
<pre><code class="plaintext hljs">mp.messaging.outgoing.orders.connector=smallrye-amqp<font></font>
mp.messaging.incoming.orders.connector=smallrye-amqp<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agar tidak menyulitkan ini, kami akan menggunakan antrian pesan hanya untuk alamat "pesanan". </font><font style="vertical-align: inherit;">Dan alamat "konfirmasi" di aplikasi kita akan menggunakan antrian di memori.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Endpoint AMQP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada tahap kompilasi, nama host dan nomor port untuk titik akhir AMQP tidak diketahui, sehingga mereka perlu diimplementasikan. </font><font style="vertical-align: inherit;">Titik akhir dapat diatur dalam configmap, yang dibuat oleh AMQ Online, jadi kami akan mendefinisikannya melalui variabel lingkungan di manifes aplikasi:</font></font><br>
<br>
<pre><code class="plaintext hljs">spec:<font></font>
  template:<font></font>
    spec:<font></font>
      containers:<font></font>
      - env:<font></font>
        - name: AMQP_HOST<font></font>
          valueFrom:<font></font>
            configMapKeyRef:<font></font>
              name: quarkus-config<font></font>
              key: service.host<font></font>
        - name: AMQP_PORT<font></font>
          valueFrom:<font></font>
            configMapKeyRef:<font></font>
              name: quarkus-config<font></font>
              key: service.port.amqp<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kredensial</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Token akun layanan dapat digunakan untuk mengautentikasi aplikasi kami di OpenShift. </font><font style="vertical-align: inherit;">Untuk melakukan ini, Anda harus terlebih dahulu membuat ConfigSource khusus yang akan membaca token otentikasi dari sistem file pod:</font></font><br>
<br>
<pre><code class="plaintext hljs">public class MessagingCredentialsConfigSource implements ConfigSource {<font></font>
    private static final Set&lt;String&gt; propertyNames;<font></font>
 <font></font>
    static {<font></font>
        propertyNames = new HashSet&lt;&gt;();<font></font>
        propertyNames.add("amqp-username");<font></font>
        propertyNames.add("amqp-password");<font></font>
    }<font></font>
 <font></font>
    @Override<font></font>
    public Set&lt;String&gt; getPropertyNames() {<font></font>
        return propertyNames;<font></font>
    }<font></font>
 <font></font>
    @Override<font></font>
    public Map&lt;String, String&gt; getProperties() {<font></font>
        try {<font></font>
            Map&lt;String, String&gt; properties = new HashMap&lt;&gt;();<font></font>
            properties.put("amqp-username", "@@serviceaccount@@");<font></font>
            properties.put("amqp-password", readTokenFromFile());<font></font>
            return properties;<font></font>
        } catch (IOException e) {<font></font>
            throw new UncheckedIOException(e);<font></font>
        }<font></font>
    }<font></font>
 <font></font>
    @Override<font></font>
    public String getValue(String key) {<font></font>
        if ("amqp-username".equals(key)) {<font></font>
            return "@@serviceaccount@@";<font></font>
        }<font></font>
        if ("amqp-password".equals(key)) {<font></font>
            try {<font></font>
                return readTokenFromFile();<font></font>
            } catch (IOException e) {<font></font>
                throw new UncheckedIOException(e);<font></font>
            }<font></font>
        }<font></font>
        return null;<font></font>
    }<font></font>
 <font></font>
    @Override<font></font>
    public String getName() {<font></font>
        return "messaging-credentials-config";<font></font>
    }<font></font>
 <font></font>
    private static String readTokenFromFile() throws IOException {<font></font>
        return new String(Files.readAllBytes(Paths.get("/var/run/secrets/kubernetes.io/serviceaccount/token")), StandardCharsets.UTF_8);<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perakitan dan penyebaran aplikasi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena aplikasi harus dikompilasi menjadi file yang dapat dieksekusi, mesin virtual GraalVM diperlukan. </font><font style="vertical-align: inherit;">Untuk informasi lebih lanjut tentang cara mengatur lingkungan untuk ini, lihat instruksi terkait di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Panduan Quarkus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian, mengikuti instruksi di sana, Anda perlu mengunduh sumbernya, membangun dan menggunakan aplikasi kami:</font></font><br>
<br>
<pre><code class="plaintext hljs">git clone https://github.com/EnMasseProject/enmasse-example-clients<font></font>
cd enmasse-example-clients/quarkus-example-client<font></font>
oc new-project myapp<font></font>
mvn -Pnative -Dfabric8.mode=openshift -Dfabric8.build.strategy=docker package fabric8:build fabric8:resource fabric8:apply<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah perintah ini, aplikasi akan digunakan, tetapi tidak akan mulai sampai kami mengkonfigurasi sumber pesan yang diperlukan di AMQ Online.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengaturan pesan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang tinggal mengatur sumber daya yang dibutuhkan aplikasi kita dalam sistem pengiriman pesan. </font><font style="vertical-align: inherit;">Untuk melakukan ini, buat: 1) ruang alamat untuk menginisialisasi titik akhir sistem pesan; </font><font style="vertical-align: inherit;">2) alamat untuk mengkonfigurasi alamat yang kami gunakan dalam aplikasi; </font><font style="vertical-align: inherit;">3) pengguna sistem pesan untuk mengatur kredensial klien.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ruang alamat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Objek AddressSpace di AMQ Online adalah sekelompok alamat yang berbagi titik akhir koneksi, serta kebijakan otentikasi dan otorisasi. </font><font style="vertical-align: inherit;">Saat membuat ruang alamat, Anda dapat menentukan bagaimana titik akhir dari sistem pengiriman pesan akan disediakan:</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: enmasse.io/v1beta1<font></font>
kind: AddressSpace<font></font>
metadata:<font></font>
  name: quarkus-example<font></font>
spec:<font></font>
  type: brokered<font></font>
  plan: brokered-single-broker<font></font>
  endpoints:<font></font>
  - name: messaging<font></font>
    service: messaging<font></font>
    exports:<font></font>
    - name: quarkus-config<font></font>
      kind: configmap<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alamat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alamat digunakan untuk mengirim dan menerima pesan. </font><font style="vertical-align: inherit;">Setiap alamat memiliki tipe yang mendefinisikan semantiknya, serta rencana yang menetapkan jumlah sumber daya yang dipesan. </font><font style="vertical-align: inherit;">Alamatnya dapat ditentukan, misalnya, seperti ini:</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: enmasse.io/v1beta1<font></font>
kind: Address<font></font>
metadata:<font></font>
  name: quarkus-example.orders<font></font>
spec:<font></font>
  address: orders<font></font>
  type: queue<font></font>
  plan: brokered-queue<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengguna pesan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengirim dan menerima pesan ke alamat yang hanya dapat dilakukan oleh aplikasi tepercaya, Anda harus membuat pengguna di sistem pengiriman pesan. </font><font style="vertical-align: inherit;">Untuk aplikasi yang berjalan di cluster, klien dapat diautentikasi menggunakan akun layanan OpenShift. </font><font style="vertical-align: inherit;">Pengguna "akun layanan" dapat didefinisikan, misalnya, sebagai berikut:</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: user.enmasse.io/v1beta1<font></font>
kind: MessagingUser<font></font>
metadata:<font></font>
  name: quarkus-example.app<font></font>
spec:<font></font>
  username: system:serviceaccount:myapp:default<font></font>
  authentication:<font></font>
    type: serviceaccount<font></font>
  authorization:<font></font>
  - operations: ["send", "recv"]<font></font>
    addresses: ["orders"]<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Izin untuk menyesuaikan aplikasi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agar AMQ Online membuat configmap yang kami gunakan untuk mengimplementasikan informasi titik akhir AMQP, Anda harus menentukan peran dan pengikatan peran (Peranan dan Peranan Peran):</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
apiVersion: rbac.authorization.k8s.io/v1<font></font>
kind: Role<font></font>
metadata:<font></font>
  name: quarkus-config<font></font>
spec:<font></font>
  rules:<font></font>
  - apiGroups: [ "" ]<font></font>
    resources: [ "configmaps" ]<font></font>
    verbs: [ "create" ]<font></font>
  - apiGroups: [ "" ]<font></font>
    resources: [ "configmaps" ]<font></font>
    resourceNames: [ "quarkus-config" ]<font></font>
    verbs: [ "get", "update", "patch" ]<font></font>
---<font></font>
apiVersion: rbac.authorization.k8s.io/v1<font></font>
kind: RoleBinding<font></font>
metadata:<font></font>
  name: quarkus-config<font></font>
roleRef:<font></font>
  apiGroup: rbac.authorization.k8s.io<font></font>
  kind: Role<font></font>
  name: quarkus-config<font></font>
subjects:<font></font>
- kind: ServiceAccount<font></font>
  name: address-space-controller<font></font>
  namespace: amq-online-infra<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cara menerapkan konfigurasi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat menerapkan konfigurasi perpesanan seperti ini:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd enmasse-example-clients/quarkus-example-client<font></font>
oc project myapp<font></font>
oc apply -f src/main/resources/k8s/addressspace<font></font>
oc apply -f src/main/resources/k8s/address<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verifikasi aplikasi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memastikan aplikasi telah dimulai, pertama-tama, kami akan memeriksa apakah alamat yang sesuai dibuat dan aktif:</font></font><br>
<br>
<pre><code class="plaintext hljs">until [[ `oc get address quarkus-example.prices -o jsonpath='{.status.phase}'` == "Active" ]]; do echo "Not yet ready"; sleep 5; done
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian periksa URL rute aplikasi (cukup buka alamat ini di browser):</font></font><br>
<br>
<pre><code class="plaintext hljs">echo "http://$(oc get route quarkus-example-client -o jsonpath='{.spec.host}')/prices.html"
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seharusnya terlihat di browser bahwa tiket diperbarui secara berkala ketika pesan dikirim dan diterima oleh AMQ Online.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk meringkas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, kami menulis aplikasi Quarkus yang menggunakan AMQP untuk pengiriman pesan, mengatur aplikasi ini untuk bekerja pada platform Red Hat OpenShift, dan juga mengimplementasikan konfigurasinya berdasarkan konfigurasi AMQ Online. </font><font style="vertical-align: inherit;">Kemudian kami membuat manifes yang diperlukan untuk menginisialisasi sistem pengiriman pesan untuk aplikasi kami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini menyimpulkan seri Quarkus, tetapi ada banyak hal baru dan menarik di depan, tetap bersama kami!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id503928/index.html">Aerosol VS irigasi: mana yang lebih baik, dan apakah ada perbedaan?</a></li>
<li><a href="../id503932/index.html">Saya bosan dengan kenyataan bahwa penjual biasa menyamar sebagai pengembang dan memalukan industri. Mereka membuat dunia lebih buruk</a></li>
<li><a href="../id503934/index.html">[Polling tentang kesulitan terjemahan] Pelokalan GitLab membutuhkan pendapat komunitas</a></li>
<li><a href="../id503936/index.html">Tentang terjemahan basis data: apa yang terjadi, apa yang mereka lakukan dan apa yang mereka makan</a></li>
<li><a href="../id503938/index.html">Yandex memberikan uang untuk iklan. Atau tidak?</a></li>
<li><a href="../id503942/index.html">Mengapa administrator, pengembang, dan penguji sistem harus mempelajari praktik DevOps?</a></li>
<li><a href="../id503950/index.html">Manajemen Layanan Lapangan: apa itu dan mengapa perusahaan jasa membutuhkannya?</a></li>
<li><a href="../id503952/index.html">Keringat, darah dan slide: cara kerja pitch startup</a></li>
<li><a href="../id503954/index.html">Langkah pertama Anda dalam Ilmu Data. Raksasa</a></li>
<li><a href="../id503956/index.html">Apakah Andrei Breslav menyiksa kesalahan desain Kotlin yang tidak bisa diperbaiki // Kita akan mati # 6</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>