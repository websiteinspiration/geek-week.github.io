<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õ∫Ô∏è üìù üôÇ ¬øC√≥mo extra√±o c√≥digo oculta errores? An√°lisis TensorFlow.NET üê´ üí∑ ‚òéÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El an√°lisis est√°tico es una herramienta extremadamente √∫til para cualquier desarrollador, ya que ayuda a encontrar a tiempo no solo errores, sino tamb...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>¬øC√≥mo extra√±o c√≥digo oculta errores? An√°lisis TensorFlow.NET</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/496250/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/765/bb4/d84/765bb4d84187d986358a301bbeed082f.png" alt="TensorFlow.NET y PVS-Studio"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El an√°lisis est√°tico es una herramienta extremadamente √∫til para cualquier desarrollador, ya que ayuda a encontrar a tiempo no solo errores, sino tambi√©n piezas de c√≥digo sospechosas y extra√±as que pueden causar desconcierto a los programadores que tendr√≠an que trabajar con √©l en el futuro. Esta idea se demostrar√° mediante un an√°lisis del proyecto abierto C # de TensorFlow.NET, que se est√° desarrollando para trabajar con la popular biblioteca de aprendizaje autom√°tico TensorFlow.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mi nombre es Nikita Lipilin. </font><font style="vertical-align: inherit;">Hace alg√∫n tiempo me un√≠ al departamento de programadores de C # de PVS-Studio. </font><font style="vertical-align: inherit;">Tradicionalmente, todos los reci√©n llegados al equipo escriben art√≠culos que discuten los resultados de verificar varios proyectos abiertos utilizando el analizador est√°tico PVS-Studio. </font><font style="vertical-align: inherit;">Dichos art√≠culos ayudan a los nuevos empleados a conocer mejor el producto y, al mismo tiempo, proporcionan beneficios adicionales en t√©rminos de popularizaci√≥n de la metodolog√≠a de an√°lisis est√°tico. </font><font style="vertical-align: inherit;">Le sugiero que se familiarice con mi primer trabajo sobre el tema de an√°lisis de proyectos abiertos.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introducci√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La variedad de posibles errores en el c√≥digo del programa es sorprendente. Algunos de ellos se revelan de inmediato, luego de un examen superficial de la aplicaci√≥n creada, otros pueden ser dif√≠ciles de notar incluso cuando un equipo de desarrolladores experimentados realiza una revisi√≥n del c√≥digo. Sin embargo, tambi√©n sucede que, debido a la falta de atenci√≥n o alguna otra raz√≥n, el programador a veces escribe c√≥digo simplemente extra√±o e il√≥gico, que, sin embargo, (parece) cumplir con √©xito su funci√≥n. Pero solo m√°s all√°, al volver a lo que estaba escrito, o cuando otros estudian este c√≥digo, comienzan a surgir preguntas que no se pueden responder.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Refactorizar el c√≥digo antiguo puede convertirse en problemas, especialmente si otras partes del programa dependen de √©l, por lo que cuando encuentre incluso algunas construcciones curvadas francamente, el ‚Ä≥ ¬øFunciona? ¬°No lo toques! ‚Ä≥. Posteriormente, esto dificulta el estudio de la fuente y, por lo tanto, se hace dif√≠cil ampliar las capacidades disponibles. La base del c√≥digo est√° obstruida, existe la posibilidad de que algunos problemas internos peque√±os e invisibles, pero potencialmente muy desagradables, no se solucionen a tiempo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En alg√∫n momento, se sentir√°n las consecuencias de este error, pero su b√∫squeda llevar√° mucho tiempo, porque las sospechas del desarrollador recaer√°n en una gran cantidad de fragmentos de c√≥digo extra√±os que no se refactorizaron al mismo tiempo. De esto se deduce que varios problemas y rarezas en un fragmento particular deben corregirse inmediatamente despu√©s de su redacci√≥n. En el caso de que haya razones razonables para dejar todo tal como est√° (por ejemplo, si el c√≥digo est√° escrito como alg√∫n tipo de espacio en blanco ‚Ä≥ para m√°s adelante ‚Ä≥), dicho fragmento debe ir acompa√±ado de un comentario explicativo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n vale la pena se√±alar que, independientemente de las calificaciones del desarrollador, algunos momentos problem√°ticos y simplemente sin √©xito pueden escaparse de su mirada, y a veces se puede aplicar una "soluci√≥n temporal" en alg√∫n lugar, que pronto se olvidar√° y se convertir√° en "permanente". Posteriormente, el an√°lisis de dicho c√≥digo (muy probablemente, otro desarrollador se involucrar√° en esto) tomar√° un esfuerzo inaceptablemente grande. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tales casos, la revisi√≥n de c√≥digo puede ayudar. Sin embargo, si la tarea es bastante seria, entonces esta opci√≥n requerir√° mucho tiempo. Adem√°s, cuando hay muchos peque√±os errores o deficiencias, entonces, detr√°s de ellos, el examinador puede no notar errores de alto nivel. Verificar el c√≥digo se convierte en una rutina tediosa, y gradualmente disminuye la efectividad de la revisi√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, las tareas de rutina se transferir√°n mucho mejor de persona a computadora. Este enfoque se utiliza en muchas √°reas de la modernidad. La automatizaci√≥n de diversos procesos es la clave de la prosperidad. ¬øQu√© es la automatizaci√≥n en el contexto de este tema? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un asistente confiable para resolver el problema de escribir un c√≥digo de trabajo razonable y estable es el an√°lisis est√°tico. Cada vez antes de enviar los resultados de sus actividades a la revisi√≥n, el programador podr√° realizar una verificaci√≥n autom√°tica y no cargar a otros desarrolladores (y a s√≠ mismo) con un trabajo innecesario. El c√≥digo se enviar√° para su verificaci√≥n solo despu√©s de que se hayan tenido en cuenta todas las advertencias del analizador: se han solucionado los errores y se han reescrito momentos extra√±os, o al menos explicados por un comentario.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, la necesidad de revisar el c√≥digo no desaparece, pero el an√°lisis est√°tico complementa y simplifica enormemente su implementaci√≥n. </font><font style="vertical-align: inherit;">Una parte suficientemente grande de los errores se solucionar√° gracias al analizador, y los momentos extra√±os definitivamente no ser√°n olvidados y marcados en consecuencia. </font><font style="vertical-align: inherit;">En consecuencia, con una revisi√≥n de c√≥digo, ser√° posible centrarse en verificar la correcci√≥n de la implementaci√≥n de interacciones l√≥gicas complejas y encontrar problemas subyacentes que, desafortunadamente, no pueden ser detectados por el analizador (todav√≠a).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TensorFlow.NET</font></font></h2><br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d02/39d/72d/d0239d72ded7154a696d5c975a0555d1.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este art√≠culo est√° inspirado en el proyecto TensorFlow.NET. Representa la implementaci√≥n de la capacidad de trabajar con la funcionalidad de la popular biblioteca de aprendizaje autom√°tico TensorFlow a trav√©s del c√≥digo C # (por cierto, tambi√©n lo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">probamos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Esta idea parec√≠a bastante interesante, porque al momento de escribir, trabajar con la biblioteca solo est√° disponible en Python, Java y Go. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo fuente disponible en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se actualiza constantemente y ahora su volumen es un poco m√°s de cien mil l√≠neas. Despu√©s de un estudio superficial, hubo un deseo de realizar la verificaci√≥n mediante an√°lisis est√°tico. PVS-Studio se utiliz√≥ como herramienta espec√≠fica, lo que ha demostrado su eficacia en un n√∫mero bastante grande de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proyectos diferentes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/261/70b/247/26170b247e9b81a3643bd5682b7d5203.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para TensorFlow.NET, el analizador mostr√≥ una serie de alertas: 39 niveles altos, 227 niveles medios y 154 niveles bajos (puede leer acerca de los niveles de advertencia </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la subsecci√≥n "Niveles de advertencia y conjuntos de reglas de diagn√≥stico"). Un an√°lisis detallado de cada uno de ellos har√≠a que este art√≠culo sea gigantesco, por lo tanto, solo los que me parecieron m√°s interesantes se describen a continuaci√≥n. Tambi√©n vale la pena se√±alar que algunos de los problemas encontrados se encuentran varias veces en el proyecto, y el an√°lisis de cada fragmento de c√≥digo est√° m√°s all√° del alcance de este art√≠culo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proyecto se plantea una tarea bastante seria y, desafortunadamente, la aparici√≥n de varios tipos de fragmentos de c√≥digo extra√±os es inevitable. </font><font style="vertical-align: inherit;">En este art√≠culo intentar√© mostrar que el uso del an√°lisis est√°tico puede simplificar enormemente el trabajo de los programadores, se√±alando √°reas que pueden causar preguntas. </font><font style="vertical-align: inherit;">No siempre una advertencia indica un error, pero a menudo indica un c√≥digo que podr√≠a causar preguntas en una persona. </font><font style="vertical-align: inherit;">En consecuencia, la probabilidad de que un c√≥digo extra√±o se redise√±e o, en cualquier caso, se comente en consecuencia, aumenta significativamente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragmentos que llamaron la atenci√≥n al estudiar el informe del analizador.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, una cantidad bastante grande de advertencias del analizador para este proyecto puede llamarse no tanto errores, sino c√≥digo extra√±o. Al ver las l√≠neas para las cuales se emite una advertencia, al menos surge el desconcierto. Por supuesto, algunos de los ejemplos presentados a continuaci√≥n son probablemente ‚Ä≥ soluciones temporales ‚Ä≥, pero no dan ning√∫n comentario sobre este tema, lo que significa que alguien que trabaje con este c√≥digo en el futuro tendr√° preguntas que necesitan respuestas. Tomar√° tiempo extra.</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/263/3fc/e7c/2633fce7cba470cd8a0c16e6751b3513.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al mismo tiempo, algunas advertencias apuntan a un c√≥digo que obviamente no solo es extra√±o, sino simplemente incorrecto. </font><font style="vertical-align: inherit;">Este es el principal peligro de ‚Ä≥ c√≥digo extra√±o ‚Ä≥: es extremadamente dif√≠cil notar un error real si aqu√≠ y all√° ves soluciones incomprensibles y gradualmente te acostumbras al hecho de que el c√≥digo parece ser incorrecto.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tour sofisticado de colecci√≥n</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> _RemoveDefaultAttrs(....)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> producer_op_dict = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-keyword">string</span>, OpDef&gt;();<font></font>
  producer_op_list.Op.Select(op =&gt;<font></font>
  {<font></font>
    producer_op_dict[op.Name] = op;<font></font>
    <span class="hljs-keyword">return</span> op;<font></font>
  }).ToArray();           <font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advertencia del analizador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3010</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Se requiere utilizar el valor de retorno de la funci√≥n 'ToArray'. importador.cs 218 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El analizador considera que la llamada a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toray</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en este momento es sospechosa, ya que el valor devuelto por esta funci√≥n no est√° asignado a una variable. Sin embargo, dicho c√≥digo no es un error. Esta construcci√≥n se usa para llenar el diccionario </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">productor_op_dict</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con </font><font style="vertical-align: inherit;">valores correspondientes a los elementos de la lista </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">productor_op_lista</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> necesaria </font><font style="vertical-align: inherit;">una llamada a </font><i><font style="vertical-align: inherit;">ToArray</font></i><font style="vertical-align: inherit;"> para que la funci√≥n pasada como argumento al m√©todo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Select</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se </font><font style="vertical-align: inherit;">llame para todos los elementos de la colecci√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mi opini√≥n, el c√≥digo no se ve mejor. </font><font style="vertical-align: inherit;">Completar el diccionario es algo obvio, y algunos desarrolladores pueden querer eliminar la llamada ‚Ä≥ innecesaria ‚Ä≥ de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ToArray</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ser√≠a mucho m√°s simple y comprensible usar el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bucle foreach</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aqu√≠ </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> producer_op_dict = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-keyword">string</span>, OpDef&gt;();<font></font>
<font></font>
<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> op <span class="hljs-keyword">in</span> producer_op_list.Op)<font></font>
{<font></font>
  producer_op_dict[op.Name] = op;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este caso, el c√≥digo parece lo m√°s simple posible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otro momento similar se ve as√≠:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> GraphDef <span class="hljs-title">convert_variables_to_constants</span>(<span class="hljs-params">....</span>)</span><font></font>
{<font></font>
  ....<font></font>
  inference_graph.Node.Select(x =&gt; map_name_to_node[x.Name] = x).ToArray();<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advertencia del analizador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3010</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Se requiere utilizar el valor de retorno de la funci√≥n 'ToArray'. </font><font style="vertical-align: inherit;">graph_util_impl.cs 48 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La √∫nica diferencia es que dicho registro parece m√°s conciso, pero solo la tentaci√≥n de eliminar la llamada </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ToArray</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aqu√≠ no desaparece, y todav√≠a parece no obvio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soluci√≥n temporal</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> GraphDef <span class="hljs-title">convert_variables_to_constants</span>(<span class="hljs-params">....</span>)</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">var</span> source_op_name = get_input_name(node);
  <span class="hljs-keyword">while</span>(map_name_to_node[source_op_name].Op == <span class="hljs-string">"Identity"</span>)<font></font>
  {<font></font>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException);<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advertencia del analizador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3020</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Un 'lanzamiento' incondicional dentro de un bucle. graph_util_impl.cs 73 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el proyecto que se est√° considerando, a menudo se usa el siguiente enfoque: si alg√∫n comportamiento se implementa m√°s adelante, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lanza una </font><i><font style="vertical-align: inherit;">excepci√≥n NotImplementedException</font></i><font style="vertical-align: inherit;"> en el lugar apropiado </font><font style="vertical-align: inherit;">. Est√° claro por qu√© el analizador advierte de un posible error en esta pieza: usar </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">while en</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lugar de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> realmente no parece demasiado razonable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta no es la √∫nica advertencia que aparece debido al uso de soluciones temporales. Por ejemplo, hay un m√©todo:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] _SoftmaxCrossEntropyWithLogitsGrad(<font></font>
  Operation op, Tensor[] grads<font></font>
)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> grad_loss = grads[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">var</span> grad_grad = grads[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">var</span> softmax_grad = op.outputs[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">var</span> grad = _BroadcastMul(grad_loss, softmax_grad);<font></font>
<font></font>
  <span class="hljs-keyword">var</span> logits = op.inputs[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">if</span>(grad_grad != <span class="hljs-literal">null</span> &amp;&amp; !IsZero(grad_grad)) <span class="hljs-comment">// &lt;=</span><font></font>
  {<font></font>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">"_SoftmaxCrossEntropyWithLogitsGrad"</span>);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Tensor[] <font></font>
  {<font></font>
    grad,<font></font>
    _BroadcastMul(grad_loss, -nn_ops.log_softmax(logits))<font></font>
  };<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advertencia del analizador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> expresi√≥n </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">V3022</font></a><font style="vertical-align: inherit;"> 'grad_grad! = Null &amp;&amp;! IsZero (grad_grad)' siempre es falsa. </font><font style="vertical-align: inherit;">nn_grad.cs 93 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nunca se lanzar√°</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> una </font><i><font style="vertical-align: inherit;">NotImplementedException ("_ SoftmaxCrossEntropyWithLogitsGrad")</font></i><font style="vertical-align: inherit;"> , ya que este c√≥digo es simplemente inalcanzable. </font><font style="vertical-align: inherit;">Para desentra√±ar el motivo, debe ir al c√≥digo de la funci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IsZero</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">IsZero</span>(<span class="hljs-params">Tensor g</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span> <span class="hljs-keyword">string</span>[] { <span class="hljs-string">"ZerosLike"</span>, <span class="hljs-string">"Zeros"</span> }.Contains(g.op.type))
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
<font></font>
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">"IsZero"</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El m√©todo devuelve </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verdadero</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o produce una excepci√≥n. </font><font style="vertical-align: inherit;">Este c√≥digo no es un error, obviamente, la implementaci√≥n aqu√≠ se deja para m√°s adelante. </font><font style="vertical-align: inherit;">Lo principal es que ‚Ä≥ entonces ‚Ä≥ realmente ha llegado. </font><font style="vertical-align: inherit;">Bueno, result√≥ con mucho √©xito que PVS-Studio no te permitir√° olvidar que hay una imperfecci√≥n aqu√≠ :)</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øTensor es tensor?</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Tensor[] _ExtractInputShapes(Tensor[] inputs)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> sizes = <span class="hljs-keyword">new</span> Tensor[inputs.Length];
  <span class="hljs-keyword">bool</span> fully_known = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; inputs.Length; i++)<font></font>
  {<font></font>
    <span class="hljs-keyword">var</span> x = inputs[i];<font></font>
<font></font>
    <span class="hljs-keyword">var</span> input_shape = array_ops.shape(x);
    <span class="hljs-keyword">if</span> (!(input_shape <span class="hljs-keyword">is</span> Tensor) || input_shape.op.type != <span class="hljs-string">"Const"</span>)<font></font>
    {<font></font>
      fully_known = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
<font></font>
    sizes[i] = input_shape;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advertencia del analizador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3051</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Una verificaci√≥n de tipo excesiva. </font><font style="vertical-align: inherit;">El objeto ya es del tipo 'Tensor'. </font><font style="vertical-align: inherit;">array_grad.cs 154 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tipo de retorno del m√©todo de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forma</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tensor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Entonces </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">input_shape es Tensor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> check </font><font style="vertical-align: inherit;">parece al menos extra√±o. </font><font style="vertical-align: inherit;">Quiz√°s, una vez que el m√©todo devuelve un valor de un tipo diferente y la verificaci√≥n tiene sentido, pero tambi√©n es posible que en lugar de Tensor la condici√≥n especifique alg√∫n tipo de heredero para esta clase. </font><font style="vertical-align: inherit;">De una forma u otra, el desarrollador debe prestar atenci√≥n a este fragmento.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verificaci√≥n exhaustiva</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] _BaseFusedBatchNormGrad(....)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (data_format == <span class="hljs-string">"NCHW"</span>) <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">""</span>);<font></font>
<font></font>
  <span class="hljs-keyword">var</span> results = grad_fun(<span class="hljs-keyword">new</span> FusedBatchNormParams<font></font>
  {<font></font>
    YBackprop = grad_y,<font></font>
    X = x,<font></font>
    Scale = scale,<font></font>
    ReserveSpace1 = pop_mean,<font></font>
    ReserveSpace2 = pop_var,<font></font>
    ReserveSpace3 = version == <span class="hljs-number">2</span> ? op.outputs[<span class="hljs-number">5</span>] : <span class="hljs-literal">null</span>,<font></font>
    Epsilon = epsilon,<font></font>
    DataFormat = data_format,<font></font>
    IsTraining = is_training<font></font>
  });<font></font>
<font></font>
  <span class="hljs-keyword">var</span> (dx, dscale, doffset) = (results[<span class="hljs-number">0</span>], results[<span class="hljs-number">1</span>], results[<span class="hljs-number">2</span>]);
  <span class="hljs-keyword">if</span> (data_format == <span class="hljs-string">"NCHW"</span>) <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">""</span>);<font></font>
<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advertencias del analizador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3021</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hay dos declaraciones 'if' con expresiones condicionales id√©nticas. </font><font style="vertical-align: inherit;">La primera instrucci√≥n 'if' contiene el m√©todo return. </font><font style="vertical-align: inherit;">Esto significa que la segunda declaraci√≥n 'if' no tiene sentido nn_grad.cs 230</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3022 La</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> expresi√≥n 'data_format == "NCHW"' siempre es falsa. </font><font style="vertical-align: inherit;">nn_grad.cs 247</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A diferencia de algunos de los ejemplos anteriores, claramente hay algo mal con el c√≥digo. </font><font style="vertical-align: inherit;">La segunda verificaci√≥n no tiene ning√∫n sentido, ya que si la condici√≥n es verdadera, el programa no la alcanzar√° en absoluto. </font><font style="vertical-align: inherit;">Quiz√°s se permite alg√∫n error tipogr√°fico aqu√≠, o uno de los controles es generalmente superfluo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La ilusi√≥n de elecci√≥n</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> Tensor <span class="hljs-title">Activate</span>(<span class="hljs-params">Tensor x, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span></span>)</span><font></font>
{<font></font>
  ....<font></font>
  Tensor negative_part;<font></font>
  <span class="hljs-keyword">if</span> (Math.Abs(_threshold) &gt; <span class="hljs-number">0.000001f</span>)<font></font>
  {<font></font>
    negative_part = gen_ops.relu(-x + _threshold);<font></font>
  } <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    negative_part = gen_ops.relu(-x + _threshold);<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advertencia del analizador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3004</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La declaraci√≥n 'then' es equivalente a la declaraci√≥n 'else'. gen_nn_ops.activations.cs 156 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una demostraci√≥n bastante divertida de la efectividad del uso del an√°lisis est√°tico en el desarrollo. Es dif√≠cil encontrar una raz√≥n razonable por la que el desarrollador escribi√≥ este c√≥digo en particular; lo m√°s probable es que este sea un error t√≠pico de copiar y pegar (aunque esto, por supuesto, puede ser otro "para m√°s adelante"). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay otros fragmentos de un plan similar, por ejemplo:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Operation _GroupControlDeps(
  <span class="hljs-keyword">string</span> dev, Operation[] deps, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span><font></font>
)<font></font>
{<font></font>
  <span class="hljs-keyword">return</span> tf_with(ops.control_dependencies(deps), ctl =&gt;<font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (dev == <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
      <span class="hljs-keyword">return</span> gen_control_flow_ops.no_op(name);<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
      <span class="hljs-keyword">return</span> gen_control_flow_ops.no_op(name);<font></font>
    }<font></font>
  });<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advertencia del analizador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3004</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La declaraci√≥n 'then' es equivalente a la declaraci√≥n 'else'. </font><font style="vertical-align: inherit;">control_flow_ops.cs 135 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tal vez una vez que la verificaci√≥n tuvo sentido, pero con el tiempo desapareci√≥, o se planean m√°s cambios en el futuro. </font><font style="vertical-align: inherit;">Sin embargo, ni una ni la otra opci√≥n parecen ser una justificaci√≥n suficiente para dejar algo similar en el c√≥digo, sin explicar esta rareza de ninguna manera. </font><font style="vertical-align: inherit;">Con un alto grado de probabilidad, se produjo un error de copiar y pegar exactamente de la misma manera.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cheque tard√≠o</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] <span class="hljs-title">Input</span>(<span class="hljs-params"><span class="hljs-keyword">int</span>[] batch_shape = <span class="hljs-literal">null</span>,
  TF_DataType dtype = TF_DataType.DtInvalid,
  <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span>,
  <span class="hljs-keyword">bool</span> sparse = <span class="hljs-literal">false</span>,
  Tensor tensor = <span class="hljs-literal">null</span></span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">var</span> batch_size = batch_shape[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">var</span> shape = batch_shape.Skip(<span class="hljs-number">1</span>).ToArray(); <span class="hljs-comment">// &lt;=</span><font></font>
<font></font>
  InputLayer input_layer = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">if</span> (batch_shape != <span class="hljs-literal">null</span>)                   <span class="hljs-comment">// &lt;=</span><font></font>
    ....<font></font>
  <span class="hljs-keyword">else</span><font></font>
    ....<font></font>
<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advertencia del analizador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3095</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El objeto 'batch_shape' se us√≥ antes de que se verificara como nulo. </font><font style="vertical-align: inherit;">Verifique las l√≠neas: 39, 42. keras.layers.cs 39 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un error cl√°sico y bastante peligroso del uso potencial de una variable, que es un enlace a ninguna parte. </font><font style="vertical-align: inherit;">En este caso, el c√≥digo implica expl√≠citamente la posibilidad de que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">batch_shape</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sea </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nulo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; esto queda claro tanto en la lista de argumentos como en la verificaci√≥n posterior de la misma variable. </font><font style="vertical-align: inherit;">Por lo tanto, el analizador aqu√≠ indica un claro error.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øOtro ‚Ä≥ para despu√©s ‚Ä≥?</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MnistDataSet</span>(<span class="hljs-params">
  NDArray images, NDArray labels, Type dataType, <span class="hljs-keyword">bool</span> reshape // &lt;=
</span>)</span> <font></font>
{<font></font>
  EpochsCompleted = <span class="hljs-number">0</span>;<font></font>
  IndexInEpoch = <span class="hljs-number">0</span>;<font></font>
<font></font>
  NumOfExamples = images.shape[<span class="hljs-number">0</span>];<font></font>
<font></font>
  images = images.reshape(<font></font>
    images.shape[<span class="hljs-number">0</span>], images.shape[<span class="hljs-number">1</span>] * images.shape[<span class="hljs-number">2</span>]<font></font>
  );<font></font>
  images = images.astype(dataType);<font></font>
  <span class="hljs-comment">// for debug np.multiply performance</span>
  <span class="hljs-keyword">var</span> sw = <span class="hljs-keyword">new</span> Stopwatch();<font></font>
  sw.Start();<font></font>
  images = np.multiply(images, <span class="hljs-number">1.0f</span> / <span class="hljs-number">255.0f</span>);<font></font>
  sw.Stop();<font></font>
  Console.WriteLine(<span class="hljs-string">$"<span class="hljs-subst">{sw.ElapsedMilliseconds}</span>ms"</span>);<font></font>
  Data = images;<font></font>
<font></font>
  labels = labels.astype(dataType);<font></font>
  Labels = labels;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advertencia del analizador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : no se </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utiliza el</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par√°metro </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">V3117</font></a><font style="vertical-align: inherit;"> Constructor 'remodelar'. </font><font style="vertical-align: inherit;">MnistDataSet.cs 15 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al igual que algunas otras rarezas, esto probablemente se deba al hecho de que la funcionalidad est√° lejos de estar completamente implementada y es muy posible que el par√°metro de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remodelaci√≥n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se use de alguna manera en este constructor en el futuro. </font><font style="vertical-align: inherit;">Pero por el momento, parece que est√° siendo arrojado aqu√≠ as√≠ como as√≠. </font><font style="vertical-align: inherit;">Si esto realmente se hace ‚Ä≥ para m√°s adelante ‚Ä≥, entonces ser√≠a prudente marcar esto con alg√∫n comentario. </font><font style="vertical-align: inherit;">Si no es as√≠, resulta que el c√≥digo que construye el objeto tendr√° que lanzar un par√°metro adicional al constructor, y es muy posible que sea m√°s conveniente no hacerlo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escurridizo posible nula desreferencia</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] _GatherV2Grad(Operation op, Tensor[] grads)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span>((<span class="hljs-keyword">int</span>)axis_static == <span class="hljs-number">0</span>)<font></font>
  {<font></font>
    <span class="hljs-keyword">var</span> params_tail_shape = params_shape.slice(<span class="hljs-keyword">new</span> NumSharp.Slice(start:<span class="hljs-number">1</span>));
    <span class="hljs-keyword">var</span> values_shape = array_ops.concat(
      <span class="hljs-keyword">new</span>[] { indices_size, params_tail_shape }, <span class="hljs-number">0</span><font></font>
    );<font></font>
    <span class="hljs-keyword">var</span> values = array_ops.reshape(grad, values_shape);<font></font>
    indices = array_ops.reshape(indices, indices_size);<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Tensor[]<font></font>
    {<font></font>
      <span class="hljs-keyword">new</span> IndexedSlices(values, indices, params_shape), <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-literal">null</span>,
      <span class="hljs-literal">null</span><font></font>
    };<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advertencia del analizador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3146</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Posible desreferencia nula del primer argumento 'valores' dentro del m√©todo. '_Outputs.FirstOrDefault ()' puede devolver un valor nulo predeterminado. array_grad.cs 199 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comprender cu√°l es el problema, primero debe recurrir al </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo del</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> constructor </font><i><font style="vertical-align: inherit;">indexedSlices</font></i><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">IndexedSlices</span>(<span class="hljs-params">
  Tensor values, Tensor indices, Tensor dense_shape = <span class="hljs-literal">null</span>
</span>)</span><font></font>
{<font></font>
  _values = values;<font></font>
  _indices = indices;<font></font>
  _dense_shape = dense_shape;<font></font>
<font></font>
  _values.Tag = <span class="hljs-keyword">this</span>; <span class="hljs-comment">// &lt;=</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, pasar </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nulo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a este constructor arrojar√° una excepci√≥n. Sin embargo, ¬øpor qu√© el analizador considera que la variable de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valores</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> puede contener </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nulo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio utiliza la t√©cnica de an√°lisis de flujo de datos, que le permite encontrar los conjuntos de posibles valores de variables en diferentes partes del c√≥digo. Una advertencia le indica que se puede devolver nulo en la variable especificada con la siguiente l√≠nea: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_outputs.FirstOrDefault ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sin embargo, al mirar el c√≥digo anterior, puede encontrar que el valor de la variable de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valores</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se </font><font style="vertical-align: inherit;">obtiene llamando a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array_ops.reshape (grad, values_shape)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Entonces, ¬ød√≥nde </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_outputs.FirstOrDefault () entonces</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El hecho es que al analizar el flujo de datos, no solo se considera la funci√≥n actual, sino tambi√©n todas las llamadas; </font><font style="vertical-align: inherit;">PVS-Studio obtiene informaci√≥n sobre el conjunto de valores posibles de cualquier variable en cualquier lugar. </font><font style="vertical-align: inherit;">Por lo tanto, una advertencia significa que la implementaci√≥n de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array_ops.reshape (grad, values_shape)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contiene una llamada a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_outputs.FirstOrDefault ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cuyo resultado finalmente se devuelve. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para verificar esto, vaya a la implementaci√≥n de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remodelaci√≥n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor reshape&lt;T1, T2&gt;(T1 tensor, T2 shape, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span>)<font></font>
            =&gt; gen_array_ops.reshape(tensor, shape, <span class="hljs-literal">null</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego vaya al m√©todo de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remodelaci√≥n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> llamado dentro:</font></font><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor reshape&lt;T1, T2&gt;(T1 tensor, T2 shape, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span>)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> _op = _op_def_lib._apply_op_helper(
    <span class="hljs-string">"Reshape"</span>, name, <span class="hljs-keyword">new</span> { tensor, shape }<font></font>
  );<font></font>
  <span class="hljs-keyword">return</span> _op.output;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La funci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_apply_op_helper</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> devuelve un objeto de la clase </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que contiene la propiedad de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">salida</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Al recibir su valor, se llama al c√≥digo descrito en la advertencia:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> Tensor output =&gt; _outputs.FirstOrDefault();</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tensor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es, por supuesto, un tipo de referencia, por lo que el valor predeterminado para √©l ser√° </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nulo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">De todo esto se puede ver que PVS-Studio analiza meticulosamente la estructura l√≥gica del c√≥digo, penetrando profundamente en la estructura de las llamadas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El analizador complet√≥ su trabajo, lo que indica un lugar potencialmente problem√°tico. </font><font style="vertical-align: inherit;">El programador tiene que verificar si puede surgir una situaci√≥n cuando los elementos en </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_salidas</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est√°n ausentes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, el an√°lisis est√°tico al menos obligar√° al desarrollador a prestar atenci√≥n al fragmento sospechoso para evaluar si el error realmente puede ocurrir all√≠. </font><font style="vertical-align: inherit;">Con este enfoque, la cantidad de errores que pasan desapercibidos se reducir√° r√°pidamente.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øEspera poco confiable?</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> (LoopVar&lt;TItem&gt;, Tensor[]) _BuildLoop&lt;TItem&gt;(<font></font>
  ....<font></font>
) <span class="hljs-keyword">where</span> ....<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-comment">// Finds the closest enclosing non-None control pivot.</span>
  <span class="hljs-keyword">var</span> outer_context = _outer_context;
  <span class="hljs-keyword">object</span> control_pivot = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">while</span> (outer_context != <span class="hljs-literal">null</span> &amp;&amp; control_pivot == <span class="hljs-literal">null</span>) <span class="hljs-comment">// &lt;=</span><font></font>
  {<font></font>
<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (control_pivot != <span class="hljs-literal">null</span>)<font></font>
  {<font></font>
<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advertencia del analizador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3032</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Esperar en esta expresi√≥n no es confiable, ya que el compilador puede optimizar algunas de las variables. </font><font style="vertical-align: inherit;">Use variables vol√°tiles o primitivas de sincronizaci√≥n para evitar esto. </font><font style="vertical-align: inherit;">WhileContext.cs 212 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El analizador indica que el compilador puede optimizar dicha implementaci√≥n de espera, pero dudo que realmente hayan intentado implementar la espera aqu√≠; lo m√°s probable es que el c√≥digo simplemente no se haya agregado y se desarrolle m√°s en el futuro. </font><font style="vertical-align: inherit;">Puede valer la pena lanzar una </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NotImplementedException aqu√≠</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dado que esta pr√°ctica se usa en otras partes del proyecto. </font><font style="vertical-align: inherit;">De una forma u otra, creo que alg√∫n comentario explicativo obviamente no har√≠a da√±o.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rompiendo fronteras</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TensorShape</span>(<span class="hljs-params"><span class="hljs-keyword">int</span>[][] dims</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span>(dims.Length == <span class="hljs-number">1</span>)<font></font>
  {<font></font>
    <span class="hljs-keyword">switch</span> (dims[<span class="hljs-number">0</span>].Length)<font></font>
    {<font></font>
      <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: shape = <span class="hljs-keyword">new</span> Shape(<span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">0</span>]); <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: shape = Shape.Vector((<span class="hljs-keyword">int</span>)dims[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]); <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: shape = Shape.Matrix(dims[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>], dims[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>]); <span class="hljs-keyword">break</span>; <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-keyword">default</span>: shape = <span class="hljs-keyword">new</span> Shape(dims[<span class="hljs-number">0</span>]); <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">"TensorShape int[][] dims"</span>);<font></font>
  }<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advertencia del analizador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3106</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Posiblemente el √≠ndice est√° fuera de l√≠mite. El √≠ndice '1' apunta m√°s all√° del l√≠mite 'dims'. TensorShape.cs 107 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entre los fragmentos extra√±os de c√≥digo que vi, hubo un error real, que es muy dif√≠cil de notar. El siguiente fragmento es err√≥neo aqu√≠: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dims [1] [2]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Obviamente, obtener un elemento con el √≠ndice 1 de una matriz de un elemento es un error. Al mismo tiempo, si cambia el fragmento a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dims [0] [2]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aparece otro error: obtener un elemento con √≠ndice 2 de la matriz </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dims [0]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cuya longitud en este caso es la rama 2. Por lo tanto, este problema result√≥ ser como con un "doble fondo".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cualquier caso, este fragmento de c√≥digo debe ser estudiado y corregido por el desarrollador. </font><font style="vertical-align: inherit;">En mi opini√≥n, este ejemplo es una excelente ilustraci√≥n del rendimiento del An√°lisis de flujo de datos en PVS-Studio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Olepatka?</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> _init_from_args(<span class="hljs-keyword">object</span> initial_value = <span class="hljs-literal">null</span>, ....) <span class="hljs-comment">// &lt;=</span><font></font>
{<font></font>
  <span class="hljs-keyword">var</span> init_from_fn = initial_value.GetType().Name == <span class="hljs-string">"Func`1"</span>; <span class="hljs-comment">// &lt;=</span><font></font>
  ....<font></font>
  tf_with(...., scope =&gt;<font></font>
  {<font></font>
    ....<font></font>
    tf_with(...., <span class="hljs-keyword">delegate</span><font></font>
    {<font></font>
      initial_value = ops.convert_to_tensor(  <span class="hljs-comment">// &lt;=</span>
        init_from_fn ? (initial_value <span class="hljs-keyword">as</span> Func&lt;Tensor&gt;)():initial_value,<font></font>
        name: <span class="hljs-string">"initial_value"</span>,<font></font>
        dtype: dtype<font></font>
      );<font></font>
    });<font></font>
    _shape = shape ?? (initial_value <span class="hljs-keyword">as</span> Tensor).TensorShape;<font></font>
    _initial_value = initial_value <span class="hljs-keyword">as</span> Tensor; <span class="hljs-comment">// &lt;=</span><font></font>
    ....<font></font>
    _dtype = _initial_value.dtype.as_base_dtype(); <span class="hljs-comment">// &lt;=</span><font></font>
<font></font>
    <span class="hljs-keyword">if</span> (_in_graph_mode)<font></font>
    {<font></font>
      ....<font></font>
<font></font>
      <span class="hljs-keyword">if</span> (initial_value != <span class="hljs-literal">null</span>) <span class="hljs-comment">// &lt;=</span><font></font>
      {<font></font>
        ....<font></font>
      }<font></font>
<font></font>
      ....<font></font>
    }<font></font>
<font></font>
    ....<font></font>
  });<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comprender el c√≥digo anterior, tambi√©n vale la pena presentar la implementaci√≥n de la funci√≥n tf_with:</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">DebuggerStepThrough</span>] <span class="hljs-comment">// with "Just My Code" enabled this lets the </span>
[<span class="hljs-meta">DebuggerNonUserCode()</span>]  <span class="hljs-comment">//debugger break at the origin of the exception</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> tf_with&lt;T&gt;(<font></font>
  T py, Action&lt;T&gt; action<font></font>
) <span class="hljs-keyword">where</span> T : ITensorFlowObject<font></font>
{<font></font>
  <span class="hljs-keyword">try</span><font></font>
  {<font></font>
    py.__enter__();<font></font>
    action(py);<font></font>
  }<font></font>
  <span class="hljs-keyword">finally</span><font></font>
  {<font></font>
    py.__exit__();<font></font>
    py.Dispose();<font></font>
  }<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advertencia del analizador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : V3019 Posiblemente, una variable incorrecta se compara con nula despu√©s de la conversi√≥n de tipo usando la palabra clave 'as'. Verifique las variables 'initial_value', '_initial_value'. ResourceVariable.cs 137 </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_init_from_args</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es una funci√≥n bastante voluminosa, por lo que se han omitido muchos fragmentos. Puedes verlo completamente haciendo clic en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enlace</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Aunque la advertencia al principio no me pareci√≥ realmente seria, despu√©s de estudiar, me di cuenta de que algo definitivamente estaba mal con el c√≥digo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En primer lugar, debe tenerse en cuenta que el m√©todo se puede </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">invocar</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sin pasar par√°metros y, de forma predeterminada, </font><font style="vertical-align: inherit;">ser√° </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nulo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en </font><i><font style="vertical-align: inherit;">initial_value</font></i><font style="vertical-align: inherit;"> . En este caso, se lanzar√° una excepci√≥n en la primera l√≠nea. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En segundo lugar, la verificaci√≥n</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valor_inicial</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a la desigualdad </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nula</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> parece extra√±o: si </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valor_inicial</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> realmente se volvi√≥ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nulo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> despu√©s de llamar a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ops.convert_to_tensor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , entonces </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_valor_inicial</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ser√≠a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nulo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , lo que significa que llamar a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_initial_value.dtype.as_base_dtype ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tambi√©n arrojar√≠a una excepci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El analizador sugiere que es posible que deba verificar si el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valor nulo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_inicial_valor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pero como se se√±al√≥ anteriormente, la referencia a esta variable tiene lugar antes de esta prueba, por lo que esta opci√≥n tambi√©n ser√≠a incorrecta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øSe notar√≠a este peque√±o error en una funci√≥n tan gigante sin PVS-Studio? </font><font style="vertical-align: inherit;">Lo dudo mucho.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En un proyecto con muchos ejemplos de c√≥digo extra√±o, se pueden ocultar muchos problemas. El programador, acostumbr√°ndose a ver lo incomprensible, deja de notar errores al mismo tiempo. Las consecuencias pueden ser muy tristes. De hecho, entre las advertencias del analizador tambi√©n hay falsas, sin embargo, en la mayor√≠a de los casos, las advertencias al menos indican fragmentos de c√≥digo que pueden causar preguntas cuando las ve una persona. En el caso de que el c√≥digo extra√±o se escriba intencionalmente, vale la pena dejar explicaciones para que el fragmento sea claro para el desarrollador que trabajar√° con este c√≥digo en el futuro (incluso si eso significa dejar comentarios para s√≠ mismo).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al mismo tiempo, las herramientas de an√°lisis est√°tico, como PVS-Studio, pueden ser de gran ayuda para encontrar posibles errores y rarezas para que sean visibles y no se olviden, y todas las soluciones temporales se refinan posteriormente y se convierten en un trabajo limpio, estructurado y estable. el c√≥digo.</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a></p><div style="text-align:center;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/eb2/f9c/3bb/eb2f9c3bb5f32f39239298d36431961c.png"></a></div><p></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si desea compartir este art√≠culo con una audiencia de habla inglesa, utilice el enlace a la traducci√≥n: Nikita Lipilin. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øC√≥mo el c√≥digo extra√±o oculta errores? </font><font style="vertical-align: inherit;">An√°lisis TensorFlow.NET</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es496234/index.html">La raz√≥n principal por la que no Linux</a></li>
<li><a href="../es496238/index.html">Veintiocho pasos para sobrevivir y triunfar en la crisis</a></li>
<li><a href="../es496240/index.html">Product Discovery 101 para Product Manager</a></li>
<li><a href="../es496242/index.html">Cyberpunk ya est√° aqu√≠: los escolares estudian en Minecraft y los estudiantes toman ex√°menes f√≠sicos en CS: GO</a></li>
<li><a href="../es496248/index.html">Retos, calvas y vino. C√≥mo nosotros en HFLabs soportamos el autoaislamiento</a></li>
<li><a href="../es496252/index.html">Aeronaves de centrado con desplazamiento aerodin√°mico</a></li>
<li><a href="../es496254/index.html">C√≥mo Rostelecom redirigi√≥ el tr√°fico por error a Google, AWS, Cloudflare, etc.</a></li>
<li><a href="../es496256/index.html">Aprendizaje autom√°tico en R: t√©cnicas expertas para el an√°lisis predictivo</a></li>
<li><a href="../es496258/index.html">Holivar en l√≠nea: un nuevo formato para el intercambio de experiencias. Este s√°bado</a></li>
<li><a href="../es496260/index.html">Consejos de ciberseguridad para trabajar desde casa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>