<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😜 🍺 🧑‍🤝‍🧑 Pylint：コードアナライザーの詳細なテスト 🌰 🆒 🔥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ルークがFlake8を使用してPylintを監視しているとき、Pylintによって生成されたエラーの95％は誤りであるという印象を持っていました。他の開発者はこれらのアナライザーとのやり取りにさまざまな経験があったため、ルークは状況を詳細に調査し、11,000行のコードで彼の作業を研究することにしま...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Pylint：コードアナライザーの詳細なテスト</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/leader-id/blog/499870/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ルークがFlake8を使用してPylintを監視しているとき、Pylintによって生成されたエラーの95％は誤りであるという印象を持っていました。他の開発者はこれらのアナライザーとのやり取りにさまざまな経験があったため、ルークは状況を詳細に調査し、11,000行のコードで彼の作業を研究することにしました。さらに、Pylintの利点を賞賛し、Flake8への追加と見なしました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/je/g5/rljeg5-o7_1uoatmk9_mez8dslm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luke（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Luke Plant</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）-イギリスの開発者の1人で、最近出会った人気のあるコードアナライザーの分析に関する記事。 Lintersはコードを調査し、バグを見つけやすくし、チームの開発者が作成した標準やコードとスタイルを統一します。最も一般的なものはPylintとFlake8です。私たちは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リーダーIDにいます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちもそれらを使用するので、彼の記事を喜んで翻訳しました。</font><font style="vertical-align: inherit;">これらのツールであなたの経験が豊かになることを願っています。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初期設定とテストベース</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この実験では、プロジェクトの1つからコードの一部を取り、基本的な設定でPylintを起動しました。</font><font style="vertical-align: inherit;">それから彼は結果を分析しようとしました：どの警告が有用で、どれが偽でしたか。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードが取得されたプロジェクトに関する少しの助け：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Djangoで作成された通常のアプリケーション（つまり、同じPython内）。</font><font style="vertical-align: inherit;">Djangoには独自の特徴があり、フレームワークとしては制限がありますが、通常のPythonコードを記述できます。</font><font style="vertical-align: inherit;">テンプレート（コールバック関数またはテンプレートメソッドデザインテンプレート）を使用する他のライブラリにも、フレームワークとしていくつかの欠点があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22,000行のコードで構成されています。</font><font style="vertical-align: inherit;">約11,000行がPylintを通過しました（ギャップを省略した場合は9,000行）。</font><font style="vertical-align: inherit;">プロジェクトのこの部分は、主にビューとテストコードで構成されていました。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このプロジェクトのコードを分析するために、受け取ったすべてのエラーを処理したFlake8をすでに使用しました。</font><font style="vertical-align: inherit;">この実験の要点は、Flaake8への追加としてPylintの利点を評価することでした。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトはコードのテストカバレッジは良好ですが、私はその唯一の作者であるため、ピアレビューを使用する機会がありませんでした。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この分析が他の開発者がスタックでPylintを使用してコードの品質をチェックすることを決定するのに役立つことを願っています。</font><font style="vertical-align: inherit;">Pylintのようなものをすでに使用している場合は、問題を最小限に抑えるために、コードの必要な品質管理のために体系的に使用すると思います。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">したがって、Pylintは私のコードに対して1650のクレームを発行しました。 </font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下では、アナライザーのすべてのコメントをタイプ別にグループ化し、コメントを付けました。</font><font style="vertical-align: inherit;">これらのメッセージの詳細な説明が必要な場合</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Pylint関数リストの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">該当するセクションを</font></a><font style="vertical-align: inherit;">ご覧ください。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バグ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pylintは私のコードでちょうど1つのバグを見つけました。</font><font style="vertical-align: inherit;">バグは、プログラムの動作中に発生する、または発生する可能性のあるエラーと見なします。</font><font style="vertical-align: inherit;">この場合、例外を使用しました。</font></font><code>broad-except.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">つまり</font></font><code>except Exception</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Flake8がキャッチする</font><font style="vertical-align: inherit;">例外</font><font style="vertical-align: inherit;">だけで</font><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">ありません。</font><font style="vertical-align: inherit;">これにより、いくつかの例外を除き、実行時の動作が発生します。</font><font style="vertical-align: inherit;">このエラーが実行時にポップアップした場合（ポップアップしたという事実ではありません）、コードの不正な動作による深刻な影響はありませんが... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
合計：1</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有用</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのエラーに加えて、Pylintは私が役に立つと分類したいくつかのより多くを見つけました。</font><font style="vertical-align: inherit;">コードはそれらに当てはまりませんでしたが、リファクタリング中に問題が発生する可能性があり、原則として、将来的に機能のリストを拡張してコードをサポートするときにエラーが発生する可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それらのセブンました</font></font><code>too-many-locals</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>too-many-branches</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>too-many-local-variables</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それらは私のコードの3つの部分に属しており、構造が不十分でした。</font><font style="vertical-align: inherit;">構造について考えるのはいいことだし、もっと上手くできると確信している。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その他のエラー：</font></font><br>
<br>
<ul>
<li><code>unused-argument</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">×3-それらのうちの1つは実際にはわき柱であり、コードはランダムに正しく実行されました。</font><font style="vertical-align: inherit;">他の2つの不要で未使用の引数を使用すると、将来的に問題が発生します。</font></font></li>
<li><code>redefined-builtin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×2</font></font></li>
<li><code>dangerous-default-value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×2-デフォルト値を使用したことがないため、バグではありませんが、念のためこれを修正しておくとよいでしょう。 </font></font></li>
<li><code>stop-iteration-return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1-ここで私は自分のために何か新しいことを学びました。</font></font></li>
<li><code>no-self-argument</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合計：16</font></font></strong><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">化粧品の編集</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はこれらのことにあまり注意を払わないでしょう。</font><font style="vertical-align: inherit;">それらは取るに足らないか、ほとんどありません。</font><font style="vertical-align: inherit;">一方、それらの修正は不必要ではありません。</font><font style="vertical-align: inherit;">それらのいくつかは物議を醸す文体です。</font><font style="vertical-align: inherit;">他のセクションでいくつかの同様の側枠について話しましたが、ここにリストされている側枠もこのコンテキストに適しています。</font><font style="vertical-align: inherit;">Pylintを定期的に使用して、これらの「欠陥」を修正しましたが、ほとんどの場合、心配する必要はありませんでした。</font></font><br>
<br>
<code>invalid-name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">×192 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらは基本的に1文字の変数名でした。</font><font style="vertical-align: inherit;">たとえば、怖くない状況で使用されます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/94f/833/bf1/94f833bf1008d8403a0e44716852c587.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e43/9a2/75c/e439a275ceeb9508d0566015a7875e3b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くはテストコードにありました：</font></font><br>
<br>
<ul>
<li><code>len-as-condition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×20</font></font></li>
<li><code>useless-object-inheritance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×16（Python 2レガシー）</font></font></li>
<li><code>no-else-return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×11</font></font></li>
<li><code>no-else-raise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
<li><code>bad-continuation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×6</font></font></li>
<li><code>redefined-builtin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×4</font></font></li>
<li><code>inconsistent-return-statements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
<li><code>consider-using-set-comprehension</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
<li><code>chained-comparison</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合計：252</font></font></strong><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">役に立たない </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは私が書いた方法でコードを書く理由があったときであり、たとえどこかでそれが異常に思われる場合でもです。</font><font style="vertical-align: inherit;">そして、私の意見では、この形式のままにしておくことをお勧めしますが、問題を回避できる可能性のある別のスタイルのコードを記述したり、同意したりしない人もいます。</font></font><br>
<br>
<ul>
<li><code>too-many-ancestors</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×76</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーティリティやスタブを配置</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">する</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ために</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">不純物の</font></a><font style="vertical-align: inherit;"> 
多くのクラスを使用したテストコードにいました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<ul>
<li><code>unused-variable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×43</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それはほとんどいつもテストコードで見つかりました、そこで私は記録を破りました：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2c7/206/1bd/2c72061bd4270ea1128d3ea63a26e18a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...そして要素を使用しませんでした。</font><font style="vertical-align: inherit;">Pylintがエラーを報告しないようにする方法はいくつかあります（たとえば、名前を付ける</font></font><strong><code>unused</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">でも、私が書いた形のままにしておけば読めるようになり、（自分も含めて）人が理解して応援してくれます。</font></font><br>
<br>
<ul>
<li><strong><code>invalid-name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×26</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらは、コンテキストで適切な名前を割り当てたが、Pylintの命名基準を満たしていない場合でした。</font><font style="vertical-align: inherit;">たとえば、db（これはデータベースの一般的な省略形です）やその他の非標準の名前は、私の意見ではより理解しやすいものでした。</font><font style="vertical-align: inherit;">しかし、あなたは私に同意しないかもしれません。</font></font><br>
<br>
<ul>
<li><strong><code>redefined-outer-name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×16</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変数名は、内部コンテキストと外部コンテキストの両方で正しく綴られることがあります。</font><font style="vertical-align: inherit;">また、内部コンテキストから外部名を使用する必要はありません。</font></font><br>
<br>
<ul>
<li><strong><code>too-few-public-methods</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×14</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例</font><font style="vertical-align: inherit;">には、パブリックメソッドがない</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">attrs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して作成されたデータを含むクラス</font><font style="vertical-align: inherit;">、およびディクショナリインターフェイスを実装するクラスが含まれますが、メソッドが正しく機能することを確認するために必要です。</font></font><strong><code>__getitem__</code></strong><br>
<br>
<ul>
<li><strong><code>no-self-use</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×12</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらはテストコードで発生しました。</font></font><strong><code>self</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この方法では</font><font style="vertical-align: inherit;">、パラメーターなしでメソッドを基本クラスに意図的に追加しました。これにより、これらのメソッド</font><font style="vertical-align: inherit;">をインポートしてテストケースで使用できるようにした方が便利でした。</font><font style="vertical-align: inherit;">それらのいくつかは、個別の関数にラップされています。</font></font><br>
<br>
<ul>
<li><strong><code>attribute-defined-outside-init</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×10</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのケースでは、コードをそのまま書くのに十分な理由がありました。</font><font style="vertical-align: inherit;">基本的に、これらのエラーはテストコードで発生しました。</font></font><br>
<br>
<ul>
<li><strong><code>too-many-locals</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">×6、</font></font><strong><code>too-many-return-statements</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">×6、</font></font><strong><code>too-many-branches</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">×2、</font></font><strong><code>too-many-statements</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">×2</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はい、これらの機能は長すぎました。</font><font style="vertical-align: inherit;">しかし、それらを見て、私はそれらをきれいにして改善するための良い方法を見つけませんでした。</font><font style="vertical-align: inherit;">機能の1つは、長いものの、シンプルでした。</font><font style="vertical-align: inherit;">それは非常に明確な構造を持ち、曲がって書かれていませんでした。そして、私が考えることができるどのようにそれを削減する方法も、不要または不便な機能の無用な層を含むでしょう。</font></font><br>
<br>
<ul>
<li><strong><code>arguments-differ</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×6</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは主に、オーバーライドされたメソッドで* argsと** kwargsを使用しているためです。これにより、サードパーティライブラリからのメソッドのシグネチャの変更から保護できます（ただし、このメッセージは実際のバグを示す場合があります）。</font></font><br>
<br>
<ul>
<li><strong><code>ungrouped-imports</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×4</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インポートに既にisortを使用しています </font></font><br>
<br>
<ul>
<li><strong><code>fixme</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×4</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はい、修正が必要な点がいくつかありますが、今は修正したくありません。 </font></font><br>
<br>
<ul>
<li><strong><code>duplicate-code</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×3</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
場合によっては、少量のボイラープレートコードを使用することもありますが、これは単に必要であり、関数本体に実際のロジックがあまりない場合に、この警告が発生します。</font></font><br>
<br>
<ul>
<li><strong><code>broad-except</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×2</font></font></li>
<li><strong><code>abstract-method</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×2</font></font></li>
<li><strong><code>redefined-builtin</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×2</font></font></li>
<li><strong><code>too-many-lines</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このモジュールを壊す自然な方法を見つけようとしましたが、できませんでした。</font><font style="vertical-align: inherit;">これは、リンターが間違ったツールであることがわかる1つの例です。</font><font style="vertical-align: inherit;">コードが980行のモジュールがあり、さらに30行追加すると、1000行の制限を超えてしまいます。リンターからの通知は、ここでは役に立ちません。</font><font style="vertical-align: inherit;">980行で問題ないのに、なぜ1010行が悪いのでしょうか。</font><font style="vertical-align: inherit;">このモジュールをリファクタリングしたくありませんが、リンターでエラーが発生しないようにしたいと思います。</font><font style="vertical-align: inherit;">この時点での唯一の解決策は、リンターが沈黙するように何らかの方法で作成することであり、これは最終的な目標と矛盾します。</font></font><br>
<br>
<ul>
<li><strong><code>pointless-statement</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
<li><strong><code>expression-not-assigned</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
<li><strong><code>cyclic-import</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その部分を関数の1つに移動することで、サイクルを理解しました。</font><font style="vertical-align: inherit;">制限に基づいてコードを構造化するより良い方法を見つけることができませんでした。</font></font><br>
<br>
<ul>
<li><strong><code>unused-import</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
</ul><br><font style="vertical-align: inherit;"></font><code># NOQA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このエラーがポップアップしないように、Flake8を使用するとき</font><font style="vertical-align: inherit;">
にすでに追加しまし</font><font style="vertical-align: inherit;">た。</font></font><br>
<br>
<ul>
<li><strong><code>too-many-public-methods</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私のテストクラスに20の規制されたテストではなく35のテストがある場合、これは本当に問題ですか？ </font></font><br>
<br>
<ul>
<li><strong><code>too-many-arguments</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合計：243</font></font></strong><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修正できません</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このカテゴリは、特定の要件を満たす必要のあるサードパーティのライブラリまたはフレームワークにクラスを返すまたは渡す必要があるなど、外部の制限が原因で、必要に応じて修正できないエラーを反映しています。</font></font><br>
<br>
<ul>
<li><strong><code>unused-argument</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×21</font></font></li>
<li><strong><code>invalid-name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×13</font></font></li>
<li><strong><code>protected-access</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×3</font></font></li>
</ul><br><font style="vertical-align: inherit;"></font><code>sys._getframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stdlibやDjango </font><font style="vertical-align: inherit;">
などの「ドキュメント化された内部オブジェクト」へのアクセスが含まれています</font></font><code>Model._meta</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<ul>
<li><strong><code>too-few-public-methods</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×3</font></font></li>
<li><strong><code>too-many-arguments</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×2</font></font></li>
<li><strong><code>wrong-import-position</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×2</font></font></li>
<li><strong><code>attribute-defined-outside-init</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
<li><strong><code>too-many-ancestors</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合計：46</font></font></strong><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">偽のメッセージ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pylintが明らかに間違っていること。</font><font style="vertical-align: inherit;">この場合、これらはPylintエラーではありません。Pythonは動的であり、Pylintは完全にまたは確実に実行できないことを発見しようとしています。</font></font><br>
<br>
<ul>
<li><strong><code>no-member</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×395</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いくつかの基本クラスに関連付けられています：Djangoと私が自分で作成したものです。</font><font style="vertical-align: inherit;">ダイナミズム/メタプログラミングのため、Pylintは変数を検出できませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストコードの構造が原因で多くのエラーが発生しました（私はdjango-functestのテンプレートを使用しました。このテンプレートは、を呼び出す「抽象」メソッドを使用して追加の基本クラスを追加することで修正できます</font></font><strong><code>NotImplementedError</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、または多くのテストクラスの名前を変更します（I混乱する可能性があるため、私はそれをしませんでした）。</font></font><br>
<br>
<ul>
<li><strong><code>invalid-name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×52</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この問題は、主にPylintが</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PEP8定数規則を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">適用し、で</font><font style="vertical-align: inherit;">定義されたすべてのトップレベルの名前</font></font><strong><code>=</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が「定数」</font><font style="vertical-align: inherit;">であると信じている</font><font style="vertical-align: inherit;">ために発生しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">定数によって私たちが意味することを正確に定義することは、見た目よりも難しいですが、これは、たとえば関数など、本質的に定数であるものには適用されません。</font><font style="vertical-align: inherit;">また、このルールは、あまり慣れていない関数の作成方法には適用しないでください。次に例を示します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d3/945/0fd/4d39450fdda92751a828ba4344e309b5.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
定数が何であるかについての定義の欠如のため、いくつかの例は議論の余地があります。</font><font style="vertical-align: inherit;">たとえば、モジュールレベルで定義されたクラスインスタンスは、変更可能な状態がある場合とない場合がありますが、定数と見なす必要がありますか？</font><font style="vertical-align: inherit;">たとえば、次の式では：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c56/a26/52f/c56a2652fd28c08feee8306c6c96a048.png"></div><br>
<ul>
<li><strong><code>no-self-use</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×23</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pylintが誤って述べられたMethodは、継承を使用してさまざまな実装をそれぞれ実行する多くの場合に関数である可能性があり、それらを関数に変換できません。</font></font><br>
<br>
<ul>
<li><strong><code>protected-access</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×5</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pylintは「所有者」をだれが誤って評価したか（現在のコードフラグメントはオブジェクトの保護属性を作成してローカルで使用しますが、Pylintはこれを認識しません）</font></font><br>
<br>
<ul>
<li><strong><code>no-name-in-module</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
<li><strong><code>import-error</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
<li><strong><code>pointless-statement</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ×1</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このステートメントは実際に結果を生成しました：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/454/9c4/3ea/4549c43ea3cdb8f7910eaa2edce758cd.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はこれを意図的に使って、テストでは見つけられないような異常なエラーを引き起こしています。</font><font style="vertical-align: inherit;">Pylintを認識しなかったとしても責任はありません... </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合計：477</font></font></strong><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小計</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まだ最終段階ではありませんが、今度は結果をグループ化します。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「良い」-「バグ」と「ユーティリティ」ブロック-ここでピリントは間違いなく助けました：17。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「ニュートラル」-「見た目の変更」-Pylintのマイナーなメリット、エラーによるダメージはありません：252。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「悪い」-「役に立たない」、「修正できない」、「不正確」-Pylintがコードの変更を必要とする場合、必要がない場合。</font><font style="vertical-align: inherit;">外部の依存関係が原因で編集できない場所や、Pylintがコードを誤って分析した場所を含みます：766。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
善と悪の比率は非常に小さいです。</font><font style="vertical-align: inherit;">Pylintが私のコードのレビューを手伝っている同僚だったとしたら、彼に去ってくれと頼みます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
誤った通知を削除するには、発信エラークラスを無視するか（Pylintを使用する無駄を増やす）</font><font style="vertical-align: inherit;">、コードに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特別なコメント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">追加</font><font style="vertical-align: inherit;">します。</font><font style="vertical-align: inherit;">次の理由により、後者を実行したくありません。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">時間がかかる！</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リンターを沈黙させるために存在するコメントの積み上げは好きではありません。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リンターからの明確なプラスがあるときは、これらの疑似コメントを喜んで追加します。</font><font style="vertical-align: inherit;">さらに、コメントが気になるので、構文の強調表示でコメントを鮮やかに表示します</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">推奨</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">しています</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ただし、一部の場所ではすでに</font></font><code>NOQA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flake8を消音にするために</font><font style="vertical-align: inherit;">＃コメント</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">追加しています</font><font style="vertical-align: inherit;">が、それらを1つのセクションに追加すると、5つのエラーコードしか追加できません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docstrings</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pylintが発見した残りの問題は、ドキュメントの行が欠落していたことです。</font><font style="vertical-align: inherit;">私はそれらを別のカテゴリーに入れました：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらは非常に物議を醸しています、そしてあなたはそのようなものに関して完全に異なる方針を持っているかもしれません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらすべてを分析する時間はありませんでした。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
合計で、Pylintは620の不足しているドックストリング（モジュール、関数、クラスメソッド内）を発見しました。</font><font style="vertical-align: inherit;">しかし、多くの場合、私は正しかった。</font><font style="vertical-align: inherit;">例えば：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前からすべてがはっきりしているとき。</font><font style="vertical-align: inherit;">例えば：</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docstringが既に定義されている場合-たとえば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Djangoのデータベースルーター</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェイスを実装する場合</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この場合、独自の行を追加すると危険な場合があります。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他の場合では、これらの説明行は私のコードを傷つけません。</font><font style="vertical-align: inherit;">Pylintが見つけたケースの約15〜30％で、「はい、ここにドキュメント文字列を追加する必要があります。Pylintにリマインダーをありがとう」</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、どこにでもどこでもドックストリングを追加するツールは好きではありません。この場合、それらは悪い結果になると思います。</font><font style="vertical-align: inherit;">まったく書かない方がいいです。</font><font style="vertical-align: inherit;">悪いコメントのある同様の状況：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらを読むことは時間の無駄です：彼らは追加情報を持っていないか、彼らは不正確な情報を含んでいます、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらは有用な情報を含んでいるので、無意識のうちにテキスト内のdocstringを強調表示するのに役立ちます（ケースに書き込んだ場合）。 </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドキュメンテーションの行の欠落に関する警告は厄介です。それらを削除するには、コメントを個別に追加する必要があります。これには、ドッキング自体を追加するのとほぼ同じ時間がかかります。</font><font style="vertical-align: inherit;">さらに、それはすべて視覚的なノイズを作成します。</font><font style="vertical-align: inherit;">その結果、不要または有用ではないドキュメントの行が表示されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pylintの役に立たないという私の最初の仮定は正しいことがわかったと思います（私がFlake8を使用するコードベースのコンテキストでは）。私がそれを使用するためには、誤検知の数を反映するインジケーターを低くする必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
視覚的なノイズを作成することに加えて、誤った通知を整理または除外するために追加の時間が必要であり、これをプロジェクトに追加したくありません。ジュニア開発者は、Pylintのコメントを削除するための編集をもっと控え目にするでしょう。ただし、これにより、Pylintが間違っていることに気付かずに動作中のコードが破損するか、Pylintがコードを正しく理解できるように多くのリファクタリングが行われる結果になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトを最初から使用する場合、または外部依存関係のないプロジェクトでPylintを使用する場合、意見が異なり、誤った通知の数は少なくなると思います。</font><font style="vertical-align: inherit;">ただし、これにより追加の時間コストが発生する可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別のアプローチは、限られた数の種類のエラーに対してPylintを使用することです。</font><font style="vertical-align: inherit;">ただし、回答が少数であり、その回答が正しいか、非常にまれに（相対および絶対的に）誤っていることが判明しました。</font><font style="vertical-align: inherit;">その中には：</font></font><code>dangerous-default-value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>stop-iteration-return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>broad-exception</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>useless-object-inheritance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いずれにせよ、この記事がPylintを使用するか、同僚との論争で使用するかを検討する際にお役に立てば幸いです。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja499850/index.html">競合他社を分析し、40分でデジタル戦略を設定する方法</a></li>
<li><a href="../ja499852/index.html">Angularの英語ドキュメント</a></li>
<li><a href="../ja499854/index.html">Apache Bigtopと今日のHadoopディストリビューションの選択</a></li>
<li><a href="../ja499858/index.html">週末の予定：ブルースクリーンに飽きた人のためのボードゲームの概要</a></li>
<li><a href="../ja499860/index.html">（S）SDLC、または開発をより安全にする方法。パート2</a></li>
<li><a href="../ja499872/index.html">Java 9のモジュール性</a></li>
<li><a href="../ja499874/index.html">Intel NUCでの咳検出</a></li>
<li><a href="../ja499876/index.html">金融リテラシーを向上させ、交換の最初のステップに備えるための古典的な書籍トップ5</a></li>
<li><a href="../ja499878/index.html">ミリ秒の戦い。pingが最も少ないサーバーを選択する方法</a></li>
<li><a href="../ja499882/index.html">デザイナーの選択と技術面接の方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>