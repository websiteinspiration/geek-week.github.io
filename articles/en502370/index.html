<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“§ ğŸ‘¨ğŸ¼â€ğŸ”¬ ğŸ­ Putting the game "Snake" on the breadboard. Part 1: state machines ğŸ™ğŸ½ ğŸ‘©ğŸ»â€ğŸš’ ğŸ§¦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At leisure, my son and I study digital electronics. Recently, we got to the chapter on finite state machines. This topic is full of typical tasks, suc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Putting the game "Snake" on the breadboard. Part 1: state machines</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502370/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At leisure, my son and I study digital electronics. Recently, we got to the chapter on finite state machines. This topic is full of typical tasks, such as a semaphore or a vending machine. But they are all dull and too simple, and some are generally, frankly, far-fetched. After studying simple examples, I wanted to do something more interesting and complex. The classic game â€œsnakeâ€ caught my eye (my son played it on the phone), and I suggested making it on state machines. After all, the state of the game is quite final (especially if you confine yourself to a small field), and from the inputs there are only 4 buttons. And this is what we got.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wq/9e/m3/wq9em3hfdynwkdketucwhzg6x38.gif"></div><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The game Snake (she is a snake, python, boa constrictor, etc.) is widely known to everyone. She comes from the distant 70s, but I will not repeat her story, which you can read </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">on Wikipedia</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">many </font></font></u></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">articles</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on HabrÃ©. The game has fairly simple rules and at the same time addictive gameplay)) Thanks to this, it is often </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">used</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tutorials</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><u><font style="vertical-align: inherit;">code </font></u></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples</font></font></u></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In high-level programming languages, making such a game is easy enough. But in more limited conditions, the most interesting begins, for example, an implementation on </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">LabVIEW</font></a><font style="vertical-align: inherit;"> . There are also many options on FPGA: </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">link 1</font></a><font style="vertical-align: inherit;"> , </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">link 2</font></a><font style="vertical-align: inherit;"> , </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">link 3</font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><u><font style="vertical-align: inherit;"></font></u></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . But there has not been a single option on separate TTL-chips of standard series. So thatâ€™s what weâ€™ll do. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It would seem that FPGA solutions are the closest for us, and you can borrow a lot from there? But in all the options that I looked at, they are easily scattered in registers left and right. For example, very often a separate bit or number is allocated for each field cell. We cannot do this with loose powder, because each new register is a separate microcircuit that needs to be placed somewhere, and then connected. Therefore, we cross out all the experience accumulated by other developers and will do everything from scratch. As a bonus, we will collect everything on domestic (and better - Soviet) chips of the k555 / kr1533 series, with the exception of ROMs, which will have to be taken fresh.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formulation of the problem</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We will have such restrictions: a field of size 8 Ã— 8 cells (Chinese </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LED matrix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), a tail length of 8 cells. </font><font style="vertical-align: inherit;">A snake can pass through walls, but we will not process the intersection with the tail at first (in order not to complicate the design, you can add this later). </font><font style="vertical-align: inherit;">To describe the entire state of the game we need:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Head position (X = 0..7, Y = 0..7, 6 bits)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Direction of movement (â†‘ â†“ â† â†’, 2 bits)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apple Position (X, Y, 6 Bit)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tail Length (0..7, 3 bits)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The position of the tail cells (from 0 to 7 pieces of 6 bits each)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In total, 65 bits are obtained, even if we take registers of 8 bits each, only 8 such microcircuits (and one more trigger) are needed to store the state, this is quite a lot. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the tail cannot be located wherever it wants, it "grows" from the head. </font><font style="vertical-align: inherit;">Therefore, we can store not the full coordinates of each section of the tail, but only the direction in which direction from the previous cell (or head) it needs to be drawn. </font><font style="vertical-align: inherit;">Then, instead of 6 Ã— 8 = 48 bits, we need 4 Ã— 8 = 16 bits, and this is a saving of as many as four register cases!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automatic machines</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's try to do everything on machines similar to Moore or Miles. </font><font style="vertical-align: inherit;">To implement such an automaton, it is enough to have a bit of state memory (register) and combinational logic to switch between them. </font><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Wikipedia</font></a></i></font><br>
<br>
<img src="https://habrastorage.org/webt/f4/o-/oq/f4o-oqkcsvqo5ohkwugmxc7vwb4.png"><br clear="all">
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> picture</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Usually a state machine is described as a graph of states and transitions between them. </font><font style="vertical-align: inherit;">Sometimes itâ€™s more convenient to make a table of transitions to a new state, the simplest example (from Wikipedia): </font></font><br>
<img src="https://habrastorage.org/webt/dm/e6/3i/dme63iuq9yaq1jelbizwkcxyi-y.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can find more information and beautiful pictures, for example, in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this article on HabrÃ©</font></font></a></i><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Small digression</font></font></b>
                        <div class="spoiler_text">  , ,        .     ,  ROM       ,        ROM. <i>(  ,      )</i>.<br>
<br>
      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">, , </a>. <br>
<br>
<img src="https://habrastorage.org/webt/ni/sb/99/nisb99zh_hwtazsponzz_ksr_ua.png"><br>
        ,      Â« Â»       .<br>
<br clear="all">
<hr></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A snake of various states (if you do not take into account the position of the apple) can have 2 ^ 8 + 2 ^ 10 + ... + 2 ^ 24 â‰ˆ 32 million. </font><font style="vertical-align: inherit;">It is not possible to write them in the table, and even more so to draw a transition graph. </font><font style="vertical-align: inherit;">But most of the transitions are quite the same (the head moves only one adjacent cell, and the tail moves one section per turn). </font><font style="vertical-align: inherit;">In this case, we can not describe each individual state, but formulate a new state as a function of the previous one. </font><font style="vertical-align: inherit;">Moreover, we can divide the whole game into several parallel automata: 1) an automatic machine of direction, 2) an automatic machine of position of the head, 3) an automatic machine for the tail. </font><font style="vertical-align: inherit;">And to set each of them as it will be more convenient:</font></font><br>
<br>
<pre><code class="plaintext hljs">1) ,  â”‚  <font></font>
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<font></font>
   â†        â†/â†“/â†‘     â”‚ â†<font></font>
   â†          â†’       â”‚ â†’<font></font>
   â†‘        â†‘/â†/â†’     â”‚ â†‘<font></font>
   â†‘          â†“       â”‚ â†“<font></font>
   ......          â”‚<font></font>
</code></pre><br>
<pre><code class="plaintext hljs">2) ,  â”‚  <font></font>
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<font></font>
   â†             (x,y) â”‚ (x-1, y)<font></font>
   â†’             (x,y) â”‚ (x+1, y)<font></font>
   â†‘             (x,y) â”‚ (x, y-1)<font></font>
   â†“             (x,y) â”‚ (x, y+1)<font></font>
</code></pre><br>
<pre><code class="plaintext hljs">3) ,                       â”‚  <font></font>
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<font></font>
   â†            (t1,t2,t3,t4,t5,t6,t7,t8)  â”‚ (â†,t1,t2,t3,t4,t5,t6,t7)<font></font>
   ......                               â”‚<font></font>
</code></pre><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Direction</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's start with the directional machine. </font><font style="vertical-align: inherit;">If you think carefully, you can assemble it on a separate logic. </font><font style="vertical-align: inherit;">But, since the task as a whole is already rather big, I decided that it would be easier to make a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lookup table</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> from EEPROM, and write the transition table manually. </font><font style="vertical-align: inherit;">It will have 6 inputs, which means only 64 values, which we can simply drive into the hex editor.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vb/08/hw/vb08hwgm-lxgjmqawc6zkeigrmm.jpeg"><br>
<a name="snake_head"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Head</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For a head position machine, writing such a table will be much more difficult. But it essentially contains only 2 operations: +1 and -1. They can be implemented on a 4-bit adder K155IM6. For +1, we will add our coordinate with b'0001, and for -1 with b'1111 (which actually is -1 in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">additional code</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). We will need two adders (for x and y), a bit of logic, and we will store the state in the 8-bit register IR27 (we still need a lot of them):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gy/d_/zb/gyd_zbcbp4jntzurp2_-zjo2jbk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's assemble it on the board, and for verification we will immediately connect the LED matrix with two decoders. The decoder with inverse outputs is ID7, and for the direct one it would be possible to take K561ID1 (CD4028), but I didnâ€™t have it at hand. Another option is to take 8 transistors as keys, but I did not want to do this, so I had to stupidly spend another EEPROM (writing only 8 cells there). </font><i><font style="vertical-align: inherit;">The logic of the new head position on a separate board on top </font></i><b><font style="vertical-align: inherit;">Another digression</font></b></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/ur/bi/oz/urbiozx7zqk7bi33vx3k7oxkglo.jpeg"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's take a short break and save the breadboard (and a few chip cases). </font><font style="vertical-align: inherit;">We will again take advantage of the fact that any combination circuit can be replaced by a LUT by writing the table to ROM. </font><font style="vertical-align: inherit;">But how to do this for such a large table? </font><font style="vertical-align: inherit;">We will use another trick - we will do the opposite: replace the EEPROM with our logic circuit and put it into the programmer. </font><sub><i><font style="vertical-align: inherit;">Unused legs are connected to the ground through resistors. </font></i></sub><sub><i><font style="vertical-align: inherit;">(This could not be done if you delve into the settings of the programmer)</font></i></sub><font style="vertical-align: inherit;"> 
Now we will read our logic diagram as ROM and get a table. </font><font style="vertical-align: inherit;">We write it with the same programmer into a real EEPROM, which we put instead of a circuit of separate elements.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/fr/0d/ve/fr0dve-4fubq-v6y-8ilwnqomfs.jpeg"></a><br>
<sub><i><font style="vertical-align: inherit;"></font></i></sub><br>
<br><font style="vertical-align: inherit;"></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/u0/bm/5u/u0bm5uhoa8tbq9_k79djxlhcnfc.jpeg"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tail</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The tail has a length (in our limitations) from 2 to 8 cells. </font><font style="vertical-align: inherit;">To store this length, you can use a conventional counter with an account resolution input. </font><font style="vertical-align: inherit;">In fact, it will be the same finite state machine, in which the new state S 'will be equal to S + 1 or just S (if the account is prohibited). </font><font style="vertical-align: inherit;">The tail itself (or rather, the direction where it grows) we will store in two registers of 8 bits. </font><font style="vertical-align: inherit;">Theoretically, one could take ready-made shift registers (for example, IR8), but they were not at hand, so the very same IR27 were used. </font><font style="vertical-align: inherit;">At each step, the current head movement direction is written in the first bit of the register, and the value of the previous one in the second and next. </font><font style="vertical-align: inherit;">To get the direction of tail growth from it, we just need to invert one bit. </font><font style="vertical-align: inherit;">You can do this right away when recording, but I decided it was better to leave the inverse for the remaining circuit.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scheme</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In total, our next-move machine takes on this form: </font><i><font style="vertical-align: inherit;">This picture (like everyone else) is clickable. </font></i><font style="vertical-align: inherit;">
This is a rather â€œpureâ€ (from a theoretical point of view) part of the scheme. </font><font style="vertical-align: inherit;">Almost perfect example for </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">output coded Moore machine</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">U1 is responsible for the new direction, U2 for the position of the head, which are stored in U5. </font><font style="vertical-align: inherit;">U3 and U4 are used for the tail, and its length is stored (and increased) in U6. </font><font style="vertical-align: inherit;">
Next, we will need to make a display of everything that we have on the screen, and there will also be a spacecraft, only in a more dirty form. </font><font style="vertical-align: inherit;">As well as a primitive random number generator, a transition between circuits with a different clock signal and other hacks.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/vs/ou/yl/vsouyl-r2rmfrwnnniwue9hojuq.png"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subtotal</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I hope that this article has interested you and I will try to quickly finish the second part. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And if you are already torn into battle, stocked up with breadboards, microcircuits and dot screens, then a file with the ROM circuit and firmware is attached to this article. </font><font style="vertical-align: inherit;">Mini-spoiler: to repeat the design you will need about 6 prototypes, 4 EEPROM 28C16 and a little more than two dozen other chips. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Well, as it should be: like, share, retweets, sign up, press the bell, etc. ...)) And for today everything, thanks for your attention! </font><font style="vertical-align: inherit;">To be continuedâ€¦</font></font><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Archive with ROM firmware and the general</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
UPD </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">scheme</font></a><font style="vertical-align: inherit;"> : the second part is available </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en502358/index.html">Implementation of MVP based on ApplicationController and IoC in a WinForms application</a></li>
<li><a href="../en502360/index.html">Grizzly Discharges or Super Drill</a></li>
<li><a href="../en502362/index.html">Learning Event Tracing for Windows: Theory and Practice</a></li>
<li><a href="../en502366/index.html">Compare the work of open source Python - libraries for the recognition of named entities</a></li>
<li><a href="../en502368/index.html">We pump the treadmill</a></li>
<li><a href="../en502372/index.html">Problems and principles of customization of the boxed version of Bitrix24</a></li>
<li><a href="../en502374/index.html">FT8 Communication Protocol - How It Works</a></li>
<li><a href="../en502380/index.html">Celery + asyncio</a></li>
<li><a href="../en502382/index.html">Interface Bikes Toxic Grandfather. â€œLies, threats and blackmail.â€ (s1 e6)</a></li>
<li><a href="../en502384/index.html">Game Theory and its Application in Life</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>