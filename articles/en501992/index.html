<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äç‚öñÔ∏è ü•ú üï¥üèº How to organize testing in order to accelerate and stabilize product releases. Part 1 üè∑Ô∏è üë©üèº‚Äç‚úàÔ∏è ‚õ≥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If teamwork is not agreed upon, collisions will constantly occur between individual process participants and entire teams, and company products or mic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How to organize testing in order to accelerate and stabilize product releases. Part 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/X5RetailGroup/blog/501992/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If teamwork is not agreed upon, collisions will constantly occur between individual process participants and entire teams, and company products or microservices within the same product will interfere with each other using common resources and infrastructure. The result will be permanent breakdowns, conflicts and slowdowns. Fast and predictable releases in such conditions will be unattainable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My name is Victoria Dezhkina, I am engaged in testing in the Department of development and maintenance of big data products X5 Retail Group. I will tell you how we changed the testing process in one of our product teams in order to speed up the preparation of releases by almost half and relieve the team of stress. Now we are introducing this approach to testing in other products of the company.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wx/kj/au/wxkjauboziqx_k4vrxuhv0ipxum.jpeg"> <br>
<a name="habracut"></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The X5 Retail Group Big Data Directorate is currently developing 13 products, 4 of them are in the monetization department, where the products are oriented to the foreign market, and any mistake, whether it is a defect in a product or a belatedly released feature, has an economic effect and leads to loss of customers . In fact, these are internal teams that earn in the foreign market and play by the rules of small business within a large company. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All our products vary significantly in their goals and therefore require different approaches to development and testing, but they have a lot in common: they use the same infrastructure (Kubernetes, Greenplum, test servers), and developers from different product teams sometimes replace each other for a while vacations.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In such a situation, the role of agreements sharply increases: if one part of the team does not know what the other is doing, and each team has its own rules, problems will inevitably arise. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, two products use the same load testing infrastructure, and both urgently need to conduct tests. Without notifying each other, they do this at the same time, as a result, they get false results, because the DBMS has "laid down", and because of whom it is not clear. They wanted to save time in the negotiations, as a result, they lost a lot of time without any result.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Data loss is not excluded. Suppose one of the products occupies a free test server without warning anyone about it. Officially, the hardware is considered free, so another product enters there and accidentally erases all the test data of the first. This, of course, is not user data, but just test, but still quite an unpleasant case. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There may simply not be enough workers if the work is not planned in advance. For example, now stress testing at our Directorate works in a service format, that is, we select the appropriate specialist for teams upon request. If several teams, without warning in advance, come to demand load testing in one day, there may not be enough testers at all.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It seems that the easiest way out in such a situation is to establish uniform rules for interaction for all products. But the problem is that all products are different. Some of them are intended for internal users, that is, specialists from other departments of the company, for example, services for pricing or studying demand. The other part is developed for external users - for example, for suppliers. These products have completely different architectural logic and quality criteria.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Products at different stages of readiness also do not accept the same approach: at the early stage when the product is testing ideas, the priority is to understand the functionality for the user and the absence of threats to corporate security. When a product comes to support, other requirements come first: user convenience, stability of existing functionality, speed of response to defects and full compliance with corporate security policy. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These two factors ‚Äî joint work on the same territory and unique product features ‚Äî set the </font><b><font style="vertical-align: inherit;">task</font></b><font style="vertical-align: inherit;"> for us </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: to develop rules that allow teams not to interfere with each other, but at the same time will not bind testers and developers hand and foot</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and they won‚Äôt reduce the development of different products to one template, hacking all the advantages of agile and a product approach in the bud. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will say a few words about why testers play a leading role in creating standards for interaction in product teams. The fact is that, due to the specifics of our work, we see the whole product, while developers usually focus on one small area. We are the first to notice problems and offer solutions to them, but the final solution is worked out together with the developers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We already wrote </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">how this collective work is going</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on: at the initial stage, we have to literally compose a single dictionary so as not to get confused in terms. But this is only the beginning. Next, we have to agree on a mass of very different nuances.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I‚Äôll tell you how this happened on the example of one of our products - a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">procurement automation system for a distribution network. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Its task is to ensure the operation of all processes from the moment the store has a need for certain goods until the moment he receives them.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What processes have changed in our product</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When we arrived at the product, the releases were to be released every 2 weeks, but they were almost always late for a few days, and the day of release always meant that we would definitely stay at work and until the last we would stabilize the existing version. </font><font style="vertical-align: inherit;">It was necessary to change something.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is important to note that change is a common cause. </font><font style="vertical-align: inherit;">Whatever their initiator, the tester, or the developers themselves, can‚Äôt do without the consent of the entire team and strong allies. </font><font style="vertical-align: inherit;">Any changes need to be discussed by the whole team in order to collect as many ideas as possible and not miss out on possible risks. </font><font style="vertical-align: inherit;">The delivery and product manager of our product and before me systematically worked to improve processes from both the technical and the product side. </font><font style="vertical-align: inherit;">Having come to the team, I examined the process from the testing side, and together we thought out an agreed ‚Äústrategy of changes‚Äù. </font><font style="vertical-align: inherit;">The first point in it was a change in the layout of the code.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code Layout</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The calculation procedure is one of the main "pains" of team development, and there are very different problems here. </font><font style="vertical-align: inherit;">For example, a team has only one branch with a code, and error correction does not stop there. </font><font style="vertical-align: inherit;">Or there are several branches, but tasks with overlapping functionality may appear on the test environment at the same time, as a result, testers will not be able to localize the defect or check some of the new functions blocked by the defect of one of the tasks. </font><font style="vertical-align: inherit;">And about desperate developers who do not consider it something bad to quickly fix the little things on the prod without warning others, I generally will not say anything. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To avoid all this, we needed to determine the number of branches and environments, as well as agree on the procedure for putting the code to the test.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The easiest way would be to split the process into two branches with "clean" and "dirty" code. </font><font style="vertical-align: inherit;">But we had to meet many conditions:</font></font><br>
<br>
<ul>
<li>         </li>
<li>         </li>
<li>     ¬´ ¬ª,    ¬´ ¬ª</li>
<li>     </li>
<li>     ,             </li>
<li>         . </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We spent 2 hours discussing a new scheme of work and came to the following: we start three branches, two of them (release and master) will be with clean code. </font><font style="vertical-align: inherit;">In the "master" is the current product version, in the "release" - features that are ready for rolling out. </font><font style="vertical-align: inherit;">In Dev, testing takes place, here are tasks ready for the test, development is local. </font><font style="vertical-align: inherit;">Rollout to each branch occurs in agreement with the tester. </font><font style="vertical-align: inherit;">Here it is: </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/gu/1s/qh/gu1sqhl_g83ukki6rhs5_e70riw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What did this give us in terms of testing:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testing time for each task individually was reduced by 20%. </font><font style="vertical-align: inherit;">It was no longer necessary to start the test again, if a new task rolled out without a warning, new tasks did not block the verification of already done ones, and the time for localization of defects accelerated.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By the planned day of fixing the release, 1-2 tasks remained unchecked instead of 4 (that is, the time to check them was halved).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The time for integration testing and release candidate testing has been reduced from 6 hours to 2 (counting the retest). </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The number of defects found at the release stage has decreased. </font><font style="vertical-align: inherit;">Previously, on the first release version, we found more than 10, but now no more than 4. The time for retesting has decreased by 2 hours.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There was an opportunity to continue development in parallel with testing.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The total time that we spent on testing, delaying rollout to the prod, was reduced by 8 hours. </font><font style="vertical-align: inherit;">Just 2 hours of discussing a new scheme for working with the team - and managed to save a whole working day, which used to be spent every two weeks. </font><font style="vertical-align: inherit;">Not bad? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the problems remained.</font></font><br>
<br>
<ul>
<li>        ,          . </li>
<li> -   ,      ,   .</li>
<li>           .</li>
<li>  ,      .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bottom line: we continued to linger on work on release day. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We gathered again. Part of the problems was resolved by refining the development process and adding CI: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_l/za/d4/_lzad4uxycygdw4rpm5uqksg-nu.jpeg"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We set up automatic rolling out to all environments for almost a month, but this gave an acceleration in time of almost 2 working days. The team has been going for a long time to this, the distribution manager and the developers themselves have been doing this, but so far they have not been able to achieve two things: so that the roll-out to all environments is uniform and that at the same time the version control is preserved. Automatic rollout either violated the main principle of testing ‚Äúat any given time, the tester must know what is in each environment‚Äù, or slowed down developers who could not complete the development of the task without permission to roll out the test.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is a difficult dilemma. </font><font style="vertical-align: inherit;">Ignore the first principle and instead of speeding up, you get a sharp decrease in the predictability of releases and erroneously deflated tasks. </font><font style="vertical-align: inherit;">For example, if a defect is corrected already in conjunction with a ‚Äúclean task‚Äù, then when rolling out a fixed task, it will certainly catch the defective one. </font><font style="vertical-align: inherit;">Therefore, you will have to either wait for the correction of the defect of the related task, postponing the release date, or re-fix the defect already fixed. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Automatic roll-out is not a person, you will not agree with it. </font><font style="vertical-align: inherit;">Therefore, we solved the problem with the remaining errors in a different way - a special approach to planning, and then adding another stand.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Planning for development and testing </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Initially, when planning, the team and I discussed whether the task was clear to the developers, how long it would take and whether we would fit into the sprint. The tester estimated how long the testing would take. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the same time, we did not discuss at all the errors that might occur: we did not foresee them in advance and did not include them in the list of possible tasks. As a result, when these cases got out during the testing process, they were added as a separate task, they needed time to work out and increased the release volume, and sometimes they were only found in the release candidate, at the stage of joint testing of tasks, postponing roll-out indefinitely. We gathered for three - a tester, delivery and product, and thought out a new interaction scheme.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we pronounce all possible errors before starting development. It took me to become a boring student, who at the planning stage asks everything and everything: ‚ÄúWhat will happen if the third-party service falls off?‚Äù, ‚ÄúAnd if we get null, but not 0?‚Äù, ‚ÄúWhat if we don‚Äôt get all the data? "," And if the Pechenegs attack? " and so on, but now we were ready for everything. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We also started talking about how we will implement this or that task and how we will test it. This allowed to reduce initiative (the invention of all kinds of bicycles, for example) and gave each team member an understanding of what his colleagues were doing. This, by the way, allowed us to abandon the acceptance criteria (AC).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To prevent the discussion in the new format from being too cumbersome, we began to do this not for 2 weeks in advance, but for a week. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The new code layout and task scheduling were just the first steps. </font><font style="vertical-align: inherit;">In the next part of the article, which will be released tomorrow, I will talk in detail about how we changed a whole series of processes in the team:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The format for setting and accepting tasks and defects: they</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> left user stories for the ‚Äúuse case + technical task‚Äù hybrid more convenient for us.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testing moment:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 5 points were set in the release cycle at which testers actively control the process of product creation.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The rules of interaction of the ‚Äúbackend - testing - frontend‚Äù connection: we</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> developed a scheme that allowed us to check all the data that is transmitted between the backend and the frontend.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acceleration of work on fixing defects:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> established rules on how to prioritize debugging tasks so as not to distract developers once again.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These measures allowed us to shorten the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">release cycle from 2.5 weeks to 1.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The increase in speed may seem small, but the main achievement was that our releases became more stable and predictable - we got the opportunity to roll out releases "on command": we can get together any day, roll out tasks and by evening everything will be ready and debugged.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en501982/index.html">How to transfer a shader from a game engine to Substance Painter</a></li>
<li><a href="../en501984/index.html">What to see in quarantine? A selection of materials from Technostream (part 4)</a></li>
<li><a href="../en501986/index.html">Secrets of the incredible success of Apple AirPods</a></li>
<li><a href="../en501988/index.html">How does the VK message screen render?</a></li>
<li><a href="../en501990/index.html">Useful post: 4 events to solve the problems of the second day in OpenShift and create operators</a></li>
<li><a href="../en501994/index.html">Orchestrator for MySQL: why a fail-safe project cannot be built without it</a></li>
<li><a href="../en501996/index.html">Zen Go (Pocket Version)</a></li>
<li><a href="../en501998/index.html">Expensive price of styles. Yandex Report</a></li>
<li><a href="../en502000/index.html">12 Data Engineering Online Courses</a></li>
<li><a href="../en502004/index.html">Kanban Method: Understanding Your Process as a Collective Knowledge Process - Part 1 (recipes)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>