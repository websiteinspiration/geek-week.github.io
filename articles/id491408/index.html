<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚂 🧖🏽 💐 Buat API CRUD Anda sendiri di Express dan MySQL: bagian satu 🧚🏾 🛏️ 🤸🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya. Untuk mengantisipasi dimulainya kursus "Pengembang JavaScript Fullstack" , kami ingin membagikan sedikit materi yang ditulis oleh penul...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Buat API CRUD Anda sendiri di Express dan MySQL: bagian satu</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/491408/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Halo semuanya. Untuk mengantisipasi dimulainya kursus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Pengembang JavaScript Fullstack"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kami ingin membagikan sedikit materi yang ditulis oleh penulis lepas kami.</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/9w/az/vb/9wazvb3h8u0o1gjvijjntbhrkgk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Express adalah salah satu kerangka kerja web paling populer yang mendukung perutean, kelas menengah dan sistem templat. Membuat backend di Node.js tanpa Express pada tahun 2020 adalah kegiatan yang agak aneh, karena Express adalah kerangka kerja de facto untuk membangun aplikasi web di Node.js.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hari ini kita akan mencoba membuat API CRUD sederhana menggunakan database MySQL. </font><font style="vertical-align: inherit;">Pembaca Node.js yang berpengalaman akan bertanya, di mana MongoDB, yang dengannya Node.js biasanya digunakan bersama-sama, tetapi saya akan segera mengatakan artikel ini lebih untuk pengembang PHP yang ingin sedikit menyentuh Node.js, dan untuk mengurangi transisi ke ekosistem baru, kami kita akan menggunakan MySQL. </font><font style="vertical-align: inherit;">Kami akan membuat API untuk aplikasi Todo sederhana, seandainya seseorang ingin melampirkan todo-nya (dan itu tidak masalah apakah itu ditulis dengan Bereaksi atau tidak), lampirkan sedikit punggung dan mainkan dengan itu.</font></font><br>
<a name="habracut"></a><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "Arsitektur" dan esensi dari aplikasi kita</font></font></h5><br>
<img src="https://habrastorage.org/webt/jh/jh/si/jhjhsi1hno_tuosqmjuft3algig.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam aplikasi kami akan dimungkinkan untuk membuat, menerima, memperbarui, dan menghapus Todo. </font><font style="vertical-align: inherit;">Secara umum, kita akan memiliki satu set fungsi CRUD minimal (membuat pembaruan baca dihapus). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada akhirnya, kami akan menggabungkan aplikasi dengan aplikasi di Bereaksi dan kami akan menguji semuanya. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, saya akan memberikan struktur file aplikasi: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i_/ad/nq/i_adnqzj03nofwn7xqkgjki-ono.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, saya akan memberikan tabel tindakan dan metode yang ada di aplikasi kita:</font></font><br>
<br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metode</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Url</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tindakan</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dapatkan</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ penawaran</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mendapatkan semua kasing</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dapatkan</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ penawaran / 2</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mendapatkan id dengan nomor 2</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pos</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ penawaran </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menambahkan case baru</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Taruh </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ penawaran / 3 </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Perbarui pengguna dengan id = 3</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MENGHAPUS </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ penawaran / 3 </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hapus pengguna dengan id = 3</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MENGHAPUS </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ penawaran </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hapus semua pengguna</font></font></th>
</tr>
</tbody>
</table></div><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Membuat Aplikasi Node.js Anda </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buka direktori favorit Anda, luncurkan terminal dan buat aplikasi Anda. </font><font style="vertical-align: inherit;">Ngomong-ngomong, mungkin jelas dari judul bahwa Node.js harus sudah diinstal. </font><font style="vertical-align: inherit;">Jika Anda belum melakukannya, maka </font></font><strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ini tidak dapat</font></font></strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diunduh dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tautan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari sini.</font></font><br>
<br>
<pre><code class="plaintext hljs">    $ mkdir CRUD_API<font></font>
    $ cd CRUD_API<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Selanjutnya, Anda perlu menginisialisasi aplikasi kami menggunakan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">npm init</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Karena </font><font style="vertical-align: inherit;">aplikasi kami lebih merupakan tes dan pelatihan, saya akan menggunakan perintah yang akan mengisi semua data default agar tidak membuang waktu pada detail kecil:</font></font><br>
<br>
<pre><code class="plaintext hljs"> npm init -y
 </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika itu, maka dengan tangan </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda </font><font style="vertical-align: inherit;">di dalam </font><font style="vertical-align: inherit;">Anda dapat mengubah data ke yang Anda butuhkan: repositori github, tag, penulis, dll. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maka kita perlu meletakkan semua paket yang diperlukan agar aplikasi berfungsi:</font></font><br>
<br>
<pre><code class="plaintext hljs">  npm i express mysql body-parser --save
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda akan mengirim pengembangan Anda ke github nanti, Anda harus membuat file tersembunyi </font></font><code>.gitignore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agar tidak menarik node_modules terberat </font></font><strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan memalukan</font></font></strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diri Anda </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Kami menulis:</font></font><br>
<br>
<pre><code class="plaintext hljs">    touch .gitignore <font></font>
    code .gitignore <font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami masukkan di sana </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, nanti dalam file ini Anda dapat memasukkan nama folder dan file yang ingin Anda lihat nanti di server jauh.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Penyiapan dasar Express</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di folder root proyek, buat file </font></font><code>server.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">"express"</span>);
    <span class="hljs-keyword">const</span> bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">"body-parser"</span>);<font></font>
    <font></font>
    <span class="hljs-keyword">const</span> app = express();<font></font>
    <font></font>
    <span class="hljs-comment">//     json</span><font></font>
    app.use(bodyParser.json());<font></font>
    <font></font>
    <span class="hljs-comment">//    : application/x-www-form-urlencoded</span>
    app.use(bodyParser.urlencoded({ <span class="hljs-attr">extended</span>: <span class="hljs-literal">true</span> }));<font></font>
    <font></font>
    <span class="hljs-comment">//   response - request</span>
    app.get(<span class="hljs-string">"/"</span>, (req, res) =&gt; {<font></font>
      res.json({ <span class="hljs-attr">message</span>: <span class="hljs-string">"    "</span> });<font></font>
    });<font></font>
    <font></font>
    <span class="hljs-comment">//  ,   </span>
    app.listen(<span class="hljs-number">3001</span>, () =&gt; {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"   3001 "</span>);<font></font>
    });<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita dapat memulai server dengan:</font></font><br>
<br>
<pre><code class="plaintext hljs">node server.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Kita perlu Express untuk membuat api kita, dan paket </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">body-parser</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> membantu kita mem-parsing </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permintaan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan membuat </font></font><code>req.body</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang berguna untuk perutean. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang server kami dapat melakukan hal berikut:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Buat aplikasi Express yang menjadikan body-parser midlever menggunakan app.use ()</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami punya get sederhana, hanya untuk menguji aplikasi</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dengarkan port 3001 untuk semua perubahan yang masuk</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Awalnya, aplikasi kami berfungsi, lalu Anda bisa melakukan database.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buat tabel data MySQL Anda</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya sangat berharap bahwa pembaca artikel ini tidak memiliki masalah mengunduh dan menginstal MySQL dan MySQLWorkBranch sendiri. </font><font style="vertical-align: inherit;">Selanjutnya, Anda sendiri membuat skema (DB) dengan nama yang paling Anda sukai (dalam kasus saya, TODO), lalu pilih permintaan kilat dan salin / ketik perintah berikut:</font></font><br>
<br>
<pre><code class="sql hljs">    <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> <span class="hljs-string">`todo`</span> (
        <span class="hljs-keyword">id</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> PRIMARY <span class="hljs-keyword">KEY</span> AUTO_INCREMENT,
        <span class="hljs-built_in">text</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
      ) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam basis data kami, semuanya akan minimal: hanya id dan teks dari kasing itu sendiri. </font><font style="vertical-align: inherit;">Namun, untuk menambahkan kolom lain di mana, misalnya, urgensi kasus Anda dapat dijelaskan, saya harap itu tidak akan menimbulkan masalah.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Konfigurasi &amp; Hubungkan dengan basis data kami</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita membangun dan mengkonfigurasi koneksi ke database. </font><font style="vertical-align: inherit;">Kami akan membuat folder aplikasi baru langsung di folder root kami, dan di sana kami akan membuat file </font></font><code>db.config.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di folder </font></font><code>config</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dengan kira-kira konten yang sama, yang tergantung pada pengaturan Anda di MySQLWorkBranch. </font><font style="vertical-align: inherit;">Dalam kasus saya, file akan terlihat seperti ini:</font></font><br>
<br>
<pre><code class="javascript hljs">  <span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">HOST</span>: <span class="hljs-string">"localhost"</span>,
    <span class="hljs-attr">USER</span>: <span class="hljs-string">"pavel"</span>,
    <span class="hljs-attr">PASSWORD</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">DB</span>: <span class="hljs-string">"TODO"</span><font></font>
  };<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, buat folder untuk menggambarkan model </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplikasi / mode kami</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , di mana kami kemudian akan membuat model:</font></font><br>
<br>
<pre><code class="plaintext hljs">  const mysql = require("mysql");<font></font>
  const dbConfig = require("../config/db.config.js");<font></font>
  <font></font>
  //      <font></font>
  const connection = mysql.createConnection({<font></font>
    host: dbConfig.HOST,<font></font>
    user: dbConfig.USER,<font></font>
    password: dbConfig.PASSWORD,<font></font>
    database: dbConfig.DB<font></font>
  });<font></font>
  <font></font>
  //      <font></font>
  connection.connect(err =&gt; {<font></font>
    if (err) throw error;<font></font>
    console.log("    ");<font></font>
  });<font></font>
<font></font>
  module.exports = connection;<font></font>
   //  <font></font>
</code></pre><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Buat Model </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Dalam folder tersebut </font></font><code>model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kami membuat file bernama </font></font><code>deal.model.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Jika Anda memiliki pertanyaan, apa model secara umum, Anda harus membaca artikel seperti </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan membiasakan diri dengan pola desain MVC. </font><font style="vertical-align: inherit;">Saya akan membuat konstruktor untuk objek Deal, dan menggunakan koneksi untuk fungsi CRUD berikut:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> penciptaan bisnis baru</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menemukan case oleh id</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mendapatkan semua kasing</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kemampuan untuk memperbarui kasus kami dengan id</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hapus satu case dengan id</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> penghapusan lengkap semua kasus</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Total, kita harus melakukan hal-hal berikut:</font></font><br>
<br>
<pre><code class="javascript hljs">  <span class="hljs-comment">//   </span>
  <span class="hljs-keyword">const</span> Deal = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">deal</span>) </span>{
    <span class="hljs-keyword">this</span>.text = deal.text;<font></font>
  };<font></font>
  <span class="hljs-comment">//    ,        CRUD,      :</span>
  Deal.create = <span class="hljs-function">(<span class="hljs-params">newDeal, result</span>) =&gt;</span> {<font></font>
    sql.query(<span class="hljs-string">"INSERT INTO TODO SET ?"</span>, newDeal, (err, res) =&gt; {
      <span class="hljs-comment">//   SQL</span>
      <span class="hljs-keyword">if</span> (err) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"error: "</span>, err);<font></font>
        result(err, <span class="hljs-literal">null</span>);
        <span class="hljs-comment">//   ,     </span>
        <span class="hljs-keyword">return</span>;<font></font>
      }<font></font>
  <font></font>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">" "</span>, { <span class="hljs-attr">id</span>: res.insertId, ...newDeal });<font></font>
      result(<span class="hljs-literal">null</span>, { <span class="hljs-attr">id</span>: res.insertId, ...newDeal });<font></font>
    });<font></font>
  };<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya akan meletakkan sisa kode di spoiler, karena saya tidak melihat alasan untuk membawa semuanya, karena sebenarnya pola kode diulang di sana, hanya perintah dan argumen sql yang berubah:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sisa kode</font></font></b><div class="spoiler_text"> Deal.findById = (dealId, result) =&gt; {<br>
 sql.query(`SELECT * FROM TODO WHERE id = ${dealId}`, (err, res) =&gt; {<br>
 if (err) {<br>
 console.log(«error: », err);<br>
 result(err, null);<br>
 return;<br>
 }<br>
 <br>
 if (res.length) {<br>
 console.log(« : », res[0]);<br>
 result(null, res[0]);<br>
 return;<br>
 }<br>
 <br>
 //     <br>
 result({ kind: «not_found» }, null);<br>
 });<br>
 };<br>
 <br>
 Deal.getAll = result =&gt; {<br>
 sql.query(«SELECT * FROM TODO», (err, res) =&gt; {<br>
 if (err) {<br>
 console.log(«error: », err);<br>
 result(null, err);<br>
 return;<br>
 }<br>
 <br>
 console.log(«deals: », res);<br>
 result(null, res);<br>
 });<br>
 };<br>
 <br>
 Deal.updateById = (id, deal, result) =&gt; {<br>
 sql.query(<br>
 «UPDATE TODO SET text =? WHERE id = ?»,<br>
 [deal.text, id],<br>
 (err, res) =&gt; {<br>
 if (err) {<br>
 console.log(«error: », err);<br>
 result(null, err);<br>
 return;<br>
 }<br>
 <br>
 if (res.affectedRows == 0) {<br>
 result({ kind: «not_found» }, null);<br>
 return;<br>
 }<br>
 <br>
 console.log(«  », { id: id, ...deal });<br>
 result(null, { id: id, ...deal });<br>
 }<br>
 );<br>
 };<br>
 <br>
 Deal.remove = (id, result) =&gt; {<br>
 sql.query(«DELETE FROM TODO WHERE id = ?», id, (err, res) =&gt; {<br>
 if (err) {<br>
 console.log(«error: », err);<br>
 result(null, err);<br>
 return;<br>
 }<br>
 <br>
 if (res.affectedRows == 0) {<br>
 //       id<br>
 result({ kind: «not_found» }, null);<br>
 return;<br>
 }<br>
 console.log(«   », id);<br>
 result(null, res);<br>
 });<br>
 };<br>
 <br>
 Deal.removeAll = result =&gt; {<br>
 sql.query(«DELETE FROM TODO», (err, res) =&gt; {<br>
 if (err) {<br>
 console.log(«error: », err);<br>
 result(null, err);<br>
 return;<br>
 }<br>
 <br>
 console.log(`deleted ${res.affectedRows} deals`);<br>
 result(null, res);<br>
 });<br>
 };<br>
 <br>
 </div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu saja untuk saat ini. </font><font style="vertical-align: inherit;">Bagian selanjutnya dari artikel ini sedang mendekati, di mana kita selesai menulis kembali dan mulai mengujinya. </font><font style="vertical-align: inherit;">Dan menurut tradisi, beberapa tautan bermanfaat:</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fitur kerja dan perangkat internal express.js</font></font></a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perintah MySQL Dasar</font></font></a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sedikit tentang loop permintaan / respons HTTP</font></font></a> </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sedikit tentang fungsi panah jika Anda seorang pemula yang lengkap</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id491384/index.html">Keamanan Informasi Platform respons insiden otomatis</a></li>
<li><a href="../id491388/index.html">Pergi dari jQuery ke Svelte, seolah-olah</a></li>
<li><a href="../id491398/index.html">Pengujian dan perbandingan WS2813, WS2812B, WS2815 dan strip LED digital serupa</a></li>
<li><a href="../id491404/index.html">Kejahatan demi kebaikan: Masker cetak 3D Supervillain melindungi anak-anak dari udara yang tercemar</a></li>
<li><a href="../id491406/index.html">STM32 Bagian 3: Proyek Pertama</a></li>
<li><a href="../id491412/index.html">Panduan Sertifikasi Tenaga Penjualan</a></li>
<li><a href="../id491416/index.html">Pilihan fakta statistik yang menghibur # 5</a></li>
<li><a href="../id491422/index.html">Hanya sukarelawan yang maju selangkah</a></li>
<li><a href="../id491426/index.html">Jinja2 di dunia C ++, bagian tiga. "Sekarang kamu berada di Conan"</a></li>
<li><a href="../id491428/index.html">Slurm Agile. Tiga hari tanggung jawab, keterbukaan, keberanian dan rasa hormat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>