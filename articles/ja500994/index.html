<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💨 🌔 👶🏿 アリを実行します。走る 🧗🏾 😼 🧓🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="この記事では、シミュレーション環境「AnyLogic」でアリのコロニー（Wikipediaで読むことができます）の動作のシミュレーションモデルを作成するプロセスについて説明します。この記事は実用的です。巡回セールスマン問題を解決するためにantアルゴリズムの使用を検討します（ここで読むことができます...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>アリを実行します。走る</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500994/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事</font><font style="vertical-align: inherit;">では、シミュレーション環境「AnyLogic」で</font><font style="vertical-align: inherit;">アリのコロニー（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wikipedia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で読むことができます</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">の動作のシミュレーションモデルを作成するプロセスについて説明します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この記事は実用的です。</font><font style="vertical-align: inherit;">巡回セールスマン問題を解決するためにantアルゴリズムの使用を検討します（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここで読む</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ことができ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ca/-m/xy/ca-mxya2npzn6aynp21dpuepx2g.gif"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本質について簡単に</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
巡回セールスマン問題の本質は、巡回セールスマン（売り手）が最短ルートに沿って一度だけ各都市を訪問した後でN都市を訪問しなければならないことです。このタスクはNP複雑であり、N都市間のすべての可能なルートのオプションの数は「N！」として計算されるため、Nの増加に応じて最短ルート検索時間は指数関数的に増加します。したがって、アルゴリズムを使用した最短ルート（ソリューション）検索時間Nが16を超える都市の数での「完全な検索」（正確なソリューションを提供）は、急激に増加します（指数関数的です）。したがって、「antアルゴリズム」を使用して、有限の時間内で最短ルートを検索するのではなく、有限時間内でそれに近い（合理的）ルートを検索します。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AnyLogicに関する一言は、さまざまな複雑さのシミュレーションモデルを作成できる強力なツールです。</font><font style="vertical-align: inherit;">シミュレーションのさまざまなアプローチを実装します。</font><font style="vertical-align: inherit;">ここでは、アプローチの1つ、つまり「エージェント」モデリングのみを分析します。</font><font style="vertical-align: inherit;">これは、既存のツールを補完するJavaプログラミング言語で実装されています。</font><font style="vertical-align: inherit;">「AnyLogic」の主な欠点は、作成されたエージェントの数の無料バージョンの制限であり、その数は50,000を超えることはできません。「エージェント」はAnyLogicシミュレーションシステムの基本単位です。</font><font style="vertical-align: inherit;">詳細については、ウェブサイト</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.anylogic.ruをご覧ください。</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ツール</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Anylogic -ここから無料版をダウンロードするには、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.anylogic.ru/downloads</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
AnyLogic初期知人を：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AnyLogicインタフェースは、それが含まれ、図1に示されています：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">緑の領域は、エージェントが作成するスペースです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">赤い領域-フォーカスされているオブジェクトのプロパティ。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パレット-モデルを作成するときに使用できるツール。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクト-開発されたモデルの構造。</font></font></li>
</ul><br>
<br>
<img src="https://habrastorage.org/webt/ni/-d/kx/ni-dkxyorpukg5a6xkitxe7nwpm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">1- AnyLogicポップアップウィンドウ</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトの作成</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここではすべてが簡単です。</font><font style="vertical-align: inherit;">[作成]、[モデル]の横にある[ファイル]メニュー項目をクリックし、モデル名を入力して[完了]ボタンをクリックします（図2）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ej/5e/96/ej5e96ohohjgxmygsj2teeedt1q.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">2-モデルの作成</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都市を作成する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、始めましょう。最初に行うのは、アリが訪問するいわゆる都市（グラフの上部）を作成することです。図3に</font></font><br>
<br>
<img src="https://habrastorage.org/webt/v9/2x/nb/v92xnbu57t8ulh_cttg_i6p1e_0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示す</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ように、パレットの「エージェント」タブを開き、小さな男性の赤い円をそこから「メイン」エージェントにドラッグするのはなぜですか</font><i><font style="vertical-align: inherit;">。 3-都市の作成</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
マウスボタンを離すと、ダイアログボックスが表示され（「ステップ1」）、エージェントを作成するように求められます。 「エージェントの母集団」アイテムを選択し、「次へ」ボタンをクリックする必要がある場合。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h5/bb/jm/h5bbjm3eyfyzggqc_ixb7bikqoi.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 4-都市</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の</font><i><font style="vertical-align: inherit;">作成</font></i><font style="vertical-align: inherit;">次のダイアログボックスが表示され（ステップ2）、新しいエージェントタイプの名前とエージェントの母集団の名前を入力する必要があります。タイプ「MyTown」と人口の名前「myTowns」を入力し、「次へ」ボタンをクリックします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0k/fi/ak/0kfiaknzozrmlyjkzpgnkdrtp2m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 4a-新しいエージェントの名前を入力します</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、次のウィンドウが表示されます（ステップ4.）。ここでは、「2Dエージェントアニメーション」と「Plant」と書かれたアイコンを選択し、「完了」ボタンをクリックします（図5）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/si/73/l7/si73l7efxqaj4-lsibjaq23bo5o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 5-エージェントのアニメーションを追加</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
するモデルの都市の初期数を決定する変数を作成します。 「パレット」から、「変数」と書かれたアイコンをエージェント「メイン」にドラッグし、その名前「numberTown」を入力するのはなぜですか。次に、変数のアイコンをクリックして、[プロパティ]タブで、たとえば10に等しい初期値を入力し、そのタイプ「int」を選択します（図6）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xg/ox/6o/xgox6ohlkcyugq_8bndgxeqe7pe.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 6-変数の作成</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
次に、都市人口「myTowns」の初期値を設定します。このアイコンをクリックし、[プロパティ]タブの[初期エージェント数]フィールドに、先ほど作成した変数の名前を書き込みます（図7）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n2/wn/wr/n2wnwrzolah44a3oiblzp0uitvw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">7-「myTowns」人口のプロパティの変更次に、</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ランダムな場所で「メイン」エージェントに都市</font><i><font style="vertical-align: inherit;">の</font></i><font style="vertical-align: inherit;">結論を</font><i><font style="vertical-align: inherit;">描画し</font></i><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">スペースは400x400ピクセルの正方形に制限されています。</font><font style="vertical-align: inherit;">「プロジェクト」タブで「メイン」エージェントをマウスで選択し、「プロパティ」タブの「起動時」フィールドに次のJavaコードを追加する理由（図7a）：</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myTowns.size(); i++) {<font></font>
	myTowns.get(i).setXY(uniform(<span class="hljs-number">0</span>,<span class="hljs-number">400</span>), uniform(<span class="hljs-number">0</span>,<span class="hljs-number">400</span>));<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どこ：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.size（）-作成された都市の数。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.get（i）.setXY（ユニフォーム（0.400）、ユニフォーム（0.400））-i番目の都市のX座標とY座標を設定します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユニフォーム（0,400）-確率変数の等しくありそうな分布則に従って、0から400の範囲の乱数を返す関数。</font><font style="vertical-align: inherit;">AnyLogic環境には、ランダム変数のさまざまな分布を操作するための広範なツールキットがあります。</font><font style="vertical-align: inherit;">確率分布の組み込みコンストラクタがあり、ツールバーで使用できます。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どこ：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.size（）-作成された都市の数。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.get（i）.setXY（ユニフォーム（0.400）、ユニフォーム（0.400））-i番目の都市のX座標とY座標を設定します。</font></font></li>
<li>uniform(0,400) – ,        0  400      .   AnyLogic          .              . </li>
</ul><br>
<br>
<img src="https://habrastorage.org/webt/cx/9s/uh/cx9suhbif3brjkqje09vjpp0wos.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">7a-都市を配置すると、</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
すでに何が行われたかを確認してモデルを開始できます。</font><font style="vertical-align: inherit;">これを行うには、「F5」キーを使用してクリックすると、図8に</font></font><br>
<br>
<img src="https://habrastorage.org/webt/e7/w9/0j/e7w90jfs3sz6flkkxvkmhksfysk.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示す</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ように、実験を起動するためのウィンドウが起動します</font><i><font style="vertical-align: inherit;">。</font></i><i><font style="vertical-align: inherit;">8-実験を開始する</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
次に、ウィンドウの左下隅にある[実行]ボタンをクリックすると、実験が開始されます。</font><font style="vertical-align: inherit;">図9に</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h5/hj/rw/h5hjrw2oona5nb5oxamr7wk1kro.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示す</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ように、画面にコンテンツが表示されたウィンドウが表示されます</font><i><font style="vertical-align: inherit;">。</font></i><i><font style="vertical-align: inherit;">9-実験の結果</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
このステップでは、10個の都市を作成し、それらを画面上のランダムな（確率的）場所に配置しました。</font><font style="vertical-align: inherit;">それでは、「アリ」の作成に移りましょう。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アリを作成する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、モデルの主な戦闘ユニットはアリになります。最初にそれを作成し、次にその動作をモデル化する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アリの作成は都市の作成に似ています。 「パレット」で「エージェント」を選択し、「メイン」にドラッグします。 「エージェントの母集団」、「新しいタイプのエージェントを作成する」を選択し、「新しいタイプの名前」と「母集団名」、「MyAnt」、「myAnts」を入力して、「次へ」をクリックします。その後、「2D」アニメーションを選択します。たとえば、「戦闘機」と書かれたアイコンが「完了」を押すと、図10の</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q-/pb/wj/q-pbwj-wzsom4meb0xjebt8f6e0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ようになります。 10-アリを作成する</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
飛行機はアリのようには見えないので、修正します。アリを描いた写真を探して検索エンジンに入り、飛行機をアリに変えます。 「myAnts」の近くの赤い丸をダブルクリックするのはなぜですか。その後、「myAnt」タブが開き、飛行機を取り外して、その場所にアリを配置する必要があります（図11）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/v-/5a/tp/v-5atplfehtp9oii49ogb4zarx4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 11-MyAntタブマウスで</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
平面を選択し、「Del」を押します。次に、「プレゼンテーション」タブに移動し、そこから「画像」要素をドラッグします。その後、ダイアログが自動的に開き、ファイルを選択します。 antを使用してファイルを選択し（図12）、[OK]をクリックします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3u/cv/jo/3ucvjoiromyqmon5c0gg8rnitps.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 12-Antがあり、すでに飛行機がないMyAntタブ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
進め。</font><font style="vertical-align: inherit;">アリをスケーリングし、平面が以前あった場所に移動します。</font><font style="vertical-align: inherit;">図12aに示すようになります。</font><font style="vertical-align: inherit;">これらの操作はすべてマウスを使用して実行されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bh/rr/n_/bhrrn_45uobnz9cpfxyxfmgpajm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">12a-Antを含むMyAntタブ</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アリを蘇らせる</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、焼きたてのアリに都市間を這うように教える必要があります。</font><font style="vertical-align: inherit;">確かに、これまでのところ、数学モデルを考慮に入れていませんが、それでも実行できます。</font><font style="vertical-align: inherit;">そして、「パレット」の「状態図」図を開いて先に進みます。</font><font style="vertical-align: inherit;">次のブロックを転送し、それらを一緒に接続します。</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態図の始まりは、アリのライフサイクルの開始点です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態-このブロックは、アリのライフサイクルの状態を特徴付けます。</font><font style="vertical-align: inherit;">そのようなブロックはバラバラに必要です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">遷移-特定の条件下で「状態」を相互に接続し、ある「状態」から別の「状態」への遷移を実行する矢印。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、図13のような結果になるはず</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/xk/ry/rlxkrykh7gpd6ujcc5aetxfldxm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">13-ant</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の</font><i><font style="vertical-align: inherit;">動作の</font></i><font style="vertical-align: inherit;">ロジック次に、antダイアグラムの初期ロジックを記述しましょう。</font><font style="vertical-align: inherit;">「Select City」という名前でブロックを出る矢印をマウスで選択し、「Properties」タブの「Action」フィールドに次のコードを追加します（図14）。</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-keyword">if</span> (randomTrue(<span class="hljs-number">0.5</span>)) {
		<span class="hljs-keyword">this</span>.moveTo(main.myTowns.get(i));
		<span class="hljs-keyword">break</span>;<font></font>
	} <font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここではすべてが非常に単純です。すべての都市でサイクルを実行し、コインを投げて（確率0.5の確率変数を生成します）、その値がtrue（イーグル）であれば、サイクルを離れてこの都市にアリを送信します。 「this.moveTo（main.myTowns.get（i））」という表現は、あるエージェントを別のエージェントに送信する関数です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sc/ql/7y/scql7yplmodnhdrldsc6tvb3l2m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 14-アリの動きの初期ロジックを設定し</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ます</font><i><font style="vertical-align: inherit;">。</font></i><font style="vertical-align: inherit;">次に、「モーション」ブロックを離れる矢印をクリックし、[プロパティ]タブの[発生]フィールドで、値を[メッセージの受信時]に設定し、[発生]フィールドで[指定したメッセージの受信時]を選択します。 »図15に</font><i><font style="vertical-align: inherit;">示す</font></i><font style="vertical-align: inherit;">とおり</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ks/hh/g9/kshhg9m8nyxvzqz9d1dj2xnrgtc.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 15-「動き」と「すべてをバイパス」の間の遷移のロジックを設定します</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、「モーション」ブロックから出てくる最後の矢印を設定します。</font><font style="vertical-align: inherit;">マウスで選択し、[プロパティ]タブの遷移フィールドで[エージェントの到着時]を設定します。</font><font style="vertical-align: inherit;">「状態図」の最終的なビューは、図16の</font></font><br>
<br>
<img src="https://habrastorage.org/webt/os/kv/af/oskvafwwsgpitd36rnozrirob9m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ようになります。</font><font style="vertical-align: inherit;">16-ブロック間の遷移が構成された状態図</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
それでは、アリの動作の「状態図」がどのように機能するかを見てみましょう。</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アリが最初に陥る状態は「Vybor_city」であり、これまでのところアクションは説明されていません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次に、遷移時に次の状態に進みます。</font><font style="vertical-align: inherit;">この移行では、すべての山を一巡するようにコードを追加し、アリを都市の周りに走らせます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「移動」ブロックは、以前に選択された都市に到着するまでアリが配置されている場所です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さらに、彼には2つの方法があります。</font><font style="vertical-align: inherit;">最初に、彼はブロック「City_Choice」に戻り、すべてが再び繰り返されます。</font><font style="vertical-align: inherit;">2番目のパスでは、彼はすでにすべての都市を訪れたときに行く必要があります。</font><font style="vertical-align: inherit;">これまでのところ、2番目の方法は設定されていません。</font><font style="vertical-align: inherit;">少し後で扱います。</font></font></li>
</ol><br>
<br>
<img src="https://habrastorage.org/webt/3z/aj/md/3zajmdqorvjpondmi8k03fmmz94.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">17-状態図の操作これで</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
「F5」を押して、何が起こったかを確認できます（図18）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fr/cg/us/frcgusj3llqem0vaf8rxjngwwii.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">18-アリの復活</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基準を定義する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで、これらの基準（ルール）は何ですか？</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アリは各都市を一度だけ訪れてください。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アリは、彼がすべての都市を訪れたとき、最後の都市で彼の運動を終了します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの基準は、巡回するセールスマンの問題の状態によって決まります。各アリは、都市を旅する一種の巡回セールスマンと一緒にいます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アリにこれらのルールを守るように教えましょう。 「パレット」、「エージェント」タブから、「コレクション」と「変数」を「MyAnt」タブに転送し、最初のものを「isVisited」、2番目のものを「distance」と呼ぶのはなぜですか。 1つ目は、すでに訪問した都市を考慮し、2つ目は、アリが移動した距離を考慮します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-k/s-/a_/-ks-a_2igqbcyxzgzxiwlrbn9fe.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
19- </font><i><font style="vertical-align: inherit;">変数の追加</font></i><font style="vertical-align: inherit;"> isVisitedコレクションを設定します。なぜそれをマウスで選択し、「プロパティ」タブで「int」要素の「タイプ」を図20に示すように設定します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロパティの「距離」変数については、「初期値」フィールドで「0」を設定し、変数タイプ「double」を設定します」</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/2v/te/cm2vte4vjkzqycf0r58qz8itz7u.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 20-タイプ「int」のコレクション</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「City_block」ブロックを離れる矢印を選択し、「アクション」フィールドのコードを以下のコードに変更します。</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-keyword">if</span> (randomTrue(<span class="hljs-number">0.9</span>) &amp;&amp; isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {
		<span class="hljs-keyword">this</span>.moveTo(main.myTowns.get(i));<font></font>
		distance=distance+<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i));<font></font>
		isVisited.add(i);<font></font>
		<span class="hljs-keyword">break</span>;<font></font>
	} <font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のコードでは、訪問に成功した都市のチェックを追加し、訪問した都市を考慮し、移動距離も考慮しました。</font><font style="vertical-align: inherit;">コードは非常にシンプルですが、理解するのは難しくないと思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのモデル「F5」を起動して、何が起こったのかを確認することができます。</font><font style="vertical-align: inherit;">これで、アリはすべての都市を一度だけ通過し、ブロック内での移動を完了します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アリの初期配置を変更する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このステップでは、アリごとに、ランダムに旅行を開始する都市をランダムに選択します。</font><font style="vertical-align: inherit;">[プロジェクト]タブでマウスで[メイン]エージェントを選択し、[プロパティ]タブで[起動時]フィールドに次のコードを追加する理由（図20a）：</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myAnts.size(); i++) {
	<span class="hljs-comment">//        </span>
	<span class="hljs-keyword">int</span> startTown = uniform_discr(<span class="hljs-number">0</span>,myTowns-<span class="hljs-number">1</span>);
	<span class="hljs-comment">//     </span><font></font>
	myAnts.get(i).setPosition(myTowns.get(startTown));<font></font>
	<span class="hljs-comment">//      </span><font></font>
	myAnts.get(i).isVisited.add(startTown);<font></font>
}<font></font>
</code></pre><br>
<br>
<img src="https://habrastorage.org/webt/2i/et/cg/2ietcgzx9lkptrnj5rainnljcig.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">20a-都市ごとにアリを配置</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
する最初の都市をランダムに選択しました。</font><font style="vertical-align: inherit;">最初は1つの都市ですべてのアリを識別できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アリを予測不可能にする</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モデルに次の式を導入しましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kd/ld/xz/kdldxzse05ththx-oipffhru9oq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、Piはi番目のパスのパスに沿った遷移の確率、liはi番目の遷移の長さ、fiはi番目の遷移でのフェロモンの量、qはアルゴリズムの「欲」を決定する値、p -アルゴリズムの「群れ」を決定する値。q+ p = 1。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この式を</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から借りました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡単に言えば、この式を使用すると、アリが特定の都市に移動する確率を計算できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、いくつかの変数を追加する必要があります。追加しないと実行できません。図21の「メイン」タブに戻る理由</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zk/ba/cv/zkbacvaft1obpjrs1kw9hblkjos.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 21-タブ「メイン」</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこで、アリのコロニーのサイズを保存する変数「numberAnt」を追加します。タイプを「int」に設定し、初期値は100です</font></font><br>
<br>
<img src="https://habrastorage.org/webt/80/o2/w4/80o2w43ra-j_fwfabeunywmjkbm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 21-変数「numberAnt」</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
次に、母集団「myAnts」を選択し、フィールド「エージェントの初期数」を「numberAnt」に設定します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変数「p」は、アルゴリズムの群れを決定します。タイプはdoubleで、初期値は0.5です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アルゴリズムの貪欲を決定する変数「q」。タイプはdoubleで、初期値は0.5です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ge/m7/n0/gem7n0dj3rlhd_uu6aac3rrqyby.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 22-変数「qおよびp」</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでは、都市間の各エッジ（道路）にランダムなフェロモン値を設定します。変数（2次元配列） "matrixF"を作成する理由「タイプ」フィールドの「プロパティ」タブで設定し、値「その他」を選択し、フィールドに「double [] []」と初期値「new double [numberTown] [numberTown]」を書き込みます（図23）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wq/4d/oi/wq4doiphuc28xcg1a3vcveng4ms.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 23-2次元配列「matrixF」を作成します。フェロモンマトリックス</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
次に、このマトリックスを初期化する必要があります。つまり、ランダムな値を入力します。フェロモン値を0.1〜1の範囲でランダムに取得し</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。これを行うには、[プロジェクト]タブで[メイン]エージェントをマウスで選択し、[プロパティ]タブで[起動時]フィールドに次のコードを追加します（図23a）。</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myTowns.size(); i++) {
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j&lt;myTowns.size(); j++) {<font></font>
		matrixF[i][j]=uniform(<span class="hljs-number">0.1</span>,<span class="hljs-number">1</span>);<font></font>
	}<font></font>
} <font></font>
</code></pre><br>
<br>
<img src="https://habrastorage.org/webt/ob/an/ta/obanta0s5kb7vqnsc3wsn-qmbgg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
23a- </font><i><font style="vertical-align: inherit;">フェロモンマトリックスの初期化コード</font></i><font style="vertical-align: inherit;"> [MyAnt]タブに戻り、上記の式に従って遷移確率を計算します。</font><font style="vertical-align: inherit;">"City_Choice"と "Motion"の間の遷移を選択し、[アクション]フィールドのコードを次のように変更します（図24）。</font></font><br>
<pre><code class="java hljs"><span class="hljs-comment">//       </span>
<span class="hljs-keyword">double</span> denominator=<span class="hljs-number">0</span>; 
<span class="hljs-comment">//          </span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-keyword">if</span> (isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {	<span class="hljs-comment">//     </span>
	    <span class="hljs-comment">//  i   </span>
		denominator=denominator+(Math.pow(<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i)), main.q)*Math.pow(main.myTowns.get(i).f, main.p));<font></font>
	} <font></font>
}<font></font>
<span class="hljs-comment">//      i </span>
<span class="hljs-keyword">double</span> Pi=<span class="hljs-number">0</span>;
<span class="hljs-comment">//    </span>
<span class="hljs-keyword">double</span> probility=uniform(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-comment">//        Pi</span>
	<span class="hljs-keyword">if</span> (isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {
		<span class="hljs-comment">//     i-      </span>
		Pi=Pi+(Math.pow(<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i)), main.q)*Math.pow(main.myTowns.get(i).f, main.p))/denominator;<font></font>
	}<font></font>
	<span class="hljs-comment">//      Pi      probility</span>
	<span class="hljs-keyword">if</span> (probility&lt;Pi &amp;&amp; isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {
		<span class="hljs-comment">//       i  </span>
		<span class="hljs-keyword">this</span>.moveTo(main.myTowns.get(i));
		<span class="hljs-comment">//     </span>
		distance=distance+<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i));
		<span class="hljs-comment">//           </span><font></font>
		isVisited.add(i);<font></font>
		<span class="hljs-keyword">break</span>;<font></font>
	} <font></font>
}<font></font>
</code></pre><br>
<br>
<img src="https://habrastorage.org/webt/7u/gr/re/7ugrreytqo1mjwh43xeaagissqm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">24-上記の分析的表現に基づいてアリの動作を設定する</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ので</font><i><font style="vertical-align: inherit;">、次に</font></i><font style="vertical-align: inherit;">、何が何であるかを少し説明します。</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">li-this.distanceTo（main.myTowns.get（i））、アリの現在の位置と「i」の都市との間の長さの値。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fi-main.matrixF [currentPos] [i]、現在の都市と都市「i」の間のフェロモンレベルの値。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">denominator-denominator +（Math.pow（this.distanceTo（main.myTowns.get（i））、main.q）* Math.pow（main.matrixF [currentPos] [i]、main.p））;、denominatorパイ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pi-Pi +（Math.pow（this.distanceTo（main.myTowns.get（i））、main.q）* Math.pow（main.myTowns.get（i）.f、main.p））/分母、アリが現在の都市から都市「i」に移動する確率。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、「Motion」ブロックと「All-bypassed」ブロックの間の遷移をマウスで選択し、「Occurs」フィールドで「When when the condition met」を選択し、条件フィールドで、antが停止する条件を記述します「isVisited.size（）== main.myTowns.size（）」 （図25）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1w/qz/ag/1wqzagqllmjga_yqm5a8-9c_crg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">25-アリを停止する条件を決定し</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
たら、「F5」モデルを実行して、何が起こったかを確認できます。</font><font style="vertical-align: inherit;">アリは上記の分析式に従って計算された確率で都市間を移動します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フェロモンの価値を更新する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、2つのことを行います。最初のアクションは、アリが通過した都市間の端のフェロモン値を増やすことです。 2つ目は、都市間のエッジでのフェロモンの蒸発です。これは、シミュレーション時間と比較してフェロモンの値を減らすことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、最初のアクションから始めるために、アリがいる都市とアリが行く都市との間の肋骨のフェロモンの値を更新します。都市間のフェロモンエッジの現在の値を増やす値は、非常に単純に計算されます。フェロモン値の最大初期値= 1 cuアリがいる都市と、アリが行く都市との距離でそれを割ります。したがって、都市間の距離が短いほど、肋骨のフェロモンのレベルが増加する値が大きくなります。 [プロジェクト]タブでMyAntエージェントを選択し、マウスを使用して "City_title"ブロックと "Movement"ブロック間の遷移を選択し、次のコードをアクションフィールドに追加するのはなぜですか： "main.matrixF [currentPos] [i] = main.matrixF [currentPos] [i ] + 1 / this.distanceTo（main.myTowns.get（i）;）。結果は図26のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wr/zi/jb/wrzijbuaavovmagcktbz4yrhkw0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 26-アリが通過した肋骨のフェロモンのレベルの値を更新する次に、ステップ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
2に進み、都市間の肋骨上のフェロモンの蒸発をシミュレートするイベントを作成します。プロジェクトタブで「メイン」エージェントを選択し、そこにさらにいくつかの変数を作成する理由。 1つは「強度」です。フェロモン蒸発の速度（強度）を決定します（初期値「0.5」、タイプ「double」）。 2番目の「パート」-エッジのフェロモンの値が減少する割合を特徴付けます（初期値「0.9」、タイプ「double」）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rh/_8/ly/rh_8lydcrbmm7pkkitihtmsszi4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 27-変数「intensity」と「Part」を作成します</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、「エージェント」タブの「パレット」から「イベント」要素を取得し、それを「メイン」エージェントに転送して「蒸発」と呼びます。この要素は、エッジでのフェロモンの蒸発をシミュレートします。</font><font style="vertical-align: inherit;">それをマウスでクリックし、[イベントタイプ]フィールドの[プロパティ]で、[強度]フィールドで[指定された強度]の値を選択し、[強度]強度値を格納する変数の名前を書き込みます。</font><font style="vertical-align: inherit;">応答時間は秒です。</font><font style="vertical-align: inherit;">次に、以下のコードをアクションに追加します。</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myTowns.size(); i++) {
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j&lt;myTowns.size(); j++) {<font></font>
		matrixF[i][j]=matrixF[i][j]*Part;<font></font>
		<span class="hljs-keyword">if</span> (matrixF[i][j]&lt;<span class="hljs-number">0.1</span>) matrixF[i][j]=<span class="hljs-number">0.1</span>;<font></font>
	}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「蒸発」イベントがトリガーされると、matrixFマトリックスのフェロモンレベルが更新されます。</font><font style="vertical-align: inherit;">その結果、図28に</font><i><font style="vertical-align: inherit;">示す</font></i><font style="vertical-align: inherit;">ように実行できるはず</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qq/p9/dl/qqp9dljysgcl9xg7jvydl74oees.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">28-「蒸発」イベントを作成する</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">勝者を決める</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このステップでは、アリマラソンの勝者を決定するコードを追加します。勝者は最短ルートを走ったアリの一人になります。すべてに加えて、マラソンの終了後、このルートを画面に描画します。これを実現するために、「Main」エージェントに「bestAnt」、「bestDistance」、「numberFinish」の3つの変数を作成します。変数「bestAnt」には、「最速」のantのインデックスが格納され、変数のタイプは「int」になり、初期値は「-1」に設定されます。変数「bestDistance」には、都市間の最適ルート長の現在の値を格納します。変数のタイプは「double」になり、初期値は無限大「infinity」に設定されます。変数「numberFinish」には、マラソンで終了したアリの数を格納します。変数の型は "int"で、初期値は "0"です（図29）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zd/2a/yw/zd2ayw0tmj6_wuft2sl2qz8tevu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">29-変数のイベントを作成する</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
次に、すべてのアリを終了した後、都市間の最適ルートの線を描画する関数を作成します。</font><font style="vertical-align: inherit;">「Palette」から、name関数を持つ要素を「Main」エージェントにドラッグする理由。</font><font style="vertical-align: inherit;">関数名をdrawPathに設定し、[プロパティ]タブの[関数本体]フィールドに次のコードを追加します。</font></font><br>
<pre><code class="java hljs"><span class="hljs-comment">//        </span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myAnts.get(bestAnt).isVisited.size()-<span class="hljs-number">1</span>; i++) {
	<span class="hljs-comment">//    </span>
	ShapeLine myLine = <span class="hljs-keyword">new</span> ShapeLine();
	<span class="hljs-comment">//            i</span><font></font>
	myLine.setX(myTowns.get(myAnts.get(bestAnt).isVisited.get(i)).getX());<font></font>
	myLine.setY(myTowns.get(myAnts.get(bestAnt).isVisited.get(i)).getY());<font></font>
	<span class="hljs-comment">//            i+1</span>
	myLine.setEndX(myTowns.get(myAnts.get(bestAnt).isVisited.get(i+<span class="hljs-number">1</span>)).getX());<font></font>
	myLine.setEndY(myTowns.get(myAnts.get(bestAnt).isVisited.get(i+<span class="hljs-number">1</span>)).getY());
	<span class="hljs-comment">//    ""</span><font></font>
	myLine.setColor(blue);<font></font>
	<span class="hljs-comment">//   </span><font></font>
	myLine.setLineStyle(LINE_STYLE_SOLID );<font></font>
	<span class="hljs-comment">//   </span>
	myLine.setLineWidth(<span class="hljs-number">1</span>);
	<span class="hljs-comment">//    </span><font></font>
	presentation.add(myLine);	<font></font>
}<font></font>
	<span class="hljs-comment">//           </span>
	ShapeLine myLine = <span class="hljs-keyword">new</span> ShapeLine();<font></font>
	myLine.setX(myTowns.get(myAnts.get(bestAnt).isVisited.get(myAnts.get(bestAnt).isVisited.size()-<span class="hljs-number">1</span>)).getX());<font></font>
	myLine.setY(myTowns.get(myAnts.get(bestAnt).isVisited.get(myAnts.get(bestAnt).isVisited.size()-<span class="hljs-number">1</span>)).getY());<font></font>
	myLine.setEndX(myTowns.get(myAnts.get(bestAnt).isVisited.get(<span class="hljs-number">0</span>)).getX());<font></font>
	myLine.setEndY(myTowns.get(myAnts.get(bestAnt).isVisited.get(<span class="hljs-number">0</span>)).getY());<font></font>
	myLine.setColor(blue);<font></font>
	myLine.setLineStyle(LINE_STYLE_SOLID );<font></font>
	myLine.setLineWidth(<span class="hljs-number">1</span>);<font></font>
	presentation.add(myLine);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、図29aに示すように実行できるはずです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/am/eq/1b/ameq1bhejnkldupsbngygcqqndw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">29a-「drawPath」関数を作成する次</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
に、アリに戻り、勝者のアリを決定するコード、最適なルートの長さ、および都市間のこのルートを描画するコードを追加します。</font><font style="vertical-align: inherit;">「プロジェクト」タブで「MyAnt」エージェントを選択し、「All Bypassed」ブロックを選択して、「ログオンアクション」フィールドに次のコードを追加する理由：</font></font><br>
<pre><code class="java hljs"><span class="hljs-comment">//    </span><font></font>
main.numberFinish++;<font></font>
<span class="hljs-comment">//      </span>
<span class="hljs-keyword">if</span> (main.bestDistance&gt;distance) {
	<span class="hljs-comment">//           </span>
	<span class="hljs-comment">//      </span><font></font>
	main.bestDistance=distance;<font></font>
	<span class="hljs-comment">//    </span>
	main.bestAnt = <span class="hljs-keyword">this</span>.getIndex();<font></font>
}<font></font>
<span class="hljs-comment">//         Main   </span>
<span class="hljs-keyword">if</span> (main.numberFinish==main.myAnts.size()) main.drawPath();
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
図30に</font></font><br>
<br>
<img src="https://habrastorage.org/webt/68/ss/7c/68ss7cvbvbfbwkz26u6abdvwit8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示す</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ようになります</font><i><font style="vertical-align: inherit;">。</font></i><i><font style="vertical-align: inherit;">30-「All Bypassed」ブロックにロジックを追加すると、</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
「F5」を押してモデルを実行できます。</font><font style="vertical-align: inherit;">アリはルートを探して走り回り、都市が終わると青い線が接続します。これが最適なルートです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モデルにヒストグラムを追加する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モデルをより科学的にするためには、グラフを追加する必要があります。したがって、アリが克服したルートの長さの分布を示すグラフとヒストグラムだけではありません。なぜ「プロジェクト」タブでエージェント「メイン」を選択し、そのスペースに行きます。さらに、「パレット」で「統計」タブに移動し、そこから「メイン」エージェントに「ヒストグラムデータ」要素を転送し、さらに「ヒストグラム」自体を転送します。次に、マウスでヒストグラムを選択し、[プロパティ]タブの[データ]フィールドで、「ヒストグラムデータ」の名前を指定します。 "データ"。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
図31に示すようになります</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7v/bz/6i/7vbz6ikwgs7t0iintfnp2jz6wyw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 31-スケジュールを作成する</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、再びアリに戻り、ルートの長さの値で「ヒストグラム」を埋める必要があります。</font><font style="vertical-align: inherit;">なぜ、プロジェクトタブでエージェント「MyAnt」を選択し、そのスペースに移動するのですか。</font><font style="vertical-align: inherit;">次に、「All Bypass」ブロックを選択し、「main.data.add（distance）;」に1行追加します。</font><font style="vertical-align: inherit;">図32の</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bf/wa/zl/bfwazly38mrpwolpx4awmowj10o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ようになります。</font><font style="vertical-align: inherit;">32-グラフを作成する</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
次に、「F5」を押して、アリアルゴリズムの動作を調べます。</font><font style="vertical-align: inherit;">図33に</font><i><font style="vertical-align: inherit;">示す</font></i><font style="vertical-align: inherit;">ような結果になります</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3w/8w/is/3w8wissyoccebi-8ona5px-cop0.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">33-モデリング</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、モデルに予測不能性を追加することをお勧めします。</font><font style="vertical-align: inherit;">これを行うには、[プロジェクト]タブで[シミュレーション：メイン]要素をマウスで選択し、[プロパティ]タブで[ランダム性]パラメーターを[ランダムな初期番号（一意の実行）]に設定します。これにより、各モデルの起動が一意になります（図34）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ie/ow/i6/ieowi6e32wykpsao8owpxbwzwzu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">34-ランダムランの作成</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
注意をありがとうございます！</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソースコードはGitHubからダウンロードできます</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja500978/index.html">RabbitMQによる遅延トレイ</a></li>
<li><a href="../ja500980/index.html">脳RX</a></li>
<li><a href="../ja500984/index.html">悪いアップルまたはハッピーラジオデー、オタク</a></li>
<li><a href="../ja500986/index.html">データセンターでの監視：古いBMSを新しいBMSにどのように変更したか。パート3</a></li>
<li><a href="../ja500992/index.html">最高のIT企業のパフォーマンス管理はどうですか</a></li>
<li><a href="../ja500996/index.html">6か月以上でDevOpsエンジニアになる方法 パート1.はじめに</a></li>
<li><a href="../ja500998/index.html">畳み込みニューラルネットワークとiOSへの統合（パート1）</a></li>
<li><a href="../ja501000/index.html">データベースのクライアントを作成する例によるGoでのコード生成</a></li>
<li><a href="../ja501002/index.html">Umka：新しい静的型付きスクリプト言語</a></li>
<li><a href="../ja501004/index.html">やれ。作業</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>