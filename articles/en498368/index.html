<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üà∏ üêÆ ü§≥ The story of one switch üìú üë©üèΩ‚Äçü§ù‚Äçüë®üèª üìô</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In our LAN aggregation, there were six pairs of Arista DCS-7050CX3-32S switches and one pair of Brocade VDX 6940-36Q switches. It‚Äôs not that Brocade s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>The story of one switch</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/selectel/blog/498368/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/y6/hn/ng/y6hnnglhd7cga9rdsoloimhiism.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In our LAN aggregation, there were six pairs of Arista DCS-7050CX3-32S switches and one pair of Brocade VDX 6940-36Q switches. </font><font style="vertical-align: inherit;">It‚Äôs not that Brocade switches on this network were very annoying, they work and carry out their functions, but we were preparing full automation of some actions, and we didn‚Äôt have these capabilities on these switches. </font><font style="vertical-align: inherit;">I also wanted to switch from 40GE interfaces to the possibility of using 100GE to make a reserve for the next 2-3 years. </font><font style="vertical-align: inherit;">So we decided to exchange Brocade for Arista.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These switches are LAN aggregation switches for each data center. </font><font style="vertical-align: inherit;">Distribution switches (the second level of aggregation) are connected directly to them, which are already assembled in themselves Top-of-Rack LAN switches in server racks.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/wr/_k/mn/wr_kmn_mxcbk5pzlszif5fwpmmy.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Each server is included in one or two access switches. Access switches are connected to a pair of distribution switches (two distribution switches and two physical links from the access switch to different distribution switches are used for redundancy). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Each server can be used by its client, so a separate VLAN is allocated to the client. The same VLAN is then assigned to another server of this client in any rack. The data center consists of several such rows (PODs), each row of racks has its own distribution switches. Then these distribution switches are connected to the aggregation switches.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/oc/2p/r5/oc2pr5parnr_c3-m4s1fswgxlcm.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Clients can order a server in any row, it is impossible to predict in advance that the server will be allocated or installed in any particular row in any particular rack, therefore, there are about 2500 VLANs in each data center on aggregation switches. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Equipment for DCI (Data-Center Interconnect) connects to the aggregation switches. It can be used for L2 connectivity (a pair of switches forming a VXLAN tunnel to another data center), and for L3 connectivity (two MPLS routers).</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/eh/2a/pg/eh2apgb0jx6excyolzu7hlqwwiy.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As I already wrote, in order to unify the processes of automating the configuration of services on equipment in one data center, it was necessary to replace central aggregation switches. </font><font style="vertical-align: inherit;">We installed new switches next to the existing ones, combined them into an MLAG pair and began to prepare for work. </font><font style="vertical-align: inherit;">They were immediately connected to existing aggregation switches, so that they had a common L2 domain across all client VLANs.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Circuit details</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For specificity, we will call the old aggregation switches </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the new ones - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Imagine that in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> there are servers of one client </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the VLAN of the client is indicated in blue. This client uses the L2 connectivity service with another data center, so its VLAN is served on a pair of VXLAN switches. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Client </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> places the servers in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , we denote the client VLAN by dark green. This client also uses the connectivity service with another data center, but L3, so its VLAN is served on a pair of L3VPN routers.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/pl/tx/8t/pltx8tm018xdgys6sbk08dng6_w.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We need client VLANs to understand at what stages of the replacement work what happens, where the communication break occurs, and what its duration may be. </font><font style="vertical-align: inherit;">The STP protocol is not used in this scheme, since the width of the tree for it in this case is large, and the convergence of the protocol grows exponentially from the number of devices and links between them. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All devices connected by double links form a stack, an MLAG pair or a VCS-Ethernet factory. </font><font style="vertical-align: inherit;">Such technologies are not used for a pair of L3VPN routers, since there is no need for L2 redundancy, it is enough that they have L2 connectivity to each other through aggregation switches.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementation options</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When analyzing the options for further events, we realized that there are several ways to carry out these works. </font><font style="vertical-align: inherit;">From a global break on the entire local network, to small literally 1-2 second breaks in parts of the network.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Network, stand! </font><font style="vertical-align: inherit;">Switches, replace!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The easiest way - is, of course, announce a global break ties in all POD and all services DCI and switch all the links from the switch </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in the switches </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">of N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/oe/ru/gj/oerugjzsi4pdh1lqcnu5bxyzlra.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition to the break, the time of which we cannot guarantee to predict (yes, we know the number of links, but do not know how many times something will go wrong - from a broken patch cord or damaged connector to a port or transceiver malfunction), we still cannot to predict in advance whether the length of the patch cords, DAC, AOC, connected to the old switches A, is enough to reach them, although standing next to them, but still slightly apart, the new switches N, and whether the same transceivers will work / DAC / AOC from Brocade switches in Arista switches.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And all this in conditions of severe pressure from customers and technical support ("Natasha, get up! Natasha, everything doesn‚Äôt work there! Natasha, we already wrote technical support, honestly, honestly! Natasha, we‚Äôve already dropped everything there! Natasha, but how much has not will it work? Natasha, and when it works ?! ‚Äù). </font><font style="vertical-align: inherit;">Even despite a pre-announced break and notification made to customers, an influx of calls at such a time is guaranteed.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wait, 1-2-3-4!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And if not to declare a global break, but to announce a series of small breaks in communication on POD and DCI services. </font><font style="vertical-align: inherit;">In the first break, switch </font><font style="vertical-align: inherit;">only </font><b><font style="vertical-align: inherit;">POD 1 to </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> switches </font><font style="vertical-align: inherit;">, in the second - after a couple of days - </font><b><font style="vertical-align: inherit;">POD 2</font></b><font style="vertical-align: inherit;"> , then after a couple of days </font><b><font style="vertical-align: inherit;">POD 3</font></b><font style="vertical-align: inherit;"> , then </font><b><font style="vertical-align: inherit;">POD 4 ... [N]</font></b><font style="vertical-align: inherit;"> , then VXLAN switches and then L3VPN routers.</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/dg/1n/8o/dg1n8oei0wx04clgnk2a0emzu-o.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With such an organization of switching work, we reduce the complexity of one-time work and increase our time for solving problems if something suddenly went wrong. POD 1 connectivity after switching with other POD and DCI is not lost. But the work itself is delayed for a long time, for the time of this work in the data center, an engineer is required to physically perform the switching, and during the work (and such work is usually performed at night, from 2 to 5 in the morning), the presence of an online network engineer is quite high qualifications. But on the other hand, we get short breaks in communication, as a rule, work can be carried out in the interval of half an hour with a break of up to 2 minutes (in practice, often 20-30 seconds with the expected behavior of the equipment). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the above example, client </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or client </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> you will have to warn about work with a break in communications at least three times - the first time to carry out work on one POD, in which one of its servers is located, the second time - on the second, and the third time - when switching equipment for DCI services.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Switching aggregated communication channels</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Why are we talking about the expected behavior of the equipment, and how can aggregated channels switch with minimization of communication interruptions. </font><font style="vertical-align: inherit;">Imagine the following picture:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/s0/g5/4b/s0g54bkj-ujiumk0egmyp7ookv0.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the one hand, the link is the distribution switches POD - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , they form an MLAG pair (stack, VCS factory, vPC pair), on the other hand two links - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - are included in the old MLAG pair aggregation switch </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">On the side switches </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> formed aggregate interface called </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port-channel A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , on the side of aggregation switches </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - aggregate interface called </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port D-channel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aggregated interfaces use LACP in their work, that is, switches on both sides regularly exchange LACPDU packets on both links to make sure that the links:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">workers;</font></font></li>
<li>       .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When exchanging packets in a packet, the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">system-id</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> value is transmitted </font><font style="vertical-align: inherit;">, which indicates the device where these links are included. For an MLAG pair (stack, factory, etc.), the value of system-id for the devices forming the aggregated interface is the same. Switch </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sends a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> value </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">system id-D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and the switch </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sends a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> value </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">system id-D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Switches </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> analyze the LACPDU packets received on the same Po D interface and verify that the system-id in them matches. If the system-id received by some link suddenly differs </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from the current working value</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, then this link is removed from the aggregated interface until the situation is corrected. </font><font style="vertical-align: inherit;">Now we switch to the side </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> the current value of the system-id LACP-partner - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and switches on the side </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - the current system-id value of LACP-partner - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you need to switch the aggregated interface, we can do two different ways:</font></font></b></blockquote><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Method 1 - Simple</font></font></b>
                        <div class="spoiler_text"><b>     A</b>.      .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/4x/y3/1f/4xy31fons85dmc1xqmyoatx3cok.jpeg"></div></a><br>
       <b>N</b>,       LACP,   <b>Po D</b>   <b>N</b>      <b>system-id N</b>.<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/9o/-x/d2/9o-xd2p6oyk3x_yxroz_tlh6hbc.jpeg"></div></a><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Method 2 - Minimize the Break</font></font></b>
                        <div class="spoiler_text"><b>   2  Link 2</b>.     <b></b>  <b>D</b>       ,      .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/hw/u-/zy/hwu-zy2rypxofaqv9llskenulbm.jpeg"></div></a><br>
<b> Link 2   N2</b>.   <b>N</b>     <b>Po DN</b>,   <b>N2</b>    LACPDU <b>system-id N</b>.       ,   <b>N2</b>    ,   <b>Link 2</b>,       <b>Up</b>,     LACPDU      .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/cw/cy/st/cwcysth25wi_quoldhjghlysgx8.jpeg"></div></a><br>
  ,   <b>D2</b>    <b>Po A</b>   <b>Link 2   system-id N,      system-id A</b>,    <b>D</b>  <b>Link 2</b>     <b>Po A</b>.  <b>N</b>    <b>Link 2</b>  ,          LACP-  <b>D2</b>.     <b>Link 2</b>  .<br>
<br>
<b>    Link 1   A1</b>,     <b></b>  <b>D</b>   .  ,    <b>D</b>     system-id   <b>Po A</b>.<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/me/uw/8u/meuw8uq0g5lglbxkt6qwbdiodtg.jpeg"></div></a><br>
   <b>D</b>  <b>N</b>    system-id <b>A-N</b>   <b>Po A</b>  <b>Po DN</b>,        <b>Link 2</b>.     ,  ,  2 .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/rj/zs/ai/rjzsai50lw8dbbxbk0ntlicofoa.jpeg"></div></a><br>
<b>     Link 1   N1</b>,       <b>Po A</b>  <b>Po DN</b>.           system-id    ,    .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/vd/8_/3c/vd8_3cszxwsxtwdcrewohql3arg.jpeg"></div></a><br>
</div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Additional links</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But switching can be done without the presence of an engineer at the time of switching. </font><font style="vertical-align: inherit;">To do this, we need to pre-lay additional links between the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> distribution switches </font><font style="vertical-align: inherit;">and the new </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aggregation switches </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/du/sb/3h/dusb3hcwgnj_rt8kgkusiitltdk.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We are laying new links between </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aggregation </font><font style="vertical-align: inherit;">switches and all POD distribution switches. This requires order and laying of additional patch cords, and install additional transceivers in both </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">of N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . We can do this because we </font><font style="vertical-align: inherit;">have free ports </font><font style="vertical-align: inherit;">in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> switches of </font><font style="vertical-align: inherit;">each POD (or we free them first). </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a result, each POD is physically connected by two links to the old switches A and to the new switches N.</font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/32/wj/m-/32wjm-s5ehe6o1vlkvtrhcpn_mq.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Two aggregated interfaces are formed </font><font style="vertical-align: inherit;">
on switch </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Po A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> with links </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Po N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> with links </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link N1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link N2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . At this stage, we check the correct connection of interfaces and links, the levels of optical signals at both ends of the links (via DDM information from the switches), we can even check the link's working capacity under load or monitor the status of optical signals and transceiver temperatures for a couple of days. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Traffic is still transmitted through the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Po A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> interface, while the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Po N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> interface is </font><font style="vertical-align: inherit;">free of traffic. The settings on the interfaces are approximately the following:</font></font><br>
<br>
<pre><code class="plaintext hljs">Interface Port-channel A<font></font>
Switchport mode trunk<font></font>
Switchport allowed vlan C1, C2<font></font>
<font></font>
Interface Port-channel N<font></font>
Switchport mode trunk<font></font>
Switchport allowed vlan none</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Switches D, as a rule, support session configuration change; such switch models that have this functionality are used. So we can change the settings of the Po A and Po N interfaces in one go:</font></font><br>
<br>
<pre><code class="plaintext hljs">Configure session<font></font>
Interface Port-channel A<font></font>
Switchport allowed vlan none<font></font>
Interface Port-channel N<font></font>
Switchport allowed vlan C1, C2<font></font>
Commit</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then the configuration change will happen quickly enough, and the break will be, in practice, no more than 5 seconds. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This method allows us to carry out all the preparatory work in advance, to carry out all the necessary checks, to coordinate the work with the participants in the process, to forecast in detail the actions for the production of work, without creative work, when ‚Äúeverything went wrong‚Äù, and have at hand a plan to return to the previous configuration. </font><font style="vertical-align: inherit;">Work on this plan is carried out by a network engineer without the presence of a data center on site of the engineer who physically performs the switching. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What is more important with this switching method - all new links are already pre-set for monitoring. </font><font style="vertical-align: inherit;">Errors, inclusion of links in the unit, loading of links - all the necessary information is already in the monitoring system, and it is already drawn on the maps.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D-day</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pod</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We chose the least painful for customers and least prone to the ‚Äúsomething went wrong‚Äù switch path with additional links. </font><font style="vertical-align: inherit;">So for a couple of nights we switched all PODs to the new aggregation switches.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/lm/c0/oa/lmc0oafevg5twt9amzd2thudqgm.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But it remains to switch equipment providing DCI services.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L2</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the case of equipment providing L2 connectivity, we could not carry out similar work with additional links. </font><font style="vertical-align: inherit;">There are at least two reasons for this:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lack of free ports of the required speed on VXLAN switches.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lack of functionality for session configuration changes on VXLAN switches.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We did not switch the links ‚Äúone at a time‚Äù with a break only for the duration of the approval of a new pair of system-id, since we did not have 100% confidence that the procedure would be correct, and a test in the laboratory showed that, in the case if ‚Äúsomething goes wrong‚Äù, we still get a connection break, and the worst thing is not only for customers who have L2 connectivity with other data centers, but for all customers of this data center in general.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We carried out propaganda work on switching from L2 channels ahead of time, so the number of customers affected by operations on VXLAN switches was already several times less than a year ago. </font><font style="vertical-align: inherit;">As a result, we decided to interrupt communication on the L2-connectivity service, provided that we maintain the normal operation of local network services in one data center. </font><font style="vertical-align: inherit;">In addition, the SLA for this service provides for the possibility of scheduled work with a break.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Why did we recommend everyone to switch to using L3VPN when organizing DCI services? One of the reasons is the ability to work on one of the routers that provide this service, simply with a reduction in the level of redundancy to N + 0, without interruption in communication. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consider the scheme of service provision more closely. In this service, the L2 segment goes from client servers only to L3VPN Selectel routers. On routers, the client network is terminated. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Each client server, for example, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in the above diagram, has its own private IP addresses - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.2/24 for the S2 server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.3/24 for the S3 server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Addresses </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.252/24</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.253/24</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assigned by Selectel to routers </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , respectively. </font><font style="vertical-align: inherit;">IP address </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.254/24 is a VRRP VIP address</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on Selectel routers.</font></font><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">read</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> more about the L3VPN service </font><font style="vertical-align: inherit;">on our blog.</font></font></b></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Until the moment of switching everything looked approximately as in the diagram:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/lu/z9/_l/luz9_l1950pk5r3vr5hrn-tdnss.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Two routers </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> were connected to the old switch aggregation </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">The master for VRRP VIP addresses 10.0.0.254 is the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> router </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">He has priority set to this address higher than that of the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> router </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="plaintext hljs">unit 1006 {<font></font>
    description C2;<font></font>
    vlan-id 1006;<font></font>
    family inet {       <font></font>
        address 10.0.0.252/24 {<font></font>
            vrrp-group 1 {<font></font>
                priority 200;<font></font>
                virtual-address 10.100.0.254;<font></font>
                preempt {<font></font>
                    hold-time 120;<font></font>
                }<font></font>
                accept-data;<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S2 server uses 10.0.0.254 gateway to communicate with servers in other locations. </font><font style="vertical-align: inherit;">Thus, disconnecting the L3VPN-2 router from the network (of course, if you first disconnect it from the MPLS domain) does not affect the connectivity of the client servers. </font><font style="vertical-align: inherit;">At this point, the redundancy level of the circuit simply decreases.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/gj/oi/sk/gjoiskqum4kmknfm8u36cf5v44w.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After that, we can safely reconnect the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> router </font><font style="vertical-align: inherit;">to the pair of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> switches </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Lay out links, change transceivers. </font><font style="vertical-align: inherit;">The logical interfaces of the router, on which the work of client services depends, until the confirmation that everything is functioning as it should, are turned off. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After checking the links, transceivers, signal levels, error levels on the interfaces, the router gets into operation, but is already connected to a new pair of switches.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/jb/dh/cs/jbdhcsuakuma1fofufzc-pp0poy.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, we lower the VRRP priority of the L3VPN-1 router, and the VIP address 10.0.0.254 moves to the L3VPN-2 router. </font><font style="vertical-align: inherit;">These works are also carried out without interruption of communication.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/ix/uq/lq/ixuqlq5wx5veluojqgpwfy8yewu.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Transfer VIP address to the router 10.0.0.254 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> allows you to disable the router </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> without interruption of contact for the client and connect it to have a new pair of aggregation switches </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">of N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/lx/vo/jv/lxvojv_hiozuurqfsyonclwjez4.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Whether or not to return VRRP VIP to the L3VPN-1 router is another matter, and if you return, it is done without interruption.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After all these steps, we really replaced the aggregation switches in one of our data centers, while minimizing breaks for our customers.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/fw/d1/jx/fwd1jxarjvfl1agcko-4fhezx7s.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All that remains is dismantling. </font><font style="vertical-align: inherit;">Dismantling of old switches, dismantling of old links between switches A and D, dismantling transceivers from these links, fixing monitoring, fixing network diagrams in documentation and monitoring. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We can use switches, transceivers, patch cords, AOC, DAC after switching, in other projects or other similar switching. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚ÄúNatasha, we switched everything!‚Äù</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en498354/index.html">How to translate ‚ÄúWishlist‚Äù into ‚Äúhardware‚Äù, or semi-ideal semi-mobile semi-desktop</a></li>
<li><a href="../en498358/index.html">Learn French or how to get a universal adapter from a PSA diagnostic scanner</a></li>
<li><a href="../en498360/index.html">Integrated Server Load Metrics Evaluation</a></li>
<li><a href="../en498362/index.html">Kingston maintains leadership in SSD shipments: how do we do it?</a></li>
<li><a href="../en498366/index.html">What algorithms do Yandex developers implement every day</a></li>
<li><a href="../en498370/index.html">SAP UI5 and Confirmation Windows: Again About the Context</a></li>
<li><a href="../en498372/index.html">Network simulator tutorial ns-3. Chapter 5</a></li>
<li><a href="../en498374/index.html">GPU Computing - Why, When, and How. Plus some tests</a></li>
<li><a href="../en498378/index.html">Announcement of Slurm's Evening School by Agile</a></li>
<li><a href="../en498380/index.html">Overton's window in action: how a pandemic is used to limit our freedom</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>