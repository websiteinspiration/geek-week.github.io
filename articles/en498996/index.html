<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóæ üíú üò¥ Difference Between Web Sockets and Socket.IO üëäüèΩ üèΩ ü•ñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, friends! 
 
 Web sockets and Socket.IO are probably the two most common means of real-time communication (hereinafter referred to as live co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Difference Between Web Sockets and Socket.IO</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498996/"><img src="https://habrastorage.org/webt/zk/qg/qc/zkqgqcvkytdtggi3q1nujijam_8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Good day, friends! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Web sockets and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Socket.IO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> are probably the two most common means of real-time communication (hereinafter referred to as live communication). </font><font style="vertical-align: inherit;">But how do they differ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When building an application for live communication, there comes a time when you need to choose a tool for exchanging data between the client and server. </font><font style="vertical-align: inherit;">Web sockets and Socket.IO are the most popular means of live communication on the modern web. </font><font style="vertical-align: inherit;">Which one to choose? </font><font style="vertical-align: inherit;">What is the difference between these technologies? </font><font style="vertical-align: inherit;">Let's find out.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web sockets</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Speaking of web sockets, we mean the web communication protocol, which represents a full-duplex communication channel over a simple TCP connection. </font><font style="vertical-align: inherit;">Simply put, this technology allows you to establish communication between the client and the server with minimal cost, allowing you to create applications that use all the advantages of live communication. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, imagine you are creating a chat: you need to receive and send data as quickly as possible, right? </font><font style="vertical-align: inherit;">Web sockets do just fine with this! </font><font style="vertical-align: inherit;">You can open a TCP connection and keep it open for as long as necessary. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Web sockets appeared in 2010 in Google Chrome 4, the first RFC ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6455</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) was published in 2011. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Web sockets are used in the following cases:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chats</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Multiplayer games</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Collaborative editing</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Social (news) feeds</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Location Based Applications</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
etc.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Socket.io</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Socket.IO is a JavaScript library based (written on top) on web sockets ... and other technologies. </font><font style="vertical-align: inherit;">It uses web sockets when available, or technologies such as Flash Socket, AJAX Long Polling, AJAX Multipart Stream, when web sockets are not available. </font><font style="vertical-align: inherit;">An easy analogy is the comparison of the Fetch API and Axios.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Difference Between Web Sockets and Socket.IO</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The main advantages of Socket.IO are the following:</font></font><br>
<br>
<ul>
<li>   -, Socket.IO      . ,            .         .   -,              .</li>
<li> -      . Socket.IO     .</li>
<li>  , Socket.IO   () .</li>
<li>Socket.IO      .</li>
<li> Socket.IO  .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It might seem that Socket.IO is the best tool for live communication. </font><font style="vertical-align: inherit;">However, there are several situations where it is better to use web sockets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Firstly, web sockets are supported by all modern browsers. </font><font style="vertical-align: inherit;">Therefore, you rarely need the support of other technologies provided by Socket.IO. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If we talk about network traffic, then web sockets send only two requests:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GET to get HTML page</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPGRADE for connecting to web sockets</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This allows you to connect to the server. </font><font style="vertical-align: inherit;">What about Socket.IO?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GET to get HTML page</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Socket.IO Client Library ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">207kb</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Three long polling Ajax requests</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPGRADE for connecting to web sockets</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the world of JS, 207kb is a lot. </font><font style="vertical-align: inherit;">What an irrational use of network traffic! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In npm there is a package </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äúwebsocket-vs-socket.io‚Äù</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> that allows you to compare the network traffic of these technologies:</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web Socket Network Traffic:</font></font></h4><br>
<img src="https://habrastorage.org/webt/sp/fy/hq/spfyhql2fnceonu6316fktpamaq.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Socket.IO Network Traffic:</font></font></h4><br>
<img src="https://habrastorage.org/webt/lx/0v/3d/lx0v3dq1tdafi1wxhsef5lh56d4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The difference is obvious!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Writing a code</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simple web socket server</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In our program on Node.js, we will create a server running on port 3001. Each time the client connects, we will assign it a unique ID. </font><font style="vertical-align: inherit;">When sending a message to the client, we will notify him of the success: [&lt;client-id&gt;]: &lt;message&gt;</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> WebSocket = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ws'</span>)
<span class="hljs-keyword">const</span> UUID = <span class="hljs-built_in">require</span>(<span class="hljs-string">'uuid'</span>)
<span class="hljs-keyword">const</span> wss = <span class="hljs-keyword">new</span> WebSocket.Server({ <span class="hljs-attr">port</span>: <span class="hljs-number">3001</span> })<font></font>
<font></font>
wss.on(<span class="hljs-string">'connection'</span>, ws =&gt; {<font></font>
  ws.id = UUID()<font></font>
<font></font>
  ws.on(<span class="hljs-string">'message'</span>, message =&gt; {<font></font>
    ws.send(<span class="hljs-string">`[<span class="hljs-subst">${ws.id}</span>]: <span class="hljs-subst">${message}</span>`</span>)<font></font>
  })<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fine! </font><font style="vertical-align: inherit;">But what if we want to send a message to each connected client? </font><font style="vertical-align: inherit;">Web sockets do not support mailing by default. </font><font style="vertical-align: inherit;">This can be implemented as follows:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> WebSocket = <span class="hljs-built_in">require</span>(<span class="hljs-string">"ws"</span>)
<span class="hljs-keyword">const</span> UUID      = <span class="hljs-built_in">require</span>(<span class="hljs-string">"uuid"</span>)
<span class="hljs-keyword">const</span> wss       = <span class="hljs-keyword">new</span> WebSocket.Server({ <span class="hljs-attr">port</span>: <span class="hljs-number">3001</span> })<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">broadcast</span>(<span class="hljs-params">clientId, message</span>) </span>{<font></font>
  wss.clients.forEach(<span class="hljs-function"><span class="hljs-params">client</span> =&gt;</span> {
    <span class="hljs-keyword">if</span>(client.readyState === WebSocket.OPEN) {<font></font>
      client.send(<span class="hljs-string">`[<span class="hljs-subst">${clientId}</span>]: <span class="hljs-subst">${message}</span>`</span>)<font></font>
    }<font></font>
  })<font></font>
}<font></font>
<font></font>
wss.on(<span class="hljs-string">'conection'</span>, ws =&gt; {<font></font>
  ws.id = UUID()<font></font>
  ws.on(<span class="hljs-string">'message'</span>, message =&gt; broadcast(ws.id, message))<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Simply and easily! </font><font style="vertical-align: inherit;">As you can see, WebSocket.Server keeps records of each connected client, so we can iterate and send a message to everyone. </font><font style="vertical-align: inherit;">You can test the code on a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">computer (MacOS)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or in a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">browser (Chrome)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simple server on Socket.IO</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It was not difficult. </font><font style="vertical-align: inherit;">Can Socket.IO make it even easier? </font><font style="vertical-align: inherit;">How do we write the same server on Socket.IO?</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> io = <span class="hljs-built_in">require</span>(<span class="hljs-string">'socket.io'</span>)
<span class="hljs-keyword">const</span> server = io.listen(<span class="hljs-number">3002</span>)<font></font>
<font></font>
server.on(<span class="hljs-string">'connection'</span>, socket =&gt; {<font></font>
  socket.on(<span class="hljs-string">'message'</span>, message =&gt; {<font></font>
    socket.emit(<span class="hljs-string">`[<span class="hljs-subst">${socket.id}</span>]: <span class="hljs-subst">${message}</span>`</span>)<font></font>
    socket.broadcast.emit(<span class="hljs-string">`[<span class="hljs-subst">${socket.id}</span>]: <span class="hljs-subst">${message}</span>`</span>)<font></font>
  })<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The code is almost half shorter! As you can see, the broadcast method does not send a notification to the sender, so we are forced to do this manually. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is a problem: the code cannot be tested on a regular web socket client. This is due to the fact that, as noted earlier, Socket.IO does not use pure web sockets, but many technologies to support all possible clients. So how do we test its performance?</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// head</span>
&lt;script src=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/socket.io-client@2.3.0/dist/socket.io.slim.js"</span>&gt;&lt;/script&gt;<font></font>
<font></font>
<span class="hljs-comment">// body</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  ioClient = io.connect(<span class="hljs-string">'http://localhost:3002'</span>)
  ioClient.on(<span class="hljs-string">'connect'</span>, socket =&gt; {
    ioClient.send(<span class="hljs-string">'hello world'</span>)
    ioClient.on(<span class="hljs-string">'message'</span>, msg =&gt; <span class="hljs-built_in">console</span>.log(msg))
  })
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You must use a special client. </font><font style="vertical-align: inherit;">In the above example, we load it from the CDN. </font><font style="vertical-align: inherit;">This client allows us to conduct quick (dirty) tests in the browser. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, our examples are not much different. </font><font style="vertical-align: inherit;">However, if we talk about compatibility, it should be remembered that Socket.IO works with its own library and cannot be used for purposes not related to web development. </font><font style="vertical-align: inherit;">At the same time, web sockets can be used to solve a wide range of tasks, such as P2P communication, real-time data exchange between servers, etc.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On a note</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Horizontal scaling. Let's say your chat has gained popularity and you need to add another server and load balancer to process requests. Well, if you open the connection to ‚Äúserver 1‚Äù, then the balancer switches you to ‚Äúserver 2‚Äù, you will get the error: ‚ÄúError during WebSocket handshake: Unexpected response code: 400‚Äù. Socket.IO solves this problem by using cookies (or by routing connections based on source addresses), and web sockets do not have such a mechanism.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Performance. </font><font style="vertical-align: inherit;">As noted earlier, Socket.IO provides several abstract layers above the transport layer of web sockets. </font><font style="vertical-align: inherit;">Also, packing data into JSON format is used here, so there is no possibility to send binary data to the server (and vice versa). </font><font style="vertical-align: inherit;">If you need such functionality, you have to ‚Äúconjure‚Äù the library code in order to ensure the desired behavior. </font><font style="vertical-align: inherit;">With web sockets such problems do not arise.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So what to choose?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You decide. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Socket.IO makes life easier, you don‚Äôt need to worry about problems related to load balancing, disconnection or sending messages ... but do you need such functionality? </font><font style="vertical-align: inherit;">The Socket.IO client library weighs more than the React, Redux, and React-Redux packages combined. </font><font style="vertical-align: inherit;">Are you sure you can‚Äôt limit yourself to web sockets?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another important thing to keep in mind is that when using Socket.IO on the server side, most of the code will be written on the abstractions provided by this library. </font><font style="vertical-align: inherit;">If you need to rewrite Node.js microservices in Go, Elixir, Java or another programming language, you will have to rewrite almost all the logic. </font><font style="vertical-align: inherit;">For example, to send messages to Socket.IO, the ‚Äúbroadcast‚Äù method is used (which is implemented manually on web sockets), so when refactoring you will have to understand how this method works. </font><font style="vertical-align: inherit;">Web sockets should be preferred in this case, as they are easier to adapt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thank you for attention.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en498978/index.html">Using Graylog and NLog to collect logs from C # applications. Personal experience</a></li>
<li><a href="../en498982/index.html">Floppies for Dreamcast</a></li>
<li><a href="../en498984/index.html">Stealth School: 5 types of gadgets in stealth games</a></li>
<li><a href="../en498988/index.html">Overseas job search and immigration to Canada</a></li>
<li><a href="../en498990/index.html">Gamepad support for Omega Red emulator</a></li>
<li><a href="../en498998/index.html">Rust 1.43.0 release: improved compiler and type inference for primitives, item in macros</a></li>
<li><a href="../en499004/index.html">How to have fun in isolation, or transfer data using a sound card</a></li>
<li><a href="../en499008/index.html">Why developers are so slow: common problems and their solutions</a></li>
<li><a href="../en499010/index.html">We study the Mediastreamer2 VoIP engine. Part 11</a></li>
<li><a href="../en499014/index.html">23 difficult questions for JavaScript interviews</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>