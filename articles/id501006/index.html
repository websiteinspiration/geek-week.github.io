<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛹🏿 👨🏽‍🌾 🤖 Kami berteman STM32 dengan layar LCD 1604 di bus I2C (perpustakaan HAL) 👨🏼‍🌾 🌓 🛳️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo, Habr! 
 
 Pada artikel ini saya ingin berbicara tentang pengalaman saya menghubungkan layar LCD ke mikrokontroler STM32 menggunakan perpustakaan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kami berteman STM32 dengan layar LCD 1604 di bus I2C (perpustakaan HAL)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501006/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Halo, Habr! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada artikel ini saya ingin berbicara tentang pengalaman saya menghubungkan layar LCD ke mikrokontroler STM32 menggunakan perpustakaan HAL pada bus I2C. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yj/tq/li/yjtqliuuokrq220g_4kyg5lty3y.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya akan menghubungkan layar 1602 dan 2004. Keduanya memiliki adaptor I2C yang disolder berdasarkan chip PCF8574T. </font><font style="vertical-align: inherit;">Papan debug akan menjadi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleo767ZI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan lingkungan pengembangan akan menjadi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32CubeIDE 1.3.0.</font></font></b><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak akan berbicara secara rinci tentang prinsip pengoperasian bus I2C, saya sarankan Anda untuk melihat di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami membuat proyek, pilih papan debug: Kami </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ka/dg/gq/kadggqufgj38rtpnuhafups7usg.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
menunjukkan bahwa kami akan menggunakan I2C1. Saya juga akan menghubungkan UART5 untuk berkomunikasi dengan board, ini diperlukan untuk menerima informasi dari board tentang alamat display. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cv/h2/o5/cvh2o5rcohuwwpqecrcedg4m62a.jpeg" alt="gambar"><br>
<br>
<img src="https://habrastorage.org/webt/cp/iz/dt/cpizdtxz2sosftjpdrvgycthcz8.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di jendela yang sama, Anda dapat melihat jumlah kaki yang terhubung ke layar, dalam kasus saya ternyata seperti ini: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gj/jg/yd/gjjgydsz_j5o4czfol2wgsqfayy.jpeg" alt="gambar"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memulai, hubungkan hanya satu tampilan, saya akan mulai dengan 1602. Juga, saya akan menghubungkan adaptor USB-UART CH340, yang dikenal dengan driver arduin berpengalaman, untuk menerima data dari papan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pl/ka/tq/plkatqffrxr3txh7d3gar6m9wka.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Harap dicatat bahwa adaptor menghubungkan RX ke TX dan TX ke RX, jumper pada adaptor adalah 3.3V</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n_/u-/jl/n_u-jlv9qayzjrgmqg9yoqlz7mi.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat lebih dekat cara bekerja dengan chip dan tampilan PCF8574T. </font><font style="vertical-align: inherit;">Di bawah ini adalah diagram skematik modul dengan tampilan: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-v/-p/5e/-v-p5ehplnmtvvbvncmbaqqo1ru.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chip PCF8574T memiliki fungsionalitas yang mirip dengan register geser 74hc595 - ia menerima byte melalui antarmuka I2C dan memberikan nilai bit yang sesuai ke outputnya (P0-P7). </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertimbangkan pin microcircuit yang terhubung ke monitor dan apa yang menjadi tanggung jawabnya:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terminal P0 dari rangkaian mikro terhubung ke terminal RS dari tampilan, yang bertanggung jawab untuk menerima data tampilan (1) atau instruksi pengoperasian tampilan (0);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pin P1 terhubung ke R \ W, jika 1 - tulis data ke layar, 0 - baca;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terminal P2 terhubung ke CS - terminal, setelah perubahan status yang sedang dibaca;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan P3 - kontrol lampu latar;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan P4 - P7 digunakan untuk mengirimkan data ke layar. </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beberapa perangkat dapat dihubungkan ke satu bus I2C secara bersamaan. Agar dapat mengakses perangkat tertentu, masing-masing memiliki alamat sendiri, pertama-tama kita akan mengetahuinya. Jika kontak A1, A2 dan A3 pada papan adaptor tidak disegel, maka alamat kemungkinan besar akan 0x27, tetapi lebih baik untuk memeriksa. Untuk melakukan ini, kami akan menulis fungsi kecil yang akan menunjukkan alamat semua perangkat yang terhubung ke bus I2C:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">I2C_Scan</span> <span class="hljs-params">()</span>
</span>{
	<span class="hljs-comment">//  ,  </span><font></font>
        HAL_StatusTypeDef res;                          <font></font>
	<span class="hljs-comment">//    </span>
        <span class="hljs-keyword">char</span> info[] = <span class="hljs-string">"Scanning I2C bus...\r\n"</span>;      
        <span class="hljs-comment">//    UART	</span>
        HAL_UART_Transmit(&amp;huart5, (<span class="hljs-keyword">uint8_t</span>*)info, <span class="hljs-built_in">strlen</span>(info), HAL_MAX_DELAY);  
	<span class="hljs-comment">/* &amp;huart5 -   UART
	 * (uint8_t*)info -     
	 * strlen(info) -   
	 * HAL_MAX_DELAY - 
	 */</span>
        <span class="hljs-comment">//    </span>
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">uint16_t</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">128</span>; i++)              <font></font>
	{<font></font>
            <span class="hljs-comment">// ,      i  </span>
            res = HAL_I2C_IsDeviceReady(&amp;hi2c1, i &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, HAL_MAX_DELAY);                   
	    <span class="hljs-comment">//  , </span>
            <span class="hljs-keyword">if</span>(res == HAL_OK)                              <font></font>
	    {<font></font>
	    	<span class="hljs-keyword">char</span> msg[<span class="hljs-number">64</span>];
	    	<span class="hljs-comment">//   i,   ,     </span>
                <span class="hljs-comment">// 16 :</span>
	    	<span class="hljs-built_in">snprintf</span>(msg, <span class="hljs-keyword">sizeof</span>(msg), <span class="hljs-string">"0x%02X"</span>, i);
	    	<span class="hljs-comment">//    </span>
	    	HAL_UART_Transmit(&amp;huart5, (<span class="hljs-keyword">uint8_t</span>*)msg, <span class="hljs-built_in">strlen</span>(msg), HAL_MAX_DELAY);
	    	<span class="hljs-comment">//    </span>
	    	HAL_UART_Transmit(&amp;huart5, (<span class="hljs-keyword">uint8_t</span>*)<span class="hljs-string">"\r\n"</span>, <span class="hljs-number">2</span>, HAL_MAX_DELAY);<font></font>
	    }<font></font>
	    <span class="hljs-keyword">else</span> HAL_UART_Transmit(&amp;huart5, (<span class="hljs-keyword">uint8_t</span>*)<span class="hljs-string">"."</span>, <span class="hljs-number">1</span>, HAL_MAX_DELAY);<font></font>
	}<font></font>
	HAL_UART_Transmit(&amp;huart5, (<span class="hljs-keyword">uint8_t</span>*)<span class="hljs-string">"\r\n"</span>, <span class="hljs-number">2</span>, HAL_MAX_DELAY);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fungsi ini mengumpulkan semua alamat mulai dari 0 hingga 127 dan jika respons diterima dari alamat ini, ia mengirim nomor alamat dalam bentuk heksadesimal ke UART. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk berkomunikasi dengan dewan, saya menggunakan program Rayap. Secara default, kecepatan UART mikrokontroler diatur ke 115200, Anda harus mengatur yang sama dalam rayap. Kami memanggil fungsi di bagian utama program, mem-flash papan dan menghubungkan rayap ke mikrokontroler kami: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0f/3d/uj/0f3dujga-iwbhudpe7kauth_ivi.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Titik-titik menunjukkan semua alamat yang jawabannya tidak diterima. Alamat pada layar saya adalah 0x26, karena saya menyolder jumper A0. Sekarang sambungkan tampilan paralel kedua dengan tampilan pertama, dan lihat apa yang akan diberikan oleh program:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f4/dz/hm/f4dzhm0py_f9kbvecthsshrpemi.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memiliki dua alamat: 0x26 (tampilan 1602) dan 0x27 (tampilan 2004). Sekarang tentang cara bekerja dengan tampilan. Mikrokontroler mengirimkan byte alamat, dan semua perangkat yang terhubung ke bus memeriksanya dengan milik mereka. Jika cocok, maka modul memulai komunikasi dengan mikrokontroler. Pertama-tama, Anda perlu mengkonfigurasi tampilan: di mana jumlah karakter akan pergi dan ke arah mana, bagaimana kursor akan berperilaku, dll. Setelah itu, sudah dimungkinkan untuk mengirimkan informasi untuk ditampilkan ke layar. Keunikannya adalah kita hanya dapat menggunakan 4 bit untuk mengirimkan informasi, mis. data harus dipecah menjadi dua bagian. Data disimpan dalam bit tinggi (4-7), dan bit rendah digunakan untuk menunjukkan apakah lampu latar akan menyala (3 bit), apakah data datang untuk output, atau pengaturan tampilan (output RS, 0 bit), dan 2 bit, oleh perubahan bacaan yang terjadi, yaitue untuk mengirim 1 byte data yang Anda butuhkan untuk mengirim 4 byte - byte pertama akan berisi 4 bit informasi, bit ke-2 untuk menyatakan 1, byte ke-2 adalah pengulangan tanggal 1, hanya bit ke-2 untuk menyatakan 0. Byte ke-3 dan ke-4 sama, hanya berisi bagian kedua dari data. Kedengarannya agak tidak bisa dimengerti, saya akan menunjukkan kepada Anda sebuah contoh:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">I2C_send</span><span class="hljs-params">(<span class="hljs-keyword">uint8_t</span> data, <span class="hljs-keyword">uint8_t</span> flags)</span>
</span>{<font></font>
	HAL_StatusTypeDef res;<font></font>
	 <span class="hljs-comment">//     </span>
        <span class="hljs-keyword">for</span>(;;) {
                <span class="hljs-comment">// ,      lcd_addr                                                                                        </span>
	        res = HAL_I2C_IsDeviceReady(&amp;hi2c1, LCD_ADDR, <span class="hljs-number">1</span>, HAL_MAX_DELAY);               
	         <span class="hljs-comment">//  ,     </span>
                <span class="hljs-keyword">if</span>(res == HAL_OK) <span class="hljs-keyword">break</span>;                                                  <font></font>
	    }<font></font>
        <span class="hljs-comment">//    1111 0000      0  3,    4  7</span>
	<span class="hljs-keyword">uint8_t</span> up = data &amp; <span class="hljs-number">0xF0</span>;   
        <span class="hljs-comment">//   ,  data   4                	</span>
        <span class="hljs-keyword">uint8_t</span> lo = (data &lt;&lt; <span class="hljs-number">4</span>) &amp; <span class="hljs-number">0xF0</span>;          <font></font>
                                          <font></font>
	<span class="hljs-keyword">uint8_t</span> data_arr[<span class="hljs-number">4</span>];
         <span class="hljs-comment">// 4-7   ,  0-3   </span>
	data_arr[<span class="hljs-number">0</span>] = up|flags|BACKLIGHT|PIN_EN; 
         <span class="hljs-comment">//  ,       0  </span>
	data_arr[<span class="hljs-number">1</span>] = up|flags|BACKLIGHT;         <font></font>
	data_arr[<span class="hljs-number">2</span>] = lo|flags|BACKLIGHT|PIN_EN;<font></font>
	data_arr[<span class="hljs-number">3</span>] = lo|flags|BACKLIGHT;<font></font>
<font></font>
	HAL_I2C_Master_Transmit(&amp;hi2c1, LCD_ADDR, data_arr, <span class="hljs-keyword">sizeof</span>(data_arr), HAL_MAX_DELAY);<font></font>
	HAL_Delay(LCD_DELAY_MS);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita bereskan. Pada awalnya ada variabel yang menyimpan alamat tampilan, dan bit pengaturan yang harus dikirim setiap kali bersama dengan data. Dalam fungsi pengiriman, kami pertama-tama memeriksa apakah ada modul pada alamat yang direkam. Jika menerima pesan HAL_OK, kami mulai membentuk byte untuk dikirim. Pada awal byte yang akan kami kirim, perlu dibagi menjadi dua bagian, tulis keduanya ke bit-bit tinggi. Misalkan kita ingin tampilan untuk menampilkan karakter 's', dalam sistem biner itu adalah 1110011 ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kalkulator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Menggunakan operasi logis &amp; kami menulis = 01110000 ke dalam variabel, mis. tulis hanya bit yang paling signifikan. Bit urutan rendah digeser ke kiri oleh 4 karakter di awal, dan kemudian ditulis ke dalam variabel lo = 00110000. Selanjutnya, kita membentuk array 4 byte yang berisi informasi tentang karakter yang akan ditampilkan. Sekarang kami menetapkan bit konfigurasi (0-3 bit) ke byte yang ada. Setelah itu, kami mengirim byte alamat dan 4 byte informasi ke layar menggunakan fungsi HAL_I2C_Master_Transmit (); </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi jangan buru-buru mengunduh program, karena pada awalnya Anda perlu mengatur pengaturan tampilan. Situs </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memiliki tabel terjemahan yang sangat baik dengan perintah untuk menyesuaikan tampilan. Setelah memeriksanya dengan dokumentasi, saya datang ke pengaturan berikut yang optimal untuk diri saya sendiri:</font></font><br>
<br>
<pre><code class="cpp hljs">  I2C_send(<span class="hljs-number">0b00110000</span>,<span class="hljs-number">0</span>);   <span class="hljs-comment">// 8  </span>
  I2C_send(<span class="hljs-number">0b00000010</span>,<span class="hljs-number">0</span>);   <span class="hljs-comment">//     </span>
  I2C_send(<span class="hljs-number">0b00001100</span>,<span class="hljs-number">0</span>);   <span class="hljs-comment">//   ,  </span>
  I2C_send(<span class="hljs-number">0b00000001</span>,<span class="hljs-number">0</span>);   <span class="hljs-comment">//  </span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menempatkan perintah-perintah ini sebelum awal loop tak terbatas, sehingga pengaturan dikirim sekali sebelum memulai bekerja (seperti pengaturan batal di arduinki). </font><font style="vertical-align: inherit;">Fungsi I2C_send, selain byte, mengharuskan Anda menentukan apakah pengaturan tampilan atau data akan dikirim. </font><font style="vertical-align: inherit;">Jika argumen kedua dari fungsi adalah 0, maka pengaturan, dan jika 1, maka data. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan sentuhan terakhir - Anda memerlukan fungsi yang akan mengirim tenggat waktu karakter-demi-karakter. </font><font style="vertical-align: inherit;">Semuanya sangat sederhana di sini:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">LCD_SendString</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *str)</span>
</span>{
    <span class="hljs-comment">// *char    </span>
    <span class="hljs-comment">//    </span>
	<span class="hljs-keyword">while</span>(*str) <font></font>
        {                                   <font></font>
                <span class="hljs-comment">//    </span>
		I2C_send((<span class="hljs-keyword">uint8_t</span>)(*str), <span class="hljs-number">1</span>); 
                <span class="hljs-comment">//     1               </span><font></font>
                str++;                                     <font></font>
        }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah mengumpulkan semua fungsi ini bersama-sama, Anda dapat menulis:</font></font><br>
<br>
<pre><code class="cpp hljs">  LCD_SendString(<span class="hljs-string">"  Hello"</span>);<font></font>
  I2C_send(<span class="hljs-number">0b11000000</span>,<span class="hljs-number">0</span>);   <span class="hljs-comment">//  </span>
  LCD_SendString(<span class="hljs-string">"    Habr"</span>);
</code></pre><br>
<img src="https://habrastorage.org/webt/wl/yz/_p/wlyz_pkm6xjhc8pqk9anu93m5n0.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya, kami berhasil menemukan layar 1602, sekarang 2004. Perbedaan di antara mereka sangat minim, bahkan kode ini akan berfungsi dengan baik. Semua perbedaan bermuara pada pengorganisasian alamat sel pada tampilan. Di kedua layar, memori berisi 80 sel, pada layar 1602, 16 sel pertama bertanggung jawab untuk baris pertama, dan sel 40 hingga 56 bertanggung jawab untuk baris kedua. Sel memori yang tersisa tidak ditampilkan, jadi jika Anda mengirim 17 karakter ke layar, yang terakhir tidak akan ditransfer pada baris kedua, dan akan direkam dalam sel memori yang tidak memiliki output ke layar. Sedikit lebih jelas, memori diatur sebagai berikut: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pz/-u/cp/pz-ucp3k76pfuilzikli5ce_m7g.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menggunakan umpan baris, saya menggunakan perintah </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I2C_send (0b11000000,0);</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , itu hanya pergi ke 40 sel. Tampilan 2004 lebih menarik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baris pertama adalah sel 1 hingga 20 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baris kedua adalah sel 40 hingga 60</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baris ketiga - sel dari 21 hingga 40 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baris keempat - sel dari 60 hingga 80, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
yaitu </font><font style="vertical-align: inherit;">jika Anda mengirim perintah</font></font><br>
<br>
<pre><code class="cpp hljs">LCD_SendString(<span class="hljs-string">"___________________1___________________2___________________3___________________4"</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mendapatkan yang berikut: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z9/fe/xw/z9fexwtyq9grtdqtnq1bbw7jijm.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengatur transisi antar baris, Anda harus memindahkan kursor ke sel memori yang diinginkan secara manual, atau Anda dapat secara terprogram melengkapi fungsi tersebut. </font><font style="vertical-align: inherit;">Sejauh ini saya telah membahas versi manual:</font></font><br>
<br>
<pre><code class="cpp hljs">  I2C_send(<span class="hljs-number">0b10000000</span>,<span class="hljs-number">0</span>);   <span class="hljs-comment">//   1 </span>
  LCD_SendString(<span class="hljs-string">"  Hello Habr"</span>);<font></font>
  I2C_send(<span class="hljs-number">0b11000000</span>,<span class="hljs-number">0</span>);   <span class="hljs-comment">//   2 </span>
  LCD_SendString(<span class="hljs-string">" STM32 + LCD 1602"</span>);<font></font>
  I2C_send(<span class="hljs-number">0b10010100</span>,<span class="hljs-number">0</span>);   <span class="hljs-comment">//   3 </span>
  LCD_SendString(<span class="hljs-string">" +LCD 2004A"</span>);<font></font>
  I2C_send(<span class="hljs-number">0b11010100</span>,<span class="hljs-number">0</span>);   <span class="hljs-comment">//   4 </span>
  LCD_SendString(<span class="hljs-string">" library HAL"</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasil: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yj/tq/li/yjtqliuuokrq220g_4kyg5lty3y.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu mungkin semua dengan pajangan ini, tautan yang berguna berkat yang saya dapat mengatasinya:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode terlihat sangat banyak </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di sini</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabel untuk konfigurasi tampilan tampak </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di sini</font></font></a> </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prosedurnya terlihat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di sini</font></font></a></li>
</ol><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Program dan lembar data</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PS: jangan lupa untuk menyesuaikan kecerahan layar terlebih dahulu.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id500992/index.html">Bagaimana Manajemen Kinerja di perusahaan IT terbaik</a></li>
<li><a href="../id500994/index.html">Jalankan semut. Lari</a></li>
<li><a href="../id500996/index.html">Bagaimana menjadi insinyur DevOps dalam enam bulan atau bahkan lebih cepat. Bagian 1. Pendahuluan</a></li>
<li><a href="../id501002/index.html">Umka: bahasa skrip diketik statis baru</a></li>
<li><a href="../id501004/index.html">Lakukan. Kerja</a></li>
<li><a href="../id501008/index.html">Paving domino</a></li>
<li><a href="../id501010/index.html">Linux Kernel TLS dan Nginx</a></li>
<li><a href="../id501012/index.html">Bagaimana saya mencari mesin anak untuk blog</a></li>
<li><a href="../id501016/index.html">Pada tren perkembangan arsitektur prosesor, atau mengapa saya percaya pada keberhasilan Huawei di pasar server</a></li>
<li><a href="../id501018/index.html">Cara menyiasati beberapa batasan terjemahan google</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>