<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☣️ 🎆 🍅 Marcher dans un râteau. Arduino 🈯️ 🤽🏼 👷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je fais rarement quelque chose de "bas niveau". Ma journée de travail approximative consiste à développer des applications mobiles pour les entreprise...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Marcher dans un râteau. Arduino</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redmadrobot/blog/493634/"><p><img src="https://habrastorage.org/webt/zc/ts/qc/zctsqcqj_lbqm9ra-gc10xg6sya.png"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je fais rarement quelque chose de "bas niveau". Ma journée de travail approximative consiste à développer des applications mobiles pour les entreprises et un tas de pièces managériales diverses. Bien sûr, parfois je veux être distrait. Il s'avère que c'est rare et, par conséquent, cela donne un plaisir particulier. Cette fois, il a été décidé de se laisser distraire en utilisant l'Amperka. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetra</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”, qui est destiné aux enfants et à l'aide duquel vous pouvez apprendre les bases des circuits, les noms des capteurs et essayer de programmer quelque chose qui fonctionne dans le monde réel, et non sur un écran d'ordinateur. En général, lorsque vous êtes un homme barbu adulte - en général, c'est le cas.</font></font></p><a name="habracut"></a><br>
<blockquote> ,  ,      (    ),          ,        Bluetooth,        -  ( ,     ),     ,           .         ,        ,      .</blockquote><p> ,   , .    (   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Arduino Leonardo</a>)    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Scratch</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>,      ),   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">S4A</a>,     … , , , ,  -  .   .   ?  .</p><br>
<blockquote>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Toys That Made Us</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lego</a>,       «».       ,      ,    (     )  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">System</a>.   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TECHNIC</a>  «»,     .  ,     ,    ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>,    ,   « , ..?»,   , ,  .</blockquote><p>     «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Troyka</a>»,    ,  . , ,      ,   .         .    ,   .</p><br>
<h2 id="dlya-rebyonka-chestno">« » (!)</h2><br>
<p>    .  , ,     (     ,  ),     , «!!!», ,   ,    . ,      ,   —&nbsp;    ,   . ,    ,  , - &nbsp; !</p><br>
<p>,  .    «» Troyka- ,   ,       :   8  8,     ,   . ,     ,  -  .</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/6ba/0ca/22b/6ba0ca22b8ef321a2e107edb6ac6e460.jpg"></p><br>
<p>         ( ,  ,    ?       ),  ,    «,   »   ,     , ,     ,     « ».   —&nbsp;   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">S4A</a> (Scratch for Arduino),    ,  .  ,  S4A      macOS (  ,  ),        apt-get’ (  ),    (   ,  ,  ),    .</p><br>
<p>    «»,    .  ,   ,  ,    - LED,      .     .</p><br>
<h2 id="diskleymer"></h2><br>
<p> ,       .     ,  -  , , .     —&nbsp;  .   ,     , ,  . ,      .  :</p><br>
<ul>
<li>        . , ,       13, 12  10,   11 &nbsp; ? _</li>
<li>  ,        ,    . ,    «   »,  ,  ,    .</li>
<li> ( , ,  )  S4A ,     .   /,   ,     .  WeDo ( -  )    (    ),    —&nbsp;,   AnalogN/DigitalN.  ,    .</li>
</ul><br>
<p>   . ,  S4A      .</p><br>
<p>  ,  -  :</p><br>
<ul>
<li>-,      ,   <em></em>  ( ,  ?!).</li>
<li>-,           ( ,   -    ,   ,  ,     ).      .     ,    .       ,    . Breadboard’        .       Troyka-.      ,   !</li>
</ul><br>
<p> S4A  ,   ,    .</p><br>
<blockquote> , , . ,    —&nbsp;   «  ».    .  ,    ,  ,   .</blockquote><br>
<h2 id="chto-delat-budem">  ?</h2><br>
<p>   ,  ,  ,   Swift ( iOS      ).   ,     . Tetra        ( USB,     ),     ,   ,   .</p><br>
<p>      :    Swift,    :</p><br>
<ul>
<li>  ,</li>
<li>   ,</li>
<li>        .</li>
</ul><br>
<p>   ,  ,   S4A.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«firmware»   </a> (       ),  ,    «» ,  ,      .</p><br>
<p>  :</p><br>
<ul>
<li> ,     ,</li>
<li>    ,  ,  , ,</li>
<li>   (,    ,   ). , ,  , .</li>
</ul><br>
<p>? !  , .</p><br>
<h2 id="protokol"></h2><br>
<p>   ,  S4A   .     ,     , ,  ,       .  ,       ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PicoBoard</a>,  ,  Scratch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   </a>.  . </p><br>
<blockquote>    /++,   .  ++- ,      .</blockquote><br>
<pre><code class="swift hljs">void send(byte sensor, int value) {
    <span class="hljs-type">Serial</span>.write(<span class="hljs-type">B10000000</span> | ((sensor &amp; <span class="hljs-type">B1111</span>) &lt;&lt; <span class="hljs-number">3</span>) | ((value &gt;&gt; <span class="hljs-number">7</span>) &amp; <span class="hljs-type">B111</span>));
    <span class="hljs-type">Serial</span>.write(value &amp; <span class="hljs-type">B1111111</span>);<font></font>
}<font></font>
<font></font>
void receive(byte first, byte second) {<font></font>
    pin = (first &gt;&gt; <span class="hljs-number">3</span>) &amp; <span class="hljs-number">0x0F</span>;<font></font>
    newVal = ((first &amp; <span class="hljs-number">0x07</span>) &lt;&lt; <span class="hljs-number">7</span>) | (second &amp; <span class="hljs-number">0x7F</span>);<font></font>
    ...<font></font>
}</code></pre><br>
<p>     ,        . ,    ( ,   )  :</p><br>
<pre><code class="swift hljs">1SSSSVVV 0VVVVVVV</code></pre><br>
<p> <code>SSSS</code> —&nbsp;  ,      ,  <code>VVVVVVVVVV</code> —&nbsp; 10- .     -   0  1023,  «»    (   )   0  255.    .    (   ,  )  ,  ,       ,   -     . ,   ,        .   ,    ,  ,      ,  S4A ,    .</p><br>
<p>        .  —&nbsp; .      ,        ,    ,    - .</p><br>
<h2 id="podklyuchenie-po-posledovatelnomu-portu">   </h2><br>
<p> .      / -.  Serial Swift,    (  - ,   -,   ),   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://github.com/yeokm1/SwiftSerial/blob/master/Sources/SwiftSerial.swift</a>.      <code>Serial.begin(38400)</code>,     38400,    —&nbsp;« ».    ?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a>,    .         . ,      SwiftSerial,  Linux-    read/write,   . ? , , -,    <code>open</code>. ,     . ,     macOS,      ,    <code>O_NONBLOCK</code>. , , !</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">open</span>(path, readWriteParam | <span class="hljs-type">O_NOCTTY</span> | <span class="hljs-type">O_EXLOCK</span> | <span class="hljs-type">O_NONBLOCK</span>)</code></pre><br>
<p>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://github.com/bealex/TetraSwift/blob/master/Sources/Serial/SerialPort.swift</a>.       ,  . ,      Linux-,    Raspberry Pi.</p><br>
<h2 id="chtenie-zapis">, </h2><br>
<p>       -   -.   ,    .</p><br>
<ul>
<li>,   , 10-,  ( 0  1023).   ,       ,   .</li>
<li>,     —&nbsp;HIGH  LOW.   HIGH —&nbsp; - 1023 (  1,    ),  LOW —&nbsp;0.     ,  «» —&nbsp;  ,  . ¯\_(ツ)_/¯</li>
<li>,     —&nbsp;8-,  ( 0  255).  ,    ,      .    ,  —&nbsp;  .</li>
<li> ,    ,  4-  ( 0  15).       ,     .   « »,  :<br>
<ul>
<li>  1—4&nbsp;   (  ),    —&nbsp;0.</li>
<li>  ():  —&nbsp;  ,   —&nbsp;.</li>
<li>«» ( ,     ) :  —&nbsp;  ,  —&nbsp;  ,   —&nbsp;  .   3/7/8     4/3/8 </li>
<li>   ,  10  13 .</li>
</ul></li>
</ul><br>
<p>    ,  .  ,   «»  PicoBoard,    ,  .     : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://github.com/bealex/TetraSwift/blob/master/Sources/IOPort.swift</a>.        .</p><br>
<p>,   .    ,    . !</p><br>
<p>   ?  , .       /  ,       ,   ,    ,   ,      .        -.</p><br>
<p>   - .</p><br>
<h2 id="interfeys-freymvorka"> </h2><br>
<p>     Swift,     - «  Scratch».              .     -   (        -):</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> tetra = <span class="hljs-type">Tetra</span>(...) { event <span class="hljs-keyword">in</span>
    <span class="hljs-comment">//     .</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// !</span><font></font>
tetra.start()<font></font>
<span class="hljs-comment">//  13 .</span>
tetra.write(actuator: .ledDigital13(<span class="hljs-literal">true</span>))
<span class="hljs-comment">//  .</span>
<span class="hljs-type">Thread</span>.sleep(forTimeInterval: <span class="hljs-number">1</span>)
<span class="hljs-comment">//  13 .</span>
tetra.write(actuator: .ledDigital13(<span class="hljs-literal">false</span>))
<span class="hljs-comment">// . :)</span>
tetra.stop()</code></pre><br>
<p>         -  ,             .    .</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> tetra = <span class="hljs-type">Tetra</span>(...)<font></font>
<font></font>
<span class="hljs-comment">//         ,   .</span>
<span class="hljs-comment">//     ,      .</span><font></font>
tetra.run {<font></font>
<span class="hljs-comment">//    .</span>
    tetra.waitFor(.button2, <span class="hljs-keyword">is</span>: <span class="hljs-literal">true</span>) {
    <span class="hljs-comment">//   .</span>
        tetra.write(actuator: .ledDigital13(<span class="hljs-literal">true</span>))
        <span class="hljs-type">Thread</span>.sleep(forTimeInterval: <span class="hljs-number">1</span>)<font></font>
        tetra.write(actuator: .ledDigital13(<span class="hljs-literal">false</span>))<font></font>
    }<font></font>
}</code></pre><br>
<p>,     <code>tetra.write(actuator: .ledDigital13(true))</code> (   ?),  - : <code>tetra.digitalLED13.on()</code>.  . </p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> tetra = <span class="hljs-type">Tetra</span>(...)<font></font>
<font></font>
tetra.run {<font></font>
    <span class="hljs-comment">//     .</span><font></font>
    tetra.whenOn(.button2) {<font></font>
        tetra.digitalLED13.on()<font></font>
    }<font></font>
<span class="hljs-comment">//    —&nbsp;.</span><font></font>
    tetra.whenOn(.button3) {<font></font>
        tetra.digitalLED13.off()<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// ,    .</span><font></font>
    tetra.digitalLED12.on()<font></font>
    tetra.sleep(<span class="hljs-number">0.3</span>)<font></font>
    tetra.digitalLED12.off()<font></font>
}</code></pre><br>
<p>,   - .     ,      -.</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> tetra = <span class="hljs-type">Tetra</span>(...)<font></font>
tetra.installSensors(<font></font>
    analog: [<font></font>
        <span class="hljs-type">AnalogSensor</span>(kind: .light, port: .analogSensor5),<font></font>
        ...<font></font>
        <span class="hljs-type">AnalogSensor</span>(kind: .temperature, port: .analogSensor3),<font></font>
    ],<font></font>
    digital: [<font></font>
        ...<font></font>
        <span class="hljs-type">DigitalSensor</span>(kind: .button, port: .digitalSensor3),<font></font>
    ]<font></font>
)<font></font>
tetra.installActuators(<font></font>
    analog: [<font></font>
        <span class="hljs-type">AnalogActuator</span>(kind: .motor, port: .motor4, maxValue: <span class="hljs-number">180</span>),
        <span class="hljs-type">AnalogActuator</span>(kind: .buzzer, port: .analog9, maxValue: <span class="hljs-number">200</span>),
        <span class="hljs-type">AnalogActuator</span>(kind: .analogLED(.green), port: .analog5, maxValue: <span class="hljs-number">200</span>),<font></font>
        ...<font></font>
    ],<font></font>
    digital: [<font></font>
        <span class="hljs-type">DigitalActuator</span>(kind: .digitalLED(.green), port: .digital10),<font></font>
        ...<font></font>
    ]<font></font>
)</code></pre><br>
<p>   ?      .    .     ?    ,    :</p><br>
<ul>
<li>-,       .   -  , -   .</li>
<li>-,        .  analog, digital,  .         (   ,    ) —&nbsp; ,  .     ,    ?</li>
</ul><br>
<blockquote>        :  , .      .    ,   ,   .</blockquote><p> ,    .  .  .</p><br>
<pre><code class="swift hljs">tetra.install(sensors: [<font></font>
    .analog0: <span class="hljs-type">AnalogSensor</span>(kind: .light),<font></font>
    .analog1: <span class="hljs-type">AnalogSensor</span>(kind: .potentiometer),<font></font>
    .analog2: <span class="hljs-type">AnalogSensor</span>(kind: .magnetic),<font></font>
    .analog3: <span class="hljs-type">AnalogSensor</span>(kind: .temperature),<font></font>
    .analog4: <span class="hljs-type">DigitalSensor</span>(kind: .infrared),<font></font>
    .digital6: <span class="hljs-type">DigitalSensor</span>(kind: .button),<font></font>
    .digital7: <span class="hljs-type">DigitalSensor</span>(kind: .button),<font></font>
])<font></font>
tetra.install(actuators: [<font></font>
    .digital4: <span class="hljs-type">AnalogActuator</span>(kind: .motor),<font></font>
    .digital9: <span class="hljs-type">AnalogActuator</span>(kind: .buzzer),<font></font>
    .digital5: <span class="hljs-type">AnalogActuator</span>(kind: .analogLED(.green)),<font></font>
    .digital6: <span class="hljs-type">AnalogActuator</span>(kind: .analogLED(.red)),<font></font>
    .digital10: <span class="hljs-type">DigitalActuator</span>(kind: .digitalLED(.green)),<font></font>
    .digital11: <span class="hljs-type">DigitalActuator</span>(kind: .digitalLED(.yellow)),<font></font>
    .digital12: <span class="hljs-type">DigitalActuator</span>(kind: .digitalLED(.yellow)),<font></font>
    .digital13: <span class="hljs-type">DigitalActuator</span>(kind: .digitalLED(.red)),<font></font>
    .digital7: <span class="hljs-type">LEDMatrixActuator</span>(kind: .ledMatrix(.monochrome)),<font></font>
    .digital8: <span class="hljs-type">QuadNumericDisplayActuator</span>(kind: .quadDisplay),<font></font>
])</code></pre><br>
<p>, !</p><br>
<p>  ,     S4A.  ,    .     ,      ,    —&nbsp;   0.0  1.0.</p><br>
<p>       ,     .</p><br>
<pre><code class="swift hljs"><span class="hljs-comment">// ,     -, .</span>
<span class="hljs-comment">//        .</span>
<span class="hljs-type">AnalogSensor</span>(<font></font>
    kind: .temperature,<font></font>
    sampleTimes: <span class="hljs-number">32</span>,<font></font>
    tolerance: <span class="hljs-number">0.05</span>,<font></font>
    calculate: <span class="hljs-type">Calculators</span>.celsiusTemperature<font></font>
)<font></font>
<font></font>
<span class="hljs-comment">//      ,  180.</span>
<span class="hljs-type">AnalogActuator</span>(kind: .motor, maxValue: <span class="hljs-number">180</span>)</code></pre><br>
<p>  .    ,   .   «,        ».    «,    ,      ».</p><br>
<p> .     —&nbsp;.    ,  ,     ,    .</p><br>
<p>! , ,  - .   .</p><br>
<p> </p><br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Tetra</span>: <span class="hljs-title">TetraInterface</span> </span>{
    <span class="hljs-keyword">let</span> temperatureSensor = <span class="hljs-type">TemperatureSensor</span>()
    <span class="hljs-keyword">let</span> potentiometer = <span class="hljs-type">Potentiometer</span>()<font></font>
    ...<font></font>
<font></font>
    <span class="hljs-keyword">let</span> quadDisplay = <span class="hljs-type">QuadNumericDisplayActuator</span>()
    <span class="hljs-keyword">let</span> redAnalogLED = <span class="hljs-type">AnalogLED</span>()
    <span class="hljs-keyword">let</span> greenAnalogLED = <span class="hljs-type">AnalogLED</span>()<font></font>
<font></font>
    <span class="hljs-keyword">init</span>(pathToSerialPort: <span class="hljs-type">String</span>) {
        <span class="hljs-keyword">let</span> serialPort = <span class="hljs-type">HardwareSerialPort</span>(path: pathToSerialPort, rate: .baud115200)
        <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(serialPort: serialPort, useTetraProtocol: <span class="hljs-literal">true</span>)<font></font>
        add(sensor: temperatureSensor, on: .analog3)<font></font>
        add(sensor: potentiometer, on: .analog1)<font></font>
        ...<font></font>
<font></font>
        add(actuator: greenAnalogLED, on: .digital5)<font></font>
        add(actuator: redAnalogLED, on: .digital6)<font></font>
        add(actuator: quadDisplay, on: .digital8)<font></font>
        ...<font></font>
    }<font></font>
}</code></pre><br>
<p>  ,   :</p><br>
<pre><code class="swift hljs"><span class="hljs-type">Tetra</span>(pathToSerialPort: serialPort).run {
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> tetra = $<span class="hljs-number">0</span> <span class="hljs-keyword">as</span>? <span class="hljs-type">Tetra</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }<font></font>
<font></font>
    <span class="hljs-comment">//      .</span>
    tetra.potentiometer.whenValueChanged { value <span class="hljs-keyword">in</span>
        <span class="hljs-keyword">if</span> value &lt; <span class="hljs-number">0.5</span> {<font></font>
            tetra.greenAnalogLED.value = <span class="hljs-number">0</span>
            tetra.redAnalogLED.value = (<span class="hljs-number">0.5</span> - value) * <span class="hljs-number">2</span>
        } <span class="hljs-keyword">else</span> {<font></font>
            tetra.greenAnalogLED.value = (value - <span class="hljs-number">0.5</span>) * <span class="hljs-number">2</span>
            tetra.redAnalogLED.value = <span class="hljs-number">0</span><font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">//    .</span>
    tetra.temperatureSensor.whenValueChanged { value <span class="hljs-keyword">in</span>
        tetra.quadDisplay.value = <span class="hljs-type">String</span>(format: <span class="hljs-string">"%.1f˚"</span>, value)<font></font>
    }<font></font>
}</code></pre><br>
<p>,        ? .</p><br>
<h2 id="protokoly"></h2><br>
<blockquote>  .  ,    —&nbsp;  .      ,   PicoBoard  . ,  0  1   ?   ,        ,  -    .      ,   , .    .   .</blockquote><p>,     :</p><br>
<ul>
<li>      .  ,  ,   —&nbsp; Swift,    ,    ,     .     !</li>
<li>      ,    .  ,  .</li>
<li>      .      ,    ?</li>
<li>            .</li>
</ul><br>
<p>    .   ,   ,        .  ,    .   ,    - Protocol Buffers.       (    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nanopb</a>),    ,  Protocol Buffers  ,     .       (  ,     ).</p><br>
<p>      .    :</p><br>
<ul>
<li>       .     ,         .</li>
<li>       .</li>
<li>      ,   -  .</li>
</ul><br>
<p>     ,    ,          ( ,      ),      .      ,  .      .</p><br>
<h2 id="testirovanie"></h2><br>
<p>   ,    .    ,    .      - ?     ,   -,  .       ,      .       -  ,             .</p><br>
<p>    ,       .        ,     . ,    ,    .      ?  /     —&nbsp; ,    . ,     ,     .</p><br>
<p>     :</p><br>
<ul>
<li>  <code>DevicePort</code>,    start/stop/write/read.</li>
<li> ,    —&nbsp; <code>SerialPort</code>,   —&nbsp; , ,      ( ,     ),     .</li>
</ul><br>
<p> ,    .</p><br>
<h2 id="chto-u-menya-vyshlo">   ?</h2><br>
<p>    .   ,  ?    .  , ,  .  ,        .   ,         --      ,   .     ,   , ,      .          .    . , ,     —  .</p><br>
<p>  !</p><br>
<p>:–)</p><br>
<pre><code class="swift hljs">tetra.quadDisplay.value = <span class="hljs-string">"L8R"</span></code></pre></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr493620/index.html">Courbe logistique. Quand l'épidémie prendra-t-elle fin?</a></li>
<li><a href="../fr493622/index.html">Écrire un Retrowave sur Angular</a></li>
<li><a href="../fr493626/index.html">Selenoid - Des centaines de tests d'interface utilisateur parallèles faciles et rapides. Pavel Senin</a></li>
<li><a href="../fr493630/index.html">Transfert des ports USB à partir de Windows 10 pour le travail à distance</a></li>
<li><a href="../fr493632/index.html">Travail à distance sans préparation. Courte introduction</a></li>
<li><a href="../fr493636/index.html">MVP, atterrissage et publicité pour 1500 roubles</a></li>
<li><a href="../fr493638/index.html">Un rappel pour organiser le travail à distance de l'équipe de développement</a></li>
<li><a href="../fr493642/index.html">Anatomie des tableaux LuaJIT et caractéristiques de leur utilisation</a></li>
<li><a href="../fr493644/index.html">Badge PCB, qui ne le sera pas, ou comment tout surmonter et perdre à l'arrivée</a></li>
<li><a href="../fr493646/index.html">Une nouvelle ère de recrutement. Tendances et prévisions de l'emploi pour 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>