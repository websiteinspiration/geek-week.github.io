<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๏ธ ๐๐ฝ โ๏ธ ุฃุณุงุณูุงุช ZFS: ุงูุชุฎุฒูู ูุงูุฃุฏุงุก ๐๏ธ ๐๐ผ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุฑุจูุน ูุฐุง ุงูุนุงูุ ููุฏ ุณุจู ุจุนุถ ุงูููุงุถูุน ุงูุชูููุฏูุฉุ ูุซู ููุง ููููุฉ ุงูุชุญูู ูู ุณุฑุนุฉ ุงูุฃูุฑุงุต ู ูุง RAID ูู . ูู ุงูุซุงูู ูููุง ุ ูุนุฏูุง ุจููุงุตูุฉ ุฏุฑุงุณุฉ ุฃุฏุงุก ูุฎุชูู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ุฃุณุงุณูุงุช ZFS: ุงูุชุฎุฒูู ูุงูุฃุฏุงุก</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504692/"><img src="https://habrastorage.org/getpro/habr/post_images/abf/883/e96/abf883e96b01dbc78420e0dc1a158460.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฑุจูุน ูุฐุง ุงูุนุงูุ ููุฏ ุณุจู ุจุนุถ ุงูููุงุถูุน ุงูุชูููุฏูุฉุ ูุซู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ููููุฉ ุงูุชุญูู ูู ุณุฑุนุฉ ุงูุฃูุฑุงุต</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง RAID ูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูู ุงูุซุงูู ูููุง ุ ูุนุฏูุง ุจููุงุตูุฉ ุฏุฑุงุณุฉ ุฃุฏุงุก ูุฎุชูู ุงูููุงูู ุงููุชุนุฏุฏุฉ ุงูุฃูุฑุงุต ูู ZFS. </font><font style="vertical-align: inherit;">ูุฐุง ูู ูุธุงู ูููุงุช ุงูุฌูู ุงูุชุงูู ุงูุฐู ูุชู ุชุทุจููู ูู ูู ููุงู: ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apple</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubuntu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุณููุง ุ ุงูููู ูู ุฃูุถู ููู ููุชุนุฑู ุนูู ZFS ุ ุงููุฑุงุก ุงููุถููููู. </font><font style="vertical-align: inherit;">ููุท ูู ุนูู ุนูู ุฃูู ุ ููููุง ูุชูููู ูุญุงูุธ ูู ูุจู ูุทูุฑ OpenZFS Matt Arens ุ "ุงูุฃูุฑ ูุนูุฏ ุญููุง". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุจู ุฃู ูุตู ุฅูู ุงูุฃุฑูุงู - ูุณูู ุฃุนุฏู - ูุฌููุน ุงููุชุบูุฑุงุช vosmidiskovoy ZFS ุงูุชูููู ุ ุชุญุชุงุฌ ุฅูู ุงูุญุฏูุซ ุนู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุงู ุจุชุฎุฒูู ุงูุจูุงูุงุช ZFS ุนูู ุงููุฑุต.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zpool ู vdev ูุงูุฌูุงุฒ</font></font></h1><br>
<img src="https://habrastorage.org/getpro/habr/post_images/674/1c6/ab3/6741c6ab310f4e0edf2adf7e2ca4c6bb.png"><br>
<i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุถูู ูุฐุง ุงูุฑุณู ุงูุชุฎุทูุทู ุงููุงูู ููุชุฌูุน ุซูุงุซุฉ ูููุงุช vdev ูุณุงุนุฏุฉ ุ ูุงุญุฏุฉ ููู ูุฆุฉ ุ ูุฃุฑุจุนุฉ ูู RAIDz2. </font></font></font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b9f/82c/887/b9f82c88748c44d1f86cc412a053bf94.png"><br>
<i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ููุฌุฏ ุนุงุฏุฉ ุณุจุจ ูุฅูุดุงุก ูุฌููุนุฉ ูู ุฃููุงุน ูุฃุญุฌุงู </font></font></font></i><font style="vertical-align: inherit;"><i><font color="gray"><font style="vertical-align: inherit;">vdev </font></font></i><i><font color="gray"><font style="vertical-align: inherit;">ุบูุฑ </font></font></i><i><font color="gray"><font style="vertical-align: inherit;">ุงูููุงุณุจุฉ </font></font></i><i><font color="gray"><font style="vertical-align: inherit;">- ูููู ุฅุฐุง ุฃุฑุฏุช ุ ููุง ุดูุก ูููุนู ูู ุงูููุงู ุจุฐูู.</font></font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูููู ูุธุงู ุงููููุงุช ZFS ุญููุง ุ ุชุญุชุงุฌ ุฅูู ุงููุธุฑ ุจุนูุงูุฉ ูู ูููููุง ุงููุนูู. </font><font style="vertical-align: inherit;">ุฃููุง ุ ูุฌูุน ZFS ุจูู ุงููุณุชููุงุช ุงูุชูููุฏูุฉ ูุฅุฏุงุฑุฉ ุงูุญุฌู ููุธุงู ุงููููุงุช. </font><font style="vertical-align: inherit;">ุซุงูููุง ุ ูุณุชุฎุฏู ุขููุฉ ูุณุฎ ุงููุนุงููุงุช ุนูุฏ ุงููุชุงุจุฉ. </font><font style="vertical-align: inherit;">ุชุนูู ูุฐู ุงูููุฒุงุช ุฃู ุงููุธุงู ูุฎุชูู ุจุดูู ูุจูุฑ ูู ุงููุงุญูุฉ ุงููููููุฉ ุนู ุฃูุธูุฉ ุงููููุงุช ุงูุนุงุฏูุฉ ููุตูููุงุช RAID. </font><font style="vertical-align: inherit;">ุงููุฌููุนุฉ ุงูุฃููู ูู ุงููุจูุงุช ุงูุฃุณุงุณูุฉ ุงูุชู ูุฌุจ ููููุง: ุชุฌูุน ุชุฎุฒูู (zpool) ุ ูุฌูุงุฒ ุงูุชุฑุงุถู (vdev) ุ ูุฌูุงุฒ ุญูููู (ุฌูุงุฒ).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zpool</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุนุชุจุฑ ูุฌููุนุฉ ุชุฎุฒูู zpool ุฃุนูู ุจููุฉ ZFS. ูุญุชูู ูู ุชุฌูุน ุนูู ุฌูุงุฒ ุธุงูุฑู ูุงุญุฏ ุฃู ุฃูุซุฑ. ูู ุงูููุงุจู ุ ูุญุชูู ูู ูุงุญุฏ ูููู ุนูู ุฌูุงุฒ ูุงุญุฏ ุฃู ุฃูุซุฑ (ุฌูุงุฒ) ุญูููู. ุงูุชุฌูุนุงุช ุงูุงูุชุฑุงุถูุฉ ูู ูุชู ูุณุชููุฉ. ูุฏ ูุญุชูู ุฌูุงุฒ ููุจููุชุฑ ูุนูู ุนูู ูุฌููุนุชูู ูููุตูุชูู ุฃู ุฃูุซุฑ ุ ูููู ูู ููููุง ูุณุชูู ุชูุงููุง ุนู ุงูุขุฎุฑูู. ูุง ูููู ููุชุฌูุนุงุช ูุดุงุฑูุฉ ุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชูุฑุงุฑ ูู ZFS ุนูู ูุณุชูู ุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ุ ูููู ููุณ ุนูู ูุณุชูู ุงูุชุฌูุนุงุช. ุนูู ูุณุชูู ุงูุจุฑูุฉ ุ ูุง ููุฌุฏ ุฃู ุชูุฑุงุฑ ุนูู ุงูุฅุทูุงู - ุฅุฐุง ูููุฏ ุฃู ูุญุฑู ุฃูุฑุงุต vdev ุฃู vdev ุฎุงุต ุ ูุณูุชู ููุฏ ุงูุชุฌูุน ุจุฃูููู ูุนู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุฃู ุชุชุญูู ูุฌููุนุงุช ุงูุชุฎุฒูู ุงูุญุฏูุซุฉ ุงููุฌุงุฉ ูู ููุฏุงู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุฃู ุณุฌู ุงูุฌูุงุฒ ุงูุธุงูุฑู - ุนูู ุงูุฑุบู ูู ุฃููุง ูุฏ ุชููุฏ ูููุฉ ุตุบูุฑุฉ ูู ุงูุจูุงูุงุช ุงููุชุณุฎุฉ ุฅุฐุง ููุฏุช ุณุฌู vdev ุฃุซูุงุก ุงููุทุงุน ุงูุชูุงุฑ ุงูููุฑุจุงุฆู ุฃู ุชุนุทู ุงููุธุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ุงุนุชูุงุฏ ุฎุงุทุฆ ุดุงุฆุน ุจุฃู "ูุทุงูุงุช ุงูุจูุงูุงุช" (ุดุฑุงุฆุท) ZFS ูุชู ุชุณุฌูููุง ุนุจุฑ ุงูุชุฌูุน ุจุฃูููู. ูุฐุง ููุณ ุตุญูุญุง. Zpool ููุณ RAID0 ููุชุนูุง ุนูู ุงูุฅุทูุงู ุ ุจู ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JBOD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชุน </font><font style="vertical-align: inherit;">ูุน ุขููุฉ ุชูุฒูุน ูุนูุฏุฉ ูุงุจูุฉ ููุชุบููุฑ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงููุณุจุฉ ููุฌุฒุก ุงูุฃูุจุฑ ุ ูุชู ุชูุฒูุน ุงูุณุฌูุงุช ุจูู ุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ุงููุชุงุญุฉ ููููุง ูููุณุงุญุฉ ุงููุชุงุญุฉ ุ ูุฐูู ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ ุณูุชู ููุคูุง ุฌููุนูุง ูู ููุณ ุงูููุช. ูู ุงูุฅุตุฏุงุฑุงุช ุงููุงุญูุฉ ูู ZFS ุ ูุคุฎุฐ ุงูุงุณุชุฎุฏุงู ุงูุญุงูู (ุงูุงุณุชุฎุฏุงู) ูู vdev ูู ุงูุงุนุชุจุงุฑ - ุฅุฐุง ุชู ุชุญููู ุฌูุงุฒ ุธุงูุฑู ุฃูุซุฑ ุจูุซูุฑ ูู ุงูุฌูุงุฒ ุงูุขุฎุฑ (ุนูู ุณุจูู ุงููุซุงู ุ ุจุณุจุจ ุชุญููู ุงููุฑุงุกุฉ) ุ ูุณูุชู ุชุฎุทูู ูุคูุชูุง ูููุชุงุจุฉ ุ ุนูู ุงูุฑุบู ูู ูุฌูุฏ ุฃุนูู ูุนุงูู ูุณุงุญุฉ ุญุฑุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุขููุฉ ุฅุนุงุฏุฉ ุงูุชุฏููุฑ ุงููุถููุฉ ูู ุทุฑู ุชูุฒูุน ุงูุณุฌูุงุช ZFS ุงูุญุฏูุซุฉ ุฃู ุชููู ูู ุงููููู ูุชุฒูุฏ ุงูุฅูุชุงุฌูุฉ ุฎูุงู ูุชุฑุงุช ุงูุญูู ุงููุฑุชูุน ุจุดูู ุบูุฑ ูุนุชุงุฏ - ูููู ูุฐุง ููุณ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููุถูุง ูุทูููุง</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎูุท ูุญุฑูุงุช ุงูุฃูุฑุงุต ุงูุตูุจุฉ ุงูุจุทูุฆุฉ ููุญุฑูุงุช ุฃูุฑุงุต SSD ุงูุจุทูุฆุฉ ุจุดูู ูุง ุฅุฑุงุฏู ูู ุชุฌูุน ูุงุญุฏ. </font><font style="vertical-align: inherit;">ุณูุธู ูุซู ูุฐุง ุงูุชุฌูุน ุบูุฑ ุงููุชูุงูุฆ ูุนูู ุจุณุฑุนุฉ ุฃุจุทุฃ ุฌูุงุฒ ุ ููุง ูู ูุงู ูุชุฃูู ุจุงููุงูู ูู ูุฐู ุงูุฃุฌูุฒุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vdev</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชููู ูู ุชุฌูุน ุชุฎุฒูู ูู ุฌูุงุฒ ุธุงูุฑู ูุงุญุฏ ุฃู ุฃูุซุฑ (ุฌูุงุฒ ุธุงูุฑู ุ vdev). </font><font style="vertical-align: inherit;">ูู ุงูููุงุจู ุ ูุชุถูู ูู vdev ุฌูุงุฒูุง ุญูููููุง ุฃู ุฃูุซุฑ. </font><font style="vertical-align: inherit;">ูุชู ุงุณุชุฎุฏุงู ูุนุธู ุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ูุชุฎุฒูู ุงูุจูุงูุงุช ุจุณูููุฉ ุ ูููู ููุงู ุงูุนุฏูุฏ ูู ูุฆุงุช vdev ุงููุณุงุนุฏุฉ ุ ุจูุง ูู ุฐูู CACHE ู LOG ู SPECIAL. </font><font style="vertical-align: inherit;">ูููู ุฃู ูููู ููู ููุน ูู ุฃููุงุน vdev ุฃุญุฏ ุฎูุณุฉ ุทุจูููุฌูุง: ุฌูุงุฒ ูุงุญุฏ ุฃู RAIDz1 ุฃู RAIDz2 ุฃู RAIDz3 ุฃู ูุฑุขุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RAIDz1 ู RAIDz2 ู RAIDz3 ูู ุงุฎุชูุงูุงุช ุฎุงุตุฉ ููุง ูุณููู ูุจุงุฑ ุงูุณู ุงูุชูุงูุค ุงููุฒุฏูุฌ (ุงููุทุฑู). ุชุดูุฑ 1 ู 2 ู 3 ุฅูู ุนุฏุฏ ูุชู ุงูุชูุงุซู ุงููุฎุตุตุฉ ููู ูุทุงู ุจูุงูุงุช. ุจุฏูุงู ูู ุงูุฃูุฑุงุต ุงููููุตูุฉ ููุชูุงุซู ุ ุชููู ุฃุฌูุฒุฉ RAIDz ุงูุงูุชุฑุงุถูุฉ ุจุชูุฒูุน ูุฐุง ุงูุชูุงุซู ุจุงูุชุณุงูู ุนุจุฑ ุงูุฃูุฑุงุต. ูููู ุฃู ุชููุฏ ุตููู RAIDz ุงูุนุฏูุฏ ูู ุงูุฃูุฑุงุต ููุง ูุชู ุงูุชูุงุซูุ ุฅุฐุง ููุฏ ูุงุญุฏูุง ุขุฎุฑ ุ ูุณูู ููุดู ููุฃุฎุฐ ูุนู ุญูุถ ุงูุชุฎุฒูู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ุงููุชุทุงุจูุฉ (vdev) ุ ูุชู ุชุฎุฒูู ูู ูุชูุฉ ุนูู ูู ุฌูุงุฒ ูู vdev. ุนูู ุงูุฑุบู ูู ุฃู ุงููุฑุงูุง ุงูุฃูุซุฑ ุดููุนูุง ุฐุงุช ุงูุนุฑุถูู ุ ูููู ุฃู ูููู ููุงู ุฃู ุนุฏุฏ ุนุดูุงุฆู ูู ุงูุฃุฌูุฒุฉ ูู ุงููุฑุขุฉ - ูู ุงูุชุฑููุจุงุช ุงููุจูุฑุฉ ุ ุบุงูุจูุง ูุง ุชุณุชุฎุฏู ุงูุฃุฌูุฒุฉ ุงูุซูุงุซูุฉ ูุฒูุงุฏุฉ ุฃุฏุงุก ุงููุฑุงุกุฉ ูุงูุชุณุงูุญ ูุน ุงูุฎุทุฃ. ูููู ุฃู ุชูุฌู ูุฑุขุฉ vdev ูู ุฃู ูุดู ุจูููุง ูุณุชูุฑ ุฌูุงุฒ ูุงุญุฏ ุนูู ุงูุฃูู ูู vdev ูู ุงูุนูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vdevs ูุงุญุฏุฉ ุฎุทูุฑุฉ ุจุทุจูุนุชูุง. ูู ููุฌู ูุซู ูุฐุง ุงูุฌูุงุฒ ุงูุงูุชุฑุงุถู ูู ูุดู ูุงุญุฏ - ูุฅุฐุง ุชู ุงุณุชุฎุฏุงูู ููุฎุฒู ุฃู vdev ุฎุงุต ุ ูุฅู ูุดูู ุณูุคุฏู ุฅูู ุชุฏููุฑ ุงููุฌููุนุฉ ุจุฃููููุง. ูู ุญุฐุฑุง ุฌุฏุง ููุง.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุฅูุดุงุก ุฃุฌูุฒุฉ CACHE ู LOG ูุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ุงูุฎุงุตุฉ ุจุงุณุชุฎุฏุงู ุฃู ูู ุงูููุงูู ุงููุฐููุฑุฉ ุฃุนูุงู - ูููู ุชุฐูุฑ ุฃู ููุฏุงู ุฌูุงุฒ ุงูุชุฑุงุถู ุฎุงุต ูุนูู ููุฏุงู ุงูุชุฌูุน ุ ูุฐูู ููุตู ุจุดุฏุฉ ุจุงูุทุจูููุฌูุง ุงูููุฑุทุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌูุงุฒ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุญุชูู ุฃู ูููู ูุฐุง ูู ุงููุตุทูุญ ุงูุฃุณูู ููููู ูู ZFS - ููู ุญุฑููุงู ุฌูุงุฒ ูุตูู ุนุดูุงุฆู ุนุดูุงุฆู. ุชุฐูุฑ ุฃู ุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ุชุชููู ูู ุฃุฌูุฒุฉ ูุฑุฏูุฉ ุ ูุชุชููู ุงููุฌููุนุฉ ูู ุฃุฌูุฒุฉ ุงูุชุฑุงุถูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฃูุฑุงุต - ุงูููุบูุทุฉ ุฃู ุงูุญุงูุฉ ุงูุตูุจุฉ - ูู ุฃุฌูุฒุฉ ุงูุญุธุฑ ุงูุฃูุซุฑ ุดููุนูุง ุงูุชู ูุชู ุงุณุชุฎุฏุงููุง ููุชู ุจูุงุก vdev. ููุน ุฐูู ุ ูุฅู ุฃู ุฌูุงุฒ ูุฒูุฏ ุจููุจุถ / dev ููุงุณุจ - ุจุญูุซ ููููู ุงุณุชุฎุฏุงู ุตูุงุฆู RAID ููุฃุฌูุฒุฉ ุจุงููุงูู ูุฃุฌูุฒุฉ ูููุตูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนุฏ ููู raw ุงูุจุณูุท ุฃุญุฏ ุฃูู ุฃุฌูุฒุฉ ุงููุชูุฉ ุงูุจุฏููุฉ ุงูุชู ูููู ุฅูุดุงุก vdev ูููุง. ุงุฎุชุจุงุฑ ุชุฌูุนุงุช ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุงุช ูุชูุฑูุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;- ุทุฑููุฉ ููุงุฆูุฉ ููุบุงูุฉ ููุชุญูู ูู ุฃูุงูุฑ ุงูุชุฌูุน ููุนุฑูุฉ ููุฏุงุฑ ุงููุณุงุญุฉ ุงููุชููุฑุฉ ูู ุงูุชุฌูุน ุฃู ุงูุฌูุงุฒ ุงูุธุงูุฑู ูู ูุฐุง ุงููููู. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/5cf/aa5/62c/5cfaa562cb208b654af113f7535b8f57.png"><br>
<i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุฅูุดุงุก ูุฌููุนุฉ ุงุฎุชุจุงุฑ ูู ุงููููุงุช ุงููุชูุฑูุฉ ูู ุจุถุน ุซูุงูู ููุท - ูููู ูุง ุชูุณ ุญุฐู ุงูุชุฌูุน ุจุฃูููู ูููููุงุชู ูุงุญููุง.</font></font></font></i> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูููุชุฑุถ ุฃูู ุชุฑูุฏ ูุถุน ุฎุงุฏู ุนูู ุซูุงููุฉ ุฃูุฑุงุต ูุชุฎุทุท ูุงุณุชุฎุฏุงู 10 ุฃูุฑุงุต TB (~ 9300 ุบูุบุงุจุงูุช) - ููููู ูุณุช ูุชุฃูุฏูุง ูู ุทูุจูููุฌูุง ููุงุณุจ ุงุญุชูุงุฌุงุชู. ูู ุงููุซุงู ุฃุนูุงู ุ ูู ุบุถูู ุซูุงูู ุ ูุจูู ูุฌููุนุฉ ุงุฎุชุจุงุฑ ูู ูููุงุช ูุชูุฑูุฉ - ูุงูุขู ูุนูู ุฃู RAIDz2 vdev ูู ุซูุงููุฉ ูุญุฑูุงุช ุฃูุฑุงุต ุณุนุฉ 10 ุชูุฑุงุจุงูุช ุชููุฑ ุณุนุฉ 50 ุชูุฑุงุจุงูุช ูููุฏุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฆุฉ ุฎุงุตุฉ ุฃุฎุฑู ูู ุงูุฃุฌูุฒุฉ ูู SPARE (ุงุญุชูุงุทู). ุงูุฃุฌูุฒุฉ ุงููุงุจูุฉ ููุชุจุฏูู ุงูุณุฑูุน ุ ุนูู ุนูุณ ุงูุฃุฌูุฒุฉ ุงูุชูููุฏูุฉ ุ ุชูุชูู ุฅูู ุงููุฌููุนุฉ ุจุฃููููุง ุ ูููุณ ุฌูุงุฒูุง ุงูุชุฑุงุถููุง ูุงุญุฏูุง ููุท. ุฅุฐุง ูุดู ุจุนุถ vdev ูู ุงูุชุฌูุน ุ ููุงู ุงูุฌูุงุฒ ุงูุงุญุชูุงุทู ูุชุตูุงู ุจุงููุฌูุน ููุชุงุญูุง ุ ูุณูู ููุถู ุชููุงุฆููุง ุฅูู vdev ุงููุชุฃุซุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุงูุงุชุตุงู ุจู vdev ุงููุชุฃุซุฑ ุ ูุจุฏุฃ ุงูุฌูุงุฒ ุงูุงุญุชูุงุทู ูู ุชููู ูุณุฎ ุฃู ุฅุนุงุฏุฉ ุจูุงุก ุงูุจูุงูุงุช ุงูุชู ูุฌุจ ุฃู ุชููู ุนูู ุงูุฌูุงุฒ ุงูููููุฏ. ูู RAID ุงูุชูููุฏู ุ ูุณูู ูุฐุง ุฅุนุงุฏุฉ ุงูุจูุงุก ุ ุจูููุง ูู ZFS ูุทูู ุนููู "resilvering".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููู ููุงุญุธุฉ ุฃู ุงูุฃุฌูุฒุฉ ุงูุจุฏููุฉ ูุง ุชุญู ูุญู ุงูุฃุฌูุฒุฉ ุงููุงุดูุฉ ุจุดูู ุฏุงุฆู. </font><font style="vertical-align: inherit;">ูุฐุง ูุฌุฑุฏ ุจุฏูู ูุคูุช ูุชูููู ุงูููุช ุงูุฐู ููุงุญุธ ุฎูุงูู ุชุฏููุฑ vdev. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฃู ูุงู ุงููุณุคูู ุจุงุณุชุจุฏุงู ุฌูุงุฒ vdev ุงููุงุดู ุ ุชุชู ุงุณุชุนุงุฏุฉ ุงูุชูุฑุงุฑ ุฅูู ูุฐุง ุงูุฌูุงุฒ ุงูุฏุงุฆู ุ ูููุตู SPARE ูู vdev ููุนูุฏ ุฅูู ุงูุนูู ูุงุญุชูุงุทู ููุฌููุนุฉ ูุงููุฉ.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌููุนุงุช ุงูุจูุงูุงุช ูุงููุชู ูุงููุทุงุนุงุช</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุฌููุนุฉ ุงูุชุงููุฉ ูู ุงููุจูุงุช ุงูุชู ุชุญุชุงุฌ ุฅูู ููููุง ูู ุฑุญูุชูุง ุนุจุฑ ZFS ููุณุช ุงููุซูุฑ ูู ุงูุฃุฌูุฒุฉ ุ ูููู ููู ูุชู ุชูุธูู ุงูุจูุงูุงุช ูุชุฎุฒูููุง. </font><font style="vertical-align: inherit;">ูุชุฎุทู ุนุฏุฉ ูุณุชููุงุช ููุง - ูุซู metaslab - ุญุชู ูุง ุชุชุฑุงูู ุงูุชูุงุตูู ูุน ุงูุญูุงุธ ุนูู ููู ุงููููู ุงูุนุงู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌููุนุฉ ุงูุจูุงูุงุช</font></font></h3><br>
<img src="https://habrastorage.org/getpro/habr/post_images/bd3/c48/d9d/bd3c48d9dff6e0f493a5d90d1dca6d1d.png"><br>
<i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ููุดุฆ ูุฌููุนุฉ ุจูุงูุงุช ูุฃูู ูุฑุฉ ุ ูุฅููุง ุชุนุฑุถ ูู ูุณุงุญุฉ ุงูุชุฌูุน ุงููุชุงุญุฉ. ุซู ูุญุฏุฏ ุงูุญุตุฉ ููุบูุฑ ููุทุฉ ุงูุชุญููู. ุณุญุฑ! </font></font></font></i> <br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a18/3de/210/a183de210cdc57cd1421652201cbf2c3.png"><br>
<i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุฏ Zvol ูู ุงูุบุงูุจ ูุฌุฑุฏ ูุฌููุนุฉ ุจูุงูุงุช ุ ุฎุงููุฉ ูู ุทุจูุฉ ูุธุงู ุงููููุงุช ุงูุฎุงุตุฉ ุจูุง ุ ูุงูุชู ูุณุชุจุฏููุง ููุง</font></font></font></i> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุจูุธุงู ูููุงุช</font><i><font color="gray"><font style="vertical-align: inherit;"> ext4 ุนุงุฏู ุชูุงููุง</font></font></i><font style="vertical-align: inherit;"> . ูุฌููุนุฉ ุจูุงูุงุช ZFS ูู ุชูุฑูุจูุง ููุณ ูุธุงู ุงููููุงุช ุงูููุงุณู ุงููุซุจุช. ูุซู ูุธุงู ุงููููุงุช ุงูุนุงุฏู ุ ูุจุฏู ูููููุฉ ุงูุฃููู ุฃูู "ูุฌุฑุฏ ูุฌูุฏ ุขุฎุฑ". ูููู ุฃูุถูุง ุ ูุซู ุฃูุธูุฉ ุงููููุงุช ุงูุชูููุฏูุฉ ุงููุฑูุจุฉ ุ ุชุญุชูู ูู ูุฌููุนุฉ ุจูุงูุงุช ZFS ุนูู ูุฌููุนุฉ ุฎุงุตุฉ ุจูุง ูู ุงูุฎุตุงุฆุต ุงูุฃุณุงุณูุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุฏ ูููู ููุฌููุนุฉ ุงูุจูุงูุงุช ุญุตุฉ ูุฎุตุตุฉ. ุฅุฐุง ุชู ุงูุชุซุจูุช</font></font><code>zfs set quota=100G poolname/datasetname</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุง ููููู ุงููุชุงุจุฉ ุฅูู ุงููุฌูุฏ ุงููุญููู</font></font><code>/poolname/datasetname</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุซุฑ ูู 100 ุบูุบุงุจุงูุช.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุชูุงุญุธ ูุฌูุฏ - ูุบูุงุจ - ุฎุทูุท ูุงุฆูุฉ ูู ุจุฏุงูุฉ ูู ุณุทุฑุ ูู ูุฌููุนุฉ ุจูุงูุงุช ููุง ููุงููุง ุงูุฎุงุต ูู ุงูุชุณูุณู ุงููุฑูู ZFS ููู ุงูุชุณูุณู ุงููุฑูู ูุชุฑููุจ ุงููุธุงู. ูุง ููุฌุฏ ุฎุท ูุงุฆู ุฃููู ูู ุงูุชุณูุณู ุงููุฑูู ูู ZFS - ุชุจุฏุฃ ุจุงุณู ุงูุชุฌูุน ุ ุซู ุงููุณุงุฑ ูู ูุฌููุนุฉ ุจูุงูุงุช ุฅูู ุงููุฌููุนุฉ ุงูุชุงููุฉ. ุนูู ุณุจูู ุงููุซุงู ุ </font></font><code>pool/parent/child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ููุฌููุนุฉ ุจูุงูุงุช ูุณูุงุฉ </font></font><code>child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุถูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฑุฆูุณูุฉ </font></font><code>parent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุชุฌูุน ุจุงุณู ุฅุจุฏุงุนู </font></font><code>pool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชุฑุงุถูุงุ ุฌุจู ูููุทุฉ ูุฌููุนุฉ ุงูุจูุงูุงุช ูุนุงุฏูุง ูุงุณููุง ูู ุงูุชุณูุณู ุงููุฑูู ZFSุ ุจุฎุท ูุงุฆู ูู ุงูุจุฏุงูุฉ - ูุงูุชุฌูุน ูุน ุงุณู </font></font><code>pool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดูุช ููุง </font></font><code>/pool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุฌููุนุฉ ุงูุจูุงูุงุช </font></font><code>parent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชู ุดูุช ูู </font></font><code>/pool/parent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุทูู </font><font style="vertical-align: inherit;">ูุฌููุนุฉ ุงูุจูุงูุงุช </font><font style="vertical-align: inherit;">ูู ุงูุชู ุดูุช </font></font><code>child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>/pool/parent/child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ููุน ุฐูู ุ ูููู ุชุบููุฑ ููุทุฉ ุชุญููู ุงููุธุงู ููุฌููุนุฉ ุงูุจูุงูุงุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ุฃุดุฑูุง</font></font><code>zfs set mountpoint=/lol pool/parent/child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุซู ูุชู </font></font><code>pool/parent/child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑููุจ </font><font style="vertical-align: inherit;">ูุฌููุนุฉ ุงูุจูุงูุงุช </font><font style="vertical-align: inherit;">ูู ุงููุธุงู ุจุงุณู </font></font><code>/lol</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ูุฌููุนุงุช ุงูุจูุงูุงุช ุ ูุฌุจ ุฃู ูุฐูุฑ ุงููุฌูุฏุงุช (zvols). </font><font style="vertical-align: inherit;">ุชุดุจู ูุญุฏุฉ ุงูุชุฎุฒูู ุชูุฑูุจูุง ูุฌููุนุฉ ุงูุจูุงูุงุช ุ ุจุงุณุชุซูุงุก ุฃููุง ูู ุงููุงูุน ูุง ุชุญุชูู ุนูู ูุธุงู ูููุงุช - ููู ูุฌุฑุฏ ุฌูุงุฒ ูุชูุฉ. </font><font style="vertical-align: inherit;">ููููู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅูุดุงุก </font></font><code>zvol</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณู </font></font><code>mypool/myzvol</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุซู ุชูุณููู ุจุงุณุชุฎุฏุงู ูุธุงู ุงููููุงุช ext4 ุ ุซู ุชุญููู ูุธุงู ุงููููุงุช ูุฐุง - ุงูุขู ูุฏูู ูุธุงู ุงููููุงุช ext4 ุ ูููู ูุน ุฏุนู ุฌููุน ููุฒุงุช ุงูุฃูุงู ZFS! </font><font style="vertical-align: inherit;">ูุฏ ูุจุฏู ูุฐุง ุณุฎูููุง ุนูู ุฌูุงุฒ ููุจููุชุฑ ูุงุญุฏ ุ ูููู ูู ุงูููุทูู ุฃูุซุฑ ุฃูู ุงููุงุฌูุฉ ุงูุฎูููุฉ ุนูุฏ ุชุตุฏูุฑ ุฌูุงุฒ iSCSI.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู</font></font></h3><br>
<img src="https://habrastorage.org/getpro/habr/post_images/74b/4dd/d00/74b4ddd009e67db1b1b6c4467bcf6fa3.png"><br>
<i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุซู ุงูููู ูุชูุฉ ูุงุญุฏุฉ ุฃู ุฃูุซุฑ. ูุชู ุชุฎุฒูู ูู ูุชูุฉ ุนูู ุฌูุงุฒ ุงูุชุฑุงุถู ูุงุญุฏ. ุนุงุฏุฉ ูุง ูููู ุญุฌู ุงููุชูุฉ ูุณุงููุงู ููุนููุฉ ุชุณุฌูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุฌู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููู ูููู ุชููููู ุฅูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 ^ ashift</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฐุง ูุงู ูุญุชูู ุนูู ุจูุงูุงุช ุชุนุฑูู ุฃู ููู ุตุบูุฑ. </font></font></font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/8d1/7fd/ad2/8d17fdad2eda641c801e5e6a302f6e38.png"><br>
<i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ุญูุงุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูุง ูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ููุฒุญ ุญูู ุงูุถุฑุฑ ุฃุฏุงุก ูุจูุฑ ุฅุฐุง ููุช ุจุชุซุจูุช ashift ุตุบูุฑุฉ ุฌุฏุง</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูู ZFS ุชุฌููุนุ ูุชู ุชุฎุฒูู ูุงูุฉ ุงูุจูุงูุงุชุ ุจูุง ูู ุฐูู ุงูุชุนุฑููุ ูู ูุชู. ูุชู ุชุญุฏูุฏ ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงููุชูุฉ ููู ูุฌููุนุฉ ุจูุงูุงุช ูู ุงูุฎุงุตูุฉ</font></font><code>recordsize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุญุฌู ุงูุณุฌู). ูุฏ ูุฎุชูู ุญุฌู ุงูุณุฌู ุ ูููู ูุฐุง ูู ูุบูุฑ ุญุฌู ุฃู ูููุน ุฃู ูุชู ุชู ูุชุงุจุชูุง ุจุงููุนู ุฅูู ูุฌููุนุฉ ุงูุจูุงูุงุช - ููู ุตุงูุญ ููุท ูููุชู ุงูุฌุฏูุฏุฉ ุฃุซูุงุก ูุชุงุจุชูุง.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ูู ูุฐูุฑ ุฎูุงู ุฐูู ุ ูููู ุญุฌู ุงูุชุณุฌูู ุงูุญุงูู ูู 128 ููููุจุงูุช ุงูุชุฑุงุถููุง. ูุฐุง ููุน ูู ุงูุญููู ุงููุณุท ุงูุตุนุจุฉ ุงูุชู ูู ูููู ุงูุฃุฏุงุก ูููุง ูุซุงูููุง ุ ูููู ููุณ ุฑููุจูุง ูู ูุนุธู ุงูุญุงูุงุช. </font></font><code>Recordsize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุชุนูููู ุนูู ุฃู ูููุฉ ูู 4K ุฅูู 1M (ูุน ุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ </font></font><code>recordsize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุชุนููู ุงููุฒูุฏ ุ ูููู ูุงุฏุฑูุง ูุง ุชููู ูุฐู ููุฑุฉ ุฌูุฏุฉ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุดูุฑ ุฃู ูุชูุฉ ุฅูู ุจูุงูุงุช ููู ูุงุญุฏ ููุท - ูุง ููููู ุถุบุท ููููู ูุฎุชูููู ูู ูุชูุฉ ูุงุญุฏุฉ. ูุชููู ูู ููู ูู ูุชูุฉ ูุงุญุฏุฉ ุฃู ุฃูุซุฑ ุ ุญุณุจ ุงูุญุฌู. ุฅุฐุง ูุงู ุญุฌู ุงูููู ุฃุตุบุฑ ูู ุญุฌู ุงูุณุฌู ุ ูุณูุชู ุญูุธู ูู ูุชูุฉ ุฃุตุบุฑ - ุนูู ุณุจูู ุงููุซุงู ุ ุณุชุดุบู ูุชูุฉ ุชุญุชูู ุนูู ููู 2 KiB ููุทุนูุง ูุงุญุฏูุง ููุท ูู KiB ุนูู ุงููุฑุต. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูุงู ุงูููู ูุจูุฑูุง ุจูุง ูููู ููุชุทูุจ ุนุฏุฉ ูุชู ุ ูุณูููู ุญุฌู ุฌููุน ุงูุณุฌูุงุช ุงูุชู ุชุญุชูู ุนูู ูุฐุง ุงูููู</font></font><code>recordsize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;- ุจูุง ูู ุฐูู ุงูุณุฌู ุงูุฃุฎูุฑ ุ ุงูุฐู ูุฏ ูุชุญูู ุงูุฌุฒุก ุงูุฑุฆูุณู ููู ุฅูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุงุญุฉ ุบูุฑ ูุณุชุฎุฏูุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุชุญุชูู ูุฌูุฏุงุช Zvol ุนูู ุฎุงุตูุฉ </font></font><code>recordsize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;- ุจุฏูุงู ูู ุฐูู ููุง ุฎุงุตูุฉ ููุงูุฆุฉ </font></font><code>volblocksize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุทุงุนุงุช</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุทุงุน ุงูุฃุฎูุฑ ูู ูุจูุฉ ุงูุจูุงุก ุงูุฃุณุงุณูุฉ. ูุฐู ุฃุตุบุฑ ูุญุฏุฉ ูุงุฏูุฉ ูููู ูุชุงุจุชูุง ุฃู ูุฑุงุกุชูุง ูู ุงููุญุฏุฉ ุงูุฃุณุงุณูุฉ. ูุนุฏุฉ ุนููุฏ ุ ุงุณุชุฎุฏูุช ูุนุธู ุงูุฃูุฑุงุต ูุทุงุนุงุช 512 ุจุงูุช. ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ ุ ุชู ุชูููู ูุนุธู ูุญุฑูุงุช ุงูุฃูุฑุงุต ููุทุงุนุงุช 4 KiB ุ ููู ุจุนุถ - ุฎุงุตุฉ SSDs - 8 ูุทุงุนุงุช KiB ุฃู ุฃูุซุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ZFS ูุฏูู ุฎุงุตูุฉ ุชุณูุญ ูู ุจุชุนููู ุญุฌู ุงููุทุงุน ูุฏูููุง. ูุฐู ููููุฉ </font></font><code>ashift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูู ุงููุฑุจู ุฅูู ุญุฏ ูุง ุฃู ุงูุฑูุงุฏ ููุฉ ูู ุงุซููู. ุนูู ุณุจูู ุงููุซุงู ุ ูุฐุง </font></font><code>ashift=9</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูู ุญุฌู ูุทุงุน 2 ^ 9 ุฃู 512 ุจุงูุช.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุทูุจ ZFS ูุธุงู ุงูุชุดุบูู ููุญุตูู ุนูู ูุนูููุงุช ุชูุตูููุฉ ุญูู ูู ุฌูุงุฒ ูุชูุฉ ุนูุฏ ุฅุถุงูุชู ุฅูู vdev ุงูุฌุฏูุฏ ุ ููููู ุชููุงุฆููุง ูุธุฑููุง ุจุชุนููู ashift ุจุดูู ุตุญูุญ ุจูุงุกู ุนูู ูุฐู ุงููุนูููุงุช. ูุณูุก ุงูุญุธ ุ ุชููู ุงูุนุฏูุฏ ูู ุงูุฃูุฑุงุต ุญูู ุญุฌู ูุทุงุนูุง ูู ุฃุฌู ุงูุญูุงุธ ุนูู ุงูุชูุงูู ูุน Windows XP (ุงูุฐู ูุงู ุบูุฑ ูุงุฏุฑ ุนูู ููู ุงูุฃูุฑุงุต ุฐุงุช ุฃุญุฌุงู ุงููุทุงุนุงุช ุงูุฃุฎุฑู). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูุนูู ุฃู ูุณุคูู ZFS ููุตุญ ุจุดุฏุฉ ุจูุนุฑูุฉ ุญุฌู ุงููุทุงุน ุงููุนูู ูุฃุฌูุฒุชูู ูุชุซุจูุชู ูุฏูููุง</font></font><code>ashift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุฅุฐุง ุชู ุชุนููู ุงูุฑูุงุฏ ุตุบูุฑ ุฌุฏูุง ุ ูุณูุฒุฏุงุฏ ุนุฏุฏ ุนูููุงุช ุงููุฑุงุกุฉ / ุงููุชุงุจุฉ ุจุดูู ูููู. ูุฐุง ุ ูุฅู ูุชุงุจุฉ "ูุทุงุนุงุช" 512 ุจุงูุช ุฅูู ูุทุงุน 4 KiB ุงูุญูููู ูุนูู ูุชุงุจุฉ "ุงููุทุงุน" ุงูุฃูู ุ ุซู ูุฑุงุกุฉ ูุทุงุน 4 KiB ุ ูุชุบููุฑู ูุน "ูุทุงุน" 512 ุจุงูุช ุงูุซุงูู ุ ูุฅุนุงุฏุฉ ูุชุงุจุชู ุฅูู ูุทุงุน 4 KiB ุงูุฌุฏูุฏ ุ ูููุฐุง ููู ุฏุฎูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุนุงูู ุงูุญูููู ุ ุชุชููู ูุซู ูุฐู ุงูุนููุจุฉ ุนูู ุฃุฌูุฒุฉ Samsung EVO </font></font><code>ashift=13</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSDs </font><font style="vertical-align: inherit;">ุ ุงูุชู ูุฌุจ ุฃู ุชุนูู ูู ุฃุฌููุง </font><font style="vertical-align: inherit;">ุ ูููู ูุฐู ุงูุฃูุฑุงุต ุงูุตูุจุฉ ุชููู ุญูู ุญุฌู ูุทุงุนูุง ุ ูุจุงูุชุงูู ูุชู ุชุนููููุง ุงูุชุฑุงุถููุง </font></font><code>ashift=9</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุฅุฐุง ูู ูุบูุฑ ูุณุคูู ุงููุธุงู ุงููุชูุฑุณ ูุฐุง ุงูุฅุนุฏุงุฏ ุ ูุฅู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฑู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃูุฑุงุต </font><font style="vertical-align: inherit;">SSD ูุฐุง </font><i><font style="vertical-align: inherit;">ุฃุจุทุฃ ูู ูุญุฑู</font></i><font style="vertical-align: inherit;"> ุงูุฃูุฑุงุต ุงูุซุงุจุชุฉ ุงููุบูุงุทูุณู ุงูุนุงุฏู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููุงุฑูุฉ ุ ูุญุฌู ูุจูุฑ ุฌุฏุง</font></font><code>ashift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชูุฌุฏ ุนููุจุฉ ุชูุฑูุจุง. </font><font style="vertical-align: inherit;">ูุง ููุฌุฏ ุงูุฎูุงุถ ุญูููู ูู ุงูุฅูุชุงุฌูุฉ ุ ูุชููู ุงูุฒูุงุฏุฉ ูู ุงููุณุงุญุฉ ุบูุฑ ุงููุณุชุฎุฏูุฉ ุตุบูุฑุฉ ุจุดูู ูุง ููุงุฆู (ุฃู ุชุณุงูู ุงูุตูุฑ ูุน ุชูููู ุงูุถุบุท). </font><font style="vertical-align: inherit;">ูุฐูู ุ ููุตู ุจุดุฏุฉ ุฃู ูุชู ุชุซุจูุช ุญุชู ูุญุฑูุงุช ุงูุฃูุฑุงุต ุงูุชู ุชุณุชุฎุฏู ูุทุงุนุงุช 512 ุจุงูุช ุจุงููุนู </font></font><code>ashift=12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู ุญุชู </font></font><code>ashift=13</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุธุฑ ุจุซูุฉ ูู ุงููุณุชูุจู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชู </font></font><code>ashift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนููู </font><font style="vertical-align: inherit;">ุงูุฎุงุตูุฉ </font><font style="vertical-align: inherit;">ููู ุฌูุงุฒ ุงูุชุฑุงุถู vdev ุ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุณ ููุชุฌูุน</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููุง ูุนุชูุฏ ุงููุซูุฑูู ุนู ุทุฑูู ุงูุฎุทุฃ - ููุง ุชุชุบูุฑ ุจุนุฏ ุงูุชุซุจูุช. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุจุทุฑูู ุงูุฎุทุฃ ุนู ุทุฑูู ุงูุฎุทุฃ </font></font><code>ashift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุฅุถุงูุฉ vdev ุฌุฏูุฏ ุฅูู ุงูุชุฌูุน ุ ูุฃูุช ุชููุซ ูุฐุง ุงูุชุฌูุน ุจุดูู ูุง ุฑุฌุนุฉ ููู ุจุฌูุงุฒ ููุฎูุถ ุงูุฃุฏุงุก ุ ูููุงุนุฏุฉ ุนุงูุฉ ุ ูุง ุชูุฌุฏ ุทุฑููุฉ ุฃุฎุฑู ุณูู ุชุฏููุฑ ุงููุณุจุญ ูุงูุจุฏุก ูู ุฌุฏูุฏ. </font><font style="vertical-align: inherit;">ุญุชู ุฅุฒุงูุฉ vdev ูู ูุฎูุตู ูู ุงูุฅุนุฏุงุฏ ุงููุนุทู</font></font><code>ashift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">!</font></font><br>
<br>
<h3>   </h3><br>
<img src="https://habrastorage.org/getpro/habr/post_images/38b/a1e/4a8/38ba1e4a8fa0e255081ed8db259a302f.gif"><br>
<i><font color="gray">      &nbsp;โ     ,   </font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/90d/4cb/a35/90d4cba35ffa5a3e44a7ca5f61d4491b.gif"><br>
<i><font color="gray">         ,     </font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c8b/2af/ffb/c8b2afffbc46f63f6a7fe1167edf5dcb.gif"><br>
<i><font color="gray">  ,      ,   ยซ ยป   ยซ ยป,        </font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/4c1/e2b/818/4c1e2b818077cb07d651527e214363fe.gif"><br>
<i><font color="gray">     ,       โ      ,     ,       </font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุณุฎ ุนูู ุงููุชุงุจุฉ (CoW) ูู ุงูุฃุณุงุณ ุงูุฃุณุงุณู ููุง ูุฌุนู ZFS ุฑุงุฆุนูุง ุฌุฏูุง. ุงูููููู ุงูุฃุณุงุณู ุจุณูุท - ุฅุฐุง ุทูุจุช ูู ูุธุงู ุงููููุงุช ุงูุชูููุฏู ุชุนุฏูู ุงูููู ุ ูุณูููู ุจุงูุถุจุท ุจูุง ุทูุจุชู. ุฅุฐุง ุทูุจุช ูู ูุธุงู ุงููููุงุช ูุน ุงููุณุฎ ุฃุซูุงุก ุงูุชุณุฌูู ุฃู ููุนู ุงูุดูุก ููุณู ุ ูุณูู ูููู "ุฌูุฏ" - ูููู ุณููุฐุจ ุนููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุฏูุงู ูู ุฐูู ุ ููุชุจ ูุธุงู ูููุงุช ุงููุณุฎ ูุงููุชุงุจุฉ ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ ูู ุงููุชูุฉ ุงููุนุฏูุฉ ุ ุซู ูููู ุจุชุญุฏูุซ ุจูุงูุงุช ุชุนุฑูู ุงูููู ููุณุฑ ุงูุงุฑุชุจุงุท ูุน ุงููุชูุฉ ุงููุฏููุฉ ูุฑุจุท ุงููุชูุฉ ุงูุฌุฏูุฏุฉ ุงูุชู ูุชุจุชูุง ููุชู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ูุตู ุงููุญุฏุฉ ุงููุฏููุฉ ูุฑุจุท ุงููุญุฏุฉ ุงูุฌุฏูุฏุฉ ูู ุนูููุฉ ูุงุญุฏุฉ ุ ูุฐูู ูุง ูููู ููุงุทุนุชูุง - ุฅุฐุง ููุช ุจุฅุนุงุฏุฉ ุชุนููู ุงูุทุงูุฉ ุจุนุฏ ุญุฏูุซ ุฐูู ุ ููุฏูู ุฅุตุฏุงุฑ ุฌุฏูุฏ ูู ุงูููู ุ ูุฅุฐุง ููุช ุจุฅุนุงุฏุฉ ุชุนููู ุงูุทุงูุฉ ูู ููุช ุณุงุจู ุ ููุฏูู ุงูุฅุตุฏุงุฑ ุงููุฏูู. </font><font style="vertical-align: inherit;">ุนูู ุฃู ุญุงู ุ ูู ูููู ููุงู ุชุนุงุฑุถ ูู ูุธุงู ุงููููุงุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุงููุณุฎ ุนูุฏ ุงููุชุงุจุฉ ุฅูู ZFS ููุณ ููุท ุนูู ูุณุชูู ูุธุงู ุงููููุงุช ุ ูููู ุฃูุถูุง ุนูู ูุณุชูู ุฅุฏุงุฑุฉ ุงููุฑุต. </font><font style="vertical-align: inherit;">ููุฐุง ูุนูู ุฃู ZFS ูุง ูุฎุถุน ููุณุงุญุฉ ูู ุงูุณุฌู ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซูุจ ูู RAID</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) - ููู ุธุงูุฑุฉ ุชููู ูููุง ุงูุดุฑูุท ูู ุงูุชุณุฌูู ุฌุฒุฆููุง ููุท ูุจู ุชุนุทู ุงููุธุงู ุ ูุน ุชูู ุงูุตููู ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู. </font><font style="vertical-align: inherit;">ููุง ุงูุดุฑูุท ุฐุฑู ุ vdev ุซุงุจุช ุฏุงุฆููุง ุ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจูุจ ูู ุนูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZIL: ZFS Intent Log</font></font></h3><br>
<img src="https://habrastorage.org/getpro/habr/post_images/567/71c/73f/56771c73f9a28ebaed161e02313deadb.png"><br>
<i><font color="gray"> ZFS     &nbsp;โ  ,      ZIL,            </font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/cec/7c5/437/cec7c5437087f6816f9cdea5f6829820.png"><br>
<i><font color="gray"> ,   ZIL,    .      </font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/075/65a/d6b/07565ad6b2f431db3e6bc20cd24a653b.png"><br>
<i><font color="gray">SLOG,   LOG-, โ   &nbsp;โ , ,  &nbsp;โ&nbsp;vdev,  ZIL      </font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/927/0f7/539/9270f7539b759aa37896d41e04c4ec47.png"><br>
<i><font color="gray">      ZIL &nbsp;โ    ZIL   SLOG,      </font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ูุฆุชุงู ุฑุฆูุณูุชุงู ูู ุนูููุงุช ุงููุชุงุจุฉ - ูุชุฒุงูู (ูุชุฒุงูู) ูุบูุฑ ูุชุฒุงูู (ุบูุฑ ูุชุฒุงูู). ุจุงููุณุจุฉ ููุนุธู ุฃุนุจุงุก ุงูุนูู ุ ูุฅู ุงูุบุงูุจูุฉ ุงูุนุธูู ูู ุนูููุงุช ุงููุชุงุจุฉ ุบูุฑ ูุชุฒุงููุฉ - ูุณูุญ ูู ูุธุงู ุงููููุงุช ุจุชุฌููุนูุง ูุชุณููููุง ุนูู ุฏูุนุงุช ุ ููุง ูููู ูู ุงูุชุฌุฒุฆุฉ ูุฒูุงุฏุฉ ุงูุฅูุชุงุฌูุฉ ุจุดูู ูุจูุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชุณุฌููุงุช ุงููุชุฒุงููุฉ ูู ูุณุฃูุฉ ูุฎุชููุฉ ุชูุงููุง. ุนูุฏูุง ูุทูุจ ุฃุญุฏ ุงูุชุทุจููุงุช ูุชุงุจุฉ ูุชุฒุงููุฉ ุ ูุฅูู ูุฎุจุฑ ูุธุงู ุงููููุงุช: "ุฃูุช ุจุญุงุฌุฉ ุฅูู ุงูุงูุชุฒุงู ุจุฐูู ูู ุงูุฐุงูุฑุฉ ุบูุฑ ุงููุชููุจุฉ ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุช ุงูุญุงูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุญุชู ุฐูู ุงูุญูู ูุง ูููููู ูุนู ุฃู ุดูุก ุขุฎุฑ." ูุฐูู ุ ูุฌุจ ุฃู ุชูุชุฒู ุงูุชุณุฌููุงุช ุงููุชุฒุงููุฉ ุนูู ุงูููุฑ ุจุงููุฑุต - ูุฅุฐุง ูุงู ุฐูู ูุฒูุฏ ูู ุงูุชุฌุฒุฆุฉ ุฃู ูููู ูู ุนุฑุถ ุงููุทุงู ุงูุชุฑุฏุฏู ุ ููููู ุฐูู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนุงูู ZFS ุงูุณุฌูุงุช ุงููุชุฒุงููุฉ ุจุดูู ูุฎุชูู ุนู ุฃูุธูุฉ ุงููููุงุช ุงูุนุงุฏูุฉ - ุจุฏูุงู ูู ุชุญููููุง ุนูู ุงูููุฑ ุฅูู ุงูุชุฎุฒูู ุงูุนุงุฏู ุ ูุณุฌููุง ZFS ูู ููุทูุฉ ุชุฎุฒูู ุฎุงุตุฉ ุชุณูู ุณุฌู intent ZFS - ุณุฌู Intent ZFS ุฃู ZIL. ุงูุญููุฉ ูู ุฃู ูุฐู ุงูุณุฌูุงุช </font><font style="vertical-align: inherit;">ุชุธู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุถูุง</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุงูุฐุงูุฑุฉ ุ ููุชู ุชุฌููุนูุง ุฌูุจูุง ุฅูู ุฌูุจ ูุน ุทูุจุงุช ุงููุชุงุจุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุงูุนุงุฏูุฉ ุ ููุชู ุชูุฑูุบูุง ูุงุญููุง ูู ุงูุชุฎุฒูู ูุซู TXGs ุงูุนุงุฏูุฉ ุชูุงููุง (ูุฌููุนุงุช ุงููุนุงููุงุช ุ ูุฌููุนุงุช ุงููุนุงููุงุช). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุชุดุบูู ุงูุนุงุฏู ุ ูุชู ุชุณุฌูู ZIL ููุง ุชุชู ูุฑุงุกุชู ูุฑุฉ ุฃุฎุฑู. ุนูุฏูุง ุ ุจุนุฏ ูุญุธุงุช ููููุฉ ุ ูุชู ุฅุตูุงุญ ุงูุชุณุฌููุงุช ูู ZIL ูู ุงูุชุฎุฒูู ุงูุฑุฆูุณู ูู TXG ุงูุนุงุฏู ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุ ูุชู ูุตููุง ุนู ZIL. ุงูุดูุก ุงููุญูุฏ ุนูุฏ ูุฑุงุกุฉ ุดูุก ูุง ูู ZIL ูู ุนูุฏ ุงุณุชูุฑุงุฏ ุงูุชุฌูุน.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุญุงูุฉ ุชุนุทู ZFS - ุชุนุทู ูุธุงู ุงูุชุดุบูู ุฃู ุงููุทุงุน ุงูุชูุงุฑ ุงูููุฑุจุงุฆู - ุนูุฏูุง ุชููู ููุงู ุจูุงูุงุช ูู ZIL ุ ุณูุชู ูุฑุงุกุฉ ูุฐู ุงูุจูุงูุงุช ุฃุซูุงุก ุงุณุชูุฑุงุฏ ุงูุชุฌูุน ุงูุชุงูู (ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏ ุฅุนุงุฏุฉ ุชุดุบูู ูุธุงู ุงูุทูุงุฑุฆ). ุณูุชู ูุฑุงุกุฉ ูู ูุง ูู ููุฌูุฏ ูู ZIL ุ ูุฏูุฌู ูู ูุฌููุนุงุช TXG ุ ูููุชุฒู ุจุงูุชุฎุฒูู ุงูุฑุฆูุณู ุ ุซู ูุตูู ุนู ZIL ุฃุซูุงุก ุนูููุฉ ุงูุงุณุชูุฑุงุฏ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุญุฏุฉ ูู ูุฆุงุช ุงููุณุงุนุฏ vdev ุชุณูู LOG ุฃู SLOG ุ ุฌูุงุฒ LOG ุงูุซุงููู. ูุฏูู ูููุฉ ูุงุญุฏุฉ - ูุชุฒููุฏ ุงููุฌูุน ุจูุฌููุนุฉ ูููุตูุฉ ุ ูููุถู ุฃู ูููู ุฃุณุฑุน ุจูุซูุฑ ุ ูุน ููุงููุฉ ุนุงููุฉ ูููุชุงุจุฉ ุ ุฌูุงุฒ vdev ูุชุฎุฒูู ZIL ุ ุจุฏูุงู ูู ุชุฎุฒูู ZIL ูู ุชุฎุฒูู vdev ุงูุฑุฆูุณู. ุชุชุตุฑู ZIL ููุณูุง ููุง ูู ุจุบุถ ุงููุธุฑ ุนู ูููุน ุงูุชุฎุฒูู ุ ูููู ุฅุฐุง ูุงู vdev ูุน LOG ูุฏูู ุฃุฏุงุก ูุชุงุจุฉ ุนุงูู ุฌุฏูุง ุ ูุฅู ุนูููุงุช ุงููุชุงุจุฉ ุงููุชุฒุงููุฉ ุณุชููู ุฃุณุฑุน.</font></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูููู ุฃู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุคุฏู </font><font style="vertical-align: inherit;">
ุฅุถุงูุฉ vdev ูุน LOG ุฅูู ุงูุชุฌูุน ุฅูู </font><font style="vertical-align: inherit;">ุชุญุณูู ุฃุฏุงุก ุงููุชุงุจุฉ ุบูุฑ ุงููุชุฒุงูู - ุญุชู ุฅุฐุง ููุช ุจุฅุฌุจุงุฑ ุฌููุน ุนูููุงุช ุงููุชุงุจุฉ ุฅูู ZIL ุจุงุณุชุฎุฏุงู </font></font><code>zfs set sync=always</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุณูุธููู ูุฑุชุจุทูู ุจุงููุฎุฒู ุงูุฑุฆูุณู ูู TXG ุจููุณ ุงูุทุฑููุฉ ูุจููุณ ุงูุณุฑุนุฉ ููุง ูู ุงูุญุงู ุจุฏูู ุณุฌู. </font><font style="vertical-align: inherit;">ุชุญุณูู ุงูุฃุฏุงุก ุงููุจุงุดุฑ ุงููุญูุฏ ูู ุงูุชุฃุฎูุฑ ูู ุงูุชุณุฌูู ุงููุชุฒุงูู (ูุฃู ุณุฑุนุฉ ุงูุณุฌู ุงูุฃุนูู ุชุณุฑุน ุงูุนูููุงุช </font></font><code>sync</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุน ุฐูู ุ ูู ุจูุฆุฉ ุชุชุทูุจ ุจุงููุนู ุนุฏุฏูุง ูุจูุฑูุง ูู ุนูููุงุช ุงููุชุงุจุฉ ุงููุชุฒุงููุฉ ุ ูููู ูู vdev LOG ุชุณุฑูุน ุนูููุงุช ุงููุชุงุจุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูุงููุฑุงุกุงุช ุบูุฑ ุงููุชุฒุงููุฉ ุจุดูู ุบูุฑ ูุจุงุดุฑ. </font><font style="vertical-align: inherit;">ุฅู ุชุญููู ุณุฌูุงุช ZIL ุฅูู ุณุฌู vdev LOG ูููุตู ูุนูู ููุงูุณุฉ ุฃูู ุนูู IOPS ูู ุงูุชุฎุฒูู ุงูุฃุณุงุณู ุ ููุง ูุญุณู ุฅูู ุญุฏ ูุง ุฃุฏุงุก ุฌููุน ุนูููุงุช ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุทุงุช</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุนุฏ ุขููุฉ ูุณุฎ ุงููุชุงุจุฉ ุฃูุถูุง ุฃุณุงุณูุง ุฃุณุงุณููุง ูููุทุงุช ุงูุฐุฑูุฉ ZFS ูุงููุณุฎ ุงููุชุฒุงูู ุบูุฑ ุงููุชุฒุงูู. </font><font style="vertical-align: inherit;">ูุญุชูู ูุธุงู ุงููููุงุช ุงููุดุท ุนูู ุดุฌุฑุฉ ูุคุดุฑ ุชุญุฏุฏ ุฌููุน ุงูุณุฌูุงุช ุจุงูุจูุงูุงุช ุงูุญุงููุฉ - ุนูุฏ ุงูุชูุงุท ููุทุฉ ุ ููููู ุจุจุณุงุทุฉ ุนูู ูุณุฎุฉ ูู ุดุฌุฑุฉ ุงููุคุดุฑ ูุฐู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ุงููุชุงุจุฉ ููู ุณุฌู ูู ูุธุงู ุงููููุงุช ุงููุดุท ุ ููุชุจ ZFS ุฃููุงู ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ ูู ุงููุชูุฉ ุฅูู ูุณุงุญุฉ ุบูุฑ ูุณุชุฎุฏูุฉ. </font><font style="vertical-align: inherit;">ุซู ูููู ุจูุตู ุงูุฅุตุฏุงุฑ ุงููุฏูู ูู ุงููุชูุฉ ูู ูุธุงู ุงููููุงุช ุงูุญุงูู. </font><font style="vertical-align: inherit;">ูููู ุฅุฐุง ูุงูุช ุจุนุถ ุงูููุทุงุช ุชุดูุฑ ุฅูู ุงููุชูุฉ ุงููุฏููุฉ ุ ูุฅููุง ูุง ุชุฒุงู ุฏูู ุชุบููุฑ. </font><font style="vertical-align: inherit;">ูู ูุชู ุงุณุชุนุงุฏุฉ ุงููุชูุฉ ุงููุฏููุฉ ููุณุงุญุฉ ุฎุงููุฉ ุญุชู ูุชู ุชุฏููุฑ ุฌููุน ุงูููุทุงุช ุงูุชู ุชุฑุชุจุท ุจูุฐู ุงููุชูุฉ!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฑุงุฑ</font></font></h3><br>
<img src="https://habrastorage.org/getpro/habr/post_images/e69/167/01d/e6916701d4aa3ff27bb42efc43be60da.png"><br>
<i><font color="gray">  Steam  2015   158&nbsp;   126&nbsp;927 .        rsync&nbsp;โ  ZFS    ยซ ยป  750% .</font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/25f/376/0ab/25f3760ab64d6647571b9c02804b39f0.png"><br>
<i><font color="gray">      40-     Windows 7&nbsp;โ   .  ZFS   289  ,  rsync&nbsp;โ  ยซยป  161  ,    ,   rsync   --inplace.</font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/776/46b/a3a/77646ba3ac20eeb0933d7dc7d644296c.png"><br>
<i><font color="gray">    ,  rsync    .  1,9         &nbsp;โ    ,   ZFS   1148  ,  rsync,    rsync --inplace</font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจูุฌุฑุฏ ุฃู ุชููู ููููุฉ ุนูู ุงูููุทุงุช ุ ูุตุจุญ ูู ุงูุณูู ููู ุฌููุฑ ุงููุณุฎ ุงููุชูุงุซู. ูุธุฑูุง ูุฃู ุงูููุทุฉ ููุณุช ุณูู ุดุฌุฑุฉ ูุคุดุฑุงุช ุนูู ุงูุณุฌูุงุช ุ ูุฅูู ูุชุจุน ุฐูู ุฅุฐุง ูููุง ุจุนูู </font></font><code>zfs send</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุทุฉ ุ ูุฅููุง ูุฑุณู ูุฐู ุงูุดุฌุฑุฉ ูุฌููุน ุงูุณุฌูุงุช ุงููุฑุชุจุทุฉ ุจูุง. ุนูุฏูุง ูุนุจุฑ ูุฐุง </font></font><code>zfs send</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>zfs receive</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงููุงุฆู ุงููุฏูุ ูุฅูู ููุชุจ ูู ูู ูุญุชููุงุช ุงููุนููุฉ ูููุชูุฉ ููุงูุช ุงูุดุฌุฑุฉ ูู ุงููุคุดุฑุงุช ุงูุชู ุชุดูุฑ ุฅูู ูุชู ููุฌููุนุฉ ุงูุจูุงูุงุช ุงููุณุชูุฏูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุดูุก ูุตุจุญ ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ูู ุงูุซุงููุฉ </font></font><code>zfs send</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุงูุขู ูุฏููุง ูุธุงูุงู ุ ูุญุชูู ูู ููููุง ุนูู </font></font><code>poolname/datasetname@1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุทุฉ ุฌุฏูุฏุฉ </font></font><code>poolname/datasetname@2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุฐููุ ูู ุญูุถ ุงูุณุจุงุญุฉ ูุตุฏุฑ ูุฏูู </font></font><code>datasetname@1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>datasetname@2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููู ุงูุชุฌูุน ูุฏู ุญุชู ุงูุขู ุณูู ููุทุฉ ุงูุฃููู </font></font><code>datasetname@1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธุฑูุง ูุฃู ูุฏููุง ููุทุฉ ูุดุชุฑูุฉ ุจูู ุงููุตุฏุฑ ูุงููุฏู</font></font><code>datasetname@1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููููุง ุฃู ููุนู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฏุฑูุฌูุฉ</font></font></i> <code>zfs send</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููุง. ุนูุฏูุง ูุฎุจุฑ ุงููุธุงู </font></font><code>zfs send -i poolname/datasetname@1 poolname/datasetname@2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุงุฑู ุจูู ุดุฌุฑุชูู ูู ูุคุดุฑุงุช ุงููุคุดุฑ. ูู </font></font><code>@2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุงุถุญ ุฃู </font><font style="vertical-align: inherit;">ุฃู ูุคุดุฑุงุช ููุฌูุฏุฉ ููุท ูู </font><font style="vertical-align: inherit;">ุงููุชู ุงูุฌุฏูุฏุฉ ุชุดูุฑ ุฅูู ูุชู ุฌุฏูุฏุฉ - ูุฐุง ูุญุชุงุฌ ุฅูู ูุญุชููุงุช ูุฐู ุงููุชู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ูุธุงู ุจุนูุฏ ุ ุชููู ุงููุนุงูุฌุฉ ุงูุฅุถุงููุฉ </font></font><code>send</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจููุณ ุงูุจุณุงุทุฉ. ุฃููุงู ุ ูุณุฌู ุฌููุน ุงูุฅุฏุฎุงูุงุช ุงูุฌุฏูุฏุฉ ุงููุฏุฑุฌุฉ ูู ุงูุฏูู </font></font><code>send</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุซู ูุถูู ูุคุดุฑุงุช ุฅูู ูุฐู ุงููุชู. ููููุง ุ ูู ูุธุงููุง </font></font><code>@2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฏูุฏ! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนุฏ ุงููุณุฎ ุงููุชูุงุซู ุงููุชุฒุงูุฏ ZFS ุบูุฑ ุงููุชุฒุงูู ุชุญุณููุง ูุจูุฑูุง ููุงุฑูุฉ ุจุงูุทุฑู ุงูุณุงุจูุฉ ุบูุฑ ุงูููุชูุทุฉ ูุซู rsync. ูู ููุชุง ุงูุญุงูุชูู ุ ูุชู ุฅุฑุณุงู ุงูุจูุงูุงุช ุงูุชู ุชู ุชุบููุฑูุง ููุท - ูููู ูุฌุจ </font><i><font style="vertical-align: inherit;">ูุฑุงุกุฉ</font></i><font style="vertical-align: inherit;"> rsync ุฃููุงู</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุฑุต ุฌููุน ุงูุจูุงูุงุช ุนูู ููุง ุงูุฌุงูุจูู ููุชุญูู ูู ุงููุจูุบ ูููุงุฑูุชู. </font><font style="vertical-align: inherit;">ูู ุงูููุงุจู ุ ูุง ููุฑุฃ ุงููุณุฎ ุงููุชูุงุซู ZFS ุณูู ุฃุดุฌุงุฑ ุงููุคุดุฑ - ูุฃู ูุชู ุบูุฑ ููุซูุฉ ูู ุงูููุทุฉ ุงูุนุงูุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุถุบุท ูุถูู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุนูู ุขููุฉ ุงููุณุฎ ุนูู ุงููุชุงุจุฉ ุฃูุถูุง ุนูู ุชุจุณูุท ูุธุงู ุงูุถุบุท ุงููุฏูุฌ. ูู ูุธุงู ุงููููุงุช ุงูุชูููุฏู ุ ููุซู ุงูุถุบุท ูุดููุฉ - ูู ูู ุงูุฅุตุฏุงุฑ ุงููุฏูู ูุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ ูู ุงูุจูุงูุงุช ุงููุชุบูุฑุฉ ูู ููุณ ุงููุณุงุญุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ููุช ุชููุฑ ูู ุฌุฒุก ูู ุงูุจูุงูุงุช ูู ููุชุตู ููู ูุจุฏุฃ ุญูุงุชู ูููุบุงุจุงูุช ูู ุงูุฃุตูุงุฑ ูู 0x00000000 ูููุฐุง - ููู ุงูุณูู ุฌุฏูุง ุถุบุทู ุนูู ูุทุงุน ูุงุญุฏ ุนูู ุงููุฑุต. ูููู ูุงุฐุง ูุญุฏุซ ุฅุฐุง ุงุณุชุจุฏููุง ูุฐุง ุงูููุบุงุจุงูุช ูู ุงูุฃุตูุงุฑ ุจููุบุงุจุงูุช ูู ุงูุจูุงูุงุช ุบูุฑ ุงููุงุจูุฉ ููุถุบุท ูุซู JPEG ุฃู ุงูุถูุถุงุก ุงูุนุดูุงุฆูุฉ ุงูุฒุงุฆูุฉุ ูุฌุฃุฉ ุ ูู ูุชุทูุจ ูุฐุง ุงูููุบุงุจุงูุช ูู ุงูุจูุงูุงุช ูุงุญุฏูุง ุ ูููู 256 ูุทุงุนูุง ูู 4 KiB ุ ููู ูุฐุง ุงูููุงู ุนูู ุงููุฑุต ุ ูุชู ุญุฌุฒ ูุทุงุน ูุงุญุฏ ููุท.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ููุฌุฏ ูุฏู ZFS ูุซู ูุฐู ุงููุดููุฉ ุ ุญูุซ ูุชู ุฏุงุฆููุง ูุชุงุจุฉ ุงูุณุฌูุงุช ุงูุชู ุชู ุชุบููุฑูุง ุฅูู ูุณุงุญุฉ ุบูุฑ ูุณุชุฎุฏูุฉ - ุชุญุชู ุงููุชูุฉ ุงูุฃุตููุฉ ููุทุนูุง ูุงุญุฏูุง ููุท ูู 4 ููููุจุงูุช ุ ูุณูุณุชุบุฑู ุงูุณุฌู ุงูุฌุฏูุฏ 256 ุ ูููู ูุฐู ููุณุช ูุดููุฉ - ุณูุชู ูุชุงุจุฉ ุฌุฒุก ุชู ุชุบููุฑู ูุคุฎุฑูุง ูู ููุชุตู ุงูููู ูู ูุณุงุญุฉ ุบูุฑ ูุณุชุฎุฏูุฉ ุจุบุถ ุงููุธุฑ ุนูุง ุฅุฐุง ูุงู ุญุฌูู ูุฏ ุชุบูุฑ ุฃู ูุง ุ ูุฐูู ุจุงููุณุจุฉ ูู ZFS ููุฐุง ูุถุน ุทุจูุนู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชุนุทูู ุถุบุท ZFS ุงููุฏูุฌ ุงูุชุฑุงุถููุง ุ ููููุฑ ุงููุธุงู ุฎูุงุฑุฒููุงุช ุงูููููุงุช ุงูุฅุถุงููุฉ - ูู ุจูููุง LZ4 ู gzip (1-9) ู LZJB ู ZLE.</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LZ4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุฎูุงุฑุฒููุฉ ุฏูู ุชููุฑ ุถุบุทูุง ููู ุถุบุทูุง ุณุฑูุนูุง ููุบุงูุฉ ูููุงุณุจ ูู ุงูุฃุฏุงุก ููุนุธู ุญุงูุงุช ุงูุงุณุชุฎุฏุงู - ุญุชู ุนูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงูุจุทูุฆุฉ ุฅูู ุญุฏ ูุง.</font></font><br>
</li>
<li><b>GZIP</b> โ  ,       Unix-.        1-9,       CPU      9.       (   )  ,    &nbsp;   c CPU&nbsp;โ    ,     .<br>
</li>
<li><b>LZJB</b> โ    ZFS.       , LZ4     .<br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุชุฑููุฒ ูุณุชูู ุงูุตูุฑ ุ ุชุฑููุฒ ูุณุชูู ุงูุตูุฑ. </font><font style="vertical-align: inherit;">ูุง ูููุณ ุงูุจูุงูุงุช ุงูุนุงุฏูุฉ ุนูู ุงูุฅุทูุงู ุ ููููู ูุถุบุท ุชุณูุณูุงุช ูุจูุฑุฉ ูู ุงูุฃุตูุงุฑ. </font><font style="vertical-align: inherit;">ูููุฏ ููุฌููุนุงุช ุงูุจูุงูุงุช ุบูุฑ ุงููุงุจูุฉ ููุถุบุท ุชูุงููุง (ุนูู ุณุจูู ุงููุซุงู ุ JPEG ุฃู MP4 ุฃู ุบูุฑูุง ูู ุงูุชูุณููุงุช ุงููุถุบูุทุฉ ุจุงููุนู) ุ ูุฃููุง ุชุชุฌุงูู ุงูุจูุงูุงุช ุบูุฑ ุงููุงุจูุฉ ููุถุบุท ุ ูููููุง ุชุถุบุท ุงููุณุงุญุฉ ุบูุฑ ุงููุณุชุฎุฏูุฉ ูู ุงูุณุฌูุงุช ุงููุงุชุฌุฉ.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุตู ุจุถุบุท LZ4 ูุฌููุน ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ุชูุฑูุจูุง ุ </font><font style="vertical-align: inherit;">ุนููุจุฉ ุงูุฃุฏุงุก ูููุงุฌูุฉ ุงูุจูุงูุงุช ุบูุฑ ุงููุงุจูุฉ ููุถุบุท ุตุบูุฑุฉ ุฌุฏูุง ุ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุงุณุจ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃุฏุงุก ููุจูุงูุงุช ุงููููุฐุฌูุฉ ูุจูุฑุฉ. </font><font style="vertical-align: inherit;">ูุณุฎ ุตูุฑุฉ ุขูุฉ ุงูุชุฑุงุถูุฉ ูุชุซุจูุช ุฌุฏูุฏ ููุธุงู ุงูุชุดุบูู Windows (ูุธุงู ุชุดุบูู ูุซุจุช ุญุฏูุซูุง ุ ููุง ุชูุฌุฏ ุจูุงูุงุช ุจุฏุงุฎูู ุจุนุฏ) </font></font><code>compression=lz4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุณุจุฉ 27ูช ุฃุณุฑุน ููุง ูุงูุช ุนููู </font></font><code>compression=none</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุจุงุฑ 2015 ูุฐุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ARC - ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงูุจุฏููุฉ ุงูุชููููุฉ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ZFS ูู ูุธุงู ุงููููุงุช ุงูุญุฏูุซ ุงููุญูุฏ ุงููุนุฑูู ููุง ูุงูุฐู ูุณุชุฎุฏู ุขููุฉ ุงูุชุฎุฒูู ุงููุคูุช ูููุฑุงุกุฉ ุงูุฎุงุตุฉ ุจู ุ ููุง ูุนุชูุฏ ุนูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุตูุญุฉ ูุธุงู ุงูุชุดุบูู ูุชุฎุฒูู ูุณุฎ ูู ุงููุชู ุงูุชู ุชู ูุฑุงุกุชูุง ูุคุฎุฑูุง ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงูุฑุบู ูู ุฃู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงูุฎุงุตุฉ ุจู ูุง ุชุฎูู ูู ูุดุงููู - ูุง ูููู ูู ZFS ุงูุงุณุชุฌุงุจุฉ ูุทูุจุงุช ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุงูุฌุฏูุฏุฉ ุจุณุฑุนุฉ kernel ุ ูุฐูู </font></font><code>malloc()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏ ุชูุดู </font><font style="vertical-align: inherit;">ููุงููุฉ </font><font style="vertical-align: inherit;">ุชุฎุตูุต ุฐุงูุฑุฉ </font><font style="vertical-align: inherit;">ุฌุฏูุฏุฉ </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุชุญุชุงุฌ ุฅูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุงููุดุบููุฉ ุญุงูููุง ุจูุงุณุทุฉ ARC. </font><font style="vertical-align: inherit;">ูููู ููุงู ุฃุณุจุงุจ ุฌูุฏุฉ ูุงุณุชุฎุฏุงู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงูุฎุงุตุฉ ุจู ุ ุนูู ุงูุฃูู ูู ุงูููุช ุงูุญุงูู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุณุชุฎุฏู ุฌููุน ุฃูุธูุฉ ุงูุชุดุบูู ุงูุญุฏูุซุฉ ุงููุนุฑููุฉ ุ ุจูุง ูู ุฐูู MacOS ู Windows ู Linux ู BSD ุ ุฎูุงุฑุฒููุฉ LRU (ุงูุฃูู ุงุณุชุฎุฏุงููุง ูุคุฎุฑูุง) ูุชูููุฐ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุตูุญุฉ. ูุฐู ุฎูุงุฑุฒููุฉ ุจุฏุงุฆูุฉ ุชุฑูุน ุงููุชูุฉ ุงููุฎุฒูุฉ ูุคูุชูุง "ูุฃุนูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ" ุจุนุฏ ูู ูุฑุงุกุฉ ูุชุฏูุน ูุชู "ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุฃุณูู" ุญุณุจ ุงูุถุฑูุฑุฉ ูุฅุถุงูุฉ ุฃุฎุทุงุก ุฌุฏูุฏุฉ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช (ุงููุชู ุงูุชู ูุงู ูุฌุจ ูุฑุงุกุชูุง ูู ุงููุฑุต ุ ูููุณ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช) ูุฃุนูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนุงุฏุฉ ูุง ุชุนูู ุงูุฎูุงุฑุฒููุฉ ุจุดูู ุฌูุฏ ุ ูููู ุนูู ุงูุฃูุธูุฉ ุงูุชู ุชุญุชูู ุนูู ูุฌููุนุงุช ุจูุงูุงุช ุนูู ูุจูุฑุฉ ุ ุชุคุฏู LRU ุจุณูููุฉ ุฅูู ุงูุชุญุทูู - ุชุฒุงุญู ุงููุชู ุงููุทููุจุฉ ุจุดูู ูุชูุฑุฑ ูุฅูุณุงุญ ุงููุฌุงู ูููุชู ุงูุชู ูู ุชุชู ูุฑุงุกุชูุง ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุฑุฉ ุฃุฎุฑู. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;- ุฎูุงุฑุฒููุฉ ุฃูู ุณุฐุงุฌุฉ ูููู ุงุนุชุจุงุฑูุง ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช "ูุฑุฌุญุฉ". ุจุนุฏ ูู ูุฑุงุกุฉ ูููุชูุฉ ุงููุฎุฒูุฉ ูุคูุชูุง ุ ุชุตุจุญ "ุฃุซูู" ููููุงู ููุตุจุญ ูู ุงูุตุนุจ ุงูุชุฒุงุญู - ูุญุชู ุจุนุฏ ุงุฒุฏุญุงู ุงููุชูุฉ ูุชู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชุจุนูุง</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชุฑุฉ ูุนููุฉ ูู ุงูุฒูู. ุงููุชูุฉ ุงูุชู ุชู ุนุตุฑูุง ูููู ุชุญุชุงุฌ ุจุนุฏ ุฐูู ุฅูู ุฅุนุงุฏุฉ ุงููุฑุงุกุฉ ุฅูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุณุชุตุจุญ ุฃูุถูุง "ุฃุซูู".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ููู ูุฐุง ูู ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ุฐุงุช ูุณุจุฉ ุฅุตุงุจุฉ ุฃูุจุฑ ุจูุซูุฑ - ุงููุณุจุฉ ุจูู ุนุฏุฏ ูุฑุงุช ุงูุฏุฎูู ุฅูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช (ูุฑุงุกุฉ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช) ูุงูุฎุทุฃ (ูุฑุงุกุฉ ูู ุงููุฑุต). </font><font style="vertical-align: inherit;">ูุฐู ุฅุญุตุงุฆูุงุช ูููุฉ ููุบุงูุฉ - ููุณ ููุท ุฃู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุชุถุฑุจ ุนูู ููุณูุง ุฃูุงูุฑ ุงูุฎุฏูุฉ ูู ุญูุซ ุงูุญุฌู ุจุดูู ุฃุณุฑุน ุ ูููู ุฃูุถูุง ุชูุฏูู ุฃุฎุทุงุก ุงูุชุฎุฒูู ุงููุคูุช ุจุดูู ุฃุณุฑุน ุ ูุฃูู ูููุง ุฒุงุฏ ุนุฏุฏ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ูู ุนุฏุฏ ุงูุทูุจุงุช ุงููุชุฒุงููุฉ ุนูู ุงููุฑุต ูุฃูู ุงูุชุฃุฎูุฑ ูู ุงูุฃุฎุทุงุก ุงููุชุจููุฉ ุงูุชู ูุฌุจ ุชูุฏูููุง ูุน ููุงุฏุฉ.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชูุชุงุฌ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฏุฑุงุณุฉ ุงูุฏูุงูุงุช ุงูุฃุณุงุณูุฉ ูู ZFS - ููู ูุนูู ุงููุณุฎ ุนูุฏ ุงููุชุงุจุฉ ุ ููุฐูู ุงูุนูุงูุงุช ุจูู ุชุฌูุนุงุช ุงูุชุฎุฒูู ูุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ูุงููุชู ูุงููุทุงุนุงุช ูุงููููุงุช - ูุญู ุนูู ุงุณุชุนุฏุงุฏ ูููุงูุดุฉ ุงูุฃุฏุงุก ุงูุญูููู ุจุฃุฑูุงู ุญููููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุฌุฒุก ุงูุชุงูู ุ ุณูููู ูุธุฑุฉ ุนูู ุงูุฃุฏุงุก ุงููุนูู ูููุฌูุนุงุช ูุน vdev ุงููุชุทุงุจู ู RAIDz ุ ููุงุฑูุฉ ูุน ุจุนุถูุง ุงูุจุนุถ ุ ููุฐูู ุจุงูููุงุฑูุฉ ูุน ุทูุจูููุฌูุง ููุงุฉ RAID ุงูุชูููุฏูุฉ ูู Linux kernel ุ ูุงูุชู ุฏุฑุณูุงูุง </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุงุจููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุจุฏุงูุฉ ุ ุฃุฑุฏูุง ุงููุธุฑ ููุท ูู ุงูุฃุณุงุณูุงุช - ุทุจูููุฌูุง ZFS ููุณูุง - ูููู ุจุนุฏ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฐูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณูููู ุนูู ุงุณุชุนุฏุงุฏ ููุญุฏูุซ ุนู ุถุจุท ูุถุจุท ZFS ุงูุฃูุซุฑ ุชูุฏููุง ุ ุจูุง ูู ุฐูู ุงุณุชุฎุฏุงู ุฃููุงุน vdev ุงูุฅุถุงููุฉ ูุซู L2ARC ู SLOG ู Special Allocation.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar504680/index.html">ูุธุฑุฉ ุนุงูุฉ ุนูู ููุชุจุฉ NLP ูู SpaL</a></li>
<li><a href="../ar504682/index.html">ุญููู ุจูุณุช: j2me ุ ุชุญุฏู ุงูุฌุงุฐุจูุฉ ุ 64 ููููุจุงูุช</a></li>
<li><a href="../ar504686/index.html">ููููุฉ ุฑุณู ูุทุฉ</a></li>
<li><a href="../ar504688/index.html">ุงูุฃููุนุฉ ุนุฏููุฉ ุงููุงุฆุฏุฉ: ุงูููุฏ ุงูุนููู ููุณูุงุณุฉ ุงูุงุฌุชูุงุนูุฉ ูู KOVID-19</a></li>
<li><a href="../ar504690/index.html">ุญูุงูุฉ ููู ููุช ุจุชูููู Azure AD B2C ุนูู ุฑุฏ ูุนู ูุชูุงุนู ุงูุฌุฒุก ุงูุฃุตูู 3 (ุจุฑูุงูุฌ ุชุนูููู)</a></li>
<li><a href="../ar504694/index.html">ููููุฉ ุชุฌููุน ุงูุฏูููุฑ - C ++ ู Python ูุชูููุฐูุง ุงูุฎุงุต. ุงูุฌุฒุก ุงูุฃูู</a></li>
<li><a href="../ar504696/index.html">ุฃุฎุจุงุฑ ูู ุนุงูู OpenStreetMap ุฑูู 513 (12.05.2020-18.05.2020)</a></li>
<li><a href="../ar504698/index.html">ุงูุฅุนุฏุงุฏ ุนูู ูููุน ุจุนูุฏ</a></li>
<li><a href="../ar504700/index.html">ูุฑุต ุงูุฑุณู ุงูุณูููุงุชู "ุฑุณู"</a></li>
<li><a href="../ar504702/index.html">ุงููุงุณ ูุง ูุฑูุฏูู ูุนุฑูุฉ ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>