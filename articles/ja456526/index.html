<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧓🏾 🥀 🏁 WebGLのアセットを適切に最適化します ☄️ 📬 ⛷️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="通常のデスクトップまたはモバイルグラフィックスで適切に機能する最適化手法が、WebGLの場合に常に望ましい効果をもたらすとは限りません。この記事では、インタラクティブなWebアプリケーションの作成に有効な生産性向上方法を収集しました（またはロシア語に翻訳し、テキスト形式でVerge3Dayでのプレゼ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>WebGLのアセットを適切に最適化します</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456526/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常のデスクトップまたはモバイルグラフィックスで適切に機能する最適化手法が、WebGLの場合に常に望ましい効果をもたらすとは限りません。</font><font style="vertical-align: inherit;">この記事では、</font><font style="vertical-align: inherit;">インタラクティブなWebアプリケーションの作成に有効な生産性向上方法</font><font style="vertical-align: inherit;">を収集しました（またはロシア語に翻訳し、テキスト形式</font><font style="vertical-align: inherit;">でVerge3Dayでの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プレゼンテーションの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font><font style="vertical-align: inherit;">を示しました）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f3/-h/po/f3-hpomrfalqm_dx6bd7wucnbgu.png"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジオメトリ/メッシュ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正しいジオメトリは、3Dアプリケーションのパフォーマンスの鍵です。</font><font style="vertical-align: inherit;">シェーディングとレンダリングを高速化するには、ポリゴンメッシュをできるだけ均一に保つ必要があります。</font><font style="vertical-align: inherit;">作業の最初に、シーンの詳細レベルを決定し、モデリングするときはそれに固執する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5p/zq/uj/5pzqujnn_wdjuabotnmqswesfi8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
折りたたみをモデリングするときは、ポリゴンを追加するよりも、シェーディンググループを使用する方が適切です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x3/eh/7u/x3eh7ulhzw5kwlfz5ii6yys2jng.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
円柱モデルで作業するときは、中心に近いポリゴンの数を減らすようにしてください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/an/4e/n8/an4en8ebhrlarhxwvxfco8-vx88.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーがまだ見えない追加のパーツでモデルをオーバーロードしないでください。</font><font style="vertical-align: inherit;">次の図に示すように、オレンジ色で強調表示されたエッジは、モデル全体の詳細レベルを決定するため、ガイドとして使用できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/d9/-p/yc/d9-pycf3wujunw3fuuryyotmfsa.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線マップ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WebGLのパフォーマンスを最適化する一般的な方法は、法線マップを作成してポリゴン数を減らすことです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/ll/ym/cmllymx9s4rem9ynwyvywunmqxy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、8ビット画像の精度には限界があるため、法線マップは目に見えるアーティファクトを作成する可能性があります。この問題の考えられる解決策を下の図に示しますが、実装するのはかなり困難です。より高い精度でイメージを使用すると、ダウンロードしたファイルのサイズが大きくなりますが、2番目のアプローチは非常に時間がかかり、クリーンな結果を保証しません。 3番目の方法は、表面が粗い場合に機能することがあります。この場合、ノイズを材料に追加して、起こり得るアーチファクトを減らすことをお勧めします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/1q/rn/cm1qrnqpt1qs13qi0oavun0l2ec.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの経験に基づいて、光沢のあるオブジェクトの最善の解決策は、法線マップを使用せずに、滑らかな頂点グループを持つ中程度の複雑さのジオメトリを使用することであると結論付けました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nd/bv/uw/ndbvuwvn3ao61dafaphqah7nhs0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、非常に詳細なメッシュではなく、法線マップを使用できるいくつかのケースを次に示します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブジェクトは多くの異なる表面で構成されています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目に見える欠陥を与えない粗い表面があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブジェクトが遠すぎるか小さいため、ユーザーはアーティファクトに気付くことができません。</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/b9/-b/1y/b9-b1y8tfbf1yfs-vuss6vfuaky.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テクスチャリング</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、最新のPBRライティングモデルで使用される典型的なテクスチャのセットです（そしてそれだけではありません）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/ip/07/huip07zd2h1-gjr3pioqzmcnwxw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、ほとんどが白黒です。</font><font style="vertical-align: inherit;">したがって、1つの画像のRGBAチャネルでb / wテクスチャを組み合わせることができます（画像ごとに合計で最大4枚のカード）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bv/hw/cu/bvhwcuec0dapzvsygiox7gpei2a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
b / wテクスチャが1つしかない場合は、アルファチャネルにパックすることにより、既存のRGBテクスチャと組み合わせることができます。</font><font style="vertical-align: inherit;">最後に、組み合わせる画像がない場合は、白黒画像を95％の圧縮とグレースケールを有効にしたjpeg形式に変換できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jz/ws/sy/jzwssyyopq_jswi7ahzny0zwhsa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テクスチャサイズを小さくする別の方法は、UVスキャンを最適化することです。</font><font style="vertical-align: inherit;">スキャンがコンパクトになるほど、画像はテクスチャ空間をより効率的に使用します。</font><font style="vertical-align: inherit;">これにより、品質を損なうことなく、より軽量な画像を作成できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yv/_k/dh/yv_kdhifbs63s5xai2om5z37avi.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">頂点カラー</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
画像ではなく頂点カラーを使用すると、ロードを高速化し、WebGLアプリケーションの全体的なパフォーマンスを向上させる効果的な方法です。</font><font style="vertical-align: inherit;">唯一の欠点は、同じ頂点の色を分離するために、モデルにいくつかのエッジを追加する必要があることです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4j/6w/_x/4j6w_xkffgfixggeghebye5tl_4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
頂点カラーを使用して、粗さ、金属性、鏡面、またはその他のパラメーターを決定することもできます。</font><font style="vertical-align: inherit;">以下に、頂点の色のみを使用するそのようなマテリアルの例を示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/if/di/-s/ifdi-sbv5i300f7zkpjwie8cfd8.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェーダーの数</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シーンに含まれるマテリアル/シェーダーの数が少ないことが非常に重要です。 WebGLでシェーダーをコンパイルすると、ロードが長くなり、特にWindowsで顕著になります。さらに、シェーダーの数が少ない場合、レンダリング中にエンジンが切り替える時間を短縮できるため、パフォーマンスが向上します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テクスチャのみが異なる類似のマテリアルがある場合は、1つのマテリアルのみを使用して、実行時にそのテクスチャをロード/変更できます。これを行うには、JavaScriptを使用するか、一部のWebGLフレームワークで使用可能なビジュアルロジックエディターを使用します。これにより、シェーダーの数が最適化されるだけでなく、アプリケーションの起動時に読み込まれる画像の数も削減されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dm/3w/vs/dm3wvs45kjv3deg4w0342os2o7e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下はそのような最適化の例です。</font><font style="vertical-align: inherit;">1つのタイヤの4種類すべてが1つのマテリアルで表され、テクスチャを置き換えることで構成されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8l/9d/vg/8l9dvgl_jlessslo7qozr7fnlfe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シェーダーの数を減らすには、2つ以上の単純なマテリアルを1つ以上の複雑なマテリアルに組み合わせることができます。</font><font style="vertical-align: inherit;">この方法は、これらのマテリアルを切り替える（たとえば、コンフィギュレーターアプリケーションを作成する）場合に特に効果的です。単に切り替えるだけでなく、あるマテリアルから別のマテリアルへの移行をスムーズかつ美しくアニメーション化します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tg/qj/nk/tgqjnky59qyocifqwtgxtvotsae.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">電話をかける</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、もう1つの重要な側面があります-Draw呼び出しの数です（これらは、Draw呼び出しとDraw呼び出しでもあります）。</font><font style="vertical-align: inherit;">各オブジェクトに1つのマテリアルのみが割り当てられている場合、これはおおよそ個々のオブジェクトの数に対応しますが、複数のマテリアルを持つオブジェクトは、視覚化するためにさらに多くの呼び出しを必要とします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、可能な場合はメッシュを結合し、固有性の低いマテリアルを使用して、描画呼び出しの数を減らし、パフォーマンスを向上させるように努力する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2s/62/if/2s62ifvsueoudvxkdaa6o4ilwse.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アニメートされたオブジェクトがある場合でも、そのパーツを接続し、ボーンを使用してアニメートできます。これは、個々のオブジェクトをアニメートするときにさらに便利な場合があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rm/sj/wi/rmsjwiqlei4hbedtbuafmxbrwsk.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HDRライティング</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これにより、光源を使用せずにシーンをHDR画像でのみ照明する場合に、パフォーマンスが大幅に向上します。</font><font style="vertical-align: inherit;">HDRファイルの重量は1 MB未満です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pm/j_/rl/pmj_rli9pkrhkwg4jgh0aggk5mu.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">影</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
動的シャドウは、オブジェクトを可能な限り最良の方法で表示するのに役立つ場合にのみ使用してください。下の画像は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">産業用ロボットの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デモからの動的な影を示してい</font><font style="vertical-align: inherit;">ます。このアプリケーションではモデルではなくカメラ自体が回転するため、影によってオブジェクトの一部をユーザーから隠すことはできず、ロボットの形状を完全に強調することはできません。一方、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクーター</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デモの同じ影</font><font style="vertical-align: inherit;">は、モデルの多くの詳細を不明瞭にします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/o4/px/ik/o4pxikw8wlgmidid3mlswai50bq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これから結論付けます。オブジェクトがアプリケーション内で移動しない場合は、シャドウマップとアンビエントオクルージョンマップをベイクして、オブジェクトの下の平面に割り当てることができます。このソリューションは、動的シャドウを使用する場合よりも生産性が高く、見栄えがよくなります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a4/5d/j1/a45dj1fnhbxpi4u8tnrpmqaptai.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで全部です。</font><font style="vertical-align: inherit;">WebGLのパフォーマンスに役立つ可能性のあるその他のヒントがある場合は、コメントに書き込んでください。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja456512/index.html">動機、委任、自動化：スーパーチームを作成するためのレシピ</a></li>
<li><a href="../ja456514/index.html">コンストラクターとしての方法論：組み立て手順</a></li>
<li><a href="../ja456516/index.html">用途から現場まで。Saint TeamLead Conf 2019でのライフレポート</a></li>
<li><a href="../ja456518/index.html">新製品の名の下に</a></li>
<li><a href="../ja456520/index.html">新しい会社のリーダーになることによってすべてのポリマーを失うことのない方法</a></li>
<li><a href="../ja456528/index.html">概要：ルーブルの成長または下落を決定するもの</a></li>
<li><a href="../ja456530/index.html">インテルNUC：2019モデルと2020プラン</a></li>
<li><a href="../ja456532/index.html">スピーチピラミッド：ディルトレベルの助けを借りて視聴者の信頼を喚起する方法</a></li>
<li><a href="../ja456534/index.html">Pythonを使用してMicrosoft Wordでドキュメントに入力します。パート1</a></li>
<li><a href="../ja456536/index.html">すべてのプログラマーが知っておくべきAWSのコスト</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>