<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍✈️ 👨‍❤️‍💋‍👨 💤 Ich bin ein Android-Entwickler und wollte keine manuelle Arbeit leisten. 🔆 🌞 🤷🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Als ich mich in Skyeng niederließ, schien die Sonne etwas heller, das Gras war nicht grüner (es war der gleiche frühe Frühling), und der Teamleiter ba...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Ich bin ein Android-Entwickler und wollte keine manuelle Arbeit leisten.</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skyeng/blog/490784/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Als ich mich in Skyeng niederließ, schien die Sonne etwas heller, das Gras war nicht grüner (es war der gleiche frühe Frühling), und der Teamleiter bat mich, Jira zu schreiben, wie viel Zeit für das Codieren aufgewendet wurde und wie viel geredet und überprüft wurde. Mindestens alle zwei Wochen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/p0/gd/rw/p0gdrwyypbzz6wn81ybvknbmohq.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Basierend auf diesen Daten versuchen wir zu verstehen, ob es notwendig ist, die Schätzungen anzupassen und ob es Kommunikationsprobleme im Team gibt", sagten sie. Aber wer so ein "Babayka" war, wurde nie erzählt.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da wir alle Fernarbeiter sind, klang die Idee vernünftig. Und es wurde für mich interessant, wohin diese acht Stunden gegangen waren: hier waren sie, aber wofür genau? Die Protokollierung war jedoch ungewöhnlich. Und im Allgemeinen Faulheit. Dann beschloss ich, nach etwas zu suchen, das für mich weiterarbeiten würde. Und während der Recherche wurde ich ein wenig mitgerissen und schrieb mein Plugin für IntelliJ IDEA. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unten finden Sie</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">subjektive Überprüfung der fertigen Werkzeuge und meines Fahrrads</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (mit Quelle).</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich studiere die Lösungen, die das Team verwendet</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das erste, was ich tat, war, von meinen Kollegen herauszufinden, wer was verwendet. </font><font style="vertical-align: inherit;">Die Optionen sind ungefähr die folgenden:</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clockify</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - eine Taste, um alles zu regieren</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Benötigen Sie Zeit zum Codieren oder Schreiben von Docks? </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Plugin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fügt fast überall einen Button hinzu (ein ziemlich unauffälliger grauer Pacman).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yy/9-/ic/yy9-icorb-pi37wptn9yh7wxtxk.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So sieht es in Google Text &amp; Tabellen aus</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/1k/tf/m0/1ktfm0ax7-xl9rmwtlq9jvwtgec.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und auf GitHub können</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sie Natrekannyi auf einem Dashboard bewundern oder in eine Tabelle importieren und in Jira ablegen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/js/bf/6h/jsbf6htyizodd76lwvq5hbzuqhy.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Integration in Jira wird separat bereitgestellt, auch über die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Browsererweiterung.</font></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Es ist jedoch möglich, eine Tabelle mit von Clockify erhaltenen Arbeitsprotokollen in Ihren Arbeitskalender hochzuladen. </font><font style="vertical-align: inherit;">Und für die Offline-Zeiterfassung gibt es Desktop-Anwendungen für Windows, Linux und Mac. </font><font style="vertical-align: inherit;">Auch mobile Apps. </font><font style="vertical-align: inherit;">Die Hauptfunktionalität ist kostenlos, es gibt jedoch mehrere Tarifpläne mit Extras wie Datenschutz, Erinnerungen und Vorlagen für Projekte.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toggl</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nur Toggl</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles ist ungefähr gleich, aber ein bisschen mehr Extras - in einer Desktop-Anwendung können Sie beispielsweise Erinnerungen an die Zeiterfassung festlegen, den Pomodoro-Modus aktivieren und sogar eine bestimmte Anwendung mit einem bestimmten Projekt verknüpfen und die automatische Nachverfolgung einrichten.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hl/yp/sv/hlypsvcpl66hldse0c4ayfhkmzi.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aber es gibt eine Nuance: Am ersten Tag des Gebrauchs war ich von diesem Fenster und Benachrichtigungen mit Erinnerungen begeistert. </font><font style="vertical-align: inherit;">Obwohl die Theorie cool klang)</font></font></i><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Toggl + </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python-Skript</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Wenn nur eine Schaltfläche nicht mehr ausreicht</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Erfindung meines Kollegen. </font><font style="vertical-align: inherit;">Irgendwie beschloss er, die Gesten für den Export von Tabellen nach Jira zu reduzieren und verlagerte das Entladen der Steuern in Toggl auf ein Skript. </font><font style="vertical-align: inherit;">Sie können in einen Cron setzen und das Leben genießen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wakatime</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - wohin wir gehen, keine Knöpfe benötigt</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Protokolliert alles selbst. Daher ist das erste, woran Sie beim Verbinden der Browsererweiterung denken müssen, die Blacklist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusätzlich zu den Erweiterungen bietet es mehrere Integrationen und eine anständige Anzahl von Plugins für die gängigsten IDEs und Editoren. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xz/4u/uk/xz4uuk51xsdjdkemxh-ichx8ceg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plugins für die IDE verfolgen die Zeit, die sowohl in einem bestimmten Git-Zweig als auch in einer bestimmten Datei verbracht wurde. Auf dem Bildschirm ist die Liste der verfügbaren sehr beeindruckend. Serenyk - "in den Plänen", für ihre schnelle Umsetzung können Sie abstimmen. Einige Plugins in einem kostenpflichtigen Abonnement für 9 US-Dollar pro Monat.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Darüber hinaus können Sie im Dashboard sehen, wie viel Zeit in Prozent für das Schreiben von Code in verschiedenen Sprachen aufgewendet wird: Wenn Sie sich daran erinnern, dass bei einem regulären Android-Projekt Kotlin, Java, Groovy und XML verwendet werden, ist dies für sich selbst sinnvoll. </font><font style="vertical-align: inherit;">Und wenn Sie eine Weile mit dem installierten Plugin arbeiten, werden Sie feststellen, dass es ziemlich rücksichtslos ist: Das Dashboard erhält die Zeit zum aktiven Lesen und Schreiben von Code. </font><font style="vertical-align: inherit;">Und das Kleben gelangt nicht mit einer Glasoptik in den Monitor. </font><font style="vertical-align: inherit;">Unnötig zu sagen, ein Amateur.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hmm, der Quellcode für WakaTime ist offen: Sie können versuchen zu verstehen, wie es funktioniert ...</font></font></b><div class="spoiler_text">  , ?           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   IDE  JetBrains</a>. <br>
<br>
 .     WakaTime.java.    ,         ,    Heartbeat (),   WakaTime CLI    .      , , ,       . <br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schreiben Sie Ihr Fahrrad analog</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielleicht wäre eine Kartoffelpistole nützlicher, aber Sie werden nichts für Forschungszwecke tun. Nachdem ich über die WakaTime-Quellen meditiert hatte, entschied ich mich, ein eigenes Plug-In zu erstellen, mit dem Aktivitäten in der IDE verfolgt, die Zeit zum Schreiben protokolliert und alles an Jira gesendet werden kann (In unserem Ablauf sind die Zweige nach den Aufgaben in Jira benannt, daher sieht es ziemlich realistisch aus.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und um den Server während der Arbeit am Code nicht mit Anfragen zu füllen, senden wir die Protokolle, wenn Android Studio geschlossen ist, und speichern sie bis zu diesem Moment lokal.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Welche Entitäten können wir im Quellcode des Plugins finden (und in unserem eigenen verwenden)?</font></font></h4><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir verwenden keine Komponenten (dies ist </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Legacy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die zuvor die Hauptstruktureinheiten des Plugins waren. Kann Anwendungsebene, Projektebene oder Modulebene sein. Es gibt eine ApplicationComponent in der WakaTime-Quelle, aber sie können, der Quellcode ist bereits fünf Jahre alt und sollte die Abwärtskompatibilität beibehalten. Komponenten sind an den Lebenszyklus der Ebene gebunden, mit der sie verknüpft sind. So wird beispielsweise ApplicationComponent beim Start der IDE geladen. Bei Verwendung blockieren sie den Neustart des Plugins, ohne die IDE neu zu starten, und verhalten sich im Allgemeinen unangenehm. Daher ist es besser, stattdessen Dienste zu verwenden. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir nutzen Dienstleistungen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- aktuelle Hauptstruktureinheiten. </font><font style="vertical-align: inherit;">Sie sind in die gleichen Ebenen der Anwendung, des Projekts und des Moduls unterteilt. Sie helfen uns, die Logik auf den entsprechenden Ebenen zu kapseln und den Status des Plugins zu speichern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Gegensatz zu Komponenten müssen Services mithilfe der ServiceManager.getService () -Methode eigenständig geladen werden. </font><font style="vertical-align: inherit;">Die Plattform stellt sicher, dass jeder Dienst ein Singleton ist. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktionen hinzufügen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - sie können eine Verknüpfung oder ein zusätzlicher Menüpunkt sein - kurz gesagt, sie sind für alles verantwortlich, was sich irgendwie auf Benutzeraktionen in der IDE auswirkt. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir verwenden Erweiterungen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - jede Erweiterung der Funktionalität, die komplizierter als Aktionen ist: Stellen Sie beispielsweise eine Verbindung zum IDE-Lebenszyklus her und führen Sie etwas aus, während Sie einen Begrüßungsbildschirm anzeigen oder bevor Sie das Programm beenden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All dies sollte in der Datei /META_INF/plugin.xml deklariert werden.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Plugin.xml und build.gradle</font></font></h4><br>
<img src="https://habrastorage.org/webt/ap/ia/vz/apiavzht769ipgzd8ltqaobce4o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Projekterstellungsfenster. </font><font style="vertical-align: inherit;">Wir werden unser Plugin in Kotlin schreiben und Gradle für die Assembly verwenden.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dies ist das erste, was wir sehen, nachdem wir das Plugin-Leerzeichen in IDEA erstellt haben (Datei -&gt; Neu -&gt; Projekt ... -&gt; Gradle -&gt; IntelliJ Platform Plugin). </font><font style="vertical-align: inherit;">Es enthält Informationen zu den Abhängigkeiten des Plugins und dessen kurze Beschreibung. </font><font style="vertical-align: inherit;">Es sollte Plug-In-Komponenten deklarieren - die zuvor genannten Komponenten, Dienste, Aktionen und Erweiterungen. </font><font style="vertical-align: inherit;">Es wird keinen bestimmten Einstiegspunkt geben - es wird je nach unseren Anforderungen eine benutzerdefinierte Aktion oder ein IDE-Lebenszyklusereignis sein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden diese Abhängigkeiten brauchen - schließlich wollen wir ein Plugin für das Studio schreiben, damit es mit Git funktioniert.</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">depends</span>&gt;</span>Git4Idea<span class="hljs-tag">&lt;/<span class="hljs-name">depends</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">depends</span>&gt;</span>com.intellij.modules.androidstudio<span class="hljs-tag">&lt;/<span class="hljs-name">depends</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Git4Idea ist ein Plug-In für das virtuelle Dateisystem (VCS) und bietet Themen, dank derer wir später Git-Ereignisse abhören können - wie zum Beispiel Checkouts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da wir auch möchten, dass das Plugin mit Jira funktioniert, werden wir über den Gradle eine freundlicherweise zur Verfügung gestellte Bibliothek mit einem Rest-Client verbinden. </font><font style="vertical-align: inherit;">Fügen Sie dazu dort das Atlassian Maven-Repository hinzu:</font></font><br>
<br>
<pre><code class="kotlin hljs">repositories {<font></font>
   mavenCentral()<font></font>
   maven {<font></font>
       url <span class="hljs-string">"https://packages.atlassian.com/maven/repository/public"</span><font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und eigentlich die Bibliotheken:</font></font><br>
<br>
<pre><code class="kotlin hljs">implementation <span class="hljs-string">"joda-time:joda-time:2.10.4"</span>
implementation(<span class="hljs-string">"com.atlassian.jira:jira-rest-java-client-core:4.0.0"</span>) {<font></font>
   exclude group: <span class="hljs-string">'org.slf4j'</span><font></font>
   dependencies {<font></font>
       implementation <span class="hljs-string">"com.atlassian.fugue:fugue:2.6.1"</span><font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier definieren wir die Version der IDE, die uns interessiert, und den Weg dorthin (oh, wenn das echte Android Studio so schnell gestartet und funktioniert hat wie seine leichtgewichtige Version zum Debuggen von Plugins):</font></font><br>
<br>
<pre><code class="kotlin hljs">intellij {<font></font>
   version <span class="hljs-string">'2019.1'</span>
   plugins <span class="hljs-string">'git4idea'</span>
   alternativeIdePath <span class="hljs-string">'E:\\Android Studio'</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und hier werden wir vielleicht eines Tages über eine neue, verbesserte Funktionalität schreiben. </font><font style="vertical-align: inherit;">Aber nicht jetzt.</font></font><br>
<br>
<pre><code class="kotlin hljs">patchPluginXml {<font></font>
   changeNotes <span class="hljs-string">"""
     Add change notes here.&lt;br&gt;
     &lt;em&gt;most HTML tags may be used&lt;/em&gt;"""</span>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Erstellen einer Benutzeroberfläche</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um etwas in Jira zu pushen, müssen Sie sich zuerst anmelden. </font><font style="vertical-align: inherit;">Es ist logisch, dies direkt nach der Eröffnung des Projekts zu tun. </font><font style="vertical-align: inherit;">Es sieht so aus, als ob wir eine Erweiterung benötigen, und wir werden nicht zögern, sie in plugin.xml zu deklarieren:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">postStartupActivity</span> <span class="hljs-attr">implementation</span>=<span class="hljs-string">"Heartbeat"</span>/&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
und zeigen Sie den Dialog darin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UI-Komponenten sind hauptsächlich Komponenten von Swing mit einigen Erweiterungen von Platform SDK. </font><font style="vertical-align: inherit;">All dies wurde kürzlich in kotlin ui dsl eingewickelt. </font><font style="vertical-align: inherit;">Zum Zeitpunkt des Schreibens wurde in der Dokumentation festgestellt, dass sich dsl zwischen den Hauptversionen sehr stark ändern kann. Daher verwenden wir es mit einer leichten Angst:</font></font><br>
<br>
<pre><code class="kotlin hljs">
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createCenterPanel</span><span class="hljs-params">()</span></span>: JComponent? {<font></font>
<font></font>
   title = <span class="hljs-string">"Jira credentials"</span>
   setOKButtonText(<span class="hljs-string">"Save"</span>)<font></font>
<font></font>
   <span class="hljs-keyword">return</span> panel {<font></font>
       row {<font></font>
           JLabel(<span class="hljs-string">"Jira hostname"</span>)()<font></font>
           hostname = JTextField(<span class="hljs-string">"https://"</span>)<font></font>
           hostname()<font></font>
       }<font></font>
       row {<font></font>
           JLabel(<span class="hljs-string">"Username:"</span>)()<font></font>
           username = JTextField()<font></font>
           username()<font></font>
       }<font></font>
       row {<font></font>
           JLabel(<span class="hljs-string">"Password:"</span>)()<font></font>
           password = JPasswordField()<font></font>
           password()<font></font>
       }<font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben einen Dialog erstellt, ihn gezeigt und von Jira Anmeldeinformationen erhalten. </font><font style="vertical-align: inherit;">Jetzt müssen wir sie so gut wie möglich und vorzugsweise sicher speichern. </font><font style="vertical-align: inherit;">PersistingStateComponent wird zur Rettung kommen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. PersistingStateComponent-Gerät (nicht sehr kompliziert)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PersistingStateComponent kann zwei Dinge tun - saveState und loadState: serialisieren und speichern Sie das übergebene Objekt und rufen Sie es aus dem Speicher ab. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wo genau er die Daten speichern soll, erfährt er aus der staatlichen Anmerkung. </font><font style="vertical-align: inherit;">In der Dokumentation werden zwei einfachste Optionen erwähnt: Geben Sie Ihre Datei an oder speichern Sie alles in den Arbeitsbereichseinstellungen:</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-meta">@Storage(<span class="hljs-meta-string">"yourName.xml"</span>)</span>
<span class="hljs-meta">@Storage(StoragePathMacros.WORKSPACE_FILE)</span> 
<span class="hljs-meta">@State(
   name = <span class="hljs-meta-string">"JiraSettings"</span>,
   storages = [
       Storage(<span class="hljs-meta-string">"trackerSettings.xml"</span>)</span>
   ])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da wir einen Sonderfall haben, wenden wir uns der Dokumentation zur Speicherung sensibler Daten zu.</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getState</span><span class="hljs-params">()</span></span>: Credentials? {
   <span class="hljs-keyword">if</span> (credentials == <span class="hljs-literal">null</span>)  {
       <span class="hljs-keyword">val</span> credentialAttributes = createCredentialAttributes()<font></font>
       credentials = PasswordSafe.instance.<span class="hljs-keyword">get</span>(credentialAttributes)<font></font>
   }<font></font>
   <span class="hljs-keyword">return</span> credentials<font></font>
}<font></font>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadState</span><span class="hljs-params">(state: <span class="hljs-type">Credentials</span>)</span></span> {<font></font>
   credentials = state<font></font>
   <span class="hljs-keyword">val</span> credentialAttributes = createCredentialAttributes()<font></font>
   PasswordSafe.instance.<span class="hljs-keyword">set</span>(credentialAttributes, credentials)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine andere PersistingStateComponent übernimmt das Speichern der für verschiedene Zweige protokollierten Zeit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jira hat den Login herausgefunden. </font><font style="vertical-align: inherit;">Auch bei der Speicherung von Benutzerdaten. </font><font style="vertical-align: inherit;">Jetzt müssen Sie das Checkout-Ereignis in der Filiale irgendwie verfolgen, um den Countdown zu starten.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Abonnieren Sie Veranstaltungen</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die IntelliJ-Plattform bietet die Möglichkeit, Observer an Ereignisse zu binden, die für uns von Interesse sind, indem sie ihre Themen im messageBus der gewünschten Ebene abonnieren. </font><font style="vertical-align: inherit;">Hier ist das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dock</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , es ist ziemlich interessant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Thema ist ein bestimmter Endpunkt, eine Darstellung eines Ereignisses. </font><font style="vertical-align: inherit;">Alles, was Sie tun müssen, ist, einen Listener zu abonnieren und zu implementieren, der das Geschehen handhaben soll. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Beispiel muss ich mir Kassen in Git anhören ...</font></font><br>
<br>
<pre><code class="kotlin hljs">subscribeToProjectTopic(project, GitRepository.GIT_REPO_CHANGE) {<font></font>
    GitRepositoryChangeListener {<font></font>
        currentBranch = it.currentBranch<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... die Anwendung schließen (um die Zeit glücklich zu verpfänden) ...</font></font><br>
<br>
<pre><code class="kotlin hljs">subscribeToAppTopic(AppLifecycleListener.TOPIC) {
    <span class="hljs-keyword">object</span>: AppLifecycleListener {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">appWillBeClosed</span><span class="hljs-params">(isRestart: <span class="hljs-type">Boolean</span>)</span></span> {
            <span class="hljs-keyword">if</span> (!isRestart) {<font></font>
                JiraClient.logTime(entry.key, DateTime.now(), entry.value)<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... und Dokumente speichern (nur damit es so war).</font></font><br>
<br>
<pre><code class="kotlin hljs">subscribeToAppTopic(AppTopics.FILE_DOCUMENT_SYNC) {<font></font>
    CustomSaveListener()<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist im Prinzip bereits ausreichend (wenn nicht, können Sie immer Ihre eigenen schreiben). </font><font style="vertical-align: inherit;">Aber was ist, wenn wir die geringste Scroll- und Mausbewegung hören wollen?</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. EditorEventMulticaster</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es sammelt alles, was in den geöffneten Editorfenstern passiert - Bearbeiten, Ändern des sichtbaren Bereichs, Mausbewegungen - und ermöglicht es Ihnen, es an einem Ort und sofort zu abonnieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt haben wir alles was wir brauchen. </font><font style="vertical-align: inherit;">Wir können den Namen der Aufgabe in Jira aus dem aktuellen Zweig auswählen (falls vorhanden), die Arbeitszeit berechnen und das Studio sofort verlassen, um sie der Aufgabe hinzuzufügen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. Code und Details </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Ausführen benötigen Sie das neueste Android Studio (3.6.1). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Leistung zu testen - git und ein Zweig mit einem Namen, der der Aufgabe in Jira zumindest im entferntesten ähnlich ist. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit das Plugin die Zeit nicht nur an die Konsole ausgibt, sondern verfolgt - kommentieren Sie die entsprechende Zeile in Heartbeat.kt aus.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. Nützliche Links</font></font></h4><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine Reihe von Plugin-Entwicklungsartikeln</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein weiterer interessanter Artikel über die Entwicklung eines Plugins von einem Android-Entwickler</font></font></a></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS Und was hast du am Ende gewählt?</font></font></h4><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Verdammt, es ist irgendwie zu böse. </font><font style="vertical-align: inherit;">Und wenn ich keinen Code schreibe? </font><font style="vertical-align: inherit;">Und wenn ich meine Nase nehme und mich bemühe zu verstehen, was darin passiert? </font><font style="vertical-align: inherit;">Im Code im Sinne von. </font><font style="vertical-align: inherit;">Immerhin dauert dies die meiste Zeit. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Dann scrollen Sie wenigstens. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Es ist also nicht weit davon entfernt, gewalttätige Aktivitäten zu simulieren. </font><font style="vertical-align: inherit;">Und dann kann ich das Studio wochenlang nicht herunterfahren und nicht neu starten. </font><font style="vertical-align: inherit;">Vielleicht brauchen wir kein solches Glück? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 "Auf keinen Fall notwendig." </font><font style="vertical-align: inherit;">Dann ist noch ein Grund nötig, sonst habe ich gerne Plugins geschrieben. </font><font style="vertical-align: inherit;">Und ich habe VCS immer noch nicht wirklich verstanden. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Benutzt du es selbst?" </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Nein. </font><font style="vertical-align: inherit;">Ich habe irgendwie gelernt, mit meinen Händen zu loggen, unmerklich für mich.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de490772/index.html">So schreiben und veröffentlichen Sie einen intelligenten Vertrag im Telegram Open Network (TON)</a></li>
<li><a href="../de490774/index.html">Reaktionsschnell</a></li>
<li><a href="../de490778/index.html">Menschen, die die Arbeit eines Programmierers verstehen, sind überall zu finden</a></li>
<li><a href="../de490780/index.html">Intel Xeon Scalable Gen2: Großer Verkauf von Kernen</a></li>
<li><a href="../de490782/index.html">AnalogBytes-Konferenz: Roskomnadzor, Medien, Hochlast und alles in allem</a></li>
<li><a href="../de490786/index.html">Leckanalyse zweiter Ordnung: Wenn es von denen leckt, die Daten von einer Bank stehlen</a></li>
<li><a href="../de490788/index.html">Nutzlose REPL. Yandex-Bericht</a></li>
<li><a href="../de490790/index.html">Zip-Dateien: Verlauf, Erläuterung und Implementierung</a></li>
<li><a href="../de490792/index.html">VXLAN in NSX-V - Unruhige Unterlage</a></li>
<li><a href="../de490796/index.html">So automatisieren Sie die Sicherheit von Containern im Stil von Policy as Code mithilfe von CRD</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>