<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍⚕️ 🙎🏾 👩🏻‍🎨 Memantau semua memori yang digunakan oleh halaman web: performance.measureMemory () 🚐 💙 👨‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Penulis artikel, terjemahan yang kami terbitkan hari ini, berbicara tentang cara memonitor memori yang dialokasikan untuk halaman web. Perhatian yang ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Memantau semua memori yang digunakan oleh halaman web: performance.measureMemory ()</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/497986/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penulis artikel, terjemahan yang kami terbitkan hari ini, berbicara tentang cara memonitor memori yang dialokasikan untuk halaman web. </font><font style="vertical-align: inherit;">Perhatian yang cermat terhadap memori halaman yang bekerja dalam produksi membantu menjaga produktivitas proyek web pada tingkat tinggi.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/uj/ux/6i/ujux6ittjoa4u5aoapnuhggx4ca.jpeg"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Browser secara otomatis mengontrol memori yang dialokasikan ke halaman web. Ketika sebuah halaman membuat objek, browser, menggunakan mekanisme internal, mengalokasikan memori untuk menyimpan objek ini. Karena memori bukan sumber daya tak terbatas, peramban secara berkala melakukan pengumpulan sampah, di mana objek yang tidak perlu terdeteksi dan memori yang ditempatinya dihapus. Namun, proses mendeteksi objek semacam itu tidak ideal. Sudah </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terbukti</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bahwa identifikasi objek semacam itu benar-benar akurat dan lengkap adalah tugas yang tidak dapat dipecahkan. Akibatnya, browser mengganti gagasan untuk menemukan "objek yang tidak perlu" dengan gagasan menemukan "objek yang tidak terjangkau". Jika halaman web tidak dapat mengakses objek melalui variabel dan bidang objek lain yang dapat diakses, ini berarti browser dapat dengan aman menghapus memori yang ditempati oleh objek tersebut. Perbedaan antara "tidak perlu" dan "tidak terjangkau" menyebabkan kebocoran memori, seperti yang diilustrasikan dalam contoh berikut:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> object = { <span class="hljs-attr">a</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">1000</span>), <span class="hljs-attr">b</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">2000</span>) };<font></font>
setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(object.a), <span class="hljs-number">1000</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada array yang tidak perlu besar di sini </font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tetapi browser tidak membebaskan memori yang ditempatinya karena fakta bahwa itu dapat dicapai melalui properti objek </font></font><code>object.b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di callback. Akibatnya, memori yang ditempati oleh array ini bocor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kebocoran memori adalah </font><font style="vertical-align: inherit;">kejadian </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umum</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam pengembangan web. Mereka sangat mudah muncul dalam program ketika, misalnya, pengembang lupa untuk berhenti berlangganan dari pendengar acara, ketika mereka secara tidak sengaja menangkap objek dalam suatu elemen </font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ketika mereka lupa untuk menutup pekerja, ketika mereka mengumpulkan objek dalam array. Jika halaman web mengalami kebocoran memori, ini mengarah pada fakta bahwa seiring waktu pemakaian memori halaman meningkat. Halaman seperti itu tampaknya lambat dan lambat bagi pengguna.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Langkah pertama dalam memecahkan masalah ini adalah melakukan pengukuran. </font><font style="vertical-align: inherit;">API </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance.measureMemory () yang baru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memungkinkan pengembang untuk mengukur penggunaan memori berdasarkan halaman web dalam produksi dan, sebagai hasilnya, mendeteksi kebocoran memori yang lolos tes lokal.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa perbedaan antara API performance.measureMemory () yang baru dengan performance.memory yang lama?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda terbiasa dengan API non-standar yang ada </font></font><code>performance.memory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, maka Anda mungkin tertarik dengan pertanyaan tentang bagaimana API baru berbeda dari yang lama. Perbedaan utama adalah bahwa API lama mengembalikan ukuran tumpukan JavaScript, dan yang baru mengevaluasi penggunaan memori seluruh halaman web. Perbedaan ini penting ketika Chrome mengatur berbagi timbunan antara beberapa halaman web (atau beberapa contoh dari halaman yang sama). Dalam kasus seperti itu, hasil yang dikembalikan oleh API lama dapat terdistorsi. Karena API lama didefinisikan dalam istilah khusus untuk implementasi, seperti heap, menstandarkanasinya adalah bisnis tanpa harapan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perbedaan lainnya adalah bahwa di Chrome, API baru melakukan pengukuran memori saat mengumpulkan sampah. </font><font style="vertical-align: inherit;">Ini mengurangi "noise" dalam hasil pengukuran, tetapi mungkin perlu waktu untuk mendapatkan hasilnya. </font><font style="vertical-align: inherit;">Harap perhatikan bahwa pembuat browser lain dapat memutuskan untuk menerapkan API baru tanpa mengikat ke pengumpulan sampah.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cara yang Disarankan untuk Menggunakan API Baru</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penggunaan memori oleh halaman web tergantung pada kejadian, pada tindakan pengguna, pada pengumpulan sampah. </font><font style="vertical-align: inherit;">Itulah sebabnya API </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dirancang untuk mempelajari tingkat penggunaan memori dalam produksi. </font><font style="vertical-align: inherit;">Hasil memanggil API ini di lingkungan pengujian kurang bermanfaat. </font><font style="vertical-align: inherit;">Berikut adalah contoh opsi untuk menggunakannya:</font></font><br>
<br>
<ul>
<li>          -     .</li>
<li>A/B-  ,            .</li>
<li>            .</li>
<li>    ,  .           .</li>
</ul><br>
<h2><font color="#3AC1EF"> </font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat ini, API yang dipermasalahkan hanya didukung di Chrome 83, sesuai dengan skema Uji Coba Asal. </font><font style="vertical-align: inherit;">Hasil yang dikembalikan oleh API sangat tergantung pada implementasi, karena browser yang berbeda menggunakan cara yang berbeda untuk mewakili objek dalam memori dan cara yang berbeda untuk menilai tingkat penggunaan memori. </font><font style="vertical-align: inherit;">Browser dapat mengecualikan beberapa area memori dari akuntansi jika akuntansi lengkap dari semua memori yang digunakan adalah tugas yang terlalu sulit atau tidak mungkin dilakukan. </font><font style="vertical-align: inherit;">Sebagai hasilnya, kita dapat mengatakan bahwa hasil yang dihasilkan oleh API ini di browser yang berbeda tidak dapat dibandingkan. </font><font style="vertical-align: inherit;">Masuk akal untuk membandingkan hanya hasil yang diperoleh di browser yang sama.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kemajuan pekerjaan saat ini</font></font></font></h2><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langkah</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kondisi</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Membuat Penjelasan API</font></font><br>
</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lengkap</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Membuat spesifikasi konsep</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dilakukan</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Mengumpulkan umpan balik dan menyelesaikan proyek</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dilakukan</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Uji Coba Asal</font></font><br>
</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dilakukan</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Luncurkan</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Belum mulai</font></font></td>
</tr>
</tbody></table></div><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menggunakan performance.measureMemory ()</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Aktifkan Dukungan Uji Coba Asal</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
API </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tersedia di Chrome 83 sesuai dengan skema Uji Coba Asal. </font><font style="vertical-align: inherit;">Fase ini diharapkan berakhir dengan rilis Chrome 84. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Origin Trial memungkinkan pengembang untuk mengambil keuntungan dari fitur baru Chrome dan berbagi umpan balik tentang kenyamanan, kegunaan, dan keefektifan fitur-fitur ini dengan komunitas web. </font><font style="vertical-align: inherit;">Detail tentang program ini dapat ditemukan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Anda dapat berlangganan program di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">halaman</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pendaftaran.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Pendaftaran dalam program Origin Trial</font></font></font></h3><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minta</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> token untuk kesempatan yang menarik bagi Anda.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambahkan token ke halaman proyek percontohan. </font><font style="vertical-align: inherit;">Ada 2 cara untuk melakukan ini:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambahkan </font></font><code>&lt;meta&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tag </font></font><code>origin-trial</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke judul setiap halaman. </font><font style="vertical-align: inherit;">Sebagai contoh, mungkin terlihat seperti ini: </font></font><code>&lt;meta http-equiv="origin-trial" content="TOKEN_GOES_HERE"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda memiliki akses ke pengaturan server, itu dapat menambahkan token menggunakan header HTTP </font></font><code>Origin-Trial</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Akibatnya, respon header akan muncul sesuatu seperti berikut ini: </font></font><code>Origin-Trial: TOKEN_GOES_HERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul></li>
</ol><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Mengaktifkan fitur baru melalui bendera Chrome</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam rangka untuk bereksperimen dengan </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sementara pengeluaran dengan token Asal Trial, Anda perlu mengaktifkan bendera </font></font><code>#experimental-web-platform-features</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di </font></font><code>chrome://flags</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Periksa Penggunaan API</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Panggilan fungsi </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mungkin gagal, dengan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SecurityError dilemparkan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ini dapat terjadi jika lingkungan tidak memenuhi persyaratan keamanan untuk kebocoran informasi. </font><font style="vertical-align: inherit;">Selama uji Coba Asal di Chrome, API ini membutuhkan penyertaan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Isolasi Situs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ketika API siap untuk penggunaan normal, itu akan bergantung pada properti </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crossOriginIsolated</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Halaman web dapat beroperasi dalam mode ini dengan mengatur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COOP dan COEP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> header </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut ini contoh kode:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (performance.measureMemory) {
&nbsp;&nbsp;<span class="hljs-keyword">let</span> result;
&nbsp;&nbsp;<span class="hljs-keyword">try</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;result = <span class="hljs-keyword">await</span> performance.measureMemory();<font></font>
&nbsp;&nbsp;} <span class="hljs-keyword">catch</span> (error) {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> DOMException &amp;&amp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.name === <span class="hljs-string">"SecurityError"</span>) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The context is not secure."</span>);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;} <span class="hljs-keyword">else</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">throw</span> error;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(result);<font></font>
}<font></font>
</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Pengujian lokal</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chrome melakukan pengukuran memori saat mengumpulkan sampah. </font><font style="vertical-align: inherit;">Ini berarti bahwa mengakses API tidak secara instan menyelesaikan janji. </font><font style="vertical-align: inherit;">Untuk mendapatkan hasilnya, Anda harus menunggu sesi pengumpulan sampah berikutnya. </font><font style="vertical-align: inherit;">API secara paksa memulai pengumpulan sampah setelah batas waktu tertentu, yang saat ini diatur ke 20 detik. </font><font style="vertical-align: inherit;">Jika Anda menjalankan Chrome dengan bendera baris perintah </font></font><code>--enable-blink-features='ForceEagerMeasureMemory'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, batas waktu akan dikurangi menjadi nol, yang berguna untuk debugging lokal dan pengujian lokal.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Disarankan agar Anda menggunakan API baru dengan menetapkan monitor memori global yang mengukur tingkat penggunaan memori seluruh halaman dan mengirimkan hasilnya ke server, di mana mereka dapat dikumpulkan dan dianalisis. Cara termudah untuk bekerja dengan API ini adalah dengan melakukan pengukuran berkala. Misalnya, mereka dapat berjalan setiap </font></font><code>M</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menit. Ini, bagaimanapun, memperkenalkan distorsi ke dalam data, karena puncak dalam penggunaan memori dapat terjadi di antara pengukuran. Contoh berikut menunjukkan bagaimana, menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proses Poisson</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , untuk membuat pengukuran bebas dari kesalahan sistematis. Pendekatan ini memastikan bahwa sesi pengukuran dapat, dengan probabilitas yang sama, terjadi di setiap titik waktu (di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini adalah</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> demonstrasi dari pendekatan ini,</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah kode sumber). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, mendeklarasikan fungsi yang merencanakan awal sesi berikutnya untuk mengukur jumlah memori yang dikonsumsi menggunakan fungsi </font></font><code>setTimeout()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan interval yang ditetapkan secara acak. </font><font style="vertical-align: inherit;">Fungsi ini harus dipanggil setelah memuat halaman di jendela browser.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scheduleMeasurement</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">if</span> (!performance.measureMemory) {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"performance.measureMemory() is not available."</span>);
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;<font></font>
&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> interval = measurementInterval();
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Scheduling memory measurement in "</span> +
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">Math</span>.round(interval / <span class="hljs-number">1000</span>) + <span class="hljs-string">" seconds."</span>);<font></font>
&nbsp;&nbsp;setTimeout(performMeasurement, interval);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//       .</span>
<span class="hljs-built_in">window</span>.onload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{<font></font>
&nbsp;&nbsp;scheduleMeasurement();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fungsi </font></font><code>measurementInterval()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menemukan interval acak, dinyatakan dalam milidetik, diatur sedemikian rupa sehingga satu pengukuran akan dilakukan kira-kira setiap lima menit. </font><font style="vertical-align: inherit;">Jika Anda tertarik pada konsep matematika yang menjadi dasar fungsi ini, baca tentang </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">distribusi eksponensial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">measurementInterval</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">const</span> MEAN_INTERVAL_IN_MS = <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>;
&nbsp;&nbsp;<span class="hljs-keyword">return</span> -<span class="hljs-built_in">Math</span>.log(<span class="hljs-built_in">Math</span>.random()) * MEAN_INTERVAL_IN_MS;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, fungsi asinkron </font></font><code>performMeasurement()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memanggil API kami, mencatat hasilnya, dan merencanakan pengukuran berikutnya.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">performMeasurement</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-comment">// 1.  performance.measureMemory().</span>
&nbsp;&nbsp;<span class="hljs-keyword">let</span> result;
&nbsp;&nbsp;<span class="hljs-keyword">try</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;result = <span class="hljs-keyword">await</span> performance.measureMemory();<font></font>
&nbsp;&nbsp;} <span class="hljs-keyword">catch</span> (error) {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> DOMException &amp;&amp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.name === <span class="hljs-string">"SecurityError"</span>) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The context is not secure."</span>);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//    .</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">throw</span> error;<font></font>
&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;<span class="hljs-comment">// 2.  .</span>
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Memory usage:"</span>, result);
&nbsp;&nbsp;<span class="hljs-comment">// 3.   .</span><font></font>
&nbsp;&nbsp;scheduleMeasurement();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasil pengukuran mungkin terlihat seperti ini:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// ,    :</span><font></font>
{<font></font>
&nbsp;&nbsp;<span class="hljs-attr">bytes</span>: <span class="hljs-number">60</span>_000_000,
&nbsp;&nbsp;<span class="hljs-attr">breakdown</span>: [<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">bytes</span>: <span class="hljs-number">40</span>_000_000,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">attribution</span>: [<span class="hljs-string">"https://foo.com"</span>],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">userAgentSpecificTypes</span>: [<span class="hljs-string">"Window"</span>, <span class="hljs-string">"JS"</span>]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;},<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">bytes</span>: <span class="hljs-number">20</span>_000_000,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">attribution</span>: [<span class="hljs-string">"https://foo.com/iframe"</span>],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">userAgentSpecificTypes</span>: [<span class="hljs-string">"Window"</span>, <span class="hljs-string">"JS"</span>]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;]<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perkiraan tingkat keseluruhan penggunaan memori ditampilkan di bidang </font></font><code>bytes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Saat memperoleh estimasi ini, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pemisah</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> digit angka digunakan. Nilai-nilai ini sangat tergantung pada implementasi. Jika mereka diterima untuk browser yang berbeda, maka Anda tidak dapat membandingkannya. Cara mereka diperoleh dapat bervariasi bahkan dalam berbagai versi browser yang sama. Selama program Origin Trial berlangsung, nilai kembali mencakup indikator penggunaan memori JavaScript oleh jendela utama, indikator penggunaan elemen memori dari </font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">situs yang sama, dan indikator jendela terkait. Ketika API siap, nilai ini akan mewakili informasi tentang memori yang dikonsumsi oleh JavaScript, DOM, semua elemen yang </font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terkait dengan windows dan pekerja web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daftar</font></font><code>breakdown</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memberikan informasi lebih rinci tentang memori yang digunakan. </font><font style="vertical-align: inherit;">Setiap entri menggambarkan sepotong memori dan mengaitkan fragmen ini dengan satu set jendela, elemen, </font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau pekerja yang diidentifikasi oleh URL. </font><font style="vertical-align: inherit;">Bidang ini </font></font><code>userAgentSpecificTypes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mencantumkan jenis memori yang ditentukan oleh fitur implementasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penting untuk mempertimbangkan daftar-daftar ini secara umum dan tidak mencoba, bergantung pada fitur-fitur browser tertentu, untuk menganalisis semuanya berdasarkan pada mereka. </font><font style="vertical-align: inherit;">Misalnya, beberapa browser dapat mengembalikan daftar </font></font><code>breakdown</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kosong atau bidang kosong </font></font><code>attribution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Peramban lain dapat mengembalikan </font></font><code>attribution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beberapa URL </font><font style="vertical-align: inherit;">dalam suatu elemen </font><font style="vertical-align: inherit;">, yang menunjukkan bahwa mereka tidak dapat menentukan dari URL mana memori ini berada.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Umpan balik</font></font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grup Komunitas Kinerja Web</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan tim pengembangan Chrome akan dengan senang hati mengetahui apa yang Anda pikirkan </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan pelajari tentang pengalaman Anda menggunakan API ini.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagikan ide Anda tentang perangkat API dengan kami</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apakah ada sesuatu dalam API ini yang tidak berfungsi seperti yang diharapkan? </font><font style="vertical-align: inherit;">Mungkin itu kekurangan sesuatu yang Anda butuhkan untuk mengimplementasikan ide Anda? </font><font style="vertical-align: inherit;">Buka tugas baru di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pelacak</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> proyek atau komentari tugas yang ada.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laporkan masalah implementasi</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menemukan bug dalam implementasi Chrome Anda? </font><font style="vertical-align: inherit;">Atau mungkin ternyata implementasinya berbeda dengan spesifikasinya? </font><font style="vertical-align: inherit;">Catat kesalahan di sini: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">new.crbug.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Cobalah untuk memasukkan sebanyak mungkin detail dalam pesan Anda, sertakan instruksi sederhana tentang cara mereproduksi kesalahan, dan tunjukkan bahwa masalahnya terkait </font></font><code>Blink&gt;PerformanceAPIs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Glitch adalah cara yang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sangat baik untuk menunjukkan kesalahan </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dukung kami</font></font></font></h2><br><font style="vertical-align: inherit;"></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apakah Anda </font><font style="vertical-align: inherit;">
berencana untuk menggunakannya </font><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">Jika memang begitu, katakan kepada kami tentang itu. </font><font style="vertical-align: inherit;">Kisah-kisah ini membantu memprioritaskan tim pengembangan Chrome. </font><font style="vertical-align: inherit;">Kisah-kisah ini menunjukkan kepada pencipta browser lain pentingnya mendukung fitur baru. </font><font style="vertical-align: inherit;">Jika Anda mau, kirim tweet ke </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ChromiumDev</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan beri tahu kami di mana dan bagaimana Anda menggunakan API baru. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pembaca yang budiman! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sudahkah Anda mencoba </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id497964/index.html">Telemedicine. Reverse Stetoskop Elektronik Rekayasa</a></li>
<li><a href="../id497968/index.html">Sumber Daya Pengembang Web: API dan Elemen UI</a></li>
<li><a href="../id497980/index.html">Berapa banyak air yang bocor? Kami memecahkan masalah dengan moonwalk di Haskell</a></li>
<li><a href="../id497982/index.html">Pendekatan fungsional dan proses terhadap manajemen. Bagaimana dan apa yang harus dikelola?</a></li>
<li><a href="../id497984/index.html">Bermigrasi dari reCAPTCHA ke hCaptcha di Cloudflare</a></li>
<li><a href="../id497988/index.html">Bereaksi Profil Kinerja Aplikasi</a></li>
<li><a href="../id497990/index.html">PostgreSQL: Pengembangan ekstensi (fungsi) dalam bahasa C.</a></li>
<li><a href="../id497994/index.html">Analisis mekanika bahasa lolos</a></li>
<li><a href="../id497996/index.html">Anda tidak ingin memperkuat kekebalan tubuh. Atau ekstrem dari tubuh manusia</a></li>
<li><a href="../id498000/index.html">Hal-hal yang ingin saya ketahui sebelum mengembangkan game saya sendiri</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>