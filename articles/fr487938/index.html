<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤸🏼 🏇🏾 🐸 Présentation d'effector-dom à l'aide de l'exemple de liste de tâches 🙆🏻 👨‍👦 👨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beaucoup connaissent déjà le directeur de l' État effecteur , quelqu'un non seulement l'a regardé, mais l'a également utilisé dans la prod. Depuis la ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Présentation d'effector-dom à l'aide de l'exemple de liste de tâches</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487938/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beaucoup connaissent déjà le directeur de l' </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">État effecteur</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , quelqu'un non seulement l'a regardé, mais l'a également utilisé dans la prod. </font><font style="vertical-align: inherit;">Depuis la fin de l'automne, son auteur développe activement des devtools pour un effecteur, et au cours de ce travail, il a réussi à écrire une bibliothèque très intéressante pour le rendu d'une application - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">effecteur-dom</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous allons apprendre à connaître ce rendu - dans ce tutoriel, nous allons créer une application Todo simple.</font></font></p><br>
<p><img src="https://habrastorage.org/webt/kr/xi/pv/krxipv3g8jrmgmod4mh2qwcsmu8.png"></p><br>
<p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>effector</strong></a>,    — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>effector-dom</strong></a>.</p><br>
<p>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>todomvc-app-template</strong></a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>todomvc-app-css</strong></a>   <strong>tastejs</strong>.</p><a name="habracut"></a><br>
<h4 id="1-podgotovka-proekta">1.  </h4><br>
<p>,        npm,    npm,    webpack      (   —    webpack boilerplate).</p><br>
<p>    ,      :<br>
<code>npm install effector@20.11.5 effector-dom@0.0.10 todomvc-app-css</code></p><br>
<h4 id="2-nachnem">2. </h4><br>
<p>     .</p><br>
<p> ,     ,     ,    - best practices       .</p><br>
<p>     ,           .</p><br>
<p>       :</p><br>
<pre><code class="javascript hljs">srs/<font></font>
  view/<font></font>
    app.js <span class="hljs-comment">//   </span>
    title.js <span class="hljs-comment">// </span>
    footer.js <span class="hljs-comment">//  ,  ,   </span>
    header.js <span class="hljs-comment">//   ,   </span>
    main.js <span class="hljs-comment">//  </span>
    todoItem.js <span class="hljs-comment">//  ,   </span>
  model.js <span class="hljs-comment">//  </span>
  index.js <span class="hljs-comment">//   </span></code></pre><br>
<h4 id="3-sozdanie-logiki">3.  </h4><br>
<p>   ,    :   ,      ,    .</p><br>
<p>     ( undefined)   Store,   — Event.</p><br>
<p>        combine,      .</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/model.js</span>
<span class="hljs-keyword">import</span> {createStore, createEvent, combine} <span class="hljs-keyword">from</span> <span class="hljs-string">'effector'</span>;<font></font>
<font></font>
<span class="hljs-comment">// </span><font></font>
<font></font>
<span class="hljs-comment">//  </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> $todos = createStore([]); <font></font>
<font></font>
<span class="hljs-comment">//  ,    null/true/false</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> $activeFilter = createStore(<span class="hljs-literal">null</span>); <font></font>
<font></font>
<span class="hljs-comment">//  </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> $filteredTodos = combine(<font></font>
  $todos,<font></font>
  $activeFilter,<font></font>
  (todos, filter) =&gt; filter === <span class="hljs-literal">null</span><font></font>
    ? todos<font></font>
    : todos.filter(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.completed === filter)<font></font>
);<font></font>
<font></font>
<span class="hljs-comment">// </span><font></font>
<font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> appended = createEvent(); <font></font>
<font></font>
<span class="hljs-comment">// /  </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> toggled = createEvent();<font></font>
<font></font>
<span class="hljs-comment">//  </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> removed = createEvent();<font></font>
<font></font>
<span class="hljs-comment">//    </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> allCompleted = createEvent();<font></font>
<font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> completedRemoved = createEvent();<font></font>
<font></font>
<span class="hljs-comment">//  </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> filtered = createEvent();</code></pre><br>
<p>           .<br>
        ,    store.on</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/model.js</span><font></font>
...<font></font>
<font></font>
$todos<font></font>
  <span class="hljs-comment">//   </span>
  .on(appended, (state, title) =&gt; [...state, {title, <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span>}])
  <span class="hljs-comment">//  .     title</span>
  .on(removed, (state, title) =&gt; state.filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.title !== title)) 
  <span class="hljs-comment">// / </span>
  .on(toggled, (state, title) =&gt; state.map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.title === title <font></font>
    ? ({...item, <span class="hljs-attr">completed</span>: !item.completed})<font></font>
    : item))<font></font>
  <span class="hljs-comment">//   </span>
  .on(allCompleted, state =&gt; state.map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.completed<font></font>
    ? item<font></font>
    : ({...item, <span class="hljs-attr">completed</span>: <span class="hljs-literal">true</span>})))
  <span class="hljs-comment">//   </span>
  .on(completedRemoved, state =&gt; state.filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> !item.completed));<font></font>
<font></font>
$activeFilter<font></font>
  <span class="hljs-comment">// </span>
  .on(filtered, (_, filter) =&gt; filter);</code></pre><br>
<p>     .            .</p><br>
<h4 id="4-sozdanie-obschey-view">4.   view</h4><br>
<p> view    effector-dom.   ,   SwiftUI    .</p><br>
<p>    ,     ,          .       dom-         .</p><br>
<p>   effector-dom      dom ,       .     using,    dom-  ,    :</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/index.js</span>
<span class="hljs-keyword">import</span> {using} <span class="hljs-keyword">from</span> <span class="hljs-string">'effector-dom'</span>;
<span class="hljs-keyword">import</span> {App} <span class="hljs-keyword">from</span> <span class="hljs-string">'./view/app'</span>;<font></font>
<font></font>
using(<span class="hljs-built_in">document</span>.body, () =&gt; {<font></font>
  App();<font></font>
});</code></pre><br>
<p>       h,      dom-  ,    .</p><br>
<p>   dom-   spec,       :</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/view/app.js</span>
<span class="hljs-keyword">import</span> {h, spec} <span class="hljs-keyword">from</span> <span class="hljs-string">'effector-dom'</span>;
<span class="hljs-keyword">import</span> classes <span class="hljs-keyword">from</span> <span class="hljs-string">'todomvc-app-css/index.css'</span>;
<span class="hljs-keyword">import</span> {Header} <span class="hljs-keyword">from</span> <span class="hljs-string">'./header'</span>;
<span class="hljs-keyword">import</span> {Main} <span class="hljs-keyword">from</span> <span class="hljs-string">'./main'</span>;
<span class="hljs-keyword">import</span> {Footer} <span class="hljs-keyword">from</span> <span class="hljs-string">'./footer'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-comment">//  section </span>
  h(<span class="hljs-string">'section'</span>, () =&gt; {
    <span class="hljs-comment">//    </span>
    spec({<span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: classes.todoapp}});<font></font>
<font></font>
    <span class="hljs-comment">//     </span><font></font>
    Header();<font></font>
    Main();<font></font>
    Footer();<font></font>
  });<font></font>
};</code></pre><br>
<p>     .</p><br>
<h4 id="5-sozdanie-zagolovka">5.  </h4><br>
<p>     h1   .</p><br>
<p>   dom-      ,   ,     .   spec   ,          :</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/view/title.js</span>
<span class="hljs-keyword">import</span> {h} <span class="hljs-keyword">from</span> <span class="hljs-string">'effector-dom'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Title = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
  h(<span class="hljs-string">'h1'</span>, {<span class="hljs-attr">text</span>: <span class="hljs-string">'todos'</span>});<font></font>
};</code></pre><br>
<h4 id="6-sozdanie-novoy-zadachi">6.   </h4><br>
<p>  ,  effector-dom     effector   ,    ,    ..</p><br>
<p>            ,     header.      dom-   spec (   ),   handler.</p><br>
<p>             ,    input ,   $value   input.</p><br>
<p>          sample      .  api  sample —    ,        —   ,         : event = sample($store, triggerEvent).</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/view/header.js</span>
<span class="hljs-keyword">import</span> {h, spec} <span class="hljs-keyword">from</span> <span class="hljs-string">'effector-dom'</span>;
<span class="hljs-keyword">import</span> {createEvent, createStore, forward, sample} <span class="hljs-keyword">from</span> <span class="hljs-string">'effector'</span>;
<span class="hljs-keyword">import</span> classes <span class="hljs-keyword">from</span> <span class="hljs-string">'todomvc-app-css/index.css'</span>;
<span class="hljs-keyword">import</span> {Title} <span class="hljs-keyword">from</span> <span class="hljs-string">'./title'</span>;
<span class="hljs-keyword">import</span> {appended} <span class="hljs-keyword">from</span> <span class="hljs-string">'../model'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Header = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
  h(<span class="hljs-string">'header'</span>, () =&gt; {<font></font>
    Title();<font></font>
<font></font>
    h(<span class="hljs-string">'input'</span>, () =&gt; {
      <span class="hljs-keyword">const</span> keypress = createEvent();
      <span class="hljs-keyword">const</span> input = createEvent();<font></font>
<font></font>
      <span class="hljs-comment">//   ,</span>
      <span class="hljs-keyword">const</span> submit = keypress.filter({<span class="hljs-attr">fn</span>: <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> e.key === <span class="hljs-string">'Enter'</span>});<font></font>
<font></font>
      <span class="hljs-comment">//     </span>
      <span class="hljs-keyword">const</span> $value = createStore(<span class="hljs-string">''</span>)<font></font>
        .on(input, (_, e) =&gt; e.target.value)<font></font>
        .reset(appended); <span class="hljs-comment">//    </span><font></font>
<font></font>
      <span class="hljs-comment">//         forward({from, to})</span><font></font>
      forward({ <font></font>
        <span class="hljs-comment">//    $value   submit,</span>
        <span class="hljs-comment">//       </span>
        <span class="hljs-attr">from</span>: sample($value, submit).filter({<span class="hljs-attr">fn</span>: <span class="hljs-built_in">Boolean</span>}), 
        <span class="hljs-attr">to</span>: appended,<font></font>
      });<font></font>
<font></font>
      spec({<font></font>
        <span class="hljs-attr">attr</span>: {
          <span class="hljs-attr">class</span>: classes[<span class="hljs-string">"new-todo"</span>],
          <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'What needs to be done?'</span>,
          <span class="hljs-attr">value</span>: $value<font></font>
        },<font></font>
        <span class="hljs-attr">handler</span>: {keypress, input},<font></font>
      })<font></font>
    });<font></font>
  });<font></font>
};</code></pre><br>
<h4 id="7-sozdanie-spiska-zadach">7.   </h4><br>
<p>   ,  effector-dom    list.</p><br>
<p>    —    ,     ,      .       list($store, itemCallback)       .</p><br>
<p>     .</p><br>
<p> ,   todomvc-app-css    -     ,     .    .</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/view/main.js</span>
<span class="hljs-keyword">import</span> {h, spec, list} <span class="hljs-keyword">from</span> <span class="hljs-string">'effector-dom'</span>;
<span class="hljs-keyword">import</span> classes <span class="hljs-keyword">from</span> <span class="hljs-string">'todomvc-app-css/index.css'</span>;
<span class="hljs-keyword">import</span> {TodoItem} <span class="hljs-keyword">from</span> <span class="hljs-string">'./todoItem'</span>;
<span class="hljs-keyword">import</span> {$filteredTodos, allCompleted} <span class="hljs-keyword">from</span> <span class="hljs-string">'../model'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Main = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
  h(<span class="hljs-string">'section'</span>, () =&gt; {<font></font>
    spec({<span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: classes.main}});<font></font>
<font></font>
    <span class="hljs-comment">//   </span>
    h(<span class="hljs-string">'input'</span>, {
      <span class="hljs-attr">attr</span>: {<span class="hljs-attr">id</span>: <span class="hljs-string">'toggle-all'</span>, <span class="hljs-attr">class</span>: classes[<span class="hljs-string">'toggle-all'</span>], <span class="hljs-attr">type</span>: <span class="hljs-string">'checkbox'</span>}<font></font>
    });<font></font>
    h(<span class="hljs-string">'label'</span>, {<span class="hljs-attr">attr</span>: {<span class="hljs-attr">for</span>: <span class="hljs-string">'toggle-all'</span>}, <span class="hljs-attr">handler</span>: {<span class="hljs-attr">click</span>: allCompleted}});<font></font>
<font></font>
    <span class="hljs-comment">//  </span>
    h(<span class="hljs-string">'ul'</span>, () =&gt; {<font></font>
      spec({<span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: classes[<span class="hljs-string">"todo-list"</span>]}});<font></font>
      list({<font></font>
        <span class="hljs-attr">source</span>: $filteredTodos,
        <span class="hljs-attr">key</span>: <span class="hljs-string">'title'</span>,
        <span class="hljs-attr">fields</span>: [<span class="hljs-string">'title'</span>, <span class="hljs-string">'completed'</span>]
        <span class="hljs-comment">//  fields     </span>
      }, ({<span class="hljs-attr">fields</span>: [title, completed], key}) =&gt; TodoItem({title, completed, key})); <font></font>
    });<font></font>
  });<font></font>
};</code></pre><br>
<h4 id="8-sozdanie-otdelnoy-zadachi">8.   </h4><br>
<p>  ,  effector-dom        -   ,    .. </p><br>
<p>     ,       toggled  removed -     — .</p><br>
<p>    effector       —      event.prepend.</p><br>
<p>          store.map</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/view/todoItem.js</span>
<span class="hljs-keyword">import</span> {h, spec} <span class="hljs-keyword">from</span> <span class="hljs-string">'effector-dom'</span>;
<span class="hljs-keyword">import</span> classes <span class="hljs-keyword">from</span> <span class="hljs-string">'todomvc-app-css/index.css'</span>;
<span class="hljs-keyword">import</span> {toggled, removed} <span class="hljs-keyword">from</span> <span class="hljs-string">'../model'</span>;<font></font>
<font></font>
<span class="hljs-comment">// title  completed -    </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> TodoItem = <span class="hljs-function">(<span class="hljs-params">{title, completed, key}</span>) =&gt;</span> {<font></font>
  h(<span class="hljs-string">'li'</span>, () =&gt; {
    <span class="hljs-comment">//       </span>
    spec({<span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: completed.map(<span class="hljs-function"><span class="hljs-params">flag</span> =&gt;</span> flag ? classes.completed : <span class="hljs-literal">false</span>)}});<font></font>
<font></font>
    h(<span class="hljs-string">'div'</span>, () =&gt; {<font></font>
      spec({<span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: classes.view}});<font></font>
<font></font>
      h(<span class="hljs-string">'input'</span>, {
        <span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: classes.toggle, <span class="hljs-attr">type</span>: <span class="hljs-string">'checkbox'</span>, <span class="hljs-attr">checked</span>: completed},
        <span class="hljs-comment">//     </span>
        <span class="hljs-attr">handler</span>: {<span class="hljs-attr">click</span>: toggled.prepend(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> key)},<font></font>
      });<font></font>
<font></font>
      h(<span class="hljs-string">'label'</span>, {<span class="hljs-attr">text</span>: title});<font></font>
<font></font>
      h(<span class="hljs-string">'button'</span>, {
        <span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: classes.destroy},
        <span class="hljs-comment">//     </span>
        <span class="hljs-attr">handler</span>: {<span class="hljs-attr">click</span>: removed.prepend(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> key)},<font></font>
      });<font></font>
    });<font></font>
  });<font></font>
};</code></pre><br>
<h4 id="9-sozdanie-futera">9.  </h4><br>
<p>        ,      </p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/view/footer.js</span>
<span class="hljs-keyword">import</span> {h, spec} <span class="hljs-keyword">from</span> <span class="hljs-string">'effector-dom'</span>;
<span class="hljs-keyword">import</span> classes <span class="hljs-keyword">from</span> <span class="hljs-string">'todomvc-app-css/index.css'</span>;
<span class="hljs-keyword">import</span> {$todos, $activeFilter, filtered, completedRemoved} <span class="hljs-keyword">from</span> <span class="hljs-string">'../model'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Footer = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
  h(<span class="hljs-string">'footer'</span>, () =&gt; {<font></font>
    spec({<span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: classes[<span class="hljs-string">'footer'</span>]}});<font></font>
<font></font>
    h(<span class="hljs-string">'span'</span>, () =&gt; { <span class="hljs-comment">//   </span>
      spec({<span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: classes[<span class="hljs-string">'todo-count'</span>]}});<font></font>
<font></font>
      <span class="hljs-keyword">const</span> $activeCount = $todos.map(
        <span class="hljs-function"><span class="hljs-params">todos</span> =&gt;</span> todos.filter(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> !todo.completed).length<font></font>
      );<font></font>
<font></font>
      h(<span class="hljs-string">'strong'</span>, {<span class="hljs-attr">text</span>: $activeCount});<font></font>
      h(<span class="hljs-string">'span'</span>, {<span class="hljs-attr">text</span>: $activeCount.map(<span class="hljs-function"><span class="hljs-params">count</span> =&gt;</span> count === <span class="hljs-number">1</span>
        ? <span class="hljs-string">' item left'</span>
        : <span class="hljs-string">' items left'</span><font></font>
      )});<font></font>
    });<font></font>
<font></font>
    h(<span class="hljs-string">'ul'</span>, () =&gt; { <span class="hljs-comment">//  ,  </span>
      spec({<span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: classes.filters}});<font></font>
<font></font>
      h(<span class="hljs-string">'li'</span>, () =&gt; {<font></font>
        h(<span class="hljs-string">'a'</span>, {
          <span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: $activeFilter.map(<span class="hljs-function"><span class="hljs-params">active</span> =&gt;</span> active === <span class="hljs-literal">null</span><font></font>
            ? classes.selected<font></font>
            : <span class="hljs-literal">false</span><font></font>
          )},<font></font>
          <span class="hljs-attr">text</span>: <span class="hljs-string">'All'</span>,
          <span class="hljs-attr">handler</span>: {<span class="hljs-attr">click</span>: filtered.prepend(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-literal">null</span>)},<font></font>
        });<font></font>
      });<font></font>
<font></font>
      h(<span class="hljs-string">'li'</span>, () =&gt; {<font></font>
        h(<span class="hljs-string">'a'</span>, {
          <span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: $activeFilter.map(<span class="hljs-function"><span class="hljs-params">completed</span> =&gt;</span> completed === <span class="hljs-literal">false</span><font></font>
            ? classes.selected<font></font>
            : <span class="hljs-literal">false</span><font></font>
          )},<font></font>
          <span class="hljs-attr">text</span>: <span class="hljs-string">'Active'</span>,
          <span class="hljs-attr">handler</span>: {<span class="hljs-attr">click</span>: filtered.prepend(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-literal">false</span>)},  <font></font>
        });<font></font>
      });<font></font>
<font></font>
      h(<span class="hljs-string">'li'</span>, () =&gt; {<font></font>
        h(<span class="hljs-string">'a'</span>, {
          <span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: $activeFilter.map(<span class="hljs-function"><span class="hljs-params">completed</span> =&gt;</span> completed === <span class="hljs-literal">true</span><font></font>
            ? classes.selected<font></font>
            : <span class="hljs-literal">false</span><font></font>
          )},<font></font>
          <span class="hljs-attr">text</span>: <span class="hljs-string">'Completed'</span>,
          <span class="hljs-attr">handler</span>: {<span class="hljs-attr">click</span>: filtered.prepend(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-literal">true</span>)},<font></font>
        });<font></font>
      });<font></font>
    });<font></font>
<font></font>
    h(<span class="hljs-string">'button'</span>, {
      <span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: classes[<span class="hljs-string">'clear-completed'</span>]},
      <span class="hljs-attr">text</span>: <span class="hljs-string">'Clear completed'</span>,
      <span class="hljs-attr">handler</span>: {<span class="hljs-attr">click</span>: completedRemoved},<font></font>
    });<font></font>
  });<font></font>
};</code></pre><br>
<h4 id="10-utochneniya">10. </h4><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une telle application simple s'est avérée, elle a été spécialement rendue aussi simple que possible, avec une séparation minimale en entités distinctes.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bien sûr, si vous le souhaitez, les mêmes boutons de filtre peuvent être retirés dans une entité distincte, qui peut être utilisée pour transmettre le type et le nom du filtre.</font></font></p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> FilterButton = <span class="hljs-function">(<span class="hljs-params">{filter, text}</span>) =&gt;</span> {<font></font>
  h(<span class="hljs-string">'li'</span>, () =&gt; {<font></font>
    h(<span class="hljs-string">'a'</span>, {
      <span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: $activeFilter.map(<span class="hljs-function"><span class="hljs-params">completed</span> =&gt;</span> completed === filter<font></font>
        ? classes.selected<font></font>
        : <span class="hljs-literal">false</span><font></font>
      )},<font></font>
      <span class="hljs-attr">text</span>: text,
      <span class="hljs-attr">handler</span>: {<span class="hljs-attr">click</span>: filtered.prepend(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> filter)},  <font></font>
    });<font></font>
  });<font></font>
};<font></font>
<font></font>
h(<span class="hljs-string">'ul'</span>, () =&gt; { <font></font>
  spec({<span class="hljs-attr">attr</span>: {<span class="hljs-attr">class</span>: classes.filters}});<font></font>
<font></font>
  FilterButton({<span class="hljs-attr">filter</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'All'</span>});<font></font>
  FilterButton({<span class="hljs-attr">filter</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'Active'</span>});<font></font>
  FilterButton({<span class="hljs-attr">filter</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'Completed'</span>});<font></font>
});</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De la même manière, grâce à son travail basé sur la pile, effector-dom vous permet de rendre librement non seulement des éléments individuels, mais aussi un comportement général.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le code rendu sera appliqué spécifiquement aux éléments nécessaires, par exemple:</font></font></p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> WithFocus = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> focus = createEvent();<font></font>
  focus.watch(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'focused'</span>));<font></font>
<font></font>
  spec({<span class="hljs-attr">handler</span>: {focus}});<font></font>
};<font></font>
<font></font>
h(<span class="hljs-string">'input'</span>, () =&gt; {<font></font>
  ...<font></font>
  WithFocus();<font></font>
  ...<font></font>
});</code></pre><br>
<h4 id="11-itogo"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11. Total</font></font></h4><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai été personnellement impressionné par la simplicité de travailler avec le nouveau rendu, d'autant plus que j'avais déjà de l'expérience avec effector dans une grande application.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'attends avec impatience une version stable, une sorte de vulgarisation pour avoir l'opportunité d'utiliser le rendu dans la prod.</font></font></p></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr487924/index.html">Kim Dotcom: Caught, la personne la plus recherchée en ligne. 3e partie</a></li>
<li><a href="../fr487926/index.html">En quête d'éducation physique</a></li>
<li><a href="../fr487930/index.html">Soirée conférence je veux gamedev</a></li>
<li><a href="../fr487932/index.html">Cartes normales idéales pour Unity (et d'autres programmes)</a></li>
<li><a href="../fr487934/index.html">Comment nous avons optimisé notre serveur DNS à l'aide des outils GO</a></li>
<li><a href="../fr487940/index.html">Informatique reproductible en R. Comment séparer le code et les données?</a></li>
<li><a href="../fr487944/index.html">L'apprentissage automatique dans le secteur de l'énergie, ou pas seulement tout le monde peut regarder demain</a></li>
<li><a href="../fr487948/index.html">Authentification à deux facteurs dans OpenVPN avec bot Telegram</a></li>
<li><a href="../hi486176/index.html">कॉर्पोरेट ईमेल पत्राचार मेमो</a></li>
<li><a href="../hi486178/index.html">FOSS News No. 1 - 27 जनवरी - 2 फरवरी, 2020 के लिए स्वतंत्र और मुक्त स्रोत समाचार की समीक्षा</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>