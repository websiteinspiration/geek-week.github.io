<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐌 🙂 ✍🏼 Rust pour les développeurs Java 🥨 🎴 👨🏼‍🎓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je présente une traduction d'un article d' Evan Cameron , qui peut aider les développeurs Java à mieux comprendre les différences et les similitudes e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Rust pour les développeurs Java</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501356/"><p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je présente une traduction d'un article d' </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Evan Cameron</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui peut aider les développeurs Java à mieux comprendre les différences et les similitudes entre les deux langues - l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">original est sur le site de l'auteur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ne me considérant pas comme un développeur Rust expérimenté, il est peu probable que je puisse raisonnablement participer à d'éventuelles discussions.</font></font></em></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je voudrais apporter des modifications au blog et laisser des sujets plus sensibles pour me concentrer sur eux. Peut-être l'un des sujets les plus importants qui peuvent être traités dans la communauté Rust est la formation de nouveaux développeurs. Je réfléchissais à la meilleure approche pour enseigner Rust à ceux qui ont l'habitude de travailler avec Java et aider à maîtriser le langage pour un nouveau projet.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java était une langue que j'ai étudiée à l'université, donc mon expérience avec elle est quelque peu anachronique et je n'ai fait aucune tentative réelle pour suivre la langue. </font><font style="vertical-align: inherit;">La dernière fois que j'ai écrit Java, si vous vouliez passer une fonction en argument, vous deviez déclarer une nouvelle interface ou envelopper la fonction </font></font><code>Callable&lt;T&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Depuis lors, Java a parcouru un long chemin. </font><font style="vertical-align: inherit;">Ce sont des fonctions ajoutées qui ont un effet clair de la programmation fonctionnelle. </font><font style="vertical-align: inherit;">Je parle de lambdas, de </font></font><code>Optional</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">types, etc. </font><font style="vertical-align: inherit;">Cet article ne parlera pas de la façon d'écrire dans Rust ou de la nécessité de jeter tout votre code Java. </font><font style="vertical-align: inherit;">Java est un excellent langage avec des cas d'utilisation réels. </font><font style="vertical-align: inherit;">Je veux faire des comparaisons de Java et de Rust pour un programmeur débutant de Rust.</font></font></p><br>
<h2 id="motivaciya-yazyka"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Motivation linguistique</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tout d'abord sur les objectifs de chaque langue. Java a été créé pour résoudre de nombreux problèmes. Il devait être </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«simple, orienté objet et modulaire»</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , il devait fonctionner dans une machine virtuelle, être portable sur différentes architectures, et il devait avoir de hautes performances. Les objectifs de Rust sont d'être </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«incroyablement rapides et efficaces en mémoire»</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , d'avoir un «système de type riche, une sécurité de la mémoire, un thread-safe», de générer de bons messages d'erreur et d'avoir un gestionnaire de paquets intégré.</font></font></p><br>
<p>    .   Rust  ,     ,         .  ,   Rust  ,      . ,        , ,          ,  ( )  ,    (embedded) .        ,        Rust. Rust  ,          ,  (dangling)   .</p><br>
<p>  ,  Rust      (   wasm frontends  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">yew</a> ).    ,       ,           ,   ,     ( )  .        .</p><br>
<p>   ,  ,      Java  Rust     :</p><br>
<ul>
<li>  </li>
<li>    (   GC)</li>
<li></li>
<li>   </li>
<li>  ()  </li>
</ul><br>
<p>      ;       ,  ,     .       ,      .</p><br>
<h2 id="algebraicheskie-tipy-dannyh">  </h2><br>
<h3 id="perechislenie"></h3><br>
<p>  Rust         .  Rust             <code>enum</code>  <code>struct</code>. <code>enum</code> —    ( ,   ).    <code>enum</code>  Java,       ,      Java <code>enum</code>,     .   <code>enum</code>      ,    ,     . ,   ,  Rust   <code>null</code>  <code>nil</code>.           Rust,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">   </a>.</p><br>
<pre><code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Option</span></span>&lt;T&gt; {
    <span class="hljs-literal">None</span>,
    <span class="hljs-literal">Some</span>(T),<font></font>
}</code></pre><br>
<p>     <code>Option</code>,     <code>T</code>.  <code>T</code> ,                <code>T</code>.  <code>Option</code>  2  ,    <code>None</code> (" ")   ,   <code>Some</code>   <code>T</code>.     :</p><br>
<pre><code class="rust hljs"><span class="hljs-keyword">let</span> a = <span class="hljs-literal">Some</span>(<span class="hljs-string">"foo"</span>.to_string()); <span class="hljs-comment">//    Option&lt;String&gt;</span><font></font>
<font></font>
<span class="hljs-keyword">let</span> b: <span class="hljs-built_in">Option</span>&lt;<span class="hljs-built_in">usize</span>&gt; = <span class="hljs-literal">Some</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">//    Option&lt;usize&gt;,    </span></code></pre><br>
<p>   .      ,     .     ,   .     ,       .</p><br>
<p>Rust       <code>enum</code>     <code>match</code>.          ,     .</p><br>
<pre><code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">plus</span></span>(a: <span class="hljs-built_in">Option</span>&lt;<span class="hljs-built_in">usize</span>&gt;) -&gt; <span class="hljs-built_in">Option</span>&lt;<span class="hljs-built_in">usize</span>&gt; {
    <span class="hljs-keyword">match</span> a {
        <span class="hljs-literal">Some</span>(v) =&gt; <span class="hljs-literal">Some</span>(v + <span class="hljs-number">1</span>),
        <span class="hljs-literal">None</span> =&gt; <span class="hljs-literal">None</span><font></font>
   }<font></font>
}</code></pre><br>
<p>  ,      .      <code>match</code>.        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">cheats.rs</a>   <code>match</code>.       <code>if/else</code>.</p><br>
<p>     <code>Option</code>,  -   (   <code>Some</code> )    .   ,   <code>Option</code>     ,     .</p><br>
<pre><code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">plus</span></span>(a: <span class="hljs-built_in">Option</span>&lt;<span class="hljs-built_in">usize</span>&gt;) -&gt; <span class="hljs-built_in">Option</span>&lt;<span class="hljs-built_in">usize</span>&gt; {<font></font>
    a.map(|v| v + <span class="hljs-number">1</span>)<font></font>
}</code></pre><br>
<p> <code>|| {}</code> —   .   Rust   -    ,    ,    "   "   .</p><br>
<h3 id="struktura"></h3><br>
<p>  <code>struct</code> —     . , ,    ,         .</p><br>
<pre><code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">A</span></span> {<font></font>
   field: <span class="hljs-built_in">usize</span>
}</code></pre><br>
<p>   ""     .</p><br>
<pre><code class="rust hljs"><span class="hljs-keyword">let</span> a: (<span class="hljs-built_in">usize</span>, <span class="hljs-built_in">usize</span>) = (<span class="hljs-number">1</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">//    </span></code></pre><br>
<p>      .</p><br>
<pre><code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Foo</span></span>&lt;T&gt; {<font></font>
    field: T<font></font>
}</code></pre><br>
<h3 id="blok-realizacii"> </h3><br>
<p>     <code>enum</code>  <code>struct</code>   .  ,     <code>impl</code>       .        ,      Rust.     <code>struct</code>   <code>impl</code>     ,    <em></em>  :</p><br>
<pre><code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Thangs</span></span> {<font></font>
   list: <span class="hljs-built_in">Vec</span>&lt;Thang&gt;<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Thang</span></span>;<font></font>
<font></font>
<span class="hljs-keyword">impl</span> Thangs {
   <span class="hljs-comment">// **  `new`    ,   ' '</span>
   <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">new</span></span>() -&gt; <span class="hljs-keyword">Self</span> {
       <span class="hljs-keyword">Self</span> {<font></font>
           list: <span class="hljs-built_in">vec!</span>[]<font></font>
       }<font></font>
   }<font></font>
<font></font>
   <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">add_thang</span></span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, thang: Thang) {
       <span class="hljs-keyword">self</span>.list.push(thang);<font></font>
   }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() {
  <span class="hljs-comment">// ** &amp;mut self   'add_thangs'   mut   </span>
   <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> thangs = Thangs::new();<font></font>
   thangs.add_thang(Thang);<font></font>
}</code></pre><br>
<p>   Java,  <code>value.method()</code>      "   ".     ,  <code>&amp;mut self</code>   :</p><br>
<pre><code class="rust hljs"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> thangs = Thangs::new();<font></font>
Thangs::add_thang(&amp;<span class="hljs-keyword">mut</span> thangs, Thang);</code></pre><br>
<p>  ,    Rust       .  <code>enum</code>  <code>struct</code>     .  Java -  <code>struct</code>  <code>impl</code>    ,      "",    ( ,  ).    "  Rust     ",   Java   ,   .   Java 14 "Records" ()    .        ,     Java    "",   (      ,  Rust  ,   sum  product ).      Java,   -   ,   ,    !</p><br>
<h2 id="stek-po-sravneniyu-s-kuchey">    </h2><br>
<h3 id="stek-pamyat"> </h3><br>
<p> Rust   .       ,         .      .  :</p><br>
<pre><code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Thing</span></span> { field: <span class="hljs-built_in">usize</span> }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() {
    <span class="hljs-keyword">let</span> a = Thing { field: <span class="hljs-number">1</span> };
    <span class="hljs-comment">// .. do stuff with a</span>
}</code></pre><br>
<p>   -   .      ,      ,      <code>Sized</code>.    ,         .      ,            (  main)      .</p><br>
<p>   Java,        <code>new</code>,            ,    .</p><br>
<h3 id="kucha"></h3><br>
<p>          <code>Box</code> ( stdlib     ,        <code>Rc</code>, <code>Arc</code>  ..).   ,        ,        ?    ,       ,        ,        ,     (   ).          , ,  ,        ,     ""  <code>Box</code>    ,          .</p><br>
<pre><code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span> </span>() {
    <span class="hljs-keyword">let</span> a = <span class="hljs-built_in">Box</span>::new(Thing { field: <span class="hljs-number">1</span> });<font></font>
}</code></pre><br>
<p>,         .      ,      .  ,     ,    <code>a</code>    <em></em>       <code>a</code>.           <code>usize</code> ,               .</p><br>
<p>   <code>Box</code>   .       -   Java,</p><br>
<pre><code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Foo</span></span> {}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Thing</span></span>;<font></font>
<font></font>
<span class="hljs-keyword">impl</span> Foo <span class="hljs-keyword">for</span> Thing {}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">OtherThing</span></span>;<font></font>
<font></font>
<span class="hljs-keyword">impl</span> Foo <span class="hljs-keyword">for</span> OtherThing {}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span> </span>() {
    <span class="hljs-keyword">let</span> a: <span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">Box</span>&lt;<span class="hljs-keyword">dyn</span> Foo&gt;&gt; = <span class="hljs-built_in">vec!</span>[<span class="hljs-built_in">Box</span>::new(OtherThing), <span class="hljs-built_in">Box</span>::new(Thing)]; <span class="hljs-comment">//   </span>
    <span class="hljs-comment">//  ''     ,    </span>
    <span class="hljs-comment">//            Foo</span>
    }</code></pre><br>
<p>     <code>trait</code>,     .   ,        .   ,             .   Rust  ,   ,     ,       ,    .</p><br>
<p> ,       ,    . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">    Rust</a> —  .</p><br>
<p>     .</p><br>
<pre><code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">List</span></span>&lt;T&gt; {<font></font>
    Nil,<font></font>
    Cons((T, List&lt;T&gt;))<font></font>
}</code></pre><br>
<p>    . <code>List&lt;T&gt;</code>    <code>Nil</code> ,         <code>Cons</code>,      . ,      ,      ?<br>
?<br>
  </p><br>
<pre><code class="rust hljs">    error[E0072]: recursive <span class="hljs-class"><span class="hljs-keyword">type</span> `<span class="hljs-title">List</span></span>` has infinite size<font></font>
     --&gt; src/lib.rs:<span class="hljs-number">7</span>:<span class="hljs-number">1</span><font></font>
      |<font></font>
    <span class="hljs-number">7</span> | <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">List</span></span>&lt;T&gt; {<font></font>
      | ^^^^^^^^^^^^ recursive <span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">has</span></span> infinite size
    <span class="hljs-number">8</span> |     Nil,
    <span class="hljs-number">9</span> |     Cons((T, List&lt;T&gt;))<font></font>
      |          ------------ recursive without indirection<font></font>
      |<font></font>
      = help: insert indirection (e.g., a `<span class="hljs-built_in">Box</span>`, `Rc`, or `&amp;`) at some point to make `List` representable</code></pre><br>
<p>      .     <code>help</code>    .     ,            ,      . ,       ,        ,        N-?         ,     ,   ?    ,   .      .</p><br>
<p>   ,  .</p><br>
<pre><code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">List</span></span>&lt;T&gt; {<font></font>
    Nil,<font></font>
    Cons((T, <span class="hljs-built_in">Box</span>&lt;List&lt;T&gt;&gt;))<font></font>
}</code></pre><br>
<p>         .     ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">   </a>.          .</p><br>
<h2 id="tipazhi"></h2><br>
<h3 id="motiviruyuschiy-primer"> </h3><br>
<p>        Java   Rust,     (   ) :</p><br>
<pre><code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Shape</span></span> {<font></font>
    Circle { radius: <span class="hljs-built_in">f32</span> },<font></font>
    Rectangle { width: <span class="hljs-built_in">f32</span>, height: <span class="hljs-built_in">f32</span> },<font></font>
}</code></pre><br>
<p>    <code>area</code> ()   , , ,   :</p><br>
<pre><code class="rust hljs"><span class="hljs-keyword">impl</span> Shape {
    <span class="hljs-keyword">pub</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">area</span></span>(<span class="hljs-keyword">self</span>) -&gt; <span class="hljs-built_in">f32</span> {
        <span class="hljs-keyword">match</span> <span class="hljs-keyword">self</span> {<font></font>
            Shape::Circle { radius } =&gt; std::<span class="hljs-built_in">f32</span>::consts::PI * radius.powi(<span class="hljs-number">2</span>),<font></font>
            Shape::Rectangle { width, height } =&gt; width * height,<font></font>
        }<font></font>
    }<font></font>
 }</code></pre><br>
<p>    Java      .  Rust      <code>pub</code> (  ),   (   ).       ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Rust reference</a>.</p><br>
<p>  .  Java        <code>Shape</code>    <code>Circle</code>  <code>Rectangle</code>,      <code>area</code>.         Rust   Java,    :</p><br>
<ul>
<li>    <code>Shape</code>:<br>
<ul>
<li>Java:         <code>Shape</code></li>
<li>Rust:      <code>Shape</code> <em></em> ,    (   <code>match</code>   ,      )</li>
</ul></li>
<li>      <code>Shape</code>:<br>
<ul>
<li>Java:    "" <code>Shape</code>,               ,   </li>
<li>Rust:      <code>impl</code></li>
</ul></li>
</ul><br>
<p>     ' ' (expression problem).         .     <code>enum</code>  Rust   /  Java.    <em></em>,  Rust      <code>match</code>   <code>enum</code>.   : «     ,      ?»</p><br>
<p> ,      .</p><br>
<pre><code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Area</span></span> {
    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">area</span></span>(<span class="hljs-keyword">self</span>) -&gt; <span class="hljs-built_in">f32</span>; <span class="hljs-comment">//          ( i32)</span><font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Rectangle</span></span> {<font></font>
    width: <span class="hljs-built_in">f32</span>,<font></font>
    height: <span class="hljs-built_in">f32</span><font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Circle</span></span> {<font></font>
    radius: <span class="hljs-built_in">f32</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">impl</span> Area <span class="hljs-keyword">for</span> Rectangle {
    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">area</span></span>(<span class="hljs-keyword">self</span>) -&gt; <span class="hljs-built_in">f32</span> {
        <span class="hljs-keyword">self</span>.width * <span class="hljs-keyword">self</span>.height<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">impl</span> Area <span class="hljs-keyword">for</span> Circle {
    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">area</span></span>(<span class="hljs-keyword">self</span>) -&gt; <span class="hljs-built_in">f32</span> {<font></font>
        std::<span class="hljs-built_in">f32</span>::consts::PI * <span class="hljs-keyword">self</span>.radius.powi(<span class="hljs-number">2</span>)<font></font>
    }<font></font>
}</code></pre><br>
<p>,        <code>Circle</code>   <code>Rectangle</code>,  <code>perimeter</code>,          :</p><br>
<pre><code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Perimeter</span></span> {
    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">perimeter</span></span>(<span class="hljs-keyword">self</span>) -&gt; <span class="hljs-built_in">f32</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">impl</span> Perimeter <span class="hljs-keyword">for</span> Rectangle {
    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">perimeter</span></span>(<span class="hljs-keyword">self</span>) -&gt; <span class="hljs-built_in">f32</span> {
        <span class="hljs-number">2</span>. * (<span class="hljs-keyword">self</span>.width + <span class="hljs-keyword">self</span>.height)<font></font>
    }<font></font>
}<font></font>
<span class="hljs-comment">//  ..</span></code></pre><br>
<p>      .     ,    ,    ""   " <em></em> ".</p><br>
<pre><code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">do_something</span></span>&lt;T: Perimeter + Area&gt;(shape: T) { <span class="hljs-comment">//   ,    Perimeter  Area</span>
        <span class="hljs-built_in">unimplemented!</span>() <span class="hljs-comment">// :   </span>
        <span class="hljs-comment">//        </span>
    }</code></pre><br>
<h3 id="tipazhi-i-obobscheniya">  </h3><br>
<p>   Rust  . ,       ,    Java.  ,         .  Java  ,   Rust   .         ,        . ,        ,    .   <code>Future</code>   ,   <code>Iterator</code>  <code>IntoIterator</code>    <code>for..in</code>,  <code>Index</code>  <code>[]</code>,      <code>Add</code>, <code>Sub</code>, <code>Mul</code>     .   ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><code>Add</code></a></p><br>
<p>  <code>Add</code>   std.</p><br>
<pre><code class="rust hljs"><span class="hljs-keyword">pub</span> <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Add</span></span>&lt;Rhs = <span class="hljs-keyword">Self</span>&gt; { <span class="hljs-comment">// 1</span>
    <span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">Output</span></span>; <span class="hljs-comment">// 2</span>
    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">add</span></span>(<span class="hljs-keyword">self</span>, rhs: Rhs) -&gt; Self::Output; <span class="hljs-comment">// 3</span>
}</code></pre><br>
<p>Std   <code>Add</code>    <code>Rhs</code>,     <code>Self</code>, ..    (1).   « »   <code>Output</code> (2)    <code>add</code>,   <code>self</code>   (  <code>self</code>)   <code>rhs</code>  <code>Rhs</code> (  )   ,   <code>Output</code> (3).</p><br>
<pre><code class="rust hljs"><span class="hljs-keyword">use</span> std::ops::Add;<font></font>
<font></font>
<span class="hljs-meta">#[derive(Debug)]</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Content</span></span>&lt;T&gt; { <span class="hljs-comment">// 1</span><font></font>
    val: T,<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">impl</span>&lt;T&gt; Add <span class="hljs-keyword">for</span> Content&lt;T&gt; <span class="hljs-comment">// 2</span>
   <span class="hljs-keyword">where</span>
    T: Add, <span class="hljs-comment">// 3</span><font></font>
{<font></font>
    <span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">Output</span></span> = Content&lt;&lt;T <span class="hljs-keyword">as</span> Add&gt;::Output&gt;; <span class="hljs-comment">// 4</span>
    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">add</span></span>(<span class="hljs-keyword">self</span>, rhs: Content&lt;T&gt;) -&gt; Self::Output {<font></font>
        Content {<font></font>
            val: <span class="hljs-keyword">self</span>.val + rhs.val,<font></font>
        }<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() {
    <span class="hljs-keyword">let</span> a = Content { val: <span class="hljs-number">2</span> };
    <span class="hljs-keyword">let</span> b = Content { val: <span class="hljs-number">5</span> };
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{:?}"</span>, a + b); <span class="hljs-comment">// Content { val: 7 }</span>
}</code></pre><br>
<p>    <code>Content</code>,      <code>T</code> (1).   <code>Add</code>  ,  <code>Content</code>    <code>Add</code> (2),  ,    <code>Content</code> <em></em>   <code>Add</code> (3).    ,    <code>Output</code>   <code>Content</code>  <code>Output</code>  <code>T</code>,     <code>Add</code> (4).  ,      ,      ,  .  ,  ,           .      ,     " "        ,      Rust.       ,    Rust ,              ( ),    .</p><br>
<p> ,          <code>Sized</code>   ,     <code>fn foo&lt;T&gt;(t: T) -&gt; T</code>,    <code>T: Sized</code>.         <code>T: ?Sized</code>,   <code>T</code> <em></em>   .        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"> </a> .</p><br>
<h2 id="polimorfizm"></h2><br>
<p> Java    .       OO      Rust,        Java.  Java —    (subtype polymorphism),    Rust —     (ad-hoc) .    ,       ,     ,          (   <code>&lt;T: Trait&gt;</code> ).</p><br>
<p>,  ""    .  ,         <code>enum</code>  <code>struct</code>,        <code>impl</code>.  <code>impl</code>    ,      .     ,      ,  -.   .</p><br>
<p> Rust     .  <code>str</code>, <code>String</code>, <code>OsStr</code>, <code>OsString</code>, <code>CString</code>  <code>CStr</code> ( - ?). ,   <code>str</code>  <code>String</code>,   —    .    ,      ,     ?</p><br>
<p> <code>&amp;str</code>   ,   <code>&amp;str</code>   <code>&amp;String</code>    ,   <code>String</code>   <code>Deref&lt;Target=str&gt;</code> ( <code>Target=</code> ,  <code>Target</code>  " ").           .</p><br>
<pre><code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">foo</span></span>&lt;S: <span class="hljs-built_in">AsRef</span>&lt;<span class="hljs-built_in">str</span>&gt;&gt;(s: S) {
    <span class="hljs-built_in">unimplemented!</span>()<font></font>
}</code></pre><br>
<p><code>AsRef</code> —       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">stdlib</a>.   :</p><br>
<pre><code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">AsRef</span></span>&lt;T&gt;
  <span class="hljs-keyword">where</span>
    T: ?<span class="hljs-built_in">Sized</span>,<font></font>
{<font></font>
    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">as_ref</span></span>(&amp;<span class="hljs-keyword">self</span>) -&gt; &amp;T;<font></font>
}</code></pre><br>
<p> ,     T,  <em></em>      ,       <code>&amp;T</code>.       <code>foo</code>   <code>String</code>,</p><br>
<pre><code class="rust hljs"><span class="hljs-keyword">let</span> a = <span class="hljs-built_in">String</span>::from(<span class="hljs-string">"stuff"</span>);<font></font>
foo(a);</code></pre><br>
<p>  ? ,       (   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a> ).    Rust     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"> </a>   stdlib.</p><br>
<p>     ,      .  ,     ,    .    ,     .         Java ( ,  Java      ).  Java    ,   .       «  ».  Rust    ,   .</p><br>
<h2 id="itog"></h2><br>
<p>  ,        ,       . ,    -   .     ,        ,     .      Rust     ,  !        ,         Rust .</p><br>
<p> .</p><br>
<h4 id="primechanie-pro-oboschennye-tipy-v-java-po-sravneniyu-s-rust">:     Java    Rust</h4><br>
<p> Java   ,     .     ,            . - Java      , ..     .  ,  ,   Java ,      (  Java  <code>&lt;T&gt;</code>  <code>&lt;T extends Class&gt;</code> ), Java  ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">  (type erasure)</a>.      ,       <code>Object</code>        -.        Java,   ,           — . -          vtable,             .</p><br>
<p>    Rust    .     <code>foo</code>      <code>foo</code>     ,      <code>foo</code>  .  ,   <code>foo</code>   4   <code>AsRef&lt;str&gt;</code>,     4       .    «».      ,     Rust   "   ".       (     <code>Box</code>),           <code>Object</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou transférer une table virtuelle si nous n'en voulons pas. </font><font style="vertical-align: inherit;">Il convient de noter que l'inconvénient de cette méthode est la taille finale du code et le temps de compilation. </font><font style="vertical-align: inherit;">Selon le nombre de variantes différentes de nos fonctions et le nombre d'implémentations que nous devons générer, plus le code doit passer par LLVM, augmentant le temps de compilation et augmentant la quantité de code réellement généré.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contacts Evan Cameron: </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mail</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">twitter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LinkedIn</font></font></a></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une discussion lente sur les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">traductions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Rust</font></a><font style="vertical-align: inherit;"> a lieu dans une </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">discussion par télégramme pour les traductions de Rust</font></a><font style="vertical-align: inherit;"> .</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr501342/index.html">Certification Microsoft en ligne - Remarques sur le terrain</a></li>
<li><a href="../fr501344/index.html">Ventilation d'alimentation combinée à la climatisation de conduit (partie 1 - électrique)</a></li>
<li><a href="../fr501346/index.html">Présentation du clavier mécanique Vortex Core RGB</a></li>
<li><a href="../fr501352/index.html">Kafka contre-attaque</a></li>
<li><a href="../fr501354/index.html">Un nouveau regard sur le style de code</a></li>
<li><a href="../fr501358/index.html">Le condensé de matières fraîches du monde du front-end de la dernière semaine n ° 414 (4 - 10 mai 2020)</a></li>
<li><a href="../fr501360/index.html">MMORPG pour Telegram - The First Big Project - Part 0</a></li>
<li><a href="../fr501366/index.html">Introduction à la conception du système (Partie 1 avec ajouts de microservices)</a></li>
<li><a href="../fr501368/index.html">Événements numériques à Moscou du 11 au 17 mai</a></li>
<li><a href="../fr501370/index.html">Trello - un système de gestion des connaissances efficace pour une petite équipe informatique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>