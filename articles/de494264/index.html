<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕳️ 🙌 🤹🏼 Zwei-Knoten-Cluster - der Teufel im Detail 🐜 👉🏾 🆒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Ich präsentiere Ihnen die Übersetzung des Artikels "Zwei Knoten - Der Teufel steckt im Detail" von Andrew Beekhof. 
 
 Viele Menschen bevo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Zwei-Knoten-Cluster - der Teufel im Detail</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494264/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo Habr! Ich präsentiere Ihnen die Übersetzung des Artikels </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Zwei Knoten - Der Teufel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> steckt </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">im Detail"</font></a><font style="vertical-align: inherit;"> von Andrew Beekhof. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Viele Menschen bevorzugen Cluster mit zwei Knoten, weil sie konzeptionell einfacher und 33% billiger erscheinen als ihre Gegenstücke mit drei Knoten. Obwohl es durchaus möglich ist, einen guten Cluster aus zwei Knoten zusammenzustellen, führt eine solche Konfiguration in den meisten Fällen aufgrund nicht berücksichtigter Szenarien zu vielen nicht offensichtlichen Problemen.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der erste Schritt zum Erstellen eines Hochverfügbarkeitssystems besteht darin, nach einzelnen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fehlerstellen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu suchen und diese zu beseitigen, die häufig als </font><i><font style="vertical-align: inherit;">SPoF</font></i><font style="vertical-align: inherit;"> (Single Point of Failure) </font><font style="vertical-align: inherit;">abgekürzt werden </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist zu beachten, dass in jedem System nicht alle möglichen Ausfallrisiken ausgeschlossen werden können. Dies ergibt sich zumindest aus der Tatsache, dass ein typischer Risikoschutz die Einführung einer gewissen Redundanz ist, was zu einer Erhöhung der Komplexität des Systems und der Entstehung neuer Fehlerquellen führt. Daher gehen wir zunächst Kompromisse ein und konzentrieren uns auf Ereignisse, die sich auf einzelne Fehlerpunkte beziehen, und nicht auf Ketten verwandter und daher immer weniger wahrscheinlicher Ereignisse.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angesichts der Kompromisse suchen wir nicht nur nach SPoF, sondern gleichen auch die Risiken und Konsequenzen aus. Daher ist die Schlussfolgerung, was kritisch ist und was nicht für jede Bereitstellung unterschiedlich sein kann.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nicht jeder braucht alternative Stromversorger mit unabhängigen Stromleitungen. </font><font style="vertical-align: inherit;">Obwohl sich Paranoia für mindestens einen Kunden ausgezahlt hat, als dessen Überwachung einen fehlerhaften Transformator feststellte. </font><font style="vertical-align: inherit;">Der Kunde rief telefonisch an und versuchte, das Energieunternehmen zu warnen, bis ein defekter Transformator explodierte.</font></font></blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der natürliche Ausgangspunkt ist das Vorhandensein von mehr als einem Knoten im System. </font><font style="vertical-align: inherit;">Bevor das System die Dienste nach dem Fehler auf den überlebenden Knoten verschieben kann, müssen Sie im Allgemeinen sicherstellen, dass die zu verschiebenden Dienste an keinem anderen Ort aktiv sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Cluster mit zwei Knoten hat keine Nachteile, wenn aufgrund eines Fehlers beide Knoten dieselbe statische Website bedienen. </font><font style="vertical-align: inherit;">Alles ändert sich jedoch, wenn beide Parteien die Warteschlange für gemeinsam genutzte Jobs unabhängig voneinander verwalten oder unkoordinierten Schreibzugriff auf die replizierte Datenbank oder das gemeinsam genutzte Dateisystem gewähren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um eine Datenbeschädigung aufgrund des Ausfalls eines Knotens zu verhindern, verlassen wir uns daher auf das, was als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Dissoziation"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Fencing) bezeichnet wird.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prinzip der Trennung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Prinzip der Trennung basiert auf der Frage: Kann ein konkurrierender Knoten Datenkorruption verursachen? Für den Fall, dass Datenbeschädigung ein wahrscheinliches Szenario ist, ist es eine gute Lösung, den Knoten sowohl von eingehenden Anforderungen als auch von dauerhaftem Speicher zu isolieren. Der häufigste Ansatz zum Deaktivieren ist das Deaktivieren fehlerhafter Knoten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt zwei Kategorien von Trennmethoden, die ich </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direkt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indirekt nennen werde</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aber sie können gleichermaßen als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aktiv</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">passiv bezeichnet werden</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Zu den direkten Methoden gehören Aktionen überlebender Peers, z. B. die Interaktion mit einem IPMI-Gerät (Intelligent Platform Management Interface - eine Schnittstelle zur Fernüberwachung und -verwaltung des physischen Status eines Servers) oder iLO (ein Serververwaltungsmechanismus ohne physischen Zugriff auf diese). Indirekte Methoden beruhen darauf, dass der ausgefallene Knoten irgendwie erkennt, dass er sich in einem fehlerhaften Zustand befindet (oder zumindest die Wiederherstellung der restlichen Mitglieder verhindert) und dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hardware-Watchdog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> signalisiert, </font><font style="vertical-align: inherit;">dass der ausgefallene Knoten getrennt werden muss. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Quorum hilft bei direkten und indirekten Methoden.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Direkte Dissoziation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Falle einer direkten Dissoziation können wir ein Quorum verwenden, um Ausschlussrennen bei einem Netzwerkausfall zu verhindern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dem Konzept des Quorums verfügt das System über genügend Informationen (auch ohne Verbindung zu seinen Partnern), sodass die Knoten automatisch wissen, ob sie die Trennung und / oder Wiederherstellung einleiten sollen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ohne Quorum gehen beide Seiten der Netzwerkfreigabe zu Recht davon aus, dass die andere Seite tot ist, und versuchen, die andere Seite zu trennen. Im schlimmsten Fall gelingt es beiden Seiten, den gesamten Cluster zu trennen. Ein alternatives Szenario ist Deathmatch, eine endlose Schleife von Knoten, die angezeigt werden, ihre Peers nicht sehen, sie neu laden und die Wiederherstellung nur für einen Neustart einleiten, wenn ihr Peer der gleichen Logik folgt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Problem mit dem Ausschluss besteht darin, dass auf die am häufigsten verwendeten Geräte aufgrund derselben Fehlerereignisse, auf die wir uns bei der Wiederherstellung konzentrieren möchten, nicht mehr zugegriffen werden kann. </font><font style="vertical-align: inherit;">Die meisten IPMI- und iLO-Karten werden auf den von ihnen gesteuerten Hosts installiert und verwenden standardmäßig dasselbe Netzwerk, weshalb die Zielknoten davon ausgehen, dass die anderen Knoten offline sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leider werden die Funktionen des Betriebs von IPMI- und iLo-Geräten zum Zeitpunkt des Kaufs von Geräten selten berücksichtigt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indirekte Trennung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Quorum ist auch wichtig für die Verwaltung des indirekten Ausschlusses. Wenn alles korrekt durchgeführt wird, können Überlebende durch ein Quorum davon ausgehen, dass die verlorenen Knoten nach einer bestimmten Zeit in einen sicheren Zustand übergehen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dieser Einstellung wird der Hardware-Watchdog-Timer alle N Sekunden zurückgesetzt, wenn das Quorum nicht verloren geht. Wenn der Timer (normalerweise ein Vielfaches von N) abläuft, führt das Gerät eine unansehnliche Abschaltung der Stromversorgung durch (keine Abschaltung). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Ansatz ist sehr effektiv, aber ohne Quorum gibt es nicht genügend Informationen im Cluster, um ihn zu verwalten. Es ist nicht einfach, den Unterschied zwischen einem Netzwerkausfall und einem Ausfall des Partnerhosts festzustellen. Der Grund dafür ist, dass Sie ohne die Fähigkeit, zwischen zwei Fällen zu unterscheiden, in beiden Fällen das gleiche Verhalten wählen müssen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Problem bei der Auswahl eines Modus besteht darin, dass es keine Möglichkeit gibt, die Zugänglichkeit zu maximieren und Datenverlust zu verhindern.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie davon ausgehen, dass der Partnerknoten aktiv ist, aber tatsächlich ein Fehler aufgetreten ist, stoppt der Cluster unnötigerweise die Dienste, die funktionieren müssten, um den Verlust von Diensten des heruntergefallenen Partnerknotens auszugleichen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie davon ausgehen, dass der Knoten nicht funktioniert, es sich jedoch nur um einen Netzwerkfehler handelt und der Remote-Knoten tatsächlich funktioniert, abonnieren Sie bestenfalls eine zukünftige manuelle Abstimmung der resultierenden Datensätze.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unabhängig davon, welche Heuristik Sie verwenden, ist es trivial, einen Fehler zu erstellen, der entweder beide Seiten zum Arbeiten zwingt oder den Cluster dazu zwingt, die überlebenden Knoten zu trennen. </font><font style="vertical-align: inherit;">Wenn Quorum nicht verwendet wird, wird dem Cluster eines der leistungsstärksten Tools in seinem Arsenal entzogen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn es keine andere Alternative gibt, wäre der beste Ansatz, die Zugänglichkeit zu opfern (hier verweist der Autor auf den CAP-Satz). </font><font style="vertical-align: inherit;">Die hohe Verfügbarkeit beschädigter Daten hilft niemandem, und das manuelle Abgleichen verschiedener Datensätze ist ebenfalls kein Vergnügen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quorum</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quorum klingt großartig, oder? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der einzige Nachteil ist, dass Sie die Verbindung zwischen N / 2 + 1 Ihrer Knoten beibehalten müssen, um sie in einem Cluster mit N Mitgliedern zu haben. Was ist in einem Cluster mit zwei Knoten nach dem Ausfall eines Knotens unmöglich? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was uns letztendlich zu einem grundlegenden Problem mit zwei Knoten führt: Ein </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quorum ist in zwei Knotenclustern nicht sinnvoll, und ohne dieses ist es unmöglich, die Vorgehensweise, die die Zugänglichkeit maximiert und Datenverlust verhindert, zuverlässig zu bestimmen</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selbst in einem System von zwei Knoten, die durch ein Querkabel verbunden sind, ist es unmöglich, endgültig zwischen dem Trennen des Netzwerks und dem Ausfall eines anderen Knotens zu unterscheiden. </font><font style="vertical-align: inherit;">Das Trennen eines Endes (dessen Wahrscheinlichkeit natürlich proportional zum Abstand zwischen den Knoten ist) reicht aus, um jede Annahme zu widerlegen, dass der Kanal gleich dem Zustand des Partnerknotens arbeitet.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Damit der Cluster aus zwei Knoten funktioniert</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Manchmal kann oder will der Kunde keinen dritten Knoten kaufen, und wir sind gezwungen, nach einer Alternative zu suchen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option 1 - Doppelte Trennmethode</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das iLO- oder IPMI-Gerät des Knotens ist ein Fehlerpunkt, da Überlebende es im Falle eines Fehlers nicht verwenden können, um den Knoten in einen sicheren Zustand zu versetzen. In einem Cluster von 3 oder mehr Knoten können wir dies abmildern, indem wir das Quorum berechnen und den Hardware-Watchdog verwenden (ein indirekter Ausrückmechanismus, wie bereits erläutert). Bei zwei Knoten sollten stattdessen Netzwerk-Netzschalter (Stromverteilungseinheiten oder PDUs) verwendet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Fehler versucht der Überlebende zunächst, das primäre Trenngerät (integriertes iLO oder IPMI) zu kontaktieren. Wenn dies erfolgreich ist, wird die Wiederherstellung wie gewohnt fortgesetzt. Nur im Falle eines iLO / IPMI-Gerätefehlers erfolgt der Anruf an die PDU. Wenn der Anruf erfolgreich ist, kann die Wiederherstellung fortgesetzt werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sicher, dass sich die PDU in einem anderen Netzwerk als dem Clusterverkehr befindet. Andernfalls blockiert ein einzelner Netzwerkfehler den Zugriff auf beide Isolationsgeräte und blockiert die Wiederherstellung von Diensten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier fragen Sie sich vielleicht: Ist die PDU nicht ein einziger Fehlerpunkt? </font><font style="vertical-align: inherit;">Worauf die Antwort natürlich lautet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn dieses Risiko für Sie erheblich ist, sind Sie nicht allein: Verbinden Sie beide Knoten mit zwei PDUs und weisen Sie die Cluster-Software an, beide beim Ein- und Ausschalten von Knoten zu verwenden. </font><font style="vertical-align: inherit;">Jetzt bleibt der Cluster aktiv, wenn eine PDU ausfällt und ein zweiter Ausfall einer anderen PDU oder eines anderen IPMI-Geräts erforderlich ist, um die Wiederherstellung zu blockieren.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option 2 - Hinzufügen eines Schiedsrichters</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einigen Szenarien ist die Methode der doppelten Trennung zwar technisch möglich, aber politisch komplex. Viele Unternehmen wünschen sich eine gewisse Trennung zwischen Administratoren und Anwendungsbesitzern, und sicherheitsbewusste Netzwerkadministratoren sind nicht immer begeistert davon, PDU-Zugriffsparameter an Dritte weiterzugeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall wird empfohlen, einen neutralen Dritten zu erstellen, der die Quorumberechnung ergänzen kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Falle eines Fehlers sollte der Knoten in der Lage sein, die Übertragung seines Partners oder Schiedsrichters zu sehen, um die Dienste wiederherzustellen. Der Arbiter enthält auch die Funktion zum Unterbrechen der Verbindung, wenn beide Knoten den Arbiter sehen können, sich aber nicht sehen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Option sollte in Verbindung mit einer indirekten Dissoziationsmethode verwendet werden, z. B. einem Hardware-Watchdog-Timer, der so konfiguriert ist, dass er den Computer ausschaltet, wenn er die Verbindung zu seinem Partnerknoten und dem Arbiter verliert. </font><font style="vertical-align: inherit;">Somit kann der Überlebende sicher annehmen, dass sich sein Partnerknoten nach Ablauf des Hardware-Watchdog-Timers in einem sicheren Zustand befindet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der praktische Unterschied zwischen dem Arbiter und dem dritten Knoten besteht darin, dass der Arbiter viel weniger Ressourcen für seine Arbeit benötigt und möglicherweise mehr als einen Cluster bedienen kann.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option 3 - Der menschliche Faktor</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der letzte Ansatz besteht darin, dass Überlebende weiterhin Dienste ausführen, die sie bereits ausgeführt haben, aber keine neuen Dienste starten, bis entweder das Problem selbst behoben ist (Netzwerkwiederherstellung, Neustart des Knotens) oder die Person nicht die Verantwortung dafür übernimmt, dies manuell zu bestätigen Die andere Seite ist tot.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonus Option</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Habe ich erwähnt, dass Sie einen dritten Knoten hinzufügen können?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zwei Gestelle</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen wir uns aus Gründen der Argumentation vor, ich hätte Sie von den Vorzügen des dritten Knotens überzeugt. Jetzt müssen wir den physischen Standort der Knoten berücksichtigen. Wenn sie im selben Rack platziert (und mit Strom versorgt) sind, stellt dies auch SPoF dar und eines, das nicht durch Hinzufügen eines zweiten Racks behoben werden kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn dies überraschend ist, überlegen Sie, was passiert, wenn das Rack mit zwei Knoten ausfällt, und wie der überlebende Knoten zwischen diesem Fall und dem Netzwerkfehler unterscheidet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kurze Antwort: Dies ist nicht möglich, und wir beschäftigen uns erneut mit allen Problemen bei zwei Knoten. Oder Überlebender:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ignoriert das Quorum und versucht fälschlicherweise, die Wiederherstellung bei Netzwerkausfällen einzuleiten (die Möglichkeit, die Trennung abzuschließen, ist eine separate Geschichte und hängt davon ab, ob die PDUs beteiligt sind und ob sie die Stromversorgung von einem der Racks gemeinsam nutzen) oder</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">respektiert das Quorum und trennt sich vorzeitig, wenn sein Partnerknoten ausfällt</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In jedem Fall sind zwei Racks nicht besser als eines, und die Knoten müssen entweder unabhängige Stromquellen empfangen oder auf drei (oder mehr, je nachdem wie viele Knoten Sie haben) Racks verteilt werden.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zwei Rechenzentren</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An diesem Punkt können Leser, die nicht mehr risikoscheu sind, in Betracht ziehen, sich von einem Unfall zu erholen. Was passiert, wenn ein Asteroid mit unseren drei Knoten, die auf drei verschiedene Racks verteilt sind, ein einzelnes Rechenzentrum betritt? Offensichtlich schlechte Dinge, aber abhängig von Ihren Anforderungen reicht das Hinzufügen eines zweiten Rechenzentrums möglicherweise nicht aus.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn alles richtig gemacht wurde, bietet Ihnen das zweite Rechenzentrum (und das ist vernünftig) eine aktuelle und konsistente Kopie Ihrer Dienste und ihrer Daten. Wie in den Szenarien mit zwei Knoten und zwei Racks verfügt das System jedoch nicht über genügend Informationen, um maximale Verfügbarkeit sicherzustellen und Schäden (oder Abweichungen von Datensätzen) zu vermeiden. Selbst wenn drei Knoten (oder Racks) vorhanden sind, kann das System aufgrund ihrer Verteilung auf nur zwei Rechenzentren nicht zuverlässig die richtige Entscheidung treffen, wenn ein (jetzt viel wahrscheinlicheres) Ereignis auftritt, bei dem die beiden Seiten keine Verbindung herstellen können.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies bedeutet nicht, dass eine Lösung mit zwei Rechenzentren niemals passt. </font><font style="vertical-align: inherit;">Unternehmen möchten häufig, dass die Mitarbeiter sich dessen bewusst sind, bevor sie beim Umzug in ein Backup-Rechenzentrum einen außergewöhnlichen Schritt unternehmen. </font><font style="vertical-align: inherit;">Denken Sie daran, dass Sie, wenn Sie den Fehler automatisieren möchten, entweder ein drittes Rechenzentrum benötigen, damit das Quorum sinnvoll ist (entweder direkt oder über einen Arbiter), oder dass Sie einen Weg finden, das gesamte Rechenzentrum zuverlässig zu deaktivieren.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de494252/index.html">3D-Druck: dreieinhalb Häuser in vier Tagen</a></li>
<li><a href="../de494254/index.html">OpenShift als Unternehmensversion von Kubernetes</a></li>
<li><a href="../de494256/index.html">Wer braucht noch Selen? Verwendet jemand BDD im Jahr 2020? Maschinelles Lernen bei Selen</a></li>
<li><a href="../de494258/index.html">Offene Materialien aus dem Informatikzentrum, Teil 1</a></li>
<li><a href="../de494260/index.html">200 TB Elasticsearch Cluster +</a></li>
<li><a href="../de494266/index.html">Über Udalenka, ungeschütztes RDP und die Zunahme der Anzahl der im Internet verfügbaren Server</a></li>
<li><a href="../de494270/index.html">Antiquitäten: Fernarbeit an Geräten von 1998</a></li>
<li><a href="../de494272/index.html">Erstellen eines IT-Startup-Geschäftsplans: Schritt für Schritt detaillierte Struktur</a></li>
<li><a href="../de494274/index.html">E-Commerce-Autotest-System</a></li>
<li><a href="../de494278/index.html">EF Core + Oracle: So machen Sie Migrationen idempotent</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>