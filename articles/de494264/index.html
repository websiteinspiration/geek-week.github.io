<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï≥Ô∏è üôå ü§πüèº Zwei-Knoten-Cluster - der Teufel im Detail üêú üëâüèæ üÜí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Ich pr√§sentiere Ihnen die √úbersetzung des Artikels "Zwei Knoten - Der Teufel steckt im Detail" von Andrew Beekhof. 
 
 Viele Menschen bevo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Zwei-Knoten-Cluster - der Teufel im Detail</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494264/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo Habr! Ich pr√§sentiere Ihnen die √úbersetzung des Artikels </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Zwei Knoten - Der Teufel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> steckt </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">im Detail"</font></a><font style="vertical-align: inherit;"> von Andrew Beekhof. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Viele Menschen bevorzugen Cluster mit zwei Knoten, weil sie konzeptionell einfacher und 33% billiger erscheinen als ihre Gegenst√ºcke mit drei Knoten. Obwohl es durchaus m√∂glich ist, einen guten Cluster aus zwei Knoten zusammenzustellen, f√ºhrt eine solche Konfiguration in den meisten F√§llen aufgrund nicht ber√ºcksichtigter Szenarien zu vielen nicht offensichtlichen Problemen.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der erste Schritt zum Erstellen eines Hochverf√ºgbarkeitssystems besteht darin, nach einzelnen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fehlerstellen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu suchen und diese zu beseitigen, die h√§ufig als </font><i><font style="vertical-align: inherit;">SPoF</font></i><font style="vertical-align: inherit;"> (Single Point of Failure) </font><font style="vertical-align: inherit;">abgek√ºrzt werden </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist zu beachten, dass in jedem System nicht alle m√∂glichen Ausfallrisiken ausgeschlossen werden k√∂nnen. Dies ergibt sich zumindest aus der Tatsache, dass ein typischer Risikoschutz die Einf√ºhrung einer gewissen Redundanz ist, was zu einer Erh√∂hung der Komplexit√§t des Systems und der Entstehung neuer Fehlerquellen f√ºhrt. Daher gehen wir zun√§chst Kompromisse ein und konzentrieren uns auf Ereignisse, die sich auf einzelne Fehlerpunkte beziehen, und nicht auf Ketten verwandter und daher immer weniger wahrscheinlicher Ereignisse.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angesichts der Kompromisse suchen wir nicht nur nach SPoF, sondern gleichen auch die Risiken und Konsequenzen aus. Daher ist die Schlussfolgerung, was kritisch ist und was nicht f√ºr jede Bereitstellung unterschiedlich sein kann.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nicht jeder braucht alternative Stromversorger mit unabh√§ngigen Stromleitungen. </font><font style="vertical-align: inherit;">Obwohl sich Paranoia f√ºr mindestens einen Kunden ausgezahlt hat, als dessen √úberwachung einen fehlerhaften Transformator feststellte. </font><font style="vertical-align: inherit;">Der Kunde rief telefonisch an und versuchte, das Energieunternehmen zu warnen, bis ein defekter Transformator explodierte.</font></font></blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der nat√ºrliche Ausgangspunkt ist das Vorhandensein von mehr als einem Knoten im System. </font><font style="vertical-align: inherit;">Bevor das System die Dienste nach dem Fehler auf den √ºberlebenden Knoten verschieben kann, m√ºssen Sie im Allgemeinen sicherstellen, dass die zu verschiebenden Dienste an keinem anderen Ort aktiv sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Cluster mit zwei Knoten hat keine Nachteile, wenn aufgrund eines Fehlers beide Knoten dieselbe statische Website bedienen. </font><font style="vertical-align: inherit;">Alles √§ndert sich jedoch, wenn beide Parteien die Warteschlange f√ºr gemeinsam genutzte Jobs unabh√§ngig voneinander verwalten oder unkoordinierten Schreibzugriff auf die replizierte Datenbank oder das gemeinsam genutzte Dateisystem gew√§hren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um eine Datenbesch√§digung aufgrund des Ausfalls eines Knotens zu verhindern, verlassen wir uns daher auf das, was als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Dissoziation"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Fencing) bezeichnet wird.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prinzip der Trennung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Prinzip der Trennung basiert auf der Frage: Kann ein konkurrierender Knoten Datenkorruption verursachen? F√ºr den Fall, dass Datenbesch√§digung ein wahrscheinliches Szenario ist, ist es eine gute L√∂sung, den Knoten sowohl von eingehenden Anforderungen als auch von dauerhaftem Speicher zu isolieren. Der h√§ufigste Ansatz zum Deaktivieren ist das Deaktivieren fehlerhafter Knoten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt zwei Kategorien von Trennmethoden, die ich </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direkt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indirekt nennen werde</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aber sie k√∂nnen gleicherma√üen als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aktiv</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">passiv bezeichnet werden</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Zu den direkten Methoden geh√∂ren Aktionen √ºberlebender Peers, z. B. die Interaktion mit einem IPMI-Ger√§t (Intelligent Platform Management Interface - eine Schnittstelle zur Fern√ºberwachung und -verwaltung des physischen Status eines Servers) oder iLO (ein Serververwaltungsmechanismus ohne physischen Zugriff auf diese). Indirekte Methoden beruhen darauf, dass der ausgefallene Knoten irgendwie erkennt, dass er sich in einem fehlerhaften Zustand befindet (oder zumindest die Wiederherstellung der restlichen Mitglieder verhindert) und dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hardware-Watchdog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> signalisiert, </font><font style="vertical-align: inherit;">dass der ausgefallene Knoten getrennt werden muss. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Quorum hilft bei direkten und indirekten Methoden.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Direkte Dissoziation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Falle einer direkten Dissoziation k√∂nnen wir ein Quorum verwenden, um Ausschlussrennen bei einem Netzwerkausfall zu verhindern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dem Konzept des Quorums verf√ºgt das System √ºber gen√ºgend Informationen (auch ohne Verbindung zu seinen Partnern), sodass die Knoten automatisch wissen, ob sie die Trennung und / oder Wiederherstellung einleiten sollen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ohne Quorum gehen beide Seiten der Netzwerkfreigabe zu Recht davon aus, dass die andere Seite tot ist, und versuchen, die andere Seite zu trennen. Im schlimmsten Fall gelingt es beiden Seiten, den gesamten Cluster zu trennen. Ein alternatives Szenario ist Deathmatch, eine endlose Schleife von Knoten, die angezeigt werden, ihre Peers nicht sehen, sie neu laden und die Wiederherstellung nur f√ºr einen Neustart einleiten, wenn ihr Peer der gleichen Logik folgt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Problem mit dem Ausschluss besteht darin, dass auf die am h√§ufigsten verwendeten Ger√§te aufgrund derselben Fehlerereignisse, auf die wir uns bei der Wiederherstellung konzentrieren m√∂chten, nicht mehr zugegriffen werden kann. </font><font style="vertical-align: inherit;">Die meisten IPMI- und iLO-Karten werden auf den von ihnen gesteuerten Hosts installiert und verwenden standardm√§√üig dasselbe Netzwerk, weshalb die Zielknoten davon ausgehen, dass die anderen Knoten offline sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leider werden die Funktionen des Betriebs von IPMI- und iLo-Ger√§ten zum Zeitpunkt des Kaufs von Ger√§ten selten ber√ºcksichtigt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indirekte Trennung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Quorum ist auch wichtig f√ºr die Verwaltung des indirekten Ausschlusses. Wenn alles korrekt durchgef√ºhrt wird, k√∂nnen √úberlebende durch ein Quorum davon ausgehen, dass die verlorenen Knoten nach einer bestimmten Zeit in einen sicheren Zustand √ºbergehen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dieser Einstellung wird der Hardware-Watchdog-Timer alle N Sekunden zur√ºckgesetzt, wenn das Quorum nicht verloren geht. Wenn der Timer (normalerweise ein Vielfaches von N) abl√§uft, f√ºhrt das Ger√§t eine unansehnliche Abschaltung der Stromversorgung durch (keine Abschaltung). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Ansatz ist sehr effektiv, aber ohne Quorum gibt es nicht gen√ºgend Informationen im Cluster, um ihn zu verwalten. Es ist nicht einfach, den Unterschied zwischen einem Netzwerkausfall und einem Ausfall des Partnerhosts festzustellen. Der Grund daf√ºr ist, dass Sie ohne die F√§higkeit, zwischen zwei F√§llen zu unterscheiden, in beiden F√§llen das gleiche Verhalten w√§hlen m√ºssen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Problem bei der Auswahl eines Modus besteht darin, dass es keine M√∂glichkeit gibt, die Zug√§nglichkeit zu maximieren und Datenverlust zu verhindern.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie davon ausgehen, dass der Partnerknoten aktiv ist, aber tats√§chlich ein Fehler aufgetreten ist, stoppt der Cluster unn√∂tigerweise die Dienste, die funktionieren m√ºssten, um den Verlust von Diensten des heruntergefallenen Partnerknotens auszugleichen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie davon ausgehen, dass der Knoten nicht funktioniert, es sich jedoch nur um einen Netzwerkfehler handelt und der Remote-Knoten tats√§chlich funktioniert, abonnieren Sie bestenfalls eine zuk√ºnftige manuelle Abstimmung der resultierenden Datens√§tze.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unabh√§ngig davon, welche Heuristik Sie verwenden, ist es trivial, einen Fehler zu erstellen, der entweder beide Seiten zum Arbeiten zwingt oder den Cluster dazu zwingt, die √ºberlebenden Knoten zu trennen. </font><font style="vertical-align: inherit;">Wenn Quorum nicht verwendet wird, wird dem Cluster eines der leistungsst√§rksten Tools in seinem Arsenal entzogen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn es keine andere Alternative gibt, w√§re der beste Ansatz, die Zug√§nglichkeit zu opfern (hier verweist der Autor auf den CAP-Satz). </font><font style="vertical-align: inherit;">Die hohe Verf√ºgbarkeit besch√§digter Daten hilft niemandem, und das manuelle Abgleichen verschiedener Datens√§tze ist ebenfalls kein Vergn√ºgen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quorum</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quorum klingt gro√üartig, oder? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der einzige Nachteil ist, dass Sie die Verbindung zwischen N / 2 + 1 Ihrer Knoten beibehalten m√ºssen, um sie in einem Cluster mit N Mitgliedern zu haben. Was ist in einem Cluster mit zwei Knoten nach dem Ausfall eines Knotens unm√∂glich? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was uns letztendlich zu einem grundlegenden Problem mit zwei Knoten f√ºhrt: Ein </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quorum ist in zwei Knotenclustern nicht sinnvoll, und ohne dieses ist es unm√∂glich, die Vorgehensweise, die die Zug√§nglichkeit maximiert und Datenverlust verhindert, zuverl√§ssig zu bestimmen</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selbst in einem System von zwei Knoten, die durch ein Querkabel verbunden sind, ist es unm√∂glich, endg√ºltig zwischen dem Trennen des Netzwerks und dem Ausfall eines anderen Knotens zu unterscheiden. </font><font style="vertical-align: inherit;">Das Trennen eines Endes (dessen Wahrscheinlichkeit nat√ºrlich proportional zum Abstand zwischen den Knoten ist) reicht aus, um jede Annahme zu widerlegen, dass der Kanal gleich dem Zustand des Partnerknotens arbeitet.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Damit der Cluster aus zwei Knoten funktioniert</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Manchmal kann oder will der Kunde keinen dritten Knoten kaufen, und wir sind gezwungen, nach einer Alternative zu suchen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option 1 - Doppelte Trennmethode</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das iLO- oder IPMI-Ger√§t des Knotens ist ein Fehlerpunkt, da √úberlebende es im Falle eines Fehlers nicht verwenden k√∂nnen, um den Knoten in einen sicheren Zustand zu versetzen. In einem Cluster von 3 oder mehr Knoten k√∂nnen wir dies abmildern, indem wir das Quorum berechnen und den Hardware-Watchdog verwenden (ein indirekter Ausr√ºckmechanismus, wie bereits erl√§utert). Bei zwei Knoten sollten stattdessen Netzwerk-Netzschalter (Stromverteilungseinheiten oder PDUs) verwendet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Fehler versucht der √úberlebende zun√§chst, das prim√§re Trennger√§t (integriertes iLO oder IPMI) zu kontaktieren. Wenn dies erfolgreich ist, wird die Wiederherstellung wie gewohnt fortgesetzt. Nur im Falle eines iLO / IPMI-Ger√§tefehlers erfolgt der Anruf an die PDU. Wenn der Anruf erfolgreich ist, kann die Wiederherstellung fortgesetzt werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sicher, dass sich die PDU in einem anderen Netzwerk als dem Clusterverkehr befindet. Andernfalls blockiert ein einzelner Netzwerkfehler den Zugriff auf beide Isolationsger√§te und blockiert die Wiederherstellung von Diensten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier fragen Sie sich vielleicht: Ist die PDU nicht ein einziger Fehlerpunkt? </font><font style="vertical-align: inherit;">Worauf die Antwort nat√ºrlich lautet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn dieses Risiko f√ºr Sie erheblich ist, sind Sie nicht allein: Verbinden Sie beide Knoten mit zwei PDUs und weisen Sie die Cluster-Software an, beide beim Ein- und Ausschalten von Knoten zu verwenden. </font><font style="vertical-align: inherit;">Jetzt bleibt der Cluster aktiv, wenn eine PDU ausf√§llt und ein zweiter Ausfall einer anderen PDU oder eines anderen IPMI-Ger√§ts erforderlich ist, um die Wiederherstellung zu blockieren.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option 2 - Hinzuf√ºgen eines Schiedsrichters</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einigen Szenarien ist die Methode der doppelten Trennung zwar technisch m√∂glich, aber politisch komplex. Viele Unternehmen w√ºnschen sich eine gewisse Trennung zwischen Administratoren und Anwendungsbesitzern, und sicherheitsbewusste Netzwerkadministratoren sind nicht immer begeistert davon, PDU-Zugriffsparameter an Dritte weiterzugeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall wird empfohlen, einen neutralen Dritten zu erstellen, der die Quorumberechnung erg√§nzen kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Falle eines Fehlers sollte der Knoten in der Lage sein, die √úbertragung seines Partners oder Schiedsrichters zu sehen, um die Dienste wiederherzustellen. Der Arbiter enth√§lt auch die Funktion zum Unterbrechen der Verbindung, wenn beide Knoten den Arbiter sehen k√∂nnen, sich aber nicht sehen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Option sollte in Verbindung mit einer indirekten Dissoziationsmethode verwendet werden, z. B. einem Hardware-Watchdog-Timer, der so konfiguriert ist, dass er den Computer ausschaltet, wenn er die Verbindung zu seinem Partnerknoten und dem Arbiter verliert. </font><font style="vertical-align: inherit;">Somit kann der √úberlebende sicher annehmen, dass sich sein Partnerknoten nach Ablauf des Hardware-Watchdog-Timers in einem sicheren Zustand befindet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der praktische Unterschied zwischen dem Arbiter und dem dritten Knoten besteht darin, dass der Arbiter viel weniger Ressourcen f√ºr seine Arbeit ben√∂tigt und m√∂glicherweise mehr als einen Cluster bedienen kann.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option 3 - Der menschliche Faktor</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der letzte Ansatz besteht darin, dass √úberlebende weiterhin Dienste ausf√ºhren, die sie bereits ausgef√ºhrt haben, aber keine neuen Dienste starten, bis entweder das Problem selbst behoben ist (Netzwerkwiederherstellung, Neustart des Knotens) oder die Person nicht die Verantwortung daf√ºr √ºbernimmt, dies manuell zu best√§tigen Die andere Seite ist tot.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonus Option</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Habe ich erw√§hnt, dass Sie einen dritten Knoten hinzuf√ºgen k√∂nnen?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zwei Gestelle</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen wir uns aus Gr√ºnden der Argumentation vor, ich h√§tte Sie von den Vorz√ºgen des dritten Knotens √ºberzeugt. Jetzt m√ºssen wir den physischen Standort der Knoten ber√ºcksichtigen. Wenn sie im selben Rack platziert (und mit Strom versorgt) sind, stellt dies auch SPoF dar und eines, das nicht durch Hinzuf√ºgen eines zweiten Racks behoben werden kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn dies √ºberraschend ist, √ºberlegen Sie, was passiert, wenn das Rack mit zwei Knoten ausf√§llt, und wie der √ºberlebende Knoten zwischen diesem Fall und dem Netzwerkfehler unterscheidet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kurze Antwort: Dies ist nicht m√∂glich, und wir besch√§ftigen uns erneut mit allen Problemen bei zwei Knoten. Oder √úberlebender:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ignoriert das Quorum und versucht f√§lschlicherweise, die Wiederherstellung bei Netzwerkausf√§llen einzuleiten (die M√∂glichkeit, die Trennung abzuschlie√üen, ist eine separate Geschichte und h√§ngt davon ab, ob die PDUs beteiligt sind und ob sie die Stromversorgung von einem der Racks gemeinsam nutzen) oder</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">respektiert das Quorum und trennt sich vorzeitig, wenn sein Partnerknoten ausf√§llt</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In jedem Fall sind zwei Racks nicht besser als eines, und die Knoten m√ºssen entweder unabh√§ngige Stromquellen empfangen oder auf drei (oder mehr, je nachdem wie viele Knoten Sie haben) Racks verteilt werden.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zwei Rechenzentren</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An diesem Punkt k√∂nnen Leser, die nicht mehr risikoscheu sind, in Betracht ziehen, sich von einem Unfall zu erholen. Was passiert, wenn ein Asteroid mit unseren drei Knoten, die auf drei verschiedene Racks verteilt sind, ein einzelnes Rechenzentrum betritt? Offensichtlich schlechte Dinge, aber abh√§ngig von Ihren Anforderungen reicht das Hinzuf√ºgen eines zweiten Rechenzentrums m√∂glicherweise nicht aus.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn alles richtig gemacht wurde, bietet Ihnen das zweite Rechenzentrum (und das ist vern√ºnftig) eine aktuelle und konsistente Kopie Ihrer Dienste und ihrer Daten. Wie in den Szenarien mit zwei Knoten und zwei Racks verf√ºgt das System jedoch nicht √ºber gen√ºgend Informationen, um maximale Verf√ºgbarkeit sicherzustellen und Sch√§den (oder Abweichungen von Datens√§tzen) zu vermeiden. Selbst wenn drei Knoten (oder Racks) vorhanden sind, kann das System aufgrund ihrer Verteilung auf nur zwei Rechenzentren nicht zuverl√§ssig die richtige Entscheidung treffen, wenn ein (jetzt viel wahrscheinlicheres) Ereignis auftritt, bei dem die beiden Seiten keine Verbindung herstellen k√∂nnen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies bedeutet nicht, dass eine L√∂sung mit zwei Rechenzentren niemals passt. </font><font style="vertical-align: inherit;">Unternehmen m√∂chten h√§ufig, dass die Mitarbeiter sich dessen bewusst sind, bevor sie beim Umzug in ein Backup-Rechenzentrum einen au√üergew√∂hnlichen Schritt unternehmen. </font><font style="vertical-align: inherit;">Denken Sie daran, dass Sie, wenn Sie den Fehler automatisieren m√∂chten, entweder ein drittes Rechenzentrum ben√∂tigen, damit das Quorum sinnvoll ist (entweder direkt oder √ºber einen Arbiter), oder dass Sie einen Weg finden, das gesamte Rechenzentrum zuverl√§ssig zu deaktivieren.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de494252/index.html">3D-Druck: dreieinhalb H√§user in vier Tagen</a></li>
<li><a href="../de494254/index.html">OpenShift als Unternehmensversion von Kubernetes</a></li>
<li><a href="../de494256/index.html">Wer braucht noch Selen? Verwendet jemand BDD im Jahr 2020? Maschinelles Lernen bei Selen</a></li>
<li><a href="../de494258/index.html">Offene Materialien aus dem Informatikzentrum, Teil 1</a></li>
<li><a href="../de494260/index.html">200 TB Elasticsearch Cluster +</a></li>
<li><a href="../de494266/index.html">√úber Udalenka, ungesch√ºtztes RDP und die Zunahme der Anzahl der im Internet verf√ºgbaren Server</a></li>
<li><a href="../de494270/index.html">Antiquit√§ten: Fernarbeit an Ger√§ten von 1998</a></li>
<li><a href="../de494272/index.html">Erstellen eines IT-Startup-Gesch√§ftsplans: Schritt f√ºr Schritt detaillierte Struktur</a></li>
<li><a href="../de494274/index.html">E-Commerce-Autotest-System</a></li>
<li><a href="../de494278/index.html">EF Core + Oracle: So machen Sie Migrationen idempotent</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>