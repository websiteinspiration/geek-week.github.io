<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏯 👴 🎻 Yandex.Marketでのフロントエンドテストの仕組みと、毎週のリリースを拒否する理由 🈁 📦 ⏱️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="みなさん、こんにちは。私の名前はサーゲイです。Yandex.Marketフロントエンドをテストしています。Habrの読者の中には、リリースプロセスとテストに何らかの形で関係しているITスペシャリストがたくさんいることを知っています。質問があります。機能が長期間にわたって製品化されないことが、あなたの...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Yandex.Marketでのフロントエンドテストの仕組みと、毎週のリリースを拒否する理由</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/478862/"><img src="https://habrastorage.org/webt/dh/z6/nh/dhz6nhsvrc4fhyicfnofz4tgizu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
みなさん、こんにちは。私の名前はサーゲイです。</font><font style="vertical-align: inherit;">Yandex.Marketフロントエンドをテストしています。</font><font style="vertical-align: inherit;">Habrの読者の中には、リリースプロセスとテストに何らかの形で関係しているITスペシャリストがたくさんいることを知っています。</font><font style="vertical-align: inherit;">質問があります。</font><font style="vertical-align: inherit;">機能が長期間にわたって製品化されないことが、あなたの実践で起こったことがありますか？</font><font style="vertical-align: inherit;">肥大化した放出とその体積検査を知っていますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
誰もがこれを持っていたと思います。</font><font style="vertical-align: inherit;">3年前にYandexに来ましたが、私たちのチームは非常に若く、プロセスは完全に確立されていませんでした。</font><font style="vertical-align: inherit;">そして、これらの問題に直面しました。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そのまま</font></font></h2><br>
<img src="https://habrastorage.org/webt/ps/hh/7v/pshh7vfmiswwwmjoznesp1rzrjw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当時、私たちの製品チームには特定の責任領域がなく、彼らが作成されたプロジェクトにのみ従事していました。それから彼らはばらばらになった。また、テストは開発チームに関連付けられていませんでした。これはサービスとして存在し、必要に応じてプロジェクトに接続されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクは手動でのみチェックされ、統合テストは不安定で、自動テストでカバーされる割合はわずかでした。チェックは非常に長い間続きました。計算の準備ができているタスクのプールは絶えず増大しており、巨大なサイズに達する可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リリースに関しては、マネージャーの一人が組み立てと計算に従事していました。すべてのマネージャーとのミーティングを開催し、次のリリースに該当するものと延期できるものを決定しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼らはリリースを無計画にチェックしました。チェックする時間のある人は誰でも、彼はチェックしました。</font><font style="vertical-align: inherit;">重点が置かれたのは、数日間続く可能性のある手動回帰テストです。</font><font style="vertical-align: inherit;">そして、これは、リリースがオートテストのパックを実行し、それらを記述してサポートする部門があったという事実にもかかわらず、これです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、解決された問題はテストに入り、最大2日間テストできました。</font><font style="vertical-align: inherit;">それから彼女は解放に入って、それはさらに4日間チェックされました。</font><font style="vertical-align: inherit;">本番環境では、タスクは1週間で最高でした。</font><font style="vertical-align: inherit;">それを好む人はほとんどいません。何かを変える必要がありました。</font><font style="vertical-align: inherit;">そして、変更する最も重要なことはプロセスです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">輪郭</font></font></h2> <br>
<img src="https://habrastorage.org/webt/v6/wf/hv/v6wfhvlpocaorazppkobsajkmee.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちが最初に行ったのは、輪郭に分割を導入することでした-さまざまな分野の専門家のチーム。</font><font style="vertical-align: inherit;">以前のチームとは異なり、プロジェクトの終了後に輪郭は分割されません。</font><font style="vertical-align: inherit;">彼らは責任の範囲内で新しいプロジェクトとアイデアを生み出し続けています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1〜3人のテスターが各回路のテストを担当します。</font><font style="vertical-align: inherit;">責任ある回路テスターはそれぞれ、アイデアから報告までの製品開発のすべての段階に存在します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">義務名簿</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リリースの作業を構造化するために、テストチームにリリースマスターとリリーステスターという2つの役割を導入しました。</font><font style="vertical-align: inherit;">リリースマスターとして、私たちは4人のテスターを順番に任命し、誰もがリリース義務に関与しています。</font><font style="vertical-align: inherit;">これらの役割ごとに、勤務スケジュールを編成しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
勤務中に発生するタスクは、ループ内の製品機能のテストよりも優先されます。</font><font style="vertical-align: inherit;">テスターが中断することなく長く待つ必要がないように、リリースの義務は次のように調整されています。</font><font style="vertical-align: inherit;">各シフト-4人、プラットフォームごとに2人。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメンテーション</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、ドキュメントはどうですか？それほど多くはありませんが、あります。たとえば、機能をロールアウトするとき、開発者やマネージャーとともに、自動テストの最適な数を決定します。何かを自動化できない場合、または機能が自動テストなしで即時投稿を必要とする場合、すべての市場検証ケースのテストスイートにケースを記述し、必要に応じて、回帰テストのリリーステストスイートにそれを含めます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バグ修正をチェックして、自動テストがバグに書かれていないことを確認した場合、それを開発するタスクも設定し、編集はすぐにテストが書かれた状態でロールします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実験が成功するかどうかは事前にわからないため、各実験をレイアウトするときにチェックリストがあります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qv/eg/b7/qvegb7zf6jtgni5am5d5iymv43u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チェックリストは、実験の機能に対する一連の肯定的なチェックです。リリーステスターは、実験が機能している間、すべてのリリースでそれを使用します。このチェックリストは、実験が成功し、ユーザーの100％にテストを展開する場合、将来の自動化タスクのために空白にすることもできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リリースをチェックするとき、リリースの複雑さと充実度に応じて、さまざまなテストキットを使用します。小規模なテストスイートと最大数のテストケースを持つスイートの両方があります。使用するテストスイートは、リリーステスターが決定します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一部の回路では、開発者向けのポジティブチェックのチェックリストも使用しています。</font><font style="vertical-align: inherit;">これにより、開発者は自分でタスクを確認し、機能の開発におけるボトルネックを予測できます。</font><font style="vertical-align: inherit;">テスターがプロジェクトで変更した場合、これは新しいスペシャリストがプロジェクトにすばやく参加するのに役立ちます。</font><font style="vertical-align: inherit;">チェックリストは、開発の開始前、タスクをスケジュールした直後に書き込まれます。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/gc/7k/8p/gc7k8pst8ctac9kvorihwqoint4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドックについては以上です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タスクのテスト方法</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同等のクラス、境界値、ペアワイズテスト、ユーザーシナリオなど、さまざまなテスト設計手法を使用しています。テスターの専門知識も非常に重要です。市場は大きな機械であり、何かを修理または改善するには、そのすべての部品がどのように機能するかを知る必要があります。たとえば、4種類の商品カードと6種類の商品発行があります。これを知らなければ、これらのページを変更するタスクを定性的にテストすることは不可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクのチェックで重要な役割を果たすのは自動テストです。実装するすべてのタスクに対して機能的な自動テストを実行し、クラッシュを分析してバグを報告します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gq/io/vj/gqiovjyxvl0m32wjxtu81weo7wg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特別なケースでは、タスクがマーケットの多くのコンポーネントに影響を与える場合、画面テストも実行します-それらはバグの検出に役立ちます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/d4/5s/fo/d45sfouziah0uw6ndaf2wx-6vyy.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクの検証が完了すると、すべて問題なく、タスクをリリースできるというコメントが残されます。</font><font style="vertical-align: inherit;">解説では、書かれたテストの数、またはテストが不要であると述べ、タスクを「保留中のリリース」のステータスに変換します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、タスクはリリースウィザードによってピックアップされ、他の実績のあるタスクと共にリリースに送信されます。</font><font style="vertical-align: inherit;">4人のテスターが8時間でチェックできるように、リリースにタスクを詰め込んでいます。マーケットのタッチバージョン用に2つ、デスクトップバージョン用に2つです。</font><font style="vertical-align: inherit;">私たちの目標は、少なくとも5つのリリースをロールアウトすることです。</font><font style="vertical-align: inherit;">つまり、製品へのタスク配信の速度は、従来のものと比較して5倍に向上しています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リリースの確認方法</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自動テストと画面テストをチェックして、リリースのチェックを開始します。レポートを確認すると、問題の最大90％を即座に捕捉できます。テストのクラッシュを分析します。テストがバグに関連しているか、リリースのチケットによって破損している場合、このクラッシュが再現されるタスクを探して、修復を依頼します。これが行われない場合、タスクはリリースに該当しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストは単独で死ぬこともあります。この場合、自動テストの実行からテストをオフにし、必要に応じてテストを修正してmoxを作成するタスクを開始します。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リリースのタスクに応じて、フルリリーステストキットを使用することも、手動での回帰を完全に拒否することもできます。決定はリリーステスターに​​よって行われます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リリースにいくつかの小さな編集がある場合、タスクの検証はローカルで実行され、手動の回帰は自動テストレポートの検証に置き換えられます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リリースとタスクの完全性に関係なく、リリーステスターのチームは、本番環境でさまざまな割合のユーザーに現在表示されている実験をチェックします。実験テスターが作成したチェックリストを使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのチェックが完了すると、リリーステスターはコメントを残して、すべてのリリースアクティビティをリストし、必要に応じて、壊れたテストを修正するためのタスクを記述します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/m0/6f/4p/m06f4pyixg0yoliq2bxpwebwqa8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リリースマスターは、発砲（負荷テスト）のレポートを分析し、エラーの増加を確認した場合、それらを再起動します。これで問題が解決しない場合は、犯人を探すか、当番の開発者に助けを求めます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配信結果に問題がない場合、リリースウィザードはマーケットのチャートを開き、リリースを本番環境に展開し始めます。エラーの増加を見逃さないように、チャートを監視する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lm/mv/-t/lmmv-tpvnzoevlhuxtup9g-2wje.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エラーの増加の原因がリリースのせいである場合、リリースマスターはそれをロールバックし、理由を理解します。</font><font style="vertical-align: inherit;">スケジュールが正常である場合、彼はリリースを完了し、既製のタスクから新しいスケジュールを収集し始めます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最高を目指して</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてがうまく機能しているという事実にもかかわらず、常に最善を尽くすように努力する必要があります。</font><font style="vertical-align: inherit;">私たちは明るい将来の継続的デリバリーの危機に瀕しています。そこでは、リリースの形の中間段階なしに、タスクが互いに並行してチェックされ、実稼働でロールアウトされます。</font><font style="vertical-align: inherit;">これにより、リリース時のウォッチに気を取られることがなくなり、ユーザーへの機能の提供が大幅に加速されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s-/vj/hj/s-vjhj21amhpeay9yblz52t0fv8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
段階的にCDに切り替えることにしました。最初のステップは、1つのリリースで両方のプラットフォーム（タッチとデスクトップ）への機能のロールアウトを組み合わせたモノリポジトリの導入でした。このアプローチには、開発とテストの両方に利点があります。コンポーネントのテストに費やす時間が大幅に短縮されます。タスクが1か所に配置され、ナビゲーションが簡単になりました。マネージャーが製品のリリースタスクを展開する正確なタイミングを知っており、プラットフォームの展開の間に反発がないため、管理者がナビゲートしやすくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CDの次のステップは、「緑の傷」の導入です。</font><font style="vertical-align: inherit;">テスターがチェックしたチケットごとに、両方のプラットフォームの2種類のテストが起動されます。機能テストと画面テストです。</font><font style="vertical-align: inherit;">すべてのテストにはmokiが必要です。</font><font style="vertical-align: inherit;">いずれかのプラットフォームのテストが失敗した場合、タスクは検証済みとは見なされません。</font><font style="vertical-align: inherit;">テストがクラッシュした場合は、これが発生した理由を理解する必要があります。</font><font style="vertical-align: inherit;">落下テストがなく、すべてのチェックが正常に完了した場合にのみ、タスクが製品に送信されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご清聴ありがとうございました。</font><font style="vertical-align: inherit;">私たちの経験がお役に立てば幸いです。コメントでお待ちしています。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja478850/index.html">CSSグリッドの命名</a></li>
<li><a href="../ja478852/index.html">OpenShiftのGitOpsの概要</a></li>
<li><a href="../ja478854/index.html">Webサーバーの戦い。パート1-現実から切り離されたHTTP：</a></li>
<li><a href="../ja478856/index.html">SD-WAN-2020年の最近の傾向と予測</a></li>
<li><a href="../ja478858/index.html">XHProf Adminでのプロファイリングセッションの比較</a></li>
<li><a href="../ja478866/index.html">Meet Space-JetBrainsの新製品</a></li>
<li><a href="../ja478872/index.html">DIY：倉庫監視を自動化する方法</a></li>
<li><a href="../ja478874/index.html">東芝は最大6 TBの容量を持つ2つの新しいHDDラインを発表し、2020年以来企業セグメントに焦点を当てていることを発表しました</a></li>
<li><a href="../ja478878/index.html">StackOverflowの歴史の中で最も人気のあるコードにはバグがあります。 </a></li>
<li><a href="../ja478880/index.html">2019年後半に雇用主がITスペシャリストに提供した給与</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>