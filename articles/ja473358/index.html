<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ•µğŸ¼ ğŸ“‹ ğŸ‘†ğŸ¿ ã‚³ãƒ¼ãƒ‰ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¨ã—ã¦ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‚’ä½¿ç”¨ã—ã¦Nexus Sonatypeã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦æ§‹æˆã™ã‚‹ ğŸ¤› ğŸ‘´ğŸ¾ ğŸ›‚</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sonatype Nexusã¯ã€é–‹ç™ºè€…ãŒJavaï¼ˆMavenï¼‰ä¾å­˜é–¢ä¿‚ã€Dockerã€Pythonã€Rubyã€NPMã€Bowerã‚¤ãƒ¡ãƒ¼ã‚¸ã€RPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€gitlfsã€Aptã€Goã€Nugetã‚’ãƒ—ãƒ­ã‚­ã‚·ã€ä¿å­˜ã€ç®¡ç†ã—ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’é…å¸ƒã§ãã‚‹çµ±åˆãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€‚ 
 Sonat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ã‚³ãƒ¼ãƒ‰ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¨ã—ã¦ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‚’ä½¿ç”¨ã—ã¦Nexus Sonatypeã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦æ§‹æˆã™ã‚‹</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473358/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sonatype Nexusã¯ã€é–‹ç™ºè€…ãŒJavaï¼ˆMavenï¼‰ä¾å­˜é–¢ä¿‚ã€Dockerã€Pythonã€Rubyã€NPMã€Bowerã‚¤ãƒ¡ãƒ¼ã‚¸ã€RPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€gitlfsã€Aptã€Goã€Nugetã‚’ãƒ—ãƒ­ã‚­ã‚·ã€ä¿å­˜ã€ç®¡ç†ã—ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’é…å¸ƒã§ãã‚‹çµ±åˆãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€‚ </font></font></p><br>
<h3 id="zachem-nuzhen-sonatype-nexus"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sonatype NexusãŒå¿…è¦ãªã®ã¯ãªãœã§ã™ã‹ï¼Ÿ</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹å ´åˆã€‚</font></font></li>
</ul><a name="habracut"></a><br>
<h3 id="artefakty-podderzhivaemye-v-bazovoy-postavke-sonatype-nexus"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sonatype Nexusãƒ™ãƒ¼ã‚¹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆï¼š</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Javaã€Mavenï¼ˆjarï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonï¼ˆpipï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ«ãƒ“ãƒ¼ï¼ˆå®çŸ³ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NPM</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒã‚¦ã‚¢ãƒ¼</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¤ãƒ ï¼ˆrpmï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gitlfs</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aptï¼ˆdebï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¡Œã</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒŒã‚²</font></font></li>
</ul><br>
<h3 id="artefakty-podderzhivaemye-soobschestvom"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãŒã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆï¼š</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½œæ›²</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒŠãƒ³</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPAN</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ELPA</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…œ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P2</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R</font></font></li>
</ul><br>
<h2 id="ustanovka-sonatype-nexus-ispolzuya-httpsgithubcomansible-thoteamnexus3-oss"><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">https://github.com/ansible-ThoTeam/nexus3-oss</font></a><font style="vertical-align: inherit;">ã‚’ä½¿ç”¨ã—ã¦Sonatype Nexusã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™</font></font></a></h2><br>
<h3 id="trebovaniya"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¿…è¦æ¡ä»¶</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã§ã®ansibleã®ä½¿ç”¨ã«ã¤ã„ã¦ãŠèª­ã¿ãã ã•ã„ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>pip install ansible</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ¬ã‚¤ãƒ–ãƒƒã‚¯ãŒèµ·å‹•ã™ã‚‹ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«</font><font style="vertical-align: inherit;">ansible </font><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ¬ã‚¤ãƒ–ãƒƒã‚¯ãŒèµ·å‹•ã™ã‚‹ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geerlingguy.java</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™</font></font><code>ansible-galaxy install geerlingguy.java</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ¬ã‚¤ãƒ–ãƒƒã‚¯ãŒèµ·å‹•ã™ã‚‹ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geerlingguy.apache</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™</font></font><code>ansible-galaxy install geerlingguy.apache</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gitãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ã‚’ä½œæˆã™ã‚‹ </font></font><code>git clone https://github.com/ansible-ThoTeam/nexus3-oss.git</code></li>
<li>    CentOS 7, Ubuntu Xenial (16.04) and Bionic (18.04), Debian Jessie and Stretch</li>
<li><code>jmespath</code>          playbook.    <code>sudo pip install -r requirements.txt</code></li>
<li>  playbook ( )   nexus.yml</li>
<li>  nexus <code>ansible-playbook -i host nexus.yml</code></li>
</ul><br>
<h3 id="primer-ansible-playbook-dlya-ustanovki-nexus-bez-ldap-s-repozitoriyami-maven-java-docker-python-ruby-npm-bower-rpm-i-gitlfs"> ansible-playbook   nexus  LDAP   Maven (java), Docker, Python, Ruby, NPM, Bower, RPM  gitlfs.</h3><br>
<pre><code class="plaintext hljs">---<font></font>
- name: Nexus<font></font>
  hosts: nexus<font></font>
  become: yes<font></font>
<font></font>
  vars:<font></font>
    nexus_timezone: 'Asia/Omsk'<font></font>
    nexus_admin_password: "admin123"<font></font>
    nexus_public_hostname: 'apatsev-nexus-playbook'<font></font>
    httpd_setup_enable: false<font></font>
    nexus_privileges:<font></font>
      - name: all-repos-read<font></font>
        description: 'Read &amp; Browse access to all repos'<font></font>
        repository: '*'<font></font>
        actions:<font></font>
          - read<font></font>
          - browse<font></font>
      - name: company-project-deploy<font></font>
        description: 'Deployments to company-project'<font></font>
        repository: company-project<font></font>
        actions:<font></font>
          - add<font></font>
          - edit<font></font>
    nexus_roles:<font></font>
      - id: Developpers # maps to the LDAP group<font></font>
        name: developers<font></font>
        description: All developers<font></font>
        privileges:<font></font>
          - nx-search-read<font></font>
          - all-repos-read<font></font>
          - company-project-deploy<font></font>
        roles: []<font></font>
    nexus_local_users:<font></font>
      - username: jenkins # used as key to update<font></font>
        first_name: Jenkins<font></font>
        last_name: CI<font></font>
        email: support@company.com<font></font>
        password: "s3cr3t"<font></font>
        roles:<font></font>
          - Developpers # role ID here<font></font>
    nexus_blobstores:<font></font>
      - name: company-artifacts<font></font>
        path: /var/nexus/blobs/company-artifacts<font></font>
    nexus_scheduled_tasks:<font></font>
      - name: compact-blobstore<font></font>
        cron: '0 0 22 * * ?'<font></font>
        typeId: blobstore.compact<font></font>
        taskProperties:<font></font>
          blobstoreName: 'company-artifacts'<font></font>
<font></font>
    nexus_repos_maven_proxy:<font></font>
      - name: central<font></font>
        remote_url: 'https://repo1.maven.org/maven2/'<font></font>
        layout_policy: permissive<font></font>
      - name: jboss<font></font>
        remote_url: 'https://repository.jboss.org/nexus/content/groups/public-jboss/'<font></font>
      - name: vaadin-addons<font></font>
        remote_url: 'https://maven.vaadin.com/vaadin-addons/'<font></font>
      - name: jaspersoft<font></font>
        remote_url: 'https://jaspersoft.artifactoryonline.com/jaspersoft/jaspersoft-repo/'<font></font>
        version_policy: mixed<font></font>
    nexus_repos_maven_hosted:<font></font>
      - name: company-project<font></font>
        version_policy: mixed<font></font>
        write_policy: allow<font></font>
        blob_store: company-artifacts<font></font>
    nexus_repos_maven_group:<font></font>
      - name: public<font></font>
        member_repos:<font></font>
          - central<font></font>
          - jboss<font></font>
          - vaadin-addons<font></font>
          - jaspersoft<font></font>
<font></font>
    # Yum. Change nexus_config_yum to true for create yum repository<font></font>
    nexus_config_yum: true<font></font>
    nexus_repos_yum_hosted:<font></font>
      - name: private_yum_centos_7<font></font>
        repodata_depth: 1<font></font>
    nexus_repos_yum_proxy:<font></font>
      - name: epel_centos_7_x86_64<font></font>
        remote_url: http://download.fedoraproject.org/pub/epel/7/x86_64<font></font>
        maximum_component_age: -1<font></font>
        maximum_metadata_age: -1<font></font>
        negative_cache_ttl: 60<font></font>
      - name: centos-7-os-x86_64<font></font>
        remote_url: http://mirror.centos.org/centos/7/os/x86_64/<font></font>
        maximum_component_age: -1<font></font>
        maximum_metadata_age: -1<font></font>
        negative_cache_ttl: 60<font></font>
    nexus_repos_yum_group:<font></font>
      - name: yum_all<font></font>
        member_repos:<font></font>
          - private_yum_centos_7<font></font>
          - epel_centos_7_x86_64<font></font>
<font></font>
    # NPM. Change nexus_config_npm to true for create npm repository<font></font>
    nexus_config_npm: true<font></font>
    nexus_repos_npm_hosted: []<font></font>
    nexus_repos_npm_group:<font></font>
      - name: npm-public<font></font>
        member_repos:<font></font>
          - npm-registry<font></font>
    nexus_repos_npm_proxy:<font></font>
      - name: npm-registry<font></font>
        remote_url: https://registry.npmjs.org/<font></font>
        negative_cache_enabled: false<font></font>
<font></font>
    # Docker. Change nexus_config_docker to true for create docker repository<font></font>
    nexus_config_docker: true<font></font>
    nexus_repos_docker_hosted:<font></font>
      - name: docker-hosted<font></font>
        http_port: "{{ nexus_docker_hosted_port }}"<font></font>
        v1_enabled: True<font></font>
    nexus_repos_docker_proxy:<font></font>
      - name: docker-proxy<font></font>
        http_port: "{{ nexus_docker_proxy_port }}"<font></font>
        v1_enabled: True<font></font>
        index_type: "HUB"<font></font>
        remote_url: "https://registry-1.docker.io"<font></font>
        use_nexus_certificates_to_access_index: false<font></font>
        maximum_component_age: 1440<font></font>
        maximum_metadata_age: 1440<font></font>
        negative_cache_enabled: true<font></font>
        negative_cache_ttl: 1440<font></font>
    nexus_repos_docker_group:<font></font>
      - name: docker-group<font></font>
        http_port: "{{ nexus_docker_group_port }}"<font></font>
        v1_enabled: True<font></font>
        member_repos:<font></font>
          - docker-hosted<font></font>
          - docker-proxy<font></font>
<font></font>
    # Bower. Change nexus_config_bower to true for create bower repository<font></font>
    nexus_config_bower: true<font></font>
    nexus_repos_bower_hosted:<font></font>
      - name: bower-hosted<font></font>
    nexus_repos_bower_proxy:<font></font>
      - name: bower-proxy<font></font>
        index_type: "proxy"<font></font>
        remote_url: "https://registry.bower.io"<font></font>
        use_nexus_certificates_to_access_index: false<font></font>
        maximum_component_age: 1440<font></font>
        maximum_metadata_age: 1440<font></font>
        negative_cache_enabled: true<font></font>
        negative_cache_ttl: 1440<font></font>
    nexus_repos_bower_group:<font></font>
      - name: bower-group<font></font>
        member_repos:<font></font>
          - bower-hosted<font></font>
          - bower-proxy<font></font>
<font></font>
    # Pypi. Change nexus_config_pypi to true for create pypi repository<font></font>
    nexus_config_pypi: true<font></font>
    nexus_repos_pypi_hosted:<font></font>
      - name: pypi-hosted<font></font>
    nexus_repos_pypi_proxy:<font></font>
      - name: pypi-proxy<font></font>
        index_type: "proxy"<font></font>
        remote_url: "https://pypi.org/"<font></font>
        use_nexus_certificates_to_access_index: false<font></font>
        maximum_component_age: 1440<font></font>
        maximum_metadata_age: 1440<font></font>
        negative_cache_enabled: true<font></font>
        negative_cache_ttl: 1440<font></font>
    nexus_repos_pypi_group:<font></font>
      - name: pypi-group<font></font>
        member_repos:<font></font>
          - pypi-hosted<font></font>
          - pypi-proxy<font></font>
<font></font>
    # rubygems. Change nexus_config_rubygems to true for create rubygems repository<font></font>
    nexus_config_rubygems: true<font></font>
    nexus_repos_rubygems_hosted:<font></font>
      - name: rubygems-hosted<font></font>
    nexus_repos_rubygems_proxy:<font></font>
      - name: rubygems-proxy<font></font>
        index_type: "proxy"<font></font>
        remote_url: "https://rubygems.org"<font></font>
        use_nexus_certificates_to_access_index: false<font></font>
        maximum_component_age: 1440<font></font>
        maximum_metadata_age: 1440<font></font>
        negative_cache_enabled: true<font></font>
        negative_cache_ttl: 1440<font></font>
    nexus_repos_rubygems_group:<font></font>
      - name: rubygems-group<font></font>
        member_repos:<font></font>
          - rubygems-hosted<font></font>
          - rubygems-proxy<font></font>
<font></font>
    # gitlfs. Change nexus_config_gitlfs to true for create gitlfs repository<font></font>
    nexus_config_gitlfs: true<font></font>
    nexus_repos_gitlfs_hosted:<font></font>
      - name: gitlfs-hosted<font></font>
<font></font>
  roles:<font></font>
    - { role: geerlingguy.java }<font></font>
    # Debian/Ubuntu only<font></font>
    # - { role: geerlingguy.apache, apache_create_vhosts: no, apache_mods_enabled: ["proxy_http.load", "headers.load"], apache_remove_default_vhost: true, tags: ["geerlingguy.apache"] }<font></font>
    # RedHat/CentOS only<font></font>
    - { role: geerlingguy.apache, apache_create_vhosts: no, apache_remove_default_vhost: true, tags: ["geerlingguy.apache"] }<font></font>
    - { role: ansible-thoteam.nexus3-oss, tags: ['ansible-thoteam.nexus3-oss'] }</code></pre><br>
<h2 id="skrinshoty">:</h2><br>
<p><img src="https://habrastorage.org/webt/mb/7a/e7/mb7ae7qibkvkuhq_vfrce9hjzoo.png"></p><br>
<p><img src="https://habrastorage.org/webt/jp/vw/pq/jpvwpqijp9ccgw5gzkz6ytv0iyy.png"></p><br>
<h2 id="peremennye-roli"> </h2><br>
<h2 id="role-variables">Role Variables</h2><br>
<p>     (. <code>default/main.yml</code>):</p><br>
<h3 id="general-variables">General variables</h3><br>
<pre><code class="plaintext hljs">    nexus_version: ''<font></font>
    nexus_timezone: 'UTC'</code></pre><br>
<p>       Nexus.    ,   <code>nexus_version</code>.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">https://www.sonatype.com/download-oss-sonatype</a>.</p><br>
<p>      ,       Nexus.</p><br>
<p>      Nexus,  ,   ,    ,      (,  yum    nexus   3.8.0, git lfs repo  nexus   3.3.0  . .)</p><br>
<p><code>nexus timezone</code> â€”     Java,           cron  nexus_scheduled tasks.</p><br>
<h3 id="port-nexus-i-kontekstnyy-put"> Nexus   </h3><br>
<pre><code class="plaintext hljs">    nexus_default_port: 8081<font></font>
    nexus_default_context_path: '/'</code></pre><br>
<p>     Java-. <code>nexus_default_context_path</code>    ,   , .: <code>nexus_default_context_path: '/nexus/'</code>.</p><br>
<h3 id="polzovatel-i-gruppa-os-nexus">    Nexus</h3><br>
<pre><code class="plaintext hljs">    nexus_os_group: 'nexus'<font></font>
    nexus_os_user: 'nexus'</code></pre><br>
<p>  ,     Nexus   ,   ,   .</p><br>
<pre><code class="plaintext hljs">    nexus_os_user_home_dir: '/home/nexus'</code></pre><br>
<p>        nexus</p><br>
<h3 id="katalogi-ekzemplyarov-nexus">  Nexus</h3><br>
<pre><code class="plaintext hljs">    nexus_installation_dir: '/opt'<font></font>
    nexus_data_dir: '/var/nexus'<font></font>
    nexus_tmp_dir: "{{ (ansible_os_family == 'RedHat') | ternary('/var/nexus-tmp', '/tmp/nexus') }}"</code></pre><br>
<p> Nexus.</p><br>
<ul>
<li><code>nexus_installation_dir</code>    </li>
<li><code>nexus_data_dir</code>   ,    .   blobstores <code>nexus_data_dir</code>   ,   <code>nexus_blobstores</code>.</li>
<li><code>nexus_tmp_dir</code>    .     redhat    <code>/tmp</code>        .  #168.</li>
</ul><br>
<h3 id="nastroyka-ispolzovanie-pamyati-nexus-jvm">   Nexus JVM</h3><br>
<pre><code class="plaintext hljs">    nexus_min_heap_size: "1200M"<font></font>
    nexus_max_heap_size: "{{ nexus_min_heap_size }}"<font></font>
    nexus_max_direct_memory: "2G"</code></pre><br>
<p>     Nexus. <strong>,    </strong> <em>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">    nexus</a></em>   ,   .</p><br>
<p>  ,     :</p><br>
<blockquote>    JVM heap       .        ,      .</blockquote><br>
<h3 id="parol-administratora"> </h3><br>
<pre><code class="plaintext hljs">    nexus_admin_password: 'changeme'</code></pre><br>
<p>   Â«adminÂ»  . <em>       </em>. ,  [     ](# change-admin-password-after-first-install),         .</p><br>
<p><strong>           playbook,   [ ansible-vault] (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">https://docs.ansible.com/ansible/latest/user_guide/vault.html</a>) (     , , ,   include_vars)</strong></p><br>
<h3 id="anonimnyy-dostup-po-umolchaniyu">   </h3><br>
<pre><code class="plaintext hljs">    nexus_anonymous_access: false</code></pre><br>
<p>    .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>.</p><br>
<h3 id="publichnoe-imya-hosta">  </h3><br>
<pre><code class="plaintext hljs">    nexus_public_hostname: 'nexus.vm'<font></font>
    nexus_public_scheme: https</code></pre><br>
<p>     (https  http),    Nexus     .</p><br>
<h3 id="dostup-api-dlya-etoy-roli"> API   </h3><br>
<pre><code class="plaintext hljs">    nexus_api_hostname: localhost<font></font>
    nexus_api_scheme: http<font></font>
    nexus_api_validate_certs: "{{ nexus_api_scheme == 'https' }}"<font></font>
    nexus_api_context_path: "{{ nexus_default_context_path }}"<font></font>
    nexus_api_port: "{{ nexus_default_port }}"</code></pre><br>
<p>  ,     API Nexus  .<br>
<strong>   .  ,        </strong></p><br>
<h3 id="nastroyka-obratnogo-proksi">  </h3><br>
<pre><code class="plaintext hljs">    httpd_setup_enable: false<font></font>
    httpd_server_name: "{{ nexus_public_hostname }}"<font></font>
    httpd_default_admin_email: "admin@example.com"<font></font>
    httpd_ssl_certificate_file: 'files/nexus.vm.crt'<font></font>
    httpd_ssl_certificate_key_file: 'files/nexus.vm.key'<font></font>
    # httpd_ssl_certificate_chain_file: "{{ httpd_ssl_certificate_file }}"<font></font>
    httpd_copy_ssl_files: true</code></pre><br>
<p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> - SSL</a>.<br>
    httpd. :   <code>httpd_setup_enable</code>  <code>true</code>, nexus   127.0.0.1:8081,   <em></em>     HTTP- 8081   IP-.</p><br>
<p>     â€” <code>nexus_public_hostname</code>.       - ,    <code>httpd_server_name</code>   .</p><br>
<p> <code>httpd_copy_ssl_files: true</code> ( )        playbook         apache.</p><br>
<p>       ,  <code>httpd_copy_ssl_files: false</code>    :</p><br>
<pre><code class="plaintext hljs">    # These specifies to the vhost where to find on the remote server file<font></font>
    # system the certificate files.<font></font>
    httpd_ssl_cert_file_location: "/etc/pki/tls/certs/wildcard.vm.crt"<font></font>
    httpd_ssl_cert_key_location: "/etc/pki/tls/private/wildcard.vm.key"<font></font>
    # httpd_ssl_cert_chain_file_location: "{{ httpd_ssl_cert_file_location }}"</code></pre><br>
<p><code>httpd_ssl_cert_chain_file_location</code>       ,       </p><br>
<pre><code class="plaintext hljs">    httpd_default_admin_email: "admin@example.com"</code></pre><br>
<p>      </p><br>
<h3 id="konfiguraciya-ldap"> LDAP</h3><br>
<p> LDAP      </p><br>
<pre><code class="plaintext hljs">    nexus_ldap_realm: false<font></font>
    ldap_connections: []</code></pre><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> LDAP</a>,     :</p><br>
<pre><code class="plaintext hljs">    nexus_ldap_realm: true<font></font>
    ldap_connections:<font></font>
      - ldap_name: 'My Company LDAP' # used as a key to update the ldap config<font></font>
        ldap_protocol: 'ldaps' # ldap or ldaps<font></font>
        ldap_hostname: 'ldap.mycompany.com'<font></font>
        ldap_port: 636<font></font>
        ldap_use_trust_store: false # Wether or not to use certs in the nexus trust store<font></font>
        ldap_search_base: 'dc=mycompany,dc=net'<font></font>
        ldap_auth: 'none' # or simple<font></font>
        ldap_auth_username: 'username' # if auth = simple<font></font>
        ldap_auth_password: 'password' # if auth = simple<font></font>
        ldap_user_base_dn: 'ou=users'<font></font>
        ldap_user_filter: '(cn=*)' # (optional)<font></font>
        ldap_user_object_class: 'inetOrgPerson'<font></font>
        ldap_user_id_attribute: 'uid'<font></font>
        ldap_user_real_name_attribute: 'cn'<font></font>
        ldap_user_email_attribute: 'mail'<font></font>
        ldap_user_subtree: false<font></font>
        ldap_map_groups_as_roles: false<font></font>
        ldap_group_base_dn: 'ou=groups'<font></font>
        ldap_group_object_class: 'posixGroup'<font></font>
        ldap_group_id_attribute: 'cn'<font></font>
        ldap_group_member_attribute: 'memberUid'<font></font>
        ldap_group_member_format: '${username}'<font></font>
        ldap_group_subtree: false</code></pre><br>
<p>  LDAP    ( ),   Â«Â» :</p><br>
<pre><code class="plaintext hljs">    nexus_ldap_realm: true<font></font>
    ldap_connection:<font></font>
      - ldap_name: 'Simplest LDAP config'<font></font>
        ldap_protocol: 'ldaps'<font></font>
        ldap_hostname: 'annuaire.mycompany.com'<font></font>
        ldap_search_base: 'dc=mycompany,dc=net'<font></font>
        ldap_port: 636<font></font>
        ldap_use_trust_store: false<font></font>
        ldap_user_id_attribute: 'uid'<font></font>
        ldap_user_real_name_attribute: 'cn'<font></font>
        ldap_user_email_attribute: 'mail'<font></font>
        ldap_user_object_class: 'inetOrgPerson'</code></pre><br>
<p>  LDAP    (    DSA):</p><br>
<pre><code class="plaintext hljs">    nexus_ldap_realm: true<font></font>
    ldap_connections:<font></font>
      - ldap_name: 'LDAP config with DSA'<font></font>
        ldap_protocol: 'ldaps'<font></font>
        ldap_hostname: 'annuaire.mycompany.com'<font></font>
        ldap_port: 636<font></font>
        ldap_use_trust_store: false<font></font>
        ldap_auth: 'simple'<font></font>
        ldap_auth_username: 'cn=mynexus,ou=dsa,dc=mycompany,dc=net'<font></font>
        ldap_auth_password: "{{ vault_ldap_dsa_password }}" # better keep passwords in an ansible vault<font></font>
        ldap_search_base: 'dc=mycompany,dc=net'<font></font>
        ldap_user_base_dn: 'ou=users'<font></font>
        ldap_user_object_class: 'inetOrgPerson'<font></font>
        ldap_user_id_attribute: 'uid'<font></font>
        ldap_user_real_name_attribute: 'cn'<font></font>
        ldap_user_email_attribute: 'mail'<font></font>
        ldap_user_subtree: false</code></pre><br>
<p>  LDAP    (    DSA) + ,   :</p><br>
<pre><code class="plaintext hljs">    nexus_ldap_realm: true<font></font>
    ldap_connections<font></font>
      - ldap_name: 'LDAP config with DSA'<font></font>
        ldap_protocol: 'ldaps'<font></font>
        ldap_hostname: 'annuaire.mycompany.com'<font></font>
        ldap_port: 636<font></font>
        ldap_use_trust_store: false<font></font>
        ldap_auth: 'simple'<font></font>
        ldap_auth_username: 'cn=mynexus,ou=dsa,dc=mycompany,dc=net'<font></font>
        ldap_auth_password: "{{ vault_ldap_dsa_password }}" # better keep passwords in an ansible vault<font></font>
        ldap_search_base: 'dc=mycompany,dc=net'<font></font>
        ldap_user_base_dn: 'ou=users'<font></font>
        ldap_user_object_class: 'inetOrgPerson'<font></font>
        ldap_user_id_attribute: 'uid'<font></font>
        ldap_user_real_name_attribute: 'cn'<font></font>
        ldap_user_email_attribute: 'mail'<font></font>
        ldap_map_groups_as_roles: true<font></font>
        ldap_group_base_dn: 'ou=groups'<font></font>
        ldap_group_object_class: 'groupOfNames'<font></font>
        ldap_group_id_attribute: 'cn'<font></font>
        ldap_group_member_attribute: 'member'<font></font>
        ldap_group_member_format: 'uid=${username},ou=users,dc=mycompany,dc=net'<font></font>
        ldap_group_subtree: false</code></pre><br>
<p>  LDAP    (    DSA) + ,    :</p><br>
<pre><code class="plaintext hljs">    nexus_ldap_realm: true<font></font>
    ldap_connections:<font></font>
      - ldap_name: 'LDAP config with DSA'<font></font>
        ldap_protocol: 'ldaps'<font></font>
        ldap_hostname: 'annuaire.mycompany.com'<font></font>
        ldap_port: 636<font></font>
        ldap_use_trust_store: false<font></font>
        ldap_auth: 'simple'<font></font>
        ldap_auth_username: 'cn=mynexus,ou=dsa,dc=mycompany,dc=net'<font></font>
        ldap_auth_password: "{{ vault_ldap_dsa_password }}" # better keep passwords in an ansible vault<font></font>
        ldap_search_base: 'dc=mycompany,dc=net'<font></font>
        ldap_user_base_dn: 'ou=users'<font></font>
        ldap_user_object_class: 'inetOrgPerson'<font></font>
        ldap_user_id_attribute: 'uid'<font></font>
        ldap_user_real_name_attribute: 'cn'<font></font>
        ldap_user_email_attribute: 'mail'<font></font>
        ldap_map_groups_as_roles: true<font></font>
        ldap_map_groups_as_roles_type: 'dynamic'<font></font>
        ldap_user_memberof_attribute: 'memberOf'</code></pre><br>
<h3 id="privilegii"></h3><br>
<pre><code class="plaintext hljs">    nexus_privileges:<font></font>
      - name: all-repos-read # used as key to update a privilege<font></font>
        # type: &lt;one of application, repository-admin, repository-content-selector, repository-view, script or wildcard&gt;<font></font>
        description: 'Read &amp; Browse access to all repos'<font></font>
        repository: '*'<font></font>
        actions: # can be add, browse, create, delete, edit, read or  * (all)<font></font>
          - read<font></font>
          - browse<font></font>
        # pattern: pattern<font></font>
        # domain: domain<font></font>
        # script_name: name</code></pre><br>
<p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>  .     ,  ,          .</p><br>
<p>       :</p><br>
<pre><code class="plaintext hljs">    _nexus_privilege_defaults:<font></font>
      type: repository-view<font></font>
      format: maven2<font></font>
      actions:<font></font>
        - read</code></pre><br>
<h3 id="roli-vnutri-nexus-imeetsya-vidu"> ( Nexus  )</h3><br>
<pre><code class="plaintext hljs">    nexus_roles:<font></font>
      - id: Developpers # can map to a LDAP group id, also used as a key to update a role<font></font>
        name: developers<font></font>
        description: All developers<font></font>
        privileges:<font></font>
          - nx-search-read<font></font>
          - all-repos-read<font></font>
        roles: [] # references to other role names</code></pre><br>
<p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>  .</p><br>
<h3 id="polzovateli"></h3><br>
<pre><code class="plaintext hljs">    nexus_local_users: []<font></font>
      # - username: jenkins # used as key to update<font></font>
      #   state: present # default value if ommited, use 'absent' to remove user<font></font>
      #   first_name: Jenkins<font></font>
      #   last_name: CI<font></font>
      #   email: support@company.com<font></font>
      #   password: "s3cr3t"<font></font>
      #   roles:<font></font>
      #     - developers # role ID</code></pre><br>
<p>Local (non-LDAP) users/accounts list to create in nexus.</p><br>
<p>  ( LDAP) /     Nexus. </p><br>
<pre><code class="plaintext hljs">      nexus_ldap_users: []<font></font>
      # - username: j.doe<font></font>
      #   state: present<font></font>
      #   roles:<font></font>
      #     - "nx-admin"</code></pre><br>
<p> Ldap /.  <code>absent</code>     ,    .<br>
 Ldap  .         .</p><br>
<h3 id="selektory-kontenta"> </h3><br>
<pre><code class="plaintext hljs">  nexus_content_selectors:<font></font>
  - name: docker-login<font></font>
    description: Selector for docker login privilege<font></font>
    search_expression: format=="docker" and path=~"/v2/"</code></pre><br>
<p>       . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>.</p><br>
<p>   ,     <code>type: repository-content-selector</code>  <code>contentSelector</code></p><br>
<pre><code class="plaintext hljs">- name: docker-login-privilege<font></font>
  type: repository-content-selector<font></font>
  contentSelector: docker-login<font></font>
  description: 'Login to Docker registry'<font></font>
  repository: '*'<font></font>
  actions:<font></font>
  - read<font></font>
  - browse</code></pre><br>
<h3 id="blobstores-i-repozitorii">Blobstores  </h3><br>
<pre><code class="plaintext hljs">    nexus_delete_default_repos: false</code></pre><br>
<p>Delete the repositories from the nexus install initial default configuration. This step is only executed on first-time install (when <code>nexus_data_dir</code> has been detected empty).</p><br>
<p>        Nexus.        ( <code>nexus_data_dir</code> ).</p><br>
<pre><code class="plaintext hljs">    nexus_delete_default_blobstore: false</code></pre><br>
<p>Delete the default blobstore from the nexus install initial default configuration. This can be done only if <code>nexus_delete_default_repos: true</code> and all configured repositories (see below) have an explicit <code>blob_store: custom</code>. This step is only executed on first-time install (when <code>nexus_data_dir</code> has been detected empty).</p><br>
<p>   ( )      .     ( )  <code>nexus_delete_default_repos: true</code>.        ( <code>nexus_data_dir</code> ).</p><br>
<pre><code class="plaintext hljs">    nexus_blobstores: []<font></font>
    # example blobstore item :<font></font>
    # - name: separate-storage<font></font>
    #   type: file<font></font>
    #   path: /mnt/custom/path<font></font>
    # - name: s3-blobstore<font></font>
    #   type: S3<font></font>
    #   config:<font></font>
    #     bucket: s3-blobstore<font></font>
    #     accessKeyId: "{{ VAULT_ENCRYPTED_KEY_ID }}"<font></font>
    #     secretAccessKey: "{{ VAULT_ENCRYPTED_ACCESS_KEY }}"</code></pre><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">Blobstores</a> to create. A blobstore path and a repository blobstore cannot be updated after initial creation (any update here will be ignored on re-provisionning).</p><br>
<p>Configuring blobstore on S3 is provided as a convenience and is not part of the automated tests we run on travis. Please note that storing on S3 is only recommended for instances deployed on AWS.</p><br>
<p>C <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">Blobstores</a>.              (       ).</p><br>
<p>  BLOB-  S3   .  ,    S3    ,   AWS.</p><br>
<pre><code class="plaintext hljs">    nexus_repos_maven_proxy:<font></font>
      - name: central<font></font>
        remote_url: 'https://repo1.maven.org/maven2/'<font></font>
        layout_policy: permissive<font></font>
        # maximum_component_age: -1<font></font>
        # maximum_metadata_age: 1440<font></font>
        # negative_cache_enabled: true<font></font>
        # negative_cache_ttl: 1440<font></font>
      - name: jboss<font></font>
        remote_url: 'https://repository.jboss.org/nexus/content/groups/public-jboss/'<font></font>
        # maximum_component_age: -1<font></font>
        # maximum_metadata_age: 1440<font></font>
        # negative_cache_enabled: true<font></font>
        # negative_cache_ttl: 1440<font></font>
    # example with a login/password :<font></font>
    # - name: secret-remote-repo<font></font>
    #   remote_url: 'https://company.com/repo/secure/private/go/away'<font></font>
    #   remote_username: 'username'<font></font>
    #   remote_password: 'secret'<font></font>
    #   # maximum_component_age: -1<font></font>
    #   # maximum_metadata_age: 1440<font></font>
    #   # negative_cache_enabled: true<font></font>
    #   # negative_cache_ttl: 1440</code></pre><br>
<p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">-</a> Maven.</p><br>
<pre><code class="plaintext hljs">    nexus_repos_maven_hosted:<font></font>
      - name: private-release<font></font>
        version_policy: release<font></font>
        write_policy: allow_once  # one of "allow", "allow_once" or "deny"</code></pre><br>
<p>Maven <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">hosted repositories</a> configuration. Negative cache config is optionnal and will default to the above values if omitted.</p><br>
<p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> (hosted) </a> Maven.    (-1)         ,   .</p><br>
<pre><code class="plaintext hljs">    nexus_repos_maven_group:<font></font>
      - name: public<font></font>
        member_repos:<font></font>
          - central<font></font>
          - jboss</code></pre><br>
<p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a> Maven.</p><br>
<p>         :</p><br>
<pre><code class="plaintext hljs">    _nexus_repos_maven_defaults:<font></font>
      blob_store: default # Note : cannot be updated once the repo has been created<font></font>
      strict_content_validation: true<font></font>
      version_policy: release # release, snapshot or mixed<font></font>
      layout_policy: strict # strict or permissive<font></font>
      write_policy: allow_once # one of "allow", "allow_once" or "deny"<font></font>
      maximum_component_age: -1  # Nexus gui default. For proxies only<font></font>
      maximum_metadata_age: 1440  # Nexus gui default. For proxies only<font></font>
      negative_cache_enabled: true # Nexus gui default. For proxies only<font></font>
      negative_cache_ttl: 1440 # Nexus gui default. For proxies only</code></pre><br>
<p>Docker, Pypi, Raw, Rubygems, Bower, NPM, Git-LFS and yum repository types:<br>
see <code>defaults/main.yml</code> for these options:</p><br>
<p> Docker, Pypi, Raw, Rubygems, Bower, NPM, Git-LFS  yum   :<br>
 <code>defaults/main.yml</code>   :</p><br>
<pre><code class="plaintext hljs">      nexus_config_pypi: false<font></font>
      nexus_config_docker: false<font></font>
      nexus_config_raw: false<font></font>
      nexus_config_rubygems: false<font></font>
      nexus_config_bower: false<font></font>
      nexus_config_npm: false<font></font>
      nexus_config_gitlfs: false<font></font>
      nexus_config_yum: false</code></pre><br>
<p> ,        ,       ,  maven.    false</p><br>
<pre><code class="plaintext hljs">nexus_nuget_api_key_realm: false<font></font>
nexus_npm_bearer_token_realm: false<font></font>
nexus_docker_bearer_token_realm: false  # required for docker anonymous access</code></pre><br>
<p>Remote User Realm      </p><br>
<pre><code class="plaintext hljs">nexus_rut_auth_realm: true</code></pre><br>
<p>      </p><br>
<pre><code class="plaintext hljs">nexus_rut_auth_header: "CUSTOM_HEADER"</code></pre><br>
<h3 id="zaplanirovannye-zadachi"> </h3><br>
<pre><code class="plaintext hljs">    nexus_scheduled_tasks: []<font></font>
    #  #  Example task to compact blobstore :<font></font>
    #  - name: compact-docker-blobstore<font></font>
    #    cron: '0 0 22 * * ?'<font></font>
    #    typeId: blobstore.compact<font></font>
    #    task_alert_email: alerts@example.org  # optional<font></font>
    #    taskProperties:<font></font>
    #      blobstoreName: {{ nexus_blob_names.docker.blob }} # all task attributes are stored as strings by nexus internally<font></font>
    #  #  Example task to purge maven snapshots<font></font>
    #  - name: Purge-maven-snapshots<font></font>
    #    cron: '0 50 23 * * ?'<font></font>
    #    typeId: repository.maven.remove-snapshots<font></font>
    #    task_alert_email: alerts@example.org  # optional<font></font>
    #    taskProperties:<font></font>
    #      repositoryName: "*"  # * for all repos. Change to a repository name if you only want a specific one<font></font>
    #      minimumRetained: "2"<font></font>
    #      snapshotRetentionDays: "2"<font></font>
    #      gracePeriodInDays: "2"<font></font>
    #    booleanTaskProperties:<font></font>
    #      removeIfReleased: true<font></font>
    #  #  Example task to purge unused docker manifest and images<font></font>
    #  - name: Purge unused docker manifests and images<font></font>
    #    cron: '0 55 23 * * ?'<font></font>
    #    typeId: "repository.docker.gc"<font></font>
    #    task_alert_email: alerts@example.org  # optional<font></font>
    #    taskProperties:<font></font>
    #      repositoryName: "*"  # * for all repos. Change to a repository name if you only want a specific one<font></font>
    #  #  Example task to purge incomplete docker uploads<font></font>
    #  - name: Purge incomplete docker uploads<font></font>
    #    cron: '0 0 0 * * ?'<font></font>
    #    typeId: "repository.docker.upload-purge"<font></font>
    #    task_alert_email: alerts@example.org  # optional<font></font>
    #    taskProperties:<font></font>
    #      age: "24"</code></pre><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>  . <code>typeId</code>    <code>taskProperties</code>/<code>booleanTaskProperties</code>   :</p><br>
<ul>
<li>   Java <code>org.sonatype.nexus.scheduling.TaskDescriptorSupport</code></li>
<li> HTML-     </li>
<li>   AJAX      .</li>
</ul><br>
<p><strong>        yaml     </strong>:</p><br>
<ul>
<li><code>taskProperties</code>     (. .  ,  ,   ...).</li>
<li><code>booleanTaskProperties</code>     (. .         ).</li>
</ul><br>
<h3 id="rezervnye-kopii"> </h3><br>
<pre><code class="plaintext hljs">      nexus_backup_configure: false<font></font>
      nexus_backup_cron: '0 0 21 * * ?'  # See cron expressions definition in nexus create task gui<font></font>
      nexus_backup_dir: '/var/nexus-backup'<font></font>
      nexus_restore_log: '{{ nexus_backup_dir }}/nexus-restore.log'<font></font>
      nexus_backup_rotate: false<font></font>
      nexus_backup_rotate_first: false<font></font>
      nexus_backup_keep_rotations: 4  # Keep 4 backup rotation by default (current + last 3)</code></pre><br>
<p>    ,     <code>nexus_backup_configure</code>  <code>true</code>.<br>
           Nexus<br>
 ,   <code>nexus_backup_cron</code> (  21:00  ).<br>
. [ groovy   ](templates / backup.groovy.j2)    .<br>
       <code>nexus_scheduled_tasks</code>,  <br>
   playbook.</p><br>
<p>   /  ,  <code>nexus_backup_rotate: true</code>    ,        <code>nexus_backup_keep_rotations</code> (  4).</p><br>
<p>  ,            ,<br>
   <code>nexus_backup_rotate_first: true</code>.    /  .        .  ,       <br>
  ,     .</p><br>
<h4 id="procedura-vosstanovleniya"> </h4><br>
<p> playbook   <code>-e nexus_restore_point=&lt;YYYY-MM-dd-HH-mm-ss&gt;</code><br>
(, 2017-12-17-21-00-00  17  2017  21:00</p><br>
<h4 id="udalenie-nexus"> nexus</h4><br>
<p><strong>:     .     ,   </strong></p><br>
<p>  <code>nexus_purge</code>,          nexus    .</p><br>
<pre><code class="bash hljs">ansible-playbook -i your/inventory.ini your_nexus_playbook.yml -e nexus_purge=<span class="hljs-literal">true</span></code></pre><br>
<h4 id="izmenit-parol-administratora-posle-pervoy-ustanovki">     </h4><br>
<pre><code class="plaintext hljs">    nexus_default_admin_password: 'admin123'</code></pre><br>
<p><strong>       playbook</strong>.       Nexus     ,        <code>nexus_admin_password</code>.</p><br>
<p>        ,           .   <code>nexus_admin_password</code>       :</p><br>
<pre><code class="bash hljs">ansible-playbook -i your/inventory.ini your_playbook.yml -e nexus_default_admin_password=oldPassword</code></pre><br>
<p>   Nexus Sonatype: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">https://t.me/ru_nexus_sonatype</a></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja473346/index.html">Node.jsã¨Oracleãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã—ãŸREST APIã®ä½œæˆã€‚ãƒ‘ãƒ¼ãƒˆ2</a></li>
<li><a href="../ja473348/index.html">ä¾‹ã¨ã—ã¦åˆ†é¡å•é¡Œã‚’ä½¿ç”¨ã—ãŸæ©Ÿæ¢°å­¦ç¿’ã«ãŠã‘ã‚‹æ…£æ€§ï¼ˆSGDmï¼‰ã®è€ƒãˆæ–¹ã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ï¼ˆAdagradï¼‰ãŠã‚ˆã³æ­£å‰‡åŒ–ã®è€ƒãˆæ–¹</a></li>
<li><a href="../ja473350/index.html">Node.jsã¨Oracleãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã—ãŸREST APIã®ä½œæˆã€‚ãƒ‘ãƒ¼ãƒˆ3</a></li>
<li><a href="../ja473352/index.html">10åˆ†ã§ç¾åœ¨ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³</a></li>
<li><a href="../ja473354/index.html">çµ±è¨ˆå­¦ã®å¥‡å¦™ã•ã«ã¤ã„ã¦</a></li>
<li><a href="../ja473362/index.html">GSoCã®çµŒé¨“ï¼š2äººï¼ˆ3äººï¼‰ã®å­¦ç”ŸãŒCRIUã‚³ãƒ¼ãƒ‰ã‚’æœ¬å½“ã«æ”¹å–„ã—ãŸæ–¹æ³•</a></li>
<li><a href="../ja473364/index.html">ãƒã‚¼ãŒæºã‚Œã¦ã„ã‚‹ï¼šè²©å£²ã‚·ãƒ¼ã‚ºãƒ³ã®eã‚³ãƒãƒ¼ã‚¹ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</a></li>
<li><a href="../ja473366/index.html">ç§ã®ã‚¹ãƒãƒ¼ãƒˆãƒ†ãƒ¬ãƒ“ã«ã¯ä½•ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿã¾ãŸã¯ã€ãƒ†ãƒ¬ãƒ“ã«ä½•ã‚’è©°ã‚è¾¼ã‚€ã“ã¨ãŒã§ãã¾ã™ã‹ï¼Ÿ</a></li>
<li><a href="../ja473368/index.html">MIROã¯ã‚ªãƒ¼ãƒ—ãƒ³ãªå±‹å†…ãƒ­ãƒœãƒƒãƒˆãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚ãƒ‘ãƒ¼ãƒˆ3-ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼šESP8266</a></li>
<li><a href="../ja473372/index.html">ç°¡å˜ãªé€šè©±è¿½è·¡ã‚µãƒ¼ãƒ“ã‚¹ã®ä½œæˆã€ãƒ‘ãƒ¼ãƒˆ1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>