<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎋 🧙 👨🏽‍🔧 Wie wir gelernt haben, Filme zu empfehlen und warum Sie sich nicht nur auf Bewertungen verlassen sollten 🚶🏼 🎦 🤳🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Stellen Sie sich vor, Sie möchten den Abend mit einem Film verbringen, wissen aber nicht, welchen Sie wählen sollen. Yandex-Benutzer befinden sich häu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Wie wir gelernt haben, Filme zu empfehlen und warum Sie sich nicht nur auf Bewertungen verlassen sollten</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/497390/"><img src="https://habrastorage.org/webt/vu/_4/oo/vu_4oolbpa8pde7nsycpg5vpokq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sich vor, Sie möchten den Abend mit einem Film verbringen, wissen aber nicht, welchen Sie wählen sollen. Yandex-Benutzer befinden sich häufig in derselben Situation, daher entwickelt unser Team Empfehlungen, die auf Search and Air zu finden sind. Es scheint, dass dies kompliziert ist: Wir nehmen Benutzerbewertungen, mit deren Hilfe wir das Auto trainieren, um Filme zu finden, die wahrscheinlich 5 Punkte geben, erhalten wir eine vorgefertigte Liste von Filmen. Dieser Ansatz funktioniert jedoch nicht. Warum? Darüber erzähle ich Ihnen heute.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein bisschen Geschichte. Bereits 2006 startete Netflix den maschinellen Lernwettbewerb mit dem Netflix-Preis. Wenn Sie es plötzlich vergessen haben, hat das Unternehmen noch nicht im Internet gestreamt, sondern Filme auf DVD ausgeliehen. Aber selbst dann war es für sie wichtig, die Bewertung des Benutzers vorherzusagen, um ihm etwas zu empfehlen. Das Wesentliche des Wettbewerbs ist also, dass die Vorhersage der Zuschauerbewertungen 10% besser ist (gemäß der RMSE-Metrik) als Cinematch, das Netflix-Empfehlungssystem. Dies war einer der ersten Massenwettbewerbe dieser Art. Das Interesse hat einen riesigen Datensatz (mehr als 100 Millionen Bewertungen) sowie einen Preis von 1 Million US-Dollar aufgeheizt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Wettbewerb endete 2009. </font><font style="vertical-align: inherit;">Die Teams von BellKors Pragmatic Chaos und The Ensemble erreichten die Ziellinie mit demselben Ergebnis (RMSE = 0,8567), aber The Ensemble belegte den zweiten Platz, weil sie die Lösung 20 Minuten später als die Konkurrenten schickten. </font><font style="vertical-align: inherit;">Ergebnisse und Arbeiten finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Aber das Interessanteste ist anders. </font><font style="vertical-align: inherit;">Wenn Sie den wiederholten Geschichten auf Fachkonferenzen glauben, wurden die Gewinneralgorithmen nicht in der Produktion des bald gestarteten Video-Streaming-Dienstes angezeigt. </font><font style="vertical-align: inherit;">Ich kann nicht über die Gründe für die Entscheidungen anderer sprechen, aber ich werde Ihnen sagen, warum wir dasselbe getan haben.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Persönliche Bewertung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seit geraumer Zeit können Yandex-Benutzer Filme bewerten, die sie gesehen haben. Und das nicht nur bei KinoPoisk, sondern auch in den Suchergebnissen. Im Laufe der Zeit haben wir Hunderte Millionen Schätzungen von zig Millionen Menschen gesammelt. Irgendwann haben wir uns entschlossen, diese Daten zu verwenden, um den Benutzern zu helfen, zu verstehen, wie sehr sie sich einen Film wünschen. Tatsächlich haben wir das gleiche Problem wie beim Netflix-Preiswettbewerb gelöst, dh wir haben vorausgesagt, welche Bewertung der Benutzer dem Film geben würde. Zu diesem Zeitpunkt gab es bereits KinoPoisk- und IMDB-Bewertungen, die auf der Grundlage der Bewertungen der Personen erstellt wurden. Wir haben eine persönliche Bewertung erstellt und uns daher entschieden, eine separate Skala als Prozentsatz zu verwenden, um visuelle Ähnlichkeiten und Verwirrung zu vermeiden.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dd/tk/h7/ddtkh7i3ud_9q5lmqtvw-4ambgc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Übrigens ist die Notwendigkeit, die Punkteskala und den Prozentsatz zu korrelieren, ein separater, nicht offensichtlicher Kopfschmerz, daher werde ich kurz darauf eingehen. </font><font style="vertical-align: inherit;">Es scheint, dass für eine 10-Punkte-Skala 10% für jeden Punkt genommen werden - und der Punkt ist im Hut. </font><font style="vertical-align: inherit;">Aber nein. </font><font style="vertical-align: inherit;">Der Grund ist Psychologie und Gewohnheiten. </font><font style="vertical-align: inherit;">Zum Beispiel ist aus Sicht der Benutzer eine Bewertung von 8/10 viel besser als 80%. </font><font style="vertical-align: inherit;">Wie korreliere ich das? </font><font style="vertical-align: inherit;">Mit Crowdsourcing! </font><font style="vertical-align: inherit;">Und so haben wir es gemacht: Wir haben die Aufgabe in Tolok gestartet, in der die Schützen die Erwartungen von Filmen mit einer bestimmten Punktzahl oder einem bestimmten Prozentsatz an persönlicher Bewertung beschrieben haben. </font><font style="vertical-align: inherit;">Basierend auf diesem Markup haben wir eine Funktion ausgewählt, die die Vorhersage der Punktzahl von Punkt zu Prozentsatz übersetzt, damit die Benutzererwartungen erhalten bleiben.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispielquests in Tolok</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/tw/fv/ux/twfvuxxkjd7rnkave0yuudmzs5q.png"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Vorhersagen der Erwartungen an den Film ist nützlich, aber es wäre auch schön, Empfehlungen zu erstellen. </font><font style="vertical-align: inherit;">Das heißt, zeigen Sie der Person sofort eine Liste guter Filme. </font><font style="vertical-align: inherit;">In diesem Moment könnten viele von Ihnen denken: "Und lassen Sie uns einfach die Filme, die der Benutzer nicht gesehen hat, nach persönlicher Bewertung sortieren." </font><font style="vertical-align: inherit;">Das haben wir uns auch zuerst gedacht. </font><font style="vertical-align: inherit;">Aber dann musste ich zwei Probleme lösen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Werkzeugproblem</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn ein Benutzer nach einem bestimmten Film sucht (oder eine bestimmte DVD ausleihen möchte), muss der Dienst die Bewertung dieses bestimmten Films vorhersagen. Genau dieses Problem wurde beim Netflix-Preiswettbewerb gelöst, bei dem die RMSE-Metrik verwendet wurde. Aber die Empfehlungen lösen ein anderes Problem: Sie müssen nicht die Note erraten, sondern einen Film finden, der irgendwann gesehen wird. Und die RMSE-Metrik leistet hier schlechte Arbeit. Zum Beispiel ist die Strafe für die Vorhersage einer Bewertung von 2 anstelle von 1 genau die gleiche wie für 5 anstelle von 4. Unser System sollte jedoch niemals Filme empfehlen, denen der Benutzer 2 gibt! Listenbasierte Metriken eignen sich viel besser für diese Aufgabe, z. B. Precision @ K, Recall @ K, MRR oder NDCG. Ich kann nicht anders, als Ihnen ein wenig mehr darüber zu erzählen (aber wenn Sie nicht an den Metriken interessiert sind, überspringen Sie einfach den nächsten Absatz). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beginnen wir mit der Metrik.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MRR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (mittlerer wechselseitiger Rang). </font><font style="vertical-align: inherit;">Wir werden uns ansehen, an welcher Position im Ranking der Film steht, mit dem der Benutzer im Testzeitraum interagiert (z. B. gesehen oder gelobt) hat. </font><font style="vertical-align: inherit;">Die MRR-Metrik ist die vom Benutzer gemittelte umgekehrte Position eines solchen Films. </font><font style="vertical-align: inherit;">Also</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>M</mi><mi>R</mi><mi>R</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></mfrac><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></munderover><mfrac><mn>1</mn><mrow><mi>r</mi><mi>a</mi><mi>n</mi><msub><mi>k</mi><mi>u</mi></msub></mrow></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="23.7ex" height="4.259ex" viewBox="0 -1132.2 10204.2 1833.9" role="img" focusable="false" style="vertical-align: -1.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-4D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-52" x="1051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-52" x="1811" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-3D" x="2848" y="0"></use><g transform="translate(3626,0)"><g transform="translate(397,0)"><rect stroke="none" width="1056" height="60" x="0" y="220"></rect><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-31" x="496" y="582"></use><g transform="translate(60,-442)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-7C" x="1046" y="0"></use></g></g></g><g transform="translate(5367,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJSZ1-2211" x="0" y="0"></use><g transform="translate(1056,521)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-7C" x="1046" y="0"></use></g><g transform="translate(1056,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-3D" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-31" x="1351" y="0"></use></g></g><g transform="translate(7833,0)"><g transform="translate(286,0)"><rect stroke="none" width="1964" height="60" x="0" y="220"></rect><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-31" x="1138" y="582"></use><g transform="translate(60,-403)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-61" x="451" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-6E" x="981" y="0"></use><g transform="translate(1118,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-75" x="737" y="-213"></use></g></g></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>M</mi><mi>R</mi><mi>R</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></mfrac><munderover><mo>∑</mo><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></munderover><mfrac><mn>1</mn><mrow><mi>r</mi><mi>a</mi><mi>n</mi><msub><mi>k</mi><mi>u</mi></msub></mrow></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-1">MRR = \frac{1}{|U|} \sum_{u=1}^{|U|} \frac{1}{rank_u}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Eine solche Metrik wertet im Gegensatz zu RMSE die gesamte Liste aus, betrachtet jedoch leider nur das erste erratene Element. </font><font style="vertical-align: inherit;">Es ist jedoch einfach, die Metrik zu ändern, um diesen Nachteil zu beseitigen. </font><font style="vertical-align: inherit;">Wir können die Summe der umgekehrten Positionen aller Filme berechnen, mit denen der Benutzer interagiert hat. </font><font style="vertical-align: inherit;">Diese Metrik wird als durchschnittlicher gegenseitiger Trefferrang bezeichnet. </font><font style="vertical-align: inherit;">Diese Metrik berücksichtigt alle erratenen Filme in der Ausgabe. </font><font style="vertical-align: inherit;">Beachten Sie, dass die Position k in der Auszahlung für einen erratenen Film eine Gewichtung von 1 / k und für einen anderen Film eine Gewichtung von 0 erhält. </font><font style="vertical-align: inherit;">Oft wird 1 / log (k) anstelle von 1 / k verwendet: Dies entspricht eher der Wahrscheinlichkeit, dass der Benutzer zur k-Position blättert. </font><font style="vertical-align: inherit;">Das Ergebnis ist eine DCG-Metrik (diskontierter kumulierter Gewinn).</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>D</mi><mi>C</mi><mi>G</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></mfrac><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></munderover><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>p</mi><mi>o</mi><mi>s</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi></mrow></munderover><mfrac><mrow><mi>g</mi><mi>a</mi><mi>i</mi><msub><mi>n</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>p</mi><mi>o</mi><mi>s</mi></mrow></msub></mrow><mrow><mo movablelimits=&quot;true&quot; form=&quot;prefix&quot;>max</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>,</mo><mi>log</mi><mo>&amp;#x2061;</mo><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo></mrow></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="37.927ex" height="4.384ex" viewBox="0 -1186 16329.6 1887.7" role="img" focusable="false" style="vertical-align: -1.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-43" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-47" x="1589" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-3D" x="2653" y="0"></use><g transform="translate(3431,0)"><g transform="translate(397,0)"><rect stroke="none" width="1056" height="60" x="0" y="220"></rect><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-31" x="496" y="582"></use><g transform="translate(60,-442)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-7C" x="1046" y="0"></use></g></g></g><g transform="translate(5172,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJSZ1-2211" x="0" y="0"></use><g transform="translate(1056,521)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-7C" x="1046" y="0"></use></g><g transform="translate(1056,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-3D" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-31" x="1351" y="0"></use></g></g><g transform="translate(7805,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJSZ1-2211" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-4E" x="1494" y="675"></use><g transform="translate(1056,-287)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-6F" x="503" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-73" x="989" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-3D" x="1458" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-31" x="2237" y="0"></use></g></g><g transform="translate(10897,0)"><g transform="translate(286,0)"><rect stroke="none" width="5025" height="60" x="0" y="220"></rect><g transform="translate(1421,614)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-67" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-61" x="480" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-69" x="1010" y="0"></use><g transform="translate(958,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-6E" x="0" y="0"></use><g transform="translate(424,-107)"><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-6F" x="503" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-73" x="989" y="0"></use></g></g></g><g transform="translate(60,-442)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-6D"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-61" x="833" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-78" x="1334" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-28" x="1862" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-31" x="2252" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-2C" x="2752" y="0"></use><g transform="translate(2143,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-6C"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-6F" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-67" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-28" x="4310" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-70" x="4700" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-6F" x="5203" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMATHI-73" x="5689" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-29" x="6158" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhjCZNqAQ1YSRPrLyQEQQVSIUPSIcg#MJMAIN-29" x="6548" y="0"></use></g></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>D</mi><mi>C</mi><mi>G</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></mfrac><munderover><mo>∑</mo><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></munderover><munderover><mo>∑</mo><mrow class="MJX-TeXAtom-ORD"><mi>p</mi><mi>o</mi><mi>s</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>N</mi></mrow></munderover><mfrac><mrow><mi>g</mi><mi>a</mi><mi>i</mi><msub><mi>n</mi><mrow class="MJX-TeXAtom-ORD"><mi>p</mi><mi>o</mi><mi>s</mi></mrow></msub></mrow><mrow><mo movablelimits="true" form="prefix">max</mo><mo stretchy="false">(</mo><mn>1</mn><mo>,</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-2">DCG = \frac{1}{|U|} \sum_{u=1}^{|U|} \sum_{pos=1}^{N} \frac{gain_{pos}}{\max(1, \log(pos))}</script><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jede Aufgabe hat also ihre eigene Metrik. </font><font style="vertical-align: inherit;">Das nächste Problem ist jedoch nicht so offensichtlich.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problem der Wahl</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist schwer genug zu beschreiben, aber ich werde es versuchen. Es stellt sich heraus, dass die Leute den Filmen, die sie </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">normalerweise</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sehen, </font><font style="vertical-align: inherit;">keine guten Noten geben </font><font style="vertical-align: inherit;">. Seltene Filmmeisterwerke, Klassiker, Arthouse erhalten die besten Noten, aber dies hält die Menschen am Abend nach der Arbeit nicht davon ab, eine gute Komödie, einen neuen Actionfilm oder eine spektakuläre Weltraumoper zu sehen. Hinzu kommt, dass die Nutzer von Yandex nicht alle Filme schätzten, die sie einmal und irgendwo gesehen hatten. Wenn wir uns nur auf die höchsten Bewertungen konzentrieren, laufen wir Gefahr, einen empfohlenen Film-Feed zu erhalten, der logisch aussieht. Die Benutzer erkennen möglicherweise sogar die Qualität, sehen aber am Ende nichts.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So könnte beispielsweise mein Film-Feed aussehen, wenn wir ihn nach persönlicher Bewertung sortieren und nichts über meine Ansichten in der Vergangenheit wissen. Tolle Filme. Aber ich möchte sie heute nicht überprüfen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5y/gz/ot/5ygzotyougvrodtwyb_nlbp03va.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellt sich heraus, dass es sich angesichts der verstreuten Bewertungen und des Mangels an Filmen mit hohen Bewertungen lohnt, nicht nur die Bewertung zu betrachten. Nun, dann trainieren wir das Auto, um die Betrachtung des empfohlenen Films und nicht die Bewertung vorherzusagen. Es scheint logisch, weil der Benutzer dies will. Was könnte schiefgehen? Das Problem ist, dass das Band mit Filmen gefüllt wird, von denen jeder für einen einfachen Zeitvertreib am Abend gut geeignet ist, aber ihre persönliche Bewertung ist niedrig. Benutzer werden natürlich darauf achten, dass das Band keine „Meisterwerke“ enthält, was bedeutet, dass die Glaubwürdigkeit der Empfehlungen untergraben wird und sie nicht sehen, was sie sonst sehen würden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Ergebnis kamen wir zu dem Verständnis, dass ein Gleichgewicht zwischen den beiden Extremen erforderlich ist. Es ist notwendig, die Maschine so zu trainieren, dass sowohl das Betrachtungspotential als auch die Wahrnehmung der Empfehlung durch eine Person berücksichtigt werden.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie unsere Empfehlungen funktionieren</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser System ist Teil der Suche, daher müssen wir sehr schnell Empfehlungen erstellen: Die Antwortzeit des Dienstes sollte weniger als 100 Millisekunden betragen. </font><font style="vertical-align: inherit;">Daher versuchen wir, in der Phase der Datenaufbereitung so viele schwere Operationen wie möglich offline durchzuführen. </font><font style="vertical-align: inherit;">Alle Filme und Benutzer im Empfehlungssystem werden durch Profile dargestellt (es ist wichtig, nicht mit dem Konto zu verwechseln), die Objektschlüssel, Zähler und Einbettungen (dh Vektoren in einem bestimmten Raum) enthalten. </font><font style="vertical-align: inherit;">Auf YT werden täglich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filmprofile</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erstellt ( </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">als „Yt“ gelesen</font></a><font style="vertical-align: inherit;"> ) und in den Arbeitsspeicher von Maschinen geladen, die auf Anfragen reagieren. </font><font style="vertical-align: inherit;">Bei den Benutzern ist jedoch alles etwas komplizierter.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jeden Tag erstellen wir auch das Hauptbenutzerprofil auf YT und senden es an den Yandex-Store, von dem Sie das Profil in wenigen zehn Millisekunden abrufen können. Die Daten werden jedoch schnell veraltet, wenn eine Person das Video aktiv ansieht und auswertet. Es ist nicht gut, wenn die Empfehlungen nachlassen. Daher lesen wir den Strom von Benutzerereignissen und bilden den dynamischen Teil des Profils. Wenn eine Person eine Anfrage eingibt, kombinieren wir das Profil aus dem Repository mit einem dynamischen Profil und erhalten ein einzelnes Profil, das nur einige Sekunden hinter der Realität zurückbleiben kann.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies geschieht offline (dh im Voraus), und jetzt gehen wir direkt zur Laufzeit. Hier besteht das Empfehlungssystem aus zwei Schritten. Das Ranking der gesamten Filmdatenbank ist zu lang. Im ersten Schritt wählen wir einfach mehrere hundert Kandidaten aus, dh wir finden Filme, die für den Betrachter von Interesse sein können. Dies schließt sowohl beliebte als auch benutzernahe Gemälde in einigen Einbettungen ein. Es gibt verschiedene Algorithmen, um schnell die nächsten Nachbarn zu finden. Wir verwenden HNSW (Hierarchical Navigable Small World). Damit finden wir in wenigen Millisekunden die Filme, die dem Benutzer am nächsten sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im zweiten Schritt extrahieren wir Features (manchmal werden sie auch als Faktoren bezeichnet) nach Filmen, Benutzern und Benutzer / Film-Paaren und </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">bewerten</font></a><font style="vertical-align: inherit;"> Kandidaten mit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CatBoost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ich möchte Sie daran erinnern: Wir haben bereits erkannt, dass wir uns nicht nur auf Ansichten, sondern auch auf andere Qualitätsmerkmale von Empfehlungen konzentrieren müssen. Für das Ranking kamen wir zu einer Kombination mehrerer CatBoost-Modelle, die für verschiedene Ziele trainiert wurden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um Kandidaten zu finden, verwenden wir Einbettungen aus mehreren Matrixzerlegungen: von der klassischen Version von ALS, die eine Bewertung vorhersagt, bis zu komplexeren Variationen basierend auf SVD ++. </font><font style="vertical-align: inherit;">Als Merkmale für das Ranking werden sowohl einfache Benutzerereigniszähler als auch Filme, Klickraten für verschiedene Ereignisse sowie komplexere vorab trainierte Modelle verwendet. </font><font style="vertical-align: inherit;">Beispielsweise fungiert die ALS-Vorhersage auch als Merkmal. </font><font style="vertical-align: inherit;">Eines der nützlichsten Modelle ist das neuronale Recommender-DSSM-Netzwerk, über das ich wahrscheinlich noch etwas mehr sprechen werde.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Empfehlen Sie DSSM</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DSSM ist ein neuronales Netzwerk mit zwei Türmen. Jeder Turm baut seine eigene Einbettung auf, dann wird der Kosinusabstand zwischen den Einbettungen berücksichtigt, diese Zahl ist die Netzwerkausgabe. Das heißt, das Netzwerk lernt, die Nähe von Objekten in den linken und rechten Türmen zu bewerten. Ähnliche neuronale Netze werden beispielsweise bei einer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Websuche verwendet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um für eine Abfrage relevante Dokumente zu finden. Für die Suchaufgabe wird eine Anfrage an einen der Türme und ein Dokument an den anderen gesendet. Für unser Netzwerk spielt der Benutzer die Rolle der Anfrage, und Filme dienen als Dokumente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Turm des Films bildet eine Einbettung basierend auf den Daten des Films: Dies ist der Titel, die Beschreibung, das Genre, das Land, die Schauspieler usw. Dieser Teil des Netzwerks ist dem Suchteil ziemlich ähnlich. Für den Betrachter möchten wir jedoch seine Geschichte verwenden. Zu diesem Zweck aggregieren wir die Einbettung von Filmen aus der Geschichte mit der Zeit seit dem Moment des Ereignisses. Zusätzlich zur gesamten Einbettung wenden wir mehrere Schichten des Netzwerks an und erhalten als Ergebnis eine Einbettung der Größe 400.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lt/3k/v0/lt3kv0xtsbzqiyxq_333j3sgkua.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie beim Einbetten sofort den gesamten Verlauf des Benutzers berücksichtigen, wird das Training dadurch erheblich verlangsamt. </font><font style="vertical-align: inherit;">Deshalb gehen wir zum Trick und lernen das Netzwerk in zwei Schritten. </font><font style="vertical-align: inherit;">Lernen Sie zunächst das einfachere InnerDSSM. </font><font style="vertical-align: inherit;">Am Eingang erhält er nur die letzten 50 Ereignisse aus der Benutzerhistorie, ohne sich in Ereignistypen (Ansichten, Bewertungen ...) zu unterteilen. </font><font style="vertical-align: inherit;">Anschließend trainieren wir das resultierende InnerDSSM während des gesamten Benutzerverlaufs neu, jedoch mit einer Aufteilung in Ereignistypen. </font><font style="vertical-align: inherit;">Wir erhalten also OuterDSSM, das zur Laufzeit verwendet wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Verwendung eines Laufzeitnetzwerks in der Stirn erfordert eine Menge Rechenressourcen. </font><font style="vertical-align: inherit;">Daher speichern wir Einbettungen aus dem Movie Tower in der Datenbank, und Einbettungen gemäß Benutzerhistorie werden nahezu in Echtzeit aktualisiert. </font><font style="vertical-align: inherit;">Während der Verarbeitung der Anforderung müssen Sie daher nur einen kleinen Teil von OuterDSSM anwenden und die Cosinus berechnen. Dies dauert nicht lange.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere Empfehlungen sind jetzt bereits in unserer Suche (z. B. auf Anfrage </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[was zu sehen]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), im Yandex.Air-Service verfügbar, und eine angepasste Version dieser Technologie wird auch in Yandex.Stations verwendet. </font><font style="vertical-align: inherit;">Das heißt aber nicht, dass wir uns entspannen können. </font><font style="vertical-align: inherit;">Wir trainieren ständig neue Modelle, wenden immer mehr Daten an, probieren neue Trainingsansätze und neue Qualitätsmetriken aus. </font><font style="vertical-align: inherit;">Je älter das Gebiet ist, desto schwieriger ist es meiner Meinung nach, es zu entwickeln. </font><font style="vertical-align: inherit;">Dies ist jedoch das Hauptinteresse für Spezialisten.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de497376/index.html">Was tun mit roten Wangen, damit Ihre Nase nicht wächst?</a></li>
<li><a href="../de497382/index.html">8 Schwierigkeiten agiler Teams während der Pandemie: „Ndagwurugwu nke anya mmiri“, ụjọ, oke iwe, agọnar, COVID-19</a></li>
<li><a href="../de497384/index.html">So stellen Sie im Remote-Modus einen sicheren Zugriff auf Server her</a></li>
<li><a href="../de497386/index.html">VK Fellowship Fellows sprechen über die Zukunft des Fernunterrichts, der Disziplin und der Sozialisation</a></li>
<li><a href="../de497388/index.html">Ein millionster Shooter von Grund auf neu: ein Indie-Entwicklerpfad</a></li>
<li><a href="../de497392/index.html">Wie kann man aus einem Studenten einen Software-Ingenieur machen?</a></li>
<li><a href="../de497394/index.html">Zehn Ressourcen mit Informatikkursen, die im April kostenlos zur Verfügung stehen</a></li>
<li><a href="../de497396/index.html">Kollegen: weder Freund noch Feind, aber wie?</a></li>
<li><a href="../de497398/index.html">AMD EPYC Rome 7x32-Serverprozessoren - Rekord-Single-Core-Leistung</a></li>
<li><a href="../de497402/index.html">Wie erstelle ich eine Python-Programmiersprache?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>