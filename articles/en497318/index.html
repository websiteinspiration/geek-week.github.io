<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🤝‍👨🏾 🤵🏿 🏞️ Network simulator tutorial ns-3. Chapter 3 🏿 🚓 🌽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="chapters 1.2
 

3 Getting Started 
 3.1 Overview 
 3.2 Prerequisites 
 3.2.1 Download the ns-3 release as a source archive 
 3.3 Download ns-3 with Gi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Network simulator tutorial ns-3. Chapter 3</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497318/"><p><img src="https://habrastorage.org/webt/oq/g3/-x/oqg3-xyphklp7lki3udrmwh5xks.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chapters 1.2</font></font></a></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 Getting Started </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.1 Overview </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.2 Prerequisites </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.2.1 Download the ns-3 release as a source archive </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.3 Download ns-3 with Git </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.3.1 Download ns-3 with Bake </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.4 Build ns-3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.4.1 Build with build.py </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.4.2 Build with Bake </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.4.3 Build with Waf </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.5 Testing ns-3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.6 Running the script </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.6.1 Command line arguments </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.6.2 Debugging </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.6.3 Working directory</font></font></p><br>
<h2 id="glava-3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chapter 3</font></font></h2><br>
<h3 id="pristupaya-k-rabote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Getting started</font></font></h3><br>
<p>    ,     ,   ,  , ,    ns‑3.    ,  ,   ns‑3,   ns‑3         .</p><a name="habracut"></a><br>
<h3 id="31-obzor">3.1 </h3><br>
<p> ns‑3       .  ,       .        C++  Python.</p><br>
<p>Ns‑3     ,  ,           ,    ,     .  , ns‑3        ,         .              ns‑3,        .  -               , ,     <em>ns-developers</em>.</p><br>
<p>        ns‑3.    ,         .  —          ns‑3.  —           ns‑3.    ,     .</p><br>
<p>  Linux   ,  ns‑3     ,    ,   ?   ,        Linux (, Debian),            ns‑3,     .          .</p><br>
<p>   ns‑3  <em>root</em>  ,      .</p><br>
<h3 id="32-predvaritelnye-usloviya">3.2  </h3><br>
<p>    ns‑3      ,     ns‑3          (   ) :  C++, Python,    (, <em>vim</em>, <em>emacs</em>  <em>Eclipse</em>) ,    ,    Git.      ,          ns‑3,   ,    ,   ,           .       «»       ,   : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">https://www.nsnam.org/wiki/Installation</a>.</p><br>
<p> « »  - ,        ns‑3,    ,        Linux  macOS.</p><br>
<p>    ,   - ns‑3   -: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">https://www.nsnam.org</a>,     .     ns‑3 (ns‑3.29),   ns‑3   :</p><br>
<p> /</p><br>
<ul>
<li> C++<br>
clang++  g++ (g++  4.9  )</li>
<li>Python<br>
python2  &gt;= 2.7.10,  python3  &gt;=3.4</li>
<li>Git<br>
   (   ns‑3  GitLab.com)</li>
<li>tar<br>
   (   ns‑3)</li>
<li>bunzip2<br>
   (   ns‑3)</li>
</ul><br>
<p>   Python   ,  <code>python -V</code>.    g++,  <code>g++ -v</code>.  -     ,       - ns‑3.</p><br>
<p>  ,  ,     Linux, MacOS    Linux,       .</p><br>
<h4 id="321-zagruzka-reliza-ns-3-v-vide-arhiva-ishodnikov">3.2.1   ns-3    </h4><br>
<p>    ,            ns‑3.  ns‑3      ,   <em>tarball</em>. <em>tarball</em> —     ,      .   .   ns‑3  <em>tarball</em> ,     ,    .</p><br>
<p>,  ,  ,   ns‑3      <em>workspace</em>.      ,    Linux  (,    )</p><br>
<pre><code class="plaintext hljs">$ cd <font></font>
$ mkdir workspace <font></font>
$ cd workspace <font></font>
$ wget https://www.nsnam.org/release/ns-allinone-3.29.tar.bz2 <font></font>
$ tar xjf ns-allinone-3.29.tar.bz2 </code></pre><br>
<p>      <em>wget</em>,          .     ,      .</p><br>
<p>  ,     ns-allinone-3.29,        </p><br>
<pre><code class="plaintext hljs">$ cd ns-allinone-3.29<font></font>
$ ls<font></font>
bake constants.py ns-3.29 README<font></font>
build.py netanim-3.108 pybindgen-0.17.0.post58+ngcf00cc0 util.py</code></pre><br>
<p>      ns‑3     ,   ns‑3.</p><br>
<h3 id="33-skachivanie-ns-3-s-pomoschyu-git">3.3  ns-3   Git</h3><br>
<p> ns‑3    Git   GitLab.com   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">https://gitlab.com/nsnam/</a>.  <em>nsnam</em>   ,      .</p><br>
<p>      Git —       <em>ns‑3-allinone</em>.   ,          ns‑3.     Git,  ""  ""    ;   ,      (   ) ,   GitLab.com,  :</p><br>
<pre><code class="plaintext hljs">$ cd <font></font>
$ mkdir workspace <font></font>
$ cd workspace <font></font>
$ git clone https://gitlab.com/nsnam/ns-3-allinone.git <font></font>
$ cd ns-3-allinone </code></pre><br>
<p>      <em>ns‑3-allinone</em>         .     :</p><br>
<pre><code class="plaintext hljs">$ ls<font></font>
build.py constants.py download.py README util.py</code></pre><br>
<p>     <em>download.py</em>,    ns‑3    .     :       ns‑3:</p><br>
<pre><code class="plaintext hljs">$ python download.py</code></pre><br>
<p>   ns‑3,   <code>-n</code>    :</p><br>
<pre><code class="plaintext hljs">$ python download.py -n ns-3.29</code></pre><br>
<p>     <em>ns‑3-allinone</em>     <em>ns‑3</em>, <em>bake</em>, <em>pybindgen</em>  <em>netanim</em>.</p><br>
<p><strong></strong><br>
    Ubuntu16.04       : <code>$ sudo python3 download.py -n ns-3.29</code> (    ).</p><br>
<h4 id="331-zagruzka-ns-3-s-pomoschyu-bake">3.3.1  ns-3   Bake</h4><br>
<p>   (    <em>ns‑3-allinone</em>  Git)       ns‑3   (<em>pybindgen</em>    Python  <em>netanim</em>   ).  ,     ns‑3-allinone,  <em>bake</em>.</p><br>
<p><em>Bake</em> —          ,    ns‑3. <em>Bake</em>       ns‑3,           ns‑3,    <em>Direct Code Execution</em>, <em>CradleNetwork Simulation Cradle</em>,     Python   «» ns‑3. </p><br>
<p><strong></strong><br>
CradleNetwork Simulation Cradle — ,          TCP / IP.</p><br>
<p>  ,    ns‑3      ,      .</p><br>
<p>   ns‑3 <em>Bake</em>    tar-.     ,          .  , ,  <em>Bake</em>,     ns‑3.29,         ns‑3  ,            (    <em>bakeconf.xml</em>  ).</p><br>
<p>       <em>bake</em>,       Linux ( ,     Git):</p><br>
<pre><code class="plaintext hljs">$ cd <font></font>
$ mkdir workspace <font></font>
$ cd workspace <font></font>
$ git clone https://gitlab.com/nsnam/bake.git</code></pre><br>
<p>    git,    -  :</p><br>
<pre><code class="plaintext hljs">Cloning into 'bake'...<font></font>
remote: Enumerating objects: 2086, done. <font></font>
remote: Counting objects: 100% (2086/2086), done. <font></font>
remote: Compressing objects: 100% (649/649), done. <font></font>
remote: Total 2086 (delta 1404), reused 2078 (delta 1399) <font></font>
Receiving objects: 100% (2086/2086), 2.68 MiB | 3.82 MiB/s, done. <font></font>
Resolving deltas: 100% (1404/1404), done.</code></pre><br>
<p>   <em>clone</em>        <em>bake</em>,      :</p><br>
<pre><code class="plaintext hljs">$ cd bake<font></font>
$ ls<font></font>
bake bakeconf.xml bake.py doc examples generate-binary.py test TODO</code></pre><br>
<p> ,      Python,  Python   <em>bake</em>    XML.            ns‑3   .    :</p><br>
<ol>
<li><p><strong>ns‑3.29</strong>: ,  ;    ,    tarball;</p><br>
</li>
<li><p><strong>ns‑3-dev</strong>:  ,       ;</p><br>
</li>
<li><p><strong>ns-allinone-3.29</strong>: ,       ,   Click   Network Simulation Cradle, Openflow  ns-3.</p><br>
</li>
<li><p><strong>ns‑3-allinone</strong>:     <em>allinone</em>,    .</p><br>
</li>
</ol><br>
<p><strong></strong><br>
<em>Click</em> —      .</p><br>
<p>Openflow —     ,        ,   - .</p><br>
<p>   () ns‑3    :<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">https://gitlab.com/nsnam/ns-3-dev.git</a>. </p><br>
<p>        ,            ,            .</p><br>
<p>     ,   ,    - «ns‑3 Releases»:<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">https://www.nsnam.org/releases/</a>      .       ns‑3.29.</p><br>
<p>,       ns‑3,   <em>Bake</em>.       <em>Bake</em>.</p><br>
<p>Bake ,      <em>source</em>      . <em>Bake</em>  ,    ,      <em>Bake</em>   ,     ,     <em>bake</em>    (  PATH), ,   (   Linux bash).    «bake»,      :</p><br>
<pre><code class="plaintext hljs">$ export BAKE_HOME=`pwd` <font></font>
$ export PATH=$PATH:$BAKE_HOME:$BAKE_HOME/build/bin <font></font>
$ export PYTHONPATH=$PYTHONPATH:$BAKE_HOME:$BAKE_HOME/build/lib</code></pre><br>
<p>   <em>bake.py</em>            ,   <em>bake</em>.     <em>bake</em>,    PATH  PYTHONPATH  ,     ns‑3-allinone (  )   .</p><br>
<p>        :</p><br>
<pre><code class="plaintext hljs">$ ./bake.py configure -e ns-3.29</code></pre><br>
<p>   <em>Bake</em> ,         . :</p><br>
<pre><code class="plaintext hljs">$ ./bake.py check</code></pre><br>
<p>   -  :</p><br>
<pre><code class="plaintext hljs">&gt; Python - OK <font></font>
&gt; GNU C++ compiler - OK <font></font>
&gt; Mercurial - OK <font></font>
&gt; Git - OK <font></font>
&gt; Tar tool - OK <font></font>
&gt; Unzip tool - OK <font></font>
&gt; Make - OK <font></font>
&gt; cMake - OK <font></font>
&gt; patch tool - OK <font></font>
&gt; Path searched for tools: /usr/local/sbin /usr/local/bin /usr/sbin /usr/bin /sbin /bin ...</code></pre><br>
<p> ,  ,   Mercurial, CVS, Git  Bazaar,     ,       .            ( )        .</p><br>
<p>    :</p><br>
<pre><code class="plaintext hljs">$ ./bake.py download</code></pre><br>
<p>   - :</p><br>
<pre><code class="plaintext hljs">&gt;&gt; Searching for system dependency setuptools - OK <font></font>
&gt;&gt; Searching for system dependency libgoocanvas2 - OK <font></font>
&gt;&gt; Searching for system dependency gi-cairo - OK <font></font>
&gt;&gt; Searching for system dependency pygobject - OK <font></font>
&gt;&gt; Searching for system dependency pygraphviz - OK <font></font>
&gt;&gt; Searching for system dependency python-dev - OK <font></font>
&gt;&gt; Searching for system dependency qt - OK <font></font>
&gt;&gt; Searching for system dependency g++ - OK <font></font>
&gt;&gt; Downloading pybindgen-0.19.0.post4+ng823d8b2 (target directory:pybindgen) - OK <font></font>
&gt;&gt; Downloading netanim-3.108 - OK <font></font>
&gt;&gt; Downloading ns-3.29 - OK</code></pre><br>
<p>  ,     .     source   ls;   :</p><br>
<pre><code class="plaintext hljs">$ cd source <font></font>
$ ls<font></font>
netanim-3.108 ns-3.29 pybindgen</code></pre><br>
<p>     ns‑3.</p><br>
<h3 id="34-sborka-ns-3">3.4  ns-3</h3><br>
<p>    ns‑3,     ns‑3. ,   ,  ns‑3        <em>Waf</em>,  .      <em>Waf</em>,     ,         . , ,     <em>Waf</em>,   <em>build.py</em>    <em>bake</em>.</p><br>
<h4 id="341-sborka-s-pomoschyu-buildpy">3.4.1    build.py</h4><br>
<p>! <em>         ,    ;     git  bake.</em></p><br>
<p>     <em>tarball</em>,  <em>ns‑3‑allinone</em>   ,     .   build.py.         .   ,  ,        ns‑3       ns‑3, Waf,       .</p><br>
<p>     <em> tarball</em>,     <em>~/workspace</em>      -  <em>ns-allinone-3.29</em>.  :</p><br>
<pre><code class="plaintext hljs">$ ./build.py --enable-examples --enable-tests
</code></pre><br>
<p>  <em>build.py</em>       ,         ,   ns‑3    .  ,      . ,  ,    ns‑3       ,      .</p><br>
<p>     ,        .      <em>netanim</em>,    <em>pybindgen</em> , , ns‑3.   ,    :</p><br>
<pre><code class="plaintext hljs">Waf: Leaving directory '/path/to/workspace/ns-allinone-3.29/ns-3.29/build'<font></font>
'build' finished successfully (6m25.032s) <font></font>
<font></font>
Modules built:<font></font>
antenna                aodv                     applications<font></font>
bridge                 buildings                config-store<font></font>
core                   csma                     csma-layout<font></font>
dsdv                   dsr                      energy <font></font>
fd-net-device          flow-monitor             internet<font></font>
internet-apps          lr-wpan                  lte<font></font>
mesh                   mobility                 mpi<font></font>
netanim (no Python)    network                  nix-vector-routing <font></font>
olsr                   point-to-point           point-to-point-layout <font></font>
propagation            sixlowpan                spectrum <font></font>
stats                  tap-bridge               test (no Python) <font></font>
topology-read          traffic-control          uan <font></font>
virtual-net-device     visualizer               wave <font></font>
wifi                   wimax <font></font>
<font></font>
Modules not built (see ns-3 tutorial for explanation):<font></font>
brite                  click                    openflow <font></font>
Leaving directory ./ns-3.29</code></pre><br>
<p>         ,    :</p><br>
<pre><code class="plaintext hljs">Modules not built (see ns-3 tutorial for explanation):<font></font>
brite                     click</code></pre><br>
<p>  ,    ns‑3,     , ,   ,         .   ,          .</p><br>
<h4 id="342-sborka-s-bake">3.4.2   Bake</h4><br>
<p>           bake,         ns‑3. :</p><br>
<pre><code class="plaintext hljs">$ ./bake.py build</code></pre><br>
<p>    - :</p><br>
<pre><code class="plaintext hljs">&gt;&gt; Building pybindgen-0.19.0.post4+ng823d8b2 - OK <font></font>
&gt;&gt; Building netanim-3.108 - OK <font></font>
&gt;&gt; Building ns-3.29 - OK</code></pre><br>
<p><strong></strong>:       ,   ,  «bake.py deploy».</p><br>
<p>     ,         . ,       ,  <em>castxml</em>     <em>bake</em>    .      :</p><br>
<pre><code class="plaintext hljs">&gt;&gt; Building castxml - Problem <font></font>
&gt; Problem: Optional dependency, module "castxml" failed<font></font>
This may reduce the functionality of the final build.<font></font>
However, bake will continue since "castxml" is not an essential dependency.<font></font>
For more information call bake with -v or -vvv, for full verbose mode.</code></pre><br>
<p> <em>castxml</em>     ,       Python.        (     ,      ns‑3),       .</p><br>
<p>  ,         :</p><br>
<pre><code class="plaintext hljs">$ ./bake.py show</code></pre><br>
<p>    ,    .</p><br>
<h4 id="343-sborka-s-waf">3.4.3   Waf</h4><br>
<p>  ,    ns‑3,     <em>build.py</em>,   <em>bake</em>.      ns‑3   . ,       <em>Waf</em>   ns‑3. <em>Waf</em>      ns‑3.       ns‑3      <em>Waf</em>. ,  , ,    ns‑3,    .</p><br>
<p>      ,        ,      . ,    ,    ,     .  ,        .       .   Waf,      ,    ,      :</p><br>
<pre><code class="plaintext hljs">$ ./waf clean <font></font>
$ ./waf configure --build-profile=optimized --enable-examples --enable-tests</code></pre><br>
<p>  <em>Waf</em>    (  ).       ,      ,     ( .   );            <em>build/</em>.          ,    ,   :</p><br>
<pre><code class="plaintext hljs">Setting top to      : /home/ns3user/workspace/bake/source/ns-3-dev<font></font>
Setting out to      : /home/ns3user/workspace/bake/source/ns-3-dev/build<font></font>
Checking for 'gcc' (C compiler)        : /usr/bin/gcc <font></font>
Checking for cc version                : 7.3.0 <font></font>
Checking for 'g++' (C++ compiler)      : /usr/bin/g++ <font></font>
Checking for compilation flag -march=native support : ok <font></font>
Checking for compilation flag -Wl,--soname=foo support : ok <font></font>
Checking for compilation flag -std=c++11 support       : ok <font></font>
Checking boost includes   : headers not found, please ,!provide a --boost-includes argument (see help) <font></font>
Checking boost includes   : headers not found, please ,!provide a --boost-includes argument (see help) <font></font>
Checking for program 'python'            : /usr/bin/python <font></font>
Checking for python version &gt;= 2.3       : 2.7.15 python-config                                                                     : /usr/bin/python-config<font></font>
Asking python-config for pyembed '--cflags --libs --ldflags' flags : yes<font></font>
Testing pyembed configuration                                      : yes<font></font>
Asking python-config for pyext '--cflags --libs --ldflags' flags   : yes<font></font>
Testing pyext configuration                                        : yes<font></font>
<font></font>
Checking for compilation flag -fvisibility=hidden support          : ok <font></font>
Checking for compilation flag -Wno-array-bounds support            : ok <font></font>
Checking for pybindgen location          : ../pybindgen ,!(guessed) <font></font>
Checking for python module 'pybindgen'   : 0.19.0. ,!post4+g823d8b2 <font></font>
Checking for pybindgen version           : 0.19.0. ,!post4+g823d8b2 <font></font>
Checking for code snippet                : yes <font></font>
Checking for types uint64_t and unsigned long equivalence : no <font></font>
Checking for code snippet                                 : no <font></font>
Checking for types uint64_t and unsigned long long equivalence     : yes <font></font>
Checking for the apidefs that can be used for Python bindings                       : gcc-LP64 <font></font>
Checking for internal GCC cxxabi         : complete <font></font>
Checking for python module 'pygccxml'    : not found <font></font>
Checking for click location              : not found <font></font>
Checking for program 'pkg-config'        : /usr/bin/pkg- ,!config <font></font>
Checking for 'gtk+-3.0'                  : not found <font></font>
Checking for 'libxml-2.0'                : yes <font></font>
checking for uint128_t                   : not found <font></font>
checking for __uint128_t                 : yes <font></font>
Checking high precision implementation   : 128-bit integer ,!(default) <font></font>
Checking for header stdint.h             : yes <font></font>
Checking for header inttypes.h           : yes <font></font>
Checking for header sys/inttypes.h       : not found <font></font>
Checking for header sys/types.h          : yes <font></font>
Checking for header sys/stat.h           : yes <font></font>
Checking for header dirent.h             : yes <font></font>
Checking for header stdlib.h             : yes <font></font>
Checking for header signal.h             : yes <font></font>
Checking for header pthread.h            : yes <font></font>
Checking for header stdint.h             : yes <font></font>
Checking for header inttypes.h           : yes <font></font>
Checking for header sys/inttypes.h       : not found<font></font>
Checking for library rt                  : yes <font></font>
Checking for header sys/ioctl.h          : yes <font></font>
Checking for header net/if.h             : yes <font></font>
Checking for header net/ethernet.h       : yes <font></font>
Checking for header linux/if_tun.h       : yes <font></font>
Checking for header netpacket/packet.h   : yes <font></font>
Checking for NSC location                : not found <font></font>
Checking for 'sqlite3'                   : not found <font></font>
Checking for header linux/if_tun.h       : yes <font></font>
Checking for python module 'gi'          : 3.26.1 <font></font>
Checking for python module 'gi.repository.GObject'      : ok <font></font>
Checking for python module 'cairo'                      : ok <font></font>
Checking for python module 'pygraphviz'                 : 1.4rc1 <font></font>
Checking for python module 'gi.repository.Gtk'          : ok <font></font>
Checking for python module 'gi.repository.Gdk'          : ok <font></font>
Checking for python module 'gi.repository.Pango'        : ok <font></font>
Checking for python module 'gi.repository.GooCanvas'    : ok <font></font>
Checking for program 'sudo'                             : /usr/bin/sudo <font></font>
Checking for program 'valgrind'                         : not found <font></font>
Checking for 'gsl' : not found python-config            : not found <font></font>
Checking for compilation flag -fstrict-aliasing support : ok <font></font>
Checking for compilation flag -fstrict-aliasing support : ok <font></font>
Checking for compilation flag -Wstrict-aliasing support : ok <font></font>
Checking for compilation flag -Wstrict-aliasing support : ok <font></font>
Checking for program 'doxygen'                          : /usr/bin/doxygen<font></font>
---- Summary of optional ns-3 features:<font></font>
Build profile : optimized<font></font>
Build directory : <font></font>
BRITE Integration : not enabled (BRITE not enabled (see option --with- ,!brite)) <font></font>
DES Metrics event collection : not enabled (defaults to disabled) <font></font>
Emulation FdNetDevice        : enabled <font></font>
Examples                     : enabled <font></font>
File descriptor NetDevice    : enabled <font></font>
GNU Scientific Library (GSL) : not enabled (GSL not found) <font></font>
Gcrypt library               : not enabled<font></font>
(libgcrypt not found: you can use ,!libgcrypt-config to find its location.) GtkConfigStore               : not enabled (library 'gtk+-3.0 &gt;= 3.0' not fou   nd)<font></font>
MPI Support                  : not enabled (option --enable-mpi not selected)<font></font>
ns-3 Click Integration       : not enabled (nsclick not enabled (see option --with- ,!nsclick))<font></font>
ns-3 OpenFlow Integration   : not enabled (Required boost libraries not found) <font></font>
Network Simulation Cradle    : not enabled (NSC not found (see option --with-nsc))<font></font>
PlanetLab FdNetDevice         : not enabled (PlanetLab operating system not detected ,!(see option --force-planetlab)) PyViz visualizer : enabled <font></font>
Python API Scanning Support   : not enabled (Missing 'pygccxml' Python module)<font></font>
Python Bindings : enabled <font></font>
Real Time Simulator           : enabled <font></font>
SQlite stats data output      : not enabled (library 'sqlite3' not found)<font></font>
Tap Bridge                    : enabled <font></font>
Tap FdNetDevice               : enabled<font></font>
Tests                         : enabled <font></font>
Threading Primitives          : enabled <font></font>
Use sudo to set suid bit   : not enabled (option --enable-sudo not selected)<font></font>
XmlIo                         : enabled<font></font>
'configure' finished successfully (6.387s)</code></pre><br>
<p>       .   ns‑3             . ,   XmlTo,      <em>libxml-2.0</em>.          ns‑3    ,    .   ,      <em>sudo</em>    suid« ID    »   .     ,       « » («not enabled»). ,     ,  <em>Waf</em>   <code>--check-config</code>.</p><br>
<p>       ,    .</p><br>
<pre><code class="plaintext hljs">$ ./waf clean <font></font>
$ ./waf configure --build-profile=debug --enable-examples --enable-tests</code></pre><br>
<p>   ,        ns‑3,  :</p><br>
<pre><code class="plaintext hljs">$ ./waf</code></pre><br>
<p>         ns‑3 ,     ,       .</p><br>
<p>  ,         :</p><br>
<pre><code class="plaintext hljs">$ ./waf --check-profile <font></font>
Waf: Entering directory \`/path/to/ns-3-allinone/ns-3.29/build\' <font></font>
Build profile: debug</code></pre><br>
<p>   <em>build.py</em>    <code>--enable-examples</code>  <code>--enable-tests</code>,    <em>Waf</em>    . ,    :</p><br>
<pre><code class="plaintext hljs">$ ./build.py --disable-python</code></pre><br>
<p>  :</p><br>
<pre><code class="plaintext hljs">build.py: error: no such option: --disable-python</code></pre><br>
<p>  ,   - -        <em>waf</em>,       :</p><br>
<pre><code class="plaintext hljs">$ ./build.py -- --disable-python</code></pre><br>
<p>     <em>./waf configure --disable-python</em>.       <em>Waf</em>.</p><br>
<h4 id="obrabotka-oshibok-sborki">  </h4><br>
<p> ns‑3      C++,        Linux  MacOS. ,  ,      ,     ,  ,     . ns‑3         ,  ,          ,     .</p><br>
<p>,    ns‑3.28  Fedora 28,      <em>gcc</em> (<em>gcc-8</em>).   ns‑3.28      Fedora 28,   Gtk2+,   :</p><br>
<pre><code class="plaintext hljs">/usr/include/gtk-2.0/gtk/gtkfilechooserbutton.h:59:8: error: unnecessary parentheses ,!in declaration of ‘__gtk_reserved1’ [-Werror=parentheses] void (*__gtk_reserved1);</code></pre><br>
<p> ,   ns‑3.28.1,  <em>Waf</em>      .     «-Werror»  g++  clang ++.   «--disable-werror»,      :</p><br>
<pre><code class="plaintext hljs">$ ./waf configure --disable-werror --enable-examples --enable-tests</code></pre><br>
<h4 id="konfigurirovat-ili-sobirat">  </h4><br>
<p>  <em>Waf</em>      ,       . ,       ns‑3,      <em>suid</em>  <em>sudo</em>,   .     ,          ,        .</p><br>
<pre><code class="plaintext hljs">$ ./waf configure --enable-sudo --enable-examples --enable-tests</code></pre><br>
<p>   , <em>Waf</em>  <em>sudo</em>,            <em>root</em>.  <em>Waf</em>         .   , :</p><br>
<pre><code class="plaintext hljs">$ ./waf --help</code></pre><br>
<p>       ,   .</p><br>
<h4 id="profili-sborki"> </h4><br>
<p>  ,    <em>Waf</em>   <em>debug</em>  <em>optimized</em>:</p><br>
<pre><code class="plaintext hljs">$ ./waf --build-profile=debug</code></pre><br>
<p>    , <em>release</em>.  <code>-d</code>   <code>--build-profile</code>.     ,  (assertions)    :</p><br>
<p><img src="https://habrastorage.org/webt/yd/rc/eu/ydrceu9rp8iaxa6y0wlslafcs8k.png"></p><br>
<p>  ,        .          ,     (    )    .</p><br>
<p>    ,        ,   Code Wrapper Macro:</p><br>
<pre><code class="plaintext hljs">NS_BUILD_DEBUG (std::cout &lt;&lt; "Part of an output line..." &lt;&lt; std::flush; timer.Start ,!()); DoLongInvolvedComputation ();<font></font>
NS_BUILD_DEBUG (timer.Stop (); std::cout &lt;&lt; "Done: " &lt;&lt; timer &lt;&lt; std::endl;)</code></pre><br>
<p> , <em>Waf</em>      .          <code>- -out</code>, :</p><br>
<pre><code class="plaintext hljs">$ ./waf configure --out=my-build-dir</code></pre><br>
<p>    ,        :</p><br>
<pre><code class="plaintext hljs">$ ./waf configure --build-profile=debug --out=build/debug<font></font>
$ ./waf build<font></font>
... <font></font>
$ ./waf configure --build-profile=optimized --out=build/optimized <font></font>
$ ./waf build<font></font>
...</code></pre><br>
<p>      ,      .      , <em>Waf</em>    ,    .</p><br>
<p>      ,    ,       .        :</p><br>
<pre><code class="plaintext hljs">$ export NS3CONFIG="--enable-examples --enable-tests" <font></font>
$ export NS3DEBUG="--build-profile=debug --out=build/debug"<font></font>
$ export NS3OPT=="--build-profile=optimized --out=build/optimized" <font></font>
<font></font>
$ ./waf configure $NS3CONFIG $NS3DEBUG<font></font>
$ ./waf build <font></font>
... <font></font>
$ ./waf configure $NS3CONFIG $NS3OPT<font></font>
$ ./waf build</code></pre><br>
<h4 id="kompilyatory-i-flagi">  </h4><br>
<p>    <em>Waf</em>   ns‑3  C++   GCC ( <em>g++</em>).   ,    <em>Waf</em> C++ ,     CXX. ,   ++  Clang, clang++,</p><br>
<pre><code class="plaintext hljs">$ CXX="clang++" ./waf configure <font></font>
$ ./waf build </code></pre><br>
<p>    <em>Waf </em>       <em>distcc</em>:</p><br>
<pre><code class="plaintext hljs">$ CXX="distcc g++" ./waf configure <font></font>
$ ./waf build</code></pre><br>
<p>    distcc           «».    ns‑3   ,    CXXFLAGS_EXTRA .</p><br>
<h4 id="ustanovka"></h4><br>
<p><em>Waf</em>         .  ,         <em>build</em>,   Waf       ,       .</p><br>
<p>      ,     <em>./waf install</em>.      — <em>/usr/local</em>,  <em>./waf install</em>     <em>/usr/local/bin</em>,   <em>/usr/local/lib</em>     <em>/usr/local/include</em>.         ,     <em>sudo ./waf install</em>.  , Waf        ,        ,    .          -,    .       ,      <code>--prefix</code>, :</p><br>
<pre><code class="plaintext hljs">./waf configure --prefix=/opt/local</code></pre><br>
<p> ,  ,     <code>./waf</code>,    <em>/opt/local</em>.</p><br>
<p> <code>./waf clean</code>     ,      <em>Waf</em>   .</p><br>
<p> ,   ns‑3    <code>./waf install</code>.      ,  <em>Waf </em>      ,       ,            ns‑3.</p><br>
<h4 id="waf-edinyy">Waf </h4><br>
<p>      ns‑3    Waf-.  ,        <code>scratch/</code>  , <code>src/...</code>       <em>Waf</em>.    ,  ,   <em>Waf</em>  :</p><br>
<pre><code class="plaintext hljs">$ ../../../waf ...</code></pre><br>
<p>      ,    .        ,   <em>emacs</em>  <em>vim</em>,      ,     ns‑3,      .      <em>tarball</em>,     :</p><br>
<pre><code class="plaintext hljs">$ export NS3DIR="$PWD" <font></font>
$ function waff { cd $NS3DIR &amp;&amp; ./waf $* ; } <font></font>
<font></font>
$ cd scratch <font></font>
$ waff build</code></pre><br>
<p>         waf   <code>exec ../../waf</code>. ,   .     ,         .     ,   .</p><br>
<h3 id="35-testirovanie-ns-3">3.5  ns-3</h3><br>
<p>      ns‑3,   <em>./test.py</em>:</p><br>
<pre><code class="plaintext hljs">$ ./test.py</code></pre><br>
<p>     <em>Waf</em>.         , </p><br>
<pre><code class="plaintext hljs">92 of 92 tests passed (92 passed, 0 failed, 0 crashed, 0 valgrind errors)</code></pre><br>
<p>     ,    valgrind,           .</p><br>
<p>      <em>Waf</em>  ,   ,     :</p><br>
<pre><code class="plaintext hljs">Waf: Entering directory `/path/to/workspace/ns-3-allinone/ns-3-dev/build' <font></font>
Waf: Leaving directory `/path/to/workspace/ns-3-allinone/ns-3-dev/build' <font></font>
'build' finished successfully (1.799s) <font></font>
<font></font>
Modules built:<font></font>
aodv           applications          bridge<font></font>
click          config-store          core<font></font>
csma           csma-layout           dsdv<font></font>
emu            energy                flow-monitor<font></font>
internet       lte                   mesh<font></font>
mobility       mpi                   netanim<font></font>
network        nix-vector-routing    ns3tcp<font></font>
ns3wifi        olsr                  openflow<font></font>
point-to-point point-to-point-layout propagation<font></font>
spectrum       stats                 tap-bridge<font></font>
template       test                  tools<font></font>
topology-read  uan                   virtual-net-device<font></font>
visualizer     wifi                  wimax<font></font>
<font></font>
PASS: TestSuite ns3-wifi-interference<font></font>
PASS: TestSuite histogram <font></font>
<font></font>
...<font></font>
<font></font>
PASS: TestSuite object<font></font>
PASS: TestSuite random-number-generators<font></font>
92 of 92 tests passed (92 passed, 0 failed, 0 crashed, 0 valgrind errors)<font></font>
</code></pre><br>
<p>           ns‑3. ( ,    «PASS: …»  ,  .  ,          ;         .)  <em>Waf</em>,  <em>test.py</em>        .</p><br>
<h3 id="36-zapusk-skripta">3.6  </h3><br>
<p>      <em>Waf</em>.     ,              .   ,   <em>Waf</em>   <code>- -run</code>.   ns‑3    <em>hello world</em>,  :</p><br>
<pre><code class="plaintext hljs">$ ./waf --run hello-simulator</code></pre><br>
<p>Waf  ,    ,     .  <em>Waf</em>  ,    .</p><br>
<pre><code class="plaintext hljs">Hello Simulator</code></pre><br>
<p>!    ns‑3!</p><br>
<h4 id="chto-mne-delat-esli-ya-ne-vizhu-rezultat">  ,     ?</h4><br>
<p>    <em>Waf</em>, ,     ,     <em>«Hello Simulator»</em>,   ,     [--Waf]      <em>optimized</em>,       <em>debug</em>.   ,    ,    ns‑3,    ,        .           —  «».      «Hello Simulator»,  :</p><br>
<pre><code class="plaintext hljs">$ ./waf configure --build-profile=debug --enable-examples --enable-tests</code></pre><br>
<p>  <em>Waf</em>      ns‑3,     .        , </p><br>
<pre><code class="plaintext hljs">$ ./waf</code></pre><br>
<p>,     <em>hello-simulator</em>,     .</p><br>
<h4 id="361-argumenty-komandnoy-stroki">3.6.1   </h4><br>
<p>       ns‑3,   :</p><br>
<pre><code class="plaintext hljs">$ ./waf --run &lt;ns3-program&gt; --command-template="%s &lt;args&gt;"</code></pre><br>
<p> &lt;ns3-program&gt;        .  <code>- -command-template</code>  <em>Waf</em> — ,  ,       <em>Waf</em>    . Waf ,   ,     ,             %s,   .      ,    ,      ns‑3       :<br>
</p><pre><code class="plaintext hljs">$ ./waf --run '&lt;ns3-program&gt; --arg1=value1 --arg2=value2 ...'</code></pre><br>
<p>,  ,      .  ,     (suite) mytest (    ).     ./test.py      ,      <em>test-runner</em>.  <em>test-runner</em>     :</p><br>
<pre><code class="plaintext hljs">$ ./waf --run test-runner --command-template="%s --suite=mytest --verbose"</code></pre><br>
<p>    <em>test-runner</em>.  mytest  ,     .     test-runner :</p><br>
<pre><code class="plaintext hljs">$ ./waf --run test-runner --command-template="%s --help"</code></pre><br>
<h4 id="362-otladka">3.6.2 </h4><br>
<p>   ns‑3    ,    (, <em>gdb</em>)     (, <em>valgrind</em>),    <code>- -command-template = "…"</code>. ,     <em>gdb</em>   hello-simulator ns‑3    :<br>
</p><pre><code class="plaintext hljs">$ ./waf --run=hello-simulator --command-template="gdb %s --args &lt;args&gt;"</code></pre><br>
<p> ,    ns‑3    <code>- -run</code>,    ( <em>gdb</em>)      <code>- -command-template</code>.  <code>- -args</code>  <em>gdb</em>,       «» . (  <em>gdb</em>    <code>- -args</code>.        <code>- -command-template</code>     <em>gdb</em> <em>args</em>.)            :</p><br>
<pre><code class="plaintext hljs">$ ./waf --run test-runner --command-template="gdb %s --args --suite=mytest --verbose"</code></pre><br>
<h4 id="363-rabochaya-direktoriya">3.6.3  </h4><br>
<p>Waf          ns‑3.     ,     .   ,           ns‑3?   <code>- -cwd</code>:</p><br>
<pre><code class="plaintext hljs">$ ./waf --cwd=...</code></pre><br>
<p>           .        :</p><br>
<pre><code class="plaintext hljs">$ function waff {<font></font>
CWD="$PWD" <font></font>
cd $NS3DIR &gt;/dev/null <font></font>
./waf --cwd="$CWD" $*<font></font>
cd - &gt;/dev/null <font></font>
}</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This decoration of the previous version of the command saves the current working directory, goes to the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Waf</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> directory </font><font style="vertical-align: inherit;">, and then instructs </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Waf</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to change the working directory back to the current working directory that was saved before the program started. </font><font style="vertical-align: inherit;">We mention the command </font></font><code>- -cwd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for completeness, most users simply launch Waf from the top-level directory and generate output files there.</font></font></p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Continued: Chapter 4</font></font></a></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en497308/index.html">Can artificial intelligence do art?</a></li>
<li><a href="../en497310/index.html">Bipolar morphological networks: a neuron without multiplication</a></li>
<li><a href="../en497312/index.html">Question about CAN FD</a></li>
<li><a href="../en497314/index.html">How deep the Challenger Abyss is: measuring depth</a></li>
<li><a href="../en497316/index.html">Own server or public cloud?</a></li>
<li><a href="../en497320/index.html">Key Trends in Software Testing from SmartBear: Test Types and Trends</a></li>
<li><a href="../en497322/index.html">Objective Quality Score Testing with Customer Journey Map</a></li>
<li><a href="../en497324/index.html">"Like the apple of an eye ..." or make a simple security system based on a microcontroller (Canny or Arduino) and Raspberry PI</a></li>
<li><a href="../en497326/index.html">More secure SSH connectivity with DNSSEC</a></li>
<li><a href="../en497328/index.html">Easy way to learn a language (any)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>