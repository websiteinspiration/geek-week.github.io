<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üà≤ ü§∂üèø ü§ûüèæ ES6 modules in the browser: are they ready or not? üë®üèª‚Äçüç≥ üí≠ üõÑ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Have you heard about the use of ES6 modules in a browser? Actually, these are ordinary ES6 modules. They only apply in code intended for browsers.
 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ES6 modules in the browser: are they ready or not?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/492510/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Have you heard about the use of ES6 modules in a browser? </font><font style="vertical-align: inherit;">Actually, these are ordinary ES6 modules. </font><font style="vertical-align: inherit;">They only apply in code intended for browsers.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/yl/q1/wl/ylq1wlx8jeaaomnc9kwintirrma.jpeg"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If anyone does not know - this is how it looks. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is a page </font></font><code>index.html</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><font></font>
&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"index.mjs"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">&lt;!--     "module" --&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is a file </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">representing a module connected to the page:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { doSomething } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.mjs'</span>;<font></font>
<font></font>
doSomething(<span class="hljs-string">'Make me a sandwich'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This module, in turn, imports the function </font></font><code>doSomething</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from the module </font></font><code>utils.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> doSomething = <span class="hljs-function"><span class="hljs-params">message</span> =&gt;</span> {
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'No.'</span>);<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ES6 modules have been around for many years. </font><font style="vertical-align: inherit;">And maybe you are thinking about trying them. </font><font style="vertical-align: inherit;">I used them for about a month in my own project. </font><font style="vertical-align: inherit;">At the same time, I came to the conclusion that ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suspence!</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">About browser support for modules</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Before I talk about what I understand, I suggest taking a look at browser support for modules. </font><font style="vertical-align: inherit;">I am writing this material at the beginning of 2020, so the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">level of support for the</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> modules is quite impressive 90%.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/484/cfd/9e6/484cfd9e669b731f483cfdd99a638777.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Support for modules with browsers according to caniuse.com,</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
I am quite happy with these 90% (I do not take into account the needs of 10% of users), although you may want to be more responsible. </font><font style="vertical-align: inherit;">But, even considering this, if your project is not designed for IE, or UC, or Opera Mini, this level of support means that almost 100% of your target audience will be able to work with your project without problems. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
True, browser support for modules is only the beginning. </font><font style="vertical-align: inherit;">Here I want to find the answer to three questions that arose at the very beginning of my journey towards modules:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Does the use of modules in browsers have any advantages?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What about the cons?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I am sure I had a third question, but now I can‚Äôt remember it.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's figure it out ...</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What are the advantages of using modules in browsers?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is pure JavaScript! </font><font style="vertical-align: inherit;">No assembly project pipeline, no 400-line Webpack configuration file, no Babel, no plugins and presets, and no additional 45 npm modules. </font><font style="vertical-align: inherit;">Only you and your code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is something refreshing about writing code that will be executed in the browser exactly in the form in which it was created. </font><font style="vertical-align: inherit;">This may require a little more effort, but the result is very pleasant. </font><font style="vertical-align: inherit;">This is how to drive a car with a manual transmission. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So. </font><font style="vertical-align: inherit;">The advantages of ES6 modules are pure JavaScript, this is the lack of assembly, project configuration, and the rejection of dependencies that have become unnecessary. </font><font style="vertical-align: inherit;">What else? </font><font style="vertical-align: inherit;">Is there anything else? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No, nothing more.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What are the disadvantages of using modules in browsers?</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñçComparison of modules and bundlers</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When thinking about whether to use ES6 modules in a browser, you actually have to choose between using modules and bundlers like Webpack, Parcel, or Rollup. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can (probably) use both of them, but in reality, if you plan to run the code through the bundler, there is no reason to use the design </font></font><code>&lt;script type="module"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to load the bundle files. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, based on the assumption that someone is considering the possibility of using ES6 modules instead of a bundler, here is what he will have to give up:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minification of the finished code.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cutting-edge JavaScript features.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Syntax that is different from JavaScript syntax (React, TypeScript, etc.).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Npm modules.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caching</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's consider the first three points of this list in more detail.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç File Size</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The size of my project, which uses modules, is 34 Kb. Since I do not use the project build step, the code transmitted over the network contains very long variable names; there are a great many comments in it. It, in addition, represents a whole bunch of small files, which is not very good in terms of data compression. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If I put all this into a bundle using </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parcel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , then the size of what would </font><font style="vertical-align: inherit;">turn </font><font style="vertical-align: inherit;">out would be 18 Kb. My Casual Casio calculator reports that this is ‚Äúabout half‚Äù the project code in which the bundler is not used. This is partly due to the fact that Parcel minifies files, but also because the materials with this approach are better compressed using gzip.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Data compression draws our attention to another problem: the way files are organized (in the sense of development convenience) is directly transferred to the way files are transferred over the network. And the way the files are organized during development does not necessarily correspond to how you want to see them in the site. For example, 150 modules (files) may make sense while working on a project. And the same materials transferred to the browser can be justified to organize in 12 bundles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will explain this idea. I'm not talking about the fact that using modules means that files cannot be bundled and minified (the fact that this cannot be done is an illusion). I just mean that it makes no sense to do both.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yes, here's a funny observation. </font><font style="vertical-align: inherit;">In my application, until I wrote this section, modules were used (I emphasize!). </font><font style="vertical-align: inherit;">I installed Parcel to calculate the correct assembly size. </font><font style="vertical-align: inherit;">And now I see no reason to return to normal modules. </font><font style="vertical-align: inherit;">Well, is it not interesting!</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñçLife without transpilation</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Over the years, I‚Äôm very used to using the latest JavaScript syntax constructs, and to the wonderful Babel tool, which turns them into code that all browsers understand. I got used to it so much that I rarely at least thought about browser support (of course, with the exception of DOM and CSS). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When I first tried </font></font><code>type=¬´module¬ª</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, I was going to do everything myself. My goal was fresh browsers, so I thought I could use modern JavaScript, which I'm used to. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the reality was not so rosy. Try to answer the following questions quickly and without looking anywhere. Does Edge Support</font></font><code>flatMap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? Does Safari support destructive assignment (objects and arrays)? Does Chrome support commas after last function arguments? Does Firefox support exponentiation? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, I had to look for answers to these questions, conduct cross-browser tests. But I used all this for ages. In any large enough application, this would very likely lead to production errors. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This also means that I will not be able to use the most remarkable JavaScript innovation since the advent of the array method </font></font><code>slice()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- the so-called </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">optional sequence operator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . I used magical designs like</font></font><code>prop?.value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">just about a month (from the moment the Create React App tool started supporting them without any additional settings). </font><font style="vertical-align: inherit;">But it‚Äôs already inconvenient for me to work without them.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Caching burdens</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Caching was for me the biggest stumbling block. In fact, the fact that the solution to the caching problem turned out to be quite interesting turned out to be the main reason why I decided to write this material. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you are sure, you know, when materials are processed using a bundler, each of the resulting files gets a unique name - sort of </font></font><code>index.38fd9e.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. The contents of a file with this name never (never ever) changes. Therefore, it can be cached by the browser for an unlimited period. If such a file is downloaded once, you will not have to download it again. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is an amazing system - unless you try to find the answer to the question of how to clear the cache. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modules are loaded using a design like</font></font><code>&lt;script type="module" src="index.mjs"&gt;&lt;/script&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The hash in the file name is not used. </font><font style="vertical-align: inherit;">How, in this situation, is it supposed to inform the browser about where to download it </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- from the cache or from the network? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It should be noted that it is almost possible to make the cache work acceptable, but it will take some effort. </font><font style="vertical-align: inherit;">Here's what you need for this:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You must set the title of all answers </font></font><code>cache-control</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to a value </font></font><code>no-cache</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Incredibly, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no-cache</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> does not mean "do not cache." </font><font style="vertical-align: inherit;">This means that the file must be cached, but the file should not be "used to satisfy a subsequent request without successful verification on the source server."</font></font></li>
<li>    ETag.    ‚Äî  ()   , ,   ,    .  , <code>38fd9e</code>      .</li>
<li>   CDN-  ,   .     ETag       .     .   CDN-   .       (     ETag)      . (, ,     Firebase).</li>
<li>  -,    ,  ¬´  ¬ª  .        ,     ,  ,  ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, when a visitor re-visits the site, the browser will say: ‚ÄúI need to download the file </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. I see this file already exists in my cache, its ETag is </font></font><code>38fd9e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. I‚Äôll request this file from the server, but I‚Äôll tell him to send it to me only if his ETag isn‚Äôt </font></font><code>38fd9e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ‚Äù The service worker will intercept this request, ignore ETag and return it </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from its cache (this file got into the cache when the page was loaded last time). Then the service worker will redirect the request to the server. The server will either return a message stating that the file has not changed, or a file that will be stored in the cache. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In my opinion, all this is very troublesome. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now, if you are interested, the service worker code:</font></font><br>
<br>
<pre><code class="javascript hljs">self.addEventListener(<span class="hljs-string">'fetch'</span>, e =&gt; {<font></font>
&nbsp;&nbsp;e.respondWith(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">async</span> (</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//       </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> cacheResponse = <span class="hljs-keyword">await</span> caches.match(e.request);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//   (),   </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">// (ETag-    )</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fetch(e.request).then(<span class="hljs-function"><span class="hljs-params">fetchResponse</span> =&gt;</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;caches<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.open(CACHE_NAME)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> cache.put(e.request, fetchResponse));<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> (cacheResponse) <span class="hljs-keyword">return</span> cacheResponse;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> fetch(e.request);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;})()<font></font>
&nbsp;&nbsp;);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I was lazy, so I did not study and did not use the latest </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FetchEvent.navigationPreload</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> property </font><font style="vertical-align: inherit;">. The fact is that by that time I spent more time caching than writing an application (for your information, I spent 10 and 11 hours on these matters, respectively). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yes, I want to note that the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proposal of the</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äúimport card‚Äù is aimed at solving some of the problems described above. It allows you to organize something like mapping </font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">on </font></font><code>index.38fd9e.mj</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s. But to generate a hash, anyway, you need some kind of assembly pipeline, import cards will have to be embedded in the HTML file. This means that a bundler is needed here ... Actually, in this situation, the modules are no longer needed in the browser.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, although it was interesting to understand all of this, it can be compared with the way I drove everywhere on a monocycle for a whole year. </font><font style="vertical-align: inherit;">I won‚Äôt do this anymore.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But probably not everyone uses bundlers?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I wrote this material on the assumption that everyone writes code in modules, using constructs </font></font><code>import/export</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or </font></font><code>require</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, and then collect the code into production bundles using Webpack, Grunt, Gulp or something like that. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Are there any developers who don't use bundlers? </font><font style="vertical-align: inherit;">Is there anyone who puts their JavaScript code in multiple files and sends them to production without bundling? </font><font style="vertical-align: inherit;">Maybe one of these people is you? </font><font style="vertical-align: inherit;">If so, I would like to know all about your life.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Summary</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I strive to make all the serious decisions, such as choosing between modules and bundlers, based on the main principles of effective development. This is productivity and quality. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unfortunately, the use of modules in browsers does not contribute to either one or the other. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If tomorrow I start work on a new project, then in my head I won‚Äôt have a question about whether to run the good old create-react-app. All initial settings will take about thirty seconds, and although the initial project size of 40 Kb is a bit big, for most sites this will not play any role.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And here is a different situation. Suppose I would need to put together a little HTML / CSS and JavaScript for some kind of experiment, and such an experiment would be a project that included a little more files than a few. If, while working on this project, I did not plan to spend time setting up the system to build it, then I would probably use the modules in the browser. And then - if I did not care about the performance of this project. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I would be interested to know how Webpack and its related tools work with ES6 modules in a browser. I believe that in the future, when the proposal for ‚Äúimport cards‚Äù receives sufficient support, bundlers will probably use them as a mechanism for abstracting unsightly hashes that are used today.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dear readers! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Have you used ES6 modules in your browser?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en492500/index.html">Science Garage in Russian. Experience translating an American show</a></li>
<li><a href="../en492502/index.html">MIP * = RE: epoch-making evidence from the field of computer science that caused the domino effect in physics and mathematics</a></li>
<li><a href="../en492504/index.html">What happens when a JS module is imported twice?</a></li>
<li><a href="../en492506/index.html">3 ways to render large lists in Angular</a></li>
<li><a href="../en492508/index.html">Book Kubernetes for DevOps</a></li>
<li><a href="../en492512/index.html">CSS: adventures in the land of translucency</a></li>
<li><a href="../en492514/index.html">How to establish a legally significant electronic document flow of counterparties in Russia and Kazakhstan?</a></li>
<li><a href="../en492518/index.html">Virus outbreak requires remote work, which means digital signing of documents</a></li>
<li><a href="../en492520/index.html">Parameterized 3D modeling of the bearing cup in nanoCAD Plus 20</a></li>
<li><a href="../en492522/index.html">Remote Team Communication</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>