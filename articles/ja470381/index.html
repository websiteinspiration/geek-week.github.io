<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧕🏾 👨🏽‍✈️ 👩🏻‍🏫 ATMEGA328Pコントローラー上の自律型気象ステーションとワイヤレスリモートセンサーを搭載したバッテリー駆動 🧕🏽 ✳️ 📴</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="私が以前に書いた私の部屋のサーモスタットを改善するために、私はそれを外気温を測定するためのワイヤレス温度センサーで補完し、バッテリー駆動のサーモスタットを組み立て、RF 433MHz送信機/受信機モジュールを、供給電圧ではないより長い通信範囲を持つ別の無線モジュールのペアと交換します3V以上。これら...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ATMEGA328Pコントローラー上の自律型気象ステーションとワイヤレスリモートセンサーを搭載したバッテリー駆動</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470381/"><p><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私が以前に書いた私の部屋のサーモスタットを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改善するために、私</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">はそれを</font></a><font style="vertical-align: inherit;">外気温を測定するためのワイヤレス温度センサーで補完し、バッテリー駆動のサーモスタットを組み立て、RF 433MHz送信機/受信機モジュールを、供給電圧ではないより長い通信範囲を持つ別の無線モジュールのペアと交換します3V以上。</font><font style="vertical-align: inherit;">これらの問題を解決する過程で、以下で説明する自律型気象ステーションが登場しました。</font></font></p><a name="habracut"></a><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dd/vj/6r/ddvj6rih_mxyi4izpiz4iplozik.gif"></div><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">気象ステーションは2つのノードで構成されています。簡単にするために、それらをアナライザーと温度計と呼びましょう。</font><font style="vertical-align: inherit;">ノード間の通信-無線、無線。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザーはATMEGA328Pコントローラーに基づいており、部屋の温度と湿度（温度と湿度センサーDHT22）と、2つのAA 1.5Vバッテリーから供給されるアナライザーの供給電圧を測定します。</font><font style="vertical-align: inherit;">コントローラーはLoRaレシーバーから信号を受信します。LoRaレシーバーは、無線で温度計（リモートセンサー）から情報を受信します。</font><font style="vertical-align: inherit;">コントローラからの情報は、NOKIA 5110のLCDに表示されます。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ATMEGA328Pコントローラーにも組み込まれている温度計は、外気温（温度センサーDS18B20）とリモートユニットの供給電圧を測定し、2つの1.5V単三電池で構成されています。このユニットのLoRaトランスミッターは、温度と供給電圧を分析装置に転送します。 </font></font></p><br>
<p> ATMEGA328P   LoRa               .     DS18B20       .            . </p><br>
<p>    -   .            .         —       .  ATMEGA328P   LoRa   14          .   DHT22     .</p><br>
<p>     ATMEGA328P   LowPower.h.</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">       .</a></p><br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ob/hi/6z/obhi6ztutl3wckifbjzbg0p-pcs.png"></div><br>
<p>      ATMEGA328P — 1,8.  ,    ATMEGA328P       2,7,          1,8,         .</p><br>
<p>        16     3   .        16      2,7…2,8,       16   8 .</p><br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/or/kl/rf/orklrfdoalqoh5d3gsqxde-9x_c.jpeg"></div><br>
<p>    ,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">AliExpress</a>   .</p><br>
<table border="1">
<tbody><tr>
<td><strong></strong></td>
<td><strong>, $</strong></td>
</tr>
<tr>
<td colspan="2"><em></em></td>
</tr>
<tr>
<td> ATMEGA328P-PU</td>
<td>1,59</td>
</tr>
<tr>
<td>    DHT22</td>
<td>2,34</td>
</tr>
<tr>
<td>- LoRa R-01</td>
<td>3,95</td>
</tr>
<tr>
<td>- NOKIA 5110</td>
<td>1,91</td>
</tr>
<tr>
<td> () ,  ,  ,   16 ,   .</td>
<td>4,00</td>
</tr>
<tr>
<td colspan="2"><em></em></td>
</tr>
<tr>
<td> ATMEGA328P-PU</td>
<td>1,59</td>
</tr>
<tr>
<td>  DS18B20</td>
<td>0,63</td>
</tr>
<tr>
<td>- LoRa R-01</td>
<td>3,95</td>
</tr>
<tr>
<td>  (),  ,  ,   16 ,   .</td>
<td>4,00</td>
</tr>
<tr>
<td><strong> ():</strong></td>
<td><strong>24</strong></td>
</tr>
</tbody></table><br>
<p></p><h4></h4><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/of/fu/xd/offuxdrjbzlmia_xnnsfqeliisc.jpeg"></div><br>
<p>  –  ATMEGA328P.      DHT22    SPI    LoRa   NOKIA 5110.</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a></p><div style="text-align:center;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/b3/wl/9b/b3wl9b2zijmxgg8yso3xxt1faxq.png"></a></div><br>
<p></p><p>          DHT22.    :       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">HTU21 (GY21)</a>, (Vcc = 3...5 ), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">Si7021</a>,(Vcc = 1,9… 3,6 ), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">SHT21</a>, (Vcc = 2.1….3,6 ).</p><br>
<p>  DHT22,              LaCrosse WS-9024IT    8- ,      .      ,     DHT22  3.   ,    DHT22     3…5.  –          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">Si7021</a>.</p><br>
<p>   —   .</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a></p><div style="text-align:center;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/gq/ut/go/gqutgob1fbq1hd85xtnovdvphfw.png"></a></div><br>
<p></p><p>     ,    ATMEGA328P,      SinaProg.       ,      ,         .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">HWman</a>    SinaProg    Arduino UNO  .</p><br>
<p>      ATMEGA328P    ,       .        : <strong>LOW: 0xFF, HIGH: 0xDE, EXTENDED: 0x05</strong> (Vcc=2.7V, BODLEVEL=101).      1,8,   : <strong>LOW: 0xFF, HIGH: 0xDE, EXTENDED: 0x06</strong> (Vcc=1.8V, BODLEVEL=110).</p><br>
<p>     ATMEGA328P   .</p><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text">```cpp<br>
/*<br>
     ATMEGA328P        , <br>
https://habr.com/ru/post/470381/<br>
*/<br>
<br>
#include &lt;SPI.h&gt;<br>
#include &lt;LoRa.h&gt;<br>
<br>
#include &lt;DHT.h&gt;<br>
#define DHTPIN 3 // what digital pin we're connected to<br>
#define DHTTYPE DHT22 // DHT 22 (AM2302), AM2321<br>
DHT dht(DHTPIN, DHTTYPE);<br>
<br>
float Tin = 0;<br>
int Hin = 0;<br>
float BatteryInLevel; //   <br>
String LoRaData, Tout_str, BatteryInLevel_str, BatteryOutLevel_str;<br>
<br>
//sleep<br>
#include &lt;LowPower.h&gt;<br>
#define PowerDHT (4) //  DHT22<br>
unsigned int sleepCounter;<br>
<br>
//Nokia 5110<br>
#include &lt;SPI.h&gt;<br>
#include &lt;Adafruit_GFX.h&gt; //https://esp8266.ru/forum/threads/esp8266-5110-nokia-lcd.1143/#post-16942<br>
#include &lt;Adafruit_PCD8544.h&gt; //https://esp8266.ru/forum/threads/esp8266-5110-nokia-lcd.1143/#post-16942<br>
<br>
//timer<br>
#include &lt;SimpleTimer.h&gt;<br>
SimpleTimer timer;<br>
<br>
Adafruit_PCD8544 display = Adafruit_PCD8544(5, 7, 6);<br>
<br>
void sendSensor() {<br>
 digitalWrite(PowerDHT, 1);<br>
 delay (2000);<br>
 Hin = dht.readHumidity();<br>
 Tin = dht.readTemperature();<br>
<br>
/* if (isnan(Hin) || isnan(Tin)) {<br>
 // Serial.println(«Failed to read from DHT sensor!»);<br>
 return;<br>
 }*/<br>
<br>
digitalWrite(PowerDHT, 0);<br>
<br>
//   :<br>
 analogReference(INTERNAL);<br>
 int sensorValue = analogRead(A4);<br>
 BatteryInLevel = (sensorValue * 3.2 / 1024);<br>
}<br>
<br>
void draw() {<br>
 display.clearDisplay();<br>
 //Tin<br>
 {<br>
 display.setTextSize(2);<br>
 display.setCursor(8, 0);<br>
 display.println (Tin, 1); //    <br>
 display.setCursor(68, 0);<br>
 display.println(«C»);<br>
 }<br>
 //Hin<br>
 { <br>
 display.setTextSize(2);<br>
 display.setCursor(8, 16);<br>
 display.println(String(Hin) + "%");<br>
 }<br>
 //Tout<br>
 {<br>
 char chr_Tout [12];<br>
<br>
Tout_str.toCharArray(chr_Tout, 5);<br>
 display.setTextSize(1);<br>
 display.setCursor(50, 16);<br>
 display.println(String(chr_Tout) + «C»);<br>
 }<br>
 // Battery Out Level<br>
 {<br>
 char chr_BatteryOutLevel [12];<br>
<br>
BatteryOutLevel_str.toCharArray(chr_BatteryOutLevel, 4);<br>
 display.setTextSize(1);<br>
 display.setCursor(2, 32);<br>
 display.println(«BAT Out: » + String(chr_BatteryOutLevel) + «V»);<br>
 }<br>
 // Battery In Level<br>
 {<br>
 display.setTextSize(1);<br>
 display.setCursor(2, 40);<br>
 display.println(«BAT In: „);<br>
 display.setCursor(56, 40);<br>
 display.println(BatteryInLevel, 1); //   <br>
 display.setCursor(74, 40);<br>
 display.println(“V»);<br>
 }<br>
<br>
display.display();<br>
 /*<br>
 Serial.println(«Tin: » + String(Tin) + "*C");<br>
 Serial.println(«Hin: » + String(Hin) + "%");<br>
 Serial.println(«Tout: » + String(Tout_str) + "*C");<br>
 Serial.println(«BAT_In: » + String(BatteryInLevel) + «V»);<br>
 Serial.println(«BAT_Out: » + String(BatteryOutLevel_str) + «V»);<br>
 Serial.println("......");<br>
 */<br>
}<br>
<br>
void sleepDevice() {<br>
 // sleepCounter = 65 — 10 min<br>
 // sleepCounter = 91 — 14 min<br>
 for (sleepCounter = 91; sleepCounter &gt; 0; sleepCounter--) //91!!!<br>
 {<br>
 LoRa.sleep ();<br>
 LowPower.powerDown(SLEEP_8S, ADC_OFF, BOD_OFF);<br>
 }<br>
 LoRa.sleep ();<br>
}<br>
<br>
void SignalReception () {<br>
 // try to parse packet<br>
 int packetSize = LoRa.parsePacket();<br>
 if (packetSize) {<br>
 // read packet<br>
 while (LoRa.available()) {<br>
 LoRaData = LoRa.readString();<br>
 // Serial.println(«: » + (LoRaData));<br>
 }<br>
 int pos1 = LoRaData.indexOf('#');<br>
 Tout_str = LoRaData.substring(0, pos1);<br>
 BatteryOutLevel_str = LoRaData.substring(pos1 + 1, LoRaData.length());<br>
 }<br>
}<br>
<br>
void setup() {<br>
 //Serial.begin(9600);<br>
 pinMode(PowerDHT, OUTPUT);<br>
<br>
//    <br>
 display.begin();<br>
 display.clearDisplay();<br>
 display.display();<br>
 display.setContrast(60); //  <br>
<br>
display.clearDisplay();<br>
 display.setTextSize(2);<br>
 display.setCursor(12, 16);<br>
 display.println (" &gt;&gt;&gt;&gt;&gt; "); //    <br>
 display.display();<br>
<br>
dht.begin();<br>
 sendSensor();<br>
 draw();<br>
<br>
while (!LoRa.begin(433E6)) {<br>
 //Serial.println(".");<br>
 delay(500);<br>
 }<br>
 //    –  «0 — 0xFF».<br>
 LoRa.setSyncWord(0xF3);<br>
 //Serial.println(«LoRa Initializing»);<br>
 timer.setInterval(20000, sendSensor);<br>
 timer.setInterval(5000, draw);<br>
 timer.setInterval(65000, sleepDevice);<br>
}<br>
<br>
void loop() {<br>
 SignalReception();<br>
 timer.run();<br>
}<br>
```</div></div><br>
<br>
<p>    ATMEGA328P       Arduino UNO.  Youtube   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">   </a>      ATMEGA328    Arduino UNO.</p><br>
<p>         (Serial).    —  .</p><br>
<p>         LoRa.     — 65 .      5      NOKIA    20  (3 )  DHT22   , ,           .    DHT22         2 ,     .         ,   3,2 (1,6  2).       1        ,       1 ,    .   62-        ,    14 , ..   « — »  —  15 . ,      –   ,    .</p><br>
<p>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">LaCrosse WS-9024IT</a>     .</p><br>
<table border="1">
<tbody><tr>
<td><strong></strong></td>
<td><strong>LaCrosse WS-9024IT</strong></td>
<td><strong>adil_TM</strong></td>
</tr>
<tr>
<td></td>
<td>2, 3, Durasell</td>
<td>2, 3, GP Ultra+, 1800 *</td>
</tr>
<tr>
<td> </td>
<td></td>
<td>350  (10 )</td>
</tr>
<tr>
<td> </td>
<td>&nbsp;</td>
<td>14 </td>
</tr>
<tr>
<td> </td>
<td>&lt; 200 </td>
<td>12-18 </td>
</tr>
<tr>
<td> </td>
<td>&nbsp;</td>
<td> 1 </td>
</tr>
<tr>
<td>  /</td>
<td> 5 </td>
<td>15 </td>
</tr>
</tbody></table><br>
<br>
<p>  LaCrosse   «».       ,    :     . </p><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tg/h0/ke/tgh0kev0vv-b_tmlefcjddxmqlg.gif"></div><br>
<br>
<p>       ,    .  ,         , ,         ,        .</p><br>
<p>      (350 )  -.   ,     10 .   18       LoRa   ,      .                10 ,                . </p><br>
<h4></h4><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/rp/tb/nx/rptbnxv-nlwql3ap7i1rcjdf_wk.jpeg"></div><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">       </a>. ,                     DS18B20,        . DS18B20       .         –  ,             .</p><br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ic/vq/me/icvqmeepxsfgd9ut_hhcais3xle.jpeg"></div><br>
<p>  ATMEGA328P   ,    .</p><br>
<p>      ATMEGA328P.      DS18B20,       LoRa.</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a></p><div style="text-align:center;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/0d/ie/ww/0diewwzov4r4gwbrojlrvbyzbrq.png"></a></div><br>
<p></p><p>  –  .</p><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text">```cpp<br>
/*<br>
     ATMEGA328P        , <br>
https://habr.com/ru/post/470381/<br>
*/<br>
<br>
#include &lt;OneWire.h&gt;<br>
OneWire ds(7); //pin 13, Atmega328P<br>
<br>
#include &lt;SPI.h&gt;<br>
#include &lt;LoRa.h&gt;<br>
<br>
#include &lt;LowPower.h&gt;<br>
<br>
#define PowerDS18B20 (6) //pin 12 (Atmega328P), e DS18B20<br>
unsigned int sleepCounter; // ,   <br>
float Tout; //<br>
int i; //         (20   1 )<br>
<br>
String messageTout; // LoRa-<br>
float batteryLevel; //  <br>
const int batteryPin = A0; // pin 23 (Atmega328P),       <br>
<br>
void Measurement () {<br>
 // <br>
 byte data[2];<br>
<br>
digitalWrite(PowerDS18B20, 1);<br>
<br>
ds.reset();<br>
 ds.write(0xCC); //     (1 )<br>
 ds.write(0x44); //   <br>
<br>
delay(700);<br>
<br>
ds.reset();<br>
 ds.write(0xCC);<br>
 ds.write(0xBE); //     <br>
<br>
data[0] = ds.read();<br>
 data[1] = ds.read();<br>
 Tout = ((data[1] &lt;&lt; 8) | data[0]) * 0.0625;<br>
 // Serial.println(«Tout= „+ String(Tout));<br>
 digitalWrite(PowerDS18B20, 0);<br>
 //   :<br>
 analogReference(INTERNAL);<br>
 int sensorValue = analogRead(A0);<br>
 batteryLevel = (sensorValue * 3.2 / 1024);<br>
 // Serial.println(“BAT= „+ String(batteryLevel));<br>
}<br>
<br>
void SetSynchLoRa () {<br>
 int counter = 0;<br>
 while (!LoRa.begin(433E6) &amp;&amp; counter &lt; 10) {<br>
 // Serial.print(“.»);<br>
 counter++;<br>
 delay(500);<br>
 }<br>
 LoRa.setTxPower(4); //  2-20 <br>
<br>
/* if (counter == 10) {<br>
 // Serial.println(«Failed to initialize ...»);<br>
 }*/<br>
 LoRa.setSyncWord(0xF3);<br>
}<br>
<br>
void SendMessage () {<br>
 //   (,  )<br>
 messageTout = String(Tout) + "#" + String(batteryLevel);<br>
 // Serial.println(messageTout);<br>
 delay(250);<br>
 LoRa.beginPacket();<br>
 LoRa.print(messageTout);<br>
 LoRa.endPacket();<br>
}<br>
<br>
void setup() {<br>
 //Serial.begin(9600);<br>
 // Serial.println(«Initializing ...»);<br>
 pinMode(PowerDS18B20, OUTPUT);<br>
 SetSynchLoRa ();<br>
}<br>
<br>
void loop() {<br>
 //Serial.println("");<br>
 //Serial.println(«i = » + String(i));<br>
<br>
if (i &gt;= 30) { // i &gt;= 30 (1 ) —   (,  — 1 /1 )<br>
 for (sleepCounter = 5; sleepCounter &gt; 0; sleepCounter--)<br>
 {<br>
 LoRa.sleep ();<br>
 LowPower.powerDown(SLEEP_8S, ADC_OFF, BOD_OFF);<br>
 }<br>
 Measurement ();<br>
 SendMessage ();<br>
 LoRa.sleep ();<br>
 } else<br>
 { //   1 ,  — 1 /2 <br>
 Measurement ();<br>
 SendMessage ();<br>
 delay (1000);<br>
 }<br>
 i++;<br>
 if (i &gt;= 30) i = 30; //   <br>
}<br>
```</div></div><br>
<br>
<p> - LoRa      1,5       300    , ,        : 17-20 .         4 .</p><br>
<p>            .   ,           2 .    . ,         .                . ,                .</p><br>
<p>      .     ,     1- ,           1- .</p><br>
<p>  .         .</p><br>
<table border="1">
<tbody><tr>
<td><strong></strong></td>
<td><strong>LaCrosse WS-9024IT</strong></td>
<td><strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">maniacbug</a></strong></td>
<td><strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">avs24rus</a></strong></td>
<td><strong>adil_TM</strong></td>
</tr>
<tr>
<td></td>
<td>2, 3, Durasell</td>
<td>3, CR2450 Renata, 540 <strong>*</strong></td>
<td>3, CR2450, 550-610 *</td>
<td>2, 3, GP Ultra+, 1800 *</td>
</tr>
<tr>
<td> </td>
<td></td>
<td>0,14  (?)</td>
<td>14 </td>
<td>5 </td>
</tr>
<tr>
<td> </td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td> 1 </td>
</tr>
<tr>
<td> </td>
<td> &lt; 700 </td>
<td>13,57 </td>
<td>16 — 18 </td>
<td> 14 </td>
</tr>
<tr>
<td> </td>
<td>&nbsp;</td>
<td>0,027 </td>
<td>&nbsp;</td>
<td> 1 </td>
</tr>
<tr>
<td>  /</td>
<td> 5 </td>
<td>1 </td>
<td>10 </td>
<td> 1 </td>
</tr>
</tbody></table><br>
<br>
<p>    ,      :</p><br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/vm/ry/-9/vmry-9owzy-rtsulc5mz5ghzh2g.png"></div><br>
<p>   ,        ,       LaCrosse. , 14   700      10...18   200   .       ,   , ,          Arduino IDE,    ,     —         , ,  ++ (,   Arduino)  C().     , , ,    ,    . ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">HWman</a>    «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    Arduino</a>».       (Blink),   Arduino IDE       — « »,     ,       26 . ,    –           –     Arduino  «»   .  —        /++,    Arduino IDE. </p><br>
<h4></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
•組み立てられたアナライザーと温度計は、工業デザインと比較して消費電流が多すぎます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
•3番目は、回路内の2つのパワーバッテリーを示しています。その後、次の問題が自動的に解決されます。ヒューズを再インストールする必要がなく、16 MHzの周波数でコントローラーが安定して動作すること、DHT22、DS18B20センサーが電源電圧の下限から離れていること。</font><font style="vertical-align: inherit;">後者は重要です。供給電圧はセンサーに直接供給されないため、コントローラーのピンからキーを介してプログラム的に供給され、約1Vに低下します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
•4 dBのプログラム可能な送信機電力を備えたLoRa無線モジュールを使用することで、2つの単三電池からのモジュールの電源でアパート内に安定した接続を確立することが可能になりました。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関連リンク</font></font></h4><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">     </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> Lighting-Sensor    CR2450</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  ,      nRF52832</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> Arduino   AVRISP </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">LoRa  </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">    ATmega328P   ,       </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">  AVR</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    Arduino</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">  </a></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja470365/index.html">AndroidでのUSBカスタムHIDの操作</a></li>
<li><a href="../ja470367/index.html">フードデザインダイジェスト、2019年9月</a></li>
<li><a href="../ja470373/index.html">PHPダイジェストNo. 165（2019年9月23日-10月7日）</a></li>
<li><a href="../ja470375/index.html">テストと自動テストが必要な場合、スーパーシステムからの外観</a></li>
<li><a href="../ja470379/index.html">3つの山の問題、心のとらえどころのない理論、そして子どもの発達の周期化の問題</a></li>
<li><a href="../ja470385/index.html">経済学における黄金比-2</a></li>
<li><a href="../ja470387/index.html">Простите, пользователи macOS, но Apple зашла слишком далеко</a></li>
<li><a href="../ja470389/index.html">Mozillaは、英国でDoH暗号化を含めないことを約束しています。これはロシアにとって何を意味しますか？</a></li>
<li><a href="../ja470393/index.html">スマートペップグラス-ペガシドリームグラスインプレッション</a></li>
<li><a href="../ja470395/index.html">OWASP APIセキュリティトップ10 RC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>