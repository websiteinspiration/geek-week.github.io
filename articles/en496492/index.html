<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🎤 👩🏻‍🏫 ☦️ Basic LXD Features - Linux Container Systems 🚇 💇🏿 🔆</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="LXD is the next-generation container system manager, the source says . It offers a user interface similar to virtual machines, but using Linux contain...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Basic LXD Features - Linux Container Systems</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496492/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/jj/qk/qa/jjqkqae2fpn42rq5ar3ukcjau1a.png"></div><br>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LXD</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is the next-generation container system manager, the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">source</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> says </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">It offers a user interface similar to virtual machines, but using Linux containers instead.</font></font></p><br>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The LXD core</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a privileged daemon (a service started with root privileges) that provides the REST API through the local unix socket, as well as through the network, if the appropriate configuration is installed. Clients such as the command line tool shipped with LXD send requests through this REST API. This means that regardless of whether you access the local host or the remote, everything works the same way.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this article, we will not dwell on the concepts of LXD, we will not consider all the available features described in the documentation, including the implementation of support for QEMU virtual machines in parallel with containers in the latest versions of LXD. </font><font style="vertical-align: inherit;">Instead, we only learn the basic container management features — configure storage pools, a network, launch a container, apply resource limits, and also consider how to use snapshots so that you can get a basic understanding of LXD and use containers on Linux.</font></font></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For complete information, refer to the official source:</font></font></p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Developer's site</font></font></a> </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documentation</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Forum </font></font></a></li>
</ul><br>
<h1 id="navigaciya"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Navigation</font></font></h1><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LXD Installation</font></font></a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installing LXD on Ubuntu Distributions</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Install LXD on Arch Linux distributions</font></font></a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initialize LXD</font></font></a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LXD Storage Overview</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Choosing a File System for Storage Pool</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">   LXD</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  Storage Pool</a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  Storage Pool</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> loopback-   loopback-</a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">.  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> </a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  </a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> </a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  </a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> LXD</a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">   </a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  IP </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  </a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  RAM ()</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  CPU ()</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  </a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> </a></li>
</ul></li>
</ul><br>
<h1 id="installyaciya-lxd-navigaciya"> LXD <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h1><br>
<p>        ,      LXD,             LXD    LXC     -.</p><br>
<p>,  LXD       :</p><br>
<ul>
<li>LXD <code>/usr/bin/lxd</code> —  ( REST API),  <code>LX</code>      <strong>L</strong>inu<strong>x</strong>,  <code>D</code> — . ,     <code>lxd</code></li>
<li>LXC <code>/usr/bin/lxc</code> —   ,  <code>C</code>    <strong>c</strong>ommand line <strong>c</strong>lient for LXD</li>
</ul><br>
<p>    ,       <code>lxc</code>,  <code>lxc init</code>,         LXD — <code>lxd init</code>      <code>lxc init</code>.</p><br>
<p>                       — Ubuntu  Arch Linux.   Ubuntu    ,      snap-       LXD    ,     ,          .</p><br>
<h2 id="installyaciya-lxd-v-distributivah-ubuntu-navigaciya"> LXD   Ubuntu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p>  Ubuntu 19.10  <code>lxd</code>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">snap-</a>:</p><br>
<pre><code class="bash hljs">apt search lxd<font></font>
<font></font>
lxd/eoan 1:0.7 all<font></font>
  Transitional package - lxd -&gt; snap (lxd)</code></pre><br>
<p> ,      ,  ,    snap-.         ,       ,   snap-  snap-.</p><br>
<p>  <code>lxd</code>  snap-   :</p><br>
<pre><code class="bash hljs">snap find lxd<font></font>
<font></font>
Name             Version        Summary<font></font>
lxd              3.21           System container manager and API<font></font>
lxd-demo-server  0+git.6d54658  Online software demo sessions using LXD<font></font>
nova             ocata          OpenStack Compute Service (nova)<font></font>
nova-hypervisor  ocata          OpenStack Compute Service - KVM Hypervisor (nova)<font></font>
distrobuilder    1.0            Image builder <span class="hljs-keyword">for</span> LXC and LXD<font></font>
fabrica          0.1            Build snaps by simply pointing a web form to...<font></font>
satellite        0.1.2          Advanced scalable Open <span class="hljs-built_in">source</span> intelligence platform</code></pre><br>
<p>  <code>list</code>  ,   <code>lxd</code>   :</p><br>
<pre><code class="bash hljs">snap list<font></font>
<font></font>
Name  Version    Rev   Tracking  Publisher   Notes<font></font>
core  16-2.43.3  8689  stable    canonical✓  core</code></pre><br>
<p>   ,  LXD  snap-,       <code>lxd</code>,      ,    <code>/usr/bin</code>  ..</p><br>
<pre><code class="bash hljs">sudo apt update<font></font>
sudo apt install lxd</code></pre><br>
<p>,     snap-:</p><br>
<pre><code class="bash hljs">snap list<font></font>
<font></font>
Name  Version    Rev    Tracking  Publisher   Notes<font></font>
core  16-2.43.3  8689   stable    canonical✓  core<font></font>
lxd   3.21       13474  stable/…  canonical✓  -</code></pre><br>
<h2 id="installyaciya-lxd-v-distributivah-arch-linux-navigaciya"> LXD   Arch Linux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p>   LXD      ,  —        ,  —   :</p><br>
<pre><code class="bash hljs">sudo pacman -Syyu &amp;&amp; sudo pacman -S lxd</code></pre><br>
<p>  ,   LXD  ,       <code>lxd</code>:</p><br>
<pre><code class="bash hljs">sudo usermod -a -G lxd user1</code></pre><br>
<p>,   <code>user1</code>    <code>lxd</code>:</p><br>
<pre><code class="bash hljs">id -Gn user1<font></font>
<font></font>
user1 adm dialout cdrom floppy sudo audio dip video plugdev netdev lxd</code></pre><br>
<p>  <code>lxd</code>    ,      .            .</p><br>
<p>  <code>systemd</code>   LXD   :</p><br>
<pre><code class="bash hljs">sudo systemctl <span class="hljs-built_in">enable</span> lxd</code></pre><br>
<p> :</p><br>
<pre><code class="bash hljs">sudo systemctl start lxd</code></pre><br>
<p>  :</p><br>
<pre><code class="bash hljs">sudo systemctl status lxd</code></pre><br>
<h1 id="inicializaciya-lxd-navigaciya"> LXD <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h1><br>
<p>         LXD —          ,    .      ,           .</p><br>
<h2 id="obzor-hranilischa-lxd-storage-navigaciya">  LXD (Storage) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p>         LXD,           .</p><br>
<p> (<em>Storage</em>) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"></a>     <em>Storage Pool</em>          ZFS, BTRFS, LVM   .  <em>Storage Pool</em>    (<em>Storage Volume</em>)   ,      .</p><br>
<p><img src="https://habrastorage.org/webt/gh/gr/n9/ghgrn9wyertfmqenwpikaenc4zm.png"></p><br>
<ul>
<li><strong></strong> —       Linux     </li>
<li><strong></strong> —     ,   </li>
<li><strong></strong> —        </li>
</ul><br>
<p>    LXD   <code>lxc storage</code>        — <code>lxc storage --help</code></p><br>
<p>       <em>Storage Pool</em>  LXD :</p><br>
<pre><code class="plaintext hljs">lxc storage list<font></font>
<font></font>
+---------+-------------+--------+--------------------------------+---------+<font></font>
|  NAME   | DESCRIPTION | DRIVER |             SOURCE             | USED BY |<font></font>
+---------+-------------+--------+--------------------------------+---------+<font></font>
| hddpool |             | btrfs  | /dev/loop1                     | 2       |<font></font>
+---------+-------------+--------+--------------------------------+---------+<font></font>
| ssdpool |             | btrfs  | /var/lib/lxd/disks/ssdpool.img | 4       |<font></font>
+---------+-------------+--------+--------------------------------+---------+</code></pre><br>
<p>    <em>Storage Volume</em>   <em>Storage Pool</em>   <code>lxc storage volume list</code>:</p><br>
<pre><code class="plaintext hljs">lxc storage volume list hddpool<font></font>
<font></font>
+-------+----------------------------------+-------------+---------+<font></font>
| TYPE  |          NAME                    | DESCRIPTION | USED BY |<font></font>
+-------+----------------------------------+-------------+---------+<font></font>
| image | ebd565585223487526ddb3607f515... |             | 1       |<font></font>
+-------+----------------------------------+-------------+---------+</code></pre><br>
<pre><code class="plaintext hljs">lxc storage volume list ssdpool<font></font>
<font></font>
+-----------+----------------------------------+-------------+---------+<font></font>
|   TYPE    |            NAME                  | DESCRIPTION | USED BY |<font></font>
+-----------+----------------------------------+-------------+---------+<font></font>
| container | alp3                             |             | 1       |<font></font>
+-----------+----------------------------------+-------------+---------+<font></font>
| container | jupyter                          |             | 1       |<font></font>
+-----------+----------------------------------+-------------+---------+<font></font>
| image     | ebd565585223487526ddb3607f515... |             | 1       |<font></font>
+-----------+----------------------------------+-------------+---------+</code></pre><br>
<p>,   <em>Storage Pool</em>       BTRFS,    <em>Storage Volume</em>  <em>subvolumes</em>   BTRFS       :</p><br>
<pre><code class="bash hljs">sudo btrfs subvolume list -p /var/lib/lxd/storage-pools/hddpool<font></font>
<font></font>
ID 257 gen 818 parent 5 top level 5 path images/ebd565585223487526ddb3607f5156e875c15a89e21b61ef004132196da6a0a3</code></pre><br>
<pre><code class="bash hljs">sudo btrfs subvolume list -p /var/lib/lxd/storage-pools/ssdpool<font></font>
<font></font>
ID 257 gen 1820 parent 5 top level 5 path images/ebd565585223487526ddb3607f5156e875c15a89e21b61ef004132196da6a0a3<font></font>
ID 260 gen 1819 parent 5 top level 5 path containers/jupyter<font></font>
ID 263 gen 1820 parent 5 top level 5 path containers/alp3</code></pre><br>
<h2 id="vybor-faylovoy-sistemy-dlya-storage-pool-navigaciya">    Storage Pool <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p>   LXD   ,          <em>Storage Pool</em>.        BTRFS. <u>       </u>.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">  </a>:</p><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th>Feature</th>
<th>Directory</th>
<th>Btrfs</th>
<th>LVM</th>
<th>ZFS</th>
<th>CEPH</th>
</tr>
</thead>
<tbody>
<tr>
<td>Optimized image storage</td>
<td>no</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>Optimized instance creation</td>
<td>no</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>Optimized snapshot creation</td>
<td>no</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>Optimized image transfer</td>
<td>no</td>
<td>yes</td>
<td>no</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>Optimized instance transfer</td>
<td>no</td>
<td>yes</td>
<td>no</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>Copy on write</td>
<td>no</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>Block based</td>
<td>no</td>
<td>no</td>
<td>yes</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td>Instant cloning</td>
<td>no</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>Storage driver usable inside a container</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
<td>no</td>
<td>no</td>
</tr>
<tr>
<td>Restore from older snapshots (not latest)</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td>Storage quotas</td>
<td>yes(*)</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
</tr>
</tbody>
</table></div><br>
<h2 id="inicializaciya-osnovnyh-komponent-lxd-navigaciya">   LXD <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p>,       LXD.      <code>lxd init</code>                    :</p><br>
<pre><code class="plaintext hljs">lxd init<font></font>
<font></font>
Would you like to use LXD clustering? (yes/no) [default=no]: <font></font>
Do you want to configure a new storage pool? (yes/no) [default=yes]: <font></font>
Name of the new storage pool [default=default]: ssdpool         <font></font>
Name of the storage backend to use (lvm, btrfs, dir) [default=btrfs]: <font></font>
Create a new BTRFS pool? (yes/no) [default=yes]: <font></font>
Would you like to use an existing block device? (yes/no) [default=no]: <font></font>
Size in GB of the new loop device (1GB minimum) [default=15GB]: 10GB<font></font>
Would you like to connect to a MAAS server? (yes/no) [default=no]: <font></font>
Would you like to create a new local network bridge? (yes/no) [default=yes]: <font></font>
What should the new bridge be called? [default=lxdbr0]: <font></font>
What IPv4 address should be used? (CIDR subnet notation, “auto” or “none”) [default=auto]: 10.0.5.1/24<font></font>
Would you like LXD to NAT IPv4 traffic on your bridge? [default=yes]: <font></font>
What IPv6 address should be used? (CIDR subnet notation, “auto” or “none”) [default=auto]: none<font></font>
Would you like LXD to be available over the network? (yes/no) [default=no]: <font></font>
Would you like stale cached images to be updated automatically? (yes/no) [default=yes] no<font></font>
Would you like a YAML "lxd init" preseed to be printed? (yes/no) [default=no]: </code></pre><br>
<h2 id="sozdanie-dopolnitelnogo-storage-pool-navigaciya">  Storage Pool <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p>     <em>Storage Pool</em>    <code>ssdpool</code>          <code>/var/lib/lxd/disks/ssdpool.img</code>.       SSD    .</p><br>
<p> ,    ,    <em>Storage Pool</em>  ,    <em>Storage Pool</em>        ,  HDD.    ,  LXD    <em>Storage Pool</em>   <code>/var/lib/lxd/disks/</code>       , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">  </a>.       / <em>Storage Pool</em>         loopback-     <code>source</code>.</p><br>
<p>,   <em>Storage Pool</em>   loopback-           .  ,           10GB:</p><br>
<pre><code class="bash hljs">dd <span class="hljs-keyword">if</span>=/dev/zero of=/mnt/work/lxd/hddpool.img bs=1MB count=10000<font></font>
<font></font>
10000+0 records <span class="hljs-keyword">in</span><font></font>
10000+0 records out<font></font>
10000000000 bytes (10 GB, 9,3 GiB) copied, 38,4414 s, 260 MB/s</code></pre><br>
<p> loopback-   loopback-:</p><br>
<pre><code class="bash hljs">sudo losetup --find --show /mnt/work/lxd/hddpool.img<font></font>
<font></font>
/dev/loop1</code></pre><br>
<p>  <code>--show</code>            loopback-.  ,           ,      :</p><br>
<pre><code class="bash hljs">losetup -l<font></font>
<font></font>
NAME       SIZELIMIT OFFSET AUTOCLEAR RO BACK-FILE                      DIO LOG-SEC<font></font>
/dev/loop1         0      0         0  0 /mnt/work/lxd/hddpool.img        0     512<font></font>
/dev/loop0         0      0         1  0 /var/lib/lxd/disks/ssdpool.img   0     512</code></pre><br>
<p>   ,    <code>/dev/loop1</code>  loopback- <code>/mnt/work/lxd/hddpool.img</code>,    <code>/dev/loop0</code>  loopback- <code>/var/lib/lxd/disks/ssdpool.img</code>    <em>Storage Pool</em>.</p><br>
<p>    <em>Storage Pool</em>  LXD      loopback-. LXD  loopback- <code>/mnt/work/lxd/hddpool.img</code>   <code>/dev/loop1</code>    BTRFS:</p><br>
<pre><code class="bash hljs">lxc storage create hddpool btrfs size=10GB <span class="hljs-built_in">source</span>=/dev/loop1</code></pre><br>
<p>   <em>Storage Pool</em>  :</p><br>
<pre><code class="bash hljs">lxc storage list<font></font>
<font></font>
+---------+-------------+--------+--------------------------------+---------+<font></font>
|  NAME   | DESCRIPTION | DRIVER |             SOURCE             | USED BY |<font></font>
+---------+-------------+--------+--------------------------------+---------+<font></font>
| hddpool |             | btrfs  | /dev/loop1                     | 0       |<font></font>
+---------+-------------+--------+--------------------------------+---------+<font></font>
| ssdpool |             | btrfs  | /var/lib/lxd/disks/ssdpool.img | 0       |<font></font>
+---------+-------------+--------+--------------------------------+---------+</code></pre><br>
<h3 id="uvelichenie-razmera-storage-pool-navigaciya">  Storage Pool <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h3><br>
<p>  <em>Storage Pool</em>,  ,   .  <em>Storage Pool</em>     BTRFS   :</p><br>
<pre><code class="bash hljs">sudo truncate -s +5G /mnt/work/lxd/hddpool.img<font></font>
sudo losetup -c /dev/loop1<font></font>
sudo btrfs filesystem resize max /var/lib/lxd/storage-pools/hddpool</code></pre><br>
<h3 id="avtovstavka-loopback-fayla-v-slot-loopback-ustroystva-navigaciya"> loopback-   loopback- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h3><br>
<p>     ,    ,  <code>/mnt/work/lxd/hddpool.img</code> ""   <code>/dev/loop1</code>   LXD           .                <code>/dev/loop1</code>    .</p><br>
<p> <em>unit</em>   <em>service</em>  <code>/etc/systemd/system/</code>    SystemD:</p><br>
<pre><code class="bash hljs">cat &lt;&lt; EOF | sudo tee -a /etc/systemd/system/lxd-hddpool.service<font></font>
[Unit]<font></font>
Description=Losetup LXD Storage Pool (hddpool)<font></font>
After=<span class="hljs-built_in">local</span>-fs.target<font></font>
<font></font>
[Service]<font></font>
Type=oneshot<font></font>
ExecStart=/sbin/losetup /dev/loop1 /mnt/work/lxd/hddpool.img<font></font>
RemainAfterExit=<span class="hljs-literal">true</span><font></font>
<font></font>
[Install]<font></font>
WantedBy=<span class="hljs-built_in">local</span>-fs.target<font></font>
EOF</code></pre><br>
<p> :</p><br>
<pre><code class="bash hljs">sudo systemctl <span class="hljs-built_in">enable</span> lxd-hddpool<font></font>
<font></font>
Created symlink /etc/systemd/system/<span class="hljs-built_in">local</span>-fs.target.wants/lxd-hddpool.service → /etc/systemd/system/lxd-hddpool.service.</code></pre><br>
<p>      :</p><br>
<pre><code class="bash hljs">systemctl status lxd-hddpool.service <font></font>
<font></font>
● lxd-hddpool.service - Losetup LXD Storage Pool (hddpool)<font></font>
     Loaded: loaded (/etc/systemd/system/lxd-hddpool.service; enabled; vendor preset: disabled)<font></font>
     Active: active (exited) since Wed 2020-04-08 03:43:53 MSK; 1min 37s ago<font></font>
    Process: 711 ExecStart=/sbin/losetup /dev/loop1 /mnt/work/lxd/hddpool.img (code=exited, status=0/SUCCESS)<font></font>
   Main PID: 711 (code=exited, status=0/SUCCESS)<font></font>
<font></font>
 08 03:43:52 manjaro systemd[1]: Starting Losetup LXD Storage Pool (hddpool)...<font></font>
 08 03:43:53 manjaro systemd[1]: Finished Losetup LXD Storage Pool (hddpool).</code></pre><br>
<p>    ,     <em>active</em>,   ,        ,      <code>RemainAfterExit=true</code>.</p><br>
<h2 id="bezopasnost-privilegii-konteynerov-navigaciya">.   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p>              ,           LXD   , :</p><br>
<ul>
<li><p><strong> </strong> —       UID  GID    ,     . ,      UID  0      ,       UID  0.  , root          ,               .</p><br>
</li>
<li><p><strong> </strong> —        UID  GID    0  65535,           SubUID  SubGID . ,   UID=0         <code>SubUID + UID</code>.   -, ,  -          ,     -     ,   UID/GID.</p><br>
</li>
</ul><br>
<p> ,            SubUID  SubGID.</p><br>
<p>         SubUID  SubGID :</p><br>
<pre><code class="bash hljs">sudo touch /etc{/subuid,/subgid}<font></font>
sudo usermod --add-subuids 1000000-1065535 root <font></font>
sudo usermod --add-subgids 1000000-1065535 root</code></pre><br>
<p>  ,  LXD   :</p><br>
<pre><code class="bash hljs">sudo systemctl restart lxd</code></pre><br>
<h2 id="sozdanie-virtualnogo-kommutatora-seti-navigaciya">    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p>          <code>lxd init</code>     <code>lxdbr0</code>,           LXD   ,     ( , bridge)    .</p><br>
<p>     ( , bridge)      :</p><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/l8/3u/km/l83ukmshtxtanhyi4src9hmnqkm.png"></div><br>
<p>              .           .    ,         ,       .</p><br>
<p>      <code>10.0.5.0/24</code>  IPv4  <code>10.0.5.1/24</code>,    <code>ipv4.nat</code>           NAT:</p><br>
<pre><code class="bash hljs">lxc network create lxdbr0 ipv4.address=10.0.5.1/24 ipv4.nat=<span class="hljs-literal">true</span> ipv6.address=none</code></pre><br>
<p>     LXD:</p><br>
<pre><code class="bash hljs">lxc network list<font></font>
<font></font>
+--------+----------+---------+-------------+---------+<font></font>
|  NAME  |   TYPE   | MANAGED | DESCRIPTION | USED BY |<font></font>
+--------+----------+---------+-------------+---------+<font></font>
| eno1   | physical | NO      |             | 0       |<font></font>
+--------+----------+---------+-------------+---------+<font></font>
| lxdbr0 | bridge   | YES     |             | 0       |<font></font>
+--------+----------+---------+-------------+---------+</code></pre><br>
<p>,           Linux- — <code>ip link</code>  <code>ip addr</code>:</p><br>
<pre><code class="bash hljs">ip addr<font></font>
<font></font>
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000<font></font>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<font></font>
    inet 127.0.0.1/8 scope host lo<font></font>
       valid_lft forever preferred_lft forever<font></font>
    inet6 ::1/128 scope host <font></font>
       valid_lft forever preferred_lft forever<font></font>
2: eno1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000<font></font>
    link/ether bc:ee:7b:5a:6b:44 brd ff:ff:ff:ff:ff:ff<font></font>
    altname enp0s25<font></font>
    inet6 fe80::9571:11f3:6e0c:c07b/64 scope link noprefixroute <font></font>
       valid_lft forever preferred_lft forever<font></font>
3: lxdbr0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000<font></font>
    link/ether c2:38:90:df:cb:59 brd ff:ff:ff:ff:ff:ff<font></font>
    inet 10.0.5.1/24 scope global lxdbr0<font></font>
       valid_lft forever preferred_lft forever<font></font>
    inet6 fe80::c038:90ff:fedf:cb59/64 scope link <font></font>
       valid_lft forever preferred_lft forever<font></font>
5: veth3ddab174@if4: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master lxdbr0 state UP group default qlen 1000<font></font>
    link/ether ca:c3:5c:1d:22:26 brd ff:ff:ff:ff:ff:ff link-netnsid 0</code></pre><br>
<h2 id="profil-konfiguracii-navigaciya">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p>   LXD                <em> </em>.        ,    :</p><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/h5/kp/ur/h5kpur7w4q8qs7q4lti3lkdphdc.png"></div><br>
<p>  ,   LXD   : <code>default</code>, <code>hddpool</code>  <code>hostfs</code>.            ( ).  <code>default</code>   <code>root</code>    <code>pool</code>  <code>ssdpool</code>,             <code>hddpool</code>    <code>pool</code>       <code>default</code>      <code>root</code>   <code>pool</code>  <strong><code>hddpool</code></strong>,   <code>hostfs</code>      .</p><br>
<p>       :</p><br>
<pre><code class="bash hljs">lxc profile list<font></font>
<font></font>
+---------+---------+<font></font>
|  NAME   | USED BY |<font></font>
+---------+---------+<font></font>
| default | 1       |<font></font>
+---------+---------+<font></font>
| hddroot | 0       |<font></font>
+---------+---------+<font></font>
| ssdroot | 1       |<font></font>
+---------+---------+</code></pre><br>
<p>           <code>--help</code>:</p><br>
<pre><code class="bash hljs">lxc profile --<span class="hljs-built_in">help</span><font></font>
<font></font>
Description:<font></font>
  Manage profiles<font></font>
<font></font>
Usage:<font></font>
  lxc profile [<span class="hljs-built_in">command</span>]<font></font>
<font></font>
Available Commands:<font></font>
  add         Add profiles to instances<font></font>
  assign      Assign sets of profiles to instances<font></font>
  copy        Copy profiles<font></font>
  create      Create profiles<font></font>
  delete      Delete profiles<font></font>
  device      Manage instance devices<font></font>
  edit        Edit profile configurations as YAML<font></font>
  get         Get values <span class="hljs-keyword">for</span> profile configuration keys<font></font>
  list        List profiles<font></font>
  remove      Remove profiles from instances<font></font>
  rename      Rename profiles<font></font>
  <span class="hljs-built_in">set</span>         Set profile configuration keys<font></font>
  show        Show profile configurations<font></font>
  <span class="hljs-built_in">unset</span>       Unset profile configuration keys</code></pre><br>
<h3 id="redaktirovanie-profilya-navigaciya">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h3><br>
<p>    <code>default</code>             .         ,                   .  ,             .  ,  ,                /    .</p><br>
<p>       <code>eth0</code>  <code>nic</code>    <code>lxdbr0</code>:</p><br>
<pre><code class="bash hljs">lxc profile device add default eth0 nic network=lxdbr0 name=eth0</code></pre><br>
<p> ,          ,         IP ,              IP .           IP ,          ( )   IP ,     .</p><br>
<p> :</p><br>
<pre><code class="bash hljs">lxc profile show default<font></font>
<font></font>
config: {}<font></font>
description: Default LXD profile<font></font>
devices:<font></font>
  eth0:<font></font>
    name: eth0<font></font>
    network: lxdbr0<font></font>
    <span class="hljs-built_in">type</span>: nic<font></font>
  root:<font></font>
    path: /<font></font>
    pool: ssdpool<font></font>
    <span class="hljs-built_in">type</span>: disk<font></font>
name: default<font></font>
used_by: []</code></pre><br>
<p>     ,           (devices):</p><br>
<ul>
<li><code>eth0</code> —   <code>nic</code>    ( ) <code>lxdbr0</code></li>
<li><code>root</code> —   <code>disk</code>     <code>ssdpool</code></li>
</ul><br>
<h3 id="sozdanie-novyh-profiley-navigaciya">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h3><br>
<p>    <em>Storage Pool</em> ,    <code>ssdroot</code>      <code>disk</code>    <code>/</code> (root)    <em>Storage Pool</em> — <code>ssdpool</code>:</p><br>
<pre><code class="bash hljs">lxc profile create ssdroot<font></font>
lxc profile device add ssdroot root disk path=/ pool=ssdpool</code></pre><br>
<p>,    <code>disk</code>,      <em>Storage Pool</em> — <code>hddpool</code>:</p><br>
<pre><code class="bash hljs">lxc profile create hddroot<font></font>
lxc profile device add hddroot root disk path=/ pool=hddpool</code></pre><br>
<p>  :</p><br>
<pre><code class="bash hljs">lxc profile show ssdroot<font></font>
<font></font>
config: {}<font></font>
description: <span class="hljs-string">""</span><font></font>
devices:<font></font>
  root:<font></font>
    path: /<font></font>
    pool: ssdpool<font></font>
    <span class="hljs-built_in">type</span>: disk<font></font>
name: ssdroot<font></font>
used_by: []</code></pre><br>
<pre><code class="bash hljs">lxc profile show hddroot<font></font>
<font></font>
config: {}<font></font>
description: <span class="hljs-string">""</span><font></font>
devices:<font></font>
  root:<font></font>
    path: /<font></font>
    pool: hddpool<font></font>
    <span class="hljs-built_in">type</span>: disk<font></font>
name: hddroot<font></font>
used_by: []</code></pre><br>
<h2 id="repozitoriy-obrazov-navigaciya">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p>            Linux. ,    ,       .            .</p><br>
<h3 id="udalennye-repozitorii-obrazov-navigaciya">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h3><br>
<p>  LXD        :</p><br>
<ul>
<li><strong>ubuntu:</strong> (for stable Ubuntu images)</li>
<li><strong>ubuntu-daily:</strong> (for daily Ubuntu images)</li>
<li><strong>images:</strong> (for a bunch of other distros)</li>
</ul><br>
<pre><code class="bash hljs">lxc remote list<font></font>
<font></font>
+-----------------+------------------------------------------+--------+--------+<font></font>
|      NAME       |                   URL                    | PUBLIC | STATIC |<font></font>
+-----------------+------------------------------------------+--------+--------+<font></font>
| images          | https://images.linuxcontainers.org       | YES    | NO     |<font></font>
+-----------------+------------------------------------------+--------+--------+<font></font>
| <span class="hljs-built_in">local</span> (default) | unix://                                  | NO     | YES    |<font></font>
+-----------------+------------------------------------------+--------+--------+<font></font>
| ubuntu          | https://cloud-images.ubuntu.com/releases | YES    | YES    |<font></font>
+-----------------+------------------------------------------+--------+--------+<font></font>
| ubuntu-daily    | https://cloud-images.ubuntu.com/daily    | YES    | YES    |<font></font>
+-----------------+------------------------------------------+--------+--------+</code></pre><br>
<p>,  <code>ubuntu:</code>   :</p><br>
<pre><code class="bash hljs">lxc image -c dasut list ubuntu: | head -n 11<font></font>
<font></font>
+----------------------------------------------+--------------+----------+------------+<font></font>
|                   DESCRIPTION                | ARCHITECTURE |   SIZE   |   TYPE     |<font></font>
+----------------------------------------------+--------------+----------+------------+<font></font>
| ubuntu 12.04 LTS amd64 (release) (20150728)  | x86_64       | 153.72MB | CONTAINER  |<font></font>
+----------------------------------------------+--------------+----------+------------+<font></font>
| ubuntu 12.04 LTS amd64 (release) (20150819)  | x86_64       | 152.91MB | CONTAINER  |<font></font>
+----------------------------------------------+--------------+----------+------------+<font></font>
| ubuntu 12.04 LTS amd64 (release) (20150906)  | x86_64       | 154.69MB | CONTAINER  |<font></font>
+----------------------------------------------+--------------+----------+------------+<font></font>
| ubuntu 12.04 LTS amd64 (release) (20150930)  | x86_64       | 153.86MB | CONTAINER  |<font></font>
+----------------------------------------------+--------------+----------+------------+</code></pre><br>
<p>        <code>-c</code>   <code>dasut</code>,       <code>head</code>.</p><br>
<p>     .         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">AlpineLinux</a>:</p><br>
<pre><code class="bash hljs">lxc image -c ldast list images:alpine/3.11<font></font>
<font></font>
+------------------------------+--------------------------------------+--------------+<font></font>
|            ALIAS             |             DESCRIPTION              | ARCHITECTURE |<font></font>
+------------------------------+--------------------------------------+--------------+<font></font>
| alpine/3.11 (3 more)         | Alpine 3.11 amd64 (20200220_13:00)   | x86_64       |<font></font>
+------------------------------+--------------------------------------+--------------+<font></font>
| alpine/3.11/arm64 (1 more)   | Alpine 3.11 arm64 (20200220_13:00)   | aarch64      |<font></font>
+------------------------------+--------------------------------------+--------------+<font></font>
| alpine/3.11/armhf (1 more)   | Alpine 3.11 armhf (20200220_13:00)   | armv7l       |<font></font>
+------------------------------+--------------------------------------+--------------+<font></font>
| alpine/3.11/i386 (1 more)    | Alpine 3.11 i386 (20200220_13:01)    | i686         |<font></font>
+------------------------------+--------------------------------------+--------------+<font></font>
| alpine/3.11/ppc64el (1 more) | Alpine 3.11 ppc64el (20200220_13:00) | ppc64le      |<font></font>
+------------------------------+--------------------------------------+--------------+<font></font>
| alpine/3.11/s390x (1 more)   | Alpine 3.11 s390x (20200220_13:00)   | s390x        |<font></font>
+------------------------------+--------------------------------------+--------------+</code></pre><br>
<h3 id="lokalnyy-repozitoriy-obrazov-navigaciya">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h3><br>
<p>            <code>local:</code>.    ,       <code>lxc image list</code>.   <code>list</code>   ,        — <code>local:</code></p><br>
<pre><code class="bash hljs">lxc image list <span class="hljs-built_in">local</span>:<font></font>
<font></font>
+-------+-------------+--------+-------------+--------------+------+------+<font></font>
| ALIAS | FINGERPRINT | PUBLIC | DESCRIPTION | ARCHITECTURE | TYPE | SIZE |<font></font>
+-------+-------------+--------+-------------+--------------+------+------+</code></pre><br>
<p>      :</p><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>lxc image <strong>alias</strong></td>
<td>Manage image aliases</td>
</tr>
<tr>
<td>lxc image <strong>copy</strong></td>
<td>Copy images between servers</td>
</tr>
<tr>
<td>lxc image <strong>delete</strong></td>
<td>Delete images</td>
</tr>
<tr>
<td>lxc image <strong>edit</strong></td>
<td>Edit image properties</td>
</tr>
<tr>
<td>lxc image <strong>export</strong></td>
<td>Export and download images</td>
</tr>
<tr>
<td>lxc image <strong>import</strong></td>
<td>Import images into the image store</td>
</tr>
<tr>
<td>lxc image <strong>info</strong></td>
<td>Show useful information about images</td>
</tr>
<tr>
<td>lxc image <strong>list</strong></td>
<td>List images</td>
</tr>
<tr>
<td>lxc image <strong>refresh</strong></td>
<td>Refresh images</td>
</tr>
<tr>
<td>lxc image <strong>show</strong></td>
<td>Show image properties</td>
</tr>
</tbody>
</table></div><br>
<p>       <code>images:</code>:</p><br>
<pre><code class="bash hljs">lxc image copy images:alpine/3.11/amd64 <span class="hljs-built_in">local</span>: --<span class="hljs-built_in">alias</span>=alpine3<font></font>
<font></font>
Image copied successfully!</code></pre><br>
<p>         <code>local:</code>:</p><br>
<pre><code class="bash hljs">lxc image -c lfdatsu list <span class="hljs-built_in">local</span>:<font></font>
<font></font>
+---------+--------------+------------------------------------+--------------+<font></font>
|  ALIAS  | FINGERPRINT  |            DESCRIPTION             | ARCHITECTURE |<font></font>
+---------+--------------+------------------------------------+--------------+<font></font>
| alpine3 | 73a3093d4a5c | Alpine 3.11 amd64 (20200220_13:00) | x86_64       |<font></font>
+---------+--------------+------------------------------------+--------------+</code></pre><br>
<h2 id="konfiguraciya-lxd-navigaciya"> LXD <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p>  , LXD      ,       YAML-,  ,        ,            ,     ,     ..       ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"> </a>.</p><br>
<p>   <code>lxc config</code>   ,   . ,  ,            ,       :</p><br>
<pre><code class="bash hljs">lxc config <span class="hljs-built_in">set</span> images.auto_update_cached=<span class="hljs-literal">false</span></code></pre><br>
<h1 id="sozdanie-i-upravlenie-konteynerom-navigaciya">    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h1><br>
<p>     <code>lxc init</code>    <code>:</code>      .       <code>local:</code>    .    ,   ,      .      ,         ,      .</p><br>
<p>       :</p><br>
<pre><code class="bash hljs">lxc init alpine3 alp --storage=hddpool --profile=default --profile=hddroot</code></pre><br>
<p>        :</p><br>
<ul>
<li><code>alpine3</code> —   ()         .         ,         <em>Fingerprint</em>    .</li>
<li><code>alp</code> —    </li>
<li><code>--storage</code> —      <em>Storage Pool</em>   ,    ,     ,     <code>hddroot</code>    ,      <code>hddpool</code>,         <code>lxc profile show hddroot</code></li>
<li><code>--profile</code> —            </li>
</ul><br>
<p> ,    init- :</p><br>
<pre><code class="bash hljs">lxc start alp</code></pre><br>
<p>,    <code>lxc launch</code>     <code>lxc init</code>  <code>lxc start</code>   .</p><br>
<p>  :</p><br>
<pre><code class="bash hljs">lxc list -c ns46tb<font></font>
+------+---------+------------------+------+-----------+--------------+<font></font>
| NAME |  STATE  |       IPV4       | IPV6 |   TYPE    | STORAGE POOL |<font></font>
+------+---------+------------------+------+-----------+--------------+<font></font>
| alp  | RUNNING | 10.0.5.46 (eth0) |      | CONTAINER | hddpool      |<font></font>
+------+---------+------------------+------+-----------+--------------+</code></pre><br>
<p>  :</p><br>
<pre><code class="bash hljs">lxc config show alp<font></font>
<font></font>
architecture: x86_64<font></font>
config:<font></font>
  image.architecture: amd64<font></font>
  image.description: Alpine 3.11 amd64 (20200326_13:39)<font></font>
  image.os: Alpine<font></font>
  image.release: <span class="hljs-string">"3.11"</span>
  image.serial: <span class="hljs-string">"20200326_13:39"</span><font></font>
  image.type: squashfs<font></font>
  volatile.base_image: ebd565585223487526ddb3607f5156e875c15a89e21b61ef004132196da6a0a3<font></font>
  volatile.eth0.host_name: vethb1fe71d8<font></font>
  volatile.eth0.hwaddr: 00:16:3e:5f:73:3e<font></font>
  volatile.idmap.base: <span class="hljs-string">"0"</span>
  volatile.idmap.current: <span class="hljs-string">'[{"Isuid":true,"Isgid":false,"Hostid":1000000,"Nsid":0,"Maprange":65536},{"Isuid":false,"Isgid":true,"Hostid":1000000,"Nsid":0,"Maprange":65536}]'</span>
  volatile.idmap.next: <span class="hljs-string">'[{"Isuid":true,"Isgid":false,"Hostid":1000000,"Nsid":0,"Maprange":65536},{"Isuid":false,"Isgid":true,"Hostid":1000000,"Nsid":0,"Maprange":65536}]'</span>
  volatile.last_state.idmap: <span class="hljs-string">'[{"Isuid":true,"Isgid":false,"Hostid":1000000,"Nsid":0,"Maprange":65536},{"Isuid":false,"Isgid":true,"Hostid":1000000,"Nsid":0,"Maprange":65536}]'</span><font></font>
  volatile.last_state.power: RUNNING<font></font>
devices:<font></font>
  root:<font></font>
    path: /<font></font>
    pool: hddpool<font></font>
    <span class="hljs-built_in">type</span>: disk<font></font>
ephemeral: <span class="hljs-literal">false</span><font></font>
profiles:<font></font>
- default<font></font>
- hddroot<font></font>
stateful: <span class="hljs-literal">false</span>
description: <span class="hljs-string">""</span></code></pre><br>
<p>  <code>profiles</code>   ,        — <code>default</code>  <code>hddroot</code>.   <code>devices</code>      ,          <code>default</code>.  ,          <code>--expanded</code>:</p><br>
<pre><code class="bash hljs">lxc config show alp --expanded<font></font>
<font></font>
architecture: x86_64<font></font>
config:<font></font>
  image.architecture: amd64<font></font>
  image.description: Alpine 3.11 amd64 (20200326_13:39)<font></font>
  image.os: Alpine<font></font>
  image.release: <span class="hljs-string">"3.11"</span>
  image.serial: <span class="hljs-string">"20200326_13:39"</span><font></font>
  image.type: squashfs<font></font>
  volatile.base_image: ebd565585223487526ddb3607f5156e875c15a89e21b61ef004132196da6a0a3<font></font>
  volatile.eth0.host_name: vethb1fe71d8<font></font>
  volatile.eth0.hwaddr: 00:16:3e:5f:73:3e<font></font>
  volatile.idmap.base: <span class="hljs-string">"0"</span>
  volatile.idmap.current: <span class="hljs-string">'[{"Isuid":true,"Isgid":false,"Hostid":1000000,"Nsid":0,"Maprange":65536},{"Isuid":false,"Isgid":true,"Hostid":1000000,"Nsid":0,"Maprange":65536}]'</span>
  volatile.idmap.next: <span class="hljs-string">'[{"Isuid":true,"Isgid":false,"Hostid":1000000,"Nsid":0,"Maprange":65536},{"Isuid":false,"Isgid":true,"Hostid":1000000,"Nsid":0,"Maprange":65536}]'</span>
  volatile.last_state.idmap: <span class="hljs-string">'[{"Isuid":true,"Isgid":false,"Hostid":1000000,"Nsid":0,"Maprange":65536},{"Isuid":false,"Isgid":true,"Hostid":1000000,"Nsid":0,"Maprange":65536}]'</span><font></font>
  volatile.last_state.power: RUNNING<font></font>
devices:<font></font>
  eth0:<font></font>
    name: eth0<font></font>
    network: lxdbr0<font></font>
    <span class="hljs-built_in">type</span>: nic<font></font>
  root:<font></font>
    path: /<font></font>
    pool: hddpool<font></font>
    <span class="hljs-built_in">type</span>: disk<font></font>
ephemeral: <span class="hljs-literal">false</span><font></font>
profiles:<font></font>
- default<font></font>
- hddroot<font></font>
stateful: <span class="hljs-literal">false</span>
description: <span class="hljs-string">""</span></code></pre><br>
<h2 id="ustanovka-staticheskogo-ip-adresa-navigaciya">  IP  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p>    IP     <code>eth0</code>  <code>lxc config device set alp</code>    ,      ,        <code>eth0</code>      <code>default</code>:</p><br>
<pre><code class="bash hljs">lxc config device <span class="hljs-built_in">set</span> alp eth0 ipv4.address 10.0.5.5<font></font>
<font></font>
Error: The device doesn<span class="hljs-string">'t exist</span></code></pre><br>
<p>     IP   <code>eth0</code>   ,            . ,     :</p><br>
<pre><code class="bash hljs">lxc config device add alp eth0 nic name=eth0 nictype=bridged parent=lxdbr0 ipv4.address=10.0.5.5</code></pre><br>
<p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">  LXD 3.21</a>           (bridge network),       <code>network</code>,     <code>nictype</code>  <code>parent</code>:</p><br>
<pre><code class="bash hljs">lxc config device add alp eth0 nic name=eth0 network=lxdbr0 ipv4.address=10.0.5.5</code></pre><br>
<p>   :</p><br>
<pre><code class="bash hljs">lxc restart alp</code></pre><br>
<p>      ,       <code>--expanded</code>     <code>eth0</code>,                  <code>default</code>:</p><br>
<pre><code class="bash hljs">lxc config show alp<font></font>
<font></font>
architecture: x86_64<font></font>
config:<font></font>
  image.architecture: amd64<font></font>
  image.description: Alpine 3.11 amd64 (20200326_13:39)<font></font>
  image.os: Alpine<font></font>
  image.release: <span class="hljs-string">"3.11"</span>
  image.serial: <span class="hljs-string">"20200326_13:39"</span><font></font>
  image.type: squashfs<font></font>
  volatile.base_image: ebd565585223487526ddb3607f5156e875c15a89e21b61ef004132196da6a0a3<font></font>
  volatile.eth0.host_name: veth2a1dc59d<font></font>
  volatile.eth0.hwaddr: 00:16:3e:0e:e2:71<font></font>
  volatile.idmap.base: <span class="hljs-string">"0"</span>
  volatile.idmap.current: <span class="hljs-string">'[{"Isuid":true,"Isgid":false,"Hostid":1000000,"Nsid":0,"Maprange":65536},{"Isuid":false,"Isgid":true,"Hostid":1000000,"Nsid":0,"Maprange":65536}]'</span>
  volatile.idmap.next: <span class="hljs-string">'[{"Isuid":true,"Isgid":false,"Hostid":1000000,"Nsid":0,"Maprange":65536},{"Isuid":false,"Isgid":true,"Hostid":1000000,"Nsid":0,"Maprange":65536}]'</span>
  volatile.last_state.idmap: <span class="hljs-string">'[{"Isuid":true,"Isgid":false,"Hostid":1000000,"Nsid":0,"Maprange":65536},{"Isuid":false,"Isgid":true,"Hostid":1000000,"Nsid":0,"Maprange":65536}]'</span><font></font>
  volatile.last_state.power: RUNNING<font></font>
devices:<font></font>
  eth0:<font></font>
    ipv4.address: 10.0.5.5<font></font>
    name: eth0<font></font>
    nictype: bridged<font></font>
    parent: lxdbr0<font></font>
    <span class="hljs-built_in">type</span>: nic<font></font>
  root:<font></font>
    path: /<font></font>
    pool: hddpool<font></font>
    <span class="hljs-built_in">type</span>: disk<font></font>
ephemeral: <span class="hljs-literal">false</span><font></font>
profiles:<font></font>
- default<font></font>
- hddroot<font></font>
stateful: <span class="hljs-literal">false</span>
description: <span class="hljs-string">""</span></code></pre><br>
<h2 id="dostup-k-konteyneru-navigaciya">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p>    , ,   ,   <code>lxc exec</code>         .       ,  shell ,   ,   (pipe)  ..,           , :</p><br>
<pre><code class="bash hljs">lxc <span class="hljs-built_in">exec</span> alp -- /bin/sh -c <span class="hljs-string">"echo \$HOME"</span></code></pre><br>
<p>      <code>\</code>   <code>$</code>   <code>$HOME</code>     ,      .</p><br>
<p>,     ,      hotkey <code>CTRL+D</code>:</p><br>
<pre><code class="bash hljs">lxc <span class="hljs-built_in">exec</span> alp -- /bin/sh</code></pre><br>
<h2 id="upravlenie-resursami-konteynera-navigaciya">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p> LXD         .        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"> </a>.</p><br>
<h3 id="ogranichenie-resursov-ram-ozu-navigaciya">  RAM () <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h3><br>
<p> <code>limits.memory</code>   RAM   .         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"> </a>.</p><br>
<p>     RAM  256 MB:</p><br>
<pre><code class="bash hljs">lxc config <span class="hljs-built_in">set</span> alp limits.memory 256MB</code></pre><br>
<p>,      :</p><br>
<ul>
<li><code>limits.memory.enforce</code></li>
<li><code>limits.memory.hugepages</code></li>
<li><code>limits.memory.swap</code></li>
<li><code>limits.memory.swap.priority</code></li>
</ul><br>
<p> <code>lxc config show</code>       ,         :</p><br>
<pre><code class="bash hljs">lxc config show alp<font></font>
<font></font>
architecture: x86_64<font></font>
config:<font></font>
  image.architecture: amd64<font></font>
  image.description: Alpine 3.11 amd64 (20200220_13:00)<font></font>
  image.os: Alpine<font></font>
  image.release: <span class="hljs-string">"3.11"</span>
  image.serial: <span class="hljs-string">"20200220_13:00"</span><font></font>
  image.type: squashfs<font></font>
  limits.memory: 256MB<font></font>
  volatile.base_image: 73a3093d4a5ce0148fd84b95369b3fbecd19a537ddfd2e2d20caa2eef0e8fd60<font></font>
  volatile.eth0.host_name: veth75b6df07<font></font>
  volatile.eth0.hwaddr: 00:16:3e:a1:e7:46<font></font>
  volatile.idmap.base: <span class="hljs-string">"0"</span>
  volatile.idmap.current: <span class="hljs-string">'[]'</span>
  volatile.idmap.next: <span class="hljs-string">'[]'</span>
  volatile.last_state.idmap: <span class="hljs-string">'[]'</span><font></font>
  volatile.last_state.power: RUNNING<font></font>
devices: {}<font></font>
ephemeral: <span class="hljs-literal">false</span><font></font>
profiles:<font></font>
- default<font></font>
stateful: <span class="hljs-literal">false</span>
description: <span class="hljs-string">""</span></code></pre><br>
<h3 id="ogranichenie-resursov-cpu-cp-navigaciya">  CPU () <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h3><br>
<p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"> </a>:</p><br>
<ul>
<li><code>limit.cpu</code> —        </li>
<li><code>limits.cpu.allowance</code> —     CFS,     ,       CPU,    </li>
<li><code>limits.cpu.priority</code> —  ,    ,    ,    </li>
</ul><br>
<pre><code class="bash hljs">lxc config <span class="hljs-built_in">set</span> alp limits.cpu.allowance 40%</code></pre><br>
<pre><code class="bash hljs">lxc config show alp<font></font>
<font></font>
architecture: x86_64<font></font>
config:<font></font>
  image.architecture: amd64<font></font>
  image.description: Alpine 3.11 amd64 (20200220_13:00)<font></font>
  image.os: Alpine<font></font>
  image.release: <span class="hljs-string">"3.11"</span>
  image.serial: <span class="hljs-string">"20200220_13:00"</span><font></font>
  image.type: squashfs<font></font>
  limits.cpu.allowance: 40%<font></font>
  limits.memory: 256MB<font></font>
  volatile.base_image: 73a3093d4a5ce0148fd84b95369b3fbecd19a537ddfd2e2d20caa2eef0e8fd60<font></font>
  volatile.eth0.host_name: veth75b6df07<font></font>
  volatile.eth0.hwaddr: 00:16:3e:a1:e7:46<font></font>
  volatile.idmap.base: <span class="hljs-string">"0"</span>
  volatile.idmap.current: <span class="hljs-string">'[]'</span>
  volatile.idmap.next: <span class="hljs-string">'[]'</span>
  volatile.last_state.idmap: <span class="hljs-string">'[]'</span><font></font>
  volatile.last_state.power: RUNNING<font></font>
devices: {}<font></font>
ephemeral: <span class="hljs-literal">false</span><font></font>
profiles:<font></font>
- default<font></font>
stateful: <span class="hljs-literal">false</span>
description: <span class="hljs-string">""</span></code></pre><br>
<h3 id="ogranichenie-diskovogo-prostranstva-navigaciya">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h3><br>
<p>    <code>limits.read</code>, <code>limits.write</code>          (   ZFS  BTRFS):</p><br>
<pre><code class="bash hljs">lxc config device <span class="hljs-built_in">set</span> alp root size=2GB</code></pre><br>
<p> ,   <code>devices.root.size</code>      :</p><br>
<pre><code class="bash hljs">lxc config show alp<font></font>
...<font></font>
devices:<font></font>
  root:<font></font>
    path: /<font></font>
    pool: hddpool<font></font>
    size: 2GB<font></font>
    <span class="hljs-built_in">type</span>: disk<font></font>
ephemeral: <span class="hljs-literal">false</span><font></font>
profiles:<font></font>
- default<font></font>
- hddroot<font></font>
stateful: <span class="hljs-literal">false</span>
description: <span class="hljs-string">""</span></code></pre><br>
<p>           <code>lxc info</code>:</p><br>
<pre><code class="bash hljs">lxc info alp<font></font>
...<font></font>
Resources:<font></font>
  Processes: 5<font></font>
  Disk usage:<font></font>
    root: 1.05GB<font></font>
  CPU usage:<font></font>
    CPU usage (<span class="hljs-keyword">in</span> seconds): 1<font></font>
  Memory usage:<font></font>
    Memory (current): 5.46MB<font></font>
  Network usage:<font></font>
    eth0:<font></font>
      Bytes received: 802B<font></font>
      Bytes sent: 1.59kB<font></font>
      Packets received: 4<font></font>
      Packets sent: 14<font></font>
    lo:<font></font>
      Bytes received: 0B<font></font>
      Bytes sent: 0B<font></font>
      Packets received: 0<font></font>
      Packets sent: 0</code></pre><br>
<p>   ,          2GB,     <code>df</code>     .           .</p><br>
<p> 2         <em>Storage Pool</em> (hddpool):</p><br>
<pre><code class="bash hljs">lxc init alpine3 alp1 --storage=hddpool --profile=default --profile=hddroot<font></font>
lxc init alpine3 alp2 --storage=hddpool --profile=default --profile=hddroot</code></pre><br>
<pre><code class="bash hljs">lxc list<font></font>
+------+---------+------------------+------+-----------+-----------+<font></font>
| NAME |  STATE  |       IPV4       | IPV6 |   TYPE    | SNAPSHOTS |<font></font>
+------+---------+------------------+------+-----------+-----------+<font></font>
| alp1 | RUNNING | 10.0.5.46 (eth0) |      | CONTAINER | 0         |<font></font>
+------+---------+------------------+------+-----------+-----------+<font></font>
| alp2 | RUNNING | 10.0.5.30 (eth0) |      | CONTAINER | 0         |<font></font>
+------+---------+------------------+------+-----------+-----------+</code></pre><br>
<p>       1GB:</p><br>
<pre><code class="bash hljs">lxc <span class="hljs-built_in">exec</span> alp1 -- dd <span class="hljs-keyword">if</span>=/dev/urandom of=file.img bs=1M count=1000</code></pre><br>
<p>,   :</p><br>
<pre><code class="plaintext hljs">lxc exec alp1 -- ls -lh<font></font>
total 1000M  <font></font>
-rw-r--r--    1 root     root     1000.0M Mar 27 10:16 file.img</code></pre><br>
<p>     ,        ,     ,  ,        <em>Storage Volume</em>    <em>Storage Pool</em>:</p><br>
<pre><code class="bash hljs">lxc <span class="hljs-built_in">exec</span> alp2 -- ls -lh<font></font>
total 0</code></pre><br>
<p>      <code>df</code>     :</p><br>
<pre><code class="bash hljs">lxc <span class="hljs-built_in">exec</span> alp1 -- df -hT<font></font>
Filesystem           Type            Size      Used Available Use% Mounted on<font></font>
/dev/loop1           btrfs           9.3G   1016.4M      7.8G  11% /<font></font>
...</code></pre><br>
<pre><code class="bash hljs">lxc <span class="hljs-built_in">exec</span> alp2 -- df -hT<font></font>
Filesystem           Type            Size      Used Available Use% Mounted on<font></font>
/dev/loop1           btrfs           9.3G   1016.4M      7.8G  11% /<font></font>
...</code></pre><br>
<p> <code>/dev/loop1</code>      <em>Storage Pool</em>    ,       .</p><br>
<h3 id="statistika-potrebleniya-resursov-navigaciya">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h3><br>
<p>         :</p><br>
<pre><code class="bash hljs">lxc info alp<font></font>
<font></font>
Name: alp<font></font>
Location: none<font></font>
Remote: unix://<font></font>
Architecture: x86_64<font></font>
Created: 2020/04/08 18:05 UTC<font></font>
Status: Running<font></font>
Type: container<font></font>
Profiles: default, hddroot<font></font>
Pid: 19219<font></font>
Ips:<font></font>
  eth0: inet    10.0.5.5        veth2a1dc59d<font></font>
  eth0: inet6   fe80::216:3eff:fe0e:e271        veth2a1dc59d<font></font>
  lo:   inet    127.0.0.1<font></font>
  lo:   inet6   ::1<font></font>
Resources:<font></font>
  Processes: 5<font></font>
  Disk usage:<font></font>
    root: 495.62kB<font></font>
  CPU usage:<font></font>
    CPU usage (<span class="hljs-keyword">in</span> seconds): 1<font></font>
  Memory usage:<font></font>
    Memory (current): 4.79MB<font></font>
  Network usage:<font></font>
    eth0:<font></font>
      Bytes received: 730B<font></font>
      Bytes sent: 1.59kB<font></font>
      Packets received: 3<font></font>
      Packets sent: 14<font></font>
    lo:<font></font>
      Bytes received: 0B<font></font>
      Bytes sent: 0B<font></font>
      Packets received: 0<font></font>
      Packets sent: 0</code></pre><br>
<h2 id="rabota-so-snepshotami-navigaciya">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p> LXD          .</p><br>
<p>  ,   :</p><br>
<pre><code class="bash hljs">lxc snapshot alp snapshot1</code></pre><br>
<p>  <code>lxc snapshot</code>    <code>list</code>, ,            :</p><br>
<pre><code class="bash hljs">lxc info alp<font></font>
...<font></font>
...<font></font>
Snapshots:<font></font>
  snapshot1 (taken at 2020/04/08 18:18 UTC) (stateless)</code></pre><br>
<p>      <code>lxc restore</code>          :</p><br>
<pre><code class="bash hljs">lxc restore alp snapshot1</code></pre><br>
<p>     .  ,        ,        .   ,         !</p><br>
<pre><code class="bash hljs">lxc delete alp/snapshot1</code></pre><br>
<p>        stateless-.  LXD      — stateful,         .  stateful-      .</p><br>
<h2 id="udalenie-konteynera-navigaciya">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p>     <code>lxc delete</code>,     ,        <code>lxc stop</code>:</p><br>
<pre><code class="bash hljs">lxc stop alp</code></pre><br>
<pre><code class="bash hljs">lxc list<font></font>
<font></font>
+------+---------+-------------------+------+-----------+-----------+<font></font>
| NAME |  STATE  |       IPV4        | IPV6 |   TYPE    | SNAPSHOTS |<font></font>
+------+---------+-------------------+------+-----------+-----------+<font></font>
| alp  | STOPPED | 10.0.5.10 (eth0)  |      | CONTAINER | 0         |<font></font>
+------+---------+-------------------+------+-----------+-----------+</code></pre><br>
<p>    ,     <em>STOPPED</em>,     <em>Storage Pool</em>:</p><br>
<pre><code class="bash hljs">lxc delete alp</code></pre><br>
<h2 id="eksport-konteynerov-navigaciya">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h2><br>
<p>        ,  LXD    :</p><br>
<pre><code class="bash hljs">lxc <span class="hljs-built_in">export</span> alp /backups/alp.tar.gz --instance-only</code></pre><br>
<h1 id="chto-eschyo-navigaciya"> ? <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">^</a></h1><br>
<ul>
<li>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> Jupyter   LXD</a></li>
<li> Python    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">PyLXD</a>   API  LXD</li>
</ul><br>
<hr><br>
<p>UPDATE 10.04.2020 15:00:  <br>
UPDATE 11.04.2020 06:00:         .  !<br>
UPDATE 11.04.2020 07:30:     " LXD"<br>
UPDATE 11.04.2020 08:40:   ,    <br>
UPDATE 14.04.2020 16:10:     </p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en496482/index.html">The development of informed leadership for team management</a></li>
<li><a href="../en496484/index.html">Selection of the importance of features for k-nearest neighbors (well, or other hyperparameters) by descent similar to gradient</a></li>
<li><a href="../en496486/index.html">Opinion: Spamhaus - online censorship or clean web fighters?</a></li>
<li><a href="../en496488/index.html">IaaS providers fight against attacks on BGP protocol</a></li>
<li><a href="../en496490/index.html">We study the Mediastreamer2 VoIP engine. Part 7</a></li>
<li><a href="../en496494/index.html">We play music from Mario on the system speaker</a></li>
<li><a href="../en496496/index.html">Attempting to use AI in a lie detector only exacerbates the problem of fraud recognition</a></li>
<li><a href="../en496498/index.html">We raise our full-fledged Minecraft game server with mini-games. Part 1. Select and install the server</a></li>
<li><a href="../en496500/index.html">COVID-19 in terms of physics</a></li>
<li><a href="../en496502/index.html">Utility for human shadow connecting non-admin to RDP user sessions in WinServer 2012R2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>