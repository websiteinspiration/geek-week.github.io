<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ ๐ง๐ฝ โฅ๏ธ ูุฑุงูุจุฉ ุงูุฃุฎุทุงุก ูุงูุฃุญุฏุงุซ ูู ุณุฌู PostgreSQL (grok_exporter) ๐๐ฝ โ ๐๐ฟ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุณุงุก ุงูุฎูุฑ ุฒููุงุฆู ู habretchiki! ุงูููู ุ ุฃูุฏ ุฃู ุฃุดุงุฑู ูุนู ููุงุญุธุฉ ุตุบูุฑุฉ ุญูู ููููุฉ ุชูุธูู ุงููุฑุงูุจุฉ ุงูุชุดุบูููุฉ ููุฃุฎุทุงุก ูุงูุฃุญุฏุงุซ ุงูุชู ุชุธูุฑ ูู ุณุฌู PostgreSQL...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ูุฑุงูุจุฉ ุงูุฃุฎุทุงุก ูุงูุฃุญุฏุงุซ ูู ุณุฌู PostgreSQL (grok_exporter)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487302/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุงุก ุงูุฎูุฑ ุฒููุงุฆู ู habretchiki! </font><font style="vertical-align: inherit;">ุงูููู ุ ุฃูุฏ ุฃู ุฃุดุงุฑู ูุนู ููุงุญุธุฉ ุตุบูุฑุฉ ุญูู ููููุฉ ุชูุธูู ุงููุฑุงูุจุฉ ุงูุชุดุบูููุฉ ููุฃุฎุทุงุก ูุงูุฃุญุฏุงุซ ุงูุชู ุชุธูุฑ ูู ุณุฌู PostgreSQL ุจุงุณุชุฎุฏุงู Prometheus ููุตุฏุฑ ุงูููุงููุณ grok_exporter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฌุจ ุฃู ุฃููู ุนูู ุงูููุฑ ุฃู ูุฐู ุจุงูุทุจุน ุญุงูุฉ ุฎุงุตุฉ ูุงุณุชุฎุฏุงู ูุฐุง ุงููุตุฏุฑ. </font><font style="vertical-align: inherit;">ูููุงุฐุง ูู ูุทููุจ ููู ุงูุฐู ูุฏ ูููู ููุชูุงุ</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุฏูุฉ</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุญุชุงุฌ ูุฐุงุ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูุงู Prometheus ููุฌูุฏูุง ุจุงููุนู ูู ุจููุชู ุงูุฃุณุงุณูุฉ ูุฃู ุฅูุดุงุก ุจููุฉ ุฃุณุงุณูุฉ ูููุตูุฉ ูุฌูุน ูุชุญููู ุงูุณุฌูุงุช ุ ูุซู ELK ุฃู Greylog ุ ูุนุฏ ูููููุง ูุบูุฑ ุนููู (ุฅุฐุง ูู ููู ููุงู Prometheus ุ ููุฐุง ููุณ ูุดููุฉ ุ ููู ุณูู ูุณุฑูุน ุงูุชุซุจูุช). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณุชููู ุงูุฃุฏุงุฉ ูููุฏุฉ ููุณ ููุท ูู DBAs ุ ูููู ุฃูุถูุง ููุณุคููู ุงูุชุทุจูู ุ ุจุดูู ุนุงู ุ ูุฌููุน ุฃููุฆู ุงูุฐูู ูุนูููู ุจุทุฑููุฉ ูุง ูุน ุณุฌูุงุช ุงูุชุทุจูู. </font><font style="vertical-align: inherit;">ูุณูุญ ูู ุจุงูุญุตูู ุจุณุฑุนุฉ ุนูู ูุนูููุงุช ุญูู ุงูุณููู ุงููุณุชูู ููุฏูู ููุทุฉ ูุฑุฌุนูุฉ ูุนููุฉ ููุฒูุฏ ูู ุงูุชุญููู ูููููู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูู ูุฐุงุ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุณูุญ ูู ุณุฌูุงุช ุงููุฑุงูุจุฉ ุจุงูุญุตูู ุนูู ุตูุฑุฉ ุฃูุซุฑ ุงูุชูุงูุงู ูุงูุงุณุชุฌุงุจุฉ ุจุณุฑุนุฉ ุฃูุจุฑ ูููุดููุงุช ุงููุงุดุฆุฉ ุ ุณูุงุก ูุงูุช ูุญุงููุงุช ุงูุชูููุถ (ุจูุง ูู ุฐูู ุงููุญุงููุงุช ุบูุฑ ุงููุงุฌุญุฉ) ุ ุฃู ุงูุฃุฎุทุงุก ุงููุฎุชููุฉ ุ ุฃู ุงูุฃุญุฏุงุซ ุงููุญุฏุฏุฉ. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุฆูุฉ ุฌูุฏุฉ ููุง ุ ุชู ุชุดููููุง ุญุณุจ ูุฆุงุช ุงูุฃุญุฏุงุซ (ุงูุธุฑ ูุณู ุณุฌู ุฃุญุฏุงุซ ุงูุญุฏุซ) ุ ูููู ุงุณุชุฎุฏุงููุง ูุฅูุดุงุก ููุงุนุฏ ูู Prometheus.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grok_exporter</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูุญ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุงููุตุฏุฑ ุงููุชุฑู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">grok_exporter</font></a><font style="vertical-align: inherit;"> ูุฑุงุกุฉ ุงูุจูุงูุงุช ุบูุฑ ุงูููุธูุฉ ูู ุงููุตุฏุฑ ุ ูุชุญููููุง ุฅูู ุจูุงูุงุช ููุธูุฉ ุ ููููุง ููููุงุนุฏ ุ ูุฅุนุทุงุฆูุง ูููุงููุณ ุจุชูุณูู ููููู ุจุฑูููุซููุณ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชู ุฅูุดุงุก ุงููุตุฏุฑ ูู ุตูุฑุฉ ูููู ุฅุถุงูู ูู ELK </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=http://" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plugins-filters-grok</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุฐู ูุณูุญ ูู ุจุงุณุชุฎุฏุงู ูุฌููุนุฉ ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงูุจ plugins-filters-grok</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุง ูู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุฑููุจ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชุซุจูุช ุณูู ูุจุณูุท. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูุง ุนููู ุณูู ุงุชุจุงุน </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑุงุจุท</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชูุฒูู ุงูุฅุตุฏุงุฑ ุงูุฐู ูุนุฌุจู (ููุนู ุฃููุง ูููุง ูุจู ุงูุฅุตุฏุงุฑ ุ ููุง ุชุฒุงู ุฃุญุฏุซ ุงูุฅุตุฏุงุฑุงุช ูู ูุฑุญูุฉ ูุฑุดุญ ุงูุฅุตุฏุงุฑ) ููู ุถุบุท ุงูุฃุฑุดูู ุงููุงุชุฌ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชูุฌุฉ ูุฐูู ุ ูุญุตู ุนูู ุงููุฌููุนุฉ ุงูุชุงููุฉ:</font></font><br>
<br>
<pre><code class="plaintext hljs">grok_exporter-1.0.0.RC3.linux-amd64<font></font>
โโโ patterns<font></font>
โ&nbsp;&nbsp; โโโ ruby<font></font>
โ&nbsp;&nbsp; โโโ redis<font></font>
โ&nbsp;&nbsp; โโโ rails<font></font>
โ&nbsp;&nbsp; โโโ postgresql<font></font>
โ&nbsp;&nbsp; โโโ nagios<font></font>
โ&nbsp;&nbsp; โโโ mongodb<font></font>
โ&nbsp;&nbsp; โโโ mcollective-patterns<font></font>
โ&nbsp;&nbsp; โโโ mcollective<font></font>
โ&nbsp;&nbsp; โโโ linux-syslog<font></font>
โ&nbsp;&nbsp; โโโ junos<font></font>
โ&nbsp;&nbsp; โโโ java<font></font>
โ&nbsp;&nbsp; โโโ haproxy<font></font>
โ&nbsp;&nbsp; โโโ grok-patterns<font></font>
โ&nbsp;&nbsp; โโโ firewalls<font></font>
โ&nbsp;&nbsp; โโโ exim<font></font>
โ&nbsp;&nbsp; โโโ bro<font></font>
โ&nbsp;&nbsp; โโโ bacula<font></font>
โ&nbsp;&nbsp; โโโ aws<font></font>
โโโ grok_exporter<font></font>
โโโ example<font></font>
    โโโ exim-rejected-RCPT-examples.log<font></font>
    โโโ config.yml<font></font>
    โโโ config_logstash_http_input_ipv6.yml<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูู:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grok_exporter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุงููุตุฏุฑ ุงููุงุจู ููุชูููุฐ</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููุงุท</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุชุญุชูู ุนูู ูุฌููุนุฉ ูู ุงูุฃููุงุท</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซุงู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูุญุชูู ุนูู ูุฌููุนุฉ ุจูุงูุงุช ุงุฎุชุจุงุฑ ููุซุงู ููู ุงูุชูููู</font></font></li>
</ul><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุฏุก ุงููุตุฏุฑ ุ ููุท ูู ุจุชุดุบูู ุงูููู ุงููุงุจู ููุชูููุฐ. </font><font style="vertical-align: inherit;">ูุชู ุงูุจุญุซ ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชูููู </font><b><font style="vertical-align: inherit;">config.yml</font></b><font style="vertical-align: inherit;"> ูู ุงูุฏููู ูู ุญูุซ ูุชู ุชุดุบูู ุงูุชุทุจูู ุฃู ูุชู ุชุญุฏูุฏ ูููุนู ุจูุงุณุทุฉ ุงูุฎูุงุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-config</font></font></b></p><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุนุฏุงุฏ ูุงูุชุญุถูุฑ ููุนูู</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL</font></font></h3><br>
<p>,      PostgreSQL.  :</p><br>
<ol>
<li>     grok_exporter    .    ,   pg_reload_conf. <br>
<br>
<ul>
<li> <pre><code class="sql hljs"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">system</span> <span class="hljs-keyword">set</span> log_directory <span class="hljs-keyword">to</span> <span class="hljs-string">'/var/log/postgresql'</span>; </code></pre></li>
<li> <pre><code class="sql hljs"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">system</span> <span class="hljs-keyword">set</span> log_file_mode <span class="hljs-keyword">to</span> <span class="hljs-string">'0644'</span>;</code></pre> </li>
</ul></li>
<li> log_line_prefix,  .      ,    .  : <br>
<br>
<pre><code class="sql hljs"> <span class="hljs-keyword">alter</span> <span class="hljs-keyword">system</span> <span class="hljs-keyword">set</span> log_line_prefix <span class="hljs-keyword">to</span> <span class="hljs-string">'%t datname:%d,client:%h,app:%a,usename:%u,session:%c '</span>;</code></pre></li>
</ol><br>
<h3>grok_exporter</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุณูููู ุจุชุญุฑูุฑ ูููุฐุฌ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููุงุท / postgresql</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููุง ูุชูุณูู ููู ุงูุณุฌู ุงูุฎุงุต ุจูุง ูุฅุถุงูุฉ ุงูุฅูุดุงุกุงุช ุงูุฅุถุงููุฉ. </font><font style="vertical-align: inherit;">ุฃุคูุฏ ูุฑุฉ ุฃุฎุฑู ุฃู ุจููุฉ ุงูููุงูุจ ุชุชูุงูู ุชูุงููุง ูุน ุชูู ุงููุณุชุฎุฏูุฉ ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plugins-filters-grok</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุจุงูุชุงูู ุ ุจุงููุณุจุฉ ูุฌููุน ุงููุดููุงุช ุงููุชุนููุฉ </font><b><font style="vertical-align: inherit;">ุจุจูุงุก</font></b><font style="vertical-align: inherit;"> ุงูุฌููุฉ ุ ููููู ููุฌุจ ุนููู ุงูุฐูุงุจ ุฅูู ูุซุงุฆููุง. </font><font style="vertical-align: inherit;">ูุฐุง ุ ุฏุนูุง ูุญุถุฑ ูุงูุจ PostgreSQL ุฅูู ุงููููุฐุฌ ( </font><font style="vertical-align: inherit;">ูุญุชูู </font><font style="vertical-align: inherit;">ููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููุงุท / grok-pattern</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงููุนู ุนูู ูุฌููุนุฉ ูุจูุฑุฉ ูู ุงูููุงูุจ ุงูุฃุณุงุณูุฉ):</font></font><br>
<br>
<pre><code class="plaintext hljs">#     - postgresql<font></font>
PG_TIMESTAMP %{YEAR}-%{MONTHNUM}-%{MONTHDAY} %{HOUR}:%{MINUTE}:%{SECOND} [A-Z]{3,4}<font></font>
<font></font>
#    <font></font>
PG_ERROR_PATTERN (ERROR|WARNING|FATAL|PANIC)<font></font>
<font></font>
# log_line_prefix   - PostgreSQL<font></font>
PG_PREFIX %{PG_TIMESTAMP} datname:(%{DATA:datname})?,client:(%{DATA:client_host})?,app:(%{DATA:app_name})?,usename:(%{USER:usename})?,session:(%{DATA:session})?<font></font>
<font></font>
#    log_level     <font></font>
PG_ERROR_LEVEL %{PG_ERROR_PATTERN:log_level}:<font></font>
<font></font>
#    <font></font>
PG_EVENT_AUTH LOG:  connection authorized:<font></font>
<font></font>
#      SIGHUP,   <font></font>
PG_EVENT_RELOAD LOG:  received SIGHUP, reloading configuration files<font></font>
</code></pre><br>
<p><font style="vertical-align: inherit;"></font><code>()?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุญ ูู </font><font style="vertical-align: inherit;">ุงูุชุตููู </font><font style="vertical-align: inherit;">ุจุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุงููููุฉ ุงุฎุชูุงุฑูุฉ.</font></font></p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ุ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุชูุงุตูู ูุงููุฉ ุ ูุน ุฃูุซูุฉ ุ ูุชู ูุตู ุนูููุฉ ุฅูุดุงุก ููู ุงูุชูููู. </font><font style="vertical-align: inherit;">ุฃุฏูุงู ุ ูุชู ุฅุนุทุงุก ูุง ุณูุชู ุงุณุชุฎุฏุงูู ููุท.</font></font></p><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตู ููุฌุฒ ูููู ุงูุชูููู (ูู ุงููุซุงุฆู)</font></font></b>
                        <div class="spoiler_text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุงูุชูููู ูู ููู ุจุชูุณูู YAML ูููุณูู ุฅูู ุฃูุณุงู:</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนุงูููุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฅุนุฏุงุฏุงุช ุงูุนููููุฉ -</font></font><br>
<ul>
<li><b>config_version</b> โ   .    grok_exporter,   โฅ 1.0.0.RC3,   3<br>
 <b>retention_check_interval</b> โ    .    ,   .<br>
</li>
</ul><br>
</li>
<li><b>input</b> โ         .<br>
<br>
<ul>
<li><b>type</b> โ   .  : file, stdin, webhook.   ,    <b>file</b>;</li>
<li><b>path|paths</b> โ c      -(-).   ;</li>
<li><b>readall</b> โ ,       .<br>
  <b>true</b> โ     ,     .       Prometheus . <br>
  <b>false</b> โ      ,        grok_exporter;</li>
<li><b>fail_on_missing_logfile</b> โ       -.  <b>true</b> โ    ,    ;</li>
</ul></li>
<li><b>imports</b> โ ,   ,          .    2,    ,   <b>grok</b>.<br>
<br>
<ul>
<li><b>type</b> โ     <b>grok_patterns</b> ()  metrics ();</li>
<li><b>file|dir</b> โ  .          , .</li>
</ul><br>
</li>
<li><b>grok_patterns</b> โ ,         .</li>
<li><b>metrics</b> โ    .   โ counter, gauge, histogram, or summary.</li>
<li><b>server</b> โ    <br>
<br>
<pre><code class="plaintext hljs">  protocol: https<font></font>
  host: localhost<font></font>
  port: 9144<font></font>
  path: /metrics<font></font>
  cert: /path/to/cert<font></font>
  key: /path/to/key<font></font>
</code></pre><br>
 </li>
</ol><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุตูุบุฉ ุงูุฅุตุฏุงุฑ ุงูุซุงูุซ ูู ููู ุงูุชูููู ุ ุฃุตุจุญ ูู ุงููููู ุงุณุชูุฑุงุฏ ุงูููุงููุณ ูู ุงููููุงุช ุงููุฑุฏูุฉ ุ ููุฐุง ุณูุณูุญ ูู ุจุชุฌููุน ุงูููุงููุณ ุญุณุจ ุงูุบุฑุถ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ูู ุจุฅูุดุงุก </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชูููู </font><b><font style="vertical-align: inherit;">config.yml</font></b><font style="vertical-align: inherit;"> ุงูุฃุณุงุณู </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ุฐูู ุ ูุญู: ุชุนููู ุงููุณุงุฑ ุฅูู ูููุงุช ุงูุณุฌู PostgreSQL ุจูุงุณุทุฉ ุงูููุงุน. </font><font style="vertical-align: inherit;">ุงุณุชูุฑุงุฏ ููุงูุจ ูู ุฏููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููุงุท</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงูููุงููุณ ูู ุฏููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metrics.d</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font><font style="vertical-align: inherit;">ูุดูุฑ ุฅูู ุฃู ุจุฑูุชูููู ูุนูู ุฃู ูููุฐ ูู ุงูุถุฑูุฑู ุชุทุจูู ุงูููุงููุณ.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">config.yml</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">  config_version: 3<font></font>
  retention_check_interval: 10s<font></font>
input:<font></font>
  type: file<font></font>
  path: /var/log/postgresql/postgresql-*.log<font></font>
  readall: false<font></font>
imports:<font></font>
- type: grok_patterns<font></font>
  dir: ./patterns<font></font>
- type: metrics<font></font>
  dir: ./metrics.d<font></font>
server:<font></font>
  protocol: http<font></font>
  port: 9144<font></font>
</code></pre><br>
</div>
                    </div><br>
<p>,   <b>metrics.d</b>      <b>postgresql.yml</b>,       .<br>
<br>
 ,       , ..       (  retention, - 2  30 )    ,    .        <b>retention_check_interval</b>.<br>
<br>
 ,  :<br>
<br>
</p><ul>
<li>       ,        ;</li>
<li>     โ   GAUGE  COUNTER,   . ..     GAUGE,         ;</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุชู ุชุนููู ุงูุชุฑุงููู ุนูู "ุตูุงุจ" ุ ูุณูุชู ุฌูุน ููู ุงูููุงููุณ ุงูุชู ููุง ููุณ ูุฌููุนุฉ ุงูุชุณููุงุช ุ ููู ุงูุณููู ุงููุชููุน. </font><font style="vertical-align: inherit;">ูุฏ ุชูุดุฃ ุญุงูุฉ ุบูุฑ ูุชููุนุฉ ุนูุฏูุง ููููู ุ ุนูุฏ ุงูุทูุจ ุงูุซุงูู ุ ุงูุญุตูู ุนูู ูุฌููุน ุงูููู ูู ุงูุทูุจ ุจุงูุฅุถุงูุฉ ุฅูู ุงููููุฉ ุงูุณุงุจูุฉ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุชู ุชุนููู ุงูุชุฑุงููู ุนูู ุฎุทุฃ ุ ุฅุฐุง ูุงูุช ููุงู ููุงููุณ ุจููุณ ูุฌููุนุฉ ุงูุชุณููุงุช ุ ูุณูุชู ุนุฑุถ ุงููููุฉ ุงูุฃุฎูุฑุฉ ููุท ุ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงุชุถุญ ุงููุซูุฑ ูู ุงูุฑุณุงุฆู ุ ูุฑุจูุฉ ูุบูุฑ ูููููุฉ ูู ุงูุฃูุงูู ุ ูููู ุณุฃุญุงูู ุงููุดู ุนู ูุฐุง ูู ุงูุฃูุซูุฉ ุฃุฏูุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุฐุง ุ ูุฏููุง ููู ุชููุฆุฉ ููููู ุนุฑุถ ุฃุฑุจุนุฉ ููุงููุณ ูุซูุงุซุฉ ุนุฏุงุฏุงุช ููููุฉ ุงุนุชุจุงุทูุฉ ูุงุญุฏุฉ. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ุฃูู ุซูุงุซุฉ ููุธุฑูู ูู ุนุฏุฏ ุงูุชุทุงุจูุงุช ูู ุญูู ูุงูุจ ุงููุทุงุจูุฉ ูุน ุงูุณูุงุณู ุงููุณุชููุฉ ูู ุงููุตุฏุฑ ุ ูุงูุฑุงุจุน - ูุนุฑุถ ูุฌููุน ุงูููู.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">postgresql.yaml</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">#  - <font></font>
- type:   counter<font></font>
  name:   pg_grok_error_count<font></font>
  help:   Count of line error<font></font>
  match:  '%{PG_PREFIX} %{PG_ERROR_LEVEL}  %{GREEDYDATA:message}'<font></font>
  labels:<font></font>
    log_level:   '{{.log_level}}'<font></font>
    usename:     '{{.usename}}'<font></font>
    datname:     '{{.datname}}'<font></font>
    app_name:    '{{.app_name}}'<font></font>
    client_host: '{{.client_host}}'<font></font>
    message:     '{{.message}}'<font></font>
<font></font>
#   <font></font>
- type:   counter<font></font>
  name:   pg_grok_auth_succes_count<font></font>
  help:   Count of connections authorized<font></font>
  match:  '%{PG_PREFIX} %{PG_EVENT_AUTH}'<font></font>
  labels:<font></font>
    usename:     '{{.usename}}'<font></font>
    datname:     '{{.datname}}'<font></font>
    app_name:    '{{.app_name}}'<font></font>
    client_host: '{{.client_host}}'<font></font>
<font></font>
#   <font></font>
- type:   counter<font></font>
  name:   pg_grok_reload_conf_count<font></font>
  help:   Count of call pg_reload_conf<font></font>
  match:  '%{PG_PREFIX} %{PG_EVENT_RELOAD}'<font></font>
  labels:<font></font>
    session:     '{{.session}}'<font></font>
<font></font>
#   <font></font>
- type:       gauge<font></font>
  name:       pg_grok_tpm_file_size_bytes<font></font>
  help:       Size of tmp file created by time<font></font>
  match:      '%{PG_PREFIX} %{PG_EVENT_TMP_FILE}'<font></font>
  value:      '{{.size}}'<font></font>
  cumulative: true<font></font>
  retention:  5s<font></font>
  labels:<font></font>
    static:     'temp_file'<font></font>
</code></pre><br>
</div>
                    </div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฑุณุฉ</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pg_grok_error_count</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุณุจ ุงููููุงุณ ุนุฏุฏ ุงูุฃุญุฏุงุซ ุงูุฎุทุฃ ุ ูุงูุชุญุฐูุฑ ุ ูุงููุงุชู ุ ูุงูุฐุนุฑ ุ ููููุง ููููุท. </font><font style="vertical-align: inherit;">ูููู ุฃู ุชููู ูููุฏุฉ ููุฑุตุฏ ูุงูุชุญุฐูุฑ ูู ุญุงูุฉ ุงูุทูุงุฑุฆ. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุชูููู ุชูุจูู ูู ุงูุญุงูุงุช ุงูุชุงููุฉ: ูุญุงููุงุช ุงูุชูููุถ ุบูุฑ ุงููุงุฌุญ ุ ุฃู ุชุฌุงูุฒ ุนุชุจุฉ ุนุฏุฏ ุงูุฃุฎุทุงุก ููู ูุญุฏุฉ ุฒูููุฉ ุ ุฃู ุนูุฏูุง ุชููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุญุงูุฉ ุงุณุชุฑุฏุงุฏ ุจุนุฏ ุงููุดู ุ ูุฃูุซุฑ ูู ุฐูู ุจูุซูุฑ ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Log Event Categories</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุณุจูู ุงููุซุงู ุ ุณูููู ุจุฅุนุฏุงุฏ ุชูุจูู ุญูู ูุญุงููุงุช ุงูุชูููุถ ุงููุงุดูุฉ. </font><font style="vertical-align: inherit;">ูุจุฏู ูุซุงูุงู ููุญุงููุฉ ุชุณุฌูู ุฏุฎูู ูุงุดูุฉ ูู ููู ุณุฌู PostgreSQL ููุง ููู:</font></font><br>
<br>
<pre><code class="plaintext hljs">2020-04-20 23:34:53 AEST datname:test,client:127.0.0.1,app:[unknown],usename:test_user,session:5e9da4fd.733 FATAL:  password authentication failed for user "test_user"<font></font>
2020-04-20 23:34:53 AEST datname:test,client:127.0.0.1,app:[unknown],usename:test_user,session:5e9da4fd.733 DETAIL:  Password does not match for user "test_user".<font></font>
        Connection matched pg_hba.conf line 86: "host    all             all             127.0.0.1/32            md5"<font></font>
</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฅุฎุฑุงุฌ grok_exporter ุ ูููู ุชุญุฏูุฏ ูุญุงููุงุช ุงููุตุงุฏูุฉ ุงููุงุดูุฉ ูู ุฎูุงู ุชุณููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑุณุงูุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดูุช ูู ูุตุงุฏูุฉ ูููุฉ ูุฑูุฑ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุณูุณูุฉ ุงููุฑุนูุฉ </font><b><font style="vertical-align: inherit;">ูู ...</font></b><font style="vertical-align: inherit;"> :</font></font><br>
<br>
</p><pre><code class="plaintext hljs">pg_grok_error_count{app_name="[unknown]",client_host="127.0.0.1",datname="postgres",log_level="FATAL",message="password authentication failed for user "postgres"", usename="postgres"} 15<font></font>
pg_grok_error_count{app_name="[unknown]",client_host="127.0.0.1",datname="test",log_level="FATAL",message="password authentication failed for user \"test_user\"",usename="test_user"} 5<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณุชุณุงุนุฏ ุงูุจูุงูุงุช ุงูุชู ุชู ุงูุญุตูู ุนูููุง ูู ุตูุงุบุฉ ูุงุนุฏุฉ ูุจุฑูููุซููุณ. </font><font style="vertical-align: inherit;">ูููู ุชุนุฏูู ุงูุญุณุงุณูุฉ ุจูุงุกู ุนูู ุญูุงุฆูู ุงูุฎุงุตุฉ.</font></font><br>
<br>
<pre><code class="plaintext hljs">groups:<font></font>
- name: AuthAlert<font></font>
  rules:<font></font>
  - alert: AuthFail<font></font>
    expr: sum(rate(pg_grok_error_count{message=~"password authentication failed for user.*"}[1m])) by (instance) &gt; 0.1<font></font>
    for: 30s<font></font>
    labels:<font></font>
      severity: warning<font></font>
    annotations:<font></font>
      summary: Too many fail authorization for {{ $labels.instance }}<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pg_grok_reload_conf_count</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุงููุซู ุ ููููู ุชุชุจุน ุชูููุฐ ุงูุฃูุฑ pg_reload_conf. </font><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ูุฌุฏุฑ ุงูุงูุชุจุงู ุฅูู ูุงุฆูุฉ ุงูุชุณููุงุช ุ ุฃู ุจุงูุฃุญุฑู ุญูููุฉ ุงุณุชุฎุฏุงู ุชุณููุฉ ุฌูุณุฉ ูุงุญุฏุฉ ููุท. </font><font style="vertical-align: inherit;">ูุฐุง ูุฑุฌุน ุฅูู ุญูููุฉ ุฃู ุงูุญุฏุซ ูุชู ุฅูุดุงุคู ูุฌุฒุก ูู ุนูููุฉ ุงูุฎุงุฏู ุ ูููุณ ุฌูุณุฉ ุงููุณุชุฎุฏู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ููู ุณุฌู PostgreSQL ุ ูุจุฏู ูุฐุง ุงูุญุฏุซ ููุง ููู:</font></font><br>
<br>
<pre><code class="plaintext hljs">2020-04-21 01:20:26 AEST datname:,client:,app:,usename:,session:5e9d9371.564 LOG:  received SIGHUP, reloading configuration files
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุฆู. </font><font style="vertical-align: inherit;">ูููู ููุงุญุธุฉ ุฃู ุงูุชุณููุงุช ุงููุณุชุฎุฏูุฉ ูู ุงููุซุงู ุงูุณุงุจู ูุงุฑุบุฉ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ุณูู ูุณุชุฎุฏู ูุนุฑู ุงูุฌูุณุฉ ูุชุญุฏูุฏ ุงููููุฉ ุ ููู ูุชุบูุฑ ุญุชู ูุชู ุฅููุงู ุฃู ุฅุนุงุฏุฉ ุชุดุบูู ูุซูู PostgreSQL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูููู ูููู ููุงุซู ูุญุงูุงุช ููุงุซูุฉ ุฃุฎุฑู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅููุงู ูุซูู:</font></font><br>
<br>
<pre><code class="plaintext hljs">2020-04-21 01:32:52 AEST datname:,client:,app:,usename:,session:5e9d9371.564 LOG:  received fast shutdown request<font></font>
2020-04-21 01:32:53 AEST datname:,client:,app:,usename:,session:5e9d9371.564 LOG:  database system is shut down<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฅุฎุฑุงุฌ grok_exporter ูุญุตู ุนูู:</font></font><br>
<br>
<pre><code class="plaintext hljs"># HELP pg_grok_reload_conf_count Count of call pg_reload_conf<font></font>
# TYPE pg_grok_reload_conf_count counter<font></font>
pg_grok_reload_conf_count{session="5e9d9371.564"} 5<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุนุฏุฉ ุงูุฅุฎุทุงุฑ ุ ูุง ูุงุฆุฏุฉ ูู ุทุฑุญูุง ุ ุณุชููู ููุงุซูุฉ ูุชูู ุงูุชู ูููุดุช ุฃุนูุงู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pg_grok_tpm_file_size_bytes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุจุงูุญุฌุฒ ุนูู ุงูููุฑ ุจุฃู ูุฐุง ุงููุซุงู ูู ูุฆุฉ "ุญุตุงู ูุฑูู ูู ูุฑุงุบ" ููุชู ุฅุนุทุงุคู ุฅูู ุญุฏ ุฃูุจุฑ ูู ุฃุฌู ุฅุธูุงุฑ ููู ููููู ุชุบููุฑ ุณููู ุงูููุงููุณ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุงุณ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุงููุณ ูููู ุฃู ูุชุฃุซุฑ ุชุบููุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุญุชูุงุธ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุฑุงูููุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุนููุงุช </font><font style="vertical-align: inherit;">. ูู ุงููุงูุน ุ ุนูู ุนูุณ ุงูุนุฏุงุฏ ุงูุนุงุฏู ุ ุงูุฐู ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุนุฏุฏ ุงูุฃุณุทุฑ ุงูุชู ุชุชุทุงุจู ูุน ููุท ุงููุทุงุจูุฉ ุ ูุณูุญ ูู ุงููููุงุณ ุจุงูุนูู ุนูู ุงูุจูุงูุงุช ูู ููู ุงูุณุฌู. ุงุชุถุญ ุฃูู ูููููุง ุชุฑุงูููุง ุนู ุทุฑูู ุฒูุงุฏุฉ ุฃู ุชูููู ุงููููุฉ ุงูุชู ุชู ุงูุญุตูู ุนูููุง ุ ุฃู ุงุณุชุฎุฏุงููุง ููููุฉ ูุชุบูุฑุฉ ุจุดูู ุชุนุณูู. ูุจุงูุชุงูู ุ ูู ุงูุญุงูุฉ ุงูุฃููู ุ ุณูููู ููุชููู ุจุญุฌู ุงูุฒูุงุฏุฉ ุ ูู ุงูุญุงูุฉ ุงูุซุงููุฉ - ุงููููุฉ ูู ุญุฏ ุฐุงุชูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุจุนุถ ุงูุฃูุซูุฉ:</font></font><br>
<br>
<ol>
<li>    ,     (<b>cumulative: true</b>).      ,    ,     .     ,  <b>retention_check_interval + retention &lt;= scrape_interval</b> โ        Prometheus.<br>
<br>
        - PostgreSQL  :<br>
<br>
<pre><code class="plaintext hljs">2020-04-21 02:51:15 AEST datname:,client:,app:,usename:,session:5e9dd2f3.1278 LOG:  temporary file: path "base/pgsql_tmp/pgsql_tmp4728.0", size 46931968<font></font>
2020-04-21 02:51:15 AEST datname:,client:,app:,usename:,session:5e9dd2f3.1279 LOG:  temporary file: path "base/pgsql_tmp/pgsql_tmp4729.0", size 46276608<font></font>
2020-04-21 02:51:15 AEST datname:postgres,client:[local],app:psql,usename:postgres,session:5e9dc0a8.112c LOG:  temporary file: path "base/pgsql_tmp/pgsql_tmp4396.14", size 47194112<font></font>
</code></pre><br>
,      :<br>
<br>
<pre><code class="plaintext hljs">pg_grok_tpm_file_size_bytes{static="temp_file"} 1.40402688e+08
</code></pre><br>
               .<br>
<br>
,       :<br>
<br>
<pre><code class="plaintext hljs">pg_grok_tpm_file_size_bytes{static="temp_file"} 1.1911168e+07
</code></pre><br>
     :      ,    .</li>
<li><p> ,       ,       (<b>retention</b>)    (<b>cumulative: true</b>)<br>
    ,  - PostgreSQL :</p><br>
<pre><code class="plaintext hljs">2020-04-21 03:03:40 AEST datname:,client:,app:,usename:,session:5e9dd5dc.12c6 LOG:  temporary file: path "base/pgsql_tmp/pgsql_tmp4806.0", size 46260224<font></font>
2020-04-21 03:03:40 AEST datname:,client:,app:,usename:,session:5e9dd5dc.12c5 LOG:  temporary file: path "base/pgsql_tmp/pgsql_tmp4805.0", size 46833664<font></font>
2020-04-21 03:03:40 AEST datname:postgres,client:[local],app:psql,usename:postgres,session:5e9dc0a8.112c LOG:  temporary file: path "base/pgsql_tmp/pgsql_tmp4396.15", size 47316992<font></font>
</code></pre><br>
   :<br>
<br>
<pre><code class="plaintext hljs">pg_grok_tpm_file_size_bytes{static="temp_file"} 1.40402688e+08
</code></pre><br>
   ,  . :<br>
<br>
<pre><code class="plaintext hljs">2020-04-21 03:10:40 AEST datname:,client:,app:,usename:,session:5e9dd76e.1325 LOG:  temporary file: path "base/pgsql_tmp/pgsql_tmp4901.0", size 46776320<font></font>
2020-04-21 03:10:40 AEST datname:,client:,app:,usename:,session:5e9dd76e.1324 LOG:  temporary file: path "base/pgsql_tmp/pgsql_tmp4900.0", size 45768704<font></font>
2020-04-21 03:10:40 AEST datname:postgres,client:[local],app:psql,usename:postgres,session:5e9dc0a8.112c LOG:  temporary file: path "base/pgsql_tmp/pgsql_tmp4396.18", size 47841280<font></font>
</code></pre><br>
    :<br>
<br>
<pre><code class="plaintext hljs">pg_grok_tpm_file_size_bytes{static="temp_file"} 2.80772608e+08
</code></pre><br>
          ,     .       ,    .</li>
<li>     ,   <b>cumulative</b>  <b>false</b>    ,  .<br>
<br>
  :<br>
<br>
<pre><code class="plaintext hljs">2020-04-21 03:41:04 AEST datname:,client:,app:,usename:,session:5e9ddea4.1393 LOG:  temporary file: path "base/pgsql_tmp/pgsql_tmp5011.0", size 11763712<font></font>
2020-04-21 03:41:04 AEST datname:,client:,app:,usename:,session:5e9ddea4.1392 LOG:  temporary file: path "base/pgsql_tmp/pgsql_tmp5010.0", size 11501568<font></font>
2020-04-21 03:41:04 AEST datname:postgres,client:[local],app:psql,usename:postgres,session:5e9dc0a8.112c LOG:  temporary file: path "base/pgsql_tmp/pgsql_tmp4396.19", size 11911168<font></font>
</code></pre><br>
 :<br>
<br>
<pre><code class="plaintext hljs"># HELP pg_grok_tpm_file_size_bytes Size of tmp file created by time<font></font>
# TYPE pg_grok_tpm_file_size_bytes gauge<font></font>
pg_grok_tpm_file_size_bytes{static="temp_file"} 1.1911168e+07<font></font>
</code></pre><br>
 ,       .  ,            .</li>
</ol><br>
<h1></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูุง ุดู ููู ุฃู grok_exporter ูู ุงูุฃุฏุงุฉ ุงูููุงุณุจุฉ ููุฑุงูุจุฉ ุงูุชุทุจููุงุช. </font><font style="vertical-align: inherit;">ูุณูุญ ูู ุจุงููุธุฑ ูู "ุตุนูุจุฉ ุงููุตูู" ูุฃูุธูุฉ ุงููุฑุงูุจุฉ ูุงูุฃูุงูู ูุฅุซุฑุงุก ุงููุฑุงูุจุฉ ุจููุงููุณ (ุชุญูู) ุฅุถุงููุฉ ุ ูุน ุงูุญูุงุธ ุนูู ุจุณุงุทุชูุง ููุธููุชูุง ูุฎูุฉ ูุฒููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููุช ููุณู ุ ุณูููู ูููุฏูุง ูููุทูุฑูู ุฃูุถูุง ุ ูุธุฑูุง ูุฃูู ูููุญ ุนูู ุงูุฃูู ูุตููุงู ุบูุฑ ูุจุงุดุฑ ุฅูู ุณุฌูุงุช ุงูุชุทุจูู ูู ุฎูุงู ูุธุงู ูุฑุงูุจุฉ. </font><font style="vertical-align: inherit;">ุญูุซ ููููู ุฑุจุท ุงูููุงููุณ ูู ูุตุงุฏุฑ ูุฎุชููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุทุฉ ุฅูุฌุงุจูุฉ ุฃุฎุฑู ูู ุฃู ุงููุดุฑูุน ูุชุทูุฑ ูููุชุณุจ ูุธุงุฆู ุฌุฏูุฏุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุฏูุฑู ุ ุขูู ุฃู ุชููู ูุฐู ุงูููุงุญุธุฉ ุงููุตูุฑุฉ ูููุฏุฉ ุ ุจูุง ูู ุฐูู ูููุดุฑูุน ููุณู. </font><font style="vertical-align: inherit;">ุงููุฒูุฏ ูู ุงููุฌูู ูุงููุฒูุฏ ูู ุงูุนูู ุงูููุชุน! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุดูุฑุง ููุฌููุน!</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar487288/index.html">ููู ุชุญุฏู ุฃุชุงุฑู ุดุฑูุฉ ุขุจู ูู ูุฌุงู ุงูููุจููุชุฑ ุงูุดุฎุตู ูู ุงูุซูุงููููุงุช</a></li>
<li><a href="../ar487290/index.html">ุชุญุธุฑ Samsung ุงูุชููุฒููู ุงูุฐูู "ุงูุฑูุงุฏู" ุนู ุจูุนุฏ ูู ุฑูุณูุง. UPD - ุจูุงู ุณุงูุณููุฌ</a></li>
<li><a href="../ar487294/index.html">Playwright - Microsoft Playwright ูุฃุฏุงุฉ ุงุฎุชุจุงุฑ ุฌุฏูุฏุฉ</a></li>
<li><a href="../ar487296/index.html">ุชุฌุฑุจุฉ ุฅูุดุงุก ุชุทุจูู ููุจ ูุน Pony ORM</a></li>
<li><a href="../ar487298/index.html">ุชุฃุซูุฑ ุฅูุซุฑูุช ุนูู ุชูููููุฌูุง ุงูุดุจูุฉ ูู ุนุงู 2020</a></li>
<li><a href="../ar487308/index.html">ุชุณุฌููุงุช ุฌุงูุง (JEP 359)</a></li>
<li><a href="../ar487310/index.html">ููููุฉ ุญุณุงุจ ุงููููุฐุฌ ุงููุงูู ูุจุฑูุงูุฌ ุงูููุงุก</a></li>
<li><a href="../ar487314/index.html">ุนุจุก ุงูุนูุงู ุฐูู ุงููุงูุงุช ุงูุจูุถุงุก (ุญูู ุงูุชูููุฒ ูู ุชูููููุฌูุง ุงููุนูููุงุช)</a></li>
<li><a href="../ar487318/index.html">ููุฏูุฉ ูู ุงููุตุงุฏูุฉ ุงููุชุจุงุฏูุฉ ููุฎุฏูุงุช ูู Java ุจุงุณุชุฎุฏุงู TLS / SSL</a></li>
<li><a href="../ar487322/index.html">ุชุตูุฑ ุงูุนููู: ุงูุฑุณูู ุงูุชูุถูุญูุฉ ูุงูุฑุณูู ุงูุจูุงููุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>