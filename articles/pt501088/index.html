<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∂üèΩ üë®‚Äçüíº üìÜ Especifique-o. Relat√≥rio Yandex ‚úÇÔ∏è ü¶â üìà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Uma boa especifica√ß√£o de API ajuda os clientes a us√°-la. Alguns meses atr√°s, no Big Pytup, o desenvolvedor do Yandex Alexander Bryazginbryazginnnfez u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Especifique-o. Relat√≥rio Yandex</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/501088/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma boa especifica√ß√£o de API ajuda os clientes a us√°-la. </font><font style="vertical-align: inherit;">Alguns meses atr√°s, no Big Pytup, o desenvolvedor do Yandex Alexander Bryazgin</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bryazginnn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fez uma apresenta√ß√£o sobre o que a especifica√ß√£o da API REST se baseia como um exemplo do OpenAPI + Swagger e por que esse pacote √© necess√°rio. </font><font style="vertical-align: inherit;">A partir da sinopse, voc√™ pode descobrir como estragamos a gera√ß√£o autom√°tica da especifica√ß√£o no servi√ßo pronto, quais bibliotecas foram √∫teis para n√≥s e que tipo de ajuste existe em torno da especifica√ß√£o OpenAPI.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/A9Ij-qJOLjM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Ol√° pessoal, meu nome √© Alexander. </font><font style="vertical-align: inherit;">Eu gostaria de falar com voc√™ sobre as especifica√ß√µes.</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/3_/p0/1a/3_p01asrvx6y_ynsx1g3j5lxz8y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gostaria especificamente de abordar v√°rios t√≥picos. </font><font style="vertical-align: inherit;">Primeiro de tudo, o que s√£o especifica√ß√µes usando o exemplo de especifica√ß√µes da API REST. </font><font style="vertical-align: inherit;">Al√©m disso - conforme fixamos a gera√ß√£o da especifica√ß√£o em nosso servi√ßo. </font><font style="vertical-align: inherit;">E no final, do lado bom - que ferramentas, ajustes, usar os resultados de nossa gera√ß√£o de especifica√ß√µes, usando um exemplo de uma especifica√ß√£o como OpenAPI e Swagger UI.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Especifica√ß√£o da API REST</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que s√£o especifica√ß√µes e o que quero dizer com isso no meu relat√≥rio? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/qb/sf/huqbsf_ym4m_kdnwny0cl-o1h24.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, √© a Interface Description Language, uma linguagem para descrever interfaces, alguma descri√ß√£o que corresponde a um formato espec√≠fico. </font><font style="vertical-align: inherit;">Ele pode ser analisado automaticamente, porque possui um formato estrito e detalhes espec√≠ficos que n√£o dependem do idioma em que a interface √© implementada. </font><font style="vertical-align: inherit;">Ou seja, digamos que voc√™ tenha um servidor web Python, para a Interface Description Language n√£o importa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem muitos idiomas para especificar especifica√ß√µes. </font><font style="vertical-align: inherit;">Estas s√£o especifica√ß√µes para REST, RPC, GraphQL, etc. Hoje, vamos nos concentrar na especifica√ß√£o REST.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Openapi</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos falar sobre especifica√ß√µes usando o exemplo OpenAPI. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bp/2z/k_/bp2zk_scdpvupmqvq9pdfhe00ym.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, vamos entender o que √© OpenAPI. </font><font style="vertical-align: inherit;">Este √© apenas o mesmo idioma para descrever as especifica√ß√µes. </font><font style="vertical-align: inherit;">Por si s√≥, √© um arquivo - no formato YAML, JSON ou XML, quem mais gosta - com uma descri√ß√£o da interface, manipula pontos de extremidade e esquemas.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swagger</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando falamos sobre o OpenAPI, n√£o podemos dizer sobre o Swagger. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dn/q7/gj/dnq7gjawouaidqmvvpc1bqt1-vq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Swagger √© essencialmente uma interface de usu√°rio OpenAPI que permite visualizar lindamente sua especifica√ß√£o. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i5/mq/gm/i5mqgmitqhnsiwmarq7bsv4iyra.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No Swagger, como no OpenAPI, h√° uma descri√ß√£o dos terminais que est√£o em sua especifica√ß√£o. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qh/ru/3k/qhru3kukegnvaui-3n--ulcfmn8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° uma descri√ß√£o da autoriza√ß√£o na sua API. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xf/6w/pv/xf6wpvuh_kampioguvbuwasohha.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° uma descri√ß√£o dos modelos ou circuitos com os quais voc√™ manipula em sua API - por exemplo, aceite-o para entrada ou retorne-o para sa√≠da. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/er/ho/7o/erho7oaraobdmskbvtwnkzcfo40.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° uma descri√ß√£o de exemplos e solicita√ß√µes e respostas esperadas da sua API. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g1/tk/qf/g1tkqfq19vi3bkcfbdvnp1gtqre.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, no Swagger, devido ao fato de ser uma interface do usu√°rio e estar em execu√ß√£o no navegador, √© poss√≠vel executar em tempo real solicita√ß√µes √† sua API aqui e agora. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/st/km/ps/stkmpsq0mevhyvxyxb0wncgp9li.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link do slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com tudo isso, voc√™ pode brincar em um banco de testes preparado pela equipe Swagger. Este √© petstore.swagger.io. H√° uma especifica√ß√£o de exemplo, levantada por Swagger. Voc√™ pode acessar o back-end real e tocar. Recomendar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/um/xa/at/umxaatwequxmejnq8vcu-teyctm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, dizemos: OpenAPI, Swagger, especifica√ß√£o. Mas por que tudo isso √© necess√°rio para uma pessoa que escreve, digamos, um back-end? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, as especifica√ß√µes s√£o frequentemente usadas durante a fase de design da nossa API. Ou seja, as pessoas normais, tendo assumido a tarefa de escrever um back-end, come√ßam descrevendo o que desejam implementar. Ou seja, eles come√ßam a projetar sua API, uma lista de pontos de extremidade que desejam implementar, uma lista de esquemas a serem manipulados, par√¢metros etc. Nesse caso, as especifica√ß√µes e ferramentas em torno das especifica√ß√µes s√£o muito convenientes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, h√° um caso popular. </font><font style="vertical-align: inherit;">Pelo bem do que arrastamos a especifica√ß√£o para n√≥s em servi√ßo? </font><font style="vertical-align: inherit;">Esta √© a documenta√ß√£o. </font><font style="vertical-align: inherit;">A disponibilidade das especifica√ß√µes oferece uma boa oportunidade para descrever sua API e compartilhar essas informa√ß√µes com algu√©m: com os provedores front-end da sua equipe ou com clientes externos que desejam se integrar a voc√™. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, devido ao fato de a especifica√ß√£o ser escrita em um determinado formato estrito, ela pode ser processada automaticamente, ou seja, envolvida na introspec√ß√£o da API. </font><font style="vertical-align: inherit;">Al√©m disso, voc√™ pode pegar muitas ferramentas que podem facilitar sua vida. </font><font style="vertical-align: inherit;">Darei a voc√™ mais especificamente e com mais detalhes posteriormente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como preparamos o OpenAPI</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Decidimos por que precis√°vamos de tudo isso. Vamos falar sobre como estragamos a gera√ß√£o de especifica√ß√µes em nosso servi√ßo. Primeiro, um pouco de contexto. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w4/hj/gi/w4hjgi6vmhrhx68hkvza41qehrw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando chegamos √† conclus√£o de que cortar√≠amos a especifica√ß√£o, n√£o seguimos o caminho normal quando escrevemos o projeto, no sentido de um prot√≥tipo com uma especifica√ß√£o. J√° levantamos algum back-end, ele j√° estava voando conosco e quer√≠amos compartilhar a especifica√ß√£o como uma maneira de documentar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E nosso back-end foi repentinamente em Python. Utilizamos o Falcon como estrutura, o marshmallow como ferramenta de serializa√ß√£o e desserializa√ß√£o e o webargs como ferramenta de valida√ß√£o. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w4/hj/gi/w4hjgi6vmhrhx68hkvza41qehrw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando o recorte mais simples da petstore que mencionei anteriormente, vamos imaginar como nosso servi√ßo pode parecer no est√°gio em que queremos gerar uma especifica√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em nosso servi√ßo, haveria um par simplificado de esquemas: o tipo de nosso animal de estima√ß√£o, ou seja, a categoria e, de fato, os pr√≥prios animais. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/eu/ks/li/euksliz1yyqgyc8r6fdemxvyg9m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou seja, descrever√≠amos v√°rios esquemas no Marshmallow. Al√©m disso, preparar√≠amos algumas canetas para, por exemplo, registrar e receber nossos favoritos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ge/hf/ag/gehfag2dcnp0te3s38lcq9_a0eg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, de fato, eles descreveriam o pr√≥prio aplicativo, o que aumentaria o ponto de extremidade para criar e receber animais de estima√ß√£o. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xy/46/4t/xy464tkcd9zijove5dxpdwgahqe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â assim que ficaria juntos. Servi√ßo bastante simples. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos pensar em quais op√ß√µes temos para criar uma configura√ß√£o OpenAPI. A op√ß√£o mais simples e ing√™nua, como eu disse anteriormente, √© apenas um arquivo. Por que n√£o fazemos esse arquivo com as m√£os? Sabemos quais dados de entrada temos, temos pontos finais. Parece √≥bvio, basta pegar e escrever.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rp/2m/vm/rp2mvmq8ugglyeu45yia-3a2fuc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas antes de tudo, somos programadores. N√£o gostamos de fazer nada com as m√£os. Queremos que algo padr√£o seja gerado para n√≥s. Em segundo lugar, se suport√°ssemos tudo manualmente, certamente ter√≠amos que suportar altera√ß√µes na API, bem como um arquivo que esteja em outro lugar. Como qualquer servi√ßo, nosso produto √© vol√°til, assim como a especifica√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, chegamos √† conclus√£o de que queremos gerar uma configura√ß√£o do OpenAPI. Dada a nossa pilha de tecnologias, encontramos uma biblioteca como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apispec</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Apispec √© uma biblioteca de fabricantes, ou seja, os autores de Marshmallow e Webargs. Juntos, eles formam um grande ecossistema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos ver como voc√™ pode usar o apispec em nossa pilha para ensin√°-lo a gerar uma especifica√ß√£o para n√≥s.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tq/l2/xr/tql2xr9l9bxlpssq3y6nnupgld4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
T√≠nhamos um recurso e um manipulador espec√≠fico para o m√©todo get desse recurso. Ele tem algum tipo de corpo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6d/ls/6c/6dls6cd5xma9pvhckxnxudotg9w.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para ensinar apispec, para que ele saiba o que estamos fazendo em nossa caneta, adicionamos algo √† doutrina. N√≥s adicionamos uma descri√ß√£o que √© compreens√≠vel para o homem. No nosso caso, este √© um exemplo de respostas: √†s vezes isso acontece, nossa caneta responde com duzentos e, no corpo de nossa resposta, h√° JSON com um esquema, modelo de dados Pet. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/iu/gi/cgiugib1tipdvdpny7dk1jj25do.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/9g/bi/7h/9gbi7hsxekrvswxcpwhgvmackoi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando o exemplo de uma p√≥s-solicita√ß√£o, descrevemos: al√©m do fato de haver uma resposta 201 na qual retornamos o Pet, tamb√©m existe o corpo esperado da solicita√ß√£o que chega at√© n√≥s. E dentro dessa solicita√ß√£o, esperamos JSON e esperamos que esse JSON esteja no formato Pet.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dr/is/3t/dris3tronnmqrjhgneplaqzouni.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≥s adicionamos documentos, ent√£o precisamos aprender como gerar uma especifica√ß√£o. Para fazer isso, escrevemos algum tipo de script, um bot√£o vermelho, e ensinamos o apispec a gerar uma especifica√ß√£o para n√≥s. Declaramos um objeto apispec, do qual descrevemos alguns metadados do nosso servi√ßo e, em seguida, apenas escrevemos o arquivo, a especifica√ß√£o gerada no formato YAML. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos ver o que foi gerado para esse enorme aplicativo neste arquivo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ka/m2/yw/kam2ywt0vofxyenimp2aqpn8dmu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro de tudo, neste arquivo, haver√° uma descri√ß√£o da vers√£o na qual a especifica√ß√£o foi gerada. Isso √© importante para que todos que interpretam essa especifica√ß√£o entendam qual formato interpretar. As especifica√ß√µes variam de vers√£o para vers√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, h√° uma descri√ß√£o do nosso servi√ßo. Este t√≠tulo, vers√£o, talvez haja alguma descri√ß√£o, se voc√™ quiser, e uma lista de servidores para os quais voc√™ pode ir, puxe as canetas, veja e toque em nosso back-end. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ui/cn/bi/uicnbixldrhetobxeixo4-rfqlu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, os pr√≥prios esquemas de dados que manipulamos brotam l√°, com uma descri√ß√£o dos tipos, com exemplos de preenchimento desses dados e algumas regras. Talvez esses sejam alguns valores extremos, talvez os par√¢metros de liga√ß√£o. Aqui voc√™ v√™ uma lista dos atributos necess√°rios. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2j/ig/td/2jigtdwc9ln_m4d5c40ytq3b1sq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m dos esquemas, a pr√≥pria descri√ß√£o dos pontos de extremidade cresce l√°. Nesse caso, a descri√ß√£o de cada m√©todo √© gerada. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bu/9p/ce/bu9pce82nchhnzbyssgqhduzseg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando o m√©todo get, obtemos uma descri√ß√£o do que fazemos com o m√©todo get.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ki/lj/eh/kiljehsuttdb1uqsusabn0kkwwe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E exatamente a descri√ß√£o que colocamos nas doutrinas do n√≥ de extremidade correspondente surgiu na postagem. </font><font style="vertical-align: inherit;">Ou seja, j√° recebemos algum tipo de arquivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que devemos fazer com isso agora? </font><font style="vertical-align: inherit;">Para que serve? </font><font style="vertical-align: inherit;">Antes de tudo, voc√™, como propriet√°rio do back-end, j√° pode dar a todos esses clientes em potencial que ir√£o para suas canetas, fornecer essa especifica√ß√£o. </font><font style="vertical-align: inherit;">E isso ajudar√° os caras a se integrarem. </font><font style="vertical-align: inherit;">Ou seja, o arquivo que geramos n√£o faz voc√™ arrancar os olhos. </font><font style="vertical-align: inherit;">√â bastante leg√≠vel. </font><font style="vertical-align: inherit;">Pode ser visto atrav√©s dos olhos e de alguma forma analisado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas isso tamb√©m √© dif√≠cil. </font><font style="vertical-align: inherit;">Vamos ver quais outras ferramentas existem para simplificar sua vida e que tipo de ajuste existe em torno da especifica√ß√£o gerada.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P√£ezinhos</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E ent√£o chegamos ao pr√≥ximo est√°gio, onde falaremos sobre o que √© um kit de ferramentas √∫til sobre especifica√ß√µes usando o exemplo OpenAPI. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ru/kk/mw/rukkmw8jlzqgxmnubf3ndxn-ckw.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link do slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
A primeira ferramenta que eu gostaria de falar √© a Swagger-UI. A seguir, fornecerei links para um recurso da Web onde voc√™ pode cutucar a ferramenta correspondente, neste caso o SwaggerHub, ou para o comando para iniciar o documento correspondente usando o Docker. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos n√≥s amamos muito o Docker. O Docker ajuda voc√™ a n√£o colocar JavaScript ou Java no local. Apenas pegue, execute-o com um comando e tudo funcionar√° para voc√™. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, o Swagger-UI √©, de fato, um utilit√°rio que permite exibir lindamente suas especifica√ß√µes. Como eu disse anteriormente, eles est√£o sendo executados localmente usando o Docker, possivelmente o Swagger.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode visualizar ou compartilhar no c√≥digo do idioma executando a especifica√ß√£o no Swagger no seu hardware. Al√©m disso, envie todos os seus usu√°rios em potencial a essa especifica√ß√£o. Ela j√° √© muito mais compreens√≠vel, bonita. Diretamente nele, voc√™ pode executar a consulta. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oo/t2/ko/oot2kocvjaeri2wdtdybfzsbnno.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link do slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Al√©m da interface do usu√°rio do Swagger, h√° uma ferramenta conveniente do editor do Swagger. Voc√™ pode us√°-lo na Web, pode busc√°-lo em um local ou em qualquer m√°quina de escrever. Ele permite que voc√™ altere as especifica√ß√µes em tempo real e veja sua exibi√ß√£o aqui. Ou seja, √© uma ferramenta muito conveniente no est√°gio de, por exemplo, projetar uma API, quando voc√™ n√£o possui uma especifica√ß√£o gerada e deseja, de alguma forma, brincar ou descrever seu back-end sem ter um back-end real ou gerado.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j7/js/zo/j7jszonnqgfdxiyucziggnbr2kk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A seguir, a maravilhosa ferramenta Prism. Eu gostaria de me debru√ßar sobre isso com mais detalhes. Prism √© um utilit√°rio do Spotlight. Permite que voc√™, com a especifica√ß√£o, crie o servidor de simula√ß√£o, que funcionar√° de acordo com a especifica√ß√£o que voc√™ o alimentou. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou seja, nesse caso, vemos o lan√ßamento do Prism no topo da especifica√ß√£o, que eu roubei logo abaixo da loja Swagger. Vemos que o Prism encontrou todos os pontos de extremidade especificados na especifica√ß√£o e disse que eles os incomodam honestamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos tentar sentir o que o Prism pode fazer.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wk/q4/il/wkq4ilyu29eoustye1c6zpbfleo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, encontramos a caneta, tentamos pux√°-la e de repente vemos que Prism nos diz: desculpe, erro 401. Entramos na especifica√ß√£o e vemos que, de fato, esta caneta est√° oculta por tr√°s da autoriza√ß√£o. A se√ß√£o de seguran√ßa est√° claramente descrita l√°. Nele, vemos que o m√©todo de autoriza√ß√£o √© OAuth e entendemos: na verdade, o Prism esperava algum tipo de dados de autoriza√ß√£o de n√≥s. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hr/a9/8l/hra98lo9j-n1wboqvztd2rtzh2a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos tentar transferir dados de autoriza√ß√£o para ele de acordo com o formato que ele est√° esperando. √â claro que o token √© de alguma forma arejado, pois o Prism n√£o importa o que √© em ess√™ncia. O formato √© importante para ele. Ou seja, se ele estiver aguardando o OAuth, ele estar√° aguardando dados de autoriza√ß√£o em um formato espec√≠fico.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Empurramos com autoriza√ß√£o e j√° vemos o 400¬∫ erro. Analisamos o que temos na especifica√ß√£o. Na especifica√ß√£o, vemos que n√£o passamos alguns atributos necess√°rios. Vamos transmiti-los. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3u/24/k2/3u24k2uo0vk6pp9hru3vteaclso.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O atributo m√°gico √© status. √â, de fato, dado de acordo com a especifica√ß√£o ENUM. Se transfer√≠ssemos um status que n√£o est√° inclu√≠do neste ENUM, ter√≠amos quatro pontos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui passamos o status v√°lido e vemos que o back-end respondeu com um xml completamente v√°lido com os dados. Os dados neste xml agora s√£o retornados apenas do exemplo especificado na especifica√ß√£o. Ou seja, na especifica√ß√£o de cada campo, h√° uma se√ß√£o como exemplo, onde voc√™ pode especificar um exemplo de dados que podem ser retornados. Aqui Prism apenas os trouxe de volta.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/od/sd/6w/odsd6whlpmsf1vuwm_rdtgjadhk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas, al√©m do fato de que voc√™ pode puxar a caneta e esperar que haja uns duzentos honestos, h√° uma oportunidade de dizer Prism - devolva-me um c√≥digo de resposta espec√≠fico. Geralmente, na especifica√ß√£o, descrevemos o comportamento diferente de nossa caneta e, com dados v√°lidos, eles nem sempre correspondem a duzentos. Eles podem procurar, por exemplo, a presen√ßa de IDs no banco de dados, para ver se esse ID n√£o existe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse caso, declaramos um determinado c√≥digo, digamos, o 400¬∫ ou o 422¬∫, para quem voc√™ quiser. Ou seja, com uma entrada v√°lida, nem sempre h√° uma sa√≠da v√°lida. Portanto, na especifica√ß√£o, descrevemos v√°rias op√ß√µes de resposta. E podemos dizer claramente ao puxar a caneta Prism: desta vez, estou esperando que voc√™ me responda, digamos, o erro 404. Digamos que esse seja um caso quando eu puxo a al√ßa com um ID, mas n√£o existe esse ID.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ys/wg/lt/yswgltoo-e7vyjv5mesvlkvolji.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para resumir, quais s√£o os recursos em geral, al√©m dos que eu j√° mencionei? Novamente, este √© um servidor simulado que voc√™ pode adquirir. Ele responder√° de acordo com a especifica√ß√£o, validar√° os pedidos de autoriza√ß√£o. Ele tamb√©m ser√° validado nos dados que voc√™ enviou para ele. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m de validar a solicita√ß√£o, ele ir√° gerar respostas. No caso mais simples, como eu disse, gera respostas por exemplo. Existe uma segunda op√ß√£o - quando voc√™ solicita explicitamente: gere respostas din√¢micas. Uma estrat√©gia din√¢mica significa que, dependendo do tipo, digamos, int, ele ir√° gerar milhares, bilh√µes ou algo mais. Ou, para a string, um hash estranho e incompreens√≠vel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, quando eu disse na primeira execu√ß√£o que voc√™ pode gerar dados, nos perguntamos: seria legal se o Prism se integrasse com o faker. Aqueles que usaram o Python provavelmente sabem como √© legal quando voc√™ deseja bloquear ou emular dados no banco de dados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, o Prism √© escrito em JavaScript. O JavaScript tamb√©m possui o Faker.js e o Prism tem integra√ß√£o autom√°tica com o faker. Voc√™ pode especificar explicitamente em sua especifica√ß√£o os tipos de dados falsos que sua caneta fornecer√°. Ou seja, o OpenAPI suporta um sistema de plug-in que permite expandir sua especifica√ß√£o para que o OpenAPI e o pr√≥prio analisador n√£o se importem. Mas se houver plugins que analisam sua especifica√ß√£o, eles podem usar alguns campos adicionais.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, o Prism oferece a voc√™ o uso do campo opcional do plugin X-faker. Muito confortavelmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, sob o asterisco, indiquei que os retornos de chamada podem ser descritos no OpenAPI. Esse √© o esquema de intera√ß√£o quando voc√™ registra um retorno de chamada para uma determinada caneta e espera que, depois disso, voc√™ receber√° um retorno de chamada espec√≠fico para o URL que registrou. Ent√£o, Prism e ele sabe como se molhar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De interessante: o Prism pode ser aumentado n√£o apenas no modo de simula√ß√£o, mas tamb√©m no modo de proxy. Voc√™ apenas coloca esse Proxy na frente do seu back-end real e, todas as solicita√ß√µes que passam pelo Prism e retornam, o Prism valida conforme as especifica√ß√µes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se alguns dados - digamos, entrada ou sa√≠da, solicita√ß√£o ou resposta - divergirem, ele escrever√° isso no log. Ele faz isso de forma bastante transparente, n√£o afeta o comportamento real. Em geral, a documenta√ß√£o diz que pode ser facilmente aumentada na produ√ß√£o. Honestamente, eu n√£o tentei isso sozinho. Certamente h√° algum tipo de sobrecarga, mas ainda n√£o posso dizer sobre isso. Voc√™ pode sentir, tentar contar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, atrav√©s do que eu j√° disse, √© poss√≠vel for√ßar certos pedidos. Ou seja, acesse o servidor de simula√ß√£o e diga: Quero um exemplo ou tipo de resposta espec√≠fico. J√° falamos sobre o tipo de resposta. Tamb√©m na especifica√ß√£o OpenAPI √© poss√≠vel especificar v√°rias op√ß√µes de resposta e nome√°-las explicitamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, voc√™ pode vir e dizer Prism: desta vez eu quero um exemplo espec√≠fico, da pr√≥xima vez eu quero outro exemplo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lu/ks/3i/luks3i81suk0tx_npozzbwrgpmi.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link do slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sobre o Prism falou. Agora sobre o Postman. Eu o amo tanto. Portanto, o Postman tem uma integra√ß√£o imediata com o OpenAPI. Voc√™ pode literalmente importar a especifica√ß√£o OpenAPI com apenas dois cliques nos bot√µes. E ele criar√° uma cole√ß√£o de solicita√ß√µes de acordo com sua especifica√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao mesmo tempo, ele preparar√° todos os par√¢metros de consulta, todos os par√¢metros do corpo, todo o ambiente e autoriza√ß√£o. Voc√™ s√≥ precisa finalizar os dados com alguns IDs reais ou qualquer outra coisa, tokens de autoriza√ß√£o. Muito confortavelmente.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hv/_n/it/hv_nit8modo3fisqvijmuemcwzq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passamos mais do Postman. N√≥s conversamos sobre o Prism, ele tem funcionalidade - valida√ß√£o de consulta. De fato, existe um utilit√°rio separado que permite que voc√™ sugue sem piedade seu back-end em execu√ß√£o e verifique se ele realmente funciona de acordo com a especifica√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dredd analisa a especifica√ß√£o. Ele pega, puxa todas as canetas e olha o que voltou para ele. Em geral, o dredd pode ser tratado como uma infraestrutura para escrever testes, porque todos os seus pedidos podem ser complementados com seus ganchos. Ou seja, da caixa, voc√™ pode come√ßar a usar o dredd exatamente como est√°, como eu o lancei aqui.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou voc√™ pode executar o dredd passando um conjunto de ganchos que realmente funcionam na ideologia de um teste regular. H√° algo que se eleva a todo o conjunto de testes, h√° ganchos que s√£o executados antes do teste, ap√≥s o teste, toda a infraestrutura. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/p1/0s/7w/p10s7w3s_sj3l5yvjoyzhssvnjq.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link do slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Em seguida, quero falar mais detalhadamente sobre essa ferramenta do Swagger como Swagger-codegen. De fato, √© um pouco como uma faca su√≠√ßa. Para come√ßar, que tipo de pensamento os caras tiveram quando escreveram este instrumento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geralmente, quando algu√©m precisa se integrar a um back-end, voc√™ raramente descreve uma solicita√ß√£o http aqui, em um determinado est√°gio, na l√≥gica de neg√≥cios. Na maioria das vezes, voc√™ encapsula o trabalho com um back-end espec√≠fico em alguma entidade, no cliente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, os caras tiveram a ideia de que, com uma especifica√ß√£o, podemos descrever e prever com clareza como seria o cliente para esse back-end. E os caras fizeram um gerador de clientes. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xx/mp/bs/xxmpbsw0ksdzbh2yb6vrvbrxylw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos tentar iniciar a gera√ß√£o do cliente de acordo com a especifica√ß√£o petstore. Veremos que esse gerador foi gerado pelo pr√≥prio cliente Swagger, no qual existe o pr√≥prio cliente Python. Aqui na linha de lan√ßamento, voc√™ pode ver claramente que estou gerando um cliente em Python. De fato, ele suporta um grande n√∫mero de idiomas. O que √© importante aqui? Os pioneiros v√£o gostar do JavaScript, os descolados v√£o gostar do Go. Tudo o que voc√™ quiser.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, al√©m do cliente em Python, ele gerou alguns documentos e testou pastas m√°gicas. Falaremos sobre eles mais tarde em mais detalhes. E muito a√ß√∫car para que voc√™ possa agrupar esse cliente em uma biblioteca pronta. H√° gitignore, existem arquivos de CI, digamos que para Travis, h√° a√ß√∫car para git. Existem requisitos, setup.py e tox.ini. Ou seja, tudo o que ajuda voc√™ a simplesmente pegar, confirmar e enviar esse cliente j√° est√° na forma de uma biblioteca que pode ser reutilizada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos dar uma olhada no que ele gerou no cliente.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xy/rl/sv/xyrlsvzq6lsyg1ujajxjfpqcdgu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No cliente, ele gerou, al√©m de alguns arquivos auxiliares, dois diret√≥rios api e modelos muito importantes. Nos modelos, temos esses modelos de dados que manipulamos. Cada modelo √© simplesmente uma classe Python, herdada do objeto com __init__, que aceita todos os tipos de par√¢metros para esse esquema e getters e setters que alteram o estado do objeto. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lk/zo/ib/lkzoibgytyj3yh883ypi3tlrlqs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m do modelo, entidades como PetApi tamb√©m apareceram l√° - s√£o apenas wrappers de clientes sobre o grupo de terminais, que o OpenAPI agrupa por tags ou por terminais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E esse cliente possui todas as canetas que voc√™ pode mexer, transmitindo dados reais. Ent√£o eles voar√£o para algum back-end.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8x/9s/ju/8x9sju8tcpqdmm6ymz40sbaiarc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que √© implementado a partir deste cliente gerado? Do interessante - a abordagem contratual. Vamos falar mais sobre ele. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A abordagem contratual da programa√ß√£o sugere que, ao implementar a intera√ß√£o entre o cliente e o servidor, voc√™ sempre estabelece determinadas regras, contratos, sejam dados que o cliente fornece ao servidor ou dados que o servidor fornece ao cliente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, a abordagem do contrato recomenda que voc√™ verifique seus dados e sua intera√ß√£o quanto √† conformidade com o contrato sempre em tempo real. Se este contrato √© um esquema dos dados que transmitimos e n√£o atende √†s nossas expectativas, n√£o √© satisfeito, √© preciso dizer isso, mostrar o erro aqui e agora. N√£o v√° para o back-end real, n√£o espere por quatro pontos, mas diga agora. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou outro caso: fomos ao back-end, recebemos alguns dados, mas eles n√£o correspondem ao que est√°vamos esperando. Suponha que alguns campos que esperamos ver preenchidos fiquem vazios. Falaremos sobre isso aqui e agora, e n√£o quando deixarmos algum lugar na pilha de chamadas em algum lugar da floresta e n√£o descobrirmos por que algo caiu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, o Swagger-codegen gera clientes e modelos de acordo com a abordagem do contrato. Ele permite que voc√™ diga em tempo real: sim, quero que o cliente em tempo de execu√ß√£o verifique todos os dados quanto √† conformidade com os contratos. E se o contrato n√£o for cumprido, ele dir√° imediatamente. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wd/cv/cf/wdcvcfmelgbc911cza5jnwuxc4c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geramos algum tipo de cliente pit com uma abordagem contratual, mas, al√©m disso, o Swagger-codegen gerou stubs de documenta√ß√£o para n√≥s. Na verdade, eles s√£o bastante simples, mas todos podem ser distorcidos para cada modelo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4n/xb/hx/4nxbhxsvwigzwulp0o-cgvggx0c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Swagger-codegen tamb√©m gerou algum tipo de esbo√ßo de teste. Tudo para que voc√™ possa acumular o c√≥digo gerado com o m√≠nimo de esfor√ßo e execut√°-lo com testes, com Integra√ß√£o Cont√≠nua, na forma de uma biblioteca com um git, com todos os sinos e assobios.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jz/ab/zy/jzabzyk84w7w8mhuxfyvfl5wc7m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos passar por isso brevemente novamente. Analisamos apenas um caso - uma maneira de gerar clientes para a API. Da importante abordagem contratual. Eu gostaria de dizer: quando eu criei um cliente para uma petstore real de acordo com as especifica√ß√µes e realmente fui para o back-end, subitamente essa abordagem contratual capturou os dados inv√°lidos retornados pela petstore. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No come√ßo eu pensei - eles s√£o um pouco estranhos. Eles mesmos geraram a especifica√ß√£o e o back-end n√£o funciona corretamente para eles. Mas parece-me que eles fizeram isso de prop√≥sito, para que pud√©ssemos ver o poder do contrato se aproximando. N√£o havia muitos dados e eles foram gerados claramente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m na gera√ß√£o de clientes e em outra gera√ß√£o, voc√™ pode usar seus pr√≥prios modelos. Ou seja, se voc√™ deseja gerar um cliente em um determinado formato, pode salvar e preparar seu modelo e gerar clientes da maneira que desejar. Se voc√™ sair por a√≠ e gerar integra√ß√µes todos os dias, poder√° gostar muito. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ tamb√©m pode configurar esses clientes e gravar a importa√ß√£o de seus modelos, em vez daqueles gerados pelo Swagger-codegen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m de gerar clientes para a API, voc√™ pode alimentar a especifica√ß√£o para o gerador e gerar os stubs do pr√≥prio servidor. √â muito estranho. Ou seja, voc√™ gera algum tipo de back-end que supostamente funciona de acordo com a especifica√ß√£o. √â claro que n√£o h√° l√≥gica de neg√≥cios l√°. Mas talvez seja conveniente como algum tipo de andaime, ou seja, preparar um rascunho com o qual voc√™ j√° possa fazer alguma coisa. Eu n√£o o usei, mas recomendo dar uma olhada - talvez voc√™ encontre algo √∫til para si mesmo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entre outras coisas, ele permite gerar documenta√ß√£o nos formatos HTML e Confluence, se algu√©m estiver usando. Os exemplos que eu queria mostrar para o OpenAPI tamb√©m terminaram a√≠. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bw/mm/7o/bwmm7osu5o5m_nozsic84gevl68.jpeg"><br>
<b><sup><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todas essas ferramentas est√£o dispon√≠veis nos dois links abaixo no slide: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openapi.tools</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/APIs-guru/awesome-openapi3</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Quero mostrar os grupos de ajuste em torno da especifica√ß√£o OpenAPI. De fato, existem muitas ferramentas. Estes s√£o apenas grupos, ou seja, tipos de ferramentas que voc√™ pode usar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O importante aqui √© um conversor de uma especifica√ß√£o para outra. Ou seja, voc√™ pode gerar a API do Blueprint ou o que quiser da especifica√ß√£o OpenAPI e vice-versa. Existe uma biblioteca para simula√ß√£o, para documenta√ß√£o. Ou seja, tudo sobre o que eu falei ser√° refletido nesses grupos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° um link que voc√™ pode seguir tamb√©m. Certifique-se de ir olhar.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ga/7c/l9/ga7cl9jxvn0wzptbyrde_l-fjuc.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Link do slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m das ferramentas em torno do OpenAPI, existem ferramentas em torno do Swagger. </font><font style="vertical-align: inherit;">Existem o SwaggerHub e o Swagger Inspector. </font><font style="vertical-align: inherit;">Eles s√£o destacados em azul porque √© um kit de ferramentas baseado na Web. </font><font style="vertical-align: inherit;">Voc√™ pode ir diretamente para l√° e, como servi√ßo, usar o SwaggerHub e o Swagger Inspector, que s√£o na verdade uma superposi√ß√£o das seguintes bibliotecas: Swagger-editor, Swagger-codegen, Swagger-UI. </font><font style="vertical-align: inherit;">Tudo o que acabamos de discutir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas as bibliotecas s√£o amarelas, s√£o de c√≥digo aberto, como vimos. </font><font style="vertical-align: inherit;">Existe no GitHub, est√° na forma de Docker. </font><font style="vertical-align: inherit;">Usar.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h2><br>
<img src="https://habrastorage.org/webt/7s/sf/jq/7ssfjqj01gdiek3-9wspmzovjsy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que discutimos hoje? Especifica√ß√£o da API REST usando OpenAPI e Swagger como exemplos. Quero enfatizar que o OpenAPI √© apenas uma maneira de descrever a especifica√ß√£o. Muitos deles. Dos mais interessantes, veja tamb√©m a API do Blueprint. Talvez algu√©m mais goste de alguma coisa. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1a/0f/gp/1a0fgp8uuikaes5v4un8tam6z9s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m assistimos o Swagger. Em ess√™ncia, isso, como j√° dissemos, √© apenas uma bela interface de usu√°rio em torno da especifica√ß√£o, que permite que voc√™ a observe e explore de uma maneira conveniente. De fato, essas ferramentas tamb√©m s√£o muitas, desde o popular ReDoc e Sphinx at√© o Markdown. Ou seja, voc√™ pode gerar o Markdown a partir do OpenAPI, e ele ser√° exibido maravilhosamente em todo o GitHub, GitLab - onde voc√™ quiser.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m vimos um exemplo em nossa pilha de tecnologias de como agora geramos a especifica√ß√£o. Mas, como voc√™ notou, isso √© bastante complicado e inconveniente, porque, de fato, duplicamos a l√≥gica e as doutrinas de neg√≥cios. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gx/er/qc/gxerqcbvgjayoxqbschiwlldcow.jpeg"><br>
<b><sup><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Links do slide: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FastAPI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SAFRS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rororo</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
De interessante, recomendo que voc√™ consulte o FastAPI. </font><font style="vertical-align: inherit;">Styopa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vai</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lhe </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">contar</font></a><font style="vertical-align: inherit;"> mais sobre isso hoje </font><font style="vertical-align: inherit;">. O FastAPI ajuda a gerar uma especifica√ß√£o pronta para uso. Voc√™ n√£o pode pensar em nada. Basta escrever o c√≥digo e obter a especifica√ß√£o final.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem mais duas estruturas: SAFRS e rororo. Os nomes, √© claro, s√£o m√°gicos. Eles trabalham um pouco em um modelo diferente, n√£o fazem voc√™ n√£o pensar na especifica√ß√£o e a obt√©m apenas como um efeito colateral. Pelo contr√°rio, voc√™ tem uma especifica√ß√£o que conduz manipuladores. Este √©, grosso modo, desenvolvimento orientado por especifica√ß√£o. Eles n√£o t√™m tantas estrelas quanto o FastAPI, mas parece-me que eles merecem aten√ß√£o, d√™ uma olhada. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bg/wy/u2/bgwyu2t0-lmkl0137h_yawj4cuk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, finalmente, discutimos que tipo de utilidade existe em torno da especifica√ß√£o usando os exemplos de OpenAPI e Swagger. Para todos os pontos em que fa√ßo links, tenha certeza, h√° muitas coisas interessantes: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- OpenAPI / Swagger </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.io/docs/specification/about</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
- Exemplo em falcon + marshmallow + apispec </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/marshmallow-code/apispec</font></font></a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/tiangolo/fastapi</font></font></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
- AbraAPI / Swagger </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p√£es </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openapi.tools </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.io/tools swagger.io/tools/open-source/open-source-integrations </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/APIs-guru/awesome-openapi3</font></font></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
O que eu tenho foi a mensagem do relat√≥rio? </font><font style="vertical-align: inherit;">Pessoal, escrever especifica√ß√µes n√£o √© algum tipo de burocracia. </font><font style="vertical-align: inherit;">E isso n√£o √© t√£o dif√≠cil quanto pode parecer √† primeira vista, mas sim simples e fornece muitas ferramentas √∫teis, abre grandes oportunidades para voc√™. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Escreva as especifica√ß√µes. </font><font style="vertical-align: inherit;">Recomendar. </font><font style="vertical-align: inherit;">Muito obrigado.</font></font><br>
<br>
<hr><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todo o c√≥digo e links est√£o dispon√≠veis na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apresenta√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt501064/index.html">Para o voo do navio experimental chin√™s. Infogr√°ficos e colagens.</a></li>
<li><a href="../pt501068/index.html">Deepfakes e deep media: um novo campo de batalha para seguran√ßa</a></li>
<li><a href="../pt501076/index.html">M√™s removido. Resumimos e compartilhamos hacks de vida dos l√≠deres dos grupos de trabalho dos Jet Infosystems</a></li>
<li><a href="../pt501084/index.html">Servi√ßos observ√°veis ‚Äã‚Äãem Angular</a></li>
<li><a href="../pt501086/index.html">Summ3r do h4ck 2020. Tutorial de ver√£o sobre seguran√ßa digital</a></li>
<li><a href="../pt501090/index.html">Viagem multicluster K8S</a></li>
<li><a href="../pt501092/index.html">Sobre a busca de junho promissor e "udalenka". Experi√™ncia do Redmadrobot Technical Support Manager</a></li>
<li><a href="../pt501098/index.html">Solu√ß√µes de bateria inteligente SmartLi para UPS modular</a></li>
<li><a href="../pt501106/index.html">O simulador de palavras em ingl√™s mais simples usando Python e Balabolka</a></li>
<li><a href="../pt501108/index.html">Nvidia Streaming Multiprocessor History</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>