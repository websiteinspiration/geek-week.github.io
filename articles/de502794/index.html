<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👁️ 🍎 🙋🏻 CopyPaste DIY-Tastatur oder die perfekte Tastatur in einer Welt, in der jede Codezeile bereits geschrieben ist 👨‍🚀 🤱🏾 💺</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Viele Leute, die gerade erst anfangen, Programmieren zu lernen, stellen die Frage: Ist es in Ordnung, den Code eines anderen zu kopieren und einzufüge...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>CopyPaste DIY-Tastatur oder die perfekte Tastatur in einer Welt, in der jede Codezeile bereits geschrieben ist</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502794/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Viele Leute, die gerade erst anfangen, Programmieren zu lernen, stellen die Frage: Ist es in Ordnung, den Code eines anderen zu kopieren und einzufügen? Angesichts der Tatsache, dass eine Person eine faule Kreatur ist und die Zeit eines Programmierers Geld kostet, liegt die Antwort meiner Meinung nach auf der Hand - ja. Aber für Menschen, die dieses Prinzip auf den Punkt der Absurdität bringen, die ohne nachzudenken und nicht zu verstehen kopieren </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und auch für diejenigen, die ein Diplom schreiben, ist dieser Aufsatz</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dieser Tastatur und diesem Artikel gewidmet. Und ja, diese Tastatur enthält genau zwei Schaltflächen - Kopieren und Einfügen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/po/8y/jqpo8yy5wvanjaw-j2fbpzo--e4.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unter dem Schnitt wird eine Geschichte über Montage und Firmware zu sehen sein - wir werden sogar den Sprung eines logischen Analysators sehen</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also habe ich beschlossen, diese Tastatur zusammenzubauen. </font><font style="vertical-align: inherit;">Ich beschloss, mit den Komponenten zu beginnen - Digispark (ein kleiner Schal mit attiny85 und einer USB-Bindung, die direkt in den Computer eingefügt werden kann), Tastenanschläge erfassen und die Tastatur emulieren zu lassen. </font><font style="vertical-align: inherit;">Jetzt habe ich keine Tasten mehr - ich habe keine normalen mechanischen Tasten für die Tastatur, aber ich habe keine Lust zu warten, also nehmen wir die smd-Tasten. </font><font style="vertical-align: inherit;">Wie diese:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tasten</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/ed/iq/jb/ediqjbcvhhffosgiw5tks8edazy.jpeg"><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem wir uns für die Komponenten entschieden haben, werden wir jetzt die Frontplatte zeichnen, um sie in Zukunft auf einem Drucker zu drucken. Abmessungen 45 mm * 21 mm, Pad-Größen für Tasten 10 mm * 10 mm </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schreiben Sie oben und unten etwas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellte sich </font></font><br>
<br>
<img src="https://habrastorage.org/webt/76/uj/vl/76ujvlzgjzrgtpq65heyw6rup0u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ungefähr so </font><font style="vertical-align: inherit;">heraus: </font><font style="vertical-align: inherit;">Das nächste Problem sind die SMD-Tasten, daher müssen sie auf eine Art Platine gelötet werden. Da es keinen Sinn macht, das Board wegen so etwas zu vergiften, kratzen wir den Textolithen mit dem Buchstaben T: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gj/qe/mf/gjqemfz8nkkvz5mlzfyhnha44pm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Abstand zwischen den </font><font style="vertical-align: inherit;">Tastenmitten </font><font style="vertical-align: inherit;">beträgt 15 mm. Löten Sie sie auf eine improvisierte Platte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir löten drei Drähte. Wenn die Taste gedrückt wird, wird eines der äußersten Kabel zum zentralen Kabel geschlossen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ti/j-/7q/tij-7qh6in4fyzxxj4ozotirtly.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nehmen Sie als nächstes das erste Stück PVC-Kunststoff, das auf Sie trifft, kleben Sie unsere Frontplatte darauf und kleben Sie ihre Düsen auf die Knöpfe. </font><font style="vertical-align: inherit;">Das einzige, was ich nicht berücksichtigt habe, war, dass sich der Teil selbst, der die Membran drückt, auf den Taktknöpfen dreht. </font><font style="vertical-align: inherit;">Wenn Sie das Design verbessern möchten, verwenden Sie die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">normalen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Schalter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ergebnis sollte das sein, was Sie am Anfang des Artikels gesehen haben. </font><font style="vertical-align: inherit;">Ein anderer Winkel.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dx/c0/ws/dxc0wsjo9lv_zldkmwgx1crjgao.jpeg"><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit Hilfe einfacher Geräte können Sie also eine Tastatur mit zwei Tasten erstellen, ABER WARUM?</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/i2/xh/he/i2xhhe0bmisbdng5zckcm4a7ikc.jpeg"><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir verbinden drei Drähte im Digispark. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3o/fh/gt/3ofhgtfecluon5m4j23zo6mpfck.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schema der „Tastatur“ </font></font><br>
<br>
<img src="https://habrastorage.org/webt/q8/rb/3u/q8rb3ukm9soz0jdcxmwx1ezla2s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes müssen wir Digispark als Tastatur ausgeben und STRG + C / STRG + V durch Drücken der Taste senden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also müssen wir den Klick fangen. Wenn Sie zunächst das zentrale Kabel an +5 V anschließen und die seitlichen Kabel an die für den Eingang konfigurierten Pins anschließen, befindet sich beim Drücken der Taste zwar 1 auf dem Pin, aber wenn der Pin nicht gedrückt wird, werden Interferenzen abgefangen und es wird nicht verfolgt, was ist Drücken, und was für ein Hindernis. Dieses Problem ist überraschend einfach gelöst - Sie müssen die Stifte durch einen großen Widerstand (zig Ohm) zur Erde ziehen. Wenn Sie das Datenblatt auf dem Mikrocontroller öffnen, können Sie sehen, dass Sie darin den Aufzug einschalten können, jedoch nur auf VCC (+ Leistung). Eigentlich ist dies kein Problem - Sie müssen nur den zentralen Pin mit GND (Masse) verbinden und die Arbeitslogik umkehren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können es sich so vorstellen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l7/mb/g9/l7mbg9brlmkvgessopybebhbdcs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber es gibt noch ein Problem. Wir leben in einer unvollkommenen Welt, in der Knöpfe mechanischen Kontakt haben.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und er ist unvollkommen. </font><font style="vertical-align: inherit;">Und der Controller ist schnell - und so stellt sich heraus, dass der Knopf zum Zeitpunkt des Umschaltens nicht sofort schließt, sondern sein Widerstand einige Millisekunden lang springt - dies wird als Bounce bezeichnet. </font><font style="vertical-align: inherit;">Aufgrund des Abpralls kann der Controller entscheiden, dass die Taste mehr als einmal gedrückt wird, z. B. 10. Hier ist eine Illustration dieses Phänomens aus dem Internet: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gd/c5/go/gdc5gotfcoqhtr6olu6x5h6pclm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber es ist auch nicht interessant! </font><font style="vertical-align: inherit;">Vielleicht haben wir keinen Sprung. </font><font style="vertical-align: inherit;">Um das herauszufinden, habe ich einen Logikanalysator entdeckt. </font><font style="vertical-align: inherit;">Jetzt wollen wir mal sehen ... Wir bauen einen Testaufbau zusammen - einen 10-Com-Lift mit 16 Millionen Messungen pro Sekunde</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/cd/qr/tt/cdqrtt-opdlyxqnthdqoqmk_wzm.jpeg"><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sehen, dass das Drücken 0,1176 ms dauerte. Wir nähern uns dem </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/zm/nh/bazmnhv-ha-e9axyt_oxhddedsy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moment des Loslassens der Taste (rot hervorgehoben). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3z/ft/r7/3zftr7g_6xp1oexaizcaqwcwhao.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf der Seite gibt es einige Messungen der „Emissionen“, und das gesamte Rattern dauerte ungefähr 0,1435 ms. </font><font style="vertical-align: inherit;">Ja, ich weiß, dass dies nicht ausreicht, aber es lohnt sich zu bedenken, dass ich nur Knöpfe vom Band habe und die Kontakte noch keine Zeit hatten, zu oxidieren oder ihre Form zu ändern. </font><font style="vertical-align: inherit;">Und im Laufe der Zeit wird sich die Situation nur verschlechtern. </font><font style="vertical-align: inherit;">Wie gehe ich mit Bounce um? </font><font style="vertical-align: inherit;">Es gibt drei Hauptwege:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Schmidt Trigger + RC-Schaltung - ermöglicht es Ihnen, das perfekte Signal zu erhalten</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> RC-Schaltung - ermöglicht es Ihnen, die Emissionen zu reduzieren (Signal sanft ansteigend)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber wir haben einen ganzen Mikrocontroller - und deshalb stehen uns drei Methoden zur Verfügung: Verzögerungen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Möglichkeit, mit dem Geschwätz „auf der Stirn“ umzugehen, besteht darin, zu überprüfen, ob der Knopf nach einer Zeit, die offensichtlich mehr als ein Geschwätz ist, noch gedrückt wird. </font><font style="vertical-align: inherit;">Wenn der Code durch Verzögerungen implementiert wird, wird er blockiert. Wie dies richtig funktioniert, erfahren Sie in Hunderten von Artikeln über die Bekämpfung von Bounce und Arduino. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also haben wir festgestellt, dass der Knopf gedrückt wird - wie geht es weiter? </font><font style="vertical-align: inherit;">Teilen Sie dem Computer mit, dass STRG + C / V gedrückt ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies erfolgt mit der Standardbibliothek für Digispark. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der resultierende Code kam folgendermaßen heraus:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"DigiKeyboard.h"</span> <span class="hljs-comment">// library for emulate keyboard</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> COPY 2 <span class="hljs-comment">// copy button pin</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PASTE 0<span class="hljs-comment">// paste button pin</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> GND 1<span class="hljs-comment">// center must be connected to ground</span></span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{<font></font>
  pinMode(COPY, INPUT); <span class="hljs-comment">// set pin to input</span>
  digitalWrite(COPY, HIGH);<span class="hljs-comment">// turn on pullup</span><font></font>
  pinMode(PASTE, INPUT);<font></font>
  digitalWrite(PASTE, HIGH);<font></font>
  pinMode(GND, OUTPUT); <span class="hljs-comment">// set pin to output</span>
  digitalWrite(GND, LOW);<span class="hljs-comment">// and set on pin GND</span><font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// if something COPY or PASTE clicked</span>
  <span class="hljs-keyword">if</span> (!digitalRead(COPY) || !digitalRead(PASTE)) {<font></font>
    delay(<span class="hljs-number">30</span>); <span class="hljs-comment">// wait(debounce)</span>
    <span class="hljs-keyword">if</span> (!digitalRead(COPY)) { <span class="hljs-comment">// if copy still pressed send CTRL+C</span><font></font>
      DigiKeyboard.sendKeyStroke(KEY_C , MOD_CONTROL_LEFT);<font></font>
      delay(<span class="hljs-number">30</span>);<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!digitalRead(PASTE)) {<span class="hljs-comment">// if paste still pressed send CTRL+V</span><font></font>
      DigiKeyboard.sendKeyStroke(KEY_V , MOD_CONTROL_LEFT);<font></font>
      delay(<span class="hljs-number">200</span>);<font></font>
    }<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist ein Projekt in 3 Stunden, das ich bekommen habe. </font><font style="vertical-align: inherit;">Haben Sie keine Angst, den Code eines anderen zu kopieren!</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kopieren und Einfügen aus dem Stapelüberlauf</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/wp/hc/0v/wphc0vxkxwxcaxrynjt1okcq4ng.jpeg"><br>
</div>
                    </div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de502770/index.html">Wir enthüllen ProLock: Analyse der Aktionen der neuen Ransomware-Betreiber mithilfe der MITRE ATT & CK-Matrix</a></li>
<li><a href="../de502772/index.html">So erstellen Sie einen PostgreSQL-Server in Google Cloud Platform SQL</a></li>
<li><a href="../de502782/index.html">Joel Spolsky: Abstraktionsstufe für Entwickler</a></li>
<li><a href="../de502786/index.html">Die Überschrift "Artikel für Sie lesen." April 2020. Teil 1</a></li>
<li><a href="../de502788/index.html">Hackathon in einem oder Leben nach Dude</a></li>
<li><a href="../de502812/index.html">Mehr Spaß. Ich bin ernst</a></li>
<li><a href="../de502816/index.html">Die Mythen der semantischen Technologie</a></li>
<li><a href="../de502818/index.html">Y Messenger: Dezentraler Messenger in der Blockchain *</a></li>
<li><a href="../de502826/index.html">3D Creaform MetraSCAN 3D Scanner Übersicht</a></li>
<li><a href="../de502830/index.html">Online Hackathon "New Reality" VirusHack. Wie war es</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>