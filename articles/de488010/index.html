<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí™üèæ üóëÔ∏è üí† Domain Driven Design Tools ‚õ™Ô∏è üë©üèº‚Äçü§ù‚Äçüë®üèæ üçÖ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der Blauwal ist ein gro√üartiges Beispiel daf√ºr, wie das Design eines komplexen Projekts schief gelaufen ist. Der Wal sieht aus wie ein Fisch, ist aber...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Domain Driven Design Tools</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/488010/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Blauwal ist ein gro√üartiges Beispiel daf√ºr, wie das Design eines komplexen Projekts schief gelaufen ist. Der Wal sieht aus wie ein Fisch, ist aber ein S√§ugetier: Er f√ºttert die Jungen mit Milch, er hat Wolle, und die Knochen des Unterarms und der H√§nde mit den Fingern sind wie an Land in den Flossen erhalten. Er lebt in den Ozeanen, kann aber unter Wasser nicht atmen und steigt regelm√§√üig an die Oberfl√§che, um Luft zu schlucken, auch wenn er schl√§ft. Der Wal ist das gr√∂√üte Tier der Welt, hat die L√§nge eines neunst√∂ckigen Hauses und wiegt 75 Volkswagen Touareg-Autos, ist aber kein Raubtier, sondern ern√§hrt sich von Plankton.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als die Entwickler am Wal arbeiteten, fingen sie nicht an, alles von Grund auf neu zu schreiben, sondern nutzten die Erfahrungen aus alten Projekten. Es scheint aus inkompatiblen Teilen des Codes zusammengeschustert zu sein, die nicht getestet wurden, und das gesamte Design bestand darin, ein Framework zu w√§hlen und dringend bereits in der Produktion zu ‚Äûradeln‚Äú. Infolgedessen erwies sich das Projekt als wundersch√∂n, aber mit dichtem Erbe und Kr√ºcken unter der Haube. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/to/9e/qb/to9eqb8yxhrfep8tl32q9augiv4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um Projekte zu entwickeln, mit denen Unternehmen Geld verdienen k√∂nnen, anstatt wie ein Meerestier auszusehen, das unter Wasser nicht atmen kann, gibt es DDD. Dies ist ein Ansatz, der sich nicht auf Tools oder Code konzentriert, sondern auf das Studium des Themenbereichs, einzelner Gesch√§ftsprozesse und der Funktionsweise von Code oder Tools f√ºr die Gesch√§ftslogik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was ist DDD und welche Tools sind darin enthalten? Wir werden in einem Artikel basierend auf dem Bericht erz√§hlen</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artyom Malyshev</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Der DDD-Ansatz in Python, Tools, Fallstricke, Vertragsprogrammierung und Produktdesign rund um das zu l√∂sende Problem und nicht das verwendete Framework sind unter dem Strich.</font></font><br>
<a name="habracut"></a><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/LqTPRCLZffE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vollst√§ndige Pr√§sentation des Berichts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font></i><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artem Malyshev</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proofit404</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) - Ein unabh√§ngiger Entwickler, der 5 Jahre in Python geschrieben hat, hat aktiv mit Django Channels 1.0 geholfen. </font><font style="vertical-align: inherit;">Sp√§ter konzentrierte er sich auf architektonische Ans√§tze: Er untersuchte, welche Werkzeuge Python-Architekten fehlen, und startete ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dry-Python-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Projekt </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mitbegr√ºnder von Drylabs.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komplexit√§t</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was ist Programmierung?</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Programmieren ist ein st√§ndiger Kampf mit der Komplexit√§t, die Entwickler selbst erzeugen, wenn sie versuchen, Probleme zu l√∂sen.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Komplexit√§t wird in zwei Typen unterteilt: eingef√ºhrt und nat√ºrlich. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die vorgestellte Version</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erweitert sich um Programmiersprachen, Frameworks, Betriebssysteme und Asynchronit√§tsmodelle. </font><font style="vertical-align: inherit;">Dies ist eine </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">technische Herausforderung</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die nicht f√ºr Unternehmen gilt. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nat√ºrliche</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Komplexit√§t ist im Produkt verborgen und vereinfacht das Leben der Benutzer - daf√ºr zahlen die Menschen Geld.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gute Ingenieure sollten die zus√§tzliche Komplexit√§t reduzieren und die nat√ºrliche erh√∂hen, um den Nutzen des Produkts zu erh√∂hen.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aber wir Programmierer sind komplexe Leute und wir lieben es, Projekten technische Komplexit√§t zu verleihen. Zum Beispiel haben wir uns nicht mit Codierungsstandards besch√§ftigt, keine linternen, modularen Entwurfspraktiken verwendet und in Projekten viel Stilcode erhalten </font></font><code>if c==1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie arbeite ich mit solchem ‚Äã‚ÄãCode? Lesen Sie viele Dateien, verstehen Sie Variablen, Bedingungen und wann und wie alles funktionieren wird. Dieser Code ist schwer zu merken - absolut technisch zus√§tzliche Komplexit√§t. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiteres Beispiel f√ºr zus√§tzliche Komplexit√§t ist meine Lieblings-R√ºckruf-H√∂lle. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pa/1h/s5/pa1hs5z7giwwav8wxyvbllgqdaw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir im Rahmen einer ereignisorientierten Architektur (EDA) schreiben und ein nicht so gutes modernes Rahmenwerk w√§hlen, erhalten wir einen Code, in dem nicht klar ist, was wann passiert. Es ist schwer, einen solchen Code zu lesen - dies ist wiederum die zus√§tzliche Komplexit√§t.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Programmierer lieben nicht nur technische Schwierigkeiten, sondern argumentieren auch, welche besser ist:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AsyncIO oder Gevent;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL oder MongoDB;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python oder Go;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Emacs oder Vim;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabulatoren oder Leerzeichen;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die richtige Antwort eines guten Programmierers auf all diese Fragen: "Es macht keinen Unterschied!" </font><font style="vertical-align: inherit;">Gute Entwickler streiten sich nicht im luftleeren Raum √ºber kugelf√∂rmige Pferde, sondern l√∂sen gesch√§ftliche Probleme und arbeiten an der N√ºtzlichkeit des Produkts. </font><font style="vertical-align: inherit;">Einige von ihnen haben seit langem eine Reihe von Praktiken etabliert, die die eingef√ºhrte Komplexit√§t reduzieren und Ihnen helfen, mehr √ºber das Gesch√§ft nachzudenken. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einer von ihnen ist </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eric Evans</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">2004 schrieb er das Buch Domain Driven Design. </font><font style="vertical-align: inherit;">Sie ‚Äûschoss‚Äú und gab den Impuls, mehr √ºber das Gesch√§ft nachzudenken und die technischen Details in den Hintergrund zu r√ºcken.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/v6/4p/kr/v64pkrz6lrqylss53fxhvojvock.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist DDD?</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zuerst eine L√∂sung f√ºr das Problem und dann Werkzeuge</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Zun√§chst investierte Evans in das Konzept von DDD, dass dies keine Technologie, sondern eine Philosophie ist. In der Philosophie m√ºssen Sie zuerst dar√ºber nachdenken, wie Sie das Problem l√∂sen k√∂nnen, und erst dann mit Hilfe der Tools. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeiten Sie mit Fachexperten und Softwareentwicklern an Modellen.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wir m√ºssen mit Menschen aus der Wirtschaft kommunizieren: Suchen Sie nach einer gemeinsamen Sprache, bauen Sie ein Modell der Welt auf, in der unser Produkt funktioniert, und l√∂sen Sie Probleme. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schreiben Sie Software, die Modelle explizit ausdr√ºckt</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Der wichtigste Unterschied zwischen DDD und einfacher Zusammenarbeit in einem Team besteht darin, dass wir Software im gleichen Stil schreiben sollten, wie wir mit Domain-Experten sprechen. </font><font style="vertical-align: inherit;">Alle Begriffe, Ans√§tze zur Diskussion und Entscheidungsfindung sollten im Quellcode gespeichert werden, damit auch eine nicht technische Person verstehen kann, was dort passiert. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sprechen Sie die gleiche Sprache mit dem Gesch√§ft</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">DDD ist eine Philosophie, wie man mit Gesch√§ftsexperten in einem bestimmten Bereich dieselbe Sprache spricht und Terminologie auf diesen Bereich anwendet. </font><font style="vertical-align: inherit;">Wir haben eine gemeinsame Sprache oder einen gemeinsamen Dialekt innerhalb des gebundenen Kontexts, den wir f√ºr wahr halten. </font><font style="vertical-align: inherit;">Wir schaffen Grenzen um architektonische L√∂sungen.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei DDD geht es nicht um Technologie.</font></font></blockquote><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zuerst der technische Teil, dann - DDD.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Der Bildhauer, der die Statue aus Stein schnitzt, liest das Handbuch zum Halten von Hammer und Mei√üel nicht - er wei√ü bereits, wie man mit ihnen arbeitet. Um DDD in Ihr Projekt zu bringen, beherrschen Sie den technischen Teil: Lernen Sie Django bis zum Ende, lesen Sie das Tutorial und h√∂ren Sie auf zu streiten, ob Sie PostgreSQL oder MongoDB verwenden m√∂chten. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die meisten Entwurfsmuster und -muster sind technisches Rauschen.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die meisten Muster, die wir kennen und verwenden, sind technisch. Sie sagen, wie man Code wiederverwendet, wie man ihn strukturiert, aber sie sagen nicht, wie man ihn f√ºr Benutzer, Unternehmen und das Modellieren der Au√üenwelt verwendet. Daher sind Fabriken oder abstrakte Klassen lose an DDD gebunden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das erste ‚Äûblaue‚Äú Buch erschien vor fast 20 Jahren. Die Leute versuchten, in diesem Stil zu schreiben, gingen einen Rechen und stellten fest, dass die Philosophie gut, aber in der Praxis unverst√§ndlich ist. Daher erschien ein zweites Buch - "rot" - dar√ºber, wie Programmierer in DDD denken und schreiben. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j3/nf/dd/j3nfdd-vnh3shjuuxvxrh7ogwj8.jpeg"><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die "roten" und "blauen" B√ºcher sind die S√§ulen, auf denen alle DDD stehen. </font></font></em><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis. Die roten und blauen B√ºcher sind eine einzigartige Informationsquelle √ºber DDD, aber sie sind schwer. B√ºcher sind nicht leicht zu lesen: im Original wegen der komplexen Sprache und Begriffe und auf Russisch wegen der schlechten √úbersetzung. Beginnen Sie daher mit einem </font></font></em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gr√ºnen</font></font></em></a><font style="vertical-align: inherit;"><em><font style="vertical-align: inherit;"> Buch </font></em><em><font style="vertical-align: inherit;">, DDD zu lernen </font></em></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dies ist eine vereinfachte Version der ersten beiden mit einfacheren Beispielen und allgemeinen Beschreibungen. Aber es ist besser, als wenn die roten und blauen B√ºcher Ihren Wunsch, DDD zu studieren und anzuwenden, zunichte machen. Es ist besser, das Original einzulesen.</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das rote Buch √ºberspringt die Idee, wie DDD am besten in das Projekt einbezogen werden kann und wie die Arbeit um diesen Ansatz herum strukturiert werden kann. </font><font style="vertical-align: inherit;">Es erscheint eine neue Terminologie - ‚ÄûModel-Driven Design‚Äú, bei der unser Modell der Au√üenwelt an erster Stelle steht. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bq/oj/65/bqoj653kebtxlaj7fkvbcx8xhq8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die einzige Ortstechnologie, die ausgew√§hlt wird, ist Smart UI. </font><font style="vertical-align: inherit;">Dies ist eine Schicht zwischen der Au√üenwelt, dem Benutzer und uns (ein Hinweis auf Robert Martin und seine saubere Architektur mit Schichten). </font><font style="vertical-align: inherit;">Wie Sie sehen k√∂nnen, geht alles zum Modell. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist ein Modell? </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies ist der Phantomschmerz eines jeden Architekten. </font><font style="vertical-align: inherit;">Jeder denkt, das ist UML, aber das ist es nicht.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Modell besteht aus einer Reihe von Klassen, Methoden und Verkn√ºpfungen zwischen ihnen, die die Gesch√§ftsszenarien im Programm widerspiegeln.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Modell spiegelt ein reales Objekt mit allen notwendigen Eigenschaften und Funktionen wider. </font><font style="vertical-align: inherit;">Dies ist ein Toolkit auf hoher Ebene, mit dem Entscheidungen aus Sicht von Gesch√§ftsf√§llen getroffen werden k√∂nnen. </font><font style="vertical-align: inherit;">Methoden und Klassen sind jedoch ein einfaches Toolkit f√ºr Architekturl√∂sungen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trockene Python</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Modellnische zu f√ºllen, habe ich ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dry-Python-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Projekt gestartet </font><font style="vertical-align: inherit;">, das sich zu einer </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sammlung hochrangiger Architekturbibliotheken</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f√ºr das Erstellen von Model Driven Design entwickelt hat. </font><font style="vertical-align: inherit;">Jede der Bibliotheken versucht, einen Kreis in der Architektur zu schlie√üen und st√∂rt den anderen nicht. </font><font style="vertical-align: inherit;">Bibliotheken k√∂nnen einzeln oder zusammen verwendet werden, wenn Sie einen Geschmack bekommen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/un/kb/am/unkbampyzrvkbwwjwd4amsiahuw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Reihenfolge der Erz√§hlung entspricht der Chronologie der optimalen Hinzuf√ºgung von DDD zum Projekt - nach Schichten. </font><font style="vertical-align: inherit;">Die erste Schicht sind </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Services</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , eine Beschreibung der Gesch√§ftsszenarien (Prozesse) in unserem System. </font><font style="vertical-align: inherit;">Die Stories-Bibliothek ist f√ºr diese Ebene verantwortlich.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geschichten</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gesch√§ftsszenarien sind in drei Teile unterteilt:</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spezifikation</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - eine Beschreibung des Gesch√§ftsprozesses;</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Zustand,</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in dem das Gesch√§ftsszenario existieren kann</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementierung</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jedes Schritts des Skripts.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Teile d√ºrfen nicht gemischt werden. </font><font style="vertical-align: inherit;">Die Stories-Bibliothek trennt diese Teile und zeichnet eine klare Linie zwischen ihnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betrachten Sie die Einf√ºhrung von DDD und Stories anhand eines Beispiels. </font><font style="vertical-align: inherit;">Zum Beispiel haben wir ein Projekt √ºber Django mit einer Mischung aus Django-Signalen und obskuren ‚Äûdicken‚Äú Modellen. </font><font style="vertical-align: inherit;">F√ºgen Sie ein leeres Servicepaket hinzu. </font><font style="vertical-align: inherit;">Mit der Stories-Bibliothek in Teilen schreiben wir diesen Hash in einen klaren und verst√§ndlichen Satz von Skripten in unserem Projekt um. </font></font><br>
<img src="https://habrastorage.org/webt/lo/r9/st/lor9stle7ok2tx_eiv4nx931abs.png"><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSL-Spezifikation. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In der Bibliothek k√∂nnen Sie eine Spezifikation schreiben und hierf√ºr DSL bereitstellen. </font><font style="vertical-align: inherit;">Auf diese Weise k√∂nnen Benutzeraktionen Schritt f√ºr Schritt beschrieben werden. </font><font style="vertical-align: inherit;">Zum Kaufen </font></font><code>subscription</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">folge ich </font><font style="vertical-align: inherit;">zum Beispiel </font><font style="vertical-align: inherit;">mehreren Schritten: Ich finde eine Bestellung, √ºberpr√ºfe die Relevanz des Preises und pr√ºfe, ob der Benutzer es sich leisten kann. </font><font style="vertical-align: inherit;">Dies ist eine allgemeine Beschreibung. </font></font><br>
<img src="https://habrastorage.org/webt/pf/uy/rk/pfuyrkvzoktrxxjurabhbzfwmka.png"><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vertrag.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unterhalb dieser Klasse schreiben wir einen Vertrag √ºber den Stand des Gesch√§ftsszenarios. Zu diesem Zweck bezeichnen wir den Bereich der Variablen, die im Gesch√§ftsprozess auftreten, und weisen jeder Variablen eine Reihe von Validatoren zu. </font></font><br>
<img src="https://habrastorage.org/webt/e0/qy/de/e0qydendpyyrti651302r_6dxnm.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobald jemand versucht, diesem Bereich im Rahmen des Gesch√§ftsprozesses eine Variable zuzuweisen, wird eine Reihe von Validatoren ausgearbeitet. Wir werden sicher sein, dass der Status des Prozesses zur Laufzeit immer funktioniert. Aber wenn nicht, f√§llt es schmerzhaft und schreit laut dar√ºber. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Umsetzungsphase jedes Schritts</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In derselben Klasse </font></font><code>subscription</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">schreiben wir eine Reihe von Methoden, deren Namen Gesch√§ftsschritten entsprechen. Jede Eingabemethode erh√§lt einen Status, mit dem sie arbeiten kann, hat jedoch nicht das Recht, sie zu √§ndern. Die Methode gibt m√∂glicherweise einen Marker zur√ºck und meldet:</font></font><br>
<br>
<ul>
<li>  ,       ()   ;</li>
<li>  -   ,      .</li>
</ul><br>
<img src="https://habrastorage.org/webt/ny/pe/_-/nype_-46uz-nuannwmrcfsrhojq.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt komplexere Markierungen: Sie k√∂nnen best√§tigen, dass der Status funktioniert, einige Teile des Gesch√§ftsprozesses l√∂schen oder √§ndern. Sie k√∂nnen auch in Klassen schreiben. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Story starten.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wie starte ich Story bei der Ausf√ºhrung? Dies ist ein Gesch√§ftsobjekt, das als Methode funktioniert: Wir √ºbertragen Daten an die Eingabe, validieren sie und interpretieren die Schritte. Die laufende Story merkt sich den Ausf√ºhrungsverlauf, zeichnet den Status auf, der im Gesch√§ftsprozess darin aufgetreten ist, und gibt an, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wer diesen Status beeinflusst hat</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<img src="https://habrastorage.org/webt/o7/e7/s5/o7e7s53zun6l9mprpqg-vkerp-s.png"><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Debug-Symbolleiste.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wenn wir in Django schreiben und das Debug-Panel verwenden, k√∂nnen wir sehen, welche Gesch√§ftsszenarien in jeder Anfrage verarbeitet wurden und welchen Status sie haben. </font></font><br>
<img src="https://habrastorage.org/webt/i8/td/aq/i8tdaqss6_wf7uk0e6sdifdqhau.png"><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Py.test</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Wenn wir in py.test schreiben, k√∂nnen wir f√ºr den gefallenen Test sehen, welche Gesch√§ftsskripte in jeder Zeile ausgef√ºhrt wurden und was schief gelaufen ist. Dies ist praktisch - anstatt den Code einzugeben, lesen wir die Spezifikation und verstehen, was passiert ist. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4f/pr/gc/4fprgcpruxp3bbpgcapv7rc44je.png"><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wache.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Noch besser, wenn wir den Fehler 500 erhalten. In einem regul√§ren System lassen wir uns damit ab und beginnen zu untersuchen. In Sentry wird ein detaillierter Bericht dar√ºber angezeigt, was der Benutzer getan hat, um den Fehler zu machen. Es ist bequem und angenehm, wenn um 3 Uhr morgens solche Informationen f√ºr Sie gesammelt wurden. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qk/dy/js/qkdyjspvszlg7vzy803gfqmpt5k.png"><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ELK</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Jetzt arbeiten wir aktiv an einem Plugin, das all dies in Elasticsearch in den Kibana-Stack schreibt und kompetente Indizes erstellt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/df/7i/7d/df7i7dk01va0ekvv7sxlkdhz9pg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Beispiel haben wir einen Vertrag √ºber den Status eines Gesch√§ftsprozesses. Wir wissen zum Beispiel, was da ist</font></font><code>relation ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bericht. </font><font style="vertical-align: inherit;">Anstatt archaisch zu recherchieren, was einst dort passiert ist, schreiben wir eine Anfrage in Kibana. </font><font style="vertical-align: inherit;">Es werden alle Geschichten angezeigt, die sich auf einen bestimmten Benutzer beziehen. </font><font style="vertical-align: inherit;">Als n√§chstes untersuchen wir den Zustand innerhalb unserer Gesch√§ftsprozesse und Gesch√§ftsszenarien. </font><font style="vertical-align: inherit;">Wir schreiben keine einzige Zeile Protokollierungscode, aber das Projekt wird auf der Abstraktionsebene protokolliert, auf der wir es sehen m√∂chten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber ich m√∂chte etwas H√∂heres, zum Beispiel leichte Objekte. </font><font style="vertical-align: inherit;">Solche Objekte enthalten gebildete Datenstrukturen und -methoden, die sich auf die Annahme von Gesch√§ftsentscheidungen beziehen und beispielsweise nicht auf die Arbeit mit der Datenbank. </font><font style="vertical-align: inherit;">Daher fahren wir mit dem n√§chsten Teil der modellgetriebenen Architektur fort - Entit√§ten, Aggregate und Wertobjekte.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oh/c4/hh/ohc4hhk6ru1lrn-ohyrp83byn1w.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entit√§ten, Aggregate und Wertobjekte</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie ist das alles miteinander verbunden? Zum Beispiel gibt ein Benutzer eine Produktbestellung auf und wir berechnen. Was ist die Wurzel der Aggregation und was ist ein einfaches Objekt? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ml/4g/kc/ml4gkcmc0-hajo2sk5apaklct6y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles, was unterstrichen wird, ist die Wurzel der Aggregation. Damit m√∂chte ich direkt arbeiten: wichtig, wertvoll, ganzheitlich. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wo soll ich anfangen?</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wir werden im Projekt ein leeres Paket erstellen, in das wir unsere Einheiten stellen. Aggregate werden besser mit etwas Deklarativem wie </font></font><code>dataclasses</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder geschrieben </font></font><code>attrs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<img src="https://habrastorage.org/webt/7e/0z/dx/7e0zdxqhapwuerqxbs8zf6wocse.png"><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datenklassen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wenn </font></font><code>dataclass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wir eine </font><font style="vertical-align: inherit;">Art </font><font style="vertical-align: inherit;">Aggregat angeben, schreiben wir mit </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewType</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eine Anmerkung </font><strong><font style="vertical-align: inherit;">dazu</font></strong><font style="vertical-align: inherit;"> . In der Anmerkung geben wir eine explizite Referenz an, die im Typsystem ausgedr√ºckt wird. Wenn es sich </font></font><code>dataclass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nur um eine Datenstruktur (Entit√§t) handelt, speichern Sie sie im Aggregat.</font></font><br>
<img src="https://habrastorage.org/webt/9y/g3/fe/9yg3fe7qn2_xj6pas4m1hewhikc.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Kontext von Geschichten k√∂nnen nur Aggregate l√ºgen. </font><font style="vertical-align: inherit;">Der Zugriff auf etwas, das in sie eingebettet ist, kann nur √ºber √∂ffentliche Methoden und Regeln auf hoher Ebene erfolgen. </font><font style="vertical-align: inherit;">Auf diese Weise k√∂nnen Sie logisch und kompetent ein Modell erstellen, √ºber das wir mit Experten aus dem Fachgebiet zusammenarbeiten. </font><font style="vertical-align: inherit;">Dies ist dieselbe </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einzelne Sprache</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xj/ov/7s/xjov7shv-7gsu-u0w6c6aejxkq8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Problem tritt sofort auf - Repositories. </font><font style="vertical-align: inherit;">Ich habe eine Datenbank, mit der ich √ºber Django arbeite, einen nahe gelegenen Microservice, an den ich Anfragen sende. Es gibt JSON und eine Instanz des Django-Modells. </font><font style="vertical-align: inherit;">Daten empfangen und von Hand √ºbertragen, nur um die Methode sch√∂n aufzurufen oder zu testen? </font><font style="vertical-align: inherit;">Nein, nat√ºrlich. </font><font style="vertical-align: inherit;">Dry-Python verf√ºgt √ºber eine Mappers-Bibliothek, mit der Sie Abstraktionen und Dom√§nenaggregate auf hoher Ebene den Orten zuordnen k√∂nnen, an denen wir sie speichern.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapper</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir f√ºgen unserem Projekt ein weiteres Paket hinzu - ein Repository, in dem wir unser speichern werden </font></font><code>mappers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Auf diese Weise √ºbertragen wir Gesch√§ftslogik auf hoher Ebene in die reale Welt. </font></font><br>
<img src="https://habrastorage.org/webt/gt/w8/zu/gtw8zusqmldesc-5m-sanew8hxy.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Beispiel k√∂nnen wir beschreiben, wie wir eines </font></font><code>dataclass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einem Django-Modell zuordnen. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django ORM.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wir vergleichen das Bestellmodell mit der Beschreibung von Django ORM - wir betrachten die Felder. </font></font><br>
<img src="https://habrastorage.org/webt/gw/cp/v8/gwcpv8rjs4cs592qvob0tu0t_rw.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Beispiel k√∂nnen wir einige Felder √ºber die optionale Konfiguration neu schreiben. Folgendes wird passieren: </font></font><code>mapper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">W√§hrend der Deklaration wird verglichen, wie das </font></font><code>dataclass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modell </font><font style="vertical-align: inherit;">geschrieben wird </font><font style="vertical-align: inherit;">. Beispielsweise entsprechen Anmerkungen </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(in </font></font><code>Order dataclass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einem Feld </font></font><code>cost</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit Anmerkungen </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) im Django-Modell </font></font><code>integer field</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der Option </font></font><code>nullable="true"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Hier wird es </font></font><code>dataclass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bieten hinzuf√ºgen </font></font><code>optional</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zu </font></font><code>dataclass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, oder zu entfernen</font></font><code>nullable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von </font></font><code>field</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√úber Mappers k√∂nnen Sie Funktionen hinzuf√ºgen, die etwas lesen oder schreiben. Leser sind Funktionen, die am Eingang ein Aggregat empfangen und einen Verweis darauf zur√ºckgeben. Autoren machen das Gegenteil - Einheiten zur√ºckgeben. Unter der Haube kann beispielsweise eine Anfrage an die Datenbank √ºber Django erfolgen. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swagger Definitionen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die gleichen Operationen k√∂nnen mit Microservices durchgef√ºhrt werden. Sie k√∂nnen einen Teil des Swagger-Schemas darauf schreiben und √ºberpr√ºfen, inwieweit das Swagger-Schema eines bestimmten Dienstes mit Ihren Domain-Modellen √ºbereinstimmt. Au√üerdem wird die zur√ºckgegebene Anforderung aus der Anforderungsbibliothek transparent in √ºbersetzt </font></font><code>dataclass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<img src="https://habrastorage.org/webt/sk/2k/rv/sk2krveeieqjqkd5gmcn1hxettc.png"><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GraphQL-Abfragen.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> GraphQL und Microservices: Das Schema des GraphQL-Schnittstellentyps funktioniert gut dagegen</font></font><code>dataclass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Sie k√∂nnen bestimmte GraphQL-Abfragen in interne Datenstrukturen √ºbersetzen. </font></font><br>
<img src="https://habrastorage.org/webt/th/om/j0/thomj0ho9pgvu-n8_w7uhkvlmz4.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Warum sollten Sie sich mit dem internen Datenmodell auf hoher Ebene in der Anwendung besch√§ftigen? Um das ‚ÄûWarum‚Äú zu veranschaulichen, werde ich eine ‚Äûunterhaltsame‚Äú Geschichte erz√§hlen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einem unserer Projekte arbeiteten Web-Sockets √ºber den Pusher-Service. Wir haben uns nicht darum gek√ºmmert, wir haben es in eine Schnittstelle eingewickelt, um nicht direkt anzurufen. Diese Schnittstelle war in allen Geschichten gebunden und war zufrieden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die gesch√§ftlichen Anforderungen haben sich jedoch ge√§ndert. Es stellte sich heraus, dass die Garantien, die Pusher f√ºr Web-Sockets bietet, nicht ausreichen. Beispielsweise ben√∂tigen Sie eine garantierte Nachrichten√ºbermittlung und einen garantierten Nachrichtenverlauf f√ºr die letzten 2 Minuten. Aus diesem Grund haben wir uns f√ºr den Ably Realtime-Service entschieden. Es hat auch eine Schnittstelle - wir werden einen Adapter schreiben und ihn √ºberall binden, alles wird gro√üartig. Nicht wirklich.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die von Pusher verwendeten Abstraktionen (Funktionsargumente) sind in jedem Gesch√§ftsobjekt eingeschlossen. </font><font style="vertical-align: inherit;">Ich musste ungef√§hr 100 Geschichten reparieren und die Bildung des Benutzerkanals korrigieren, an den wir etwas senden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zur√ºck zu den Tests.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tests &amp; Mocks</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie testen Sie dieses Verhalten normalerweise mit externen Diensten? </font><font style="vertical-align: inherit;">Wir machen etwas nass, wir beobachten, wie eine Bibliothek eines Drittanbieters aufgerufen wird, und das ist alles - wir sind sicher, dass alles in Ordnung ist. </font><font style="vertical-align: inherit;">Wenn sich die Bibliothek √§ndert, √§ndern sich auch die Argumentformate. </font></font><br>
<img src="https://habrastorage.org/webt/zo/ey/34/zoey341uas00jfbgt0e5nld69ta.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen eine Woche sparen, indem Sie Tausende von Tests und Hunderte von Gesch√§ftsf√§llen neu schreiben, wenn Sie das Verhalten des internen Modells anders testen. </font><font style="vertical-align: inherit;">Zum Beispiel √§hnlich wie beim Integrationstest: Wir schreiben in den Benutzer-Stream und √ºbersetzen diesen Stream bereits im Adapter, Pusher oder Ably in den Namen des normalen Kanals, um nicht alles in die Gesch√§ftslogik zu schreiben.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abh√§ngigkeiten</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einer solchen Modellarchitektur erscheinen viele √ºberfl√ºssige Entit√§ten. </font><font style="vertical-align: inherit;">Zuvor haben wir eine Art Django-Funktion √ºbernommen und geschrieben: Anfrage, Antwort, minimale K√∂rperbewegungen. </font><font style="vertical-align: inherit;">Hier m√ºssen Sie die Mapper initialisieren, Stories eingeben und initialisieren, die Anforderungszeile der HTTP-Anforderung verarbeiten und sehen, welche Antwort Sie geben m√ºssen. </font><font style="vertical-align: inherit;">All dies f√ºhrt zu 30-50 Zeilen Boilerplate-Aufrufcode-Geschichten in der Django-Ansicht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Andererseits haben wir bereits Schnittstellen und Mapper geschrieben. </font><font style="vertical-align: inherit;">Wir k√∂nnen ihre Kompatibilit√§t mit einem bestimmten Gesch√§ftsfall √ºberpr√ºfen, beispielsweise mithilfe der Abh√§ngigkeitsbibliothek. </font><font style="vertical-align: inherit;">Wie? </font><font style="vertical-align: inherit;">Durch das Abh√§ngigkeitsinjektionsmuster wird alles deklarativ auf eine minimale Kesselplatte geklebt. </font></font><br>
<img src="https://habrastorage.org/webt/w9/_5/th/w9_5thkcuryvswlpy39x8dpkoio.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier geben wir die Aufgabe an, eine Klasse in das Servicepaket aufzunehmen, setzen Sie drei</font></font><code>mappers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, initialisiere das Stories-Objekt und gib es uns. </font><font style="vertical-align: inherit;">Mit diesem Ansatz wird die Anzahl der Boilerplates im Code enorm reduziert.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Refactoring-Karte</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit allem, wor√ºber ich gesprochen habe, haben wir ein Schema entwickelt, mit dem wir ein gro√ües Projekt von Django-Signalen (implizite "R√ºckruf-H√∂lle") mit DDD nach Django umgeschrieben haben. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der erste Schritt ohne DDD</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Zuerst hatten wir kein DDD - wir haben MVP geschrieben. Als sie ihr erstes Geld verdienten, luden sie Investoren ein und √ºberzeugten sie, zu DDD zu wechseln. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geschichten ohne Vertr√§ge.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wir haben das Projekt in logische Gesch√§ftsf√§lle ohne Datenvertr√§ge unterteilt. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vertr√§ge und Aggregate</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Anschlie√üend haben wir nacheinander den Datenvertrag f√ºr jedes Modell gezogen, der in unserer Architektur nachverfolgt werden kann. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapper</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mappers haben geschrieben, um Data Warehouse-Vorlagen loszuwerden. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abh√§ngigkeitsinjektion</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Klebemuster loswerden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Ihr Projekt aus MVP herausgewachsen ist und dringend in der Architektur ge√§ndert werden muss, damit es nicht in das Erbe √ºbergeht, schauen Sie in Richtung DDD.</font></font><br>
<br>
<blockquote>     legacy  Python-,     ,    ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Moscow Python Conf++</a> 27 .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a>        Python       .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">unconference</a>,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>, ,   Drylabs.<br>
<br>
  DDD    Python,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TechLead Conf</a> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">    </a>   IT-,    DDD .   8 , Call for Papers   6 .</blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de487996/index.html">Wie Skripttreiber und Serverm√ºtter die IT √ºbernehmen</a></li>
<li><a href="../de488000/index.html">Tesla Plaid. Zwei Optionen f√ºr die Anordnung von drei Motorantrieben</a></li>
<li><a href="../de488002/index.html">Der Fall eines Geeks</a></li>
<li><a href="../de488006/index.html">Sprechen Sie bei Moscow Python Conf ++ mit den Sprachentwicklern</a></li>
<li><a href="../de488008/index.html">Das Biest z√§hmen: Legacy-Code, Tests und Sie</a></li>
<li><a href="../de488012/index.html">Parken f√ºr Ihre Nachteile</a></li>
<li><a href="../de488014/index.html">9. Fortinet Erste Schritte v6.0. Protokollierung und Berichterstellung</a></li>
<li><a href="../de488018/index.html">CAPTCHA, Sonderfall: Wir unterbrechen ein neuronales Netzwerk mit drei√üig Codezeilen</a></li>
<li><a href="../de488020/index.html">Vivaldi 2.11 - One Touch Beauty</a></li>
<li><a href="../de488024/index.html">Fantastische Beratungsschl√∂sser und wo sie leben</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>