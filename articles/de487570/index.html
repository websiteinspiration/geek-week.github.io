<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ôüèº üì§ üîã Redis Best Practices, Teil 2 üõ•Ô∏è üèÜ üôçüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der zweite Teil des Redis Best Practices-√úbersetzungszyklus von Redis Labs behandelt Interaktionsmuster und Datenspeichermuster.
 Der erste Teil ist h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Redis Best Practices, Teil 2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487570/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der zweite Teil des Redis Best Practices-√úbersetzungszyklus von Redis Labs behandelt Interaktionsmuster und Datenspeichermuster.</font></font><div style="text-align:center;"><img src="https://habrastorage.org/webt/hr/6y/f5/hr6yf5w1hp0fh-i5vfa0p1pxeuy.png" width="15%"></div><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der erste Teil ist </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interaktionsmuster</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redis kann nicht nur als traditionelles DBMS fungieren, sondern seine Strukturen und Befehle k√∂nnen auch zum Austausch von Nachrichten zwischen Mikrodiensten oder Prozessen verwendet werden. </font><font style="vertical-align: inherit;">Durch die weit verbreitete Verwendung von Redis-Clients, die Geschwindigkeit und Effizienz des Servers und des Protokolls sowie die integrierten klassischen Strukturen k√∂nnen Sie Ihre eigenen Workflows und Ereignismechanismen erstellen. </font><font style="vertical-align: inherit;">In diesem Kapitel werden die folgenden Themen behandelt:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warteschlange der Ereignisse;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blockieren mit Redlock;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pub / Sub;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verteilte Ereignisse.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ereigniswarteschlange</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listen in Redis sind geordnete Zeilenlisten, die verkn√ºpften Listen, mit denen Sie m√∂glicherweise vertraut sind, sehr √§hnlich sind. Das Hinzuf√ºgen eines Werts zu einer Liste (Push) und das L√∂schen eines Werts aus einer Liste (Pop) sind sehr einfache Vorg√§nge. Wie Sie sich vorstellen k√∂nnen, ist dies eine sehr gute Struktur f√ºr die Verwaltung einer Warteschlange: F√ºgen Sie Elemente am Anfang hinzu und lesen Sie sie vom Ende (FIFO). Redis bietet au√üerdem zus√§tzliche Funktionen, die dieses Muster effizienter, zuverl√§ssiger und benutzerfreundlicher machen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listen enthalten eine Teilmenge von Befehlen, mit denen Sie das Blockierungsverhalten ausf√ºhren k√∂nnen. </font><font style="vertical-align: inherit;">Der Begriff "Blockieren" bezieht sich auf eine Verbindung mit nur einem Client. </font><font style="vertical-align: inherit;">Tats√§chlich erlauben diese Befehle dem Client nichts zu tun, bis ein Wert in der Liste angezeigt wird oder bis das Zeitlimit abl√§uft. </font><font style="vertical-align: inherit;">Dadurch m√ºssen Sie Redis nicht mehr abfragen und auf das Ergebnis warten. </font><font style="vertical-align: inherit;">Da der Client nichts tun kann, w√§hrend er einen Wert erwartet, ben√∂tigen wir zwei offene Clients, um dies zu veranschaulichen:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kunde 1</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Client 2</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td></td>
<td><pre><code class="plaintext hljs">&gt; BRPOP my-q 0</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Wert erwarten]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><pre><code class="plaintext hljs">&gt; LPUSH my-q hello<font></font>
(integer) 1</code></pre></td>
<td><pre><code class="plaintext hljs">1) "my-q"<font></font>
2) "hello"</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Client entsperrt, bereit, Befehle anzunehmen]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td></td>
<td><pre><code class="plaintext hljs">&gt; BRPOP my-q 0</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Wert erwarten]</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Beispiel sehen wir in Schritt 1, dass der blockierte Client nichts sofort zur√ºckgibt, da er nichts enth√§lt. </font><font style="vertical-align: inherit;">Das letzte Argument ist die Wartezeit. </font><font style="vertical-align: inherit;">Hier bedeutet 0 ewige Erwartung. </font><font style="vertical-align: inherit;">In der zweiten Zeile </font><font style="vertical-align: inherit;">wird ein Wert </font><font style="vertical-align: inherit;">in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">my-q</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eingegeben und der erste Client verl√§sst sofort den Blockierungsstatus. </font><font style="vertical-align: inherit;">In der dritten Zeile wird BRPOP erneut aufgerufen (Sie k√∂nnen dies in einer Schleife in der Anwendung tun), und der Client wartet auch auf den n√§chsten Wert. </font><font style="vertical-align: inherit;">Durch Dr√ºcken von ‚ÄûStrg + C‚Äú k√∂nnen Sie die Sperre aufheben und den Client verlassen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns das Beispiel umkehren und sehen, wie BRPOP mit einer nicht leeren Liste funktioniert:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kunde 1</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Client 2</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><pre><code class="plaintext hljs">&gt; LPUSH my-q hello<font></font>
(integer) 1</code></pre></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><pre><code class="plaintext hljs">&gt; LPUSH my-q hej<font></font>
(integer) 2</code></pre></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><pre><code class="plaintext hljs">&gt; LPUSH my-q bonjour<font></font>
(integer) 3</code></pre></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td></td>
<td><pre><code class="plaintext hljs">&gt; BRPOP my-q 0<font></font>
1) "my-q"<font></font>
2) "hello"</code></pre></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></td>
<td></td>
<td><pre><code class="plaintext hljs">&gt; BRPOP my-q 0<font></font>
1) "my-q"<font></font>
2) "hej"</code></pre></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></td>
<td></td>
<td><pre><code class="plaintext hljs">&gt; BRPOP my-q 0<font></font>
1) "my-q"<font></font>
2) "bonjour"</code></pre></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></td>
<td></td>
<td><pre><code class="plaintext hljs">&gt; BRPOP my-q 0</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Wert erwarten]</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den Schritten 1-3 f√ºgen wir der Liste 3 Werte hinzu und sehen, dass die Antwort w√§chst und die Anzahl der Elemente in der Liste angibt. Schritt 4 gibt trotz des Aufrufs von BRPOP den Wert sofort zur√ºck. Dies liegt daran, dass das Blockierungsverhalten nur auftritt, wenn sich keine Werte in der Warteschlange befinden. In den Schritten 5 bis 6 wird dieselbe sofortige Antwort angezeigt, da dies f√ºr jedes Element in der Warteschlange erfolgt. In Schritt 7 findet BRPOP nichts in der Warteschlange und blockiert den Client, bis etwas hinzugef√ºgt wird.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oft stellen Warteschlangen einige Arbeiten dar, die in einem anderen Prozess (Worker) ausgef√ºhrt werden m√ºssen. </font><font style="vertical-align: inherit;">Bei dieser Art von Arbeitslast ist es wichtig, dass die Arbeit nicht verschwindet, wenn der Arbeiter w√§hrend der Ausf√ºhrung aus irgendeinem Grund f√§llt. </font><font style="vertical-align: inherit;">Redis unterst√ºtzt diese Art von Warteschlange. </font><font style="vertical-align: inherit;">Verwenden Sie dazu den Befehl BRPOPLPUSH anstelle von BRPOP. </font><font style="vertical-align: inherit;">Sie erwartet einen Wert in einer Liste und f√ºgt ihn in eine andere Liste ein, sobald er dort angezeigt wird. </font><font style="vertical-align: inherit;">Dies geschieht atomar, so dass es f√ºr zwei Arbeiter unm√∂glich ist, den gleichen Wert zu √§ndern. </font><font style="vertical-align: inherit;">Mal sehen, wie es funktioniert:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kunde 1</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Client 2</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td></td>
<td><pre><code class="plaintext hljs">&gt; LINDEX worker-q 0<font></font>
(nil)</code></pre></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Wenn das Ergebnis nicht Null ist, verarbeiten Sie es irgendwie und fahren Sie mit Schritt 4 fort.]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td></td>
<td><pre><code class="plaintext hljs">&gt; LREM worker-q -1 [   1]<font></font>
(integer) 1</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[zur√ºck zu Schritt 1]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td></td>
<td><pre><code class="plaintext hljs">&gt; BRPOPLPUSH my-q worker-q 0</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Wert erwarten]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></td>
<td><pre><code class="plaintext hljs">&gt; LPUSH my-q hello</code></pre></td>
<td><pre><code class="plaintext hljs">"hello"</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Client entsperrt, bereit, Befehle anzunehmen]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Hallo behandeln]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></td>
<td></td>
<td><pre><code class="plaintext hljs">&gt; LREM worker-q -1 hello<font></font>
(integer) 1</code></pre></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[zur√ºck zu Schritt 1]</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den Schritten 1-2 tun wir nichts, da </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">worker-q</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> leer ist. Wenn etwas zur√ºckgekehrt ist, verarbeiten wir es und l√∂schen es. Kehren wir dann zu Schritt 1 zur√ºck, um zu √ºberpr√ºfen, ob etwas in die Warteschlange gelangt ist. Daher l√∂schen wir zuerst die Warteschlange des Arbeiters und f√ºhren die vorhandene Arbeit aus. In Schritt 4 warten wir, bis der Wert in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">my-q erscheint</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und wenn dies der Fall ist, wird er atomar an </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">worker-q √ºbertragen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dann verarbeiten wir irgendwie </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Hallo"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , danach l√∂schen wir es aus </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeiter-q</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und kehren zu Schritt 1 zur√ºck. Wenn der Prozess in Schritt 6 stirbt, bleibt der Wert immer noch in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeiter-q</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nach dem Neustart des Prozesses l√∂schen wir sofort alles, was in Schritt 7 nicht gel√∂scht wurde.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Muster verringert die Wahrscheinlichkeit eines Arbeitsplatzverlusts erheblich, jedoch nur, wenn der Arbeitnehmer zwischen den Schritten 2 und 3 oder 5 und 6 stirbt, was unwahrscheinlich ist. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Best Practice</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ber√ºcksichtigt dies jedoch in der Logik des Arbeitnehmers.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit Redlock sperren</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Manchmal ist es im System erforderlich, eine Ressource zu blockieren. </font><font style="vertical-align: inherit;">Dies kann erforderlich sein, um wichtige √Ñnderungen vorzunehmen, die in einem Wettbewerbsumfeld nicht gel√∂st werden k√∂nnen. </font><font style="vertical-align: inherit;">Blockierungsziele:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erlauben Sie einem und nur einem Mitarbeiter, die Ressource zu erfassen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in der Lage sein, das Sperrobjekt zuverl√§ssig freizugeben;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sperren Sie die Ressource nicht fest (muss nach einer bestimmten Zeit entsperrt werden).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redis ist eine gute Option f√ºr die Implementierung des Blockierens, da es ein einfaches schl√ºsselbasiertes Datenmodell hat und jeder Shard Single-Threaded und ziemlich schnell ist. Es gibt eine hervorragende Lock-Implementierung mit Redis namens Redlock. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redlock-Clients sind f√ºr fast jede Sprache verf√ºgbar. Es ist jedoch wichtig zu wissen, wie Redlock funktioniert, um es sicher und effektiv verwenden zu k√∂nnen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zun√§chst m√ºssen Sie verstehen, dass Redlock f√ºr die Ausf√ºhrung auf mindestens 3 Computern mit unabh√§ngigen Redis-Instanzen ausgelegt ist. Dadurch wird der einzelne Fehlerpunkt in Ihrem Sperrmechanismus beseitigt, der zu einem Deadlock aller Ressourcen f√ºhren kann. Ein weiterer zu verstehender Punkt ist, dass die Uhren an den Maschinen zwar nicht zu 100% synchronisiert sein sollten, aber auf die gleiche Weise funktionieren sollten - die Zeit bewegt sich mit der gleichen Geschwindigkeit: eine Sekunde an der Maschine und die gleiche wie eine Sekunde an Maschine B.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Festlegen eines Sperrobjekts mit Redlock beginnt mit dem Abrufen eines Zeitstempels mit Millisekundengenauigkeit. Sie m√ºssen auch die Sperrzeit im Voraus angeben. Anschlie√üend wird das blockierende Objekt festgelegt, indem der Schl√ºssel mit einem zuf√§lligen Wert festgelegt (SET) wird (nur wenn dieser Schl√ºssel noch nicht vorhanden ist) und das Zeitlimit f√ºr den Schl√ºssel festgelegt wird. Dies wird f√ºr jede unabh√§ngige Instanz wiederholt. Wenn die Instanz ausf√§llt, wird sie sofort √ºbersprungen. Wenn das Sperrobjekt in den meisten F√§llen vor Ablauf des Zeitlimits erfolgreich installiert wurde, wird es als erfasst betrachtet. Die Zeit zum Installieren oder Aktualisieren des Sperrobjekts ist die Zeit, die zum Erreichen des Sperrstatus ben√∂tigt wird, abz√ºglich der vordefinierten Sperrzeit. Entsperren Sie im Falle eines Fehlers oder einer Zeit√ºberschreitung alle Instanzen und versuchen Sie es erneut.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um ein Sperrobjekt freizugeben, ist es besser, ein Lua-Skript zu verwenden, das pr√ºft, ob der erwartete Zufallswert im Schl√ºsselsatz enthalten ist. </font><font style="vertical-align: inherit;">Wenn dies der Fall ist, k√∂nnen Sie es l√∂schen. Andernfalls ist es besser, die Schl√ºssel zu belassen, da es sich m√∂glicherweise um neuere Sperrobjekte handelt.</font></font><br>
<br>
<pre><code class="plaintext hljs">if redis.call("get",KEYS[1]) == ARGV[1] then<font></font>
    return redis.call("del",KEYS[1])<font></font>
else<font></font>
    return 0<font></font>
end</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Redlock-Prozess bietet gute Garantien und das Fehlen eines einzelnen Fehlerpunkts, sodass Sie absolut sicher sein k√∂nnen, dass einzelne Sperrobjekte verteilt werden und keine gegenseitigen Sperren auftreten.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pub / Sub</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neben der Datenspeicherung kann Redis auch als Pub / Sub-Plattform (Herausgeber / Abonnent) verwendet werden. </font><font style="vertical-align: inherit;">In diesem Muster kann ein Herausgeber Nachrichten an eine beliebige Anzahl von Kanalabonnenten senden. </font><font style="vertical-align: inherit;">Hierbei handelt es sich um Nachrichten, die auf dem Prinzip ‚ÄûSchie√üen und Vergessen‚Äú basieren. Wenn die Nachricht freigegeben wird und der Abonnent nicht vorhanden ist, verschwindet die Nachricht ohne die M√∂glichkeit einer Wiederherstellung. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durch das Abonnieren des Kanals wechselt der Client in den Abonnentenmodus und kann keine Befehle mehr aufrufen - er wird schreibgesch√ºtzt. </font><font style="vertical-align: inherit;">Der Verlag hat keine derartigen Einschr√§nkungen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen mehr als einen Kanal abonnieren. </font><font style="vertical-align: inherit;">Wir beginnen mit dem Abonnieren der beiden Wetter- und Sportkan√§le mit dem Befehl SUBSCRIBE:</font></font><br>
<br>
<pre><code class="plaintext hljs">&gt; SUBSCRIBE weather sports<font></font>
Reading messages... (press Ctrl-C to quit)<font></font>
1) "subscribe"<font></font>
2) "weather"<font></font>
3) (integer) 1<font></font>
1) "subscribe"<font></font>
2) "sports"<font></font>
3) (integer) 2</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einem separaten Client (z. B. einem anderen Terminalfenster) k√∂nnen wir Nachrichten in jedem dieser Kan√§le mit dem Befehl PUBLISH ver√∂ffentlichen:</font></font><br>
<br>
<pre><code class="plaintext hljs">&gt; PUBLISH sports oilers/7:leafs/1<font></font>
(integer) 1</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das erste Argument ist der Name des Kanals, das zweite ist die Nachricht. </font><font style="vertical-align: inherit;">Die Nachricht kann eine beliebige sein, in diesem Fall handelt es sich um ein codiertes Konto im Spiel. </font><font style="vertical-align: inherit;">Der Befehl gibt die Anzahl der Clients zur√ºck, an die die Nachricht gesendet wird. </font><font style="vertical-align: inherit;">Im Abonnenten-Client sehen wir sofort die Nachricht:</font></font><br>
<br>
<pre><code class="plaintext hljs">1) "message"<font></font>
2) "sports"<font></font>
3) "oilers/7:leafs/1"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Antwort enth√§lt drei Elemente: einen Hinweis darauf, dass es sich um eine Nachricht, einen Abonnementkanal und tats√§chlich eine Nachricht handelt. </font><font style="vertical-align: inherit;">Der Client kehrt unmittelbar nach dem Empfang zum Abh√∂ren des Kanals zur√ºck. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir zum Verlag zur√ºckkehren, k√∂nnen wir eine weitere Nachricht posten:</font></font><br>
<br>
<pre><code class="plaintext hljs">&gt; PUBLISH weather snow/-4c<font></font>
(integer) 1</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Abonnenten sehen wir das gleiche Format, aber mit einem anderen Kanal mit der Nachricht:</font></font><br>
<br>
<pre><code class="plaintext hljs">1) "message"<font></font>
2) "weather"<font></font>
3) "snow/-4c"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Senden wir eine Nachricht an einen Kanal, in dem es keine Abonnenten gibt:</font></font><br>
<br>
<pre><code class="plaintext hljs">&gt; PUBLISH currency CADUSD/0.787<font></font>
(integer) 0</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da niemand den </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">W√§hrungskanal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> abh√∂rt </font><font style="vertical-align: inherit;">, </font><font style="vertical-align: inherit;">lautet </font><font style="vertical-align: inherit;">die Antwort 0. Diese Nachricht ist nicht mehr vorhanden, und Kunden, die diesen Kanal abonniert haben, erhalten keine Benachrichtigung √ºber diese Nachricht - sie wurde gesendet und vergessen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redis abonniert nicht nur einen einzelnen Kanal, sondern auch das Abonnieren von Kan√§len per Maske. </font><font style="vertical-align: inherit;">Die Glob-Maske wird an den Befehl PSUBSCRIBE √ºbergeben:</font></font><br>
<br>
<pre><code class="plaintext hljs">&gt; PSUBSCRIBE sports:*</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Kunde erh√§lt Nachrichten von allen Kan√§len, beginnend mit </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sport :</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Rufen Sie in einem anderen Client die folgenden Befehle auf:</font></font><br>
<br>
<pre><code class="plaintext hljs">&gt; PUBLISH sports:hockey oilers/7:leafs/1<font></font>
(integer) 1<font></font>
&gt; PUBLISH sports:basketball raptors/33:pacers/7<font></font>
(integer) 1<font></font>
&gt; PUBLISH weather:edmonton snow/-4c<font></font>
(integer) 0</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bitte beachten Sie, dass die ersten beiden Teams 1 zur√ºckgeben, w√§hrend das letzte 0 zur√ºckgibt. Obwohl wir </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sport</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nicht direkt abonniert haben </font><i><font style="vertical-align: inherit;">: Hockey</font></i><font style="vertical-align: inherit;"> oder </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sport: Basketball</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , erh√§lt der Kunde Nachrichten √ºber ein Abonnement per Maske. </font><font style="vertical-align: inherit;">Im Client-Abonnenten-Fenster k√∂nnen wir sehen, dass es nur Ergebnisse f√ºr Kan√§le gibt, die mit der Maske √ºbereinstimmen.</font></font><br>
<br>
<pre><code class="plaintext hljs">1) "pmessage"<font></font>
2) "sports:*"<font></font>
3) "sports:hockey"<font></font>
4) "oilers/7:leafs/1"<font></font>
1) "pmessage"<font></font>
2) "sports:*"<font></font>
3) "sports:basketball"<font></font>
4) "raptors/33:pacers/7"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Ausgabe unterscheidet sich geringf√ºgig von der Ausgabe des Befehls SUBSCRIBE, da sie die Maske selbst sowie den tats√§chlichen Namen des Kanals enth√§lt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verteilte Ereignisse</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Pub / Sub-Messaging-Schema von Redis kann erweitert werden, um interessante verteilte Ereignisse zu erstellen. </font><font style="vertical-align: inherit;">Angenommen, wir haben eine Struktur, die in einer Hash-Tabelle gespeichert ist, aber wir m√∂chten Clients nur aktualisieren, wenn ein einzelnes Feld den vom Abonnenten festgelegten numerischen Wert √ºberschreitet. </font><font style="vertical-align: inherit;">Wir werden die Kan√§le per Maske anh√∂ren und den Hash- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Status</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> extrahieren </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In diesem Beispiel interessiert uns </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update_status</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit den Werten 5-9.</font></font><br>
<br>
<pre><code class="plaintext hljs">&gt; PSUBSCRIBE update_status:[5-9]<font></font>
1) "psubscribe"<font></font>
2) "update_status:[5-9]"<font></font>
3) (integer) 1<font></font>
...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um den </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wert status / error_level</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu √§ndern </font><font style="vertical-align: inherit;">, ben√∂tigen wir zwei Befehle, die nacheinander oder im MULTI / EXEC-Block ausgef√ºhrt werden k√∂nnen. </font><font style="vertical-align: inherit;">Der erste Befehl legt die Ebene fest und der zweite ver√∂ffentlicht eine Benachrichtigung mit dem im Kanal selbst codierten Wert.</font></font><br>
<br>
<pre><code class="plaintext hljs">&gt; HSET status error_level 5<font></font>
(integer) 1<font></font>
&gt; PUBLISH update_status:5 0<font></font>
(integer) 1</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im ersten Fenster sehen wir, dass die Nachricht empfangen wurde. Danach k√∂nnen Sie zu einem anderen Client wechseln und den Befehl HGETALL aufrufen:</font></font><br>
<br>
<pre><code class="plaintext hljs">...<font></font>
1) "pmessage"<font></font>
2) "update_status:[5-9]"<font></font>
3) "update_status:5"<font></font>
4) "0"<font></font>
<font></font>
&gt; HGETALL status<font></font>
1) "error_level"<font></font>
2) "5"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir k√∂nnen diese Methode auch verwenden, um die lokale Variable eines l√§ngeren Prozesses zu aktualisieren. </font><font style="vertical-align: inherit;">Auf diese Weise k√∂nnen mehrere Instanzen desselben Prozesses Daten in Echtzeit austauschen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Warum ist dieses Muster besser als Pub / Sub? </font><font style="vertical-align: inherit;">Wenn der Prozess neu gestartet wird, kann er einfach den gesamten Status abrufen und mit dem Abh√∂ren beginnen. </font><font style="vertical-align: inherit;">√Ñnderungen werden zwischen einer beliebigen Anzahl von Prozessen synchronisiert.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datenspeichermuster</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt verschiedene Muster zum Speichern strukturierter Daten in Redis. </font><font style="vertical-align: inherit;">In diesem Kapitel werden wir Folgendes betrachten:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datenspeicherung in JSON;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lagerh√§user.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON-Datenspeicherung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt verschiedene Optionen zum Speichern von JSON-Daten in Redis. </font><font style="vertical-align: inherit;">Die h√§ufigste Form besteht darin, das Objekt im Voraus zu serialisieren und unter einem speziellen Schl√ºssel zu speichern:</font></font><br>
<br>
<pre><code class="plaintext hljs">&gt; SET car "{\"colour\":\"blue\",\"make\":\"saab\",\"model\":93,\"features\":[\"powerlocks\",\"moonroof\"]}"<font></font>
OK<font></font>
&gt; GET car<font></font>
"{\"colour\":\"blue\",\"make\":\"saab\",\"model\":93,\"features\":[\"powerlocks\",\"moonroof\"]}"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es scheint einfach auszusehen, hat aber einige sehr schwerwiegende Nachteile:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºr die Serialisierung sind Client-Computerressourcen zum Lesen und Schreiben erforderlich.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das JSON-Format erh√∂ht die Datengr√∂√üe.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redis hat nur eine indirekte M√∂glichkeit, Daten in JSON zu verarbeiten.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die ersten paar Punkte m√∂gen bei kleinen Datenmengen vernachl√§ssigbar sein, aber die Kosten steigen, wenn die Daten wachsen. </font><font style="vertical-align: inherit;">Der dritte Punkt ist jedoch der kritischste. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vor Redis 4.0 bestand die einzige M√∂glichkeit, mit JSON in Redis zu arbeiten, darin, ein Lua-Skript im cjson-Modul zu verwenden. </font><font style="vertical-align: inherit;">Dies l√∂ste das Problem teilweise, obwohl es immer noch ein Engpass blieb und zus√§tzliche Probleme beim Erlernen von Lua verursachte. </font><font style="vertical-align: inherit;">Dar√ºber hinaus haben viele Anwendungen einfach die gesamte JSON-Zeichenfolge empfangen, deserialisiert, mit den Daten gearbeitet, zur√ºck serialisiert und erneut gespeichert. </font><font style="vertical-align: inherit;">Dies ist ein Antimuster. </font><font style="vertical-align: inherit;">Auf diese Weise besteht ein gro√ües Risiko, Daten zu verlieren.</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendungsinstanz Nr. 1</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendungsinstanz Nr. 2</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><pre><code class="plaintext hljs">&gt; GET my-car</code></pre></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[deserialisieren, Maschinenfarbe √§ndern und erneut serialisieren]</font></font></td>
<td><pre><code class="plaintext hljs">&gt; GET my-car</code></pre></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><pre><code class="plaintext hljs">&gt; SET my-car</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[neuer Wert von Instanz 1]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[deserialisieren, Maschinenmodell √§ndern und erneut serialisieren]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td></td>
<td><pre><code class="plaintext hljs">&gt; SET my-car</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[neuer Wert von Instanz 2]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></td>
<td></td>
<td><pre><code class="plaintext hljs">&gt; GET my-car</code></pre></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ergebnis in Zeile 5 zeigt nur √Ñnderungen an Instanz 2 an, und die Farb√§nderung durch Instanz 1 geht verloren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redis Version 4.0 und h√∂her bietet die M√∂glichkeit, Module zu verwenden. </font><font style="vertical-align: inherit;">ReJSON ist ein Modul, das einen speziellen Datentyp und Befehle f√ºr die direkte Interaktion mit diesem bereitstellt. </font><font style="vertical-align: inherit;">ReJSON speichert die Daten im Bin√§rformat, wodurch die Gr√∂√üe der gespeicherten Daten verringert wird und ein schnellerer Zugriff auf Elemente erm√∂glicht wird, ohne Zeit f√ºr die De- / Serialisierung aufzuwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um ReJSON verwenden zu k√∂nnen, m√ºssen Sie es auf einem Redis-Server installieren oder in Redis Enterprise aktivieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das vorherige Beispiel mit ReJSON w√ºrde folgenderma√üen aussehen:</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendungsinstanz Nr. 1</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendungsinstanz Nr. 2</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><pre><code class="plaintext hljs">&gt; JSON.SET car2 . '{"colour": "blue",  "make":"saab", "model":93,  "features": ["powerlocks",  "moonroof"]}‚Äò<font></font>
OK</code></pre></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><pre><code class="plaintext hljs">&gt; JSON.SET car2 colour '"red"'<font></font>
OK</code></pre></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td></td>
<td><pre><code class="plaintext hljs">&gt; JSON.SET car2 model '95'<font></font>
OK<font></font>
&gt; JSON.GET car2 .<font></font>
"{\"colour\":\"red",\"make\":\"saab\",\"model\":95,\"features\":[\"powerlocks\",\"moonroof\"]}"</code></pre></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ReJSON bietet eine sicherere, schnellere und intuitivere M√∂glichkeit, mit JSON-Daten in Redis zu arbeiten, insbesondere in F√§llen, in denen atomare √Ñnderungen an verschachtelten Elementen erforderlich sind.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Objektspeicherung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf den ersten Blick scheint der Standarddatentyp "Hash-Tabelle" von Redis einem JSON-Objekt oder einem anderen Typ sehr √§hnlich zu sein. </font><font style="vertical-align: inherit;">Es ist viel einfacher, Felder entweder als Zeichenfolge oder als Zahl zu erstellen und verschachtelte Strukturen zu verhindern. </font><font style="vertical-align: inherit;">Nachdem Sie den ‚ÄûPfad‚Äú zu jedem Feld berechnet haben, k√∂nnen Sie das Objekt jedoch ‚Äûreduzieren‚Äú und in der Redis-Hash-Tabelle speichern.</font></font><br>
<br>
<pre><code class="plaintext hljs">{<font></font>
    "colour": "blue",<font></font>
    "make": "saab",<font></font>
    "model": {<font></font>
        "trim": "aero",<font></font>
        "name": 93<font></font>
    },<font></font>
    "features": ["powerlocks", "moonroof"]<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSONPath</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (XPath f√ºr JSON) k√∂nnen wir jedes Element auf derselben Ebene der Hash-Tabelle darstellen:</font></font><br>
<br>
<pre><code class="plaintext hljs">&gt; HSET car3 colour blue<font></font>
&gt; HSET car3 make saab<font></font>
&gt; HSET car3 model.trim aero<font></font>
&gt; HSET car3 model.name 93<font></font>
&gt; HSET car3 features[0] powerlocks<font></font>
&gt; HSET car3 features[1] moonroof</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aus Gr√ºnden der √úbersichtlichkeit werden die Befehle separat aufgef√ºhrt, es k√∂nnen jedoch viele Parameter an HSET √ºbergeben werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt k√∂nnen Sie das gesamte Objekt oder sein einzelnes Feld anfordern:</font></font><br>
<br>
<pre><code class="plaintext hljs">&gt; HGETALL car3<font></font>
 1) "colour"<font></font>
 2) "blue"<font></font>
 3) "make"<font></font>
 4) "saab"<font></font>
 5) "model.trim"<font></font>
 6) "aero"<font></font>
 7) "model.name"<font></font>
 8) "93"<font></font>
 9) "features[0]"<font></font>
10) "powerlocks"<font></font>
11) "features[1]"<font></font>
12) "moonroof"<font></font>
<font></font>
&gt; HGET car3 model.trim<font></font>
"aero"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies bietet zwar eine schnelle und n√ºtzliche M√∂glichkeit, ein in Redis gespeichertes Objekt abzurufen, hat jedoch folgende Nachteile:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In verschiedenen Sprachen und Bibliotheken kann die Implementierung von JSONPath unterschiedlich sein, was zu Inkompatibilit√§t f√ºhrt. </font><font style="vertical-align: inherit;">In diesem Fall lohnt es sich, die Daten mit einem Tool zu serialisieren und zu deserialisieren.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Array-Unterst√ºtzung:</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sp√§rliche Arrays k√∂nnen problematisch sein;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist unm√∂glich, viele Operationen auszuf√ºhren, z. B. das Einf√ºgen eines Elements in die Mitte eines Arrays.</font></font></li>
</ul><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unn√∂tiger Ressourcenverbrauch in JSONPath-Schl√ºsseln.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Muster ist so ziemlich das gleiche wie bei ReJSON. </font><font style="vertical-align: inherit;">Wenn ReJSON verf√ºgbar ist, ist es in den meisten F√§llen besser, es zu verwenden. </font><font style="vertical-align: inherit;">Das Speichern von Objekten auf die oben beschriebene Weise hat jedoch einen Vorteil gegen√ºber ReJSON: die Integration in das Redis SORT-Team. </font><font style="vertical-align: inherit;">Dieser Befehl ist jedoch rechenintensiv und stellt ein separates komplexes Thema dar, das √ºber den Rahmen dieses Musters hinausgeht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der n√§chste abschlie√üende Teil behandelt Zeitreihenmuster, Geschwindigkeitsbegrenzungsmuster, Bloom-Filtermuster, Z√§hler und die Verwendung von Lua in Redis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS Ich habe versucht, den Text dieser Artikel in ‚Äûbarbarischem‚Äú Englisch so weit wie m√∂glich ins Russische zu √ºbersetzen. Wenn Sie jedoch der Meinung sind, dass die Idee irgendwo unverst√§ndlich oder falsch ist, korrigieren Sie mich in den Kommentaren.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de487570/">https://habr.com/ru/post/de487570/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de487558/index.html">Paul Graham: Kinder und Startups</a></li>
<li><a href="../de487560/index.html">Bank of America: Die Kapitalisierung von Yandex wird um 1,4 Milliarden US-Dollar steigen</a></li>
<li><a href="../de487564/index.html">Paul Graham: "Die beste Idee in Ihrem Kopf"</a></li>
<li><a href="../de487566/index.html">Grundlegendes zum CSS-Raster (1 Teil): Rastercontainer</a></li>
<li><a href="../de487568/index.html">Case Full HP: So erhalten Sie Funktionen von Google Play und k√∂nnen ASO an verschiedene L√§nder anpassen</a></li>
<li><a href="../de487578/index.html">CMake-Optimierung f√ºr statische Bibliotheken</a></li>
<li><a href="../de487582/index.html">Keine G√∂tter verbrennen T√∂pfe</a></li>
<li><a href="../de487584/index.html">Githabifizierung der Informationssicherheit</a></li>
<li><a href="../en486014/index.html">SLAC Tour: US Department of Energy National Accelerator Laboratory at Stanford</a></li>
<li><a href="../en486018/index.html">Session Survey Results</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>