<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø üçÄ üï• Incruste su dispositivo Smart Home en el ecosistema SmartThings üëáüèæ ‚óªÔ∏è üßùüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Las plataformas Smart Home le permiten integrar dispositivos y crear nuevos escenarios para su interacci√≥n. El efecto de plataforma es conocido: es m√°...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Incruste su dispositivo Smart Home en el ecosistema SmartThings</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/samsung/blog/489834/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las plataformas Smart Home le permiten integrar dispositivos y crear nuevos escenarios para su interacci√≥n. </font><font style="vertical-align: inherit;">El efecto de plataforma es conocido: es m√°s probable que los usuarios elijan con el que sus dispositivos existentes sean compatibles, en lugar de cambiar a uno nuevo. </font><font style="vertical-align: inherit;">Por lo tanto, puede ser m√°s rentable que los desarrolladores de nuevos dispositivos ingeniosos se integren en una plataforma ya terminada, centr√°ndose en el producto "de hierro", en lugar de desarrollar sus propias "bicicletas" en forma de ecosistemas en la nube y cuentas personales. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos c√≥mo integrar su propio dispositivo con la plataforma Samsung SmartThings Smart Home. </font><font style="vertical-align: inherit;">Estamos implementando una opci√≥n de conexi√≥n directa para controlar el dispositivo Smart Home usando el ejemplo de un interruptor de bot√≥n y una bombilla de tres colores.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cx/se/xy/cxsexydnzipoeqmkj3n7jq9x4iu.gif"><br>
<a name="habracut"></a><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øPor qu√© necesitamos plataformas Smart Home?</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora los gadgets y dispositivos inteligentes est√°n a la venta, tanto como quieras. No hay problema en comprar una tetera con control Bluetooth o una bombilla con WiFi. ¬øPero esto hace que su hogar sea "inteligente"? Una situaci√≥n no es infrecuente: una bombilla se controla solo a trav√©s de una aplicaci√≥n m√≥vil del fabricante. Esto crea inconvenientes si est√° intentando combinar al menos varias marcas diferentes. Por lo tanto, la plataforma ideal es aquella que le permite administrar dispositivos de diferentes fabricantes de la misma manera.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, me gustar√≠a ver una "computadora disuelta en la vida cotidiana", como lo so√±√≥ Mark Weiser de Xerox PARC: no controle a trav√©s de una aplicaci√≥n especial, no roc√≠e su atenci√≥n. Me gustar√≠a una interacci√≥n natural con un entorno inteligente que no cambie nuestros h√°bitos. ¬øC√≥mo implementar esto t√©cnicamente? Por ejemplo, puede haber escenarios en los que est√©n involucrados dispositivos heterog√©neos en la casa: usted se despert√≥: el dispositivo port√°til lo detect√≥ y la tetera se encendi√≥; llegaste a casa: el sensor de la puerta lo registr√≥, teniendo en cuenta la hora del d√≠a, las cortinas cerradas, la l√°mpara encendida y el aire acondicionado encendido teniendo en cuenta la temperatura.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los escenarios se vuelven a√∫n m√°s √∫tiles si usamos Internet: por ejemplo, para verificar de forma remota si la salida con la plancha est√° apagada. </font><font style="vertical-align: inherit;">O un ejemplo banal: su casa inteligente mir√≥ el pron√≥stico del tiempo y le dio consejos sobre c√≥mo vestirse mejor. </font><font style="vertical-align: inherit;">O puede agregar control de voz a trav√©s de un altavoz inteligente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La plataforma Smart Home est√° dise√±ada para todo esto. </font><font style="vertical-align: inherit;">Considere lo que puede hacer la plataforma Samsung SmartThings.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antecedentes: ¬øqu√© son las SmartThings?</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SmartThings comenz√≥ como una startup. En el momento en que apareci√≥, en 2012 en los EE. UU., El tema de "Smart Home" a√∫n no estaba en la cima de la exageraci√≥n, todav√≠a no hab√≠a altavoces inteligentes y una variedad de dispositivos en las tiendas. La idea surgi√≥ del fundador de la startup, Alex Hawkinson, despu√©s de un incidente: la casa de su familia en Colorado sufri√≥ el hecho de que despu√©s de un corte temporal de electricidad, las tuber√≠as de agua se congelaron, explotaron y todo el piso se inund√≥. Luego pens√≥ que podr√≠a haber evitado el problema si supiera lo que estaba sucediendo en la casa.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de buscar sin √©xito una soluci√≥n llave en mano, Hawkinson y sus colegas hicieron un prototipo del dispositivo y lanzaron una campa√±a en Kickstarter. La campa√±a tuvo demasiado √©xito, recaudando $ 1,200,000 en lugar de los $ 250,000 planeados en 30 d√≠as. La venta de un concentrador con un peque√±o conjunto de dispositivos en el kit ha comenzado: toma inteligente, sensor de puerta abierta, sensor de movimiento, sensor de presencia. Y en 2019, ya bajo la marca Samsung SmartThings, se lanz√≥ la tercera versi√≥n del hub. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/xk/vi/hexkviuwr8rq2bf7z84ft-akdnm.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La clave del √©xito en Kickstarter fue la disponibilidad de prototipos de hierro y software que funcionaran, y la amabilidad con la comunidad de fabricantes.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los creadores de la startup han abandonado el entorno de bricolaje, por lo que constantemente est√°n desarrollando el concepto de una API abierta para los fabricantes geek que pueden actuar como primeros usuarios en una etapa temprana. En la campa√±a de Kickstarter, hab√≠a un escudo para Arduino y varios m√≥dulos en la nube para conectar sin problemas su dispositivo de terceros. En Internet puede encontrar muchos ejemplos de dispositivos caseros compatibles con SmartThings, ya sea una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puerta de gallinero</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> controlada </font><font style="vertical-align: inherit;">(con la soluci√≥n de una tarea seria de la vida: salvar a los pollos de un vis√≥n depredador) o la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instalaci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> remota </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">de</font></a><font style="vertical-align: inherit;"> un c√≥digo de bloqueo electr√≥nico para los hu√©spedes con Airbnb. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ct/fd/tl/ctfdtl25yhvhmrnz2yufm_qwhfw.jpeg" width="500"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fuente de la foto: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.hackster.io/aaronpk/auto-airbnb-entry-745799</font></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En 2012-2013, SmartThings pas√≥ por varias rondas de inversi√≥n y recibi√≥ $ 12.5 millones. </font><font style="vertical-align: inherit;">Y finalmente, en 2014, se interes√≥ en Samsung y fue adquirida por $ 200 millones como parte de una estrategia para ingresar al mercado de Internet de las cosas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las capacidades en la nube de la plataforma permanecieron gratuitas: los autores, ahora empleados de Samsung, sin excluir la posibilidad te√≥rica de cobrar por grandes vol√∫menes de tr√°fico, enfatizan: siempre habr√° una opci√≥n gratuita para los desarrolladores de dispositivos. </font><font style="vertical-align: inherit;">Esto es bueno, porque ahora casi todos los servicios en la nube proporcionan monetizaci√≥n y, a menudo, incluso durante un per√≠odo de prueba, necesita adjuntar una tarjeta bancaria. </font><font style="vertical-align: inherit;">SmartThings es una plataforma completamente gratuita.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitectura SmartThings</font></font></h1><br>
<img src="https://habrastorage.org/webt/dm/gw/ir/dmgwirddjoqbh-1caazcx5kg-sc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muevamos el patr√≥n de izquierda a derecha.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dispositivos</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dispositivos SmartThings: pueden ser no solo dispositivos de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la suite SmartThings</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sino tambi√©n muchos socios externos de la lista de socios. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ut/j6/oq/utj6oqymmwwnqazkm_jekxgymwq.jpeg" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el dispositivo no est√° en la lista de soporte oficial, puede buscar el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controlador de dispositivo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puede ser proporcionado por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la comunidad de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> desarrolladores, o escribir el suyo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todos de conexi√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede conectar dispositivos a la plataforma de las siguientes maneras:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conectado al concentrador: a trav√©s de un concentrador concentrador, relevante para dispositivos que no tienen su conexi√≥n a Internet, pero que est√°n conectados a trav√©s de redes inal√°mbricas tradicionales como ZigBee para dichos sistemas.&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conectado directamente: a trav√©s de Internet directamente a la nube. </font><font style="vertical-align: inherit;">SmartThings </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lanz√≥</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> recientemente </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">una</font></a><font style="vertical-align: inherit;"> videoc√°mara, una bombilla y un enchufe inteligente, y funcionan sin un hub, a trav√©s de WiFi. </font><font style="vertical-align: inherit;">Esta es la opci√≥n que implementaremos en esta gu√≠a.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conectado a la nube: a trav√©s de una nube de terceros para aquellos dispositivos que ya tienen su propio ecosistema de nube. </font><font style="vertical-align: inherit;">Esto es m√°s complicado, por lo tanto, no consideraremos esa opci√≥n.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cubo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo general, para conectar una variedad de equipos en su hogar debe haber un peque√±o servidor especial "Smart Home" que admita varios protocolos. </font><font style="vertical-align: inherit;">√âl, un hub, hub, gateway, los nombres son diferentes. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gx/yy/_b/gxyy_bk9o6kvzdfzldagqw4lbb0.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hub y un conjunto de dispositivos para ello. </font><font style="vertical-align: inherit;">Fuente de la foto: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IXBT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solicitud</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SmartThings App es una aplicaci√≥n que se puede instalar en el sistema operativo m√≥vil principal y con su ayuda: agregue nuevos dispositivos al sistema, controle los que ya se agregaron, establezca reglas de automatizaci√≥n, reciba notificaciones a trav√©s de push y SMS, y mucho m√°s.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ua/tu/-q/uatu-qhi_oijgiuumtopuqsjedk.png" width="400"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abstracci√≥n</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En SmartThings, como en muchas otras plataformas de hogares inteligentes, existen las siguientes abstracciones: habitaciones, escenas, escenarios.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los dispositivos se agrupan en salas. </font><font style="vertical-align: inherit;">Simplemente conecte este o aquel gadget a una habitaci√≥n en la aplicaci√≥n, y ll√°melo "Cocina", "Ba√±o", "Pasillo". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todav√≠a hay escenas (escenas), estas son situaciones: "dormir", "descansar", "trabajar", "mirar una pel√≠cula": cada una de las situaciones se caracteriza por su propio conjunto de estados del dispositivo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qt/vo/5o/qtvo5o8yo8thwuwhptupdthayjc.png" width="300"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escenas y salas en la pantalla de la aplicaci√≥n.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y finalmente, scripts (Rutinas): reglas de automatizaci√≥n if-then. Por defecto, el programa tiene cuatro escenarios: "Estoy de vuelta", "Buenas noches", "Adi√≥s", "Buenos d√≠as". Puede configurar la activaci√≥n del script de acuerdo con la condici√≥n de la ma√±ana, o en el caso de movimiento, o en el caso de abrir la puerta, y as√≠ sucesivamente. Un ejemplo no trivial: cuando entro en casa, bloqueo el tr√°fico de red en la c√°mara de vigilancia de mi casa para evitar la fuga de mis videos personales. O un ejemplo educativo cruel: desconecte por la fuerza la tableta de la red cuando sean las 11 de la noche para evitar quedarse en Internet en lugar de un sue√±o saludable.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7j/gp/qg/7jgpqgdehbjdzjtpmfnf7a2supc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, en el programa SmartThings en el tel√©fono hay una oportunidad interesante: memorizar acciones t√≠picas. Cuando a menudo usa el tel√©fono, con el tiempo, comienza a indicarle la mejor manera de configurar escenas basadas en las aplicaciones lanzadas con mayor frecuencia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para agregar nuevos dispositivos al sistema, se proporciona un sistema de complemento. El desarrollador puede programar el complemento para su propio dispositivo: la interfaz de usuario dentro de la aplicaci√≥n SmartThings y la l√≥gica del dispositivo. Esto es esencialmente una aplicaci√≥n web. Desde el punto de vista del desarrollador, el complemento puede suscribirse a eventos o notificaciones desde el dispositivo, enviarle un mensaje, monitorear el estado de la conexi√≥n con el dispositivo. Existe una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentaci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> clara </font><font style="vertical-align: inherit;">sobre el ciclo de vida del complemento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El usuario los descarga de la "tienda de complementos" seg√∫n sea necesario, para no inflar la aplicaci√≥n en el tel√©fono. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2t/i7/6p/2ti76pkvardmqwv2efyxjh5nec4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero ahora no haremos ning√∫n complemento, pero lo haremos m√°s simple: agregaremos un dispositivo casero usando solo herramientas de plataforma est√°ndar.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacer que su dispositivo sea compatible con SmartThings</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede que tenga una pregunta: ¬øpor qu√©? </font><font style="vertical-align: inherit;">¬øCu√°l es el punto de hacerlo compatible si eres un desarrollador de dispositivos?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La principal ventaja es el aumento en el valor del producto debido a la integraci√≥n autom√°tica con todo el ecosistema.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bajo la condici√≥n de pasar las pruebas funcionales, puede pegar el logotipo: "Compatible con SmartThings" en la caja del producto, lo que garantiza una instalaci√≥n y configuraci√≥n sin problemas del dispositivo en el ecosistema SmartThings.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al igual que con cualquier plataforma, su tarea se facilita: ya no necesita probar y desarrollar, por ejemplo, una interfaz de usuario; puede usar los botones est√°ndar y otros elementos de la interfaz SmartThings.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obtiene relaciones p√∫blicas y audiencia de usuarios gracias a la comunidad SmartThings (es viva y activa).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el manual a continuaci√≥n conectaremos nuestro propio dispositivo totalmente personalizado.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lo que se propone hacer</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El SmartThings Device SDK (STDK) se present√≥ recientemente en la Samsung Developer Conference en octubre de 2019. A continuaci√≥n ofrecemos una traducci√≥n del </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manual</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para este SDK. Y no solo una traducci√≥n: hicimos lo mismo y lo repetimos con nuestras propias manos, por lo que habr√° algunos comentarios pr√°cticos que ir√°n m√°s all√° del manual original. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C√≥mo se ver√° el resultado final como se muestra en el video:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Rvo6pbI2-0U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La l√°mpara RGB est√° conectada a la plataforma SmartThings a trav√©s de WiFi, y usted la controla a trav√©s del tel√©fono. La l√°mpara en s√≠ se implementa de la manera m√°s barata y f√°cil: en el chip ESP8266 s√∫per popular. El hierro no es importante: se puede hacer en cualquier microcontrolador, porque el SDK est√° escrito en C, presentado en el dominio p√∫blico y se puede portar si se desea. Es poco probable que el ESP entre en producci√≥n (para empezar, es m√°s conveniente usar otras interfaces en el Smart Home que WiFi), pero es bastante adecuado para el modelo y la ilustraci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La funcionalidad de la "bombilla inteligente" resultante ser√° la siguiente: control de LED RGB mediante la rueda de colores del tel√©fono. Adem√°s de apagarlo y encenderlo usando el bot√≥n. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proceso de desarrollo se muestra en el diagrama:</font></font><br>
<img src="https://habrastorage.org/webt/ba/kb/_h/bakb_hunqhwmmaovm0jk2xrbqgk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proceso que se muestra no es dif√≠cil, algunos de los pasos se pueden revertir, lo que mostraremos en el manual.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hierro</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El manual original muestra todo en el ejemplo de la placa WeMos D1 Mini, esta es una placa de depuraci√≥n basada en ESP8266 que se puede insertar en la placa de pruebas. </font><font style="vertical-align: inherit;">En general, no hay nada complicado, es solo un m√≥dulo del chip ESP chino que es s√∫per popular entre los fan√°ticos, soldado por conveniencia a una placa m√°s amplia del tama√±o de la placa de pruebas. </font><font style="vertical-align: inherit;">Por lo tanto, puede hacer todo en cualquier otra placa. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rs/lo/8t/rslo8ts8_gfmrhvrrnh-jb87yry.jpeg" width="200"> <img src="https://habrastorage.org/webt/bl/sg/mw/blsgmwf3onhbr9x9y4s9dxialiw.jpeg" width="200"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Izquierda: WeMos D1, derecha - Troyka WiFi Shield</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suave</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo que necesitas para construir el ejemplo:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versi√≥n de Ubuntu Linux no inferior a 18.04 (puede crear un ejemplo para Windows y MacOS, pero para ser definitivos elegimos Linux)</font></font><br>
</li>
<li>  Android    1.7.39,  iOS    1.6.41-343.   Play Market  SmartThings,     Samsung Account.       Samsung,    .<br>
</li>
<li>ESP8266 SDK.  , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>  ,   ,   :<br>
<br>
<pre><code class="bash hljs">git <span class="hljs-built_in">clone</span> https://github.com/espressif/ESP8266_RTOS_SDK.git</code></pre><br>
     SDK   IDF_PATH:<br>
<br>
<pre><code class="bash hljs">nano ~/.bashrc
<span class="hljs-built_in">export</span> IDF_PATH=<span class="hljs-string">"~/git/ESP8266_RTOS_SDK:<span class="hljs-variable">$IDF_PATH</span>"</span></code></pre></li>
<li>   :<br>
<br>
<pre><code class="bash hljs">sudo apt-get install gcc git wget make libncurses-dev flex bison gperf python python-pip python-setuptools python-serial python-cryptography python-future python-pyparsing python-pyelftools</code></pre><br>
   ():<br>
<br>
<pre><code class="bash hljs">sudo mkdir /opt/Espressif<font></font>
sudo chown username /opt/Espressif/<font></font>
<span class="hljs-built_in">cd</span> /opt/Espressif<font></font>
wget https://dl.espressif.com/dl/xtensa-lx106-elf-linux64-1.22.0-100-ge567ec7-5.2.0.tar.gz<font></font>
tar -xzf ./xtensa-lx106-elf-linux64-1.22.0-100-ge567ec7-5.2.0.tar.gz<font></font>
<span class="hljs-built_in">cd</span> xtensa-lx106-elf
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">"/opt/Espressif/xtensa-lx106-elf/bin:<span class="hljs-variable">$PATH</span>"</span></code></pre><br>
</li>
<li>Smart Things Device SDK C ‚Äì   .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>  github,         ,     ,       .<br>
<br>
<pre><code class="bash hljs">git <span class="hljs-built_in">clone</span> https://github.com/SmartThingsCommunity/st-device-sdk-c-ref.git
<span class="hljs-built_in">cd</span> st-device-sdk-c-ref<font></font>
./setup.sh esp8266</code></pre><br>
</li>
</ul><br>
<h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los siguientes dispositivos se considerar√°n como ejemplos: interruptor inteligente y bombilla inteligente. </font><font style="vertical-align: inherit;">Comenzaremos con un interruptor inteligente, que es m√°s simple y no requiere perif√©ricos externos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paso 1. Registre su dispositivo.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El trabajo comienza en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SmartThings Developer Workspace</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , donde debe iniciar sesi√≥n con su cuenta Samsung. </font><font style="vertical-align: inherit;">Esta cuenta se crea de forma gratuita, y para crearla no es necesario tener un tel√©fono Samsung.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rz/vc/tb/rzvctbgclnb7ug6rcxccoqsfe88.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En Developer Workspace, se le ofrece inmediatamente crear el primer proyecto. </font><font style="vertical-align: inherit;">Estamos de acuerdo, despu√©s de lo cual, de las dos opciones de proyecto, debe seleccionar Integraci√≥n de dispositivos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mh/7z/0f/mh7z0fghp37p2_kfmlj4p3bjkvg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La elecci√≥n tendr√° tres opciones para integrar el dispositivo:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SmartThings Cloud Connector: para conectar dispositivos que tienen su propia nube que se conectar√° a la nube SmartThings</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SmartThings Hub no est√° disponible para dispositivos ZigBee, Z-Wave, Bluetooth, y al momento de la escritura, ya que el hub a√∫n no se vende oficialmente en Rusia</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Directly Connected es la opci√≥n m√°s f√°cil para conectarse directamente, sin ning√∫n intermediario.&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Elige la tercera opci√≥n. </font><font style="vertical-align: inherit;">Piense en un nombre de proyecto, por ejemplo, por simplicidad: SmartSwitch. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/or/dg/5w/ordg5wpiqskc-9kyau_hjlquhaq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agregar un perfil de dispositivo. </font><font style="vertical-align: inherit;">Hablando en t√©rminos de OOP, un perfil de dispositivo es una "clase", y un dispositivo espec√≠fico es una "instancia de clase". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Necesitamos determinar las caracter√≠sticas funcionales del dispositivo en t√©rminos de capacidad SmartThings. </font><font style="vertical-align: inherit;">Puede </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">leer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre las "capacidades" generales del dispositivo </font><font style="vertical-align: inherit;">en el manual.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gk/sx/wl/gksxwlnkswip3cxd21fngup5jc0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Completamos los campos con nuestros valores. </font><font style="vertical-align: inherit;">Por ejemplo, se puede ingresar el nombre del perfil Test Switch Profile, descripci√≥n - cualquier texto, tipo de dispositivo - Switch, ID de proveedor - cualquier texto. </font><font style="vertical-align: inherit;">El "Tipo de dispositivo" afecta el icono de su dispositivo y la interfaz de usuario. </font><font style="vertical-align: inherit;">No hay muchos tipos posibles de dispositivos en la lista (aunque hay algunos ex√≥ticos, por ejemplo WineCellar, un gabinete para vinos), por lo que si no encuentra el suyo, no se desanime y simplemente elija el m√°s cercano y el m√°s cercano. </font><font style="vertical-align: inherit;">En la √∫ltima pantalla (Control del tablero) no puede cambiar nada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de crear el perfil, no olvide hacer clic en el bot√≥n "Agregar perfil de dispositivo al proyecto" en la esquina superior derecha.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/py/_m/ou/py_mouuxfu6aqpzsuhypzlwxhau.png"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importante: se requiere la comprobaci√≥n de estado para todos los dispositivos conectados directamente. </font><font style="vertical-align: inherit;">Agr√©guelo al perfil del dispositivo.&nbsp;</font></font><br>
</li>
<li>  ¬´ ¬ª   : Switch, Health Check.<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora agregue el perfil de autenticaci√≥n (perfil de incorporaci√≥n). En resumen, en este perfil puede personalizar las pantallas que aparecen cuando se conecta e inicia sesi√≥n por primera vez. Ingrese cualquier nombre y cualquier n√∫mero de tres d√≠gitos. Puede omitir las otras dos pantallas por ahora. En la √∫ltima pantalla, seleccione la opci√≥n de confirmaci√≥n - Confirmar bot√≥n - presionando el bot√≥n en el dispositivo. En este manual, asumimos que tiene una placa con un bot√≥n incorporado. Si de repente no hay un bot√≥n (por ejemplo, est√° utilizando otro m√≥dulo ESP), puede elegir la opci√≥n sin autenticaci√≥n: se llama Just Works, es decir, "simplemente funciona" sin ninguna pregunta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y de nuevo, por analog√≠a con el ejemplo anterior, no olvide hacer clic en el bot√≥n "Agregar incorporaci√≥n de dispositivo al proyecto".</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_4/8w/k1/_48wk1mewseukstfc4rbvdjx8qw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo lo que queda es hacer clic en el bot√≥n Implementar. </font><font style="vertical-align: inherit;">Despu√©s de eso, puede ver su dispositivo en la aplicaci√≥n SmartThings, pero solo en Modo desarrollador. </font><font style="vertical-align: inherit;">Si Deploy no se presiona y escriben "Agregue un nombre de modelo", esto significa que no especific√≥ una ID de incorporaci√≥n de dispositivo, despl√°cese hacia abajo en la p√°gina a continuaci√≥n y h√°galo; ingrese cualquier nombre de su elecci√≥n. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l1/cc/pr/l1ccprru9d4xx-2onzisikmuhlk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora puede comenzar a probar su dispositivo virtual en su tel√©fono. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo el primer paso se muestra en detalle en el video:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/0KLJNC2nj5M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registrar un dispositivo en la nube</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de comenzar a trabajar con el hardware real, debe hacer otra cosa. Despu√©s de presionar el bot√≥n Implementar, la pantalla se ver√° diferente: all√≠ aparecer√° un nuevo campo de Identidad del dispositivo.&nbsp; </font></font><br>
<img src="https://habrastorage.org/webt/ow/hj/tk/owhjtkpdu8stli8nbv5hykchulo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para autenticar su dispositivo en la nube SmartThings, debe ingresar su n√∫mero de serie y clave p√∫blica (con el esquema de firma ED25519). Esto es bastante f√°cil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este ejemplo muestra c√≥mo crear un par de claves ED25519 utilizando una herramienta en el SDK. Obtendr√° el archivo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">device_info.json</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como resultado del programa en la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">carpeta tools / keygen / linux / output_ {serialNumber}</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La versi√≥n de Linux de keygen se encuentra en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st-iot-device-sdk-c-reference / iot-core / tools / keygen / linux</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st-device-sdk-c / tools / keygen / linux</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El n√∫mero de serie del dispositivo de prueba se generar√° aleatoriamente en formato STDK + [MNID] + formato alfanum√©rico (8 caracteres). </font><font style="vertical-align: inherit;">Puede encontrar su MNID en el perfil de desarrollador en la secci√≥n Administrar cuenta.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f6/6b/tq/f66btqfqggupzu83olz6lbaru6c.png" width="300"><br>
<br>
<img src="https://habrastorage.org/webt/qv/1k/p0/qv1kp0xha-it8b8xnyaa4hj2fe8.png" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego, para generar la parte alfanum√©rica, debe ingresar su MNID (4 caracteres) como par√°metro keygen. </font><font style="vertical-align: inherit;">En el ejemplo a continuaci√≥n, el MNID es fJ * c.</font></font><br>
<br>
<pre><code class="bash hljs">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">cd</span> ~/Workspace/st-iot-device-sdk-c-ref/iot-core/tools/keygen<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;./stdk-keygen -m fJ*c<font></font>
&nbsp;&nbsp;&nbsp; Go Device Identity of Developer Workspace.<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Serial Number:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ STDKfJ*c&nbsp; &nbsp; ‚îÇ abed**5c   ‚îÇ<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Public Key:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;waGgyjWIvHhF1LU***FG2hx/4u***ADFHr/ry0j5jbk=<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Copie ‚Äúabed ** 5c‚Äù de la emisi√≥n de keygen y p√©guelo en los campos XXXXXXXX en la secci√≥n Registro de identidad del dispositivo. </font><font style="vertical-align: inherit;">Aparecer√° una ventana pidi√©ndole que ingrese la clave p√∫blica. </font></font><br>
<img src="https://habrastorage.org/webt/wv/bd/ft/wvbdftti3tqz7qug9us-jphddq8.png" width="500"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Copie la clave p√∫blica de la emisi√≥n keygen ("waGgyjWIvHhF1LU *** FG2hx / 4u *** ADFHr / ry0j5jbk =" en este ejemplo) y p√©guela en el campo "Clave p√∫blica del dispositivo".</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gx/wn/60/gxwn602ru15zwlvouhg68zo8918.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paso 2. Firmware del dispositivo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hable sobre el c√≥digo que descargar√° al dispositivo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejemplos de firmware se encuentran en la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">carpeta st-device-sdk-c-ref / apps / esp8266 /</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Nos interesar√° el ejemplo de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st_switch</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descargue </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onboarding_profile.json</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la ventana de descripci√≥n general de su dispositivo en la oficina del desarrollador.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/o5/he/mn/o5hemnlglw1ak1cu134aqeka4sm.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copie el archivo descargado </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onboarding_profile.json</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el directorio de su aplicaci√≥n, en nuestro caso </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apps / esp8266 / st_switch / main</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref/apps/esp8266/st_switch/main/<font></font>
cp ~/Downloads/onboarding_profile.json .<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya hay un ejemplo de dicho archivo, simplemente reempl√°celo con el tuyo.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Del mismo modo, copiar el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">device_info.json</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> archivo </font><font style="vertical-align: inherit;">de la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{} serialNumber carpeta de herramientas / keygen / Linux / output_</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , en la que se encuentra la informaci√≥n espec√≠fica del dispositivo, en la misma carpeta, reemplazando el archivo existente.</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref/iot-core/tools/keygen/linux/<font></font>
cp output_{serialNumber}/device_info.json ~/Workspace/st-device-sdk-c-ref/apps/esp8266/st_switch/main/</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este archivo, adem√°s de las claves y el n√∫mero de serie, est√° la l√≠nea "firmwareVersion", que puede reemplazarse con la versi√≥n de su programa.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ahora ensamble y actualice el programa.</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref<font></font>
./build.sh esp8266 st_switch<font></font>
./build.sh esp8266 st_switch flash<font></font>
./build.sh esp8266 st_switch monitor</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O lo mismo, pero m√°s corto:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref<font></font>
./build.sh esp8266 st_switch flash monitor</code></pre><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
! </font><font style="vertical-align: inherit;">Si no puede actualizar el programa de ninguna manera, lo m√°s probable es que haya olvidado poner la placa ESP8266 en modo de programaci√≥n. </font><font style="vertical-align: inherit;">Esto generalmente se hace presionando un bot√≥n en el tablero. </font><font style="vertical-align: inherit;">Por ejemplo, el m√≥dulo Wi-Fi Troyka se puede traducir manteniendo presionado el bot√≥n PROG y luego presionando y soltando el bot√≥n RESET. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de descargar el firmware, no olvide reiniciar la placa.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paso 3. Conexi√≥n y control desde el tel√©fono</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Active el modo desarrollador en la aplicaci√≥n SmartThings de su tel√©fono. C√≥mo hacerlo est√° </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escrito</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el sitio web oficial, pero es m√°s f√°cil de explicar con palabras: ingrese la configuraci√≥n a trav√©s del "engranaje" y presione el bot√≥n "Detalles de SmartThings" durante 20 segundos. El men√∫ "Modo desarrollador" aparece a continuaci√≥n. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/di/vs/hs/divshsyn6jnwbmaox3t_mkpaebe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuestro dispositivo debe estar visible en la lista de la aplicaci√≥n SmartThings: inicie la aplicaci√≥n, haga clic en el bot√≥n m√°s y Agregar dispositivo. Despl√°cese hasta el final de la lista de proveedores y vea el icono "Mis dispositivos de prueba". Haga clic en √©l y seleccione su dispositivo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_o/ks/pa/_okspakmd1pndm_lh-xpbeehyw8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s: si ya activ√≥ el modo de desarrollador y activ√≥ el dispositivo, ¬°tendr√° un men√∫ emergente que le ofrece agregar este dispositivo! </font><i><font style="vertical-align: inherit;">Comienza la</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
conexi√≥n: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8n/by/pd/8nbypdf-00xmksrlukpvetjlv2m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">administre el dispositivo desde la aplicaci√≥n SmartThings.&nbsp;</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al principio, el dispositivo aparece como un punto de acceso, porque a√∫n no conoce la contrase√±a de su WiFi. </font><font style="vertical-align: inherit;">Durante el proceso de conexi√≥n, especifique la red con la que se debe conectar el dispositivo. </font><font style="vertical-align: inherit;">Si tiene un punto de acceso oculto, ESP no podr√° conectarse a √©l, as√≠ que elija un punto abierto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El resultado ser√° este: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/--/pw/ne/--pwnex-v3o9iewlsmw7xk-lps8.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en este ejemplo ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interruptor st</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), usted controla el LED incorporado en el tablero presionando el bot√≥n en el tablero. </font><font style="vertical-align: inherit;">Como puede ver, para este ejemplo ni siquiera necesita perif√©ricos adicionales, solo la placa ESP8266. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n puede encender / apagar el dispositivo con el bot√≥n en el panel de control en la aplicaci√≥n m√≥vil: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nz/ze/-7/nzze-7ywppruvlqiafqpz4-xgew.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y, por supuesto, si presiona el bot√≥n f√≠sico, el estado de la bombilla en la aplicaci√≥n tambi√©n se actualiza.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplo de luz inteligente</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de haber hecho el ejemplo de Smart Switch, intentemos complicar un poco las cosas. </font><font style="vertical-align: inherit;">Habr√° un LED RGB, y activaremos / desactivaremos un bot√≥n externo, y tambi√©n seleccionaremos un color a trav√©s de la aplicaci√≥n.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hierro</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El esquema de conexi√≥n ser√° simple: </font></font><br>
<img src="https://habrastorage.org/webt/sv/xh/cf/svxhcfrv9zn7brswyuebeh_jd9o.png" width="500"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y el diagrama del circuito tampoco duele: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1z/gu/8v/1zgu8vamare3efr_qqtqt_s6bqa.png" width="500"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
si mira la fuente (ubicada en: st-device-sdk-c-ref / apps / esp8266 / st_lamp), entonces la conexi√≥n es la siguiente: </font><font style="vertical-align: inherit;">
puede reasignar las conclusiones seg√∫n las cuales Es el modelo del tablero que tienes. </font><font style="vertical-align: inherit;">Tenga en cuenta que hay un sistema de notaci√≥n (D1, D2 ...) en el tablero y otro en el c√≥digo, pero esto es f√°cil de resolver simplemente mirando la documentaci√≥n de su tablero.</font></font><br>
<br>
<code>#define GPIO_OUTPUT_NOTIFICATION_LED 2<br>
#define GPIO_INPUT_BUTTON 5<br>
#define GPIO_OUTPUT_COLORLED_R 16<br>
#define GPIO_OUTPUT_COLORLED_G 14<br>
#define GPIO_OUTPUT_COLORLED_B 12<br>
#define GPIO_OUTPUT_COLORLED_0 13&nbsp;</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte de software</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seg√∫n la parte del software, cambiaremos varios pasos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al agregar capacidades, debe especificar lo siguiente: Interruptor, Nivel de interruptor, Control de color, Verificaci√≥n de estado. </font><font style="vertical-align: inherit;">El tipo de dispositivo habr√° - Light.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tomamos un ejemplo de firmware de la misma carpeta con ejemplos, se llama </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st_lamp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .&nbsp;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La interfaz en la aplicaci√≥n se </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r9/qh/d_/r9qhd_lnaxlrnd5qcxonqzu2k70.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ver√° as√≠ </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">C√≥mo se ve en acci√≥n - una vez m√°s GIF:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cx/se/xy/cxsexydnzipoeqmkj3n7jq9x4iu.gif"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, tienes un ejemplo de trabajo listo. </font><font style="vertical-align: inherit;">Ver√° que la mayor parte del c√≥digo ya est√° hecho para usted, todo lo relacionado con la conexi√≥n, la autenticaci√≥n y la interfaz del dispositivo. </font><font style="vertical-align: inherit;">El ejemplo de SmartThings es valioso porque no est√° vinculado a ning√∫n dispositivo de hardware, y puede ver y evaluar qu√© funcionalidad de plataforma se necesita en 2k20 si est√° desarrollando una Smart Home. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g8/kt/h0/g8kth04siprq-9s2uwlli2fp6ae.jpeg" align="left"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tatyana Volkova, autora del plan de estudios de seguimiento de Internet de las cosas de Samsung IT Academy, especialista en programas de responsabilidad social corporativa en el Centro de Investigaci√≥n de Samsung</font></font><br>
</i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es489822/index.html">Generando n√∫meros pseudoaleatorios usando un aut√≥mata celular: Regla 30</a></li>
<li><a href="../es489824/index.html">7 herramientas de monitoreo de seguridad en la nube de c√≥digo abierto que vale la pena conocer</a></li>
<li><a href="../es489826/index.html">Acerca de los m√©todos mutables de un objeto matem√°tico en JavaScript</a></li>
<li><a href="../es489828/index.html">Trabajando con GeoJSON en Node.js: una introducci√≥n pr√°ctica</a></li>
<li><a href="../es489832/index.html">Cuentas at√≥micas hechas por el hombre: manipulaciones con macrociclos</a></li>
<li><a href="../es489836/index.html">Lidares del futuro: 11,000 l√°seres en lugar de 128</a></li>
<li><a href="../es489838/index.html">Fuga de memoria del lado del servidor Nuxt mediante SSR (representaci√≥n del lado del servidor)</a></li>
<li><a href="../es489840/index.html">Drive Anatomy: Discos duros</a></li>
<li><a href="../es489844/index.html">An√°lisis comparativo de algunos descompiladores de Java.</a></li>
<li><a href="../es489848/index.html">¬øPor qu√© mis colegas / empleados se comportan como @% ¬ß?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>