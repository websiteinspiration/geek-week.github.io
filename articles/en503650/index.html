<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåç üïé üí® VKCup 2020 Stage I. A Long Way üë©üèº‚ÄçüöÄ üë©üèæ‚Äçüíª ‚Ñ¢Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we will consider the VkCup 2020 competition and the task of the first qualifying stage. The guys from Singer promised that throughout all the st...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>VKCup 2020 Stage I. A Long Way</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503650/"><img src="https://habrastorage.org/webt/dd/fz/gq/ddfzgqiooh6cdrbos6l4sidkhr8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Today we will consider the VkCup 2020 competition and the task of the first qualifying stage. The guys from Singer promised that throughout all the stages it will be difficult, but interesting. And what, in fact, is still needed? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you know, the desire for excellence, honing one‚Äôs own skills to a sharpness similar to Damascus steel, is inherent in every specialist in any field. Examples of this mass. From the colorful paintings of artists, each of which spent a part of life (I would even say the best part of it), which could be wasted aimlessly at social events. Prior to keygen programs - software activators, each of which contains 8-bit music, an activation algorithm and animation, carefully and carefully tamped into a file, measuring only a few tens of kilobytes. Art, whatever one may say.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And no, this is not another article about self-development, honestly, honestly. I, in fact, what. In each of us there is a desire to solve non-trivial problems in our field. Moreover, the desire to do this is better than most around. It `s naturally. And, it seems to me, Machine Learning competitions, this is a great opportunity for this. Sometimes it is necessary to give freedom to the spirit of competition. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We will consider VKCup 2020, the championship for data analysis from VKontakte, namely, its three stages, with the final in St. Petersburg. Let's start with the first qualifier. Well, there is time, and Petersburg, although it is a cultural capital, does not like lateness and blemishes. So we deign to deal with affairs as soon as possible, sir, the gentleman the cabman is not expected to be located, and therefore a long way.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gg/hh/jr/gghhjrpukmsmnxjbpcd9bfx5mo4.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I think that many have already encountered NLP tasks. In this case, the task of the first qualifying stage, which set itself the task of selecting 256 people who went through the second, was an analysis of the issues of the Clover game, namely, predicting which of the questions were proposed by professional editors and which were by ordinary users. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The data size is about 40,000 rows, of which 10,000 is a test dataset by which the quality of the model will be estimated, and the other 30,000 is the remaining data set. The test metric is AUC ROC - the area under the error curve. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The data looked as follows, </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gt/6g/sw/gt6gswczuvgtaoddkznotxoyxnq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
where ID is the identifier of the question, Answer is a binary variable whose value must be predicted (1 - the question was proposed by the editor, zero 0 - by the user). Question - the question itself.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It would seem that the task is quite simple, but everything is far from the case. Standard approaches, such as Word2Vec, BERT, and other new-fangled NLP models, produce relatively low quality, about 0.7, which would not even make it into the first hundred. Therefore, remembering that the devil, like the LEGO people, live in the details, consider the dataset in more detail and develop a solution that will be relatively more efficient. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To begin with, during the initial EDA, you can notice that users often use atypical characters, write words in caps, sometimes not with a capital letter at the beginning of a sentence, forget about question marks, use strange quotes. They also copy editors' questions, passing them off as their own. And other interesting features.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's start with the baseline. Using the TF-IDF (Term Frequency - Inverted Document Frequency) measure, we get the sparsematrix, which we then feed into the gradient boost. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Just one definition, TF-IDF is a statistical measure used to assess the importance of a word in the context of a document that is part of a collection of documents or corpus. The weight of a word is proportional to the frequency of use of the word in the document and inversely proportional to the frequency of use of the word in all documents of the collection.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To reduce the retraining of the model, we will reduce the maximum number of tokens and compose the initial parameter matrix, which will consist of a combination of two smaller ones: one part is the TF-IDF matrix, where symbol sequences separated by spaces act as tokens, in fact they are words, and the other the part is a matrix where symbol sequences of a certain length act as tokens. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jp/qt/id/jpqtidpki0-42szipmiysyf6oio.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It looks pretty good, however, it can and should be better. This is the first part of the pipeline. In this case, ‚ÄúP‚Äù is an abbreviation of ‚ÄúPublic‚Äù, this is an indicator that shows how much the model scored on the open part of the test sample. And ‚ÄúF‚Äù is an abbreviation for ‚ÄúFinal‚Äù, a result on the hidden part of the data published after the end of the competition.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, we‚Äôll add some data to the dataset, which is generally not prohibited by the rules. And what is not prohibited is accordingly permitted. On the Internet you can find a number of datasets with quiz questions. If we download them and mark them as user questions. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iy/xm/_s/iyxm_szwfyf6imfis6nxhbx8liq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This idea, this is a double-edged sword and questions of discord. If you take questions from any special book, the model will have a dissonance. On the one hand, the writing style is close to the editorial, on the other hand, cunning users have long spammed them with private messages of the public game ‚ÄúClover‚Äù. Therefore, we will not use them; we will protect the model from bipolar disorder of modeliness.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As I said before, users have some negligence in formatting their questions, and so we will extract them using regular regular expressions. We will write regular expressions to check for the presence of a question mark, to identify different types of quotes, to search for capital letters ,, ,. And we will retrain the model on these signs. Moreover, the previous predicts will be an additional sign. This will help to correct the predictions of the previous model. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, a two-level model was implemented where the results of boosting on the sparse matrix of TF-IDF were adjusted by boosting on tabular attributes obtained using regular expressions.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7u/4a/ai/7u4aaizgb-bnqer4gkafiaec5r4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This was enough for 5th place on a private leaderboard out of 318. Something could be corrected and optimized, but time was running out. </font><font style="vertical-align: inherit;">One way or another, this is enough to go further. </font><font style="vertical-align: inherit;">And excessive perfectionism leads to nervousness. </font><font style="vertical-align: inherit;">In any case, see you later, love ML, stay calm and stay tuned. </font><font style="vertical-align: inherit;">Further it will be more interesting ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Üí The code in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github repository</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en503634/index.html">5 interesting JavaScript finds made in Vue source code</a></li>
<li><a href="../en503636/index.html">What kind of load on the servers create network mechanisms?</a></li>
<li><a href="../en503638/index.html">6 useful habits that, surprisingly, only a few programmers have</a></li>
<li><a href="../en503642/index.html">How to get on LinkedIn, Facebook, Google in Silicon Valley</a></li>
<li><a href="../en503648/index.html">What does the output of "ss -s" mean</a></li>
<li><a href="../en503652/index.html">Digital events in Moscow from May 25 to May 31</a></li>
<li><a href="../en503654/index.html">Web service that allows users to independently maintain a culture of communication online</a></li>
<li><a href="../en503656/index.html">The band suppression algorithm in the image as a tool for improving the quality of tomographic reconstruction</a></li>
<li><a href="../en503660/index.html">Test projects without pain. Yandex Report</a></li>
<li><a href="../en503662/index.html">NEW - VoIP Phone Snom D335</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>