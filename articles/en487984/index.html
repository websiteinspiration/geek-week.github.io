<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë¶ üß¶ üçü The tale of how I automated the apartment using Node-RED. Part I üè£ üíö ‚ÜòÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Over the past year, I have assembled and set up automation for a small apartment near a busy road. In this article I will talk about the solutions use...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>The tale of how I automated the apartment using Node-RED. Part I</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/487984/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Over the past year, I have assembled and set up automation for a small apartment near a busy road. </font><font style="vertical-align: inherit;">In this article I will talk about the solutions used in the climate system, lighting, multimedia and software.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_k/1w/hi/_k1whiczimlsb9xmwy5vfgvpzua.png"><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What i wanted to do</font></font></h3><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automate water shutoff in case of emergency.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Turn off ventilation in case of fire.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Report emergency.</font></font></li>
<li>     ( , ,  , ).</li>
<li>  (, ).</li>
<li> .</li>
<li>   (   ,  ,    ¬´¬ª     ).</li>
</ol><br>
<h3>  </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are several basic systems for managing home automation. There are both paid solutions and free ones - it all depends on the platform. It can be </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FPGA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (programmable logic integrated circuit), controllers in the form factor of the router, as well as just software. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Initially, I considered the finished </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIBARO Home Center 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> controller </font><font style="vertical-align: inherit;">as the main hub. Although the interface there is beautiful and there are many settings, but the hardware turned out to be weak. The firmware, judging by the reviews, was sometimes buggy. Other types of protocols are quite difficult to connect. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of the free options, I reviewed </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenHUB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Home Assistant.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. OpenHUB seemed too loaded and difficult to expand: for example, it is difficult to add a new Z-Wave module if it is not in OpenHUB configs. Home Assistant is easily extensible, but at the time of integration, automation could only be written in YAML, which is difficult to debug and maintain. The integration with Z-Wave in the Home Assistant has raised questions. Therefore, I chose another free analogue, which I will discuss later. </font><font style="vertical-align: inherit;">I chose </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node-RED</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> as the backend solution, as it provides many ready-made integrations with different protocols, is free and allows you to write automation logic directly in JavaScript in the browser without recompilation. With it, just debug scripts using debug and inject. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pi/xc/yo/pixcyowgftmafmmilsgrchnpri4.png" alt="Node-RED Script Editing Window"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node-RED Script Editing Window</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Node-RED uses NodeJS under the hood, so the rest of the binding was written on it too. </font><font style="vertical-align: inherit;">Node-RED is just a script editor and integrator of various protocols. </font><font style="vertical-align: inherit;">The front part of the control - as, for example, in the Home Assistant - is missing. </font><font style="vertical-align: inherit;">There are several plugins that add the ability to control devices from the browser, but they are not very convenient to configure and require writing front-end code also in the browser ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node-red-dashboard</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Each Flow in my system is autonomous and all communication between different Flows takes place via the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT bus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">I can also move the loaded Flow to separate servers for distributed processing.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Communication protocols with end devices</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My apartment is not very large, and there was especially nowhere to place the switching unit, so I decided to use wireless modules. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The system uses hidden control relays to leave the physical buttons in the same series with outlets. Physical buttons are needed both for direct control and in case of failure of the central controller. I chose between Z-Wave and ZigBee wireless systems. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the time of system integration, Z-Wave technology had the most complete collection of required devices. In different countries, Z-Wave uses a different operating frequency, in Russia you can officially use the frequency of 869 MHz. Since I bought most of the sensors in Russia, I decided to use the official frequency for the entire system.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition to Z-Wave, the system uses the BroadLink IR module and Modbus TCP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To integrate Z-Wave into Node-RED, I selected the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenZWave</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C ++ library </font><font style="vertical-align: inherit;">and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node-red-contrib-openzwave</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font color="#909090"><font style="vertical-align: inherit;">Event Processing Z-Wave</font></font><font style="vertical-align: inherit;"> 
to integrate </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">Modbus</font></a><font style="vertical-align: inherit;"> use </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">node-red-the contrib-modbus</font></a><font style="vertical-align: inherit;"> , management BroadLink - </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">node-red-the contrib-broadlink-control</font></a><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/a4/pg/z5/a4pgz5_fbdwsyckeftoa2nnkd5e.png" alt="Z-Wave Event Handling"></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Database</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I chose MongoDB as the main database: current readings from sensors and end devices are written there, it also stores IR codes for air conditioners and multimedia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
InfluxDB is used as a base for storing time series. </font><font style="vertical-align: inherit;">According to these data, you can see the graphs of humidity, temperature, build any groupings. </font><font color="#909090"><font style="vertical-align: inherit;">Outdoor temperature readings for a month</font></font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/0h/ij/vs/0hijvsflebsgvi_jhsteuwrno-e.png" alt="     "></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frontend</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I decided to write the front part myself in order to achieve maximum system flexibility. </font><font style="vertical-align: inherit;">When working with Dashboard, two auxiliary systems are used:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT server based on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aedes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">authorization server.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The authorization server issues a JWT token by login and password, or by belonging to a local network, after which the MQTT server checks this token every time it sends or receives a message for the front-end system. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The front end is written in ReactJS, and MQTT over WebSockets ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT.JS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) is </font><font style="vertical-align: inherit;">used as a server communication protocol </font><font style="vertical-align: inherit;">. As state MobX is used. TypeScript is also used, and it all compiles webpack. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The application consists of two pages: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/d-/im/v2/d-imv2wdmjvnia-chaycz14qhuy.png" alt="Dashboard"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dashboard </font></font></font><br>
<br>
<img src="https://habrastorage.org/webt/pi/it/_9/piit_9wpnyzdhkr2j7dorwm2mps.png" alt="  Z-Wave-"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Administration panel of Z-Wave devices</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
On the administration panel, you can add and remove devices, configure their parameters and associations. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mq/bj/_t/mqbj_ts0a5osdwnblvhh_u4pa08.png" alt="  FGD212"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FGD212 Dimmer Setting</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the Dashboard page, you can add new pages and combine device widgets as you like. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From a software point of view, each device is a separate module, which is entered into the system through the interface (Typescript). </font><font style="vertical-align: inherit;">This gives fairly easy extensibility and easy integration of new devices on the Dashboard.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Equipment</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a controller, I use the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel NUC NUC7PJYH</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on which Ubuntu Server is deployed. </font><font style="vertical-align: inherit;">For communication with the Z-Wave network, I chose the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USB stick Z-Wave.Me</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As the main remote for a smart home, an Android tablet is used, which I ordered on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alibaba.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">And the tablet came straight from the factory: with a Vesa mount, PoE power and a power plug (not USB). </font><font style="vertical-align: inherit;">The tablet is powered by a 12V power supply located on a DIN rail in the control cabinet. </font><font style="vertical-align: inherit;">There is no battery in the tablet, so as not to come up with options with constant charging. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I ordered a tablet according to my specifications. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-4/af/sa/-4afsabw1da8l2bsf51zfwqtym8.jpeg" alt=" "><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remote Control</font></font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Climate system</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To maintain a comfortable climate, the system uses:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Electric floor heating in three zones.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Air conditioning of living quarters.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Central ventilation.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Humidifiers.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Central heating.</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ventilation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since the house is located next to a busy highway and I don‚Äôt want to open the windows at all, I use the ventilation system. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ly/wi/wt/lywiwtj59f9rfwmbilvdibqrety.jpeg" alt="   ,     "><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Black dust on the window, accumulated in about three months.</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Studying different solutions to the problem of ventilation without opening the window, I made a short list of three options:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation of breathers in each room.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation of the outdoor unit and wiring of the ducts on the external wall.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Central ventilation system.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The breathers were rejected immediately, as they would have to be put in every room and, in my opinion, they are quite noisy for normal air exchange. One of the important conditions for me was the low noise level and the ability to quickly ventilate the room. When using a breather, a block with filters and a fan is hung directly on the wall inside the room, which takes up additional space in the apartment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Many installers offer to mount an external ventilation unit or install a supply to the balcony. But I do not have a balcony, and the external unit on the wall would look rather bulky. Given that two units from air conditioners are hanging on the wall already, such a design would not have passed approval. Therefore, I chose a central ventilation system.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since the apartment‚Äôs space is limited and there was no wish to lower the ceilings throughout the apartment, the inflow was installed in the corridor, where the ceilings were lowered, and the input was made from the children's room. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vr/vz/rr/vrvzrrj0g5z15t0df-7nfalpz3u.jpeg" alt=" "><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ventilation input</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
A hole with a diameter of 160 mm was drilled in the outer wall using a diamond drill and galvanized with an external grill. The inlet pipe was insulated with K-flex insulation. Then the pipe goes along the wall of the kitchen and enters the main ventilation unit. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jj/wh/nx/jjwhnx9umnabl7bgkbie1pcscu8.jpeg" alt="  Breezart 550 lux     "><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Breezart 550 lux ventilation unit and unit for optional filter The</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ventilation unit was selected by </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Breezart</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . When choosing, I took into account the installation cost, dimensions and the ability to connect to the automation system. The unit has a maximum capacity of 550 m¬≥ per hour:</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/-f/2d/9z/-f2d9zrqe5bprzao5zpma2vgtio.png" alt=" "></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The system has a quiet fan with 10 speeds and an electric air heater. An electromechanical valve is installed at the entrance, which closes when the unit is turned off so that cold air does not walk around the apartment. On the electronics side, the installation provided three Modbus ports, temperature sensors and pressure sensors to determine if filters are dirty. Included with the installation is a coarse filter G4. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cd/lg/oh/cdlgohth4-gnxy_raief3jysfpy.jpeg" alt="     "><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The coarse filter after six months of use</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
The coarse filter clogged by 70% after a year of use, but judging by the CO‚ÇÇ sensor, the ventilation no longer pulled at low speeds. </font><font color="#909090"><font style="vertical-align: inherit;">Until December 20 - the filter is clogged, after December 20 - a new filter, the speed is the same</font></font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/bs/qe/nn/bsqennprgexihmp5qlnppjhppye.png" alt=" 20  ‚Äî  ,  20  ‚Äî  ,    "></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After the ventilation installation, there is a fine filter F7. Using finer filters, such as HEPA, for my situation, I considered it inappropriate: they will clog quickly and the installation will not be able to push them. Also, manufacturers do not recommend exceeding the pressure drop across the filter, as this will increase the load on the fan and dirt from the filters may begin to blow into the rooms.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/43/1a/9l/431a9lvm3xj9hbclnskkl-mknyq.png" alt="   "></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After the fine filter, two mechanical air flow regulators are installed, followed by several SONODEC flexible air ducts to the rooms. This type of duct was chosen so as not to put a bulky muffler and at the same time drown out the noise of the installation. After closing the ceiling, the ventilation system is audible only starting at speed 8 (440 m¬≥ per hour) and only from the corridor. At the ventilation outlet there are grilles adjustable in two directions. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zu/7k/im/zu7kimcgwkzo5aev9gox2zfujpy.jpeg" alt="   "><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ceiling-</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
mounted </font><font color="#909090"><font style="vertical-align: inherit;">ventilation system Ventilation </font></font></font><br>
<br>
<img src="https://habrastorage.org/webt/lt/uq/ya/ltuqya4yak7ydqqfwaelvorpsxg.jpeg" alt="     "><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">output to one of the rooms</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A remote control from the kit is connected to one of the Modbus ports, and a Modbus TCP HF2211 server to the second. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rd/a2/_r/rda2_rztx4z181nfpl3fxapgwzs.jpeg" alt="Modbus RTU ‚Äî Modbus TCP converter HF2211"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modbus RTU - Modbus TCP converter HF2211</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This server allows you to connect to the internal network via Wi-Fi or Ethernet, on the one hand, and to the Modbus RTU device on the other. Then on it you can raise the server with the necessary settings and already access the ventilation unit via the network. The installation is polled every 300 ms: errors and checksums are checked and only after that it is allowed to write some data to the registers. Communication with the installation occurs through the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node-red-contrib-modbus plugin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font color="#909090"><font style="vertical-align: inherit;">Scheme of receiving and sending parameters from a ventilation unit via modbus </font></font><font color="#909090"><font style="vertical-align: inherit;">Scheme of receiving and sending parameters from a ventilation unit through modbus</font></font><font style="vertical-align: inherit;"> 
The manufacturer's website has a detailed </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">reference of modbus registers</font></a><font style="vertical-align: inherit;"> and a </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">general description</font></a></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/k7/2v/p_/k72vp_pyjxo8efdugktk6j8xbe0.png" alt="        modbus"></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br>
<img src="https://habrastorage.org/webt/ye/v6/cr/yev6crajttwfavoo--xqpnhx9j4.png" alt="        modbus"><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for this installation, but you need to check the version of the controller and firmware. The ventilation unit is controlled automatically by time and by the CO‚ÇÇ MH-Z19b sensor. </font><font color="#909090"><font style="vertical-align: inherit;">Flow ventilation automation </font></font><font color="#909090"><font style="vertical-align: inherit;">Flow automation ventilation</font></font><font style="vertical-align: inherit;"> 
The CO‚ÇÇ sensor is portable, assembled on the basis of the MH-Z19b sensor, two 18650 batteries, ESP32 and IRF520 mosfet (to disconnect power from the sensor during the controller‚Äôs sleep). </font><font color="#909090"><font style="vertical-align: inherit;">CO‚ÇÇ readings for a month, peak to 1800 PPM - guests came with the subsequent inclusion of ventilation at higher revolutions</font></font><font style="vertical-align: inherit;"> 
. Depending on the installation speed, a comfortable temperature of the incoming air is set, which heats the air heater.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/py/-w/if/py-wifq8mla3iw9k6in1sn9_eek.png" alt="Flow  "></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/b8/iw/gr/b8iwgr4ld9mrdjuuafbhas6dpna.png" alt="Flow  "></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/0i/e_/7q/0ie_7q_6cc6f-eipfnui0jx-n6k.png" alt=" CO‚ÇÇ  ,   1800 PPM ‚Äî         "></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At higher speeds, a higher temperature is required - otherwise a stream of cold air will be felt. </font><font style="vertical-align: inherit;">In order not to consume much electricity in winter, when it is colder outside ‚àí7 ¬∞ C, the installation is limited to a third speed. </font><font style="vertical-align: inherit;">At night, installation is limited to a fourth speed. </font><font style="vertical-align: inherit;">If nobody is at home, the system automatically switches to the first speed. </font><font style="vertical-align: inherit;">At the "Vacation" command, a complete shutdown occurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is a pre-heating mode after vacation, airing at full speed and a transition to the first speed on a timer. </font><font style="vertical-align: inherit;">If the system has CO‚ÇÇ sensors, then additional speed control is possible in accordance with global restrictions.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conditioning</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The system has several air conditioners with cooling and heating modes. There was an idea to put central air conditioning, but all the systems are too large and do not give the opportunity to regulate the temperature in each room. Unfortunately, my air conditioners are controlled only by IR. So I bought the Broadlink RM Mini3 control panel. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8j/iy/uj/8jiyujzojcsbgybjonzuctvefxo.jpeg" alt="Broadlink RM Mini3"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Broadlink RM Mini3</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
If you use a native application, then this remote will connect to Chinese servers, so all configuration and management commands are transmitted directly from Node-RED using the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node-red-contrib-broadlink-control</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> module </font><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since I did not find any clean IR codes for the air conditioners, and the remote control transmits the entire state (revs, mode, temperature) - all possible states for heating and cooling were copied from the air conditioning remote using Broadlink to the database. There were no clean commands to enable or disable either. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But I found how to use the air conditioner on and off timers. I set them for 10 seconds and copied them to the database. Now, when turned on, the command to turn on by timer is transmitted first, and then the command to set the mode along with the temperature. </font><font color="#909090"><font style="vertical-align: inherit;">Air conditioning control</font></font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/am/is/tm/amistmp9wbyfvyap7bg-nvvvcte.png" alt=" "></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The script checks the weather outside and, if the values ‚Äã‚Äãare acceptable (more than ‚àí7 ¬∞ C), it turns on the air conditioner for heating or cooling, depending on the time of day and the room temperature. </font><font style="vertical-align: inherit;">The temperature sensor reads once an hour. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If everyone leaves the house, the air conditioners turn off. </font><font style="vertical-align: inherit;">If nobody is there and the temperature is too high or low, but the heating batteries are not yet turned on, then a 15-minute cooling or heating takes place every hour to maintain the indoor climate. </font><font color="#909090"><font style="vertical-align: inherit;">Air Conditioner Management Scenario</font></font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/lr/oa/er/lroaerpssy1m9qyknb0c39hrfse.png" alt="Air Conditioner Management Scenario"></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Floor heating</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The system has three circuits for electric floor heating. They are controlled by </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">three HeatIt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Z-Wave thermostats </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sv/ct/k-/svctk-3pmyypmjsvczxqehdvksm.jpeg" alt="Thermostat HeatIt"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thermostat HeatIt The</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
thermostat allows you to configure different resistance parameters for different types of heating elements, has child protection, two saved heating modes and other minor settings. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the cold season, the floor temperature is set at 1 ¬∞ C more than summer. When there is no one at home, and also at night, the floors are turned off to save energy and turned on either in the morning or as soon as someone comes home. In the bathroom, the floor raises the temperature, if the light is on, the door is closed, there was movement until the door was closed and humidity increased sharply. After an hour, the floor goes into the previous state or turns off (if night falls).</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/pg/uj/u-/pguju-x0pul9hmoam6xz4tgsvx8.png" alt="Underfloor control scenario"></a><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heated floor </font></font></font><font style="vertical-align: inherit;"><font color="#909090"><font style="vertical-align: inherit;">management script Heated floor management script</font></font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/2k/hm/zw/2khmzwkksrhsrejcjq9thylccck.png" alt="Underfloor control scenario"></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Central heating</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since Moscow does not always turn off or regulate heating on time depending on the temperature outside the window, it was decided to put a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Danfoss Living Connect</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> thermostat on each battery </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fx/0q/aa/fx0qaaxnvyqupve_oujmgfo4aza.jpeg" alt="Thermostat Danfoss Living Connect"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thermostat Danfoss Living Connect</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
This thermostat is powered by two finger batteries using the Z-Wave protocol. </font><font style="vertical-align: inherit;">A year has passed since the installation, but the batteries have not run out yet. </font><font style="vertical-align: inherit;">The maximum set temperature is 28 ¬∞ C. </font><font style="vertical-align: inherit;">Since the sensor is next to the battery and the remote is not connected, it sometimes lies.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the summer, the temperature regulator is always in the ‚Äúopen‚Äù position and makes a complete closure once every two weeks, so that the stock does not sour. </font><font style="vertical-align: inherit;">When you connect for the first time during the week, the sensor is calibrated (which didn‚Äôt really please my wife, as the batteries turned off periodically), but after that everything worked as it should. </font><font style="vertical-align: inherit;">Before the start of the heating season, the average outdoor temperature for two weeks is checked, and if it is below 10 ¬∞ C, thermostats go into heating mode. </font><font style="vertical-align: inherit;">If the temperature in the room is higher than the comfortable one, thermostats reduce the temperature or completely turn off the battery.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Humidifiers</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To humidify the air in the apartment, central humidifiers were considered. There are two main types: steam and traditional. A steam humidifier requires a lot of electricity to constantly heat water. Both types of humidifier drain a lot of water into the drain so that it does not bloom. It is necessary to carry out calculations so that the ducts do not bloom and flow. It is also worth considering that central humidifiers are expensive and take up a lot of space. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I decided to use ultrasonic humidifiers in each room. They quickly raise humidity, but they require purified water, preferably after reverse osmosis. Humidity can be set on the humidifiers themselves, or can be controlled using IR.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/33XXlI4m3vk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An example of the operation of the interface</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
In the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">second part of the</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> article I will talk about lighting, a multimedia system and security sensors, and also summarize the long-term use of the system.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en487966/index.html">TDD for microcontrollers. Part 1: First Flight</a></li>
<li><a href="../en487970/index.html">We translate a corporate portal in Microsoft Teams</a></li>
<li><a href="../en487972/index.html">Informal interviews with hackers</a></li>
<li><a href="../en487978/index.html">My research: ‚ÄúWhy play competitive online games?‚Äù</a></li>
<li><a href="../en487980/index.html">How Spring Boot Auto-Configuration Works</a></li>
<li><a href="../en487990/index.html">Cyberthreats. Prediction for 2020: artificial intelligence, gaps in the clouds, quantum computing</a></li>
<li><a href="../en487996/index.html">How script drivers and server mothers take over IT</a></li>
<li><a href="../en488000/index.html">Tesla Plaid. Two options for three-motor drive layout</a></li>
<li><a href="../en488002/index.html">The case of one geek</a></li>
<li><a href="../en488006/index.html">At Moscow Python Conf ++, come talk to the language developers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>