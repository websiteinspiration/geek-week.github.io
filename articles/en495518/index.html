<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîô üèñÔ∏è üëÉ React form development. KISS, YAGNI, DRY principles in practice ü§∏üèø ‚úäüèæ üôçüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, in this tutorial we will look at how to develop a very simple, but controlled form in React, focusing on the quality of the code. 
 
 When deve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>React form development. KISS, YAGNI, DRY principles in practice</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495518/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hello, in this tutorial we will look at how to develop a very simple, but controlled form in React, focusing on the quality of the code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When developing our form, we will follow the principles of ‚ÄúKISS‚Äù, ‚ÄúYAGNI‚Äù, ‚ÄúDRY‚Äù. </font><font style="vertical-align: inherit;">To successfully complete this tutorial you do not need to know these principles, I will explain them along the way. </font><font style="vertical-align: inherit;">However, I believe that you have a good command of modern javascript and can </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">think in React</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><a name="habracut"></a> <br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tutorial structure:</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To the cause! </font><font style="vertical-align: inherit;">Writing a simple form using KISS and YAGNI</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Refactoring and DRY</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What else can be done?</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oh no! </font><font style="vertical-align: inherit;">Do not do so, please!</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">findings</font></font></a></li>
</ul><br>
<br>
<hr><br>
<a name="react-form-with-kiss-and-yagni"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To the cause! </font><font style="vertical-align: inherit;">Writing a simple form using KISS and YAGNI</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, let's imagine that we have a task to implement an authorization form:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> logInData = {
  <span class="hljs-attr">nickname</span>: <span class="hljs-string">'Vasya'</span>,
  <span class="hljs-attr">email</span>: <span class="hljs-string">'pupkin@gmail.com'</span>,
  <span class="hljs-attr">password</span>: <span class="hljs-string">'Reac5$$$'</span>,<font></font>
};<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/um/1u/vm/um1uvmjncpnlgaabmaui6rscw0s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We begin our development by analyzing the principles of KISS and YAGNI, temporarily forgetting about the rest of the principles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KISS - ‚ÄúLeave the code simple and dumb.‚Äù I think you are familiar with the concept of simple code. But what does ‚Äúdumb‚Äù code mean? In my understanding, this is code that solves the problem using the minimum number of abstractions, while the nesting of these abstractions in each other is also minimal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
YAGNI - ‚ÄúYou won‚Äôt need it.‚Äù The code should be able to do only what it is written for. We do not create any functionality that may be needed later or which makes the application better in our opinion. We do only what is needed specifically for the implementation of the task. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's strictly follow these principles, but also consider:</font></font><br>
<br>
<ul>
<li><code>initialData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>onSubmit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comes from the top (this is a useful technique, especially when the form should be able to process </font></font><code>create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">at the same time)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">must have for each field </font></font><code>label</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition, let's miss the stylization, since it is not interesting to us, and valid, as this is a topic for a separate tutorial. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Please implement the form yourself, following the principles described above.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">My form implementation</font></font></b><div class="spoiler_text"> <div class="spoiler"><b class="spoiler_title">  </b><div class="spoiler_text"> <pre><code class="javascript hljs"><span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
    e.preventDefault();<font></font>
    onSubmit(logInData);<font></font>
  };<font></font>
<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
        Enter your nickname
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, nickname: e.target.value })}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
        Enter your email
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, email: e.target.value })}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
        Enter your password
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
};<font></font>
    </code></pre><br>
 </div></div><br>
 <img src="https://habrastorage.org/webt/kv/i6/l0/kvi6l0hduiubopcittxuxczjqby.png"><br>
</div></div><br>
 <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Your decision, most likely, is somewhat different, because each developer thinks differently. </font><font style="vertical-align: inherit;">You can create your own state for each field or place handler functions in a separate variable, in any case this is not important. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But if you immediately created one handler function for all fields, then this is no longer the ‚Äúdumbest" solution to the problem. </font><font style="vertical-align: inherit;">And our goal at this stage is to create the simplest and most "dumb" code so that later we can look at the whole picture and select the best abstraction. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you have the exact same code, this is cool and means that our thinking converges! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Further we will work with this code. </font><font style="vertical-align: inherit;">It is simple, but still far from ideal.</font></font><br>
<br>
<hr><br>
<a name="refactoring-and-dry"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Refactoring and DRY</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It's time to deal with the DRY principle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DRY, simplified wording - "do not duplicate your code." </font><font style="vertical-align: inherit;">The principle seems simple, but it has a catch: to get rid of code duplication, you need to create abstractions. </font><font style="vertical-align: inherit;">If these abstractions are not good enough, we will violate the KISS principle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is also important to understand that DRY is not needed to write code faster. </font><font style="vertical-align: inherit;">Its task is to simplify the reading and support of our solution. </font><font style="vertical-align: inherit;">Therefore, do not rush to create abstractions right away. </font><font style="vertical-align: inherit;">It is better to make a simple implementation of some part of the code, and then analyze what abstractions you need to create in order to simplify the reading of the code and reduce the number of places for changes when they are needed. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Checklist of correct abstraction:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the name of the abstraction is fully consistent with its purpose</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abstraction performs a specific, understandable task</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reading the code from which the abstraction was extracted improved</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, let's get down to refactoring. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And we have pronounced duplicate code:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  &lt;label&gt;<font></font>
    Enter your email<font></font>
    &lt;input<font></font>
      type=<span class="hljs-string">"email"</span><font></font>
      value={logInData.email}<font></font>
      onChange={e =&gt; setLogInData({ ...logInData, <span class="hljs-attr">email</span>: e.target.value })}<font></font>
    /&gt;<font></font>
  &lt;/label&gt;<font></font>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
    Enter your password
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
      <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
      <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
    /&gt;
  <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/sl/u5/1t/slu51tnyjsk5ki1kowgso6qx5mk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This code duplicates a composition of 2 elements: </font></font><code>label</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Let's merge them into a new abstraction </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  &lt;label&gt;<font></font>
    Enter your email<font></font>
    &lt;input<font></font>
      type=<span class="hljs-string">"email"</span><font></font>
      value={logInData.email}<font></font>
      onChange={e =&gt; setLogInData({ ...logInData, <span class="hljs-attr">email</span>: e.target.value })}<font></font>
    /&gt;<font></font>
  &lt;/label&gt;<font></font>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
    Enter your password
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
      <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
      <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
    /&gt;
  <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/ff/wi/j5/ffwij5ors822a6fu8n7_ciuwe3w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now ours </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">looks like this:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
    e.preventDefault();<font></font>
    onSubmit(logInData);<font></font>
  };<font></font>
<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, nickname: e.target.value })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, email: e.target.value })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
};<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/ns/ah/yi/nsahyidxew9tz3tqub5mcz09184.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reading has become easier. </font><font style="vertical-align: inherit;">The name of the abstraction corresponds to the task that it solves. </font><font style="vertical-align: inherit;">The purpose of the component is obvious. </font><font style="vertical-align: inherit;">The code has become less. </font><font style="vertical-align: inherit;">So we are going in the right direction! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now it‚Äôs clear that the </font></font><code>InputField.onChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">logic is duplicated. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What happens there can be divided into 2 stages:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> stage1 = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> e.target.value;
<span class="hljs-keyword">const</span> stage2 = <span class="hljs-function"><span class="hljs-params">password</span> =&gt;</span> setLogInData({ ...logInData, password });
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/n-/_o/dq/n-_odqnut4_5zg9-48xvusajjlg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first function describes the details of getting the value from the event </font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. We have a choice of 2 abstractions in which we can store this logic: </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order to determine correctly which of the abstractions we need to refer our code to, we will have to turn to the full formulation of the DRY principle: ‚ÄúEach part of knowledge should have a unique, consistent and authoritative representation within the system.‚Äù </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Part of the knowledge in the concrete example is knowing how to get the value from the event in </font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. If we will store this knowledge in ours </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, then it is obvious that when using our</font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in another form, we will have to duplicate our knowledge, or to bring it into a separate abstraction and use it from there. </font><font style="vertical-align: inherit;">And based on the KISS principle, we should have the minimum possible number of abstractions. </font><font style="vertical-align: inherit;">Indeed, why do we need to create another abstraction if we can just put this logic in ours </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and the external code will not know anything about how input works inside </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">It will simply take on a ready-made meaning, the same as it passes inward. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you are confused that you may need an event in the future, remember the YAGNI principle. </font><font style="vertical-align: inherit;">You can always add an additional prop </font></font><code>onChangeEvent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to our component </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Until then it </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will look like this:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> InputField = <span class="hljs-function">(<span class="hljs-params">{ label, type, value, onChange }</span>) =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
    {label}
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span>
      <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>
      <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> onChange(e.target.value)}
    /&gt;
  <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><font></font>
);<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/cz/bc/bg/czbcbgp-xlbirtjno8_5enjc9lk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, uniformity of the type is observed during input and output into the component and the true nature of what is happening for the external code is hidden. </font><font style="vertical-align: inherit;">If in the future we need another ui component, for example, checkbox or select, then in it we will also maintain type uniformity on input-output. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This approach gives us additional flexibility, since our form can work with any input-output sources without the need to produce additional unique handlers for each. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This heuristic trick is built-in by default in many frameworks. </font><font style="vertical-align: inherit;">For example, this is the main idea </font></font><code>v-model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code>Vue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">which many people love for its ease of working with forms. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's get back to business, update our component </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in accordance with the changes in </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
    e.preventDefault();<font></font>
    onSubmit(logInData);<font></font>
  };<font></font>
<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{nickname</span> =&gt;</span> setLogInData({ ...logInData, nickname })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{email</span> =&gt;</span> setLogInData({ ...logInData, email })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{password</span> =&gt;</span> setLogInData({ ...logInData, password })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
};<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/6b/cq/wb/6bcqwbfusg_fmw1pqbc8yxhxlsy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It already looks pretty good, but we can do even better! </font></font><br>
<br>
<code>Callback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">that is passed in </font></font><code>onChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">always does the same thing. </font><font style="vertical-align: inherit;">Only the key is changed in it: password, email, nickname. </font><font style="vertical-align: inherit;">So, we can replace it with a call to the function: </font></font><code>handleChange('password')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's implement this function:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
    setLogInData({<font></font>
      ...logInData,<font></font>
      [fieldName]: fieldValue,<font></font>
    });<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/z7/po/o5/z7poo5vlkkdxtc939hzlt1gendk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, the function receives the argument and stores it in the closure of the handler, and the handler immediately returns to the external code. </font><font style="vertical-align: inherit;">Functions that seem to take arguments one at a time for a call are also called curried. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's look at the resulting code:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
  <font></font>
    <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
      e.preventDefault();<font></font>
      onSubmit(logInData);<font></font>
    };<font></font>
  <font></font>
    <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
      setLogInData({<font></font>
        ...logInData,<font></font>
        [fieldName]: fieldValue,<font></font>
      });<font></font>
    };<font></font>
  <font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">nickname</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">email</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">password</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
    );<font></font>
  };<font></font>
  <font></font>
  <span class="hljs-comment">// InputField.js</span>
  <span class="hljs-keyword">const</span> InputField = <span class="hljs-function">(<span class="hljs-params">{ type, label, value, onChange }</span>) =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
      {label}
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> onChange(e.target.value)} /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><font></font>
  );<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/bm/nu/td/bmnutdzasqokociudliqjyhli_k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This code is short, concise and moderately declarative implementation of the task. </font><font style="vertical-align: inherit;">Further refactoring in the context of the task, in my opinion, does not make sense.</font></font><br>
<br>
<hr><br>
<a name="what-else-can-we-do"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What else can be done?</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you have many forms in the project, then you can put the handleChange calculation into a separate hook </font></font><code>useFieldChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-comment">// hooks/useFieldChange.js</span>
  <span class="hljs-keyword">const</span> useFieldChange = <span class="hljs-function"><span class="hljs-params">setState</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
    setState(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({<font></font>
      ...state,<font></font>
      [fieldName]: fieldValue,<font></font>
    }));<font></font>
  };<font></font>
  <span class="hljs-comment">// LogInForm.js</span>
  <span class="hljs-keyword">const</span> handleChange = useFieldChange(setLogInData);
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/eb/b8/eg/ebb8egvqobm-n27dn3tsuflcvly.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since this is a pure function (meaning the first time it is called because it always returns the same function), it does not have to be a hook. </font><font style="vertical-align: inherit;">But the hook looks conceptually a more correct and natural solution for React. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can also add </font></font><code>callback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in-place </font><font style="vertical-align: inherit;">support </font></font><code>fieldValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to completely replicate the usual behavior </font></font><code>setState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from </font></font><code>React</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> isFunc = <span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> <span class="hljs-keyword">typeof</span> val === <span class="hljs-string">"function"</span>;<font></font>
<font></font>
  <span class="hljs-keyword">const</span> useFieldChange = <span class="hljs-function"><span class="hljs-params">setState</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
    setState(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({<font></font>
      ...state,<font></font>
      [fieldName]: isFunc(fieldValue) ? fieldValue(state[fieldName]) : fieldValue,<font></font>
    }));<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/fz/t5/pd/fzt5pdldmj5gdy7duoycglqqrfe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An example of use with our form:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);
    <span class="hljs-keyword">const</span> handleChange = useFieldChange(setLogInData);<font></font>
  <font></font>
    <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
      e.preventDefault();<font></font>
      onSubmit(logInData);<font></font>
    };<font></font>
  <font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">nickname</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">email</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">password</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
    );<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/os/zb/ua/oszbuaygonezp9c2epw4st-msqy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But if your application has only one form, you don‚Äôt need to do all this! </font><font style="vertical-align: inherit;">Because it contradicts the YAGNI principle, following which we should not do what we do not need to solve a specific problem. </font><font style="vertical-align: inherit;">If you have only one form, then the real benefits of such movements are not enough. </font><font style="vertical-align: inherit;">After all, we reduced the code of our component only by 3 lines, but introduced an additional abstraction, hiding a certain logic of the form, which is better to keep on the surface.</font></font><br>
<br>
<hr><br>
<a name="do-not-do-that-please"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oh no! </font><font style="vertical-align: inherit;">Do not do so, please!</font></font></h2><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shaped Config Forms</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Locked configs are like a webpack config, only for form. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Better with an example, look at this code:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> Form = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state.nickname}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">nickname</span>')}
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state.email}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">email</span>')}
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state.password}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">password</span>')}
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/0t/ro/cn/0trocndcco4vp8yld7cl6qfc0pa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It might seem to some that the code is duplicated here, because we call the same InputField component, passing the same label, value and onChange parameters there. </font><font style="vertical-align: inherit;">And they start to-DRY-yav their own code to avoid imaginary duplication. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Often they do this like this:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> fields = [<font></font>
  {<font></font>
    <span class="hljs-attr">name</span>: <span class="hljs-string">'nickname'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'Enter your nickname'</span>,<font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">type</span>: <span class="hljs-string">'email'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'email'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'Enter your email'</span>,<font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">type</span>: <span class="hljs-string">'password'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'password'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'Enter your password'</span>,<font></font>
  },<font></font>
];<font></font>
<font></font>
<span class="hljs-keyword">const</span> Form = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
    {fields.map(({ type, name, label }) =&gt; (
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">{label}</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state[name]}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(name)}</span>
      /&gt;</span>
    ))}
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
);<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/qi/f4/b4/qif4b4hwl1wjsinh3d7pi5xtv74.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, with 17 lines of jsx code we get 16 lines of the config. </font><font style="vertical-align: inherit;">Bravo! </font><font style="vertical-align: inherit;">This is what I understand DRY. </font><font style="vertical-align: inherit;">If we have 100 of these inputs here, then we get 605 and 506 lines, respectively. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But, as a result, we got more complex code, violating the KISS principle. </font><font style="vertical-align: inherit;">After all, now it consists of 2 abstractions: fields and an algorithm (yes, an algorithm is also an abstraction), which turns it into a tree of React elements. </font><font style="vertical-align: inherit;">When reading this code, we will have to constantly jump between these abstractions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the biggest problem with this code is its support and extension. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine what will happen to him if:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">some more field types with different possible properties will be added</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fields are rendered or not rendered based on the input of other fields</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">some fields require some additional processing when changing</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">values ‚Äã‚Äãin selects depend on previous selects</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This list can be continued for a long time ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To implement this, you will always have to store some functions in your config, and the code that renders the config will gradually turn into Frankenstein, taking a bunch of different props and throwing them over different components. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The code that was written before, based on the composition of components, will quietly expand, change as you like, while not becoming very complicated due to the lack of intermediate abstraction - an algorithm that builds a tree of React elements from our config. </font><font style="vertical-align: inherit;">This code is not duplicate. </font><font style="vertical-align: inherit;">It just follows a certain design pattern, and therefore it looks "patterned".</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Useless optimization</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After hooks appeared in React, there was a tendency to wrap all handlers and components indiscriminately in </font></font><code>useCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>memo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Please, do not do that! </font><font style="vertical-align: inherit;">These hooks were not provided by React developers because React is slow and everything needs to be optimized. </font><font style="vertical-align: inherit;">They provide room for optimizing your application in case you run into performance issues. </font><font style="vertical-align: inherit;">And even if you encounter such problems, you do not need to wrap the entire project in </font></font><code>memo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>useCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Use </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Profiler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to identify problems and only then memoize in the right place. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memoizing will always make your code more complicated, but not always more productive. </font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's look at the code from a real project. </font><font style="vertical-align: inherit;">Compare what the function looks like with </font></font><code>useCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and without:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> applyFilters = useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> newSelectedMetrics = <span class="hljs-built_in">Object</span>.keys(selectedMetricsStatus).filter(
      <span class="hljs-function"><span class="hljs-params">metric</span> =&gt;</span> selectedMetricsStatus[metric],<font></font>
    );<font></font>
    onApplyFilterClick(newSelectedMetrics);<font></font>
  }, [selectedMetricsStatus, onApplyFilterClick]);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> applyFilters = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> newSelectedMetrics = <span class="hljs-built_in">Object</span>.keys(selectedMetricsStatus).filter(
      <span class="hljs-function"><span class="hljs-params">metric</span> =&gt;</span> selectedMetricsStatus[metric],<font></font>
    );<font></font>
    onApplyFilterClick(newSelectedMetrics);<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/nh/iq/r1/nhiqr1y0yajlgo101b-dytdcq0u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The readability of the code clearly increased after the removal of the wrapper, because the ideal code is its lack. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The performance of this code has not increased, because this function is used like this:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy Code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  &lt;RightFooterButton onClick={applyFilters}&gt;APPLY&lt;/RightFooterButton&gt;
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/wb/-7/a3/wb-7a33k1c2cjctumjl9wqi7ztu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Where </font></font><code>RightFooterButton</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- it's just </font></font><code>styled.button</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from </font></font><code>styled-components</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which will update very quickly. </font><font style="vertical-align: inherit;">But memory consumption increase our application because React will always keep in memory </font></font><code>selectedMetricsStatus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>onApplyFilterClick</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and the version of the function </font></font><code>applyFilters</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, relevant for these dependencies. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If these arguments are not enough for you, read the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> that discusses this topic more widely.</font></font><br>
<br>
<hr><br>
<a name="conclusions"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">findings</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">React forms are easy. </font><font style="vertical-align: inherit;">Problems with them arise due to the developers themselves and the React documentation, in which this topic is not covered in sufficient detail.</font></font><br>
 </li>
<li>           aka value  onChange  .      useFieldChange,  ,     ,      <code>v-model</code>  <code>Vue</code>   .<br>
 </li>
<li>         KISS  YAGNI.    DRY,  ,      .</li>
<li>       ,         ,        React-    .<br>
 </li>
<li>  ,      .</li>
</ul><br>
<br>
<hr><br>
<h3>P.S.</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Initially, I planned to write about declarative validation of complex nested forms. </font><font style="vertical-align: inherit;">But, in the end, I decided to prepare the audience for this, so that the picture was as complete as possible. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The following tutorial will be about validating the simple form implemented in this tutorial. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Many thanks to everyone who read to the end! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It doesn‚Äôt matter how you write code or what you do, the main thing is to enjoy it.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en495500/index.html">Alexey Klyanin: ‚ÄúUntil 2018, I used OSM only as a substrate in my blog‚Äù</a></li>
<li><a href="../en495504/index.html">Kingston KC600 512GB: Solid Rocket</a></li>
<li><a href="../en495508/index.html">Does the browser need a voice?</a></li>
<li><a href="../en495512/index.html">What is the best way to warm up pizza?</a></li>
<li><a href="../en495516/index.html">The Visitor template is deprecated for Kotlin, but it's worth knowing</a></li>
<li><a href="../en495520/index.html">Checklist for an architect</a></li>
<li><a href="../en495524/index.html">What programming language to learn so that HR large companies hunt for you</a></li>
<li><a href="../en495526/index.html">Organization of remote access by means of Fortinet</a></li>
<li><a href="../en495530/index.html">Hardware Converter HDMI-RGB (18/24-bit)</a></li>
<li><a href="../en495532/index.html">How large IT companies transferred their staff to remote work</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>