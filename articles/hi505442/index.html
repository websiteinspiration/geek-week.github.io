<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë® ‚ú≥Ô∏è üë®üèº‚Äçüöí VxLAN ‡§ï‡§æ‡§∞‡§ñ‡§æ‡§®‡§æ‡•§ ‡§≠‡§æ‡§ó 1 üçÖ ‚úåÔ∏è ‚úâÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‡§π‡§æ‡§Ø, ‡§π‡•à‡§¨‡•ç‡§∞‡•§ ‡§Æ‡•à‡§Ç ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡•á‡§Ç OTUS ‡§Æ‡•á‡§Ç ‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§á‡§Ç‡§ú‡•Ä‡§®‡§ø‡§Ø‡§∞ ‡§ï‡•ã‡§∞‡•ç‡§∏ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ ‡§π‡•Ç‡§Ç‡•§ 
 ‡§™‡§æ‡§†‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ "‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§á‡§Ç‡§ú‡•Ä‡§®‡§ø‡§Ø‡§∞" ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§®‡§è ‡§∏‡•á‡§ü ‡§ï‡•Ä ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡§æ‡§∂‡§æ ‡§Æ‡•á‡§Ç ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>VxLAN ‡§ï‡§æ‡§∞‡§ñ‡§æ‡§®‡§æ‡•§ ‡§≠‡§æ‡§ó 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/505442/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‡§π‡§æ‡§Ø, ‡§π‡•à‡§¨‡•ç‡§∞‡•§ </font><font style="vertical-align: inherit;">‡§Æ‡•à‡§Ç ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡•á‡§Ç OTUS ‡§Æ‡•á‡§Ç ‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§á‡§Ç‡§ú‡•Ä‡§®‡§ø‡§Ø‡§∞ ‡§ï‡•ã‡§∞‡•ç‡§∏ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ ‡§π‡•Ç‡§Ç‡•§ </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‡§™‡§æ‡§†‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§á‡§Ç‡§ú‡•Ä‡§®‡§ø‡§Ø‡§∞" ‡§ï‡•á</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‡§≤‡§ø‡§è ‡§è‡§ï ‡§®‡§è ‡§∏‡•á‡§ü ‡§ï‡•Ä ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡§æ‡§∂‡§æ ‡§Æ‡•á‡§Ç </font><font style="vertical-align: inherit;">, ‡§Æ‡•à‡§Ç‡§®‡•á ‡§µ‡•Ä‡§è‡§ï‡•ç‡§∏‡§è‡§≤‡§è‡§è‡§® ‡§ì‡§™‡•Ä‡§ì ‡§§‡§ï‡§®‡•Ä‡§ï ‡§™‡§∞ ‡§≤‡•á‡§ñ‡•ã‡§Ç ‡§ï‡•Ä ‡§è‡§ï ‡§∂‡•ç‡§∞‡•É‡§Ç‡§ñ‡§≤‡§æ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§ï‡•Ä‡•§</font></font></strong></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VxLAN EVPN ‡§ï‡•á ‡§ï‡§æ‡§Æ ‡§™‡§∞ ‡§≠‡§æ‡§∞‡•Ä ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ ‡§Æ‡•á‡§Ç ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§π‡•à, ‡§á‡§∏‡§≤‡§ø‡§è ‡§Æ‡•à‡§Ç ‡§è‡§ï ‡§Ü‡§ß‡•Å‡§®‡§ø‡§ï ‡§°‡•á‡§ü‡§æ ‡§∏‡•á‡§Ç‡§ü‡§∞ ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§ï‡§æ‡§∞‡•ç‡§Ø‡•ã‡§Ç ‡§î‡§∞ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§™‡•ç‡§∞‡§•‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§á‡§ï‡§ü‡•ç‡§†‡§æ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡§æ ‡§π‡•Ç‡§Ç‡•§ </font></font></p><br>
<p><img src="https://habrastorage.org/webt/28/uf/hv/28ufhvgrhyqfb8sztgeew7pkeru.png"></p><br>
<hr><br>
<p>      VxLAN EVPN     L2 c     .</p><br>
<p>     Cisco Nexus 9000v,    Spine-Leaf.    Underlay        . <a name="habracut"></a></p><br>
<ol>
<li>Underlay </li>
<li>BGP   address-family l2vpn evpn</li>
<li> NVE</li>
<li>Supress-arp</li>
</ol><br>
<h3 id="underlay-set">Underlay </h3><br>
<p>    :</p><br>
<p><img src="https://habrastorage.org/webt/aj/ib/or/ajiborcl_5t1gfmiqqet5woesdw.jpeg"></p><br>
<p>    :</p><br>
<pre><code class="plaintext hljs">Spine-1 - 10.255.1.101<font></font>
Spine-2 - 10.255.1.102<font></font>
<font></font>
Leaf-11 - 10.255.1.11<font></font>
Leaf-12 - 10.255.1.12<font></font>
Leaf-21 - 10.255.1.21<font></font>
<font></font>
Host-1 - 192.168.10.10<font></font>
Host-2 - 192.168.10.20</code></pre><br>
<p>   IP    :</p><br>
<pre><code class="plaintext hljs">Leaf21# sh ip route<font></font>
&lt;........&gt;<font></font>
10.255.1.11/32, ubest/mbest: 2/0                      ! Leaf-11    Spine<font></font>
    *via 10.255.1.101, Eth1/4, [110/81], 00:00:03, ospf-UNDERLAY, intra<font></font>
    *via 10.255.1.102, Eth1/3, [110/81], 00:00:03, ospf-UNDERLAY, intra<font></font>
10.255.1.12/32, ubest/mbest: 2/0                      ! Leaf-12    Spine<font></font>
    *via 10.255.1.101, Eth1/4, [110/81], 00:00:03, ospf-UNDERLAY, intra<font></font>
    *via 10.255.1.102, Eth1/3, [110/81], 00:00:03, ospf-UNDERLAY, intra<font></font>
10.255.1.21/32, ubest/mbest: 2/0, attached<font></font>
    *via 10.255.1.22, Lo0, [0/0], 00:02:20, local<font></font>
    *via 10.255.1.22, Lo0, [0/0], 00:02:20, direct<font></font>
10.255.1.101/32, ubest/mbest: 1/0<font></font>
    *via 10.255.1.101, Eth1/4, [110/41], 00:00:06, ospf-UNDERLAY, intra<font></font>
10.255.1.102/32, ubest/mbest: 1/0<font></font>
    *via 10.255.1.102, Eth1/3, [110/41], 00:00:03, ospf-UNDERLAY, intra</code></pre><br>
<p>,  VPC              :</p><br>
<pre><code class="plaintext hljs">Leaf11# show vpc <font></font>
<font></font>
vPC domain id                     : 1<font></font>
Peer status                       : peer adjacency formed ok<font></font>
vPC keep-alive status             : peer is alive<font></font>
Configuration consistency status  : success<font></font>
Per-vlan consistency status       : success<font></font>
Type-2 consistency status         : success<font></font>
vPC role                          : primary<font></font>
Number of vPCs configured         : 0<font></font>
Peer Gateway                      : Disabled<font></font>
Dual-active excluded VLANs        : -<font></font>
Graceful Consistency Check        : Enabled<font></font>
Auto-recovery status              : Disabled<font></font>
Delay-restore status              : Timer is off.(timeout = 30s)<font></font>
Delay-restore SVI status          : Timer is off.(timeout = 10s)<font></font>
Operational Layer3 Peer-router    : Disabled<font></font>
<font></font>
vPC status<font></font>
----------------------------------------------------------------------------<font></font>
Id    Port          Status Consistency Reason                Active vlans<font></font>
--    ------------  ------ ----------- ------                ---------------<font></font>
5     Po5           up     success     success               1</code></pre><br>
<h3 id="bgp-piring">BGP </h3><br>
<p>     Overlay .</p><br>
<p>       ,     :</p><br>
<p><img src="https://habrastorage.org/webt/go/a1/3q/goa13q08yxgbx82m6c7v7jm43sg.jpeg"></p><br>
<p>  Overlay    Spine  Leaf   BGP    l2vpn evpn:</p><br>
<pre><code class="plaintext hljs">feature bgp<font></font>
nv overlay evpn</code></pre><br>
<p>   BGP   Leaf  Spine.         Spine    Route-Reflector server.  Leaf     ,   .</p><br>
<p>    Spine  :</p><br>
<pre><code class="plaintext hljs">router bgp 65001<font></font>
  template peer LEAF <font></font>
    remote-as 65001<font></font>
    update-source loopback0<font></font>
    address-family l2vpn evpn<font></font>
      send-community<font></font>
      send-community extended<font></font>
      route-reflector-client<font></font>
  neighbor 10.255.1.11<font></font>
    inherit peer LEAF<font></font>
  neighbor 10.255.1.12<font></font>
    inherit peer LEAF<font></font>
  neighbor 10.255.1.21<font></font>
    inherit peer LEAF</code></pre><br>
<p>  Leaf    :</p><br>
<pre><code class="plaintext hljs">router bgp 65001<font></font>
  template peer SPINE<font></font>
    remote-as 65001<font></font>
    update-source loopback0<font></font>
    address-family l2vpn evpn<font></font>
      send-community<font></font>
      send-community extended<font></font>
  neighbor 10.255.1.101<font></font>
    inherit peer SPINE<font></font>
  neighbor 10.255.1.102<font></font>
    inherit peer SPINE</code></pre><br>
<p> Spine     Leaf :</p><br>
<pre><code class="plaintext hljs">Spine1# sh bgp l2vpn evpn summary<font></font>
&lt;.....&gt;<font></font>
Neighbor        V    AS MsgRcvd MsgSent   TblVer  InQ OutQ Up/Down  State/PfxRcd<font></font>
10.255.1.11     4 65001       7       8        6    0    0 00:01:45 0<font></font>
10.255.1.12     4 65001       7       7        6    0    0 00:01:16 0<font></font>
10.255.1.21     4 65001       7       7        6    0    0 00:01:01 0</code></pre><br>
<p> ,  BGP    .    VxLAN.        Leaf . Spine           .           Leaf .</p><br>
<h3 id="nastroyka-nve"> NVE</h3><br>
<p>NVE ‚Äî network virtual interface</p><br>
<p>     :</p><br>
<p>VTEP ‚Äî Vitual Tunnel End Point,       VxLAN . VTEP    -  .          VxLAN.     Leaf   VTEP. </p><br>
<p>VNI ‚Äî Virtual Network Index ‚Äî     VxLAN.     VLAN.    .   , VLAN       Leaf      .    VLAN     VNI,     .           .</p><br>
<p> feature    VxLAN     VLAN   VNI:</p><br>
<pre><code class="plaintext hljs">feature nv overlay<font></font>
feature vn-segment-vlan-based</code></pre><br>
<p>  NVE,     VxLAN.           VxLAN .     Tunnel    GRE:</p><br>
<pre><code class="plaintext hljs">interface nve1<font></font>
  no shutdown<font></font>
  host-reachability protocol bgp !  BGP    <font></font>
  source-interface loopback0    !       loopback0</code></pre><br>
<p> Leaf-21     . ,      <code>show nve peers</code>,    .      VPC.  ,  Leaf-11  Leaf-12   e   VPC .     :</p><br>
<p>Host-2      Leaf-21,         Host-1.  Leaf-21   MAC  Host-1     VTEP.      Leaf-21?         .</p><br>
<p>       Leaf-11  Leaf-12        .    .   Loopback    ,  secondary . Secondary       VTEP.</p><br>
<pre><code class="plaintext hljs">interface loopback0<font></font>
 ip add 10.255.1.10/32 secondary</code></pre><br>
<p>      VTEP    :</p><br>
<p><img src="https://habrastorage.org/webt/r0/45/yl/r045ylls9rj8csrweqrfio1bsaa.jpeg"></p><br>
<p>       IP  Leaf-21   IP   Leaf-11  Leaf-12.     MAC              VTEP  .     VTEP         Spine:</p><br>
<pre><code class="plaintext hljs">Spine1# sh ip route<font></font>
&lt;.....&gt;<font></font>
10.255.1.10/32, ubest/mbest: 2/0<font></font>
    *via 10.255.1.11, Eth1/1, [110/41], 1d01h, ospf-UNDERLAY, intra<font></font>
    *via 10.255.1.12, Eth1/2, [110/41], 1d01h, ospf-UNDERLAY, intra<font></font>
10.255.1.11/32, ubest/mbest: 1/0<font></font>
    *via 10.255.1.11, Eth1/1, [110/41], 1d22h, ospf-UNDERLAY, intra<font></font>
10.255.1.12/32, ubest/mbest: 1/0<font></font>
    *via 10.255.1.12, Eth1/2, [110/41], 1d01h, ospf-UNDERLAY, intra</code></pre><br>
<p>    10.255.1.10     Next-hop.</p><br>
<p>      .     NVE:<br>
  Vlan 10     VNI 10000   Leaf  .  L2   </p><br>
<pre><code class="plaintext hljs">vlan 10                 !  VLAN   VTEP    <font></font>
  vn-segment 10000      !  VLAN   VNI <font></font>
<font></font>
interface nve1<font></font>
  member vni 10000      !  VNI 10000     NVE.    VxLAN<font></font>
    ingress-replication protocol bgp    ! ,        BGP</code></pre><br>
<p>  nve peers    BGP EVPN:</p><br>
<pre><code class="plaintext hljs">Leaf21# sh nve peers<font></font>
Interface Peer-IP          State LearnType Uptime   Router-Mac<font></font>
--------- ---------------  ----- --------- -------- -----------------<font></font>
nve1      10.255.1.10      Up    CP        00:00:41 n/a                 !   peer   secondary <font></font>
<font></font>
Leaf11# sh bgp l2vpn evpn<font></font>
<font></font>
   Network            Next Hop            Metric     LocPrf     Weight Path<font></font>
Route Distinguisher: 10.255.1.11:32777    (L2VNI 10000)        !      l2VNI<font></font>
*&gt;l[3]:[0]:[32]:[10.255.1.10]/88                                   ! EVPN route-type 3 -   ,      l2VNI10000<font></font>
                      10.255.1.10                       100      32768 i<font></font>
*&gt;i[3]:[0]:[32]:[10.255.1.20]/88<font></font>
                      10.255.1.20                       100          0 i<font></font>
* i                   10.255.1.20                       100          0 i<font></font>
<font></font>
Route Distinguisher: 10.255.1.21:32777<font></font>
* i[3]:[0]:[32]:[10.255.1.20]/88<font></font>
                      10.255.1.20                       100          0 i<font></font>
*&gt;i                   10.255.1.20                       100          0 i</code></pre><br>
<p>    EVPN route-type 3.      peer(Leaf),     ?<br>
    ,    MAC    EVPN route-type 2</p><br>
<p>        EVPN route-type 2:</p><br>
<pre><code class="plaintext hljs">evpn<font></font>
  vni 10000 l2<font></font>
    route-target import auto   !         route-target<font></font>
    route-target export auto</code></pre><br>
<p> ping  Host-2  Host-1:</p><br>
<pre><code class="plaintext hljs">Firewall2# ping 192.168.10.1<font></font>
PING 192.168.10.1 (192.168.10.1): 56 data bytes<font></font>
36 bytes from 192.168.10.2: Destination Host Unreachable<font></font>
Request 0 timed out<font></font>
64 bytes from 192.168.10.1: icmp_seq=1 ttl=254 time=215.555 ms<font></font>
64 bytes from 192.168.10.1: icmp_seq=2 ttl=254 time=38.756 ms<font></font>
64 bytes from 192.168.10.1: icmp_seq=3 ttl=254 time=42.484 ms<font></font>
64 bytes from 192.168.10.1: icmp_seq=4 ttl=254 time=40.983 ms</code></pre><br>
<p>    ,    BGP  route-type 2 c MAC   ‚Äî 5001.0007.0007  5001.0008.0007</p><br>
<pre><code class="plaintext hljs">Leaf11# sh bgp l2vpn evpn<font></font>
&lt;......&gt;<font></font>
<font></font>
   Network            Next Hop            Metric     LocPrf     Weight Path<font></font>
Route Distinguisher: 10.255.1.11:32777    (L2VNI 10000)<font></font>
*&gt;l[2]:[0]:[0]:[48]:[5001.0007.0007]:[0]:[0.0.0.0]/216                      !  evpn route-type 2  mac   1<font></font>
                      10.255.1.10                       100      32768 i<font></font>
*&gt;i[2]:[0]:[0]:[48]:[5001.0008.0007]:[0]:[0.0.0.0]/216                      ! evpn route-type 2  mac   2<font></font>
* i                   10.255.1.20                       100          0 i<font></font>
*&gt;l[3]:[0]:[32]:[10.255.1.10]/88<font></font>
                      10.255.1.10                       100      32768 i<font></font>
Route Distinguisher: 10.255.1.21:32777<font></font>
* i[2]:[0]:[0]:[48]:[5001.0008.0007]:[0]:[0.0.0.0]/216<font></font>
                      10.255.1.20                       100          0 i<font></font>
*&gt;i                   10.255.1.20                       100          0 i</code></pre><br>
<p>      Update,      MAC Host.      </p><br>
<pre><code class="plaintext hljs">Leaf21# sh bgp l2vpn evpn 5001.0007.0007<font></font>
<font></font>
BGP routing table information for VRF default, address family L2VPN EVPN<font></font>
Route Distinguisher: 10.255.1.11:32777        !   Update  MAC Host.    VPC,   Leaf<font></font>
BGP routing table entry for [2]:[0]:[0]:[48]:[5001.0007.0007]:[0]:[0.0.0.0]/216,<font></font>
 version 1507<font></font>
Paths: (2 available, best #2)<font></font>
Flags: (0x000202) (high32 00000000) on xmit-list, is not in l2rib/evpn, is not i<font></font>
n HW<font></font>
<font></font>
  Path type: internal, path is valid, not best reason: Neighbor Address, no labe<font></font>
led nexthop<font></font>
  AS-Path: NONE, path sourced internal to AS<font></font>
    10.255.1.10 (metric 81) from 10.255.1.102 (10.255.1.102)    !     VxLAN <font></font>
      Origin IGP, MED not set, localpref 100, weight 0<font></font>
      Received label 10000         !  VNI,    VLAN,    Host<font></font>
      Extcommunity: RT:65001:10000 SOO:10.255.1.10:0 ENCAP:8        !  ,  RT      AS  VNI<font></font>
      Originator: 10.255.1.11 Cluster list: 10.255.1.102<font></font>
&lt;........&gt;</code></pre><br>
<p>    ,     :</p><br>
<p><img src="https://habrastorage.org/webt/om/yb/ds/omybdsav401a6ih-cvef7e3tdb8.jpeg"></p><br>
<h3 id="suppress-arp">Suppress-ARP</h3><br>
<p>, L2             .     .        .    ,       .      ?</p><br>
<p>  ‚Äî BUM(Broadcast, Unknown Unicast, Multicast) .         broadcast .<br>
  Broadcast  Ethernet      ARP.</p><br>
<p> nexus       ARP  ‚Äî suppress-arp.<br>
     :</p><br>
<ol>
<li>Host-1  APR   Broadcast   .</li>
<li>   Leaf              Host-2 ‚Äî Leaf      IP  MAC.</li>
</ol><br>
<p>  Broadcast     .     ,  Leaf   MAC ?</p><br>
<p>  , EVPN route-type 2  MAC     MAC/IP.    Leaf   IP   VLAN.  ,  IP ?  nexus     ()    :</p><br>
<pre><code class="plaintext hljs">feature interface-vlan<font></font>
<font></font>
fabric forwarding anycast-gateway-mac 0001.0001.0001    !  virtual mac       <font></font>
<font></font>
interface Vlan10<font></font>
  no shutdown<font></font>
  ip address 192.168.10.254/24          !   Leaf   IP<font></font>
  fabric forwarding mode anycast-gateway    !   Virtual mac</code></pre><br>
<p>          :</p><br>
<p><img src="https://habrastorage.org/webt/a1/t-/f6/a1t-f6hqrtvkhe1nl9maaxdefy4.jpeg"></p><br>
<p> BGP l2route evpn</p><br>
<pre><code class="plaintext hljs">Leaf11# sh bgp l2vpn evpn<font></font>
&lt;......&gt;<font></font>
<font></font>
   Network            Next Hop            Metric     LocPrf     Weight Path<font></font>
Route Distinguisher: 10.255.1.11:32777    (L2VNI 10000)<font></font>
*&gt;l[2]:[0]:[0]:[48]:[5001.0007.0007]:[0]:[0.0.0.0]/216<font></font>
                      10.255.1.21                       100      32768 i<font></font>
*&gt;i[2]:[0]:[0]:[48]:[5001.0008.0007]:[0]:[0.0.0.0]/216<font></font>
                      10.255.1.10                       100          0 i<font></font>
* i                   10.255.1.10                       100          0 i<font></font>
* i[2]:[0]:[0]:[48]:[5001.0008.0007]:[32]:[192.168.10.20]/248<font></font>
                      10.255.1.10                       100          0 i<font></font>
*&gt;i                   10.255.1.10                       100          0 i<font></font>
<font></font>
&lt;......&gt;<font></font>
<font></font>
Route Distinguisher: 10.255.1.21:32777<font></font>
* i[2]:[0]:[0]:[48]:[5001.0008.0007]:[0]:[0.0.0.0]/216<font></font>
                      10.255.1.20                       100          0 i<font></font>
*&gt;i                   10.255.1.20                       100          0 i<font></font>
* i[2]:[0]:[0]:[48]:[5001.0008.0007]:[32]:[192.168.10.20]/248<font></font>
*&gt;i                   10.255.1.20                       100          0 i<font></font>
<font></font>
&lt;......&gt;</code></pre><br>
<p>   ,   EVPN route-type 2  MAC     IP  .</p><br>
<p>   suppress-arp.      VNI :</p><br>
<pre><code class="plaintext hljs">interface nve1<font></font>
  member vni 10000   <font></font>
    suppress-arp</code></pre><br>
<p>   :</p><br>
<ul>
<li>       TCAM .     suppress-arp:</li>
</ul><br>
<pre><code class="plaintext hljs">hardware access-list tcam region arp-ether 256</code></pre><br>
<p>    double-wide.     256,   TCAM   512.  TCAM     ,    TCAM               .</p><br>
<ul>
<li> suppress-arp     Leaf .         Leaf,    VPC.   TCAM,             .      TCAM    .</li>
</ul><br>
<p>     ,           .</p><br>
<p>     .       VxLAN       VRF.</p><br>
<hr><br>
<p><em>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="> </a>,        .  20 ,    ,          1-2   .</em></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi505428/index.html">‡§ï‡•ç‡§Ø‡§æ ‡§Æ‡•à‡§Ç ‡§¨‡§ø‡§≤ ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ü‡§∞‡•ç‡§ï‡•á‡§° ‡§Æ‡§∂‡•Ä‡§® ‡§™‡§∞ ‡§™‡•à‡§∏‡•á ‡§ï‡§Æ‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å?</a></li>
<li><a href="../hi505430/index.html">‡§ö‡§ø‡§§‡•ç‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§†‡•ã‡§∏ ‡§∏‡§ø‡§¶‡•ç‡§ß‡§æ‡§Ç‡§§</a></li>
<li><a href="../hi505432/index.html">‡§∞‡•Ç‡§∏ ‡§ï‡•á ‡§ï‡§ø‡§® ‡§∂‡§π‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§Ü‡§ó‡§Ç‡§§‡•Å‡§ï‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•ã‡§à ‡§∏‡§Ç‡§ó‡§∞‡•ã‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à</a></li>
<li><a href="../hi505438/index.html">‡§Ü‡§à‡§ü‡•Ä ‡§Æ‡•á‡§Ç ‡§ï‡§π‡§æ‡§Ç ‡§ú‡§æ‡§è‡§Ç ‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§ï ‡§∏‡•á ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂</a></li>
<li><a href="../hi505440/index.html">PostgreSQL ‡§Ü‡§Ç‡§§‡§∞‡§ø‡§ï ‡§Ü‡§Å‡§ï‡§°‡§º‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ó‡§π‡§∞‡•Ä ‡§°‡•Å‡§¨‡§ï‡•Ä‡•§ ‡§è‡§≤‡•á‡§ï‡•ç‡§∏‡•Ä ‡§≤‡•á‡§∏‡•ã‡§µ‡•ç‡§∏‡•ç‡§ï‡•Ä</a></li>
<li><a href="../hi505448/index.html">‡§π‡§Æ‡§®‡•á DOMKlik ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§î‡§∞ ‡§°‡•á‡§ü‡§æ ‡§™‡•ç‡§∞‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£ ‡§ï‡§æ ‡§Ü‡§Ø‡•ã‡§ú‡§® ‡§ï‡•à‡§∏‡•á ‡§ï‡§ø‡§Ø‡§æ</a></li>
<li><a href="../hi505452/index.html">‡§¨‡•à‡§Ç‡§ï ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ï‡§æ ‡§µ‡§ø‡§ï‡§æ‡§∏: ‡§ß‡§æ‡§§‡•Å ‡§∏‡•á ‡§ß‡§æ‡§§‡•Å ‡§§‡§ï</a></li>
<li><a href="../hi505456/index.html">‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü‡§∞ ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡•ã‡§Ç ‡§™‡§∞ ‡§Ö‡§¶‡•É‡§∂‡•ç‡§Ø ‡§°‡•â‡§ü‡•ç‡§∏ ‡§≤‡§ó‡§æ‡§§‡•á ‡§π‡•à‡§Ç</a></li>
<li><a href="../hi505458/index.html">‡§Ø‡§¶‡§ø ‡§Ü‡§™ ‡§è‡§ï ‡§Æ‡§π‡§æ‡§® ‡§ó‡§£‡§ø‡§§‡§ú‡•ç‡§û ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡§Ç ‡§§‡•ã ‡§Æ‡§∂‡•Ä‡§® ‡§≤‡§∞‡•ç‡§®‡§ø‡§Ç‡§ó ‡§ï‡•ã ‡§ï‡•à‡§∏‡•á ‡§∏‡§Æ‡§ù‡•á‡§Ç</a></li>
<li><a href="../hi505460/index.html">‡§ï‡•ã‡§°‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç: ‡§∞‡•Ç‡§∏‡•Ä ‡§∏‡•ç‡§®‡§æ‡§§‡§ï ‡§∏‡•ç‡§µ‡§ø‡§ü‡•ç‡§ú‡§∞‡§≤‡•à‡§Ç‡§° ‡§Æ‡•á‡§Ç ‡§Æ‡§æ‡§∏‡•ç‡§ü‡§∞ ‡§°‡§ø‡§ó‡•ç‡§∞‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§® ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§õ‡§æ‡§§‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§ú‡•Ä‡§§ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>