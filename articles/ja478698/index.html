<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¬ ğŸ”· ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿ 15åˆ†ã§ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªåœ°å½¢è¨ˆç”»ã‚’ä½œæˆ ğŸ…ğŸ¼ ğŸ  ğŸ›¬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ãƒˆãƒ¼ã‚¹ã‚¿ãƒ¼ã§ã¯ã€å®¶ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªå›³ã®ä½œæˆæ–¹æ³•ã€ãã®å†…éƒ¨æ§‹é€ ã®è¨ˆç”»ã€ãã‚Œã‚‰ã«é–¢ã™ã‚‹æƒ…å ±ã‚’å«ã‚€åºŠã‚„ã‚¢ãƒ‘ãƒ¼ãƒˆã‚’é¸æŠã™ã‚‹æ©Ÿèƒ½ã€å†™çœŸã®ä¸Šã«ãƒã‚¦ã‚¹ã‚’ç½®ãã¨ç‰¹å®šã®è£½å“ã®è©³ç´°ã«é–¢ã™ã‚‹æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ãªã©ã«ã¤ã„ã¦ã‚ˆãå°‹ã­ã‚‰ã‚Œã¾ã™ã€‚ã“ã‚Œã¯3æ¬¡å…ƒãƒ¢ãƒ‡ãƒ«ã§ã¯ãªãã€ç‰¹å®šã®è©³ç´°ã‚’å¼·èª¿è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ã‚’å‚™ãˆãŸå†™çœŸã«é–¢ã™ã‚‹ã‚‚ã®...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>15åˆ†ã§ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªåœ°å½¢è¨ˆç”»ã‚’ä½œæˆ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478698/"><p><img src="https://habrastorage.org/webt/n0/jb/-9/n0jb-9sfsmw2ewd-etwnl04ayvc.jpeg"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒˆãƒ¼ã‚¹ã‚¿ãƒ¼ã§ã¯ã€å®¶ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªå›³ã®ä½œæˆæ–¹æ³•ã€ãã®å†…éƒ¨æ§‹é€ ã®è¨ˆç”»ã€ãã‚Œã‚‰ã«é–¢ã™ã‚‹æƒ…å ±ã‚’å«ã‚€åºŠã‚„ã‚¢ãƒ‘ãƒ¼ãƒˆã‚’é¸æŠã™ã‚‹æ©Ÿèƒ½ã€å†™çœŸã®ä¸Šã«ãƒã‚¦ã‚¹ã‚’ç½®ãã¨ç‰¹å®šã®è£½å“ã®è©³ç´°ã«é–¢ã™ã‚‹æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ãªã©ã«ã¤ã„ã¦ã‚ˆãå°‹ã­ã‚‰ã‚Œã¾ã™ã€‚ã“ã‚Œã¯3æ¬¡å…ƒãƒ¢ãƒ‡ãƒ«ã§ã¯ãªãã€ç‰¹å®šã®è©³ç´°ã‚’å¼·èª¿è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ã‚’å‚™ãˆãŸå†™çœŸã«é–¢ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ã“ã‚Œã‚‰ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ã¯é¡ä¼¼ã—ã¦ãŠã‚Šã€éå¸¸ã«å˜ç´”ã«è§£æ±ºã•ã‚Œã¾ã™ãŒã€ãã‚Œã§ã‚‚è³ªå•ãŒå‡ºç¶šã‘ã¦ã„ã‚‹ãŸã‚ã€æœ¬æ—¥ã¯ã€SVGã€ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã€ãƒ”ãƒ³ãƒJavaScriptã‚’ä½¿ç”¨ã—ã¦ãã®ã‚ˆã†ãªã“ã¨ãŒã©ã®ã‚ˆã†ã«è¡Œã‚ã‚Œã‚‹ã‹ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚</font></font></p><a name="habracut"></a><br>
<p>  SVG  ,         .   ,       canvas,     ,  ,         -  ,   â€“        ,  ,    ,        - .    2d-  SVG    . WebGL       ,       ,      ,      .     â€œ  â€.</p><br>
<p>     -           - ,  ,          .</p><br>
<h2 id="nachinaem-nachinat"> </h2><br>
<p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Inkscape</a>,               .</p><br>
<p>       :</p><br>
<ul>
<li>XML Editor (Ctrl+Shift+X     ) â€”           .</li>
<li>Fill and Stroke (Ctrl+Shift+F      ) â€”     .</li>
</ul><br>
<p>       .</p><br>
<blockquote>       ,         (  ),      .     ,   .</blockquote><p>     .    â€“      base64-   .   ,  .            .  SVG-,        image.</p><br>
<blockquote>  ,   SVG,   HTML,    lazy loading,  ,       .          ,         .</blockquote><p>        :</p><br>
<p><img src="https://habrastorage.org/webt/nf/1v/ak/nf1vak7y46k_uto-ov-85ifimrc.jpeg"></p><br>
<p>    (Ctrl+Shift+N  Menu &gt; Layer &gt; Add layer).  XML- ,     g.    ,    class,      .</p><br>
<blockquote>    id.   ,         .           .     data- â€“  .</blockquote><p>       XML-,   ,    .  -       -   .     â€“    ,    -  .    SVG       .     ,    ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">svgo</a>  .</p><br>
<p>    Draw Bezier curves and Straight Lines (Shift+F6).         .       .    ,           ,      .   ,      â€“         .         .</p><br>
<p> ,    ,   XML-,   ,      , data-     (   ,  ..     â€”   ),       ,    â€œ  â€.  , ,     ,      ,    .</p><br>
<p>,   path â€“   ,       Ctrl+A  Menu &gt; Edit &gt; Select All   .       Fill and Stroke,       .    ,      .</p><br>
<p><img src="https://habrastorage.org/webt/du/qi/7d/duqi7d2_rtovsgoo9osa-vo25-w.jpeg"></p><br>
<blockquote>     -     opacity  ,        .   ,  â€œâ€  ,      ,    â€“ ,       .</blockquote><p>       ,   ,     ,            .</p><br>
<h2 id="bazovyy-primer"> </h2><br>
<p>  html-,   SVG       CSS,       .    .</p><br>
<pre><code class="css hljs"><span class="hljs-selector-class">.map</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">90%</span>;
    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">1300px</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">2rem</span> auto;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1rem</span> solid <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">1rem</span>;
    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> .<span class="hljs-number">5rem</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, .<span class="hljs-number">3</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.map</span> &gt; <span class="hljs-selector-tag">svg</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: auto;
    <span class="hljs-attribute">border-radius</span>: .<span class="hljs-number">5rem</span>;<font></font>
}</code></pre><br>
<p>,    ,   ,  CSS  - .</p><br>
<pre><code class="css hljs"><span class="hljs-selector-class">.building</span> {
    <span class="hljs-attribute">transition</span>: opacity .<span class="hljs-number">3s</span> ease-in-out;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.building</span><span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">cursor</span>: pointer;
    <span class="hljs-attribute">opacity</span>: .<span class="hljs-number">8</span> <span class="hljs-meta">!important</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.building</span><span class="hljs-selector-class">.-available</span> {
    <span class="hljs-attribute">fill</span>: <span class="hljs-number">#0f0</span> <span class="hljs-meta">!important</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.building</span><span class="hljs-selector-class">.-reserved</span> {
    <span class="hljs-attribute">fill</span>: <span class="hljs-number">#f00</span> <span class="hljs-meta">!important</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.building</span><span class="hljs-selector-class">.-service</span> {
    <span class="hljs-attribute">fill</span>: <span class="hljs-number">#fff</span> <span class="hljs-meta">!important</span>;<font></font>
}</code></pre><br>
<p>      Inkscape,  CSS   .       CSS?  ,  .   .   .            CSS      -  .      â€œâ€ ,  ,            .</p><br>
<p><img src="https://habrastorage.org/webt/t0/r4/nr/t0r4nr0bqr-zyblc_srzafnogis.jpeg"></p><br>
<p>,        ,           :</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> data = {
    <span class="hljs-attr">id_0</span>: { <span class="hljs-attr">status</span>: <span class="hljs-string">'service'</span>   },
    <span class="hljs-attr">id_1</span>: { <span class="hljs-attr">status</span>: <span class="hljs-string">'available'</span> },
    <span class="hljs-attr">id_2</span>: { <span class="hljs-attr">status</span>: <span class="hljs-string">'reserved'</span>  },
    <span class="hljs-attr">id_3</span>: { <span class="hljs-attr">status</span>: <span class="hljs-string">'available'</span> },
    <span class="hljs-attr">id_4</span>: { <span class="hljs-attr">status</span>: <span class="hljs-string">'available'</span> },
    <span class="hljs-attr">id_5</span>: { <span class="hljs-attr">status</span>: <span class="hljs-string">'reserved'</span>  },
    <span class="hljs-attr">messages</span>: {
        <span class="hljs-string">'available'</span>: <span class="hljs-string">'  '</span>,
        <span class="hljs-string">'reserved'</span>:  <span class="hljs-string">''</span>,
        <span class="hljs-string">'service'</span>:   <span class="hljs-string">'  1-2 '</span><font></font>
    }<font></font>
};<font></font>
<font></font>
<span class="hljs-keyword">const</span> map = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'my-map'</span>);
<span class="hljs-keyword">const</span> buildings = map.querySelectorAll(<span class="hljs-string">'.building'</span>);<font></font>
<font></font>
<span class="hljs-keyword">for</span> (building <span class="hljs-keyword">of</span> buildings) {
    <span class="hljs-keyword">const</span> id = building.getAttribute(<span class="hljs-string">'data-building-id'</span>);
    <span class="hljs-keyword">const</span> status = data[<span class="hljs-string">`id_<span class="hljs-subst">${id}</span>`</span>].status;<font></font>
<font></font>
    building.classList.add(<span class="hljs-string">`-<span class="hljs-subst">${status}</span>`</span>);<font></font>
}</code></pre><br>
<p> - :</p><br>
<p><img src="https://habrastorage.org/webt/zm/n6/tx/zmn6txixk7isjsgy9hdkukjjyc0.jpeg"></p><br>
<p>  -   ,   .          ,     .               addEventListener.</p><br>
<h2 id="leader-line">Leader Line</h2><br>
<p>    ,        -      ,            .        - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">leader-line</a>,         .</p><br>
<p>           .</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> data = {
    <span class="hljs-attr">id_0</span>: { <span class="hljs-attr">price</span>: <span class="hljs-string">'3000'</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">'service'</span>   },
    <span class="hljs-attr">id_1</span>: { <span class="hljs-attr">price</span>: <span class="hljs-string">'3000'</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">'available'</span> },
    <span class="hljs-attr">id_2</span>: { <span class="hljs-attr">price</span>: <span class="hljs-string">'2000'</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">'reserved'</span>  },
    <span class="hljs-attr">id_3</span>: { <span class="hljs-attr">price</span>: <span class="hljs-string">'5000'</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">'available'</span> },
    <span class="hljs-attr">id_4</span>: { <span class="hljs-attr">price</span>: <span class="hljs-string">'2500'</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">'available'</span> },
    <span class="hljs-attr">id_5</span>: { <span class="hljs-attr">price</span>: <span class="hljs-string">'2500'</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">'reserved'</span>  },
    <span class="hljs-attr">messages</span>: {
        <span class="hljs-string">'available'</span>: <span class="hljs-string">'  '</span>,
        <span class="hljs-string">'reserved'</span>:  <span class="hljs-string">''</span>,
        <span class="hljs-string">'service'</span>:   <span class="hljs-string">'   (1-2 )'</span><font></font>
    }<font></font>
};<font></font>
<font></font>
<span class="hljs-keyword">const</span> map = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'my-map'</span>);
<span class="hljs-keyword">const</span> buildings = map.querySelectorAll(<span class="hljs-string">'.building'</span>);
<span class="hljs-keyword">const</span> info = map.querySelector(<span class="hljs-string">'.info'</span>);
<span class="hljs-keyword">const</span> lines = [];<font></font>
<font></font>
<span class="hljs-keyword">for</span> (building <span class="hljs-keyword">of</span> buildings) {
    <span class="hljs-keyword">const</span> id = building.getAttribute(<span class="hljs-string">'data-building-id'</span>);
    <span class="hljs-keyword">const</span> status = data[<span class="hljs-string">`id_<span class="hljs-subst">${id}</span>`</span>].status;
    <span class="hljs-keyword">const</span> price  = data[<span class="hljs-string">`id_<span class="hljs-subst">${id}</span>`</span>].price;<font></font>
<font></font>
    building.classList.add(<span class="hljs-string">`-<span class="hljs-subst">${status}</span>`</span>);<font></font>
<font></font>
    <span class="hljs-keyword">const</span> line = <span class="hljs-keyword">new</span> LeaderLine(<font></font>
        LeaderLine.pointAnchor(building, { <span class="hljs-attr">x</span>: <span class="hljs-string">'50%'</span>, <span class="hljs-attr">y</span>: <span class="hljs-string">'50%'</span> }),<font></font>
        LeaderLine.pointAnchor(info, { <span class="hljs-attr">x</span>: <span class="hljs-string">'50%'</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }),<font></font>
        {<font></font>
            <span class="hljs-attr">color</span>: <span class="hljs-string">'#fff'</span>,
            <span class="hljs-attr">startPlug</span>: <span class="hljs-string">'arrow1'</span>,
            <span class="hljs-attr">endPlug</span>: <span class="hljs-string">'behind'</span>,
            <span class="hljs-attr">endSocket</span>: <span class="hljs-string">'top'</span><font></font>
        }<font></font>
    );<font></font>
<font></font>
    lines.push(line);<font></font>
}</code></pre><br>
<p>  ,    .    â€œ â€  .          .       ,       ,      .     â€“ startLabel â€“         .</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> line = <span class="hljs-keyword">new</span> LeaderLine(<font></font>
    LeaderLine.pointAnchor(building, { <span class="hljs-attr">x</span>: <span class="hljs-string">'50%'</span>, <span class="hljs-attr">y</span>: <span class="hljs-string">'50%'</span> }),<font></font>
    LeaderLine.pointAnchor(info, { <span class="hljs-attr">x</span>: <span class="hljs-string">'50%'</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }),<font></font>
    {<font></font>
        <span class="hljs-attr">startLabel</span>: LeaderLine.captionLabel(<span class="hljs-string">`<span class="hljs-subst">${price}</span>/`</span>, {
            <span class="hljs-attr">fontFamily</span>: <span class="hljs-string">'Rubik Mono One'</span>,
            <span class="hljs-attr">fontWeight</span>: <span class="hljs-number">400</span>,
            <span class="hljs-attr">offset</span>: [<span class="hljs-number">-30</span>, <span class="hljs-number">-50</span>],
            <span class="hljs-attr">outlineColor</span>: <span class="hljs-string">'#555'</span><font></font>
        }),<font></font>
        <span class="hljs-attr">color</span>: <span class="hljs-string">'#fff'</span>,
        <span class="hljs-attr">startPlug</span>: <span class="hljs-string">'arrow1'</span>,
        <span class="hljs-attr">endPlug</span>: <span class="hljs-string">'behind'</span>,
        <span class="hljs-attr">endSocket</span>: <span class="hljs-string">'top'</span>,
        <span class="hljs-attr">hide</span>: <span class="hljs-literal">true</span><font></font>
    }<font></font>
);</code></pre><br>
<blockquote>        .      ,      .           .</blockquote><p>     hide,        .          ,   :</p><br>
<pre><code class="javascript hljs">building.addEventListener(<span class="hljs-string">'mouseover'</span>, () =&gt; {<font></font>
    line.show();<font></font>
});<font></font>
<font></font>
building.addEventListener(<span class="hljs-string">'mouseout'</span>, () =&gt; {<font></font>
    line.hide();<font></font>
});</code></pre><br>
<p>      (      )    .    ,  :</p><br>
<p><img src="https://habrastorage.org/webt/dj/6q/-3/dj6q-39gunb8vxq35elxb0bwse0.jpeg"></p><br>
<p>      ,     ,         ,     -          . -   :</p><br>
<pre><code class="css hljs"><span class="hljs-selector-tag">svg</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<font></font>
}</code></pre><br>
<p>   SVG-        .   ?</p><br>
<h2 id="nesovpadayuschie-proporcii"> </h2><br>
<p> ,     â€“   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">object-fit:cover</a>  CSS.    :       SVG.      ,               .         .</p><br>
<p> .  SVG   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">preserveAspectRatio</a>,       object-fit ( , , ...).  <code>preserveAspectRatio="xMinYMin slice"</code>   SVG-            .</p><br>
<p> .    .      .     ,   .           ,      ,     .         .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">hammer.js</a> â€“    ,               ,  ...</p><br>
<p>           .   :</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> buildingsLayer = map.querySelector(<span class="hljs-string">'.buildings_layer'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> hammertime = <span class="hljs-keyword">new</span> Hammer(buildingsLayer);<font></font>
<font></font>
hammertime.get(<span class="hljs-string">'pan'</span>).set({
    <span class="hljs-attr">direction</span>: Hammer.DIRECTION_ALL<font></font>
});</code></pre><br>
<p>  hammer.js     ,       ,     ,    :</p><br>
<pre><code class="javascript hljs">hammertime.get(<span class="hljs-string">'swipe'</span>).set({ <span class="hljs-attr">enable</span>: <span class="hljs-literal">false</span> });</code></pre><br>
<p>  - ,    ,       ,   .       ,             (SVG   )    .    getBoundingClientRect:</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> layer = buildingsLayer.getBoundingClientRect();
<span class="hljs-keyword">const</span> parent = svg.getBoundingClientRect();<font></font>
<font></font>
<span class="hljs-keyword">const</span> offsets = {
    <span class="hljs-attr">top</span>:    layer.top - parent.top,
    <span class="hljs-attr">bottom</span>: layer.bottom - parent.bottom,
    <span class="hljs-attr">right</span>:  layer.right - parent.right,
    <span class="hljs-attr">left</span>:   layer.left - parent.left,<font></font>
};</code></pre><br>
<p>          (  )   ?    getBoundingClientRect     ,     ,        ,        ,      .   ,                 :</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> translateX = <span class="hljs-number">0</span>;
<span class="hljs-keyword">let</span> translateY = <span class="hljs-number">0</span>;<font></font>
<font></font>
hammertime.on(<span class="hljs-string">'pan'</span>, (e) =&gt; {
    <span class="hljs-keyword">const</span> layer = buildingsLayer.getBoundingClientRect();
    <span class="hljs-keyword">const</span> parent = svg.getBoundingClientRect();<font></font>
<font></font>
    <span class="hljs-keyword">const</span> offsets = {
        <span class="hljs-attr">top</span>:    layer.top - parent.top,
        <span class="hljs-attr">bottom</span>: layer.bottom - parent.bottom,
        <span class="hljs-attr">right</span>:  layer.right - parent.right,
        <span class="hljs-attr">left</span>:   layer.left - parent.left,<font></font>
    };<font></font>
<font></font>
    <span class="hljs-keyword">const</span> speedX = e.velocityX * <span class="hljs-number">10</span>;
    <span class="hljs-keyword">const</span> speedY = e.velocityY * <span class="hljs-number">10</span>;<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (speedX &gt; <span class="hljs-number">0</span> &amp;&amp; offsets.left &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// </span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (speedX &lt; <span class="hljs-number">0</span> &amp;&amp; offsets.right &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// </span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (speedY &gt; <span class="hljs-number">0</span> &amp;&amp; offsets.top &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// </span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (speedY &lt; <span class="hljs-number">0</span> &amp;&amp; offsets.bottom &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">//  </span><font></font>
    }<font></font>
<font></font>
    buildingsLayer.setAttribute(<span class="hljs-string">'transform'</span>, <span class="hljs-string">`translate(<span class="hljs-subst">${translateX}</span> <span class="hljs-subst">${translateY}</span>)`</span>);<font></font>
});</code></pre><br>
<p>     ,       .    -   - :</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (speedX &lt; -offsets.left) {<font></font>
    translateX += speedX;<font></font>
} <span class="hljs-keyword">else</span> {<font></font>
    translateX += -offsets.left * speedX / <span class="hljs-number">10</span>;<font></font>
}</code></pre><br>
<p>    .  â€“  .  ,    ,       .        ,      .</p><br>
<p>          ,   ,  -   ...</p><br>
<h2 id="nechistye-sily"> </h2><br>
<p>    ,     ,   â€“      body. ----!     .  ,   ,  - -   -    overflow: hidden.       ,     .</p><br>
<blockquote>   :   g,   svg,   div,   body,   html. Doctype  html.     g    transform: translate(â€¦),     ,   ,    â€”   .    .    .  â€“      .  â€“ ?</blockquote><p><em>    10    ,   .</em></p><br>
<p><img src="https://habrastorage.org/webt/th/ec/yg/thecygjfpw8dtmjtlwtc1ds5x8m.png"></p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><p>-!   .   .   ,       .       ,    .   ,  ,   CSS- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">touch-action</a>.     (!) ,   , ,  ,   ,       .       :</p><br>
<pre><code class="css hljs"><span class="hljs-selector-tag">svg</span> {
    <span class="hljs-attribute">touch-action</span>: none <span class="hljs-meta">!important</span>;<font></font>
}</code></pre></div></div><br>
<p>         (, ,    ):</p><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://codepen.io/sfi0zy/embed/preview/ZEYYjZL" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<p>      -   ,        ,        .</p><br>
<h2 id="chto-v-itoge">  ?</h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‹ãªã‚Šã®æ™‚é–“ã‚’è²»ã‚„ã—ã¦ã€ãƒ“ãƒƒãƒˆãƒãƒƒãƒ—ç”»åƒã‚’ä½œæˆã—ã€ã•ã¾ã–ã¾ãªè©³ç´°ã‚’å¼·èª¿ã—ã€ç„¡é–¢ä¿‚ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’çŸ¢å°ã§çµã³ã€ãƒã‚¦ã‚¹ã«åå¿œã•ã›ã‚‹è¨ˆç”»ã‚’ç«‹ã¦ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚‰ã™ã¹ã¦ãŒã€Œäºˆç®—ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã©ã®ã‚ˆã†ã«è¡Œã‚ã‚Œã‚‹ã‹ã«ã¤ã„ã¦ã®åŸºæœ¬çš„ãªè€ƒãˆã‚’ãªã‚“ã¨ã‹ä¼ãˆã‚‰ã‚ŒãŸã“ã¨ã‚’é¡˜ã£ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">è¨˜äº‹ã®å†’é ­ã§è¿°ã¹ãŸã‚ˆã†ã«ã€ã‚ã‚‹ç¨®ã®æ··ä¹±ã—ãŸè¨­è¨ˆã‚µã‚¤ãƒˆã«é–¢é€£ã—ã¦ã„ãªã„ã‚‚ã®ã‚’å«ã‚ã€ã•ã¾ã–ã¾ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ï¼ˆãŸã ã—ã€ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯éå¸¸ã«é »ç¹ã«ä½¿ç”¨ã•ã‚Œã¾ã™ï¼‰ã€‚</font><font style="vertical-align: inherit;">ãˆãˆã¨ã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã§ã‚ã‚‹ãŒã™ã§ã«3æ¬¡å…ƒã®ã“ã¨ã«ã¤ã„ã¦èª­ã‚€ã‚‚ã®ã‚’æ¢ã—ã¦ã„ã‚‹å ´åˆã¯ã€ãƒˆãƒ”ãƒƒã‚¯ã«é–¢ã™ã‚‹è¨˜äº‹ã¸ã®ãƒªãƒ³ã‚¯ã‚’æ®‹ã—</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™-Three.jsã§ã®3æ¬¡å…ƒã®è£½å“ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja478688/index.html">2019å¹´ã«ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ã‚’ç ”ç©¶ã™ã‚‹ã“ã¨ã¯ã©ã®ã‚ˆã†ãªã‚‚ã®ã§ã—ãŸã‹</a></li>
<li><a href="../ja478690/index.html">ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã•ã‚ŒãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ãƒˆã‚’ä½¿ç”¨ã—ãŸã€werfã‚’ä½¿ç”¨ã—ãŸDockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®å‹•çš„ãªã‚¢ã‚»ãƒ³ãƒ–ãƒªã¨å±•é–‹</a></li>
<li><a href="../ja478692/index.html">Androidã§ã®Java 8ã®ã‚µãƒãƒ¼ãƒˆæ–¹æ³•</a></li>
<li><a href="../ja478694/index.html">iviã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚·ãƒãƒã®æœ€æ–°ã‚«ã‚¿ãƒ­ã‚°ã‚’ãŠå‹§ã‚ã—ã¾ã™ï¼ˆ+ Pythonã‚³ãƒ¼ãƒ‰ï¼‰</a></li>
<li><a href="../ja478696/index.html">ã©ã®ã‚ˆã†ã«ç§ã¯Urban Tech 2019ã‚’è¨ªã‚Œã¾ã—ãŸã€‚ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆ</a></li>
<li><a href="../ja478702/index.html">Kapacitorã§ã®ãƒ¡ãƒˆãƒªãƒƒã‚¯å‡¦ç†ã®ãƒˆãƒªãƒƒã‚¯</a></li>
<li><a href="../ja478704/index.html">ãƒ¡ãƒ¼ãƒªãƒ³ã‚°ãŒã™ã§ã«ã‚¹ãƒ‘ãƒ ã«åˆ°é”ã—ã¦ã„ã‚‹å ´åˆã®å¯¾å‡¦æ–¹æ³•ï¼š5ã¤ã®å®Ÿéš›çš„ãªæ‰‹é †</a></li>
<li><a href="../ja478706/index.html">é«˜è² è·ã®å»ºç¯‰å®¶ã€‚OTUSã‹ã‚‰ã®æ–°ã—ã„ã‚³ãƒ¼ã‚¹</a></li>
<li><a href="../ja478708/index.html">ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚¶ãƒ¼ãŒå¤ã„ã‚²ãƒ¼ãƒ ã«æ–°ã—ã„å‘½ã‚’å¹ãè¾¼ã‚€æ–¹æ³•</a></li>
<li><a href="../ja478710/index.html">Tarantoolã‚«ãƒ¼ãƒˆãƒªãƒƒã‚¸ã¸ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç°¡å˜ã§â€‹â€‹ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã•ã‚ŒãŸãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆï¼ˆãƒ‘ãƒ¼ãƒˆ1ï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>