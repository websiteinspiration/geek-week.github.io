<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â›¹ğŸ¼ ğŸ‘¸ğŸ¼ ğŸ•´ğŸ» Cï¼ƒ8ã®æ–°æ©Ÿèƒ½ ğŸ’” ğŸ¥š ğŸ‘¨ğŸ¾â€âš–ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="G8ã¯ã¾ã RTMã‚‚ãƒªãƒªãƒ¼ã‚¹ã—ã¦ãŠã‚‰ãšã€ç§ã¯ã™ã§ã«ãã‚Œã«ã¤ã„ã¦ã®æŠ•ç¨¿ã‚’æ›¸ã„ã¦ã„ã¾ã™ã€‚ä½•ã®ãŸã‚ã«ï¼Ÿã¾ã‚ã€åŸºæœ¬çš„ãªè€ƒãˆæ–¹ã¯ã€è­¦å‘Šã•ã‚ŒãŸäººãŒæ­¦è£…ã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚ã—ãŸãŒã£ã¦ã€ã“ã®æŠ•ç¨¿ã§ã¯ã€ç¾åœ¨çŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚ãã‚ŒãŒã™ã¹ã¦ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ã‚ã‚‹å ´åˆã¯ã€ãã†ã§ã™ã€‚
 
 nullå¯èƒ½ãªå‚ç…§...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Cï¼ƒ8ã®æ–°æ©Ÿèƒ½</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454446/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">G8ã¯ã¾ã RTMã‚‚ãƒªãƒªãƒ¼ã‚¹ã—ã¦ãŠã‚‰ãšã€ç§ã¯ã™ã§ã«ãã‚Œã«ã¤ã„ã¦ã®æŠ•ç¨¿ã‚’æ›¸ã„ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ä½•ã®ãŸã‚ã«ï¼Ÿ</font><font style="vertical-align: inherit;">ã¾ã‚ã€åŸºæœ¬çš„ãªè€ƒãˆæ–¹ã¯ã€è­¦å‘Šã•ã‚ŒãŸäººãŒæ­¦è£…ã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ã“ã®æŠ•ç¨¿ã§ã¯ã€ç¾åœ¨çŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚ãã‚ŒãŒã™ã¹ã¦ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ã‚ã‚‹å ´åˆã¯ã€ãã†ã§ã™ã€‚</font></font></p><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nullå¯èƒ½ãªå‚ç…§å‹</font></font></h3><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ãªãŸãŒæ°—ä»˜ã„ã¦ã„ã‚‹ã‹ã©ã†ã‹ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ãŒã€ã™ã¹ã¦ã®ç¾ä»£è¨€èªã®è¨­è¨ˆè€…ã¯ã€å°‘ãªãã¨ã‚‚ã„ãã¤ã‹ã®é‡è¦ãªå´é¢ã‚’ã€Œè§£ä½“ã€ã—ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ä¸»ãªã‚¹ã‚¿ãƒ–ã®1ã¤ã¯åˆæœŸåŒ–ã•ã‚Œã¦ã„ãªã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚Š</font></font><nobr><code>NULL</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€CãŠã‚ˆã³</font></font><nobr><code>nullptr</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€è¿‘ã®C ++ </font><font style="vertical-align: inherit;">ã§é‡è¦ãªãƒã‚¤ãƒ³ã‚¿</font><font style="vertical-align: inherit;">ã§ã™ã€‚</font><font style="vertical-align: inherit;">åˆ¥ã®å´é¢ã¯ã€æ–‡å­—åˆ—ã®é•·ã•ãŒOï¼ˆnï¼‰ã§è¨ˆç®—ã•ã‚Œã‚‹å ´åˆã®ã€ã‚¼ãƒ­ã§çµ‚äº†ã™ã‚‹æ–‡å­—åˆ—ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€ç§ãŸã¡ã¯ä»Šã€ä»£å¼ã—ã¦ã„</font></font><nobr><code>null</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cï¼ƒã“ã‚Œã¯ã‚‚ã¡ã‚ã‚“ã€ãŸã¨ãˆã°ã€æ¬¡ã®ã‚ˆã†ãªåˆ¥ã®å½¢ã«ãªã£ã¦ã„ã¾ã™ã€‚</font></font></p><br>
<pre><code class="cs">public class Person<font></font>
{<font></font>
  public string FirstName { get; set; }<font></font>
  public string LastName { get; set; }<font></font>
  public string MiddleName { get; set; }<font></font>
  public Person(string first, string last, string middle) =&gt;<font></font>
    (FirstName, LastName, MiddleName) = (first, last, middle);<font></font>
  public string FullName =&gt;<font></font>
    $"{FirstName} {MiddleName[0]} {LastName}";<font></font>
}<font></font>
</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸Šè¨˜ã®ä¾‹ã¯å•é¡Œã‚’éå¸¸ã«ã‚ˆãç¤ºã—ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚ã‚‹äººã¯ãƒŸãƒ‰ãƒ«ãƒãƒ¼ãƒ ã‚’æŒã£ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ãŸã¨ãˆã°ã€ç§ã¯ãƒ‘ã‚¹ãƒãƒ¼ãƒˆã«ãƒŸãƒ‰ãƒ«ãƒãƒ¼ãƒ ã‚’æŒã£ã¦ã„ãªã„ã®ã§ã€ã“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ä½•ã‚’æ›¸ãã¹ãã‹æ˜ç¢ºã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">Cï¼ƒã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ–‡å­—åˆ—å€¤ã¯this </font></font><nobr><code>null</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®å€¤ã‚’ç©ºã®æ–‡å­—åˆ—ã«è£œé–“ã™ã‚‹ã¨ï¼ˆ</font></font><nobr><code>$</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è£ã§è¡Œã‚ã‚Œã¾ã™</font></font><nobr><code>string.Format()</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€</font></font><nobr><code>null</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-valueã®</font><font style="vertical-align: inherit;">æœ€åˆã®æ–‡å­—ã‚’å–å¾—ã—ã‚ˆã†ã¨ã™ã‚‹</font><font style="vertical-align: inherit;">ã¨ã€NREï¼ˆNullReferenceExceptionï¼‰ä¾‹å¤–ãŒç™ºç”Ÿã—ã¾ã™ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®å•é¡Œã®æ ¹æœ¬çš„ãªè§£æ±ºç­–ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">çªç„¶ç¦æ­¢ã—ãŸå ´åˆã¯</font></font><nobr><code>null</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€100500ã®é™çš„ãƒã‚§ãƒƒã‚¯ã‚’è¨˜è¿°ã—ã¦ã€ã™ã¹ã¦ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã®ã™ã¹ã¦ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’åˆæœŸåŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã¯ã€</font></font><nobr><code>Optional</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‹</font><font style="vertical-align: inherit;">ã«å®Œå…¨ã«ç§»å‹•ã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚å®Ÿéš›ã«ã¯ã€å•é¡Œã‚‚å®Œå…¨ã«ã¯è§£æ±ºã—ã¾ã›ã‚“ã€‚</font></font></p><br>
<p>        -   ,    .      (NuGet  <nobr><code>JetBrains.Annotations</code></nobr>)         :</p><br>
<pre><code class="cs">public class Person<font></font>
{<font></font>
  public string FirstName { get; set; }<font></font>
  public string LastName { get; set; }<font></font>
  [CanBeNull] public string MiddleName { get; set; }<font></font>
  public Person(string first, string last, [CanBeNull] string middle) =&gt;<font></font>
    (FirstName, LastName, MiddleName) = (first, last, middle);<font></font>
  public string FullName =&gt;<font></font>
    $"{FirstName} {MiddleName[0]} {LastName}";<font></font>
}<font></font>
</code></pre><br>
<p>         NRE   <nobr><code>MiddleName[0]</code></nobr>.</p><br>
<p> </p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8c0/fdb/077/8c0fdb077c01c3d76e3837e101530a61.png"></div><br>
<br>
<p> Microsoftâ€¦    ,      .   ,     VS     .    .     .</p><br>
<p>,      .    ,    .   ,  C#8    :</p><br>
<pre><code class="cs">#nullable enable
</code></pre><br>
<p>          . ,   - <br>
</p><br>
<pre><code class="cs">var p = new Person("Dmitri", "Nesteruk", null);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã®è­¦å‘ŠãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cs">1&gt;NullableReferenceTypes.cs(26,48,26,52): warning CS8625: Cannot convert null literal to non-nullable reference or unconstrained type parameter.
</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã„ã€ã¯ã„ã€ã‚¨ãƒ©ãƒ¼ã§ã¯ãªãè­¦å‘Šã®ã¿ã§ã™ï¼ˆã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚ŒãŸäººã¯èª°ã‚‚è­¦å‘Šã‚’ã‚¨ãƒ©ãƒ¼ã¨ã—ã¦æ‰±ã„ã¾ã›ã‚“ï¼‰ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã•ã¦ã€ã‚ã‹ã‚Šã¾ã—ãŸã€æ¬¡ã¯ä½•ã§ã™ã‹ï¼Ÿ</font><font style="vertical-align: inherit;">ãã—ã¦ã€ã©ã†ã„ã†ã‚ã‘ã‹Cï¼ƒã«ä½•ã‚‰ã‹ã®å½¢ã§ä¼ãˆãŸã„ã¨æ€ã„</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç†è«–çš„ã«</font></font><nobr><code>MiddleName</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯</font></font><nobr><code>null</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½¿ç”¨ã—ãŸã‚¢ã‚¯ã‚»ã‚¹</font></font><nobr><code>[0]</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚‚ãƒã‚§ãƒƒã‚¯ã™ã‚‹å¿…è¦</font><font style="vertical-align: inherit;">ãŒã‚ã‚‹</font><font style="vertical-align: inherit;">ç†ç”±</font><font style="vertical-align: inherit;">ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“</font><font style="vertical-align: inherit;">ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚</font></font></p><br>
<pre><code class="cs">public string? MiddleName;
</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ã‚Œã¯ä½•ã§ã™ã‹ï¼Ÿ</font><font style="vertical-align: inherit;">ãã‚Œã¯</font></font><nobr><code>string?</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">some </font></font><nobr><code>Nullable&lt;T&gt;</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font><font style="vertical-align: inherit;">åŒç­‰ã«</font><font style="vertical-align: inherit;">è¦‹ãˆã‚‹ã‹ã‚‚ã—ã‚Œ</font><font style="vertical-align: inherit;">ã¾ã›ã‚“ãŒã€ã“ã®ã‚¿ã‚¤ãƒ—ã®å†…å®¹ã‚’æ€ã„å‡ºã•ã›ã¦ãã ã•ã„</font></font><nobr><code>T : struct</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ã—ãŸãŒã£ã¦</font><font style="vertical-align: inherit;">ã€</font><font style="vertical-align: inherit;">ã“ã‚Œã¯æ˜ã‚‰ã‹ã«åˆ¥ã®ã‚‚ã®ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®è³ªå•ã¯ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã¸ã®ãƒ’ãƒ³ãƒˆã«ã™ãã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">å®Ÿéš›ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚¿ã‚¤ãƒ—ã¯ã¾ã æ­£å¸¸</font></font><nobr><code>string</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã™ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã‚Œã§ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãƒ¼ã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹0ã§åˆ¥ã®ã‚¢ã‚¯ã‚»ã‚¹è­¦å‘Šã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ãã‚ŒãŒæ©Ÿèƒ½ã™ã‚‹ãŸã‚ã«ã¯ã€ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ã«æ›¸ã„ã¦ã€ã©ã†ã«ã‹ã—ã¦å®‰å…¨ã«ãƒ—ãƒ¬ã‚¤ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š</font></font></p><br>
<pre><code class="cs">public string FullName =&gt;  $"{FirstName} {MiddleName?[0]} {LastName}";
</code></pre><br>
<p>   :     IL?      â€” !       :      nullable      nullable   <nobr><code>[Nullable]</code></nobr>.     :        .</p><br>
<h4>  </h4><br>
<p>  C#8   -    -.  ,        nullable-</p><br>
<pre><code class="cs">string? s = GetString();
</code></pre><br>
<p>          warning.     :</p><br>
<pre><code class="cs">if (s != null){  char c = s[0];}
</code></pre><br>
<p>   !  ,            .         .</p><br>
<h4>  </h4><br>
<p>      null.  â€”      Â«Â»,         ,          null-   .</p><br>
<p>  â€”           .   :</p><br>
<ul>
<li><p><nobr><code>(null as Person).FullName</code></nobr>    warning</p></li>
<li><p><nobr><code>(null as Person)!.FullName</code></nobr> warning   , ..      </p></li>
<li><p><nobr><code>(null as Person)!!!!!!!!!!!!!.FullName</code></nobr>        </p></li>
<li><p><nobr><code>(null as Person)!?.FullName</code></nobr>            <nobr><code>null</code></nobr>;    , <nobr><code>?!</code></nobr>,  </p></li>
</ul><br>
<h4>  </h4><br>
<p>,       -      BCL       .     </p><br>
<pre><code class="cs">Type t = Type.GetType("abracadabra");Console.WriteLine(t.Name);
</code></pre><br>
<p>    . -   <nobr><code>Type.GetType()</code></nobr>  <nobr><code>null</code></nobr>     ,   BCL     <nobr><code>nullable</code></nobr> ,   .</p><br>
<p> ,    Â«Â»    </p><br>
<pre><code class="cs">Type t = Type.GetType("abracadabra");<font></font>
Type? u = t;<font></font>
Console.WriteLine(u.Name);<font></font>
</code></pre><br>
<p>      . ,    <nobr><code>t != null</code></nobr>,  <nobr><code>u</code></nobr>      <nobr><code>null</code></nobr>,    .</p><br>
<h4></h4><br>
<p>Nullable reference types â€”   ,    .    .    , ,    -    nullability    ,   ,  .</p><br>
<h3>  </h3><br>
<p>     :   ,     ,  ,      . ,  X~N(0,1),   E[XÂ²]  V[XÂ²]?</p><br>
<p>   ,          ,       Â« Â».</p><br>
<p>,        : <nobr><code>Index</code></nobr>  <nobr><code>Range</code></nobr>.</p><br>
<h4>Index</h4><br>
<p>   ,       <nobr><code>int</code></nobr>   <nobr><code>uint</code></nobr>?  :             ( ).      ,    C#  <nobr><code>x[-1]</code></nobr>   .</p><br>
<p>           .     ..     -1    ,         ,  .</p><br>
<p> C#       . ,   .  ,      <nobr><code>Index</code></nobr>      ,     :</p><br>
<pre><code class="cs">Index i0 = 2; // implicit conversion
</code></pre><br>
<p> ,   ,           .</p><br>
<p>   <nobr><code>Index</code></nobr>    (      â€”   ):</p><br>
<ul>
<li><p><nobr><code>Value</code></nobr>,      </p></li>
<li><p><nobr><code>IsFromEnd</code></nobr> â€”  , ,     <em></em>     </p></li>
</ul><br>
<p>     :</p><br>
<pre><code class="cs">Index i1 = new Index(0, false);
</code></pre><br>
<p> ,   ,     .     (  ,   )    :</p><br>
<pre><code class="cs">var i2 = ^0; // Index(0, true)
</code></pre><br>
<p>!     ,   <nobr><code>^</code></nobr>     (     , LaTeX,  ),           Â« Â».</p><br>
<p> ,     ,     (<nobr><code>operator this[]</code></nobr>)   <nobr><code>Index</code></nobr>,     </p><br>
<pre><code class="cs">var items = new[] { 1, 2, 3, 4, 5 };<font></font>
items[^2] = 33; // 1, 2, 33, 4, 5<font></font>
</code></pre><br>
<h4>Range</h4><br>
<p>    â€”   <nobr><code>Range</code></nobr>,     ,      ,    1.      :</p><br>
<pre><code class="cs">X..Y
</code></pre><br>
<p>  Â«   X   YÂ».  ,       <nobr><code>Y</code></nobr>   â€” <em> </em>    <nobr><code>Y</code></nobr>.    .</p><br>
<p>,   :</p><br>
<ul>
<li><p><nobr><code>var a = i1..i2; // Range(i1, i2)</code></nobr> â€”       </p></li>
<li><p><nobr><code>var b = i1..; // Range(i1, new Index(0, true));</code></nobr> â€”   <nobr><code>i1</code></nobr>    </p></li>
<li><p><nobr><code>var c = ..i2; // Range(new Index(0, false), i2)</code></nobr> â€”         <nobr><code>i2</code></nobr></p></li>
<li><p><nobr><code>var e = ..;</code></nobr> â€”   ,        </p></li>
<li><p><nobr><code>Range.ToEnd(2);</code></nobr> â€”      â€”   ,     ;    ,     dotPeek, ilSpy   </p></li>
</ul><br>
<h4>   ?</h4><br>
<p>,    ++      (undefined behavior?).   ,   <nobr><code>Range</code></nobr>  C#   .    : <strong>       Â« Â»</strong>.</p><br>
<p>  <nobr><code>x = {1, 2, 3}</code></nobr>.   <nobr><code>x[0..2]</code></nobr>   <nobr><code>{1, 2}</code></nobr>,     <nobr><code>x[..2]</code></nobr>   <nobr><code>x[..]</code></nobr>,   <nobr><code>{1, 2, 3}</code></nobr>.</p><br>
<p>    ..  <nobr><code>x[2]</code></nobr>  <nobr><code>x[^1]</code></nobr> â€”   ,       <nobr><code>Range</code></nobr>- !</p><br>
<h4>  </h4><br>
<p>-,  <nobr><code>X..Y</code></nobr>     <nobr><code>X &lt;= Y</code></nobr> (   ?).        ( 7..3),     <nobr><code>ArgumentOutOfRangeException</code></nobr>.  <em></em>  ..           ,         .</p><br>
<p>-, Â«Â»    ,     <nobr><code>1..2..100</code></nobr>     .    .       MATLAB.</p><br>
<p><nobr><code>Range</code></nobr>       :</p><br>
<ul>
<li><p> ,    ,    </p></li>
<li><p>    <nobr><code>Substring()</code></nobr>.   C#      .</p></li>
<li><p>    <nobr><code>AsSpan()</code></nobr>   <nobr><code>Range</code></nobr>.</p></li>
<li><p> <nobr><code>Span</code></nobr>    <nobr><code>Range</code></nobr> â€” <nobr><code>Span.Slice()</code></nobr>,  -.</p></li>
</ul><br>
<p>,      <nobr><code>Index/Range</code></nobr>        <nobr><code>operator this[]</code></nobr>.    ,       Â« Â»  . ,      (singly linked list),   - Â« Â» â€”  .</p><br>
<h4></h4><br>
<p>   ,             <nobr><code>struct</code></nobr>-. -     , Â«Â»      ,       .</p><br>
<p> ,      :</p><br>
<p> </p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/283/851/1e5/2838511e5010e3966e830e753d0696be.png"></div><br>
<br>
<h3>Default Interface Members</h3><br>
<p>          ,        .   ,     â€” ?</p><br>
<p>   .      <nobr><code>Enumerable.Count()</code></nobr> â€”      <nobr><code>while (x.MoveNext())</code></nobr>      ,    .     <nobr><code>Count()</code></nobr>  :</p><br>
<pre><code class="cs">if (x is IList&lt;T&gt; list)<font></font>
  return list.Count;<font></font>
</code></pre><br>
<p>?    <nobr><code>IReadOnlyList&lt;T&gt;</code></nobr>,     ?   Â« Â»?!?</p><br>
<p>,      ,    open-closed principle     SOLID, ..         â€”   .</p><br>
<p>   ? ,   ,  , -     <nobr><code>Count()</code></nobr>,   <nobr><code>IReadOnlyList&lt;T&gt;</code></nobr>,   ,    .     !     - <nobr><code>IReadOnlyList&lt;T&gt;.Count()</code></nobr>    <nobr><code>IEnumerable&lt;T&gt;.Count()</code></nobr>? ,  !   .</p><br>
<p>       .    , - -,        .</p><br>
<h4> </h4><br>
<p>        :</p><br>
<pre><code class="cs">public interface IHuman<font></font>
{<font></font>
  string Name { get; set; }<font></font>
    <font></font>
  public void SayHello() <font></font>
  {<font></font>
    Console.WriteLine($"Hello, I am {Name}");<font></font>
  }<font></font>
}<font></font>
<font></font>
public class Human : IHuman<font></font>
{<font></font>
  public string Name { get;set; }<font></font>
}<font></font>
</code></pre><br>
<p>  ,     ,     :</p><br>
<pre><code class="cs">Human human = new Human() { Name = "John" };<font></font>
human.SayHello(); // will not compile<font></font>
</code></pre><br>
<p> ?  ,  .     â€”   ,   ,        ,        .</p><br>
<p>,  ? ,       ,    <strong> </strong>,     .        <nobr><code>Human</code></nobr>  <em></em> <nobr><code>SayHello()</code></nobr>? ,  .</p><br>
<p>    :       ,          :</p><br>
<pre><code class="cs">IHuman human = new Human() { Name = "John" };<font></font>
human.SayHello();<font></font>
((IHuman)new Human { â€¦ }).SayHello();<font></font>
</code></pre><br>
<h4> </h4><br>
<p>,    ,     :       <nobr><code>Foo()</code></nobr> (  ),            <nobr><code>Foo()</code></nobr>,     :</p><br>
<pre><code class="cs">public interface IHuman<font></font>
{<font></font>
  string Name { get; set; }<font></font>
  <font></font>
  void SayHello() <font></font>
  {<font></font>
    Console.WriteLine($"Hello, I am {Name}");<font></font>
  }<font></font>
}<font></font>
public interface IFriendlyHuman : IHuman<font></font>
{<font></font>
  void SayHello()<font></font>
  {<font></font>
    Console.WriteLine(      $"Greeting, my name is {Name}");<font></font>
  }<font></font>
}<font></font>
((IHuman)new Human()).SayHello();<font></font>
// Hello, I am John<font></font>
((IFriendlyHuman)new Human()).SayHello();<font></font>
// Greeting, my name is John<font></font>
</code></pre><br>
<p>,     <nobr><code>IFriendlyHuman.SayHello()</code></nobr>    override- <nobr><code>IHuman.SayHello()</code></nobr>,    !       <nobr><code>SayHello()</code></nobr>   ?     :</p><br>
<pre><code class="cs">public interface IFriendlyHuman : IHuman<font></font>
{<font></font>
  void IHuman.SayHello()<font></font>
  //   â†‘â†‘â†‘â†‘â†‘â†‘<font></font>
  {<font></font>
    Console.WriteLine(      $"Greeting, my name is {Name}");<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
<p>     <nobr><code>SayHello()</code></nobr>   ,   <nobr><code>IHuman</code></nobr>  <nobr><code>IFriendlyHuman</code></nobr>      ,      :</p><br>
<pre><code class="cs">((IHuman)new Human()).SayHello();<font></font>
Greeting, my name is John<font></font>
((IFriendlyHuman)new Human()).SayHello();<font></font>
Greeting, my name is John<font></font>
</code></pre><br>
<h4>Diamond Inheritance</h4><br>
<p>,        Â« override-Â»   -    ,      :</p><br>
<pre><code class="cs">interface ITalk { void Greet(); }<font></font>
interface IAmBritish : ITalk<font></font>
{<font></font>
  void ITalk.Greet() =&gt; WriteLine("Good day!");<font></font>
}<font></font>
interface IAmAmerican : ITalk<font></font>
{<font></font>
  void ITalk.Greet() =&gt; WriteLine("Howdy!");<font></font>
}<font></font>
class DualNational : IAmBritish, IAmAmerican {}<font></font>
// Error CS8705 Interface member 'ITalk.Greet()' does not have a most specific implementation. Neither 'IAmBritish.ITalk.Greet()', nor 'IAmAmerican.ITalk.Greet()' are most specific.<font></font>
</code></pre><br>
<p>   ,      Â« Â» ( ,    )    ,   ,       -  - <nobr><code>IAmAmerican.Greet()</code></nobr> â€”        ,   -,   ?</p><br>
<h4></h4><br>
<p>   .       ,   ,  ,              API.    â€”       -.     -?</p><br>
<h3>Pattern Matching</h3><br>
<p>     F#      .  â€”  F#     ,         ,   # ,       .</p><br>
<p>   ,  F# <nobr><code>match</code></nobr>  # <nobr><code>switch</code></nobr>.  C#8     .</p><br>
<h4>Property Matching</h4><br>
<p>      ,    :</p><br>
<pre><code class="cs">struct PhoneNumber{<font></font>
  public int Code, Number;<font></font>
}<font></font>
var phoneNumber = new PhoneNumber();<font></font>
var origin = phoneNumber switch {<font></font>
  { Number: 112 } =&gt; "Emergency",<font></font>
  { Code: 44 } =&gt; "UK"<font></font>
};<font></font>
</code></pre><br>
<p>     <nobr><code>phoneNumber</code></nobr>,      .      switch statement  switch <em>expression</em>,       - .</p><br>
<p>   ,   â€” ,      .     :       default-init ( ,  <nobr><code>default(T)</code></nobr>         )    .   ,      ,   :</p><br>
<p> </p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d9d/506/4c1/d9d5064c140536ff7f868a453ac27237.png"></div><br>
<br>
<p>          :</p><br>
<p> </p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/21a/d2f/273/21ad2f273af8e46689b97b998cbdf616.png"></div><br>
<br>
<h4></h4><br>
<p>         ,     ,    :</p><br>
<pre><code class="cs">var origin = phoneNumber switch {<font></font>
  { Number: 112 } =&gt; "Emergency",<font></font>
  { Code: 44 } =&gt; "UK",<font></font>
  { } =&gt; "Indeterminate",<font></font>
  _ =&gt; "Missing"<font></font>
};<font></font>
</code></pre><br>
<p>  ?  ,    2 : <nobr><code>_</code></nobr> (),     ,  <nobr><code>{}</code></nobr>       <nobr><code>null</code></nobr>.</p><br>
<p>     ,        .     ?</p><br>
<pre><code class="cs">var origin = phoneNumber switch {<font></font>
  { Number: 112 } =&gt; "Emergency",<font></font>
  { Code: 44 } =&gt; "UK",<font></font>
  { } =&gt; "Unknown"<font></font>
};<font></font>
</code></pre><br>
<p>     ?  <nobr><code>phoneNumber</code></nobr>  <nobr><code>struct</code></nobr> â€”   ,     <nobr><code>class</code></nobr>.    -    ,     <nobr><code>null</code></nobr>, â€¦   nullable reference types!</p><br>
<p>  ,                .</p><br>
<h4> </h4><br>
<p>-       ,   .  nullable reference types â€”  ,     nullable <em> </em>,   recursive patterns â€”     .</p><br>
<p> F#,     ,        .  C# ,     ,     ,     C# â€”  .</p><br>
<p> , Â« Â»  C#              -,    :</p><br>
<pre><code class="cs">var personsOrigin = person switch {<font></font>
  { Name: "Dmitri" } =&gt; "Russia",<font></font>
  { PhoneNumber: { Code: 46 } } =&gt; "Sweden",<font></font>
  { Name: var name } =&gt; $"No idea where {name} lives"<font></font>
};<font></font>
</code></pre><br>
<p>      .  â€”  ,      <nobr><code>person.PhoneNumber</code></nobr>     <nobr><code>Code</code></nobr>   <nobr><code>46</code></nobr>.  â€”                   .     ,         Â«Â».</p><br>
<h4></h4><br>
<p>    :          <nobr><code>switch</code></nobr>-.  :</p><br>
<pre><code class="cs">var error = person switch {<font></font>
  null =&gt; "Object missing",<font></font>
  { PhoneNumber: null } =&gt; "Phone number missing entirely",<font></font>
  { PhoneNumber: { Number: 0 } } =&gt; "Actual number missing",<font></font>
  { PhoneNumber: { Code: var code } } when code &lt; 0 =&gt; "WTF?",<font></font>
  { } =&gt; null // no error<font></font>
};<font></font>
if (error != null)<font></font>
  throw new ArgumentException(error);<font></font>
</code></pre><br>
<p> ,      :    ,    <nobr><code>when</code></nobr>          ,    .</p><br>
<h4>    </h4><br>
<p>-  Â«Â»         .     ,      :</p><br>
<pre><code class="cs">IEnumerable&lt;int&gt; GetMainOfficeNumbers()<font></font>
{<font></font>
  foreach (var pn in numbers)<font></font>
  {<font></font>
    if (pn is ExtendedPhoneNumber { Office: "main" })<font></font>
      yield return pn.Number;<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
<p>         ,   ,           .  .</p><br>
<h4></h4><br>
<p>      â€”    ,  ,    .       <nobr><code>Deconstruct()</code></nobr>       <nobr><code>out</code></nobr>-.</p><br>
<p> ,       -   :</p><br>
<pre><code class="cs">var type = shape switch<font></font>
{<font></font>
  Rectangle((0, 0), 0, 0) =&gt; "Point at origin",<font></font>
  Circle((0, 0), _) =&gt; "Circle at origin",<font></font>
  Rectangle(_, var w, var h) when w == h =&gt; "Square",<font></font>
  Rectangle((var x, var y), var w, var h) =&gt;<font></font>
    $"A {w}Ã—{h} rectangle at ({x},{y})",<font></font>
  _ =&gt; "something else"<font></font>
};<font></font>
</code></pre><br>
<p>         ,    :   -,      ,     .       Â«Â» â€”     ,     .  (<nobr><code>_</code></nobr>)     ,    .</p><br>
<h4></h4><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã‚Œã‚‰ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã‚‹ãŸã‚ã«å¿…è¦ã§ä¾¿åˆ©ãªæ©Ÿèƒ½ã€‚</font><font style="vertical-align: inherit;">æ¤œè¨¼ã¨é¡ä¼¼ã‚¿ã‚¤ãƒ—ã®åˆ†æã¯éå¸¸ã«ç°¡æ½”ã«ãªã‚Šã¾ã™ã€‚</font></font></p><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµè«–</font></font></h3><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½•ã€ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’è¡¨ç¤ºã—ãªã‹ã£ãŸã®ã§ã™ã‹ï¼Ÿ</font><font style="vertical-align: inherit;">ãˆãˆã€ç§ã¯å®Ÿéš›ã«ã¯ç´„æŸã—ã¾ã›ã‚“ã§ã—ãŸã€‚</font><font style="vertical-align: inherit;">é–‹å§‹ã™ã‚‹ã«ã¯ååˆ†ã§ã™ã€‚</font><font style="vertical-align: inherit;">è¨€èªãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹ã¾ã§ã€ç§ã¯ã¾ã å°‘ã—èª¿æŸ»ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ¢ç´¢ã—ãŸã„å ´åˆã¯ã€VS 2019 </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preview</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆã¯ã„ã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§RTMã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€. NET Core 3ï¼ˆä¸Šè¨˜ã®å¤šãã¯å˜ã«.NET Frameworkã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼‰ãŒå¿…è¦ã§ã™ã€‚dotPeekã‚‚ç†è§£ã«å½¹ç«‹ã¡ã¾ã™èˆå°è£ã§ä½•ãŒã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã‚Œã¯ä»Šã®ã¨ã“ã‚ã™ã¹ã¦ã§ã™ã€‚</font><font style="vertical-align: inherit;">ç¶šè¡Œã™ã‚‹ï¼ˆãŠãã‚‰ãï¼‰ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</font><font style="vertical-align: inherit;">â– </font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja454436/index.html">ãƒšãƒ†ã‚£ãƒšãƒ†ã‚£ã‚¸ãƒ§ã‚¤ï¼ƒ1ï¼šãƒ­ã‚°ãƒ«</a></li>
<li><a href="../ja454438/index.html">ä¸€è¼ªè»Šã®ä¹—ã‚Šæ–¹ã‚’å­¦ã¶ã«ã¯ï¼Ÿ</a></li>
<li><a href="../ja454440/index.html">ãƒšãƒ†ã‚£ãƒªãƒˆãƒ«ãƒ•ã‚¡ãƒ³ï¼ƒ2ï¼šã‚¹ã‚¿ãƒ¼ãƒ¬ãƒƒãƒˆ</a></li>
<li><a href="../ja454442/index.html">ãƒ“ã‚¸ãƒã‚¹ç”¨ã®ãƒ—ãƒ­ã‚­ã‚·ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’é¸æŠã™ã‚‹æ–¹æ³•ï¼š3ã¤ã®å®Ÿç”¨çš„ãªãƒ’ãƒ³ãƒˆ</a></li>
<li><a href="../ja454444/index.html">Habrã®èª­ã¿è¾¼ã¿ã€ã¾ãŸã¯ãƒšãƒ¼ã‚¸ã®189ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã©ã®ã‚ˆã†ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã‹ã‚’ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã—ã¾ã™</a></li>
<li><a href="../ja454450/index.html">ã‚¨ã‚¸ã‚½ãƒ³ãŒãƒ¯ã‚¤ãƒ¤ãƒ¬ã‚¹ã‚’ç™ºæ˜ã—ã€ä½•ã‚‚ç†è§£ã—ãªã‹ã£ãŸæ–¹æ³•</a></li>
<li><a href="../ja454452/index.html">ç‰¹å®šã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦ã€èªè­˜ã•ã‚ŒãŸç”»åƒã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤ºã—ã¾ã™</a></li>
<li><a href="../ja454456/index.html">Cisco 200-125 CCNA v3.0ã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã€‚7æ—¥ç›®ã€‚FAQ</a></li>
<li><a href="../ja454458/index.html">å¤‰æˆãƒ†ã‚¹ãƒˆï¼šã“ã®æœ‰æœ›ãªæ‰‹æ³•ã«ã¤ã„ã¦èª°ã‚‚çŸ¥ã‚‰ãªã„ç†ç”±</a></li>
<li><a href="../ja454460/index.html">ãƒ¢ãƒã‚¤ãƒ«ï¼ƒ300é–‹ç™ºè€…å‘ã‘ã®èˆˆå‘³æ·±ã„è³‡æ–™ã®ãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆï¼ˆ5æœˆ27æ—¥-6æœˆ2æ—¥ï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>