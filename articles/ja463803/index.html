<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍀 👨🏿 🙈 Haikuでの5日目：いくつかのプログラムを移植しましょう 👨🏽‍⚖️ 👨🏿‍🤝‍👨🏽 👧🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TL; DR：初心者が初めてHaikuを見て、Linuxの世界からいくつかのプログラムを移植しようとしました。
 


 hpkg形式でパッケージ化された最初のHaiku移植プログラム
 

最近、意外に優れたPCオペレーティングシステムであるHaikuを発見しました。
 今日は、このOSに新しいプ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Haikuでの5日目：いくつかのプログラムを移植しましょう</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/463803/"><p><img src="https://habrastorage.org/webt/es/mu/cv/esmucvz7w8himki2j_panp2lusm.png"></p><br>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TL; DR</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：初心者が初めてHaikuを見て、Linuxの世界からいくつかのプログラムを移植しようとしました。</font></font></p><a name="habracut"></a><br>
<p><img src="https://habrastorage.org/webt/jg/ke/gx/jgkegximkd-_msnfsvgt9b55ioc.png"><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hpkg形式でパッケージ化された最初のHaiku移植プログラム</font></font></em></p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最近</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、意外に優れたPCオペレーティングシステムであるHaikuを発見しました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今日は、このOSに新しいプログラムを転送する方法を学びます。</font><font style="vertical-align: inherit;">Linuxの開発者の視点からハイクに切り替えた最初の経験の説明が主な強調点です。</font><font style="vertical-align: inherit;">結局のところ、最初にHaikuをダウンロードしてから1週間が経過していないため、このプロセスで起こった愚かな間違いをお詫びします。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3つの目標を達成したい：</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単純な</font></font><abbr title="コマンドラインインターフェース、コマンドラインアプリケーション"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLI</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションを</font><font style="vertical-align: inherit;">移植する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GUIからQtへのアプリケーションの移植</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">後でそれらをhpkg形式でパックします（私はまだAppDirとAppImageをHaikuに適合させることを考えているので...）</font></font></li>
</ul><br>
<p>.   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">wiki</a>  HaikuPorts    .     PDF <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">BeOS:   Unix</a>.<br>
467  —    1997 !   ,    .   : ",   BeOS   POSIX-",  Haiku "  »  .</p><br>
<h2 id="portirovanie-prostogo-prilozheniya-cli">   CLI</h2><br>
<p>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">avrdude</a>, ,  ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a> -.</p><br>
<h3 id="pervaya-popytka-nechego-smotret"> :  </h3><br>
<p>    ,   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> 10     Haiku</a> —  ,       1.0 .</p><br>
<h3 id="vtoraya-popytka-nuzhno-perepisat"> :  </h3><br>
<p>,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">ptouch-770</a>, CLI    Brother P-Touch 770,     .<br>
     ,   , ,     .      -  GUI  Python (   Gtk+ —  ,     ).</p><br>
<p><img src="https://habrastorage.org/webt/2k/oj/7l/2koj7lxxd7loscdf53t2n-m1mom.jpeg"><br>
<em>   Brother P-Touch 770.    Haiku?</em></p><br>
<p>  Haiku     ,      "can't find libintl"   <code>configure</code> —   <code>pkgman install devel:libintl</code>     .  <code>pkgman install cmd:rsync</code>. ,  ..</p><br>
<p>  ,    :</p><br>
<pre><code class="plaintext hljs">/Haiku/home&gt; git clone https://github.com/probonopd/ptouch-770<font></font>
Cloning into 'ptouch-770'...<font></font>
remote: Enumerating objects: 134, done.<font></font>
remote: Total 134 (delta 0), reused 0 (delta 0), pack-reused 134<font></font>
Receiving objects: 100% (134/134), 98.91 KiB | 637.00 KiB/s, done.<font></font>
Resolving deltas: 100% (71/71), done./Haiku/home&gt; cd ptouch-770//Haiku/home/ptouch-770&gt; make<font></font>
gcc -Wall -O2 -c -o ptouch-770-write.o ptouch-770-write.c<font></font>
ptouch-770-write.c:28:10: fatal error: libudev.h: No such file or directory<font></font>
 #include &lt;libudev.h&gt;<font></font>
          ^~~~~~~~~~~<font></font>
compilation terminated.<font></font>
Makefile:16: recipe for target 'ptouch-770-write.o' failed<font></font>
make: *** [ptouch-770-write.o] Error 1/Haiku/home/ptouch-770&gt; pkgman install devel:libudev<font></font>
100% repochecksum-1 [65 bytes]<font></font>
Validating checksum for Haiku...done.<font></font>
100% repochecksum-1 [64 bytes]<font></font>
Validating checksum for HaikuPorts...done.<font></font>
*** Failed to find a match for "devel:libudev": Name not found/Haiku/home/ptouch-770&gt; pkgman install devel:udev<font></font>
100% repochecksum-1 [65 bytes]<font></font>
Validating checksum for Haiku...done.<font></font>
100% repochecksum-1 [64 bytes]<font></font>
Validating checksum for HaikuPorts...done.<font></font>
*** Failed to find a match for "devel:udev": Name not found</code></pre><br>
<p> udev  ,     Haiku.      ,    .<br>
,    ,     ,   .</p><br>
<h3 id="tretya-popytka"> </h3><br>
<p>    <code>tmate</code>  Haiku,      Haiku      —  ,  -   .   :</p><br>
<pre><code class="plaintext hljs">./autogen.sh<font></font>
./configure<font></font>
make<font></font>
make install</code></pre><br>
<p> ,          Haiku?</p><br>
<pre><code class="plaintext hljs">/Haiku/home&gt; git clone https://github.com/tmate-io/tmate/Haiku/home&gt; cd tmate//Haiku/home/tmate&gt; ./autogen.sh<font></font>
(...)/Haiku/home/tmate&gt; ./configure<font></font>
(...)<font></font>
checking for libevent... no<font></font>
checking for library containing event_init... no<font></font>
configure: error: "libevent not found"/Haiku/home/tmate&gt; pkgman install devel:libevent<font></font>
(...)<font></font>
The following changes will be made:<font></font>
  in system:<font></font>
    install package libevent21-2.1.8-2 from repository HaikuPorts<font></font>
    install package libevent21_devel-2.1.8-2 from repository HaikuPorts<font></font>
Continue? [yes/no] (yes) :<font></font>
100% libevent21-2.1.8-2-x86_64.hpkg [965.22 KiB]<font></font>
(...)<font></font>
[system] Done.checking for ncurses... no<font></font>
checking for library containing setupterm... no<font></font>
configure: error: "curses not found"/Haiku/home/tmate&gt; pkgman install devel:libcurses<font></font>
(...)<font></font>
*** Failed to find a match for "devel:libcurses": Name not found/Haiku/home/tmate&gt; pkgman install devel:curses<font></font>
(...)<font></font>
*** Failed to find a match for "devel:curses": Name not found</code></pre><br>
<p>     HaikuDepot   <code>curses</code>.<br>
-  ,         :</p><br>
<pre><code class="plaintext hljs">/Haiku/home/tmate&gt; pkgman install devel:libncurses<font></font>
(...)<font></font>
100% ncurses6_devel-6.1-1-x86_64.hpkg [835.62 KiB]<font></font>
(...)./configure<font></font>
(...)<font></font>
checking for msgpack &gt;= 1.1.0... no<font></font>
configure: error: "msgpack &gt;= 1.1.0 not found"/Haiku/home/tmate&gt; pkgman install devel:msgpack<font></font>
(...)<font></font>
*** Failed to find a match for "devel:msgpack": Name not found/Haiku/home/tmate&gt; pkgman install devel:libmsgpack<font></font>
(...)<font></font>
*** Failed to find a match for "devel:libmsgpack": Name not found</code></pre><br>
<p>   HaikuDepot, ,  ,  <code>devel:msgpack_c_cpp_devel</code>.    ?</p><br>
<pre><code class="plaintext hljs">/Haiku/home/tmate&gt; pkgman install devel:msgpack_c_cpp_devel<font></font>
100% repochecksum-1 [65 bytes]<font></font>
Validating checksum for Haiku...done.<font></font>
100% repochecksum-1 [64 bytes]<font></font>
Validating checksum for HaikuPorts...done.<font></font>
*** Failed to find a match for "devel:msgpack_c_cpp_devel": Name not found# Why is it not finding it? To hell with the "devel:".../Haiku/home/tmate&gt; pkgman install msgpack_c_cpp_devel<font></font>
(...)<font></font>
The following changes will be made:<font></font>
  in system:<font></font>
    install package msgpack_c_cpp-3.1.1-1 from repository HaikuPorts<font></font>
    install package msgpack_c_cpp_devel-3.1.1-1 from repository HaikuPorts<font></font>
Continue? [yes/no] (yes) :<font></font>
(...)/Haiku/home/tmate&gt; ./configure<font></font>
(...)<font></font>
checking for libssh &gt;= 0.8.4... no<font></font>
configure: error: "libssh &gt;= 0.8.4 not found"/Haiku/home/tmate&gt; pkgman install devel:libssh/Haiku/home/tmate&gt; make<font></font>
(...)<font></font>
In file included from /boot/system/develop/headers/msgpack.h:22,<font></font>
                 from tmate.h:5,<font></font>
                 from cfg.c:29:<font></font>
/boot/system/develop/headers/msgpack/vrefbuffer.h:19:8: error: redefinition of struct iovec'<font></font>
 struct iovec {<font></font>
        ^~~~~<font></font>
In file included from tmux.h:27,<font></font>
                 from cfg.c:28:<font></font>
/boot/system/develop/headers/posix/sys/uio.h:12:16: note: originally defined here<font></font>
 typedef struct iovec {<font></font>
                ^~~~~<font></font>
Makefile:969: recipe for target 'cfg.o' failed<font></font>
make: *** [cfg.o] Error 1</code></pre><br>
<p>    ,     Haiku    ,     .<br>
     Haiku, ,     msgpack,       patch,  HaikuPorts.  ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a> (buildslave —  ).</p><br>
<p><img src="https://habrastorage.org/webt/mg/lj/u2/mglju2leiyidcfqz0t_oqiwhecs.png"><br>
<em>  msgpack  buildmaster</em></p><br>
<p>   patch  upstream <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   Haiku  msgpack</a>.</p><br>
<p>    msgpack    Haiku:</p><br>
<pre><code class="plaintext hljs">/Haiku/home/tmate&gt; pkgman update<font></font>
(...)<font></font>
The following changes will be made:<font></font>
  in system:<font></font>
    upgrade package msgpack_c_cpp-3.1.1-1 to 3.2.0-2 from repository HaikuPorts<font></font>
    upgrade package msgpack_c_cpp_devel-3.1.1-1 to 3.2.0-2 from repository HaikuPorts<font></font>
Continue? [yes/no] (yes) : y<font></font>
100% msgpack_c_cpp-3.2.0-2-x86_64.hpkg [13.43 KiB]<font></font>
(...)<font></font>
[system] Done.</code></pre><br>
<p> .   ?!</p><br>
<p>    :</p><br>
<pre><code class="plaintext hljs">/Haiku/home/tmate&gt; make<font></font>
(...)<font></font>
In file included from tmux.h:40,<font></font>
                 from tty.c:32:<font></font>
compat.h:266: warning: "AT_FDCWD" redefined<font></font>
 #define AT_FDCWD -100<font></font>
<font></font>
In file included from tty.c:25:<font></font>
/boot/system/develop/headers/posix/fcntl.h:62: note: this is the location of the previous definition<font></font>
 #define AT_FDCWD  (-1)  /* CWD FD for the *at() functions */<font></font>
<font></font>
tty.c: In function 'tty_init_termios':<font></font>
tty.c:278:48: error: 'IMAXBEL' undeclared (first use in this function); did you mean 'MAXLABEL'?<font></font>
  tio.c_iflag &amp;= ~(IXON|IXOFF|ICRNL|INLCR|IGNCR|IMAXBEL|ISTRIP);<font></font>
                                                ^~~~~~~<font></font>
                                                MAXLABEL<font></font>
tty.c:278:48: note: each undeclared identifier is reported only once for each function it appears in<font></font>
Makefile:969: recipe for target 'tty.o' failed<font></font>
make: *** [tty.o] Error 1</code></pre><br>
<p>, , msgpack  .  <code>IMAXLABEL</code>  <code>tty.c</code> :</p><br>
<pre><code class="plaintext hljs">tio.c_iflag &amp;= ~(IXON|IXOFF|ICRNL|INLCR|IGNCR|/*IMAXBEL|*/ISTRIP);</code></pre><br>
<p>:</p><br>
<pre><code class="plaintext hljs">osdep-unknown.c: In function 'osdep_get_cwd':<font></font>
osdep-unknown.c:32:19: warning: unused parameter 'fd' [-Wunused-parameter]<font></font>
 osdep_get_cwd(int fd)<font></font>
               ~~~~^~<font></font>
make: *** No rule to make target 'compat/forkpty-unknown.c', needed by 'compat/forkpty-unknown.o'.  Stop.</code></pre><br>
<p> , … :</p><br>
<pre><code class="plaintext hljs">/Haiku/home/tmate&gt; ./configure | grep -i OPENAT<font></font>
checking for openat... no</code></pre><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">mr. waddlesplash</a> ,  :</p><br>
<pre><code class="plaintext hljs">/Haiku/home/tmate&gt; ./configure LDFLAGS="-lbsd"<font></font>
(...)/Haiku/home/tmate&gt; make<font></font>
(...)<font></font>
In file included from tmux.h:40,<font></font>
                 from window.c:31:<font></font>
compat.h:266: warning: "AT_FDCWD" redefined<font></font>
 #define AT_FDCWD -100<font></font>
<font></font>
In file included from window.c:22:<font></font>
/boot/system/develop/headers/posix/fcntl.h:62: note: this is the location of the previous definition<font></font>
 #define AT_FDCWD  (-1)  /* CWD FD for the *at() functions */<font></font>
<font></font>
make: *** No rule to make target 'compat/forkpty-unknown.c', needed by 'compat/forkpty-unknown.o'.  Stop.</code></pre><br>
<p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">config.log</a>.</p><br>
<p> ,   libresolv  Haiku  -   libnetwork.       .  ...</p><br>
<pre><code class="plaintext hljs">find . -type f -exec sed -i -e 's|lresolv|lnetwork|g'  {} \;</code></pre><br>
<p> :   .</p><br>
<pre><code class="plaintext hljs">/Haiku/home/tmate&gt; ./configure LDFLAGS="-lbsd"<font></font>
(...)/Haiku/home/tmate&gt; make<font></font>
(...)<font></font>
# Success!# Let's run it:/Haiku/home/tmate&gt; ./tmate<font></font>
runtime_loader: /boot/system/lib/libssh.so.4.7.2: Could not resolve symbol '__stack_chk_guard'<font></font>
resolve symbol "__stack_chk_guard" returned: -2147478780<font></font>
runtime_loader: /boot/system/lib/libssh.so.4.7.2: Troubles relocating: Symbol not found</code></pre><br>
<p> ,   .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>.   <code>-lssp</code> "" , :</p><br>
<pre><code class="plaintext hljs">/Haiku/home/tmate&gt; ./configure LDFLAGS="-lbsd -lssp"<font></font>
(...)/Haiku/home/tmate&gt; make<font></font>
(...)/Haiku/home/tmate&gt; ./tmate</code></pre><br>
<p> !  ! ...</p><br>
<pre><code class="plaintext hljs">[tmate] ssh.tmate.io lookup failure. Retrying in 2 seconds (non-recoverable failure in name resolution)</code></pre><br>
<p> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>:</p><br>
<pre><code class="plaintext hljs">/Haiku/home/tmate&gt; strace -f ./tmate &gt;log 2&gt;&amp;1</code></pre><br>
<p>"Bad port ID" —     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>. , - ,   ,    ?  ,   .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">GitHub</a>.</p><br>
<h2 id="portirovanie-gui-prilozheniya-na-qt"> GUI   Qt.</h2><br>
<p>   QML.</p><br>
<pre><code class="plaintext hljs">/&gt; cd /Haiku/home//Haiku/home&gt; git clone https://github.com/probonopd/QtQuickApp<font></font>
/Haiku/home/QtQuickApp&gt; qmake .<font></font>
/Haiku/home/QtQuickApp&gt; make<font></font>
/Haiku/home/QtQuickApp&gt; ./QtQuickApp # Works!</code></pre><br>
<p> .  !</p><br>
<h2 id="upakovka-prilozheniy-v-hpkg-ispolzuya-haikuporter-i-haikuports">   hpkg  haikuporter  haikuports.</h2><br>
<p>   ?   ,    #haiku  irc.freenode.net  :</p><br>
<ul>
<li> <code>package</code> —    .      PackageInfo,     "Making it into a proper .hpkg package"</li>
<li>   - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a></li>
<li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">hpkg-creator</a> (  , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>)</li>
</ul><br>
<p>,  . ,        ", !",   — .         HaikuPorter,    GNU hello.</p><br>
<p> :</p><br>
<blockquote><code>haikuporter</code>         Haiku.    HaikuPorts      .      haikuporter.</blockquote><p> , :</p><br>
<blockquote>      HaikuPorts.     ,    ,    haikuporter  .</blockquote><p>  ,    —        .      .</p><br>
<h3 id="ustanovka-haikuporter-i-haikuports"> haikuporter  haikuports</h3><br>
<pre><code class="plaintext hljs">cd /boot/home/<font></font>
git clone https://github.com/haikuports/haikuporter --depth=50<font></font>
git clone https://github.com/haikuports/haikuports --depth=50<font></font>
ln -s /boot/home/haikuporter/haikuporter /boot/home/config/non-packaged/bin/ # make it runnable from anywhere<font></font>
cd haikuporter<font></font>
cp haikuports-sample.conf /boot/home/config/settings/haikuports.conf<font></font>
sed -i -e 's|/mydisk/haikuports|/boot/home/haikuports|g' /boot/home/config/settings/haikuports.conf</code></pre><br>
<h3 id="napisanie-recepta"> </h3><br>
<pre><code class="plaintext hljs">SUMMARY="Demo QtQuick application"<font></font>
DESCRIPTION="QtQuickApp is a demo QtQuick application for testing Haiku porting and packaging"<font></font>
HOMEPAGE="https://github.com/probonopd/QtQuickApp"<font></font>
COPYRIGHT="None"<font></font>
LICENSE="MIT"<font></font>
REVISION="1"<font></font>
SOURCE_URI="https://github.com/probonopd/QtQuickApp.git"<font></font>
#PATCHES=""<font></font>
ARCHITECTURES="x86_64"<font></font>
PROVIDES="<font></font>
    QtQuickApp = $portVersion<font></font>
"<font></font>
REQUIRES="<font></font>
    haiku<font></font>
"<font></font>
BUILD_REQUIRES="<font></font>
    haiku_devel<font></font>
    cmd:qmake<font></font>
"BUILD()<font></font>
{<font></font>
    qmake .<font></font>
    make $jobArgs<font></font>
}INSTALL()<font></font>
{<font></font>
    make install<font></font>
}</code></pre><br>
<h3 id="sborka-recepta"> </h3><br>
<p>    <code>QtQuickApp-1.0.recipe</code>,    <code>aikuporter -S ./QuickApp-1.0.recipe</code>.        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">haikuports</a>,    . -  .</p><br>
<p>           ,      1   ?</p><br>
<p> mr. waddlesplash:</p><br>
<blockquote> ,        ;)    ,    ,  ,       .</blockquote><br>
<pre><code class="plaintext hljs">~/QtQuickApp&gt; haikuporter  QtQuickApp-1.0.recipe<font></font>
Checking if any dependency-infos need to be updated ...<font></font>
Looking for stale dependency-infos ...<font></font>
Error: QtQuickApp not found in repository</code></pre><br>
<p>,     ,       .        HaikuPorts.</p><br>
<pre><code class="plaintext hljs">~/QtQuickApp&gt; mv QtQuickApp-1.0.recipe ../haikuports/app-misc/QtQuickApp/<font></font>
~/QtQuickApp&gt; ../haikuport<font></font>
~/QtQuickApp&gt; haikuporter -S QtQuickApp-1.0.recipe</code></pre><br>
<p>     .     ,  ,    , ,   ,         HaikuPorts.</p><br>
<p> :</p><br>
<pre><code class="plaintext hljs">~/QtQuickApp&gt; haikuporter -S QtQuickApp-1.0.recipe<font></font>
Checking if any dependency-infos need to be updated ...<font></font>
        updating dependency infos of QtQuickApp-1.0<font></font>
Looking for stale dependency-infos ...<font></font>
Error: QtQuickApp-1.0.recipe not found in tree.</code></pre><br>
<p>  ?   irc :</p><br>
<pre><code class="plaintext hljs">~/QtQuickApp&gt; haikuporter -S QtQuickApp<font></font>
Checking if any dependency-infos need to be updated ...<font></font>
        updating dependency infos of QtQuickApp-1.0<font></font>
Looking for stale dependency-infos ...<font></font>
----------------------------------------------------------------------<font></font>
app-misc::QtQuickApp-1.0<font></font>
        /boot/home/haikuports/app-misc/QtQuickApp/QtQuickApp-1.0.recipe<font></font>
----------------------------------------------------------------------Downloading: https://github.com/probonopd/QtQuickApp.git ...<font></font>
--2019-07-14 16:12:44--  https://github.com/probonopd/QtQuickApp.git<font></font>
Resolving github.com... 140.82.118.3<font></font>
Connecting to github.com|140.82.118.3|:443... connected.<font></font>
HTTP request sent, awaiting response... 301 Moved Permanently<font></font>
Location: https://github.com/probonopd/QtQuickApp [following]<font></font>
--2019-07-14 16:12:45--  https://github.com/probonopd/QtQuickApp<font></font>
Reusing existing connection to github.com:443.<font></font>
HTTP request sent, awaiting response... 200 OK<font></font>
Length: unspecified [text/html]<font></font>
Saving to: ‘/boot/home/haikuports/app-misc/QtQuickApp/download/QtQuickApp.git’<font></font>
     0K .                                                     1.34M=0.06s<font></font>
2019-07-14 16:12:45 (1.34 MB/s) - ‘/boot/home/haikuports/app-misc/QtQuickApp/download/QtQuickApp.git’ saved [90094]<font></font>
Validating checksum of QtQuickApp.git<font></font>
Warning: ----- CHECKSUM TEMPLATE -----<font></font>
Warning: CHECKSUM_SHA256="cf906a65442748c95df16730c66307a46d02ab3a12137f89076ec7018d8ce18c"<font></font>
Warning: -----------------------------<font></font>
Error: No checksum found in recipe!</code></pre><br>
<p>  .        —      git commit   ? ( : «  .   ,    ").</p><br>
<p>    :</p><br>
<pre><code class="plaintext hljs">CHECKSUM_SHA256="cf906a65442748c95df16730c66307a46d02ab3a12137f89076ec7018d8ce18c"</code></pre><br>
<p>   :</p><br>
<pre><code class="plaintext hljs">~/QtQuickApp&gt; haikuporter -S QtQuickApp<font></font>
Checking if any dependency-infos need to be updated ...<font></font>
        updating dependency infos of QtQuickApp-1.0<font></font>
Looking for stale dependency-infos ...<font></font>
----------------------------------------------------------------------<font></font>
app-misc::QtQuickApp-1.0<font></font>
        /boot/home/haikuports/app-misc/QtQuickApp/QtQuickApp-1.0.recipe<font></font>
----------------------------------------------------------------------<font></font>
Skipping download of source for QtQuickApp.git<font></font>
Validating checksum of QtQuickApp.git<font></font>
Unpacking source of QtQuickApp.git<font></font>
Error: Unrecognized archive type in file /boot/home/haikuports/app-misc/QtQuickApp/download/QtQuickApp.git</code></pre><br>
<p>  ?    git,    ,  .    ,       ,    ,    url  GitHub.</p><br>
<p>  uri git://</p><br>
<pre><code class="plaintext hljs">SOURCE_URI="git://github.com/probonopd/QtQuickApp.git"</code></pre><br>
<p>   :</p><br>
<pre><code class="plaintext hljs">Downloading: git://github.com/probonopd/QtQuickApp.git ...<font></font>
Error: Downloading from unsafe sources is disabled in haikuports.conf!</code></pre><br>
<p>,     ,   " "?          -   GitHub.    ,   ,   ,      "".</p><br>
<p> ,  :</p><br>
<pre><code class="plaintext hljs">SOURCE_URI="git+https://github.com/probonopd/QtQuickApp.git"</code></pre><br>
<p>-.        , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a></p><br>
<pre><code class="plaintext hljs">sed -i -e 's|#ALLOW_UNSAFE_SOURCES|ALLOW_UNSAFE_SOURCES|g' /boot/home/config/settings/haikuports.conf</code></pre><br>
<p>  ,       (GitHub-  !)      -.</p><br>
<p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">mr. waddlesplash</a>:</p><br>
<blockquote> ,         .    —    ,  , ,    ,    , ..     .     "" git   VCS.     ,     GitHub     .    , ,       … (        HaikuPorts).</blockquote><br>
<pre><code class="plaintext hljs">~/QtQuickApp&gt; haikuporter -S QtQuickApp<font></font>
Checking if any dependency-infos need to be updated ...<font></font>
Looking for stale dependency-infos ...<font></font>
----------------------------------------------------------------------<font></font>
app-misc::QtQuickApp-1.0<font></font>
        /boot/home/haikuports/app-misc/QtQuickApp/QtQuickApp-1.0.recipe<font></font>
----------------------------------------------------------------------Downloading: git+https://github.com/probonopd/QtQuickApp.git ...<font></font>
Warning: UNSAFE SOURCES ARE BAD AND SHOULD NOT BE USED IN PRODUCTION<font></font>
Warning: PLEASE MOVE TO A STATIC ARCHIVE DOWNLOAD WITH CHECKSUM ASAP!<font></font>
Cloning into bare repository '/boot/home/haikuports/app-misc/QtQuickApp/download/QtQuickApp.git'...<font></font>
Unpacking source of QtQuickApp.git<font></font>
tar: /boot/home/haikuports/app-misc/QtQuickApp/work-1.0/sources/QtQuickApp-1.0: Cannot open: No such file or directory<font></font>
tar: Error is not recoverable: exiting now<font></font>
Command 'git archive HEAD | tar -x -C "/boot/home/haikuports/app-misc/QtQuickApp/work-1.0/sources/QtQuickApp-1.0"' returned non-zero exit status 2</code></pre><br>
<p>         #haiku   irc.freenode.net.     ?   ,   :</p><br>
<pre><code class="plaintext hljs">srcGitRev="d0769f53639eaffdcd070bddfb7113c04f2a0de8"<font></font>
SOURCE_URI="https://github.com/probonopd/QtQuickApp/archive/$srcGitRev.tar.gz"<font></font>
SOURCE_DIR="QtQuickApp-$srcGitRev"<font></font>
CHECKSUM_SHA256="db8ab861cfec0ca201e9c7b6c0c9e5e828cb4e9e69d98e3714ce0369ba9d9522"</code></pre><br>
<p>,      —      . ,    ,    ,  ,   —     -.</p><br>
<p>     :</p><br>
<blockquote>    CI,   ,     haikuports,     ,         "    upstream".</blockquote><p>!     :</p><br>
<pre><code class="plaintext hljs">waiting for build package QtQuickApp-1.0-1 to be activated<font></font>
waiting for build package QtQuickApp-1.0-1 to be activated<font></font>
waiting for build package QtQuickApp-1.0-1 to be activated<font></font>
waiting for build package QtQuickApp-1.0-1 to be activated<font></font>
waiting for build package QtQuickApp-1.0-1 to be activated<font></font>
(...)</code></pre><br>
<p>    . ,   ( ?   ).</p><br>
<p> <code>haikuporter</code>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">haikuports</a>    " ", ,  ,      Haiku  .       Open Build Service —      Linux:  ,   ,        "hello world".</p><br>
<p> ,  mr. waddlesplash:</p><br>
<blockquote>, HaikuPorter   - (   lint,    ,     !),   ,    ,   ,     .       ,     ,    ..  —     ,  ,  ,      (    avrdude,       ).           SO. HaikuPorter        ,      .</blockquote><p>         ,        "hello world".    - .</p><br>
<h2 id="sborka-prilozheniy-v-formate-hpkg-ispolzuya-komandu-package-create">    hpkg,   "package create"</h2><br>
<p> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>     ?</p><br>
<pre><code class="plaintext hljs">mkdir -p apps/<font></font>
cp QtQuickApp apps/cat &gt;  .PackageInfo &lt;&lt;\EOF<font></font>
name QtQuickApp<font></font>
version 1.0-1<font></font>
architecture x86_64<font></font>
<font></font>
summary "Demo QtQuick application"<font></font>
description "QtQuickApp is a demo QtQuick application for testing Haiku porting and packaging"<font></font>
<font></font>
packager "probono"<font></font>
vendor "probono"<font></font>
<font></font>
copyrights "probono"<font></font>
licenses "MIT"<font></font>
<font></font>
provides {<font></font>
  QtQuickApp = 1.0-1<font></font>
}requires {<font></font>
  qt5<font></font>
}<font></font>
EOFpackage create -b QtQuickApp.hpkg<font></font>
package add QtQuickApp.hpkg apps# See below if you also want the application<font></font>
# to appear in the menu</code></pre><br>
<p> ,  ,  .  ,   , !</p><br>
<h3 id="ustanovka---chto-i-kuda"> —   ?</h3><br>
<p>  QtQuickApp.hpkg  <code>~/config/packages</code>,   ,   QtQuickApp    <code>~/config/apps</code>.<br>
   ,   . , !</p><br>
<p>… (  !)</p><br>
<p>          QuickLaunch. ,  ,   .     QtQuickApp.hpkg  ~/config/packages  /system/packages.</p><br>
<p>-,   .   ,  (,  ) - .</p><br>
<p>  "Contents"  HaikuDepot      ,     <code>/data/mimedb/application/x-vnd...</code>   , <code>/data/deskbar/menu/Applications/…</code>.</p><br>
<p>,     ?  -…</p><br>
<pre><code class="plaintext hljs">mkdir -p data/deskbar/menu/Applications/<font></font>
( cd data/deskbar/menu/Applications ; ln -s ../../../../apps/QtQuickApp . )<font></font>
package add QtQuickApp.hpkg apps data</code></pre><br>
<p> ,    ,   :   ,    ? -    ,   —  .</p><br>
<p>  mr. waddlesplash:</p><br>
<blockquote>  ,    ,    .  , LegacyPackageInstaller    ,   .pkg   BeOS. ,    ,        .</blockquote><p> - ,     ,   <code>Hidden=true</code>   <code>.desktop</code>  Linux.     ""      ?</p><br>
<p>    —  () ,  , <code>deskbar</code>,    .</p><br>
<p>mr. waddlesplash    :</p><br>
<blockquote>"Deskbar"          (  ,  "taskbar",     Windows,     ).     <code>deskbar</code>,   "Deskbar",      .</blockquote><p><img src="https://habrastorage.org/webt/s5/sp/qp/s5spqpz73gwh2p13febjdlyor-g.png"><br>
<em>2 " "     </em></p><br>
<p>  2   ,       QtQuickApplication ,    — ? (    ,   ,      ).<br>
    ,     .</p><br>
<p> mr. waddlesplash</p><br>
<blockquote>  Apps  ,    .         ,    .</blockquote><p>,     ;)</p><br>
<p> :       <code>/system/apps</code>,      — . ,      ,       ?  ,     Mac OS X,    <code>.app</code>,        <code>/Applications</code>,    /System/Library/...```.</p><br>
<h3 id="chto-naschet-zavisimostey">  ?</h3><br>
<p>,  -  ,  ?    Qt    Haiku -? ! Qt    .           ELF?  ,  HaikuPorter    ,   <code>package</code> .  ,    " ",        <code>hpkg</code>.</p><br>
<p>   Haiku ,  ,          ,    <code>haikuports</code>? (   ,       —        ,   ,      ).</p><br>
<p>mr. waddlesplash :</p><br>
<blockquote>        ,  ,            (   ) —     .</blockquote><p>            -,    haikuports,       . ,  ,        . <em>[   AppImage? — . ]</em></p><br>
<h2 id="dobavlenie-ikonki-prilozheniya">  </h2><br>
<p>               ? ,   ,        .</p><br>
<h2 id="kak-organizovat-nepreryvnuyu-sborku-prilozheniy">    ?</h2><br>
<p>  ,  Inkscape (,   ,      Haiku,     ).       <code>https://gitlab.com/inkscape/inkscape</code>.<br>
 ,  -     ,   ,     , ,     ,  AppImage  Linux (  ,          ,  ,        <em>[   ! — . ]</em>).         ,     ,   ,     ,   .</p><br>
<p><img src="https://habrastorage.org/webt/3i/_m/aw/3i_mawposwtjhtn4r8jp6ce67yw.png"><br>
<em>               ( )</em></p><br>
<p>    Docker. GitLab   runners  Linux,     ,     runners (,   ,        Haiku, ,   ,   Docker  ,   FreeBSD   Docker,        Haiku).</p><br>
<p>      Haiku      Docker  Linux.      Haiku      .  ?     Haiku   Docker,  -  QEMU/KVM ( ,       Docker)? ,     . , Scribus   —     Haiku.   ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>      ,      Haiku.</p><br>
<p>   :</p><br>
<blockquote>  ,    ,    CMake/CPack.      ,      ,  ,      .  :       ,   haikuporter    , ,   ,     .           Linux       (Haiku      ).</blockquote><p> .   Linux         (,    ..),   ,   .    ,      Haiku  Linux —  .</p><br>
<h2 id="zaklyuchenie"></h2><br>
<p>  POSIX  Haiku ,     ,   .        ,        #haiku   irc.freenode.net.       ,   .</p><br>
<p>,   Qt, —  .        .</p><br>
<p>       ,    "  ", ..     ,     haikuports.    (    )  GitHub     .  Haiku     Linux,    Mc,     ""  XCode   <code>.app</code>,       <code>.dmg</code>,      .<br>
     "" ,  , Linux,    ,      ,       Haiku  ,   .</p><br>
<p> !   Haiku      DVD  USB,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>.             <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Etcher</a></p><br>
<p> ?     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">telegram-</a>.</p><br>
<p> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">      C  C++.   Haiku OS</a></p><br>
<p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a> :       Haiku.</p><br>
<p> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja463789/index.html">Swiftにおけるジェネリックの力。パート2</a></li>
<li><a href="../ja463791/index.html">アイアングリップ：ジオメトリと表面テクスチャに応じた鳥の着陸の運動学</a></li>
<li><a href="../ja463795/index.html">英語の意味の濃淡：動詞の使い方アドバイス、推奨、提案</a></li>
<li><a href="../ja463799/index.html">Windows 10で気に入らない点</a></li>
<li><a href="../ja463801/index.html">製品マネージャーを成功させるための3つの重要な要素：Anton Stozhko</a></li>
<li><a href="../ja463805/index.html">ゲームデザイナーになりたい人のための7冊</a></li>
<li><a href="../ja463811/index.html">Android Q用のアプリケーションの準備。パート1</a></li>
<li><a href="../ja463813/index.html">Mikrotik RouterOSでのマルチバンとルーティング</a></li>
<li><a href="../ja463815/index.html">なぜ外資系銀行が資金源に関心を持っているのですか？</a></li>
<li><a href="../ja463817/index.html">20人の製品マネージャーと、すべての中で最も多次元のマトリックス構造。スカイエンとの会話</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>