<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔍 🎗️ 🤰 YoutubeやInstagramのように：Pythonアプリケーションの国際化とローカリゼーション 💼 🌰 ☝🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pythonは、YouTube、Instagram、Pinterestなどの世界的に有名なアプリケーションの中核です。グローバル市場で前進するためには、アプリケーションはローカリゼーション、つまり特定の国の特性への適応、および国際化-コンテンツの翻訳を必要とします。この記事では、翻訳の自動化をスピー...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>YoutubeやInstagramのように：Pythonアプリケーションの国際化とローカリゼーション</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/simbirsoft/blog/479738/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonは、YouTube、Instagram、Pinterestなどの世界的に有名なアプリケーションの中核です。</font><font style="vertical-align: inherit;">グローバル市場で前進するためには、アプリケーションはローカリゼーション、つまり特定の国の特性への適応、および国際化-コンテンツの翻訳を必要とします。</font><font style="vertical-align: inherit;">この記事では、翻訳の自動化をスピードアップし、この領域のいくつかの典型的な問題を解決する方法についての経験を共有します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pj/ju/ug/pjjuugy6izlwm2of_m-qwzrkogm.jpeg"><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、国際化（i18n）Pythonアプリケーションの短いガイドです。</font><font style="vertical-align: inherit;">このガイドは、Python開発の経験を持つすべてのプログラマにとって興味深いものです。</font><font style="vertical-align: inherit;">記事を読むには10〜15分かかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Python言語に含まれている十分にテストされたgettextツールを使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、国際化とは何かを理解します。</font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">国際化（I18N）</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、アプリケーションを、それが開発された国以外のさまざまな国や地域の言語に適応させるプロセスです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、より広い概念もあります。</font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ローカリゼーション（L10N）</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、特定のロケールに固有のコンポーネントを追加してテキストを翻訳することにより、国際化されたアプリケーションを特定の地域または言語に適応させるプロセスです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ローカリゼーションとは翻訳を意味します： </font></font><br>
<br>
<ul>
<li>   ;</li>
<li> ;</li>
<li> ;</li>
<li>;</li>
<li> ;</li>
<li> / ;</li>
<li>   ;</li>
<li> , ;</li>
<li> ;</li>
<li>  .</li>
</ul><br>
<img src="https://habrastorage.org/webt/qn/iu/pp/qniuppyynx8jszhbt21l9xllxuw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ローカリゼーションは、コンテンツを別の言語に翻訳するだけではありません。注意が必要な文化的および機能的パラメーターがあります。たとえば、北米の日付形式はMM / DD / YYYYですが、ほとんどのアジアの国ではDD / MM / YYYYと表記されています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uf/rg/pd/ufrgpdvzppo4v91mpmwcwkoeoli.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションの翻訳時のエラーのよく知られた例</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
別の例は、アプリケーションでの名前の表示に関連しています。米国では、名前で誰かに電話をかけることは受け入れられ、さらに望ましいことですが、クライアントがログインするとすぐに、クライアントの名前がヘッダーに表示されます。ただし、日本ではその逆が当てはまります。名前で誰かに電話をかけることは失礼であり、攻撃的ですらあります。ローカライゼーションではこれを考慮し、日本人の視聴者の名前を使用しないでください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、国際化のみを考慮しますが、ローカリゼーションメカニズムは同様の方法で構築されます。</font><font style="vertical-align: inherit;">この記事で説明するライブラリは、アプリケーションのローカリゼーションをサポートしています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主なタイプ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
国際化は次のように分かれています。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonスクリプトでのデータの直接変換。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テンプレートエンジンでのデータの変換。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースに保存されたデータの翻訳。</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Pythonスクリプトデータの翻訳</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの国際化が機能するためには、販売用およびそれ以降のプロジェクトのアセンブリを管理するためのbabelライブラリとdistutilsツールキットを理解する必要があります。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳準備</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、翻訳のリストを作成する必要があります。まず、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Babel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリをインストールします。</font><font style="vertical-align: inherit;">これは、日付、通貨をローカライズおよび変換するための一般に認められているpythonライブラリで、プロジェクトの構築に便利な追加機能を備えています（以下で説明します）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pythonは、多言語対応のためのツールキット-gettextを提供します。 GNU gettextは実際には、多言語メッセージで他のプログラミング言語をサポートするユニバーサルローカリゼーションソリューションです。 Gettextは、多くのプログラミング言語だけでなく、オペレーティングシステムの翻訳でも使用されています。これは、十分にテストされた、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で自由に配布できるソフトウェアです</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
翻訳を機能させるには、gettextモジュールをインポートし、翻訳を含むスクリプトを入力に渡す必要があります。</font><font style="vertical-align: inherit;">最初に、すべての翻訳可能な文字列を特別な関数_（ 'some_text'）でマークします。</font><font style="vertical-align: inherit;">プロジェクトでのこの関数の呼び出しは次のようになります。</font></font><br>
<br>
<pre><code class="php hljs">import gettext<font></font>
import os<font></font>
<font></font>
localedir = os.path.join(os.path.abspath(<span class="hljs-string">'/path/to/locales'</span>), <span class="hljs-string">'locales'</span>)<font></font>
translate = gettext.translation(<span class="hljs-string">'domain_name'</span>, localedir, [<span class="hljs-string">'ru'</span>])<font></font>
_ = translate.gettext<font></font>
<font></font>
<span class="hljs-keyword">print</span>(_(<span class="hljs-string">'some_text'</span>))
<span class="hljs-keyword">print</span>(_(<span class="hljs-string">'some_text_2'</span>))
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
小さなコードで、翻訳されたフレーズのソースとして 'locales'ディレクトリを使用する国際化オブジェクトを作成します。</font><font style="vertical-align: inherit;">'locales'ディレクトリはまだ作成されていませんが、アプリケーションが実行時に翻訳を検索するのはその中です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡潔にするために、translate.gettext関数を以下では_と表記します。</font><font style="vertical-align: inherit;">アンダースコアはこの関数の一般的な名前で、Pythonコミュニティによって認識されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
_（）関数は、翻訳する行をマークします。 gettextモジュールには、文字列マーカー_（）をコードで解析して、ポータブルオブジェクトテンプレート（pot-file）を形成するxgettextツールが付属しています。 pot-fileを作成するために、インストールされているBabelライブラリに戻りましょう。このライブラリには、国際化をサポートする多くの機能があります。 Babelは、標準のpython distutilsライブラリまたは任意のサードパーティのsetuptoolsパッケージを使用して記述できるsetup.pyビルドスクリプトを拡張します。 Pythonモジュールのアセンブリは、記事の範囲を超えてい</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この問題の詳細については、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ドキュメントを</font></a><font style="vertical-align: inherit;">ご覧ください</font><font style="vertical-align: inherit;">。必要なのは、次の内容のsetup.pyファイルを作成することだけです。</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">from</span> babel.messages import frontend <span class="hljs-keyword">as</span> babel
<span class="hljs-keyword">from</span> distutils.core import setup<font></font>
<font></font>
setup(name=<span class="hljs-string">'foo'</span>,<font></font>
      version=<span class="hljs-string">'1.0'</span>,<font></font>
      cmdclass = {<span class="hljs-string">'extract_messages'</span>: babel.extract_messages,
                  <span class="hljs-string">'init_catalog'</span>: babel.init_catalog,
                  <span class="hljs-string">'update_catalog'</span>: babel.update_catalog,
                  <span class="hljs-string">'compile_catalog'</span>: babel.compile_catalog,}<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、プロジェクトを構築するための指示を作成し、バベルライブラリから4つの国際化チームを追加しました。</font><font style="vertical-align: inherit;">これらのコマンドを使用順に詳細に検討してください。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extract_messages</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
このコマンドは、GNU xgettextツールのラッパーであり、翻訳可能なタグを_（）で解析してpotファイルに変換します。</font><font style="vertical-align: inherit;">実行するには、アセンブリのいくつかの設定が必要です。</font><font style="vertical-align: inherit;">これを行うには、ルートディレクトリで、内容を含むsetup.cfgファイルを作成します。</font></font><br>
<br>
<pre><code class="php hljs">[extract_messages]<font></font>
input_dirs = foobar<font></font>
output_file = foobar/locales/messages.pot</code></pre><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">input_dirs-_（）コード内のすべてのラベルが翻訳用に選択されるディレクトリの名前。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">output_file-結果の.potファイルのパス</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンドを実行するには、コンソールで実行します。</font></font><br>
<br>
<pre><code class="php hljs">$ python setup.py extract_messages </code></pre><br>
<br>
<pre><code class="php hljs">running extract_messages<font></font>
extracting messages <span class="hljs-keyword">from</span> foobar/__init__.py<font></font>
extracting messages <span class="hljs-keyword">from</span> foobar/core.py<font></font>
...<font></font>
writing PO template file to foobar/locales/messages.pot</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポットファイルでは、マークされた行がリストに収集され、そこから翻訳者は希望する各言語の翻訳を作成できます。</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-comment"># SOME DESCRIPTIVE TITLE.</span>
<span class="hljs-comment"># Copyright (C) YEAR ORGANIZATION</span>
<span class="hljs-comment"># FIRST AUTHOR &lt;EMAIL@ADDRESS&gt;, YEAR.</span>
<span class="hljs-comment">#</span>
msgid <span class="hljs-string">""</span>
msgstr <span class="hljs-string">""</span>
<span class="hljs-string">"Project-Id-Version: PACKAGE VERSION\n"</span>
<span class="hljs-string">"POT-Creation-Date: 2018-01-28 16:47+0000\n"</span>
<span class="hljs-string">"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"</span>
<span class="hljs-string">"Last-Translator: FULL NAME &lt;EMAIL@ADDRESS&gt;\n"</span>
<span class="hljs-string">"Language-Team: LANGUAGE &lt;LL@li.org&gt;\n"</span>
<span class="hljs-string">"MIME-Version: 1.0\n"</span>
<span class="hljs-string">"Content-Type: text/plain; charset=UTF-8\n"</span>
<span class="hljs-string">"Content-Transfer-Encoding: 8bit\n"</span>
<span class="hljs-string">"Generated-By: pygettext.py 1.5\n"</span><font></font>
<font></font>
<font></font>
<span class="hljs-comment">#: src/main.py:5</span>
msgid <span class="hljs-string">"some_text"</span>
msgstr <span class="hljs-string">""</span><font></font>
<font></font>
<span class="hljs-comment">#: src/main.py:6</span>
msgid <span class="hljs-string">"some_text_2"</span>
msgstr <span class="hljs-string">""</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、いくつかの言語の翻訳を作成する必要があります。これを行うには、次のbabelコマンドを使用します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">init_catalog</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
このコマンドは、GNU msginitツールのラッパーで、potファイルに基づいて新しい変換ディレクトリを作成します。</font></font><br>
<br>
<pre><code class="php hljs">$ python setup.py init_catalog -l en -i foobar/locales/messages.pot \<font></font>
-o foobar/locales/en/LC_MESSAGES/base.po</code></pre><br>
<pre><code class="php hljs">running init_catalog<font></font>
creating catalog <span class="hljs-string">'foobar/locales/en/LC_MESSAGES/messages.po'</span> based on <span class="hljs-string">'foobar/locales/messages.pot'</span></code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要！</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ローカリゼーションファイルは、規則に従って特定の方法で格納されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロケール// LC_MESSAGES / .po- </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 特定の言語に翻訳されたディレクトリ。特定の言語への翻訳だけでなく、追加機能を考慮したディレクトリもあります。たとえば、米国の英語の翻訳はen_USです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -翻訳のあるドメイン。アプリケーションが大きくなると、1つのファイルが過負荷にならないように、翻訳がドメインに分割されます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update_catalog</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
このコマンドは、GNU msgmergeツールのラッパーで、* .poファイルの既存の変換ディレクトリを更新します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しい翻訳を追加するときは、次のコマンドを実行するだけです。</font></font><br>
<br>
<pre><code class="php hljs">$ python setup.py update_catalog -l en -i foobar/locales/messages.pot \<font></font>
                            -o foobar/locales/en/LC_MESSAGES/base.po</code></pre><br>
<pre><code class="php hljs">running update_catalog<font></font>
updating catalog <span class="hljs-string">'foobar/locales/en/LC_MESSAGES/base.po'</span> based on <span class="hljs-string">'foobar/locales/messages.pot'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
enの代わりにruを指定して、ロシア語のローカリゼーションを指定することもできます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compile_catalog</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
最後のコマンドは、GNU msgfmtツールのラッパーです。 * .poファイルから翻訳可能なメッセージを受け取り、それらをバイナリ* .moファイルにコンパイルして、パフォーマンスを最適化します。</font></font><br>
<br>
<pre><code class="php hljs">$ python setup.py compile_catalog --<span class="hljs-built_in">directory</span> foobar/locales --domain base
</code></pre><br>
<pre><code class="php hljs">running compile_catalog<font></font>
compiling catalog to foobar/locales/en/LC_MESSAGES/base.mo<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
--directory-ローカライズされたディレクトリへのパス、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-domain-翻訳ドメインを指定するフラグ、既存のアプリケーションドメインに従って指定します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pythonスクリプトは、最適化された* .mo変換でのみ機能します。したがって、変更を加えてアプリケーションに表示されるようにするには、ローカリゼーションを使用してファイルを再コンパイルする必要があります。翻訳ファイルを操作するには、poeditアプリケーションを使用できます。これは、すべてのオペレーティングシステムで使用でき、自由に配布できるソフトウェアです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4_/x5/iy/4_x5iyrgxqxdw_qxlucmagupbt0.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">poedit-</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
翻訳を操作</font><i><font style="vertical-align: inherit;">するためのアプリケーション</font></i><font style="vertical-align: inherit;">各翻訳は個別の行として表示され、便利です。翻訳の作業が完了すると、変更を保存するときに、すべての変更を含む* .moバイナリファイルが自動的にコンパイルされます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、翻訳カタログの構造は次のようになります。</font></font><br>
<br>
<pre><code class="php hljs">locales<font></font>
├── en<font></font>
│   └── LC_MESSAGES<font></font>
│   	├── base.mo<font></font>
│   	└── base.po<font></font>
├── ru<font></font>
│   └── LC_MESSAGES<font></font>
│   	├── base.mo<font></font>
│   	└── base.po<font></font>
└── messages.pot</code></pre><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳トークンの慣例名</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
poファイルはテキスト翻訳を含み、共通の名前を持つファイルに論理的に結合されます。これらのグループはドメインと呼ばれます。上記の例では、baseという名前のドメインが1つだけあります。大規模なアプリケーションでは、より多くのドメインが存在し、アプリケーションの構造を考慮して変換リストを作成する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
翻訳の混乱を防ぐため、翻訳マーカーの名前の統一性を維持する必要があります。たとえば、私たちは、ユーザー・プロファイル・ページ上のユーザーデータの保存とフォーム持って</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">profile.user_form.component.title：利用者データ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
profile.user_form.component.save：保存</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
profile.user_form.field.username：ユーザー名</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
profile.user_form.fieldを。パスワード：</font></font><br>
</i><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">アプリケーション配備</font></b><i><font style="vertical-align: inherit;">パスワード</font></i></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションをdockerにデプロイしてデプロイするには、次のコマンドを使用して、翻訳ファイルをバイナリ* .moファイルにコンパイルする必要があります。</font></font><br>
<br>
<pre><code class="php hljs">$ python setup.py compile_catalog --domain &lt;&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
.gitignoreで* .moおよび* .potファイルを除外することをお勧めします。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">＃翻訳</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* .mo </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* .pot</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.テンプレートエンジンでのデータの変換</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テンプレート化のローカリゼーションにより、すべてが少し簡単になります。</font><font style="vertical-align: inherit;">最も人気のあるpythonテンプレートエンジン-ジンジャを考えてみましょう。</font><font style="vertical-align: inherit;">このテンプレートエンジンには、アドオンによるgettext-localizationのサポートがすでに実装されています。</font><font style="vertical-align: inherit;">アドオンをアクティブ化するには、Environmentコンストラクターでアドオンモジュールへのパスを指定する必要があります。</font><font style="vertical-align: inherit;">多言語プラットフォームの場合、翻訳を1回ダウンロードし、アプリケーションの初期化中に翻訳オブジェクトをEnvironmentオブジェクトに追加する必要があります。</font></font><br>
<br>
<pre><code class="php hljs">translations = get_gettext_translations()<font></font>
env = Environment(extensions=[<span class="hljs-string">'jinja2.ext.i18n'</span>])<font></font>
env.install_gettext_translations(translations)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、テンプレートでは構成だけを使用します。</font></font><br>
<br>
<pre><code class="php hljs">{{ gettext(<span class="hljs-string">'some_text'</span>) }}<font></font>
{{ gettext(<span class="hljs-string">'Hello %(name)s!'</span>)|format(name=<span class="hljs-string">'World'</span>) }}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.データベースに保存されているデータの翻訳</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も一般的なリレーショナルデータベースで翻訳を操作するためのオプションを検討してみましょう。</font><font style="vertical-align: inherit;">noSQLデータベースとnewSQLデータベースの翻訳とローカリゼーションの実装は似ていることに注意してください。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注：</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各言語の翻訳が個別の列に格納されている場合は考慮しません。</font><font style="vertical-align: inherit;">このような実装では、アプリケーションのサポートがさらに拡張され、スケーリングの制限やその他のリスクが伴います。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）言語ごとに別々の行</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアプローチでは、言語ごとに、行の特定の言語への翻訳は、language_codeなどの列の値に基づきます。</font><font style="vertical-align: inherit;">値enがこの列にある場合、翻訳されたすべての値は、指定された国と地域を参照する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/di/vv/b_/divvb_ulaekslblbgv98taqsncg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
説明したスキームの場合、表のデータは次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ds/kx/cx/dskxcx_ffmnvcv97yus9d10q_bq.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">利点：</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シンプルで効率的な実装。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定の言語コードを使用する場合の簡単なクエリ。</font></font></li>
</ul><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不利益：</font></font></b><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一元化の欠如</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
異なる言語への翻訳は、異なるテーブルに保存できます。</font><font style="vertical-align: inherit;">したがって、アプリケーションが完全に翻訳された言語の数はわかりません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このソリューションは、最初はすべてのデータの完全な国際化を必要としないアプリケーションに適しています。</font><font style="vertical-align: inherit;">ただし、ビジネスの拡大に応じて、新しい地域の翻訳を追加することは可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データ要求は次のようになります。</font></font><br>
<br>
<pre><code class="php hljs">SELECT p.product_name,<font></font>
       p.price,<font></font>
       p.description<font></font>
<span class="hljs-keyword">FROM</span> product p<font></font>
	WHERE p.language_code = @language_code;</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2）翻訳付きの個別のテーブル</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアプローチでは、ローカライズが必要な各テーブルについて、翻訳を含むテーブルを作成します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yr/_i/ro/yr_iror7tyoqltdgao6fua4ambo.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">長所：</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳されていないデータのテーブルを結合する必要はありません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳用の個別のテーブルがあるため、クエリが簡単になります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データに不一致はありません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳に加えて、言語テーブルの残りのデータを効果的にローカライズすることが可能です。</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不利益：</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大規模なアプリケーションでは、変換テーブルが肥大化し、速度が低下します。</font><font style="vertical-align: inherit;">アプリケーションを最適化する場合、データ移行を個別のテーブルに実装する必要があります。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データ要求は次のようになります。</font></font><br>
<br>
<pre><code class="php hljs">SELECT tp.text,<font></font>
        p.price,<font></font>
       tc.text,<font></font>
        c.contact_name<font></font>
<span class="hljs-keyword">FROM</span> order_line o, product p, customer c, translation tp, <font></font>
     translation tc, language l<font></font>
	WHERE o.product_id = p.id <font></font>
            <span class="hljs-keyword">AND</span> o.customer_id = c.id
   	      <span class="hljs-keyword">AND</span> p.name_translation_id = tp.id
  	      <span class="hljs-keyword">AND</span> c.name_translation_id = tc.id
            <span class="hljs-keyword">AND</span> tp.language_id = l.id
            <span class="hljs-keyword">AND</span> tc.language_id = l.id
            <span class="hljs-keyword">AND</span> l.name = @language_code
	<span class="hljs-keyword">AND</span> o.id = ***;</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3）翻訳および非翻訳フィールドのエンティティの作成</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このソリューションでは、1つ以上の翻訳済みフィールドを含むエンティティテーブルが、未翻訳のフィールドでデータを展開します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ox/vv/dw/oxvvdwlufgyhcks2akl7vf5-mqk.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">長所：</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変換テーブルを、変換を必要としないデータを含むテーブルと組み合わせる必要はありません。</font><font style="vertical-align: inherit;">したがって、そのようなデータをサンプリングすると、パフォーマンスが向上します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ORMクエリを書くのは簡単です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳されたテキストを取得する単純なSQLクエリ、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">利用可能なすべての言語への特定のデータの翻訳をサポートすることは簡単です。</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不利益：</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装の相対的な複雑さ。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、翻訳されたテキストを取得するクエリの例を示します。</font></font><br>
<br>
<pre><code class="php hljs">SELECT pt.product_name, pt.description, p.price
<span class="hljs-keyword">FROM</span> order_line o, product p, product_translation pt, language l<font></font>
	WHERE o.product_id = p.id <span class="hljs-keyword">AND</span> 
	<span class="hljs-keyword">AND</span> p.id = pt.product_non_trans_id
	<span class="hljs-keyword">AND</span> pt.language_id = l.id
      <span class="hljs-keyword">AND</span> l.name = @language_code;
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">調査結果</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションを国際市場向けにローカライズおよび国際化する場合、さまざまな方法を使用できますが、それぞれに特定の機能と制限があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、次のタイプの国際化について検討しました。</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コードで：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> GUI </font><b><font style="vertical-align: inherit;">を</font></b><font style="vertical-align: inherit;">使用してサービスまたはアプリケーションを作成するときに翻訳</font><b><font style="vertical-align: inherit;">を</font></b><font style="vertical-align: inherit;">使用します。</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テンプレート内：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">動的フロントエンドなしでWebアプリケーションを開発するときに使用します。</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベース内：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーまたは動的に生成されたデータを格納するときに使用します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの記事があなたのプロジェクトに最も適した方法を選択するのに役立つことを願っています。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja479724/index.html">Truハッカーは終わった</a></li>
<li><a href="../ja479726/index.html">Vladimir aka wowik：「OpenStreetMapには他のシステムでは実現できないアイデアが必要です」</a></li>
<li><a href="../ja479728/index.html">成功したスタートアップを組織する方法は？</a></li>
<li><a href="../ja479732/index.html">メモリリークとして他の何かを発行するのをやめる</a></li>
<li><a href="../ja479736/index.html">カメラまたはレーザー</a></li>
<li><a href="../ja479742/index.html">裏庭-マルチクラウドおよびハイブリッドインフラストラクチャ上の自動サービスメッシュ</a></li>
<li><a href="../ja479744/index.html">Pythonメモリ管理：メモリの断片化について少し</a></li>
<li><a href="../ja479746/index.html">エンタープライズソフトウェアは、従業員を涼しくします。それが必要ですか？</a></li>
<li><a href="../ja479748/index.html">パフォーマンスの向上、Goモジュールのサポートの強化などを備えたGoLand 2019.3</a></li>
<li><a href="../ja479750/index.html">2. Fortinet Getting Started v 6.0。ソリューションアーキテクチャ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>