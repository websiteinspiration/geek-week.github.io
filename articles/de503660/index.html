<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò≠ üôéüèø ‚òÆÔ∏è Testprojekte ohne Schmerzen. Yandex-Bericht üåÇ üë®üèΩ‚Äçüöí üë©‚Äçüé§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir im Yandex.Maps-Team f√ºr iOS erstellen Testprojekte mit einem kleinen Plugin f√ºr CocoaPods und mehreren Dienstprogrammklassen. Das Erstellen eines ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Testprojekte ohne Schmerzen. Yandex-Bericht</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/503660/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir im Yandex.Maps-Team f√ºr iOS erstellen Testprojekte mit einem kleinen Plugin f√ºr CocoaPods und mehreren Dienstprogrammklassen. </font><font style="vertical-align: inherit;">Das Erstellen eines Projekts ist schnell und zuverl√§ssig. </font><font style="vertical-align: inherit;">Aber vielleicht st√∂ren wir uns zu sehr und es ist nicht so schwierig, ein Projekt manuell mit den erforderlichen Einstellungen und Abh√§ngigkeiten zusammenzustellen? </font><font style="vertical-align: inherit;">In dem Bericht ging ich vom Gegenteil aus: Zuerst habe ich mir den manuellen Prozess angesehen, dann unseren.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/8iwkFkkV9es" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Zun√§chst ein kleiner Hintergrund. </font><font style="vertical-align: inherit;">Yandex.Maps werden l√§nger als eine Minute gesammelt. </font><font style="vertical-align: inherit;">Auf meinem Computer dauert das Erstellen der Anwendung etwas mehr als drei Minuten. </font><font style="vertical-align: inherit;">Wir entwickeln in Testprojekten, um weniger Zeit f√ºr jede Baugruppe aufzuwenden. </font><font style="vertical-align: inherit;">Wir haben genug Modularit√§t und f√ºr jedes Modul f√ºhren wir ein Testprojekt durch. </font><font style="vertical-align: inherit;">In diesem Testprojekt werden Funktionen entwickelt.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Erstellen eines Testprojekts dauert jetzt 15 Minuten bis eine Stunde. Dies liegt daran, dass das Projekt konfiguriert werden muss. Das hei√üt, Sie m√ºssen das Signieren konfigurieren, damit wir auf denselben Ger√§ten entwickeln k√∂nnen, wie wir es gewohnt sind. Es ist notwendig, die erforderlichen Bibliotheken zu konfigurieren. W√§hrend der Entwicklung des Features selbst kommen wir st√§ndig zur√ºck und beenden das Testprojekt, damit es unseren Anforderungen entspricht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Warum brauchen wir Testprojekte? So sparen Sie Zeit bei der Montage. Je kleiner das Projekt ist, desto schneller wird es zusammengestellt, desto h√§ufiger k√∂nnen wir unsere Anwendung auf dem Ger√§t starten und desto komfortabler ist die Entwicklung f√ºr uns. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zh/d_/rt/zhd_rt3d8t6ojvedwzffktuan7e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was soll im Testprojekt sein? Wir sollten in der Lage sein, unsere Anwendung auf denselben Ger√§ten zu starten, zu debuggen, auf denen wir unsere Hauptanwendung starten und debuggen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Projekt sollte so √§hnlich wie m√∂glich zum Hauptprojekt konfiguriert sein, damit beim √úbertragen von Features vom Testprojekt zum Hauptprojekt keine √úberraschung auftritt. </font><font style="vertical-align: inherit;">Oder zumindest die Anzahl der erhaltenen √úberraschungen auf ein Minimum reduziert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir ben√∂tigen au√üerdem eine minimale Umgebung im Testprojekt, damit wir keine Zeit damit verschwenden, UIWindows zu erstellen, Bibliotheken einzurichten, den Aufruf zum √ñffnen der Anwendung f√ºr die Bibliothek, die sich mit der Autorisierung befasst, zu √∂ffnen usw.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CocoaPods app_spec</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meine ganze Geschichte heute wird sich um die CocoaPods-Funktion namens app_spec drehen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pk/eb/xf/pkebxfc7kvhzsszibluqrljlkai.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
App_spec √§hnelt einer normalen Unterspezifikation, generiert jedoch kein Framework, das verbunden werden kann, sondern eine Anwendung, die auf dem Ger√§t gestartet werden kann. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ds/kj/67/dskj67urgk0wocvvue0rsaexelq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit CocoaPods k√∂nnen wir Info.plist und xcconfig sofort in app_spec verschieben. Dadurch k√∂nnen wir unser Projekt bereits recht gut einrichten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir jedoch in jeder pods_spec riesige W√∂rterb√ºcher mit Werten f√ºr Info.plist und xcconfig schreiben, werden wir selbst podspec erweitern und es wird unpraktisch sein, sie zu √§ndern. Wenn wir etwas √§ndern m√ºssen, m√ºssen wir in jede Podspec-Datei gehen und etwas mit Stiften bearbeiten. In jedem Fall ist dies unpraktisch.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t6/go/mf/t6gomf0wb3koti2mtcxnlsm36e8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dies zu beseitigen, haben wir ein sehr einfaches lokales Plugin f√ºr CocoaPods erstellt. Es passt sogar ganz in eine Folie. Und er macht das Einzige: Er gibt uns die DSL-Berechtigung CocoaPods, die app_spec mit bereits verstopften Werten in Info.plist und xcconfig erstellt. Auf diese Weise k√∂nnen wir bereits die Signatur konfigurieren und die wichtigen Dinge konfigurieren, die in unserem Testprojekt konfiguriert werden sollen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kk/7h/7w/kk7h7w7bl013cgrbwntjge0jjec.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Frage: Wie √ºbertrage ich den Pfad zu Berechtigungen, genauer gesagt, wo Berechtigungen gespeichert werden, damit wir den Pfad in Plug-Ins fest codieren k√∂nnen? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt zwei M√∂glichkeiten. Oder geben Sie den Pfad f√ºr eine Datei an, die sich einfach in unserem Repository befindet, z. B. zu den Berechtigungen des Hauptprojekts. Oder speichern Sie im Plugin eine spezielle Berechtigungsdatei f√ºr Testprojekte. Und kopieren Sie es mit demselben Plugin auf unseren Developmentpod.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/37/xo/jr/37xojrk1orzo5d_2nj1eu1tconi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben den ersten Weg gew√§hlt und hier hatten wir einige Schwierigkeiten. Tatsache ist, dass sich in unserem Repository Entwicklungspods in verschiedenen Unterordnern befinden. Daher k√∂nnen wir keinen relativen Pfad f√ºr sie vom Entwicklungspod zur Berechtigungsdatei angeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist wichtig zu betonen, dass Sie einen relativen Pfad angeben m√ºssen, da dieser Pfad in pods_spec verbleibt. Dies bedeutet, dass er an der Berechnung des Scheckbetrags teilnimmt, der in Podfile.lock gespeichert ist. Und wenn es einen absoluten Pfad gibt, wirkt sich dies auf den Scheckbetrag aus. Dies bedeutet, dass der Pr√ºfbetrag abh√§ngig davon variiert, von welchem ‚Äã‚ÄãOrdner aus $ pod install aufgerufen werden soll, von wo aus Sie das Repository haben und auf welchem ‚Äã‚ÄãComputer Sie $ pod install ausf√ºhren. Dies f√ºhrt im Allgemeinen zu Konflikten.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lo/ek/ng/loekngcf64nbbzuaaadwy3qmhl4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt werde ich eine weitere kleine Erweiterung desselben Plugins zeigen, mit der wir den relativen Pfad zu diesen Berechtigungen berechnen k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir kennen den relativen Pfad von unserem Plugin zur Datei mit den Berechtigungen, wenn sie sich im selben Repository befinden. </font><font style="vertical-align: inherit;">Und auch w√§hrend des Starts von $ pod install kennen wir den Weg zu unserem Developmentpod. </font><font style="vertical-align: inherit;">Die ganze Magie, die in diesem Code enthalten ist, ist eine hervorgehobene Linie, in der wir einfach den relativen Pfad z√§hlen und diese beiden absoluten Pfade kennen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ya/yg/1l/yayg1ll82qeeq2xg28xnfrm4i2g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was haben wir also bekommen, als wir app_spec bereits auf diese Weise konfiguriert hatten? </font><font style="vertical-align: inherit;">Wir k√∂nnen unser Testprojekt sofort auf denselben Ger√§ten ausf√ºhren. </font><font style="vertical-align: inherit;">Wir haben eine Vielzahl von Einstellungen, einschlie√ülich Berechtigungen, die wir ben√∂tigen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Umgebung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das n√§chste, wor√ºber ich sprechen m√∂chte, ist die Umgebung, die minimal notwendige Umgebung, die wir ben√∂tigen, um sofort mit dem Schreiben von Code zu beginnen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ui/f-/t2/uif-t2fox7l9twbo2isjpzcx_py.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserem Fall ben√∂tigen wir MapKit, das bereits konfiguriert ist und dessen Schl√ºssel √ºbertragen wurden, mit Anrufweiterleitung im AccountManager. Dies ist unsere Berechtigungsbibliothek. Sie muss auch Systemaufrufe ausl√∂sen, sie muss auch Schl√ºssel √ºbertragen, einschlie√ülich des √ñffnens der Anwendung als Referenz. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir ben√∂tigen au√üerdem einen Startbildschirm mit einer Karte und einem Navigationsstapel, damit wir denselben Navigationsstapel wie in Karten verwenden k√∂nnen und es einfacher ist, Funktionen aus dem Testprojekt auf das Hauptprojekt zu √ºbertragen. Und der Einstiegspunkt, damit wir ohne nachzudenken sofort mit dem Schreiben von n√ºtzlichem Code beginnen k√∂nnen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/l0/c_/jql0c_lfm6weosqqsvivxclmqro.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Ihrem Fall kann dies beispielsweise das Einrichten des Facebook SDK sein, in das Sie auch Schl√ºssel √ºbertragen m√ºssen. Ihre Bibliotheken f√ºr die Anmeldung, die Sie mit ziemlicher Sicherheit ben√∂tigen, um den Link zum √ñffnen der Anwendung zu √ºberspringen. Eine Art Start-Windows-Startcontroller und derselbe Einstiegspunkt zum Ausf√ºhren des Hauptskripts, das Sie in Ihrem Testprojekt entwickeln m√∂chten. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7u/6v/7o/7u6v7oxzg3dipiw2ztkcsub5ou8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie haben wir das gemacht? Durch Erstellen einer einzelnen AppDelegate-Vorlage. Dort initialisieren wir alle notwendigen Umgebungen, Bibliotheken. Wir leiten alle notwendigen Anrufe weiter, √ºbertragen die notwendigen Schl√ºssel. Beim Erstellen eines Testprojekts bleibt es uns √ºberlassen, ein neues AppDelegate f√ºr das Testprojekt zu erstellen und von der Vorlage zu erben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach √ºberschreiben wir die einzige Methode, die aufgerufen wird, nachdem die Vorlage AppDelegate alles Notwendige getan hat. </font><font style="vertical-align: inherit;">Und dort haben wir bereits den Start-ViewController und dar√ºber k√∂nnen wir unser Skript ausf√ºhren, das wir im Testprojekt debuggen m√∂chten.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">War / wurde</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie kann ich ein Testprojekt in der Stirn erstellen und wie kann ich es mit der heute beschriebenen Methode erstellen? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen eines Testprojekts in der Stirn: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Wir gehen zu Xcode und erstellen ein neues Projekt (Datei&gt; Neues Projekt). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Geben Sie den Namen ein, vorzugsweise ohne Fehler, und unterschreiben Sie die Bundle-ID. Wir bauen dieses Projekt auf. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- √Ñndern Sie die Version von Swift, √§ndern Sie die Zielversion. Wir versuchen, alles auf dem Ger√§t auszuf√ºhren, die Signatur zu bearbeiten und so weiter. Dies ist ein ziemlich trostloser Prozess. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Als n√§chstes erstellen wir eine Poddatei, verbinden dort Abh√§ngigkeiten und installieren Pods. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Danach beginnen wir sehr m√ºhsam und behutsam mit der Konfiguration unseres AppDelegate und √ºbertragen die Initialisierungselemente der ben√∂tigten Bibliotheken. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Erstellen Sie mit unserem ViewController ein Start-UIWindows</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und erst danach k√∂nnen wir den n√ºtzlichen Code starten. </font><font style="vertical-align: inherit;">Ziemlich unangenehmes Verfahren, stimme zu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie k√∂nnen wir ein Testprojekt mit den Best Practices erstellen, die ich im heutigen Bericht beschrieben habe? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Wir erstellen sample_app_spec mit der Erweiterung f√ºr CocoaPods, mit der wir begonnen haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Erstellen Sie ein AppDelegate und erben Sie es von der Vorlage AppDelegate. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach k√∂nnen wir mit dem Schreiben von n√ºtzlichem Code beginnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Erstellen eines Testprojekts auf diese Weise ist viel schneller und zuverl√§ssiger. </font><font style="vertical-align: inherit;">Wir werden definitiv keinen Fehler bei den Signatureinstellungen machen, wir werden definitiv keinen Fehler bei den Projekteinstellungen machen. </font><font style="vertical-align: inherit;">Das gesamte Umfeld, das f√ºr den Arbeitsbeginn erforderlich ist, kommt sofort auf uns zu.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kann es einfacher sein?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen eine Frage stellen - kann dies einfacher gemacht werden? Na sicher. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9e/t_/ux/9et_uxcpepiyc5iavhfehkqen-q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe drei Schwierigkeitsgrade identifiziert. Das erste ist, wor√ºber ich heute auf einmal gesprochen habe, als wir ein Plug-In f√ºr CocoaPods, das Pfade zu Berechtigungen reparieren kann, und eine Vorlage AppDelegate erstellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die zweite Methode ist ideal im Verh√§ltnis von Aufwand zu Gewinn. Es enth√§lt nur das Plugin f√ºr CocoaPods, das das erste in der heutigen Geschichte war. Das hei√üt, es ersetzt einfach die Werte in Info.plist und xcconfig. Es macht das Leben schon viel einfacher. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie Ihre Berechtigungsdatei in Ihren Testanwendungen nicht ben√∂tigen, wenn sich Ihre Testanwendungen stark voneinander unterscheiden und keine gemeinsamen Komponenten ben√∂tigen, ist diese Methode sehr gut f√ºr Sie geeignet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die dritte Methode ist die einfachste und erfordert keine Vorbereitung. Starten Sie einfach app_spec. Das aus app_spec generierte Projekt wird im selben Arbeitsbereich wie Ihr Hauptprojekt erstellt. Daher erbt es bereits Swift, die Zielversion und alle Einstellungen, die Sie in Workspace haben. Es wird f√ºr Sie viel einfacher sein, mit ihm zu arbeiten. Das ist alles, danke f√ºr Ihre Aufmerksamkeit. Heute werde ich Ihnen erkl√§ren, wie Sie Testprojekte ohne Schmerzen erstellen und wie wir Testprojekte in Yandex.Maps erstellen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Zun√§chst ein kleiner Hintergrund. Yandex.Maps werden l√§nger als eine Minute gesammelt. Auf meinem Computer dauert das Erstellen der Anwendung etwas mehr als drei Minuten. Wir entwickeln in Testprojekten, um weniger Zeit f√ºr jede Baugruppe aufzuwenden. Wir haben genug Modularit√§t und f√ºr jedes Modul f√ºhren wir ein Testprojekt durch. In diesem Testprojekt werden Funktionen entwickelt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Erstellen eines Testprojekts dauert jetzt 15 Minuten bis eine Stunde. Dies liegt daran, dass das Projekt konfiguriert werden muss. Das hei√üt, Sie m√ºssen das Signieren konfigurieren, damit wir auf denselben Ger√§ten entwickeln k√∂nnen, wie wir es gewohnt sind. Es ist notwendig, die erforderlichen Bibliotheken zu konfigurieren. W√§hrend der Entwicklung des Features selbst kommen wir st√§ndig zur√ºck und beenden das Testprojekt, damit es unseren Anforderungen entspricht.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Warum brauchen wir Testprojekte? So sparen Sie Zeit bei der Montage. Je kleiner das Projekt ist, desto schneller wird es zusammengestellt, desto h√§ufiger k√∂nnen wir unsere Anwendung auf dem Ger√§t starten und desto komfortabler ist die Entwicklung f√ºr uns. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zh/d_/rt/zhd_rt3d8t6ojvedwzffktuan7e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was soll im Testprojekt sein? Wir sollten in der Lage sein, unsere Anwendung auf denselben Ger√§ten zu starten, zu debuggen, auf denen wir unsere Hauptanwendung starten und debuggen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Projekt sollte so √§hnlich wie m√∂glich zum Hauptprojekt konfiguriert sein, damit beim √úbertragen von Features vom Testprojekt zum Hauptprojekt keine √úberraschung auftritt. Oder zumindest die Anzahl der erhaltenen √úberraschungen auf ein Minimum reduziert.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir ben√∂tigen au√üerdem eine minimale Umgebung im Testprojekt, damit wir keine Zeit damit verschwenden, UIWindows zu erstellen, Bibliotheken einzurichten, den Aufruf zum √ñffnen der Anwendung f√ºr die Bibliothek, die sich mit der Autorisierung befasst, zu √∂ffnen usw. </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CocoaPods app_spec</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meine ganze Geschichte heute wird sich um die CocoaPods-Funktion namens app_spec drehen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pk/eb/xf/pkebxfc7kvhzsszibluqrljlkai.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
App_spec √§hnelt einer normalen Unterspezifikation, generiert jedoch kein Framework, das verbunden werden kann, sondern eine Anwendung, die auf dem Ger√§t gestartet werden kann. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ds/kj/67/dskj67urgk0wocvvue0rsaexelq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit CocoaPods k√∂nnen wir Info.plist und xcconfig sofort in app_spec verschieben. Dadurch k√∂nnen wir unser Projekt bereits recht gut einrichten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir jedoch in jeder pods_spec gro√üe W√∂rterb√ºcher mit Werten f√ºr Info.plist und xcconfig schreiben, werden wir podspec selbst erweitern und es wird unpraktisch sein, sie zu √§ndern. Wenn wir etwas √§ndern m√ºssen, m√ºssen wir in jede Podspec-Datei gehen und etwas mit Stiften bearbeiten. Oder nicht Stifte. In jedem Fall ist dies unpraktisch.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t6/go/mf/t6gomf0wb3koti2mtcxnlsm36e8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dies zu beseitigen, haben wir ein sehr einfaches lokales Plugin f√ºr CocoaPods erstellt. Es passt sogar ganz in eine Folie. Und er macht das Einzige: Er gibt uns die DSL-Berechtigung CocoaPods, die app_spec mit bereits verstopften Werten in Info.plist und xcconfig erstellt. Auf diese Weise k√∂nnen wir bereits die Signatur konfigurieren und die wichtigen Dinge konfigurieren, die in unserem Testprojekt konfiguriert werden sollen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kk/7h/7w/kk7h7w7bl013cgrbwntjge0jjec.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Frage: Wie √ºbertrage ich den Pfad zu Berechtigungen, genauer gesagt, wo Berechtigungen gespeichert werden, damit wir den Pfad in Plug-Ins fest codieren k√∂nnen? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt zwei M√∂glichkeiten. Oder geben Sie den Pfad f√ºr eine Datei an, die sich einfach in unserem Repository befindet, z. B. zu den Berechtigungen des Hauptprojekts. Oder speichern Sie im Plugin eine spezielle Berechtigungsdatei f√ºr Testprojekte. Und kopieren Sie es mit demselben Plugin auf unseren Developmentpod.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/37/xo/jr/37xojrk1orzo5d_2nj1eu1tconi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben den ersten Weg gew√§hlt und hier hatten wir einige Schwierigkeiten. Tatsache ist, dass sich in unserem Repository Entwicklungspods in verschiedenen Unterordnern befinden. Daher k√∂nnen wir keinen relativen Pfad f√ºr sie vom Entwicklungspod zur Berechtigungsdatei angeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist wichtig zu betonen, dass Sie einen relativen Pfad angeben m√ºssen, da dieser Pfad in pods_spec verbleibt. Dies bedeutet, dass er an der Berechnung des Scheckbetrags teilnimmt, der in Podfile.lock gespeichert ist. Und wenn es einen absoluten Pfad gibt, wirkt sich dies auf den Scheckbetrag aus. Dies bedeutet, dass der Pr√ºfbetrag abh√§ngig davon variiert, von welchem ‚Äã‚ÄãOrdner aus $ pod install aufgerufen werden soll, von wo aus Sie das Repository haben und auf welchem ‚Äã‚ÄãComputer Sie $ pod install ausf√ºhren. Dies f√ºhrt im Allgemeinen zu Konflikten.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lo/ek/ng/loekngcf64nbbzuaaadwy3qmhl4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt werde ich eine weitere kleine Erweiterung desselben Plugins zeigen, mit der wir den relativen Pfad zu diesen Berechtigungen berechnen k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir kennen den relativen Pfad von unserem Plugin zur Datei mit den Berechtigungen, wenn sie sich im selben Repository befinden. </font><font style="vertical-align: inherit;">Und auch w√§hrend des Starts von $ pod install kennen wir den Weg zu unserem Developmentpod. </font><font style="vertical-align: inherit;">Die ganze Magie, die in diesem Code enthalten ist, ist eine hervorgehobene Linie, in der wir einfach den relativen Pfad z√§hlen und diese beiden absoluten Pfade kennen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ya/yg/1l/yayg1ll82qeeq2xg28xnfrm4i2g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was haben wir also bekommen, als wir app_spec bereits auf diese Weise konfiguriert hatten? </font><font style="vertical-align: inherit;">Wir k√∂nnen unser Testprojekt sofort auf denselben Ger√§ten ausf√ºhren. </font><font style="vertical-align: inherit;">Wir haben eine Vielzahl von Einstellungen, einschlie√ülich Berechtigungen, die wir ben√∂tigen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Umgebung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das n√§chste, wor√ºber ich sprechen m√∂chte, ist die Umgebung, die minimal notwendige Umgebung, die wir ben√∂tigen, um sofort mit dem Schreiben von Code zu beginnen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ui/f-/t2/uif-t2fox7l9twbo2isjpzcx_py.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserem Fall ben√∂tigen wir MapKit, das bereits konfiguriert ist und dessen Schl√ºssel √ºbertragen wurden, mit Anrufweiterleitung im AccountManager. Dies ist unsere Berechtigungsbibliothek. Sie muss auch Systemaufrufe ausl√∂sen, sie muss auch Schl√ºssel √ºbertragen, einschlie√ülich des √ñffnens der Anwendung als Referenz. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir ben√∂tigen au√üerdem einen Startbildschirm mit einer Karte und einem Navigationsstapel, damit wir denselben Navigationsstapel wie in Karten verwenden k√∂nnen und es einfacher ist, Funktionen aus dem Testprojekt auf das Hauptprojekt zu √ºbertragen. Und der Einstiegspunkt, damit wir ohne nachzudenken sofort mit dem Schreiben von n√ºtzlichem Code beginnen k√∂nnen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/l0/c_/jql0c_lfm6weosqqsvivxclmqro.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Ihrem Fall kann dies beispielsweise das Einrichten des Facebook SDK sein, in das Sie auch Schl√ºssel √ºbertragen m√ºssen. Ihre Bibliotheken f√ºr die Anmeldung, die Sie mit ziemlicher Sicherheit ben√∂tigen, um den Link zum √ñffnen der Anwendung zu √ºberspringen. Eine Art Start-Windows-Startcontroller und derselbe Einstiegspunkt zum Ausf√ºhren des Hauptskripts, das Sie in Ihrem Testprojekt entwickeln m√∂chten. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7u/6v/7o/7u6v7oxzg3dipiw2ztkcsub5ou8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie haben wir das gemacht? Durch Erstellen einer einzelnen AppDelegate-Vorlage. Dort initialisieren wir alle notwendigen Umgebungen, Bibliotheken. Wir leiten alle notwendigen Anrufe weiter, √ºbertragen die notwendigen Schl√ºssel. Beim Erstellen eines Testprojekts bleibt es uns √ºberlassen, ein neues AppDelegate f√ºr das Testprojekt zu erstellen und von der Vorlage zu erben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach √ºberschreiben wir die einzige Methode, die aufgerufen wird, nachdem die Vorlage AppDelegate alles Notwendige getan hat. </font><font style="vertical-align: inherit;">Und dort haben wir bereits den Start-ViewController und dar√ºber k√∂nnen wir unser Skript ausf√ºhren, das wir im Testprojekt debuggen m√∂chten.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">War / wurde</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie kann ich ein Testprojekt in der Stirn erstellen und wie kann ich es mit der heute beschriebenen Methode erstellen? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen eines Testprojekts in der Stirn: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Wir gehen zu Xcode und erstellen ein neues Projekt (Datei&gt; Neues Projekt). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Geben Sie den Namen ein, vorzugsweise ohne Fehler, und unterschreiben Sie die Bundle-ID. Wir bauen dieses Projekt auf. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- √Ñndern Sie die Version von Swift, √§ndern Sie die Zielversion. Wir versuchen, alles auf dem Ger√§t auszuf√ºhren, die Signatur zu bearbeiten und so weiter. Dies ist ein ziemlich trostloser Prozess. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Als n√§chstes erstellen wir eine Poddatei, verbinden dort Abh√§ngigkeiten und installieren Pods. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Danach beginnen wir sehr m√ºhsam und behutsam mit der Konfiguration unseres AppDelegate und √ºbertragen die Initialisierungselemente der ben√∂tigten Bibliotheken. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Erstellen Sie mit unserem ViewController ein Start-UIWindows</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und erst danach k√∂nnen wir den n√ºtzlichen Code starten. </font><font style="vertical-align: inherit;">Ziemlich unangenehmes Verfahren, stimme zu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie k√∂nnen wir ein Testprojekt mit den Best Practices erstellen, die ich im heutigen Bericht beschrieben habe? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Wir erstellen sample_app_spec mit der Erweiterung f√ºr CocoaPods, mit der wir begonnen haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Erstellen Sie ein AppDelegate und erben Sie es von der Vorlage AppDelegate. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach k√∂nnen wir mit dem Schreiben von n√ºtzlichem Code beginnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Erstellen eines Testprojekts auf diese Weise ist viel schneller und zuverl√§ssiger. </font><font style="vertical-align: inherit;">Wir werden definitiv keinen Fehler bei den Signatureinstellungen machen, wir werden definitiv keinen Fehler bei den Projekteinstellungen machen. </font><font style="vertical-align: inherit;">Das gesamte Umfeld, das f√ºr den Arbeitsbeginn erforderlich ist, kommt sofort auf uns zu.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kann es einfacher sein?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen eine Frage stellen - kann dies einfacher gemacht werden? Na sicher. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9e/t_/ux/9et_uxcpepiyc5iavhfehkqen-q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe drei Schwierigkeitsgrade identifiziert. Das erste ist, wor√ºber ich heute auf einmal gesprochen habe, als wir ein Plug-In f√ºr CocoaPods, das Pfade zu Berechtigungen reparieren kann, und eine Vorlage AppDelegate erstellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die zweite Methode ist ideal im Verh√§ltnis von Aufwand zu Gewinn. Es enth√§lt nur das Plugin f√ºr CocoaPods, das das erste in der heutigen Geschichte war. Das hei√üt, es ersetzt einfach die Werte in Info.plist und xcconfig. Es macht das Leben schon viel einfacher. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie Ihre Berechtigungsdatei in Ihren Testanwendungen nicht ben√∂tigen, wenn sich Ihre Testanwendungen stark voneinander unterscheiden und keine gemeinsamen Komponenten ben√∂tigen, ist diese Methode sehr gut f√ºr Sie geeignet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die dritte Methode ist die einfachste und erfordert keine Vorbereitung. </font><font style="vertical-align: inherit;">Starten Sie einfach app_spec. </font><font style="vertical-align: inherit;">Das aus app_spec generierte Projekt wird im selben Arbeitsbereich wie Ihr Hauptprojekt erstellt. </font><font style="vertical-align: inherit;">Daher erbt es bereits die Swift-Version, die Zielversion und alle Einstellungen, die Sie in Workspace haben. </font><font style="vertical-align: inherit;">Es wird f√ºr Sie viel einfacher sein, mit ihm zu arbeiten. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielen Dank f√ºr Ihre Aufmerksamkeit.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de503642/index.html">Wie komme ich auf LinkedIn, Facebook, Google im Silicon Valley?</a></li>
<li><a href="../de503650/index.html">VKCup 2020 Stufe I. Ein langer Weg</a></li>
<li><a href="../de503652/index.html">Digitale Veranstaltungen in Moskau vom 25. bis 31. Mai</a></li>
<li><a href="../de503654/index.html">Webdienst, mit dem Benutzer unabh√§ngig eine Online-Kommunikationskultur pflegen k√∂nnen</a></li>
<li><a href="../de503656/index.html">Der Bandunterdr√ºckungsalgorithmus im Bild als Werkzeug zur Verbesserung der Qualit√§t der tomographischen Rekonstruktion</a></li>
<li><a href="../de503662/index.html">NEU - VoIP Phone Snom D335</a></li>
<li><a href="../de503666/index.html">Startup und Business Course √úbersetzung von der Stanford University. Vorlesung Nummer 1. So starten Sie ein Startup</a></li>
<li><a href="../de503668/index.html">Kreis im Quadrat: Visuelle Beweise</a></li>
<li><a href="../de503670/index.html">Verlangsamt sich Mac OS? - Catalina √ºberpr√ºft beim Start nicht signierten Code √ºber das Internet</a></li>
<li><a href="../de503672/index.html">Auf welcher Seite befinden Sie sich: Push and Pull in der gew√ºnschten Statuskonfiguration</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>