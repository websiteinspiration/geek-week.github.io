<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏆 👎🏻 🤔 FPGAベースのプロセッサシステムに埋め込むための独自のコアの開発 🎪 🚕 ⏭️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="したがって、サイクルの最初の記事では、プロセッサシステムを使用して、ReddコンプレックスのFPGAを使用して実装された機器を制御するのが最適であると述べ、その後、最初と2番目の記事でこのシステムの作成方法を示しました。これで完了です。リストから既製のカーネルを選択してそれらに含めることもできますが...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>FPGAベースのプロセッサシステムに埋め込むための独自のコアの開発</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454938/"><img src="https://habrastorage.org/webt/ze/eo/9f/zeeo9fw5rmqp8pk7lsmr0cytbve.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイクルの最初の記事では</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、プロセッサシステムを使用して、ReddコンプレックスのFPGAを使用して実装された機器を制御するのが最適であると述べ、その後、最初と2番目の記事でこのシステムの作成方法を示しました。これで完了です。リストから既製のカーネルを選択してそれらに含めることもできますが、最終的な目標は、独自のカスタムカーネルを管理することです。プロセッサシステムに任意のカーネルを含める方法を検討する時が来ました。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シリーズのすべての記事：</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReddにインストールされたFPGAの最も単純な「ファームウェア」の開発、および例としてメモリテストを使用したデバッグReddにインストールされたFPGA </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の最も単純な「ファームウェア」の開発パート2.プログラムコード</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
今日の理論を理解する</font><font style="vertical-align: inherit;">には、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avalon</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バスがNIOS IIシステムのベースバスであるため、</font><b><font style="vertical-align: inherit;">Avalon Interface Specifications</font></b><font style="vertical-align: inherit;">ドキュメントを見つけてダウンロードする必要があります</font><font style="vertical-align: inherit;">。 2018年9月26日改訂のセクション、表、図を参照します。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはメモリマップされたインターフェースに専念しているセクション3、またはむしろ3.2を開きます。表9にバス信号を示します。これらの信号はすべてオプションであることに注意してください。 「必須」列に「はい」の信号が1つも見つかりませんでした。これまたはその信号をデバイスに転送しない場合があります。したがって、最も単純なケースでは、バスの実装は非常に簡単です。表の最初は次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qj/et/kn/qjetkngv8gubiwwtqtx8atvab7c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、すべての信号は非常によく説明されています（ただし、英語で行われていることを除きます）。以下は、さまざまなケースのタイミングチャートです。最も単純なケースでは問題は発生しません。次に、ドキュメントからタイムチャートを取り出し、一部の線を半透明の塗りつぶしでカバーします（これらはすべてオプションであり、考慮事項を除外する権利があります）。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/q4/oz/w_/q4ozw_efgf6v6adbdhnkdeacply.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
恐ろしい？しかし、すべてが簡単です。アドレスと</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読み取り</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストローブが与えられ</font><font style="vertical-align: inherit;">、readdataバスにデータを設定する必要があります。そしてその逆：アドレス、writedataバス上のデータ、および書き込みストローブが与えられ、データをスナップする必要があります。典型的な同期バスというのは、まったく怖いものではありません。</font><font style="vertical-align: inherit;">メモリアクセスが32ビットワードでない場合は、</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
隠れバイトイネーブルライン</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要です。これは、ユニバーサルカーネルを設計するときに非常に重要です。しかし、1日のカーネルを設計するときは、このカーネルに関するドキュメントに書き込むだけです（私は頭の中でマークの反対者ですが、誰かがこれをこれに制限することができます）。さて、そして</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">応答</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信号</font><font style="vertical-align: inherit;">、それは非常に特別であり、それは原則的に私たちの興味を引きません。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
場合によっては、機器の準備ができていないときに、バスの動作を数クロックサイクル遅延させることが重要になることがあります。この場合、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WaitRequest</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シグナルを追加する必要があります</font><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">タイムライン</font></b><font style="vertical-align: inherit;">は次のように変化します</font><b><font style="vertical-align: inherit;">。WaitRequestが実行</font></b><font style="vertical-align: inherit;">されて</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sy/hr/lf/syhrlf64dvm-zrr262xvveicea4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いる間</font><font style="vertical-align: inherit;">、ウィザードはデバイスがビジーであることを認識します。この信号がリセットされない場合は注意してください。システム全体が処理時に「フリーズ」するため、FPGAを再起動するだけでリセットできます。 JTAGがシステムでハングします。この現象を最後に観察したのはこの記事の準備中だったので、記憶はまだ鮮やかです。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、会社のドキュメントでは、データパイプライン処理とバッチトランザクションのより生産的なケースが検討されていますが、この記事のタスクは、すべての可能なオプションを検討することではなく、読者に作業方法を示すことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バス上で定期的に利用できなくなる単純なデバイスを設計してみましょう。最初に頭に浮かぶのは、シリアルインターフェイスです。転送中はシステムを待機させます。そして、実際には、これを行わないことを強くお勧めします。プロセッサはビジーなトランザクションの最後まで停止しますが、実装するコードは理解しやすく、扱いにくいので、これは記事にとって理想的なケースです。一般的に、2つのデバイスにデータとチップ選択信号を送信できるシリアルトランスミッターを作成します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fr/uj/_u/fruj_ufw0phhzgbovupezinxo6c.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も単純なタイヤオプションから始めましょう。水晶の選択の信号を形成するパラレル出力ポートを作成します。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/rc/z6/yg/rcz6ygig6s3yz-bxsjwsbonygp4.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのため、前回の記事で取得したプロジェクトを取り上げますが、混乱を避けるため、AVALON_DEMOディレクトリに配置します。他のファイルの名前は変更しません。このディレクトリに、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">my_cores</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクトリを作成します</font><font style="vertical-align: inherit;">。ディレクトリ名は何でもかまいません。その中にコアを保存します。確かに、今日は1つになります。</font><font style="vertical-align: inherit;">次の内容で</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CrazySerial.sv</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">作成します</font><font style="vertical-align: inherit;">。</font></font><br>
<pre><code class="plaintext hljs">module CrazySerial<font></font>
(<font></font>
   input clk,<font></font>
   input reset,<font></font>
   input [1:0] address,<font></font>
   input write,<font></font>
   input [31:0] writedata,<font></font>
   <font></font>
   output reg [1:0] cs<font></font>
);<font></font>
<font></font>
always @(posedge clk, posedge reset)<font></font>
begin<font></font>
<font></font>
   if (reset == 1)<font></font>
   begin<font></font>
      cs &lt;= 0;<font></font>
   end else<font></font>
   begin<font></font>
      if (write)<font></font>
         case (address)<font></font>
         2'h00: cs &lt;= writedata [1:0];<font></font>
         default:;<font></font>
      endcase<font></font>
   end<font></font>
end<font></font>
<font></font>
endmodule<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それを正しくしましょう。まず、インターフェースライン。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clk</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reset</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、クロックラインとリセットラインです。名前付きの行</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アドレス</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">信号のリストを含むテーブルから取得した</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">書き込み</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font><b><font style="vertical-align: inherit;">書き込み</font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データ</font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリマップドインターフェイス</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメント。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/lz/q9/rv/lzq9rvmj8mekwwiqqene5mvbu7i.png"> <br>
<br>
<img src="https://habrastorage.org/webt/pe/xz/a-/pexza-dsswt01-shzs4sy0pkjay.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、どんな名前でも付けることができました。論理回線と物理回線のリンクは後で行います。ただし、表のように名前を付けると、開発環境はそれらを単独で接続します。したがって、テーブルから名前を取得することをお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まあ、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はチップから出てくる結晶選択ラインです。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実装自体は簡単です。リセットすると、出力はゼロになります。だから-各測定で信号をチェックします</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">書き</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。あり、アドレスがゼロの場合は、データをクリックします。もちろん、ここにデコーダーを追加することは可能です。これにより、2つのデバイスを同時に選択することはできなくなりますが、優れたものは記事に過負荷をかけます。この記事では最も必要な手順のみを提供していますが、実際にはすべてがより複雑にできることに注意してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完璧に。このコードをプロセッサシステムに導入する準備が整いました。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Platform Designerに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移動し、</font><font style="vertical-align: inherit;">前の実験で構築したシステムを入力ファイルとして選択します。</font><font style="vertical-align: inherit;">左上隅の</font><font style="vertical-align: inherit;">
[ </font><b><font style="vertical-align: inherit;">新しいコンポーネント]</font></b></font><br>
<br>
<img src="https://habrastorage.org/webt/vd/a3/mp/vda3mpnhkbmfl9gj037h7kyefs8.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
アイテム</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">注意して</font><font style="vertical-align: inherit;">ください。コンポーネントを追加するには、このアイテムをクリックします。開いたダイアログで、フィールドに入力します。そして記事については、コンポーネント名のみを入力してください：</font><font style="vertical-align: inherit;">
次にタブに移動します</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/iz/xq/hw/izxqhw8wg6jshahucg0ardu7ukg.png"> <br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/nn/l8/mt/nnl8mtcsdxmqyp6cjnkrcr-qlc0.png"> <br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をクリックし</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ファイルの追加</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fo/rw/jx/forwjxin05orcsaaw7uuuiw1mra.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、以前に作成したファイルを追加し、リストでそれを選択してクリックし</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、合成ファイルを分析する</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a_/-i/g0/a_-ig0-b-v--safmwwco-gcblvi.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこ</font><font style="vertical-align: inherit;">エラーません</font><font style="vertical-align: inherit;">パース</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SystemVerilogのは</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、しかし、いくつかの概念的なエラーがあります。一部の回線が開発環境によって誤って接続されていたことが原因です。私たちは、に行く</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の信号＆インタフェースの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タブ</font><font style="vertical-align: inherit;">ここでは有料注意：</font><b><font style="vertical-align: inherit;">CSの</font></b></font><br>
<br>
<img src="https://habrastorage.org/webt/be/7s/nb/be7snb0yjnqj8qn-ku_dboeirjs.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ラインが</font><font style="vertical-align: inherit;">間違っに割り当てられた</font><b><font style="vertical-align: inherit;">avalon_slave0</font></b><font style="vertical-align: inherit;">インタフェース</font><font style="vertical-align: inherit;">、</font><b><font style="vertical-align: inherit;">読み出しデータ</font></b><font style="vertical-align: inherit;">信号</font><font style="vertical-align: inherit;">。しかし、ドキュメントテーブルから名前を付けたため、他のすべての行は正しく認識されました。しかし、問題のある線をどうするか？これらは、</font><b><font style="vertical-align: inherit;">コンジット</font></b><font style="vertical-align: inherit;">タイプのインターフェースに割り当てる必要があります。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これを行うには、「追加のインターフェース」の項目をクリックしてください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ur/ce/je/urcejebzbrayxcoyvs16vorleik.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドロップダウンメニューを選択して</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンジット</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2-/l-/45/2-l-45h1b_8jnat3uazcscgcpt0.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいインターフェイスを取得します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/g_/r4/j0/g_r4j0acbfvawp7plewjmsolw1e.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要であれば、あなたはそれを名前を変更することができます。確かに、これは、いくつかの外部インターフェイスを作成する場合に必要です。記事の一部として、名前を</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conduit_endのままにし</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。次に、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行をマウスでフックして、</font><font style="vertical-align: inherit;">このインターフェイスにドラッグします。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どうにかして</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><b><font style="vertical-align: inherit;">conduit_end</font></b><font style="vertical-align: inherit;">行の下にシグナルをスローする必要があります。</font><b><font style="vertical-align: inherit;">そうすると</font></b><font style="vertical-align: inherit;">、これを行うことができます。他の場所では、カーソルは取り消し線付きの円として表示されます。最終的には、次のように機能するはずです：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gb/2e/lw/gb2elw6dvx2iw11y28uq0qlye5q.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
信号タイプを</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">readdata</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に、たとえば</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chipselectに置き換え</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。最後の写真：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6o/ur/gq/6ourgq054tn85rth2nixk33_pvs.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、エラーは残りました。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アバロンバスがされ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、リセット信号が割り当てられていません。リストから</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avalon_slave_0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を選択</font><font style="vertical-align: inherit;">し、そのプロパティを確認します。</font><b><font style="vertical-align: inherit;">none</font></b><font style="vertical-align: inherit;">を</font><b><font style="vertical-align: inherit;">resetに</font></b></font><br>
 <br>
<img src="https://habrastorage.org/webt/s6/0i/--/s60i--4ijigk6exutkovd5zlwi0.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
置き換え</font><font style="vertical-align: inherit;">ます。同時に、インターフェイスの他のプロパティも調べます。</font><font style="vertical-align: inherit;">
アドレス指定は言葉で行われていることがわかります。まあ、ドキュメントの他の多くのものがここで設定されています。この場合に取得される時間図は、プロパティの一番下に表示されます。</font><font style="vertical-align: inherit;">
実際には、これ以上エラーはありません。 [ </font><b><font style="vertical-align: inherit;">完了</font></b><font style="vertical-align: inherit;"> ]をクリックできます</font><font style="vertical-align: inherit;">。作成したモジュールがデバイスツリーに表示されます。</font><font style="vertical-align: inherit;">
それをプロセッサシステムに追加し、クロック信号を接続してリセットします。データバスを</font><b><font style="vertical-align: inherit;">Data Master</font></b><font style="vertical-align: inherit;">プロセッサに</font><font style="vertical-align: inherit;">接続します</font><font style="vertical-align: inherit;">。ダブルクリック</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
 <br>
<img src="https://habrastorage.org/webt/xn/4d/kf/xn4dkf5jpxsi-6ujubxeuptddo4.png"> <br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/xc/nw/xq/xcnwxqjxkz7y4qgxtcmn6ulb5eu.png"> <br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/rt/qe/bz/rtqebza22wictmnw0cpgvw_uu3g.png"> <br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conduit_end</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して、外部信号に名前、たとえば</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linesを付け</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。次のような結果</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ob/mm/al/obmmalo6x1jytho2mzkvy4emdbu.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
になります。システムにブロックを追加したため、アドレススペース内の誰とも競合しないことを確認する必要があることを忘れないでください。この特定のケースでは、図に競合はありませんが、とにかく、メニュー項目[システム] </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; [ベースアドレスの割り当て</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]を選択します</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべて。ブロックが作成され、構成され、システムに追加されます。クリックして</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HDLの生成</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]ボタンを</font><font style="vertical-align: inherit;">、その後、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完了</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトの大まかなドラフトを作成した後、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pin Plannerに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移動し</font><font style="vertical-align: inherit;">てレッグを割り当てます。私はそれをこのようにして得ました：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mn/fs/39/mnfs39ezihwpwese2tsdto4ialc.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはインターフェースコネクタのコンタクトB22とC22に対応します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最終的な組み立てを行い、プロセッサシステムをFPGAにロードします。次に、プログラムコードを改良する必要があります。 Eclipseを起動します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reddでの以前の作業とは異なるディレクトリにあるプロジェクトで現在作業していることを思い出させてください。混乱しないように、古いプロジェクトをツリーから削除します（ただし、ファイル自体は消去せずに、ツリーからのみ削除します）。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/xm/jv/ch/xmjvchikm8_ukin_evoqdw28op8.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、空の木の上にマウスの右ボタンでクリックし、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インポートを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メニューから</font><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yp/kt/sf/ypktsfboxaxgfhqcubjnlwogoxq.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ワークスペースに一般- &gt;既存プロジェクト</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rb/dw/me/rbdwmebel6yu6hjmvyxn7hik0q8.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、ちょうどプロジェクトファイルが保存されているディレクトリを選択：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nd/3t/6h/nd3t6hwmddm9pfrwr4cjd4iw4hy.png"> <br>
<br>
<img src="https://habrastorage.org/webt/ei/qg/de/eiqgdehf_klzhkyyleod_opnlgq.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
過去の実験から継承された両方のプロジェクトは、開発環境に接続します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qq/vw/jk/qqvwjkfgoli7vu3wedt3qhbnsf0.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フレーム内の次のアイテムを強調表示します。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハードウェア構成を変更するたび</font><font style="vertical-align: inherit;">に、Biosプロジェクト</font><font style="vertical-align: inherit;">の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nios II-&gt; Generate BSP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メニュー項目</font><font style="vertical-align: inherit;">を再度選択します。</font></font></blockquote><br>
 <br>
<img src="https://habrastorage.org/webt/ks/jn/mt/ksjnmtcdfbf2p0vej4qeeltlkxk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、この操作の後</font><font style="vertical-align: inherit;">、新しいブロックが</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ AVALON_DEMO \ software \ SDRAMtest_bsp \ system.hファイルに表示されました</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<pre><code class="plaintext hljs">/*<font></font>
 * CrazySerial_0 configuration<font></font>
 *<font></font>
 */<font></font>
<font></font>
#define ALT_MODULE_CLASS_CrazySerial_0 CrazySerial<font></font>
#define CRAZYSERIAL_0_BASE 0x4011020<font></font>
#define CRAZYSERIAL_0_IRQ -1<font></font>
#define CRAZYSERIAL_0_IRQ_INTERRUPT_CONTROLLER_ID -1<font></font>
#define CRAZYSERIAL_0_NAME "/dev/CrazySerial_0"<font></font>
#define CRAZYSERIAL_0_SPAN 16<font></font>
#define CRAZYSERIAL_0_TYPE "CrazySerial"<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、定数</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CRAZYSERIAL_0_BASEに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関心があり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">次のコード</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数に追加し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<pre><code class="plaintext hljs">		while (true)<font></font>
		{<font></font>
			IOWR_ALTERA_AVALON_PIO_DATA (CRAZYSERIAL_0_BASE,0x00);<font></font>
			IOWR_ALTERA_AVALON_PIO_DATA (CRAZYSERIAL_0_BASE,0x01);<font></font>
			IOWR_ALTERA_AVALON_PIO_DATA (CRAZYSERIAL_0_BASE,0x02);<font></font>
			IOWR_ALTERA_AVALON_PIO_DATA (CRAZYSERIAL_0_BASE,0x03);<font></font>
		}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバッグを開始し、オシロスコープで行の内容を確認します。</font><font style="vertical-align: inherit;">インクリメンタルバイナリコードが必要です。</font><font style="vertical-align: inherit;">彼はそこにいます。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/fm/xp/0z/fmxp0z5mactvzv-vdv2cahbvj1i.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、ポートへのアクセスの頻度はすばらしいです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/rd/of/cmrdofrh6yzmo2xwdkjynz6gwwm.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
約25 MHz-バス周波数の半分（2クロックサイクル）。</font><font style="vertical-align: inherit;">アクセス時間は2サイクルではなく、それよりも長い場合があります。</font><font style="vertical-align: inherit;">これは、プログラムでの分岐操作の実行によるものです。</font><font style="vertical-align: inherit;">一般的に、バスへの最も簡単なアクセスが機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、シリアルポートの機能を追加する時が来ました。</font><font style="vertical-align: inherit;">これを行う</font><font style="vertical-align: inherit;">には、バスに関連する</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">waitrequest</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェイス信号</font><font style="vertical-align: inherit;">と、シリアルポート信号のペア（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sck</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sdo）を追加し</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">全体として、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">systemverilogで</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のコードフラグメントを取得します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dy/wc/vt/dywcvtwz6_h4ccubotauamcnnju.png"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じテキスト：</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">module CrazySerial<font></font>
(<font></font>
   input clk,<font></font>
   input reset,<font></font>
   input [1:0] address,<font></font>
   input write,<font></font>
   input [31:0] writedata,<font></font>
   output waitrequest,<font></font>
   <font></font>
   output reg [1:0] cs,<font></font>
   output reg sck,<font></font>
   output sdo<font></font>
);<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
適切な形式のルールに従って、データ転送を実行する単純なマシンを作成する必要があります。残念ながら、この記事で最も単純なマシンは非常に難しく見えます。しかし、実際には、マシンの機能を向上させない場合（および記事の一部としてこれを実行しない場合）は、2つの状態しかありません。送信が進行中であり、送信が進行中ではありません。したがって、1つの信号で状態をエンコードでき</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
送信中、ビットカウンター、クロック分周器（意図的に遅いデバイスを実行しています）、および送信データ用のシフトレジスタが必要です。適切なレジスタを追加します。</font></font><br>
<pre><code class="plaintext hljs">   reg [2:0] bit_cnt = 0;<font></font>
   reg [3:0] clk_div = 0;<font></font>
   reg [7:0] shifter = 0;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
頻度を10で割ります（「なぜしないのか」の原則に基づいて）。</font><font style="vertical-align: inherit;">したがって、5番目のステップでSCKを実行し、10番目にこの行をドロップしてから、次のデータビットに移動します。</font><font style="vertical-align: inherit;">他のすべての測定では、分周器カウンターを増やします。</font><font style="vertical-align: inherit;">4番目のメジャーでもカウンターを増やす必要があることを忘れないでください。9番目のカウンターではゼロにします。</font><font style="vertical-align: inherit;">次のビットへの遷移を省略すると、指定されたロジックは次のようになります。</font></font><br>
<pre><code class="plaintext hljs">      if (sending)<font></font>
      begin<font></font>
         case (clk_div)<font></font>
            4: begin <font></font>
               sck &lt;= 1;<font></font>
               clk_div &lt;= clk_div + 1;<font></font>
            end<font></font>
            9: begin<font></font>
               sck &lt;= 0;<font></font>
               clk_div &lt;= 0;<font></font>
//             &lt;   &gt;<font></font>
            end<font></font>
            default: clk_div &lt;= clk_div + 1;<font></font>
         endcase<font></font>
      end else<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のビットに進むのは簡単です。</font><font style="vertical-align: inherit;">彼らはシフトレジスタをシフトし、現在のビットが7番目の場合は、マシンの状態を切り替えることで動作を停止し、そうでない場合はビットカウンターを増やしました。</font></font><br>
<pre><code class="plaintext hljs">               shifter &lt;= {shifter[6:0],1'b0};<font></font>
               if (bit_cnt == 7)<font></font>
               begin<font></font>
                  sending &lt;= 0;<font></font>
               end else<font></font>
               begin<font></font>
                  bit_cnt &lt;= bit_cnt + 1;<font></font>
               end<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、それだけです。</font><font style="vertical-align: inherit;">出力ビットは常にシフトレジスタの上位ビットから取得されます。</font></font><br>
<pre><code class="plaintext hljs">   assign sdo = shifter [7];
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、現在のリビジョンの最も重要な行。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">waitrequest</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信号</font><b><font style="vertical-align: inherit;">は</font></b><font style="vertical-align: inherit;">、シリアルデータが送信されているときは常に1に制御されます。</font><font style="vertical-align: inherit;">つまり</font><font style="vertical-align: inherit;">、マシンの状態を設定するの</font><font style="vertical-align: inherit;">は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">送信</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信号のコピーです</font><font style="vertical-align: inherit;">。</font></font><br>
<pre><code class="plaintext hljs">   assign waitrequest = sending;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、アドレス1に書き込むとき（32ビットワードでのアドレス指定を思い出します）、データをシフトレジスタにスナップし、カウンターをゼロにして、転送プロセスを開始します。</font></font><br>
<pre><code class="plaintext hljs">      if (write)<font></font>
//...<font></font>
         2'h01: begin<font></font>
            bit_cnt &lt;= 0;<font></font>
            clk_div &lt;= 0;<font></font>
            sending &lt;= 1;<font></font>
            shifter &lt;= writedata [7:0];<font></font>
         end<font></font>
         default:;<font></font>
         endcase<font></font>
      end<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次に、説明されているすべてのフラグメントを単一のテキストとして指定します。</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">module CrazySerial<font></font>
(<font></font>
   input clk,<font></font>
   input reset,<font></font>
   input [1:0] address,<font></font>
   input write,<font></font>
   input [31:0] writedata,<font></font>
   output waitrequest,<font></font>
   <font></font>
   output reg [1:0] cs,<font></font>
   output reg sck,<font></font>
   output sdo<font></font>
);<font></font>
   reg sending = 0;<font></font>
   reg [2:0] bit_cnt = 0;<font></font>
   reg [3:0] clk_div = 0;<font></font>
   reg [7:0] shifter = 0;<font></font>
<font></font>
always @(posedge clk, posedge reset)<font></font>
begin<font></font>
<font></font>
   if (reset == 1)<font></font>
   begin<font></font>
      cs &lt;= 0;<font></font>
      sck &lt;= 0;<font></font>
      sending &lt;= 0;<font></font>
   end else<font></font>
   begin<font></font>
      if (sending)<font></font>
      begin<font></font>
         case (clk_div)<font></font>
            4: begin <font></font>
               sck &lt;= 1;<font></font>
               clk_div &lt;= clk_div + 1;<font></font>
            end<font></font>
            9: begin<font></font>
               clk_div &lt;= 0;<font></font>
               shifter &lt;= {shifter[6:0],1'b0};<font></font>
               sck &lt;= 0;<font></font>
               if (bit_cnt == 7)<font></font>
               begin<font></font>
                  sending &lt;= 0;<font></font>
               end else<font></font>
               begin<font></font>
                  bit_cnt &lt;= bit_cnt + 1;<font></font>
               end<font></font>
            end<font></font>
            default: clk_div &lt;= clk_div + 1;<font></font>
         endcase<font></font>
      end else<font></font>
      if (write)<font></font>
         case (address)<font></font>
         2'h00: cs &lt;= writedata [1:0];<font></font>
         2'h01: begin<font></font>
            bit_cnt &lt;= 0;<font></font>
            clk_div &lt;= 0;<font></font>
            sending &lt;= 1;<font></font>
            shifter &lt;= writedata [7:0];<font></font>
         end<font></font>
         default:;<font></font>
         endcase<font></font>
      end<font></font>
   end<font></font>
   assign sdo = shifter [7];<font></font>
   assign waitrequest = sending;<font></font>
<font></font>
endmodule<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムに新しいコードを導入し始めます。実際には、パスはコンポーネントの作成時と同じですが、一部のステップは既に省略できます。これで、改訂プロセスに慣れるだけです。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Platform Designerに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移動し</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。 Verilogコードのみを変更した場合</font><font style="vertical-align: inherit;">、完成したシステムに対して</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HDL生成</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作を実行するのは非常に簡単</font><font style="vertical-align: inherit;">です。ただし、モジュールには新しい行がある（つまり、インターフェースが変更されている）ため、やり直す必要があります。これを行うには、ツリーでそれを選択し、マウスの右ボタンを押して[ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">編集</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]を選択します</font><font style="vertical-align: inherit;">。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/sg/el/hx/sgelhxlzgzwjz81z6q7xhkhbxzs.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
既存のシステムを編集しています。したがって</font><font style="vertical-align: inherit;">、[ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]タブに移動し、</font><font style="vertical-align: inherit;">[ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Synthesisファイルの分析</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ] </font><font style="vertical-align: inherit;">をクリックします</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qy/nw/0q/qynw0q5tul7k26yaygdyzsigouu.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
予想通り、エラーが発生しました。しかし、私たちはすでに間違った行が原因であることを知っています。したがって、我々はに行く</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信号＆インタフェースの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タブ</font><font style="vertical-align: inherit;">、ドラッグ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SCK</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDO</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ラインに沿って</font><font style="vertical-align: inherit;">から</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avalon_slave_0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">へのインタフェース</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conduit_endの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェイスを</font><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z_/rz/jj/z_rzjjaaiaqzey6gczf6ptt0vfa.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我々はまた、名前を変更する</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信号タイプの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらのためのフィールドを</font><font style="vertical-align: inherit;">。結果は次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ng/3_/t_/ng3_t_kiebqf_jw3wwljh0aqsig.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、それだけです。 [ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finish</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]をクリック</font><font style="vertical-align: inherit;">し、プロセッサシステムの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Generate HDL File</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ] </font><font style="vertical-align: inherit;">を呼び出し、</font><font style="vertical-align: inherit;">Quartusでプロジェクトのドラフトアセンブリを作成し、新しいレッグを割り当てます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ul/hg/rh/ulhgrhytzp1y9149j8x11apyvcy.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらはインターフェースコネクタのコンタクトA21およびA22であり、最終的なアセンブリを作成し、FPGAの「ファームウェア」に入力します。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アイロンを更新しました。今プログラム。 Eclipseに行きましょう。そこで何をすることを覚えていますか？そうです、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSPの生成</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を選択すること</font><b><font style="vertical-align: inherit;">を</font></b><font style="vertical-align: inherit;">忘れないでください</font><font style="vertical-align: inherit;">。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、それだけです。プログラムに機能を追加するために残っています。 1組のバイトをシリアルポートに転送しますが、最初のバイトを</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cs [0]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と2番目の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cs [1]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の行で選択されたデバイスに送信します</font><font style="vertical-align: inherit;">。</font></font><br>
<pre><code class="plaintext hljs">		IOWR_ALTERA_AVALON_PIO_DATA (CRAZYSERIAL_0_BASE,0x01);<font></font>
		IOWR_ALTERA_AVALON_PIO_DATA (CRAZYSERIAL_0_BASE+4,0x12);<font></font>
		IOWR_ALTERA_AVALON_PIO_DATA (CRAZYSERIAL_0_BASE,0x02);<font></font>
		IOWR_ALTERA_AVALON_PIO_DATA (CRAZYSERIAL_0_BASE+4,0x34);<font></font>
		IOWR_ALTERA_AVALON_PIO_DATA (CRAZYSERIAL_0_BASE,0x00);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこには利用可能性チェックがないことに注意してください。小包は次々に行きます。それにもかかわらず、すべてがオシロスコープでかなり順番に行われ、</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vh/qm/ig/vhqmigcblrnmmcizbs11jwdgsig.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
黄色の光線</font><b><font style="vertical-align: inherit;">-cs </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[0]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、緑色</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-sdo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、紫色</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-sck</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、青色</font><b><font style="vertical-align: inherit;">-cs </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[1]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 0x12コードが最初のデバイスに行き、0x34が2番目のデバイスに行きました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
読み取りも同様に行われますが、コネクターフットの内容の平凡な読み取りを除いて、美しい例は思いつきません。しかし、その例は非常に退化しているため、実行するのも面白くありません。しかし、ここでは、このバス設定を読み取るときに非常に重要になる可能性があることに注意し</font></font><br>
<br>
<img src="https://habrastorage.org/webt/m4/7g/i6/m47gi6xbkat-jct5iuuffqmyya8.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
て</font><b><font style="vertical-align: inherit;">ください</font></b><font style="vertical-align: inherit;">：</font><b><font style="vertical-align: inherit;">読み取り</font></b><font style="vertical-align: inherit;">ラインがある場合</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、設定ダイアログに読み取りタイミングチャートが表示されます。その上で、このパラメーターの影響が表示されます。コネクタの脚を読み取るときは、それは目立ちませんが、同じFIFOまたはRAMから読み取るとき-完全に。 RAMは、アドレスが送信された直後にデータを発行するように構成することも、同期的に発行することもできます。 2番目のケースでは、レイテンシが追加されます。結局のところ、バスはアドレスを設定し、ストローブを設定します...しかし、クロック信号の最も近いエッジにデータはありません。これらはこの前に表示されます...つまり、システムの待ち時間は1つです。そして、このパラメーターを設定することで、それを考慮する必要があります。要するに、期待されたものを読んでいない場合は、最初にレイテンシを構成する必要があるかどうかを確認します。残りの部分-読むことは書くことと同じです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まあ、もう一度言っておきますが、長時間の操作ではバスの準備を解除しない方がいいです。そうしないと、システムパフォーマンスが大幅に低下する可能性があります。レディ信号は、トランザクションを2クロックサイクル実行し続けるのに適しています。私の例のように、最大​​80クロックサイクルではありません。しかし、第1に、他の例はこの記事には不便です。第2に、1日カーネルの場合、これはまったく問題ありません。あなたは自分の行動を十分に認識し、バスがブロックされている状況を避けます。確かに、コアが割り当てられた時間を超えて存続する場合、そのような仮定は、誰もがそれを忘れ、将来すべての速度を低下させる将来の生活を損なう可能性があります。しかし、それは後でなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それにもかかわらず、プロセッサコアでコアを制御する方法を学びました。</font><font style="vertical-align: inherit;">アドレス可能な世界ですべてが明確になっている今、ストリーミングの世界を扱う時が来ました。</font><font style="vertical-align: inherit;">ただし、これは次の記事で、場合によってはいくつかの記事でも行います。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事は、任意のVerilogカーネルを接続してNios IIプロセッサシステムを制御する方法を示しています。</font><font style="vertical-align: inherit;">Avalonバスへの最も簡単な接続と、バスがビジー状態になる可能性のある接続のオプションが表示されます。</font><font style="vertical-align: inherit;">文献へのリンクは、他のAvalonバスの動作モードがメモリマップドモードで見つかる可能性のある文献に提供されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果のプロジェクトは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここから</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダウンロードでき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja454926/index.html">あなたがword2vecについて知っていたすべては真実ではありません</a></li>
<li><a href="../ja454928/index.html">RDPセッションでWindowsロック画面をバイパスする方法</a></li>
<li><a href="../ja454930/index.html">V8のガベージコレクション：新しいOrinoco GCのしくみ</a></li>
<li><a href="../ja454932/index.html">投資とソフトウェア：取引所で取引するための5つの取引端末</a></li>
<li><a href="../ja454936/index.html">Vivaldi：広告のブロックはユーザーの選択であるべきです</a></li>
<li><a href="../ja454940/index.html">旅行医療保険：詳細な手順</a></li>
<li><a href="../ja454944/index.html">JPEG形式の仕組み</a></li>
<li><a href="../ja454946/index.html">グローバルな状態：それらを回避する理由と方法</a></li>
<li><a href="../ja454958/index.html">Inside View：EPFLの大学院。パート4.1：日常生活</a></li>
<li><a href="../ja454960/index.html">微生物相。薬が腸内細菌に与える影響</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>