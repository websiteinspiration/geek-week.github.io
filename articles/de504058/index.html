<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍰 🙎🏿 🔫 Als hätten wir keine Blockchain 👀 🔵 🎯</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wie haben wir mit smart-contract ein System zur Auswahl der besten technologischen Projekte in IT MTS aufgebaut? Und in welche „Fallen“ sind wir gerat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Als hätten wir keine Blockchain</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ru_mts/blog/504058/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie haben wir mit smart-contract ein System zur Auswahl der besten technologischen Projekte in IT MTS aufgebaut? </font><font style="vertical-align: inherit;">Und in welche „Fallen“ sind wir geraten, konnten aber raus und haben am Ende bewiesen, dass es möglich ist, eine verteilte Registrierung auf Mobilgeräten zu führen!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3b/1v/ze/3b1vzeubkfgosjf5aiumj_xfre0.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum wurde ein Blockchain-basiertes System benötigt?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beginnen wir von vorne. </font><font style="vertical-align: inherit;">MTS hat eine lange Tradition - das beste Technologieprojekt eines Jahres auszuwählen und sein Team zu belohnen. </font><font style="vertical-align: inherit;">Das Team erhält Preise, Respekt und Ruhm. </font><font style="vertical-align: inherit;">Im Laufe der Jahre sind verschiedene Projekte zu Gewinnern geworden: von hoch ausgelasteten Telekommunikationssystemen bis hin zu Systemen mit künstlicher Intelligenz. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Auswahl des besten Projekts erfolgte immer in mehreren Schritten:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teams bewerben sich </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Abstimmung mit angesehenen technischen Experten findet statt </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach Experten werden Projekte von Managern ausgewählt </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach Abschluss aller Phasen wählt der Big Boss das beste Projekt aus. </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben entschieden, dass dieses Schema für die Teilnehmer nicht transparent genug ist, und haben uns überlegt: Warum nicht absolut allen Experten des Unternehmens die Möglichkeit geben, das beste technologische Projekt auszuwählen?   </font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir diese Gelegenheit direkt am Telefon umsetzen, sehen wir die aktuelle Bewertung der Projekte und wer für wen stimmt - dies gewährleistet vollständige Transparenz des Prozesses. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir lesen mehrere Artikel über Blockchain und die Idee, ein verteiltes Registrierungssystem aufzubauen, das fest in unseren Köpfen verankert ist. </font><font style="vertical-align: inherit;">Was aber, wenn wir hier </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Smart-Contract</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> anwenden </font><font style="vertical-align: inherit;">? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Folgende Eigenschaften haben uns angezogen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Offenheit - Es gibt keinen einzigen Server, auf dem Sie Informationen bearbeiten können.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informationen, die in einer verteilten Registrierung gespeichert sind, bleiben für immer dort.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informationen können nicht gefälscht werden (na ja ... praktisch) </font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keine Blockchain </font></font></h2><br>
<img src="https://habrastorage.org/webt/sl/7o/g9/sl7og9sx7arxqn4m70nh4icfsja.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Blockchain selbst sollte für solche Wahlen nicht verwendet werden. </font><font style="vertical-align: inherit;">Was aber, wenn wir die Protokolle zur Konsensbildung in verteilten Systemen auf die Konsensbildung in den menschlichen Beziehungen anwenden? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da wir in einem offenen Netzwerk arbeiten müssen, müssen wir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uns</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vor </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">nicht-byzantinischen Angriffen</font></a><font style="vertical-align: inherit;"> und vor dem Ersetzen von Informationen auf den Geräten der Benutzer </font><font style="vertical-align: inherit;">schützen </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was sind die Alternativen </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das bekannteste Protokoll ist PAXOS. Es fehlt ein expliziter Anführer, und alle Änderungen werden in zwei Phasen festgeschrieben. Zu Beginn jeder Änderung tritt Propose auf. Wenn es erfolgreich war, wird Akzeptieren gesendet.   </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Merkmal des Algorithmus kann als die Tatsache bezeichnet werden, dass er globale Zeitgeber verwendet, um zu bestimmen, welche Anforderung früher generiert wurde, und dass der Knoten, der Änderungen vornimmt, mit allen Knoten des Netzwerks kommunizieren sollte. Lesen Sie </font><font style="vertical-align: inherit;">mehr über den Algorithmus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Algorithmus wird an vielen Stellen verwendet, beispielsweise im Cassandra DBMS. Dieses Protokoll hat uns im Hinblick auf die Komplexität seiner Implementierung für die Aufgabe nicht gefallen. Aber die zweite Option kam auf uns zu - es ist RAFT. In der Tat ist dies eine Weiterentwicklung des PAXOS-Protokolls mit einem klaren Führer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das vereinfachte Protokoll kann wie folgt beschrieben werden:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
· Es wird ein Netzwerk von Geräten aufgebaut, die sich gegenseitig kennen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
· Geräte wählen unter sich einen Leiter aus, der „wichtige Entscheidungen“ trifft (z. B. Hinzufügen eines Eintrags zur Registrierung oder Ändern der Zusammensetzung des Netzwerks). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
· Das Leader-Gerät ist für die Verteilung von Informationen im gesamten Netzwerk verantwortlich, sodass diese überall identisch sind. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
· Sobald der Anführer seine Pflichten nicht mehr erfüllt, wählen Sie einen neuen Anführer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lesen Sie </font><font style="vertical-align: inherit;">über das Protokoll </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unsere Umsetzung </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was machen wir und warum ist die Welt ein anderes Fahrrad?   </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fast alle Benutzer unserer Registrierung verfügen über mobile Geräte, die fast immer eingeschaltet und fast immer online sind, und verwenden sie tatsächlich fast immer. Daher haben wir beschlossen, den Verteilungsregistrierungsalgorithmus auf mobilen Geräten und nicht auf der Serverinfrastruktur wie bei anderen bekannten Implementierungen auszuführen . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mal sehen, in welche "Fallen" wir geraten sind, aber wir haben es geschafft, rauszukommen ...</font></font></b><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Falle Nummer 1: „Meine Adresse ist nicht zu Hause und nicht auf der Straße“</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Plötzlich" stellte sich heraus, dass jedes Gerät miteinander kommunizieren kann, um ein P2P-Netzwerk aufzubauen, das eine verteilte Registrierung unter Verwendung des RAFT-Protokolls für die Datenreplikation implementiert. Dies bedeutet, dass es sowohl ein Client als auch ein Server ist. Daher benötigen wir für jedes Mobiltelefon eine öffentliche „weiße“ IP-Adresse (möglicherweise nicht). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Anzahl der echten IPv4s ist sehr begrenzt. Daher verwenden Telekommunikationsbetreiber die NAT-Technologie (Network Address Translation) im PAT-Modus (Port Address Translation) und übersetzen mehrere IP-Adressen des internen Netzwerks (die an Teilnehmer verteilt werden) in eine externe öffentliche IP-Adresse. Daher ist die Möglichkeit, eingehende Verbindungen aus dem Internet zu akzeptieren, ausgeschlossen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die gute Nachricht ist, dass es viel IPv6 gibt!   </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Basispaket enthält IPv6-Unterstützung. </font><font style="vertical-align: inherit;">Außerdem unterstützen alle modernen Telefone IPv6, und der Betreiber weist dem Teilnehmer eine öffentliche „weiße“ v6-Adresse zu. </font><font style="vertical-align: inherit;">Wir wählen IPv6.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Falle Nummer 2: Alle gingen schlafen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Gegensatz zu Servern werden Mobiltelefone manchmal immer noch ausgeschaltet. Wir haben dies beim Testen des ersten Prototyps festgestellt. Darüber hinaus ist die vom Betreiber bereitgestellte IPv6-Adresse öffentlich, jedoch nicht statisch. Jede neue Kommunikationssitzung ist eine neue Adresse. Die Adresse des Mobilgeräts kann sich jederzeit ändern. Und wenn es im Netzwerk kein einziges Telefon mit der uns bekannten Adresse gibt, existiert es einfach nicht mehr (es gibt nichts, mit dem eine Verbindung hergestellt werden kann, um es zu „erhöhen“). Daher mussten wir in gewissem Maße gegen unsere Regel „Kein Server“ verstoßen. Wir haben einen speziellen Knoten in der Cloud mit einer statischen bekannten Adresse erstellt. Seine Aufgabe ist es, die Zusammensetzung des Netzwerks zu speichern / zu aktualisieren und nicht auszuschalten. Das heißt, es ist eine gewöhnliche Site, niemand stimmt nur ab, und wenn Sie sich an sie wenden, können Sie immer die aktuelle Adressliste aller Netzwerkteilnehmer abrufen.</font></font><br>
<br>
<h2>  3:     </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es war notwendig, das Problem irgendwie zu lösen, damit nicht jeder für Projekte stimmen konnte, sondern diejenigen, die es brauchten. Die erste Idee war folgende: Führen Sie eine Datenbank mit Telefonnummern von Experten. Sie lehnten dies jedoch ab, da sie der Anwendung nicht das Recht einräumen wollten, auf diese Informationen zuzugreifen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infolgedessen machten sie alles einfach: Sie beschlossen, jede Stimme, jeden Registrierungseintrag mit einer digitalen Signatur auf modischen elliptischen Kurven zu versehen, die die Authentizität der Aufzeichnung bestimmen. Im Unternehmensnetzwerk wurde ein WEB-Dienst eingerichtet, der durch Domain-Autorisierung den Experten bestimmte und mit den öffentlichen und privaten Verschlüsselungsschlüsseln (natürlich auf Client-Seite) einen eindeutigen QR-Code für ihn generierte. Der Experte hat den Code aus der Anwendung gescannt und eine Verbindung hergestellt. Danach wurde die aktuelle Version der Registrierung auf seinem Telefon „aufgerollt“ und die Möglichkeit zur Abstimmung wurde angezeigt.</font></font><br>
<br>
<h2>  4:  Android     </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Während des Tests stellte sich fast „plötzlich“ heraus, dass einige Benutzer Eigentümer bekannter Modelle mobiler Geräte sind, auf denen das iOS-Betriebssystem ausgeführt wird. Und es wurde klar, dass unsere Registrierungssoftware auf verschiedenen Plattformen ausgeführt werden sollte. Wir haben uns die Programmiersprache Kotlin angesehen, die nicht nur „trendy, stylisch, jugendlich“, sondern auch </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plattformübergreifend ist</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Konzept der Multi-Plattform in Kotlin impliziert, dass es einen Teil des gemeinsamen und plattformspezifischen Codes gibt. Da jedoch die Ressourcen unseres Teams begrenzt sind, haben wir uns die abscheuliche Aufgabe gestellt, eine einzige Version des Quellcodes für alle Plattformen zu verwenden! Natürlich muss das ausführbare Modul für jede Plattform nativ sein. Kotlin war dazu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in der Lage</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gesagt, getan! </font><font style="vertical-align: inherit;">Wir haben ein einziges SourceSet mit Quellcode, aus dem wir Binärdateien für alle Plattformen (!) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sammeln</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Verwenden Sie dazu die Funktion "abhängig" </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Cool? </font><font style="vertical-align: inherit;">Sehr cool!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Falle Nummer 5: Mobiler Verkehr ist nicht kostenlos  </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie können wir die Interaktion zwischen Netzwerkknoten am effektivsten implementieren, um nicht den gesamten Datenverkehr des Teilnehmers zu verbrauchen und den Akku des Mobilgeräts nicht zu entladen? Wir gehen davon aus, dass das Netzwerk aus 1000 oder mehr Geräten bestehen kann! Die naheliegendste Option ist die Verwendung von UDP anstelle von TCP, z. B. bei der Auswahl des Leiters oder beim Senden von Heartbeats ohne Daten. UDP ist wirtschaftlicher, da es ein einfaches Datenübertragungsmodell ohne „Handshakes“ und Bestätigungen verwendet. Fein! Was sonst? Natürlich asynchrone E / A! </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir haben die Dokumentation für Kotlin Native sorgfältig gelesen.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Für alle Unix- oder Windows-basierten Ziele (einschließlich Android und iPhone) bieten wir die posix-Plattform lib an. Es enthält Bindungen zur Implementierung des POSIX-Standards durch die Plattform.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann lesen wir auch die POSIX-Standarddokumentation sorgfältig durch und finden </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eine erstaunliche Funktion</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mit der wir Socket-Ereignisse im nicht blockierenden Modus verarbeiten können! </font><font style="vertical-align: inherit;">Nachdem wir uns kopfüber in die wunderbare Welt von Coroutine, Sockets und C Interop gestürzt hatten, konnten wir einen sehr effizienten Transport realisieren. </font><font style="vertical-align: inherit;">Super! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und in welcher Form sollen Daten gesendet werden?    </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Natürlich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CBOR! </font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein kompaktes binäres Datenformat, das zum Glück in der plattformübergreifenden Bibliothek </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kotlinx.serialization implementiert ist</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Einfach super!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Falle Nummer 6: Serialisierung  </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Mal stellte sich wirklich unerwartet heraus, dass kotlinx.serialization nicht unter androidNative steht (unter androidJvm gibt es das natürlich). </font><font style="vertical-align: inherit;">Sehr geehrte Kollegen von JetBrains haben bestätigt, dass sie derzeit keine Bibliothek für androidNative erstellen. Vor der Veröffentlichung von Kotlin 1.4 ist in der Roadmap kein Platz mehr für diese Aufgabe.   </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist zu tun? </font><font style="vertical-align: inherit;">Wenn der Berg nicht zu Mohammed geht, geht Mohammed zum Berg! </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir selbst haben kotlinx.serialization für alle Plattformen zusammengestellt, einschließlich androidNative! </font><font style="vertical-align: inherit;">Das Erstaunlichste ist, dass es funktioniert hat!   </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Falle Nummer 7: Wo soll das Protokoll aufbewahrt werden?   </font></font></h2>  <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Natürlich im eingebetteten Schlüsselwertspeicher, aber in welchem? </font><font style="vertical-align: inherit;">Wir haben </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lmdbx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wegen der Kompaktheit des Codes, der Geschwindigkeit, der Multi-Plattform und des Fehlens einer WAL-Datei ausgewählt. </font><font style="vertical-align: inherit;">Diese Bibliothek wurde von den Jungs von Positive Techlologies entwickelt und stammt aus der legendären </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LMDB-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bibliothek </font><font style="vertical-align: inherit;">eines der Autoren von OpenLDAP Howard Chu. </font><font style="vertical-align: inherit;">Und das wiederum wurzelt in der Implementierung des B + -Baums von Martin Hedenfalk. </font><font style="vertical-align: inherit;">Die Bibliothek wurde übrigens nicht für androidNative erstellt. </font><font style="vertical-align: inherit;">Wir haben alle Fehler sorgfältig gesammelt und die Autoren haben umgehend Korrekturen bereitgestellt - wofür wir uns ganz besonders bedanken!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Falle Nummer 8: C Interop  </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles zusammenzustellen erwies sich als eine nicht triviale Aufgabe. Zusätzlich zu lmdbx- und posix-Sockets haben wir Bibliotheken integriert, um digitale Signaturen auf elliptischen Kurven zu generieren / zu validieren und SHA256 mithilfe des erstaunlichen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C-Interop-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mechanismus zu berechnen </font><font style="vertical-align: inherit;">. In einfachen Worten - von einer nativen Anwendung auf Kotlin aus können Sie die C-Bibliotheksfunktion aufrufen, auch wenn Zeiger auf Zeiger und andere Magie vorhanden sind, sieht alles etwas seltsam aus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rufen Sie beispielsweise getaddrinfo auf, um sockaddr zu erhalten. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vg/ej/pc/vgejpcyxkdvbkk8exlpafiml_e0.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie gefällt dir Ilon Mask?</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Verknüpfen der C-Bibliothek mit der ausführbaren Datei von Kotlin Native ist eine separate Aufgabe, die wir ebenfalls überstanden haben, jedoch nicht ohne Krücken. </font><font style="vertical-align: inherit;">Wir bilden die def-Datei dynamisch direkt im Build-Skript, um den korrekten Pfad zu den Bibliotheken relativ zum Projektstammverzeichnis anzugeben, und ersetzen dann den Deskriptor (def-Datei) im Abschnitt cinterops. </font><font style="vertical-align: inherit;">In der def-Datei selbst wird nur der absolute Pfad bestimmt, der nicht nur ein anderes Format haben kann, wenn die Assembly unter einem anderen Betriebssystem ausgeführt wird, sondern tatsächlich auch auf den lokalen Computern der Entwickler unterschiedlich sein kann, was offensichtlich zu einem Fehler während der Verknüpfung führt.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Über die Wahl</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hauptwahlen, die wir tagsüber abgehalten haben. </font><font style="vertical-align: inherit;">Etwas mehr als 20 Experten haben an Tests mit unserem Netzwerk teilgenommen. </font><font style="vertical-align: inherit;">21 Projekte wurden in 5 Kategorien bewertet, dh mehr als 100 Einträge mit Stimmen für Projekte wurden in das Register aufgenommen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Ergebnis dieses kleinen Forschungsprojekts konnten wir nachweisen, dass die Verwaltung einer verteilten Registrierung auf Mobilgeräten möglich ist! </font><font style="vertical-align: inherit;">Dies eröffnet viele Möglichkeiten für die Verwendung dieser Technologie auf IoT-Geräten zur Organisation von Edge-Computing-Computern. </font><font style="vertical-align: inherit;">Vor uns warten noch Lasttests, Anfälligkeit für Angriffe und Fehlertoleranz. </font><font style="vertical-align: inherit;">Aber wir glauben, dass wir Erfolg haben werden! </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autoren des Artikels: Architekten und Entwickler des Forschungs- und Entwicklungszentrums von MTS Dmitry Dzyuba, Alexey Vasilenko und Semen Nevrev</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de504044/index.html">Verwalten Sie hochverfügbare PostgreSQL-Cluster mit Patroni. A. Klyukin, A. Kukushkin</a></li>
<li><a href="../de504048/index.html">Heben Sie Ihre Hand oder russisches Übersetzungsroulette</a></li>
<li><a href="../de504050/index.html">Was ist gut und was ist schlecht. Entwicklerkarriere mit den Augen seines Führers</a></li>
<li><a href="../de504054/index.html">Wir stellen einen Arcade-Automaten mit einem Geldscheinprüfer und einem Münzprüfer her</a></li>
<li><a href="../de504056/index.html">Informationen zum Ansehen eines Films in englischer Sprache mit Untertiteln, zum Vereinfachen mit zweisprachigen Untertiteln und zum zweisprachigen Untertitel</a></li>
<li><a href="../de504060/index.html">"Tag der Ilona Maske." Der erste Flug der NASA-Astronauten mit SpaceXs Crew Dragon</a></li>
<li><a href="../de504064/index.html">Wie wir auf die Verwendung des Styled-Systems zur Herstellung von Komponenten verzichteten und unser eigenes Fahrrad erfanden</a></li>
<li><a href="../de504066/index.html">Wie Amazon Kunden zurückgewinnen wird</a></li>
<li><a href="../de504068/index.html">Der Doktorand löste das Problem des „Conway Node“, um das sie jahrzehntelang kämpften</a></li>
<li><a href="../de504070/index.html">Der Doktorand hat vor einem halben Jahrhundert ein topologisches Problem gelöst</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>