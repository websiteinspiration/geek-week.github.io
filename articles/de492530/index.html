<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ù£Ô∏è üå¶Ô∏è ü§òüèª Kombinieren Sie MVVMs in UIKit- und SwiftUI-Anwendungen f√ºr UIKit-Entwickler ü§¶üèª üí∂ ‚ÅâÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir wissen, dass ObservableObject-Klassen mit ihren @PublishedEigenschaften Combinespeziell f√ºr View Modelin erstellt werden SwiftUI. Aber genau das g...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kombinieren Sie MVVMs in UIKit- und SwiftUI-Anwendungen f√ºr UIKit-Entwickler</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/492530/"><img src="https://habrastorage.org/webt/ku/lm/v5/kulmv5qftg5ynrc21jjj3rou7ro.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir wissen, dass </font></font><code>ObservableObjec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t-Klassen mit ihren </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eigenschaften </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">speziell f√ºr </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in erstellt werden </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Aber genau das gleiche </font></font><code> View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kann bei der </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementierung der Architektur verwendet werden&nbsp; </font></font><code>MVVM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, obwohl wir in diesem Fall </font></font><code>bind</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elemente </font><font style="vertical-align: inherit;">manuell </font><font style="vertical-align: inherit;">an die </font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eigenschaften von </font></font><code>View Mode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l </font><font style="vertical-align: inherit;">binden m√ºssen </font><font style="vertical-align: inherit;">. Sie werden √ºberrascht sein, aber mit Hilfe </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dieser werden einige Codezeilen erstellt. Wenn </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie sich </font><font style="vertical-align: inherit;">beim Entwerfen von </font><font style="vertical-align: inherit;">Anwendungen </font><font style="vertical-align: inherit;">an diese Ideologie halten </font><font style="vertical-align: inherit;">, wechseln Sie anschlie√üend problemlos zu </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Zweck dieses Artikel ist mit einem primitiv einfachen Beispiel zu zeigen , </font><font style="vertical-align: inherit;">wie man elegant eine implementieren </font></font><code>MVVM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architektur </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit </font></font><code>&nbsp;Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Im Gegensatz dazu zeigen wir die Verwendung derselben</font></font><code>View Model </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Artikel werden zwei einfache Anwendungen erl√§utert, mit denen Sie </font><font style="vertical-align: inherit;">die neuesten Wetterinformationen f√ºr eine bestimmte Stadt </font><font style="vertical-align: inherit;">auf der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWeatherMa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> p- </font><font style="vertical-align: inherit;">Website ausw√§hlen k√∂nnen </font><font style="vertical-align: inherit;">. Aber </font></font><code> UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einer von ihnen wird mit der Anwendung erstellt </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, der andere mit Hilfe </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. F√ºr den Benutzer sehen diese Anwendungen fast gleich aus. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3r/2m/mo/3r2mmow1d4zuhf7a8gcaabv6adi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Code ist auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Benutzeroberfl√§che ( </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) enth√§lt nur zwei </font></font><code>UI </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elemente: ein Textfeld zur Eingabe der Stadt und eine Beschriftung zur Anzeige der Temperatur. Das Textfeld f√ºr die Eingabe der Stadt ist das aktive INPUT ( </font></font><code>Input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), und die Temperaturbezeichnung ist das passive EXIT ( </font></font><code>Output</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).&nbsp;&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Rolle </font></font><code>View Model </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in der Architektur </font></font><code>MVVM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">besteht darin, dass sie die EINGABE (n) von </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(oder </font></font><code>ViewController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">√ºbernimmt </font><font style="vertical-align: inherit;">, die Gesch√§ftslogik der Anwendung implementiert und die AUSGABEN an </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(oder </font></font><code>ViewController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">zur√ºckgibt&nbsp; </font><font style="vertical-align: inherit;">, wobei diese Daten m√∂glicherweise im gew√ºnschten Format dargestellt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">egal , </font><font style="vertical-align: inherit;">welche Art von Business - </font><font style="vertical-align: inherit;">Logik - synchron oder asynchron - sehr einfach , </font><font style="vertical-align: inherit;">wenn Sie eine verwenden </font></font><code>ObservableObject </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klasse mit ihren </font></font><code> @Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eigenschaften.</font></font><br>
<br>
<h2>   <code>API</code>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">OpenWeatherMap</a></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obwohl Sie mit dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWeatherMap-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dienst&nbsp; </font><font style="vertical-align: inherit;">&nbsp; sehr umfangreiche Wetterinformationen ausw√§hlen k√∂nnen, ist das Modell der Daten, an denen wir interessiert sind, sehr einfach. Es enth√§lt detaillierte Informationen&nbsp; </font></font><code>WeatherDetail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zum aktuellen Wetter in der ausgew√§hlten Stadt und befindet sich in der Datei&nbsp; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Model.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nn/mk/bp/nnmkbpg0dfdnan0olkkx_amlwus.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obwohl wir uns bei dieser speziellen Aufgabe nur f√ºr die Temperatur interessieren </font></font><code>temp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, welche In der Struktur&nbsp; </font></font><code>Main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bietet das Modell ausf√ºhrliche Informationen zum aktuellen Wetter als Stammstruktur. Sie&nbsp; </font></font><code>WeatherDetail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sind davon √ºberzeugt, dass Sie in Zukunft die Funktionen dieser Anwendung erweitern m√∂chten. Die Struktur </font></font><code>WeatherDetail&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist codierbar. Auf diese Weise k√∂nnen wir die </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daten mit </font><font style="vertical-align: inherit;">nur zwei Codezeilen buchst√§blich </font><font style="vertical-align: inherit;">in das Modell </font><font style="vertical-align: inherit;">decodieren&nbsp; </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Struktur&nbsp; </font></font><code>WeatherDetail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;sollte auch sein</font></font><code>Identifiable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wenn wir es uns in Zukunft leichter machen wollen, eine Reihe von Wettervorhersagen </font></font><code>[WeatherDetail]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;f√ºr mehrere Tage im Voraus in Form einer Liste&nbsp; </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;von </font><font style="vertical-align: inherit;">anzuzeigen&nbsp; </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dies ist auch ein Leerzeichen f√ºr eine zuk√ºnftige anspruchsvollere aktuelle Wetter-App. Das Protokoll </font></font><code>Identifiable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erfordert das Vorhandensein der Eigenschaft </font></font><code> id,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, die wir bereits haben, so dass keine zus√§tzlichen Anstrengungen von uns erforderlich sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Regel </font><font style="vertical-align: inherit;">bieten </font><font style="vertical-align: inherit;">Dienste, einschlie√ülich des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWeatherMap-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dienstes&nbsp; </font><font style="vertical-align: inherit;">, alle Arten von Diensten </font></font><code>URLs </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an, um die von uns ben√∂tigten Ressourcen zu erhalten. Der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWeatherMap-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Service&nbsp; </font><font style="vertical-align: inherit;">bietet uns die M√∂glichkeit, </font></font><code>URLs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">detaillierte Informationen √ºber das aktuelle Wetter oder die Vorhersage f√ºr 5 Tage in einer bestimmten Stadt abzurufen </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In dieser Anwendung interessieren uns nur aktuelle Wetterinformationen und f√ºr diesen Fall</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berechnet mit der Funktion </font></font><code>absoluteURL (city: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i1/3i/ha/i13ihapejao-kzmclk5fz1k4vni.png"><br>
<br>
<code>API</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;F√ºr den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWeatherMap-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dienst platzieren </font><font style="vertical-align: inherit;">&nbsp;wir ihn in der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WeatherAPI.swift-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Datei </font><font style="vertical-align: inherit;">. Sein zentraler Teil wird eine Methode zur Auswahl detaillierter Wetterinformationen&nbsp; </font></font><code>WeatherDetail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in einer Stadt sein&nbsp; </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<ul>
<li><code>fetchWeather (for city: String) -&gt; AnyPublisher&lt;WeatherDetail, Never&gt;</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Rahmen des Frameworks gibt </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;diese Methode nicht nur detaillierte Wetterinformationen zur√ºck&nbsp; </font></font><code>WeatherDetail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sondern auch den entsprechenden "Herausgeber" </font></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Unser "Herausgeber" </font></font><code>AnyPublisher&lt;WeatherDetail, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gibt keinen Fehler zur√ºck - </font></font><code>Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und wenn immer noch ein Stichproben- oder Codierungsfehler aufgetreten ist, kehrt der Stellvertreter&nbsp; </font></font><code>WeatherDetail.placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ohne zus√§tzliche Meldungen zur Fehlerursache zur√ºck.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betrachten Sie die Methode </font></font><code>fetchWeather (for city: String) -&gt; AnyPublisher&lt;WeatherDetail, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mit der </font><font style="vertical-align: inherit;">&nbsp;detaillierte Wetterinformationen f√ºr die Stadt </font><font style="vertical-align: inherit;">auf der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWeatherMap-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Website ausgew√§hlt werden </font></font><code>&nbsp;city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und keine Fehler zur√ºckgegeben </font><font style="vertical-align: inherit;">werden&nbsp; </font><font style="vertical-align: inherit;">, </font><font style="vertical-align: inherit;">genauer </font></font><code>Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3h/am/tl/3hamtl2_qeyqozmtw3vnp6ezmeq.png"><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">basierend auf dem Namen der Stadt, wir&nbsp; </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;bilden </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;die Funktion mit </font></font><code>absoluteURL(city:city)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">detaillierten Wetterinformationen anzufordern&nbsp; </font></font><code>WeatherDetail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></li>
<li> ¬´¬ª <code>dataTaskPublisher(for:)</code>,     <code>Output</code>   <code>(data: Data, response: URLResponse)</code>, &nbsp; <code>Failure</code>&nbsp;-&nbsp;<code>URLError</code>,</li>
<li>  <code>map { }</code>    (<code>data: Data, response: URLResponse) </code>    &nbsp;<code>data</code>,&nbsp;</li>
<li> <code>JSON </code>&nbsp;<code>data</code>   ,   &nbsp;<code>WeatherDetail</code>,     ,</li>
<li>  -     ¬´¬ª   &nbsp;<code>catch (error ... )</code>&nbsp;  ¬´¬ª <code>WeatherDetail.placeholder</code>,</li>
<li>  <code> main</code> ,          <code>UI</code>,</li>
<li>¬´¬ª  ¬´¬ª   <code>eraseToAnyPublisher()</code>    <code>AnyPublisher</code>.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der so erhaltene asynchrone "Verlag" </font></font><code>AnyPublisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hebt nicht von selbst ab, liefert nichts, bis jemand ihn "abonniert". </font><font style="vertical-align: inherit;">Wir werden es in einer verwenden&nbsp; </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;Klasse , </font><font style="vertical-align: inherit;">die eine Rolle spielt </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in&nbsp; </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beide und </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.&nbsp;</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansichtsmodell erstellen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So </font></font><code> View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erstellen Sie eine sehr einfache Klasse&nbsp; </font></font><code>TempViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, die ein Protokoll </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;mit zwei&nbsp; </font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eigenschaften </font><font style="vertical-align: inherit;">implementiert </font><font style="vertical-align: inherit;">: &nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/db/gz/mt/dbgzmtbrpltinyd30ap_j6ykiok.png"><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine davon&nbsp; </font></font><code>@Published var city: String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist die Stadt (Sie k√∂nnen sie bedingt als EINGANG bezeichnen, da ihr Wert vom Benutzer am geregelt wird </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).&nbsp;&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das zweite&nbsp; </font></font><code>@Published var currentWeather = WeatherDetail.placeholder </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist das Wetter in dieser Stadt im Moment (wir k√∂nnen diese Eigenschaft unter der Bedingung EXIT nennen, da sie durch Abrufen von Daten von der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWeatherMap-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Website erhalten wird&nbsp; </font><font style="vertical-align: inherit;">).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobald wir eine&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;Eigenschaft festgelegt haben&nbsp; </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, k√∂nnen wir sie sowohl als einfache Eigenschaft&nbsp; </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">als auch als "Herausgeber" verwenden&nbsp; </font></font><code>$city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einer Klasse&nbsp; </font></font><code>TempViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k√∂nnen Sie nicht nur die f√ºr uns interessanten Eigenschaften deklarieren, sondern auch die Gesch√§ftslogik ihrer Interaktion vorschreiben. Zu diesem Zweck </font><font style="vertical-align: inherit;">k√∂nnen wir </font><font style="vertical-align: inherit;">beim Initialisieren einer Instanz der Klasse&nbsp; </font></font><code>TempViewModel&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code>init?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ein ‚ÄûAbonnement‚Äú erstellen, das w√§hrend des gesamten ‚ÄûLebenszyklus‚Äú der Instanz der Klasse funktioniert&nbsp; </font></font><code>TempViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und die Abh√§ngigkeit des aktuellen Wetters </font></font><code>currentWeather</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;von der Stadt&nbsp; </font><font style="vertical-align: inherit;">reproduziert&nbsp; </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dazu </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strecken wir die Kette von der Eingabe "Herausgeber" </font></font><code>$city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;zur Ausgabe "Herausgeber" </font></font><code>AnyPublisher&lt;WeatherDetail, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, deren Wert das aktuelle Wetter ist. Anschlie√üend ‚Äûabonnieren‚Äú wir es mit Hilfe eines ‚ÄûAbonnenten‚Äú&nbsp;</font></font><code>assign (to: \.currentWeather, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;und erhalten Sie den gew√ºnschten Wert des aktuellen Wetters&nbsp; </font></font><code>currentWeather</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;als "Ausgabe"&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;-Eigenschaft. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir m√ºssen die Kette NICHT einfach aus den Eigenschaften ziehen </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, n√§mlich aus den "Verlegern" </font></font><code>$city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, die an der Erstellung teilnehmen werden, </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;und dort werden wir sie √§ndern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie machen wir das? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben bereits eine Funktion in unserem Arsenal </font></font><code> fetchWeather (for city: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, die sich in der Klasse befindet&nbsp; </font></font><code>WeatherAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und den "Herausgeber" </font></font><code>AnyPublisher&lt;WeatherDetail, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;mit detaillierten Wetterinformationen je nach Stadt&nbsp; </font><font style="vertical-align: inherit;">zur√ºckgibt </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und wir k√∂nnen den Wert des "Herausgebers" nur irgendwie verwenden&nbsp; </font></font><code>$city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, um daraus ein Argument dieser Funktion zu machen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;Gehen Sie zum richtigen Verlag&nbsp; </font></font><code>fetchWeather (for city: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;, </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um uns </font><font style="vertical-align: inherit;">zu&nbsp; </font><font style="vertical-align: inherit;">helfen: Betreiber&nbsp; </font></font><code>flatMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/1r/9j/wz1r9juemdlcse18ko2k4xcvgcs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betreiber</font></font><code>flatMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erstellt einen neuen "Herausgeber" basierend auf Daten, die vom vorherigen "Herausgeber" empfangen wurden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes "abonnieren" wir diesen neu empfangenen "Verlag" mit Hilfe eines sehr einfachen "Abonnenten"&nbsp; </font></font><code>assign (to: \.currentWeather, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und weisen der </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eigenschaft&nbsp; </font><font style="vertical-align: inherit;">den vom "Verlag" erhaltenen Wert zu </font></font><code>currentWeather</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yg/ug/yt/ygugytbie7fl6ezfiala6jn-p9o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben gerade einen </font></font><code>init( )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ASYNCHRONEN "Verlag" erstellt und "abonniert", was zu einem </font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Abonnement" f√ºhrt. ". </font></font><br>
<br>
<code>AnyCancellable </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das "Abonnement" erm√∂glicht es dem Anrufer, das "Abonnement" jederzeit zu k√ºndigen und keine Werte mehr vom "Herausgeber" zu erhalten. Dar√ºber hinaus </font></font><code>&nbsp;AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird der vom "Herausgeber" belegte Speicher freigegeben </font><font style="vertical-align: inherit;">, sobald das </font><font style="vertical-align: inherit;">"Abonnement" seinen G√ºltigkeitsbereich verl√§sst. Daher wird </font></font><code>init( ) </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dieses ‚ÄûAbonnement‚Äú vom System gel√∂scht </font><font style="vertical-align: inherit;">, sobald es </font><font style="vertical-align: inherit;">abgeschlossen ist&nbsp;</font></font><code>ARC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und keine Zeit haben, die asynchronen Informationen √ºber das aktuelle Wetter mit einer Zeitverz√∂gerung zuzuweisen&nbsp; </font></font><code>currentWeather</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Um ein solches "Abonnement" zu speichern, muss eine OUTSIDE- </font></font><code>init()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variable erstellt </font></font><code>var&nbsp;cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">werden, die unser </font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Abonnement" w√§hrend des gesamten "Lebenszyklus" der Klasseninstanz in dieser Variablen&nbsp; </font><font style="vertical-align: inherit;">beh√§lt </font></font><code>TempViewMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das </font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Abonnement" in der Variablen </font><font style="vertical-align: inherit;">
wird </font></font><code>cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit dem Operator&nbsp; </font><font style="vertical-align: inherit;">gespeichert </font></font><code>store ( in: &amp;self.cancellableSet)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dq/xh/y9/dqxhy9d4lnobqznxdlhx_lt83k4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dadurch bleibt das "Abonnement" w√§hrend des gesamten "Lebenszyklus" der Klasseninstanz erhalten&nbsp; </font></font><code>TempViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Wir k√∂nnen den Wert des Verlags nach Wunsch √§ndern </font></font><code>$city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und das aktuelle Wetter </font></font><code>currentWeather</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;f√ºr diese Stadt </font><font style="vertical-align: inherit;">wird immer zu unserer Verf√ºgung stehen </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Anzahl der Serveranrufe bei der Eingabe einer Stadt zu reduzieren&nbsp;</font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir sollten nicht direkt den ‚ÄûHerausgeber‚Äú der Zeile mit dem Namen der Stadt verwenden&nbsp; </font></font><code>$city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sondern die ge√§nderte Version mit Operatoren </font></font><code>debounce</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>removeDuplicates</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ho/m9/ho/hom9ho7cbdou92ol4fd6dizlqd4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Operator wird&nbsp; </font></font><code>debounce</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;verwendet, um zu warten, bis der Benutzer die erforderlichen Informationen auf der Tastatur eingegeben hat, und die ressourcenintensive Aufgabe nur einmal auszuf√ºhren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ebenso ver√∂ffentlicht ein Operator </font></font><code>removeDuplicates</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Werte nur, wenn sie sich von vorherigen Werten unterscheiden. </font><font style="vertical-align: inherit;">Wenn der Benutzer zum Beispiel zuerst eintritt </font></font><code>john</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font><font style="vertical-align: inherit;">erhalten wir </font><font style="vertical-align: inherit;">dann </font></font><code>joe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und wieder </font><font style="vertical-align: inherit;">nur einmal. </font><font style="vertical-align: inherit;">Dies tr√§gt dazu bei, unsere </font><font style="vertical-align: inherit;">effizienter zu machen.</font></font><code>john</code><font style="vertical-align: inherit;"></font><code>john</code><font style="vertical-align: inherit;"></font><code>UI</code><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen einer Benutzeroberfl√§che mit SwiftUI</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt, wo wir es haben </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font><font style="vertical-align: inherit;">fangen wir </font><font style="vertical-align: inherit;">an </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Erst um </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und dann um </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In </font></font><code>Xcode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erstellen </font><font style="vertical-align: inherit;">wir </font><font style="vertical-align: inherit;">ein neues Projekt mit </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und in der resultierenden Struktur platzieren wir </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp; unser&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">als </font></font><code> @ObservedObject </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variable </font></font><code>model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Durch </font></font><code>Text ("Hello, World!") </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">den Titel&nbsp; </font><font style="vertical-align: inherit;">ersetzen&nbsp; </font></font><code>Text ("WeatherApp")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ein Textfeld zur Eingabe der Stadt </font></font><code>TextField ("City", text: self.$model.city)&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und eine Beschriftung zur Anzeige der Temperatur </font><font style="vertical-align: inherit;">hinzuf√ºgen&nbsp; </font><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zz/oc/si/zzocsimzbd7bpssf_-ckigkggdi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben die Werte unserer Variablen direkt verwendet </font></font><code>model:&nbsp;TempViewModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Wir haben im Textfeld die Stadt eingegeben </font></font><code>$model.city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und im Etikett die Temperatur angezeigt - </font></font><code>model.currentWeather.main?.temp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ñnderungen an den&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;Eigenschaften f√ºhren nun zu einem "Neuzeichnen" </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sd/jx/uk/sdjxukkrljf2xfbo944koyt4ee4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies wird durch die Tatsache sichergestellt, dass dies bei uns der Fall </font></font><code>View Model </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist</font></font><code>@ObservedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das hei√üt, die automatische Bindung ( </font></font><code>binding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unserer Eigenschaften </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und Elemente der Benutzeroberfl√§che ( </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">wird ausgef√ºhrt </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Eine solche AUTOMATISCHE "Bindung" ist nur in m√∂glich </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen einer Benutzeroberfl√§che mit UIKit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was tun damit </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">Es ist nicht da&nbsp;  </font></font><code>@ObservedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In werden&nbsp; </font></font><code>UIKit </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wir die "Bindung" ( </font></font><code>binding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) manuell durchf√ºhren. </font><font style="vertical-align: inherit;">Es gibt viele M√∂glichkeiten, diese ‚Äûmanuelle Bindung‚Äú durchzuf√ºhren:</font></font><br>
<br>
<ul>
<li><code>Key-Value Observing </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder </font></font><code>KVO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: ein Mechanismus&nbsp; </font></font><code>key paths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zum √úberwachen einer Eigenschaft und zum Empfangen einer Benachrichtigung, dass sie ge√§ndert wurde.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funktionale reaktive Programmierung oder </font></font><code>FRP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Verwendung eines Frameworks </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><code>Delegation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Verwenden von Delegate-Methoden zum Senden einer Benachrichtigung, dass sich ein Eigenschaftswert ge√§ndert hat.</font></font></li>
<li><code>Boxing</code>:    <code>didSet { }</code>    ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angesichts des Titels des Artikels werden wir nat√ºrlich vor Ort arbeiten </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In der </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendung zeigen wir, wie einfach es ist, eine ‚Äûmanuelle Bindung‚Äú durchzuf√ºhren </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendung haben wir auch zwei </font></font><code>UI </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elemente: </font></font><code>UITextField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zum Betreten der Stadt und </font></font><code> UILabel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zum Anzeigen der Temperatur. In werden </font></font><code>ViewController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wir nat√ºrlich folgende </font></font><code>Outlet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elemente haben: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dc/_w/xs/dc_wxscdvx2gfvhkzpn2sppn_k8.png"><br>
<br>
<img src="https://habrastorage.org/webt/dp/hi/du/dphidu2qg7ym1bn1sorekv0opts.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Form einer gew√∂hnlichen Variablen </font></font><code>viewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">haben wir das gleiche wie </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im vorherigen Abschnitt: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/py/lr/n1/pylrn1luepommf97vwrthhyz3oy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bevor wir die ‚Äûmanuelle Bindung‚Äú mit durchf√ºhren </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, machen wir das Textfeld zu </font></font><code>UITextField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unserem Verb√ºndeten und zum ‚ÄûHerausgeber‚Äú unseres Inhalts </font></font><code>text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z0/dn/wg/z0dnwgxqkqam7mcy8qbyo6ajvx4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf diese Weise k√∂nnen wir die </font></font><code>viewDidLoad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manuelle Bindung mithilfe der Funktion </font><font style="vertical-align: inherit;">sehr einfach </font><font style="vertical-align: inherit;">implementieren</font></font><code>binding ()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/q0/qu/-f/q0qu-ftfjqr_giedbnah50cwe2m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir ‚Äûsubscribe‚Äú in die ‚ÄûPublisher‚Äú In der </font><font style="vertical-align: inherit;">Tat </font></font><code> cityTextField.textPublisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit Hilfe eines sehr einfachen ‚ÄûTeilnehmer‚Äú&nbsp; </font></font><code>assign (to: \.city, on: viewModel)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und weisen Sie </font><font style="vertical-align: inherit;">den Text vom Benutzer in dem Textfeld eingegeben hat, </font></font><code>cityTextField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um unser ‚Äûinput‚Äú&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eigentum von </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uns </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dar√ºber hinaus nehmen wir √Ñnderungen in eine andere Richtung vor: Wir ‚Äûabonnieren‚Äú die </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eigenschaft&nbsp; </font><font style="vertical-align: inherit;">‚ÄûAusgabe‚Äú&nbsp; </font></font><code>$currentWeather</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;mit Hilfe des ‚ÄûTeilnehmers‚Äú </font></font><code>sink </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und dessen Schlie√üung </font></font><code>receiveValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, bilden den Temperaturwert und weisen ihn dem Etikett zu </font></font><code> temperatureLabel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im </font></font><code>viewDidLoad&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Abonnement" </font><font style="vertical-align: inherit;">empfangen&nbsp; </font><font style="vertical-align: inherit;">wird in einer Variablen gespeichert </font></font><code>var&nbsp;cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Nachdem wir sie einmal erstellt haben, erm√∂glichen wir ihnen, w√§hrend des gesamten ‚ÄûLebenszyklus‚Äú der Klasseninstanz </font></font><code>ViewController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und zusammen mit dem ‚ÄûAbonnement‚Äú in unserer zu handeln&nbsp;</font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementieren Sie die gesamte Gesch√§ftslogik der Anwendung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Protokoll </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">funktioniert </font><font style="vertical-align: inherit;">√ºbrigens </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nicht, st√∂rt aber nicht. </font></font><code>UIKit </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Protokoll ist v√∂llig gleichg√ºltig </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und k√∂nnte im Prinzip&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code>UIKit </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendungen entfernt werden: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wp/fs/pi/wpfspirlf9jp-e2magbcorvzany.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden dies jedoch nicht tun, da wir es </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sowohl f√ºr die aktuelle Anwendung als auch f√ºr </font></font><code> UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zuk√ºnftige Anwendungen </font><font style="vertical-align: inherit;">unver√§ndert lassen m√∂chten </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist alles. Der Code ist auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fazit </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein funktionales reaktives Framework </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">macht es sehr einfach und pr√§zise, ‚Äã‚Äãdie </font></font><code> MVVM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architektur sowohl </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">als auch in Form von verst√§ndlichem und lesbarem Code </font><font style="vertical-align: inherit;">zu implementieren </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Links: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kombinieren Sie + UIKit + MVVM</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden von Combine </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iOS MVVM Tutorial: Refactoring von MVC </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVVM mit Combine Tutorial f√ºr iOS</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PS Wenn Sie einige Wetterinformationen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anzeigen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> m√∂chten, m√ºssen Sie sich bei </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">OpenWeatherMap</font></a><font style="vertical-align: inherit;"> registrieren </font><font style="vertical-align: inherit;">&nbsp;und diese </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">abrufen</font></a></font><code> API key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dieser Vorgang dauert nicht l√§nger als 2 Minuten.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de492514/index.html">Wie kann ein rechtlich bedeutender elektronischer Dokumentenfluss von Gegenparteien in Russland und Kasachstan hergestellt werden?</a></li>
<li><a href="../de492518/index.html">Der Ausbruch von Viren erfordert Remote-Arbeit, dh das digitale Signieren von Dokumenten</a></li>
<li><a href="../de492520/index.html">Parametrisierte 3D-Modellierung der Lagerschale in nanoCAD Plus 20</a></li>
<li><a href="../de492522/index.html">Remote-Team-Kommunikation</a></li>
<li><a href="../de492524/index.html">Wie ich ohne Erfahrung und Verbindungen 1.000.000 USD verdient und sie dann ausgegeben habe, um meinen √úbersetzer zu machen</a></li>
<li><a href="../de492534/index.html">Gibt es also echte Hurrikane in Moskau oder nicht? Wir analysieren den Fall vom 13. M√§rz 2020 in Verfolgung</a></li>
<li><a href="../de492538/index.html">Wrike TechClub: Bereitstellungsinfrastruktur - Prozesse und Tools (DevOps + QAA). Beitr√§ge in englischer Sprache</a></li>
<li><a href="../de492540/index.html">Das Spiel "Warte einen Moment!" auf Arduino</a></li>
<li><a href="../de492546/index.html">√úberpr√ºfen der Sicherheitsanf√§lligkeit einer Website mit Nikto</a></li>
<li><a href="../de492548/index.html">Unity Machine Learning: Unterrichten von MO-Agenten, √ºber W√§nde zu springen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>