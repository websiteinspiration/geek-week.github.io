<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚼 👌🏻 🤛🏿 Smem-Linuxでのプロセスとユーザー間のメモリ割り当てに関するレポート 👊🏻 ⚓️ 🤰🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="また会いましたね。 Linuxでのメモリ使用量の監視に関する有用な資料の翻訳を皆さんと共有したいと思います。この資料は、Linuxアドミニストレーターコースの受講者向けに特別に作成されています。
 
 
 
 使用状況の監視におけるメモリの管理は、Linuxシステムで最も重要な領域の1つです。さまざ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Smem-Linuxでのプロセスとユーザー間のメモリ割り当てに関するレポート</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/459234/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">また会いましたね。 Linuxでのメモリ使用量の監視に関する有用な資料の翻訳を皆さんと共有したいと思います。この資料は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Linuxアドミニストレーター</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コースの受講</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">者</font></a><font style="vertical-align: inherit;">向けに特別に作成されてい</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gd/_-/sj/gd_-sjc82njyoarkyctq2zzpf24.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用状況の監視におけるメモリの管理は、Linuxシステムで最も重要な領域の1つです。さまざまなLinuxディストリビューションには、メモリ使用量を監視するための非常に多くのツールがあります。また、さまざまな方法で機能しますが、この記事では、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smem</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">などのツールのインストールと使用について検討します</font><font style="vertical-align: inherit;">。</font></font><a name="habracut"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Smem</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、Linuxシステムでのメモリ使用量のさまざまな要約をユーザーに提供するコマンドラインレポートツールです。で</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SMEMは、</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">従来のメモリ監視ツールと区別する1つのユニークなものを持っています。実際のところ、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smem</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はPSS（Proportional Set Size）</font><font style="vertical-align: inherit;">を</font><b><font style="vertical-align: inherit;">通知し</font></b><font style="vertical-align: inherit;">ます。つまり、仮想メモリ設定でのアプリケーションとライブラリ間のメモリの分布をより完全に把握できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7k/np/eq/7knpeqc_qoe5gw0fn6ax7k2c3d0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
既存の従来のツールは、主にRSS（常駐セットサイズ）の読み取りに重点を置いています。物理メモリスキームでのメモリ使用量の監視の標準的な測定に基づいていますが、アプリケーションによるメモリ使用量を過大評価する傾向があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一方、PSSは、仮想メモリスキーム内のアプリケーションとライブラリ間の公平な配分を決定することにより、メモリ使用量を合理的に評価します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ガイド（PSSおよびRSSメモリについて）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">参照する</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">と</font></a><font style="vertical-align: inherit;">、Linuxシステムでのメモリ消費メカニズムを理解できます。</font><font style="vertical-align: inherit;">それでは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smemの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いくつかの機能に移りましょう</font><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">Smemの</font></b></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 機能</font><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システム概要リスト;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロセス、マッピング、およびユーザーによるリストおよびフィルタリング。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ procファイルシステムのデータを使用します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複数のデータソースのカスタムリスト列。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構成可能な出力ブロックとパーセンテージ。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リストの見出しと合計を簡単に設定できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクトリミラーまたは圧縮tarファイルのスナップショットを使用します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">組み込みのダイアグラム生成メカニズム。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">組み込みシステムで使用される軽量のキャプチャツール。</font></font></li>
</ul><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Smemのインストール方法-Linuxメモリ監視ツール</font></font></h3><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smem</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
のインストールに進む前に</font><font style="vertical-align: inherit;">、システムが次のパラメータを満たしていることを確認する必要があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最新のコア（2.6.27からのバージョン）;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonの現在のバージョン（2.4からサポート）;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図を生成するための</font><font style="vertical-align: inherit;">オプションの</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matplotlib</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリ</font><font style="vertical-align: inherit;">。</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今日のほとんどのLinuxディストリビューションには、Python 2または3をサポートする最新のカーネルが付属しているため、実際に唯一の要件は、</font><font style="vertical-align: inherit;">美しいグラフを描く</font><font style="vertical-align: inherit;">ための</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matplotlibの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インストールだけ</font><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RHEL、CentOS、およびFedoraの場合</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、EPEL（Enterprise Linuxの追加パッケージ）リポジトリを有効にしてから、以下をインストールします。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># yum install smem python-matplotlib python-tk</span></code></pre><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DebianおよびUbuntuシステムの場合</font></font></h4><br>
<pre><code class="bash hljs">$ sudo apt-get install smem</code></pre><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux Mintの場合</font></font></h4><br>
<pre><code class="bash hljs">$ sudo apt-get install smem python-matplotlib python-tk</code></pre><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arch Linuxの場合</font></font></h4><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このAURリポジトリを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
使用してください</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Smemの使い方</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのシステムユーザーによるシステムメモリ使用量に関するレポートを表示するには、次のコマンドを入力します。</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo smem <font></font>
<font></font>
Monitor Memory Usage of Linux System<font></font>
 PID User     Command                         Swap      USS      PSS      RSS <font></font>
 6367 tecmint  cat                                0      100      145     1784 <font></font>
 6368 tecmint  cat                                0      100      147     1676 <font></font>
 2864 tecmint  /usr/bin/ck-launch-session         0      144      165     1780 <font></font>
 7656 tecmint  gnome-pty-helper                   0      156      178     1832 <font></font>
 5758 tecmint  gnome-pty-helper                   0      156      179     1916 <font></font>
 1441 root     /sbin/getty -8 38400 tty2          0      152      184     2052 <font></font>
 1434 root     /sbin/getty -8 38400 tty5          0      156      187     2060 <font></font>
 1444 root     /sbin/getty -8 38400 tty3          0      156      187     2060 <font></font>
 1432 root     /sbin/getty -8 38400 tty4          0      156      188     2124 <font></font>
 1452 root     /sbin/getty -8 38400 tty6          0      164      196     2064 <font></font>
 2619 root     /sbin/getty -8 38400 tty1          0      164      196     2136 <font></font>
 3544 tecmint  sh -c /usr/lib/linuxmint/mi        0      212      224     1540 <font></font>
 1504 root     acpid -c /etc/acpi/events -        0      220      236     1604 <font></font>
 3311 tecmint  syndaemon -i 0.5 -K -R             0      252      292     2556 <font></font>
 3143 rtkit    /usr/lib/rtkit/rtkit-daemon        0      300      326     2548 <font></font>
 1588 root     cron                               0      292      333     2344 <font></font>
 1589 avahi    avahi-daemon: chroot helpe         0      124      334     1632 <font></font>
 1523 root     /usr/sbin/irqbalance               0      316      343     2096 <font></font>
  585 root     upstart-socket-bridge --dae        0      328      351     1820 <font></font>
 3033 tecmint  /usr/bin/dbus-launch --<span class="hljs-built_in">exit</span>        0      328      360     2160 <font></font>
 1346 root     upstart-file-bridge --daemo        0      348      371     1776 <font></font>
 2607 root     /usr/bin/xdm                       0      188      378     2368 <font></font>
 1635 kernoops /usr/sbin/kerneloops               0      352      386     2684 <font></font>
  344 root     upstart-udev-bridge --daemo        0      400      427     2132 <font></font>
 2960 tecmint  /usr/bin/ssh-agent /usr/bin        0      480      485      992 <font></font>
 3468 tecmint  /bin/dbus-daemon --config<span class="hljs-_">-f</span>        0      344      515     3284 <font></font>
 1559 avahi    avahi-daemon: running [tecm        0      284      517     3108 <font></font>
 7289 postfix  pickup -l -t unix -u -c            0      288      534     2808 <font></font>
 2135 root     /usr/lib/postfix/master            0      352      576     2872 <font></font>
 2436 postfix  qmgr -l -t unix -u                 0      360      606     2884 <font></font>
 1521 root     /lib/systemd/systemd-logind        0      600      650     3276 <font></font>
 2222 nobody   /usr/sbin/dnsmasq --no-reso        0      604      669     3288 <font></font>
....</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
標準ユーザーが</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smem</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を開始すると、このユーザーを開始したプロセスのメモリ使用量が表示されます。</font><font style="vertical-align: inherit;">プロセスは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によって昇順で編成され</font><font style="vertical-align: inherit;">ます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私のシステムのサンプル出力を見てください。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aaronkilik</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーが開始したプロセスのメモリ使用量は</font><i><font style="vertical-align: inherit;">次の</font></i><font style="vertical-align: inherit;">とおり</font><i><font style="vertical-align: inherit;">です</font></i><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ smem<font></font>
<font></font>
Monitor User Memory Usage <span class="hljs-keyword">in</span> Linux<font></font>
 PID User     Command                         Swap      USS      PSS      RSS <font></font>
 6367 tecmint  cat                                0      100      145     1784 <font></font>
 6368 tecmint  cat                                0      100      147     1676 <font></font>
 2864 tecmint  /usr/bin/ck-launch-session         0      144      166     1780 <font></font>
 3544 tecmint  sh -c /usr/lib/linuxmint/mi        0      212      224     1540 <font></font>
 3311 tecmint  syndaemon -i 0.5 -K -R             0      252      292     2556 <font></font>
 3033 tecmint  /usr/bin/dbus-launch --<span class="hljs-built_in">exit</span>        0      328      360     2160 <font></font>
 3468 tecmint  /bin/dbus-daemon --config<span class="hljs-_">-f</span>        0      344      515     3284 <font></font>
 3122 tecmint  /usr/lib/gvfs/gvfsd                0      656      801     5552 <font></font>
 3471 tecmint  /usr/lib/at-spi2-core/at-sp        0      708      864     5992 <font></font>
 3396 tecmint  /usr/lib/gvfs/gvfs-mtp-volu        0      804      914     6204 <font></font>
 3208 tecmint  /usr/lib/x86_64-linux-gnu/i        0      892     1012     6188 <font></font>
 3380 tecmint  /usr/lib/gvfs/gvfs-afc-volu        0      820     1024     6396 <font></font>
 3034 tecmint  //bin/dbus-daemon --fork --        0      920     1081     3040 <font></font>
 3365 tecmint  /usr/lib/gvfs/gvfs-gphoto2-        0      972     1099     6052 <font></font>
 3228 tecmint  /usr/lib/gvfs/gvfsd-trash -        0      980     1153     6648 <font></font>
 3107 tecmint  /usr/lib/dconf/dconf-servic        0     1212     1283     5376 <font></font>
 6399 tecmint  /opt/google/chrome/chrome -        0      144     1409    10732 <font></font>
 3478 tecmint  /usr/lib/x86_64-linux-gnu/g        0     1724     1820     6320 <font></font>
 7365 tecmint  /usr/lib/gvfs/gvfsd-http --        0     1352     1884     8704 <font></font>
 6937 tecmint  /opt/libreoffice5.0/program        0     1140     2328     5040 <font></font>
 3194 tecmint  /usr/lib/x86_64-linux-gnu/p        0     1956     2405    14228 <font></font>
 6373 tecmint  /opt/google/chrome/nacl_hel        0     2324     2541     8908 <font></font>
 3313 tecmint  /usr/lib/gvfs/gvfs-udisks2-        0     2460     2754     8736 <font></font>
 3464 tecmint  /usr/lib/at-spi2-core/at-sp        0     2684     2823     7920 <font></font>
 5771 tecmint  ssh -p 4521 tecmnt765@212.7        0     2544     2864     6540 <font></font>
 5759 tecmint  /bin/bash                          0     2416     2923     5640 <font></font>
 3541 tecmint  /usr/bin/python /usr/bin/mi        0     2584     3008     7248 <font></font>
 7657 tecmint  bash                               0     2516     3055     6028 <font></font>
 3127 tecmint  /usr/lib/gvfs/gvfsd-fuse /r        0     3024     3126     8032 <font></font>
 3205 tecmint  mate-screensaver                   0     2520     3331    18072 <font></font>
 3171 tecmint  /usr/lib/mate-panel/notific        0     2860     3495    17140 <font></font>
 3030 tecmint  x-session-manager                  0     4400     4879    17500 <font></font>
 3197 tecmint  mate-volume-control-applet         0     3860     5226    23736 <font></font>
...</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
smemの使用中に呼び出すことができる多くのオプションがあります。たとえば、システム全体のメモリ消費量を表示するには、次のコマンドを実行します。</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo smem -w<font></font>
<font></font>
Monitor System Wide Memory User Consumption<font></font>
Area                           Used      Cache   Noncache <font></font>
firmware/hardware                 0          0          0 <font></font>
kernel image                      0          0          0 <font></font>
kernel dynamic memory       1425320    1291412     133908 <font></font>
userspace memory            2215368     451608    1763760 <font></font>
free memory                 4424936    4424936          0 </code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マッピングによってメモリ使用量を確認することもできます。</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo smem -m<font></font>
<font></font>
Monitor Memory Usage by Mappings <span class="hljs-keyword">in</span> Linux<font></font>
Map                                       PIDs   AVGPSS      PSS <font></font>
/dev/fb0                                     1        0        0 <font></font>
/home/tecmint/.cache/fontconfig/7ef2298f    18        0        0 <font></font>
/home/tecmint/.cache/fontconfig/c57959a1    18        0        0 <font></font>
/home/tecmint/.<span class="hljs-built_in">local</span>/share/mime/mime.cac    15        0        0 <font></font>
/opt/google/chrome/chrome_material_100_p     9        0        0 <font></font>
/opt/google/chrome/chrome_material_200_p     9        0        0 <font></font>
/usr/lib/x86_64-linux-gnu/gconv/gconv-mo    41        0        0 <font></font>
/usr/share/icons/Mint-X-Teal/icon-theme.    15        0        0 <font></font>
/var/cache/fontconfig/0c9eb80ebd1c36541e    20        0        0 <font></font>
/var/cache/fontconfig/0d8c3b2ac0904cb8a5    20        0        0 <font></font>
/var/cache/fontconfig/1ac9eb803944fde146    20        0        0 <font></font>
/var/cache/fontconfig/3830d5c3ddfd5cd38a    20        0        0 <font></font>
/var/cache/fontconfig/385c0604a188198f04    20        0        0 <font></font>
/var/cache/fontconfig/4794a0821666d79190    20        0        0 <font></font>
/var/cache/fontconfig/56cf4f4769d0f4abc8    20        0        0 <font></font>
/var/cache/fontconfig/767a8244fc0220cfb5    20        0        0 <font></font>
/var/cache/fontconfig/8801497958630a81b7    20        0        0 <font></font>
/var/cache/fontconfig/99e8ed0e538f840c56    20        0        0 <font></font>
/var/cache/fontconfig/b9d506c9ac06c20b43    20        0        0 <font></font>
/var/cache/fontconfig/c05880de57d1f5e948    20        0        0 <font></font>
/var/cache/fontconfig/dc05db6664285cc2f1    20        0        0 <font></font>
/var/cache/fontconfig/e13b20fdb08344e0e6    20        0        0 <font></font>
/var/cache/fontconfig/e7071f4a29fa870f43    20        0        0 <font></font>
....</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
で</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SMEM</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出力をフィルタリングするためのオプションがあります。</font><font style="vertical-align: inherit;">次に、2つの例を見てみましょう。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザー名（username）による出力のフィルタリング</font><font style="vertical-align: inherit;">は、以下の例のように、</font><font style="vertical-align: inherit;">options </font></font><code>-u </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">またはを</font><font style="vertical-align: inherit;">呼び出すことによって行われ</font></font><code>--userfilter="regex"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo smem -u<font></font>
<font></font>
Report Memory Usage by User<font></font>
User     Count     Swap      USS      PSS      RSS <font></font>
rtkit        1        0      300      326     2548 <font></font>
kernoops     1        0      352      385     2684 <font></font>
avahi        2        0      408      851     4740 <font></font>
postfix      2        0      648     1140     5692 <font></font>
messagebus     1        0     1012     1173     3320 <font></font>
syslog       1        0     1400     1423     3236 <font></font>
www-data     2        0     5100     6572    13580 <font></font>
mpd          1        0     7416     8302    12896 <font></font>
nobody       2        0     4024    11305    24728 <font></font>
root        39        0   323804   353374   496552 <font></font>
tecmint     64        0  1708900  1871766  2819212 </code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロセス名で出力をフィルタリングするには、</font></font><code>-P</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font><font style="vertical-align: inherit;">オプションを有効にします</font></font><code>--processfilter="regex"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo smem --processfilter=<span class="hljs-string">"firefox"</span><font></font>
<font></font>
Report Memory Usage by Process Name<font></font>
PID User     Command                         Swap      USS      PSS      RSS <font></font>
 9212 root     sudo smem --processfilter=f        0     1172     1434     4856 <font></font>
 9213 root     /usr/bin/python /usr/bin/sm        0     7368     7793    11984 <font></font>
 4424 tecmint  /usr/lib/firefox/firefox           0   931732   937590   961504 </code></pre><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
出力のフォーマットは非常に便利な場合があるため、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smem</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はメモリ使用量レポートのフォーマットに役立つオプションを提供します。</font><font style="vertical-align: inherit;">さらに、いくつかの例を検討します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レポートに必要な列のみを表示するには、次のように</font></font><code>-c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">またはを</font><font style="vertical-align: inherit;">使用し</font></font><code>–columns</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo smem -c <span class="hljs-string">"name user pss rss"</span><font></font>
<font></font>
Report Memory Usage by Columns<font></font>
Name                     User          PSS      RSS <font></font>
cat                      tecmint       145     1784 <font></font>
cat                      tecmint       147     1676 <font></font>
ck-launch-sessi          tecmint       165     1780 <font></font>
gnome-pty-helpe          tecmint       178     1832 <font></font>
gnome-pty-helpe          tecmint       179     1916 <font></font>
getty                    root          184     2052 <font></font>
getty                    root          187     2060 <font></font>
getty                    root          187     2060 <font></font>
getty                    root          188     2124 <font></font>
getty                    root          196     2064 <font></font>
getty                    root          196     2136 <font></font>
sh                       tecmint       224     1540 <font></font>
acpid                    root          236     1604 <font></font>
syndaemon                tecmint       296     2560 <font></font>
rtkit-daemon             rtkit         326     2548 <font></font>
cron                     root          333     2344 <font></font>
avahi-daemon             avahi         334     1632 <font></font>
irqbalance               root          343     2096 <font></font>
upstart-socket-          root          351     1820 <font></font>
dbus-launch              tecmint       360     2160 <font></font>
upstart-file-br          root          371     1776 <font></font>
xdm                      root          378     2368 <font></font>
kerneloops               kernoops      386     2684 <font></font>
upstart-udev-br          root          427     2132 <font></font>
ssh-agent                tecmint       485      992 </code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パラメータ</font></font><code>-p</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して、メモリ使用量に関するレポートをパーセンテージで表示</font><font style="vertical-align: inherit;">できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo smem -p<font></font>
<font></font>
Report Memory Usage by Percentages<font></font>
 PID User     Command                         Swap      USS      PSS      RSS <font></font>
 6367 tecmint  cat                            0.00%    0.00%    0.00%    0.02% <font></font>
 6368 tecmint  cat                            0.00%    0.00%    0.00%    0.02% <font></font>
 9307 tecmint  sh -c { sudo /usr/lib/linux    0.00%    0.00%    0.00%    0.02% <font></font>
 2864 tecmint  /usr/bin/ck-launch-session     0.00%    0.00%    0.00%    0.02% <font></font>
 3544 tecmint  sh -c /usr/lib/linuxmint/mi    0.00%    0.00%    0.00%    0.02% <font></font>
 5758 tecmint  gnome-pty-helper               0.00%    0.00%    0.00%    0.02% <font></font>
 7656 tecmint  gnome-pty-helper               0.00%    0.00%    0.00%    0.02% <font></font>
 1441 root     /sbin/getty -8 38400 tty2      0.00%    0.00%    0.00%    0.03% <font></font>
 1434 root     /sbin/getty -8 38400 tty5      0.00%    0.00%    0.00%    0.03% <font></font>
 1444 root     /sbin/getty -8 38400 tty3      0.00%    0.00%    0.00%    0.03% <font></font>
 1432 root     /sbin/getty -8 38400 tty4      0.00%    0.00%    0.00%    0.03% <font></font>
 1452 root     /sbin/getty -8 38400 tty6      0.00%    0.00%    0.00%    0.03% <font></font>
 2619 root     /sbin/getty -8 38400 tty1      0.00%    0.00%    0.00%    0.03% <font></font>
 1504 root     acpid -c /etc/acpi/events -    0.00%    0.00%    0.00%    0.02% <font></font>
 3311 tecmint  syndaemon -i 0.5 -K -R         0.00%    0.00%    0.00%    0.03% <font></font>
 3143 rtkit    /usr/lib/rtkit/rtkit-daemon    0.00%    0.00%    0.00%    0.03% <font></font>
 1588 root     cron                           0.00%    0.00%    0.00%    0.03% <font></font>
 1589 avahi    avahi-daemon: chroot helpe     0.00%    0.00%    0.00%    0.02% <font></font>
 1523 root     /usr/sbin/irqbalance           0.00%    0.00%    0.00%    0.03% <font></font>
  585 root     upstart-socket-bridge --dae    0.00%    0.00%    0.00%    0.02% <font></font>
 3033 tecmint  /usr/bin/dbus-launch --<span class="hljs-built_in">exit</span>    0.00%    0.00%    0.00%    0.03% </code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のコマンドは、各出力列の最後に合計を出力します。</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo smem -t<font></font>
<font></font>
Report Total Memory Usage Count<font></font>
PID User     Command                         Swap      USS      PSS      RSS <font></font>
 6367 tecmint  cat                                0      100      139     1784 <font></font>
 6368 tecmint  cat                                0      100      141     1676 <font></font>
 9307 tecmint  sh -c { sudo /usr/lib/linux        0       96      158     1508 <font></font>
 2864 tecmint  /usr/bin/ck-launch-session         0      144      163     1780 <font></font>
 3544 tecmint  sh -c /usr/lib/linuxmint/mi        0      108      170     1540 <font></font>
 5758 tecmint  gnome-pty-helper                   0      156      176     1916 <font></font>
 7656 tecmint  gnome-pty-helper                   0      156      176     1832 <font></font>
 1441 root     /sbin/getty -8 38400 tty2          0      152      181     2052 <font></font>
 1434 root     /sbin/getty -8 38400 tty5          0      156      184     2060 <font></font>
 1444 root     /sbin/getty -8 38400 tty3          0      156      184     2060 <font></font>
 1432 root     /sbin/getty -8 38400 tty4          0      156      185     2124 <font></font>
 1452 root     /sbin/getty -8 38400 tty6          0      164      193     2064 <font></font>
 2619 root     /sbin/getty -8 38400 tty1          0      164      193     2136 <font></font>
 1504 root     acpid -c /etc/acpi/events -        0      220      232     1604 <font></font>
 3311 tecmint  syndaemon -i 0.5 -K -R             0      260      298     2564 <font></font>
 3143 rtkit    /usr/lib/rtkit/rtkit-daemon        0      300      324     2548 <font></font>
 1588 root     cron                               0      292      326     2344 <font></font>
 1589 avahi    avahi-daemon: chroot helpe         0      124      332     1632 <font></font>
 1523 root     /usr/sbin/irqbalance               0      316      340     2096 <font></font>
  585 root     upstart-socket-bridge --dae        0      328      349     1820 <font></font>
 3033 tecmint  /usr/bin/dbus-launch --<span class="hljs-built_in">exit</span>        0      328      359     2160 <font></font>
 1346 root     upstart-file-bridge --daemo        0      348      370     1776 <font></font>
 2607 root     /usr/bin/xdm                       0      188      375     2368 <font></font>
 1635 kernoops /usr/sbin/kerneloops               0      352      384     2684 <font></font>
  344 root     upstart-udev-bridge --daemo        0      400      426     2132 <font></font>
.....<font></font>
-------------------------------------------------------------------------------<font></font>
  134 11                                          0  2171428  2376266  3587972 </code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、グラフィックサマリーには特別なオプションがあり、これも使用できます。</font><font style="vertical-align: inherit;">このセクションでは、それらについて考察します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロセスとその</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値の</font><font style="vertical-align: inherit;">ヒストグラムを作成でき</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">以下の例では、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rootユーザー</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が所有するプロセスのヒストグラムを作成し</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo smem --userfilter=<span class="hljs-string">"root"</span> --bar pid -c<span class="hljs-string">"pss rss"</span></code></pre><br>
<img src="https://habrastorage.org/webt/vm/fm/5s/vmfm5sxymyijennvehpldyietem.png"><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSSの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値に</font><font style="vertical-align: inherit;">
基づいてプロセスとメモリ消費を反映する円グラフを作成する機会があり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">以下のコマンドは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rootユーザー</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が所有するプロセスの円グラフを表示し、</font><font style="vertical-align: inherit;">キーの値を示しています。</font></font><br>
<code>- - pie</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前によるラベルを意味し、このオプション</font></font><code>-s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値によるソートを支援します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo smem --userfilter=<span class="hljs-string">"root"</span> --pie name -s pss</code></pre><br>
<br>
<img src="https://habrastorage.org/webt/o_/86/3o/o_863oo5ptiwhtcpwqbh_jlptiw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
図のマーキングに使用されるPSSおよびRSS以外にも、他にも多くのフィールドがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ヘルプを表示する</font></font><code>smem -h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">には、ドキュメントを</font><font style="vertical-align: inherit;">入力</font><font style="vertical-align: inherit;">または参照してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここ</font><font style="vertical-align: inherit;">で、この時点</font><font style="vertical-align: inherit;">で</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smem</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">停止し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">このツールをよりよく理解したい場合は、マニュアルページにアクセスしてください。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">役立つリンク：</font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https </font></font></a><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">: </font></b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">//www.selenic.com/smem/</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
コースでお会いしましょう！</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja459220/index.html">メモリーリークをチェックするための統合テスト</a></li>
<li><a href="../ja459224/index.html">不動産業者からゲーム開発者へ2.「オペレーション：Android」</a></li>
<li><a href="../ja459226/index.html">「Fast-PoEとPerpetual-PoE-これらの新しい規格かどうか」</a></li>
<li><a href="../ja459230/index.html">開発者の目を通したコールセンターと製品バックログへの旅</a></li>
<li><a href="../ja459232/index.html">サラウンド、バイト、カット：新しいミニAIカップ＃4コンテスト</a></li>
<li><a href="../ja459236/index.html">SQL：作業時間タスクソリューション</a></li>
<li><a href="../ja459238/index.html">魔法の数学関数から-それらすべてを支配する1つの解決策</a></li>
<li><a href="../ja459240/index.html">統合失調症と診断されたITの10年、生存のヒント</a></li>
<li><a href="../ja459242/index.html">T + Conf 2019カンファレンスに続いて</a></li>
<li><a href="../ja459244/index.html">ノート製品マネージャー：アプリストアのゲームページでのユーザーの行動。ゲームのダウンロードにはどのくらい時間がかかりますか</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>