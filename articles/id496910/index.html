<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍧 🤚🏿 💾 Bangun dan sesuaikan CDN Anda 🚣🏻 ✈️ 👩🏼‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Content Delivery Networks (CDNs) digunakan di situs dan dalam aplikasi terutama untuk mempercepat pemuatan elemen statis. Ini terjadi karena caching f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Bangun dan sesuaikan CDN Anda</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496910/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Content Delivery Networks (CDNs) digunakan di situs dan dalam aplikasi terutama untuk mempercepat pemuatan elemen statis. Ini terjadi karena caching file pada server CDN yang terletak di wilayah geografis yang berbeda. Setelah meminta data melalui CDN, pengguna menerimanya dari server terdekat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prinsip operasi dan fungsionalitas semua jaringan pengiriman konten kira-kira sama. Setelah menerima permintaan untuk mengunduh file, server CDN pernah mengambilnya dari server asli dan memberikannya kepada pengguna, sekaligus melakukan caching untuk periode waktu tertentu. Semua permintaan selanjutnya dijawab dari cache. Semua CDN memiliki opsi untuk preloading file, membersihkan cache, mengatur periode penyimpanannya, dan banyak lagi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kebetulan karena satu dan lain alasan Anda perlu mengatur jaringan pengiriman konten Anda sendiri, dan kemudian - biarkan kami membantu Anda membangun sepeda lain. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qf/rw/ss/qfrwss0k86-bdbbbpztdh3d0nkq.jpeg"><br>
<font color="#B1B1B1"><sup><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sumber: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vektor infografis yang dibuat oleh pikisuperstar - www.freepik.com</font></font></a></i></sup></font><a name="habracut"></a><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saat Anda membutuhkan CDN Anda sendiri</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertimbangkan kasus-kasus ketika memulai CDN Anda sendiri masuk akal:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ketika Anda ingin menghemat uang, dan menjalankan biaya bahkan ketika menggunakan CDN murah seperti </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BunnyCDN</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah beberapa ratus dolar sebulan</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jika kita ingin mendapatkan cache permanen atau cache tanpa tetangga di server dan saluran</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di wilayah yang Anda butuhkan, layanan CDN tidak memiliki titik kehadiran</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengaturan pengiriman konten khusus yang diperlukan</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kami ingin mempercepat pengiriman konten dinamis dengan menempatkan lebih dekat ke pengguna server produksi</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ada kekhawatiran bahwa layanan CDN pihak ketiga dapat secara tidak sah mengumpulkan atau menggunakan informasi tentang perilaku pengguna (halo ke layanan tanpa kepatuhan GDPR) atau terlibat dalam tindakan ilegal lainnya</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kebanyakan kasus lain, lebih disarankan untuk menggunakan solusi yang sudah jadi.</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang perlu Anda jalankan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luar biasa jika Anda memiliki sistem otonom Anda sendiri. </font><font style="vertical-align: inherit;">Dengannya, Anda dapat menetapkan IP yang sama ke beberapa server dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengikuti instruksi ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di tingkat jaringan untuk mengarahkan pengguna ke yang terdekat. </font><font style="vertical-align: inherit;">Perlu dikatakan bahwa meskipun dengan blok alamat / 24, dimungkinkan untuk membangun jaringan pengiriman konten. </font><font style="vertical-align: inherit;">Beberapa penyedia server memungkinkan Anda membuat pengumuman untuk digunakan di semua wilayah yang tersedia bagi mereka. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda bukan pemilik yang senang dengan blok alamat IP, maka untuk menjalankan CDN sederhana Anda perlu:</font></font><br>
<br>
<ul>
<li>   </li>
<li>     .     ,   </li>
<li>geoDNS .    ,   ,     </li>
</ul><br>
<br>
<h2>    </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan registrasi domain, semuanya sederhana - daftar di zona apa pun dengan registrar apa pun. Anda juga dapat menggunakan subdomain untuk CDN, seperti sesuatu seperti </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cdn.namedomain.com</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sebenarnya dalam contoh kita, kita akan melakukannya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adapun server pemesanan, mereka harus disewa di wilayah dan negara di mana audiens pengguna Anda berada. Jika proyek ini antarbenua, akan lebih mudah untuk memilih penyedia hosting yang menawarkan server di seluruh dunia segera. Contoh: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OVH</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leaseweb,</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100Tb</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk server khusus, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vultr</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DigitalOcean</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk cloud virtual *. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk CDN pribadi kami, kami memesan 3 server virtual di berbagai benua. Di </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vultr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di server sebesar </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 5 / bulan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami mendapatkan </font><font style="vertical-align: inherit;">ruang </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSD 25GB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lalu lintas 1TB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Saat memasang, pilih Debian terbaru. </font><font style="vertical-align: inherit;">Server kami: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jy/di/f1/jydif1phgm45zpwjbety-fw_d-g.png" width="30"> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frankfurt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ip: 199.247.18.199 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uk/wh/v1/ukwhv1lwwsr8snoiqc_yyzquo5s.png" width="30"> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chicago</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ip: 149.28.121.123 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3f/qk/6e/3fqk6endcgzeybs-yjlkkphep50.png" width="30"> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Singapura</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ip: 157.230.240.216 </font></font><br>
<br>
<font color="#B1B1B1"><sup><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* Vultr dan DigitalOcean menjanjikan pinjaman $ 100 kepada pengguna yang terdaftar menggunakan tautan dalam artikel segera setelah menambahkan metode pembayaran. </font><font style="vertical-align: inherit;">Penulis juga menerima pujian kecil dari ini, yang sangat penting baginya sekarang. </font><font style="vertical-align: inherit;">Mohon pengertian.</font></font></i></sup></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurasikan geoDNS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sehingga ketika pengguna mengakses domain atau subdomain CDN, ia diarahkan ke server yang diinginkan (paling dekat dengannya), kita memerlukan server DNS dengan fungsi geoDNS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prinsip dan prosedur geoDNS adalah sebagai berikut:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menentukan IP klien yang mengirim permintaan DNS, atau IP dari server DNS rekursif yang digunakan untuk memproses permintaan klien. </font><font style="vertical-align: inherit;">Server rekursif ini biasanya penyedia DNS.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By IP client tahu negara atau wilayahnya. </font><font style="vertical-align: inherit;">Untuk ini, basis GeoIP digunakan, yang ada banyak sekali saat ini. </font><font style="vertical-align: inherit;">Ada beberapa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opsi gratis yang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bagus </font><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bergantung pada lokasi klien, ia memberinya alamat IP dari server CDN terdekat.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membangun sendiri</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> server DNS dengan fungsi geoDNS </font><font style="vertical-align: inherit;">, tetapi lebih baik menggunakan solusi yang sudah jadi dengan jaringan server DNS di seluruh dunia dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anycast di</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> luar kotak:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">louDNS</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> $ 9,95 / bulan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tarif GeoDNS, secara default ada satu DNS Failover</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zilore</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mulai</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> $ 25 / bulan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , DNS Failover diaktifkan</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amazon Route 53</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mulai</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> $ 35 / bln</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk 50 juta net geo-request. </font><font style="vertical-align: inherit;">Kegagalan DNS dibebankan secara terpisah</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DNS Made Easy</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> $ 125 / bln</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ada 10 DNS Failover</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloudflare</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Fitur Geo Steering Tersedia dalam Tarif Perusahaan</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat memesan geoDNS, Anda harus memperhatikan jumlah permintaan yang termasuk dalam tarif dan mempertimbangkan bahwa jumlah panggilan aktual ke domain dapat melebihi harapan beberapa kali. Jutaan laba-laba, pemindai, spammer, dan roh jahat lainnya bekerja tanpa lelah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hampir semua layanan DNS termasuk sangat diperlukan untuk membangun layanan CDN - DNS Failover. Dengan menggunakannya, Anda dapat mengonfigurasi pemantauan server Anda dan, jika tidak ada tanda-tanda kehidupan, secara otomatis mengganti alamat server yang tidak berfungsi dengan server cadangan dalam jawaban DNS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk membangun CDN kami, kami akan menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClouDNS</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tarif GeoDNS.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambahkan zona DNS baru di akun Anda, yang menunjukkan domain Anda. </font><font style="vertical-align: inherit;">Jika kita akan membangun CDN pada subdomain, dan domain utama sudah digunakan, maka segera setelah menambahkan zona, jangan lupa untuk menambahkan catatan DNS yang ada. </font><font style="vertical-align: inherit;">Langkah selanjutnya adalah membuat untuk domain / subdomain CDN beberapa catatan-A, yang masing-masing akan diterapkan ke wilayah yang kita atur. </font><font style="vertical-align: inherit;">Anda dapat menentukan benua atau negara sebagai wilayah, subkawasan tersedia untuk AS dan Kanada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kasus kami, CDN akan dibangkitkan pada </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cdn.sayt.in</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> subdomain </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Menambahkan zona </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sayt.in</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , buat catatan A pertama untuk subdomain dan arahkan semua Amerika Utara ke server di Chicago:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0x/z_/zt/0xz_ztazcrmz8wqlruylrz4iqh4.png" width="500"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ulangi untuk wilayah lain, ingat untuk membuat satu entri untuk wilayah default. </font><font style="vertical-align: inherit;">Inilah hasilnya:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/io/js/zy/iojszykgez_pu7wf3mzd8lvmffa.jpeg" width="600"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Catatan default terakhir dalam tangkapan layar berarti bahwa semua wilayah yang tidak ditentukan (dan ini adalah Eropa, Afrika, pengguna Internet satelit, dll.) Akan dikirim ke server di Frankfurt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini melengkapi konfigurasi DNS dasar. </font><font style="vertical-align: inherit;">Tetap pergi ke situs web pendaftar domain dan mengganti NS domain saat ini dengan yang dikeluarkan oleh ClouDNS. </font><font style="vertical-align: inherit;">Dan sementara NS akan diperbarui, kami akan menyiapkan server.</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instal Sertifikat SSL</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CDN kami akan berfungsi pada HTTPS, jadi jika Anda sudah memiliki sertifikat SSL untuk domain atau subdomain, unggah ke semua server, misalnya, di direktori </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / ssl / yourdomain /</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Jika tidak ada sertifikat, Anda bisa mendapatkan yang gratis dari Let's Encrypt. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skrip ACME Shell sangat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cocok untuk ini </font><font style="vertical-align: inherit;">. Klien nyaman dan mudah dikonfigurasi, dan yang paling penting - memungkinkan Anda untuk memvalidasi domain / subdomain untuk DNS melalui API dari ClouDNS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan menginstal acme.sh hanya di salah satu server - Eropa 199.247.18.199, dari mana sertifikat akan disalin ke yang lain. Untuk menginstal, lakukan:</font></font><br>
<br>
<pre><code class="plaintext hljs">root@cdn:~# wget -O - https://get.acme.sh | bash; source ~/.bashrc</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selama instalasi skrip, tugas CRON akan dibuat untuk pembaruan sertifikat lebih lanjut tanpa partisipasi kami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verifikasi domain saat mengeluarkan sertifikat akan dilakukan menggunakan DNS menggunakan API, oleh karena itu, dalam akun pribadi ClouDNS di menu Reseller API, Anda perlu membuat API pengguna baru dan menetapkan kata sandi untuk itu. </font><font style="vertical-align: inherit;">Auth-id yang dihasilkan dengan kata sandi ditulis dalam file </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~ / .acme.sh / dnsapi / dns_cloudns.sh</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (jangan disamakan dengan file </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dns_clou </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file dns.sh</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Berikut adalah baris-baris untuk menghapus komentar dan mengedit:</font></font><br>
<br>
<pre><code class="plaintext hljs">CLOUDNS_AUTH_ID=&lt;auth-id&gt;<font></font>
CLOUDNS_AUTH_PASSWORD="&lt;&gt;"<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kami </font><b><font style="vertical-align: inherit;">meminta</font></b><font style="vertical-align: inherit;"> sertifikat SSL untuk </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cdn.sayt.in</font></font></b><br>
<br>
<pre><code class="plaintext hljs">root@cdn:~# acme.sh --issue --dns dns_cloudns -d cdn.sayt.in --reloadcmd "service nginx reload"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam parameter untuk masa depan, kami menetapkan perintah untuk memuat ulang konfigurasi server web secara otomatis setelah setiap pembaruan masa berlaku sertifikat di masa mendatang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seluruh proses untuk mendapatkan sertifikat bisa memakan waktu hingga 2 menit, jangan diganggu. </font><font style="vertical-align: inherit;">Jika kesalahan validasi domain terjadi, coba jalankan perintah lagi. </font><font style="vertical-align: inherit;">Pada akhirnya kita akan melihat di mana sertifikat diunggah: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l6/qv/16/l6qv16mchqhhaokxuvbwmnnw6xu.png" width="952"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ingat jalur ini, mereka harus ditentukan saat menyalin sertifikat ke server lain, serta dalam pengaturan server web. </font><font style="vertical-align: inherit;">Kami tidak memperhatikan kesalahan memuat ulang file konfigurasi Nginx - pada server yang sepenuhnya dikonfigurasi itu tidak akan hadir ketika memperbarui sertifikat.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yang tersisa bagi kami melalui SSL adalah menyalin sertifikat yang diterima ke dua server lain dengan menyimpan jalur ke file. </font><font style="vertical-align: inherit;">Buat direktori yang sama di masing-masing dan buat salinan:</font></font><br>
<br>
<pre><code class="plaintext hljs">root@cdn:~# mkdir -p /root/.acme.sh/cdn.sayt.in/<font></font>
root@cdn:~# scp -r root@199.247.18.199:/root/.acme.sh/cdn.sayt.in/* /root/.acme.sh/cdn.sayt.in/<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agar pembaruan sertifikat teratur, kami akan membuat tugas CRON harian di kedua server dengan perintah:</font></font><br>
<blockquote><code>scp -r root@199.247.18.199:/root/.acme.sh/cdn.sayt.in/* /root/.acme.sh/cdn.sayt.in/ &amp;&amp; service nginx reload</code></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam hal ini, akses ke server sumber jarak jauh harus dikonfigurasikan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan kunci</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mis. </font><font style="vertical-align: inherit;">tanpa memasukkan kata sandi. </font><font style="vertical-align: inherit;">Jangan lupa melakukannya.</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instal dan konfigurasikan Nginx</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengembalikan konten statis, kami akan menggunakan Nginx, yang dikonfigurasi sebagai server proxy caching. </font><font style="vertical-align: inherit;">Perbarui daftar paket dan instal di ketiga server:</font></font><br>
<br>
<pre><code class="plaintext hljs">root@cdn:~# apt update<font></font>
root@cdn:~# apt install nginx</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alih-alih default, gunakan konfigurasi dari spoiler di bawah ini:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nginx.conf</font></font></b><div class="spoiler_text"><pre><code class="nginx hljs"><span class="hljs-attribute">user</span> www-data;
<span class="hljs-attribute">worker_processes</span> auto;
<span class="hljs-attribute">pid</span> /run/nginx.pid;<font></font>
<font></font>
<span class="hljs-section">events</span> {
    <span class="hljs-attribute">worker_connections</span> <span class="hljs-number">4096</span>;
    <span class="hljs-attribute">multi_accept</span> <span class="hljs-literal">on</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-section">http</span> {
    <span class="hljs-attribute">sendfile</span> <span class="hljs-literal">on</span>;
    <span class="hljs-attribute">tcp_nopush</span> <span class="hljs-literal">on</span>;
    <span class="hljs-attribute">tcp_nodelay</span> <span class="hljs-literal">on</span>;
    <span class="hljs-attribute">types_hash_max_size</span> <span class="hljs-number">2048</span>;<font></font>
<font></font>
    <span class="hljs-attribute">include</span> /etc/nginx/mime.types;
    <span class="hljs-attribute">default_type</span> application/octet-stream;<font></font>
<font></font>
    <span class="hljs-attribute">access_log</span> <span class="hljs-literal">off</span>;
    <span class="hljs-attribute">error_log</span> /var/log/nginx/error.log;<font></font>
<font></font>
    <span class="hljs-attribute">gzip</span> <span class="hljs-literal">on</span>;
    <span class="hljs-attribute">gzip_disable</span> <span class="hljs-string">"msie6"</span>;
    <span class="hljs-attribute">gzip_comp_level</span> <span class="hljs-number">6</span>;
    <span class="hljs-attribute">gzip_proxied</span> any;
    <span class="hljs-attribute">gzip_vary</span> <span class="hljs-literal">on</span>;
    <span class="hljs-attribute">gzip_types</span> text/plain application/javascript text/javascript text/css application/json application/xml text/xml application/rss+xml;
    <span class="hljs-attribute">gunzip</span> <span class="hljs-literal">on</span>;            <font></font>
<font></font>
    <span class="hljs-attribute">proxy_temp_path</span>    /var/cache/tmp;
    <span class="hljs-attribute">proxy_cache_path</span>   /var/cache/cdn levels=<span class="hljs-number">1</span>:<span class="hljs-number">2</span> keys_zone=cdn:<span class="hljs-number">64m</span> max_size=<span class="hljs-number">20g</span> inactive=<span class="hljs-number">7d</span>;
    <span class="hljs-attribute">proxy_cache_bypass</span> <span class="hljs-variable">$http_x_update</span>;<font></font>
<font></font>
<span class="hljs-section">server</span> {
  <span class="hljs-attribute">listen</span> <span class="hljs-number">443</span> ssl;
  <span class="hljs-attribute">server_name</span> cdn.sayt.in;<font></font>
<font></font>
  <span class="hljs-attribute">ssl_certificate</span> /root/.acme.sh/cdn.sayt.in/cdn.sayt.in.cer;
  <span class="hljs-attribute">ssl_certificate_key</span> /root/.acme.sh/cdn.sayt.in/cdn.sayt.in.key;<font></font>
<font></font>
  <span class="hljs-attribute">location</span> / {
    <span class="hljs-attribute">proxy_cache</span> cdn;
    <span class="hljs-attribute">proxy_cache_key</span> <span class="hljs-variable">$uri</span><span class="hljs-variable">$is_args</span><span class="hljs-variable">$args</span>;
    <span class="hljs-attribute">proxy_cache_valid</span> <span class="hljs-number">90d</span>;
    <span class="hljs-attribute">proxy_pass</span> https://sayt.in;<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di konfigurasi, edit:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">max_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ukuran cache tidak melebihi ruang disk yang tersedia</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak aktif</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - waktu penyimpanan untuk data dalam tembolok yang tidak ada yang diakses</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ssl_certificate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ssl_certificate_key</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - jalur ke sertifikat SSL dan file kunci</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proxy_cache_valid</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - waktu penyimpanan untuk data yang di-cache</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proxy_pass</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - alamat server asli dari mana CDN akan meminta file untuk caching. </font><font style="vertical-align: inherit;">Dalam contoh kita, ini adalah </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sayt.in</font></font></i></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang Anda lihat, semuanya sederhana. </font><font style="vertical-align: inherit;">Kompleksitas hanya dapat muncul dalam pengaturan waktu cache karena kesamaan dari </font><i><font style="vertical-align: inherit;">arahan </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak aktif</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proxy_cache_valid</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Kami akan menganalisisnya dalam contoh kami. </font><font style="vertical-align: inherit;">Inilah yang terjadi dengan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak aktif = 7d</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proxy_cache_valid 90d</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jika permintaan tidak diulang dalam 7 hari, maka data akan dihapus dari cache setelah periode ini</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jika permintaan diulang setidaknya sekali setiap 7 hari, maka data dalam cache akan dianggap usang setelah 90 hari dan pada permintaan berikutnya Nginx akan memperbaruinya dengan mengambilnya dari server asli</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah selesai </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengedit nginx.conf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , muat ulang konfigurasi:</font></font><br>
<br>
<pre><code class="plaintext hljs">root@cdn:~# service nginx reload</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CDN kami sepenuhnya siap. </font><font style="vertical-align: inherit;">Untuk $ 15 / bulan </font><font style="vertical-align: inherit;">kami mendapat titik kehadiran di tiga benua dan 3 TB lalu lintas: 1 TB di setiap lokasi.</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memeriksa pengoperasian CDN</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat ping ke CDN kami dari lokasi geografis yang berbeda. </font><font style="vertical-align: inherit;">Untuk ini, semua layanan ping cocok.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Titik peluncuran</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tuan rumah</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AKU P</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Waktu rata-rata, ms</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jerman Berlin</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cdn.sayt.in</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">199.247.18.199</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.6</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Belanda, Amsterdam</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cdn.sayt.in</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">199.247.18.199</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.1</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prancis Paris</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cdn.sayt.in</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">199.247.18.199</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16.3</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inggris Raya, London</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cdn.sayt.in</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">199.247.18.199</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.9</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kanada Toronto</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cdn.sayt.in</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">149.28.121.123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16.2</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AS, San Francisco</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cdn.sayt.in</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">149.28.121.123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">52.7</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AS, Dallas</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cdn.sayt.in</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">149.28.121.123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.1</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AS, Chicago</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cdn.sayt.in</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">149.28.121.123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.6</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AS, New York</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cdn.sayt.in</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">149.28.121.123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.8</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Singapura</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cdn.sayt.in</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">157.230.240.216</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.7</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jepang Tokyo</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cdn.sayt.in</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">157.230.240.216</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">74.8</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Australia, Sydney</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cdn.sayt.in</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">157.230.240.216</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">95.9</font></font></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hasilnya bagus. </font><font style="vertical-align: inherit;">Sekarang kita akan menempatkan test image </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test.jpg</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di root situs utama </font><font style="vertical-align: inherit;">dan memeriksa kecepatan </font><i><font style="vertical-align: inherit;">unduhannya</font></i><font style="vertical-align: inherit;"> melalui CDN. </font><font style="vertical-align: inherit;">Tidak lebih cepat dikatakan daripada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dilakukan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Konten dikirim dengan cepat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan menulis skrip kecil jika kami ingin menghapus cache pada titik CDN.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">purge.sh</font></font></b><div class="spoiler_text"><pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> ]
<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Purging all cache"</span><font></font>
    rm -rf /var/cache/cdn/*<font></font>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Purging <span class="hljs-variable">$1</span>"</span>
    FILE=`<span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> | md5sum | awk <span class="hljs-string">'{print $1}'</span>`<font></font>
    FULLPATH=/var/cache/cdn/<span class="hljs-variable">${FILE:31:1}</span>/<span class="hljs-variable">${FILE:29:2}</span>/<span class="hljs-variable">${FILE}</span>
    rm -f <span class="hljs-string">"<span class="hljs-variable">${FULLPATH}</span>"</span>
<span class="hljs-keyword">fi</span>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menghapus seluruh cache, jalankan saja, file terpisah dapat dibersihkan seperti ini:</font></font><br>
<br>
<pre><code class="plaintext hljs">root@cdn:~# ./purge.sh /test.jpg</code></pre><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alih-alih kesimpulan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akhirnya, saya ingin memberikan beberapa tips yang berguna untuk segera melangkahi menyapu, yang pada satu waktu membuat kepala saya sakit:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk meningkatkan toleransi kesalahan CDN, disarankan untuk mengonfigurasi DNS Failover, yang membantu dengan cepat mengubah catatan jika terjadi kegagalan server. </font><font style="vertical-align: inherit;">Ini dilakukan di panel kontrol catatan DNS domain</font></font></li>
<li>           CDN,    .            CDN,      6-7 : ,   (),   (), , ,   </li>
<li>         CDN. ,          ,       -</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">  </a>,  ,           </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coba periksa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ping dari berbagai tempat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke server Anda. </font><font style="vertical-align: inherit;">Jadi, Anda dapat melihat wilayah terdekat dengan titik CDN dan mengkonfigurasi GeoDNS dengan benar</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bergantung pada tugasnya, itu tidak pada tempatnya untuk mengkonfigurasi Nginx untuk persyaratan caching tertentu dan memperhitungkan beban pada server. </font><font style="vertical-align: inherit;">Artikel-artikel tentang cache Nginx - di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan percepatan pekerjaan di bawah beban berat: di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan di </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">sini banyak</font></a><font style="vertical-align: inherit;"> membantu saya.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id496886/index.html">Elon Musk mengungkapkan tujuan kamera di atas kaca spion di Tesla Model 3</a></li>
<li><a href="../id496888/index.html">Startup menggunakan AI untuk mencari molekul yang akan membantu melawan coronavirus</a></li>
<li><a href="../id496892/index.html">Semua Habr dalam satu basis. Komentar dan aplikasi web</a></li>
<li><a href="../id496894/index.html">Backlog produk yang sempurna</a></li>
<li><a href="../id496900/index.html">Impor USRLE melalui Apache NiFi. Langkah 1 - Unduh File melalui HTTPS</a></li>
<li><a href="../id496912/index.html">ThinkPad E480 Intel pada Windows VS ThinkPad E495 AMD di Ubuntu apakah ada perbedaan?</a></li>
<li><a href="../id496914/index.html">Program desimal terpendek</a></li>
<li><a href="../id496916/index.html">Mengajar, Bernegosiasi, dan Berkonsultasi Jarak Jauh - Bagian 3: Server Pertemuan Yealink dan 4 Penawaran Khusus</a></li>
<li><a href="../id496920/index.html">Membuat rumah pintar dengan ASP.NET Core dan Arduino</a></li>
<li><a href="../id496922/index.html">Panduan tentang apk klien-server terbalik pada contoh pekerjaan NeoQUEST-2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>