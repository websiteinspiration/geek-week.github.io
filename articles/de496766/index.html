<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌲 👩🏿‍💼 🛄 Was ist Azure Stack HCI und wie funktioniert es? 🌑 👩🏼‍🏭 👨‍🎤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Heute möchten wir darüber sprechen, worum es bei der Azure Stack HCI-Plattform geht. Einschließlich dessen, was es im Allgemeinen ist, aus...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Was ist Azure Stack HCI und wie funktioniert es?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/496766/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo Habr! </font><font style="vertical-align: inherit;">Heute möchten wir darüber sprechen, worum es bei der Azure Stack HCI-Plattform geht. </font><font style="vertical-align: inherit;">Einschließlich dessen, was es im Allgemeinen ist, aus welcher Hardware zusammengesetzt ist, welche Software enthält, wie es funktioniert und das ist alles. </font><font style="vertical-align: inherit;">Jetzt beitreten!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ms/a8/ns/msa8nsszbolcqdqftfpzhmhkkci.png"><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies ist ein Gastbeitrag von den Jungs von AltaStor. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AltaStor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein Systemintegrator, der sich auf Gebäudelösungen für eine zuverlässige Datenspeicherung spezialisiert hat. </font><font style="vertical-align: inherit;">Dank des gesammelten Fachwissens beim Aufbau von Failover-Clustern und HCI wird für jeden Kunden eine individuelle Lösung ausgewählt, die für seine Aufgaben am besten geeignet ist.</font></font></blockquote><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist die Azure Stack HCI?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist eine hyperkonvergente Lösung, die mehrere Produkte kombiniert:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hardware von einem Microsoft Certified OEM Partner.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Server 2019 Datacenter-Betriebssystem.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Admin Center-Software.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft Azure Services, falls erforderlich.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Lösung gibt es schon lange auf dem Markt, und einige unserer Kunden haben sie lange und erfolgreich eingesetzt. </font><font style="vertical-align: inherit;">Sie veröffentlichen jedoch nicht die Leistungstestergebnisse ihrer Installation. </font><font style="vertical-align: inherit;">Wir haben uns entschlossen, diese Lücke zu schließen und anhand eines konkreten Beispiels über unsere Erfahrungen mit Azure Stack HCI zu sprechen. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Klicken Sie hier, um</font></a></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dokumentation und allgemeine Informationen zu Azure Stack HCI zu erhalten </font><font style="vertical-align: inherit;">.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standaufbau</font></font></h2>&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/086/5d0/047/0865d0047d86f46f5e2999f9abac8409.jpg"><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ausrüstung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für die Erstellung einer Lösung ist eine von Microsoft empfohlene Hardwareplattform erforderlich. Die führenden Hersteller von Serverhardware - HPE, Dell EMC, Fujitsu, Hitachi, Lenovo usw. - haben ihre Konfigurationen entwickelt, auf Kompatibilität getestet und für Azure Stack HCI zertifiziert. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine vollständige Liste der kompatiblen Geräte finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abhängig von den verwendeten Laufwerkstypen variieren die Plattformkomponenten. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir bevorzugen es, solche Lösungen auf der Basis von Fujitsu-Servern mit dem vorinstallierten Windows Server 2019 Datacenter-Betriebssystem zu erstellen. Dieser Hersteller unterstützt nach dem Verkauf den gesamten Software- und Hardwarekomplex als Komplettlösung und nicht nur die Hardware. Dies ist sowohl für uns als Partner als auch für den Endkunden wichtig.</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Derzeit verfügt Fujitsu über fünf Konfigurationen, die für verschiedene Laufwerkstypen, Servermodelle und die Anzahl der Knoten zertifiziert sind. Die maximale Anzahl von Knoten für Azure Stack HCI beträgt 16, die minimale Anzahl 2, einige Konfigurationen sind jedoch auf 4 beschränkt. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle kompatiblen Fujitsu-Konfigurationen können hier angezeigt </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">werden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für die Installation haben wir die effizienteste Konfiguration aus der derzeit zertifizierten Konfiguration ausgewählt: Fujitsu Primergy mit SSD-Laufwerken zum Speichern von Daten und ultraschnelle Intel Optane-Speichermodule, die über die NVMe-Schnittstelle als Systemcache verbunden sind. Wir erwarten ein softwaredefiniertes All-Flash-Array mit einer Leistung, die mit klassischem Speicher mit SSD-Laufwerken und NVMe-Cache vergleichbar ist.</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All-Flash-Speichersysteme von Branchenführern weisen ähnliche Medientypkonfigurationen auf. </font><font style="vertical-align: inherit;">Wir wissen, welche IOPS- und Latenzmetriken in der Praxis von ähnlichen Systemen abgerufen werden können, und freuen uns auf eine ähnliche Leistung von Azure Stack HCI basierend auf der ausgewählten Fujitsu-Konfiguration. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/097/a99/1f1/097a991f1f820647f030183802c834e3.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Architektur dieser Fujitsu-Lösung wird in einem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verfügbaren Dokument ausführlich beschrieben </font><font style="vertical-align: inherit;">. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir empfehlen, dass Sie sich vor der Installation damit vertraut machen. </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/468/866/9ae/4688669aee12df9248e368a88c758af0.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Dokument beschreibt die Einschränkungen der Architektur, typische Verbindungsschemata und viele andere Informationen, die in der Implementierungsphase nützlich sind.</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9b5/f47/26c/9b5f4726c82a82d0d12d6dafd967e443.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schalter</font></font></h2>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Lösung von Fujitsu verwendet einen eigenen PSWITCH-Ethernet-Switch. </font><font style="vertical-align: inherit;">Für uns haben wir folgende Vorteile festgestellt:&nbsp;</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Schalter dieser Serie sind sehr produktiv und kostengünstig.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Switches sind recht einfach zu konfigurieren und verwenden die CISCO-ähnliche Schnittstelle. </font><font style="vertical-align: inherit;">Die Ingenieure hatten während der Installation keine Schwierigkeiten.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt keine proprietären Exzesse in der Verwaltung und kompetente Dokumentation ist verfügbar.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fujitsu-Schaltgeräte gehören zu den Branchenführern in Japan. </font><font style="vertical-align: inherit;">Es ist seit kurzem auf dem russischen Markt erhältlich, wird jedoch bereits regelmäßig in Projekten unserer Architekten und anderer Fujitsu-Partner verwendet. </font><font style="vertical-align: inherit;">Derzeit ist eine begrenzte Anzahl von Modellen verfügbar.&nbsp;</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weitere Informationen zu Fujitsu-Schaltern finden Sie auf der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">offiziellen Website</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Innerhalb des Servers nehmen Intel Optane-Speicherkarten einen erheblichen Teil des Speicherplatzes ein.&nbsp; </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/895/742/c12/895742c127ddef9ed35f44ddbfc2b6fa.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/5bb/1dd/77f/5bb1dd77f0079b9babe09973b132156b.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intel legt großen Wert auf die Leistung bei hohem Wärmebedarf. Zum einen werden für maximale Kühlqualität große Heizkörper eingesetzt. Dies begrenzt andererseits den Kühlluftstrom innerhalb des gesamten Servers.&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist einer der wichtigsten Punkte, die bei der Zertifizierung der Konfiguration berücksichtigt werden. Es müssen alle möglichen Szenarien berücksichtigt werden, in denen die Server aufgrund unzureichender Kühlung das Optane-Modul überhitzen können oder umgekehrt.</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Umzug des Serverraums waren unsere Kunden mehr als einmal mit einer Situation konfrontiert, in der die Klimaanlage noch nicht in Betrieb genommen wurde. Aus diesem Grund haben wir uns entschlossen zu prüfen, wie anspruchsvoll diese Installation für das Kühlsystem ist, und die Lebensdauer der Plattform unter Last außerhalb des gekühlten Serverraums zu messen.&nbsp;&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Tests wurden bei Raumtemperatur durchgeführt, es traten jedoch keine thermischen Einschränkungen oder Leistungseinbußen oder das Auftreten von Fehlern aufgrund von Überhitzung auf. Wir haben aus eigener Erfahrung gesehen, dass die getesteten Server die deklarierte Arbeitskapazität bei einer Umgebungstemperatur von bis zu +45 Grad Celsius unterstützen.&nbsp; </font></font><br>
&nbsp;<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieses Experiment sollte nicht als Empfehlung verstanden werden, die Verwendung spezieller Serverräume mit hochwertiger Belüftung aufzugeben. </font><font style="vertical-align: inherit;">Achten Sie bei der Auswahl eines Hardwarelösungsanbieters unbedingt auf das maximale Temperaturpaket.</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Montage der Hardwareplattform</font></font></h2>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vorderansicht: </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7b5/53b/5eb/7b553b5eb67aaa8405b3aec5eb7ddfd7.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rückansicht: </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1db/a71/be8/1dba71be8bf20b34a2874dfb64d2e758.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Test wurde nur ein Schalter verwendet. </font><font style="vertical-align: inherit;">Für die kommerzielle Nutzung empfehlen wir immer, Zugriffspfade mit mindestens zwei Switches zu reservieren. </font><font style="vertical-align: inherit;">Laut unserer Statistik ist der häufigste Hardwarefehler in Clustern ein versehentlicher Kabelbruch oder ein unterbrochener Kontakt im Stecker.&nbsp;</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fujitsu RX1330 wurde als Server mit Steuerungssoftware verwendet. </font><font style="vertical-align: inherit;">Ihm wurden auch die Funktionen eines Schiedsrichters und eines Quorum-Servers zugewiesen.</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clusterbereitstellung</font></font></h2>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die erste Phase bestand aus der physischen Installation von Hardwarekomponenten, dem Anschließen von Schnittstellenkabeln usw. </font><font style="vertical-align: inherit;">Darauf folgte das Software-Setup als </font><font style="vertical-align: inherit;">Das Betriebssystem ist bereits vorinstalliert. </font><font style="vertical-align: inherit;">Wir haben Storage Space Direct auf jedem Server bereitgestellt und einen Cluster aus 2 Knoten und einem Arbiter erstellt. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anschließend haben wir das Dienstprogramm Fujitsu Infrastructure Manager verwendet, eine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Admin Center-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Erweiterung </font><font style="vertical-align: inherit;">, die eng in die Fujitsu-Serverhardware integriert ist und alle Verwaltungstools von Azure enthält, z.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure Site Recovery bietet DRaaS (High Availability and Disaster Recovery as a Service).</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure Monitor ist eine zentralisierte Site zur Überwachung des Betriebs von Anwendungen, Netzwerken und Infrastrukturen mit detaillierten AI-basierten Analysen.</font></font><br>
</li>
<li>«-»   Azure          .<br>
</li>
<li> Azure Backup     ,      -.<br>
</li>
<li> «  Azure»          Windows,   Azure    .<br>
</li>
<li>  Azure          Azure  VPN-  « — ».<br>
</li>
<li> «  Azure»     .&nbsp;<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit der Erweiterung können Sie eine Reihe von Aufgaben automatisieren, die auch direkt im Admin Center ausgeführt werden können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gesammelter Speicherpool, darin erstellte Volumes. </font><font style="vertical-align: inherit;">Diese Volumes befinden sich anschließend in virtuellen Maschinen, für die wir Leistungstests durchgeführt haben. </font><font style="vertical-align: inherit;">Sowohl Volumes als auch virtuelle Maschinen werden bequem von einem einzigen Fenster aus verwaltet. </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f25/a14/7cf/f25a147cf1d43eb65ce7afab6c5f2e6a.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit Fujitsu Infrastructure Manager können Sie auch viele Dinge für geplante Wartungsarbeiten und Mikrocode-Updates erledigen. </font><font style="vertical-align: inherit;">Der Status aller Geräte wird übersichtlich angezeigt, vieles kann automatisiert werden. </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/364/a36/bed/364a36bed36a81528668e7d705699c11.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt zwei Versionen des Dienstprogramms Fujitsu Infrastructure Manager - kostenpflichtig und kostenlos:</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kostenlos. </font><font style="vertical-align: inherit;">Es kann von der Website des Herstellers heruntergeladen werden und reicht für die Serververwaltung völlig aus.</font></font><br>
</li>
<li>.       Microsoft Azure HCI —      Windows Server     .<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für eine umfassende Primergy-Integration mit Microsoft Azure Stack HCI benötigen Sie ein Serververwaltungs-Plug-In von Windows Server, das nur in der kostenpflichtigen Version verfügbar ist. Daher ist das integrierte System PRIMEFLEX für Microsoft Azure Stack HCI von FUJITSU Teil davon.&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je mehr Installationen Sie haben, desto wertvoller ist die Automatisierung, die das Dienstprogramm bietet. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt nur 2 Knoten in unserem Stand und wir könnten die ganze Arbeit manuell erledigen. Wenn Sie 4 oder mehr Knoten haben, reduziert die Software Ihren Installations- und Verwaltungsaufwand erheblich. Die Nebenkosten betragen weniger als 1% des Projekts, beschleunigen jedoch die Inbetriebnahme der Geräte erheblich. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für das Windows Admin Center ist das Fujitsu Infrastructure Manager Orchestra ein Erweiterungspaket:</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/03b/747/11d/03b74711d36cdbe8d7809619e3b38e6f.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der gleiche Screenshot zeigt die Zusammensetzung des Server-Festplattensubsystems: Zwei Optane-Module werden als Cache-Erweiterung und fünf SSD-Festplatten als Tier-1-Speicherpool verwendet.</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wichtige Punkte</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Erstellen einer Lösung müssen verschiedene Nuancen berücksichtigt werden: Es </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gibt zwei Möglichkeiten, Microsoft Azure Stack HCI zu verwalten - über das Windows Admin Center oder den Fujitsu Infrastructure Manager.&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Admin Center hat auch seine Vorteile: Sie können es auf allem bereitstellen, sogar auf einem Laptop. Es besteht die Möglichkeit, über die Befehlszeile zu steuern. Damit kann der Administrator fast alles machen.&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt auch den Cluster Manager - ein unverzichtbares Werkzeug für Probleme mit dem Cluster.&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Bereitstellung von Witness (Quorum-Server) ist es wichtig, es zu Active Directory hinzuzufügen und seine Verfügbarkeit für alle Knoten zu überprüfen. Die Anforderungen für diese Aufgabe sind minimal und können auf jedem Basisserver platziert werden.</font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/081/cfc/f9b/081cfcf9b862e035a65600f1138f5dfe.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aus Sicht von Windows Server gibt es drei Arten von Festplattengeräten: NVMe, SSD und HDD. Die Logik der Arbeit lautet wie folgt: NVMe-Geräte sind der Lese- / Schreibcache, SSD ist die Tier-1-Speicherebene; HDD - Tier-2-Speicherebene. Als Nächstes können Sie Richtlinien zum Verschieben von Daten zwischen Pools konfigurieren. NVDIMMs können auch als Cache verwendet werden. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Standardblockgröße für das Zerreißen beträgt 4 KB, kann jedoch je nach Art des Dateisystems in der virtuellen Maschine variieren. Dies wirkt sich anschließend auf die Leistung aus. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir verwenden NVMe-Module als Cache, daher ist die Geschwindigkeit beim Lesen und Schreiben von Daten sehr unterschiedlich - dies wird in Leistungstests deutlich.</font></font><br>
&nbsp;<br>
<ul>
<li>                 ( ),    SSD (Tier-1,  ).<br>
</li>
<li>       NVMe    ,       ,       .    .<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vor dem Erstellen eines Clusters müssen die Validierung und alle Tests im Failovercluster-Manager abgeschlossen sein. </font><font style="vertical-align: inherit;">Der Bericht muss gespeichert werden, da es ohne ihn nicht möglich ist, einen Serviceabruf im Microsoft-Support zu eröffnen, falls dies jemals erforderlich sein sollte. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie einem vorhandenen Cluster neue Knoten hinzufügen, werden die Knoten automatisch zum Speicherpool hinzugefügt. </font><font style="vertical-align: inherit;">Nach 15 Minuten wird der Cluster den Speicherpool automatisch neu erstellen, neu erstellen und ausgleichen. </font><font style="vertical-align: inherit;">Dies kann die Leistung während der Wiederherstellung beeinträchtigen.</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leistungstests</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kommen wir nun zu den interessantesten Teillasttests. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konfiguration testen:</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zwei in einem Cluster zusammengestellte Fujitsu PRIMERGY RX2540-Server;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auf jedem Server sind zwei Speichermodule der Intel Optane-Speicherklasse installiert, mit denen der Lese- / Schreibcache erweitert wird.</font></font><br>
</li>
<li>      SSD,      ,<br>
</li>
<li>      erasure coding ( RAID-5).<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tatsächlich handelt es sich um ein softwaredefiniertes Speichersystem, auf dem Windows Server 2019 Azure Stack HCI ausgeführt wird. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir starten den ersten Test mit 12 virtuellen Maschinen, die auf beiden Knoten ausgeführt werden. Das Lese- / Schreiblastprofil beträgt 70:30, Blockgröße = 8 KB. Die Blockgröße wurde aufgrund der Tatsache ausgewählt, dass die meisten modernen Transaktionsdatenbanken und OLTP-Lasten genau eine solche Blockgröße und ungefähr das gleiche Lese- / Schreibverhältnis verwenden. </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6b2/d7c/9da/6b2d7c9dac708b1f4d5330e3f0742e00.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die stationäre Clusterleistung beträgt 428.000 IOPS mit einer Verzögerung von 0,487 ms. Dies ist ein wirklich würdiges Ergebnis, das mit dem vergleichbar ist, was Sie mit einem speziellen All-Flash-Speichersystem vieler Hersteller erhalten können.&nbsp;</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unabhängige Tests mit einem ähnlichen Lastprofil werden in der Ressource spcresults.org bereitgestellt - dies ist der SPC-1-Test. Der Unterschied zu unserer Konfiguration liegt nur in der Blockgröße - sie beträgt 4 KB. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir die Methode zum Vergleichen der Ergebnisse erheblich vereinfachen, können wir sie in zwei IOPS-Indikatoren für All-Flash-Speichersysteme aufteilen und mit den Zahlen vergleichen, die wir zur gleichen Antwortzeit erhalten haben. Die Ergebnisse unseres Clusters aus zwei Servern mittlerer Ebene sind mit den meisten Speichersystemen vergleichbar.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Natürlich ist ein solcher Vergleich nicht sehr richtig, weil In unserem Fall wirkt sich eine Erhöhung der Anzahl der Festplatten ganz anders auf die Leistung und Verzögerungen aus als bei einem speziellen Speichersystem. Aber selbst unter Berücksichtigung all dieser Annahmen kann gesagt werden, dass solche Leistungsdaten vor einigen Jahren nur auf einem externen Speichersystem mit mehreren Controllern eines durchschnittlichen oder sogar höheren Niveaus zu sehen waren. Dies ist heute mit einer hyperkonvergenten Lösung möglich. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Leistungsbild ändert sich erheblich, wenn Deduplizierung und Messungen mit der vorherigen Blockgröße = 8 KB aktiviert werden. Wenn Sie einfach die Deduplizierung für dasselbe Lastprofil aktivieren, beträgt die Leistung weniger als 300.000 IOPS.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir zwei Lastprofile mit einem 8-KB-Block ausführen, wobei ein Profil zu 100% gelesen und das andere zu 100% geschrieben wird, sind nachfolgend die besten Zahlen aufgeführt, die wir erhalten konnten: </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ed8/e3d/5e3/ed8e3d5e3a387044eb8b52b8fa45ca41.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sehen hervorragende Leseergebnisse, insbesondere wenn wir eine Verzögerung von 12 μs berücksichtigen. </font><font style="vertical-align: inherit;">Hier leistet Optane wirklich gute Arbeit als Lese-Cache mit proaktiven Algorithmen für die prädiktive Datenübertragung in den Cache. </font><font style="vertical-align: inherit;">Ja, und der Speicherpool selbst auf der SSD zeigt ebenfalls sehr gute Lesezahlen. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Schreibgeschwindigkeit ist jedoch sehr unterschiedlich. </font><font style="vertical-align: inherit;">Hier sind einige schwerwiegende Faktoren:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Architektur der Lösung, wenn die Daten, die in den Cache eines Knotens fallen, über das Netzwerk in den Cache des zweiten Knotens kopiert werden.</font></font><br>
</li>
<li>  :         —  ,         Optane.          . <br>
<br>
            45%,            ,      — ,     .       .<br>
</li>
<li>   SSD       SSD —    3D-NAND ,         3D-NAND.<br>
</li>
</ul><br>
<h2></h2><br>
<ul>
<li> OLTP-      –       8k    .&nbsp;&nbsp;<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Deduplizierung kann jederzeit aktiviert werden, verringert jedoch die Leistung erheblich. </font><font style="vertical-align: inherit;">Die Deduplizierungseffizienz in unseren Tests betrug 45% bei einem Leistungsabfall von mehr als 25%.&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies gibt Ihnen freie Wahl - entweder höhere Speicherleistung oder fast doppelt so viel Kapazität. </font><font style="vertical-align: inherit;">Viel hängt auch vom Lastprofil und der Fähigkeit ab, die aufgezeichneten Daten zu komprimieren.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aufgrund der Architektur der Lösung erhöhen sequentielle Schreibvorgänge die Antwortzeit erheblich.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist nicht umsonst, dass Microsoft von Ihnen verlangt, eine Lösung nur auf der Grundlage validierter Konfigurationen von OEM-Partnern zu erstellen. Auf diese Weise können Sie viele Probleme sowohl bei der Erstinstallation als auch bei weiteren Arbeiten vermeiden.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Arbeit mit der Hardware von Fujitsu hinterließ wie immer nur einen positiven Eindruck. </font><font style="vertical-align: inherit;">Dies ist eine sinnvolle Dokumentation und viele nützliche Ergänzungen von Infrastructure Manager - dieses Softwarepaket vereinfacht die Systemverwaltung erheblich. </font><font style="vertical-align: inherit;">Dies ist besonders wichtig, wenn Sie die Anzahl der Knoten erhöhen.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die PRIMEFLEX-Lösung von Fujitsu enthält eine Reihe von Skripten, die den Bereitstellungsprozess beschleunigen. </font><font style="vertical-align: inherit;">Sie erleichtern das Starten und Konfigurieren im Allgemeinen und die Fujitsu PRIMERGY-Server im Besonderen.</font></font><br>
</li>
</ul><br>
<img src="https://habrastorage.org/getpro/habr/post_images/fdc/a11/060/fdca11060f83e478d5edd39134097dfa.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für diejenigen, die nicht daran interessiert sind, die Lösung selbst zu optimieren, besteht die Möglichkeit, einen Vertrag über technische Lösungen mit Fujitsu abzuschließen. </font><font style="vertical-align: inherit;">In diesem Fall werden die technischen Spezialisten des Anbieters alles schlüsselfertig bereitstellen und weiteren Support leisten.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de496756/index.html">AWS Lambda in Aktion. Teil 2: Kennenlernen von Entwicklungs- und Testwerkzeugen</a></li>
<li><a href="../de496758/index.html">Digitale mittelalterliche Gesundheitsversorgung. Globaler technologischer Wandel nach COVID-19</a></li>
<li><a href="../de496760/index.html">Benutzerfluss: So erstellen Sie beliebte Anwendungen und Websites</a></li>
<li><a href="../de496762/index.html">Partikelbasierte Oberflächenerosionssimulation</a></li>
<li><a href="../de496764/index.html">Klein aber fein: DuckDuckGo vs. Ad Monsters</a></li>
<li><a href="../de496768/index.html">Vergessen Sie RGB und HEX</a></li>
<li><a href="../de496770/index.html">Automatisierte Ingenieurwohnung. Teil 1: Erklärung des Problems, Wahl des Eisens</a></li>
<li><a href="../de496772/index.html">Unbemannte Fahrzeuge sollten die Marken von Autos „im Auge behalten“, die von den härtesten Fahrern gefahren werden</a></li>
<li><a href="../de496774/index.html">Wir erhöhen unseren vollwertigen Minecraft-Spieleserver mit Minispielen. Teil 3. Minispiele installieren</a></li>
<li><a href="../de496776/index.html">Unbemannte Fahrzeuge hacken: Wer wird verantwortlich sein (Studie der RAND Corporation)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>