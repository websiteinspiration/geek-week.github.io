<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöµ ‚õ©Ô∏è ü§úüèø A melhor maneira de trabalhar com o DOM üëáüèΩ üë®üèº‚Äçüíº üçñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Enquanto escrevia no Solid , tive a oportunidade de estimar o n√∫mero de tentativas para otimizar o desempenho em gr√°ficos (benchmarks). 
 
 O DOM √© um...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>A melhor maneira de trabalhar com o DOM</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501170/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enquanto escrevia no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solid</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tive a oportunidade de estimar o n√∫mero de tentativas para otimizar o desempenho em gr√°ficos (benchmarks). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O DOM √© um desenvolvimento de gargalo front-end. </font><font style="vertical-align: inherit;">Solu√ß√µes diferentes podem levar a resultados semelhantes. </font><font style="vertical-align: inherit;">Novas bibliotecas aparecem todas as semanas, incorporando o melhor das anteriores, para fazer a combina√ß√£o perfeita. </font><font style="vertical-align: inherit;">Depois de algum tempo, meus olhos come√ßam a fugir de uma variedade de solu√ß√µes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o me entenda mal. </font><font style="vertical-align: inherit;">Adoro ver novas id√©ias surgirem, mas todas elas apresentam falhas e, √†s vezes, acarretam uma perda de conveni√™ncia ou produtividade. </font><font style="vertical-align: inherit;">Entendo as consequ√™ncias dessa decis√£o, mas quero compartilhar minhas observa√ß√µes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qual √© a maneira mais r√°pida de trabalhar com o DOM:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dom virtual</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Literais de modelo com a tag </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observ√°veis ‚Äã‚Äãrefinados</font></font></li>
</ul><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compara√ß√£o</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O JS Frameworks Benchmark</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© o melhor projeto de c√≥digo aberto para comparar o desempenho das estruturas de UI do JavaScript. </font><font style="vertical-align: inherit;">√â melhor executar testes localmente, em vez de usar resultados oficiais. </font><font style="vertical-align: inherit;">Os resultados podem variar de acordo com a m√°quina. </font><font style="vertical-align: inherit;">Como estou testando em uma m√°quina fraca, o desempenho diminuir√° notavelmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adotarei as melhores abordagens na renderiza√ß√£o de uma √°rvore DOM para ilustrar a redund√¢ncia de certas solu√ß√µes. </font><font style="vertical-align: inherit;">Farei isso usando a capacidade do Solid de suportar diferentes op√ß√µes de renderiza√ß√£o para impor custos √† medida que as vari√°veis ‚Äã‚Äãmudam e compar√°-las com resultados semelhantes de outras estruturas. </font><font style="vertical-align: inherit;">Vamos dar uma olhada neles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Variedades de S√≥lido:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solid</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - vers√£o da estrutura com o configurador de proxy ES2015 sobre as fun√ß√µes de controle de altera√ß√µes integradas nos modelos de n√≥s DOM clonados. </font><font style="vertical-align: inherit;">Isso √© obtido pr√©-compilando modelos JSX </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(c√≥digo)</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sinais s√≥lidos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - esta vers√£o √© igual √† anterior, mas sinais brutos s√£o usados ‚Äã‚Äãem vez de proxies. </font><font style="vertical-align: inherit;">Isso complica o uso da biblioteca, mas no final obtemos um pacote menor e melhor desempenho </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(c√≥digo)</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aceso</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - esta vers√£o n√£o usa a pr√©-compila√ß√£o JSX em tempo de execu√ß√£o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(c√≥digo)</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solid-h</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Esta vers√£o usa o HyperScript para criar `document.createElement` em tempo real. </font><font style="vertical-align: inherit;">O restante usa a mesma implementa√ß√£o que Solid </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Code)</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outras bibliotecas:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">domc</a> ‚Äî -,       DOM     DSL (domain specific language)   HTML,    index.html<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"> (Code)</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">surplus</a> ‚Äî       JSX     `document.createElement`. Solid     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"> (Code)</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">ivi </a> ‚Äî     Inferno,      DOM.   HyperScript Helpers-esque  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"> (Code)</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">lit-html</a> ‚Äî      ,  c  .     Tagged Template Literals   DOM-<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"> (Code)</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inferno</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© o mais r√°pido dos clones React e uma das bibliotecas virtuais mais r√°pidas do DOM. </font><font style="vertical-align: inherit;">Usa diretivas JSX especiais para obter melhor desempenho </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(c√≥digo)</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algumas de suas estruturas favoritas podem n√£o estar aqui, mas esta lista exibe vers√µes otimizadas de todas as t√©cnicas que voc√™ ver√° nas estruturas mais populares. </font><font style="vertical-align: inherit;">Voc√™ pode v√™-lo como um indicador para avaliar os recursos m√°ximos da sua biblioteca. </font><font style="vertical-align: inherit;">Se voc√™ estiver interessado em comparar o desempenho de estruturas populares, recomendo este gr√°fico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para compara√ß√£o, gostaria de adicionar o Web Assembly. </font><font style="vertical-align: inherit;">Infelizmente, no momento da reda√ß√£o deste artigo, os registros WASM eram uma implementa√ß√£o de baunilha sem abstra√ß√µes de alto n√≠vel. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Mais tarde, eles adicionaram wasm-bindgen √† estrutura - aprox. Tradutor)</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resultados</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HyperScript (inferno, ivi, s√≥lido-h)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O HyperScript exibe a marca√ß√£o como uma composi√ß√£o de fun√ß√µes (como h ou React.createElement). </font><font style="vertical-align: inherit;">Por exemplo:</font></font><br>
<br>
<pre><code class="javascript hljs">h(<span class="hljs-string">'div'</span>, {<span class="hljs-attr">id</span>: <span class="hljs-string">'my-element'</span>}, [<font></font>
  h(<span class="hljs-string">'span'</span>, <span class="hljs-string">'Hello'</span>),<font></font>
  h(<span class="hljs-string">'span'</span>, <span class="hljs-string">'John'</span>)<font></font>
])<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As estruturas virtuais do DOM possuem essa propriedade. Mesmo se eles usarem JSX ou outros mecanismos de modelo DSL - ainda ser√£o convertidos para m√©todos de renderiza√ß√£o elemento a elemento. Isso √© usado para construir uma √°rvore DOM virtual para cada ciclo de renderiza√ß√£o. Mas, como mostrado aqui, as fun√ß√µes renderizadas podem ser usadas para criar um gr√°fico de depend√™ncia reativa, como no caso de Solid. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1t/lp/av/1tlpavyaaxibat0dsnz84dlgcv4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ pode ver, as bibliotecas com um DOM virtual s√£o muito mais r√°pidas. S√≥lido perde desempenho devido √† cria√ß√£o excessiva de um gr√°fico reativo. Observe a diferen√ßa nos pontos de refer√™ncia # 1, # 2, # 7, # 8, # 9. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uf/jo/ne/ufjonerq7jqkd4r31x3sfwtcy7o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A mem√≥ria √© menos convincente. O Inferno e esta vers√£o do Solid mostram aproximadamente o mesmo resultado. Enquanto o ivi usa mais mem√≥ria.</font></font><br>
<blockquote>   ,  Solid,  ,    VDOM. Solid            ,     DOM,     DOM. Solid  JSX    DOM .               ,  . Solid  fine grained evaluation    .  -  .<br>
 ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"></a><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As estruturas de rastreamento de atualiza√ß√£o reativa mostram melhores resultados ao atualizar linhas. </font><font style="vertical-align: inherit;">Este gr√°fico explicaria a popularidade do VDOM nos √∫ltimos anos. </font><font style="vertical-align: inherit;">Basta dizer que, se voc√™ usar o HyperScript com esta atualiza√ß√£o, √© melhor alternar para o Virtual DOM.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelos de string (domc, lit-html, solid-lit)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada biblioteca aqui tem algo em comum. Eles s√£o renderizados com base em modelos de elemento de clonagem, executados em tempo de execu√ß√£o e n√£o usam VDOM. Mas eles ainda t√™m diferen√ßas. O DomC e o lit-html usam diferen√ßas de cima para baixo semelhantes ao Virtual DOM, enquanto o Solid usa um gr√°fico reativo. O Lit-html divide os modelos em partes. DomC e Solid compilam o modelo em caminhos separados em tempo de execu√ß√£o e os atualizam. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h3/iu/lv/h3iulvmkhg6y1og6dslnc3pt8i8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta categoria tem a maior variedade de desempenho. O DomC √© o mais r√°pido e o lit-html √© o mais lento. Solid Lit est√° no meio. O DomC demonstra que a simplicidade do c√≥digo leva ao melhor desempenho. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O DomC afunda apenas na se√ß√£o 4 porque calcula a diferen√ßa de n√≥s, que se torna mais complicada √† medida que a profundidade aumenta. √â bem r√°pido, mas voc√™ precisa validar os resultados no big data.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solid Lit √© mais produtivo que Solid HyperScript. A compila√ß√£o instant√¢nea em tempo de execu√ß√£o remove as desvantagens de criar um gr√°fico reativo, permitindo que a estrutura acompanhe o ivi, a biblioteca VDOM mais r√°pida (consulte a tabela completa no final do artigo). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0m/h1/vo/0mh1vo1qzvthbjsvsol1mpopdgg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DomC mostrou bons resultados no consumo de mem√≥ria. Isso aconteceu devido √† clonagem dos elementos do modelo. Vale ressaltar que a gera√ß√£o de c√≥digo em tempo de execu√ß√£o pode ter uma sobrecarga de desempenho m√≠nima em compara√ß√£o com a compila√ß√£o no est√°gio de compila√ß√£o. Talvez esta seja uma compara√ß√£o injusta para o lit-html porque a estrutura n√£o usa essa t√©cnica. Mas √© justo dizer que bibliotecas lit-html ou similares, como hyperHTML ou lighterHTML, n√£o s√£o a melhor maneira de implementar literais de modelo com tags. E voc√™ pode obter bons resultados, mesmo em tempo de execu√ß√£o, sem o VDOM.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSX pr√©-compilado (s√≥lido, sinais s√≥lidos, excedente)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essas bibliotecas usam JSX, que √© compilado em um DOM ou gr√°fico reativo no est√°gio de constru√ß√£o. </font><font style="vertical-align: inherit;">Os modelos podem ser qualquer coisa, mas o JSX fornece uma √°rvore de sintaxe limpa que aprimora a experi√™ncia do desenvolvedor. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/q5/ik/c7/q5ikc7iohyy8m5lyydzhijzylaq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este grupo tem resultados semelhantes, mas a diferen√ßa √© muito importante. </font><font style="vertical-align: inherit;">Todos os tr√™s utilizam a mesma biblioteca para gerenciar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> estado </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Usando o exemplo de Sinais S√≥lidos, voc√™ pode ver que as fun√ß√µes de rastreamento com clonagem de elementos do modelo oferecem melhor desempenho. </font><font style="vertical-align: inherit;">A implementa√ß√£o padr√£o do Solid est√° sobrecarregada usando os Proxies ES2015, o que piora o resultado em todos os gr√°ficos. </font><font style="vertical-align: inherit;">O excedente usa `document.createElement`, que diminui o desempenho em testes nos quais as linhas 1, 2, 7 e 8 s√£o criadas.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fv/7_/by/fv7_bynjjqiyp8u_ss3l0cqsmtc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O consumo de mem√≥ria tem resultados semelhantes. </font><font style="vertical-align: inherit;">Nesse caso, os proxies adicionam mais complexidade do que os elementos do modelo de clonagem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A conclus√£o aqui √© que os proxies degradam o desempenho e mais bibliotecas devem clonar modelos. </font><font style="vertical-align: inherit;">Por outro lado, voc√™ pode considerar uma pequena perda de desempenho devido a proxies como investimento. </font><font style="vertical-align: inherit;">O exemplo Solid possui a menor quantidade de c√≥digo dentre outros exemplos - apenas 66 linhas, 13% menos espa√ßo em branco que o Svelte - uma biblioteca que se orgulha de seu minimalismo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Melhor da classe (domc, ivi, solid-signs, vanillajs)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos pegar os vencedores de cada categoria e compar√°-los com o exemplo brutal, eficaz e escrito √† m√£o em JavaScript vanilla. Cada implementa√ß√£o representa uma das populares solu√ß√µes de rastreamento de estado. Voc√™ pode at√© fazer uma analogia entre essas bibliotecas e os Tr√™s Grandes: S√≥lido ‚Üí Vue, DomC ‚Üí Angular, ivi ‚Üí Reagir. Voc√™ obter√° esse resultado se remover tudo sup√©rfluo, exceto a renderiza√ß√£o, e se livrar do c√≥digo de 60-200kb. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sy/lj/9c/sylj9c8bd1xzzwehg0o-z7mvyei.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O DomC e o Solid est√£o pr√≥ximos em termos de desempenho, o ivi est√° significativamente atrasado, mas o DomC, no geral, √© mais r√°pido. Sua complexidade em compara√ß√£o com o vanillaJS √© notavelmente menor, mas √© menos eficaz com atualiza√ß√µes parciais. Somente este crit√©rio n√£o √© indicativo. Qualquer pessoa que pense que o VDOM √© lento ou tem complica√ß√µes desnecess√°rias deve verificar isso por conta pr√≥pria.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A maioria das bibliotecas nunca ter√° esse tipo de desempenho. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mz/zp/bx/mzzpbxqifmdadvbjm3ydk3pxy2a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O DomC tamb√©m est√° liderando o gr√°fico com mem√≥ria. </font><font style="vertical-align: inherit;">S√≥lido refinado supera o VDOM ivi em termos de consumo de mem√≥ria. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Curiosamente, essas bibliotecas n√£o s√£o muito piores que o vanillaJS, independentemente do m√©todo. </font><font style="vertical-align: inherit;">Eles s√£o todos muito r√°pidos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tamanho do pacote</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por fim, gostaria de abordar o tamanho do pacote. </font><font style="vertical-align: inherit;">Muitos testes reais se concentram apenas nessas m√©tricas. </font><font style="vertical-align: inherit;">Sim, o tamanho do pacote √© importante e tem uma correla√ß√£o direta com o desempenho, mas qual √© a diferen√ßa? </font><font style="vertical-align: inherit;">Suspeito que a complexidade do c√≥digo seja mais importante que o tamanho.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-t/m7/yb/-tm7ybrxshulxxcbcufybomwzjq.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como sempre, os resultados nesses gr√°ficos nunca s√£o completamente convincentes. O processo em si e as conclus√µes que tiramos s√£o importantes. Nesse caso, vemos que o pr√≥prio DOM √© um grande gargalo no que diz respeito ao desempenho. Tanto √© assim que n√£o existe uma t√©cnica inequ√≠voca para contorn√°-lo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ll/7v/qa/ll7vqadwntgwoae6oepqwwbsalc.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Christoper Lambert como o Highlander</font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
N√£o, n√£o √© assim t√£o simples. Nem o DOM nem o VDOM s√£o lentos. Mas acredito que eles valem um ao outro. Admito que a ret√≥rica do VDOM Performance React me levou a esses pensamentos. A ignor√¢ncia de opini√µes sobre esse t√≥pico √© enfurecedora.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A alega√ß√£o de que o VDOM √© lento deve-se √† falta de conhecimento. Renderizar VDOM e calcular a diferen√ßa de estado √© uma complica√ß√£o comparada a n√£o faz√™-lo. Mas sua aus√™ncia √© escal√°vel? E como fazer altera√ß√µes nos dados?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vejo que h√° uma exce√ß√£o em todas as regras. Em geral, a pr√©-compila√ß√£o combinada com granula√ß√£o fina em estruturas reativas √© a solu√ß√£o mais r√°pida. Mas o DomC mostra alto desempenho sem ele. M√©todos JS nativos, como clonagem de elementos de modelo com literais de modelo marcado, podem ser a melhor solu√ß√£o para implementar lit-html de grandes empresas (Google). Mas essa √© uma das estruturas mais lentas desta tabela e nem mesmo a melhor implementa√ß√£o dessas tecnologias. Svelte √© considerada a biblioteca mais r√°pida da comunidade, mas n√£o conseguiu nem competir de perto com as solu√ß√µes apresentadas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se a programa√ß√£o reativa vencer, isso n√£o significa que todas as bibliotecas reativas s√£o r√°pidas ou que m√©tricas significam tudo. </font><font style="vertical-align: inherit;">Apesar da compara√ß√£o profunda neste artigo, acho que, na realidade, existem bibliotecas r√°pidas e lentas. </font><font style="vertical-align: inherit;">Mesmo se encontrarmos super tecnologia, ainda enfrentaremos suas limita√ß√µes. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resultados de teste de todas as bibliotecas em uma tabela:</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/gg/3u/oq/gg3uoqckygryprsownwet3r12jq.png"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt501158/index.html">Tornando o Android View Binding conveniente com o Kotlin</a></li>
<li><a href="../pt501162/index.html">Compara√ß√£o de cenas de rap russas usando t√©cnicas de minera√ß√£o de texto e texto. Noize Mc e Kasta vs Pharaoh and Morgenshtern</a></li>
<li><a href="../pt501164/index.html">Visualiza√ß√£o de topologias de rede ou por que outro engenheiro de rede Python # 2</a></li>
<li><a href="../pt501166/index.html">oVirt em 2 horas. Parte 1. Abra a Plataforma de Virtualiza√ß√£o de Failover</a></li>
<li><a href="../pt501168/index.html">Os auxiliares se salvam - eles salvam, salvam, queimam?</a></li>
<li><a href="../pt501172/index.html">Meu computador Mikrosh: continue a semana de nostalgia</a></li>
<li><a href="../pt501178/index.html">Como assistir porn√¥ afeta a produtividade do trabalho e estudo</a></li>
<li><a href="../pt501180/index.html">[P√≥s-pergunta] Voc√™ precisa de um movimento de TI para FACTS sobre coronav√≠rus e "efeitos colaterais"</a></li>
<li><a href="../pt501182/index.html">oVirt em 2 horas. Parte 2. Instalando o Gerenciador e os Hosts</a></li>
<li><a href="../pt501184/index.html">Como configurar o Apollo para funcionar com o GraphQL no Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>