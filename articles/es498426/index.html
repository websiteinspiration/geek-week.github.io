<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☯️ 🔜 😲 Cómo evacuamos el turno de servicio de Yandex 👂🏾 🔊 💌</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cuando el trabajo cabe en una computadora portátil y se puede realizar de forma autónoma por parte de otras personas, entonces no hay problema para mu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Cómo evacuamos el turno de servicio de Yandex</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/498426/"><img src="https://habrastorage.org/webt/as/kx/qr/askxqrmenpitf9-j1es44_nly14.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando el trabajo cabe en una computadora portátil y se puede realizar de forma autónoma por parte de otras personas, entonces no hay problema para mudarse a una ubicación remota: simplemente quédese en casa por la mañana. </font><font style="vertical-align: inherit;">Pero no todos tuvieron tanta suerte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Duty Shift es un equipo de especialistas en disponibilidad de servicios (SRE). </font><font style="vertical-align: inherit;">Incluye administradores de tareas, desarrolladores, gerentes, así como un "tablero" común de 26 paneles LCD de 55 pulgadas cada uno. </font><font style="vertical-align: inherit;">La estabilidad de los servicios de la compañía y la velocidad de resolución de problemas dependen del trabajo del turno de servicio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoy Dmitry Melikov</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tal10n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, el supervisor de turno, hablará sobre cómo lograron transportar equipos a sus hogares y establecer nuevos procesos de trabajo en cuestión de días. </font><font style="vertical-align: inherit;">Le doy la palabra.</font></font><br>
<br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Cuando tiene un suministro de tiempo infinito, puede moverse cómodamente con cualquier cosa en cualquier lugar. </font><font style="vertical-align: inherit;">Pero la rápida propagación del coronavirus nos puso en condiciones completamente diferentes. </font><font style="vertical-align: inherit;">Los empleados de Yandex estuvieron entre los primeros en cambiarse al trabajo remoto, incluso antes de la introducción del régimen de autoaislamiento. </font><font style="vertical-align: inherit;">La cosa fue así. </font><font style="vertical-align: inherit;">El jueves 12 de marzo, me pidieron que evaluara la oportunidad de transferir el trabajo del equipo a casa. </font><font style="vertical-align: inherit;">El viernes 13 hubo una recomendación para cambiar al trabajo remoto. </font><font style="vertical-align: inherit;">En la noche del martes 17 de marzo, todo estaba listo para nosotros: los asistentes trabajaban en casa, se transportaba el equipo, se escribía el software perdido, se reconfiguraban los procesos. </font><font style="vertical-align: inherit;">Y ahora te diré cómo lo hicimos. </font><font style="vertical-align: inherit;">Pero primero debe recordar aquellas tareas que se resuelven con el turno de servicio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quienes somos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yandex es una gran empresa con cientos de servicios. La estabilidad de la búsqueda, el asistente de voz y todos los demás productos dependen no solo de los desarrolladores. El centro de datos puede interrumpir la fuente de alimentación. Un trabajador puede dañar accidentalmente un cable óptico mientras reemplaza el asfalto. O puede haber un aumento en la actividad del usuario, lo que requerirá una reasignación urgente del poder. Además, todos vivimos en una infraestructura grande y compleja, y el lanzamiento de uno de los productos puede provocar accidentalmente la degradación del otro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
26 paneles en nuestro espacio abierto son mil quinientas alertas y más de cien gráficos y paneles de nuestros servicios. De hecho, este es un gran panel de diagnóstico. Un administrador de servicio experimentado, mirándola, comprende rápidamente el estado de los nodos importantes y puede establecer una dirección para investigar un problema tecnológico. Esto no significa que una persona deba mirar constantemente todos los dispositivos: la automatización en sí atraerá la atención enviando una notificación a la interfaz especial de la persona en servicio, pero sin un panel visual, la solución al problema puede retrasarse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando surgen problemas, el asistente primero evalúa su prioridad. Luego aísla el problema o minimiza su impacto en los usuarios.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay varias formas estándar de aislar un problema. Una de ellas es la degradación de los servicios, cuando el administrador de turno deshabilita algunas de las funciones que los usuarios menos notan. Esto le permite reducir temporalmente la carga y descubrir qué sucedió. Si hay un problema con el centro de datos, el asistente contacta al equipo de operaciones, comprende el problema, monitorea el momento de su solución y, si es necesario, conecta equipos especializados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando el administrador de turno no puede aislar el problema que surgió debido al lanzamiento, lo informa al equipo de servicio, y los desarrolladores buscan errores en el nuevo código. Si no pueden resolverlo, entonces el administrador atrae a desarrolladores de otros productos o ingenieros para la disponibilidad de servicios.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puedo hablar durante mucho tiempo sobre cómo se arregla todo con nosotros, pero creo que ya he transmitido la esencia. </font><font style="vertical-align: inherit;">El turno de trabajo coordina el trabajo de todos los servicios y controla los problemas globales. </font><font style="vertical-align: inherit;">Es importante que el administrador de turno tenga un panel de diagnóstico frente a los ojos. </font><font style="vertical-align: inherit;">Es por eso que al cambiar al trabajo remoto, no puede simplemente tomar y darles a todos una computadora portátil. </font><font style="vertical-align: inherit;">Los gráficos y alertas no caben en la pantalla. </font><font style="vertical-align: inherit;">¿Qué hacer?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Idea</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la oficina, los diez administradores de turno trabajan en turnos detrás de un tablero, que incluye 26 monitores, dos computadoras, cuatro tarjetas de video NVIDIA Quadro NVS 810, dos unidades de suministro de energía ininterrumpible y varios accesos de red independientes. Pero necesitábamos brindarles a todos la oportunidad de trabajar en casa. Simplemente no funcionará ensamblar una pared de este tipo en el apartamento (mi esposa estará especialmente feliz por esto), por lo que decidimos crear una versión portátil que pueda llevarse y ensamblarse en casa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comenzamos a experimentar con la configuración. Necesitábamos colocar todos los dispositivos en menos pantallas, por lo que el requisito principal para el monitor era una alta densidad de píxeles. De los monitores 4K disponibles en nuestro entorno, se eligió Lenovo P27u-10 para las pruebas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De las computadoras portátiles tomaron una MacBook Pro de 16 pulgadas. </font><font style="vertical-align: inherit;">Tiene un subsistema de gráficos bastante potente, necesario para renderizar imágenes en varias pantallas 4K, y cuatro conectores universales de tipo C. </font><font style="vertical-align: inherit;">Usted puede preguntar: ¿por qué no un escritorio? </font><font style="vertical-align: inherit;">Reemplazar una computadora portátil con exactamente lo mismo desde un almacén es mucho más fácil y rápido que ensamblar y configurar una unidad de sistema idéntica. </font><font style="vertical-align: inherit;">Sí, y pesa menos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora era necesario comprender cuántos monitores podríamos conectar realmente a la computadora portátil. </font><font style="vertical-align: inherit;">Y el problema aquí no es la cantidad de conectores, solo podríamos averiguarlo probando el sistema completo.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6i/oe/tn/6ioetnysrbrhlu7qi03q5uorozy.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pruebas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Colocamos cómodamente todos los gráficos y alertas en cuatro monitores e incluso los conectamos a una computadora portátil, pero tuvimos un problema. Al procesar 4 × 4K píxeles en los monitores conectados, se cargó la tarjeta de video de manera que la computadora portátil se descargó incluso mientras se cargaba. Afortunadamente, el problema se resolvió con la ayuda de la estación de acoplamiento Lenovo ThinkPad Thunderbolt 3 Dock Gen 2. Logramos conectar un monitor, alimentación e incluso un mouse favorito con un teclado a la estación de acoplamiento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero inmediatamente surgió otro problema: la GPU se hinchó tanto que la computadora portátil se sobrecalentó, lo que significaba que la batería también se sobrecalentó, lo que como resultado entró en modo de protección y dejó de cargarse. En general, este es un modo muy útil que protege contra situaciones peligrosas. En algunos casos, el problema se resolvió con la ayuda de un dispositivo de alta tecnología: un bolígrafo, colocado debajo de una computadora portátil para mejorar la ventilación. Pero esto no ayudó a todos, por lo que también cambiamos la velocidad de un ventilador normal.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Había otra característica desagradable. </font><font style="vertical-align: inherit;">Todos los cuadros y alertas deben ubicarse en un lugar estrictamente definido. </font><font style="vertical-align: inherit;">Imagine que está piloteando un avión para aterrizar, y aquí los indicadores de velocidad, altímetros, variómetros, indicadores de horizonte, brújulas e indicadores de posición comienzan a cambiar de tamaño y saltar a diferentes lugares. </font><font style="vertical-align: inherit;">Entonces decidimos hacer una aplicación que ayude con esto. </font><font style="vertical-align: inherit;">En una tarde, lo escribimos en Electron.js, tomando una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> preparada </font><font style="vertical-align: inherit;">para crear y administrar ventanas. </font><font style="vertical-align: inherit;">Agregamos un controlador de configuración y su actualización periódica, así como soporte para un número limitado de monitores. </font><font style="vertical-align: inherit;">Un poco más tarde, agregamos soporte para varias configuraciones.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Montaje y entrega</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para el lunes, los asistentes de asistencia técnica tenían 40 monitores, diez computadoras portátiles y la misma cantidad de estaciones de acoplamiento para nosotros. No sé cómo lo hicieron, pero muchas gracias. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y5/ig/_i/y5ig_i-32ogwdzgodtoghqxtkvs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quedaba por llevar todo esto a los departamentos de los administradores de servicio. Y estas son diez direcciones en diferentes partes de Moscú: sur, este, centro y también Balashikha, a las que hay 45 kilómetros de la oficina (por cierto, también se agregó más tarde un interno de Serpukhov). Era necesario distribuir de alguna manera todo esto entre las personas, para construir la logística.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conduje todas las direcciones en nuestros mapas, todavía existe la oportunidad de optimizar la ruta entre diferentes puntos (utilicé la versión beta gratuita de la herramienta para los correos). </font><font style="vertical-align: inherit;">Dividimos nuestro equipo en cuatro equipos independientes de dos personas, cada uno con su propia ruta. </font><font style="vertical-align: inherit;">Mi auto era el más espacioso, así que tomé el equipo para cuatro empleados a la vez. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l0/fa/sl/l0faslaayow0ip3rkaglz9nfmhm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La entrega completa tomó un récord de tres horas. </font><font style="vertical-align: inherit;">Salimos de la oficina a las diez de la noche del lunes. </font><font style="vertical-align: inherit;">A la una de la mañana ya estaba en casa. </font><font style="vertical-align: inherit;">Esa misma noche nos pusimos de servicio con nuevos equipos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cual es el resultado</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En lugar de una consola de diagnóstico grande, recolectamos diez relativamente portátiles en el departamento de cada persona en servicio. </font><font style="vertical-align: inherit;">Por supuesto, quedaba por establecer algunas pequeñas cosas. </font><font style="vertical-align: inherit;">Por ejemplo, antes teníamos un teléfono "de hierro" de la persona en servicio para notificaciones. </font><font style="vertical-align: inherit;">En las nuevas condiciones, esto no funcionó, por lo que se nos ocurrieron "teléfonos virtuales" para los que estaban de servicio (de hecho, canales en el messenger). </font><font style="vertical-align: inherit;">Hubo otros cambios. </font><font style="vertical-align: inherit;">Pero lo principal es que en un tiempo récord logramos transferir no solo personas, reduciendo el riesgo de infección, sino todo nuestro trabajo en casa sin dañar los procesos y la estabilidad de los productos. </font><font style="vertical-align: inherit;">En este modo, hemos estado trabajando durante un mes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuación encontrará fotos de los trabajos reales de nuestros asistentes.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pc/mi/rj/pcmirjydwy5emc9qvy76fshoune.png"><br>
<br>
<img src="https://habrastorage.org/webt/jl/mm/v_/jlmmv_hymx3mh7aiyvda2noqbwk.png"><br>
<br>
<img src="https://habrastorage.org/webt/-b/5w/nz/-b5wnzqoyqixrodue2opshmjgnw.png"><br>
<br>
<img src="https://habrastorage.org/webt/xh/3u/wx/xh3uwxiartgspsynry7c9ufxfzs.png"><br>
<br>
<img src="https://habrastorage.org/webt/ll/a0/f0/lla0f0dinjjmlwsytvp7krxsbni.png"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es498406/index.html">Cómo se destruyó la personalidad de un joven programador brillante</a></li>
<li><a href="../es498410/index.html">Vivaldi para PC y Vivaldi para Android - Juego de equipo con puntaje 3.0</a></li>
<li><a href="../es498412/index.html">La conciencia es simple o lo que está mal con el tiempo</a></li>
<li><a href="../es498416/index.html">Yandex vinculará automáticamente la tarjeta a otra cuenta</a></li>
<li><a href="../es498418/index.html">Implementación de WebRTC en un servidor de medios: práctica y política</a></li>
<li><a href="../es498428/index.html">WAL-G: nuevas características y expansión de la comunidad. Georgy Rylov</a></li>
<li><a href="../es498430/index.html">Que pasa con el transporte el 22 de abril</a></li>
<li><a href="../es498436/index.html">Guía de GitLab CI / CD para el principiante (casi) absoluto</a></li>
<li><a href="../es498438/index.html">8 preguntas fáciles para mentores de pasantías</a></li>
<li><a href="../es498440/index.html">Amenaza destacada: Virus de archivo Neshta</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>