<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤹 🧑 👰🏻 数据库模式的适度指南 🙍🏾 🛌🏽 🅾️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mookiezoolook的“花的几何形状” 
 
 对于要根据流量和复杂性进行缩放的应用程序，最初设计一个称职的数据库方案非常重要。如果您做出错误的选择，则必须花费很多精力，以使此错误的模板不会传播到服务和后端控制器，最后也不会传播到前端。
 
 但是，如何评估哪个电路更好呢？当我们谈论数据库体系...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>数据库模式的适度指南</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/501598/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/al/m2/zoalm23rpnu233blf2nybyz6tk0.jpeg"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mookiezoolook的“花的几何形状”</font></font></i></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
对于要根据流量和复杂性进行缩放的应用程序，最初设计一个称职的数据库方案非常重要。如果您做出错误的选择，则必须花费很多精力，以使此错误的模板不会传播到服务和后端控制器，最后也不会传播到前端。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，如何评估哪个电路更好呢？当我们谈论数据库体系结构时，“更好”是什么意思？</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mail.ru云解决方案</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">团队</font><font style="vertical-align: inherit;">邀请您</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">遵循</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">软件开发顾问</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"> Mike Alcha的建议</font></a><font style="vertical-align: inherit;">。在我们看来，他相当简洁地总结了主管架构的一些原则。</font></font><br>
<a name="habracut"></a><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tg/ed/6j/tged6jbyakg4f0no_up6r9c-9aw.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主任：</font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我认为我们应该建立一个SQL数据库</font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">。</font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">” </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">开发人员（他甚至了解他在说什么，还是只是在商业杂志上看到了某种广告？..）：</font></i><i><font style="vertical-align: inherit;">“ </font></i><i><font style="vertical-align: inherit;">您想要数据库什么颜色？</font></i><i><font style="vertical-align: inherit;">”。</font></i><i><font style="vertical-align: inherit;">导演：</font></i><i><font style="vertical-align: inherit;">“ </font></i><i><font style="vertical-align: inherit;">也许丁香拥有最多的记忆</font></i><i><font style="vertical-align: inherit;">。</font></i><i><font style="vertical-align: inherit;">”</font></i></font><i><font style="vertical-align: inherit;"></font></i><br>
<br>
<i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><br>
<br>
<i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一些基本技巧</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，努力做到</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两点</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">很重要</font><font style="vertical-align: inherit;">：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将信息分成表时，将存储所有信息。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储的冗余很小。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
关于第二点：我们是否仅由于存储大小问题而希望减少冗余？</font><font style="vertical-align: inherit;">不，我们这样做主要是因为</font><font style="vertical-align: inherit;">如果您在更新过程中未更新表示相同信息的所有字段</font><font style="vertical-align: inherit;">，则冗余数据的存在会导致</font></font><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不一致问题</font></font></strong></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下是一些指南</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，可帮助您更好地了解良好的体系结构</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">至少使用第三种标准格式（根据</font><font style="vertical-align: inherit;">Bill Kent </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的措辞</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">其中每个非密钥属性“必须提供有关密钥，完整密钥的信息，除了密钥之外的任何信息” </font><font style="vertical-align: inherit;">）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以限制形式创建最后一道防线。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切勿将整个地址存储在一个字段中。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切勿在一个字段中存储名字和姓氏。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置表和字段名称的约定并坚持使用。</font></font></li>
</ol><br>
<i><div style="text-align:center;"><img src="https://habrastorage.org/webt/qu/lx/pr/qulxprdoqnbq5twc8dgw47qewry.jpeg"></div></i><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 你在做什么？</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化此SQL查询。” </font><font style="vertical-align: inherit;">它放慢了速度，用户开始抱怨。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font><i><font style="vertical-align: inherit;">为了优化</font></i><i><strong><font style="vertical-align: inherit;">需要</font></strong></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注释中的淫秽语言</font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">？</font></i><font style="vertical-align: inherit;">
- </font><i><font style="vertical-align: inherit;">如果您看到</font></i><i><strong><font style="vertical-align: inherit;">原始</font></strong></i><i><font style="vertical-align: inherit;">代码，则不会询问。</font></i><font style="vertical-align: inherit;">
让我们更详细地考虑这些建议。</font></font><i><strong><font style="vertical-align: inherit;"></font></strong></i><i><font style="vertical-align: inherit;"></font></i><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><i><strong><font style="vertical-align: inherit;"></font></strong></i><i><font style="vertical-align: inherit;"></font></i><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.至少使用第三范式</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数据库体系结构可以分为以下几类：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个范式。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二范式。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第三范式。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">博伊斯·科德的正常形式。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这些类别按质量表示分类。</font><font style="vertical-align: inherit;">我们将简要回顾所有类别，并查看为什么至少需要第三个范式。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一范式</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于第一个范式，数据库中每个表的每个列的每个值必须是原子的。</font><font style="vertical-align: inherit;">原子是什么意思？</font><font style="vertical-align: inherit;">简而言之，原子值是“单件事情”。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例如，我们有一个这样的表：</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名字</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">姓</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">年龄</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地区</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">俊</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">母鹿</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{“网站设计”，“客户研究”}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">玛丽</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{“长期战略规划”，“招聘”}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">汤姆</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">史密斯</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{“营销”}</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这里，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Areas</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">包含的不是原子的值。</font><font style="vertical-align: inherit;">例如，在John Doe行中，该字段存储两个实体：网站设计和客户研究。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，该表不是第一个普通形式。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为使其具有这种形式，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个字段中仅应存储一个值</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二范式</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在第二范式中，不能从主键的</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">较小部分</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">派生不属于主键的列（或可以充当另一个主键的</font><strong><font style="vertical-align: inherit;">一部分）的列</font></strong><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是什么意思？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
假设您具有这样的基本架构（我在此表中强调了与主键相对应的字段）：</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">员工ID</font></font></u></td>
<td><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project_id</font></font></u></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小时</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">员工姓名</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目名称</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">约翰</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“网站设计”</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二十</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">玛丽</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“网站设计”</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在此项目中，可以直接从employee_id推断出雇员姓名，因为这样的想法是，雇员姓名由其标识符唯一确定。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同样，项目名称由project_id标识符唯一标识。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，我们有两列可以从主键部分推导出。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这些示例中的每个示例都足以使该表脱离第二范式。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另一个结论是，如果表采用第一种标准格式，并且所有主键均为单列，则该表已经采用第二种标准格式。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第三范式</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了使表与第三范式相对应，它必须为第二范式，而表中不应有任何属性（列），但主属性除外，这些属性可传递地依赖于主键。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是什么意思？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
假设您具有以下架构（远非理想）：</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">员工姓名</font></font></td>
<td><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">员工ID</font></font></u></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">年龄</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部门编号</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部门名称</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">约翰</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“营销”</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">玛丽</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">456</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“操作”</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">汤姆</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“营销”</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在此表中，department_number可以从employee_id推断，department_name可以从department_number推断。因此，department_name可传递地依赖于employee_id！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果存在这样的传递依赖项：employee_id→department_number→department_name，则该表不是第三种正常形式。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此出现什么问题</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果可以从部门编号中得出部门名称，则为每个员工存储此字段会导致过多的冗余。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
想象一下，营销部门将其名称更改为“ Marketing and Sales”。为了保持一致性，您将不得不为该部门中的每个员工更新表格每一行中的单元格！在第三范式中，这不会发生。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此外，如果玛丽决定离开公司，将会发生以下情况：我们必须从表中删除她的行，但是如果她是运营部门中的唯一雇员，那么该部门也将被删除。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有这些问题都可以通过第三种正常形式完全避免。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c45/93e/423/c4593e423e573702d0039506bdbe562f.png"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">妈妈的功绩</font></font></i></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">她女儿的名字叫Help！</font><font style="vertical-align: inherit;">我被迫假护照</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.以限制形式创建最后一道防线</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您正在使用的数据库不仅仅是一组表。内置某些功能。其中许多功能可帮助确保数据质量和准确性。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
限制设置了规则，可以在数据库字段中输入什么值。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在数据库中定义关系时，请确保设置外键约束。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
确保指定在删除和更新与其他表中的其他行关联的行时应执行的操作（ON DELETE和ON UPDATE规则）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
确保对绝不应该为空的所有字段使用NOT NULL。在后端设置检查可能很有意义，但请记住，崩溃总是会发生，因此添加这种限制不会有任何危害。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置CHECK检查限制以确保表格值在可接受的范围内，例如，产品价格始终为正值。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个有趣的事实</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：在2020年4月，正是这样的软件限制</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阻止了莫斯科MICEX的交易，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为WTI石油期货的价格跌至零以下。</font><font style="vertical-align: inherit;">与莫斯科证券交易所不同，纽约商品交易所NYMEX </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在事件发生前一周更新了该软件</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此它能够成功以负价进行交易，即向卖方收取的买方附加费-大约为255美元。</font><font style="vertical-align: inherit;">反式 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有PostgreSQL限制都可以在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找到</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.切勿将整个地址存储在一个字段中</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您的应用程序或网站的表单中只有一个字段，用户可以在其中输入其地址，那么它的味道就不好了。在这种情况下，很有可能在数据库中还将有一个字段将地址存储为简单字符串。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，如果您需要按城市组合客户购买量以查看哪个城市更受欢迎，该怎么办？你可以做到吗？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这将非常困难！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于完整地址以字符串形式存储在数据库字段中，因此您首先必须确定该字符串中有多少是城市！考虑到该字段中所有可能的地址格式，这几乎是不可能完成的任务。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，请确保将通用的“地址”字段分解为特定的字段：街道，门牌号，城市，地区，邮政编码等。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一个地址问题-匿名字段</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是Michaels Blach的著作《提高软件质量的铜弹》中的插图：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b98/165/d9e/b98165d9e6cd4b9e43350285a75609ba.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这里可以看到哪些潜在问题？</font><font style="vertical-align: inherit;">您可以轻松地将芝加哥市与芝加哥街道区分开吗？</font><font style="vertical-align: inherit;">可能不是。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，请记住始终为每个信息单元提供明确的列名。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0e/te/dp/0etedpf1hxfr2sci5m1jliwd4zi.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如何写简历</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您有SQL经验吗？</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不（不）</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">写：NoSQL专家。</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.切勿在一个字段中存储名字和姓氏</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与地址的情况类似：姓名和姓氏的变体数量太大，无法清楚地区分。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然，如果名称和姓氏之间有空格，则可以将其与姓氏分开。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例如，“ Mike Alche”→名称“ Mike”和姓“ Alche”。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，如果用户输入中间名怎么办？还是他有双重姓氏？但是，如果有中间名和双姓怎么办？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如何确定名称和拆分字符串的姓氏在哪里？错误是不可避免的。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
避免许多问题的一种方法是为first_name和last_name用户名创建单独的字段（以表单形式）。这样，您就可以允许用户共享自己的名称，并可以以一致的方式存储数据。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：我并不是说数据库字段中禁止使用空格。</font><font style="vertical-align: inherit;">例如，对于Juan Juan Del Potro之类的名称，Juan Martin的第一部分在first_name字段中，而Del Potro在last_name字段中。</font><font style="vertical-align: inherit;">当然，这</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并不完美</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以选择具有Middle_name和second_last_name列。</font><font style="vertical-align: inherit;">查看更多有关在列表中的“姓氏和名字的可能的变化</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关名称程序员的误解</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”和文章“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于名程序员的误解-举例</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”。</font><font style="vertical-align: inherit;">您必须在准确性和实用性之间达成某种折衷方案。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.设置表和字段名称的约定并坚持使用</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用看起来像user.firstName，user.lst_name，user.birthDate等数据的数据很烦人。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我建议您建立下划线命名规则，因为并非所有SQL引擎都以相同的方式处理大写字母，并且用引号将所有内容括起来非常繁琐。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
选择与调用表相同的形式-复数形式或单数形式（例如，复数形式的用户或单数形式的用户）。</font><font style="vertical-align: inherit;">我更喜欢单数，但是默认情况下，所有后端框架似乎都是复数的。</font><font style="vertical-align: inherit;">您必须遵循模式并使用复数。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还有什么要读的</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为项目选择什么数据库，这样就不必再次选择</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   IIoT-:  Mail.ru Cloud Solutions       </a>.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">      </a>.</li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN501582/index.html">亚马逊和速卖通的动态价格如何导致价值2400万美元的商品</a></li>
<li><a href="../zh-CN501588/index.html">对各种架构的处理器进行了出色的测试</a></li>
<li><a href="../zh-CN501590/index.html">用英语撰写的文章：残酷的规则与例外之战</a></li>
<li><a href="../zh-CN501594/index.html">逃离动物园或如何在iOS上做休闲游戏</a></li>
<li><a href="../zh-CN501596/index.html">使用Git时如何使生活更轻松（以及用于深度浸泡的多种材料）</a></li>
<li><a href="../zh-CN501600/index.html">游戏机stm32</a></li>
<li><a href="../zh-CN501604/index.html">安德鲁·安（Andrew Un）的著作《机器学习的激情》的翻译。第51章和第52章</a></li>
<li><a href="../zh-CN501610/index.html">Angular中的自定义滚动条</a></li>
<li><a href="../zh-CN501612/index.html">2020年为您的计算机选择哪种图形卡</a></li>
<li><a href="../zh-CN501614/index.html">PostgreSQL Antipatterns：兔子洞有多深？通过层次结构</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>