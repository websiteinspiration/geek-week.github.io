<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥧 🌥️ 🉐 NSA, Ghidra, dan Unicorn 🤘🏼 👴🏾 🧑🏿‍🤝‍🧑🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kali ini, tim PVS-Studio tertarik oleh Ghidra, kerangka kerja besar dan jahat untuk rekayasa terbalik yang dengannya Anda dapat menganalisis berbagai ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>NSA, Ghidra, dan Unicorn</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/504780/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/zb/b9/po/zbb9pocjsbhx8woze4xo8picks0.png" alt="NSA, Ghidra, dan Unicorn"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kali ini, tim PVS-Studio tertarik oleh Ghidra, kerangka kerja besar dan jahat untuk rekayasa terbalik yang dengannya Anda dapat menganalisis berbagai file biner dan melakukan segala macam hal menyeramkan bersama mereka. </font><font style="vertical-align: inherit;">Hal yang paling menarik tentang itu bukanlah bahwa itu gratis untuk digunakan atau diperluas dengan baik dengan plugin, tetapi itu ditulis dalam NSA dan diposting di GitHub untuk semua orang. </font><font style="vertical-align: inherit;">Di satu sisi, NSA tampaknya memiliki sumber daya yang cukup untuk menjaga basis kode tetap bersih. </font><font style="vertical-align: inherit;">Dan di sisi lain, kontributor baru yang tidak terlalu mengenalnya bisa saja secara tidak sengaja menambahkan bug yang tidak terdeteksi belakangan ini. </font><font style="vertical-align: inherit;">Oleh karena itu, berbekal analisis statis, kami memutuskan untuk mencari kelemahan dalam proyek ini.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pendahuluan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara total, analisa statis PVS-Studio mengeluarkan 651 peringatan tinggi, 904 sedang, dan rendah 909 di bagian Jawa dari proyek Ghidra ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rilis 9.1.2, komit 687ce7f</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Di antara mereka, sekitar setengah dari respons tinggi dan sedang dipicu oleh diagnostik </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">V6022</font></a><font style="vertical-align: inherit;"> .</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parameter tidak digunakan di dalam tubuh metode ", yang biasanya muncul setelah refactoring, ketika beberapa parameter tidak lagi diperlukan atau beberapa fungsi dinonaktifkan untuk sementara waktu oleh komentar. Lihat sekilas peringatan ini (ada terlalu banyak dari mereka untuk melihat masing-masing sebagai pengamat luar) ) dalam proyek ini tidak mengungkapkan sesuatu yang mencurigakan. Mungkin diperbolehkan untuk proyek ini untuk sementara menonaktifkan diagnostik ini dalam pengaturan analisa sehingga tidak terganggu olehnya. Dalam prakteknya, Anda sering dapat melihat kesalahan ketik atas nama setter atau parameter konstruktor dan, secara umum, seharusnya tidak Saya yakin sebagian besar pembaca setidaknya sekali menemukan pola yang tidak menyenangkan serupa:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>{
  <span class="hljs-keyword">private</span> String value;
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">A</span><span class="hljs-params">(String val)</span> </span>{ <span class="hljs-comment">// V6022</span>
    <span class="hljs-keyword">this</span>.value = value;<font></font>
  }<font></font>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> value.hashCode(); <span class="hljs-comment">// NullPointerException</span><font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lebih dari setengah dari peringatan rendah dibuat oleh </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diagnostik</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">V6008</font></a><font style="vertical-align: inherit;"> Potential null dereference 'variable'" - misalnya, nilai </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">File.getParentFile ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sering digunakan </font><font style="vertical-align: inherit;">tanpa memeriksa </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nol</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Jika objek file tempat metode ini dipanggil dibangun tanpa jalur absolut, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan dikembalikan </font><font style="vertical-align: inherit;">dan tidak adanya verifikasi dapat membatalkan aplikasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara tradisi, kami hanya akan menganalisis peringatan tingkat tinggi dan menengah, karena sebagian besar kesalahan nyata terkandung di dalamnya. Saat bekerja dengan laporan penganalisa, kami selalu merekomendasikan untuk menganalisis peringatan dengan urutan menurun keandalannya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, kami mempertimbangkan beberapa fragmen yang ditunjukkan oleh penganalisa yang tampak mencurigakan atau menarik bagi saya. </font><font style="vertical-align: inherit;">Basis kode proyek ternyata berukuran sangat mengesankan, dan hampir mustahil untuk menemukan tempat-tempat seperti itu secara manual.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragmen 1: validasi rusak</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">parseDataTypeTextEntry</span><span class="hljs-params">()</span>
<span class="hljs-keyword">throws</span> InvalidDataTypeException </span>{<font></font>
  ...<font></font>
  <span class="hljs-keyword">try</span> {<font></font>
    newDataType = parser.parse(selectionField.getText(),<font></font>
                               getDataTypeRootForCurrentText());<font></font>
  }<font></font>
  <span class="hljs-keyword">catch</span> (CancelledException e) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span> (newDataType != <span class="hljs-keyword">null</span>) {
    <span class="hljs-keyword">if</span> (maxSize &gt;= <span class="hljs-number">0</span>
        &amp;&amp; newDataType.getLength() &gt; newDataType.getLength()) { <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> InvalidDataTypeException(<span class="hljs-string">"data-type larger than "</span>
                                         + maxSize + <span class="hljs-string">" bytes"</span>);<font></font>
    }<font></font>
    selectionField.setSelectedValue(newDataType);<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peringatan PVS-Studio: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6001</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ada sub-ekspresi yang identik 'newDataType.getLength ()' di sebelah kiri dan di sebelah kanan operator '&gt;'. DataTypeSelectionEditor.java data66 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kelas ini menyediakan komponen grafis untuk memilih tipe data yang mendukung pelengkapan otomatis. Pengembang yang menggunakan komponen ini dapat mengatur ukuran maksimum yang diizinkan dari tipe data yang dipilih (melalui bidang </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maxSize</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) atau menjadikannya tidak terbatas dengan menetapkan nilai negatif. Diasumsikan bahwa ketika memvalidasi data yang dimasukkan, melebihi batas melempar pengecualian, yang kemudian menangkap tumpukan panggilan dan pengguna ditampilkan pesan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tampaknya pengarang komponen itu terganggu tepat pada saat menulis tes ini, atau mungkin dia memikirkan arti hidup, tetapi pada akhirnya, validasi tidak dilakukan, karena jumlahnya tidak pernah bisa lebih besar dari dirinya sendiri dan, karenanya, kita mengabaikan kondisi ini. Ini berarti bahwa komponen ini dapat memberikan data yang tidak valid. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kesalahan serupa lainnya ditemukan di dua kelas lagi: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GuidUtil</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewGuid</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GuidUtil</span> </span>{<font></font>
  ...<font></font>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> GuidInfo <span class="hljs-title">parseLine</span><span class="hljs-params">(...)</span> </span>{<font></font>
    ...<font></font>
    <span class="hljs-keyword">long</span>[] data = <span class="hljs-keyword">new</span> <span class="hljs-keyword">long</span>[<span class="hljs-number">4</span>];<font></font>
    ...<font></font>
    <span class="hljs-keyword">if</span> (isOK(data)) {
      <span class="hljs-keyword">if</span> (!hasVersion) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GuidInfo(guidString, name, guidType);<font></font>
      }<font></font>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> VersionedGuidInfo(guidString, version, name, guidType);<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
  }<font></font>
  ...<font></font>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isOK</span><span class="hljs-params">(<span class="hljs-keyword">long</span>[] data)</span> </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; data.length; i++) {
      <span class="hljs-keyword">if</span> ((data[i] != <span class="hljs-number">0</span>) || (data[i] != <span class="hljs-number">0xFFFFFFFFL</span>)) { <span class="hljs-comment">// &lt;=</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
  }<font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PVS-Studio: </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">Data V6007</font></a><font style="vertical-align: inherit;"> Ekspresi '[i]! = 0xFFFFFFFFL' selalu benar. GuidUtil.java:200 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> loop </font><font style="vertical-align: inherit;">yang </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isOK</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> metode </font><font style="vertical-align: inherit;">pemeriksaan bahwa nilai yang sama tidak sama untuk dua nomor yang berbeda pada waktu yang sama. Jika demikian, maka GUID segera diakui sebagai valid. Artinya, GUID akan menjadi tidak valid hanya jika array </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kosong, dan ini tidak pernah terjadi, karena nilai variabel yang sesuai ditugaskan hanya sekali - pada awal metode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parseLine</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><i><font style="vertical-align: inherit;">Badan</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
metode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IsOK</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di kedua kelas itu benar-benar bertepatan, yang menunjukkan gagasan lain copy-paste kode yang salah. </font><font style="vertical-align: inherit;">Apa sebenarnya yang ingin diperiksa penulis, saya tidak yakin, tetapi saya dapat berasumsi bahwa metode ini harus diperbaiki sebagai berikut:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isOK</span><span class="hljs-params">(<span class="hljs-keyword">long</span>[] data)</span> </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; data.length; i++) {
    <span class="hljs-keyword">if</span> ((data[i] == <span class="hljs-number">0</span>) || (data[i] == <span class="hljs-number">0xFFFFFFFFL</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragmen 2: menyembunyikan pengecualian</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">putByte</span><span class="hljs-params">(<span class="hljs-keyword">long</span> offsetInMemBlock, <span class="hljs-keyword">byte</span> b)</span>
<span class="hljs-keyword">throws</span> MemoryAccessException, IOException </span>{
  <span class="hljs-keyword">long</span> offsetInSubBlock = offsetInMemBlock - subBlockOffset;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span> (ioPending) {
      <span class="hljs-keyword">new</span> MemoryAccessException(<span class="hljs-string">"Cyclic Access"</span>); <span class="hljs-comment">// &lt;=</span><font></font>
    }<font></font>
    ioPending = <span class="hljs-keyword">true</span>;<font></font>
    doPutByte(mappedAddress.addNoWrap(offsetInSubBlock / <span class="hljs-number">8</span>),<font></font>
              (<span class="hljs-keyword">int</span>) (offsetInSubBlock % <span class="hljs-number">8</span>), b);<font></font>
  }<font></font>
  <span class="hljs-keyword">catch</span> (AddressOverflowException e) {
    <span class="hljs-keyword">new</span> MemoryAccessException(<span class="hljs-string">"No memory at address"</span>); <span class="hljs-comment">// &lt;=</span><font></font>
  }<font></font>
  <span class="hljs-keyword">finally</span> {<font></font>
    ioPending = <span class="hljs-keyword">false</span>;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peringatan PVS-Studio: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6006</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Objek telah dibuat tetapi tidak digunakan. Kata kunci 'melempar' mungkin hilang: 'MemoryAccessException baru ("Akses Siklik")'. BitMappedSubMemoryBlock.java:99 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pengecualian objek sendiri, seperti yang Anda tahu, tidak melakukan apa-apa (atau setidaknya tidak boleh melakukan apa-apa). Hampir selalu, contoh baru mereka dilemparkan melalui </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lemparan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dalam beberapa kasus yang jarang - ditransfer ke suatu tempat atau mungkin ditempatkan dalam koleksi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kelas yang berisi metode ini adalah pembungkus di atas blok memori yang memungkinkan membaca dan menulis data. Di sini, karena fakta bahwa pengecualian tidak dilemparkan, pembatasan akses yang dikenakan ke blok memori saat ini dengan </font><i><font style="vertical-align: inherit;">ioPending</font></i><font style="vertical-align: inherit;"> flag </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dapat dilanggar</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan, di samping itu, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddressOverflowException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diabaikan </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dengan demikian, data dapat rusak secara diam-diam, dan bukannya secara eksplisit menunjukkan kesalahan di tempat tertentu, pengembang akan menerima artefak aneh yang harus dianalisis oleh debugger. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada delapan pengecualian yang hilang ini:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BitMappedSubMemoryBlock.java: lines 77, 99, 106, 122</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ByteMappedSubMemoryBlock.java: lines 52, 73, 92, 114</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merupakan karakteristik bahwa dalam file yang sama ada metode yang sangat mirip di mana </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">melempar</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hadir. </font><font style="vertical-align: inherit;">Kemungkinan besar, satu metode awalnya ditulis mirip dengan fragmen di atas, setelah itu disalin beberapa kali, entah bagaimana menemukan kesalahan dan memperbaikinya di tempat-tempat yang mereka ingat.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragmen 3: ladang ranjau</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">processSelection</span><span class="hljs-params">(OptionsTreeNode selectedNode)</span> </span>{
  <span class="hljs-keyword">if</span> (selectedNode == <span class="hljs-keyword">null</span>) {<font></font>
    setViewPanel(defaultPanel, selectedNode); <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
  ...<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setViewPanel</span><span class="hljs-params">(JComponent component, OptionsTreeNode selectedNode)</span> </span>{<font></font>
  ...<font></font>
  setHelpLocation(component, selectedNode);<font></font>
  ...<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setHelpLocation</span><span class="hljs-params">(JComponent component, OptionsTreeNode node)</span> </span>{<font></font>
  Options options = node.getOptions();<font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">warning</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">V6008</font></a><font style="vertical-align: inherit;"> Null dereference dari 'selectedNode' dalam fungsi 'setViewPanel'. OptionsPanel.java:66 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penganalisis berbohong sedikit - saat ini, memanggil metode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">processSelection</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak mengarah ke </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NullPointerException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , karena metode ini dipanggil hanya dua kali, dan sebelum dipanggil, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terpilihNode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> secara eksplisit diperiksa untuk </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ini tidak boleh dilakukan, karena pengembang lain dapat melihat bahwa metode ini secara eksplisit menangani case </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selectedNode == null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan memutuskan bahwa ini adalah nilai yang valid, yang kemudian akan mengakibatkan aplikasi mogok. Kejutan seperti itu sangat berbahaya hanya di proyek-proyek terbuka, karena orang-orang yang tidak mengetahui basis kode berpartisipasi secara menyeluruh di dalamnya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara umum, saya harus mengatakan bahwa seluruh metode pemilihan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proses</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terlihat agak aneh. </font><font style="vertical-align: inherit;">Kemungkinan ini adalah kesalahan salin-tempel, karena dalam metode yang sama blok if dengan tubuh yang sama ditemukan dua kali lebih banyak, walaupun dengan kondisi yang berbeda. </font><font style="vertical-align: inherit;">Namun, pada titik ini, </font><font style="vertical-align: inherit;">yang </font><i><font style="vertical-align: inherit;">dipilihNode</font></i><font style="vertical-align: inherit;"> tidak </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">akan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lagi menjadi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nol</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan rantai panggilan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setViewPanel-setHelpLocation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak akan menghasilkan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NullPointerException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragmen 4: pelengkapan otomatis untuk kejahatan</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span>[] UNSUPPORTED_OPCODES_LIST = { ... };
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Set&lt;Integer&gt; UNSUPPORTED_OPCODES = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();<font></font>
<font></font>
<span class="hljs-keyword">static</span> {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> opcode : UNSUPPORTED_OPCODES) {<font></font>
    UNSUPPORTED_OPCODES.add(opcode);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peringatan PVS-Studio: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6053</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Koleksi ini dimodifikasi saat iterasi sedang berlangsung. ConcurrentModificationException dapat terjadi. DWARFExpressionOpCodes.java:205 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kasus ini, penganalisa lagi berbohong sedikit - pengecualian tidak akan dibuang, karena koleksi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UNSUPPORTED_OPCODES</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> selalu kosong dan loop tidak akan dieksekusi. Selain itu, kebetulan bahwa koleksi adalah banyak, dan menambahkan elemen yang sudah ada tidak akan mengubahnya. Kemungkinan besar, penulis memasukkan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">masing-masing</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nama koleksi melalui pelengkapan otomatis dan tidak melihat bahwa bidang yang salah telah diusulkan. </font><font style="vertical-align: inherit;">Modifikasi koleksi selama iterasi tidak mungkin, tetapi dalam keadaan baik, seperti dalam kasus ini, aplikasi mungkin tidak jatuh. </font><font style="vertical-align: inherit;">Di sini, kesalahan ketik ini memiliki efek tidak langsung: mesin yang mem-parsing file DWARF bergantung pada koleksi ini untuk menghentikan analisis ketika menemukan opcode yang tidak didukung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dimulai dengan Java 9, perlu menggunakan metode pabrik dari perpustakaan standar untuk koleksi konstan: misalnya, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Set.of (T ... elemen)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak hanya jauh lebih nyaman, tetapi juga segera membuat koleksi yang dibuat tidak dapat diubah, yang meningkatkan keandalan kode.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragmen 5: ada segalanya</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setValueAt</span><span class="hljs-params">(Object aValue, <span class="hljs-keyword">int</span> row, <span class="hljs-keyword">int</span> column)</span> </span>{<font></font>
  ...<font></font>
  <span class="hljs-keyword">int</span> index = indexOf(newName);
  <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-number">0</span>) {                  <span class="hljs-comment">// &lt;=</span><font></font>
    Window window = tool.getActiveWindow();<font></font>
    Msg.showInfo(getClass(), window, <span class="hljs-string">"Duplicate Name"</span>,
                 <span class="hljs-string">"Name already exists: "</span> + newName);
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
<font></font>
  ExternalPath path = paths.get(row); <span class="hljs-comment">// &lt;=</span><font></font>
  ...<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> <span class="hljs-title">indexOf</span><span class="hljs-params">(String name)</span> </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; paths.size(); i++) {<font></font>
    ExternalPath path = paths.get(i);<font></font>
    <span class="hljs-keyword">if</span> (path.getName().equals(name)) {
      <span class="hljs-keyword">return</span> i;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peringatan PVS-Studio:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ekspresi </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">V6007</font></a><font style="vertical-align: inherit;"> 'indeks&gt; = 0' selalu benar. </font><font style="vertical-align: inherit;">ExternalNamesTableModel.java:105</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V6019</a> Unreachable code detected. It is possible that an error is present. ExternalNamesTableModel.java:109</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penulis memikirkannya dan dalam metode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexOf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> alih-alih "index" -1 untuk nilai yang tidak terdeteksi mengembalikan 0 - indeks elemen pertama dari koleksi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">path</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Bahkan jika koleksinya kosong. Atau mungkin metode yang dihasilkan, tetapi lupa untuk mengubah nilai pengembalian default. Akibatnya, metode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setValueAt akan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> membuang nilai apa pun yang diteruskan ke sana dan menampilkan pengguna dengan kesalahan "Nama sudah ada", bahkan jika tidak ada nama yang ada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By the way, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexOf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak digunakan di tempat lain, dan nilainya diperlukan hanya untuk menentukan apakah elemen yang Anda cari ada. Mungkin, bukannya metode terpisah, write </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk-masing</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> langsung dalam </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setValueAt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan make </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kembali</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pada item yang cocok alih-alih game dengan indeks. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Catatan: Saya tidak dapat mereproduksi kesalahan yang dituduhkan. </font><font style="vertical-align: inherit;">Metode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setValueAt mungkin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak lagi digunakan atau dipanggil hanya dalam kondisi tertentu.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragmen 6: tetap diam</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> Map&lt;Character, String&gt; DELIMITER_NAME_MAP = <span class="hljs-keyword">new</span> HashMap&lt;&gt;(<span class="hljs-number">20</span>);
<span class="hljs-comment">// Any non-alphanumeric char can be used as a delimiter.</span>
<span class="hljs-keyword">static</span> {<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">' '</span>, <span class="hljs-string">"Space"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'~'</span>, <span class="hljs-string">"Tilde"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'`'</span>, <span class="hljs-string">"Back quote"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'@'</span>, <span class="hljs-string">"Exclamation point"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'@'</span>, <span class="hljs-string">"At sign"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'#'</span>, <span class="hljs-string">"Pound sign"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'$'</span>, <span class="hljs-string">"Dollar sign"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'%'</span>, <span class="hljs-string">"Percent sign"</span>);<font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio Warning: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6033</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Item dengan kunci yang sama '@' telah ditambahkan. FilterOptions.java:45 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ghidra mendukung pemfilteran data dalam berbagai konteks: misalnya, Anda dapat memfilter daftar file proyek berdasarkan nama. Selain itu, pemfilteran dengan beberapa kata kunci sekaligus diterapkan: '.java, .c' ketika mode 'OR' aktif, menampilkan semua file yang namanya mengandung '.java' atau '.c'. Dapat dipahami bahwa setiap karakter khusus dapat digunakan sebagai pemisah kata (pemisah tertentu dipilih dalam pengaturan filter), tetapi pada kenyataannya tanda seru tidak tersedia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam lembar inisialisasi seperti itu, sangat mudah untuk disegel, karena mereka sering ditulis menggunakan copy-paste, dan ketika Anda melihat kode tersebut, mata Anda dengan cepat kabur. </font><font style="vertical-align: inherit;">Dan jika kesalahan ketik tidak pada dua garis yang berdekatan, maka dengan tangan hampir pasti tidak ada yang melihat.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragmen 7: sisa pembagian selalu 0</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setFactorys</span><span class="hljs-params">(FieldFactory[] fieldFactorys,
                 DataFormatModel dataModel, <span class="hljs-keyword">int</span> margin)</span> </span>{<font></font>
  factorys = <span class="hljs-keyword">new</span> FieldFactory[fieldFactorys.length];<font></font>
<font></font>
  <span class="hljs-keyword">int</span> x = margin;
  <span class="hljs-keyword">int</span> defaultGroupSizeSpace = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; factorys.length; i++) {<font></font>
    factorys[i] = fieldFactorys[i];<font></font>
    factorys[i].setStartX(x);<font></font>
    x += factorys[i].getWidth();<font></font>
    <span class="hljs-comment">// add in space between groups</span>
    <span class="hljs-keyword">if</span> (((i + <span class="hljs-number">1</span>) % defaultGroupSizeSpace) == <span class="hljs-number">0</span>) { <span class="hljs-comment">// &lt;=</span><font></font>
      x += margin * dataModel.getUnitDelimiterSize();<font></font>
    }<font></font>
  }<font></font>
  width = x - margin * dataModel.getUnitDelimiterSize() + margin;<font></font>
  layoutChanged();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peringatan PVS-Studio:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ekspresi </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">V6007</font></a><font style="vertical-align: inherit;"> '((i +1)% defaultGroupSizeSpace) == 0' selalu benar. </font><font style="vertical-align: inherit;">ByteViewerLayoutModel.java:66</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6048</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ungkapan ini bisa disederhanakan. </font><font style="vertical-align: inherit;">Operand 'defaultGroupSizeSpace' dalam operasi sama dengan 1. ByteViewerLayoutModel.java:66</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penampil hex byte mendukung pilihan ukuran grup yang ditampilkan: misalnya, Anda dapat mengonfigurasi output dalam format 'ffff ffff' atau 'ff ff ff ff'. Metode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setFactorys</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bertanggung jawab atas lokasi grup ini di antarmuka pengguna </font><font style="vertical-align: inherit;">. Terlepas dari kenyataan bahwa kustomisasi dan tampilan berfungsi dengan benar, siklus dalam metode ini terlihat sangat mencurigakan: sisa pembagian dengan satu selalu nol, yang berarti bahwa koordinat </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan meningkat pada setiap iterasi. Kecurigaan menambahkan properti dan ketersediaan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">groupSize</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam pengaturan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DataModel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sisa sampah setelah refactoring? Atau mungkin perhitungan variabel </font><i><font style="vertical-align: inherit;">defaultGroupSizeSpace</font></i><font style="vertical-align: inherit;"> hilang</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">Bagaimanapun, upaya untuk mengganti nilainya dengan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dataModel.getGroupSize ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memecah tata letak, dan mungkin hanya pembuat kode ini yang dapat memberikan jawaban yang jelas.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragmen 8: validasi rusak, bagian 2</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> String <span class="hljs-title">parseArrayDimensions</span><span class="hljs-params">(String datatype,
                                    List&lt;Integer&gt; arrayDimensions)</span> </span>{<font></font>
  String dataTypeName = datatype;<font></font>
  <span class="hljs-keyword">boolean</span> zeroLengthArray = <span class="hljs-keyword">false</span>;
  <span class="hljs-keyword">while</span> (dataTypeName.endsWith(<span class="hljs-string">"]"</span>)) {
    <span class="hljs-keyword">if</span> (zeroLengthArray) {                   <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>; <span class="hljs-comment">// only last dimension may be 0</span><font></font>
    }<font></font>
    <span class="hljs-keyword">int</span> rBracketPos = dataTypeName.lastIndexOf(<span class="hljs-string">']'</span>);
    <span class="hljs-keyword">int</span> lBracketPos = dataTypeName.lastIndexOf(<span class="hljs-string">'['</span>);
    <span class="hljs-keyword">if</span> (lBracketPos &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">int</span> dimension;
    <span class="hljs-keyword">try</span> {<font></font>
      dimension = Integer.parseInt(dataTypeName.substring(lBracketPos + <span class="hljs-number">1</span>,<font></font>
                                                          rBracketPos));<font></font>
      <span class="hljs-keyword">if</span> (dimension &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>; <span class="hljs-comment">// invalid dimension</span><font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-keyword">catch</span> (NumberFormatException e) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
    }<font></font>
    dataTypeName = dataTypeName.substring(<span class="hljs-number">0</span>, lBracketPos).trim();<font></font>
    arrayDimensions.add(dimension);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> dataTypeName;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio Peringatan: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6007</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Expression 'zeroLengthArray' selalu salah. PdbDataTypeParser.java:78 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metode ini mem-parsing dimensi array multidimensi dan mengembalikan teks yang tersisa setelah parsing atau </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk data yang tidak valid. Komentar di sebelah salah satu pemeriksaan validasi menyatakan bahwa hanya ukuran baca terakhir yang bisa nol. Analisis bergerak dari kanan ke kiri, sehingga dipahami bahwa '[0] [1] [2]' adalah teks input yang valid, dan '[2] [1] [0]' tidak. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi, masalah: tidak ada yang menambahkan cek bahwa ukuran berikutnya adalah nol, dan parser memakan data yang tidak valid tanpa pertanyaan yang tidak perlu. Anda mungkin harus memperbaiki blok try sebagai berikut:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">try</span> {<font></font>
  dimension = Integer.parseInt(dataTypeName.substring(lBracketPos + <span class="hljs-number">1</span>,<font></font>
                                                      rBracketPos));<font></font>
  <span class="hljs-keyword">if</span> (dimension &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>; <span class="hljs-comment">// invalid dimension</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dimension == <span class="hljs-number">0</span>) {<font></font>
    zeroLengthArray = <span class="hljs-keyword">true</span>;<font></font>
  }<font></font>
}<font></font>
<span class="hljs-keyword">catch</span> (NumberFormatException e) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara alami, ada kemungkinan bahwa kriteria validitas ini dari waktu ke waktu ternyata tidak diperlukan, atau komentar penulis memiliki arti yang berbeda dan perlu untuk memeriksa pembacaan dimensi pertama. </font><font style="vertical-align: inherit;">Dalam kasus apa pun, validasi data adalah bagian penting dari aplikasi apa pun, yang harus diambil dengan tanggung jawab penuh. </font><font style="vertical-align: inherit;">Kesalahan di dalamnya dapat menyebabkan crash aplikasi yang tidak berbahaya, serta lubang keamanan, kebocoran data, korupsi atau kehilangan data (misalnya, jika Anda melewatkan injeksi SQL selama validasi permintaan).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sedikit tentang sisa peringatan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pembaca mungkin memperhatikan bahwa banyak peringatan dikeluarkan, tetapi sedikit yang dipertimbangkan. Tidak terlalu disetel cloc dalam proyek menghitung sekitar 1,25 juta baris kode Java (tidak kosong dan tidak komentar). Faktanya adalah bahwa hampir semua peringatan sangat mirip: di sini mereka lupa untuk memeriksa </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nol</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mereka tidak menghapus kode warisan yang tidak digunakan di sana. Saya benar-benar tidak ingin membuat pembaca bosan dengan membuat daftar hal yang sama, dan saya menyebutkan sebagian dari kasus tersebut di awal artikel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh lain adalah peringatan lima puluh " </font><font style="vertical-align: inherit;">Fungsi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6009</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menerima argumen aneh" dalam konteks penggunaan metode </font><i><font style="vertical-align: inherit;">substring yang</font></i><font style="vertical-align: inherit;"> tidak akurat.</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(CParserUtils.java:80, ComplexName.java:48 dan lainnya) untuk mendapatkan sisa string setelah pemisah apa pun. </font><font style="vertical-align: inherit;">Pengembang sering berharap bahwa pemisah ini akan hadir dalam string dan lupa bahwa jika tidak </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexOf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan mengembalikan -1, yang merupakan nilai yang salah untuk </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">substring</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Secara alami, jika data divalidasi atau diterima bukan dari luar, maka kemungkinan aplikasi crash secara signifikan berkurang. </font><font style="vertical-align: inherit;">Namun, secara umum, ini adalah tempat-tempat yang berpotensi berbahaya yang ingin kami bantu singkirkan.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara umum, Ghidra senang dengan kualitas kode - tidak ada mimpi buruk yang jelas. </font><font style="vertical-align: inherit;">Kode diformat dengan baik dan memiliki gaya yang sangat konsisten: dalam kebanyakan kasus, variabel, metode, dan yang lainnya diberi nama yang jelas, komentar penjelasan ditemukan, sejumlah besar tes hadir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara alami, tidak ada masalah, di antaranya:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode mati, yang, kemungkinan besar, tetap setelah banyak refactoring;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Banyak javadocs sudah usang dan, misalnya, menunjukkan parameter yang tidak ada;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak ada kemungkinan pengembangan yang mudah </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saat menggunakan IntelliJ IDEA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sistem modular yang dibangun di sekitar refleksi membuat navigasi proyek dan menemukan ketergantungan antar komponen menjadi lebih sulit.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tolong jangan mengabaikan alat pengembang. </font><font style="vertical-align: inherit;">Analisis statis, seperti sabuk pengaman, bukanlah obat mujarab, tetapi akan membantu mencegah beberapa bencana sebelum dilepaskan. </font><font style="vertical-align: inherit;">Dan tidak ada yang suka menggunakan perangkat lunak yang masuk. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat membaca tentang proyek lain yang terbukti di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blog kami</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dan kami juga memiliki </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lisensi uji coba</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan berbagai </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opsi untuk</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menggunakan alat analisis tanpa perlu membayarnya.</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a></p><div style="text-align:center;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/eb2/f9c/3bb/eb2f9c3bb5f32f39239298d36431961c.png"></a></div><p></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda ingin berbagi artikel ini dengan audiens yang berbahasa Inggris, silakan gunakan tautan ke terjemahan: Nikita Lazeba. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NSA, Ghidra, dan Unicorn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id504768/index.html">Analis magang di Yandex: analisis tugas tes</a></li>
<li><a href="../id504770/index.html">Distribusi Gaming Linux</a></li>
<li><a href="../id504772/index.html">Acara digital di Moskow dari tanggal 1 hingga 7 Juni</a></li>
<li><a href="../id504774/index.html">Survei eksekutif TI tentang perubahan kebutuhan layanan TI</a></li>
<li><a href="../id504776/index.html">Menulis mesin gim di tahun pertama Anda: mudah! (Hampir)</a></li>
<li><a href="../id504784/index.html">Sertifikat root AddTrust Sectigo kedaluwarsa pada 30 Mei 2020, yang menyebabkan masalah pada klien OpenSSL 1.0.x dan GnuTLS</a></li>
<li><a href="../id504786/index.html">Semua yang perlu Anda ketahui tentang caching</a></li>
<li><a href="../id504790/index.html">Pilihan artikel tentang pembelajaran mesin: kasus, panduan dan studi untuk Mei 2020</a></li>
<li><a href="../id504792/index.html">Rumah kos tugas. Bagaimana NSPK menyelamatkan ruang tugasnya dari coronavirus</a></li>
<li><a href="../id504796/index.html">Udalenka itu keren. Mungkin tinggal selamanya?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>