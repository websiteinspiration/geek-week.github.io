<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔖 👱🏿 ✨ Seperti Sports.ru menulis editor WYSIWYG mereka 👩‍💻 🍭 ❓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada pertengahan 2018, Sports.ru berpikir untuk pindah ke editor teks WYSIWYG baru untuk posting pengguna. Sejak Juni 2019, editor telah dalam mode be...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Seperti Sports.ru menulis editor WYSIWYG mereka</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sports_ru/blog/492228/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada pertengahan 2018, Sports.ru berpikir untuk pindah ke </font></font><abbr title="Apa yang Anda lihat adalah apa yang Anda dapatkan"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">editor</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> teks </font><abbr title="Apa yang Anda lihat adalah apa yang Anda dapatkan"><font style="vertical-align: inherit;">WYSIWYG</font></abbr><font style="vertical-align: inherit;"> baru </font><font style="vertical-align: inherit;">untuk posting pengguna. </font><font style="vertical-align: inherit;">Sejak Juni 2019, editor telah dalam mode beta. </font><font style="vertical-align: inherit;">Selama waktu ini, kami memecahkan banyak masalah yang terkait dengan desain arsitektur seluruh layanan dan implementasi editor itu sendiri di browser berdasarkan pada perpustakaan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProseMirror</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan memutuskan untuk berbagi pengalaman kami.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wc/2p/ag/wc2pagubhgtlo-bvev4wjyfmrsk.png"><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daftar Isi</font></font></h1><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Pendahuluan </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1. </font><font style="vertical-align: inherit;">Mengapa Anda membutuhkan WYSIWYG </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2. </font><font style="vertical-align: inherit;">Deskripsi tugas yang dihadapi pengembang </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Cara memilih alat </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Apa yang terjadi </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1. </font><font style="vertical-align: inherit;">Arsitektur layanan </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2. </font><font style="vertical-align: inherit;">Apa saja tantangannya </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Hasil Tes Beta</font></font></a><br>
<br>
<a name="Intro"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Perkenalan</font></font></h2><br>
<a name="Why"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1. </font><font style="vertical-align: inherit;">Mengapa Anda membutuhkan WYSIWYG</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sports.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah media tentang olahraga dengan pemirsa 20 juta pengguna per bulan. Perbedaan utama kami dari media klasik adalah komunitas dan </font></font><abbr title="Konten Buatan Pengguna"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UGC</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Konten pengguna - peringkat, komentar, obrolan, posting - tidak hanya melengkapi nilai editorial, tetapi juga menciptakan platform bagi pengguna untuk berinteraksi satu sama lain. Setiap bulan, pengguna kami menulis hampir 10 ribu posting. Yang terbaik dikirim ke halaman utama situs bersama dengan yang editorial, dikirim ke aplikasi mobile, jejaring sosial. Konten pengguna menyumbang sekitar 40% dari semua bacaan di halaman Sports.ru. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami ingin menjadi platform yang paling nyaman bagi penulis olahraga, untuk membantu membuat konten dan mengirimkannya kepada pemirsa yang tertarik. 10 tahun kami menggunakan editor </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TinyMCE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- dan pada akhirnya menjadi usang, tidak lagi sesuai dengan tim dan pengguna yang terbiasa dengan editor modern. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ff/ub/ig/ffubigpbednsp8phz7btg-icbm8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ara. </font><font style="vertical-align: inherit;">1. Antarmuka editor lama berdasarkan TinyMCE</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dari penulis blog secara teratur menerima tentang keluhan berikut:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya menulis untuk waktu yang lama, kemudian secara tidak sengaja menutup tab dan semuanya hilang;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menulis teks yang panjang sangat tidak nyaman;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sangat menyebalkan bahwa untuk menyisipkan setiap gambar, Anda harus mengunggahnya terlebih dahulu ke hosting gambar.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tim juga memiliki keluhan sendiri:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di TinyMCE Anda tidak dapat mengunggah gambar langsung dari file, Anda hanya dapat melampirkan tautan ke gambar, dan karena kenyataan bahwa pengguna tidak dapat mengunggah gambar ke penyimpanan kami, jika tautan ke mereka mati, kami tidak dapat berbuat apa-apa;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kemungkinan untuk mengedit dan memformat teks tidak seimbang. </font><font style="vertical-align: inherit;">Di satu sisi, tidak ada cukup gaya, misalnya, untuk header internal dalam teks. </font><font style="vertical-align: inherit;">Di sisi lain, dimungkinkan untuk menggunakan alat yang tersedia dalam kombinasi apa pun. </font><font style="vertical-align: inherit;">Akibatnya, tulisan tampak tidak seragam (di Sports.ru, pekerjaan dimulai pada implementasi sistem desain dan tulisan pengguna harus terlihat sesuai dengan itu);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">konten dibuat dan disimpan dalam HTML, sehingga sulit untuk mengelola gaya dalam posting pada klien yang berbeda, dan hanya membuat perubahan pada tata letak posting.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikutnya adalah kisah tentang bagaimana kami memecahkan masalah membuat editor baru di sisi front-end. </font><font style="vertical-align: inherit;">Benar, juga akan ada sesuatu tentang produk, desain dan bagian backend, karena tanpa ini akan sulit untuk memahami mengapa keputusan tertentu dibuat di ujung depan.</font></font><br>
<br>
<a name="Task"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2. </font><font style="vertical-align: inherit;">Deskripsi tugas yang dihadapi pengembang</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Singkatnya, tesis dari mana kita awalnya memanfaatkan: blogging di Sports.ru adalah suatu hal yang menyakitkan. </font><font style="vertical-align: inherit;">Pada prinsipnya, adalah mungkin untuk tidak membuat editor baru, tetapi cukup menambahkan penyimpanan otomatis dan kemampuan untuk mengunggah gambar ke penyimpanan Anda sendiri - dan sebagian besar keluhan dari pengguna dan karyawan akan hilang. </font><font style="vertical-align: inherit;">Tapi saya masih ingin tidak mendukung alat pada teknologi lama, tetapi untuk membuat editor modern baru yang dapat dengan mudah kita kembangkan dan skala.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain antarmuka yang tidak nyaman, salah satu masalah teknis utama dari editor lama adalah bahwa konten pos segera disimpan sebagai string HTML, dan perubahan pada tampilan pos memerlukan intervensi pengembang backend, atau diimplementasikan dalam runtime pada klien (misalnya, penempatan unit iklan di badan pos). Tugas kami, antara lain, adalah untuk memisahkan data dari presentasi mereka dan, dengan demikian, meninggalkan tata letak dan antarmuka dalam kode klien, dan bekerja dengan data dalam kode server. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai panutan, kami menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Medium</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , terkadang memata-matai ide dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Doc</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Selain menyelesaikan masalah yang sudah diidentifikasi, kami memutuskan untuk menambahkan beberapa fitur baru yang akan membuat menggunakan editor lebih nyaman:</font></font><br>
<br>
<ul>
<li>  WYSIWYG, .. what you see is what you get (. « ,   »,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a>),           ,     .     ,      ;</li>
<li>  (      ,       ,      ,   ,    ; ,           )     .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada saat yang sama, editor itu sendiri seharusnya tidak terikat dengan fitur Sports.ru, karena Sports.ru, meskipun proyek unggulan di perusahaan kami, masih bukan satu-satunya. Perusahaan ini juga mengembangkan media olahraga internasional </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tribuna</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , jejaring sosial untuk para penggemar taruhan Betting </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Insider</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan baru-baru ini meluncurkan studio produksinya sendiri yang bergerak dalam proyek periklanan. Mengembangkan editor online cukup mahal untuk tidak ingin menggunakan kembali kode ini di situs lain dengan berbagai pengaturan huruf dan gaya, dengan seperangkat alat sendiri untuk mengedit dan memformat.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memiliki banyak konten teks, dan sebelum mulai bekerja membuat editor posting baru, kami memikirkan bagaimana konten ini harus disimpan. TinyMCE tidak memberi kami pilihan dan konten harus disimpan hanya dalam HTML, yang, sebagaimana disebutkan di atas, tidak sesuai dengan tim. Sebagai hasilnya, kami membuat format sendiri untuk menyimpan data teks yang memenuhi persyaratan kami, dan menyebutnya sebagai badan terstruktur.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tubuh terstruktur adalah array objek yang mencerminkan struktur konten. Dalam hal ini, konten dibagi menjadi elemen-elemen yang merupakan blok independen, misalnya paragraf, daftar, gambar. Suatu elemen menyimpan informasi tentang tipe apa itu dan properti apa yang dimilikinya. Sebagai contoh, blok subtitle menggambarkan judul dalam teks, itu harus berisi teks dan bidang level. Dengan demikian, teks berisi teks dari pos ini, dan level berisi level (dari 1 hingga 4). Badan terstruktur, yang terdiri dari satu tajuk tingkat kedua, mungkin terlihat, misalnya, seperti ini:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> structuredBody = [<font></font>
    {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;    <span class="hljs-attr">type</span>: <span class="hljs-string">'subtitle'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="hljs-attr">value</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    <span class="hljs-attr">text</span>: <span class="hljs-string">'    '</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="hljs-attr">level</span>: <span class="hljs-number">2</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  },<font></font>
    },<font></font>
];<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Transisi ke badan terstruktur memungkinkan kami memulai proses pemisahan logika bisnis, data, dan presentasi mereka. Pada akhirnya, kami ingin server dan klien hanya bertukar data. Dan bagaimana dan mengapa untuk menampilkan data ini ke pengguna akhir, setiap klien akan menentukan secara independen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konten dalam format tubuh formatd disimpan dalam JSON, dan untuk memvalidasi isinya, kami membuat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">skema JSON yang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> disebut skema tubuh terstruktur. Diagram ini menjelaskan semua elemen yang valid dan propertinya. Dengan demikian, kita dapat yakin bahwa di mana pun badan terstruktur diperlukan, satu set kunci dan nilai digunakan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, ini memungkinkan tim yang berbeda untuk menggunakan layanan yang sama untuk memproses konten dalam format ini. Misalnya, layanan untuk menghasilkan HTML dari badan terstruktur untuk menampilkan konten atau editor untuk membuat konten. Ini secara signifikan mengurangi biaya pengembangan dan dukungan seluruh inti layanan yang terkait dengan pembuatan dan tampilan konten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diasumsikan bahwa editor baru harus menerima konten input dan output secara eksklusif dalam format tubuh terstruktur. Dan di sini perlu untuk mempertimbangkan titik halus: karena sebelumnya posting segera disimpan dalam HTML, string HTML ini dari database dikirim ke klien untuk ditampilkan (selanjutnya, oleh klien yang kami maksud hanya browser, kecuali ditentukan lain). Sekarang kami ingin menyimpan konten dari semua posting di tubuh terstruktur, tetapi klien hanya dapat memproses HTML. Jadi, bersama dengan tugas pindah ke editor baru, tugas menerapkan cara baru bagi klien untuk menampilkan posting untuk dibaca langsung dari badan terstruktur secara bersamaan terjadi. Kami memutuskan bahwa lebih baik memakan sedikit demi sedikit gajah, jadi pertama-tama Anda harus benar-benar meninggalkan TinyMCE, dan baru kemudian mengambil logika menampilkan posting untuk dibaca. Bahkan,tidak semua posting lama berhasil menerjemahkan konten ke dalam format baru, yang berarti bahwa posting ini akan selalu disimpan hanya dalam HTML dan perlu bagi mereka untuk tetap memiliki kemampuan membaca.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Total: bagian dari pos (semua baru dan lama yang berhasil ditransfer ke format baru) akan disimpan dalam dua format - HTML dan badan terstruktur - hingga logika tampilan baru untuk membaca diterapkan, dan sisanya (sebagian besar lama dan sangat sangat lama) posting) hanya akan tetap dalam HTML.</font></font><br>
<br>
<a name="How"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Cara memilih alat</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami harus menyadari kemampuan untuk mengedit dan membuat posting pada klien, dengan mempertimbangkan fitur dan batasan di atas. Seperti biasa, Anda dapat mengambil solusi yang sudah jadi, atau Anda bisa membuat sendiri. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mulai dengan, kami memeriksa apa perpustakaan yang sudah jadi untuk membuat editor WYSIWYG dan apakah mereka cocok untuk kita. Kami memilih </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Slate</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Draft.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProseMirror</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain menyimpan konten dalam struktur data, momen penting bagi kami juga kemampuan untuk bekerja dengan Vue atau JS murni, karena kami sudah mulai memindahkan situs ke tumpukan teknologi baru menggunakan Vue + Vuex. Selain itu, saya ingin memperluas kemampuan perpustakaan yang sudah selesai dengan bantuan modul baru (pihak ketiga atau tulisan sendiri) jika perlu.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tab. </font><font style="vertical-align: inherit;">1. Perbandingan perpustakaan yang ditinjau dengan parameter paling penting untuk Sports.ru</font></font></i><br>
<img src="https://habrastorage.org/webt/fw/hf/xa/fwhfxa6ozwkyfdpdj8t6j5lcbuy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Seperti yang dapat Anda lihat dari tabel, ProseMirror sepenuhnya memenuhi persyaratan kami, jadi kami tidak lagi mempertimbangkan gagasan untuk menulis perpustakaan kami sendiri untuk mengedit konten teks, tetapi mulai mempelajari perpustakaan ini secara lebih rinci. </font><font style="vertical-align: inherit;">Masih ada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quill</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang </font><font style="vertical-align: inherit;">agak populer </font><font style="vertical-align: inherit;">, yang tidak masuk dalam perbandingan kami hanya karena kami dengan jujur ​​melupakannya pada tahap pemilihan alat. </font><font style="vertical-align: inherit;">Menurut persyaratan utama kami, itu juga lewat, tetapi itu terjadi begitu saja. </font><font style="vertical-align: inherit;">Kami sudah membicarakan apa ProseMirror itu dan bagaimana cara mengatasinya di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lain </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<a name="What"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Apa yang terjadi</font></font></h2><br>
<a name="Architecture"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1. </font><font style="vertical-align: inherit;">Arsitektur Layanan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Editor konten itu sendiri pada klien jauh dari semua. </font><font style="vertical-align: inherit;">Anda perlu menempatkan editor di proyek yang ada, menampilkannya di suatu tempat di halaman web, dan juga mempertimbangkan interaksi dengan backend, menyelesaikan masalah mendukung dua editor secara bersamaan (Anda tidak dapat segera meninggalkan yang lama) dan menyimpan konten dalam dua format (HTML dan terstruktur). tubuh). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua tugas ini dapat dibagi menjadi yang terkait dengan frontend, backend dan integrasi mereka. </font><font style="vertical-align: inherit;">Kami terutama memperhatikan masalah front-end dan integrasi, meskipun kami juga menyebutkan beberapa aspek penting dari tugas back-end. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Layanan frontend untuk editor dapat dibagi menjadi beberapa tingkatan:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">halaman web untuk membuat dan mengedit posting;</font></font></li>
<li>Vue-app,    .  ,  ,   Vue,         -, , , ,       ..,    ,         ,      ;</li>
<li>WYSIWYG-   ProseMirror,      Vue.      ,   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a>;</li>
<li>SB2HTML –    HTML  structured body,    .    , structured body –       ,    .      ,   ,     ,      .    Sports.ru     HTML  structured body,  -     HTML  .       HTML    Node.Js,        JS-   .<br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proses menyimpan posting ditunjukkan pada Gambar. </font><font style="vertical-align: inherit;">2. Konten tulisan dalam format tubuh terstruktur dan meta-datanya ditransfer ke backend. </font><font style="vertical-align: inherit;">Backend mengirim konten ke layanan SB2HTML, menerima HTML siap dalam respons, menempatkan semua ini ke dalam basis data dan memberi tahu klien bahwa pos telah berhasil disimpan, atau melaporkan kesalahan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/of/fp/j8/offpj883_eq2swjl-ogb6jxprks.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ara. </font><font style="vertical-align: inherit;">2. Skema untuk menyimpan posting saat membuat atau mengedit di editor WYSIWYG</font></font></i><br>
<br>
<a name="Difficulties"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2. </font><font style="vertical-align: inherit;">Kesulitan apa yang Anda hadapi?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada banyak kesulitan, mereka muncul terus-menerus dan seringkali di saat-saat yang paling tak terduga. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang sudah kami katakan, editor konten terletak di dalam formulir, yang memungkinkan Anda memasukkan data tambahan yang diperlukan untuk membuat posting, seperti judul, anotasi, dll. Untuk anotasi, Anda dapat mengunduh gambar dari file dan melalui tautan dari Internet. Tetapi untuk konten kami juga ingin memuat gambar dari file dan dengan referensi, terlebih lagi, sesuai dengan aturan yang sama. Dan di sini kita dihadapkan pada sebuah dilema: di satu sisi, isi dari sebuah posting terisolasi dari bentuk eksternal ketika mengedit dan dilayani oleh ProseMirror, tetapi di sisi lain, saya ingin mengamati prinsip </font></font><abbr title="Jangan Ulangi Diri Anda Sendiri"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KERING</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan jangan menduplikasi kode yang sama. Kami memecahkan ini sebagai berikut: kami menggambarkan memuat gambar sebagai satu set metode dalam suatu objek di tingkat bentuk Vue dan melewati objek ini sebagai salah satu parameter untuk konstruktor editor WYSIWYG.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entitas yang mendeskripsikan konten - Node dan Fragmen - didefinisikan dalam model ProseMirror. Namun, hanya indeks yang digunakan untuk transaksi untuk menentukan rentang karakter yang digunakan transaksi ini (indeks dihitung baik dari awal dokumen dan dari awal node induk). Pengindeksan karakter adalah salah satu konsep utama ProseMirror, tetapi ketika mengedit dan memformat teks, jauh lebih mudah untuk memikirkan entitas dari model ProseMirror. Sebagai hasilnya, untuk pekerjaan yang nyaman dengan konten, kami menulis bantuan kami untuk menyederhanakan interaksi dengan dokumen untuk transaksi. Setelah awal pekerjaan kami, perpustakaan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tiptap muncul</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang merupakan seperangkat pembantu serupa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalah berikutnya adalah pada tahap pembuatan skema, kami menyadari bahwa kami telah memiliki format internal yang disetujui untuk menyimpan konten - badan terstruktur yang memenuhi kebutuhan kami, dan ProseMirror menyimpan konten dalam formatnya sendiri dalam sebuah cerita. Beralih ke format ProseMirror sulit dan tidak praktis. Kami menemukan diri kami dalam situasi di mana data dalam satu format datang ke klien melalui API, dan yang lainnya perlu ditampilkan. Situasi serupa muncul ketika perlu untuk menyimpan konten yang dimodifikasi atau dibuat. Untuk melakukan ini, kami menerapkan konverter yang mengubah format bolak-balik. Mereka menulis tes sederhana untuknya, yang mengambil konten dari satu posting dalam format tubuh terstruktur, menerjemahkannya ke dalam format ProseMirror, lalu kembali dan sudah membandingkan versi aslinya dengan yang diterima. Ternyata dengan cepat dan mudah.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di masa depan, ketika skema dokumen berubah dan, sebagai suatu peraturan, menjadi lebih rumit, menjadi jelas bahwa perubahan sekecil apa pun dapat menyebabkan kesalahan dalam editor, dan tes semacam itu tampaknya memberikan cakupan yang sangat buruk. Akibatnya, saya harus menulis tes pada hampir semua kombinasi node dan merek pada dua metode konverter kecil. Sekarang tanpa tes ini tidak mungkin untuk menentukan apakah perubahan berikutnya pada rangkaian akan merusak sesuatu atau tidak.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalah selanjutnya lagi terkait dengan kebutuhan kompatibilitas mundur teknologi lama dan baru. Editor WYSIWYG kami hanya diimplementasikan di browser (desktop dan, segera, ponsel). Oleh karena itu, untuk mengedit konten pada klien diberikan dalam JSON dalam format terstruktur, namun, membaca posting di browser dilakukan hanya dari HTML. Pada saat yang sama, sebagian besar aplikasi seluler sudah beralih ke menampilkan posting pengguna langsung dari badan terstruktur.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk aplikasi seluler, perlu menyediakan kasus ketika klien tidak dapat memproses beberapa elemen dari tubuh terstruktur. Misalnya, jika elemen baru ditambahkan ke tubuh terstruktur, tampilan yang diimplementasikan hanya dalam versi aplikasi yang lebih baru. Karena tidak semua pengguna memperbarui aplikasi mereka pada saat yang sama, itu perlu untuk menyediakan rencana "B" untuk versi yang lebih lama: alih-alih membuat HTML dari badan terstruktur, masukkan fragmen HTML siap pakai untuk elemen yang diinginkan. Kehadiran fragmen HTML untuk setiap elemen tidak disediakan dalam skema struktur tubuh, karena gagasan struktur ini adalah menolak untuk menyimpan data dalam HTML. Tetapi pada akhirnya, kami sampai pada kesimpulan bahwa kami membutuhkan dua skema tubuh terstruktur - satu untuk tampilan dan satu untuk mengedit. Perbedaan antara skema adalahbahwa badan terstruktur untuk pengeditan hanya berisi konten artikel, dan untuk tampilan kami menambahkan beberapa elemen tambahan. Secara khusus, sebuah fragmen HTML untuk setiap elemen dibuat ketika sebuah posting disimpan dalam layanan SB2HTML dan ditambahkan hanya ke badan terstruktur untuk menampilkan posting. Selain itu, badan terstruktur juga menampilkan ruang iklan di konten untuk ditampilkan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat kami membuka konten untuk diedit di browser, pada dasarnya kami tidak dapat menemukan elemen yang tidak dikenal, karena semua posting dibuat dan ditampilkan dengan cara yang sama. Tetapi mereka memutuskan untuk meramalkan kasus seperti itu untuk masa depan juga. Untuk melakukan ini, kami menambahkan elemen rintisan default ke skema ProseMirror. Kami menamai elemen ini unsupportedBlock. Rintisan muncul di tempat item yang tidak didukung. Kami mengubahnya sebagai persegi panjang abu-abu dengan teks yang menyatakan bahwa elemen ini tidak didukung dan tidak dapat diedit. Ketika posting disimpan, elemen seperti itu tetap tidak berubah dalam tubuh terstruktur. Pengguna dapat mengubah lokasi relatif terhadap elemen lain, tetapi konten internal elemen yang tidak diketahui tidak dapat diubah atau diedit. Namun, pengguna dapat menghapus elemen seperti itu, lalu, tentu saja,itu tidak akan disimpan dalam dokumen akhir.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua masalah yang dijelaskan terkait dengan kesulitan menerapkan editor WYSIWYG itu sendiri. Tetapi sementara itu ada dalam mode beta, kami tidak bisa meninggalkan editor lama di TinyMCE dan dipaksa untuk mendukung kedua editor, memberikan kompatibilitas ke belakang di antara mereka. Misalnya, Anda bisa membuat posting di editor WYSIWYG, simpan, lalu edit di TinyMCE, simpan, buka lagi di WYSIWYG, dan seterusnya. Akibatnya, saat dibuka di WYSIWYG, kami melihat konten yang sama dengan penyimpanan sebelumnya di TinyMCE. Untuk menerapkan kompatibilitas ke belakang, perlu mengirimkan konten HTML ke TinyMCE, yang telah kami pelajari untuk dibuat dari badan terstruktur dan simpan ke database sambil menyimpan posting. Dan ketika menyimpan posting melalui TinyMCE, konten yang dibuat di server dijalankan melalui layanan HTML2SB,sebagai hasilnya, kita dapat menyimpan HTML segar dan badan terstruktur.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTML2SB adalah kebalikan dari apa yang dilakukan SB2HTML, yaitu, mengubah konten dari HTML ke tubuh terstruktur. </font><font style="vertical-align: inherit;">Secara kronologis, layanan ini muncul lebih awal dari yang lain, karena sebelum pembuatan editor WYSIWYG, satu-satunya cara untuk mendapatkan konten posting dalam format tubuh terstruktur adalah penguraian langsung dari HTML. </font><font style="vertical-align: inherit;">HTML2SB adalah bagian dari infrastruktur backend di sekitar editor posting, tetapi setelah meninggalkan TinyMCE, itu tidak lagi diperlukan.</font></font><br>
<br>
<a name="Results"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Hasil Beta</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang WYSIWYG-editor tersedia untuk semua pengguna dalam versi beta, dan akan segera menjadi editor utama posting Sports.ru. </font><font style="vertical-align: inherit;">Kami telah menerima alat untuk membuat dan mengedit posting yang memenuhi sebagian besar persyaratan kami:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">antarmuka editor menjadi jelas, ringkas dan modern, menulis posting panjang menjadi lebih mudah;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang Anda dapat mengunduh gambar dari file dan dengan tautan yang langsung ditempatkan di repositori kami;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menambahkan opsi untuk menyematkan sematan dari jaringan sosial utama dan situs hosting video;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membersihkan gaya pemformatan teks;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplikasi seluler telah beralih ke menampilkan pos dari badan terstruktur dan dapat mengatur gaya mereka sendiri untuk konten.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, editor belum sepenuhnya didebug, kami secara berkala mendeteksi bug baru. </font><font style="vertical-align: inherit;">Pembaruan berikut akan datang:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">penyimpanan otomatis;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versi WYSIWYG untuk pengguna dengan hak yang diperluas (administrator, editor penuh waktu);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membuat dan mengedit posting dari browser seluler;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pesan tentang pengeditan dokumen secara paralel oleh beberapa pengguna;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tips dan orientasi;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">widget statistik untuk tim olahraga, pertandingan, dan lineup.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada saat penulisan ini, lebih dari 13.000 posting telah diterbitkan melalui versi beta editor, yaitu sekitar 20% dari total jumlah teks pengguna di Sports.ru untuk periode dari Juni 2019 hingga Februari 2020 inklusif. Pangsa pos yang dibuat dan diterbitkan melalui editor baru terus berkembang. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ad/2i/4b/ad2i4b4dubgv9--l-vl7ghh6cnw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ara. 3. Proporsi posting pengguna dibuat dan dipublikasikan di editor baru</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tampaknya pertumbuhan organik dalam pangsa posting pengguna yang dibuat dan diterbitkan melalui editor baru adalah sinyal bahwa pengguna senang dengan pembaruan, yang juga dikonfirmasi oleh umpan balik dalam pengumuman peluncuran pengujian beta (beberapa dari mereka ditunjukkan pada Gambar. 4). </font><font style="vertical-align: inherit;">Karenanya, dalam beberapa bulan mendatang kami berencana untuk sepenuhnya mentransfer pembuatan posting ke editor baru, sehingga hanya fokus pada dukungan dan pengembangannya.&nbsp;</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Omong-omong, fungsionalitas apa yang akan Anda tambahkan ke editor WYSIWYG kami? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k-/bm/nz/k-bmnzzgoh5wi-nvq516-pca8uk.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ara. </font><font style="vertical-align: inherit;">4. Komentar pengguna dalam posting dengan pengumuman pembaruan editor WYSIWYG&nbsp;</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id492216/index.html">Menyimpan Nilai dalam Aplikasi .Net pada Tahap Build</a></li>
<li><a href="../id492218/index.html">Aturan Desain Ikon untuk Diingat</a></li>
<li><a href="../id492220/index.html">5 rahasia panda yang tidak diketahui</a></li>
<li><a href="../id492222/index.html">CTFZone Kualifikasi Penulisan 2019: Chicken</a></li>
<li><a href="../id492226/index.html">Perbandingan Harga pada Managed Kubernetes (2020)</a></li>
<li><a href="../id492232/index.html">Bagaimana Smartcalls menjadi Voximplant Kit - fitur rebranding dan killer</a></li>
<li><a href="../id492234/index.html">Penelitian: mengapa orang siap menerima lebih sedikit dalam proyek sosial</a></li>
<li><a href="../id492242/index.html">M5Stack dan kontaknya</a></li>
<li><a href="../id492244/index.html">Penghapusan untuk periode coronavirus: rumah "penangkapan" atau waktu kesempatan?</a></li>
<li><a href="../id492248/index.html">Debouncing dengan React Hooks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>