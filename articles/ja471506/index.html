<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👡 🐡 👩‍🍳 バイナリコードの10進数の正しい丸め 🕴🏼 🤶🏻 🖱️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="バイナリコードで表される10進数の重大な問題の1つは、2進数を、正しく丸められた10進数に最も近い表現可能な10進数の値に丸める問題です。以下では、この問題について説明し、適切な丸めのための簡単なアルゴリズムを示します。アルゴリズムの動作は、C ++のテストプログラムで示されています。
 
 表現可...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>バイナリコードの10進数の正しい丸め</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471506/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バイナリコードで表される10進数の重大な問題の1つは、2進数を、正しく丸められた10進数に最も近い表現可能な10進数の値に丸める問題です。</font><font style="vertical-align: inherit;">以下では、この問題について説明し、適切な丸めのための簡単なアルゴリズムを示します。</font><font style="vertical-align: inherit;">アルゴリズムの動作は、C ++のテストプログラムで示されています。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
表現可能な10進数は、値がバイナリコードで正確に表現できる数値であることを思い出してください。したがって、0.125という数値は、2進数の0.001とまったく同じです。また、任意の2進数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値は、</font><font style="vertical-align: inherit;">表現可能な10進数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xに</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等しい</font><font style="vertical-align: inherit;">と主張することもでき</font><font style="vertical-align: inherit;">ます。たとえば、2進数の値</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 1.001101 * 2 ^ -3は、10進数の表現可能な数値</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 0.150390625の</font><font style="vertical-align: inherit;">値と同じ</font><font style="vertical-align: inherit;">です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2進数yは10進数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と同等であると言い</font><font style="vertical-align: inherit;">ます。逆に、10進数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xは</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2進数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">と</font></i><font style="vertical-align: inherit;">同じ</font><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
10進数がコンソールから入力されたとき、または定数がプログラムに表示されたときに、10進数がどうなるかを見てみましょう。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
10進数は、コンパイラーによって、プログラマーが指定した形式に変換（変換）されます。 2進数はコンピューターで最も速く処理されるため、入力された10進数は、ほとんどの場合、固定小数点形式（intを含む）、または浮動小数点形式のいずれか（単精度、倍精度、または別のバイナリ形式）に変換されます。 。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IEEE754標準によれば、マシンの内部形式の実数は、正規化されたバイナリ形式で表されます。したがって、2進数の正の実数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">= b0.b1 ... bp * 2 ^ e（b0≠0）</font></i><font style="vertical-align: inherit;">として表すことができます</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 同じ数値は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.b0b1 ... bp * 2 ^（e + 1）（b0≠0）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">として表すことができます</font><i><font style="vertical-align: inherit;">（</font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e + 1&gt; 0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font><i><font style="vertical-align: inherit;">0の</font></i><font style="vertical-align: inherit;">場合</font><i><font style="vertical-align: inherit;">）</font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。b0b1... bp * 2 ^ e（b0≠0）</font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e &lt;0の</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合</font><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、2番目のビューに固執します。以下のC ++テストプログラムには、関数q = frexp（x、＆e）があり、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b0.b1 ... bp * 2 ^ </font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">として表される2進数の</font><font style="vertical-align: inherit;">指数</font><i><font style="vertical-align: inherit;">e</font></i><font style="vertical-align: inherit;">の値</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">決定</font><font style="vertical-align: inherit;">できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、任意のバイナリ正規化数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y = 0.b0b1 ... bp * 2 ^ e（b0≠0）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に相当する10進数は、いくつかの正規化10進数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x = 0.d0d1 ... dN ... dn * 10 ^ E（d0 ≠0）。</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
たとえば、数値</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y = 0.1001101 * 2 ^ -2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表現可能な10進数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x = 0.150390625に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相当し</font><font style="vertical-align: inherit;">ます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
する</font><font style="vertical-align: inherit;">数取得</font><i><font style="vertical-align: inherit;">Xrをする</font></i><font style="vertical-align: inherit;">から</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に丸め数に等しい</font><i><font style="vertical-align: inherit;">N</font></i><font style="vertical-align: inherit;">有効数字、</font><i><font style="vertical-align: inherit;">Xは</font></i><font style="vertical-align: inherit;">されなければならない</font><font style="vertical-align: inherit;">の係数を乗じ</font><i><font style="vertical-align: inherit;">10 ^ K</font></i><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">K = NE</font></i><font style="vertical-align: inherit;">。これは、結果の数値に</font><font style="vertical-align: inherit;">有効桁数</font><font style="vertical-align: inherit;">が</font><i><font style="vertical-align: inherit;">Nの</font></i><font style="vertical-align: inherit;">整数部分が含ま</font><font style="vertical-align: inherit;">れ、最も近い整数に丸めることができる</font><font style="vertical-align: inherit;">ようにするために必要</font><font style="vertical-align: inherit;">です。次に、丸めた整数を</font><i><font style="vertical-align: inherit;">10 ^ -kで</font></i><font style="vertical-align: inherit;">乗算することにより、前のスケールに縮小する必要があり</font><font style="vertical-align: inherit;">ます。数学的には、次のように記述できます</font><i><font style="vertical-align: inherit;">。X= [x * 10 ^ k + 0.5] * 10 ^ -k = [y * 10 ^ k + 0.5] * 10 ^ -k。</font></i><font style="vertical-align: inherit;">ここで、[]は数値の整数部分です。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バイナリ整数ことを示すことができる</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含む</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">進数は、小数点数の値に等しい</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含まれ、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N =⌊m*log2⌋</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が提供、小数点以下の桁数を</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B &lt;10 ^ N。また</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B≥10 ^ nの場合</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">n = n + 1と等しくなり</font></i><font style="vertical-align: inherit;">ます。計算では、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log2≈0.301</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用できます</font><font style="vertical-align: inherit;">。</font><i><font style="vertical-align: inherit;">yの</font></i><font style="vertical-align: inherit;">バイナリ表現で利用可能な情報に基づいて、</font><i><font style="vertical-align: inherit;">k</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の値を決定します</font><font style="vertical-align: inherit;">。</font><i><font style="vertical-align: inherit;">k</font></i><font style="vertical-align: inherit;">の式では、</font><font style="vertical-align: inherit;">精度の丸め</font><i><font style="vertical-align: inherit;">N</font></i><font style="vertical-align: inherit;">がわかっているため、指数</font><i><font style="vertical-align: inherit;">E</font></i><font style="vertical-align: inherit;">を決定する必要があり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">
指数</font><i><font style="vertical-align: inherit;">Eは</font></i><font style="vertical-align: inherit;">、次の関係から決定されます。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E =⌊e*0.301⌋</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の状況を考慮に入れる必要があります。もし</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X * 10 ^ K = X&gt; 10 ^ N</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、あなたはを掛けする必要があります</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 ^（ - 1）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と係数調整</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。当社は、取得</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ - 1）において、k = K-1 X = X * 10 ^を</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
丸められた数は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xr = X * 10 ^（-k）に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等しくなります</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、2進数の実数を正しく10進数で丸めるために、次の単純なアルゴリズムが得られます。このアルゴリズムは、小数点以下の精度が任意に指定された丸め</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持つ任意のサイズの2進数に適しています</font><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
入力時：- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
精度の小数丸め</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font><i><font style="vertical-align: inherit;">y = 0.b0b1 ... bp * 2 ^ e（b0≠0）</font></i></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 の形式の2進数</font><font style="vertical-align: inherit;">です。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
出力：丸められた10進数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X = 0.d0d1 ... dN * E 10 ^</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -1. 2進数yの指数eを決定します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. E =⌊e*0.3⌋; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. k = NE; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. X = x * 10 ^ k; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. X &lt;10 ^ Nの場合、アイテム8。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6. X = X * 10 ^ -1; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7. k = k-1; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8. Xr = [X + 0.5] * 10 ^（-k）; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
終わり。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -上記のアルゴリズムでは、数値</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xr</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は数値に最も近い表現可能な10進数で、数値</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正しい丸めであり、数値</font><i><font style="vertical-align: inherit;">x</font></i><font style="vertical-align: inherit;">は数値</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 10進数に相当し</font><font style="vertical-align: inherit;">ます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
10進数の扱いに慣れているので、原則として、入力ストリームは正確に10進数です。出力では、10進数も取得したいと考えています。たとえば、Excelの場合と同様です。ただし、10進数をバイナリコードに変換した後は、原則として不可逆的に変換されます。この結果、2進数に変換された丸めは、コンソールに出力される数値の正しい丸めと一致しない場合があります。これは主に、小数を有効桁数の最大値に丸める場合に当てはまります。シングルの場合は7、ダブルの場合は15です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、作者がC ++で記述した以下のテストプログラムでよく調べることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストプログラムでは、要求に応じて、以下がコンソールに入力されます。- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
精度</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数値</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 10進数の丸め</font><font style="vertical-align: inherit;">。これは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xに</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相当するバイナリの最も近い表現可能な数</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">任意の形式の</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 数値</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
入力された進数の下で</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X、</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">番号</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xが</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">印刷さ</font><font style="vertical-align: inherit;">れており、</font><font style="vertical-align: inherit;">表現可能な数値</font><font style="vertical-align: inherit;">に最も近い</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（下のスクリーンショットを参照します）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
丸めは数値</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">実行されます。</font><font style="vertical-align: inherit;">バイナリ変換で</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">x</font></i><font style="vertical-align: inherit;">の正確な値</font><i><font style="vertical-align: inherit;">は</font></i><font style="vertical-align: inherit;">失われます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 以下を</font><font style="vertical-align: inherit;">戻します。</font><font style="vertical-align: inherit;">- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xr = M * 10 ^（N + e）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の形式の10進数</font><i><font style="vertical-align: inherit;">。</font></i><font style="vertical-align: inherit;">ここで、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><i><font style="vertical-align: inherit;">Nを</font></i><font style="vertical-align: inherit;">含む整数の10進数です。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有意な数; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -数値</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xr</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Xの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正規化された2進数に最も近い、表現可能な数値</font><font style="vertical-align: inherit;">です。</font></font><br>
<img src="https://habrastorage.org/webt/su/5-/g5/su5-g5wfbg4xm6py0ged3m9yeaq.png" alt="画像"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スクリーンショット：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N = 15-入力の10進数を四捨五入する小数点以下の有効桁数。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
x = 7.123456789098765321 e-89は、有効数字15桁に丸める10進数です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
X = 7.12345678909876559 e-089-表現可能な10進数。その値は2進数に等しく、数値xをフォーマットp = 53に変換することによって得られます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Xr = x = 712345678909877e-103-数値Xを四捨五入して得られる整数仮数。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
xr = x = 7.12345678909877e-089-10進数のXrに相当する2進数を正規化して得られた数。</font><font style="vertical-align: inherit;">Xrに最も近いです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、C ++のバイナリコードで表される10進数を正しく丸めるためのテストプログラムのコードです。</font></font><br>
<br>
<pre><code class="cpp">#include &lt;iostream&gt;<font></font>
#include &lt;math.h&gt;<font></font>
#include &lt;stdlib.h&gt;<font></font>
#include &lt;iomanip&gt;<font></font>
using namespace std;<font></font>
<font></font>
int main()<font></font>
{<font></font>
   double q,x,xr,X;<font></font>
   unsigned long long int Xr;<font></font>
   int N,p,E,e,k;<font></font>
<font></font>
  cout &lt;&lt;"Input a binary precision p=";<font></font>
  cin&gt;&gt;p;<font></font>
  cout &lt;&lt;"Input a decimal precision N=";<font></font>
  cin&gt;&gt;N;<font></font>
  cout &lt;&lt;endl&lt;&lt;"Input a number and press ENTER:"&lt;&lt;"\n"&lt;&lt;"x= ";<font></font>
  cin&gt;&gt;x;<font></font>
   cout&lt;&lt;"X= "&lt;&lt; setprecision(18)&lt;&lt;x &lt;&lt; '\n';<font></font>
<font></font>
    q=frexp (x, &amp;e);<font></font>
    E =static_cast &lt;int&gt; (e*0.301);<font></font>
    k=N-E;<font></font>
   if (E&lt;0)       //for format xr=d0.d1...dN*10^E (d0≠0).<font></font>
        k=k+1;<font></font>
    X=x*pow(10,k);<font></font>
       if (X &gt; pow (10,N)){<font></font>
            X=X/10;<font></font>
            k=k-1;<font></font>
      }<font></font>
<font></font>
       X=X+0.5;<font></font>
       Xr=static_cast &lt;unsigned long long int&gt; (X);<font></font>
       xr=Xr*pow(10,-k);<font></font>
<font></font>
    cout&lt;&lt;endl &lt;&lt;"Xr= "&lt;&lt;Xr&lt;&lt;"e"&lt;&lt;-k&lt;&lt;'\n';<font></font>
    cout&lt;&lt;"xr="&lt;&lt;xr&lt;&lt;'\n';<font></font>
<font></font>
   system("pause");<font></font>
      return 0;<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プログラムは、かなり高価なpow（10、k）関数を使用します。</font><font style="vertical-align: inherit;">ただし、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の値の</font><i><font style="vertical-align: inherit;">数</font></i><font style="vertical-align: inherit;">は少ないので、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 ^ k</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以上の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 ^ k</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の事前計算値のテーブルを使用することは十分に可能</font><font style="vertical-align: inherit;">です。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja471496/index.html">App Storeのサブスクリプションモデルについて少し</a></li>
<li><a href="../ja471498/index.html">道路固定カメラの地図が公開されました：喜ぶか泣く？</a></li>
<li><a href="../ja471500/index.html">コールバックまたは「顧客ロイヤルティの向上」</a></li>
<li><a href="../ja471502/index.html">アイディアファーム</a></li>
<li><a href="../ja471504/index.html">2次元デュエット：ボロフェングラフェンヘテロ構造の作成</a></li>
<li><a href="../ja471508/index.html">Armless admin = hyper convergence？</a></li>
<li><a href="../ja471512/index.html">10月28日、エカテリンブルク-質の高いコミュニケーション</a></li>
<li><a href="../ja471514/index.html">「あなたのための記事を読む」という見出し。2019年1月〜6月</a></li>
<li><a href="../ja471516/index.html">Intel 665p-96層QLC NANDを搭載したSSD</a></li>
<li><a href="../ja471518/index.html">2019年のAppleは2000年のLinuxです</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>