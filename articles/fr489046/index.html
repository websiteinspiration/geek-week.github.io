<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👵 🎐 👨🏽‍⚖️ GAZ66 Monster Truck sans conducteur 1/16 🆚 📏 👨‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Habr, bonjour! 
 
 Je veux vous raconter comment j'ai fait et créé une machine autogérée :) 
 
 Je pourrais dire tout de suite comment le faire en att...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>GAZ66 Monster Truck sans conducteur 1/16</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489046/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Habr, bonjour! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je veux vous raconter comment j'ai fait et créé une machine autogérée :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je pourrais dire tout de suite comment le faire en attachant sèchement les circuits et les commandes bash, mais ce sera tellement ennuyeux. </font><font style="vertical-align: inherit;">Je vous propose une histoire intéressante (j'espère) sur la façon dont je suis personnellement allé dans cette direction et où je suis venu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces endroits où il y avait de quoi prendre des photos avec des photos. </font><font style="vertical-align: inherit;">Où en est-il des logiciels - probablement sans photo </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce sera vraiment une histoire dans un format narratif, comme je vous le dirais autour d'une tasse de café. </font><font style="vertical-align: inherit;">Il ne s’agit pas de commandes bash, de scripts python, et c’est tout. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commençons par des photos et des vidéos de ce qui s'est passé, puis toute l'histoire sous la coupe.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ut/ws/eb/utwsebnltcbcoi7_0gxxrenuusq.jpeg"><br>
<a name="habracut"></a><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://player.vimeo.com/video/392912248" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'histoire suivra ce scénario.</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi je le voulais</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fonctionnement d'une machine autonome (vue de dessus)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Âge 1 - Gelendwagen du monde des enfants + Raspberry Pi Zero W + caméra</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Age 2 - GAZ66 + NVIDIA Jetson Nano + Camera pour RaspberryPi</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 ans - Remo Hobby SMAX</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 ans - Connexion SMAX et GAZ66</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 ans - Montage de composants sur un Monster Truck</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6 ans - Installer Donkey Car et ses environs</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7 ans - Montage des rails, voyages</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8 ans - Voyager avec le joystick</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9 ans - Formation aux neurones</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 ans - Tout fonctionne, enfin!</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et après?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Défi de bataille</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Communauté</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'image de la carte SD de ma machine à écrire</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versez du café, nous partons!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi je le voulais</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout a commencé avec le fait que j'étais frustré par le fait que dans une grande entreprise informatique en Russie, ils fabriquent des drones très cool, c'est incroyablement cool, mais je suis sans travail :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Non, eh bien, c'est vraiment trop cool - les voitures autonomes) Un excellent alliage de mécanique et algorithmes :) La </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
frustration a continué jusqu'à ce que je combine dans ma tête différents faits sur moi-même, à savoir:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je peux écrire en python</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je comprends (approximativement) le fonctionnement de l'apprentissage automatique</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je sais comment travailler avec Linux sur la console</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai passé mon enfance avec un fer à souder</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai une boîte entière avec des composants DIY (Raspberry Pi, Arduino, capteurs, etc.)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quand tout a fonctionné dans ma tête, j'ai décidé - que la voiture autonome (sdc) soit! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer, j'ai décidé qu'il valait la peine de comprendre comment fonctionne sdc, et ce sera la prochaine section.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fonctionnement d'une machine autonome (vue de dessus)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour que la voiture marche seule, elle a besoin de quatre composants - un chariot, des capteurs, un ordinateur, un algorithme.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voyons ça</font></font></h4><br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chariot</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Qu'est-ce qui conduira réellement. Roues, moteurs, la batterie qui fait tout fonctionner. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a deux cohortes conditionnelles de voitures que j'ai nommées pour moi - des voitures du monde des enfants et des voitures pour un passe-temps. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N'essayez même pas de flirter avec les voitures du monde des enfants, j'ai essayé, c'est un échec. Leur inconvénient est qu'ils ont des moteurs faibles sans rétroaction. Cela signifie que vous pourrez probablement arrêter n'importe quel tapis de maison et que vous ne pourrez pas tourner avec la précision indiquée. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les voitures du monde des loisirs sont ce dont vous avez besoin. Ils ont des moteurs puissants, de bonnes batteries, des servos avant pour les virages. Considérez cela comme un seuil d'entrée. La chose la moins chère et normale que j'ai pu trouver était Remo Hobby SMAX. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lj/oq/yw/ljoqywagmai0u43w37v3h5dkxye.jpeg"><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capteurs</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il recueille des informations sur le monde qui l'entoure et les transfère sur un ordinateur pour la prise de décision. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fondamentalement, un ensemble gentleman pour la DDC est:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caméra. </font><font style="vertical-align: inherit;">Les fondements des bases de la DDC. </font><font style="vertical-align: inherit;">Il regarde un espace devant lui, transfère l'image vers un ordinateur qui reconnaît ce qui se passe et décide quoi faire. </font><font style="vertical-align: inherit;">Il semble que je n'ai pas vu d'implémentations SDC sans caméra.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capteur IMU. </font><font style="vertical-align: inherit;">Une pièce montrant l'accélération et l'angle d'inclinaison le long des axes. </font><font style="vertical-align: inherit;">Cela aide à comprendre où nous allons réellement et comment notre emplacement a changé par rapport au point de départ. </font><font style="vertical-align: inherit;">Utilisé dans presque tous les hélicoptères.</font></font></li>
<li>.      ,     ,    ,      .   ,    SDC,   ,     .  ,     75$,      SDC  Velodyne    4K$.      ,     3D ,          2D.</li>
<li>GPS.     ,         ,     ,     SDC  .</li>
<li> .        —    ,    .   3D   .</li>
</ul><br>
<img src="https://habrastorage.org/webt/iy/93/sd/iy93sdbvfijudiwjfaepopyxkkc.jpeg"><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ordinateur</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ce qui reçoit les valeurs des capteurs analyse la situation, nous transférons les commandes de contrôle au chariot. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le monde des ordinateurs pour l'électronique embarquée, les processeurs ARM économes en énergie (comme dans votre téléphone) et les ordinateurs à carte unique basés sur eux, gouvernent la balle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aujourd'hui, il existe deux des options de carte unique les plus populaires - RaspberryPi et NVIDIA Jetson. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RaspberryPi a un prix inférieur, une grande variété de projets, une grande communauté. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NVIDIA a un prix plus élevé, moins de projets, mais plus de productivité dans les tâches d'apprentissage automatique. Il dispose de 128 cœurs CUDA (comme dans votre grande carte graphique NVIDIA), qui sont utilisés pour accélérer les algorithmes d'apprentissage automatique.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a trois morceaux de Raspberry Pi (ZeroW, 3, 4) et NVIDIA Jetson Nano dans ma collection. J'ai décidé d'assembler la machine, bien sûr, sur Jetson. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/97/6b/7s/976b7sfk9dpw6c2ih161squyvac.jpeg"><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algorithme</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
qui décide des actions basées sur les lectures du capteur. Habituellement, une combinaison de vision par ordinateur et de réseaux de neurones est utilisée pour cela. Dans la version la plus basique, vous conduisez vous-même sur votre machine à écrire le long de certains marquages, enregistrez des vidéos de ces trajets avec suivi de gaz / frein / virage, puis entraînez-vous sur ce réseau de neurones pour qu'il vous trouve la dépendance des signaux du moteur sur les images de la caméra. C'est tout simplement la tâche de reconnaître le balisage et d'essayer d'y rester. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous souhaitez rafraîchir le fonctionnement du réseau de neurones, je vous suggère de regarder cette vidéo:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/RJCIYBAAiEI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, j'ai décrit l'option la plus simple, où il n'y a qu'un appareil photo et un trajet de marquage. </font><font style="vertical-align: inherit;">Mais il existe des options avec plus de capteurs et une logique de travail différente - il y aura un article séparé à ce sujet ici. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si le niveau est très élevé, alors c'est tout. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il ne reste que:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assembler le chariot</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">accrocher les capteurs</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">connecter un ordinateur</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dessiner le balisage</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">monter dessus</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour former un réseau de neurones</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aller</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant que nous avons compris ce qu'est une voiture autonome, passons à l'ère de la mise en œuvre que j'avais spécifiquement.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Âge 1 - Gelendwagen du monde des enfants + Raspberry Pi Zero W + caméra</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, ma toute première approche était juste cela. C'est arrivé parce qu'il y avait un monde d'enfants près de chez moi dans lequel j'allais, dans lequel j'aimais Gelik, et je l'ai acheté. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bon, je pensais, il y a une hélice, maintenant j'ai besoin d'un ordinateur et d'un capteur. Pensée - fait. Commandé un RPi Zero W et une caméra pour elle. Pendant que j'attendais l'ordinateur et l'appareil photo, je suis entré et j'ai acheté une banque d'alimentation pour cette entreprise. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, tout est en place, il est temps de collecter. J'ai trouvé </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un tel projet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , j'ai décidé de le suivre. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gelik a démonté, retiré ses cerveaux natifs, les a transférés au contrôleur du moteur, à son tour, les a transférés à RPi, y a connecté une caméra, a alimenté le tout avec une banque d'alimentation et a été satisfait.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de passer à l'autonomie gouvernementale, j'ai décidé de traverser la console pour le plaisir, pourchassant un chat, diffusant l'image de la caméra sur mon ordinateur portable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est alors que quelques échecs m'attendaient. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, le Raspberry Pi Zero W est très faible en termes de performances. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deuxième - La viabilité du gelik du monde des enfants est presque nulle, il a été arrêté par presque n'importe quel obstacle minimal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Déjà, il est devenu clair que le projet était mort-né, mais pour des raisons d'intérêt, j'ai essayé d'assembler la vision par ordinateur (OpenCV) pour Raspberry Pi Zero directement dessus. </font><font style="vertical-align: inherit;">Cela a pris, sans blagues, plus d'une journée, et a été le dernier clou dans le couvercle du cercueil de cette mise en œuvre de la DDC. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est devenu clair que vous devez changer à la fois l'ordinateur pour de meilleures performances et le chariot pour une plus grande capacité de ski de fond.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela s'est avéré assez drôle:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vl/bt/dg/vlbtdgde7-nhfcsowsypz6nrcay.jpeg"><br>
<br>
<h3> 2 — 66 + NVIDIA Jetson Nano +   RaspberryPi</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, à ce stade, il est devenu clair que vous avez besoin d'une voiture plus passable, et de préférence d'un camion, pour mettre tous les composants dans la carrosserie. Après avoir étudié un service pour la sélection des produits, il est devenu clair que le modèle de notre GAZ66 natif me convient, c'est aussi un shishiga parmi les gens. D'accord, je l'ai commandé, attendez, il est temps de penser à l'ordinateur. À ce moment-là, NVIDIA était en train de préparer le début des ventes de son Jetson Nano, et j'ai passé une commande le premier jour de vente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un camion est arrivé, j'ai continué d'attendre Jetson, j'ai roulé avec impatience un shishiga autour de la maison, roulé les chatons que le chat mentionné ci-dessus a mis au monde. Pour ne pas dire que les chatons ont aimé - ont dû s'arrêter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant ce temps, Jetson conduisait toujours et j'ai commandé un lidar sous vide en provenance de Chine - je ne savais pas comment l'utiliser spécifiquement, mais j'ai compris que je le voulais.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un jour, un coursier d'affaires est apparu à l'entrée du bureau, m'a remis une assez grande boîte de NVIDIA à paiement unique, j'ai signé sur la facture et je me sentais comme un développeur passionné - wow, l'appareil acheté au début des ventes m'est venu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est temps de collecter! Mais d'abord, vous devez comprendre, lol. Démonté le shishigu, jeté son cerveau natal, lubrifié les mécanismes, commencé à se réunir déjà sur la base d'un ordinateur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai connecté la caméra, le contrôleur de moteur, le moteur rotatif, le moteur à essence / frein, j'ai commencé les scripts Python pour le test - encore une fois! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette fois, l'histoire est la suivante: un shishigi utilise un moteur conventionnel pour tourner, pas un servomoteur. Donc, il n'a aucune rétroaction. Donc, je ne peux pas les contrôler à coup sûr, ce qui signifie qu'il ne convient pas à SDC.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, encore une fois, vous devez résoudre ce problème, faire quelque chose. </font><font style="vertical-align: inherit;">Nous passons à l'ère suivante.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ib/86/uv/ib86uv8xom4zf9yxa44-r6ikopi.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/97/6b/7s/976b7sfk9dpw6c2ih161squyvac.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 ans - Remo Hobby SMAX</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puisqu'à ce moment-là, il était clair que la machine avait besoin non seulement de passable, mais aussi d'une qualité minimale en composants, le choix s'est porté sur les magasins pour ceux qui ont une RC, c'est un passe-temps. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sans plus tarder, je suis arrivé dans un de ces magasins, et sans me cacher, il m'a dit ce que je faisais et quel type de machine j'avais besoin. </font><font style="vertical-align: inherit;">Le vendeur, soyez gentil, m'a dit quelle machine correspond à mes exigences minimales, et c'était un Remo Hobby SMAX. </font><font style="vertical-align: inherit;">Je l'ai acheté. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je suis rentré à la maison, j'ai eu un shishigu, j'ai tout retiré, je me suis assis pour me connecter au SMAX. </font><font style="vertical-align: inherit;">Et qu'en penses-tu? </font><font style="vertical-align: inherit;">C'est vrai - l'échec encore!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fondamentalement, les voitures RC sont conçues pour que le moteur se connecte au contrôleur du moteur et que, à son tour, se connecte au module radio qui communique avec la télécommande. Et c'est SMAX qui a été conçu pour que le contrôleur de moteur et le module radio soient combinés - je n'ai littéralement pas eu l'occasion de me connecter au contrôleur de moteur au lieu du module radio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, vous devez refaire quelque chose. Je reviens sur le site des voitures RC, je monte dans les composants. En fouillant là-bas, et applaudissements, je trouve un contrôleur de moteur qui a un fil séparé pour le module radio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je commande, apporte, ramasse tout à nouveau - ça marche, mais ça tourne seulement. Mais il n'y a pas de gaz et inversez! Eh bien, bon sang, je pense, mais je continue de le choisir.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette fois, cela n'a pas fonctionné pour que le moteur SMAX se réveille, la console doit lui envoyer une certaine valeur (360) via le module radio. Mais je ne le savais pas et j'ai entré les valeurs directement pour le gaz de frein. Et le moteur n'a pas réagi, partant de la logique que personne ne lui a demandé de se réveiller. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À un moment donné, je me suis assis pour trier littéralement tout dans une rangée, m'attendant à ce qu'il réagisse à au moins quelque chose. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au début, j'ai dépassé les 100 ans. Puis 50 par. Et quand j'ai atteint la recherche de 10, j'ai entendu un cri de bienvenue en 360 - cheers! Travaux! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai testé gaz / marche arrière / gauche / droite depuis la console, tout fonctionne. C'est du feu, ici je suis programmeur =)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il semble qu'il est temps de monter, mais il y a un problème - il n'y a absolument nulle part où mettre les composants. </font><font style="vertical-align: inherit;">Les voitures RC sont conçues pour que leur toit soit une chose très conditionnelle. </font><font style="vertical-align: inherit;">Premièrement, le haut est en plastique très fin, et deuxièmement, c'est une jeep, et il n'y a nulle part où mettre tout. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À ce moment, j'ai décidé de chercher, et comment, en fait, d'autres le font. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai trouvé le projet de voiture d'âne, qui a tout sur une base clé en main pour assembler votre SDC - à la fois des exemples de matériel et un cadre logiciel. </font><font style="vertical-align: inherit;">Cela semblerait cool, prenez-le et utilisez-le, mais il y a des nuances:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ils impriment le haut de la voiture sur une imprimante 3D, puis cela rappelle la voiture très loin. </font><font style="vertical-align: inherit;">moche, bref, pas esthétique</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">leurs modèles 3D sont compatibles avec les machines que nous ne vendons pas.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ok, souvenez-vous de Donkey Car, alors nous prendrons leur framework logiciel, mais pour l'instant nous devons penser au matériel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un jour, tournant la tête dans mon appartement, j'ai regardé le shishigu démonté, au SMAX sans le haut, et j'ai pensé - hmmm, et ils semblent être de la même échelle (1/16). </font><font style="vertical-align: inherit;">Il a pris un shishiga, a pris un SMAX, a juste mis un par un sur l'autre - et vraiment, ça le fait! </font><font style="vertical-align: inherit;">Et ça a l'air cool! </font><font style="vertical-align: inherit;">OK, je dois le faire! </font><font style="vertical-align: inherit;">Nous passons à l'ère suivante.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lj/oq/yw/ljoqywagmai0u43w37v3h5dkxye.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/5u/_9/xz/5u_9xz8-xext5xxw1gl_u61f_au.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/zp/f1/8v/zpf18v4bqoormzdbaqlvh5wg0ks.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 ans - Connexion SMAX et GAZ66</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, au début de cette ère, j'ai un objectif interne - connecter le haut d'une machine au bas d'une autre. Étant donné que mes collègues et moi avons pris une puce dans une imprimante 3D et que je suis son copropriétaire (un investisseur sérieux), il a été décidé d'établir une connexion dans un programme de CAO, d'imprimer et donc de les connecter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec cette idée, j'ai marché pendant environ 2 mois, pensant que j'étais sur le point de m'asseoir pour comprendre les systèmes de CAO. Lol, non. Ayant admis que je ne voulais pas comprendre les systèmes de CAO, j'ai commencé à penser à d'autres options. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je suis retourné dans le monde des enfants, j'ai décidé de voir les créateurs, soudain ils m'ont aidé. J'ai acheté un constructeur de métal classique, qui était avec moi quand j'étais à l'école (vieille école de frêne réunie).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il l'a ramené chez lui, a mis deux pièces de la machine côte à côte et a commencé à leur appliquer toutes sortes d'éléments de conception. </font><font style="vertical-align: inherit;">Combien de temps, brièvement, une sorte de compréhension a commencé à apparaître, comment, au moins en théorie, cela pourrait être fait. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commencé à faire. </font><font style="vertical-align: inherit;">J'ai passé plus d'une journée avec une clé pour bébé, des noix et une réflexion spatiale. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant que je me connectais, j'ai appris à percer le plastique avec un tournevis, à déchirer soigneusement les pièces en excès afin de ne pas endommager le boîtier, à bloquer les écrous avec d'autres écrous (mais sans rondelles de toute façon). </font><font style="vertical-align: inherit;">En général, mon Trudovik serait fier de moi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après environ trois modifications et trois jours, j'ai vu ce monstre camion devant moi - le GAZ66 SMAX Edition de Beslan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il semble donc que la base matérielle soit prête, passez à l'ère suivante.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ae/1e/uy/ae1euyqkwmcpa8g1kkfetnfafg0.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/3v/ve/_u/3vve_ujwex5gar6kpbo5zynlddc.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 ans - Montage de composants sur un Monster Truck</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai un chariot avec de bons composants</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai une tige esthétique et spacieuse</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gaz / frein / tours fonctionnent normalement sur ce chariot</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le haut et le bas sont même connectés ensemble =)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est temps de monter des composants sur cette beauté. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Armé d'un tournevis comme perceuse pour le plastique et d'un ruban adhésif double face comme support universel pour tout, je me suis mis au travail. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai fait un support pour la caméra sur la cabine, ce qui vous permet de régler l'angle de la caméra. </font><font style="vertical-align: inherit;">Jeté un long train de la caméra à Jetson, qui, à son tour, s'est installé dans le dos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus de Jetson, les personnes suivantes se sont installées à l'arrière:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">powerbank pour alimenter l'ordinateur (a fait don de son alimentation principale, cool, avec une alimentation USB pour que jetson ne tombe pas en panne)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PCA9685 (contrôleur PWM) pour la commande du moteur</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">batterie pour alimenter le moteur de la machine</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Étant donné que le projet était déjà considéré comme étant à long terme à ce moment-là, j'ai décidé de ne pas encore jouer avec le lidar et de faire MVP au moins sur la caméra et le logiciel de Donkey Car. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le plaisir, j'ai connecté mes phares natifs de GAZ66 pour le rendre plus beau et plus confiant dans l'obscurité. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, ma machine s'allume, les moteurs répondent aux commandes du python, la caméra donne une image, les lumières sont allumées, tout va bien, il est temps d'installer le logiciel.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vi/6l/hn/vi6lhndoodzafm9jsbdkp36thkc.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/qj/bo/wz/qjbowztgjt1jocusuhducwkpxme.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6 ans - Installer Donkey Car et ses environs</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heureusement, dans les dernières étapes, j'ai trouvé le projet Donkey Car, et cela m'a beaucoup simplifié la vie, m'évitant d'écrire tout moi-même. </font><font style="vertical-align: inherit;">Autrement dit, DonkeyCar est un framework qui a déjà tout ce dont vous avez besoin pour SDC. </font><font style="vertical-align: inherit;">Et ils ont même des guides sur la façon d'installer des logiciels. </font><font style="vertical-align: inherit;">Mais, comme c'est généralement le cas avec OpenSource, les guides sont obsolètes et se contredisent par moments. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, je dois le comprendre. </font><font style="vertical-align: inherit;">Pour le fonctionnement normal du framework, les bibliothèques suivantes sont nécessaires:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opencv</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tensorflow-gpu (gpu est pour jetson, car il y a un noyau cuda. ​​pour rpi il y a tensorflow-lite)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tensorrt (bibliothèque pour accélérer l'inférence des neurones)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et tout ce qui est défini automatiquement en fonction de la liste des environnements</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commençons par OpenCV. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le guide DonkeyCar dit que vous devez le construire à partir de la source elle-même, car pour ARM il n'y a pas d'OpenCV dans pip. J'ai même fait cela, compilé OpenCV, mais avant de l'installer, j'ai décidé de vérifier, tout à coup, le système a une ancienne version d'OpenCV, et elle doit être démolie. J'ai appelé un python, importé cv2, demandé une version, mais c'est bam et pertinent. Rapidement recherché et découvert que dans les dernières versions de linux4tegra (qui est en jetson), les gars de NVIDIA ont commencé à installer OpenCV. Cool, j'ai moins à faire. Bravo, que j'ai pu compiler moi-même :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, tensorflow-gpu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le guide DonkeyCar indique, d'une part, une branche de version obsolète (1.xx), et d'autre part, même pas la dernière version des versions obsolètes. J'ai décidé de ne pas les écouter et de mettre la dernière version actuelle (2.0). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La prochaine étape est la tension.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le guide d'installation de tensrort sur jetson est écrit dans une page wiki séparée, et il ressort clairement que l'auteur n'a pas lu le guide principal =) Parce que dans le guide tensorrt, les variables d'environnement sont réaffectées et OpenCV cesse de fonctionner. Je l'ai tordu de cette façon et cela, j'ai tout annulé et j'ai décidé de marteler l'environnement et les variables d'environnement - de les rouler directement dans l'environnement principal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Satisfait de lui-même, il ouvrit le python, à son tour appelé cv2, tensorflow, tensorrt, puis demanda au python leur version - ils étaient tous importés, montraient tous les dernières versions. Cool! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le processus d'installation de la voiture d'âne elle-même est assez simple, je ne le décrirai pas, je suggère de lire leur guide. La seule chose que je note maintenant est que dans la configuration de l'âne, vous pouvez augmenter la résolution de l'image de 86x86 pour RPi à 224x224 pour Jetson (car il y aura plus de performances et de précision sera plus élevée).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, tout est prêt, il est temps de courir et de tester! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ma machine s'allume vraiment, elle démarre le serveur Web sur cette IP, à laquelle le routeur a émis la machine. </font><font style="vertical-align: inherit;">Et vous pouvez vraiment y aller, et à partir du navigateur, pilotez le joystick, en regardant l'image de l'appareil photo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai également dû calibrer les valeurs fournies au PWM (PCA9685) pour trouver un virage maximal vers l'avant, vers l'arrière et vers les côtés. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, en passant, j'ai découvert que mon moteur n'était pas connecté correctement - la machine a reculé beaucoup plus énergiquement qu'avant - j'ai expérimentalement trouvé les fils, les ai jetés dans l'autre sens. </font><font style="vertical-align: inherit;">Il était disposé de façon à ce que tous les fils du moteur soient de la même couleur, et vous ne vous souvenez plus comment c'était. </font><font style="vertical-align: inherit;">Mais je l'ai connecté correctement, et j'ai mis un thermorétractable sur chaque fil, afin de pouvoir les distinguer plus tard.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cool, il est temps de passer à la préparation de la piste!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7 ans - Montage des rails, voyages</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'algorithme Donkey Car est conçu de telle sorte qu'il existe un neurone formé par un enseignant. </font><font style="vertical-align: inherit;">Et cela signifie que l'image de la caméra suit, et un fichier json apparaît à côté de chaque image dans laquelle le nom de l'image, l'accélération, la rotation, l'horodatage est écrit. </font><font style="vertical-align: inherit;">Et pour former un neurone, ces paires image + json ont besoin d'au moins 5K. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il a été décidé d'assembler la piste à la maison, ils disent que l'appartement est grand, il y a où se retourner. </font><font style="vertical-align: inherit;">Mais en commençant à se rassembler, il est devenu clair qu'il n'y avait pas de tour dans l'appartement - le sol est de différentes couleurs, le contraste sera différent et le modèle ne peut pas sortir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, j'ai décidé de le mettre dans une pièce. </font><font style="vertical-align: inherit;">J'ai acheté 4 rouleaux de ruban adhésif et je les ai collés à la piste au sol.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai mis la voiture, l'ai démarrée, je suis partie et j'ai encore échoué - il s'avère qu'une pièce est trop petite et ma voiture est ringarde et n'est pas incluse dans les virages. Plus précisément, c'est inclus, mais à une vitesse telle que ce sera dommage alors =) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, nous devons faire la deuxième itération, et nous avons besoin d'une grande pièce. Le choix s'est porté sur le bureau - il y a beaucoup d'endroits, les sols sont monophoniques, ouverts 24h / 24 et 7j / 7. Le seul problème est que les nettoyeurs fonctionnent la nuit, et la piste devra être enlevée. Autrement dit, vous devez tout faire en une seule fois - rouler avec vos mains pour être enseignant, former le modèle, le remettre dans la machine à écrire et aller déjà sans commande manuelle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, le jour X, après l'événement sur les expériences A / B, il a été décidé de rester au bureau et de faire la piste. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'endroit est choisi, la bande est prête, l'équipe de constructeurs de la piste dans le jeu. Juste une heure, et dans le couloir du bureau, il y a une excellente piste.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai mis la voiture dedans, je l'ai allumée, j'ai essayé de rouler - hourra, elle entre dans les virages et j'ai dû limiter la vitesse à seulement 80%.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/px/be/7t/pxbe7tj2qrtw7o0yekqk4lneiue.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8 ans - Voyager avec le joystick</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, j'ai une piste, j'ai une voiture et j'ai besoin de 5K paires photo + json. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Empiriquement, j'ai découvert qu'un tour de ma piste fait 250 paires de photo + json, ce qui signifie que je dois laisser au moins 20 tours. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De préférence dans une rangée. Vous pouvez, bien sûr, de façon intermittente, mais le gaz projeté est alors secoué par le modèle, et il peut commencer à ralentir, mais je ne veux pas cela. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai commencé à essayer de faire 20 tours sans interruption, et cela, je dois le dire, n'est pas une tâche facile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La première difficulté est survenue car il y avait une colonne lourde au centre de l'itinéraire, et lorsque la machine roulait après, la connexion avec l'ordinateur portable à partir duquel elle était contrôlée est devenue retardée, et ce petit décalage m'a fait sortir des limites de l'itinéraire.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, vous devez donc vous assurer que la connexion se fait à partir de l'appareil avec lequel je vais moi-même à la machine à écrire lorsque je conduis. Et cela signifie que vous devez conduire à partir du navigateur du téléphone. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais il y a toujours un joystick, et je le tiens à deux mains, où puis-je obtenir le téléphone? Porter une machine à écrire n'est pas une option, cela le ralentira, puis, sans téléphone, cela ira plus vite et peut se confondre dans les coins en raison d'une accélération excessive. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hmm, alors vous devez en quelque sorte combiner le téléphone et le joystick. D'accord, j'ai un lecteur, il est assez grand, il s'adaptera à la fois à un téléphone et à un joystick - ça ira. Il a pris la cassette et a collé le téléphone au lecteur avec de la cassette et juste en dessous du joystick. J'ai regardé ce miracle et j'ai pensé - qu'êtes-vous, en général? :-)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais ça a marché :) Avec cette chose, j'ai réussi à laisser 20 tours. </font><font style="vertical-align: inherit;">Mais en fait, même 25, parce que j'ai goûté quelque part autour de 15 cercles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Teckel, prêt, j'ai un jeu de données pour entraîner un neurone, il est temps de m'entraîner!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9 ans - Formation aux neurones</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En ce moment, j'ai une voiture, une piste, un jeu de données - oui, je suis à un pas du résultat! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À la maison, le PC tournait au ralenti, avec le NVIDIA RTX 2070, sur lequel j'avais l'intention d'étudier. Heureusement, pour une maison intelligente, j'ai une adresse IP externe et je n'ai eu qu'à obtenir le port 22 d'Internet vers un PC. C'est bien qu'il y ait des assistants qui ont fait ça pour moi pendant que j'étais au bureau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, je vais sur ssh sur l'ordinateur avec ubuntu, surveille le dossier d'accueil pour sshfs, télécharge des fichiers. Il semblerait que seulement 40 mégaoctets, mais cela a duré environ 30 minutes. C'est arrivé, si je comprends bien, parce qu'il y en avait beaucoup. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fichiers sur votre ordinateur, tensorflow-gpu installé, logiciel DonkeyCar installé, il est temps de vous entraîner. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'appelle un script de DonkeyCar pour entraîner un neurone, je le pointe vers les dossiers avec le jeu de données - il a fonctionné.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant que le neurone fonctionne, nvtop (moniteur de chargement de carte vidéo) affiche une utilisation de 1406%, htop normal affiche une charge de 100% cpu pour les 16 cœurs, ça va). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après environ 20 minutes, j'ai un modèle formé pour conduire une voiture. </font><font style="vertical-align: inherit;">Il semblerait, prenez-le, utilisez-le. </font><font style="vertical-align: inherit;">Mais non :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rappelez-vous, j'ai écrit ci-dessus à propos de tensorrt, qui optimise l'inférence des neurones et les exécute sur des noyaux de cuda? </font><font style="vertical-align: inherit;">Bien sûr, je veux le parcourir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et cela signifie ce dont j'ai besoin:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">figer le modèle (vous devez tout emballer pour le modèle dans un fichier)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">convertir le résultat de la frise au format tensorrt</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'essaie de figer le modèle, j'appelle le script depuis DonkeyCar, échec. En attendant, c'est jusqu'à la nuit, bientôt les nettoyeurs démontent ma piste, je dois vite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'hypothèse est née que c'est parce que j'ai pris le mauvais tensorflow que DonkeyCar avait. D'accord, je tire tensorflow 2.0, je fixe 1.15, j'essaie à nouveau - succès, bravo! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, la conversion, et encore la panne - l'équipe n'a pas été trouvée. D'accord, je vais chercher quel est le problème. Il s'est avéré que NVIDIA a marqué cette fonctionnalité comme obsolète et a supprimé le support. Maintenant, disent-ils, vous devez vous convertir à la main. Heureusement, j'ai trouvé le dépôt git, où il y avait une demande similaire, et l'utilisateur a trouvé l'endroit où se trouve réellement le script python, qui convertit les modèles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'appelle le script de cet endroit, et la vérité répond. Mais, dit-il, pas de troisième python pour vous, venez en deuxième.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, j'appelle le deuxième python. Il me dit - je n'ai pas de tensorflow. Eh bien, je lui demande de mettre tensorflow-gpu 1.15, et il me dit qu'il n'y a pas une telle version, il n'y en a que 1.14. D'accord, je suis d'accord, prenons une chance et mettons les différentes versions dans différents environnements python. Mettez tensorflow dans le second python, appelé à la conversion - cheers, ça a marché! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, j'ai des modèles pour tensorrt et pour tensorflow-gpu ordinaire, je le laisse tomber dans la machine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je démarre la machine avec le modèle pour tensorrt, un énorme trackback d'erreur, le temps presse - ok, je vais essayer le modèle habituel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je recommence l'erreur habituelle, mais cette fois, c'est assez clair - la taille de votre image est 224X224, alors que 86X86 est attendue. Rappelez-vous, quelque part beaucoup plus haut, j'ai écrit que les règles de configuration ont changé la résolution d'image de la caméra?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, sur la machine à écrire, j'ai corrigé, mais pas sur l'ordinateur hôte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je reviens à l'ordinateur hôte, corrige les configs là-bas, me réentraîne, refais la frise, reconvertis, rejette. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ga/wn/uw/gawnuwyx7iobukme4h_zrqkgcvs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je démarre la machine avec un modèle pour tensorrt, et ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 ans - Tout fonctionne, enfin!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hourra! </font><font style="vertical-align: inherit;">Ma voiture est partie! </font><font style="vertical-align: inherit;">Lui-même, sans moi. </font><font style="vertical-align: inherit;">Très cool. </font><font style="vertical-align: inherit;">Je suis incroyablement heureux)</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://player.vimeo.com/video/392912248" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant presque un an, j'ai fait tout ça, et maintenant)</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et après?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a un certain nombre de projets de développement, je vais passer du simple au complexe.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajoutez un capteur IMU au modèle pour augmenter éventuellement la précision. </font><font style="vertical-align: inherit;">Par exemple, lors de la montée, plus d'efforts sont nécessaires sur le moteur.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transformez la logique en déplacements non pas sur l'autoroute, mais contournez simplement les obstacles</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter du lidar et en prendre des lectures</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Défi de bataille</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous-même ou avec une compagnie d'amis vous sentez que vous voulez courir, alors écrivez-moi, organisons des compétitions =)</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Communauté</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai également mis en place une salle de chat d'intérêt et je prépare une chaîne. </font><font style="vertical-align: inherit;">Je ne suis pas sûr que, selon les règles de Habr, c'est possible, donc j'enverrai au PM sur demande.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'image de la carte SD de ma machine à écrire</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur demande également, je vous enverrai une image img de ma voiture, si vous voulez le faire sur une base similaire, et ne voulez pas vous baigner avec le réglage.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr489034/index.html">La nouvelle application mobile de l'ISU pour le salut ou le salut pour ceux qui cherchent des marchés publics?</a></li>
<li><a href="../fr489038/index.html">Le livre "Java Concurrency in Practice"</a></li>
<li><a href="../fr489040/index.html">Contact Center AI: un tiers dans une conversation est très bien</a></li>
<li><a href="../fr489042/index.html">Grande réouverture de la boutique: chargement de données dans Android à l'aide de coroutine</a></li>
<li><a href="../fr489044/index.html">Physique du texte. Partie 1. Symboles</a></li>
<li><a href="../fr489048/index.html">La journalisation et le suivi des requêtes sont les meilleures pratiques. Rapport Yandex</a></li>
<li><a href="../fr489050/index.html">Windows vs Sysmon</a></li>
<li><a href="../fr489058/index.html">Ensembles de réseaux de neurones avec PyTorch et Sklearn</a></li>
<li><a href="../fr489060/index.html">Analyse: quelle est la différence entre les investissements à haut risque et les investissements à faible risque</a></li>
<li><a href="../fr489062/index.html">Incroyable performances parallèles d'E / S Apache Parquet en Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>