<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌪️ 👝 👼🏾 WindowsオペレーティングシステムでUnreal EngineプロジェクトをチェックするときにPVS-Studioを使用する 🙌🏾 🐄 🤕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="この記事では、WindowsオペレーティングシステムでPVS-Studioスタティックアナライザーを使用してアンリアルエンジンプロジェクトをチェックする機能について説明します。アナライザーのインストール方法、プロジェクトのチェック方法、エラーレポートの表示場所と表示方法。
 
 私たちの記事のサイク...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>WindowsオペレーティングシステムでUnreal EngineプロジェクトをチェックするときにPVS-Studioを使用する</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/466479/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/977/529/b80/977529b809b96ad36c8f2c766610263a.png" alt="写真2"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、WindowsオペレーティングシステムでPVS-Studioスタティックアナライザーを使用してアンリアルエンジンプロジェクトをチェックする機能について説明します。アナライザーのインストール方法、プロジェクトのチェック方法、エラーレポートの表示場所と表示方法。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの記事のサイクルの不可欠な部分は、ゲーム業界に関連するトピックです。 AAAのゲームで使用される物理エンジンを確認する- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">してください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゲーム業界でトップのミスをする- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなたの健康に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、最も人気のあるゲームエンジンの一つでバグを見つける-アンリアルエンジン（UE） -である</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡単</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ゲームを開発するとき、および他のアプリケーションを作成するときは、コードの品質が重要です。エラーはできるだけ早く見つけるのが最善であり、これを自動的に行うことをお勧めします。これは、静的コードアナライザーがプログラマーの助けを借りる場所です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、PVS-Studioスタティックアナライザーを使用して、UEで作成されたプロジェクトを分析する方法について簡単に説明します。</font><font style="vertical-align: inherit;">PVS-Studioは、エラーを見つけることでプロジェクトのコードを改善し、コードレビューに費やす時間を削減するのに役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事は、</font><font style="vertical-align: inherit;">UEプロジェクトの分析に関する</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">既存のドキュメント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">追加された</font><font style="vertical-align: inherit;">ものであり、それを置き換える目的ではなく、ドキュメントの内容を主に借りていることに</font><font style="vertical-align: inherit;">注意してください</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioをインストールする</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioアナライザーをインストールする最も簡単な方法は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インストールファイル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をダウンロードする</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ことです</font></a><font style="vertical-align: inherit;">。 UEで作成されたプロジェクトを分析できるようにするには、PVS-Studioをインストールするときに、「CおよびC ++コンパイラの監視」および「Microsoft Visual Studioとの統合（Visual C ++ / C＃）」のコンポーネントを選択する必要があります。最後の項目は、PVS-StudioプラグインをVisual Studio IDEに統合する役割を果たします。これにより、エラーログやアナライザー自体の一般的な設定を操作するのに便利です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioを完全に使用するには、ライセンスを入力する必要があります。これを行うには、Visual Studio IDE（VS）を開き、[PVS-Studio |オプション... |登録]ウィンドウにライセンスを入力します。 VS 2019では、「拡張」メニューからPVS-Studioメニューが削除されたため、ライセンス入力ウィンドウへのパスは「拡張」|「PVS-Studio |オプション... |登録」のようになります。ライセンスは当社の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ウェブサイト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で入手できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UEプロジェクトをビルドするには、VS-MSBuildで使用される標準のアセンブリシステムではなく、アセンブリを担当するEpic Gamesの独自のプログラム-UnrealBuildTool（UBT）を使用します。この点で、PVS-Studioプラグインは、VSで作成されたC ++ / C＃プロジェクトをチェックするための通常のスクリプト「PVS-Studio-&gt; Check-&gt; Current Project」を実装できません。この制限を回避するいくつかの解決策があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンパイル監視システムを使用した分析の実行</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトUEを確認する最初の最も簡単な方法は、PVS-StudioインストールディレクトリにあるCおよびC ++コンパイラモニタリングプログラム（Standalone.exeと呼ばれる）を使用して行うことができます。</font><font style="vertical-align: inherit;">その作業の原理は、ターゲットコンパイラー（この場合はcl.exe）に対応するプロセスの起動を監視し、ソースファイルの前処理とさらなる分析に必要なすべての情報を収集することです。</font><font style="vertical-align: inherit;">CおよびC ++コンパイラの監視を開いたら、[ツール]メニューを使用して[ファイルを分析（CおよびC ++）...]オプションを選択します。</font><font style="vertical-align: inherit;">「監視の開始」ボタンを押すと、コンパイラの呼び出しが監視されていることを通知するウィンドウが画面の左下隅に表示されます。</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d04/c56/21a/d04c5621a3674d9003777275c3698398.png" alt="写真1"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、UEプロジェクトをビルドし、「Stop Monitoring」キーを押します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、コンパイルされたソースファイルの分析が始まります。見つかった警告のレポートは、CおよびC ++コンパイラ監視プログラムのアナライザ出力ウィンドウに表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioがインストールされているのと同じフォルダーにあるCLMonitor.exeコンソールプログラムを使用して、コンパイラー呼び出しの同様の追跡と受信ファイルの後続の分析を行うことができます。</font><font style="vertical-align: inherit;">CLMonitor.exeには、サーバーモード（ターゲットコンパイラに対応するプロセスの開始を追跡する場合）とクライアントモード（追跡段階で受信したソースファイルを分析して分析結果に関するレポートを生成する場合）の2つの操作モードがあります。</font><font style="vertical-align: inherit;">CLMonitor.exeをサーバーモードで実行するには、次のコマンドを実行します。</font></font><br>
<br>
<pre><code class="cpp hljs">CLMonitor.exe monitor</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、UEプロジェクトをビルドし、以下のコマンドを実行します。</font></font><br>
<br>
<pre><code class="cpp hljs">CLMonitor.exe analyze -l <span class="hljs-string">"c:\ptest.plog"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「analyze」コマンドは、クライアントモードでCLMonitor.exeを起動し、サーバーモードで動作しているこのプログラムの実行中のインスタンスを閉じます。</font><font style="vertical-align: inherit;">このコマンドを実行すると、CLMonitor.exeがファイルの分析を開始します。</font><font style="vertical-align: inherit;">「-l」オプションのパラメーターは、アナライザーの結果が書き込まれるファイルへのパスです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-StaticAnalyzer = PVSStudioキーを使用した分析の実行</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UEプロジェクトの分析に対する代替のより便利なアプローチは、UBTアセンブリシステムとの直接統合です。</font><font style="vertical-align: inherit;">これを行うには、VSでUEプロジェクトのプロパティウィンドウを開き、[構成プロパティ]リストで[NMake]を選択します。</font><font style="vertical-align: inherit;">-StaticAnalyzer = PVSStudioフラグを[Build Command Line]プロパティテキストボックスに追加します。</font><font style="vertical-align: inherit;">例として、「Build Command Line」フィールドの値は次のようになります。</font></font><br>
<br>
<pre><code class="cpp hljs">C:\Program Files\Epic Games\UE_4<span class="hljs-number">.22</span>\Engine\Build\BatchFiles\Build.bat<span class="hljs-string">"
 MyProject Win64 DebugGame
 -Project="</span>$(SolutionDir)$(ProjectName).uproject<span class="hljs-string">"
 -WaitMutex -FromMsBuild -StaticAnalyzer=PVSStudio</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、プロジェクトのアセンブリを実行するときに分析のみが実行され、アセンブリ自体は実行されないことを考慮する価値があります。</font><font style="vertical-align: inherit;">組立とその後の分析の両方が実行されるシナリオを以下に説明する。</font><font style="vertical-align: inherit;">また、プロジェクトの最後のビルド以降に変更されたソースファイルのみが分析されることを理解する必要があります（プラグインの.hファイルが変更されている場合、これが次のビルドの分析の理由にはなりません）。</font><font style="vertical-align: inherit;">完全な分析を実行するには、「すべてのコマンドラインを再構築」プロパティのテキストフィールドに同じフラグを追加する必要があります。</font><font style="vertical-align: inherit;">これで、プロジェクトをリビルドすると、プロジェクト全体の分析結果が得られます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バッチファイルの変更による分析スクリプト</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、PVS-StudioアナライザーをUBTアセンブリシステムに統合するための別のシナリオを見てみましょう。このシナリオでは、プロジェクトがビルド/再アセンブルされた直後に分析が開始されます。つまり、出力で、アセンブルされたプロジェクトと分析結果ファイルの両方を取得します。お気づきかもしれませんが、[ビルドコマンドライン]フィールドにはBuild.batバッチファイルへのパスが含まれており、必要な引数を使用してUBTを起動するための手順が含まれています。 Build.batは、ビルドの最初から始まります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バッチファイルを変更して、最初に標準のビルド引数でUBTを開始し、ビルドフェーズが正常に完了した場合は、同じUBTを再度実行しますが、追加のフラグ-StaticAnalyzer = PVSStudioを使用します。</font><font style="vertical-align: inherit;">上記のシナリオを実装するには、次のように、Build.batというバッチファイルを変更します（BuildAndAnalyze.batなどの名前でそのコピーを作成することをお勧めします）。</font><font style="vertical-align: inherit;">popdコマンドの直後に、次の指示を挿入します。</font></font><br>
<br>
<pre><code class="cpp hljs">SET <span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span>
SET <span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS"</span><font></font>
<font></font>
IF <span class="hljs-string">"!UBT_ERR_LEVEL!"</span>==<span class="hljs-string">"0"</span> (<font></font>
  SET <span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span><font></font>
)<font></font>
<font></font>
IF <span class="hljs-string">"!UBT_ERR_LEVEL!"</span>==<span class="hljs-string">"2"</span> (<font></font>
  SET <span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span><font></font>
)<font></font>
<font></font>
IF DEFINED NEED_TO_PERFORM_ANALYSIS (<font></font>
  pushd <span class="hljs-string">"%~dp0\..\..\Source"</span>
  ECHO Running <span class="hljs-keyword">static</span> analysis <font></font>
  ..\..\Engine\Binaries\DotNET\UnrealBuildTool.exe %*<font></font>
  -StaticAnalyzer=PVSStudio -DEPLOY <font></font>
  popd<font></font>
  SET <span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-StaticAnalyzer = PVSStudioフラグがプロジェクト設定の[プロパティ|構成プロパティ| NMake]の[ビルドコマンドライン]フィールドで以前に設定されている場合は、削除する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアプローチの問題は、ビルド段階でコンパイルされたファイルのみが分析されることです。つまり、プロジェクトの完全なチェックを含むレポートファイルを受け取りません。さらに、インクルードされた.hヘッダーファイルに加えられた変更も考慮されません。したがって、ヘッダーファイルを変更しても新しいアセンブリ中に分析が実行されることはないため、このような分析を増分と呼ぶことはできません。この場合、プロジェクトを再構築して、プロジェクト全体の分析結果を取得できます。ただし、アセンブリの完了には時間がかかる場合があるため、次のシナリオを実行できます。ビルド、キャッシュファイルの削除-ActionHistory.bin、-StaticAnalyzer = PVSStudioフラグを使用してアセンブリを開始し、キャッシュファイルを復元します。ActionHistory.binファイルには、増分アセンブリを実行するために必要な情報と、スキャンしたファイルのアナライザーの起動履歴が含まれています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一見すると、このシナリオは最も簡単ではないように思える場合があるため、元のBuild.batファイルを変更する方法についての完全な手順を提供します。</font><font style="vertical-align: inherit;">このような変更は、Unreal Engineバージョン4.21以降にのみ関連することに注意してください。</font><font style="vertical-align: inherit;">setlocal enabledelayedexpansionコマンドの後に、次の変数を宣言します。</font></font><br>
<br>
<pre><code class="cpp hljs">SET PROJECT_NAME=%<span class="hljs-number">1</span>%<font></font>
SET PLATFORM=%<span class="hljs-number">2</span>%<font></font>
SET UPROJECT_FILE=%~<span class="hljs-number">5</span><font></font>
<font></font>
SET ACTIONHISTORY_FOLDER=<font></font>
      %UPROJECT_FILE%\..\Intermediate\Build\%PLATFORM%\%PROJECT_NAME%<font></font>
SET ACTION_HISTORY=ActionHistory.bin<font></font>
SET ACTION_HISTORY_BAC=%ACTION_HISTORY%.bac<font></font>
SET ACTIONHISTORY_PATH=<span class="hljs-string">"%ACTIONHISTORY_FOLDER%\%ACTION_HISTORY%"</span><font></font>
SET ACTIONHISTORY_BAC_PATH=<font></font>
      <span class="hljs-string">"%ACTIONHISTORY_FOLDER%\%ACTION_HISTORY_BAC%"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 popdステートメントの直後に、次のコマンドを挿入します。</font></font><br>
<pre><code class="cpp hljs">SET <span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span>
SET <span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS="</span><font></font>
<font></font>
IF <span class="hljs-string">"!UBT_ERR_LEVEL!"</span>==<span class="hljs-string">"0"</span> (<font></font>
  SET <span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span><font></font>
)<font></font>
<font></font>
IF <span class="hljs-string">"!UBT_ERR_LEVEL!"</span>==<span class="hljs-string">"2"</span> (<font></font>
  SET <span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span><font></font>
)<font></font>
IF DEFINED NEED_TO_PERFORM_ANALYSIS (<font></font>
  pushd <span class="hljs-string">"%~dp0\..\..\Source"</span><font></font>
<font></font>
  ECHO Running <span class="hljs-keyword">static</span> analysis<font></font>
<font></font>
  IF EXIST %ACTIONHISTORY_PATH% (<font></font>
    ECHO Copying %ACTION_HISTORY% to %ACTION_HISTORY_BAC%<font></font>
    COPY %ACTIONHISTORY_PATH% %ACTIONHISTORY_BAC_PATH%<font></font>
    ECHO Removing %ACTION_HISTORY%: %ACTIONHISTORY_PATH%<font></font>
    DEL  %ACTIONHISTORY_PATH%<font></font>
  )<font></font>
  ..\..\Engine\Binaries\DotNET\UnrealBuildTool.exe <font></font>
  %* -StaticAnalyzer=PVSStudio -DEPLOY <font></font>
  popd<font></font>
<font></font>
  SET <span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span><font></font>
<font></font>
  IF EXIST %ACTIONHISTORY_BAC_PATH% (<font></font>
    ECHO Recovering %ACTION_HISTORY%<font></font>
    COPY %ACTIONHISTORY_BAC_PATH% %ACTIONHISTORY_PATH%<font></font>
    ECHO Removing %ACTION_HISTORY_BAC%: %ACTIONHISTORY_BAC_PATH%<font></font>
    DEL  %ACTIONHISTORY_BAC_PATH%<font></font>
  )<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キャッシュファイルへのパスを正しく決定するために必要なPROJECT_NAME、PLATFORM、およびUPROJECT_FILE変数は、Build.batコマンドライン引数からそれらの値を取得することに注意してください。</font><font style="vertical-align: inherit;">これらの引数の順序が異なる場合は、それに応じて上記の3つの変数の初期化を変更する必要があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UBTの変更による増分プロジェクト分析</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioは、増分分析モードで動作できます。増分分析は、プロジェクトの最後のビルド以降に変更されたソースファイルのみをチェックするように設計されています。インクリメンタル分析モードでは、PVS-Studioは、コードのコンパイル直後に開発者のマシンのバックグラウンドで自動的に起動し、変更の影響を受けるすべてのファイルを分析します。 PVS-Studioをインクリメンタル分析モードで使用するためのより詳細なガイドは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントにあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UEプロジェクトのインクリメンタル分析モードの実装により、すべてが標準の作業シナリオよりも少し複雑になります。この場合、（接続された.hファイルの変更を考慮に入れて）増分分析を実行できるようにするために、UBTアセンブリシステムを自分で変更する必要があります。これを行うには、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクセス権を取得します</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.comのUEリポジトリにコピーし、マシンに複製します。複製されたリポジトリをさらに構成するには、「Windows」サブセクションの「Getting up and running」セクションに記載されている手順に従う必要があります。上記のセクションは、公式UEリポジトリのメインページにあります。リポジトリを設定したら、UBTに変更を加えることができます。これを行うには、クローンされたリポジトリの次のパスに移動します：\ UnrealEngine \ Engine \ Source \ Programs \ UnrealBuildTool。ソリューションUnrealBuildTool.slnを開き、ソリューションエクスプローラーウィンドウでファイルPVSToolChain.csを見つけます。このファイルで、次のコード行をPVSApplicationSettingsクラスに追加します。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">/// &lt;summary&gt;</span>
<span class="hljs-comment">/// Whether need incremental analysis or not</span>
<span class="hljs-comment">/// &lt;/summary&gt;</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> IncrementalAnalysis;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコード行により、IncrementalAnalysisオプションをPVS-Studio設定ファイルから逆シリアル化できます。 PVS-Studioインクリメンタル分析モード自体を有効にすることを忘れないでくださいこれを行うには、VSの拡張機能メインメニュー項目、PVS-Studioサブメニュー、[ビルド後の分析（変更ファイルのみ）、有効]を開きます。次に、BaseFileName変数を宣言した直後に、次のコード行を追加します。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">// Get pvslog file</span><font></font>
FileReference OutputFileLocation = FileReference.<font></font>
Combine(OutputDir, BaseFileName + <span class="hljs-string">".pvslog"</span>);<font></font>
FileItem OutputFileItem = FileItem.GetItemByFileReference(OutputFileLocation);<font></font>
<span class="hljs-keyword">if</span> (ApplicationSettings.IncrementalAnalysis &amp;&amp; OutputFileItem.Exists)<font></font>
{<font></font>
  <span class="hljs-comment">// Get object file</span><font></font>
  FileReference ObjectFileLocation = FileReference.<font></font>
  Combine(OutputDir, BaseFileName + <span class="hljs-string">".obj"</span>);<font></font>
  FileItem ObjectFileItem = FileItem.GetItemByFileReference(ObjectFileLocation);<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (ObjectFileItem.Exists <font></font>
      &amp;&amp; (ObjectFileItem.LastWriteTimeUtc &lt; OutputFileItem.LastWriteTimeUtc))<font></font>
  {<font></font>
    <span class="hljs-keyword">continue</span>;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、コード内の前の変数宣言OutputFileLocationおよびOutputFileItemを削除します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトUEのアセンブリ中に、ソース.cppファイルごとに.objオブジェクトファイルが生成されます。この増分分析の考え方は、オブジェクトファイルの作成/変更日が.pvslogレポートファイルの作成日よりも新しいソース.cppファイルのみをチェックすることです（各ソースファイルについて、独自の.pvslogファイルが生成され、その後すべて.pvslogファイルは、1つの最終的な.pvslogに結合されます）。上記の変更を行った後、UBTを収集し、新しく収集したバイナリを元のUBTの場所にコピーします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてが準備できました。UEプロジェクトのアセンブリを完了すると、コンパイルされたソースファイルについてのみ、アナライザーの結果を含むレポートログが届きます。このようなUBTへの変更は、ActionHistory.binキャッシュファイルを削除するようにBuild.batファイルを変更した場合にのみ意味があることに注意してください（このシナリオの詳細な説明は上記で説明しています）。インクリメンタル分析モードを無効にするには、上記の「ビルド後の分析（変更されたファイルのみ）」オプションを「無効」に設定するだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう一度思い出させてください。プロジェクト設定の[プロパティ|構成プロパティ| NMake]の[ビルドコマンドライン]フィールドに-StaticAnalyzer = PVSStudioフラグを設定した場合、このシナリオではそれを削除する必要があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visual Studioでアナライザーレポートファイルとその自動読み込みを開く</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトでは、プロジェクトUEを分析するとき、レポートファイルはVSのPVS-Studioウィンドウにロードされません。</font><font style="vertical-align: inherit;">次のパスにあるプロジェクトフォルダーに相対的に保存されます：\ YouProject \ Saved \ PVS-Studio \。</font><font style="vertical-align: inherit;">このファイルをVSで開くには、次のコマンドを使用する必要があります： 'PVS-Studio | Open / Save | Open Analysis Report'および 'Unparsed output'をファイルタイプ選択オプションで設定します。</font><font style="vertical-align: inherit;">次のコマンドを使用して、CおよびC ++コンパイラモニタリングプログラムでレポートファイルを開くこともできます：「ファイル| PVS-Studioログを開く」およびファイルタイプ「未解析の出力」を選択します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
分析ログを開くには、より便利なオプションがあり、VSに自動的にロードされます。</font><font style="vertical-align: inherit;">分析が完了した後、VSのPVS-Studioウィンドウに自動的にロードするには、対応するオプションを有効にする必要があります： 'PVS-Studio |オプション|特定のアナライザー設定|保存/ロード（アナライザーレポート）| AutoloadUnrealEngineLog'。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioアナライザーをダウンロードして試す</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は、この記事の執筆者であり、UEエンジンに基づくプロジェクトの分析に関連するPVS-Studio機能の実装とサポートに直接取り組んでいる人々の1人として、読者を支援する準備ができています。</font><font style="vertical-align: inherit;">UEプロジェクトでPVS-Studioを使用する際に問題がある場合、またはこの記事で回答が見つからないような質問がある場合は、喜んでお話しします。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポート</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">にご連絡ください</font><font style="vertical-align: inherit;">。UEと関連する問題に関する手紙が</font><font style="vertical-align: inherit;">私に</font><font style="vertical-align: inherit;">渡されます。</font><font style="vertical-align: inherit;">ご清聴ありがとうございました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイトリンク</font></font></h2><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アンドレイ・カルポフ。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アンリアルエンジン4の待望のチェック</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（2014年4月14日）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pavel Eremeev、Svyatoslav Razmyslov。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioチームがアンリアルエンジンのコードをどのように改善したか</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（2015年6月20日）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アンドレイ・カルポフ。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unreal Engine開発プロセスの一部としての静的分析</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（2017年6月27日）</font></font></li>
</ol><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事を英語を話す視聴者と共有したい場合は、翻訳へのリンクを使用してください：Ilya Gainulin。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows OSでUnreal EngineプロジェクトをチェックするときのPVS-Studioの使用法</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja466461/index.html">Zabbix Summit 2019：今年の予定</a></li>
<li><a href="../ja466463/index.html">プロトタイプ停止修理アプリケーションの作成方法</a></li>
<li><a href="../ja466465/index.html">Summ3r 0f H4CK 2019：研究部門の結果</a></li>
<li><a href="../ja466467/index.html">AnonymousIdentityを使用したIdentityServer4での匿名jwtトークンのサポート</a></li>
<li><a href="../ja466475/index.html">サイトユーザーデータを使用してトラフィックを売上に変える方法</a></li>
<li><a href="../ja466485/index.html">90年代からの電気自動車。パート1.シトロエンとプジョーの兄弟</a></li>
<li><a href="../ja466489/index.html">韓国のエンジニアはオフィスパーティションの代わりにHololensを使用することを提案しています</a></li>
<li><a href="../ja466491/index.html">Godotでのトレーニングプロジェクト-Pong（パート2）ボールの作成とセットアップ</a></li>
<li><a href="../ja466493/index.html">Docker：まず始めに。注意。配置する</a></li>
<li><a href="../ja466495/index.html">囲碁の競争で失敗しないようにする方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>