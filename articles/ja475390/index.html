<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐉 🐗 👏🏿 Goを使用して最初のWebアプリケーションを作成する方法 📩 🤪 👨🏽‍🍳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは、ハブル！Ayooluwa Isaiahによる記事「Goを使用して最初のWebアプリケーションを構築する方法」の翻訳を紹介します。
 

これは、初めてのGo Webアプリケーションのガイドです。News APIを使用して特定のトピックに関するニュース記事を受信し、最後に本番サーバーにデプ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Goを使用して最初のWebアプリケーションを作成する方法</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475390/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは、ハブル！</font><font style="vertical-align: inherit;">Ayooluwa Isaiahによる</font><font style="vertical-align: inherit;">記事</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「Goを使用して最初のWebアプリケーションを構築する方法」の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳を紹介</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">します</font></a><font style="vertical-align: inherit;">。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、初めてのGo Webアプリケーションのガイドです。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">News API</font></a><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">して特定のトピックに関するニュース記事を受信し、最後に本番サーバーにデプロイする</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ニュースアプリケーション</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">作成し</font><font style="vertical-align: inherit;">ます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このチュートリアルで使用する完全なコードは、この</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubリポジトリにあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p><br>
<h2 id="trebovaniya"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要条件</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このタスクの唯一の要件は、Goがコンピューターにインストールされていて、その構文と構造に少し慣れていることです。</font><font style="vertical-align: inherit;">アプリケーションの作成時に使用したGoバージョンも、執筆時点で最新のものです：</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.12.9</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">インストールされているGoのバージョンを表示するには、コマンドを使用し</font></font><code>go version</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このタスクが難しすぎると感じた場合は、以前の</font><font style="vertical-align: inherit;">言語</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">紹介レッスン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">進ん</font><font style="vertical-align: inherit;">でください。</font></font></p><br>
<h2 id="itak-nachnem"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それでは始めましょう！</font></font></h2><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタートアップファイルリポジトリをGitHub</font></font></a><font style="vertical-align: inherit;"></font><code>cd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に作成し、作成したディレクトリ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">にコピー</font></a><font style="vertical-align: inherit;">し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">3つのメインファイルがあります。このファイル</font></font><code>main.go</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">には、このタスクのすべてのGoコードを記述します。</font><font style="vertical-align: inherit;">ファイル</font></font><code>index.html</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ブラウザに送信されるテンプレートであり</font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、アプリケーション用はにあり</font></font><code>assets/styles.css</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></p><br>
<h2 id="sozdadim-bazovyy-veb-server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本的なWebサーバーを作成する</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「Hello World！」というテキストを送信するコアサーバーを作成するところから始めましょう。</font><font style="vertical-align: inherit;">サーバールートへのGETリクエストを実行するときにブラウザに送信します。</font></font><code>main.go</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のように</font><font style="vertical-align: inherit;">ファイルを変更します</font><font style="vertical-align: inherit;">。</font></font></p><br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"net/http"</span>
    <span class="hljs-string">"os"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">indexHandler</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {<font></font>
    w.Write([]<span class="hljs-keyword">byte</span>(<span class="hljs-string">"&lt;h1&gt;Hello World!&lt;/h1&gt;"</span>))<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
    port := os.Getenv(<span class="hljs-string">"PORT"</span>)
    <span class="hljs-keyword">if</span> port == <span class="hljs-string">""</span> {<font></font>
        port = <span class="hljs-string">"3000"</span><font></font>
    }<font></font>
<font></font>
    mux := http.NewServeMux()<font></font>
<font></font>
    mux.HandleFunc(<span class="hljs-string">"/"</span>, indexHandler)<font></font>
    http.ListenAndServe(<span class="hljs-string">":"</span>+port, mux)<font></font>
}</code></pre><br>
<p>  <code>package main</code> — ,     <code>main.go</code>   .      <code>net/http</code>,       HTTP     .            Go.</p><br>
<p>  <code>main</code>, <code>http.NewServeMux()</code>    HTTP-     <code>mux</code>.  ,    URL-              ,   .</p><br>
<p>     -    <code>/</code>.  -     <code>HandleFunc</code>     <code>func (w http.ResponseWriter, r * http.Request)</code>.</p><br>
<p>     <code>indexHandler</code>,  ,      ,        <code>HandleFunc</code>.  <code>w</code> —  ,        HTTP-.    <code>Write()</code>,           HTTP-.</p><br>
<p>  ,  <code>r</code>  HTTP-,   .  ,      ,  -  .      ,       .</p><br>
<p>,     <code>http.ListenAndServe()</code>,      3000,     .     ,  3000    .</p><br>
<p>    ,     :</p><br>
<pre><code class="bash hljs">go run main.go</code></pre><br>
<p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">http: // localhost: 3000</a>   ,     «Hello World!».</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/989/645/927/9896459277d1e7aa363ee0f9c444bc92.png" alt="Hello Worldテキストを表示する勇敢なブラウザ"></a></p><br>
<h2 id="shablony-v-go">  Go</h2><br>
<p>     Go.        ,       .</p><br>
<p>       -               . ,              ,   .  ,           -.</p><br>
<p>Go        : <code>text/template</code>  <code>html/template</code>.       ,   <code>html/template</code>    HTML-,     ,      .</p><br>
<p>      <code>main.go</code>     :</p><br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"html/template"</span>
    <span class="hljs-string">"net/http"</span>
    <span class="hljs-string">"os"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-keyword">var</span> tpl = template.Must(template.ParseFiles(<span class="hljs-string">"index.html"</span>))<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">indexHandler</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {<font></font>
    tpl.Execute(w, <span class="hljs-literal">nil</span>)<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
    port := os.Getenv(<span class="hljs-string">"PORT"</span>)
    <span class="hljs-keyword">if</span> port == <span class="hljs-string">""</span> {<font></font>
        port = <span class="hljs-string">"3000"</span><font></font>
    }<font></font>
<font></font>
    mux := http.NewServeMux()<font></font>
<font></font>
    mux.HandleFunc(<span class="hljs-string">"/"</span>, indexHandler)<font></font>
    http.ListenAndServe(<span class="hljs-string">":"</span>+port, mux)<font></font>
}</code></pre><br>
<p><code>tpl</code> —   ,        .  <code>template.ParseFiles</code>  <code>index.html</code>          .</p><br>
<p>   <code>template.ParseFiles</code>  <code>template.Must</code>,       . ,       ,    ,   ,      ,     .  ,        .</p><br>
<p>  <code>indexHandler</code>     ,   :        ,      .</p><br>
<p>          <code>ResponseWriter</code> ,              ,      <code>nil</code>.</p><br>
<p>        Ctrl-C       <code>go run main.go</code>,    .     «News App Demo»  ,   :</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/8f8/3d2/10b/8f83d210b810eeacb35c3684adcaa827.png" alt="ニュースアプリのデモテキストを表示する勇敢なブラウザ"></a></p><br>
<h2 id="dobavlyaem-panel-navigacii-na-stranicu">    </h2><br>
<p>   <code>&lt;body&gt;</code>    index.html,   :</p><br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"logo"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span>&gt;</span>News Demo<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"/search"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"GET"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">autofocus</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"search-input"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">""</span>
      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Enter a news topic"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"search"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"q"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://github.com/freshman-tech/news"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button
      github-button"</span>&gt;</span>View on Github<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span></code></pre><br>
<p>      .    -   :</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/abf/65e/ea8/abf65eea8166c5839ec6e01e19d31eb4.png" alt="スタイルのないナビゲーションバーを表示するブラウザ"></a></p><br>
<h2 id="rabota-so-staticheskimi-faylami">   </h2><br>
<p> ,   ,    ,   ,    ,       <code>&lt;head&gt;</code>  .</p><br>
<p> ,   <code>/</code>     ,      . ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">http://localhost:3000/assets/style.css</a>,       News Demo   CSS,    <code>/assets/style.css</code>    .</p><br>
<p>              .  ,          .</p><br>
<p>,   , —     ,  ,       :</p><br>
<pre><code class="go hljs">fs := http.FileServer(http.Dir(<span class="hljs-string">"assets"</span>))</code></pre><br>
<p>             ,    <code>/assets/</code>:</p><br>
<pre><code class="go hljs">mux.Handle(<span class="hljs-string">"/assets/"</span>, http.StripPrefix(<span class="hljs-string">"/assets/"</span>, fs))</code></pre><br>
<p>  :</p><br>
<pre><code class="go hljs"><span class="hljs-comment">// main.go</span><font></font>
<font></font>
<span class="hljs-comment">//  </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
    port := os.Getenv(<span class="hljs-string">"PORT"</span>)
    <span class="hljs-keyword">if</span> port == <span class="hljs-string">""</span> {<font></font>
        port = <span class="hljs-string">"3000"</span><font></font>
    }<font></font>
<font></font>
    mux := http.NewServeMux()<font></font>
<font></font>
    <span class="hljs-comment">//    </span>
    fs := http.FileServer(http.Dir(<span class="hljs-string">"assets"</span>))<font></font>
    mux.Handle(<span class="hljs-string">"/assets/"</span>, http.StripPrefix(<span class="hljs-string">"/assets/"</span>, fs))<font></font>
<font></font>
    mux.HandleFunc(<span class="hljs-string">"/"</span>, indexHandler)<font></font>
    http.ListenAndServe(<span class="hljs-string">":"</span>+port, mux)<font></font>
}</code></pre><br>
<p>    .   ,   :</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/933/902/77d/93390277dcb620c2f3a3e0421a4f5e6d.png" alt="スタイルが設定されたナビゲーションバーを表示する勇敢なブラウザ"></a></p><br>
<h2 id="sozdaem-rout-search">  /search</h2><br>
<p>  ,       .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">News API</a>   ,         API <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>.</p><br>
<p>     : <code>q</code>   ,  <code>page</code>    .   <code>page</code>  .      URL,   ,       «1».</p><br>
<p>    <code>indexHandler</code>   <code>main.go</code>:</p><br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">searchHandler</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {<font></font>
    u, err := url.Parse(r.URL.String())<font></font>
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {<font></font>
        w.WriteHeader(http.StatusInternalServerError)<font></font>
        w.Write([]<span class="hljs-keyword">byte</span>(<span class="hljs-string">"Internal server error"</span>))
        <span class="hljs-keyword">return</span><font></font>
    }<font></font>
<font></font>
    params := u.Query()<font></font>
    searchKey := params.Get(<span class="hljs-string">"q"</span>)<font></font>
    page := params.Get(<span class="hljs-string">"page"</span>)
    <span class="hljs-keyword">if</span> page == <span class="hljs-string">""</span> {<font></font>
        page = <span class="hljs-string">"1"</span><font></font>
    }<font></font>
<font></font>
    fmt.Println(<span class="hljs-string">"Search Query is: "</span>, searchKey)<font></font>
    fmt.Println(<span class="hljs-string">"Results page is: "</span>, page)<font></font>
}</code></pre><br>
<p>     <code>q</code>  <code>page</code>  URL-       .</p><br>
<p>   <code>searchHandler</code>    <code>/search</code>,   :</p><br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
    port := os.Getenv(<span class="hljs-string">"PORT"</span>)
    <span class="hljs-keyword">if</span> port == <span class="hljs-string">""</span> {<font></font>
        port = <span class="hljs-string">"3000"</span><font></font>
    }<font></font>
<font></font>
    mux := http.NewServeMux()<font></font>
<font></font>
    fs := http.FileServer(http.Dir(<span class="hljs-string">"assets"</span>))<font></font>
    mux.Handle(<span class="hljs-string">"/assets/"</span>, http.StripPrefix(<span class="hljs-string">"/assets/"</span>, fs))<font></font>
<font></font>
  <span class="hljs-comment">// Add the next line</span>
    mux.HandleFunc(<span class="hljs-string">"/search"</span>, searchHandler)<font></font>
    mux.HandleFunc(<span class="hljs-string">"/"</span>, indexHandler)<font></font>
    http.ListenAndServe(<span class="hljs-string">":"</span>+port, mux)<font></font>
}</code></pre><br>
<p>    <code>fmt</code> <code>net/url</code> :</p><br>
<pre><code class="go hljs"><span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"html/template"</span>
    <span class="hljs-string">"net/http"</span>
    <span class="hljs-string">"net/url"</span>
    <span class="hljs-string">"os"</span>
)</code></pre><br>
<p>  ,        .       ,   :</p><br>
 <br>
<br>
<h2 id="sozdayom-model-dannyh">  </h2><br>
<p>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>News API/everything</code></a>,    json   :</p><br>
<pre><code class="json hljs">{
  <span class="hljs-attr">"status"</span>: <span class="hljs-string">"ok"</span>,
  <span class="hljs-attr">"totalResults"</span>: <span class="hljs-number">4661</span>,
  <span class="hljs-attr">"articles"</span>: [<font></font>
    {<font></font>
      <span class="hljs-attr">"source"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Gizmodo.com"</span><font></font>
      },<font></font>
      <span class="hljs-attr">"author"</span>: <span class="hljs-string">"Jennings Brown"</span>,
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"World's Dumbest Bitcoin Scammer Tries to Scam Bitcoin Educator, Gets Scammed in The Process"</span>,
      <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Ben Perrin is a Canadian cryptocurrency enthusiast and educator who hosts a bitcoin show on YouTube. This is immediately apparent after a quick a look at all his social media. Ten seconds of viewing on of his videos will show that he is knowledgeable about di…"</span>,
      <span class="hljs-attr">"url"</span>: <span class="hljs-string">"https://gizmodo.com/worlds-dumbest-bitcoin-scammer-tries-to-scam-bitcoin-ed-1837032058"</span>,
      <span class="hljs-attr">"urlToImage"</span>: <span class="hljs-string">"https://i.kinja-img.com/gawker-media/image/upload/s--uLIW_Oxp--/c_fill,fl_progressive,g_center,h_900,q_80,w_1600/s4us4gembzxlsjrkmnbi.png"</span>,
      <span class="hljs-attr">"publishedAt"</span>: <span class="hljs-string">"2019-08-07T16:30:00Z"</span>,
      <span class="hljs-attr">"content"</span>: <span class="hljs-string">"Ben Perrin is a Canadian cryptocurrency enthusiast and educator who hosts a bitcoin show on YouTube. This is immediately apparent after a quick a look at all his social media. Ten seconds of viewing on of his videos will show that he is knowledgeable about..."</span><font></font>
    }<font></font>
  ]<font></font>
}</code></pre><br>
<p>      Go,    ,       . ,     ,     - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">JSON-to-Go</a>,      .    Go ( ),      JSON.</p><br>
<p>,    ,    JSON     ,  <strong>JSON</strong>,         .        JSON:</p><br>
<pre><code class="go hljs"><span class="hljs-keyword">type</span> AutoGenerated <span class="hljs-keyword">struct</span> {<font></font>
    Status       <span class="hljs-keyword">string</span> <span class="hljs-string">`json:"status"`</span>
    TotalResults <span class="hljs-keyword">int</span>    <span class="hljs-string">`json:"totalResults"`</span>
    Articles     []<span class="hljs-keyword">struct</span> {<font></font>
        Source <span class="hljs-keyword">struct</span> {<font></font>
            ID   <span class="hljs-keyword">interface</span>{} <span class="hljs-string">`json:"id"`</span>
            Name <span class="hljs-keyword">string</span>      <span class="hljs-string">`json:"name"`</span>
        } <span class="hljs-string">`json:"source"`</span>
        Author      <span class="hljs-keyword">string</span>    <span class="hljs-string">`json:"author"`</span>
        Title       <span class="hljs-keyword">string</span>    <span class="hljs-string">`json:"title"`</span>
        Description <span class="hljs-keyword">string</span>    <span class="hljs-string">`json:"description"`</span>
        URL         <span class="hljs-keyword">string</span>    <span class="hljs-string">`json:"url"`</span>
        URLToImage  <span class="hljs-keyword">string</span>    <span class="hljs-string">`json:"urlToImage"`</span>
        PublishedAt time.Time <span class="hljs-string">`json:"publishedAt"`</span>
        Content     <span class="hljs-keyword">string</span>    <span class="hljs-string">`json:"content"`</span>
    } <span class="hljs-string">`json:"articles"`</span>
}</code></pre><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/ac8/9d9/44f/ac89d944f90e03d2313a02d38364ba0d.png" alt="JSON to Goツールを表示するBraveブラウザー"></a></p><br>
<p>      <code>AutoGenerated</code>,   <code>Articles</code>        .      <code>tpl</code>  <code>main.go</code>    <code>time</code>   :</p><br>
<pre><code class="go hljs"><span class="hljs-keyword">type</span> Source <span class="hljs-keyword">struct</span> {<font></font>
    ID   <span class="hljs-keyword">interface</span>{} <span class="hljs-string">`json:"id"`</span>
    Name <span class="hljs-keyword">string</span>      <span class="hljs-string">`json:"name"`</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">type</span> Article <span class="hljs-keyword">struct</span> {<font></font>
    Source      Source    <span class="hljs-string">`json:"source"`</span>
    Author      <span class="hljs-keyword">string</span>    <span class="hljs-string">`json:"author"`</span>
    Title       <span class="hljs-keyword">string</span>    <span class="hljs-string">`json:"title"`</span>
    Description <span class="hljs-keyword">string</span>    <span class="hljs-string">`json:"description"`</span>
    URL         <span class="hljs-keyword">string</span>    <span class="hljs-string">`json:"url"`</span>
    URLToImage  <span class="hljs-keyword">string</span>    <span class="hljs-string">`json:"urlToImage"`</span>
    PublishedAt time.Time <span class="hljs-string">`json:"publishedAt"`</span>
    Content     <span class="hljs-keyword">string</span>    <span class="hljs-string">`json:"content"`</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">type</span> Results <span class="hljs-keyword">struct</span> {<font></font>
    Status       <span class="hljs-keyword">string</span>    <span class="hljs-string">`json:"status"`</span>
    TotalResults <span class="hljs-keyword">int</span>       <span class="hljs-string">`json:"totalResults"`</span>
    Articles     []Article <span class="hljs-string">`json:"articles"`</span>
}</code></pre><br>
<p> , , , Go ,          .     JSON   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">camelCase</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">snake_case</a>,      .</p><br>
<p>     ,   <code>json:"id"</code>,        JSON,   .              json,   .</p><br>
<p>,         .     <code>Results</code>  <code>main.go</code>:</p><br>
<pre><code class="go hljs"><span class="hljs-keyword">type</span> Search <span class="hljs-keyword">struct</span> {<font></font>
    SearchKey  <span class="hljs-keyword">string</span>
    NextPage   <span class="hljs-keyword">int</span>
    TotalPages <span class="hljs-keyword">int</span><font></font>
    Results    Results<font></font>
}</code></pre><br>
<p>      ,  . <code>SearchKey</code> —   ,  <code>NextPage</code>   , <code>TotalPages</code> —     ,  <code>Results</code> —    .</p><br>
<h2 id="otpravlyaem-zapros-po-news-api-i-renderim-rezultaty">   News API   </h2><br>
<p>,         ,       News API,      .</p><br>
<p>  News API   API,              .     ,         . Go   <code>flag</code>,      ,   ,     .</p><br>
<p>    <code>apiKey</code>   <code>tpl</code>:</p><br>
<pre><code class="go hljs"><span class="hljs-keyword">var</span> apiKey *<span class="hljs-keyword">string</span></code></pre><br>
<p>     <code>main</code>  :</p><br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
    apiKey = flag.String(<span class="hljs-string">"apikey"</span>, <span class="hljs-string">""</span>, <span class="hljs-string">"Newsapi.org access key"</span>)<font></font>
    flag.Parse()<font></font>
<font></font>
    <span class="hljs-keyword">if</span> *apiKey == <span class="hljs-string">""</span> {<font></font>
        log.Fatal(<span class="hljs-string">"apiKey must be set"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">//   </span>
}</code></pre><br>
<p>    <code>flag.String()</code>,      .     —  ,  —   ,   —  .</p><br>
<p>       <code>flag.Parse()</code>,    . ,   <code>apikey</code>      ,     ,        .</p><br>
<p>,     <code>flag</code>   ,        <code>apikey</code>,   :</p><br>
<pre><code class="bash hljs">go run main.go -apikey=&lt;your newsapi access key&gt;</code></pre><br>
<p>,     <code>searchHandler</code>,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">newsapi.org</a>      .</p><br>
<p>    <code>fmt.Println()</code>    <code>searchHandler</code>  :</p><br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">searchHandler</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {
    <span class="hljs-comment">// beginning  of the function</span><font></font>
<font></font>
    search := &amp;Search{}<font></font>
    search.SearchKey = searchKey<font></font>
<font></font>
    next, err := strconv.Atoi(page)<font></font>
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {<font></font>
        http.Error(w, <span class="hljs-string">"Unexpected server error"</span>, http.StatusInternalServerError)
        <span class="hljs-keyword">return</span><font></font>
    }<font></font>
<font></font>
    search.NextPage = next<font></font>
    pageSize := <span class="hljs-number">20</span><font></font>
<font></font>
    endpoint := fmt.Sprintf(<span class="hljs-string">"https://newsapi.org/v2/everything?q=%s&amp;pageSize=%d&amp;page=%d&amp;apiKey=%s&amp;sortBy=publishedAt&amp;language=en"</span>, url.QueryEscape(search.SearchKey), pageSize, search.NextPage, *apiKey)<font></font>
    resp, err := http.Get(endpoint)<font></font>
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {<font></font>
        w.WriteHeader(http.StatusInternalServerError)<font></font>
        <span class="hljs-keyword">return</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">defer</span> resp.Body.Close()<font></font>
<font></font>
    <span class="hljs-keyword">if</span> resp.StatusCode != <span class="hljs-number">200</span> {<font></font>
        w.WriteHeader(http.StatusInternalServerError)<font></font>
        <span class="hljs-keyword">return</span><font></font>
    }<font></font>
<font></font>
    err = json.NewDecoder(resp.Body).Decode(&amp;search.Results)<font></font>
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {<font></font>
        w.WriteHeader(http.StatusInternalServerError)<font></font>
        <span class="hljs-keyword">return</span><font></font>
    }<font></font>
<font></font>
    search.TotalPages = <span class="hljs-keyword">int</span>(math.Ceil(<span class="hljs-keyword">float64</span>(search.Results.TotalResults / pageSize)))<font></font>
    err = tpl.Execute(w, search)<font></font>
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {<font></font>
        w.WriteHeader(http.StatusInternalServerError)<font></font>
    }<font></font>
}</code></pre><br>
<p>      <code>Search</code>     <code>SearchKey</code>    URL <code>q</code>  HTTP-.</p><br>
<p>     <code>page</code>        <code>NextPage</code>  <code>search</code>.     <code>pageSize</code>      20.   <code>pageSize</code>   ,  API      .        0  100.</p><br>
<p>       <code>fmt.Sprintf()</code>    GET  .    News API  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://freshman.tech/">200 OK</a>,      .        <code>search.Results</code>.</p><br>
<p>         <code>TotalResults</code>  <code>pageSize</code>. ,    100 ,      20,      ,    100    .</p><br>
<p>         <code>search</code>    .          JSON   ,   .</p><br>
<p>    <code>index.html</code>,    ,   :</p><br>
<pre><code class="go hljs"><span class="hljs-keyword">import</span> (
    <span class="hljs-string">"encoding/json"</span>
    <span class="hljs-string">"flag"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"html/template"</span>
    <span class="hljs-string">"log"</span>
    <span class="hljs-string">"math"</span>
    <span class="hljs-string">"net/http"</span>
    <span class="hljs-string">"net/url"</span>
    <span class="hljs-string">"os"</span>
    <span class="hljs-string">"strconv"</span>
    <span class="hljs-string">"time"</span>
)</code></pre><br>
<p>      ,   <code>index.html</code>  .     <code>&lt;header&gt;</code>:</p><br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"search-results"</span>&gt;</span><font></font>
    {{ range .Results.Articles }}<font></font>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"news-article"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"noreferrer noopener"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{.URL}}"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>{{.Title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"description"</span>&gt;</span>{{ .Description }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"metadata"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"source"</span>&gt;</span>{{ .Source.Name }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">time</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"published-date"</span>&gt;</span>{{ .PublishedAt }}<span class="hljs-tag">&lt;/<span class="hljs-name">time</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"article-image"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"{{ .URLToImage }}"</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><font></font>
    {{ end }}<font></font>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></code></pre><br>
<p>       ,    .       (   <code>search</code>),          ( <code>{{.Results}}</code>).</p><br>
<p> <code>range</code>      Go    HTML     .      <code>Article</code>,    <code>Articles</code>,   HTML   .</p><br>
<p> ,         .      20   ,     .</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/e5b/129/9ff/e5b1299ffc3a2c0ba892cdf3a2097e73.png" alt="ニュース一覧を表示するブラウザ"></a></p><br>
<h2 id="sohranyaem-poiskovyy-zapros-v-inputehttpsfreshmantechweb-development-with-gopersist-the-search-query-in-the-input">    </h2><br>
<p> ,      ,     .        ,      .   Google Search , .</p><br>
<p>    ,   <code>value</code>  <code>input</code>    <code>index.html</code>  :</p><br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">autofocus</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"search-input"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"{{ .SearchKey }}"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Enter a news topic"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"search"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"q"</span>&gt;</span></code></pre><br>
<p>     .    ,   :</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/88c/c3b/44e/88cc3b44e1bdd882aa9dfde1666c32b3.png"></a></p><br>
<h2 id="formatiruem-datu-publikaciihttpsfreshmantechweb-development-with-goformat-the-published-date">  </h2><br>
<p>       ,  ,    .   ,  News API    .      ,     <code>Article</code>           .</p><br>
<p>       <code>Article</code>  <code>main.go</code>:</p><br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(a *Article)</span> <span class="hljs-title">FormatPublishedDate</span><span class="hljs-params">()</span> <span class="hljs-title">string</span></span> {<font></font>
    year, month, day := a.PublishedAt.Date()<font></font>
    <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"%v %d, %d"</span>, month, day, year)<font></font>
}</code></pre><br>
<p>   <code>FormatPublishedDate</code>    <code>Article</code>,      <code>PublishedAt</code>  <code>Article</code>      : <code>10  2009</code>.</p><br>
<p>       ,  <code>.PublishedAt</code>  <code>.FormatPublishedDate</code>    <code>index.html</code>.        .       ,   :</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/444/c8a/92f/444c8a92fbd3ee21d89646c2d5868250.png" alt="正しい形式の日付を表示する勇敢なブラウザ"></a></p><br>
<h2 id="vyvodim-obschee-kolichestvo-rezultatovhttpsfreshmantechweb-development-with-goshow-the-total-number-of-results">   </h2><br>
<p>      ,        ,      ,         .</p><br>
<p>,    ,        <code>.container</code>,    <code>.search-results</code>    <code>index.html</code>:</p><br>
<pre><code class="go hljs">&lt;div class=<span class="hljs-string">"result-count"</span>&gt;<font></font>
  {{ <span class="hljs-keyword">if</span> (gt .Results.TotalResults <span class="hljs-number">0</span>)}}<font></font>
  &lt;p&gt;About &lt;strong&gt;{{ .Results.TotalResults }}&lt;/strong&gt; results were found.&lt;/p&gt;<font></font>
  {{ <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ne .SearchKey <span class="hljs-string">""</span>) and (eq .Results.TotalResults <span class="hljs-number">0</span>) }}<font></font>
  &lt;p&gt;No results found <span class="hljs-keyword">for</span> your query: &lt;strong&gt;{{ .SearchKey }}&lt;/strong&gt;.&lt;/p&gt;<font></font>
  {{ end }}<font></font>
&lt;/div&gt;</code></pre><br>
<p> Go    ,     .    <code>gt</code>,  ,   <code>TotalResults</code>  <code>Results</code>  .   ,         .</p><br>
<p>  ,  <code>SearchKey</code>     (<code>(ne .SearchKey "")</code>)  <code>TotalResults</code>   (<code>(eq .Results.TotalResults 0)</code>),    «No results found».</p><br>
<p>        ,        .      «No results found».</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/305/bfc/407/305bfc40758d20abe8e01c1981930d41.png" alt="結果が見つからないメッセージを表示するブラウザ"></a></p><br>
<p>            .      ,   :</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/bbb/30a/c8c/bbb30ac8c3adc70ff1195ed3382ce928.png" alt="ページ上部に結果数を表示するブラウザ"></a></p><br>
<h2 id="paginaciyahttpsfreshmantechweb-development-with-gopagination"></h2><br>
<p>     20  ,   ,             .</p><br>
<p>   <strong> Next </strong>  ,       .  ,      ,        <code>Search</code> <code>main.go</code>:</p><br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *Search)</span> <span class="hljs-title">IsLastPage</span><span class="hljs-params">()</span> <span class="hljs-title">bool</span></span> {
    <span class="hljs-keyword">return</span> s.NextPage &gt;= s.TotalPages<font></font>
}</code></pre><br>
<p>  ,    <code>NextPage</code>,   <code>TotalPages</code>   <code>Search</code>.   ,    <code>NextPage</code>  ,     .    :</p><br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">searchHandler</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {
    <span class="hljs-comment">//  </span>
    search.TotalPages = <span class="hljs-keyword">int</span>(math.Ceil(<span class="hljs-keyword">float64</span>(search.Results.TotalResults / pageSize)))
    <span class="hljs-comment">//   if </span>
    <span class="hljs-keyword">if</span> ok := !search.IsLastPage(); ok {<font></font>
        search.NextPage++<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">//   </span>
}</code></pre><br>
<p>,   ,        .       <code>.search-results</code>    <code>index.html</code>.</p><br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pagination"</span>&gt;</span><font></font>
  {{ if (ne .IsLastPage true) }}<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/search?q={{ .SearchKey }}&amp;page={{ .NextPage }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button next-page"</span>&gt;</span>Next<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><font></font>
  {{ end }}<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre><br>
<p>        ,  <strong>Next</strong>       .</p><br>
<p> , <code>href</code>     <code>/search</code>        <code>q</code>,   <code>NextPage</code>   <code>page</code>.</p><br>
<p>   <strong>Previous</strong>.        ,     1.   ,      <code>CurrentPage()</code>  <code>Search</code>,   .     <code>IsLastPage</code>:</p><br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *Search)</span> <span class="hljs-title">CurrentPage</span><span class="hljs-params">()</span> <span class="hljs-title">int</span></span> {
    <span class="hljs-keyword">if</span> s.NextPage == <span class="hljs-number">1</span> {
        <span class="hljs-keyword">return</span> s.NextPage<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> s.NextPage - <span class="hljs-number">1</span>
}</code></pre><br>
<p>   <code>NextPage - 1</code>,   ,  <code>NextPage</code>  1.    ,   1   .     :</p><br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *Search)</span> <span class="hljs-title">PreviousPage</span><span class="hljs-params">()</span> <span class="hljs-title">int</span></span> {
    <span class="hljs-keyword">return</span> s.CurrentPage() - <span class="hljs-number">1</span>
}</code></pre><br>
<p> ,         <strong>Previous</strong>,      1.   <code>.pagination</code>    <code>index.html</code>  :</p><br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pagination"</span>&gt;</span><font></font>
  {{ if (gt .NextPage 2) }}<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/search?q={{ .SearchKey }}&amp;page={{ .PreviousPage }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button previous-page"</span>&gt;</span>Previous<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><font></font>
  {{ end }}<font></font>
  {{ if (ne .IsLastPage true) }}<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/search?q={{ .SearchKey }}&amp;page={{ .NextPage }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button next-page"</span>&gt;</span>Next<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><font></font>
  {{ end }}<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre><br>
<p>       .      ,   :</p><br>
 <br>
<br>
<h2 id="pokazyvaem-tekuschuyu-stranicuhttpsfreshmantechweb-development-with-goshow-the-current-page">  </h2><br>
<p> ,      ,   ,            ,       .</p><br>
<p>         <code>index.html</code>  :</p><br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"result-count"</span>&gt;</span><font></font>
  {{ if (gt .Results.TotalResults 0)}}<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>About <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{{ .Results.TotalResults }}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> results were found. You are on page <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{{ .CurrentPage }}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> of <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span> {{ .TotalPages }}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><font></font>
  {{ else if (ne .SearchKey "") and (eq .Results.TotalResults 0) }}<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>No results found for your query: <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{{ .SearchKey }}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><font></font>
  {{ end }}<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre><br>
<p> ,        ,                 .</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/071/3cd/5a8/0713cd5a870236b1e64309fd24575847.png" alt="現在のページを表示しているブラウザ"></a></p><br>
<h2 id="deploim-na-herokuhttpsfreshmantechweb-development-with-godeploy-to-heroku">  Heroku</h2><br>
<p>,    ,       Heroku. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a>,     ,    .     .    <strong>freshman-news</strong>.</p><br>
<p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>,      Heroku   .    <code>heroku login</code>  ,       Heroku.</p><br>
<p>,    git-   .  ,   <code>git init</code>     ,     ,   heroku    git-.  <code>freshman-news</code>   .</p><br>
<pre><code class="bash hljs">heroku git:remote -a freshman-news</code></pre><br>
<p>  Procfile      (<code>touch Procfile</code>)    :</p><br>
<pre><code class="bash hljs">web: bin/news-demo -apikey <span class="hljs-variable">$NEWS_API_KEY</span></code></pre><br>
<p>    GitHub      Go,   ,    <code>go.mod</code>,   .   ,     ,   .</p><br>
<pre><code class="go hljs">module github.com/freshman-tech/news-demo<font></font>
<font></font>
<span class="hljs-keyword">go</span> <span class="hljs-number">1.12</span><span class="hljs-number">.9</span></code></pre><br>
<p>      <strong>Settings</strong>    Heroku   <strong>Reveal Config Vars</strong>.      <strong>NEWS_API_KEY</strong>,           .</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/7e6/ddc/3df/7e6ddc3df666b96b83c892346746f0c3.png" alt="Heroku構成変数"></a></p><br>
<p>,         Heroku    :</p><br>
<pre><code class="bash hljs">git add .<font></font>
git commit -m <span class="hljs-string">"Initial commit"</span>
git push heroku master</code></pre><br>
<p>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://__.herokuapp.com</a>,      .</p><br>
<h2 id="zaklyucheniehttpsfreshmantechweb-development-with-gowrap-up"></h2><br>
<p>       News     Go  -.   ,      Heroku. </p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事がお役に立てば幸いです。</font><font style="vertical-align: inherit;">このチュートリアルに関して質問がある場合は、下にコメントを残してください。折り返しご連絡いたします。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読んでくれてありがとう！</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja475378/index.html">「個人データの権利を大企業に任せることはできません」-テクノロジーの未来について元ワイアードUKの編集長</a></li>
<li><a href="../ja475382/index.html">Yandex.MapsにWebAssemblyを実装する方法と、JavaScriptを残す理由</a></li>
<li><a href="../ja475384/index.html">Spring Boot 2.2の新機能</a></li>
<li><a href="../ja475386/index.html">注意、FAS：広告に関する法律に違反しないようにする方法。広告主メモ</a></li>
<li><a href="../ja475388/index.html">Security Week 46：マイク、レーザー、訓練された機械の安全性</a></li>
<li><a href="../ja475392/index.html">python -m pipを使用する理由</a></li>
<li><a href="../ja475396/index.html">プリント回路基板のCADで「不要な」チェックを無効にすると何が問題になる</a></li>
<li><a href="../ja475398/index.html">11月11日から17日までのモスクワでのデジタルイベント</a></li>
<li><a href="../ja475400/index.html">11月11〜17日のサンクトペテルブルクでのデジタルイベント</a></li>
<li><a href="../ja475404/index.html">簡単な例のBLoCパターン</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>