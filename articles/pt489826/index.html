<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèΩ‚Äçüî¨ ü§• üíÑ Sobre m√©todos mut√°veis ‚Äã‚Äãde um objeto Math em JavaScript üåæ üôâ üìÆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoje estamos publicando uma tradu√ß√£o de um artigo sobre c√°lculos matem√°ticos em JavaScript, que √© uma vers√£o escrita da apresenta√ß√£o de seu autor no W...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Sobre m√©todos mut√°veis ‚Äã‚Äãde um objeto Math em JavaScript</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/489826/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hoje estamos publicando uma tradu√ß√£o de um artigo sobre c√°lculos matem√°ticos em JavaScript, que √© uma vers√£o escrita da </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apresenta√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de seu autor no </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">WaffleJS</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">E essa afirma√ß√£o em si foi um pouco de continua√ß√£o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dessa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conversa no Twitter.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c50/bea/705/c50bea705dc18becfec75951a06de4df.jpg"></div></a><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Educa√ß√£o matem√°tica</font></font></font></i><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interesse em matem√°tica</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo come√ßou com minha educa√ß√£o matem√°tica, com o recebimento do qual demorei um pouco. Quando estudei ci√™ncia da computa√ß√£o, pude me comunicar com professores de matem√°tica de classe mundial, mas perdi essa oportunidade. N√£o gostei de matem√°tica: os temas estudados estavam muito longe da pr√°tica. Al√©m disso, eu j√° estava desequilibrado por um programa profundamente te√≥rico de treinamento em inform√°tica. Eu ent√£o acreditei que ela estava divorciada da vida e, na maioria das vezes, continuo pensando assim. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas agora, alguns anos depois de concluir meus estudos, uma sede de aprender matem√°tica despertou em mim. Fui inspirado pelo efeito que at√© uma pequena aplica√ß√£o de conhecimento matem√°tico pode ter no meu trabalho e no meu hobby. Mas eu n√£o tinha um plano de estudo claro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, em 2012, encontrei uma maneira de estudar matem√°tica come√ßando o trabalho no projeto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simple Statistics</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Desde ent√£o, expandi e apoiei este projeto. Agora inclui implementa√ß√µes de muitos algoritmos, que acabou sendo uma das </font><font style="vertical-align: inherit;">bibliotecas matem√°ticas JavaScript </font><font style="vertical-align: inherit;">mais " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estreladas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". E, aparentemente, as pessoas realmente usam essa biblioteca. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas comecei a trabalhar em 2012. Se falamos sobre como a tecnologia mudou ao longo desse tempo, isso foi h√° muito, muito tempo atr√°s. Desde ent√£o, 8 lan√ßamentos LTS de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> foram liberados </font><font style="vertical-align: inherit;">. Desde ent√£o, o pr√≥prio JavaSript e os ambientes nos quais os programas escritos nesta linguagem funcionam muito. Em 2012, a biblioteca React ainda n√£o existia, ent√£o o primeiro commit no projeto Babel ainda n√£o foi feito.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5d8/832/415/5d8832415ee3bf56c1f3a18e294f39fb.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A passagem do tempo</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ao longo dos anos, notei que meus testes falharam ao atualizar o Node.js. </font><font style="vertical-align: inherit;">Por exemplo, eu posso ter algo como este teste:</font></font><br>
<br>
<pre><code class="javascript hljs">t.equal(ss.gamma(<span class="hljs-number">11.54</span>), <span class="hljs-number">13098426.039156161</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este teste funciona bem no Node.js v10, mas √© interrompido no Node.js v12. </font><font style="vertical-align: inherit;">E aqui n√£o √© um m√©todo super complicado que √© testado: a fun√ß√£o √© </font></font><code>gamma</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementada usando fun√ß√µes JavaScript padr√£o - </font></font><code>Math.pow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Math.sqrt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>Math.sin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aritm√©tica</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu sei o que voc√™ pode pensar aqui: aritm√©tica. </font><font style="vertical-align: inherit;">No Twitter, discuss√µes acaloradas surgem periodicamente devido aos resultados do c√°lculo da seguinte express√£o:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span> = <span class="hljs-number">0.30000000000000004</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas, como eu j√° </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escrevi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , todas as linguagens de programa√ß√£o populares se comportam dessa maneira, mesmo as antiquadas e pedantes como Haskell. </font><font style="vertical-align: inherit;">A aritm√©tica de ponto flutuante pode parecer estranha, mas eles se comportam da mesma forma, seu comportamento √© bem documentado. </font><font style="vertical-align: inherit;">Ou seja, estamos falando sobre o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">padr√£o IEEE 754</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cujos requisitos s√£o estritamente implementados em linguagens de programa√ß√£o. </font><font style="vertical-align: inherit;">Portanto, o problema n√£o est√° na aritm√©tica: na implementa√ß√£o de adi√ß√£o, subtra√ß√£o, divis√£o e multiplica√ß√£o em linguagens, pode-se dizer que a programa√ß√£o √© ‚Äúesculpida em pedra‚Äù.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Objeto de matem√°tica</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meu problema estava no objeto JavaScript padr√£o </font></font><code>Math</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Em particular, em todos os </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√©todos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> deste objeto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
T√©cnicas, tais como </font></font><code>Math.sin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Math.cos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Math.exp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Math.pow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Math.tan</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- √© os ingredientes b√°sicos para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geom√©tricas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> c√°lculos e outras. </font><font style="vertical-align: inherit;">Quando entendi isso, comecei a estudar separadamente as altera√ß√µes no comportamento dos m√©todos b√°sicos do objeto </font></font><code>Math</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em diferentes vers√µes do Node.js. </font><font style="vertical-align: inherit;">Aqui est√£o alguns exemplos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C√°lculo </font></font><code>Math.tanh(0.1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// Node 4</span>
<span class="hljs-number">0.09966799462495590234</span>
<span class="hljs-comment">// Node 6</span>
<span class="hljs-number">0.09966799462495581907</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C√°lculo </font></font><code>Math.pow(1/3, 3)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// Node 10</span>
<span class="hljs-number">0.03703703703703703498</span>
<span class="hljs-comment">// Node 12</span>
<span class="hljs-number">0.03703703703703702804</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pior ainda, esse problema n√£o √© apenas aparente no Node.js. </font><font style="vertical-align: inherit;">O mesmo acontece nos navegadores e em outros ambientes que suportam JavaScript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso nos leva √† seguinte pergunta: o que √© c√°lculo matem√°tico?</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a45/45e/f7c/a4545ef7cf6e282546aee3ea506d762f.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Representa√ß√£o gr√°fica de c√°lculos Os</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
m√©todos trigonom√©tricos s√£o f√°ceis de visualizar. Se voc√™ tem um √∫nico c√≠rculo e v√°rios meses de ensino m√©dio √† sua disposi√ß√£o, sabe que o cosseno e o seno s√£o as coordenadas de um certo ponto na extremidade do c√≠rculo e que os gr√°ficos das fun√ß√µes sin e cos parecem ondas. De fato, no ensino m√©dio, eles estudam a deriva√ß√£o desses valores, mas o m√©todo usado para isso - a</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> s√©rie Taylor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - se baseia em uma s√©rie infinita, e n√£o √© f√°cil para um computador resolver tais problemas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° o que voc√™ pode aprender com a</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wikipedia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em rela√ß√£o ao algoritmo de c√°lculo senoidal: ‚ÄúN√£o existe um algoritmo padr√£o para calcular o seno. O IEEE 754-2008, o padr√£o mais amplamente usado para c√°lculos de ponto flutuante, n√£o afeta o c√°lculo de fun√ß√µes trigonom√©tricas como um seno ". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os computadores usam muitas aproxima√ß√µes e algoritmos diferentes para executar c√°lculos, algo como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CORDIC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , todos os tipos de truques e tabelas de pesquisa complicados. Toda essa heterogeneidade explica a presen√ßa de muitas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bibliotecas fastmath</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no GitHub </font><font style="vertical-align: inherit;">. O fato √© que existem muitas maneiras de implementar o m√©todo </font></font><code>Math.sin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. E outras fun√ß√µes tamb√©m. Por exemplo, como voc√™ sabe, Quake III Arena usou um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√°pido</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">substituindo o m√©todo de c√°lculo da raiz quadrada inversa padr√£o para acelerar a renderiza√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, os c√°lculos matem√°ticos s√£o o resultado da implementa√ß√£o de certos algoritmos. Na pr√°tica, muitos algoritmos comuns e suas variantes s√£o usados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A especifica√ß√£o JavaScript, em vez de especificar qual algoritmo espec√≠fico usar nas implementa√ß√µes de linguagem, oferece muito espa√ßo para manobras nas implementa√ß√µes em termos de fun√ß√µes usadas em c√°lculos matem√°ticos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° o que o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">padr√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diz sobre isso </font><font style="vertical-align: inherit;">(ECMA-262, edi√ß√£o 10, se√ß√£o 20.2.2):</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"O comportamento das fun√ß√µes acos, acosh, asin, asinh, atan, atanh, atan2, cbrt, cos, cosh, exp, expm1, hypot, log, log1p, log2, log2, log10, pow, random, sin, sinh, sqrt, tan e tanh n√£o est√° totalmente descrito aqui, com exce√ß√£o dos requisitos para o retorno de determinados resultados para valores espec√≠ficos dos argumentos, que s√£o casos de fronteira dignos de nota ". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o sei como funcionam as atividades internas dos membros do comit√™ respons√°vel pelo padr√£o ECMA-262, mas acredito que eles fizeram o padr√£o para que n√£o houvesse uma crise de compatibilidade no JavaScript se a Intel ou a AMD emitissem novas instru√ß√µes matem√°ticas ultra-r√°pidas em seus novos processadores.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Devido ao fato de existirem muitos int√©rpretes de JavaScript amplamente usados, devido ao fato de que o JavaScript √© frequentemente usado em navegadores, e entre navegadores ainda existe algo como concorr√™ncia e pelo fato de mesmo implementa√ß√µes populares de JavaScript estarem sob press√£o constante e for√ßados a evoluir rapidamente, fornecendo o melhor desempenho ... por tudo isso, temos o que temos. </font><font style="vertical-align: inherit;">Qualquer pessoa que use JavaScript experimentar√° regularmente o fato de que em diferentes implementa√ß√µes os resultados dos c√°lculos matem√°ticos realizados por meio do objeto </font></font><code>Math</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s√£o diferentes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso n√£o √© t√£o significativo em outras linguagens interpretadas, pois elas geralmente t√™m algumas implementa√ß√µes "can√¥nicas". </font><font style="vertical-align: inherit;">Por exemplo, isso √© verdade para o int√©rprete Python.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onde s√£o realizados os c√°lculos?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, vamos examinar exatamente onde os c√°lculos s√£o realizados. </font><font style="vertical-align: inherit;">No caso do JavaScript, h√° tr√™s √°reas nas quais os c√°lculos matem√°ticos b√°sicos s√£o realizados:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Int√©rprete de linguagem (c√≥digo C ++ e C de uma implementa√ß√£o JavaScript espec√≠fica).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo JavaScript, por exemplo, c√≥digo para bibliotecas especializadas.</font></font></li>
</ol><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç1 </font><font style="vertical-align: inherit;">CPU</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A primeira ideia que me veio √† cabe√ßa quando pensei nos locais onde os c√°lculos s√£o feitos foi que os c√°lculos s√£o realizados no processador. Sugeri que, como os processadores implementam c√°lculos aritm√©ticos, eles tamb√©m podem implementar alguns c√°lculos mais complexos. Acontece que os processadores t√™m instru√ß√µes para executar c√°lculos trigonom√©tricos e outros, mas essas instru√ß√µes raramente s√£o usadas. Por exemplo, a implementa√ß√£o do c√°lculo senoidal em processadores com arquitetura x86 n√£o era muito popular, pois essa implementa√ß√£o n√£o se mostra necessariamente mais r√°pida que as implementa√ß√µes de software (aquelas que usam opera√ß√µes aritm√©ticas do processador). Al√©m disso, n√£o √© necessariamente mais preciso que as implementa√ß√µes de software. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intel tamb√©m sofreu uma vergonha devido √† muito forte</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">superestima√ß√£o da</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> precis√£o das opera√ß√µes trigonom√©tricas na documenta√ß√£o. </font><font style="vertical-align: inherit;">Tais erros s√£o especialmente tr√°gicos devido ao fato de que um microchip, ao contr√°rio de um programa, n√£o pode ser corrigido.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬ß 2 </font><font style="vertical-align: inherit;">Int√©rprete de idiomas</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â assim que os subsistemas de computa√ß√£o funcionam na maioria das implementa√ß√µes de JavaScript. </font><font style="vertical-align: inherit;">Eles implementam esses subsistemas de v√°rias maneiras.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os mecanismos V8 e SpiderMonkey usam portas de biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fdlibm</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para c√°lculos </font><font style="vertical-align: inherit;">, que s√£o ligeiramente diferentes. </font><font style="vertical-align: inherit;">Esta biblioteca, originalmente escrita na Sun Microsystems, foi transmitida de gera√ß√£o em gera√ß√£o.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScriptCore (Safari) usa a biblioteca cmath para executar a maioria das opera√ß√µes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O Internet Explorer usa cmath e alguns blocos de c√≥digo gravados no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assembler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Aqui, at√© m√©todos trigonom√©tricos de processadores foram usados ‚Äã‚Äã- no caso em que o navegador foi compilado para processadores com instru√ß√µes semelhantes.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por raz√µes hist√≥ricas, as ferramentas usadas para executar c√°lculos em diferentes mecanismos JS foram alteradas. </font><font style="vertical-align: inherit;">Portanto, o V8 usou sua pr√≥pria solu√ß√£o para c√°lculos, a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">porta JavaScript</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fdlibm </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">foi</font></a><font style="vertical-align: inherit;"> usada e somente ent√£o a vers√£o C do fdlibm foi usada.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Por que isso √© um problema?</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O ponto aqui √© que tudo isso reduz a capacidade do JavaScript de produzir resultados uniformes na solu√ß√£o de quaisquer problemas que envolvam c√°lculos matem√°ticos. </font><font style="vertical-align: inherit;">Isso √© especialmente dif√≠cil para a ci√™ncia de dados. </font><font style="vertical-align: inherit;">Gostaria que o JavaScript fosse mais adequado para fazer c√°lculos de ci√™ncia de dados em um navegador. </font><font style="vertical-align: inherit;">Al√©m disso, a incapacidade de produzir resultados uniformes significa o agravamento da </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crise de reprodutibilidade</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , caracter√≠stica de todas as ci√™ncias. </font><font style="vertical-align: inherit;">Isso sem mencionar alguns outros problemas de JavaScript, como recursos de digita√ß√£o de n√∫meros e a falta de uma biblioteca amplamente usada para trabalhar com quadros de dados.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç3 </font><font style="vertical-align: inherit;">Usando bibliotecas especializadas</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existe uma maneira confi√°vel de fazer os c√°lculos em JavaScript. Consiste no uso de bibliotecas especializadas. Portanto, a biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stdlib</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> implementa c√°lculos de alto n√≠vel usando apenas opera√ß√µes aritm√©ticas. Os c√°lculos aritm√©ticos s√£o totalmente descritos nas especifica√ß√µes, pois s√£o padr√£o; portanto, os resultados retornados pelo stdlib nos fornecem, independentemente da plataforma na qual o c√≥digo √© executado, resultados completamente uniformes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso √© alcan√ßado √† custa da complexidade e da velocidade das decis√µes. Os m√©todos stdlib n√£o s√£o t√£o r√°pidos quanto os m√©todos internos. Al√©m disso, para "apenas contar o seno", voc√™ precisa conectar uma biblioteca inteira ao projeto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas, se voc√™ pensar de maneira mais ampla, isso √© completamente normal. A plataforma WebAssembly, por exemplo, n√£o fornece ao programador meios para realizar c√°lculos matem√°ticos de alto n√≠vel. Na documenta√ß√£o para isso, √© recomend√°vel incluir independentemente implementa√ß√µes dos mecanismos correspondentes em seus pr√≥prios m√≥dulos: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚ÄúO WebAssembly n√£o inclui suas pr√≥prias implementa√ß√µes de fun√ß√µes matem√°ticas - como sin, cos, exp, pow, etc. A estrat√©gia do WebAssembly para tais fun√ß√µes √© permitir que os desenvolvedores os implementem como ferramentas de biblioteca na pr√≥pria plataforma WebAssembly (observe que as instru√ß√µes sin e cos da plataforma x86 s√£o lentas e imprecisas e, atualmente, de qualquer maneira, tente n√£o usar). ‚Äù</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â assim que as linguagens compiladas sempre funcionaram: quando um programa escrito em C √© compilado, os m√©todos importados </font></font><code>math.h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s√£o inclu√≠dos no programa compilado.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usando o valor epsilon</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se algu√©m n√£o quiser incluir a biblioteca stdlib em seu projeto JavaScript para realizar c√°lculos, mas precisar testar o c√≥digo que executa alguns c√°lculos complexos, provavelmente deve recorrer ao m√©todo que j√° √© usado na biblioteca de estat√≠sticas simples. Trata-se de usar um valor </font></font><code>epsilon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que define os limites dentro dos quais as diferen√ßas nos n√∫meros n√£o s√£o levadas em considera√ß√£o. Se considerarmos as </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">op√ß√µes para</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usar o s√≠mbolo epsilon na matem√°tica, podemos dizer que estou falando sobre ele como um "pequeno valor positivo arbitr√°rio". Estat√≠sticas simples </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o valor epsilon igual </font></font><code>0.0001</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ precisar descobrir se dois n√∫meros s√£o iguais, uma condi√ß√£o do formul√°rio √© verificada</font></font><code>Math.abs(result ‚Äî expected) &lt; epsilon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Se essa condi√ß√£o for verdadeira, podemos dizer que a diferen√ßa entre os n√∫meros est√° dentro do intervalo especificado e os consideramos iguais.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aditivos</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Precis√£o</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os comentaristas no Twitter indicaram que as varia√ß√µes nos resultados obtidos no exemplo est√£o fora do intervalo de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√≠gitos significativos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> do n√∫mero de ponto flutuante. </font><font style="vertical-align: inherit;">Do ponto de vista t√©cnico, isso est√° correto e significa que voc√™ pode encontrar uma maneira mais precisa de comparar n√∫meros do que aquele que usa o valor </font></font><code>epsilon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mas, na pr√°tica, a mesma hist√≥ria aqui - os n√∫meros no final do n√∫mero afetam o resultado e introduzem imprecis√µes no resultado final. </font><font style="vertical-align: inherit;">Al√©m disso, os exemplos dados aqui n√£o s√£o exaustivos. </font><font style="vertical-align: inherit;">O fato √© que os recursos de implementa√ß√£o dos int√©rpretes JavaScript podem, sem se afastar da especifica√ß√£o, levar ao aparecimento de diferen√ßas na maioria dos resultados num√©ricos.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñçJavaScript</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu n√£o quero criticar JavaScript. </font><font style="vertical-align: inherit;">Acredito que o JavaScript fez um compromisso justific√°vel, levando em considera√ß√£o a incerteza do futuro e o n√∫mero de plataformas nas quais as implementa√ß√µes de linguagem s√£o criadas. </font><font style="vertical-align: inherit;">Devo dizer que √© muito dif√≠cil comparar diretamente o JavaScript e outros idiomas. </font><font style="vertical-align: inherit;">O ponto √© o ecossistema JavaScript. </font><font style="vertical-align: inherit;">O fato de, ao mesmo tempo, haver muitos int√©rpretes da mesma l√≠ngua √© completamente at√≠pico para outras l√≠nguas. </font><font style="vertical-align: inherit;">Al√©m disso, esse √© um dos principais pontos fortes do JavaScript. </font><font style="vertical-align: inherit;">Al√©m disso, n√£o se pode dizer que esses s√£o fen√¥menos de um plano completamente diferente dos que ocorrem na pr√≥pria linguagem. </font><font style="vertical-align: inherit;">E o JavaScript muda com o tempo e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muitas coisas boas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aparecem nele </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DStdlib ou epsilon?</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acredito que, na pr√°tica, na maioria dos casos, vale a pena usar a abordagem que implica o uso do valor epsilon. </font><font style="vertical-align: inherit;">A biblioteca stdlib √© uma ferramenta poderosa maravilhosa, mas o pre√ßo da inclus√£o de uma biblioteca adicional para c√°lculos matem√°ticos no projeto pode ser bastante alto. </font><font style="vertical-align: inherit;">E, na maioria dos casos, pequenas discrep√¢ncias nos resultados dos c√°lculos n√£o importam para aplicativos.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sum√°rio</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, eu gostaria de tirar conclus√µes do exposto e compartilhar algumas id√©ias.</font></font><br>
<br>
<ol>
<li>,     ,   ,    .         .     ‚Äî    ¬´ ¬ª. ,   ,   ,   <code>Math.sin</code>   ,   ,      ,      .      ,   ,      ,   ,   ,   .    ,       ,   ,       .</li>
<li>      . ,   ,       Node.js,         ,    ,     simply-statistics.    ,    , ,     ,      .  ‚Äî    .</li>
<li>  ,    .    V8,      ,   .    ,    .    , ,         ,     .</li>
</ol><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Queridos leitores! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ encontrou problemas relacionados a altera√ß√µes nos resultados do c√°lculo ao atualizar para novas vers√µes do Node.js.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt489812/index.html">Configurar LDAP no Oracle BI</a></li>
<li><a href="../pt489818/index.html">JavaScript e mais: 4 abordagens criativas para medir o tempo em navegadores</a></li>
<li><a href="../pt489820/index.html">Estilo do elemento bom bot√£o antigo</a></li>
<li><a href="../pt489822/index.html">Gerando n√∫meros pseudo-aleat√≥rios usando um aut√¥mato celular: Regra 30</a></li>
<li><a href="../pt489824/index.html">7 ferramentas de monitoramento de seguran√ßa em nuvem de c√≥digo aberto que vale a pena conhecer</a></li>
<li><a href="../pt489828/index.html">Trabalhando com GeoJSON no Node.js: uma introdu√ß√£o pr√°tica</a></li>
<li><a href="../pt489832/index.html">Contas at√¥micas artificiais: manipula√ß√µes com macrociclos</a></li>
<li><a href="../pt489834/index.html">Incorpore seu dispositivo Smart Home ao ecossistema SmartThings</a></li>
<li><a href="../pt489836/index.html">Lidares do futuro: 11.000 lasers em vez de 128</a></li>
<li><a href="../pt489838/index.html">Vazamento de mem√≥ria no lado do servidor Nuxt usando SSR (renderiza√ß√£o no servidor)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>