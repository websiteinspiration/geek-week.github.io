<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游쓇릞 游븼游 游냓 El registro y el seguimiento de consultas son las mejores pr치cticas. Informe Yandex 游꼧 游댶 游깹</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Yandex.Market tiene una gran arquitectura de microservicios. La solicitud del navegador de la p치gina principal del mercado da lugar a docenas de solic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>El registro y el seguimiento de consultas son las mejores pr치cticas. Informe Yandex</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/489048/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex.Market tiene una gran arquitectura de microservicios. </font><font style="vertical-align: inherit;">La solicitud del navegador de la p치gina principal del mercado da lugar a docenas de solicitudes integradas en diferentes servicios (backends) que son desarrolladas por diferentes personas. </font><font style="vertical-align: inherit;">En dicho sistema, puede ser dif칤cil de entender por qu칠 raz칩n la solicitud cay칩 o tard칩 mucho tiempo en procesarse.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_l1qP0DyBcA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anatoly Ostrovsky </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">megatolya</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">explica c칩mo su equipo resolvi칩 este problema y comparte pr치cticas espec칤ficas del mercado, pero generalmente relevantes para cualquier gran servicio. Su informe se basa en su propia experiencia de desplegar un nuevo mercado en un tiempo bastante corto. Durante varios a침os, Tolya dirigi칩 el equipo de desarrollo de interfaz en el mercado, y ahora se ha movido hacia la direcci칩n de veh칤culos no tripulados.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Todos nuestros mercados est치n construidos de acuerdo con principios generales. Este es un gran sistema 칰nico. Pero si hablamos de la interfaz, desde el punto de vista del usuario, las aplicaciones son completamente diferentes. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xf/cx/bk/xfcxbk6d4xsoxdb3l7clfzw5yza.jpeg"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al mismo tiempo, nuestras interfaces van a muchos backends. Algunas veces estos backends son similares entre s칤 (diferentes instancias de la misma aplicaci칩n). Y a veces son exclusivos del servicio (facturaci칩n especial). La estructura de dicho sistema puede considerarse una arquitectura cl치sica de microservicio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Siempre hay un problema en un servicio grande: es dif칤cil entender qu칠 est치 sucediendo exactamente en 칠l. O, por ejemplo, lo que sucede en el momento en que se produce un error de pago con el usuario. Supongamos que sucedi칩 en su casa ayer, y hoy necesitamos entender lo que sucedi칩.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/b3/nz/p2/b3nzp2buowpixe2wnv1-r-ymj7m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El backend 2 puede "grabarse" para un producto espec칤fico, en un momento espec칤fico o para usuarios espec칤ficos. Necesitamos poder responder a cualquier situaci칩n. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pv/wu/-w/pvwu-wguspmalhce4hxtbvhqznu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenemos muchos backends y, como dije, pueden caminar solos. Si esto se presenta en forma de gr치fico, resultar치 bastante confuso. En la vida real, puede haber cientos de microservicios. Imagine cu치ntas conexiones habr치 entre ellos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay muchos pasos para profundizar en este tema. Hablar칠 brevemente de cada uno de ellos.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qu/nf/hq/qunfhq8cdqgbtqtmikv0maf1tpc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En primer lugar, acuerde con sus colegas del backend un sistema com칰n de marcado de solicitudes: es m치s f치cil encontrarlos m치s tarde. </font><font style="vertical-align: inherit;">A continuaci칩n, debe poder reproducir r치pidamente el problema. </font><font style="vertical-align: inherit;">Suponga que se produjo un error de pago: intente comprender r치pidamente c칩mo sucedi칩 y en qu칠 backend. </font><font style="vertical-align: inherit;">Almacene registros no solo en archivos, sino tambi칠n en la base de datos para que se puedan realizar agregaciones. </font><font style="vertical-align: inherit;">Y, por supuesto, una parte importante del proceso son los gr치ficos y el monitoreo. </font><font style="vertical-align: inherit;">A continuaci칩n, en orden.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sistema de identificaci칩n de solicitud unificada</font></font></h2><br>
<img src="https://habrastorage.org/webt/1z/lc/cl/1zlccllwyct_nesu28sa4kh0za0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta es una de las herramientas m치s f치ciles de entender lo que est치 sucediendo con el servicio. Acuerde con sus colegas que, por ejemplo, su interfaz genera alg칰n tipo de solicitud de identificaci칩n (la variable requestId en la imagen) y luego la arroja a todos los endpoints de los backends. Y el backend en s칤 mismo no reinventa nada. Toma el ID de solicitud que ha llegado y lo reenv칤a m치s lejos en solicitudes a sus servidores. Al mismo tiempo, puede especificar su prefijo, de modo que entre el requestId id칠ntico ser칤a posible encontrar este backend en particular. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oh/qo/sk/ohqoskth2c-8o9h2btju58-tg04.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, cuando engulle sus registros, entonces, asegur치ndose de que sus registros digan, por ejemplo, que el back-end es quinientos, puede haber dos opciones. O bien, le dar치 esta identificaci칩n de solicitud a sus colegas y ellos la ver치n en sus registros, o lo ver치 usted mismo.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pq/cf/1m/pqcf1m-t3srhcoorgfwnnpohbqg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos nuestros registros est치n marcados con dicha identificaci칩n para no solo comprender qu칠 sucedi칩 y en qu칠 momento, sino tambi칠n para mantener el contexto de esta solicitud. </font><font style="vertical-align: inherit;">Es as칤ncrono, luego puede agregar algo al registro. </font><font style="vertical-align: inherit;">Y si muerdes a requestId, nada bueno saldr치 de eso.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rizo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para reproducir el problema, utilizamos la utilidad cURL. Esta es una utilidad de consola que realiza solicitudes de red: http y https. cURL admite muchos m치s protocolos diferentes, pero cuando se realiza desarrollo web, es m치s f치cil suponer que esta es una herramienta para trabajar con solicitudes http (s). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/75/mr/uh/75mruhc0hnm0q7qtllafjtnz8ak.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para familiarizarse con el equipo de cURL, puede ir a cualquier sitio, luego ir a Red y copiar cualquier solicitud en forma de cURL. El resultado es una l칤nea tan grande: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jl/mn/fx/jlmnfxdobmhcqctl-uviygpzij8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
si intenta resolverlo, entonces no hay nada de qu칠 preocuparse. Intentemos desarmarlo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j5/88/xz/j588xz0r-jh48xp1rphfqoljlvk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu칤 hay una solicitud para market.yandex.ru. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gv/6v/_d/gv6v_dz188tviqfjs5siyf9lt8e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu칤 se ha agregado un User-Agent, que ya ocupa mucho espacio.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1j/a_/sd/1ja_sdx_in4dcwudr64xjdezf98.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, el resto son cookies. Hay bastantes de ellos en el c칩digo Yandex. En forma serializada, tienen un aspecto muy formidable. De hecho, no hay nada m치s aparte de ellos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, 쯣ara qu칠 sirve cURL? Si lo copi칩 y lo ejecut칩, entonces vio la misma p치gina market.yandex.ru que yo, solo la computadora en la que se ejecutaba ser칤a diferente. Por supuesto, algunos efectos secundarios podr칤an dar diferencias en las direcciones IP, pero en general ser칤an las mismas solicitudes. Reproducir칤amos el mismo escenario. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lh/gd/sg/lhgdsguqkolxs1vrjusxnshjnmg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para no inventar tales consultas cURL cada vez, puede usar el formato npm-package format-curl.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yj/in/fk/yjinfkjpv0bgzbhfmi8shr7qyno.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toma todos los par치metros de solicitud que la funci칩n generalmente toma, es decir, en este caso solo encabezados y url. </font><font style="vertical-align: inherit;">Pero tambi칠n sabe c칩mo consultar, el cuerpo, etc. Y la salida es solo una cadena con una solicitud cURL. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xx/4l/h8/xx4lh8tvvwmvzw1-aflbg7ophvq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, todos nuestros registros en el entorno de desarrollo tambi칠n contienen solicitudes de cURL. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wu/iq/f6/wuiqf6p5bzxdgiom430q364yuw4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Incluso registramos solicitudes de cURL de back-end directamente en el navegador para ver de inmediato c칩mo vamos a nuestros backends sin mirar la consola del navegador. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0o/l3/ay/0ol3ay03w7toau9tyabduyiu1-m.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tenga en cuenta que las solicitudes de cURL implican la transferencia de cookies de sesi칩n; esto es malo. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si rechaz칩 su solicitud de cURL en market.yandex.ru, entonces podr칤a ingresar a su Market y a cualquier otro servicio Yandex bajo su inicio de sesi칩n. </font><font style="vertical-align: inherit;">Por lo tanto, no almacenamos tales solicitudes en ning칰n lugar, y las registramos solo en bancos de pruebas para nosotros mismos; dichos datos no se pueden filtrar.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clickhouse</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci칩n hablar칠 sobre registros estructurados. Aqu칤 tendr칠 en cuenta la base de datos espec칤fica de ClickHouse, pero puede elegir cualquiera. ClickHouse es un DBMS columnar, es m치s conveniente seleccionar entre una gran cantidad de datos y tomar grandes cantidades de datos. Es bueno que pueda guardar una gran parte del registro en 칠l y luego, por ejemplo, hacer alg칰n tipo de agregaci칩n de mil millones de registros. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rx/yq/hx/rxyqhxvdpvjetfh9jmkw4hfkwvu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este caso, el ejemplo de selecci칩n de ClickHouse es SQL simple. Aqu칤 mostramos el n칰mero de solicitudes de c칩digos de estado para hoy. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oi/5v/je/oi5vje-sgh204x5-w1fjywdjyk8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, tendremos 180 mil doscientos setecientos quinientos, y los c칩digos de estado restantes, por ejemplo, no nos interesan. Pero, 쯖칩mo podemos usar esto de manera interesante?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ed/r6/gp/edr6gpqetfffuhjo6uc2hwznb4s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podemos decir que la proporci칩n de doscientos a la proporci칩n del n칰mero total de respuestas es el Indicador de nivel de servicio, que responde a la pregunta de qu칠 tan bien funciona nuestra aplicaci칩n en t칠rminos de c칩digos de estado. Aunque simple, ya est치 hablando de algo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y3/vr/vq/y3vrvqez5ghx9umed2htpzgeurm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seg칰n nuestro indicador, podemos llegar al primer SLI, es decir, por ejemplo, que el 99% de nuestras solicitudes deber칤an estar bien. Y aqu칤 podemos comparar que realizamos nuestro SLI. Si no se hubieran cumplido, podr칤amos haber intentado distinguir algunas de las 칰ltimas solicitudes que habr칤an sido quinientas, o simplemente cosas cr칤ticas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hf/0i/vf/hf0ivf6posnoebmrwayqz4wni5c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, los errores de pago son cr칤ticos para nosotros, pero en este caso devolver치n cero, es una suerte :) </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5c/0i/yh/5c0iyhrkfdxbgd0psywb7jvv8si.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
쮺칩mo puede hacer sus registros de una forma tan conveniente y que puedan tomarse a trav칠s de SQL?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7b/7m/hx/7b7mhxhtlyos6qbomnnm2p6xcko.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este es un tema para otro gran informe, y todo depende de su infraestructura. </font><font style="vertical-align: inherit;">Pero parece que hay dos formas. </font><font style="vertical-align: inherit;">Primero: env칤e los metadatos directamente al tiempo de ejecuci칩n, directamente a la base de datos. </font><font style="vertical-align: inherit;">Lo hacemos de manera diferente, de la segunda manera: seguimos el archivo de registro y enviamos fragmentos en la base de datos o en un lugar intermedio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto funciona para nosotros en lugar de varias capas: enviamos registros de una instancia espec칤fica a un servidor de almacenamiento remoto de dichos registros.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solicitar seguimiento</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No existe el concepto de "rastreo de consultas". Este t칠rmino fue acu침ado por Google. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/au/mc/cf/aumccfspkkp7eieqgesgk8awnn4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si busca en Internet "seguimiento de consultas", ver치 el comando traceroute. Quiz치s esto es similar al rastreo de consultas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w0/no/pv/w0nopvgiuihtlc2x8b7fdist7lm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Incluso hay un programa de consola, y aqu칤 lo ejecut칠 para el sitio web bringly.ru (un servicio que desarrollamos la primavera pasada). Ayuda a comprender a trav칠s de qu칠 m치quinas y servidores pasa la solicitud antes de que llegue al equilibrador, que responder치 por dise침o o por otra cosa. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9g/n9/ax/9gn9axljm2rabdxvowa3p8gsjec.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu칤 est치 nuestro equilibrador. Por rastreo de consultas, no queremos decir esto, sino todo lo que sucede dentro de nuestro equilibrador: c칩mo la solicitud vive m치s dentro de nuestra aplicaci칩n node.js.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fh/rh/rr/fhrhrr6j0ujdnvdivmn0dwobnlc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vemos esto en forma de una l칤nea de tiempo, donde se muestra el tiempo horizontal y la secuencia vertical de solicitudes. En este caso, tenemos una solicitud para la tarjeta del producto, donde se puede ver que se trata de una solicitud al back-end de nuestra autorizaci칩n. Despu칠s de su decisi칩n, fueron tres largas filas: esta es una solicitud a nuestro backend principal para una canasta, tarjeta de producto y productos similares. Entonces tenemos un rastro. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/m8/sl/4a/m8sl4atplnknyq_5wefl8b2wgw0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu칤 puede ver la misma solicitud de autorizaci칩n, y luego se fue el backend. En este caso, el backend no se comporta de manera 칩ptima, ya que tiene muchas consultas consecutivas en su base de datos. Probablemente, tal consulta podr칤a optimizarse.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ru/ah/bz/ruahbzfg8qzvgzi1s2gbexvm0og.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y aqu칤 hay un ejemplo de un rastro, cuando no fuimos a ning칰n backend, sino que inmediatamente dimos el estado de 500. 쮺칩mo nos resulta 칰til ese rastro? </font><font style="vertical-align: inherit;">No tenemos que molestar a los colegas. </font><font style="vertical-align: inherit;">Tenemos la identificaci칩n de esta solicitud, por lo que podemos mirar en los registros nosotros mismos y descubrir qu칠 est치 sucediendo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wq/nm/0g/wqnm0gw9rgznoe7rswqshty_u1a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu칤 est치 la situaci칩n opuesta. </font><font style="vertical-align: inherit;">Backend dijo que algo andaba mal y, al mismo tiempo, escribi칩 en la metainformaci칩n qu칠 sucedi칩 exactamente: apareci칩 alg칰n tipo de seguimiento de la pila. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uc/lb/ck/uclbck5ju2ri2l2qyhjxkwnvxpk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
쮺칩mo hacerse la misma herramienta? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo m치s importante aqu칤 es la base de datos. </font><font style="vertical-align: inherit;">Si tiene el "INSERT INTO" m치s simple en la base de datos de algunas acciones con el servicio, m치s tarde puede usar al menos SQL para encontrar los eventos necesarios. </font><font style="vertical-align: inherit;">Y si es necesario, puede hacer una interfaz para esto.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gr치ficos</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este es un tema muy interesante, no me detendr칠 en detalles hoy, por supuesto, :) </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mo/tc/5p/motc5p8irltrzn7aqlsffemkdza.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hablemos sobre el registro. </font><font style="vertical-align: inherit;">Tenemos muchos gr치ficos, los miramos cuando lanzamos algo, y en los tiempos hay mucho ruido. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lo/vn/ku/lovnkuij1s2d39nszmdwvwsde78.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los gr치ficos ayudan a ver visualmente que algo est치 mal. </font><font style="vertical-align: inherit;">Y luego a칰n debe mirar los registros y comprender qu칠 hay de malo en ellos. </font><font style="vertical-align: inherit;">En este caso, el aumento inmediato despu칠s de la liberaci칩n al menos significa que dicha liberaci칩n debe revertirse inmediatamente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Supervisi칩n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una parte a칰n m치s importante y un mayor grado de inmersi칩n en este tema es el monitoreo. Por monitoreo, entiendo, en primer lugar, el monitoreo autom치tico de gr치ficos y, en segundo lugar, cualquier regla automatizada para monitorear algo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wn/1f/r9/wn1fr9r0fnzl-r4kbkgbj3pwz6w.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Monitoreamos la proporci칩n de quinientos al n칰mero total de respuestas por minuto. Tambi칠n monitoreamos cuatrocientos, la presencia de una carga en el servicio, verificando la perilla de verificaci칩n de estado, que tira de la perilla de ping de cada uno de los backends, etc.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j0/be/ts/j0betsujurv192dkwhrvk_cvegk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem치s, tenemos paneles de monitoreo que incluimos en pantallas cerca de estaciones de trabajo. </font><font style="vertical-align: inherit;">Entonces, inmediatamente vemos cu치l de los "sonrojos" de monitoreo. </font><font style="vertical-align: inherit;">Por ejemplo, aqu칤 es uno de los principales, donde la interfaz y nuestro servidor principal son visibles. </font><font style="vertical-align: inherit;">Aqu칤 puede ver que algunos controles se iluminan en el backend. </font><font style="vertical-align: inherit;">Esto significa que en ese momento la persona responsable de este servicio recibir치 un mensaje en Telegram, o tal vez incluso lo llamar치n, depende de la configuraci칩n de monitoreo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un 칰nico requestId lo ayudar치 a encontrar problemas m치s f치cilmente en un servicio que consta de varias aplicaciones. </font><font style="vertical-align: inherit;">El cURL correcto le permitir치 reproducir con mayor precisi칩n los problemas y ver c칩mo usted mismo, por ejemplo, env칤a datos al backend. </font><font style="vertical-align: inherit;">Los registros estructurados le permitir치n obtener SLI, y son m치s convenientes de usar que los registros de texto normales. </font><font style="vertical-align: inherit;">Y no te olvides de seguir los cuadros y realizar el seguimiento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recomiendo leer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el libro de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ingenier칤a de confiabilidad </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">del</font></a><font style="vertical-align: inherit;"> sitio de Google si est치 interesado en cosas de infraestructura.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es489038/index.html">El libro "Concurrencia de Java en la pr치ctica"</a></li>
<li><a href="../es489040/index.html">Contact Center AI: un tercero en conversaci칩n est치 bien</a></li>
<li><a href="../es489042/index.html">Gran reapertura de la tienda: cargando datos en Android usando corutina</a></li>
<li><a href="../es489044/index.html">F칤sica del texto. Parte 1. S칤mbolos</a></li>
<li><a href="../es489046/index.html">Auto-conducci칩n Monster Truck GAZ66 1/16</a></li>
<li><a href="../es489050/index.html">Windows vs Sysmon</a></li>
<li><a href="../es489058/index.html">Conjuntos de redes neuronales con PyTorch y Sklearn</a></li>
<li><a href="../es489060/index.html">An치lisis: 쯖u치l es la diferencia entre las inversiones de alto riesgo y las de bajo riesgo?</a></li>
<li><a href="../es489062/index.html">Incre칤ble rendimiento paralelo de Apache Parquet I / O en Python</a></li>
<li><a href="../es489068/index.html">Inmortalidad digital: un enfoque de ingenier칤a</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>