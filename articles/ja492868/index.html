<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚯 👨🏿‍💼 👶🏼 ClickHouseの文字列最適化。Yandexレポート 👩🏿‍🤝‍👩🏻 🙇🏿 🐃</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ClickHouse分析データベースエンジンは、さまざまな行を処理し、リソースを消費します。システムを高速化するために、新しい最適化が常に追加されています。ClickHouseの開発者であるNikolay Kochetovが、新しいデータ型LowCardinalityなどの文字列データ型について説明...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ClickHouseの文字列最適化。Yandexレポート</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/492868/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClickHouse分析データベースエンジンは、さまざまな行を処理し、リソースを消費します。</font><font style="vertical-align: inherit;">システムを高速化するために、新しい最適化が常に追加されています。</font><font style="vertical-align: inherit;">ClickHouseの開発者であるNikolay Kochetovが、新しいデータ型LowCardinalityなどの文字列データ型について説明し、文字列の処理を高速化する方法について説明します。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/rqf-ILRgBdY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-まず、文字列を格納する方法を見てみましょう。 </font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/ch/9s/zs/ch9szsqfnkkvpmjjxoo0lmpacno.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
文字列データ型があります。文字列はデフォルトで適切に機能します。ほとんど常に使用する必要があります。オーバーヘッドは小さく、1行あたり9バイトです。行サイズを固定して事前に把握したい場合は、FixedStringを使用することをお勧めします。必要なバイト数を設定できるので、IPアドレスやハッシュ関数などのデータに便利です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rd/lx/mo/rdlxmobm0ch5l88ab74sszn_fps.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、時々何かが遅くなります。テーブルに対してクエリを実行するとします。 ClickHouseはかなりの量のデータを、たとえば100 GB /秒の速度で読み取り、数行が処理されます。ほぼ同じデータを格納する2つのテーブルがあります。 ClickHouseは2番目のテーブルから高速でデータを読み取りますが、1秒あたりの読み取り行数は3分の1です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nd/tz/6l/ndtz6l6-1pwaycgcoxhslfj2hcm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
圧縮データのサイズを見ると、ほぼ同じです。実際、同じデータがテーブルに書き込まれます-最初の10進数-最初の列だけがUInt64として書き込まれ、2番目の列は文字列に書き込まれます。このため、2番目のクエリは、ディスクからデータをより長く読み取り、解凍します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/i8/a2/vf/i8a2vfterxcfto5foypz6tig3zy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の例を示します。所定の行のセットがあると仮定すると、それは1000または10,000の定数に制限され、ほとんど変更されません。この場合、Enumデータ型が適しています。ClickHouseにはEnum8とEnum16の2つがあります。 Enumに格納されているため、リクエストは迅速に処理されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ClickHouseには、GROUP BY、IN、DISTINCTの高速化と、定数文字列との比較など、一部の関数の最適化があります。もちろん、文字列内の数値は変換されませんが、逆に、定数文字列は値Enumに変換されます。その後、すべてがすばやく比較されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、デメリットもあります。正確な線のセットがわかっていても、補充する必要がある場合があります。新しいラインが到着しました-私たちはALTERをしなければなりません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/b0/ay/sz/b0ayszedkf252ktki2xizo2fxfm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ClickHouseのALTER for Enumが最適に実装されています。ディスク上のデータは上書きしませんが、Enum構造体がテーブル自体のスキーマに格納されているため、ALTERが遅くなる可能性があります。したがって、たとえば、テーブルからの読み取り要求を待つ必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題は、もっと上手くできるかということです。多分はい。 Enum構造は、テーブルスキーマではなくZooKeeperに保存できます。ただし、同期の問題が発生することがあります。たとえば、1つのレプリカがデータを受信し、もう1つのレプリカは受信しませんでした。古いEnumがある場合、何かが壊れます。 （ClickHouseでは、ノンブロッキングALTER要求をほぼ完了しました。それらを完全に完了したら、読み取り要求を待つ必要はありません。）</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yf/rc/vj/yfrcvjamitxxi5taditsaouvrl4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ALTER Enumを台無しにしないために、外部ClickHouse辞書を使用できます。これはClickHouse内のKey-Valueデータ構造であり、MySQLテーブルなどの外部ソースからデータを取得できることを思い出してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ClickHouseディクショナリには、さまざまな行が格納されており、表にはその識別子が数字の形式で格納されています。文字列を取得する必要がある場合は、dictGet関数を呼び出して操作します。その後は、ALTERを実行すべきではありません。 Enumに何かを追加するには、これを同じMySQLテーブルに挿入します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、他の問題があります。まず、ぎこちない構文。文字列を取得したい場合は、dictGetを呼び出す必要があります。第二に、いくつかの最適化の欠如。辞書の定数文字列との比較も迅速ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでも更新に問題がある可能性があります。キャッシュディクショナリの行を要求したが、それがキャッシュに入らなかったとします。次に、データが外部ソースから読み込まれるまで待機する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/em/4z/ii/em4ziibqzsukh-mvfu2o8dpncv0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
両方の方法の共通の欠点は、すべてのキーを1か所に保存して同期することです。</font><font style="vertical-align: inherit;">それでは、なぜ辞書をローカルに保存しないのですか？</font><font style="vertical-align: inherit;">同期なし-問題ありません。</font><font style="vertical-align: inherit;">ディクショナリをディスク上の部分にローカルに保存できます。</font><font style="vertical-align: inherit;">つまり、辞書を挿入して挿入しました。</font><font style="vertical-align: inherit;">メモリ内のデータを操作する場合は、データブロック、列の一部、またはいくつかのキャッシュに辞書を書き込んで、計算を高速化できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">語彙文字列エンコーディング </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこで、ClickHouse-LowCardinalityで新しいデータ型を作成しました。これは、データを保存するための形式です。ディスクへの書き込み方法と読み取り方法、メモリ内での表示方法、および処理のスキームです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/se/5h/5e/se5h5er0yccult4fjfamsksw4rk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スライドには2つの列があります。右側では、文字列は標準的にString型で格納されています。これらはある種の携帯電話モデルであることがわかります。左側には、同じ列がありますが、LowCardinalityタイプのみです。これは、多くの異なる行（右側の列からの行）と位置のリスト（行番号）を持つ辞書で構成されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これら2つの構造を使用して、元の列を復元できます。逆インバースインデックスもあります。これは、行ごとに辞書内の位置を見つけるのに役立つハッシュテーブルです。一部のクエリを高速化するために必要です。たとえば、比較したい場合は、列で行を探すか、それらを結合します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LowCardinalityはパラメトリックデータタイプです。数値、または数値として格納されているもの、文字列、またはそれらからNullableのいずれかです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/et/r4/h9/etr4h9fjutj5sf6ffxqjmf04xpu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LowCardinalityの特徴は、一部の関数で保存できることです。スライドにリクエストの例を示します。最初の行で、文字列からLowCardinalityタイプの列を作成し、Sという名前を付けました。次に、彼女に名前を尋ねました-ClickHouseは、文字列からのLowCardinalityだと言っています。大丈夫。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3行目はほとんど同じですが、長さ関数を呼び出しただけです。 ClickHouseでは、length関数はUInt64データ型を返します。しかし、UInt64からLowCardinalityを取得しました。ポイントは何ですか？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6h/hs/0x/6hhs0xgy2-hnsc8tputwp8ukqqu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
携帯電話の名前を辞書に保存し、長さ関数を適用しました。これで数字だけで構成される同様の辞書ができました。これらは文字列の長さです。位置のある列は変更されていません。その結果、リクエストに応じて処理されるデータが少なくなりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
単純なキャッシュの追加など、他の最適化がある場合があります。関数の値を計算するとき、それを覚えて同じにすることができます。再計算しないでください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GROUP BYの最適化も行うことができます。これは、ディクショナリを含む列が既に部分的に集計されているためです。ハッシュ関数の値をすばやく計算し、次の行を配置するバケットを大まかに見つけることができます。また、uniqなどの一部の集約関数を特殊化することもできます。これは、辞書のみを送信し、位置はそのままにしておくことができるため、すべてがより速く機能するためです。 ClickHouseに追加した最初の2つの最適化。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kc/6u/v4/kc6uv48b2vbsmki20ckwvvbc990.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、データ型を使用して列を作成し、そこに多くの不良な異なる行を挿入するとどうなるでしょうか。私たちの記憶はいっぱいですか？いいえ、ClickHouseには2つの特別な設定があります。 1つ目は、low_cardinality_max_dictionary_sizeです。これは、ディスクに書き込むことができる辞書の最大サイズです。挿入は次のとおりです。データを挿入すると、行のストリームが届き、そこから大きな一般的な辞書が形成されます。ディクショナリが設定値よりも大きくなると、現在のディクショナリをディスクに書き込み、残りの行をインデックスの横のどこかの側に書き込みます。その結果、大きな辞書を数えることはなく、メモリの問題も発生しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目の設定は、low_cardinality_use_single_dictionary_for_partと呼ばれます。前の図で、データを挿入したときに、辞書がいっぱいで、ディスクに書き込んだと想像してください。問題が発生しました。今度はまったく別のまったく同じ辞書を作成してみませんか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オーバーフローすると、再びディスクに書き込んで、3つ目のフォームが形成されます。この設定は、デフォルトでこの機能を無効にするだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、行のセットを挿入したいが誤って「ゴミ」を挿入した場合、多くの辞書が役立ちます。最初に悪い行を挿入し、次に良い行を挿入したとします。次に、辞書は多くの小さな辞書に分割されます。それらのいくつかはごみと一緒になりますが、後者は良いラインになります。そして、たとえば最後のペレットだけを読んだ場合、すべてもすぐに機能します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jc/jx/jb/jcjxjbo7vmgmexmzxryscvj0lhu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LowCardinalityの利点について説明する前に、ClickHouseがデータを圧縮するため、ディスク上でデータ削減を実現することはまず不可能です（ただし、これは発生する可能性があります）。デフォルトのオプションがあります-LZ4。 ZSTDを使用して圧縮を行うこともできます。しかし、どちらのアルゴリズムもすでに辞書圧縮を実装しているため、外部のClickHouse辞書はあまり役に立ちません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
根拠がないようにするために、メトリックからいくつかのデータを取得しました-文字列、低カーディナリティ（文字列）、列挙型-さまざまなデータ型で保存しました。</font><font style="vertical-align: inherit;">10億行が書き込まれる3つの列が判明しました。</font><font style="vertical-align: inherit;">最初の列、CodePageには合計62の値があります。</font><font style="vertical-align: inherit;">そして、あなたはLowCardinality（String）で、彼らがそれらをより良く絞ったことを見ることができます。</font><font style="vertical-align: inherit;">文字列は少し悪いですが、これはおそらく文字列が短く、長さを保存していて、それらが多くのスペースを占有し、うまく圧縮されないためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PhoneModelを使用すると、4万8千以上あり、StringとLowCardinality（String）の違いはほとんどありません。</font><font style="vertical-align: inherit;">URLについても、2 GBしか節約できませんでした。これに依存しないでください。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作業速度の推定</font></font></h3> <br>
<img src="https://habrastorage.org/webt/3q/v7/ar/3qv7aronmenayqfhdjait6xo3tw.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スライドからのリンク</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
作業速度を評価してみましょう。これを評価するために、ニューヨークのタクシーのデータを使用しました。それは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能です</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubの上で。 10億回強の旅行があります。場所、旅行の開始時刻と終了時刻、支払い方法、乗客数、さらにはタクシーの種類（緑、黄色、Uber）が表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2o/9n/qb/2o9nqbsb7dodtnoimgnnl66lhlg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は最初のリクエストを非常に簡単にしました-私はタクシーが最も頻繁に注文される場所を尋ねました。これを行うには、注文した場所から場所を取得し、それにGROUP BYを作成して、count関数を計算する必要があります。ここでClickHouseは何かを提供します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/te/uy/kz/teuykz6_ucr7tuklbfsnobntncc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リクエストの処理速度を測定するために、同じデータを使用して3つのテーブルを作成しましたが、開始位置に3つの異なるデータ型（String、LowCardinality、Enum）を使用しました。 LowCardinalityとEnumは、Stringよりも5倍高速です。 Enumは数値を処理するため、より高速です。 LowCardinality-GROUP BY最適化が実装されているため。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pl/mx/qr/plmxqrgggpwl4xp2quqggej847k.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リクエストを複雑にしてみましょう-ニューヨークで最も人気のある公園がどこにあるか尋ねてください。繰り返しになりますが、タクシーが最も頻繁に注文される場所でこれを測定しますが、同時に、「公園」という単語がある場所のみを除外します。 like関数も追加します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0u/iq/bz/0uiqbzwkh280_wuzn8bccqg2lhi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは時間を見ます-Enumが突然減速し始めたのがわかります。また、標準のStringデータ型よりもさらに遅くなります。これは、like関数がEnum用に最適化されていないためです。行をEnumから通常の行に変換する必要があります-さらに作業を行います。 LowCardinality（文字列）もデフォルトでは最適化されていませんが、辞書で動作するように、クエリは文字列より高速です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enumには、よりグローバルな問題があります。それを最適化したい場合は、コードのあらゆる場所で行う必要があります。新しい関数を書いたとしましょう-あなたは間違いなくEnumの最適化を考え出さなければなりません。また、LowCardinalityでは、すべてがデフォルトで最適化されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_j/oc/eq/_joceq5ioy66p6gjatm1l5f2rqy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
より人工的な最後のリクエストを見てみましょう。</font><font style="vertical-align: inherit;">場所からハッシュ関数を計算するだけです。</font><font style="vertical-align: inherit;">ハッシュ関数はかなり遅いリクエストであり、時間がかかるため、すべてが3倍遅くなります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dn/06/x9/dn06x9ujvdxgdpmjcus8qzlccbg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フィルタリングはありませんが、LowCardinalityはさらに高速です。</font><font style="vertical-align: inherit;">これは、関数がディクショナリでのみ機能するためです。</font><font style="vertical-align: inherit;">ハッシュ計算関数には1つの引数があります。処理できるデータが少なく、LowCardinalityを返すこともできます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/63/yt/qz/63ytqzwuufiatce0y8wdy4whn5s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのグローバルな計画は、いかなる場合でもStringの速度以上の速度を達成し、加速を節約することです。</font><font style="vertical-align: inherit;">そして、おそらくいつかStringをLowCardinalityに置き換えます。ClickHouseを更新すると、すべてが少し速く機能します。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja492850/index.html">誰もがリモートワークに切り替えたいとは限らない</a></li>
<li><a href="../ja492856/index.html">Covid19、あなたの社会とあなたはデータサイエンスの観点からです。Jeremy HowardとRachel Thomasによる翻訳記事（fast.ai）</a></li>
<li><a href="../ja492862/index.html">開発者向けの15のOracle APEXパフォーマンスチューニングのヒント</a></li>
<li><a href="../ja492864/index.html">船をハックできますか？</a></li>
<li><a href="../ja492866/index.html">本「言葉のない機械学習」</a></li>
<li><a href="../ja492872/index.html">リモートアクセスを整理してハッカーの被害を受けない方法</a></li>
<li><a href="../ja492874/index.html">モバイル向けのレンダリングの最適化</a></li>
<li><a href="../ja492878/index.html">オタクのスリッパ：一時的なオフィス閉鎖でポジティブを探す</a></li>
<li><a href="../ja492880/index.html">私たちはスマートホームを何を建てるべきですか？</a></li>
<li><a href="../ja492884/index.html">YouTubeブロードキャストからのメッセージの受信+ PHPでのGoogle認証</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>