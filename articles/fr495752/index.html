<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎬 👎🏿 📮 Quand la pandémie va-t-elle décliner? Évaluation en Python avec Pandas 🈹 👨🏽‍🚀 📩</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour à tous. 
 
 J'ai vu plusieurs tableaux de bord sur COVID-19, mais je n'ai pas encore trouvé l'essentiel - la prévision du moment de la récessi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Quand la pandémie va-t-elle décliner? Évaluation en Python avec Pandas</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495752/"><img src="https://habrastorage.org/webt/m3/fz/ve/m3fzvefgb0glikzia-3tq3b_vju.png" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bonjour à tous. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai vu plusieurs tableaux de bord sur COVID-19, mais je n'ai pas encore trouvé l'essentiel - la prévision du moment de la récession de l'épidémie. </font><font style="vertical-align: inherit;">Par conséquent, j'ai écrit un petit script Python. </font><font style="vertical-align: inherit;">Il prend les données des tableaux de l'OMS sur Github, les présente par pays et trace des lignes de tendance. </font><font style="vertical-align: inherit;">Et il fait des prédictions en fonction de celles-ci - quand dans chaque pays du TOP 20 par le nombre de cas de COVID-19, une baisse des infections peut être attendue. </font><font style="vertical-align: inherit;">J'avoue, je ne suis pas un expert dans le domaine de l'épidémiologie. </font><font style="vertical-align: inherit;">Les calculs ci-dessous sont basés sur des données accessibles au public et sur le bon sens. </font><font style="vertical-align: inherit;">Tous les détails sont sous coupe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mise à jour du 04/10/2020 - le tableau principal et les graphiques ont été mis à jour. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mise à jour 16/04/2020 - Utilisateur</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h3cksl</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a fait une mise à jour des graphiques et les a affichés sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">son site Web</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mise à jour du 29/04/2020 - Il est maintenant devenu évident que les courbes du nombre quotidien d'infections sont très différentes selon les pays. </font><font style="vertical-align: inherit;">Et cela semble dépendre fortement de l'étendue de l'infection. </font><font style="vertical-align: inherit;">Une courbe en forme de cloche idéale sur le modèle de la Corée du Sud est probablement une exception à la règle. </font><font style="vertical-align: inherit;">Une forme plus courante consiste en une forte augmentation jusqu'à un pic et une diminution ultérieure qui est plus étendue au fil du temps. </font><font style="vertical-align: inherit;">Par conséquent, en réalité, la baisse de l'incidence durera plus longtemps que celle prévue par ce modèle début avril.</font></font><br>
<a name="habracut"></a><br>
<blockquote><img src="https://habrastorage.org/webt/fi/0x/4z/fi0x4z2nhcc3-3bdzugakb4csji.png" align="left"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UFO Care Minute</font></font></h3><br>
     COVID-19 —     ,   SARS-CoV-2 (2019-nCoV).        —    ,      /,   .<br>
<br>
<h4>        </h4><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"> </b>
                        <div class="spoiler_text"><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">C   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">C </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">  ()</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"> </a></li>
<li>       </li>
</ul><br>
     ,      .</div>
                    </div><br>
 ,  ,       .<br>
<br>
  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> | <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a></blockquote><br>
<h1>  </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au début, afin d'évaluer le moment de l'épidémie, j'ai utilisé des tableaux de bord accessibles au public. L'un des premiers était le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site Web</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> du Center for Systems Science and Engineering de l'Université Johns Hopkins. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3b/wp/qo/3bwpqo8nkyxvnxchi1u9yodfdyy.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est assez joli avec sa simplicité inquiétante. Jusqu'à récemment, il ne permettait pas de construire la dynamique de l'augmentation des infections par jours, mais il a été corrigé. Et c'est curieux car cela vous permet de voir la propagation d'une pandémie sur une carte du monde. Compte tenu de la gamme noire et rouge du tableau de bord, il n'est pas recommandé de le regarder pendant longtemps. Je pense que cela peut être lourd de l'apparition de crises d'anxiété, se transformant en diverses formes de panique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de garder le doigt sur le pouls, j'ai aimé la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">page sur COVID-19 plus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur la ressource Worldometer. </font><font style="vertical-align: inherit;">Il contient des informations sur les pays sous forme de tableau: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/48/w5/rf/48w5rfy3tmloezx_cpg-yver0ea.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous cliquez sur le pays souhaité, nous tombons dans des informations plus détaillées à son sujet, y compris les courbes quotidiennes et cumulatives pour les infectés / récupérés / morts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe d'autres tableaux de bord. </font><font style="vertical-align: inherit;">Par exemple, pour des informations détaillées sur notre pays, vous pouvez simplement taper «COVID-19» dans la ligne de recherche Yandex et vous trouverez ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uy/pi/zj/uypizjcftuxfhofadcrw5decnsy.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, peut-être que cela s'arrêtera. </font><font style="vertical-align: inherit;">Ni sur ces trois tableaux de bord, ni sur plusieurs autres, j'ai pu trouver des informations avec des prévisions quand la pandémie va enfin décliner.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un peu sur les graphiques</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actuellement, l'infection ne fait que gagner du terrain et les plus intéressants sont les graphiques avec une augmentation quotidienne du nombre de cas. Voici un exemple pour les États-Unis: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o-/mp/w6/o-mpw6ch2rb7ymt49ofpx7cpdum.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
on constate que le nombre de personnes infectées augmente chaque jour. Bien entendu, sur de tels graphiques, nous ne parlons pas de tous ceux qui ont été infectés (il n'est pas possible de déterminer leur nombre exact), mais uniquement des cas confirmés. Mais pour être bref, nous appellerons ci-après ces personnes infectées confirmées simplement «infectées». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À quoi ressemble une </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pandémie apprivoisée</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? Un exemple ici est un graphique de la Corée du Sud:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/06/wd/r4/06wdr4j_z8ypumhggh-awymerw0.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On peut voir que l'accroissement quotidien des infectés a d'abord augmenté, puis atteint un pic, baissé et fixé à un certain niveau constant (environ 100 personnes par jour). </font><font style="vertical-align: inherit;">Ce n'est pas une victoire complète sur le virus, mais un succès significatif. </font><font style="vertical-align: inherit;">Cela a permis au pays de démarrer l'économie (même si, disent-ils, les Coréens ont réussi à ne pas la ralentir) et de retrouver une vie moins normale. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On peut supposer que la situation dans d'autres pays évoluera de la même manière. </font><font style="vertical-align: inherit;">Autrement dit, la croissance au premier stade sera remplacée par la stabilisation, puis le nombre de personnes malades diminuera chaque jour. </font><font style="vertical-align: inherit;">Le résultat est une courbe en forme de cloche. </font><font style="vertical-align: inherit;">Cherchons les sommets des courbes des pays les plus «infectés».</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Télécharger et traiter les données</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les données de distribution des coronavirus sont mises à jour régulièrement </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Les tables source contiennent des courbes cumulatives, elles peuvent être récupérées et prétraitées avec un petit script.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme ça</font></font></b>
                        <div class="spoiler_text"><pre><code class="python">import pandas as pd<font></font>
import ipywidgets as widgets<font></font>
from ipywidgets import interact<font></font>
import matplotlib.pyplot as plt<font></font>
<font></font>
pd.set_option('display.max_columns', None)<font></font>
<font></font>
#  <font></font>
url = 'https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/'<font></font>
confirmed = pd.read_csv(url + 'time_series_covid19_confirmed_global.csv', sep = ',')<font></font>
deaths = pd.read_csv(url + 'time_series_covid19_deaths_global.csv', sep = ',')<font></font>
recovered = pd.read_csv(url + 'time_series_covid19_recovered_global.csv', sep = ',')<font></font>
<font></font>
#   -   'dd.mm.yy'<font></font>
new_cols = list(confirmed.columns[:4]) + list(confirmed.columns[4:].map(lambda x: '{0:02d}.{1:02d}.{2:d}'.format(int(x.split(sep='/')[1]), int(x.split(sep='/')[0]), int(x.split(sep='/')[2]))))<font></font>
confirmed.columns = new_cols<font></font>
recovered.columns = new_cols<font></font>
deaths.columns = new_cols<font></font>
<font></font>
#     <font></font>
confirmed_daily = confirmed.copy()<font></font>
confirmed_daily.iloc[:,4:] = confirmed_daily.iloc[:,4:].diff(axis=1)<font></font>
deaths_daily = deaths.copy()<font></font>
deaths_daily.iloc[:,4:] = deaths_daily.iloc[:,4:].diff(axis=1)<font></font>
recovered_daily = recovered.copy()<font></font>
recovered_daily.iloc[:,4:] = recovered_daily.iloc[:,4:].diff(axis=1)<font></font>
<font></font>
#       <font></font>
smooth_conf_daily = confirmed_daily.copy()<font></font>
smooth_conf_daily.iloc[:,4:] = smooth_conf_daily.iloc[:,4:].rolling(window=8, min_periods=2, center=True, axis=1).mean()<font></font>
smooth_conf_daily.iloc[:,4:] = smooth_conf_daily.iloc[:,4:].round(1)<font></font>
<font></font>
#   ,    <font></font>
last_date = confirmed.columns[-1]<font></font>
<font></font>
#  20       <font></font>
confirmed_top = confirmed.iloc[:, [1, -1]].groupby('Country/Region').sum().sort_values(last_date, ascending = False).head(20)<font></font>
countries = list(confirmed_top.index)<font></font>
<font></font>
# ,      20 <font></font>
conf_tot_ratio = confirmed_top.sum() / confirmed.iloc[:, 4:].sum()[-1]<font></font>
<font></font>
#    <font></font>
# countries.append('Russia')<font></font>
<font></font>
#       ,   <font></font>
l1 = 'Infected at ' + last_date + ' - ' + str(confirmed.iloc[:, 4:].sum()[-1])<font></font>
l2 = 'Recovered at ' + last_date + ' - ' + str(recovered.iloc[:, 4:].sum()[-1])<font></font>
l3 = 'Dead at ' + last_date + ' - ' + str(deaths.iloc[:, 4:].sum()[-1])<font></font>
<font></font>
#      <font></font>
fig, ax = plt.subplots(figsize = [16,6])<font></font>
ax.plot(confirmed.iloc[:, 4:].sum(), '-', alpha = 0.6, color = 'orange', label = l1)<font></font>
ax.plot(recovered.iloc[:, 4:].sum(), '-', alpha = 0.6, color = 'green', label = l2)<font></font>
ax.plot(deaths.iloc[:, 4:].sum(), '-', alpha = 0.6, color = 'red', label = l3)<font></font>
<font></font>
ax.legend(loc = 'upper left', prop=dict(size=12))<font></font>
ax.xaxis.grid(which='minor')<font></font>
ax.yaxis.grid()<font></font>
ax.tick_params(axis = 'x', labelrotation = 90)<font></font>
plt.title('COVID-19 in all countries. Top 20 countries consists {:.2%} of total confirmed infected cases.'.format(conf_tot_ratio[0]))<font></font>
plt.show()</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, vous pouvez obtenir les mêmes courbes que sur les tableaux de bord: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bw/i0/fg/bwi0fgdbszgcpqxywa4be9qr3lk.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
il y a un petit plus dans le script qui n'est pas nécessaire pour afficher le graphique, mais qui sera nécessaire dans les étapes suivantes. </font><font style="vertical-align: inherit;">Par exemple, j'ai immédiatement formé une liste de 20 pays avec le nombre maximum de personnes infectées aujourd'hui. </font><font style="vertical-align: inherit;">Soit dit en passant - c'est 90% de tous les infectés. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passez. </font><font style="vertical-align: inherit;">Les chiffres de l'augmentation quotidienne des malades sont assez «bruyants». </font><font style="vertical-align: inherit;">Par conséquent, il serait bon de lisser le graphique. </font><font style="vertical-align: inherit;">Ajoutez une ligne de tendance aux graphiques quotidiens (j'ai utilisé une moyenne mobile centrée). </font><font style="vertical-align: inherit;">Cela se révèle en quelque sorte comme ceci:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kk/gj/33/kkgj33clru3yphaaet6jt7vifde.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La tendance est représentée en noir. Il s'agit d'une courbe assez lisse avec un seul pic. Reste à trouver le début de l'épidémie de la maladie (flèche rouge) et le pic d'incidence (vert). Avec un pic, tout est simple - c'est le maximum sur les données lissées. De plus, si le maximum tombe à l'extrême droite du graphique, le pic n'a pas encore été dépassé. Si le maximum reste à gauche - très probablement, le pic est resté dans le passé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le début de la rafale peut être trouvé de différentes manières. Supposons par souci de simplicité que c'est le moment où le nombre de personnes infectées par jour commence à dépasser 1% du nombre maximum de personnes infectées par jour. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le graphique est assez symétrique. C'est-à-dire que la durée entre le début de l'épidémie et un pic est approximativement égale à la durée du pic au déclin.</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ainsi, si nous trouvons le nombre de jours du début au pic, alors environ le même nombre de jours devra attendre la fin de l'épidémie</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons mettre toute cette logique dans le script suivant.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans un tel</font></font></b>
                        <div class="spoiler_text"><pre><code class="python">from datetime import timedelta, datetime<font></font>
<font></font>
#     20  + .<font></font>
confirmed_top = confirmed_top.rename(columns={str(last_date): 'total_confirmed'})<font></font>
dates = [i for i in confirmed.columns[4:]]<font></font>
<font></font>
for country in countries:<font></font>
    <font></font>
    #       ,      ,  <font></font>
    confirmed_top.loc[country, 'total_confirmed'] = confirmed.loc[confirmed['Country/Region'] == country,:].sum()[4:][-1]<font></font>
    confirmed_top.loc[country, 'last_day_conf'] = confirmed.loc[confirmed['Country/Region'] == country,:].sum()[-1] - confirmed.loc[confirmed['Country/Region'] == country,:].sum()[-2]<font></font>
    confirmed_top.loc[country, 'mortality, %'] = round(deaths.loc[deaths['Country/Region'] == country,:].sum()[4:][-1]/confirmed.loc[confirmed['Country/Region'] == country,:].sum()[4:][-1]*100, 1)<font></font>
    <font></font>
    #       .<font></font>
    smoothed_conf_max = round(smooth_conf_daily[smooth_conf_daily['Country/Region'] == country].iloc[:,4:].sum().max(), 2)<font></font>
    peak_date = smooth_conf_daily[smooth_conf_daily['Country/Region'] == country].iloc[:,4:].sum().idxmax()<font></font>
    peak_day = dates.index(peak_date)<font></font>
    <font></font>
    #      ,      1%    <font></font>
    start_day = (smooth_conf_daily[smooth_conf_daily['Country/Region'] == country].iloc[:,4:].sum() &lt; smoothed_conf_max/100).sum()<font></font>
    start_date = dates[start_day-1]<font></font>
    <font></font>
    #     <font></font>
    confirmed_top.loc[country, 'trend_max'] = smoothed_conf_max<font></font>
    confirmed_top.loc[country, 'start_date'] = start_date<font></font>
    confirmed_top.loc[country, 'peak_date'] = peak_date<font></font>
    confirmed_top.loc[country, 'peak_passed'] = round(smooth_conf_daily.loc[smooth_conf_daily['Country/Region'] == country, last_date].sum(), 2) != smoothed_conf_max<font></font>
    confirmed_top.loc[country, 'days_to_peak'] = peak_day - start_day<font></font>
    <font></font>
    #   ,    <font></font>
    if confirmed_top.loc[country, 'peak_passed']:<font></font>
         confirmed_top.loc[country, 'end_date'] = (datetime.strptime(confirmed_top.loc[country, 'peak_date']+'20', "%d.%m.%Y").date() + timedelta(confirmed_top.loc[country, 'days_to_peak'])).strftime('%d.%m.%Y')<font></font>
<font></font>
#    <font></font>
confirmed_top.loc['China', 'start_date'] = '22.01.20'<font></font>
confirmed_top</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À la sortie, nous obtenons un tel tableau pour les 20 premiers pays. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mise à jour du 10.04.2020: au moment de la rédaction du présent rapport, la Russie n'était pas dans le top vingt, mais le 7 avril, elle figurait à la 20e place. Le 10 avril est parti le 18. Le tableau comprend également les dates des mesures de quarantaine dans différents pays. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/py/s7/za/pys7zajylfkbzgavdz84et5pt2q.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les colonnes suivantes sont dans le tableau: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
total_confirmed - le nombre total de personnes infectées dans le pays; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
last_day_conf - le nombre de personnes infectées le dernier jour; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mortalité,% - taux de mortalité (nombre de morts / nombre de personnes infectées); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
trend_max - tendance maximale; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
date_début - date de début de l'épidémie dans le pays; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
peak_date - date de pointe; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
peak_passed - indicateur de pic (si True - pic réussi); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
days_to_peak - combien de jours se sont écoulés depuis le début jusqu'au pic;</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
end_date - date de fin de l'épidémie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mise à jour 10.04.2020: le pic d'incidence a été atteint dans 14 pays sur 20. De plus, en moyenne, du début des infections de masse au pic, il faut en moyenne 25 jours: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1e/dm/ok/1edmoktmg1_mhsc2qhscociq0o8.png" alt="image"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selon la logique ci-dessus, d'ici fin avril, la situation devra se normaliser dans presque tous les pays considérés</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Tel qu'il sera, seul le temps nous le dira. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mise à jour 10.04.2020: Vous pouvez voir que les graphiques des pays européens, contrairement au graphique de la Corée du Sud, connaissent une récession plus douce après le pic. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe un autre script qui vous permet d'afficher des graphiques pour chacun des pays.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cette</font></font></b>
                        <div class="spoiler_text"><pre><code class="python">@interact<font></font>
def plot_by_country(country = countries):<font></font>
    <font></font>
    #   <font></font>
    l1 = 'Infected at ' + last_date + ' - ' + str(confirmed.loc[confirmed['Country/Region'] == country,:].sum()[-1])<font></font>
    l2 = 'Recovered at ' + last_date + ' - ' + str(recovered.loc[recovered['Country/Region'] == country,:].sum()[-1])<font></font>
    l3 = 'Dead at ' + last_date + ' - ' + str(deaths.loc[deaths['Country/Region'] == country,:].sum()[-1])<font></font>
    <font></font>
    #        <font></font>
    df = pd.DataFrame(confirmed_daily.loc[confirmed_daily['Country/Region'] == country,:].sum()[4:])<font></font>
    df.columns = ['confirmed_daily']<font></font>
    df['recovered_daily'] = recovered_daily.loc[recovered_daily['Country/Region'] == country,:].sum()[4:]<font></font>
    df['deaths_daily'] = deaths_daily.loc[deaths_daily['Country/Region'] == country,:].sum()[4:]<font></font>
    df['deaths_daily'] = deaths_daily.loc[deaths_daily['Country/Region'] == country,:].sum()[4:]<font></font>
    df['smooth_conf_daily'] = smooth_conf_daily.loc[smooth_conf_daily['Country/Region'] == country,:].sum()[4:]<font></font>
    <font></font>
    #  <font></font>
    fig, ax = plt.subplots(figsize = [16,6], nrows = 1)<font></font>
    plt.title('COVID-19 dinamics daily in ' + country)<font></font>
    <font></font>
    #      ,   <font></font>
    ax.bar(df.index, df.confirmed_daily, alpha = 0.5, color = 'orange', label = l1)<font></font>
    ax.bar(df.index, df.recovered_daily, alpha = 0.6, color = 'green', label = l2)<font></font>
    ax.bar(df.index, df.deaths_daily, alpha = 0.7, color = 'red', label = l3)<font></font>
    ax.plot(df.index, df.smooth_conf_daily, alpha = 0.7, color = 'black')<font></font>
    <font></font>
    #     .<font></font>
    start_date = confirmed_top[confirmed_top.index == country].start_date.iloc[0]<font></font>
    start_point = smooth_conf_daily.loc[smooth_conf_daily['Country/Region'] == country, start_date].sum()<font></font>
    ax.plot_date(start_date, start_point, 'o', alpha = 0.7, color = 'black')<font></font>
    shift = confirmed_top.loc[confirmed_top.index == country, 'trend_max'].iloc[0]/40<font></font>
    plt.text(start_date, start_point + shift, 'Start at ' + start_date, ha ='right', fontsize = 20)<font></font>
    <font></font>
    peak_date = confirmed_top[confirmed_top.index == country].peak_date.iloc[0]<font></font>
    peak_point = smooth_conf_daily.loc[smooth_conf_daily['Country/Region'] == country, peak_date].sum()<font></font>
    ax.plot_date(peak_date, peak_point, 'o', alpha = 0.7, color = 'black')<font></font>
    plt.text(peak_date, peak_point + shift, 'Peak at ' + peak_date, ha ='right', fontsize = 20)<font></font>
    <font></font>
    ax.xaxis.grid(False)<font></font>
    ax.yaxis.grid(False)<font></font>
    ax.tick_params(axis = 'x', labelrotation = 90)<font></font>
    ax.legend(loc = 'upper left', prop=dict(size=12))<font></font>
    <font></font>
    #         .<font></font>
    max_pos = max(df['confirmed_daily'].max(), df['recovered_daily'].max())<font></font>
    if confirmed_top[confirmed_top.index == country].peak_passed.iloc[0]:<font></font>
        estimation = 'peak is passed - end of infection ' + confirmed_top[confirmed_top.index == country].end_date.iloc[0]<font></font>
    else:<font></font>
        estimation = 'peak is not passed - end of infection is not clear'<font></font>
    plt.text(df.index[len(df.index)//2], 3*max_pos//4, country, ha ='center', fontsize = 50)<font></font>
    plt.text(df.index[len(df.index)//2], 2*max_pos//3, estimation, ha ='center', fontsize = 20)<font></font>
    <font></font>
    #plt.savefig(country + '.png', bbox_inches='tight', dpi = 75)<font></font>
    plt.show()</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici la situation actuelle en Russie (mise à jour du 04/10/2020): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ax/qu/x5/axqux5c-nlco0-3z0axjcu7npzc.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, le pic n'a pas encore été franchi, il est donc difficile de faire des prévisions concernant le moment de la baisse de l'incidence. </font><font style="vertical-align: inherit;">Mais étant donné que l'épidémie dure 26 jours à l'heure actuelle, nous pouvons nous attendre à ce que pendant la semaine nous assistions à un pic et que l'incidence commence à diminuer. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je me risquerais à suggérer qu'au début du mois de mai la situation se normalise</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (j'ai toujours été optimiste, je dois dire). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci beaucoup d'avoir lu jusqu'au bout. </font><font style="vertical-align: inherit;">Soyez en bonne santé et la force sera avec nous. </font><font style="vertical-align: inherit;">Vous trouverez ci-dessous des graphiques pour le reste des vingt pays par ordre décroissant du nombre de personnes infectées. </font><font style="vertical-align: inherit;">Si vous avez besoin de données plus récentes - vous pouvez exécuter les scripts donnés dans le texte, tout sera recalculé pour la date actuelle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mise à jour 10.04.2020 - les graphiques sont mis à jour.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etats-Unis</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/il/sc/gt/ilscgts5k2vcr1se1jrfwcclyha.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espagne</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/84/k_/jm/84k_jmnkj3-bkmkdhiultruhjcs.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Italie</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/eg/nk/l4/egnkl4v7lyot-jpyzktk6gnogug.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allemagne</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/mm/zr/65/mmzr65zadf0ecueq5ju-zqzoo4k.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">France</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/j3/cr/1o/j3cr1oy1awvbiivptl0imdyful4.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chine</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/rt/og/us/rtogusfbdsp9e66zqod2fgbsf2m.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai couru</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/26/ba/uf/26baufs15jticwrerqseuaizhhq.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Royaume-Uni</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/-h/64/46/-h6446hkss6wh24idxkiarw5uxi.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dinde</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/w5/so/hk/w5sohkutmgaqnmpq0ya8h5hde5i.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suisse</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/hi/yq/2a/hiyq2a9_pkbtwsnr7-8-x6dsh9g.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Belgique</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/08/fb/pf/08fbpfwchavnnbr6v36hmal4m2e.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pays-Bas</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/aj/x6/yd/ajx6ydt2gqjyuprhvvzxui3f5ci.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Canada</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/c6/lo/up/c6louppbvtnghvf79gutf7ajqeq.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'Autriche</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/kd/hq/xd/kdhqxdtdaragxjqotg0et0zkuum.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le Portugal</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/00/tb/go/00tbgotvnbd0qmnxcze7be7kf7w.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brésil</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/pa/xp/km/paxpkm9aour3qqdqa98ouvs0imo.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Corée du Sud</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/ma/d7/ld/mad7lddh5h4oa7yjvnwjm-k4tao.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Israël</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/uw/iz/ya/uwizyarggjredvypw81e66_58-a.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suède</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/oy/4l/8r/oy4l8rsf_ljgqp_zf_4t2tlbiaa.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Norvège</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/hx/3z/77/hx3z77hiuzyzmypehwjexzw3nom.png" alt="image"><br>
</div>
                    </div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr495730/index.html">Hack The Box. Registre de passage. Docker, RCE dans CMS Bolt et Restic</a></li>
<li><a href="../fr495732/index.html"># 03 - Et un octet entier ne suffit pas ... | 2B ou pas 2B</a></li>
<li><a href="../fr495740/index.html">Comme nous avons passé une semaine sans argent, les connexions et les logiciels ont lancé un service de livraison de nourriture et n'ont presque pas foiré</a></li>
<li><a href="../fr495746/index.html">Nous formons View dans SwiftUI, en partant des conditions</a></li>
<li><a href="../fr495748/index.html">Nouveau Punto Switcher pour Linux: xswitcher</a></li>
<li><a href="../fr495754/index.html">Interphone intelligent d'ingénierie ouverte ou inversée SIM-SIM</a></li>
<li><a href="../fr495756/index.html">Principes clés pour l'utilisation d'ECS dans le développement de jeux</a></li>
<li><a href="../fr495758/index.html">Incendies et stratégie</a></li>
<li><a href="../fr495760/index.html">Plus lumineux que les étoiles: changement de marque HGST et reconstitution de la gamme Ultrastar</a></li>
<li><a href="../fr495762/index.html">Prosto: retirez le passe-partout lorsque vous travaillez avec RecyclerView</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>