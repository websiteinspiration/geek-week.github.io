<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèæ‚Äçü§ù‚ÄçüßëüèΩ üíÖüèæ üï∫ Controle un dispositivo externo en el autom√≥vil usando los botones del volante üèâ üôèüèø üßùüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos. 
 
 A veces se hace necesario controlar alg√∫n dispositivo externo en el autom√≥vil, por ejemplo, una grabadora de video o un cabrestante....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Controle un dispositivo externo en el autom√≥vil usando los botones del volante</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505026/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hola a todos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A veces se hace necesario controlar alg√∫n dispositivo externo en el autom√≥vil, por ejemplo, una grabadora de video o un cabrestante. En este caso, generalmente, se instalan botones adicionales. Pero a veces quiero hacer una instalaci√≥n oculta, para que el interior del autom√≥vil permanezca sin cambios. Haremos esto hoy, como un autom√≥vil habr√° un VW Polo Sedan con una unidad de monitoreo Vega MTX instalada, y como carga habr√° un bot√≥n de emergencia. Asegur√©monos de que mientras se mantiene presionado el bot√≥n "ok" en el volante, la "luz de emergencia" parpadea 3 veces. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debajo del corte, una gran cantidad de im√°genes y videos.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez me pidieron que hiciera un bot√≥n de agradecimiento en un Renault Kaptur 2012. Al hacer clic en este bot√≥n, el autom√≥vil debe parpadear "pandilla de emergencia" 3 veces. Este auto ten√≠a un joystick anal√≥gico en la columna de direcci√≥n. Conect√© uno de los botones del joystick de la columna de direcci√≥n a un rel√© de tiempo que dio un impulso de 3 segundos al bot√≥n de pandilla de emergencia. M√°s tarde, el propietario habl√≥ muy bien sobre la nueva funci√≥n de su autom√≥vil y decid√≠ intentar repetirlo en mi Polo Sedan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A diferencia de Renault Kaptur, no tengo botones anal√≥gicos, pero la se√±al de todos los botones en el volante se puede encontrar en el bus CAN. Como bot√≥n, se seleccion√≥ el bot√≥n "ok" en el volante del autom√≥vil. En mi configuraci√≥n, este bot√≥n casi nunca se usa. Hasta ahora, he descubierto que con √©l puede configurar el funcionamiento del "limitador" cuando el tidy emite un pitido cuando se excede la velocidad establecida. En cualquier otro caso, hacer clic en este bot√≥n no hace nada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Era posible implementar nuestros planes con la ayuda de productos electr√≥nicos hechos en casa, pero en mi autom√≥vil ya hab√≠a una unidad telem√°tica Vega MTX, por lo que se decidi√≥ intentar implementar esta funcionalidad us√°ndola. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al presionar este bot√≥n se puede encontrar en el bus CAN, que se encuentra detr√°s de la radio. Describ√≠ en detalle la b√∫squeda de tales sensores en</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">su art√≠culo anterior sobre descifrar el bus CAN</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En nuestro caso, los datos se encontraron en 5BF. Cuando hace clic en el bot√≥n "ok" en el byte cero, la figura 40 aparece en formato decimal. Cuando no se presionan los botones, el byte cero ser√° 0. Ser√° necesario hacer un sensor en el que se muestren estos cambios. En mi caso, este es un bot√≥n en el volante. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j7/2b/wi/j72bwiuv_uhzh2kbt9crf7pb6tc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora veamos c√≥mo controlar el bot√≥n de pandilla de emergencia. Desafortunadamente, Polo Sedan no puede controlar a la pandilla de emergencia a trav√©s del bus CAN, por lo que tendr√° que manejarlo por analog√≠a. Para hacer esto, tendr√° que estirar el cable del cable blanco-azul del conector del bot√≥n de pandilla de emergencia. Si se aplica una se√±al de tierra a este cable con un pulso a corto plazo, se activa la pandilla de emergencia. Del mismo modo, se apaga.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Servir a la "tierra" se utilizar√° la salida digital Vega MTX. Aqu√≠ tenemos 4 salidas digitales, usaremos la tercera salida (cable azul). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uz/-o/ae/uz-oaegurh5p-8r1fczln8hiyrw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora debe establecer los algoritmos mediante los cuales funcionar√° el bot√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En primer lugar, no quiero que la pandilla de emergencia se encienda inmediatamente presionando el bot√≥n ok, quiero que se encienda despu√©s de mantener presionado el bot√≥n por un segundo. Hago esto para protegerme de presionar accidentalmente y guardar la funcionalidad de este bot√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En segundo lugar, debe apagar la pandilla de emergencia despu√©s de 3 flashes. 3 flashes "pandilla de emergencia" hace en 2 segundos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para ingresar todos estos algoritmos, vaya a la configuraci√≥n de Vega MTX, luego vaya a la pesta√±a "Scripts". Aqu√≠ puede establecer las condiciones bajo las cuales se realizan las acciones. Para la implementaci√≥n tuve que usar 3 escenarios.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En general, los escenarios no est√°n destinados a tales operaciones, por lo que tuve que experimentar durante mucho tiempo hasta obtener el resultado deseado. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dm/np/tb/dmnptb-c9bmonjlmutgpskje2fs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El primer escenario sirve para crear un retraso por segundo despu√©s de hacer clic en el bot√≥n "Aceptar". Funciona si en el sensor CAN el valor se convierte en 40 y la salida digital externa 1 es 0.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0n/2-/gh/0n2-gh3y6v3d9w4p8v-wpaflbdw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ explicar√© sobre las salidas digitales externas. Si la tarea requiere m√°s de 4 salidas digitales, se puede conectar un m√≥dulo externo adicional a Vega MTX, que tendr√° 15 salidas digitales y muchas m√°s otras entradas y salidas. Como no tenemos esta unidad externa, podemos usar estas salidas como variables, poniendo 0 o 1 all√≠ (encendido o apagado). Por defecto, todas las salidas est√°n desactivadas. La salida digital externa 1 ser√° una variable que indica que ha transcurrido un segundo desde que presion√≥ el bot√≥n ok. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuestro script deber√≠a leer as√≠: ahora se presiona el bot√≥n ok y se presiona durante menos de un segundo. Si estas condiciones coinciden, se realiza la acci√≥n: la salida digital externa 1 se apaga durante 1 segundo. Significa que pasa al estado "apagado", pero despu√©s de un segundo pasar√° al estado "encendido".</font></font><br>
<br>
<img src="https://habrastorage.org/webt/la/qw/v_/laqwv_wowjb0zzhvkkm9eiijnro.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora pasemos al segundo escenario. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/al/xc/gwalxcku5ectsxnsikszjeqkncu.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A diferencia del primer escenario, funcionar√° con el sensor ‚ÄúBotones en el volante‚Äù igual a 40 y con una entrada digital externa igual a 1. Es decir, se presiona el bot√≥n ‚Äúok‚Äù y la salida digital externa 1 es 1. Y la salida digital externa se convertir√° en 1 solo despu√©s de un segundo despu√©s de desencadenar el primer escenario. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora analizaremos lo que sucede despu√©s de que se desencadena el segundo escenario. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-n/vw/mp/-nvwmpbzqfua5nwiizr2llgqgyo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ se da un pulso de 1 segundo de largo a la salida digital 3, a la cual se conecta la salida del bot√≥n de pandilla de emergencia, por lo tanto lo activamos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, necesitamos restablecer 0 la salida digital externa 1. Por lo tanto, activamos la salida digital externa 1 durante 1 segundo. Es decir, 1 segundo despu√©s de que se active el script, la salida digital externa 1 se convertir√° en 0.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El √∫ltimo elemento, transferimos 2 segundos 15 a la posici√≥n 0. Despu√©s de 2 segundos despu√©s de que se active el script, la salida digital externa 15 ser√° 1. La salida digital externa 15 se usa como una variable, que la luz de emergencia se encendi√≥ usando el bot√≥n en el volante. 2 segundos es el tiempo durante el cual el autom√≥vil parpadea "pandilla de emergencia" 3 veces. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora el √∫ltimo escenario, que deber√≠a enviar un impulso, para apagar la pandilla de emergencia. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vy/g1/or/vyg1orbca6pqu-u3ufjcjr20ism.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este escenario funcionar√° cuando la salida digital externa 15 se convierta en 1, es decir, 2 segundos despu√©s de que se active el segundo escenario. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0m/ke/8n/0mke8ngoswhi9jn9ject-paeftw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de que se activa el tercer script, enviamos un impulso para apagar la pandilla de emergencia y restablecer la salida digital externa 15 a cero (apagado).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto finaliza el trabajo con scripts, guarda el resultado en Vega MTX y verifica el funcionamiento del dispositivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, puede controlar cualquier dispositivo utilizando el bus CAN del autom√≥vil. </font><font style="vertical-align: inherit;">La gesti√≥n no se limita a los botones del volante. </font><font style="vertical-align: inherit;">Por ejemplo, puede configurar el dispositivo para que se encienda por la velocidad del veh√≠culo, abriendo una ventana o puerta, arrancando el motor, por la velocidad del motor, por la temperatura del motor, etc. </font><font style="vertical-align: inherit;">Puede bloquear las puertas a una velocidad determinada (si el fabricante no ha brindado esa oportunidad), encender la c√°mara cuando abra la ventana y muchas otras opciones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo lo anterior est√° en formato de video, y tambi√©n hay un ejemplo de activaci√≥n de luces de emergencia cuando se invierte la marcha.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/70KNs2freow" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es504988/index.html">Entrevista con el analista - Denis Sobolev, gerente de producto, jefe de an√°lisis B2B Skyeng</a></li>
<li><a href="../es504996/index.html">BazarBackdoor: nuevo punto de entrada a los sistemas empresariales</a></li>
<li><a href="../es505016/index.html">Cursos gratuitos de educaci√≥n: administraci√≥n</a></li>
<li><a href="../es505018/index.html">C√≥mo funciona el selenio: episodios 1 - 2</a></li>
<li><a href="../es505024/index.html">YouTrack ahora con una base de conocimiento</a></li>
<li><a href="../es505034/index.html">Prueba de envejecimiento LED</a></li>
<li><a href="../es505036/index.html">Tutorial de Avalonia: Implementaci√≥n de MVVM paso a paso con ejemplos</a></li>
<li><a href="../es505046/index.html">¬øQu√© tienen en com√∫n el contenido de primera clase y el pub rock? La historia del "fracaso" de un proyecto que condujo al √©xito</a></li>
<li><a href="../es505052/index.html">Pruebas r√°pidas de Motionia.js y Consoleimg.js</a></li>
<li><a href="../es505060/index.html">Inserte una matriz numpy en la base de datos MySQL a trav√©s de Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>