<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤šğŸ¼ ğŸ‘¨â€ğŸŒ¾ ğŸ“² Cã§ã®å®‰å…¨ã§ãªã„ä¸€èˆ¬çš„ãªæ•°å­¦ï¼ƒ ğŸ‡ğŸ» ğŸ–ï¸ ğŸ’†ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ®‹å¿µãªãŒã‚‰ã€ç§ãŒå§‹ã‚ãŸé†œã•ã®åå‰ã‚’ãƒ­ã‚·ã‚¢èªã«é©åˆ‡ã«ç¿»è¨³ã™ã‚‹ã“ã¨ã¯å®¹æ˜“ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚å…¬å¼ã®MSDNãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒã€Œã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã€ã‚’ã€Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€ã¨å‘¼ã‚“ã§ã„ã‚‹ã“ã¨ã‚’çŸ¥ã£ã¦é©šãã¾ã—ãŸï¼ˆC++ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ä¼¼ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ï¼‰ã€‚ç§ã®ç›®ã®ç¬¬4ç‰ˆã‚­ãƒ£ãƒƒãƒ"CLRçµŒç”±ã®C#ã€Œ ã‚¸ã‚§ãƒ•ãƒªãƒ¼ãƒ»ãƒªãƒ’ã‚¿ãƒ¼ã«ã‚ˆã£...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Cã§ã®å®‰å…¨ã§ãªã„ä¸€èˆ¬çš„ãªæ•°å­¦ï¼ƒ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480416/"><p><img src="https://habrastorage.org/webt/mj/zg/yw/mjzgywquj0lud4_vs9bjh8xdacu.png"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ®‹å¿µãªãŒã‚‰ã€ç§ãŒå§‹ã‚ãŸé†œã•ã®åå‰ã‚’ãƒ­ã‚·ã‚¢èªã«é©åˆ‡ã«ç¿»è¨³ã™ã‚‹ã“ã¨ã¯å®¹æ˜“ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚å…¬å¼ã®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MSDN</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</font><font style="vertical-align: inherit;">ãŒã€Œã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã€ã‚’ã€Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€ã¨å‘¼ã‚“ã§</font><font style="vertical-align: inherit;">ã„ã‚‹ã“ã¨ã‚’çŸ¥ã£ã¦é©šãã¾ã—ãŸ</font><font style="vertical-align: inherit;">ï¼ˆ</font></font><code>C++</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«</font><font style="vertical-align: inherit;">ä¼¼ã¦ã„ã‚‹</font><font style="vertical-align: inherit;">ã¨æ€ã„ã¾ã™ï¼‰ã€‚ç§ã®ç›®ã®ç¬¬4ç‰ˆã‚­ãƒ£ãƒƒãƒ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><code>"CLR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµŒç”±ã®</font></font><code>C#</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€Œ</font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¸ã‚§ãƒ•ãƒªãƒ¼ãƒ»ãƒªãƒ’ã‚¿ãƒ¼ã«ã‚ˆã£ã¦</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡ºç‰ˆç¿»è¨³ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ãƒ”ãƒ¼ã‚¿ãƒ¼ã€Œã‚’</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ˆã‚Šè‰¯ã„æ¦‚å¿µã®æœ¬è³ªã‚’åæ˜ ã—ã¦ä¸€èˆ¬åŒ–ã€ã®ã‚¸ã‚§ãƒãƒªãƒƒã‚¯åŒ»è–¬å“ãŒå‘¼ã°ã‚Œã€ã€ã€‚ã“ã®è¨˜äº‹ã§ã¯ã€æˆ‘ã€…ã¯ã«ç„¦ç‚¹ã‚’å½“ã¦ã¾ã™</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å±é™ºãªä¸€èˆ¬æ•°å­¦çš„ãªæ“ä½œ</font></font><code>C#</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ãã‚Œã‚’è€ƒãˆã‚‹ã¨</font></font><code>C#</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ„å›³ã•ã‚Œã¦ã„ã¾ã›ã‚“é«˜æ€§èƒ½ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®å ´åˆï¼ˆã‚‚ã¡ã‚ã‚“ã€ã“ã‚Œã¯å¯èƒ½ã§ã™ãŒã€åŒã˜ã‚‚ã®ã¨ç«¶åˆã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“</font></font><code>C/C++</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€ã®æ•°å­¦æ¼”ç®—</font></font><code>BCL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ã¾ã‚Šæ³¨æ„ãŒæ‰•ã‚ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">è»ã«ã‚ˆã‚‹åŸºæœ¬çš„ãªç®—è¡“å‹ã§ã®ä½œæ¥­ã‚’ç°¡ç´ åŒ–ã™ã‚‹ãŸã‚ã®è©¦ã¿ã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã†</font></font><code>C#</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>CLR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></p><a name="habracut"></a><br>
<h2 id="postanovka-zadachi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å•é¡Œã®å®šå¼åŒ–</font></font></h2><br>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…è²¬äº‹é …</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼šè¨˜äº‹ã¯ã€ç§ã¯ç´ æ™´ã‚‰ã—ã„ãƒªã‚½ãƒ¼ã‚¹ã¸ã®ãƒªãƒ³ã‚¯ã‚’èª¬æ˜ã—ã¾ã™ãã®ã†ã¡ã®ã„ãã¤ã‹ã¯ã€å¤šãã®ã‚³ãƒ¼ãƒ‰ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã€å«ã¾ã‚Œã¦ã„ã¾ã™</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SharpLab</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Giã®</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«ã‚ˆã‚‹ï¼‰</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¢ãƒ³ãƒ‰ãƒ¬ã‚¤Shchekinã‚’</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></p><br>
<p>        . ,  (, ),           . ,               <code>C#</code>.   â€” <code>C#</code>  <em></em>   ,      ,   ,   ,    ( )           â€” .</p><br>
<p>       ,  -   :</p><br>
<ol>
<li>     ,      ( , )   .    generic type constraint.</li>
<li>  ,       . ,       <code>(T, T) =&gt; T</code>. </li>
<li>      . ,   (boxing) .</li>
</ol><br>
<h2 id="a-chto-tam-u-sosedey">    ?</h2><br>
<p>   <code>F#</code>.     <code>F#</code>,    <code>C#</code>   <code>CLR</code>,   <code>F#</code>     .             ,     <code>F#</code>   :</p><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">let</span> <span class="hljs-title">add_gen</span> (<span class="hljs-params">x : <span class="hljs-string">'a) (y : '</span>a</span>)</span> =<font></font>
    x + y<font></font>
<font></font>
<span class="hljs-keyword">let</span> <span class="hljs-keyword">add</span> x y =<font></font>
    x + y<font></font>
<font></font>
add_gen <span class="hljs-number">5.0</span> <span class="hljs-number">6.0</span> |&gt; ignore<font></font>
<font></font>
<span class="hljs-keyword">add</span> <span class="hljs-number">5.0</span> <span class="hljs-number">6.0</span> |&gt; ignore</code></pre><br>
<p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>    ,     .      <code>F#</code>,      <code>int -&gt; double</code>,         <code>double</code> (  <code>C#</code>),       (        )   .</p><br>
<p> ,     <code>+</code>    <code>=</code>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">   </a>:      (   <code>C#</code>),       -,   <code>F#</code>. </p><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">let</span> <span class="hljs-title">eq_gen</span> (<span class="hljs-params">x : <span class="hljs-string">'a) (y : '</span>a</span>)</span> =<font></font>
    x = y<font></font>
<font></font>
<span class="hljs-keyword">let</span> eq x y =<font></font>
    x = y<font></font>
<font></font>
eq_gen <span class="hljs-number">5.0</span> <span class="hljs-number">6.0</span> |&gt; ignore<font></font>
eq_gen <span class="hljs-number">5</span> <span class="hljs-number">6</span> |&gt; ignore<font></font>
<font></font>
eq <span class="hljs-number">5.0</span> <span class="hljs-number">6.0</span> |&gt; ignore<font></font>
eq <span class="hljs-number">5</span> <span class="hljs-number">6</span> |&gt; ignore</code></pre><br>
<h3 id="chto-naschet-java">  <code>Java</code>?</h3><br>
<p> <code>Java</code>   , ,    ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>     ,     <em></em> .      <code>Java</code>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a> (,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><code>Long</code></a>   by-value <code>long</code>),      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><code>Number</code></a>.  ,     c <code>Number</code>,    ,       .</p><br>
<p><em>     .</em></p><br>
<h3 id="c"><code>C++</code>?</h3><br>
<p><code>C++</code> â€”   .<br>
<code>C++</code>     ,  - â€¦ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>.<br>
 (aka templates),     (generics), ,   , <em></em>.       ,     .   ,  <code>C++</code> , ,  :</p><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_arithmetic&lt;T&gt;::value&gt;* </span>= <span class="hljs-literal">nullptr</span>&gt;
<span class="hljs-function">T <span class="hljs-title">Add</span> <span class="hljs-params">(T left, T right)</span>
</span>{
    <span class="hljs-keyword">return</span> left + right;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; Add(<span class="hljs-number">5</span>, <span class="hljs-number">6</span>) &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; Add(<span class="hljs-number">5.0</span>, <span class="hljs-number">6.0</span>) &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-comment">// std::cout &lt;&lt; Add("a", "b") &lt;&lt; std::endl; Does not compile</span>
}</code></pre><br>
<p><code>is_arithmetic</code>,  ,   <code>char</code>,  <code>bool</code>   .   , <code>char</code>    <code>sbyte</code>   <code>C#</code>,        // .</p><br>
<h3 id="yazyki-s-dinamicheskoy-tipizaciey">   </h3><br>
<p>     ( <em></em>) ,   .         :      , , ,    ,  â€”   . </p><br>
<p> <code>Python</code> (3.7.3 x64):</p><br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span> (<span class="hljs-params">x, y</span>):</span>
    <span class="hljs-keyword">return</span> x + y<font></font>
type(add(<span class="hljs-number">5</span>, <span class="hljs-number">6</span>))
<span class="hljs-comment"># &lt;class 'int'&gt;</span>
type(add(<span class="hljs-number">5.0</span>, <span class="hljs-number">6.0</span>))
<span class="hljs-comment"># &lt;class 'float'&gt;</span>
type(add(<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>)
<span class="hljs-comment"># &lt;class 'str'&gt;</span></code></pre><br>
<p> <code>R</code> (3.6.1 x64)</p><br>
<pre><code class="cpp hljs">add &lt;- function(x, y) x + y<font></font>
# <span class="hljs-function">Or <span class="hljs-title">typeof</span><span class="hljs-params">()</span>
<span class="hljs-title">vctrs::vec_ptype_show</span><span class="hljs-params">(add(<span class="hljs-number">5</span>, <span class="hljs-number">6</span>))</span>
# Prototype: <span class="hljs-keyword">double</span>
<span class="hljs-title">vctrs::vec_ptype_show</span><span class="hljs-params">(add(<span class="hljs-number">5L</span>, <span class="hljs-number">6L</span>))</span>
# Prototype: integer
<span class="hljs-title">vctrs::vec_ptype_show</span><span class="hljs-params">(add(<span class="hljs-string">"5"</span>, <span class="hljs-string">"6"</span>))</span>
# Error in x + y : non-numeric argument to binary <span class="hljs-keyword">operator</span></span></code></pre><br>
<h2 id="obratno-v-mir-c-ogranichivaem-obobschennyy-tip-matematicheskoy-funkcii">,   C#:     </h2><br>
<p> ,     .  <code>C#</code>      (by-value), .. , ,     <code>System.Object</code> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><code>System.ValueType</code></a>),      .      <code>where T : struct</code>.   <code>C# 7.3</code>    <code>where T : unmanaged</code>,  ,  <code>T</code>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><code> ,        null</code></a>.   ,      ,   <code>char</code>, <code>bool</code>, <code>decimal</code>, <em></em> <code>Enum</code>  <em></em> ,     - <code>unmanaged</code>-. ..  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>  :</p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> Coords&lt;T&gt; <span class="hljs-keyword">where</span> T : unmanaged<font></font>
{<font></font>
    <span class="hljs-keyword">public</span> T X;
    <span class="hljs-keyword">public</span> T Y;<font></font>
}</code></pre><br>
<p> ,      ,     .   <code>Unsafe</code>    â€”     ,   .      <code>T Add&lt;T&gt;(T left, T right) where T : unmanaged</code>     ,         .</p><br>
<h2 id="eksperiment-pervyy-naivnyy-dynamic"> , : <code>dynamic</code></h2><br>
<p><code>dynamic</code>     ,       . ,  <code>dynamic</code>     â€” <code>dynamic</code>  <code>object</code>,     <code>dynamic</code>-     .    â€” /  by-value .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>:</p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Class</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Method</span>(<span class="hljs-params"></span>)</span> {
        <span class="hljs-keyword">var</span> x = Add(<span class="hljs-number">5</span>, <span class="hljs-number">6</span>);
        <span class="hljs-keyword">var</span> y = Add(<span class="hljs-number">5.0</span>, <span class="hljs-number">6.0</span>);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">dynamic</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-keyword">dynamic</span> left, <span class="hljs-keyword">dynamic</span> right</span>)</span><font></font>
        =&gt; left + right;<font></font>
}</code></pre><br>
<p>   <code>IL</code>  <code>Method</code>:</p><br>
<pre><code class="cs hljs">.<span class="hljs-function">method <span class="hljs-keyword">public</span> hidebysig <span class="hljs-keyword">static</span> 
        <span class="hljs-keyword">void</span> <span class="hljs-title">Method</span> (<span class="hljs-params"></span>) cil managed</span> <font></font>
    {<font></font>
        <span class="hljs-comment">// Method begins at RVA 0x2050</span>
        <span class="hljs-comment">// Code size 53 (0x35)</span>
        .maxstack <span class="hljs-number">8</span><font></font>
<font></font>
        IL_0000: ldc.i4<span class="hljs-number">.5</span><font></font>
        IL_0001: box [System.Private.CoreLib]System.Int32<font></font>
        IL_0006: ldc.i4<span class="hljs-number">.6</span><font></font>
        IL_0007: box [System.Private.CoreLib]System.Int32<font></font>
        IL_000c: call <span class="hljs-keyword">object</span> Class::Add(<span class="hljs-keyword">object</span>, <span class="hljs-keyword">object</span>)<font></font>
        IL_0011: pop<font></font>
        IL_0012: ldc.r8 <span class="hljs-number">5</span><font></font>
        IL_001b: box [System.Private.CoreLib]System.Double<font></font>
        IL_0020: ldc.r8 <span class="hljs-number">6</span><font></font>
        IL_0029: box [System.Private.CoreLib]System.Double<font></font>
        IL_002e: call <span class="hljs-keyword">object</span> Class::Add(<span class="hljs-keyword">object</span>, <span class="hljs-keyword">object</span>)<font></font>
        IL_0033: pop<font></font>
        IL_0034: ret<font></font>
    } <span class="hljs-comment">// end of method Class::Method</span></code></pre><br>
<p> <code>5</code>, <em></em>,  <code>6</code>, ,  <code>object Add(object, object)</code>.<br>
    .</p><br>
<h2 id="eksperiment-vtoroy-v-lob"> , " "</h2><br>
<p>, <code>dynamic</code>    ,      ,    .   <s></s>     :   <em></em>,  -,  â€”   .</p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> T Add&lt;T&gt;(T left, T right) <span class="hljs-keyword">where</span> T : unmanaged<font></font>
{<font></font>
    <span class="hljs-keyword">if</span>(left <span class="hljs-keyword">is</span> <span class="hljs-keyword">int</span> i32Left &amp;&amp; right <span class="hljs-keyword">is</span> <span class="hljs-keyword">int</span> i32Right)<font></font>
    {<font></font>
        <span class="hljs-comment">// ???</span><font></font>
    }<font></font>
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotSupportedException();<font></font>
}</code></pre><br>
<p>     .  ,     ,  ,     â€” ,    <code>int</code>      <code>T</code>      .  <code>return (T)(i32Left + i32Right)</code>   â€”  ,  <code>T</code>  <code>int</code> ( - ,   ).     <code>return (T)(object)(i32Left + i32Right)</code>.   ,  â€”   <code>T</code>.    <strong></strong>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>.   <code>int</code>,    <code>double</code>,      <code>int -&gt; double</code>.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>  â€”     -,   <code>if</code> .     .</p><br>
<h2 id="refleksiya-i-metadannye">  </h2><br>
<p>,   .   ,   <code>C#</code>  ,   . ,  <code>+</code>, <code>-</code>, <code>==</code>, <code>!=</code>   . ,    â€”    <code>T</code>  ,  , ,  â€”  .  ,   ,       .        <code>T</code>     ,         .  - :</p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> T Add&lt;T&gt;(T left, T right) <span class="hljs-keyword">where</span> T : unmanaged<font></font>
{<font></font>
    <span class="hljs-comment">// Simple example without cache.</span>
    <span class="hljs-keyword">var</span> method = <span class="hljs-keyword">typeof</span>(T)<font></font>
        .GetMethod(<span class="hljs-string">@"op_Addition"</span>, <span class="hljs-keyword">new</span> [] {<span class="hljs-keyword">typeof</span>(T), <span class="hljs-keyword">typeof</span>(T)})<font></font>
        ?.CreateDelegate(<span class="hljs-keyword">typeof</span>(Func&lt;T, T, T&gt;)) <span class="hljs-keyword">as</span> Func&lt;T, T, T&gt;;<font></font>
<font></font>
    <span class="hljs-keyword">return</span> method?.Invoke(left, right) <font></font>
        ?? <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> InvalidOperationException();<font></font>
<font></font>
}</code></pre><br>
<p> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>.   ,     (  <code>decimal</code>) <em></em>   .     <code>IL</code>-,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><code>add</code></a>.      .</p><br>
<h2 id="systemlinqexpressions">System.Linq.Expressions</h2><br>
<p>   <code>Expressions</code>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a> ( â€” Marc Gravell).<br>
  .      <code>T</code>,    <code>+</code>.      :</p><br>
<pre><code class="cs hljs">(x, y) =&gt; x + y;</code></pre><br>
<p> , ,   .     .       .   .</p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> Dictionary&lt;(Type Type, <span class="hljs-keyword">string</span> Op), Delegate&gt; Cache =
            <span class="hljs-keyword">new</span> Dictionary&lt;(Type Type, <span class="hljs-keyword">string</span> Op), Delegate&gt;();<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> T Add&lt;T&gt;(T left, T right) <span class="hljs-keyword">where</span> T : unmanaged<font></font>
{<font></font>
    <span class="hljs-keyword">var</span> t = <span class="hljs-keyword">typeof</span>(T);
    <span class="hljs-comment">// If op is cached by type and function name, use cached version</span>
    <span class="hljs-keyword">if</span> (Cache.TryGetValue((t, <span class="hljs-keyword">nameof</span>(Add)), <span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> del))
        <span class="hljs-keyword">return</span> del <span class="hljs-keyword">is</span> Func&lt;T, T, T&gt; specificFunc<font></font>
            ? specificFunc(left, right)<font></font>
            : <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> InvalidOperationException(<span class="hljs-keyword">nameof</span>(Add));<font></font>
<font></font>
    <span class="hljs-keyword">var</span> leftPar = Expression.Parameter(t, <span class="hljs-keyword">nameof</span>(left));
    <span class="hljs-keyword">var</span> rightPar = Expression.Parameter(t, <span class="hljs-keyword">nameof</span>(right));
    <span class="hljs-keyword">var</span> body = Expression.Add(leftPar, rightPar);<font></font>
<font></font>
    <span class="hljs-keyword">var</span> func = Expression.Lambda&lt;Func&lt;T, T, T&gt;&gt;(body, leftPar, rightPar).Compile();<font></font>
<font></font>
    Cache[(t, <span class="hljs-keyword">nameof</span>(Add))] = func;<font></font>
<font></font>
    <span class="hljs-keyword">return</span> func(left, right);<font></font>
}</code></pre><br>
<p>           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>.</p><br>
<p>,       â€”         .         ,    .  <em></em> .</p><br>
<h2 id="narushaem-vse-pravila">  </h2><br>
<p>    - ,   <code>CLR/C#</code>?  ,  <s></s>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">  </a>:</p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Class</span> <font></font>
{<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">double</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> y</span>)</span> =&gt; x + y;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y</span>)</span> =&gt; x + y;  
    <span class="hljs-comment">// Decimal only to show difference</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">decimal</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-keyword">decimal</span> x, <span class="hljs-keyword">decimal</span> y</span>)</span> =&gt; x + y;<font></font>
}</code></pre><br>
<p> <code>IL</code>-       :</p><br>
<pre><code class="cs hljs">ldarg<span class="hljs-number">.0</span>
ldarg<span class="hljs-number">.1</span>
<span class="hljs-keyword">add</span>
ret</code></pre><br>
<p> â€”   op- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><code>add</code></a>,       . <code>decimal</code>     <code>static decimal decimal.op_Addition(decimal, decimal)</code>.     ,   ,     <code>IL</code>-? ,   ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>.        ( <code>decimal</code>),     <code>nullable</code>-.     <code>IL</code>-     .         .</p><br>
<p>  , <code>Visual Studio</code>     <code>IL</code>-  <code>IL</code>-.         <code>IL</code>     . , open source    .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><code>ILSupport</code></a>   <code>IL</code>-,     ,     <code>*.csproj</code>   <code>IL</code>-  . ,   <code>IL</code>  â€”  ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><code>MethodImpl</code></a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><code>ForwardRef</code></a>.       <code>extern</code>     .   :</p><br>
<pre><code class="cs hljs">[<span class="hljs-meta">MethodImpl(MethodImplOptions.ForwardRef)</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">extern</span> T Add&lt;T&gt;(T left, T right) <span class="hljs-keyword">where</span> T : unmanaged;</code></pre><br>
<p>  â€”   <code>*.il</code>  <code>IL</code>-   :</p><br>
<pre><code class="cs hljs">.method <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> hidebysig !!T Add&lt;valuetype .ctor (<span class="hljs-keyword">class</span> [<span class="hljs-title">mscorlib</span>]<span class="hljs-title">System.ValueType</span> <span class="hljs-title">modreq</span> ([<span class="hljs-title">mscorlib</span>]<span class="hljs-title">System.Runtime.InteropServices.UnmanagedType</span>)) <span class="hljs-title">T</span>&gt;(!!<span class="hljs-title">T</span> <span class="hljs-title">left</span>, !!<span class="hljs-title">T</span> <span class="hljs-title">right</span>) <span class="hljs-title">cil</span> <span class="hljs-title">managed</span><font></font>
{<font></font>
    .param type [<span class="hljs-number">1</span>]<font></font>
    .custom instance <span class="hljs-keyword">void</span> System.Runtime.CompilerServices.IsUnmanagedAttribute::.ctor()<font></font>
    = (<span class="hljs-number">01</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> )<font></font>
    ldarg<span class="hljs-number">.0</span>
    ldarg<span class="hljs-number">.1</span>
    <span class="hljs-keyword">add</span><font></font>
    ret<font></font>
}</code></pre><br>
<p>      <code>!!T</code>,   <code>CLR</code>      .  <strong></strong>        . ,   ,  <em></em> .</p><br>
<h2 id="nemnogo-benchmarka"> </h2><br>
<p>,       -   ,   " "       <code>IL</code>-.    ,          <code>double</code>        .      <code>C#</code>  <code>+</code>, <code>*</code>  <code>/</code>,     , ,    <code>Expressions</code>,  <code>IL</code>-.</p><br>
<div class="spoiler"><b class="spoiler_title">  :</b><div class="spoiler_text"><ul>
<li><code>DirectSum</code>       <code>+</code>, <code>*</code>  <code>/</code>;</li>
<li><code>BranchSum</code>        <code>object</code>;</li>
<li><code>UnsafeBranchSum</code>        <code>Unsafe.As&lt;,&gt;()</code>;</li>
<li><code>ExpressionSum</code>       (<code>Expression</code>);</li>
<li><code>UnsafeSum</code>  <code>IL</code>- ,   </li>
</ul><br>
<p>  â€”         <code>double</code>   <code>N</code>      <code>N</code>   ;  .</p><br>
<pre><code class="plaintext hljs">BenchmarkDotNet=v0.12.0, OS=Windows 10.0.18362<font></font>
Intel Core i7-2700K CPU 3.50GHz (Sandy Bridge), 1 CPU, 8 logical and 4 physical cores<font></font>
.NET Core SDK=3.1.102<font></font>
  [Host]     : .NET Core 3.1.2 (CoreCLR 4.700.20.6602, CoreFX 4.700.20.6702), X64 RyuJIT<font></font>
  Job-KXVDTZ : .NET Core 3.1.2 (CoreCLR 4.700.20.6602, CoreFX 4.700.20.6702), X64 RyuJIT<font></font>
<font></font>
Runtime=.NET Core 3.1  <font></font>
</code></pre><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th>Method</th>
<th>N</th>
<th>Mean</th>
<th>Error</th>
<th>StdDev</th>
<th>Ratio</th>
<th>RatioSD</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>DirectSum</strong></td>
<td><strong>1000</strong></td>
<td><strong>682.5 ns</strong></td>
<td><strong>6.10 ns</strong></td>
<td><strong>5.70 ns</strong></td>
<td><strong>1.00</strong></td>
<td><strong>0.00</strong></td>
</tr>
<tr>
<td>BranchSum</td>
<td>1000</td>
<td>675.3 ns</td>
<td>2.26 ns</td>
<td>1.76 ns</td>
<td>0.99</td>
<td>0.01</td>
</tr>
<tr>
<td>UnsafeBranchSum</td>
<td>1000</td>
<td>674.2 ns</td>
<td>1.79 ns</td>
<td>1.59 ns</td>
<td>0.99</td>
<td>0.01</td>
</tr>
<tr>
<td>ExpressionSum</td>
<td>1000</td>
<td>136,248.2 ns</td>
<td>1,163.96 ns</td>
<td>1,031.82 ns</td>
<td>199.51</td>
<td>2.28</td>
</tr>
<tr>
<td>UnsafeSum</td>
<td>1000</td>
<td>673.6 ns</td>
<td>2.53 ns</td>
<td>2.11 ns</td>
<td>0.99</td>
<td>0.01</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>DirectSum</strong></td>
<td><strong>10000</strong></td>
<td><strong>6,702.8 ns</strong></td>
<td><strong>15.07 ns</strong></td>
<td><strong>13.36 ns</strong></td>
<td><strong>1.00</strong></td>
<td><strong>0.00</strong></td>
</tr>
<tr>
<td>BranchSum</td>
<td>10000</td>
<td>6,701.2 ns</td>
<td>12.34 ns</td>
<td>11.55 ns</td>
<td>1.00</td>
<td>0.00</td>
</tr>
<tr>
<td>UnsafeBranchSum</td>
<td>10000</td>
<td>6,707.4 ns</td>
<td>16.05 ns</td>
<td>15.01 ns</td>
<td>1.00</td>
<td>0.00</td>
</tr>
<tr>
<td>ExpressionSum</td>
<td>10000</td>
<td>1,403,997.6 ns</td>
<td>16,856.96 ns</td>
<td>14,943.25 ns</td>
<td>209.47</td>
<td>2.22</td>
</tr>
<tr>
<td>UnsafeSum</td>
<td>10000</td>
<td>6,704.0 ns</td>
<td>17.54 ns</td>
<td>16.41 ns</td>
<td>1.00</td>
<td>0.00</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>DirectSum</strong></td>
<td><strong>100000</strong></td>
<td><strong>67,036.2 ns</strong></td>
<td><strong>223.81 ns</strong></td>
<td><strong>198.40 ns</strong></td>
<td><strong>1.00</strong></td>
<td><strong>0.00</strong></td>
</tr>
<tr>
<td>BranchSum</td>
<td>100000</td>
<td>67,098.8 ns</td>
<td>180.93 ns</td>
<td>169.24 ns</td>
<td>1.00</td>
<td>0.00</td>
</tr>
<tr>
<td>UnsafeBranchSum</td>
<td>100000</td>
<td>67,494.1 ns</td>
<td>998.78 ns</td>
<td>934.26 ns</td>
<td>1.01</td>
<td>0.01</td>
</tr>
<tr>
<td>ExpressionSum</td>
<td>100000</td>
<td>14,191,757.1 ns</td>
<td>279,064.16 ns</td>
<td>286,578.35 ns</td>
<td>212.02</td>
<td>4.60</td>
</tr>
<tr>
<td>UnsafeSum</td>
<td>100000</td>
<td>67,446.9 ns</td>
<td>439.61 ns</td>
<td>389.70 ns</td>
<td>1.01</td>
<td>0.01</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>DirectSum</strong></td>
<td><strong>1024000</strong></td>
<td><strong>813,409.8 ns</strong></td>
<td><strong>12,796.13 ns</strong></td>
<td><strong>11,969.51 ns</strong></td>
<td><strong>1.00</strong></td>
<td><strong>0.00</strong></td>
</tr>
<tr>
<td>BranchSum</td>
<td>1024000</td>
<td>806,656.4 ns</td>
<td>3,042.30 ns</td>
<td>2,540.45 ns</td>
<td>0.99</td>
<td>0.02</td>
</tr>
<tr>
<td>UnsafeBranchSum</td>
<td>1024000</td>
<td>801,859.4 ns</td>
<td>1,411.25 ns</td>
<td>1,251.03 ns</td>
<td>0.98</td>
<td>0.01</td>
</tr>
<tr>
<td>ExpressionSum</td>
<td>1024000</td>
<td>143,456,196.4 ns</td>
<td>702,638.64 ns</td>
<td>622,870.86 ns</td>
<td>176.22</td>
<td>2.68</td>
</tr>
<tr>
<td>UnsafeSum</td>
<td>1024000</td>
<td>803,022.1 ns</td>
<td>1,715.58 ns</td>
<td>1,520.81 ns</td>
<td>0.99</td>
<td>0.02</td>
</tr>
</tbody>
</table></div></div></div><br>
<p><s>     <code>2.5</code>   (    ).      ,     " "   <code>a + b</code>  op- <code>add</code>,          ,   . </s></p><br>
<h2 id="vmesto-zaklyucheniya-kogda-true--true"> :  <code>true != true</code></h2><br>
<p>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>  :</p><br>
<blockquote>There are cases where the following will print "false"<br>
bool b =â€¦<br>
if (b) Console.WriteLine(b.IsTrue());</blockquote><p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">  </a>,     <code>bool</code>  <code>true</code>,    :</p><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">IsTrue</span>(<span class="hljs-params"><span class="hljs-keyword">this</span> <span class="hljs-keyword">bool</span> b</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">if</span> (b == <span class="hljs-literal">true</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (b == <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">return</span> !<span class="hljs-literal">true</span> &amp;&amp; !<span class="hljs-literal">false</span>;<font></font>
}</code></pre><br>
<p>  , ?   -,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>  <code>bool</code>.    ,  <code>bool</code>  <code>byte</code> (<code>sizeof(bool) == 1</code>),   <code>false</code>  <code>0</code>,  <code>true</code>  <code>1</code>.     , <code>bool</code>     . ,   ,   <code>bool</code>,  <code>2</code>    ,     :</p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">bool</span> b = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">byte</span>* ptr = (<span class="hljs-keyword">byte</span>*)&amp;b;<font></font>
*ptr = <span class="hljs-number">2</span>;</code></pre><br>
<p>           (    <code>Expressions</code>):</p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> fakeTrue = Subtract&lt;<span class="hljs-keyword">bool</span>&gt;(<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
<span class="hljs-keyword">var</span> val = *(<span class="hljs-keyword">byte</span>*)&amp;fakeTrue;<font></font>
<font></font>
<span class="hljs-keyword">if</span>(fakeTrue)<font></font>
    Assert.AreNotEqual(fakeTrue, <span class="hljs-literal">true</span>);
<span class="hljs-keyword">else</span>
    Assert.Fail(<span class="hljs-string">"Clause not entered."</span>);</code></pre><br>
<p>-,   <code>true</code>- ,    <code>true</code>,  ,      <em>  <code>true</code></em>.   ?       <code>0</code> (<code>=false</code>) <code>1</code> (<code>=true</code>),   <code>byte</code>    <code>255</code>. , <code>255</code> ( <code>fakeTrue</code>)   <code>1</code> ( <code>true</code>),  assert .    -.</p><br>
<p>  <code>if</code>:   ;   <em></em>,        <code>if</code>-.    <code>brfalse</code>/<code>brfalse_S</code>.        <em></em>.    ,   <code>false</code>,   <code>if</code>-.    <code>fakeTrue</code>      ,        <code>if</code>-,    <code>fakeBool</code>    <code>true</code>    .</p><br>
<p>UPD01:<br>
     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">shai_hulud</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">blowin</a>,      ,     <code>if(typeof(T) == typeof(int)) return (T)(object)((int)(object)left + (int)(object)right);</code>. <s>   ,  <code>JIT</code>   ,     <code>T</code>  <code>struct</code>,        .  ,    <code>T</code> -&gt; <code>int</code> -&gt; <code>T</code>,    boxing/unboxing.     <code>MethodImpl</code>    . </s></p><br>
<p>UPD02:<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">xXxVano</a>           <code>T</code> &lt;--&gt;     <code>Unsafe.As&lt;TFrom, TTo&gt;()</code>.         <code>object</code>,     (,   )      ,       (<code>UnsafeBranchSum</code>). <s>  ,    ( )    asm- (       ),                 (<code>DirectSum</code>),       <code>IL</code>-.      ,  ,      <code>N</code>   ,   -    <em></em> ,      <code>JIT</code>.     <code>IL</code>- .   ,   <code>IL</code>-    ,    /    /  ,          100%  (  ,   ).<br>
  ,      , -       . </s></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD03ï¼š</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ã°ã‚‰ãã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æˆ»ã‚‹ã¨ã€ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã«è‡´å‘½çš„ãªæ¬ é™¥ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³</font></font><code>NET Core</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨ã®</font><font style="vertical-align: inherit;">ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã¯ã€</font><font style="vertical-align: inherit;">å¼ãƒ„ãƒªãƒ¼ã®æ˜ã‚‰ã‹ãªä¾‹å¤–ã‚’é™¤ã„ã¦ã€</font></font><code>Benchmark .NET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã™ã¹ã¦ã®ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆç›´æ¥ã€ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ãªã—</font></font><code>IL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€åˆ†å²ã®</font><font style="vertical-align: inherit;">ä¸¡æ–¹ï¼‰ã§åŒã˜è¨ˆç®—æ™‚é–“ã‚’ç¤ºã—ã¦ã„</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">è¡¨ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja480402/index.html">Tinkoffã‹ã‚‰ã®2ç•ªç›®ã®Android mitapã‚’ã©ã®ã‚ˆã†ã«ã—ã¦å®Ÿç¾ã—ã¾ã—ãŸã‹</a></li>
<li><a href="../ja480404/index.html">Mikrotikã¨Linuxã€‚ãƒ«ãƒ¼ãƒãƒ³ã¨è‡ªå‹•åŒ–</a></li>
<li><a href="../ja480408/index.html">ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨ã®52ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ</a></li>
<li><a href="../ja480412/index.html">jug.msk.ruãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§ã®OpenJDK 11ã®Java Flight Recorderã®æ–°æ©Ÿèƒ½ã¨å¤ã„æ©Ÿèƒ½ã«ã¤ã„ã¦ã®Alexey Ragozin</a></li>
<li><a href="../ja480414/index.html">å…ˆé€±ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ä¸–ç•Œã‹ã‚‰ã®æ–°é®®ãªé£Ÿæã®ãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆNo. 393ï¼ˆ2019å¹´12æœˆ9æ—¥ã€œ15æ—¥ï¼‰</a></li>
<li><a href="../ja480420/index.html">ã‚¢ãƒ†ãƒ­ãƒ¼ãƒ æ€§å‹•è„ˆç¡¬åŒ–ç—‡ã¨ãã®æ²»ç™‚ã«é–¢ã™ã‚‹ãƒã‚·ãƒ¥ãƒ¼ã€Œã‚ªã‚­ã€ã‚ªã‚³ãƒŠãƒ¼ã¨ã®ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼</a></li>
<li><a href="../ja480422/index.html">C ++ã®Googleã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰ã€‚ãƒ‘ãƒ¼ãƒˆ1</a></li>
<li><a href="../ja480424/index.html">C ++ã®Googleã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰ã€‚ãƒ‘ãƒ¼ãƒˆ9</a></li>
<li><a href="../ja480428/index.html">æœ€ã‚‚ç°¡å˜ãªé€Ÿè¨˜ã®æ–¹æ³•ã€‚å½¼å¥³ã®ãŸã‚ã®ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆã¨ãƒ•ã‚©ãƒ³ãƒˆã€‚</a></li>
<li><a href="../ja480430/index.html">ãƒ“ãƒ‡ã‚ªã‚³ãƒ¼ãƒ‡ãƒƒã‚¯ã®ä»•çµ„ã¿ã€‚ãƒ‘ãƒ¼ãƒˆ2.ä½•ã€ãªãœã€ã©ã®ã‚ˆã†ã«</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>