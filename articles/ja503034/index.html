<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚧 🚨 👸🏼 数学的コプロセッサ8087のクリスタルから定数を抽出します 🍽️ 😟 🍗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1980年に、Intelは8086チップを導入して、8086プロセッサでの浮動小数点数の処理を高速化し、元のIBM PCで使用されました。最初のマイクロプロセッサは整数でのみ機能するため、浮動小数点数を使用した演算は低速であり、逆正接や対数などの超越関数を使用すると、事態はさらに悪化しました。システ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>数学的コプロセッサ8087のクリスタルから定数を抽出します</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503034/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1980年に、Intelは8086チップを導入して、8086プロセッサでの浮動小数点数の処理を高速化し、元のIBM PCで使用されました。最初のマイクロプロセッサは整数でのみ機能するため、浮動小数点数を使用した演算は低速であり、</font><font style="vertical-align: inherit;">逆正接や対数などの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">超越関数</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用すると</font><font style="vertical-align: inherit;">、事態はさらに悪化しました。システムに8087コプロセッサーチップを追加すると、浮動小数点数での操作を最大100倍高速化できました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は8087チップを開けて、顕微鏡で写真を何枚か撮りました。下の写真は小さなシリコンチップの結晶です。その側面では、小さな導体が40本の外部脚と接続しています。写真の主要な機能ブロックのマークアップは、リバースエンジニアリングのおかげで私が作成しました。チップを注意深く研究すれば、ROMからさまざまな定数を抽出できます-計算でチップが使用するπなどの数値。</font><i><font style="vertical-align: inherit;">マークされたメイン機能ブロックを備えた浮動小数点演算用のIntel 8087チップチップ。定数付きROMは緑色でマークされています。クリック可能。</font></i></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/1o/ee/_a/1oee_auvu5lyuaxcrdoxcrm0vv4.jpeg"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チップの上半分には制御回路があります。浮動小数点命令を実行するには、最大1000ステップが必要な場合があります。 8087はこれらのステップを記述するためにマイクロコードを使用しました。クリスタルの写真では、マイクロコードからプログラムを起動した「メカニズム」を見ることができます。実際、それは単純なCPUです。その隣には、マイクロコードが格納されている大きなROMがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チップの下部には、浮動小数点数を処理する回路があります。浮動小数点数は、小数部（数値または仮数の有効部とも呼ばれます）、指数、および符号ビットで構成されます。 10進表記では、数値6.02×10 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.02が仮数になり、23が指数になります。個別のチップ回路が仮数と指数を同時に処理します。仮数処理スキームは67ビット値をサポートしています-精度のために64ビットの仮数と3つの追加ビット。左から右に、仮数演算スキームは、定数を備えたROM、シフトレジスタ、加算器/減算器、およびレジスタスタックで構成されます。この記事のトピックは定数付きROMで、写真では緑色で強調表示されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8087は、8086プロセッサのコプロセッサとして機能しました。8086プロセッサは、浮動小数点数に関連する特別な命令に出くわすと、それを無視し、8087に並列実行する機会を与えました。 8086と8087の相互作用はかなり狡猾な方法で調整されました。単純化するために、8087は8086の命令ストリームを調べ、8087に関連するすべての命令を実行します。8086にはプリフェッチ命令のバッファがあるため、8086が現在受信している命令は命令と一致しません彼は実行します。したがって、8087は、8086がビジー状態にあるものを知るために、命令8086の転送サンプルのバッファー（または、命令8088の転送サンプルのより小さいバッファー）を複製しました（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">詳細については、ここで説明します）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）もう1つの問題は、8086内のレジスタを使用する複雑な8086アドレッシングモードに関連しています。8086レジスタにアクセスできないため、8087はこれらのアドレッシングモードを実行できません。代わりに、8086は8087の命令を見ると、メモリ内の指定された場所からデータを要求します。結果を無視します。一方、8087は必要な場合に備えてバスからアドレスを取得します。 8087がインストールされていないと、この場所にトラップが形成されるように見えるかもしれませんが、これは起こりません。 8087がないシステムでは、リンカは8087命令を書き換えて、エミュレーションライブラリからのサブルーチン呼び出しに置き換えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8087の内部動作については詳しく説明しませんが、一般的に、浮動小数点演算は、整数の加算、減算、およびシフトによって実装されます。</font><font style="vertical-align: inherit;">2つの浮動小数点数を加算または減算するために、8087は2進コンマが整列するまで数値をシフトし（小数点のように、2進システムのみ）、仮数を加算または減算します。</font><font style="vertical-align: inherit;">乗算、除算、平方根の計算は、連続するシフトと加算/減算によって実行されます。</font><font style="vertical-align: inherit;">超越関数（正接、逆正接、対数、次数）は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CORDICアルゴリズムを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用します</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">。CORDICアルゴリズムは</font></a><font style="vertical-align: inherit;">、特殊な定数のシフトと追加を使用して、計算の効率を高めます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROMの実装</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、定数が格納されているROMについて説明します。マイクロコードが格納されている大きな4レベルROMと混同しないでください。この最後のROMは、トランジスタあたり2ビットを格納する珍しいテクノロジーを使用して実装されています。これは、3つの異なるサイズのトランジスタを使用するか、各位置にトランジスタがないことを使用して行われます。これらの4つのオプションは2ビットを示します。この</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">洗練されたテクノロジー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、大きなROMを8087チップに収めるために必要でした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
定数用ROMは、8087が計算に必要とする定数（π、ln（2）、√2など）を格納するための標準テクノロジを使用します。下の写真は定数付きのROMの一部を示しています。結晶自体を見るために、金属層が取り除かれています。ピンクがかった領域は、さまざまな特性を与える不純物を含むシリコンであり、赤みがかった色と緑がかったラインは</font><font style="vertical-align: inherit;">、上部にある特別なタイプのシリコン配線である</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポリシリコン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。正しいラティスと同様に、ROMの構造に注意してください。 ROMは、ビットを格納する2列のトランジスタで構成されています。その動作の仕組みを説明するために、トランジスタの動作の仕組みから始めます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/10e/594/914/10e594914b3b11d2fa9fa57e2fed653f.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定数付きのROMの一部で、金属層が削除されています。より大きなトランジスタの3つの列が行の選択に使用されます。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1970年代の高密度集積回路（IC）は通常、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">N-MOS</font></a><font style="vertical-align: inherit;">トランジスタで製造されていました</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（現代のコンピューターは、N-MOSとP-MOSの極性が逆になっているCMOSでできています）。</font><font style="vertical-align: inherit;">下の図は、N-MOSトランジスタの構造を示しています。</font><font style="vertical-align: inherit;">ICは、トランジスタが作成されるシリコン基板から組み立てられます。</font><font style="vertical-align: inherit;">不純物がシリコンサイトに追加され、目的の電気特性を持つ「拡散」領域が作成されます。</font><font style="vertical-align: inherit;">トランジスタは、ソースとドレインと呼ばれる拡散の2つのセクション間で電流を流すことができるスイッチと考えることができます。</font><font style="vertical-align: inherit;">トランジスタは、特殊なタイプのシリコン（ポリシリコン）で作られたゲートによって制御されます。</font><font style="vertical-align: inherit;">ゲートに電圧を印加すると、ソースとドレインの間に電流が流れます。</font><font style="vertical-align: inherit;">それ以外の場合、電流は流れません。</font><font style="vertical-align: inherit;">8087は非常に複雑で、約40,000のトランジスタが搭載されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソースが異なれば8087のトランジスタ数も異なります：Intelは約40,000、Wikipediaは約45,000と言っています。 ROM、PLA、または他の同様の構造内のトランジスタの数は、格納されているデータに依存するため、「潜在的な」トランジスタの数は、実際のトランジスタではなくソースに示されることがよくあります。また、プルアップトランジスタを検討するかどうか、または大電流ドライバを1つのトランジスタまたは複数のトランジスタと見なすこともできます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a8d/708/2ad/a8d7082ad4689514eafa3beb87976a76.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPに実装されたMOS構造</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ズームインすると、個々のROMトランジスタを検討できます。ピンクがかった領域は、ソースとドレインを形成する不純物を含むシリコンです。ポリシリコン垂直選択バスラインはトランジスタゲートを形成します。シリコンのマークされた領域はグランドに接続され、各トランジスタの片側をプルダウンします。円は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VIA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で、上のシリコンタイヤと金属タイヤの間の中間ビアです。写真の場合、金属製のタイヤは取り外されています。それらの1つの場所はオレンジ色の線で示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b64/c66/060/b64c66060496c9b3b31ffe4e4223da59.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定数付きROMの一部。各サンプリングバスは、特定の定数を選択します。トランジスタは黄色で表示されます。 Xは、ビット0に対応する欠落しているトランジスタを示します。オレンジ色の線は、金属導体の位置を示します。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROMの重要な特徴は、いくつかのトランジスタがないことです-上段には最初のトランジスタがなく、下段には2つのトランジスタがXでマークされています。</font><font style="vertical-align: inherit;">トランジスタを作成したり絶縁領域を残したりする不純物をシリコンに追加するための回路を変更することにより、ビットがROMにプログラムされます。</font><font style="vertical-align: inherit;">使用可能なトランジスタまたは欠落しているトランジスタはそれぞれ1ビットを表します。</font><font style="vertical-align: inherit;">サンプリングバスがアクティブになると、この列のすべてのトランジスタが開き、対応する出力バスがプルダウンされます。</font><font style="vertical-align: inherit;">ただし、選択した位置にトランジスタがない場合、対応する出力はハイのままになります。</font><font style="vertical-align: inherit;">したがって、この値はROMから出力バスにこの値を出力するサンプルバスをアクティブにすることにより、ROMから読み取られます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROMコンテンツ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
定数付きROMは143行21列で構成されています。左上の1つの6×6トランジスタを除いて、21ビットの134行が含まれています。したがって、定数付きのROMの物理サイズは2946ビットです。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9e4/07f/179/9e407f179428233808d1a084487ce41e.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROMスキームに基づいて、欠落しているセクションは、最初の12の定数が67ビットではなく64ビットであることを意味します。これらはCORDICに関連しない定数であり、追加の精度を必要としないようです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
顕微鏡下では、ROMビットパターンが表示されているので、そこから削除できます。ただし、これらのビットを後で解釈する方法はまったく明らかではありません。最初の質問は、トランジスタの存在が0または1のどちらを示すかです（後で、トランジスタの存在が1であることが判明しました）。 2番目の問題は、134×21ビットグリッドを値に変換する方法です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ビットエンコーディングは2つの方法で定義できます。 1つ目は、ROMからデータを読み取る回路を追跡し、その使用方法を確認することです。 2つ目は、生データのパターンを探し、それらを理解することです。 8087は非常に複雑なので、定数を調べるときに完全なリバースエンジニアリングを避けたいと思ったので、2番目のアプローチを使用しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チップのデータパスは水平67行で構成されているため、ROMの134行が2セットの67ビット定数に対応していることがわかりました。奇数系列から定数のセットを1つ抽出し、偶数系列からもう1つの定数セットを抽出しましたが、取得した値は意味がありませんでした。もう少し考えると、行が交互にならないことに気づきましたが、ABBAの順序を繰り返して歩きました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
行はABBAABBAABBA ...の順序で進み、行Aには定数セットのビットが含まれ、行Bには別の定数セットのビットが含まれていました。このような回路は、おそらく1つの接点が2つの隣接するトランジスタを制御できるため、ABAWを単に交互に使用する代わりに使用されました。すなわち、１つの導体がグループＡＡおよびＢＢのそれぞれを選択することができる。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ABBAの順序を考慮に入れると、πや1など、よく知られた定数がたくさん得られました。下の図は、これらの定数のビットを示しています。写真では、ビット1は緑のストリップ、ビット0は赤です。バイナリシステムでは、πは11.001001 ...であり、マークされたビットの上の行に表示されるのはこの値です。下の値は定数1です。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ed4/8f7/4d6/ed48f74d62beb0e29a0700831a82ef3d.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上の行のビットはπ、下の行は1です。この図は、他の図と比較して90度回転しています。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
解釈の次の問題は、ROMには仮数のみが格納され、指数は格納されないことです（これまでのところ、指数を持つ個別のROMを見つけていません）。そして、意味のある価値が得られるまで、さまざまな出展者と実験しました。たとえば、定数1.204120は</font><font style="vertical-align: inherit;">指数2 </font><sup><font style="vertical-align: inherit;">-2</font></sup><font style="vertical-align: inherit;">を使用して</font><font style="vertical-align: inherit;">log </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（2）を</font><font style="vertical-align: inherit;">示します</font><font style="vertical-align: inherit;">。 1,734723のように、より理解しにくいものもあります。結局、私は1.734723×2 </font><sup><font style="vertical-align: inherit;">59</font></sup><font style="vertical-align: inherit;"> = 10 </font><sup><font style="vertical-align: inherit;">18</font></sup><font style="vertical-align: inherit;">であることに気付きました</font><font style="vertical-align: inherit;">。なぜ8087にそのような定数があるのですか？おそらく8087が</font><font style="vertical-align: inherit;">18文字の</font><font style="vertical-align: inherit;">パック</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">2進10進コードを</font></a><font style="vertical-align: inherit;">サポートしているため</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">です</font></a><font style="vertical-align: inherit;">。</font></font><sup><font style="vertical-align: inherit;"></font></sup><font style="vertical-align: inherit;"></font><sup><font style="vertical-align: inherit;"></font></sup><font style="vertical-align: inherit;"></font><sup><font style="vertical-align: inherit;"></font></sup><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一部の指数は見つけるのが非常に困難でした。そのため、ブルートフォースメソッドを使用して、結果が何らかの対数またはある程度の数値になるかどうかを確認しました。</font><font style="vertical-align: inherit;">最も難しいのは、ln（2）/ 3の定数を決定することでした。</font><font style="vertical-align: inherit;">この数の重要性は私には明らかではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここにROMからの定数の完全なリストがあります。</font><font style="vertical-align: inherit;">「意味」の列は私の意味の説明です。</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定数</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10進数</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.204120×2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-2</font></font></sup></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.3010300</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ログ</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（2）</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.386294×2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-1</font></font></sup></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.6931472</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ln（2）</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.442695×2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></sup> </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.426950 </font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ログ</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（e）</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.570796×2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sup> </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1415927</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">π</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.000000×2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></sup> </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.000000 </font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.660964×2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sup> </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.219281 </font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ログ</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（10）</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.734723×2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">59</font></font></sup> </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.00e + 18</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18</font></font></sup></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.734723×2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">59</font></font></sup> </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.00e + 18</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18</font></font></sup></td>
</tr>
<tr>
<td>1.848392×2<sup>-3</sup></td>
<td>0.2310491</td>
<td>ln(2)/3</td>
</tr>
<tr>
<td>1.082021×2<sup>2</sup> </td>
<td>4.280851 </td>
<td>3*log<sub>2</sub>(e)</td>
</tr>
<tr>
<td>1.442695×2<sup>0</sup> </td>
<td>1.426950 </td>
<td>log<sub>2</sub> (e)</td>
</tr>
<tr>
<td>1.414214×2<sup>0</sup> </td>
<td>1.4142136</td>
<td>√2</td>
</tr>
<tr>
<td>1.570796×2<sup>-1</sup></td>
<td>0.7853982</td>
<td>atan(2<sup>0</sup>)</td>
</tr>
<tr>
<td>1.854590×2<sup>-2</sup></td>
<td>0.4636476</td>
<td>atan(2<sup>-1</sup>)</td>
</tr>
<tr>
<td>2.000000×2<sup>-15</sup></td>
<td>0.0000610</td>
<td>atan(2<sup>-14</sup>)</td>
</tr>
<tr>
<td>2.000000×2<sup>-16</sup></td>
<td>0.0000305</td>
<td>atan(2<sup>-15</sup>)</td>
</tr>
<tr>
<td>1.959829×2<sup>-3</sup></td>
<td>0.2449787</td>
<td>atan(2<sup>-2</sup>)</td>
</tr>
<tr>
<td>1.989680×2<sup>-4</sup></td>
<td>0.1243550</td>
<td>atan(2<sup>-3</sup>)</td>
</tr>
<tr>
<td>2.000000×2<sup>-13</sup></td>
<td>0.0002441</td>
<td>atan(2<sup>-12</sup>)</td>
</tr>
<tr>
<td>2.000000×2<sup>-14</sup></td>
<td>0.0001221</td>
<td>atan(2<sup>-13</sup>)</td>
</tr>
<tr>
<td>1.997402×2<sup>-5</sup></td>
<td>0.0624188</td>
<td>atan(2<sup>-4</sup>)</td>
</tr>
<tr>
<td>1.999349×2<sup>-6</sup></td>
<td>0.0312398</td>
<td>atan(2<sup>-5</sup>)</td>
</tr>
<tr>
<td>1.999999×2<sup>-11</sup></td>
<td>0.0009766</td>
<td>atan(2<sup>-10</sup>)</td>
</tr>
<tr>
<td>2.000000×2<sup>-12</sup></td>
<td>0.0004883</td>
<td>atan(2<sup>-11</sup>)</td>
</tr>
<tr>
<td>1.999837×2<sup>-7</sup></td>
<td>0.0156237</td>
<td>atan(2<sup>-6</sup>)</td>
</tr>
<tr>
<td>1.999959×2<sup>-8</sup></td>
<td>0.0078123</td>
<td>atan(2<sup>-7</sup>)</td>
</tr>
<tr>
<td>1.999990×2<sup>-9</sup></td>
<td>0.0039062</td>
<td>atan(2<sup>-8</sup>)</td>
</tr>
<tr>
<td>1.999997×2<sup>-10</sup></td>
<td>0.0019531</td>
<td>atan(2<sup>-9</sup>)</td>
</tr>
<tr>
<td>1.441288×2<sup>-9</sup></td>
<td>0.0028150</td>
<td>log<sub>2</sub>(1+2<sup>-9</sup>)</td>
</tr>
<tr>
<td>1.439885×2<sup>-8</sup></td>
<td>0.0056245</td>
<td>log<sub>2</sub>(1+2<sup>-8</sup>)</td>
</tr>
<tr>
<td>1.437089×2<sup>-7</sup></td>
<td>0.0112273</td>
<td>log<sub>2</sub>(1+2<sup>-7</sup>)</td>
</tr>
<tr>
<td>1.431540×2<sup>-6</sup></td>
<td>0.0223678</td>
<td>log<sub>2</sub>(1+2<sup>-6</sup>)</td>
</tr>
<tr>
<td>1.442343×2<sup>-11</sup></td>
<td>0.0007043</td>
<td>log<sub>2</sub>(1+2<sup>-11</sup>)</td>
</tr>
<tr>
<td>1.441991×2<sup>-10</sup></td>
<td>0.0014082</td>
<td>log<sub>2</sub>(1+2<sup>-10</sup>)</td>
</tr>
<tr>
<td>1.420612×2<sup>-5</sup></td>
<td>0.0443941</td>
<td>log<sub>2</sub>(1+2<sup>-5</sup>)</td>
</tr>
<tr>
<td>1.399405×2<sup>-4</sup></td>
<td>0.0874628</td>
<td>log<sub>2</sub>(1+2<sup>-4</sup>)</td>
</tr>
<tr>
<td>1.442607×2<sup>-13</sup></td>
<td>0.0001761</td>
<td>log<sub>2</sub>(1+2<sup>-13</sup>)</td>
</tr>
<tr>
<td>1.442519×2<sup>-12</sup></td>
<td>0.0003522</td>
<td>log<sub>2</sub>(1+2<sup>-12</sup>)</td>
</tr>
<tr>
<td>1.359400×2<sup>-3</sup></td>
<td>0.1699250</td>
<td>log<sub>2</sub>(1+2<sup>-3</sup>)</td>
</tr>
<tr>
<td>1.287712×2<sup>-2</sup></td>
<td>0.3219281</td>
<td>log<sub>2</sub>(1+2<sup>-2</sup>)</td>
</tr>
<tr>
<td>1.442673×2<sup>-15</sup></td>
<td>0.0000440</td>
<td>log<sub>2</sub>(1+2<sup>-15</sup>)</td>
</tr>
<tr>
<td>1.442651×2<sup>-14</sup></td>
<td>0.0000881</td>
<td>log<sub>2</sub>(1+2<sup>-14</sup>)</td>
</tr>
</tbody></table></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
10 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18が</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">繰り返される</font><font style="vertical-align: inherit;">理由がわかりません</font><font style="vertical-align: inherit;">。おそらく違いは指数関数的です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
物理的には、定数は3つのグループに分かれています。最初のグループは、ユーザーがロードできる値（1、π、log </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 10、log </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e、log </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2、およびln）と、内部使用の値（10 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ln（2）/ 3、3 *）です。 log </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（e）、log </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（e）および√2）。 2番目のグループは16のアークタンジェント定数で構成され、3番目のグループは14 log </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定数で構成されます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8087では、定数を直接ロードするための7つの命令があります。命令FDLZ、FLD1、FLDPI、FLD2T、FLD2E、FLDLG2、およびFLDLN2は、定数0、1、π、log </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 10、log </font><sub><font style="vertical-align: inherit;">2</font></sub><font style="vertical-align: inherit;">をスタックにロードします</font></font><sub><font style="vertical-align: inherit;"></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e、</font><font style="vertical-align: inherit;">それぞれ</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2とln 2を記録します。</font><font style="vertical-align: inherit;">0を除くこれらの定数はすべてROMに格納されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後の2つの定数グループは、CORDICアルゴリズムを使用して超越関数を計算するために使用されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CORDICアルゴリズム</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROMからの定数により、8087アルゴリズムの動作の詳細を見つけることができます。ROMには、アークタンジェント用の16個の値、2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-n</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">からのアークタンジェントが含まれています</font><font style="vertical-align: inherit;">。また、（1 + 2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-n</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">の底2に14の対数が格納され</font><font style="vertical-align: inherit;">ます。このような値は異常に見えるかもしれませんが、それらは1958年に発明された効率的なCORDICアルゴリズムで使用されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CORDICの考え方は、タンジェントとアークタンジェントは、これらの角度によるベクトルの回転で角度をより小さなものに分解することによって計算できるということです。トリックは、正しい小さな角度を選択した場合、三角関数の代わりに有効なシフトと加算により各回転を計算できることです。 tan（z）を見つける必要があるとします。 zを小さな角度の合計に分割できます：z≈{atan（2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-1</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）または0} + {atan（2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-2</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）またはATAN 0} + {（2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-3</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）または0} + ... + {ATAN（2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-16</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または0}。あなたは（2 ATAN、たとえば、によってベクトルを回転させることができる</font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-2</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）2を乗じ</font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-2</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および添加。</font><font style="vertical-align: inherit;">結論として、2-2の</font><font style="vertical-align: inherit;">乗算</font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビット単位の高速シフトによって実行されます。これらすべてを考慮に入れると、zをatan定数と比較することで、tan（z）を計算できます。 atanは事前に計算され、ROMに格納されます。逆正接も同様の方法で計算されますが、逆も同様です。回転の過程で、角度（ROMと定数）が合計され、最終的な角度が得られます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
対数と指数を計算するとき、CORDICアルゴリズムとそれに対応する対数定数も使用されます。ここでの主なことは、（1 + 2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-n</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">による乗算は</font><font style="vertical-align: inherit;">、シフトと加算を使用してすばやく実行できることです。対数と指数は、方程式の片側に一連の値を掛け、対応する対数定数をもう一方に加算することで計算できます。 8087のドキュメントの対数と指数を計算するためのアルゴリズムによると、私はそれを見つけられませんでした。私はそれらが</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次の記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">説明するものと似ていると思います</font><font style="vertical-align: inherit;">。8087だけがeの代わりに2を使用します。8087が</font><font style="vertical-align: inherit;">そのアルゴリズムに必要な</font><font style="vertical-align: inherit;">log </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定数</font><font style="vertical-align: inherit;">（1 + 2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-1</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">を持たない理由がわかりません</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8087での超越関数のサポートは、予想したほど広範囲ではありません。</font><font style="vertical-align: inherit;">サインとコサインなしで、タンジェントとアークタンジェントのみをサポートします。</font><font style="vertical-align: inherit;">後者を計算するには、三角関数のアイデンティティを適用する必要があります。</font><font style="vertical-align: inherit;">対数と指数は2を底とするだけをサポートします-底が10またはeの場合、ユーザーはスケール係数を適用する必要があります。</font><font style="vertical-align: inherit;">かつて、8087はチップの容量の制限を拡張したため、命令の数は最小限に抑えられました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8087は複雑なチップであり、一見すると絶望的に絡み合った迷路のように見えます。ただし、ほとんどの場合、注意深く検討すれば理解できます。そのROMには42の定数が保存されており、それらの値は顕微鏡を使用して抽出できます。一部の定数（例：π）が予期されていましたが、他の定数（例：ln（2）/ 3）はさらに質問を投げかけています。定数の多くは、CORDICアルゴリズムを使用してタンジェント、アークタンジェント、対数、および度を計算するために使用されます。</font><i><font style="vertical-align: inherit;">金属層のない結晶8087の写真。クリック可能。</font></i></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/er/8g/3t/er8g3tlcli1uc7ag_qe-todazvy.jpeg"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
浮動小数点演算用のIntel 8087は40年前に導入されましたが、その影響は依然として感じられます。</font><font style="vertical-align: inherit;">彼は、ほとんどの算術計算で使用される浮動小数点数のIEEE 754標準を生み出し、8087命令は、ほとんどのコンピューターで使用されるx86プロセッサーの一部として残っています。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja503014/index.html">先延ばし用のストロー</a></li>
<li><a href="../ja503024/index.html">ブランド保護：EUと2020年のスケーリング</a></li>
<li><a href="../ja503026/index.html">CSSアニメーションをアップグレードする</a></li>
<li><a href="../ja503028/index.html">.NET Coreでのイメージの読み込みと処理</a></li>
<li><a href="../ja503032/index.html">Kubernetesでの長いDNS解決</a></li>
<li><a href="../ja503036/index.html">バイオメトリクスと医療用マスク：流行との闘いがテクノロジーにどのように役立つか</a></li>
<li><a href="../ja503040/index.html">ゾンビウイルスのような「スパニアード」は永久凍土で生き残ることができますか？</a></li>
<li><a href="../ja503042/index.html">Red Teamingに関する5つの神話</a></li>
<li><a href="../ja503052/index.html">マイクロフロントの自動化、またはTinkoffでのコンポーネントライブラリのテスト方法</a></li>
<li><a href="../ja503054/index.html">一杯のコーヒーの滴と量子力学の共通点は何ですか？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>