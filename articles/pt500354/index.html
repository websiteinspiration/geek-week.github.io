<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🔧 🍍 🌻 Uma nova maneira de rastrear dados no Gerenciador de tags do Google - Etiquetagem no servidor 🧑🏾 🔚 👩🏽‍🤝‍👨🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Neste artigo, quero falar sobre um novo recurso do Gerenciador de tags do Google - etiquetagem no servidor - rastreando dados no servidor. Essa funcio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Uma nova maneira de rastrear dados no Gerenciador de tags do Google - Etiquetagem no servidor</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500354/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neste artigo, quero falar sobre um novo recurso do Gerenciador de tags do Google - etiquetagem no servidor - rastreando dados no servidor. </font><font style="vertical-align: inherit;">Essa funcionalidade, de acordo com seus desenvolvedores, permite ocultar a lógica de negócios no código do servidor, acelerar o carregamento do site e melhorar a proteção de dados do usuário, restringindo o acesso a scripts de terceiros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos dar uma olhada em como isso funciona.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qual é a diferença entre o acompanhamento do lado do cliente e o do servidor</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A maioria dos gerenciadores de tags, sistemas analíticos e serviços de publicidade existentes coleta dados usando o método de rastreamento no lado do cliente, ou seja, no lado do cliente. </font><font style="vertical-align: inherit;">Como funciona? </font><font style="vertical-align: inherit;">Há um site ou aplicativo que possui um navegador específico instalado e um serviço de terceiros, como o Google Analytics. </font><font style="vertical-align: inherit;">O navegador envia a solicitação diretamente para este serviço e, se necessário, recebe uma resposta. </font><font style="vertical-align: inherit;">Ou seja, a interação ocorre entre duas partes: um navegador e um serviço de terceiros.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ds/4b/us/ds4bus_mvjfd8q1sk52m_0ysszy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao rastrear dados no lado do servidor (Rastreamento no lado do servidor), um ponto intermediário é adicionado. </font><font style="vertical-align: inherit;">No caso do Google Tag Manager, é um servidor em nuvem. </font><font style="vertical-align: inherit;">No lado do cliente, a solicitação vai primeiro para o servidor em nuvem, depois o servidor processa essa solicitação e a envia para um sistema de terceiros (Google Analytics). </font><font style="vertical-align: inherit;">Ou seja, em vez do navegador do cliente, a solicitação é feita pelo servidor em nuvem.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gc/la/ng/gclang-u_bcky4xgjvcn3r0hsbi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, vamos dar uma olhada nas principais vantagens e desvantagens dos dois métodos de coleta de dados.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acompanhamento do lado do cliente</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa é a maneira mais comum de coletar dados de um site. </font><font style="vertical-align: inherit;">O rastreamento no lado do navegador do usuário permite que você receba dados de cookies, parâmetros de URL, fontes de referência, informações do dispositivo do usuário, endereço IP, etc. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benefícios</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esse é o padrão usado por todos os gerenciadores de tags conhecidos por você e com os quais a maioria dos analistas está acostumada.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O rastreamento do lado do cliente é fácil de configurar. </font><font style="vertical-align: inherit;">Muitos sistemas fornecem fragmentos de código prontos que você só precisa copiar e colocar nas páginas do site.</font></font></li>
<li> . ,   ,       Chrome      Google Tag Manager.</li>
<li>Client-Side Tracking,  ,   Server-Side Tracking,        .</li>
</ol><br>
<b></b><br>
<br>
<ol>
<li>         . ,          .</li>
<li>      ,     ,    .     ITP —    Safari   ,     cookie    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os dados são menos seguros do que com o acompanhamento no servidor. </font><font style="vertical-align: inherit;">Portanto, você não pode transferir informações confidenciais do site dessa maneira, por exemplo, números de telefone e margens de email e de usuário.</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rastreamento do lado do servidor</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Rastreamento no lado do servidor é uma alternativa ao método usual de rastreamento no lado do cliente, que permite resolver o problema com bloqueadores de anúncios, a transferência de dados confidenciais e a velocidade de carregamento da página. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benefícios</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O envio de solicitações não depende da versão ou do tipo do seu navegador. </font><font style="vertical-align: inherit;">Todas as solicitações são processadas no lado do servidor; portanto, bloqueadores de anúncios, ITP, ETP ou uma conexão interrompida não afetam a qualidade dos seus dados.</font></font></li>
<li>    ,  ,  c     Google Analytics  ,       ,  ,   .</li>
<li>Server-Side Tracking             ,         .</li>
<li>         .  ,    ,       .  Server-Side Tracking     .</li>
</ol><br>
<b></b><br>
<br>
<ol>
<li>          .</li>
<li>   .         .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Não é adequado para coletar informações de páginas de SPA ou PWA.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nem todos os sistemas usam tags disponíveis para rastreamento do lado do servidor.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O método não é conveniente para coletar parâmetros de URL. </font><font style="vertical-align: inherit;">Eles são muito mais fáceis de coletar no lado do cliente, pois esses dados aparecem no navegador.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, vamos ver os benefícios do rastreamento no servidor em que a equipe do Gerenciador de tags do Google se concentrou.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rastreamento do lado do servidor GTM: benefícios reivindicados</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O rastreamento do lado do servidor permite ocultar a lógica comercial do seu site, interagindo com aplicativos de terceiros, movendo-o para o back-end. Ou seja, o usuário não poderá acessar as informações e a lógica que você usa para transferir dados. Por exemplo, você pode enviar margens honestas para o GA e, no lado do cliente, no navegador do usuário, não haverá essa variável. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este método é mais seguro em termos de movimentação de dados. As informações que você deseja enviar para análise, por exemplo, um segmento do CRM, sexo ou qualquer outra coisa relacionada ao usuário, agora não precisam ser enviadas ao navegador. Portanto, isso não estará disponível para outros scripts JS no navegador.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como aconteceu antes: digamos que você deseja obter o hash do número de telefone, sexo ou endereço de usuário no GA. </font><font style="vertical-align: inherit;">Para enviar essas informações, você deve disponibilizá-las no DataLayer. </font><font style="vertical-align: inherit;">E as informações do DataLayer estão disponíveis para todo o JavaScript carregado no navegador. </font><font style="vertical-align: inherit;">Esse é um escopo comum, não há variáveis ​​privadas, ao contrário do Python, por exemplo. </font><font style="vertical-align: inherit;">Se você passar essas informações pelo back-end, elas não estarão disponíveis no ambiente do navegador JavaScript do usuário. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Além da segurança dos dados, entre as vantagens do rastreamento no servidor, a equipe do Google também destaca a oportunidade de aumentar a velocidade de carregamento do site.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como experimentar a marcação no servidor no Gerenciador de tags do Google</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, não há como compartilhar com você instruções sobre como configurar o rastreamento no servidor, pois esta é uma versão beta com acesso limitado. </font><font style="vertical-align: inherit;">Para acessá-lo, você precisa preencher e enviar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um formulário da Lista de permissões</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ao Google </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de obter permissão e instruções do Google, para configurar o acompanhamento no servidor, você precisará:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conta do Google Cloud Platform</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acesso ao registrador de nomes de domínio do seu site</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acesso para publicar conteúdo no seu site, pois o método requer a colocação de um contêiner GTM</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nós da OWOX BI já conseguimos testar a nova funcionalidade. Em resumo, como funciona e qual é a diferença do rastreamento padrão usando o Gerenciador de tags do Google. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como o rastreamento do lado do cliente funciona</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Temos um site ou aplicativo. Instalamos o contêiner no site do GTM e configuramos as tags nele. O contêiner envia os dados para o GA. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ye/3a/8y/ye3a8yyjt0wzvmhxaqecjovjns8.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como funciona o lado do servidor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Temos um site ou aplicativo. Novamente, estamos configurando um contêiner da web GTM com todas as tags. Em seguida, configuramos o ambiente em um domínio dedicado. Configure um contêiner para este ambiente. E a solicitação já não sai diretamente do navegador por meio de um contêiner da Web, mas por um link intermediário na forma de um servidor em nuvem: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zu/5a/mq/zu5amq-x80wajy58qkcwaraqhkm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
após a configuração padrão do recurso do Google Analytics, os dados começam a ser coletados:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hb/ji/hd/hbjihdhbtna5you9mb-kkqrd_we.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Há um custo adicional pelo uso de um servidor em nuvem, que depende do número de usuários e solicitações no seu site.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">achados</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Devo usar o rastreamento do lado do servidor? </font><font style="vertical-align: inherit;">A resposta a esta pergunta depende de quais dados você deseja coletar e para quais finalidades; </font><font style="vertical-align: inherit;">o que é mais importante para você é a oportunidade de economizar tempo e dinheiro ou a capacidade de transferir dados confidenciais para o sistema de análise. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como a funcionalidade ainda está na versão beta, alternar completamente para ela e desativar o rastreamento regular não valem a pena (e não dará certo). </font><font style="vertical-align: inherit;">No entanto, agora você pode solicitar acesso à equipe do Google para testar o acompanhamento no servidor e decidir se será útil para sua empresa.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt500342/index.html">Quais podcasts o "Comitê", o "Habr" e o Sports.ru têm</a></li>
<li><a href="../pt500344/index.html">Casa inteligente sobre rodas ... Alice. Parte 2. ZIGBEE</a></li>
<li><a href="../pt500346/index.html">Problemas com o DNS no Kubernetes. Post-mortem público</a></li>
<li><a href="../pt500348/index.html">Pandemia de COVID-19 através dos olhos de um matemático, ou por que o modelo SEIRD clássico não funciona</a></li>
<li><a href="../pt500352/index.html">Como obter um estágio no Facebook e obter uma oferta em Londres? Faça uma pergunta a um engenheiro do Facebook</a></li>
<li><a href="../pt500356/index.html">Transferência direta de arquivos entre dispositivos via WebRTC</a></li>
<li><a href="../pt500360/index.html">Melhores perguntas sobre entrevistas com dificuldade média do SQL</a></li>
<li><a href="../pt500364/index.html">Expandindo o portal de aprendizado escolar no Moodle e BigBlueButton</a></li>
<li><a href="../pt500368/index.html">Gerando seqüências aleatórias previsíveis: uma abordagem diferente da permutação</a></li>
<li><a href="../pt500370/index.html">10 podcasts úteis em inglês para programadores que valem a pena assinar em 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>