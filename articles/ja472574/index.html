<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍🌾 🚈 ☎️ Minecraftを作成する：キューブから3Dレベルを生成する ⛪️ 🐲 🎠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Minecraft の人気のおかげもあり、最近では3Dレリーフで構築され、洞窟や崖などの要素で満たされた立方体の世界で行われるゲームのアイデアへの関心が高まっています。このような世界は、私のANLライブラリのスタイルで生成されるノイズの理想的なアプリケーションです。この記事は、この手法を実装するため...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Minecraftを作成する：キューブから3Dレベルを生成する</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/472574/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/jj/va/ccjjvazyarduee258az9-bbggkq.png"></div><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minecraft</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の人気のおかげ</font><font style="vertical-align: inherit;">もあり、最近では3Dレリーフで構築され、洞窟や崖などの要素で満たされた立方体の世界で行われるゲームのアイデアへの関心が高まっています。このような世界は、私の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ANL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリのスタイルで生成されるノイズの理想的なアプリケーションです</font><font style="vertical-align: inherit;">。この記事は、</font><font style="vertical-align: inherit;">この手法</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">するため</font></a><font style="vertical-align: inherit;">の私の以前の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">試みの</font></a><font style="vertical-align: inherit;">議論から生じました</font><font style="vertical-align: inherit;">。それ以来、ライブラリの構造に小さな変更が加えられました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前の投稿では、3Dノイズ機能を使用してMinecraftスタイルの地形を実装する方法について説明しました。その後、ライブラリは少し進化したので、このトピックに戻ることにしました。私はこのシステムについて多くの質問に答えなければならなかったので、関連する概念についてもっと話したいと思います。基本的な概念をより明確にするために、私はTerrariaやKing Arthur's Goldなどのゲームで使用される2D地形を生成するアイデアから始め、次にMinecraftのような3D例にシステムを拡張します。これにより、イメージを例として使用して、概念をより効果的に示すことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このシステムは、次の抽象的な目標を考慮して開発されました。特定のポイントまたはセルの座標をシステムに渡し、この場所にあるブロックのタイプを決定できる必要があります。システムを「ブラックボックス」にしたい：ポイントを渡し、ブロックタイプを返します。もちろん、これは世界の最初の世代にのみ適用されます。そのようなゲームのブロックはプレーヤーのアクションによって変更される可能性があり、同じシステムを使用してそのような変更を説明しようとすると不便になります。このような変更は、他の方法で追跡する必要があります。このシステムは、プレイヤーの手や他のキャラクターの手に触れられない、手付かずのオリジナルの世界を生成します。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おそらく、このようなシステム自体が複雑なエンティティであり、暗黙的にモデル化することが容易ではないため、この手法は、草やその他の生物学的エンティティなどのシステムのモデリングには適していません。同じことが、降雪や氷の形成などのシステムにも当てはまります。この記事で説明する手法は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暗黙的な方法です</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、つまりある点で推定でき、特定の点での値が周囲の値に依存しないもの。正確なシミュレーションを実行するために、生物学的およびその他のタイプのシステムは通常、環境値を考慮する必要があります。例：ブロックに当たる日光の量は？近くに水はありますか？これらの質問やその他の質問に答えて、生物学的システムの成長と広がりをシミュレーションする必要があります。また、この手法は水のモデリングには適していません。このシステムでは、流れの概念、流体力学や重力の知識はありません。水は複雑なトピックであり、多くの複雑な計算が必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、地球と石をモデル化しているだけです。与えられた場所が何であるかを示す関数が必要です：土、砂、空気、金、鉄、石炭など...しかし、私たちは最も単純なものから始めます。ブロックが中実であるか中空であるか（空気で満たされているか）を通知する関数が必要です。この関数は、私たちを取り巻く地球をシミュレートする必要があります。つまり、空は上にあり、地球は下にあります。それでは、聖書の仕事を引き受けて、空を地球から切り離してみましょう。これを行うには、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">勾配</font></a><font style="vertical-align: inherit;">関数を調べます</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Gradient関数は、N次元空間（つまり、2D、3D、またはそれ以上の任意の座標空間）でラインセグメントを渡され、このセグメントに沿った勾配フィールドを計算します。</font><font style="vertical-align: inherit;">着信座標はこのセグメントに投影され、その勾配値は、セグメントの端点を基準にして座標がどこにあるかに応じて計算されます。</font><font style="vertical-align: inherit;">投影されたポイントには、間隔（-1.1）の値が割り当てられます。</font><font style="vertical-align: inherit;">そして、これは私たちにとって良いスタートです。</font><font style="vertical-align: inherit;">Y軸に沿って勾配関数を定義できます。間隔の上部で勾配フィールドを-1（空気）と比較し、下部で1（地球）と比較します。</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terraintree =</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "ground_gradient"、type = "gradient"、x1 = 0、x2 = 0、y1 = 0、y2 = 1}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（レコードを簡単に説明します。例のコードはLua宣言テーブルに記述されています。形式の詳細については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Luaの統合</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に関するセクションを参照してください</font><font style="vertical-align: inherit;">。基本的に、この形式は、広告を読み取り、それらをノイズモジュールインスタンスツリーに変換する特別なクラスによる解析用に設計されています。私はこれを好みますこの形式は、よりコンパクトでクリーンなため、より詳細な段階的なC ++形式です。私の意見では、ソースコードはC ++コードよりも読みやすく、圧縮されています。ほとんどの場合、宣言は読みやすく、理解しやすくなっています。モジュールには名前があり、ソースには名前または値が与えられます。コードLuaでは、テーブル宣言の解析に使用されますが、これらの宣言を直接使用する場合に備えて、ソースコードに含まれています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2Dの場合、Gradient関数は（x1、x2、y1、y2）の形式で直線セグメントを受け取り、3Dの場合、フォーマットは（x1、x2、y1、y2、z1、z2）に拡張されます。 （x1、y1）によって形成される点は、0に関連付けられた線分の始まりを示します。（x2、y2）によって形成される点は、1に関連付けられた線分の終わりです。つまり、ここでは、線分（0,1）-&gt;（ 0,0）グラデーション付き。したがって、勾配は関数Y = 1とY = 0の領域の間になります。つまり、このストリップはYで世界の寸法を形成します。世界のどの部分もこのストリップに含まれます。 Xに沿って任意の領域をスナップできます（ほぼ無限大までですが、ここでは精度が制限されます</font></font><code>double</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、しかしすべて興味深い、すなわち地球の表面はこのバンドの中にあります。この振る舞いは変更できますが、その中で私たちはより高い柔軟性を持っています。上の値は空気である可能性が最も高く、下の値は接地されているため、この帯域より上または下の値はほとんど関心がない可能性が高いことを忘れないでください。 （すぐにわかるように、このステートメントは誤っている可能性があります。）このシリーズのほとんどの画像では、2D空間で正方形（0,1）-&gt;（1,0）によって与えられる正方形領域を一致させます。したがって、最初の世界は次のようになります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5f6/09d/543/5f609d54326fa4c746b5b391b1f75c6a.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これまでに興味深いことは何もありません。さらに、この画像は「与えられた点は中実か中空か」という質問には答えません。この質問に答えるには、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ関数</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（区分的に定義された関数）</font><font style="vertical-align: inherit;">を適用する必要があります</font><font style="vertical-align: inherit;">。滑らかなグラデーションの代わりに、片側のすべての場所が中空で、反対側のすべての場所が中実である明確な分離が必要です。で</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ANL、</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは使用して実装することができる</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">選択</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能を</font><font style="vertical-align: inherit;">。選択関数は2つの受信関数または値を受け取り（この場合、それらは「ソリッド」および「中空」（オープン）に等しくなります）、制御関数の値（この場合はグラデーション）に基づいてそれらを選択します。 Selectモジュールには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しきい値</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><b><font style="vertical-align: inherit;">フォールオフの</font></b><font style="vertical-align: inherit;"> 2つの追加パラメーターがあります</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このプロセスに影響します。</font><font style="vertical-align: inherit;">この段階では、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォールオフは</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">望ましくないため、0に等しくします。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しきい値</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメーター</font><font style="vertical-align: inherit;">は、ソリッドとオープンの間の境界線がどこに行くかを決定します。</font><font style="vertical-align: inherit;">Gradient関数でこの値よりも大きいものはすべてSolidになり、しきい値よりも小さいものはすべてOpenになります。</font><font style="vertical-align: inherit;">グラデーションは間隔を0と1の値と比較するため、しきい値を0.5に配置するのが論理的です。</font><font style="vertical-align: inherit;">したがって、スペースを正確に半分に分割します。</font><font style="vertical-align: inherit;">値1は中実の位置になり、値0は中空になります。</font><font style="vertical-align: inherit;">つまり、地球平面の機能を次のように定義します。</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terraintree =</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "ground_gradient"、type = "gradient"、x1 = 0、x2 = 0、y1 = 0、y2 = 1}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{名前= "ground_select"、タイプ= "select"、低= 0、高= 1、しきい値= 0.5、コントロール= "ground_gradient"}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前と同じ機能の領域を比較すると、類似したものが得られます：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/35a/d9c/4b5/35ad9c4b583840222252f7c136ba983a.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この写真は、与えられた点が中実か中空かという質問に明確に答えます。</font><font style="vertical-align: inherit;">2D空間の任意の可能な座標で関数を呼び出すことができます。その結果は、地球の表面に対する点の位置に応じて、1または0になります。</font><font style="vertical-align: inherit;">ただし、そのような関数は特に興味深いものではなく、無限に伸びる平坦な線にすぎません。</font><font style="vertical-align: inherit;">画像を復活させるために、「乱気流」と呼ばれる手法を使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「乱流」は、関数の入力座標に値を追加するという概念の複雑な指定です。上記の地球の関数を（0,1）座標で呼び出すと想像してください。 Y = 1の場合、勾配の値は0であり、しきい値= 0.5より小さいため、地面の上にあります。つまり、このポイントはオープンとして計算されます。しかし、地球の機能を呼び出す前に、この点を何らかの形で変換するとどうなるでしょうか。 Y座標からランダムな値、たとえば3を減算するとします。3を減算して座標（0、-2）を取得します。ここでこのポイントのグラウンド関数を呼び出すと、Y = -2が1に対応するグラデーションセグメントの下にあるため、ポイントはソリッドと見なされます。固い石のブロックが宙に浮いています。これは、関数の任意のポイントで実行できます。ground_select関数を呼び出す前に、入力ポイントのY座標から乱数を加算または減算します。これは、これを示すground_select関数の画像です。 ground_select関数を呼び出す前に、間隔の値（-0.25、0.25）が各ポイントのY座標に追加されます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f28/273/32e/f2827332ed068acf376b4b6cfbf0853d.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、平らな線よりも興味深いですが、地球にあまり似ていません。各点が完全にランダムな値に移動し、カオスパターンが作成されるためです。</font><font style="vertical-align: inherit;">ただし、</font><b><font style="vertical-align: inherit;">ANL</font></b><font style="vertical-align: inherit;">ライブラリの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fractal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">などの連続ランダム関数を使用する</font><font style="vertical-align: inherit;">と、ランダムパターンの代わりに、より制御しやすいものが得られます。</font><font style="vertical-align: inherit;">したがって、フラクタルを地球平面に接続して、何が起こるかを見てみましょう。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terraintree =</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "ground_gradient"、type = "gradient"、x1 = 0、x2 = 0、y1 = 0、y2 = 1}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "ground_shape_fractal"、type = "fractal"、fractaltype = anl.FBM、basistype = anl.GRADIENT、interptype = anl.QUINTIC、octaves = 6、frequency = 2}、</font></font><font></font>
	{name="ground_scale",             type="scaleoffset",        scale=0.5, offset=0, source="ground_shape_fractal"},<font></font>
	{name="ground_perturb",           type="translatedomain",    source="ground_gradient", ty="ground_scale"},<font></font>
	<font></font>
	{name="ground_select",            type="select",             low=0, high=1, threshold=0.5, control="ground_perturb"}<font></font>
}<font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いくつかの側面に注目する価値があります。まず、フラクタルモジュールを定義し、それを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScaleOffset</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モジュールにチェーンします</font><font style="vertical-align: inherit;">。 ScaleOffsetモジュールは、出力フラクタル値をより便利なレベルにスケーリングします。地形の一部は山岳であり、より大きなスケールを必要とする場合があり、別の部分-より平坦で小規模です。さまざまなタイプの地形については後で説明しますが、ここではデモンストレーションに使用します。関数の出力値は次の図のようになります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8ca/56e/b55/8ca56eb55e7febec86f3dd80fcea2d0e.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは単なるランダムノイズよりも興味深いですね。少なくとも、土地のように見えますが、風景の一部は異常に見え、空に浮かぶ島々は完全に奇妙です。これは、出力マップの各ポイントがフラクタルによって決定される異なる値によってランダムにシフトされるためです。これを説明するために、歪みを実行するフラクタル出力を示します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fbd/67d/b62/fbd67db6235a14fdf6d734d2ac73f560.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上の画像では、すべての黒い点の値が-0.25で、すべての白い点の値が0.25です。つまり、フラクタルが黒の場合、地球の機能の対応するポイントは0.25だけ「下」にシフトします。 （0.25は画面の1/4を意味します。）1点は少しずれて、その上の空間のもう1点はさらにずれることがあるため、岩や島がはみ出す可能性があります。自然の中の突起は、空飛ぶ島とは異なり、かなり自然です。 （私たちが映画「アバター」にいる場合を除きます。）ゲームがそのような素晴らしい風景を必要とする場合は素晴らしいですが、より現実的なモデルが必要な場合は、フラクタル関数を少し調整する必要があります。さいわい、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScaleDomain</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数は</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">これを</font></a><font style="vertical-align: inherit;">実行できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数を高さマップ関数のように動作させたい。 2Dの高さマップを想像してください。マップ上の各ポイントは、上下に上げられたグリッドポイントのグリッド内のポイントの高さを表します。マップの白い値は高い丘、黒い-低い谷を示します。同様の動作が必要ですが、それを実現するには、基本的にいずれかの次元を取り除く必要があります。高さマップの場合、2D高さマップから3D標高を作成します。同様に、2D地形の場合、1Dの高さマップが必要です。同じY座標を持つフラクタルのすべてのポイントが同じ値を持つように作成したので、同じX座標を持つすべてのポイントを同じ量だけシフトできるため、空飛ぶ島が消えます。これはScaleDomainを使用して、係数</font><b><font style="vertical-align: inherit;">scaleyを</font></b><font style="vertical-align: inherit;">ゼロにすることができます</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">つまり、ground_shape_fractal関数を呼び出す前に、ground_scale_yを呼び出してy座標を0に設定します。これにより、Y値がフラクタルの出力に影響を与えず、基本的に1Dノイズ関数に変換されます。</font><font style="vertical-align: inherit;">これを行うには、次の変更を行います。</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terraintree =</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "ground_gradient"、type = "gradient"、x1 = 0、x2 = 0、y1 = 0、y2 = 1}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "ground_shape_fractal"、type = "fractal"、fractaltype = anl.FBM、basistype = anl.GRADIENT、interptype = anl.QUINTIC、octaves = 6、frequency = 2}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "ground_scale"、type = "scaleoffset"、scale = 0.5、offset = 0、source = "ground_shape_fractal"}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "ground_scale_y"、type = "scaledomain"、source = "ground_scale"、scaley = 0}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "ground_perturb"、type = "translatedomain"、source = "ground_gradient"、ty = "ground_scale_y"}、</font></font><font></font>
	<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{名前= "ground_select"、タイプ= "select"、低= 0、高= 1、しきい値= 0.5、制御= "ground_perturb"}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ScaleDomain関数をGround_scaleにチェーンし、元のGround_perturbデータをScaleDomain関数に変更します。</font><font style="vertical-align: inherit;">これにより、地球を変位させるフラクタルが変化し、それが似たようなものになります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ca7/e79/4dc/ca7e794dc19c6922c6278cfdf3437caf.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
出力を確認すると、結果が得られます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bb2/31a/5d6/bb231a5d6c2e0cfb1f8181ba6de1dc61.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ずっといい。</font><font style="vertical-align: inherit;">飛んでいる島々は完全に姿を消し、レリーフは山や丘に似ています。</font><font style="vertical-align: inherit;">残念ながら、私たちは突起や崖を失いました。</font><font style="vertical-align: inherit;">現在、地球全体は連続的で傾斜しています。</font><font style="vertical-align: inherit;">必要に応じて、いくつかの方法でこれを修正できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、別の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TranslateDomain</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数を</font><font style="vertical-align: inherit;">、別の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fractal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数と組み合わせて</font><font style="vertical-align: inherit;">使用できます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">X方向に少量のフラクタル乱気流を適用すると、山の端と表面をわずかに歪める可能性があり、これでおそらく断崖と棚を形成するのに十分でしょう。</font><font style="vertical-align: inherit;">実際に見てみましょう。</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terraintree =</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "ground_gradient"、type = "gradient"、x1 = 0、x2 = 0、y1 = 0、y2 = 1}、</font></font><font></font>
	{name="ground_shape_fractal",     type="fractal",            fractaltype=anl.FBM, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=6, frequency=2},<font></font>
	{name="ground_scale",             type="scaleoffset",        scale=0.5, offset=0, source="ground_shape_fractal"},<font></font>
	{name="ground_scale_y",           type="scaledomain",        source="ground_scale", scaley=0},<font></font>
	{name="ground_perturb",           type="translatedomain",    source="ground_gradient", ty="ground_scale_y"},<font></font>
	{name="ground_overhang_fractal",  type="fractal",            fractaltype=anl.FBM, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=6, frequency=2},<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "ground_overhang_scale"、type = "scaleoffset"、source = "ground_overhang_fractal"、scale = 0.2、offset = 0}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "ground_overhang_perturb"、type = "translatedomain"、source = "ground_perturb"、tx = "ground_overhang_scale"}、</font></font><font></font>
	<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{名前= "ground_select"、タイプ= "select"、低= 0、高= 1、しきい値= 0.5、制御= "ground_overhang_perturb"}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてここに結果があります：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c3/09f/c4e/4c309fc4e22125fa2083d5bf33e4dc20.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第二の方法：あなたは、単に設定できる</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とscaleY</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のパラメータ</font><b><font style="vertical-align: inherit;">ground_scale_yの</font></b><font style="vertical-align: inherit;">機能を</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">する</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が、規模が大きいほど、より強力な救済は、スケーリングせずに、以前のバージョンに似ている、あなたはYで小規模のままにした場合、我々は変化分を取得0より値が大きいです。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/225/f3f/746/225f3f7462f1c78bb48a3603363643aa.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果は、通常の傾斜した山よりもはるかに興味深いものに見えます。しかし、彼らがどれほど面白くても、プレイヤーは同じパターンで何キロにもわたってレリーフを探索することに飽き飽きします。さらに、そのような救済は非常に非現実的です。現実の世界では、地形をより面白くする多くの変動性があります。世界をより多様にするために何ができるか見てみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前のコード例を見ると、特定のパターンが見られます。地球に形を与える関数によって制御される勾配関数があります。その後、区分的に定義された関数が適用され、地球がいっぱいになります。つまり、地球を形作る段階でレリーフを複雑にする方がより論理的でしょう。 Yに沿って変位する1つのフラクタルとXに沿って変位する別のフラクタルの代わりに、必要な複雑さを実現できます（パフォーマンスを考慮に入れると、各フラクタルは追加の計算コストを必要とするため、保守的にする必要があります）。 、平坦な低地、荒れ地など...そしてさまざまな</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">選択</font></a><font style="vertical-align: inherit;">機能の出力を使用します</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">低周波フラクタルとチェーンで組み合わせて、各タイプの領域の輪郭を描きます。では、さまざまなタイプの地形を実装する方法を見てみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原則を説明するために、3つのタイプのレリーフを区別します。高原（滑らかな傾斜の丘）、山、低地（ほとんど平坦）です。それらを切り替えるには、選択ベースのシステムを使用して、それらを複雑なキャンバスに結合します。だから、私たちは始めます... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フットヒルズ：</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
すべてが彼らにとって簡単です。上で使用したスキームを使用して、丘の振幅をわずかに減らし、おそらくそれらを加算よりも減法にすることもできます。平均の高さを下げるため。また、オクターブ数を減らして滑らかにすることもできます。</font></font><br>
<br>
<pre>{name="lowland_shape_fractal",         type="fractal",          fractaltype=anl.FBM, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=2, frequency=1},<font></font>
{name="lowland_autocorrect",           type="autocorrect",      source="lowland_shape_fractal", low=0, high=1},<font></font>
{name="lowland_scale",                 type="scaleoffset",      source="lowland_autocorrect", scale=0.2, offset=-0.25},<font></font>
{name="lowland_y_scale",               type="scaledomain",      source="lowland_scale", scaley=0},<font></font>
{name="lowland_terrain",               type="translatedomain",  source="ground_gradient", ty="lowland_y_scale"},<font></font>
</pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハイランド：</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
すべてが彼らにとってもシンプルです。</font><font style="vertical-align: inherit;">（実際、これらの地形タイプはどれも難しいものではありません。）ただし、丘を砂丘のように見せるために別の基準を使用しています。</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{name = "highland_shape_fractal"、type = "fractal"、fractaltype = anl.RIDGEDMULTI、basistype = anl.GRADIENT、interptype = anl.QUINTIC、octaves = 2、frequency = 2}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{name = "highland_autocorrect"、type = "autocorrect"、source = "highland_shape_fractal"、low = 0、high = 1}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{name = "highland_scale"、type = "scaleoffset"、source = "highland_autocorrect"、scale = 0.45、offset = 0}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{name = "highland_y_scale"、type = "scaledomain"、source = "highland_scale"、scaley = 0}、</font></font><font></font>
{name="highland_terrain",              type="translatedomain",  source="ground_gradient", ty="highland_y_scale"},<font></font>
</pre><br>
<b>:</b><br>
<br>
<pre>{name="mountain_shape_fractal",        type="fractal",          fractaltype=anl.BILLOW, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=4, frequency=1},<font></font>
{name="mountain_autocorrect",          type="autocorrect",      source="mountain_shape_fractal", low=0, high=1},<font></font>
{name="mountain_scale",                type="scaleoffset",      source="mountain_autocorrect", scale=0.75, offset=0.25},<font></font>
{name="mountain_y_scale",              type="scaledomain",      source="mountain_scale", scaley=0.1},<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{name = "mountain_terrain"、type = "translatedomain"、source = "ground_gradient"、ty = "mountain_y_scale"}、</font></font><font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、このプロセスにさらに創造的に取り組むことができますが、一般的にパターンはそのようになります。</font><font style="vertical-align: inherit;">救済のタイプの特徴を強調し、それらのノイズ関数を選択します。</font><font style="vertical-align: inherit;">これらすべてについて、同じ原則が適用されます。</font><font style="vertical-align: inherit;">主な違いはスケールです。</font><font style="vertical-align: inherit;">次に、それらを接続するために、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">選択</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能を制御する追加のフラクタルを準備します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次に、選択モジュールをチェーンして、地形全体を生成します。</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{name = "terrain_type_fractal"、type = "fractal"、fractaltype = anl.FBM、basistype = anl.GRADIENT、interptype = anl.QUINTIC、octaves = 3、frequency = 0.5}、</font></font><font></font>
{name="terrain_autocorrect",           type="autocorrect",      source="terrain_type_fractal", low=0, high=1},<font></font>
{name="terrain_type_cache",            type="cache",            source="terrain_autocorrect"},<font></font>
{name="highland_mountain_select",      type="select",           low="highland_terrain", high="mountain_terrain", control="terrain_type_cache", threshold=0.55, falloff=0.15},<font></font>
{name="highland_lowland_select",       type="select",           low="lowland_terrain", high="highland_mountain_select", control="terrain_type_cache", threshold=0.25, falloff=0.15},<font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこで、ここでは低地、高地、山の3つの主要なタイプの地形を定義します。</font><font style="vertical-align: inherit;">1つのフラクタルを使用してそれらの1つを選択するため、自然な遷移（低地-&gt;高地-&gt;山）があります。</font><font style="vertical-align: inherit;">次に、別のフラクタルを使用して、ランダムにバッドランズをマップに挿入します。</font><font style="vertical-align: inherit;">完成したモジュールチェーンは次のようになります。</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terraintree =</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "lowland_shape_fractal"、type = "fractal"、fractaltype = anl.FBM、basistypetype = anl.GRADIENT、interptype = anl.QUINTIC、octaves = 2、frequency = 1}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "lowland_autocorrect"、type = "autocorrect"、source = "lowland_shape_fractal"、low = 0、high = 1}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "lowland_scale"、type = "scaleoffset"、source = "lowland_autocorrect"、scale = 0.2、offset = -0.25}、</font></font><font></font>
	{name="lowland_y_scale",               type="scaledomain",      source="lowland_scale", scaley=0},<font></font>
	{name="lowland_terrain",               type="translatedomain",  source="ground_gradient", ty="lowland_y_scale"},<font></font>
	{name="ground_gradient",               type="gradient",           x1=0, x2=0, y1=0, y2=1},<font></font>
	{name="highland_shape_fractal",        type="fractal",          fractaltype=anl.RIDGEDMULTI, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=2, frequency=2},<font></font>
	{name="highland_autocorrect",          type="autocorrect",      source="highland_shape_fractal", low=0, high=1},<font></font>
	{name="highland_scale",                type="scaleoffset",      source="highland_autocorrect", scale=0.45, offset=0},<font></font>
	{name="highland_y_scale",              type="scaledomain",      source="highland_scale", scaley=0},<font></font>
	{name="highland_terrain",              type="translatedomain",  source="ground_gradient", ty="highland_y_scale"},<font></font>
<font></font>
	{name="mountain_shape_fractal",        type="fractal",          fractaltype=anl.BILLOW, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=4, frequency=1},<font></font>
	{name="mountain_autocorrect",          type="autocorrect",      source="mountain_shape_fractal", low=0, high=1},<font></font>
	{name="mountain_scale",                type="scaleoffset",      source="mountain_autocorrect", scale=0.75, offset=0.25},<font></font>
	{name="mountain_y_scale",              type="scaledomain",      source="mountain_scale", scaley=0.1},<font></font>
	{name="mountain_terrain",              type="translatedomain",  source="ground_gradient", ty="mountain_y_scale"},<font></font>
<font></font>
	{name="terrain_type_fractal",          type="fractal",          fractaltype=anl.FBM, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=3, frequency=0.5},<font></font>
	{name="terrain_autocorrect",           type="autocorrect",      source="terrain_type_fractal", low=0, high=1},<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "terrain_type_cache"、type = "cache"、source = "terrain_autocorrect"}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "highland_mountain_select"、type = "select"、low = "highland_terrain"、high = "mountain_terrain"、control = "terrain_type_cache"、threshold = 0.55、falloff = 0.15}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "highland_lowland_select"、type = "select"、low = "lowland_terrain"、high = "highland_mountain_select"、control = "terrain_type_cache"、threshold = 0.25、falloff = 0.15}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{名前= "ground_select"、タイプ= "select"、低= 0、高= 1、しきい値= 0.5、コントロール= "highland_lowland_select"}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果のレリーフの例をいくつか示します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c4/60f/afe/4c460fafe39eec4680ac6eb3c341beef.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9c8/241/869/9c8241869337938b628d0b9a53a3e756.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/538/67a/f3a/53867af3a00abb26d5b0f32f5f728694.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
かなり高い変動性が得られることに気付くでしょう。</font><font style="vertical-align: inherit;">高くそびえる壊れた山々が現れる場所もあれば、滑らかな傾斜した平野がある場所もあります。</font><font style="vertical-align: inherit;">ここで洞窟を追加して、地下世界の不思議を探検できるようにする必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
洞窟については、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ground_selectに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">適用される乗法システムを使用し</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">つまり、1または0を出力する関数を作成し、それらに</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ground_select</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の出力を</font><b><font style="vertical-align: inherit;">乗算し</font></b><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これのおかげで、洞窟の関数の値が0である関数の任意の点が空洞になります。つまり、洞窟を取得したい場合、洞窟の関数は0を返し、洞窟がそうでない場合は、関数は1でなければなりません。形状については洞窟、1オクターブの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">リッジドマルチフラクタルに</font></a><font style="vertical-align: inherit;">基づく洞窟システムを確立したい</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{name = "cave_shape"、type = "fractal"、fractaltype = anl.RIDGEDMULTI、basistype = anl.GRADIENT、interptype = anl.QUINTIC、octaves = 1、frequency = 2}、
</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果は次のようになります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/31c/bf0/297/31cbf02975f1852907bb3a0f24ffd43a.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地球の勾配で</font><font style="vertical-align: inherit;">
行ったように、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Select</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数</font><font style="vertical-align: inherit;">を区分的に定義された</font><font style="vertical-align: inherit;">関数</font><font style="vertical-align: inherit;">として</font><font style="vertical-align: inherit;">適用する</font><font style="vertical-align: inherit;">と、選択しきい値の下部が1（洞窟なし）、上部が0（洞窟がある）になるように実装すると、結果は次のようになります。 ：</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{name = "cave_shape"、type = "fractal"、fractaltype = anl.RIDGEDMULTI、basistype = anl.GRADIENT、interptype = anl.QUINTIC、octaves = 1、frequency = 2}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{name = "cave_select"、type = "select"、low = 1、high = 0、control = "cave_shape"、threshold = 0.8、falloff = 0}、</font></font><font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1d8/55a/c47/1d855ac477dd48ba59d20ed30d89bde6.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、かなり滑らかに見えるので、フラクタルノイズを追加して、領域を歪ませましょう。</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{name = "cave_shape"、type = "fractal"、fractaltype = anl.RIDGEDMULTI、basistype = anl.GRADIENT、interptype = anl.QUINTIC、octaves = 1、frequency = 2}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{name = "cave_select"、type = "select"、low = 1、high = 0、control = "cave_shape"、threshold = 0.8、falloff = 0}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{name = "cave_perturb_fractal"、type = "fractal"、fractaltype = anl.FBM、basistypetype = anl.GRADIENT、interptype = anl.QUINTIC、octaves = 6、frequency = 3}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{name = "cave_perturb_scale"、type = "scaleoffset"、source = "cave_perturb_fractal"、scale = 0.25、offset = 0}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{name = "cave_perturb"、type = "translatedomain"、source = "cave_select"、tx = "cave_perturb_scale"}、</font></font><font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ec/deb/4fa/0ecdeb4faf32eea11c05a7a76b7c6225.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは洞窟をわずかに騒々しくさせ、それらをそれほど滑らかにしません。</font><font style="vertical-align: inherit;">次に、レリーフに洞窟を適用するとどうなるか見てみましょう。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d34/974/278/d34974278435e239ad7eb9193adc9672.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使って実験</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スレッショルド</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値</font><font style="vertical-align: inherit;">で</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cave_select</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、我々は洞窟が薄くても厚くすることができます。しかし、私たちが試す必要がある主なことは、洞窟が表面レリーフのそのような巨大な破片を食べてしまわないようにすることです。これを行うには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">highland_lowland_select</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数に戻ります</font><font style="vertical-align: inherit;">。これは、思い出すと、地球の勾配を歪める最後のレリーフ関数です。この関数で便利なのは、それが勾配であり、関数が地面に深く入ると値が増加することです。勾配を使用して洞窟の機能を弱め、洞窟が地面に深く入るにつれて洞窟が大きくなるようにすることができます。幸いにも、この減衰は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">highland_lowland_select</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数の出力に出力を乗算するだけで実現でき</font><font style="vertical-align: inherit;">ます。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cave_shape</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、そして結果を関数チェーンの残りに渡します。次に、ここで重要な変更を行います- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キャッシュ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能を追加します</font><font style="vertical-align: inherit;">。キャッシング関数は、指定された入力座標の関数の結果を保存します。関数が同じ座標で繰り返し呼び出されると、キャッシュされたコピーを返し、結果を再度計算しません。これは、このような状況</font><font style="vertical-align: inherit;">で、関数チェーン内の</font><font style="vertical-align: inherit;">1つの複雑な関数（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">highland_lowland_select</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）が複数回呼び出される</font><font style="vertical-align: inherit;">場合に役立ち</font><font style="vertical-align: inherit;">ます。キャッシュがないと、複雑な関数のチェーン全体が呼び出しのたびに再計算されます。キャッシュを追加するには、まず次の変更を行う必要があります。</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{name = "highland_lowland_select"、type = "select"、low = "lowland_terrain"、high = "highland_mountain_select"、control = "terrain_type_cache"、threshold = 0.25、falloff = 0.15}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{name = "highland_lowland_select_cache"、type = "cache"、source = "highland_lowland_select"}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{name = "ground_select"、type = "select"、low = 0、high = 1、しきい値= 0.5、control = "highland_lowland_select_cache"}、</font></font><font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこで、キャッシュを追加してから、入力を</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ground_selectに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リダイレクト</font><font style="vertical-align: inherit;">し、関数から直接ではなく、キャッシュから取得されるようにしました。</font><font style="vertical-align: inherit;">次に、洞窟コードを変更して減衰を追加できます。</font></font><br>
<br>
<pre>{name="cave_shape",                    type="fractal",           fractaltype=anl.RIDGEDMULTI, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=1, frequency=4},<font></font>
{name="cave_attenuate_bias",           type="bias",              source="highland_lowland_select_cache", bias=0.45},<font></font>
{name="cave_shape_attenuate",          type="combiner",          operation=anl.MULT, source_0="cave_shape", source_1="cave_attenuate_bias"},<font></font>
{name="cave_perturb_fractal",          type="fractal",           fractaltype=anl.FBM, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=6, frequency=3},<font></font>
{name="cave_perturb_scale",            type="scaleoffset",       source="cave_perturb_fractal", scale=0.5, offset=0},<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{name = "cave_perturb"、type = "translatedomain"、source = "cave_shape_attenuate"、tx = "cave_perturb_scale"}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{name = "cave_select"、type = "select"、low = 1、high = 0、control = "cave_perturb"、threshold = 0.48、falloff = 0}、</font></font><font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バイアス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数を追加しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは、グラジエント減衰関数の間隔を調整できるので便利です。</font><font style="vertical-align: inherit;">次いで</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cave_shape_attenuate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能さ</font><b><font style="vertical-align: inherit;">添加</font></b><font style="vertical-align: inherit;">である、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のコンバイナ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ANL :: MULT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">彼女はグラデーションに</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cave_shapeを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">乗算し</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次に、この操作の結果が</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cave_perturb</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数に渡されます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">結果は次のようになります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f8/55d/fd3/8f855dfd376c5d8049a075d28066f72c.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
地表に近づくほど薄くなっていることがわかります。</font><font style="vertical-align: inherit;">（最上部に注意を向けないでください。これは単に負の勾配値のアーティファクトであり、完成した洞窟には影響しません。これが問題になる場合-この関数を他の目的で使用する場合、勾配を間隔（0、 1）。）地形との関係でこれがどのように機能するかを理解するのは少し難しいので、先に進み、すべてをまとめて何が起こるかを見てみましょう。</font><font style="vertical-align: inherit;">これまでに作成した関数のチェーン全体を次に示します。</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terraintree =</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "ground_gradient"、type = "gradient"、x1 = 0、x2 = 0、y1 = 0、y2 = 1}、</font></font><font></font>
	<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "lowland_shape_fractal"、type = "fractal"、fractaltype = anl.BILLOW、basistypetype = anl.GRADIENT、interptype = anl.QUINTIC、octaves = 2、frequency = 0.25}、</font></font><font></font>
	{name="lowland_autocorrect",           type="autocorrect",      source="lowland_shape_fractal", low=0, high=1},<font></font>
	{name="lowland_scale",                 type="scaleoffset",      source="lowland_autocorrect", scale=0.125, offset=-0.45},<font></font>
	{name="lowland_y_scale",               type="scaledomain",      source="lowland_scale", scaley=0},<font></font>
	{name="lowland_terrain",               type="translatedomain",  source="ground_gradient", ty="lowland_y_scale"},<font></font>
	<font></font>
	{name="highland_shape_fractal",        type="fractal",          fractaltype=anl.FBM, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=4, frequency=2},<font></font>
	{name="highland_autocorrect",          type="autocorrect",      source="highland_shape_fractal", low=-1, high=1},<font></font>
	{name="highland_scale",                type="scaleoffset",      source="highland_autocorrect", scale=0.25, offset=0},<font></font>
	{name="highland_y_scale",              type="scaledomain",      source="highland_scale", scaley=0},<font></font>
	{name="highland_terrain",              type="translatedomain",  source="ground_gradient", ty="highland_y_scale"},<font></font>
<font></font>
	{name="mountain_shape_fractal",        type="fractal",          fractaltype=anl.RIDGEDMULTI, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=8, frequency=1},<font></font>
	{name="mountain_autocorrect",          type="autocorrect",      source="mountain_shape_fractal", low=-1, high=1},<font></font>
	{name="mountain_scale",                type="scaleoffset",      source="mountain_autocorrect", scale=0.45, offset=0.15},<font></font>
	{name="mountain_y_scale",              type="scaledomain",      source="mountain_scale", scaley=0.25},<font></font>
	{name="mountain_terrain",              type="translatedomain",  source="ground_gradient", ty="mountain_y_scale"},<font></font>
<font></font>
	{name="terrain_type_fractal",          type="fractal",          fractaltype=anl.FBM, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=3, frequency=0.125},<font></font>
	{name="terrain_autocorrect",           type="autocorrect",      source="terrain_type_fractal", low=0, high=1},<font></font>
	{name="terrain_type_y_scale",          type="scaledomain",      source="terrain_autocorrect", scaley=0},<font></font>
	{name="terrain_type_cache",            type="cache",            source="terrain_type_y_scale"},<font></font>
	{name="highland_mountain_select",      type="select",           low="highland_terrain", high="mountain_terrain", control="terrain_type_cache", threshold=0.55, falloff=0.2},<font></font>
	{name="highland_lowland_select",       type="select",           low="lowland_terrain", high="highland_mountain_select", control="terrain_type_cache", threshold=0.25, falloff=0.15},<font></font>
	{name="highland_lowland_select_cache", type="cache",            source="highland_lowland_select"},<font></font>
	{name="ground_select",                 type="select",           low=0, high=1, threshold=0.5, control="highland_lowland_select_cache"},<font></font>
	<font></font>
	{name="cave_shape",                    type="fractal",           fractaltype=anl.RIDGEDMULTI, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=1, frequency=4},<font></font>
	{name="cave_attenuate_bias",           type="bias",              source="highland_lowland_select_cache", bias=0.45},<font></font>
	{name="cave_shape_attenuate",          type="combiner",          operation=anl.MULT, source_0="cave_shape", source_1="cave_attenuate_bias"},<font></font>
	{name="cave_perturb_fractal",          type="fractal",           fractaltype=anl.FBM, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=6, frequency=3},<font></font>
	{name="cave_perturb_scale",            type="scaleoffset",       source="cave_perturb_fractal", scale=0.5, offset=0},<font></font>
	{name="cave_perturb",                  type="translatedomain",   source="cave_shape_attenuate", tx="cave_perturb_scale"},<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "cave_select"、type = "select"、low = 1、high = 0、control = "cave_perturb"、threshold = 0.48、falloff = 0}、</font></font><font></font>
	<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "ground_cave_multiply"、type = "combiner"、operation = anl.MULT、source_0 = "cave_select"、source_1 = "ground_select"}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この関数から派生したランダム化されたカードの例を次に示します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9f8/1a5/ca8/9f81a5ca8f1b739c03721b6a5ba280a5.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c86/5ec/b69/c865ecb69a1701a1b757535f289c6c0a.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a82/332/1e3/a823321e389de00947e695424497f2e9.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今、すべてがかなりよさそうだ。すべての洞窟は地下深くにある大きな洞窟ですが、地表に近いと通常は小さなトンネルになります。これは、謎の雰囲気を作るのに役立ちます。地表を探索すると、洞窟への小さな入り口が見つかります。彼女はどこへ行くの？それはどれくらい深く伸びますか？私たちはこれを知ることはできませんが、研究の過程でそれは拡大し始め、闇と危険に満ちた洞窟の大規模なシステムに変わります。そしてもちろん、戦利品。常にたくさんの戦利品があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このシステムはさまざまな方法で変更でき、さまざまな結果が得られます。私たちは、しきい値のパラメータ変更することができ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cave_select</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ためとパラメータを</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cave_attenuate_bias</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、または交換</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cave_attenuate_biasを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">勾配間隔をニーズに適した他の値と一致させる他の関数Y軸に沿って洞窟システムを歪ませる別のフラクタルを追加して、X軸に沿って不自然に滑らかなトンネルの可能性を排除することもできます（洞窟の形状がX軸に沿ってのみ歪むため）。新しいフラクタルを追加の減衰ソースとして追加し、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cave_shape_attenuate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">3番目のソースを指定することもできます</font><font style="vertical-align: inherit;">。これ</font><b><font style="vertical-align: inherit;">により</font></b><font style="vertical-align: inherit;">、領域に基づいて減衰をスケーリングし、一部のエリアの洞窟がより密集し（たとえば、山岳部）、他のエリアでは頻度が低く、または完全になくなります。この地域選択は、</font><b><font style="vertical-align: inherit;">terrain_type_fractal</font></b><font style="vertical-align: inherit;">関数から作成できます</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">山の領域がどこにあるかを知ること。</font><font style="vertical-align: inherit;">すべては、何をしたいかを考え、さまざまな関数が出力にどのような影響を与えるかを理解し、目的の結果が得られるまでパラメーターを試すことです。</font><font style="vertical-align: inherit;">これは正確な科学ではなく、多くの場合、望ましい効果はさまざまな方法で達成できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">欠点</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この地形生成方法には欠点があります。</font><font style="vertical-align: inherit;">ノイズ生成プロセスはかなり遅くなる可能性があります。</font><font style="vertical-align: inherit;">可能であれば、フラクタルの数、使用するフラクタルのオクターブ数、およびその他の遅い操作を減らすことが重要です。</font><font style="vertical-align: inherit;">フラクタルを複数回使用して、複数回呼び出されるすべての関数をキャッシュしてください。</font><font style="vertical-align: inherit;">この例では、フラクタルを自由に使用して、3つのレリーフタイプのそれぞれに1つ作成しました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScaleOffset</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">して間隔を変更し、1つのフラクタルをすべての基準として使用すると、プロセッサー時間を大幅に節約できます。</font><font style="vertical-align: inherit;">2Dではすべてがそれほど悪くはありませんが、3Dに到達してデータ量を比較しようとすると、処理時間が大幅に増加します。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3Dに移動</font></font></h1><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terraria</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">King Arthur's Goldの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ようなゲームを作成する場合、これらはすべて素晴らしいですが、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minecraft</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Infiniminerの</font></a><font style="vertical-align: inherit;">ようなものが必要な場合はどうでしょうか</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">？関数チェーンにどのような変更を加える必要がありますか？実際、多くはありません。上記の関数はほとんど変更を加えずに3Dレリーフで機能します。ジェネレータの3Dバリエーションを使用して3Dボリュームを比較し、2D領域ではなくY軸をボリュームの垂直軸と比較するだけで十分です。ただし、1つの変更、つまり洞窟を実現する方法が必要です。ご覧のように、Ridged Multifractalは2Dの洞窟システムに最適ですが、3Dでは、トンネルではなく多くの湾曲したシェルを切り取り、その効果は間違っています。つまり、3Dでは、2つのフラクタルフォームの洞窟を指定する必要があります。どちらも1オクターブのリッジドマルチフラクタルノイズですが、シードが異なります。選択を使用して、それらを1または0に設定し、乗算します。したがって、洞窟はフラクタルの交差点に表示され、他のすべては固体のままです、トンネルの外観は、単一のフラクタルを使用するよりも自然になります。</font></font><br>
<br>
<pre>terraintree3d=<font></font>
{<font></font>
	{name="ground_gradient",               type="gradient",         x1=0, x2=0, y1=0, y2=1},<font></font>
	<font></font>
	{name="lowland_shape_fractal",         type="fractal",          fractaltype=anl.BILLOW, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=2, frequency=0.25},<font></font>
	{name="lowland_autocorrect",           type="autocorrect",      source="lowland_shape_fractal", low=0, high=1},<font></font>
	{name="lowland_scale",                 type="scaleoffset",      source="lowland_autocorrect", scale=0.125, offset=-0.45},<font></font>
	{name="lowland_y_scale",               type="scaledomain",      source="lowland_scale", scaley=0},<font></font>
	{name="lowland_terrain",               type="translatedomain",  source="ground_gradient", ty="lowland_y_scale"},<font></font>
	<font></font>
	{name="highland_shape_fractal",        type="fractal",          fractaltype=anl.FBM, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=4, frequency=2},<font></font>
	{name="highland_autocorrect",          type="autocorrect",      source="highland_shape_fractal", low=-1, high=1},<font></font>
	{name="highland_scale",                type="scaleoffset",      source="highland_autocorrect", scale=0.25, offset=0},<font></font>
	{name="highland_y_scale",              type="scaledomain",      source="highland_scale", scaley=0},<font></font>
	{name="highland_terrain",              type="translatedomain",  source="ground_gradient", ty="highland_y_scale"},<font></font>
<font></font>
	{name="mountain_shape_fractal",        type="fractal",          fractaltype=anl.RIDGEDMULTI, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=8, frequency=1},<font></font>
	{name="mountain_autocorrect",          type="autocorrect",      source="mountain_shape_fractal", low=-1, high=1},<font></font>
	{name="mountain_scale",                type="scaleoffset",      source="mountain_autocorrect", scale=0.45, offset=0.15},<font></font>
	{name="mountain_y_scale",              type="scaledomain",      source="mountain_scale", scaley=0.25},<font></font>
	{name="mountain_terrain",              type="translatedomain",  source="ground_gradient", ty="mountain_y_scale"},<font></font>
<font></font>
	{name="terrain_type_fractal",          type="fractal",          fractaltype=anl.FBM, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=3, frequency=0.125},<font></font>
	{name="terrain_autocorrect",           type="autocorrect",      source="terrain_type_fractal", low=0, high=1},<font></font>
	{name="terrain_type_y_scale",          type="scaledomain",      source="terrain_autocorrect", scaley=0},<font></font>
	{name="terrain_type_cache",            type="cache",            source="terrain_type_y_scale"},<font></font>
	{name="highland_mountain_select",      type="select",           low="highland_terrain", high="mountain_terrain", control="terrain_type_cache", threshold=0.55, falloff=0.2},<font></font>
	{name="highland_lowland_select",       type="select",           low="lowland_terrain", high="highland_mountain_select", control="terrain_type_cache", threshold=0.25, falloff=0.15},<font></font>
	{name="highland_lowland_select_cache", type="cache",            source="highland_lowland_select"},<font></font>
	{name="ground_select",                 type="select",           low=0, high=1, threshold=0.5, control="highland_lowland_select_cache"},<font></font>
	<font></font>
	{name="cave_attenuate_bias",           type="bias",              source="highland_lowland_select_cache", bias=0.45},<font></font>
	{name="cave_shape1",                   type="fractal",           fractaltype=anl.RIDGEDMULTI, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=1, frequency=4},<font></font>
	{name="cave_shape2",                   type="fractal",           fractaltype=anl.RIDGEDMULTI, basistype=anl.GRADIENT, interptype=anl.QUINTIC, octaves=1, frequency=4},<font></font>
	{name="cave_shape_attenuate",         type="combiner",           operation=anl.MULT, source_0="cave_shape1", source_1="cave_attenuate_bias", source_2="cave_shape2"},             <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "cave_perturb_fractal"、type = "fractal"、fractaltype = anl.FBM、basistype = anl.GRADIENT、interptype = anl.QUINTIC、octaves = 6、frequency = 3}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "cave_perturb_scale"、type = "scaleoffset"、source = "cave_perturb_fractal"、scale = 0.5、offset = 0}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "cave_perturb"、type = "translatedomain"、source = "cave_shape_attenuate"、tx = "cave_perturb_scale"}、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "cave_select"、type = "select"、low = 1、high = 0、control = "cave_perturb"、threshold = 0.48、falloff = 0}、</font></font><font></font>
	<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	{name = "ground_cave_multiply"、type = "combiner"、operation = anl.MULT、source_0 = "cave_select"、source_1 = "ground_select"}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果の例：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/484/3fa/8e9/4843fa8e95e46162345f36edcf767fbe.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b91/671/848/b91671848dac9a42f371d549adf07181.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一部の設定は調整が必要なようです。</font><font style="vertical-align: inherit;">減衰を減らすか、洞窟を薄くして、レリーフのフラクタルのオクターブ数を減らして、レリーフがよりスムーズになるようにするなどの価値があるかもしれません。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja472562/index.html">財務動向：大企業はますます多くのITプロフェッショナルを必要としています</a></li>
<li><a href="../ja472566/index.html">作家フレアマンの個人的な地獄、または初恋の物語</a></li>
<li><a href="../ja472568/index.html">Apache Ignite Zeroデプロイメント：完全にゼロ？</a></li>
<li><a href="../ja472570/index.html">Intel Xeon W Big Update</a></li>
<li><a href="../ja472572/index.html">DevOpsとChaos：分散した世界でのソフトウェア配信</a></li>
<li><a href="../ja472576/index.html">フリーソフトウェア開発者のXVI会議または無料の寄稿者の入手先</a></li>
<li><a href="../ja472580/index.html">エンタープライズサービス管理：サービス管理をIT外に拡張する理由</a></li>
<li><a href="../ja472582/index.html">インターネットの歴史：通信デバイスとしてのコンピューター</a></li>
<li><a href="../ja472586/index.html">スピーカーフォン分析：内部には何があり、どのように機能するか</a></li>
<li><a href="../ja472588/index.html">リバース振り子について知りたいことすべて</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>