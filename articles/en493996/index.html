<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåÜ ‚ö±Ô∏è üë©üèø‚Äçü§ù‚Äçüë©üèæ Lifehacks monitoring infrastructure using PRTG Network Monitor from Paessler AG üò∂ üòò üõ£Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Toner Level Control
 Many administrators would find it very practical to control the toner level in the cartridges of all printers using the PRTG Netw...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Lifehacks monitoring infrastructure using PRTG Network Monitor from Paessler AG</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/softline/blog/493996/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toner Level Control</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Many administrators would find it very practical to control the toner level in the cartridges of all printers using the PRTG Network Monitor. </font><font style="vertical-align: inherit;">But not all devices support object identifiers (OIDs) using the SNMP sensor. </font><font style="vertical-align: inherit;">However, there is an option to monitor the level of toner using PRTG.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0m/qr/fc/0mqrfc21y4khm7-a1ayiiu0cob0.jpeg"><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Some printers do not support the object identifiers (OIDs) built into the PRTG printer sensor, therefore, when trying to request data, an SNMP error message No. 222 appears. In such cases, the built-in PRTG SNMP sensor (custom table) will help solve the problem. In English installations, it is designated as SNMP Custom Table Sensor. To do this, you need the OIDs of the SNMP table. To display the filling level, the OID ‚Äú1.3.6.1.2.1.43.11.1" is used. Enter it in the first step of the setup. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ia/xe/el/iaxeelpc0xtyqkc3c655pxta2iy.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Using the SNMP table, PRTG displays the current toner levels in a list.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then change the column for identification to OID "1.3.6.1.2.1.43.11.1.1.6". It reflects the color of the cartridge. Now set the channel name. It is displayed next to the sensor result, for example, ‚Äúfilling level‚Äù. Then you need to match the column of the sensory channel. For this, the OID ‚Äú1.3.6.1.2.1.43.11.1.1.9" is introduced, which reflects the current level of filling in percent. To configure the units of this channel, select the ‚Äúpercentage‚Äù item in the drop-down list.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, the PRTG reads all the sensors on your printer and shows you a table with the available values. </font><font style="vertical-align: inherit;">Check all the channels you want to add and complete the setup by clicking Save. </font><font style="vertical-align: inherit;">Now the PRTG adjusts the sensor for each highlighted record and sets the name of the sensor based on the read information. </font><font style="vertical-align: inherit;">From this moment, the toner level of the cartridge is displayed, and changes are recorded continuously. </font><font style="vertical-align: inherit;">For detailed step-by-step instructions with illustrations, see the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PRTG Knowledge Base</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PRTG inventory overview</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With PRTG Network Monitor, the structure of the device tree has become more complex over the years. Therefore, it makes sense from time to time to check all interval dependencies and active inheritance between hosts. In addition, you need to list all the sensors and channels in which restrictions have been introduced. Knowing how to do this, you can quickly create relevant reviews. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ed/yq/fo/edyqfozgjmmw51fixcd-sqi0kca.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Overgrown monitoring systems from time to time require an inventory.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The required information can be read without problems from the PRTG. </font><font style="vertical-align: inherit;">To do this, we recommend using the PrtgAPI tool - the C # / PowerShell interface, individually adapted to the PRTG Network Monitor. </font><font style="vertical-align: inherit;">The application program interface (API) allows you to read almost any information about the sensor from PRTG, and then process it in a spreadsheet. </font><font style="vertical-align: inherit;">To get all the characteristics of the channel, including the sensor identifier, the following command is executed in the API:</font></font><br>
<br>
<pre><code class="plaintext hljs">Get-Sensor *cpu* | Get-Channel | <font></font>
 Export-Csv C:\channelLimits.csv -NoType</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you want to include the sensor name in the table, you can add it using the Select object. </font><font style="vertical-align: inherit;">The command line might look like this:</font></font><br>
<br>
<pre><code class="plaintext hljs">$sensors = get-sensor *cpu*<font></font>
$sensors|foreach {<font></font>
$s = $_ $s|Get-Channel|select @{l="SensorName";e={$s.Name}},<font></font>
 SensorId,Name,Id, *limit*<font></font>
}|Export-Csv C:\channelLimits.csv -NoType</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you want to create a report of sensor dependencies, the Get-ObjectProperty object will help you. </font><font style="vertical-align: inherit;">It allows you to analyze the DependencyType and DependentObjectId properties of the SensorSettings object. </font><font style="vertical-align: inherit;">For detailed instructions, including additional information about PrtgAPI, see the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paessler Knowledge Base</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Checking the connection to the MQTT sensor</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Many medium-sized manufacturing enterprises are gradually including their machines in the network. They are connected in a specially defined area and send information to the central MQTT broker, where subsequent data processing takes place. It is important for the company to monitor whether the MQTT broker is fully accessible. There are separate recommendations on this score. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ht/kb/n9/htkbn9g6dczefrlxeeze9jaj2zg.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The MQTT Relay Sensor checks if you can connect to a broker.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PRTG Network Monitor offers a special </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">MQTT transponder</font></a><font style="vertical-align: inherit;"> for this purpose.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. It checks whether it is possible to connect to the broker, and whether the broker accepts messages through Publish. In addition, the sensor controls whether the broker transmits the message to the relevant participant, and, on the one hand, measures the time of a separate connection, and on the other hand, the total time required for the signal to go back and forth from the moment the message was issued until it is received again.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setting up the MQTT is very simple and involves just a few steps. </font><font style="vertical-align: inherit;">The MQTT Round Trip BETA sensor is added to the PRTG. </font><font style="vertical-align: inherit;">In the sensor settings, a name is assigned for the sensor and the MQTT (MQTT Topic) section is saved. </font><font style="vertical-align: inherit;">The default value is PRTG / roundtrip /% sensorid, where PRTG takes the place of% sensorid with the corresponding sensor identifier. </font><font style="vertical-align: inherit;">To allow the sensor to access the MQTT section, save your MQTT credentials in the settings of the parent device. </font><font style="vertical-align: inherit;">After starting the sensor, it displays the time the message passed back and forth, the state of the passage, the connection time of the publisher and the connection time of the subscriber in different channels of the sensor.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remote access to the main PRTG server</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PRTG Network Monitor is used by many companies to monitor IT infrastructure. Often the question arises of how to access the main PRTG server outside the corporate network. What the administrator must take into account in this case, and what precautions are important to prevent unauthorized access by third parties, is presented in the following recommendation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You have configured PRTG on your internal network with your personal IP address, for example, 192.168.0.100. Everything works well, but now you also want to access the main PRTG server over the Internet from another computer. You can use the PRTG mobile apps for this. However, before this becomes possible, you need to be sure that you can access the main PRTG server from the outside, including through the firewall.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since security is alpha and omega, you first need to take care of the impossibility of another person entering your PRTG account. To do this, you must change the default password for the administrator account if you have not already done so. To check if you use the default password, simply go to ‚ÄúSettings / Account Settings / My Account, User Account section‚Äù in the PRTG web interface.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition, you should not access the PRTG instance from outside through insecure HTTP. Therefore, make sure that the PRTG program is configured to use HTTPS for all connections to the PRTG web interface. To do this, select ‚ÄúSecure HTTPS server as the transmission control protocol (TCP) port for incoming web server requests‚Äù in the ‚ÄúSettings / System Management / Web Interface, Web Server‚Äù section. To access the installation of the main server from the outside, you must open the necessary ports in the firewall or redirect them. To do this, create NAT rules for these ports. Setting NAT rules in the firewall can vary greatly depending on the manufacturer. Therefore, read the documentation for your device or model.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In our example, if the PRTG program is running on a server with an IP address of 192.168.0.100, the NAT rules may look as shown in the illustration. The rule for HTTP is optional, but greatly simplifies the process. If you enter ‚Äúprtgserver. &lt;Mydomain.tld&gt;‚Äù in your browser, an attempt will first be made to access the website via HTTP. If you do not want to create a NAT rule for HTTP, instead you need to enter </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prtgserver</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . &lt;Mydomain.tld&gt; </font><font style="vertical-align: inherit;">each time </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dt/mh/dt/dtmhdtqwkmrprpecxmdbghhevgw.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This may look like NAT rules on the firewall to provide remote access to PRTG.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You should also make sure that Windows Firewall is disabled on the PRTG server, or that you have created the appropriate rules. </font><font style="vertical-align: inherit;">Now you can remotely monitor the installation of PRTG via the PRTG mobile applications or access the PRTG web interface via the Internet from other clients. </font><font style="vertical-align: inherit;">For more information about setting up access to the PRTG Network Monitor through the firewall, including useful advanced settings, see </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How-to</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can learn about the capabilities of Paessler PRTG, download the trial version, ask a question to a Softline specialist (Paessler's key partner in Russia and the CIS) on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paessler.softline.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en493972/index.html">NASA ultra-capacitor has become ... a moisture meter</a></li>
<li><a href="../en493974/index.html">DIY and Open Source to Combat Covid-19: Ventilators</a></li>
<li><a href="../en493978/index.html">SSD Kingston A2000 1TB and A2000R 500GB: similar on the outside, but different on the inside</a></li>
<li><a href="../en493982/index.html">Lego boost</a></li>
<li><a href="../en493986/index.html">How to find celestial objects from Stellarium star charts using a telescope</a></li>
<li><a href="../en493998/index.html">Who is DevOps and when is it not needed</a></li>
<li><a href="../en494000/index.html">Introduction to Stack Hardware Security (Windows 10)</a></li>
<li><a href="../en494006/index.html">Lowering the barriers to speech recognition</a></li>
<li><a href="../en494020/index.html">30+ parsers to collect data from any site</a></li>
<li><a href="../en494024/index.html">Firefox Introduces HTTPS Only</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>