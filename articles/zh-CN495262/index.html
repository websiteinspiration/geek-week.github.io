<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’— ğŸ¦€ ğŸ“š PostgreSQLç‰ˆæœ¬å‡çº§å®è·µã€‚å®‰å¾·çƒˆÂ·è¨å°”å°¼ç§‘å¤«ï¼ˆAndrey Salnikovï¼‰ ğŸ  ğŸ” ğŸ¥…</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æˆ‘å»ºè®®æ‚¨ç†Ÿæ‚‰å®‰å¾·çƒˆÂ·è¨å°”å°¼ç§‘å¤«ï¼ˆAndrei Salnikovï¼‰å¯¹2018å¹´æŠ¥å‘Šçš„è§£ç ï¼Œâ€œæ›´æ–°PostgreSQLç‰ˆæœ¬çš„å®è·µâ€
 

åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç³»ç»Ÿç®¡ç†å‘˜å’ŒDBAæ‹…å¿ƒä¼šå¯¹æ•°æ®åº“ç‰ˆæœ¬ï¼ˆRDBMSï¼‰è¿›è¡Œé‡å¤§æ›´æ–°ï¼Œå°¤å…¶æ˜¯åœ¨è¯¥æ•°æ®åº“æ­£åœ¨è¿è¡Œä¸”è´Ÿè½½å¾ˆé«˜çš„æƒ…å†µä¸‹ã€‚é€ æˆè¿™ç§æƒ…å†µçš„ä¸»è¦åŸå› æ˜¯æŸäº›æ•°æ®åº“åœæœºï¼Œè¿™...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>PostgreSQLç‰ˆæœ¬å‡çº§å®è·µã€‚å®‰å¾·çƒˆÂ·è¨å°”å°¼ç§‘å¤«ï¼ˆAndrey Salnikovï¼‰</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495262/"><p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘å»ºè®®æ‚¨ç†Ÿæ‚‰å®‰å¾·çƒˆÂ·è¨å°”å°¼ç§‘å¤«ï¼ˆAndrei Salnikovï¼‰å¯¹2018å¹´æŠ¥å‘Šçš„è§£ç ï¼Œâ€œæ›´æ–°PostgreSQLç‰ˆæœ¬çš„å®è·µâ€</font></font></strong></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç³»ç»Ÿç®¡ç†å‘˜å’ŒDBAæ‹…å¿ƒä¼šå¯¹æ•°æ®åº“ç‰ˆæœ¬ï¼ˆRDBMSï¼‰è¿›è¡Œé‡å¤§æ›´æ–°ï¼Œå°¤å…¶æ˜¯åœ¨è¯¥æ•°æ®åº“æ­£åœ¨è¿è¡Œä¸”è´Ÿè½½å¾ˆé«˜çš„æƒ…å†µä¸‹ã€‚</font><font style="vertical-align: inherit;">é€ æˆè¿™ç§æƒ…å†µçš„ä¸»è¦åŸå› æ˜¯æŸäº›æ•°æ®åº“åœæœºï¼Œè¿™é€šå¸¸åœ¨æ­¤ç±»å·¥ä½œçš„è®¡åˆ’ä¸­éšå«ç€ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®é™…ä¸Šï¼Œè¿™ç§å‡çº§éœ€è¦ç›¸å½“é•¿çš„æ—¶é—´ï¼Œå¹¶ä¸”ç”±äºåœ¨å‡†å¤‡é˜¶æ®µå¯ä»¥é¿å…çš„çç¢é”™è¯¯ï¼Œå¯¹æ­¤ç±»æ“ä½œç»éªŒå¾ˆå°‘çš„ç®¡ç†å‘˜é€šå¸¸ä¸å¾—ä¸å›æ»šåˆ°æ—§ç‰ˆæœ¬çš„æ•°æ®åº“ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨Data Egretä¸­ï¼Œæˆ‘ä»¬åœ¨æ²¡æœ‰é”™è¯¯ä½™åœ°çš„é¡¹ç›®ä¸­è¿›è¡Œå¤§å‹PostgreSQLå‡çº§æ–¹é¢ç§¯ç´¯äº†ä¸°å¯Œçš„ç»éªŒã€‚æˆ‘å°†åˆ†äº«æˆ‘çš„ç»éªŒï¼Œå¹¶è®¨è®ºè¯¥è¿‡ç¨‹çš„åç»­æ­¥éª¤ï¼šå¦‚ä½•ä¸ºPostgreSQLå‡çº§åšå‡†å¤‡ï¼Ÿåœ¨å‡†å¤‡é˜¶æ®µéœ€è¦åšä»€ä¹ˆï¼Ÿå¦‚ä½•è®¡åˆ’å‡çº§æœ¬èº«çš„è¡ŒåŠ¨é¡ºåºï¼Ÿå¦‚ä½•æˆåŠŸæ‰§è¡Œå‡çº§è¿‡ç¨‹ï¼Œè€Œåˆä¸è¿”å›æ•°æ®åº“çš„å…ˆå‰ç‰ˆæœ¬ï¼Ÿå¦‚ä½•æœ€å¤§ç¨‹åº¦åœ°å‡å°‘ç”šè‡³é¿å…æ•´ä¸ªå‡çº§è¿‡ç¨‹ä¸­çš„åœæœºæ—¶é—´ï¼ŸæˆåŠŸå‡çº§PostgreSQLåï¼Œæˆ‘éœ€è¦å®Œæˆå“ªäº›æ­¥éª¤ï¼Ÿæˆ‘è¿˜å°†è®¨è®ºä¸¤ç§æœ€å—æ¬¢è¿â€‹â€‹çš„PostgreSQLå‡çº§è¿‡ç¨‹pg_upgradeå’Œpg_dump / pg_restoreï¼Œæ¯ç§æ–¹æ³•çš„ä¼˜ç¼ºç‚¹ï¼Œå¹¶ä»‹ç»è¯¥è¿‡ç¨‹å„ä¸ªé˜¶æ®µçš„æ‰€æœ‰å…¸å‹é—®é¢˜ï¼Œä»¥åŠå¦‚ä½•é¿å…å®ƒä»¬ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹äºåˆå­¦è€…å’Œé•¿æœŸä½¿ç”¨PostgreSQLçš„DBAè€Œè¨€ï¼Œè¯¥æŠ¥å‘Šéƒ½å°†å¾ˆæœ‰è¶£ï¼Œä½†æ˜¯ä»–ä»¬æƒ³äº†è§£æ›´å¤šæœ‰å…³å¦‚ä½•æ­£ç¡®è®¡åˆ’å’Œå°½å¯èƒ½è½»æ¾åœ°è¿›è¡Œå‡çº§çš„ä¿¡æ¯ã€‚</font></font></p><br>
<p><img src="https://habrastorage.org/webt/qh/px/xd/qhpxxdul2aseoxu2_ohgojxftpu.png"></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½ å¥½ï¼</font><font style="vertical-align: inherit;">æˆ‘åœ¨Data Egretå·¥ä½œã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬è‡´åŠ›äºæ”¯æŒPostgreSQLæœåŠ¡å™¨å¹¶æä¾›PostgreSQLå’¨è¯¢æœåŠ¡ã€‚</font><font style="vertical-align: inherit;">å®è·µè¡¨æ˜ï¼Œå¾ˆå°‘æœ‰äººæ›´æ–°æ•°æ®åº“ã€‚</font><font style="vertical-align: inherit;">ä»–ä»¬å¯åŠ¨äº†è¯¥é¡¹ç›®ï¼Œå½“æ—¶å®‰è£…äº†å½“å‰ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä»åœ¨å·¥ä½œã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯¥æŠ¥å‘Šå°†åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ã€‚</font><font style="vertical-align: inherit;">ç¬¬ä¸€ä¸ªæ˜¯ä»‹ç»æ€§çš„æœ¯è¯­ï¼Œç›®çš„æ˜¯ä¸ºäº†è¾¾æˆä¸€ä¸ªé€šç”¨æœ¯è¯­ã€‚</font><font style="vertical-align: inherit;">ç¬¬äºŒä¸ªæ˜¯å…³äºæ¬¡è¦æ›´æ–°ã€‚</font><font style="vertical-align: inherit;">ç¬¬ä¸‰ä¸ªå°†æ¶‰åŠä¸“ä¸šã€‚</font></font></p><br>
<p><img src="https://habrastorage.org/webt/yb/wk/bv/ybwkbvbiywdppdk19sky8vxd_vk.png"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯¥æŠ¥å‘Šçš„ç›®çš„æ˜¯å›ç­”é—®é¢˜ã€‚</font></font></p><br>
<ul>
<li>  ?   ,  Postgres    .     ,  - .            ,  .       ,    .    .</li>
<li>,       . </li>
<li> ,             ,   .</li>
<li>  ,   : Â«         ?Â».   . </li>
<li>       ,          .     ,     production   .</li>
</ul><br>
<p>     ,         Postgres.</p><br>
<p><img src="https://habrastorage.org/webt/9n/6v/uo/9n6vuovta77udhortpo17qcbhqw.png"></p><br>
<p>    ,   ,    .  10        .   ,  ,    ,   â€“   .</p><br>
<p><img src="https://habrastorage.org/webt/zz/ua/ku/zzuakuky0bgkb0_8pnyuxv56f3q.png"></p><br>
<p>  10-      .     ,  .   â€“    ,   â€“   . </p><br>
<p><img src="https://habrastorage.org/webt/o9/rg/d6/o9rgd6cwxfxj2ysv6rrnskysrt8.png"></p><br>
<p>    ?</p><br>
<p> .   ,    â€“       .      9.6      ,  ,  ,    .    .   . </p><br>
<p> 10-     .   ,      .</p><br>
<p> .    .                ,   . </p><br>
<p>        .             . </p><br>
<p>     â€“  ,     .  6.    .     ,        . . .    9.2.    ,   ,  9.2  .     9.2,     .</p><br>
<p>       :     .</p><br>
<p><img src="https://habrastorage.org/webt/mk/mj/fo/mkmjfozpligyczlzq19b4u7pudw.png"></p><br>
<p>  .   ,         ,       production :</p><br>
<ul>
<li>    release notes.     ? ,     release notes,   release notes    ,      .   ,    .   - .      ,              ,          .  ,         10- ,     -.   ,  ,   .</li>
<li>       ?  .  ,          .     release notes,      . ,      -  .  , Postgres      ,  ,  .         ,       Postgres,   .</li>
<li>    - ,        ,     ,        ,       production .</li>
<li> ,             â€“  ,      .    â€”  ,     ,          ,    .      .</li>
</ul><br>
<p> ,   ,  , .</p><br>
<p><img src="https://habrastorage.org/webt/ft/wd/sx/ftwdsxjongoxcwtzmofeol4flxs.png"></p><br>
<p>    .            .</p><br>
<p>   ,        .         ,      Postgres.     Postgres.</p><br>
<p>  :</p><br>
<ul>
<li>     PostgreSQL.    ,     -  ,   ,  , Postgres   .      .             .         ,   .  Ubuntu, ,       ,  .   start.conf.          .      .</li>
<li>    PostgreSQL  .      ,           ,  common-       .   .</li>
<li> â€“ checkpoint.    checkpoint?      ,        .         ,      ,    ,   .      ,  ,       , , 250 GB,         .         checkpoint,                 Postgres.</li>
<li>  ?    pgbouncer,             ,          .    pgbouncer,  pgbouncer    .  pgbouncerâ€™    â€“    ,      -       .       latency   . . .     ,      pgbouncer,     .     checkpoint,   pgbouncer,                .</li>
<li>   ,      .            .     ,      .</li>
<li> ,     extensions,    -  extensions.    â€“          extensions    .   .       .     .      .     . </li>
<li>    (  ,     release notes)      release notes.         â€“    -  . ,     9.6.1  9.6.6,   ,     release notes  9.6.2 â€“ 9.6.6.      - ,    ,       ,       .</li>
<li>    standby ,   ,          .     ,      14-  ,    2.3     .     .       ,     .    .</li>
</ul><br>
<p>   ,    release notes.</p><br>
<p><img src="https://habrastorage.org/webt/r7/po/fw/r7pofwu2d6pd3sfzov_zbnw-lsq.png"></p><br>
<p>      Postgres.org.    9.6.2.      ,         .</p><br>
<p>    ?        ,                 ,              .           ,                   .         .</p><br>
<p>         .       .  . , , release notes.   .</p><br>
<p><img src="https://habrastorage.org/webt/tp/fm/y4/tpfmy4cemzde9czdxxsr0pljldm.png"></p><br>
<p>    ,      .       . ,  ,     9.6.5.         9.6.1.     ,      .    -   .      ,   â€“    .     â€“   .</p><br>
<p>  ,     . . .    bash- ,         .     alter extension, update     .</p><br>
<p><img src="https://habrastorage.org/webt/r0/r8/ek/r0r8ekgtztzazijacgoii-0qpss.png"></p><br>
<p>   ?</p><br>
<ul>
<li> .     .   ,           ,           . </li>
<li>      . ,        ,        ,   release notes.</li>
<li>      . ,     - ,     .    .   .       . </li>
<li>   , . .        .   ,     checkpoint,         30   . </li>
</ul><br>
<p><img src="https://habrastorage.org/webt/ga/ph/cc/gaphcci6ovprvx85tkdq4ahzvve.png"></p><br>
<p>      â€“   .</p><br>
<p>    .   ,    .       .</p><br>
<ul>
<li>Pg_dump  restore â€“      .       ,      .     -    .</li>
<li>Pg_upgrade â€“    ,   , ,  95 % ,      .      . </li>
<li>     .</li>
</ul><br>
<p>       .</p><br>
<p><img src="https://habrastorage.org/webt/nv/6c/6t/nv6c6tqljcr8ergpes79hmwrjrg.png"></p><br>
<p>   pg_dump      ?</p><br>
<ul>
<li>     .     ,     .   9.5,  ,   10.  Ubuntu   ,  RedHat     â€“   Postgres.  ,        .</li>
<li>      locale,       .</li>
<li>   Postgres,  ,    ,  ,  ,         .</li>
<li>    ,            pg_dumop.       PostgreSQL.     ?   pg_dump    ,      ,   ,           .    ,             ,       .       .    PostgreSQL, . .  ,  .    ,    .</li>
<li>     .     pg_dump,         .         .    ,       .</li>
<li>        .               .</li>
<li>  ,       ,   ,        PostgreSQL.</li>
</ul><br>
<p>   ,   ,      ,  .</p><br>
<p><img src="https://habrastorage.org/webt/yg/wy/_z/ygwy_zlxpezpbldwtlfbzkfb_ce.png"></p><br>
<p>  pg_dump:</p><br>
<ul>
<li>      .   â€“ .      .</li>
<li>  .    .</li>
<li>   .   :   ,   ,   .    ,    .</li>
<li>      ,      ,              .     .</li>
<li>     .     ,      .       .    SSD-,  SSD-  .                ,     ,  .       .</li>
<li>    .    ,              .        ,   . ,   ,  .     ,          ,       .     .</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/0_/qe/9o/0_qe9onjahbwmv3gajs4i5gdbus.png"></p><br>
<p>     ,  pg_upgrade.</p><br>
<ul>
<li>Pg_upgrade        .       , . . ,    .   .</li>
<li>        .       , ,     .</li>
<li>     PostgreSQL.         -,        .</li>
<li>    .      .</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/j_/wo/jc/j_wojcl1m25krfsyc4qkq_fjmdo.png"></p><br>
<p> ,   pg_upgrade.        : ,         ,   .</p><br>
<p>,    pg_upgrade,       ,             ,            .    ,     ,         .      .</p><br>
<p>   ,     â€“ pg_upgrade  dump  restore ,   pg_dump, restore     ,       ,      ,      .   .</p><br>
<p>       .      ,       ,           8.4.  Postgres        .</p><br>
<p>    ,            (, 9.0  10)      -.       ,       ,       .      .      ,     .</p><br>
<p><img src="https://habrastorage.org/webt/7l/9t/6a/7l9t6aqjizxpby0hca5onk0d4ci.png"></p><br>
<p>    ,         production. . .      ,    â€“      .</p><br>
<ul>
<li>     PostgreSQL.</li>
<li>     locace.   .</li>
<li> pg_upgrade.    Â«checkÂ». Check   ,      .   ,     -    ,      ,   , ,                .       ,     .      ,         .</li>
<li>Pg_dumpall â€” schema-only.     check   .       pg_dumpall â€“ schema-only,     .     ,       .    ,    ,  check      ,  dump .</li>
<li>   extensions   .    â€“  PostGIS,   PostGIS    Postgres.  extension      Postgres,    Postgres.   changelog   â€“      ,  pg_upgrade ,         .    dump restore .</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/3g/4x/f7/3g4xf7lyqcnvv3hi-bs0fra4wj4.png"></p><br>
<p>  ,  ,   ,  .</p><br>
<ul>
<li><p>    locale,    pg_dumpall only, restore.</p><br>
</li>
<li><p>   .      ,  pgbouncer       , . .    ,   .</p><br>
</li>
<li><p>   checkpoints,          ,     .</p><br>
</li>
<li><p>     pg_upgrade.     ,      .               .      45 .       ,    45 ,    .        15 ,     .         .</p><br>
<p><img src="https://habrastorage.org/webt/et/sy/er/etsyeryqtvdimdjivvq0jx_lrjw.png"></p><br>
</li>
<li><p>   ,       .    hard links.        .</p><br>
<p><img src="https://habrastorage.org/webt/cs/eo/sc/cseoscbeymrk5pjlzwbj9grk_rm.png"></p><br>
</li>
<li><p>    PostgreSQL.        .          PostgreSQL?     .  , pg_upgrade    .</p><br>
</li>
<li><p>     .</p><br>
</li>
<li><p>        .            10 .      ,    .</p><br>
</li>
</ul><br>
<p>     :</p><br>
<ul>
<li><p> pg_upgrade     .    ,          :   ,  10     .</p><br>
</li>
<li><p>         ,       ,   .</p><br>
</li>
<li><p>   9.5     .    ,                .</p><br>
<p><img src="https://habrastorage.org/webt/gi/dm/uk/gidmuk_tnbcrxet3qoghxfvpkd4.png"></p><br>
</li>
<li><p>    .    .        ,    ,     .   ,    vacuumdb    1, 10 .         ,      .  -      .  - .    ,     ,     .</p><br>
</li>
<li><p>    .         ,     .      - .     ,     ,  .         ,  ,         .</p><br>
</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/kr/dh/y9/krdhy9toj4rsxvmlbokhhjaahno.png"></p><br>
<p>     .</p><br>
<p><img src="https://habrastorage.org/webt/o0/-v/_-/o0-v_-tammgsfm23g7spto9w080.png"></p><br>
<ul>
<li>Pg_upgrade   extensions.    ,   .</li>
<li>   release notes  .</li>
<li> ,   ,      extensions      â€“ alter extension EXTENSION_NAME update.  .    pg_stat_statements,   -     .    pg_upgrade,         pg_stat_statements.      .     .</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/ri/50/6n/ri506n_tl93nkyy_m1-9gtrdtt4.png"></p><br>
<p>    â€“   ?   :</p><br>
<ul>
<li>  -  - .</li>
<li>  ,     ,    ,    ,  ,  .      .  ,   ,           .</li>
<li>   ?     Postgres.       .     . ,  , , 10  .</li>
<li>          PostgreSQL.</li>
<li> pg_basebackup        .      .</li>
<li>     PostgreSQL.</li>
<li>   ,       rsync,       .   , ,  ,            .   rsync   ,   .</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/fe/s_/_i/fes__isx8gdxhkejzomqabxytxc.png"></p><br>
<p>    .   :</p><br>
<ul>
<li>-,        PostgreSQL.</li>
<li>    .   .</li>
</ul><br>
<p>  9.4    .     .   ,    10   11        .</p><br>
<p>   ,   .  Slony-l, Londiste, Bucardo  . .   .</p><br>
<p><img src="https://habrastorage.org/webt/uy/yn/rd/uyynrdnjuv8_go1ttq3rsmsn2ns.png"></p><br>
<p>       ?</p><br>
<ul>
<li>    PostgreSQL.</li>
<li>-         Postgres    Postgres.</li>
<li>  ,  ,        .       .</li>
<li> ,        .    .    ,         Postgres.   ,     , . .     .    ,    .</li>
<li>      Postgres, ,     .</li>
<li>         Postgres,    . ,  ,    .     -  .</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/8g/tv/of/8gtvofu-acouuounr5zfnjozen4.png"></p><br>
<p>     ?</p><br>
<ul>
<li>        ,      .  -  .</li>
<li> ,    .     . . . ,    .</li>
<li>     sequences,       -.</li>
<li>    DDL,    .   DDL  ,  ,  .          ,  .</li>
<li>     ,         ,  .</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/2a/db/rv/2adbrv0193cxs8sglbod0f8jfnu.png"></p><br>
<p>   ,            .     pg_upgrade      ,      .</p><br>
<p>   ?  ,     3 TB,       2 SSD RAID  3 TB.    .         .</p><br>
<p>         .    .</p><br>
<p> ,    ,      99  - 9-  .    15 .       15    .  .        - .</p><br>
<p><img src="https://habrastorage.org/webt/bq/sl/ie/bqsliego7mt3nyx__tfzyrrlwb8.png"></p><br>
<p>     ,       pg_upgrade.      .         .</p><br>
<p>    .</p><br>
<p></p><br>
<p><em> !    pgbouncer     ,       , , ,    ,   .      ?</em></p><br>
<p>       ,        SSD  .         SSD   , . .     .       . , , ,  ,    .  ,     ,      .    ,      Postgres.      ,   .</p><br>
<p><em>   pg_worm  pg_hibernate,    ?</em></p><br>
<p> ,       ,      .</p><br>
<p><em>  !        pg_upgrade?</em></p><br>
<p> , .        ,   .       ,    .    ,     ,  -  ,    .        ,     ,    .        ,    .</p><br>
<p><em>  rsync -?</em></p><br>
<p>  rsync? Rsync     .  ,       ,   , , .    ?      pg_upgrate   .  ,  .     â€“ pg_start_backup.     rsync    .     -  ,    rsync   ,   .   ,          , ,  tablespace  HDD,  rsync  ,      .     â€“  ,  .    ,         .  â€“  pg_basebackup.</p><br>
<p><em>  !   ,     â€¦</em></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™é€‚ç”¨äºæ¬¡è¦æ›´æ–°ã€‚</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN495248/index.html">è‡ªæˆ‘éš”ç¦»å’Œæ´—æ‰‹çš„ä½œç”¨</a></li>
<li><a href="../zh-CN495250/index.html">æ¸¸æˆæ‰‹æŸ„æœ‰æœªæ¥å—ï¼Ÿ</a></li>
<li><a href="../zh-CN495254/index.html">æ¨¡æ‹Ÿç›®æ ‡ç½‘ç»œæ”»å‡»ï¼Œçº¢é˜Ÿï¼ŒPentestå’Œæ¼æ´æ‰«æã€‚å„ç§æ–¹æ³•çš„åˆ©å¼Š</a></li>
<li><a href="../zh-CN495256/index.html">å…³äºé‚®ä»¶æœåŠ¡å™¨ä¸­çš„ç«¯å£å’ŒåŠ å¯†</a></li>
<li><a href="../zh-CN495258/index.html">Zoomå¦‚ä½•æˆä¸ºå† çŠ¶ç—…æ¯’æ—¶ä»£æœ€é‡è¦çš„å…¬å¸</a></li>
<li><a href="../zh-CN495266/index.html">æ–‡è‰ºå¤å…´æ—¶æœŸçš„åœ¨çº¿å­¦ä¹ ã€‚ä¸ºä»€ä¹ˆ2020å¹´å°†æ˜¾ç¤ºè¿œç¨‹å­¦ä¹ çš„æ‰€æœ‰ä¼˜åŠ¿</a></li>
<li><a href="../zh-CN495268/index.html">UI / UXæ¡ˆä¾‹ï¼šæœºåœºåœè½¦è‡ªåŠ¨åŒ–</a></li>
<li><a href="../zh-CN495272/index.html">SNESæ¨¡æ‹Ÿå™¨ç¦»ç»å¯¹å®Œç¾åªæœ‰å‡ ä¸ªåƒç´ </a></li>
<li><a href="../zh-CN495274/index.html">å¦‚ä½•ä¿®å¤è·¯çº¿æ³„æ¼</a></li>
<li><a href="../zh-CN495276/index.html">å¹¶æ¼”ç¤ºæˆ–è¯æ˜æˆ‘ä»¬å¦‚ä½•é€šè¿‡Uptime Instituteçš„è¿è¥å¯æŒç»­æ€§å®¡æ ¸</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>