<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîº üè® üë®üèæ‚Äç‚úàÔ∏è SameSite = Lax standardm√§√üig - bereits in Chrome 80 stabil (allerdings noch nicht f√ºr alle) üïå üöÄ üè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Neulich hat eine aufmerksame Kollegin (danke, Lena) einen seltsamen Fehler gemeldet - der Server hat normalerweise ein Cookie im Browser gesetzt, aber...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>SameSite = Lax standardm√§√üig - bereits in Chrome 80 stabil (allerdings noch nicht f√ºr alle)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/492830/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neulich hat eine aufmerksame Kollegin (danke, Lena) einen seltsamen Fehler gemeldet - der Server hat normalerweise ein Cookie im Browser gesetzt, aber es ist nicht zur√ºckgekommen. Am Tag zuvor hat alles funktioniert, aber jetzt wurde der Cookie gesetzt, aber nach ein paar Sekunden verschwand er auf magische Weise (obwohl er 24 Stunden dauern sollte). Es wurde nur von wenigen Leuten im Team und nur im neuen Chrome 80 reproduziert, aber der Rest in Chrome hatte genau die gleiche Version, alles war in Ordnung. In anderen Browsern funktionierte alles wie eine Uhr. Mystiker. Sie begannen es herauszufinden, und nach einiger Zeit bemerkte die Chrome-Konsole eine Warnung f√ºr den Antwortheader, in dem das Cookie gesetzt wurde:</font></font><br>
<blockquote><code>A cookie associated with a cross-site resource at _your_domain_ was set without the `SameSite` attribute. A future release of Chrome will only deliver cookies with cross-site requests if they are set with `SameSite=None` and `Secure`.</code></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie begannen zu studieren, was es war, und allm√§hlich wurde klar, wie der Fehler auftrat und warum nicht jeder es zeigte. </font><font style="vertical-align: inherit;">Da unser Service Anfragen aus verschiedenen Dom√§nen verarbeiten muss, ist dies </font></font><code>SameSite</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nur unser Fall. </font><font style="vertical-align: inherit;">Sie f√ºgten hinzu </font></font><code>SameSite=None; Secure</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und das Problem wurde f√ºr uns gel√∂st.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum so?</font></font></h3><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem HTTP-Standard hat der Browser zun√§chst </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cookies</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (oder nur Cookies) f√ºr jede Anfrage an die entsprechende Domain </font><font style="vertical-align: inherit;">gesendet </font><font style="vertical-align: inherit;">. Dies er√∂ffnete M√∂glichkeiten f√ºr einen CSRF-Angriff, der es skrupellosen Personen unter bestimmten Umst√§nden erm√∂glichte, unter dem Deckmantel ahnungsloser Glaubw√ºrdigkeit Zugang zu einigen Ressourcen zu erhalten, indem sie nur ihre Cookies verwendeten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2016 wurde ein Attribut eingef√ºhrt </font></font><code>SameSite</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mit dem Sie steuern k√∂nnen, ob der Browser Cookies sendet, wenn die Seite eine Anfrage an eine andere Domain sendet. Die Entwickler haben die M√∂glichkeit, die √úbertragung ihrer Cookies zu blockieren, wenn die Anfrage von einer Website eines Drittanbieters ausgef√ºhrt wird. Dazu musste das Attribut </font></font><code>SameSite</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">explizit auf </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Strict gesetzt werden.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Cookies werden nur auf Anfrage und √úberg√§nge von der Domain √ºbertragen, zu der sie geh√∂ren) oder </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lax</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Cookies werden beim √úbergang von anderen Websites √ºber einen direkten Link auf die Website √ºbertragen, jedoch nicht auf andere Anfragen von ihnen, beispielsweise wenn eine AJAX-Anfrage gestellt oder Bilder geladen werden ) Die Abwesenheit </font></font><code>SameSite</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">war gleichwertig </font></font><code>SameSite=None</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dh standardm√§√üig wurden auf Anfrage immer noch Cookies √ºbertragen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Mai 2019 k√ºndigten Google Chrome-Entwickler an, dieses Verhalten schrittweise zu √§ndern und das Fehlen von SameSite als </font></font><code>SameSite=Lax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(mehr </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">hier) zu</font></a><font style="vertical-align: inherit;"> interpretieren</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Das hei√üt, standardm√§√üig blockiert der Browser die √úbertragung von Cookies f√ºr Anfragen von der aktuellen Seite an andere Ressourcen, au√üer f√ºr direkte Klicks auf den Link. Die Entwickler von Firefox und Edge haben angek√ºndigt, dass sie diese √Ñnderung im Laufe der Zeit auch in ihren Browsern implementieren werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr Benutzer ist dieses Browserverhalten sicherer. Entwickler von Websites und Webdiensten m√ºssen ber√ºcksichtigen, dass sie ihre Cookie-Attribute explizit festlegen m√ºssen, wenn sie ihre Cookies weiterhin erhalten m√ºssen, wenn sie von anderen Websites angefordert werden </font></font><code>SameSite=None, Secure</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><code>Secure</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">da eine solche Anforderung au√üerdem nur √ºber einen sicheren Kanal an den Server gesendet werden sollte )</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da die Innovation den aktuellen Standard √§ndert und nicht alle Standorte sich schnell anpassen k√∂nnen, erfolgt der √úbergang zu einem neuen Verhalten schrittweise. </font><font style="vertical-align: inherit;">Urspr√ºnglich war es f√ºr eine begrenzte Anzahl von Chrome Beta-Nutzern aktiviert, und jetzt steigt ihre Anzahl allm√§hlich an. </font><font style="vertical-align: inherit;">Aktuelle Informationen finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Der neueste Eintrag auf dem Link:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Letzte Aktualisierung am 9. M√§rz 2020. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben damit begonnen, das neue Verhalten f√ºr Chrome 80 Stable durchzusetzen, nur nicht f√ºr 100% der Nutzer. </font><font style="vertical-align: inherit;">Der kontrollierte Rollout ist auf eine begrenzte Grundgesamtheit beschr√§nkt.</font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das hei√üt, die Beta-Testphase ist vorbei und Chrome-Entwickler haben begonnen, langsam neue Funktionen f√ºr normale Benutzer bereitzustellen. Was im Prinzip gut ist, da es wirklich sicherer ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen das alte Verhalten √ºber die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einstellungen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wiederherstellen </font><font style="vertical-align: inherit;">: </font><b><font style="vertical-align: inherit;">Geben Sie</font></b><font style="vertical-align: inherit;"> in der Chrome-Adressleiste ein </font></font><code>chrome://flags</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, gehen Sie zur Seite, suchen Sie das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Element SameSite als Standard-Cookies</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und setzen Sie es auf </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deaktiviert</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dies ist jedoch besser zum Testen geeignet als f√ºr normale Benutzer. Wenn auf Ihrem Chrome 80 immer noch das alte Verhalten ausgef√ºhrt wird, k√∂nnen Sie die neue Funktionalit√§t erzwingen, indem Sie dieselbe Einstellung auf </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktiviert setzen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Ihre Website auf Anfrage von verschiedenen Domains Cookies erhalten muss, sollten Sie daher auf die bevorstehenden √Ñnderungen vorbereitet sein (und wer auch immer bereit ist, ist daf√ºr gut). </font><font style="vertical-align: inherit;">Gut zu allen! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinzugef√ºgt von:</font></font></b><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xdenser</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In den Kommentaren wird darauf hingewiesen, dass einige √§ltere Browserversionen </font></font><code>SameSite=None</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solche Cookies </font><font style="vertical-align: inherit;">nicht unterst√ºtzen </font><font style="vertical-align: inherit;">, sie √ºberhaupt nicht akzeptieren oder auf nicht standardm√§√üige Weise verarbeiten. </font><font style="vertical-align: inherit;">Darunter befinden sich Browser f√ºr Desktops und mobile Ger√§te. </font><font style="vertical-align: inherit;">Die Seite </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.chromium.org/updates/same-site/incompatible-clients</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bietet eine Liste von Browsern und eine m√∂gliche L√∂sung des Problems (in Pseudocode, aber ziemlich detailliert). </font><font style="vertical-align: inherit;">Die Autoren schlagen vor, problematische Versionen von Browsern anhand des Titels zu erkennen </font></font><code>useragent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und das Cookie-Attribut </font></font><code>SameSite=None</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√ºberhaupt </font><font style="vertical-align: inherit;">nicht festzulegen </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinzugef√ºgt 2:</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Zusammenhang mit der Situation mit COVID-19 setzt Google ab dem 3. April 2020 die Implementierung der beschriebenen √Ñnderungen in der Verarbeitung von SameSite vor√ºbergehend aus, um den reibungslosen Betrieb von Internetdiensten sicherzustellen. </font><font style="vertical-align: inherit;">Auf Ger√§ten, auf denen √Ñnderungen bereits angewendet wurden, werden sie abgebrochen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(c) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blog.chromium.org/2020/04/temporARY-rolling-back-samesite.html</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Quellen: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web.dev/samesite-cookies-explained </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.chromium.org/updates/same-site </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.chromestatus.com/ feature / 5088147346030592 </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.chromium.org/updates/same-site/incompatible-clients </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blog.chromium.org/2020/04/temporically-rolling-back-samesite.html</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de492812/index.html">Versuch, GAN-Netzwerke in OpenVINO auszuf√ºhren</a></li>
<li><a href="../de492816/index.html">Tipps und Tricks zu IntelliJ IDEA: 4. Einstellungen synchronisieren und freigeben</a></li>
<li><a href="../de492820/index.html">.Net Core Api: Abrufen von Daten in einer Anfrage aus verschiedenen Quellen</a></li>
<li><a href="../de492822/index.html">CSS-Entwickler - warum braucht die Welt sie?</a></li>
<li><a href="../de492828/index.html">Wie man in einer verschlossenen Welt √ºberlebt</a></li>
<li><a href="../de492832/index.html">IoT-Gateway f√ºr Industrieprotokolle basierend auf i.MX6 und Linux</a></li>
<li><a href="../de492834/index.html">Was ist zwischen LVM und Matroschka gemeinsam?</a></li>
<li><a href="../de492838/index.html">Schlie√üen Sie den M5Stack an das Fernsehger√§t an</a></li>
<li><a href="../de492844/index.html">Visualisieren und Animieren von (geophysikalischen) Modellen. 3D-Animation und Visualisierung von 4D-Daten</a></li>
<li><a href="../de492850/index.html">Nicht jeder m√∂chte zur Fernarbeit wechseln</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>