<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💃🏿 🤾🏾 🚣🏼 Loghouse 0.3 - la mise à jour tant attendue de notre système de journalisation à Kubernetes 🧛🏾 👩🏽‍🎤 📼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Flant a un certain nombre de développements Open Source, principalement pour Kubernetes, et Loghouse est l'un des plus populaires. Il s'agit de notre ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Loghouse 0.3 - la mise à jour tant attendue de notre système de journalisation à Kubernetes</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/493158/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flant a un certain nombre de développements Open Source, principalement pour Kubernetes, et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Loghouse</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est l'un des plus populaires. </font><font style="vertical-align: inherit;">Il s'agit de notre outil de journalisation central dans K8s, qui a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">été introduit il y a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> plus de 2 ans. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ac/qe/lz/acqelzxpdkabvtthknpon8dnv1g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme nous l'avons mentionné dans un récent </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article sur les journaux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , il a nécessité un raffinement et sa pertinence n'a fait qu'augmenter avec le temps. </font><font style="vertical-align: inherit;">Aujourd'hui, nous sommes heureux de présenter une nouvelle version de loghouse - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.3.0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Détails sur elle - sous la coupe.</font></font><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">désavantages</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons utilisé Loghouse dans de nombreux clusters Kubernetes pendant tout ce temps, et en général, cette solution convient à la fois à nous-mêmes et aux différents clients auxquels nous fournissons également un accès. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ses principaux </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avantages</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sont son interface simple et intuitive, la possibilité d'exécuter des requêtes SQL, une bonne compression et une faible consommation de ressources lors de l'insertion de données dans la base de données, ainsi qu'une faible surcharge pendant le stockage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">problèmes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> les plus douloureux </font><font style="vertical-align: inherit;">dans la maison en rondins pendant le fonctionnement:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilisation de tables de partition jointes par une table de fusion;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> absence de tampon qui atténuerait les rafales de journaux;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gemme de panneau Web obsolète et potentiellement vulnérable</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fluentd obsolète (loghouse </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-fluentd: le dernier</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'a pas démarré en raison d'un jeu de gemmes problématique).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En outre, un nombre important de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">problèmes se</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sont accumulés </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">sur GitHub</font></a><font style="vertical-align: inherit;"> , que je voudrais également résoudre.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Changements majeurs dans la loghouse 0.3.0</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, nous avons accumulé suffisamment de changements, mais nous soulignerons les plus importants. </font><font style="vertical-align: inherit;">Ils peuvent être divisés en 3 groupes principaux:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> améliorer le stockage des journaux et le schéma de la base de données;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> amélioration de la collecte des journaux;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> l'apparition de la surveillance.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Améliorations du stockage des journaux et de la conception de la base de données</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Innovations clés:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les schémas de stockage des journaux ont changé, la transition </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vers une table unique et le rejet des tables de partition sont terminés</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mécanisme de nettoyage de base</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> intégré à ClickHouse des dernières versions a commencé à </font><font style="vertical-align: inherit;">être appliqué </font><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez maintenant </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utiliser une installation ClickHouse externe</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , même en mode cluster.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comparez les </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performances des anciens et des nouveaux circuits</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans un projet réel. </font><font style="vertical-align: inherit;">Voici un exemple de recherche d'URL uniques dans les journaux d'application de la ressource en ligne populaire </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dtf.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> 
    string_fields.values[indexOf(string_fields.names, <span class="hljs-string">'path'</span>)] <span class="hljs-keyword">AS</span> <span class="hljs-keyword">path</span>, 
    <span class="hljs-keyword">count</span>(*) <span class="hljs-keyword">AS</span> <span class="hljs-keyword">count</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-keyword">logs</span>
<span class="hljs-keyword">WHERE</span> (namespace = <span class="hljs-string">'kube-nginx-ingress'</span>) <span class="hljs-keyword">AND</span> ((string_fields.values[indexOf(string_fields.names, <span class="hljs-string">'vhost'</span>)]) <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%foobar.baz%'</span>) <span class="hljs-keyword">AND</span> (<span class="hljs-built_in">date</span> = <span class="hljs-string">'2020-02-29'</span>)
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> string_fields.values[indexOf(string_fields.names, <span class="hljs-string">'path'</span>)]
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">count</span> <span class="hljs-keyword">DESC</span>
<span class="hljs-keyword">LIMIT</span> <span class="hljs-number">20</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La sélection s'effectue sur des dizaines de millions d'enregistrements. </font><font style="vertical-align: inherit;">L'ancien schéma fonctionnait en 20 secondes: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qx/ws/cg/qxwscgrtd4sjpjxd5njk4l9cgp8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nouveau - en 14: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sl/ra/n6/slran6jzocb2yzljkocrkeap5vs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous utilisez notre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Helm-chart</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , alors lors de la mise à jour de la loghouse, la base de données sera automatiquement migrée vers le nouveau format. </font><font style="vertical-align: inherit;">Sinon, vous devrez effectuer la migration manuellement. </font><font style="vertical-align: inherit;">Le processus est décrit dans la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">En bref, lancez simplement:</font></font><br>
<br>
<pre><code class="bash hljs">DO_DB_DEPLOY=<span class="hljs-literal">true</span> rake create_logs_tables</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, nous avons commencé à utiliser </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TTL pour les tables ClickHouse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Cela vous permet de supprimer automatiquement des données de la base de données qui sont plus anciennes que l'intervalle de temps spécifié:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">logs</span><font></font>
(<font></font>
....<font></font>
)<font></font>
  <span class="hljs-keyword">ENGINE</span> = MergeTree()
  <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> (<span class="hljs-built_in">date</span>)
  <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> (<span class="hljs-built_in">timestamp</span>, nsec, namespace, container_name)<font></font>
  TTL <span class="hljs-built_in">date</span> + toIntervalDay(<span class="hljs-number">14</span>)
  <span class="hljs-keyword">SETTINGS</span> index_granularity = <span class="hljs-number">32768</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Des exemples de schémas de base de données et de configurations pour ClickHouse, y compris un exemple de travail avec le cluster CH, peuvent être trouvés dans la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amélioration de la collecte des journaux</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Innovations clés:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tampon a été</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ajouté </font><font style="vertical-align: inherit;">qui est conçu pour lisser les rafales lorsqu'un grand nombre de journaux apparaissent.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implémentation de la possibilité d' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">envoyer des journaux à la loghouse directement</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> depuis l'application: via TCP et UDP, au format JSON.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La batterie loghouse dans loghouse est une nouvelle table </font></font><code>logs_buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ajoutée au schéma de la base de données. </font><font style="vertical-align: inherit;">Cette table est en mémoire, c'est-à-dire </font><font style="vertical-align: inherit;">stocké dans la RAM (a un type spécial de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tampon</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ); </font><font style="vertical-align: inherit;">c'est elle qui doit lisser la charge sur la base. </font><font style="vertical-align: inherit;">Merci </font><font style="vertical-align: inherit;">pour l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">astuce</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour l'ajouter.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sovigod</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'envoi de journaux implémentés directement à loghouse depuis l'application vous permet de le faire même via netcat:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">echo</span> <span class="hljs-string">'{"log": {"level": "info", "msg": "hello world"}}'</span> | nc fluentd.loghouse 5170</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces journaux peuvent être affichés dans l'espace de noms où loghouse est installé dans le flux </font></font><code>net</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Les </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ii/as/pp/iiasppd5mr1xfl335vemk-cp2h0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
exigences pour les données à envoyer sont minimales: le message doit être un JSON valide avec un champ </font></font><code>log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Le champ </font></font><code>log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, à son tour, peut être une chaîne ou un JSON imbriqué.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Surveillance du sous-système de journalisation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une amélioration importante a été la surveillance de fluentd via Prométhée. </font><font style="vertical-align: inherit;">Maintenant, la loghouse est livrée avec un panneau pour Grafana, qui affiche toutes les métriques de base, telles que:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nombre de travailleurs fluents;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nombre d'événements envoyés à ClickHouse;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> taille du tampon libre en pourcentage.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code du panneau pour Grafana peut être vu dans la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le panneau pour ClickHouse est</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fabriqué sur la base d' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un produit prêt à l'emploi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f1yegor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pour lequel un grand merci à l'auteur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, le panneau affiche le nombre de connexions à ClickHouse, l'utilisation du tampon, l'activité des tâches d'arrière-plan et le nombre de fusions. Cela suffit pour comprendre l'état du système: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gg/pv/lm/ggpvlmvrkdiqpfwk9pea-7-09re.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le panneau pour fluentd</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> montre les instances actives de fluentd. Ceci est particulièrement critique pour ceux qui ne veulent pas / ne peuvent pas perdre de journaux du tout:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gm/sy/si/gmsysi96zdxhm89qhwtzb_a9k30.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus de l'état des pods, le panneau affiche la charge sur la file d'attente pour l'envoi des journaux à ClickHouse. </font><font style="vertical-align: inherit;">À son tour, vous pouvez comprendre si ClickHouse gère la charge ou non. </font><font style="vertical-align: inherit;">Dans les cas où le journal ne peut pas être perdu, ce paramètre devient également critique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Des exemples de panneaux sont affûtés pour notre fourniture de Prometheus Operator, cependant, ils sont facilement modifiés par le biais des variables dans les paramètres. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, dans le cadre du travail de surveillance de loghouse, nous avons rassemblé une image Docker à jour avec </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clickhouse_exporter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0.1.0 publiée par Percona Labs, car l'auteur du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clickhouse_exporter original a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> abandonné son référentiel.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plans futurs</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Permet de déployer un cluster ClickHouse dans Kubernetes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rendez la sélection des journaux asynchrone et supprimez-la de la partie Ruby du backend. </font></font></li>
<li>  Ruby-    ,     .</li>
<li> ,     Go.</li>
<li>   .</li>
</ul><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est agréable de voir que le projet Loghouse a trouvé son public, non seulement après avoir gagné des étoiles dans GitHub (600+), mais aussi en encourageant les vrais utilisateurs à parler de leurs succès et problèmes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ayant créé Loghouse il y a plus de 2 ans, nous n'étions pas sûrs de ses perspectives, espérant que le marché et / ou la communauté Open Source offriraient les meilleures solutions. </font><font style="vertical-align: inherit;">Cependant, nous constatons aujourd'hui qu'il s'agit d'un chemin viable, que nous-mêmes choisissons et utilisons toujours sur de nombreux clusters Kubernetes desservis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous nous réjouissons de toute assistance pour améliorer et développer la maison en rondins. </font><font style="vertical-align: inherit;">Si vous manquez quelque chose dans la loghouse - écrivez dans les commentaires. </font><font style="vertical-align: inherit;">Bien sûr, nous serons également heureux d'être actifs sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lisez aussi dans notre blog:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">« </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journaux dans Kubernetes (et pas seulement) aujourd'hui: attentes et réalité</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> »;</font></font></li>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> loghouse — Open Source-      Kubernetes</a>».</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr493140/index.html">Les aventures de Cipollino: Quarantine IT Quest from Flant</a></li>
<li><a href="../fr493142/index.html">"Utilisons Kubernetes!" Vous avez maintenant 8 problèmes</a></li>
<li><a href="../fr493146/index.html">Projets parallèles passionnants que vous pouvez faire aujourd'hui</a></li>
<li><a href="../fr493150/index.html">"À distance" avec un routeur Cisco</a></li>
<li><a href="../fr493152/index.html">Réseaux de neurones et Process Mining: essayer de se faire des amis</a></li>
<li><a href="../fr493160/index.html">Comment nous avons amélioré la recherche intelligente sur hh.ru en 2019: infographie</a></li>
<li><a href="../fr493162/index.html">Une liste ouverte de réunions et conférences en ligne</a></li>
<li><a href="../fr493164/index.html">Il s'avère que le commerce en ligne survit dans l'environnement actuel. Pourquoi? ADN supprimé</a></li>
<li><a href="../fr493166/index.html">Ontol: une sélection d'articles sur le "burnout" [100+]</a></li>
<li><a href="../fr493168/index.html">Calculatrice Pipipax</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>