<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥗 🏇🏾 ⛹🏼 Tentang kebocoran GDI dan pentingnya keberuntungan 👩‍🚀 💃🏽 🏸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada Mei 2019, saya diminta untuk melihat bug Chrome yang berpotensi berbahaya. Pada awalnya, saya mendiagnosis dia tidak penting, buang-buang dengan ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Tentang kebocoran GDI dan pentingnya keberuntungan</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501506/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e75/586/6da/e755866da35a13300e4fde55ebfd100b.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada Mei 2019, saya diminta untuk melihat bug Chrome yang berpotensi berbahaya. Pada awalnya, saya mendiagnosis dia tidak penting, buang-buang dengan cara ini dua minggu. Kemudian, ketika saya kembali ke penyelidikan, itu berubah menjadi penyebab nomor satu proses browser macet di saluran beta Chrome. Ups </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6 Juni, hari yang sama ketika saya menyadari kesalahan saya dalam menafsirkan data keberangkatan, bug itu ditandai sebagai ReleaseBlock-Stable. Ini berarti bahwa kami tidak akan dapat merilis versi baru Chrome untuk sebagian besar pengguna sampai kami mengetahui apa yang sedang terjadi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kecelakaan terjadi karena kami kehabisan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objek GDI (Graphics Device Interface)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi kami tidak tahu apa jenis objek GDI mereka, data diagnostik tidak memberikan petunjuk tentang di mana masalahnya, dan kami tidak dapat membuatnya kembali.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Banyak orang dari tim kami bekerja keras pada bug ini pada 6-7 Juni, mereka menguji teori mereka, tetapi tidak maju. Pada 8 Juni, saya memutuskan untuk memeriksa email saya, dan Chrome segera macet. Itu </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kegagalan yang sama</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ironis sekali. Sementara saya mencari perubahan dan memeriksa laporan kerusakan, mencoba mencari tahu apa yang dapat menyebabkan proses browser Chrome membocorkan objek GDI, jumlah objek GDI di browser saya terus naik, dan pada pagi hari 8 Juni itu melampaui angka </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ajaib 10.000</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Pada titik ini, salah satu operasi alokasi memori untuk objek GDI gagal dan kami sengaja menutup browser. Itu adalah keberuntungan yang luar biasa.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda dapat mereproduksi bug, maka Anda dapat memperbaikinya. </font><font style="vertical-align: inherit;">Saya hanya harus mencari tahu bagaimana saya menyebabkan bug ini, setelah itu kita bisa menghilangkannya.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagai permulaan, sejarah singkat masalah ini</font></font></h2><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a10/aba/273/a10aba273e79a9fc534a6d436c21f8de.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sebagian besar tempat dalam kode Chromium, ketika kami mencoba mengalokasikan memori untuk objek GDI, kami pertama-tama memeriksa apakah alokasi ini berhasil. Jika tidak mungkin mengalokasikan memori, maka kami menulis beberapa informasi ke stack dan sengaja melakukan crash, seperti yang </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dapat dilihat pada kode sumber ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Kegagalan disebabkan secara sengaja, karena jika kita tidak dapat mengalokasikan memori untuk objek GDI, maka kita tidak akan dapat merender di layar - lebih baik melaporkan masalah (jika laporan kerusakan diaktifkan) dan memulai kembali proses daripada menampilkan UI kosong. Secara default, Anda dapat membuat sebanyak 10.000 objek GDI per proses, dan biasanya hanya beberapa ratus yang digunakan. Karena itu, jika kita melampaui batas ini, maka ada yang salah.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika kami mendapatkan salah satu laporan kerusakan yang mengatakan kesalahan alokasi memori untuk objek GDI, kami memiliki tumpukan panggilan dan segala macam informasi berguna lainnya. </font><font style="vertical-align: inherit;">Baik! </font><font style="vertical-align: inherit;">Tetapi masalahnya adalah bahwa dump crash seperti itu belum tentu terkait dengan bug. </font><font style="vertical-align: inherit;">Ini karena kode yang menyebabkan kebocoran objek GDI dan kode yang melaporkan kegagalan mungkin bukan kode yang sama. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Artinya, secara kasar, kami memiliki dua jenis kode:</font></font><br>
<br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membatalkan GoodCode () {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   auto x = AllocateGDIObject ();</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   jika (! x)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     CollectGDIUsageAndDie ();</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   UseGDIObject (x);</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   FreeGDIObject (x);</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
membatalkan BadCode () {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   auto x = AllocateGDIObject ();</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   UseGDIObject (x);</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font></pre></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode yang baik memperhatikan bahwa alokasi memori gagal, dan melaporkan hal ini, dan kode yang buruk mengabaikan crash dan menumpahkan benda, sehingga "mengganti" kode yang baik sehingga mengambil tanggung jawab. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chromium berisi beberapa juta baris kode. Kami tidak tahu fungsi mana yang memiliki kesalahan, dan bahkan tidak tahu </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jenis</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> objek GDI yang </font><font style="vertical-align: inherit;">bocor. Salah satu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kolega</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> saya </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">menambahkan kode</font></a><font style="vertical-align: inherit;"> yang melewati </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blok Lingkungan Proses</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sebelum kecelakaan </font><font style="vertical-align: inherit;">untuk mendapatkan jumlah objek GDI dari setiap jenis, tetapi untuk semua jenis yang disebutkan (konteks perangkat, area, bitmap, palet, kuas, bulu, dan tidak diketahui) jumlahnya tidak melebihi seratus. Ini aneh.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata objek yang kami mengalokasikan memori secara langsung ada di tabel ini, tetapi tidak ada objek yang dibuat oleh kernel atas nama kami, dan mereka ada di suatu tempat di manajer objek Windows. </font><font style="vertical-align: inherit;">Ini berarti bahwa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GDIView</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sama buta dengan masalah ini seperti kita (selain itu, GDIView hanya berguna ketika memainkan kegagalan secara lokal). </font><font style="vertical-align: inherit;">Karena kami telah membocorkan kursor, dan kursor adalah objek USER32 dengan objek GDI melekat padanya; </font><font style="vertical-align: inherit;">memori untuk objek GDI ini dialokasikan oleh kernel, dan kami tidak dapat melihat apa yang terjadi.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Salah tafsir</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fungsi kami </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CollectGDIUsageAndDie memiliki</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nama yang sangat jelas, dan saya pikir Anda akan setuju dengan saya dalam hal ini. Sangat mahal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalahnya adalah ia melakukan terlalu banyak tindakan. CollectGDIUsageAndDie memeriksa sekitar selusin jenis kegagalan alokasi memori untuk objek GDI, dan sebagai hasil penyisipan kode, mereka menerima tanda tangan kegagalan yang sama sebagai hasilnya - mereka semua menabrak fungsi utama dan bergabung bersama. Oleh karena itu, salah satu kolega saya dengan bijak </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">melakukan perubahan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , memecah cek yang berbeda menjadi fungsi yang terpisah (bukan bawaan). Berkat ini, sekarang, pada pandangan pertama, kita bisa memahami cek mana yang berakhir dengan kegagalan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sayangnya, ini mengarah pada fakta bahwa ketika kami mulai mendapatkan laporan </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">kerusakan</font></a><font style="vertical-align: inherit;"> dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CrashIfExcessiveHandles</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Saya dengan yakin mengatakan: "ini bukan penyebab kegagalan, itu hanya disebabkan oleh perubahan tanda tangan." </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi saya salah. </font><font style="vertical-align: inherit;">Ini adalah penyebab kegagalan </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> perubahan tanda tangan. </font><font style="vertical-align: inherit;">Ups </font><font style="vertical-align: inherit;">Analisis canggung, Dawson. </font><font style="vertical-align: inherit;">Tidak ada cookie untuk Anda.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kembali ke kisah kita</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada titik ini, saya sudah tahu bahwa sesuatu yang saya lakukan pada 7 Juni menggunakan hampir 10.000 objek GDI per hari. </font><font style="vertical-align: inherit;">Jika saya bisa mengerti itu, saya akan memecahkan teka-teki itu.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0c0/b8e/9ee/0c0b8e9ee9f5afdfff26391eb2e360f8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windows Task Manager memiliki kolom </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objek GDI</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tambahan </font><font style="vertical-align: inherit;">yang dapat Anda gunakan untuk menemukan kebocoran. Pada 7 Juni, saya bekerja dari rumah, menghubungkan ke mesin kerja saya, dan kolom ini dinyalakan pada mesin kerja karena saya menjalankan tes dan mencoba mereproduksi skenario kecelakaan. Tetapi sementara itu, </font><font style="vertical-align: inherit;">ada kebocoran benda GDI </font><font style="vertical-align: inherit;">di browser di </font><font style="vertical-align: inherit;">mesin </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rumah</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> saya </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tugas utama saya menggunakan browser di rumah adalah untuk terhubung ke mesin yang berfungsi menggunakan aplikasi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chrome Remote Desktop (CRD)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Jadi saya menyalakan kolom objek GDI di mesin rumah dan mulai bereksperimen. Segera saya mendapat hasilnya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Faktanya, garis waktu bug menunjukkan bahwa dari saat "Saya mengalami kegagalan" (14:00) hingga "entah bagaimana terhubung dengan CRD", dan kemudian ke "case in cursors" hanya 35 menit berlalu. Saya sudah mengatakan betapa mudahnya untuk menyelidiki bug saat Anda dapat memutarnya secara lokal? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata setiap kali aplikasi CRD (atau aplikasi Chrome apa pun?) Mengubah kursor, ini menyebabkan kebocoran enam objek GDI. Jika Anda memindahkan mouse ke bagian layar yang diinginkan saat bekerja dengan Chrome Remote Desktop, ratusan objek GDI per menit dan ribuan per jam dapat bocor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah sebulan tidak ada kemajuan dalam menyelesaikan masalah ini, tiba-tiba berubah dari yang tidak dapat diperbaiki menjadi koreksi sederhana. Saya segera menulis perbaikan konsep, dan kemudian salah satu rekan saya (saya tidak mengerjakan bug ini) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membuat perbaikan yang nyata</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Itu diunduh pada 10 Juni pukul 11:16, dan dirilis pada 13:00. </font><font style="vertical-align: inherit;">Setelah beberapa penggabungan, bug menghilang.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Itu saja?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memperbaiki bug, dan itu hebat, tetapi jauh lebih penting bahwa bug seperti itu tidak pernah terjadi lagi. </font><font style="vertical-align: inherit;">Jelas, sudah benar untuk menggunakan objek C ++ ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAII</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font><font style="vertical-align: inherit;">untuk manajemen sumber daya </font><font style="vertical-align: inherit;">, tetapi dalam kasus ini bug itu terkandung dalam kelas WebCursor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika datang ke kebocoran memori, ada satu set sistem yang dapat diandalkan. </font><font style="vertical-align: inherit;">Microsoft memiliki </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tumpukan foto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Chromium memiliki </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">profil tumpukan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk versi pengguna dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">penghapus kebocoran</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pada mesin uji. </font><font style="vertical-align: inherit;">Tetapi tampaknya kebocoran benda-benda GDI telah kehilangan perhatian. </font><font style="vertical-align: inherit;">Blok Informasi Proses berisi informasi yang tidak lengkap, beberapa objek GDI dapat didaftar hanya dalam mode kernel, dan tidak ada titik tunggal untuk mengalokasikan dan membebaskan memori untuk objek yang dapat memfasilitasi pelacakan. </font><font style="vertical-align: inherit;">Ini bukan kebocoran pertama dari objek GDI yang harus saya tangani, dan itu tidak akan menjadi yang terakhir, karena tidak ada cara yang dapat diandalkan untuk melacaknya. </font><font style="vertical-align: inherit;">Berikut adalah rekomendasi saya untuk rilis Windows berikut:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadikan proses mendapatkan jumlah </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">semua</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jenis objek GDI sepele, tanpa harus membaca PEB secara tidak jelas (dan tanpa mengabaikan kursor)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buat cara yang didukung untuk mencegat dan melacak </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">semua</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> operasi pembuatan dan penghancuran objek GDI untuk pelacakan yang andal; </font><font style="vertical-align: inherit;">termasuk untuk mereka yang diciptakan secara tidak langsung</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renungkan semua ini dalam dokumentasi</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu saja. </font><font style="vertical-align: inherit;">Pelacakan semacam itu bahkan tidak sulit untuk diimplementasikan, karena objek GDI harus dibatasi sedemikian rupa sehingga memori tidak terbatas. </font><font style="vertical-align: inherit;">Akan lebih bagus jika menggunakan objek GDI yang aneh tapi tak terhindarkan ini akan lebih aman. </font><font style="vertical-align: inherit;">Bisa aja. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anda dapat membaca diskusi tentang Reddit. </font><font style="vertical-align: inherit;">Topik di Twitter dimulai di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id501494/index.html">Bukan Gram untuk jiwa: kisah cryptocurrency Durov yang gagal</a></li>
<li><a href="../id501496/index.html">Danau Komet, penyelesaian iterasi</a></li>
<li><a href="../id501498/index.html">Berapa banyak kode C ++ perlu ditulis untuk mengurai header HTTP Otorisasi menggunakan easy_parser dari RESTinio?</a></li>
<li><a href="../id501500/index.html">Retasan visual: apa yang mengancam dan bagaimana melindungi diri Anda dari mata-mata</a></li>
<li><a href="../id501502/index.html">Sintesis Digital Lab Baru Berlanjut Harris Book dan Membantu Membuat Video Game FPGA</a></li>
<li><a href="../id501508/index.html">Sialan CRM lama</a></li>
<li><a href="../id501510/index.html">Tampilan baru pada pengembangan Fullstack dengan kerangka kerja Ruby on Rails</a></li>
<li><a href="../id501516/index.html">Mari matikan ruang hampa ?! Alexey Lesovsky</a></li>
<li><a href="../id501520/index.html">C # 8 dan validitas nol. Bagaimana kita hidup dengan ini</a></li>
<li><a href="../id501522/index.html">Webinar Skillbox Gratis: Game Menulis dalam PHP, Unity, dan Unreal Engine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>