<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•ö üí• ü§úüèª Como evacuamos a troca de tarefas do Yandex üíÉüèª üë∏üèæ üóª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quando o trabalho se encaixa em um laptop e pode ser executado de forma aut√¥noma por outras pessoas, n√£o h√° problema em mudar para um local remoto - b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Como evacuamos a troca de tarefas do Yandex</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/498426/"><img src="https://habrastorage.org/webt/as/kx/qr/askxqrmenpitf9-j1es44_nly14.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando o trabalho se encaixa em um laptop e pode ser executado de forma aut√¥noma por outras pessoas, n√£o h√° problema em mudar para um local remoto - basta ficar em casa pela manh√£. </font><font style="vertical-align: inherit;">Mas nem todo mundo teve tanta sorte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A Duty Shift √© uma equipe de especialistas em disponibilidade de servi√ßos (SRE). </font><font style="vertical-align: inherit;">Inclui administradores de servi√ßo, desenvolvedores, gerentes, bem como um "painel" comum de 26 pain√©is LCD de 55 polegadas cada. </font><font style="vertical-align: inherit;">A estabilidade dos servi√ßos da empresa e a velocidade de resolu√ß√£o de problemas dependem do trabalho da mudan√ßa de plant√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoje Dmitry Melikov</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tal10n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, o supervisor de turno, falar√° sobre como eles conseguiram transportar equipamentos para suas casas e estabelecer novos processos de trabalho em quest√£o de dias. </font><font style="vertical-align: inherit;">Eu dou a ele a palavra.</font></font><br>
<br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Quando voc√™ tem um suprimento infinito de tempo, pode mover-se confortavelmente com qualquer coisa em qualquer lugar. </font><font style="vertical-align: inherit;">Mas a r√°pida dissemina√ß√£o do coronav√≠rus nos colocou em condi√ß√µes completamente diferentes. </font><font style="vertical-align: inherit;">Os funcion√°rios da Yandex foram os primeiros a mudar para o trabalho remoto - mesmo antes da introdu√ß√£o do regime de auto-isolamento. </font><font style="vertical-align: inherit;">Aconteceu assim. </font><font style="vertical-align: inherit;">Na quinta-feira, 12 de mar√ßo, fui convidado a avaliar a oportunidade de transferir o trabalho da equipe para casa. </font><font style="vertical-align: inherit;">Na sexta-feira 13, houve uma recomenda√ß√£o para mudar para o trabalho remoto. </font><font style="vertical-align: inherit;">Na noite de ter√ßa-feira, 17 de mar√ßo, tudo estava pronto para n√≥s: os atendentes trabalhavam em casa, o equipamento foi transportado, o software ausente foi gravado, os processos foram reconfigurados. </font><font style="vertical-align: inherit;">E agora vou contar como fizemos. </font><font style="vertical-align: inherit;">Mas primeiro voc√™ precisa se lembrar daquelas tarefas que s√£o resolvidas pela mudan√ßa de plant√£o.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quem n√≥s somos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yandex √© uma grande empresa com centenas de servi√ßos. A estabilidade da pesquisa, do assistente de voz e de todos os outros produtos depende n√£o apenas dos desenvolvedores. O data center pode interromper a fonte de alimenta√ß√£o. Um trabalhador pode danificar acidentalmente um cabo √≥ptico ao substituir o asfalto. Ou pode haver um aumento na atividade do usu√°rio, o que exigir√° uma realoca√ß√£o urgente de energia. Al√©m disso, todos n√≥s vivemos em uma infraestrutura grande e complexa, e o lan√ßamento de um dos produtos pode levar acidentalmente √† degrada√ß√£o do outro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
26 pain√©is em nosso espa√ßo aberto s√£o mil e meio alertas e mais de cem gr√°ficos e pain√©is de nossos servi√ßos. De fato, este √© um enorme painel de diagn√≥stico. Um administrador de servi√ßo experiente, olhando para ela, entende rapidamente o status de n√≥s importantes e pode estabelecer uma dire√ß√£o para investigar um problema tecnol√≥gico. Isso n√£o significa que uma pessoa deva olhar constantemente para todos os dispositivos: a pr√≥pria automa√ß√£o atrair√° a aten√ß√£o enviando uma notifica√ß√£o para a interface especial da pessoa em servi√ßo, mas sem um painel visual, a solu√ß√£o para o problema pode ser adiada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando surgem problemas, o atendente primeiro avalia sua prioridade. Ele ent√£o isola o problema ou minimiza seu impacto nos usu√°rios.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem v√°rias maneiras padr√£o de isolar um problema. Uma delas √© a degrada√ß√£o dos servi√ßos, quando o administrador de servi√ßo desativa algumas das fun√ß√µes que os usu√°rios menos percebem. Isso permite reduzir temporariamente a carga e descobrir o que aconteceu. Se houver um problema com o datacenter, o atendente entrar√° em contato com a equipe de opera√ß√£o, entender√° o problema, monitorar√° o tempo de sua solu√ß√£o e, se necess√°rio, conectar√° equipes especializadas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando o administrador de servi√ßo n√£o pode isolar o problema que surgiu devido ao lan√ßamento, ele o reporta √† equipe de servi√ßo - e os desenvolvedores procuram erros no novo c√≥digo. Se eles n√£o conseguirem descobrir, o administrador atrai desenvolvedores de outros produtos ou engenheiros para a disponibilidade dos servi√ßos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Posso falar por um longo tempo sobre como tudo est√° organizado conosco, mas acho que j√° transmiti a ess√™ncia. </font><font style="vertical-align: inherit;">A troca de tarefas coordena o trabalho de todos os servi√ßos e controla os problemas globais. </font><font style="vertical-align: inherit;">√â importante que o administrador de plant√£o tenha um painel de diagn√≥stico diante dos olhos. </font><font style="vertical-align: inherit;">√â por isso que, ao mudar para o trabalho remoto, voc√™ n√£o pode simplesmente levar e dar a todos um laptop. </font><font style="vertical-align: inherit;">Gr√°ficos e alertas n√£o cabem na tela. </font><font style="vertical-align: inherit;">O que fazer?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Id√©ia</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No escrit√≥rio, todos os dez administradores de servi√ßo trabalham em turnos atr√°s de um painel, que inclui 26 monitores, dois computadores, quatro placas de v√≠deo NVIDIA Quadro NVS 810, duas fontes de alimenta√ß√£o ininterrupta e v√°rios acessos independentes √† rede. Mas precis√°vamos oferecer a todos a oportunidade de trabalhar em casa. Apenas n√£o funcionar√° para montar uma parede assim no apartamento (minha esposa ficar√° especialmente feliz com isso), por isso decidimos criar uma vers√£o port√°til que pode ser levada e montada em casa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Come√ßamos a experimentar a configura√ß√£o. Precis√°vamos ajustar todos os dispositivos em menos telas, portanto o principal requisito para o monitor era uma alta densidade de pixels. Dos monitores 4K dispon√≠veis em nosso ambiente, o Lenovo P27u-10 foi escolhido para teste.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dos laptops, eles usaram um MacBook Pro de 16 polegadas. </font><font style="vertical-align: inherit;">Ele possui um subsistema gr√°fico bastante poderoso, necess√°rio para renderizar imagens em v√°rios monitores 4K e quatro conectores universais Tipo-C. </font><font style="vertical-align: inherit;">Voc√™ pode perguntar: por que n√£o um desktop? </font><font style="vertical-align: inherit;">Substituir um laptop por exatamente o mesmo de um armaz√©m √© muito mais f√°cil e r√°pido do que montar e configurar uma unidade de sistema id√™ntica. </font><font style="vertical-align: inherit;">Sim, e pesa menos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora era necess√°rio entender quantos monitores poder√≠amos realmente conectar ao laptop. </font><font style="vertical-align: inherit;">E o problema aqui n√£o √© o n√∫mero de conectores, poder√≠amos descobrir apenas testando o sistema completo.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6i/oe/tn/6ioetnysrbrhlu7qi03q5uorozy.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teste</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Colocamos confortavelmente todos os gr√°ficos e alertas em quatro monitores e at√© os conectamos a um laptop, mas tivemos um problema. A renderiza√ß√£o de 4 √ó 4K pixels nos monitores conectados carregou a placa de v√≠deo de forma que o laptop foi descarregado mesmo durante o carregamento. Felizmente, o problema foi resolvido com a ajuda da docking station Lenovo ThinkPad Thunderbolt 3 Dock Gen 2. Conseguimos conectar um monitor, energia e at√© um mouse favorito com um teclado √† docking station.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas imediatamente outro problema surgiu: a GPU inflou tanto que o laptop superaqueceu, o que significa que a bateria tamb√©m superaqueceu, o que, como resultado, entrou no modo de prote√ß√£o e parou de carregar. Em geral, este √© um modo muito √∫til que protege contra situa√ß√µes perigosas. Em alguns casos, o problema foi resolvido com a ajuda de um dispositivo de alta tecnologia - uma caneta esferogr√°fica, colocada sob um laptop para melhorar a ventila√ß√£o. Mas isso n√£o ajudou a todos, ent√£o tamb√©m alteramos a velocidade de um f√£ comum.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Havia outra caracter√≠stica desagrad√°vel. </font><font style="vertical-align: inherit;">Todos os gr√°ficos e alertas devem estar localizados em um local estritamente definido. </font><font style="vertical-align: inherit;">Imagine que voc√™ est√° pilotando um avi√£o para pousar - e aqui os indicadores de velocidade, alt√≠metros, vari√¥metros, indicadores de horizonte, b√∫ssolas e indicadores de posi√ß√£o come√ßam a redimensionar e pular para lugares diferentes. </font><font style="vertical-align: inherit;">Por isso, decidimos fazer um aplicativo que ajudar√° com isso. </font><font style="vertical-align: inherit;">Em uma noite, escrevemos no Electron.js, usando uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pronta </font><font style="vertical-align: inherit;">para criar e gerenciar janelas. </font><font style="vertical-align: inherit;">Adicionamos um manipulador de configura√ß√£o e sua atualiza√ß√£o peri√≥dica, al√©m de suporte para um n√∫mero limitado de monitores. </font><font style="vertical-align: inherit;">Um pouco mais tarde, adicionamos suporte para v√°rias configura√ß√µes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Montagem e entrega</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na segunda-feira, os assistentes de assist√™ncia t√©cnica tinham 40 monitores, dez laptops e tantas esta√ß√µes de acoplamento para n√≥s. N√£o sei como eles fizeram isso, mas muito obrigado. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y5/ig/_i/y5ig_i-32ogwdzgodtoghqxtkvs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Restava levar tudo isso para os apartamentos dos administradores de servi√ßo. E esses s√£o dez endere√ßos em diferentes partes de Moscou: sul, leste, centro e tamb√©m Balashikha, aos quais h√° 45 quil√¥metros do escrit√≥rio (a prop√≥sito, um estagi√°rio de Serpukhov tamb√©m foi adicionado posteriormente). Era necess√°rio, de alguma forma, distribuir tudo isso entre as pessoas, para construir a log√≠stica.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu dirigi todos os endere√ßos em nossos mapas, ainda h√° a oportunidade de otimizar a rota entre pontos diferentes (usei a vers√£o beta gratuita da ferramenta para correios). </font><font style="vertical-align: inherit;">Dividimos nossa equipe em quatro equipes independentes de duas pessoas, cada uma com seu pr√≥prio caminho. </font><font style="vertical-align: inherit;">Meu carro era o mais espa√ßoso, ent√£o levei o equipamento para quatro funcion√°rios ao mesmo tempo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l0/fa/sl/l0faslaayow0ip3rkaglz9nfmhm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toda a entrega levou um recorde de tr√™s horas. </font><font style="vertical-align: inherit;">Sa√≠mos do escrit√≥rio √†s dez da noite de segunda-feira. </font><font style="vertical-align: inherit;">√Ä uma da manh√£ eu j√° estava em casa. </font><font style="vertical-align: inherit;">Naquela mesma noite, entramos em servi√ßo com novos equipamentos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qual √© o resultado</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em vez de um grande console de diagn√≥stico, coletamos dez relativamente port√°teis no apartamento de cada pessoa de plant√£o. </font><font style="vertical-align: inherit;">Obviamente, restava resolver algumas coisinhas. </font><font style="vertical-align: inherit;">Por exemplo, anteriormente t√≠nhamos um telefone "de ferro" da pessoa de plant√£o para notifica√ß√µes. </font><font style="vertical-align: inherit;">Nas novas condi√ß√µes, como n√£o funcionou, criamos "telefones virtuais" para quem est√° de plant√£o (na verdade, canais no messenger). </font><font style="vertical-align: inherit;">Houve outras mudan√ßas. </font><font style="vertical-align: inherit;">Mas o principal √© que, em tempo recorde, conseguimos transferir n√£o apenas pessoas, reduzindo o risco de infec√ß√£o, mas todo o nosso trabalho em casa, sem prejudicar os processos e a estabilidade dos produtos. </font><font style="vertical-align: inherit;">Nesse modo, trabalhamos h√° um m√™s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abaixo, voc√™ encontrar√° fotos dos trabalhos reais de nossos atendentes.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pc/mi/rj/pcmirjydwy5emc9qvy76fshoune.png"><br>
<br>
<img src="https://habrastorage.org/webt/jl/mm/v_/jlmmv_hymx3mh7aiyvda2noqbwk.png"><br>
<br>
<img src="https://habrastorage.org/webt/-b/5w/nz/-b5wnzqoyqixrodue2opshmjgnw.png"><br>
<br>
<img src="https://habrastorage.org/webt/xh/3u/wx/xh3uwxiartgspsynry7c9ufxfzs.png"><br>
<br>
<img src="https://habrastorage.org/webt/ll/a0/f0/lla0f0dinjjmlwsytvp7krxsbni.png"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt498406/index.html">Como a personalidade de um jovem programador brilhante foi destru√≠da</a></li>
<li><a href="../pt498410/index.html">Vivaldi para PC e Vivaldi para Android - Jogo em equipe com pontua√ß√£o 3.0</a></li>
<li><a href="../pt498412/index.html">–°–æ–∑–Ω–∞–Ω–∏–µ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∏–ª–∏ —á—Ç–æ –Ω–µ —Ç–∞–∫ —Å –≤—Ä–µ–º–µ–Ω–µ–º</a></li>
<li><a href="../pt498416/index.html">O Yandex vincular√° automaticamente o cart√£o a outra conta</a></li>
<li><a href="../pt498418/index.html">Implementando o WebRTC em um servidor de m√≠dia - pr√°tica e pol√≠tica</a></li>
<li><a href="../pt498428/index.html">WAL-G: novos recursos e expans√£o da comunidade. Georgy Rylov</a></li>
<li><a href="../pt498430/index.html">O que acontece com o transporte em 22 de abril</a></li>
<li><a href="../pt498436/index.html">Guia de CI / CD do GitLab para o iniciante (quase) absoluto</a></li>
<li><a href="../pt498438/index.html">8 perguntas f√°ceis para mentores de est√°gio</a></li>
<li><a href="../pt498440/index.html">Amea√ßa em destaque: Neshta File Virus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>