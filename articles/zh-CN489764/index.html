<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌗 👨🏾‍🔧 👩‍🏭 “目的地有很多伪装……”，或者我们使用CANNY 3 tiny和光敏电阻自动控制灯泡 📿 💏 🧞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在有关Habr 的上一篇文章中，我告诉您了我如何以礼物的形式收到Canny3微型控制器。我们“闪烁” LED，按下一个按钮。就此而言，原则上可以完成实验。
 
 但是，在过去的两周里，我一直在听有关The Witcher的有声读物，因此对Destination变得更加认真。根据制造商网站上显示的信息...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>“目的地有很多伪装……”，或者我们使用CANNY 3 tiny和光敏电阻自动控制灯泡</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489764/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">有关Habr </font><font style="vertical-align: inherit;">的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上一篇文章</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中，我告诉您了我如何以礼物的形式收到Canny3微型控制器。我们“闪烁” LED，按下一个按钮。就此而言，原则上可以完成实验。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，在过去的两周里，我一直在听有关The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Witcher的</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有</font><font style="vertical-align: inherit;">声读物</font><font style="vertical-align: inherit;">，因此对</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Destination</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变得更加认真</font><font style="vertical-align: inherit;">。根据制造商网站上显示的信息，CANNY系列控制器主要用于各种汽车系统和专用设备的自动化。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
问题是，没有人会允许我用“金手”在一辆真正的汽车中四处张望，总的来说，我怕汽车。</font><font style="vertical-align: inherit;">因此，我必须购买专门用于本文的小型车灯和光敏电阻。</font><font style="vertical-align: inherit;">您不会这样做，以免激怒命运。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今天，我们将控制器和汽车灯连接到12V电源，向COM端口发送消息，根据灯自动包含灯，并尝试使用高频PWM控制器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您是否也相信目的地的力量？</font><font style="vertical-align: inherit;">那么，您将受到猫的欢迎。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yt/kd/tj/ytkdtjul2i1qbdrqllt278lszck.png"><br>
<a name="habracut"></a><br>
<br>
<a name="I"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 第一部分：简介</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一部分：简介</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二部分：组件和注意事项</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第三部分：如何将数据写入COM端口</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第四部分：连接自动灯和光敏电阻并对其进行编程第五</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分：尝试使用PWM降低灯的亮度</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第六部分：结论</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
在本文开头，我提醒您我在DIY电子产品方面没有太多经验。</font><font style="vertical-align: inherit;">许多年前，我涉足CraftDuino-国产Arduino克隆。</font><font style="vertical-align: inherit;">除了他为我做的那些“工艺”</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">德祖格里克</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这实际上是我在DIY电子产品方面的经验有限。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显然，知道我对国内发展的热爱之后，我决定给Canny3。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
即使在准备上一篇文章的过程中，我也感到惊讶的是，该控制器不仅可以由5V供电，而且还可以由12V供电，而输出电压与输出电压相同。输入，每个通道的最大电流高达100mA。在我看来，这很有趣，因为我以前的CraftDuino无法做到。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过使用公式的简单计算</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mo>=</mo><mi>U</mi><mo>&amp;#x2217;</mo><mi>I</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.993ex" height="2.009ex" viewBox="0 -755.5 4302.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-3D" x="1029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMATHI-55" x="2085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-2217" x="3075" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMATHI-49" x="3798" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo>=</mo><mi>U</mi><mo>∗</mo><mi>I</mi></math></span></span><script type="math/tex" id="MathJax-Element-1">P=U*I</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我意识到每个控制器输出的最大功率约为1.2瓦。为了以防万一，决定拿起一个有动力储备的灯。选择落在0.9 W LED灯泡上。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，我仍然不想单调地烧掉我的新年礼物，在连接之前，我决定询问开发人员我是否正确理解了所有内容。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
令我惊讶的是，他们不仅回答了我，而且还建议如果将多个输出组合在一起，功能将成比例地增加。在那之后，决定购买比灯更强大的东西，而选择权落在了插入点烟器中的汽车风扇上。但是，为了避免从文章中得出“醋味”，我决定将对汽车风扇的操作推迟到下一次。</font></font><br>
<br>
<a name="II"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 第二部分：设备和注意事项 </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，在实验开始时，我有以下几点：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">充电和发射装置“ Orion Vympel-55”。</font><font style="vertical-align: inherit;">我已经有了它，幸运的是，它不仅可以为电池充电，而且还可以作为一个宽范围的电源（包括12 V）；</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uj/fi/_i/ujfi_iwx1hku88fcb2trgbdhvqu.jpeg"><br>
<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LED自动灯“ Skyway H3。</font><font style="vertical-align: inherit;">SH3-9SMD-5050 W.” </font><font style="vertical-align: inherit;">据我了解，该灯泡可用于各种头灯，但我无处可挡，因此我选择了功率和连接方便性而无需焊接。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zw/vm/yi/zwvmyih0_5t0grxn5elq4j1zvfe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
顺便说一句，回到功率计算公式，我决定测量电流并确保我适合允许的100 mA。</font><font style="vertical-align: inherit;">理论上，灯泡的电流应为</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>I</mi><mo>=</mo><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>U</mi><mo>=</mo><mn>0.9</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>12</mn><mo>=</mo><mn>0</mn><mo>,</mo><mn>075</mn><mi>A</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.044ex" height="2.634ex" viewBox="0 -809.3 12504.8 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMATHI-49" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-3D" x="782" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMATHI-50" x="1838" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-2F" x="2590" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMATHI-55" x="3090" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-3D" x="4135" y="0"></use><g transform="translate(5192,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-39" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-2F" x="6471" y="0"></use><g transform="translate(6972,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-3D" x="8250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-30" x="9307" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-2C" x="9807" y="0"></use><g transform="translate(10252,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-37" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMAIN-35" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhgjN6JB_SgEgHYSF8mdsFglxfTfKg#MJMATHI-41" x="11754" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>I</mi><mo>=</mo><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>U</mi><mo>=</mo><mn>0.9</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>12</mn><mo>=</mo><mn>0</mn><mo>,</mo><mn>075</mn><mi>A</mi></math></span></span><script type="math/tex" id="MathJax-Element-2">I=P/U=0.9/12=0,075A</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是从测量结果来看，结果要少一些。</font><font style="vertical-align: inherit;">虽然也许我只是做错了什么。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gl/fw/qv/glfwqvsyuybaay2nr5bdftlk2n8.png"><br>
<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">光敏电阻FR-765。</font><font style="vertical-align: inherit;">我之所以选择他，是因为商店里没有其他东西了。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h9/zq/gq/h9zqgqgqp4vfwhhoreh_qxmo5aa.png"></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好吧，我当然有：一个控制器，一个面包板，电线，鳄鱼等。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在上一篇有关Canny 3的文章中，我确实赞扬了控制器，但事实证明，美中不足的是一只苍蝇。</font><font style="vertical-align: inherit;">上一次我没有使用套件随附的捆绑电缆束，但是这次我不能没有它。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于我使用烙铁的情况很差，因此我希望将其用量减少到最低限度。</font><font style="vertical-align: inherit;">因此，最后，我收集了所有可拆卸连接上的电路。</font><font style="vertical-align: inherit;">我使用了特殊的电线（爸爸，妈妈，妈妈，爸爸），面包板和鳄鱼夹。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
而且，如果控制器的开发人员不应该为这样的事实而责怪，那就是在剥皮电缆的过程中，我受到了几次割伤，那么，由于我钩住了“木制”线束，部分原因是出于他们的良心，我的整个结构掉到了地板上。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一方面，止血带是一件好事。为了将控制器安装在车内，我认为线束是正确的。其中的电线绞合在一起，如果绞合得很好，则它们完全适合连接器“母亲”，即我的“面包板”电线。另一方面，用面包板的电缆进行实验是不方便的，因为“橡树电线”，即使将控制器正面朝上的漂亮照片也很难做到。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我说得更高一点，我不想使用烙铁，但至少一次，他们必须武装自己。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了测量来自光敏电阻的信号，我们需要将其“插入”到控制器的模数转换器（ADC）中。</font><font style="vertical-align: inherit;">但是事实是，与我以前的Craftduino不同。</font><font style="vertical-align: inherit;">以Canny为例，事实证明有必要放置跳线。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
开始时，我没有仔细阅读文档，并认为控制器的5和6输出是A5和A6的输出。</font><font style="vertical-align: inherit;">我什至编写了一个程序，并尝试了很长时间才能阅读。</font><font style="vertical-align: inherit;">自然，我没有成功，因为默认情况下，没有进行初步准备，第5和第6通道就可以用作正常的离散输入。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
看完控制器的文档后，我意识到自己仍然需要焊接。</font><font style="vertical-align: inherit;">您不知道我如何害怕“整理”所有内容。</font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 上一次我尝试在电路中焊接一些我为我做的东西 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">德祖格里克</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我设法在焊接处附近的所有电容器中填充焊料。</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这次的焊接过程很简单。</font><font style="vertical-align: inherit;">足够小心地在焊道上滴一滴焊料就足够了。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下图是我的跳线的外观：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/pv/r9/vd/pvr9vdryjakzmbjalenhh6wrn9a.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我仅将第六个输出连接到通道A6，我不敢焊接第五个通道，以免意外地在两个跳线中填充焊料。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">纯粹从理论上讲，可以通过将孔和6号端子连接起来而无需焊铁。</font><font style="vertical-align: inherit;">但这将带来极大的不便。</font></font></i> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下图显示了5号引脚和ADC A5号引脚与爸爸妈妈的连线：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qu/l6/hb/qul6hbndz9lv1jwj8rq-m34sipe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
开始工作之前，您应该注意的最后一件事。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意！</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不要一一重复，我将在本文中进一步描述。</font><font style="vertical-align: inherit;">不要懒惰地用焊接替换插入式连接，接起较粗的电线，阅读文档。</font><font style="vertical-align: inherit;">我不是这些问题的专家，所以我“尽我所能”将所有内容放在一起。</font><font style="vertical-align: inherit;">我还建议您仔细监视火灾隐患，不要让设备无人看管。</font><font style="vertical-align: inherit;">我几次闻到了一些阴燃的气味。</font><font style="vertical-align: inherit;">好吧，即使在电源中也有防止短路的保护措施（我也安排了）。</font><font style="vertical-align: inherit;">因此-请小心。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同样，不要忘记，尽管我们拥有的电压和电流很小，但在电压下仍然接触带电部件可能会很痛苦</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（特别是如果用身体受伤的部位戳戳它们）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a name="III"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 第三部分：如何将数据写入COM端口</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了以某种方式校准我们的环境光传感器，我们需要了解它根据光水平发送给控制器的值是多少。为此，我们需要将数据从ADC输出到监视器。当与Arduino及其克隆合作以解决此类问题时，我使用了COM端口监视器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于Canny 3 tiny，从虚拟COM端口读取数据的过程并不比Arduino复杂得多。但是有一个关键的区别。 CannyLab开发环境没有自己的COM端口监视器。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我</font><font style="vertical-align: inherit;">之所以</font><font style="vertical-align: inherit;">使用</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hterm</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，是因为它是跨平台的，轻巧的并且不需要安装。但是您可以使用其他任何东西。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我还要说更多，没有什么可以阻止我们使用Arduino IDE COM端口监视器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windows 10系统上的所有组件都可以立即使用，而不必为虚拟COM端口单独安装驱动程序。但是以防万一，我要说的是该驱动程序似乎与CannyLab开发环境捆绑在一起（位于drv \ canny3tiny_vcp文件夹中）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了不进一步解释与将数据发送到USB虚拟COM端口相关的图表块如何工作，我将举一个简单的示例。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今天，作为锻炼，我们将使用控制器发送消息“ HABR”。首先，您需要下载IDE CannyLab。可以在开发者的官方网站上轻松找到它。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
顺便说一下，我使用的是CannyLab v 1.42，但我认为在以前的版本中，图表的性能不会有问题。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上一篇文章的第3章中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概述了为新控制器编写软件的过程以及使用Cannylab的基本原理</font><font style="vertical-align: inherit;">。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
创建一个新图表，在对话框中选择Canny 3 tiny。然后，我们将块，常量和寄存器传输到图中，如下面的屏幕截图所示。当然，不必传输文本标签；在执行图的过程中，没有任何依赖于文本标签的问题。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rz/st/g9/rzstg9zmltxsf2ekndo4orydcnu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您不想自己动弹，可以使用</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载本文的图表</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">。</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
应该注意的是，向COM端口发送消息有点奇怪，您必须在镜像中用一对字符写字母，但是您可以习惯它。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我将分部分进行解释。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在</font><b><font style="vertical-align: inherit;">“参数设置”</font></b><font style="vertical-align: inherit;">块中</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们设置USB VCP驱动程序设置。首先，在虚拟COM端口上启用传输模式，然后设置传输消息的长度。在我们的示例中-包括换行符在内的6个字符。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“消息文本”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">块中</font><b><font style="vertical-align: inherit;">，</font></b><font style="vertical-align: inherit;">我们以常量编写消息文本（不要忘记切换到“ chr”模式），并将这些常量传送到相应的驱动程序寄存器。我再次提请您注意我们以相反的顺序在消息对本身和驱动程序寄存器中写入消息的事实。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最后一块</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“消息传输”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以指定的频率将我们的消息发送到COM端口。为此，我们使用PWM模块。不要将其与RF PWM混淆，我们将在连接灯泡时使用它。在这种情况下，块生成时间“ 0”的一半，而后半部分“ 1”。您可以“按时播放”周期的大小并进行填充以增加或减少发送消息的频率。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了检查控制器的运行，必须将绿色LED连接到该PWM模块。如果一切正常，LED将以发送消息的频率闪烁。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">在上一篇文章中</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
我已经说过如何向控制器编写程序</font><font style="vertical-align: inherit;">。但是，在过去的时间里，我学到了另一个很酷的技巧。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当我们将控制器连接到计算机时，它将进入程序记录模式。以前，为了进入运行时模式，我从计算机上卸下了控制器，并将USB充电卡入了计算机。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原来，有一种更简单的方法。将控制器连接到计算机的USB端口并单击CannyLab中的</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“连接”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮后</font><font style="vertical-align: inherit;">，转到</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“设备”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">菜单并选择</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“运行”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/b-/dt/bv/b-dtbvog9sirji-opbj-ehor-hm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
控制器开始执行记录的程序，并通过USB端口供电。此后，控制器也将在COM端口的监视器中变为可用。的确，为了切换回程序录制模式，需要将控制器卸下并重新插入计算机的USB端口。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是Hterm COM端口监视器中的“ HABR”。</font><font style="vertical-align: inherit;">注意数据传输速度和其他设置。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ls/lh/yu/lslhyucpy7cxrmexfqnn3l5swgi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是Arduino IDE COM端口监视器：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ab/zd/vl/abzdvlqwpn6jaw0q0uuzx06ltzo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
图为记录图表后控制器的工作方式：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qv/4n/zu/qv4nzuowx6saogj5xskvkn7dt3w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
红色LED表示已通过计算机的USB端口接收到电源，绿色“闪烁”为通过虚拟USB COM端口发送的消息。</font></font><br>
<br>
<a name="IV"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第四部分：我们连接并编程汽车灯和光敏电阻。</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，我们将考虑最简单的选项。只需将灯连接至控制器的1号端子，并将光敏电阻连接至6号端子（ADC）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一切都非常简单，但以防万一，我画了一张图：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sv/un/pm/svunpmu3hc-n4agrotbzy2rquea.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是在这里看起来很生动：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ap/az/z8/apazz8ybxdpnfnaxf9y3c-daabc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将电源的“-”和“ +”连接到Canny 3的相应端子上，第1针连接到灯罩，而灯的“尾巴”在面包板的面包板上加上一个加号。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用光敏电阻，一切也很简单。另外，我们将面包板从总线带到面包板，负号去往控制器的6号引脚，该引脚先前与跳线连接至ADC。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我已经在上面写过我的整个结构从桌子上摔了好几次。因此，在照片上，导体的颜色及其进入面包板的入口点可能略有不同。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，我们将编写一个程序。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n1/7s/l8/n17sl8exoem1_jl54mqgb-bapeg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
考虑我们封锁的新日子。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们从</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“从ADC获取值并将其转换为套件”块开始</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在此块中，我们转换ADC（0至1023）可以在照度（lux）下给我们的值。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们需要在光照较浅的情况下进行一次测量，而在较暗的条件下进行一次测量。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“来自”的值中，</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我记录了最小的ADC读数“ 0”，而在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“来自”的结果</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中记录了照明水平</font><b><font style="vertical-align: inherit;">的</font></b><font style="vertical-align: inherit;">零值。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ value to”中，</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我记录了ADC读数= 20，并且相应的照度等于300 lux，我在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ result to”中</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入了</font><b><font style="vertical-align: inherit;">结果</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我没有光敏电阻的参数的详细描述，但是我怀疑它没有完全线性的特性，但是对于我们来说这已经足够了。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
预检查在模拟器中如何执行该图。我在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">写了有关CannyLab模拟器中工作的更多详细信息</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这就是我的</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mp/yw/no/mpywnolxlvzxyaqqkeyy3oh2m-u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结论</font><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">假设光敏电阻将10传递给ADC，</font><b><font style="vertical-align: inherit;">“显示（MAP）”</font></b><font style="vertical-align: inherit;">块</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这本质上是线性缩放。十正好是我们刻度尺的一半，这意味着输出将是0-300范围（即150）的一半。这低于指定的300 lux电平，因此，一个被发送到1号通道寄存器（1号输出），灯泡将点亮。 。但是它不会立即打开，只有在黑暗中至少持续一秒钟（1000毫秒）时才会打开。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了了解我们将在COM端口中收到什么消息，我将模拟器中的值显示切换为十六进制格式。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mq/nr/rk/mqnrrkxyzudcput-yez77oke13a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
考虑</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ VCP消息设置寄存器D1：D0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，值3130进入其中。我们记得这是一对字符，每个部分代表一个十六进制字符代码。事实证明，31h是ASCII中的字符代码“ 1”，30是ASCII中的零代码。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ VCP D3：D2消息安装寄存器”中</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们将相应地具有字符“ 0”和“ 5”。我们按照从D0到D3的顺序收集成对的字符值：``0''，``1''，``5''，``0''。所以我们得到了0150 lux。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是正如他们所说的“不是一个模拟器……”。让我们看看实际发生的情况。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在枝形吊灯和自然光（组合照明）下进行测量：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/of/ze/ps/ofzepsndi0bepg1hwoxzursk7my.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
工厂</font><font style="vertical-align: inherit;">照</font><font style="vertical-align: inherit;">度计和我们自制的</font><font style="vertical-align: inherit;">照</font><font style="vertical-align: inherit;">度计</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">读数几乎完全吻合。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
日光下测光：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/w_/kz/aq/w_kzaqulbnhvr-pq2tsdcy7pqu8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
更加糟糕。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这可能是由于光敏电阻特性的非线性所致，也是因为我们将缩放比例下限设置为零，但是为了提高测量精度我们不会使该图复杂化，例如，我们的主要目的是理解获取照明值的一般原理。</font><font style="vertical-align: inherit;">并且提高精度可能会延迟到在汽车或家中实施这些项目之前。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们检查电路的操作，用手指合上传感器，然后松开手指。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4f/nh/qd/4fnhqd-jpxmvsbj5wtvwnokgybg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，当房间里只有黑暗时，有一个选择：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5r/d7/lc/5rd7lcy5_cdx339o6z6c39r3y5i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
灯亮着。</font><font style="vertical-align: inherit;">一切正常。</font></font><br>
<br>
<a name="V"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 第五部分：尝试使用PWM降低灯泡亮度</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们通过更改灯的亮度使该方案复杂一点。为此，我们需要一个高频PWM（RF PWM），在Canny 3 tiny中，它在3号和4号输出上实现。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我决定使用4号输出</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。连接方案实际上将保持不变。简单地说，我们将输出4连接到灯上，而不是输出1，</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qp/bg/b-/qpbgb-a7whds1vugbizqoyr3its.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这就是它在组装时的外观。所不同的是，框架现在不是蓝色，而是蓝色。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2t/z3/nl/2tz3nldjplnly2tzmo7ttrb0he0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该图也没有太大变化。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/or/fx/wl/orfxwlbv1adspw_c0fv2ouenqhy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我不会详细绘制该图。输出4的配置的主要变化，我们将其用于PWM。在本节中，我们必须设置</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“填充设置寄存器”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它花费的时间从2到255微秒，我决定不冒险，选择254.请注意，它一次安装了两个通道（第3号和第4号）。然后，我们在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ PWM通道启用寄存器4号</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”中写入“ 1”，</font><font style="vertical-align: inherit;">从而包括灯泡的PWM。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“以PWM模式（低亮度）打开灯”块中，</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对我们来说新的只是</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“设置4号填充通道的寄存器，μs”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，只要在光电传感器上方的照明水平小于250 lux，我们将在其中写入值“ 10”。在1秒内。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下图显示了灯泡已打开，但光线暗淡。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/om/pp/_t/ompp_teo-f76yagfthj5qylheus.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您希望灯泡更亮，则只需将常数“ 10”的值更改为更大的数字即可。例如，您可以使用数字127，在我们的示例中，它是填充RF PWM周期所需时间的一半，这意味着灯的亮度大约是一半。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lx/ni/3t/lxni3tbt3zw1y6lyqthoqqufc1w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
应该注意的是，该灯的RF PWM效果非常明显。这是三张照片：第一张，我们将</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ 4号通道填充寄存器”中</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">设置</font><font style="vertical-align: inherit;">为10 µs，第二张-110 µs，右侧-210 µs。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ud/os/_w/udos_wpczlgn2m1naf4nc5053da.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原则上，据我所知，本示例中的自动灯用于位置信号，有时还用于汽车的雾灯。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我认为，如果我们完善方案和图表，则可以在较旧的机器上实现在低照度下包括背光。</font><font style="vertical-align: inherit;">没错，您需要考虑夜间人工照明的效果。</font><font style="vertical-align: inherit;">这样一来，在道路上，隧道中以及迎面驶来的汽车的前照灯都没有熄灭。</font><font style="vertical-align: inherit;">或者可以控制车厢内的灯，例如，Ziguli或Niva车门上的灯在打开时不会总是点亮。</font></font><br>
<br>
<a name="VI"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 第六部分：结论 </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在撰写本文的过程中，我产生了强烈的怀旧感。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在研究所学习期间，我的朋友和同学Seryoga拥有别致的蓝色VAZ 2107品牌轿车。他只是对他不做的事情：他会附上某种软管（以增加增压力），在车厢内安装风扇，以便通过单独的按钮打开汽车，然后按一下按钮即可使汽车启动（仅在旋转钥匙的情况下）点火）。通常，他只是没有“调整”他的“吞咽”。从那时起已经过去了很多年，我的朋友搬到了一辆更坚固的汽车上，但是我不敢想象如果他10年前得到这个控制器，他会用他的Zhiguli做什么。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于这篇文章，我也想起了我的目的地。毕竟，我以自动化工程师的身份学习了很多年，但我并不是一天只从事专业工作。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
事实证明，进入DIY世界真是太酷了。在组装电路的过程中，不止一次地“卡住”了一个按钮，以打开/关闭灯泡和LED。当某些东西按预期工作时，这是一种令人愉悦的感觉。我还意识到，使用图对控制器进行编程比在Arduino IDE中编写代码更沉思。对程序的看法完全不同。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在撰写本文时，我为自己订购了一个不带线束的Canny 3 mini版本。现在，我要休息一下，写一篇有关在面包板上安装该控制器的文章，我们将单独分析其帮助下的更多照明自动化示例。</font></font><br>
<br>
<i>   ,  ,    . </i><br>
<br>
<i>UPD:<br>
,       ,            :</i><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">«, ,  –  !»       CANNY 3 tiny</a>.<br>
</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">«  ...»         (CANNY  Arduino)  Raspberry PI</a>.<br>
</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">« ?»     bluetooth      Xamarin (Android)</a>.<br>
</li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN489754/index.html">20个项目管理系统，100个芯片概述</a></li>
<li><a href="../zh-CN489756/index.html">在SVG中创建铅笔效果</a></li>
<li><a href="../zh-CN489758/index.html">Angular：使用NGRX的示例</a></li>
<li><a href="../zh-CN489760/index.html">意识和存在。没有悖论的量子力学</a></li>
<li><a href="../zh-CN489762/index.html">坦克世界解析和数据分析的简单示例</a></li>
<li><a href="../zh-CN489768/index.html">π如何结合碰撞块和量子搜索算法</a></li>
<li><a href="../zh-CN489770/index.html">MinskJS mitap的视频：我的浏览器扩展报告</a></li>
<li><a href="../zh-CN489772/index.html">Yandex的Simferopol中的Hackathon。对话和聊天机器人技术定律</a></li>
<li><a href="../zh-CN489774/index.html">我如何使用Node-RED自动化公寓的故事。第二部分</a></li>
<li><a href="../zh-CN489776/index.html">灰烬时代-第136期</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>