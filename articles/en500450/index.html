<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïπÔ∏è üî† üë©üèª‚Äçü§ù‚Äçüë®üèº Making a MIDI keyboard from an old children's synthesizer üòê üë®üèæ‚Äçüé® üôèüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One day, returning home, near the garbage chute in the entrance, I saw an old children's toy synthesizer. Passed by, since it was ‚Äúsinful‚Äù to take it ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Making a MIDI keyboard from an old children's synthesizer</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500450/"><img src="https://habrastorage.org/webt/-g/1_/nu/-g1_nu7zf-kudqjkv5ygvqjysao.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One day, returning home, near the garbage chute in the entrance, I saw an old children's toy synthesizer. Passed by, since it was ‚Äúsinful‚Äù to take it from the trash, but in my heart I wanted to drag it out of there. Already late at night, at about 2 o‚Äôclock, I decided to see if she was still standing there. And yes, she was still there! In appearance, she was completely whole and clean, so there was no squeamishness so as not to take her. So yes, I took her. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I have long wanted a piano for myself, I'm not a professional musician, but just to indulge - why not? Buying something "for the sake of pampering" I was "strangled by a toad", and here - a free toy. When I took it from the trash, I didn‚Äôt even think of using it as a child‚Äôs toy, I immediately thought: ‚ÄúOhhhh ... a good base to try to make a MIDI keyboard.‚Äù</font></font><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since I already have some experience communicating with professional keyboards and MIDI keyboards, I immediately understood all the disadvantages of my idea. That is, a toy in fact will remain a toy. On the basis of it it will be impossible to realize the power of keystrokes. The ‚Äúlightweight‚Äù plastic keys themselves, which are also incomplete, will not make it possible to perform something worthy on it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First of all, the toy synthesizer was disassembled "to the screw", all plastic was washed well with soap. The boards and contact groups of keys are also cleaned.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After the disassembly, an understanding came of why people threw it away. A toy (I don‚Äôt know why: from time to time, from the Chinese quality of components or tough operation) firstly: the built-in speakers fell apart, and secondly: a broken connector from them stuck in the headphone jack, so there was practically no way to pull it out . Probably, after the toy stopped playing with the built-in speakers, they used it with headphones, and then after they broke the connector there, they just threw it away.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inside, the toy synthesizer consisted of three boards that were interconnected by a cable loop. The central board, which was responsible for generating sound and other things, was immediately unsoldered from the other two boards and set aside. On the other two boards there were contacts for the buttons on the front panel of the toy and the piano keys themselves. I soldered the PBS connectors to them, especially since the hole pitch on the boards was just 2.54 mm. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bp/mh/qc/bpmhqcxmblsmtoqy7zu7wfbqwm4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/nj/dr/us/njdrusxpjqa57hm8ezczbzidcu0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After that, I spent a couple of hours drawing up diagrams of these boards with keys. As it turned out, the scheme is a simple matrix keyboard. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yt/uh/m6/ytuhm6oamte_d4mo60zuvzucqfm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the picture in yellow circles, the numbers are the numbers of the ‚Äúhorizontal‚Äù contacts, and the numbers on the keys are the numbers of the ‚Äúvertical‚Äù contacts in the PBS-13 connector on the keyboard board.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/m6/qc/lk/m6qclkogjo6vprfkk4ywi2qtqzq.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/n0/lz/tf/n0lztfhulhpdeytl2ltfl0zxqna.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/bw/w2/pa/bww2pa-cgsmxubbn2ixa2sr373w.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After that, all this was thrown into a corner and dusted for a year. And then the period of self-isolation began ... It became boring and I wanted to do something with my own hands, especially since there is nowhere to go, and it‚Äôs impossible ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the end, I decided to try to finish this toy at least a little. The Arduino board was taken as the basis for the controller, and since the number of key chains is greater than the number of Arduino UNO pins, I decided to use the shift registers 74HC595 and 74HC165. As a result, we got such a scheme.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_j/y9/m9/_jy9m906okczf38_zjmeyvy9qbc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The circuit was originally assembled on a solderless breadboard. To test the operability of the circuit (that there are no errors in the connections anywhere), a test program was developed that showed that everything seemed to work. The algorithm of the test program was simple: one of the outputs of the shift output chip is turned on and values ‚Äã‚Äãare read in a cycle from the shift input chip, while pressing the keys. At first glance, nothing foreshadowed the trouble ... and everything seemed to work fine ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bx/uh/an/bxuhanfuxtixrojargnmaeqv5oe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The next few days, I slowly worked on ‚Äúhomework,‚Äù namely, carefully soldering all the components of the board onto a breadboard. I collected it all from what was at my place. He took the Arduino NANO as the control board.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2o/h9/f-/2oh9f-a8fplwk8bqnt5dultsxee.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Such a ‚Äúsandwich‚Äù from the boards is due to the fact that the two boards of the toy (one with buttons, and the other with the keyboard) are located at different levels, and before I soldered it all I thought: ‚ÄúIs it possible to somehow connect it together using the components that I have at home to look more or less good? ‚Äù And so it turned out this design of two boards interconnected by connectors. From my point of view, for the home option, when we sit in self-isolation, it turned out quite well. I only had to cut the breadboard and slightly modify the toy body so that you could connect the USB cable to the Arduino board.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bb/xz/md/bbxzmdv5zabj-jq6hlyg7jhjpxy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The realization that the device does not work exactly as I wanted came when I finalized the test program. The algorithm was simple: turn on each output of the 74HC595 chip, taking into account the state of the inputs of the 74HC165 chip, and write the result in separate variables. In total, 5 outputs of the 74HC595 are connected to the keyboard, so in the end I got 40 bits (5 * 8) of data after this poll. A string of 40 bits was output to the console, and keys were pressed to see how the device handles simultaneous keystrokes of several keys.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/d0/ra/o7/d0rao77gsxvrvtbeumy1ufguxsw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is where the problem surfaced: if you press one key, everything was fine, but when you try to press more than 2 keys at the same time a situation arose when it was impossible to predict what would be read. The result could be correct with one combination, and with another it could be completely unpredictable. The problem was that the feature of this scheme was not taken into account. When several keys are pressed at the same time, not only several keyboard scanning verticals are locked (this is permissible), but several horizontal lines can be closed through the keys (which is by no means permissible). You can read more about this problem and how to solve it </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
I chose the ‚Äúcardinal solution‚Äù of the problem, namely: I decided that for each key in the keyboard there will be a diode.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In my head, I already mentally began to think how I would have to cut the tracks on the board and put the diode in the SMD case in the gap. I climbed into my storage rooms and saw that I simply didn‚Äôt have so many diodes in the SMD case (do not forget that we all sit on self-isolation and going to the store for radio components is not very possible - since these are definitely not essential goods). A little upset, I decided to look more closely at the board: it may be possible to put output diodes on some of the tracks (I also had some of them). And then I saw that each key has a jumper (the board is single-sided) and the circuit is made so that instead of this jumper you can put a diode. Immediately I thought - you don‚Äôt even have to cut anything, you just have to put output diodes instead of jumpers everywhere.I also did not have such a number of output diodes. A thought flashed through my head: ‚Äúmaybe LEDs?‚Äù The circuit operates at + 5V and if you put red LEDs that have a minimum voltage drop (among the LEDs), then in the end there should be a logical level for the correct determination: the key is pressed or not.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ff/1c/37/ff1c37wrrsclbwl0d7edw1x-ork.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With this in mind, I climbed into my stocks again and grabbed the red LEDs from wherever possible. There were exactly as many as the keys on the keyboard! This is a sign, I thought, and soldered several LEDs instead of jumpers for testing. Test results showed that the solution is working. After that, I soldered the remaining LEDs instead of jumpers. The test program showed that you can press at least all the keys at the same time, and they are all read correctly. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g8/i0/-b/g8i0-b1rwc2ykc3oq1hcecu-ohs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I decided not to put diodes on the additional buttons that are on the toy, because it is unlikely that they will be pressed by several pieces at once. Moreover, in the program I do not yet have processing for clicking on these buttons. Well, I haven‚Äôt yet decided yet how to use them.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The time has come to figure out how to make this device appear on your computer as a MIDI keyboard and in what format you need to send data. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The information found on the Internet told me that it is possible to make a MIDI keyboard from Arduino very easily and simply by pouring firmware into it, which will make the computer see it not as a COM port, but as a MIDI keyboard. Initially, I was </font><font style="vertical-align: inherit;">guided </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">by this decision</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , not particularly going into how it is implemented.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now, when I got to him and read it carefully, I realized that my Arduino NANO board would not be suitable for this solution, since it had a COM port based on the CH340 chip. </font><font style="vertical-align: inherit;">To use the firmware from the link above, only those cards are suitable where the USB port is already on the controller (for example: AtMega32u4) or communication via the COM port is not done on FT232RL type conversion chips or the like, but on AtMega microcontrollers. </font><font style="vertical-align: inherit;">Therefore, the firmware in the board must send the data in MIDI format to the COM port, and on the computer you will have to install and configure software that will intercept this data and transmit it to the virtual MIDI port. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The algorithm for reading keys and generating MIDI commands was as follows:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jj/-2/d6/jj-2d67yncypthxguaeyvotcvue.jpeg"><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The program for the Arduino NANO controller now looks like this.</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">//    +5V<font></font>
//   ST_CP  74HC595<font></font>
#define latchPin      11<font></font>
//   SH_CP  74HC595<font></font>
#define clockPin      13<font></font>
//   DS  74HC595<font></font>
#define dataPin       12<font></font>
<font></font>
//     +5V<font></font>
#define latchPin_IN   9<font></font>
#define clockPin_IN   10<font></font>
#define dataPin_IN    8<font></font>
<font></font>
// ,       1-16    <font></font>
#define BUT_OUT0      7<font></font>
#define BUT_OUT1      6<font></font>
#define BUT_OUT2      5<font></font>
#define BUT_OUT3      4<font></font>
<font></font>
byte but_out[4] = {BUT_OUT0, BUT_OUT1, BUT_OUT2, BUT_OUT3};<font></font>
//       <font></font>
byte kbd_in[5] = {0, 0, 0, 0, 0};<font></font>
byte kbd_in_new[5] = {0, 0, 0, 0, 0};<font></font>
<font></font>
//       <font></font>
byte btn_in[4] = {0, 0, 0, 0};<font></font>
byte btn_in_new[4] = {0, 0, 0, 0};<font></font>
<font></font>
//  3  -   (1 - , 0 - )<font></font>
byte kbd_out = 0b11100000;<font></font>
<font></font>
//  <font></font>
void init_electronics() {<font></font>
  //  ,   +5V<font></font>
  //  OUTPUT<font></font>
  pinMode(latchPin, OUTPUT);<font></font>
  pinMode(clockPin, OUTPUT);<font></font>
  pinMode(dataPin, OUTPUT);<font></font>
<font></font>
  //  ,   +5V<font></font>
  pinMode(latchPin_IN, OUTPUT);<font></font>
  pinMode(clockPin_IN, OUTPUT);<font></font>
  pinMode(dataPin_IN, INPUT);<font></font>
<font></font>
  //          <font></font>
  for (byte i = 0; i &lt; 4; i++) pinMode(but_out[i], OUTPUT);<font></font>
}<font></font>
<font></font>
//      74HC595<font></font>
void write_5V(byte a) {<font></font>
    digitalWrite(latchPin, LOW);<font></font>
    //    dataPin<font></font>
    shiftOut(dataPin, clockPin, MSBFIRST, a); <font></font>
     //"" ,      <font></font>
    digitalWrite(latchPin, HIGH); <font></font>
}<font></font>
<font></font>
void read_5V(byte *btn, byte *kbd) {<font></font>
  digitalWrite(clockPin_IN, HIGH);<font></font>
  digitalWrite(latchPin_IN, LOW);<font></font>
  digitalWrite(latchPin_IN, HIGH);<font></font>
  <font></font>
  //    -    <font></font>
  *btn = shiftIn(dataPin_IN, clockPin_IN, LSBFIRST);<font></font>
  <font></font>
  //    -    <font></font>
  *kbd = shiftIn(dataPin_IN, clockPin_IN, LSBFIRST);<font></font>
}<font></font>
<font></font>
void setup() {<font></font>
  init_electronics();<font></font>
  write_5V(kbd_out);<font></font>
  Serial.begin(115200);<font></font>
}<font></font>
<font></font>
//       ,   <font></font>
void read_kbd_and_btn_state(byte *btn, byte *kbd) {<font></font>
 byte tmp;<font></font>
  for (byte i = 0; i &lt; 5; i++) {<font></font>
    write_5V(kbd_out | (1 &lt;&lt; i));<font></font>
    read_5V(&amp;tmp, &amp;kbd[i]);<font></font>
  }<font></font>
}<font></font>
<font></font>
void noteOn(int cmd, int pitch, int velocity) {<font></font>
  Serial.write(cmd);<font></font>
  Serial.write(pitch);<font></font>
  Serial.write(velocity);<font></font>
}<font></font>
<font></font>
//     num  ,   <font></font>
// 0 -  0,  0<font></font>
// 1 -  0,  1<font></font>
// 2 -  1,  1<font></font>
// 3 -  1,  0<font></font>
byte compare_bit(byte old_state, byte new_state, byte num) {<font></font>
  byte tmp_old, tmp_new;<font></font>
  tmp_old = (old_state &gt;&gt; num) &amp; 1;<font></font>
  tmp_new = (new_state &gt;&gt; num) &amp; 1;<font></font>
  if ((tmp_old == 0) &amp;&amp; (tmp_new == 0)) return 0;<font></font>
  if ((tmp_old == 0) &amp;&amp; (tmp_new == 1)) return 1;<font></font>
  if ((tmp_old == 1) &amp;&amp; (tmp_new == 1)) return 2; <font></font>
  if ((tmp_old == 1) &amp;&amp; (tmp_new == 0)) return 3;  <font></font>
}<font></font>
<font></font>
void loop() {<font></font>
  read_kbd_and_btn_state(btn_in_new, kbd_in_new);<font></font>
  for (byte i = 0; i &lt; 5; i++) {<font></font>
    for (byte j = 0; j &lt; 8; j++) {<font></font>
      switch (compare_bit(kbd_in[i], kbd_in_new[i], 7 - j)) {<font></font>
        //  <font></font>
        case 1: noteOn(0x90, 0x1D + (8 * i + j), 0x7F);<font></font>
                break;<font></font>
        //  <font></font>
        case 2: //noteOn(0x00, 0x1D + (8 * i + j), 0x7F);<font></font>
                break;<font></font>
        //  <font></font>
        case 3: noteOn(0x90, 0x1D + (8 * i + j), 0x00);<font></font>
                break;<font></font>
      }<font></font>
    }<font></font>
    kbd_in[i] = kbd_in_new[i];<font></font>
  }<font></font>
} <font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It makes no sense to paint in detail how to work with MIDI data, because it can be read </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
I will dwell in more detail on the software for the computer and the problems that I encountered. Problems arose, simply due to the lack of normal documentation for this software. So, in order for the computer to be able to successfully receive MIDI data from a device like mine, you will need two programs: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loopMIDI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serial-Midi Converter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . For Serial-MIDI Converter, you also need to install Java, if it is not installed on the computer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We start the loopMIDI program and create two virtual ports. I called them Arduino IN and Arduino OUT. This program will be a virtual MIDI device.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/e8/do/hee8doojjloz3jiocd58qpugocg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, run Serial-MIDI Converter and at startup we go through the process of setting it up. Unfortunately, you have to do this every time you start, but it‚Äôs not very scary, it is done literally in four keystrokes on the keyboard. The COM port number may be different; it appears on the computer when the Arduino NANO board is connected. The port speed is set in the Arduino NANO firmware. The red arrows indicate my settings, at which everything worked for me. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zu/qj/l0/zuqjl0ruk96yomobfupdvbstgps.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actually, the setup process has been completed and you can already use some software that will play sounds by accepting keystrokes from the device. In the software settings, you must select "Arduino_OUT" as the input. In the picture below, an example of Kontakt Player setup. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qs/eu/uu/qseuuugs_lbaywuoplve0qgc2wg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It ultimately works like this:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/cOnQOAYKlg0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What's next? </font><font style="vertical-align: inherit;">And then everything happened exactly as I expected - the toy remains a toy with exactly all the shortcomings that I mentioned at the very beginning. </font><font style="vertical-align: inherit;">Probably, the child will play this one in a buzz, but for an adult, after normal keyboard instruments ... It‚Äôs easier to buy any used MIDI keyboard cheaply and it will be much better than this toy. </font><font style="vertical-align: inherit;">I decided to leave this toy as it is, but make some modifications with it:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leave the original case.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Put working speakers and make an amplifier for them.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Make it work in the ‚Äúchildren's toy‚Äù mode without connecting to a computer, that is, so that it can play sounds itself.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Make it possible to connect FootSwitch (the same pedal on the piano below) so that you can hold the sound after releasing the keys, like on a normal instrument.</font></font></li>
<li>    ,       .</li>
<li>    ,      -,      .</li>
</ol><br>
<img src="https://habrastorage.org/webt/qa/79/bk/qa79bkjnapd9sf84teo-y_nxn0g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I can‚Äôt do the implementation of most of the points, while we all are together ‚Äúat home,‚Äù since I simply don‚Äôt have all the required components for this at home. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To implement paragraph 3 on the Internet, a solution was found called </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SamplerBox</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . The essence of the project is that you can connect any MIDI keyboard to the Raspberry Pi board, which processes MIDI commands from the keyboard and plays sounds or switches instruments, etc. It remains only to put the Raspberry Pi board inside the toy body, without the possibility of replacing the SD card (without disassembling the case), configure the buttons on the toy body so that they switch tools and this will be enough to leave this project in this form. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But all this will happen after the period of self-isolation ends.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I hope that someone will find my experience useful.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en500436/index.html">Coming of binary neural networks based on random neurons and logical functions</a></li>
<li><a href="../en500438/index.html">SFTP and FTPS</a></li>
<li><a href="../en500444/index.html">9 Python programming skills that distinguish a beginner from an experienced</a></li>
<li><a href="../en500446/index.html">A few words about R2DBC and PostgreSQL</a></li>
<li><a href="../en500448/index.html">Prometheus: HTTP monitoring through Blackbox exporter</a></li>
<li><a href="../en500452/index.html">High Reasoning on Deep Learning</a></li>
<li><a href="../en500454/index.html">‚ÄúWhat marinas?‚Äù or we control the controller via bluetooth using a mobile application on Xamarin (Android)</a></li>
<li><a href="../en500456/index.html">BpfTrace - finally, a complete replacement for Dtrace on Linux</a></li>
<li><a href="../en500458/index.html">Online Speech Technical Features: Starter Pack</a></li>
<li><a href="../en500462/index.html">Detect scene changes and save h264 video clips on Raspberry Pi without decoding</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>