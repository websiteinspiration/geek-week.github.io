<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦ ğŸ‘©ğŸ¾â€âš•ï¸ ğŸš® Visualisasi Janji dan Async / Menunggu ğŸ¤¼ ğŸŒ ğŸ‘¨ğŸ»â€âš•ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Selamat siang teman! 
 
 Saya hadir untuk Anda terjemahan artikel "JavaScript Visualisasi: Janji & Async / Menunggu" oleh Lydia Hallie. 
 
 Sudahkah A...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Visualisasi Janji dan Async / Menunggu</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501702/"><img src="https://habrastorage.org/webt/bu/rt/-e/burt-epjeqoebt-fjzxyhekod2m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selamat siang teman! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya hadir untuk Anda terjemahan artikel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"JavaScript Visualisasi: Janji &amp; Async / Menunggu"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oleh Lydia Hallie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sudahkah Anda menemukan kode JavaScript yang ... tidak berfungsi seperti yang diharapkan? </font><font style="vertical-align: inherit;">Ketika fungsi dilakukan dalam urutan yang sewenang-wenang, tidak dapat diprediksi, atau dilakukan dengan penundaan. </font><font style="vertical-align: inherit;">Salah satu tugas utama dari janji adalah merampingkan pelaksanaan fungsi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Keingintahuan saya yang tak pernah puas dan malam tanpa tidur terbayar lunas - terima kasih kepada mereka saya membuat beberapa animasi. </font><font style="vertical-align: inherit;">Sudah waktunya untuk berbicara tentang janji: bagaimana mereka bekerja, mengapa mereka harus digunakan, dan bagaimana itu dilakukan.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengantar</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat menulis kode JS, kita sering harus berurusan dengan tugas yang bergantung pada tugas lain. Misalkan kita ingin mendapatkan gambar, kompres, terapkan filter dan simpan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama-tama, kita perlu mendapatkan gambar. Untuk melakukan ini, gunakan fungsinya </font></font><code>getImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Setelah memuat gambar, kami meneruskannya ke fungsi </font></font><code>resizeImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Setelah mengompresi gambar, kami menerapkan filter menggunakan fungsi </font></font><code>applyFilter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Setelah mengompresi dan menerapkan filter, kami menyimpan gambar dan memberi tahu pengguna tentang keberhasilannya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai hasilnya, kami memperoleh yang berikut:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vy/sf/kq/vysfkqrpan_45kt7zkasehy14m4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hmm ... Apakah Anda memperhatikan sesuatu? </font><font style="vertical-align: inherit;">Terlepas dari kenyataan bahwa semuanya berfungsi, itu tidak terlihat cara terbaik. </font><font style="vertical-align: inherit;">Kami mendapatkan banyak fungsi panggilan balik bersarang yang bergantung pada panggilan balik sebelumnya. </font><font style="vertical-align: inherit;">Ini disebut panggilan balik neraka dan itu membuatnya sangat sulit untuk membaca dan memelihara kode. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untungnya, hari ini kita punya janji.</font></font><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sintaksis Janji</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Janji diperkenalkan di ES6. </font><font style="vertical-align: inherit;">Dalam banyak manual Anda dapat membaca yang berikut:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Janji (janji) adalah nilai yang dipenuhi atau ditolak di masa depan.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya ... penjelasannya begitu-begitu. </font><font style="vertical-align: inherit;">Pada suatu waktu, itu membuat saya menganggap janji sebagai sesuatu yang aneh, tidak jelas, semacam sihir. </font><font style="vertical-align: inherit;">Apa mereka sebenarnya </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kita bisa membuat janji dengan konstruktor </font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang menggunakan fungsi callback sebagai argumen. </font><font style="vertical-align: inherit;">Keren, mari kita coba: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yx/or/hu/yxorhuwt-ogj2_grnqpexlducek.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tunggu, apa yang akan kembali ke sini? </font></font><br>
<br>
<code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Merupakan objek yang berisi status ( </font></font><code>[[PromiseStatus]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) dan nilai ( </font></font><code>[[PromiseValue]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Dalam contoh di atas, nilainya </font></font><code>[[PromiseStatus]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah </font></font><code>pending</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan nilai janji itu adalah </font></font><code>undefined</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jangan khawatir, Anda tidak harus berinteraksi dengan objek ini, Anda bahkan tidak dapat mengakses </font></font><code>[[PromiseStatus]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font><font style="vertical-align: inherit;">properti </font></font><code>[[PromiseValue]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Namun, properti ini sangat penting ketika bekerja dengan janji.</font></font><br>
<br>
<code>PromiseStatus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> atau status janji dapat mengambil salah satu dari tiga nilai:</font></font><br>
<br>
<ul>
<li><code>fulfilled</code>:   <code>resolved</code> ().   ,  </li>
<li><code>rejected</code>:   <code>rejected</code> ().  - </li>
<li><code>pending</code>:       ,  <code>pending</code> (,    )</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kedengarannya bagus, tetapi kapan janji mendapatkan status yang ditunjukkan? Dan mengapa status penting? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam contoh di atas, kami meneruskan </font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fungsi panggilan balik sederhana ke </font><font style="vertical-align: inherit;">konstruktor </font></font><code>() =&gt; {}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Fungsi ini sebenarnya membutuhkan dua argumen. Nilai argumen pertama, biasanya disebut </font></font><code>resolve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau </font></font><code>res</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, adalah metode yang dipanggil ketika janji dieksekusi. Nilai argumen kedua, biasanya disebut </font></font><code>reject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau </font></font><code>rej</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, adalah metode yang disebut ketika janji ditolak ketika ada sesuatu yang salah. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ph/ev/5o/phev5oy-unumotchrvnwquasnas.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat apa output ke konsol saat memanggil metode </font></font><code>resolve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>reject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0o/oc/jr/0oocjrmqi757q-x4decxez9rana.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Keren! Sekarang kita tahu bagaimana cara menghilangkan status </font></font><code>pending</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan makna </font></font><code>undefined</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Status janji saat memanggil metode </font></font><code>resolve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah </font></font><code>fulfilled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ketika </font></font><code>reject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font><code>rejected</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<code>[[PromiseValue]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau nilai janji adalah nilai yang kita berikan pada metode </font></font><code>resolve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau </font></font><code>reject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebagai argumen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fakta menyenangkan: Jake Archibald setelah membaca artikel ini menunjuk ke bug di Chrome, yang malah </font></font><code>fulfilled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dikembalikan </font></font><code>resolved</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wv/zd/6y/wvzd6y2g_mz5act3lvnpjkacebm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oke, sekarang kita tahu cara bekerja dengan objek </font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Tapi untuk apa ini digunakan? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam pendahuluan, saya memberikan contoh di mana kita mendapatkan gambar, kompres, terapkan filter dan simpan. Lalu semuanya berakhir dengan neraka panggilan balik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untungnya, janji membantu mengatasi hal ini. Kami menulis ulang kode sehingga setiap fungsi mengembalikan janji. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika gambar telah dimuat, kami melakukan janji. Jika tidak, jika terjadi kesalahan, tolak janji:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ci/7w/s3/ci7ws3oh1myicklbwzotn0ge1ge.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat apa yang terjadi ketika kode ini dijalankan di terminal: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kf/vx/01/kfvx01bguyyok5fdwcgnsr2qzfk.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Keren! </font><font style="vertical-align: inherit;">Promis kembali dengan data parsing ("parsed"), seperti yang kami harapkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi ... selanjutnya apa? </font><font style="vertical-align: inherit;">Kami tidak tertarik pada subjek promis, kami tertarik pada datanya. </font><font style="vertical-align: inherit;">Ada 3 metode bawaan untuk mendapatkan nilai Janji:</font></font><br>
<br>
<ul>
<li><code>.then()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: dipanggil setelah melakukan janji</font></font></li>
<li><code>.catch()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: dipanggil setelah penolakan janji</font></font></li>
<li><code>.finally()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: selalu dipanggil, baik setelah eksekusi maupun setelah penolakan janji</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/jm/kx/bl/jmkxblijk89jgqpte14xgimhp4q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metode ini </font></font><code>.then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengambil nilai yang diteruskan ke metode </font></font><code>resolve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o5/tb/xo/o5tbxoro5xa0cfx80ijumefdg_e.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metode ini </font></font><code>.catch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengambil nilai yang diteruskan ke metode </font></font><code>reject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8i/6p/vm/8i6pvmsr8uyhrmrlqlfry3o2fzo.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akhirnya, kami mendapatkan nilai yang diinginkan. Kita bisa melakukan apa saja dengan nilai ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika kami yakin dalam pemenuhan atau penolakan janji, Anda dapat menulis </font></font><code>Promise.resolve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">baik </font></font><code>Promise.reject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan nilai yang sesuai. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ni/oz/3h/nioz3hmwq-ercnvsi8xc4isphtk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah sintaks yang akan digunakan dalam contoh berikut.</font></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasilnya </font></font><code>.then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah nilai janji (yaitu, metode ini juga mengembalikan janji). </font><font style="vertical-align: inherit;">Ini berarti bahwa kita dapat menggunakan sebanyak yang </font></font><code>.then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diperlukan: hasil dari yang sebelumnya </font></font><code>.then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dilewatkan sebagai argumen ke yang berikutnya </font></font><code>.then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ga/6_/z_/ga6_z_34tprviih5r2yf1afyaoe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam </font></font><code>getImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kita dapat menggunakan beberapa </font></font><code>.then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk mentransfer gambar yang diproses ke fungsi selanjutnya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6t/va/8w/6tva8wgrrpmr3yk1h131dhaxcmq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sintaks ini terlihat jauh lebih baik daripada tangga fungsi panggilan balik bersarang.</font></font><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microtasks dan tugas (makro)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nah, sekarang kita tahu cara membuat janji dan cara mengekstraksi nilai dari mereka. Tambahkan beberapa kode ke skrip kami dan jalankan lagi: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/47/pd/id/47pdidukvud0u2p8eibdk3ytmiu.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, itu ditampilkan di konsol </font></font><code>Start!</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Ini normal, karena kita memiliki baris kode pertama </font></font><code>console.log('Start!')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Nilai kedua yang ditampilkan pada konsol adalah </font></font><code>End!</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, bukan nilai dari janji yang sudah selesai. Nilai janji ditampilkan terakhir. Kenapa ini terjadi? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini kita melihat kekuatan janji. Meskipun JS adalah single-threaded, kita dapat membuat kode asinkron dengannya </font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di mana lagi kita bisa mengamati perilaku asinkron? Beberapa metode yang dibangun dalam browser, seperti </font></font><code>setTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dapat mensimulasikan sinkronisasi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baik </font><font style="vertical-align: inherit;">Dalam loop peristiwa (Event Loop), ada dua jenis antrian: antrian tugas (makro) atau hanya tugas ((makro) tugas antrian, tugas antrian) dan antrian mikrotasks atau hanya mikrotasks (antrian mikrotask, mikrotask). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang berlaku untuk masing-masing? </font><font style="vertical-align: inherit;">Singkatnya, lalu:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tugas Makro: setTimeout, setInterval, setImmediate</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microtasks: process.nextTick, Promise callback, queueMicrotask</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kita lihat </font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di daftar microtasks. </font><font style="vertical-align: inherit;">Ketika </font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metode dieksekusi dan dipanggil </font></font><code>then()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>catch()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau </font></font><code>finally()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, fungsi panggilan balik dengan metode ditambahkan ke antrian mikrotask. </font><font style="vertical-align: inherit;">Ini berarti bahwa panggilan balik dengan metode ini tidak dieksekusi segera, yang membuat kode JS asinkron. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kapan metodenya </font></font><code>then()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>catch()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau </font></font><code>finally()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dijalankan? </font><font style="vertical-align: inherit;">Tugas di loop acara memiliki prioritas berikut:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertama, fungsi-fungsi dalam tumpukan panggilan dieksekusi. </font><font style="vertical-align: inherit;">Nilai yang dikembalikan oleh fungsi-fungsi ini dihapus dari tumpukan.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setelah tumpukan dibebaskan, microtasks ditempatkan dan dieksekusi satu demi satu (microtasks dapat mengembalikan microtasks lainnya, menciptakan siklus microtasks tanpa akhir).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setelah tumpukan dan antrian mikrotask dilepaskan, loop acara memeriksa makro. </font><font style="vertical-align: inherit;">Tugas makro didorong ke stack, dieksekusi, dan dihapus.</font></font></li>
</ol><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertimbangkan sebuah contoh:</font></font><br>
<br>
<ul>
<li><code>Task1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Fungsi yang ditambahkan ke tumpukan segera, misalnya, dengan kode panggilan.</font></font></li>
<li><code>Task2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Task3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Task4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Mikrozadachi contoh </font></font><code>then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PROMIS atau tugas ditambahkan melalui </font></font><code>queueMicrotask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><code>Task5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Task6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: tugas makro, misalnya, </font></font><code>setTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau</font></font><code>setImmediate</code></li>
</ul><br>
<img src="https://habrastorage.org/webt/xl/hp/gl/xlhpgltjfi-dxo70zyuqjimbzzu.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama </font></font><code>Task1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengembalikan nilai dan dihapus dari tumpukan. Kemudian mesin memeriksa mikrotasks dalam antrian yang sesuai. Setelah menambahkan dan kemudian menghapus mikrotasks dari tumpukan, mesin memeriksa tugas-tugas makro, yang juga ditambahkan ke tumpukan dan dihapus dari itu setelah mengembalikan nilai. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kata-kata yang cukup. Mari kita menulis kodenya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_h/oj/ee/_hojeek-qp4i0v1fatji5qxyd4m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kode ini, kami memiliki </font></font><code>setTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tugas </font><font style="vertical-align: inherit;">makro </font><font style="vertical-align: inherit;">dan tugas mikro </font></font><code>.then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Jalankan kode dan lihat apa yang ditampilkan di konsol. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Catatan: dalam contoh di atas, saya menggunakan metode seperti </font></font><code>console.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>setTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>Promise.resolve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Semua metode ini bersifat internal, sehingga tidak muncul di tumpukan jejak - jangan kaget ketika Anda tidak menemukannya di alat pemecahan masalah browser. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di baris pertama yang kita miliki</font></font><code>console.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Itu ditambahkan ke tumpukan dan ditampilkan di konsol </font></font><code>Start!</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Setelah itu, metode ini dihapus dari tumpukan dan mesin terus mengurai kode. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pc/ss/nu/pcssnuqx9bbmlywvd6zearuoaqu.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Engine mencapai </font></font><code>setTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, yang ditambahkan ke tumpukan. Metode ini adalah metode peramban bawaan: fungsi panggil baliknya ( </font></font><code>() =&gt; console.log('In timeout')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ditambahkan ke Web API dan sudah ada sebelum timer menyala. Terlepas dari kenyataan bahwa penghitung waktu adalah 0, panggilan balik masih ditempatkan pertama kali di WebAPI dan kemudian dalam antrian tugas makro: </font></font><code>setTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ini adalah tugas makro. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9t/yq/yw/9tyqywfouzwyjiks-b41l5vtxq4.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, mesin mencapai metode </font></font><code>Promise.resolve()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Metode ini ditambahkan ke tumpukan, dan kemudian dijalankan dengan nilai </font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Callback-nya </font></font><code>then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ditempatkan dalam antrian mikrotask. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ac/mi/np/acminp3ylrdseonspqvm_m_nq44.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akhirnya, mesin mencapai metode kedua </font></font><code>console.log()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Segera didorong ke stack, itu adalah output ke konsol</font></font><code>End!</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, metode ini dihapus dari tumpukan, dan mesin terus berlanjut. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/76/wt/z0/76wtz0lpgee1nuob0vz2coji-fw.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mesin â€œmelihatâ€ bahwa tumpukan kosong. </font><font style="vertical-align: inherit;">Memeriksa antrian tugas. </font><font style="vertical-align: inherit;">Terletak di sana </font></font><code>then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Itu didorong ke tumpukan, nilai janji ditampilkan pada konsol: dalam hal ini, sebuah string </font></font><code>Promise!</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1n/5u/05/1n5u05wug2yzg2hqfftf2lilaci.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mesin melihat bahwa tumpukan kosong. </font><font style="vertical-align: inherit;">Dia "terlihat" dalam antrian mikrotasks. </font><font style="vertical-align: inherit;">Dia juga kosong. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sudah waktunya untuk memeriksa antrian tugas makro: ada di sana </font></font><code>setTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Itu didorong ke tumpukan dan mengembalikan metode </font></font><code>console.log()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">String adalah output ke konsol </font></font><code>'In timeout!'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><code>setTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dihapus dari tumpukan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6v/42/lo/6v42lobbr5hkg5y4tvrt5rapwio.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selesai </font><font style="vertical-align: inherit;">Sekarang semuanya jatuh pada tempatnya, kan?</font></font><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Async / tunggu</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ES7 memperkenalkan cara baru untuk bekerja dengan kode asinkron di JS. Menggunakan kata kunci </font></font><code>async</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kita dapat membuat fungsi asinkron yang secara implisit mengembalikan janji. Tapi ... bagaimana kita melakukan ini? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebelumnya, kami membahas cara membuat objek secara eksplisit </font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: menggunakan </font></font><code>new Promise(() =&gt; {})</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Promise.resolve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau </font></font><code>Promise.reject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai gantinya, kita dapat membuat fungsi asinkron yang secara implisit mengembalikan objek yang ditentukan. Ini berarti bahwa kita tidak perlu lagi membuat secara manual </font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/me/py/py/mepypyet9xa6eky4slldnhflprs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fakta bahwa fungsi asinkron secara implisit mengembalikan janji, tentu saja, bagus, tetapi kekuatan fungsi ini sepenuhnya dimanifestasikan saat menggunakan kata kunci </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membuat fungsi asinkron menunggu janji (nilainya) selesai. Untuk mendapatkan nilai dari janji yang dilakukan, kita harus menetapkan variabel nilai yang diharapkan (ditunggu) dari janji tersebut. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata kita bisa menunda eksekusi fungsi asinkron? Bagus, tapi ... apa artinya itu? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat apa yang terjadi ketika Anda menjalankan kode berikut:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vh/wt/o0/vhwto0gbbpku7nehrlg5fe1nsni.gif"><br>
<br>
<hr><br>
<img src="https://habrastorage.org/webt/tk/zo/nx/tkzonxqy0rpal2gsghjjok33elg.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mula-mula mesin melihat </font></font><code>console.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Metode ini didorong ke tumpukan dan ditampilkan di konsol </font></font><code>Before function!</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hr/7u/k4/hr7uk471lkclnrkq6j4reflsaem.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian fungsi asinkron dipanggil </font></font><code>myFunc()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kodenya dieksekusi. Di baris pertama dari kode ini, kita memanggil baris kedua </font></font><code>console.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan sebuah baris </font></font><code>'In function!'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Metode ini ditambahkan ke tumpukan, nilainya ditampilkan di konsol, dan dihapus dari tumpukan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x8/0k/bq/x80kbq_ivdjxkn5otwj7iraowiu.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode fungsi dijalankan selanjutnya. Di baris kedua kami memiliki kata kunci </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hal pertama yang terjadi di sini adalah eksekusi nilai yang diharapkan: dalam hal ini, fungsinya </font></font><code>one</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Itu didorong ke tumpukan dan mengembalikan janji. Setelah janji itu selesai, dan fungsi </font></font><code>one</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengembalikan nilainya, mesin melihat </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, eksekusi fungsi asinkron tertunda. Eksekusi fungsi tubuh ditangguhkan, kode yang tersisa dijalankan sebagai mikrotask. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nq/iz/w6/nqizw6g6lhqkheesua-yai1etwy.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah eksekusi fungsi asinkron ditunda, mesin kembali ke eksekusi kode dalam konteks global. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e-/ad/ea/e-adeazwnxkl63oawcydpapig1a.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah semua kode dieksekusi dalam konteks global, loop acara memeriksa mikrotask dan mendeteksi </font></font><code>myFunc()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><code>myFunc()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">didorong ke tumpukan dan dieksekusi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Variabel </font></font><code>res</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mendapatkan nilai dari janji yang dieksekusi dikembalikan oleh fungsi </font></font><code>one</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Kami memanggil </font></font><code>console.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan nilai variabel </font></font><code>res</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: string </font></font><code>One!</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dalam kasus ini. </font></font><code>One!</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini ditampilkan di konsol. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selesai Perhatikan perbedaan antara fungsi asinkron dan metode </font></font><code>then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">promis? Kata kunci</font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menunda pelaksanaan fungsi asinkron. </font><font style="vertical-align: inherit;">Jika kita menggunakan </font></font><code>then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, maka tubuh Janji akan terus berjalan.</font></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata sangat bertele-tele. </font><font style="vertical-align: inherit;">Jangan khawatir jika Anda merasa tidak aman saat bekerja dengan janji. </font><font style="vertical-align: inherit;">Butuh beberapa waktu untuk terbiasa dengan mereka. </font><font style="vertical-align: inherit;">Ini umum untuk semua teknik untuk bekerja dengan kode asinkron di JS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lihat juga </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Visualisasi pekerjaan pekerja layanan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">" </font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terima kasih atas waktu Anda. </font><font style="vertical-align: inherit;">Saya harap itu dihabiskan dengan baik.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id501684/index.html">Biara -> manajemen kluster OTP mudah</a></li>
<li><a href="../id501688/index.html">Performa SSR tambahan dengan server fullstack Nuxt (Bagian 2)</a></li>
<li><a href="../id501690/index.html">Siapa insinyur DevOps, apa yang dia lakukan, berapa banyak yang dia hasilkan dan bagaimana menjadi satu</a></li>
<li><a href="../id501696/index.html">Tinjauan Dashboard Postgresql untuk postgres_exporter (Prometheus)</a></li>
<li><a href="../id501698/index.html">Kami telah mengurangi waktu untuk mengembangkan skenario baru untuk menerbitkan iklan dari 6 hari menjadi 42 detik</a></li>
<li><a href="../id501704/index.html">Apakah proyek akan naik ke tingkat yang baru? Diperlukan pengujian</a></li>
<li><a href="../id501706/index.html">Cara membuat laporan singkat yang bagus</a></li>
<li><a href="../id501708/index.html">Mengadaptasi kacamata terbuka dan tertutup menjadi topeng setengah, dan rana buatan sendiri untuk kacamata terbuka</a></li>
<li><a href="../id501710/index.html">Untuk itulah ceruk krisis 2020 adalah waktu terbaik untuk pembangunan</a></li>
<li><a href="../id501712/index.html">Berbicara tentang tes: beberapa cerita dan survei</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>