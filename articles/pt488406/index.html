<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåû üìΩÔ∏è üë®üèª‚Äçüè´ IPv6 - voc√™ est√° fazendo errado ‚ú≥Ô∏è üÉè üÜï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Existem muitos conceitos errados e mitos sobre o IPv6. Freq√ºentemente, os provedores de hospedagem n√£o entendem como us√°-lo e pensam em abordagens des...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>IPv6 - voc√™ est√° fazendo errado</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vdsina/blog/488406/"><img src="https://habrastorage.org/webt/gg/-1/kx/gg-1kxivqjrehg1_oidyoqkphos.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem muitos conceitos errados e mitos sobre o IPv6. Freq√ºentemente, os provedores de hospedagem n√£o entendem como us√°-lo e pensam em abordagens desatualizadas do mundo do IPv4. Por exemplo, tendo octillions de endere√ßos IPv6, o hoster vende endere√ßos para clientes individualmente, em vez de alocar uma rede / 64 de pleno direito, conforme segue as recomenda√ß√µes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acontece que os hosters atribuem endere√ßos IPv6 a diferentes clientes na mesma rede / 64. Ao mesmo tempo, servi√ßos grandes, como o Google, percebem todos os endere√ßos dentro do intervalo / 64 como um cliente. Como resultado, os clientes podem sofrer devido √†s atividades de um colega de banda.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A disponibilidade de endere√ßos IPv6 permite atribuir endere√ßos externos completos a recursos internos, como cont√™ineres ou clientes VPN. </font><font style="vertical-align: inherit;">Para fazer isso, o host deve fornecer ao cliente uma rede roteada separada. </font><font style="vertical-align: inherit;">Infelizmente, quase ningu√©m pode fazer isso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo, analisaremos os principais erros no uso de provedores IPv6.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hist√≥ria: RFC 3177</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Em 2001, as recomenda√ß√µes sobre a aloca√ß√£o de endere√ßos recomendadas (desculpe a tautologia, isso √© importante) para destacar:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ 48 em geral</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ 64 se atr√°s dela uma e apenas uma sub-rede</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ 128 se um e apenas um dispositivo</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O documento ofensivo RFC 2119, que governa a aplica√ß√£o de v√°rios n√≠veis de cumprimento obrigat√≥rio de instru√ß√µes, define ‚Äúrecomendado‚Äù da seguinte forma: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As palavras ‚ÄúDeveriam‚Äù ou ‚ÄúRecomendado‚Äù significam que pode haver raz√µes razo√°veis ‚Äã‚Äãem determinadas circunst√¢ncias para n√£o agir dessa maneira, no entanto, a escolha de uma linha de comportamento diferente deve ser uma decis√£o equilibrada, tomada com total entendimento das consequ√™ncias. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez ningu√©m tenha entendido completamente as consequ√™ncias naquele momento, talvez ‚Äúcertas circunst√¢ncias‚Äù n√£o tenham sido definidas, mas, de um jeito ou de outro, todos seguiram as recomenda√ß√µes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, no momento da reda√ß√£o do documento, o tr√°fego IPv6 era extremamente raro e era encontrado, em grande parte, em institutos e redes pessoais de entusiastas curiosos. </font><font style="vertical-align: inherit;">Alguns problemas reais come√ßaram a se acumular e analisar, mas levou muito tempo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O repensar come√ßou em 2005. </font><font style="vertical-align: inherit;">Por fim, essas recomenda√ß√µes foram descontinuadas em 2011.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consci√™ncia do problema: RFC 6177</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A nova pol√≠tica de endere√ßamento afirma explicitamente que / 48 √© apenas um desejo, n√£o um requisito. Nenhuma indica√ß√£o de n√∫meros espec√≠ficos √© fornecida, no entanto, √© indicado que / 64 ou menos funciona em condi√ß√µes normais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A principal l√≥gica em recomendar o tamanho da emiss√£o do bloco / 48 ao consumidor final buscava tr√™s objetivos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, o espa√ßo de endere√ßo atribu√≠do deve ser suficiente para fins do consumidor e facilmente extens√≠vel, sem agachamento com barra. Sim, √© exatamente o que diz, apenas na vers√£o em ingl√™s - salte pelos bastidores. Um dos motivos importantes para mudar para o IPv6 √© alterar o tamanho do destino existente de "endere√ßo √∫nico" para "v√°rias sub-redes".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em segundo lugar, a mudan√ßa de provedor deveria ter sido realizada com um m√≠nimo de problemas. </font><font style="vertical-align: inherit;">Se voc√™ pode salvar o antigo esquema de endere√ßo de sub-rede ao mudar para um novo espa√ßo de endere√ßo, isso economizar√° muito trabalho.Em </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
terceiro lugar, a aloca√ß√£o do bloco / 48 deve cobrir o aumento nas necessidades do espa√ßo de endere√ßo de um consumidor em desenvolvimento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Embora todas essas condi√ß√µes tenham sido cumpridas, tornou-se evidente que a recomenda√ß√£o / 48 era, para dizer o m√≠nimo, redundante.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pin / 64 como unidades de emiss√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m da ordem de distribui√ß√£o, havia outros pontos. </font><font style="vertical-align: inherit;">Acontece que muitos recursos do IPv6 n√£o funcionam se o prefixo da rede n√£o for / 64. </font><font style="vertical-align: inherit;">Ou seja, eles n√£o funcionam:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ND (descoberta de vizinhos)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descoberta segura de vizinhos (SEND)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algumas partes do IPv6 m√≥vel</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Multihoming de sites por intermedia√ß√£o IPv6</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muitas coisinhas diferentes</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um fator adicional foi o fato de muitas das tecnologias projetadas dependerem exatamente desse prefixo de rede. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o apenas a amea√ßa de quebrar o novo padr√£o foi a raz√£o para escrever novas recomenda√ß√µes. </font><font style="vertical-align: inherit;">Duas opini√µes de validade duvidosa tamb√©m foram muito populares. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, muitos dispositivos implementam o roteamento IPv6 programaticamente, com muletas e bicicletas e, portanto, n√£o est√£o prontos para uma transi√ß√£o completa para ele. </font><font style="vertical-align: inherit;">Um poss√≠vel aumento no atraso devido a isso pode aumentar muitas vezes, se n√£o uma ordem de magnitude. </font><font style="vertical-align: inherit;">A defini√ß√£o padr√£o da sub-rede / 64 reduziria bastante esses atrasos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Segundo, mudar para um novo padr√£o √© sempre um problema para o suporte t√©cnico e os administradores de sistema. </font><font style="vertical-align: inherit;">Um √∫nico prefixo / 64 deveria reduzir essa dor a um valor aceit√°vel.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A situa√ß√£o nas frentes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como j√° aconteceu no in√≠cio de 2001, a recomenda√ß√£o / 64 √© percebida por muitos grandes players da Internet como um padr√£o. Por um lado, √© bom, por outro lado, n√£o √© t√£o bom. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para muitos sistemas de classifica√ß√£o, por exemplo, para reconhecimento de spam, todos os endere√ßos de um bloco ser√£o considerados pertencentes a um remetente de spam. Em teoria, isso deve facilitar a vida do usu√°rio, de fato, exatamente o oposto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Freq√ºentemente, os provedores n√£o se preocupam com coisas como aprender sobre pr√°ticas comuns. Os endere√ßos podem ser emitidos de acordo com qualquer princ√≠pio, pelo menos mesmo de acordo com o hor√≥scopo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem v√°rios problemas t√≠picos, e todos eles decorrem da viola√ß√£o das recomenda√ß√µes do fornecedor, por um lado, e da estrita ades√£o a elas por outras organiza√ß√µes, por outro.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A emiss√£o de endere√ßos de um bloco para v√°rios usu√°rios pode levar ao fato de que todos ser√£o considerados como um usu√°rio real, por exemplo, m√°quinas na rede da organiza√ß√£o. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se v√°rias pessoas deste bloco come√ßarem a procurar gatos ao mesmo tempo, o Google poder√° decidir que essa botnet enviar√° solicita√ß√µes de fraude de pesquisa ou outras coisas n√£o muito boas. Do ponto de vista dele, esse √© apenas um usu√°rio. O resultado l√≥gico √© um captcha cada vez mais complicado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta, como voc√™ sabe, √© a resposta mais inofensiva a uma fraude hipot√©tica.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A situa√ß√£o inversa √© a emiss√£o para um usu√°rio de endere√ßos de diferentes blocos. </font><font style="vertical-align: inherit;">Se os usu√°rios desses blocos ca√≠rem na lista negra de algu√©m, os endere√ßos de um usu√°rio honesto cair√£o com eles. </font><font style="vertical-align: inherit;">Hist√≥ria particularmente interessante: alguns de seus endere√ßos foram banidos por uma rede de publicidade, alguns foram banidos por outra. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, outras surpresas desagrad√°veis ‚Äã‚Äãs√£o poss√≠veis. </font><font style="vertical-align: inherit;">Por exemplo, voc√™ recebeu o bloco / 64 para uso, mas este √© um bloco din√¢mico como endere√ßo din√¢mico - hoje 2001: DA8: 1D01: FA13 :: / 64, amanh√£ 2001: DA8: 1D01: FC15 :: / 64. </font><font style="vertical-align: inherit;">Novas aventuras todos os dias! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° uma chance consider√°vel de encontrar v√°rias combina√ß√µes desses problemas e outros ancinhos fantasiosamente curvados no ap√™ndice.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Emitir IPv6 do nosso servidor</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se tivermos quintilh√µes de endere√ßos IP, por que n√£o dar endere√ßos IP reais, por exemplo, para clientes VPN, para que eles acessem a Internet sem NAT e possam aceitar conex√µes de entrada do mundo. </font><font style="vertical-align: inherit;">Parece √≥timo, mas na pr√°tica n√£o √© t√£o f√°cil. </font><font style="vertical-align: inherit;">Isso exigir√° uma rede IPv6 separada, roteada </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atrav√©s do</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> endere√ßo IP atribu√≠do √† interface do servidor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponha que um servidor tenha um endere√ßo atribu√≠do </font></font><code>2a01:baba::c0fee:dead/64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, e os clientes VPN precisar√£o de uma rede separada, </font></font><code>2a01:baba:fafa:0f0f::/64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como roteada pelo endere√ßo </font></font><code>2a01:baba::c0fee:dead/64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, muito poucos provedores de hospedagem t√™m as ferramentas para emitir essas redes para os clientes, e √© por isso que voc√™ precisa usar muletas como o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ND Proxy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ler as recomenda√ß√µes da IETF n√£o √© a atividade mais interessante, mas √© extremamente √∫til. </font><font style="vertical-align: inherit;">Preench√™-los com longas noites de inverno claramente n√£o vale a pena, mas tamb√©m deixar de ler se√ß√µes importantes para voc√™ tamb√©m √© indesej√°vel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao escolher um provedor, verifique se ele compartilha esse ponto de vista. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ deve entender que a abordagem incorreta para a aloca√ß√£o de endere√ßos n√£o prejudica o provedor e, para a maioria dos contratos, ela n√£o pode ser a base da compensa√ß√£o. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, isso pode ser um fator-chave para voc√™, embora voc√™ ainda n√£o suspeite.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/9fa/cf4/a34/9facf4a348ef01048b4eb5e16ae66daa.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt488386/index.html">Casos para aplicar ferramentas de an√°lise de anomalias de rede: ataques atrav√©s de plug-ins de navegador</a></li>
<li><a href="../pt488388/index.html">Autentica√ß√£o b√°sica de login e HTTP novamente</a></li>
<li><a href="../pt488390/index.html">Como fazer amigos do Telegram bot com o OpenId Connect</a></li>
<li><a href="../pt488392/index.html">Imagens prontas para produ√ß√£o para k8s</a></li>
<li><a href="../pt488404/index.html">Jogos que vale a pena esperar em 2020</a></li>
<li><a href="../pt488408/index.html">Gateway IoT Ethernet-RS485 STM32</a></li>
<li><a href="../pt488410/index.html">7 li√ß√µes que aprendi em dez anos em desenvolvimento</a></li>
<li><a href="../pt488412/index.html">Criando um bot do Discord com base no discord.js</a></li>
<li><a href="../pt488416/index.html">SLAE - Exame de especialista em montagem do Security Linux</a></li>
<li><a href="../pt488418/index.html">Autentica√ß√£o da API REST com Spring Security e MongoDB</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>