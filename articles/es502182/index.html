<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游늾 游댦 游꺁 De nuevo sobre MikroTik o el tan esperado SOCKS5 游돜游낖 游녥游 游낻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Entiendo perfectamente que te cansaste del omnipresente Mikrotik, pero es realmente interesante. De hecho, el art칤culo fue escrito con un retraso de 4...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>De nuevo sobre MikroTik o el tan esperado SOCKS5</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502182/"><img src="https://habrastorage.org/getpro/habr/post_images/fdd/53e/b70/fdd53eb702a16a56d3f6d528a2c760e1.png" alt="mikrotik + calcetines5"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entiendo perfectamente que te cansaste del omnipresente Mikrotik, pero es realmente interesante. </font><font style="vertical-align: inherit;">De hecho, el art칤culo fue escrito con un retraso de 4 meses (el soporte para SOCKS5 apareci칩 en enero de 2020), pero m치s vale tarde que nunca, especialmente porque no hay mucha informaci칩n al respecto y pocas personas lo saben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
춰Entonces empecemos!</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antecedentes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mikrotik es una herramienta muy poderosa que (en mi humilde opini칩n) deber칤a estar en la granja de cualquier ingeniero de redes. </font><font style="vertical-align: inherit;">Enorme funcionalidad y un conjunto de herramientas, que se reponen constantemente con cada lanzamiento. </font><font style="vertical-align: inherit;">Changelog for RouterOS 6.47 (beta) not칩 el soporte de SOCKS5, que personalmente hab칤a estado esperando durante varios a침os (y muchos otros, a juzgar por las numerosas "Solicitudes de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">funciones</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " en </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">forum.mikrotik.com</font></a><font style="vertical-align: inherit;"> ): a </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9f2/66f/0ed/9f266f0ed3a35eba3d20b678f6d3e4cb.png" alt="registro de cambios"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
juzgar por una de las ramas del </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foro</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mencionado anteriormente </font><font style="vertical-align: inherit;">, el soporte para el incorporado El servidor SOCKS5 comenz칩 con la versi칩n 6.47beta19.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Personalizaci칩n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La configuraci칩n, como siempre con MikroTik, es bastante simple y cabe en cuatro l칤neas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un servidor virtual con CHR (enrutador alojado en la nube), actualizado a 6.47beta53, actu칩 como sujeto de prueba. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El prefijo beta en la versi칩n de RouterOS significa que est치 destinado 칰nicamente a probar y enviar informes de errores para admitir [at] mikrotik.com. </font><font style="vertical-align: inherit;">Recomiendo no apresurarse a actualizar el hardware bajo carga y esperar la versi칩n a largo plazo o al menos estable. </font><font style="vertical-align: inherit;">Si decide actualizar, lea cuidadosamente el Registro de cambios para conocer todos los cambios y posibles problemas. </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configuramos el servidor SOCKS5, seleccionamos la autorizaci칩n por contrase침a (es posible abrirlo), 3327 (aparte del est치ndar 1080) se especifican como el puerto para no entrar en las listas de escaneo de botnet:</font></font><br>
<br>
<pre><code class="plaintext hljs">ip socks set enabled=yes version=5 port=3327 auth-method=password</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci칩n, agregue el usuario:</font></font><br>
<br>
<pre><code class="plaintext hljs">ip socks users add name=test_socks5 password=Str0nGP@SSw0RD</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cree una regla de excepci칩n en el firewall:</font></font><br>
<br>
<pre><code class="plaintext hljs">ip firewall filter add chain=input protocol=tcp dst-port=3327 action=accept comment="SOCKS5 TCP"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y movemos nuestra regla antes que la regla del tipo "soltar":</font></font><br>
<br>
<pre><code class="plaintext hljs">ip firewall filter move [/ip firewall filter find comment="SOCKS5 TCP"] 0</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
춰Hecho! </font><font style="vertical-align: inherit;">En nuestro Mikrotik, se ha generado un servidor proxy SOCKS5.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cheque</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al igual que cualquier residente de la Federaci칩n de Rusia, que tiene un servidor proxy en Europa, recuerdo de inmediato los telegramas, y se comprob칩 la operatividad del servidor SOCKS5 reci칠n configurado: las </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/771/c0c/7bf/771c0c7bfd04958157e06635d665ec23.png" alt="telegrama"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
llamadas tambi칠n funcionan bien, a pesar de la limitaci칩n de la versi칩n Free CHR a 1 Mbps. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego se volvi칩 interesante c칩mo se ver치 POF (huella digital pasiva del SO) presentada por Mikrotik (verificado en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WhatLeaks</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Con SOCKS5 apagado</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Con SOCKS5 habilitado</font></font></th>
</tr>
<tr>
<td><img src="https://habrastorage.org/getpro/habr/post_images/a2f/cdf/2c8/a2fcdf2c89fc5f25086393794c1ecb4c.png" alt="calcetines"></td>
<td><img src="https://habrastorage.org/getpro/habr/post_images/0a6/704/a18/0a6704a18fbc46d5c9637cc5559e7e0e.png" alt="calcetines"></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se puede ver que el sistema se define como Linux, lo cual es l칩gico (porque es precisamente su n칰cleo el que subyace a ROS) y no puede sino alegrarse. </font><font style="vertical-align: inherit;">S칤, fue posible reemplazar el agente de usuario, pero tenemos una tarea ligeramente diferente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al mismo tiempo, en Mikrotik, como deber칤a ser para un servidor real, se muestran estad칤sticas sobre conexiones y tr치fico:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/5c5/8d9/99b/5c58d999b37aa09230eb434ff7891a54.png" alt="stat"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi칩n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, falta mucho (por ejemplo, soporte para autenticaci칩n RADIUS), pero creo sinceramente que esta opci칩n se desarrollar치 m치s. </font><font style="vertical-align: inherit;">Es importante tener en cuenta que este sigue siendo un enrutador y su tarea principal es el reenv칤o de tr치fico, y el resto de las "caracter칤sticas" es m치s probable que sea agradable. </font><font style="vertical-align: inherit;">En cualquier caso, la comprensi칩n de que una pieza de hierro por $ 50 puede hacer mucho excita la imaginaci칩n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eso es todo, gracias por mirar :)</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es502160/index.html">El desarrollo de aplicaciones m칩viles personalizadas es econ칩mico: realidad o ilusi칩n</a></li>
<li><a href="../es502166/index.html">Fantasmas Windows 3.1</a></li>
<li><a href="../es502176/index.html">Ir: deserializaci칩n JSON con tipeo incorrecto, o c칩mo evitar errores de desarrollador de API</a></li>
<li><a href="../es502178/index.html">oVirt en 2 horas. Parte 3. Configuraciones avanzadas</a></li>
<li><a href="../es502180/index.html">El d칤a que desapareci칩 el per칤metro. Soluciones de seguridad de Microsoft y socios</a></li>
<li><a href="../es502186/index.html">Seminario web Seguridad de la informaci칩n: SOC en cuarentena</a></li>
<li><a href="../es502196/index.html"> 쮏얨쮏얧 햨 햪햟혝햣햪햟혝햦햨햣 혜혝쮏햣혝햫햣햧 햢햟쒫쫧쮐혝햦 햫햟햧햢햣햫혦 햫쮏쒬햣 햨햩혩혢햦 햨 햟향햡햟햢햨햣 햦쮏얨 쒬햣햪햣햫햦</a></li>
<li><a href="../es502200/index.html">Entrop칤a: c칩mo los 치rboles de decisi칩n toman decisiones</a></li>
<li><a href="../es502202/index.html">El desarrollo de tecnolog칤a no tripulada en el transporte ferroviario.</a></li>
<li><a href="../es502204/index.html">Escribir pruebas @SpringBootTest cuando se usa Spring Shell en una aplicaci칩n</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>