<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï∫ üò± üëáüèæ Anpassung Ihrer vorhandenen Gesch√§ftsl√∂sung an SwiftUI. Teil 3. Arbeiten mit Architektur ü¶Ä ü§õ ü§≥üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Guten Tag allerseits! Mit Ihnen, ich, Anna Zharkova, eine f√ºhrende mobile Entwicklerin von Usetech. Wir
 
 zerlegen weiterhin die Feinheiten von Swift...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Anpassung Ihrer vorhandenen Gesch√§ftsl√∂sung an SwiftUI. Teil 3. Arbeiten mit Architektur</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500470/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guten Tag allerseits! </font><font style="vertical-align: inherit;">Mit Ihnen, ich, Anna Zharkova, eine f√ºhrende mobile Entwicklerin von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usetech. Wir</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
zerlegen weiterhin die Feinheiten von SwiftUI. </font><font style="vertical-align: inherit;">Die vorherigen Teile finden Sie unter den folgenden Links: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil 1 </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil 2</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Heute werden wir √ºber die Funktionen der Architektur und das √úbertragen und Integrieren vorhandener Gesch√§ftslogik in die SwiftUI-Anwendung sprechen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Standarddatenstrom in SwiftUI basiert auf der Interaktion von View und einem bestimmten Modell, das Eigenschaften und Statusvariablen enth√§lt oder eine solche Statusvariable ist. </font><font style="vertical-align: inherit;">Daher ist es logisch, dass MVVM der empfohlene Architekturpartner f√ºr SwiftUI-Anwendungen ist. </font><font style="vertical-align: inherit;">Apple schl√§gt vor, es in Verbindung mit dem Combine-Framework zu verwenden, das deklaratives Api SwiftUI f√ºr die Verarbeitung von Werten im Laufe der Zeit einf√ºhrt. </font><font style="vertical-align: inherit;">ViewModel implementiert das ObservableObject-Protokoll und stellt als ObservedObject eine Verbindung zu einer bestimmten Ansicht her.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dd/ur/cp/ddurcpkb3o-tgqdmwl1gswmqvck.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ñnderbare Modelleigenschaften werden als @Published deklariert. </font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NewsItemModel</span>: <span class="hljs-title">ObservableObject</span> </span>{<font></font>
    @<span class="hljs-type">Published</span> <span class="hljs-keyword">var</span> title: <span class="hljs-type">String</span> = <span class="hljs-string">""</span>
    @<span class="hljs-type">Published</span> <span class="hljs-keyword">var</span> description: <span class="hljs-type">String</span> = <span class="hljs-string">""</span>
    @<span class="hljs-type">Published</span> <span class="hljs-keyword">var</span> image: <span class="hljs-type">String</span> = <span class="hljs-string">""</span>
    @<span class="hljs-type">Published</span> <span class="hljs-keyword">var</span> dateFormatted: <span class="hljs-type">String</span> = <span class="hljs-string">""</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie bei der klassischen MVVM kommuniziert ViewModel mit dem Datenmodell (d. H. Gesch√§ftslogik) und √ºbertr√§gt die Daten in der einen oder anderen Form.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NewsItemContentView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">ObservedObject</span> <span class="hljs-keyword">var</span> moder: <span class="hljs-type">NewsItemModel</span><font></font>
    <font></font>
    <span class="hljs-keyword">init</span>(model: <span class="hljs-type">NewsItemModel</span>) {
        <span class="hljs-keyword">self</span>.model = model <font></font>
    }<font></font>
    <span class="hljs-comment">//... - </span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MVVM neigt wie fast jedes andere Muster zu √úberlastung und </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redundanz. Das √ºberladene ViewModel h√§ngt immer davon ab, wie gut die Gesch√§ftslogik hervorgehoben und abstrahiert ist. Die Last der Ansicht wird durch die Komplexit√§t der Abh√§ngigkeit der Elemente von Zustandsvariablen und √úberg√§ngen zu anderen Ansichten bestimmt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In SwiftUI </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hinzugef√ºgt, dass </font><b><font style="vertical-align: inherit;">View eine Struktur und keine Klasse</font></b><font style="vertical-align: inherit;"> ist und daher </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">keine Vererbung unterst√ºtzt, wodurch die Codeduplizierung</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erzwungen wird </font><b><font style="vertical-align: inherit;">.</font></b></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wenn dies in kleinen Anwendungen nicht kritisch ist, wird mit zunehmender Funktionalit√§t und Komplexit√§t der Logik eine √úberlastung kritisch und eine gro√üe Menge an Copy-Paste wird verhindert.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versuchen wir in diesem Fall, den Ansatz von sauberem Code und sauberer Architektur zu verwenden. Wir k√∂nnen MVVM nicht vollst√§ndig aufgeben, schlie√ülich basiert DataFlow SwiftUI darauf, aber es ist einiges zu neu zu erstellen. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnung! </font></font><br>
</i><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie allergisch gegen Artikel √ºber Architektur sind und Clean Code von einem Satz auf den Kopf gestellt wird, scrollen Sie ein paar Abs√§tze nach unten. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist nicht gerade Clean Code von Onkel Bob!</font></font><br>
</i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ja, wir werden Onkel Bobs Clean Code nicht in seiner reinsten Form annehmen. Ich habe ein √úber-Engineering. Wir werden nur eine Idee nehmen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hauptidee von sauberem Code besteht darin, den am besten lesbaren Code zu erstellen, der dann problemlos erweitert und ge√§ndert werden kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt einige Prinzipien f√ºr die Softwareentwicklung, deren Einhaltung empfohlen wird.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ep/yb/qx/epybqx2vc9lfjagxz2nlkawvzqc.png" width="50%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Viele Menschen kennen sie, aber nicht jeder liebt sie und nicht jeder benutzt sie. Dies ist ein separates Thema f√ºr holivar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Reinheit des Codes sicherzustellen, ist es zumindest erforderlich, den Code in funktionale Schichten und Module zu unterteilen, die allgemeine Probleml√∂sung zu verwenden und die Abstraktion der Interaktion zwischen den Komponenten zu implementieren. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und zumindest m√ºssen Sie den UI-Code von der sogenannten Gesch√§ftslogik trennen.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unabh√§ngig vom ausgew√§hlten Architekturmuster ist die Logik der Arbeit mit der Datenbank und des Netzwerks, der Verarbeitung und Speicherung von Daten von der Benutzeroberfl√§che und den Modulen der Anwendung selbst getrennt. Gleichzeitig arbeiten die Module mit Implementierungen von Diensten oder Speichern, die wiederum auf den allgemeinen Dienst von Netzwerkanforderungen oder die allgemeine Datenspeicherung zugreifen. Die Initialisierung von Variablen, √ºber die Sie auf den einen oder anderen Dienst zugreifen k√∂nnen, erfolgt in einem bestimmten allgemeinen Container, auf den das Anwendungsmodul (Modulgesch√§ftslogik) schlie√ülich zugreift. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xj/5m/wj/xj5mwjxvmfme_cg6li2rowb9eny.png" width="75%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir Gesch√§ftslogik ausgew√§hlt und abstrahiert haben, k√∂nnen wir die Interaktion zwischen den Komponenten der Module nach Belieben arrangieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grunds√§tzlich arbeiten alle vorhandenen Muster von iOS-Anwendungen nach dem gleichen Prinzip.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s_/b6/zl/s_b6zlrz8qcadakh4tgc75nh5da.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt immer Gesch√§ftslogik, es gibt Daten. Es gibt auch einen Anrufmanager, der f√ºr die Pr√§sentation und Transformation von Daten f√ºr die Ausgabe verantwortlich ist und wo die konvertierten Daten ausgegeben werden. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der einzige Unterschied besteht darin, wie die Rollen auf die Komponenten verteilt sind.</font></font><br>
<br>
</b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
weil Wir bem√ºhen uns, die Anwendung lesbar zu machen, um aktuelle und zuk√ºnftige √Ñnderungen zu vereinfachen. Es ist logisch, alle diese Rollen zu trennen. Unsere Gesch√§ftslogik wurde bereits hervorgehoben, die Daten werden immer getrennt. Bleiben Sie Dispatcher, Moderator und Ansicht. Als Ergebnis erhalten wir eine Architektur bestehend aus View-Interactor-Presenter, in der der Interaktor mit den Gesch√§ftslogikdiensten interagiert, der Presenter die Daten konvertiert und sie als eine Art ViewModel in unsere Ansicht gibt. In guter Weise werden Navigation und Konfiguration auch aus der Ansicht in separate Komponenten √ºbernommen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-g/wf/bx/-gwfbxs-tyq0noqy2kr87dm3-nw.png" width="75%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir erhalten die VIP + R-Architektur mit der Aufteilung kontroverser Rollen in verschiedene Komponenten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns ein Beispiel an. </font><font style="vertical-align: inherit;">Wir haben eine kleine News Aggregator-Anwendung </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
in SwiftUI und MVVM geschrieben. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h-/ds/od/h-dsodxehcqsfbzn1oo0nruhx-y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Anwendung verf√ºgt √ºber 3 separate Bildschirme mit eigener Logik, d. H. 3 Module:‚Ä®</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nachrichtenlistenmodul;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nachrichtenbildschirmmodul;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nachrichtensuchmodul.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jedes der Module besteht aus einem ViewModel, das mit der ausgew√§hlten Gesch√§ftslogik interagiert, und einer Ansicht, die anzeigt, was das ViewModel an es sendet. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/50/d1/7f/50d17fsmobld9mjgujdz3pe4f8g.png" width="60%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir bem√ºhen uns sicherzustellen, dass ViewModel nur Daten speichert, die zur Anzeige bereit sind. Jetzt besch√§ftigt er sich sowohl mit dem Zugriff auf Dienste als auch mit der Verarbeitung der Ergebnisse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir √ºbertragen diese Rollen an den Pr√§sentator und Interaktor, die wir f√ºr jedes </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modul eingerichtet haben. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5e/hd/i8/5ehdi8kd3otiltlepisfdr9pzua.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Interaktor leitet die vom Dienst empfangenen Daten an den Pr√§sentator weiter, der das vorhandene ViewModel, das an die Ansicht gebunden ist, mit vorbereiteten Daten f√ºllt. Grunds√§tzlich ist im Hinblick auf die Trennung der Gesch√§ftslogik des Moduls alles einfach. ‚Ä®</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gehen Sie nun zu Ansicht. </font><font style="vertical-align: inherit;">Versuchen wir, mit erzwungener Codeduplizierung umzugehen. </font><font style="vertical-align: inherit;">Wenn es sich um eine Art Kontrolle handelt, kann es sich um seine Stile oder Einstellungen handeln. </font><font style="vertical-align: inherit;">Wenn wir √ºber die Bildschirmansicht sprechen, dann ist dies:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bildschirmstile</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> allgemeine UI-Elemente (LoadingView);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Informationswarnungen;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> einige allgemeine Methoden.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir k√∂nnen keine Vererbung verwenden, aber wir k√∂nnen durchaus </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komposition verwenden</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach diesem Prinzip werden alle benutzerdefinierten Ansichten in SwiftUI erstellt. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also erstellen wir einen Ansichtscontainer, in den wir dieselbe Logik √ºbertragen, und √ºbergeben unsere Bildschirmansicht an den Containerinitialisierer und verwenden sie dann als Inhaltsansicht innerhalb des K√∂rpers.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContainerView</span>&lt;<span class="hljs-title">Content</span>&gt;: <span class="hljs-title">IContainer</span>, <span class="hljs-title">View</span> <span class="hljs-title">where</span> <span class="hljs-title">Content</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">ObservedObject</span> <span class="hljs-keyword">var</span> containerModel = <span class="hljs-type">ContainerModel</span>()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> content: <span class="hljs-type">Content</span><font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">init</span>(content: <span class="hljs-type">Content</span>) {
        <span class="hljs-keyword">self</span>.content = content<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> body : some <span class="hljs-type">View</span> {
        <span class="hljs-type">ZStack</span> {<font></font>
            content<font></font>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">self</span>.containerModel.isLoading) {
                <span class="hljs-type">LoaderView</span>()<font></font>
            }<font></font>
        }.alert(isPresented: $containerModel.hasError){<font></font>
            <span class="hljs-type">Alert</span>(title: <span class="hljs-type">Text</span>(<span class="hljs-string">""</span>), message: <span class="hljs-type">Text</span>(containerModel.errorText),<font></font>
                 dismissButton: .<span class="hljs-keyword">default</span>(<span class="hljs-type">Text</span>(<span class="hljs-string">"OK"</span>)){
                <span class="hljs-keyword">self</span>.containerModel.errorShown()<font></font>
                })<font></font>
        }<font></font>
    }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Bildschirmansicht ist in den ZStack im ContainerView eingebettet, der auch Code zum Anzeigen der LoadingView und Code zum Anzeigen einer Informationswarnung enth√§lt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir ben√∂tigen auch unser ContainerView, um ein Signal vom ViewModel der internen Ansicht zu empfangen und seinen Status zu aktualisieren. </font><font style="vertical-align: inherit;">Wir k√∂nnen nicht √ºber @Observed dasselbe Modell </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
wie die interne Ansicht </font><font style="vertical-align: inherit;">abonnieren </font><font style="vertical-align: inherit;">, da wir deren Signale ziehen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hg/y4/gv/hgy4gvxu5fbdn4lbxs6vuzggrca.png" width="60%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher stellen wir √ºber das Delegatenmuster eine Kommunikation mit ihm her und verwenden f√ºr den aktuellen Status des Containers ein eigenes ContainerModel.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ContainerModel</span>:<span class="hljs-title">ObservableObject</span> </span>{<font></font>
    @<span class="hljs-type">Published</span> <span class="hljs-keyword">var</span> hasError: <span class="hljs-type">Bool</span> = <span class="hljs-literal">false</span>
    @<span class="hljs-type">Published</span> <span class="hljs-keyword">var</span> errorText: <span class="hljs-type">String</span> = <span class="hljs-string">""</span>
    @<span class="hljs-type">Published</span> <span class="hljs-keyword">var</span> isLoading: <span class="hljs-type">Bool</span> = <span class="hljs-literal">false</span><font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">setupError</span><span class="hljs-params">(error: String)</span></span>{
     <span class="hljs-comment">//....</span><font></font>
       }<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">errorShown</span><span class="hljs-params">()</span></span> {
     <span class="hljs-comment">//...</span><font></font>
    }<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">showLoading</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">self</span>.isLoading = <span class="hljs-literal">true</span><font></font>
    }<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">hideLoading</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">self</span>.isLoading = <span class="hljs-literal">false</span><font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ContainerView implementiert das IContainer-Protokoll. Dem eingebetteten View-Modell wird eine Instanzreferenz zugewiesen. </font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span>  <span class="hljs-title">IContainer</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">showError</span><span class="hljs-params">(error: String)</span></span><font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">showLoading</span><span class="hljs-params">()</span></span><font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">hideLoading</span><span class="hljs-params">()</span></span><font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContainerView</span>&lt;<span class="hljs-title">Content</span>&gt;: <span class="hljs-title">IContainer</span>, <span class="hljs-title">View</span> <span class="hljs-title">where</span> <span class="hljs-title">Content</span>: <span class="hljs-title">View</span>&amp;<span class="hljs-title">IModelView</span> </span>{<font></font>
    @<span class="hljs-type">ObservedObject</span> <span class="hljs-keyword">var</span> containerModel = <span class="hljs-type">ContainerModel</span>()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> content: <span class="hljs-type">Content</span><font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">init</span>(content: <span class="hljs-type">Content</span>) {
        <span class="hljs-keyword">self</span>.content = content
        <span class="hljs-keyword">self</span>.content.viewModel?.listener = <span class="hljs-keyword">self</span><font></font>
    }<font></font>
    <span class="hljs-comment">//- </span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
View implementiert das IModelView-Protokoll, um den Modellzugriff zu kapseln und eine Logik zu vereinheitlichen. </font><font style="vertical-align: inherit;">Modelle f√ºr denselben Zweck implementieren das IModel-Protokoll:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">IModelView</span> </span>{
    <span class="hljs-keyword">var</span> viewModel: <span class="hljs-type">IModel?</span> {<span class="hljs-keyword">get</span>}<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">protocol</span>  <span class="hljs-title">IModel</span>:<span class="hljs-title">class</span> </span>{
   <span class="hljs-comment">//....</span>
    <span class="hljs-keyword">var</span> listener:<span class="hljs-type">IContainer?</span> {<span class="hljs-keyword">get</span> <span class="hljs-keyword">set</span>}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann wird bereits in diesem Modell bei Bedarf die Delegate-Methode aufgerufen, um beispielsweise eine Warnung mit einem Fehler anzuzeigen, bei der sich die Statusvariable des Containermodells √§ndert.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContainerView</span>&lt;<span class="hljs-title">Content</span>&gt;: <span class="hljs-title">IContainer</span>, <span class="hljs-title">View</span> <span class="hljs-title">where</span> <span class="hljs-title">Content</span>: <span class="hljs-title">View</span>&amp;<span class="hljs-title">IModelView</span> </span>{<font></font>
    @<span class="hljs-type">ObservedObject</span> <span class="hljs-keyword">var</span> containerModel = <span class="hljs-type">ContainerModel</span>()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> content: <span class="hljs-type">Content</span><font></font>
<font></font>
    <span class="hljs-comment">//- </span>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">showError</span><span class="hljs-params">(error: String)</span></span> {
        <span class="hljs-keyword">self</span>.containerModel.setupError(error: error)<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">showLoading</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">self</span>.containerModel.showLoading()<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">hideLoading</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">self</span>.containerModel.hideLoading()<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt k√∂nnen wir die Arbeit der Ansicht vereinheitlichen, indem wir zur Arbeit √ºber die ContainerView wechseln. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies wird unser Leben bei der Arbeit mit der Konfiguration der folgenden Module und der Navigation erheblich erleichtern. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie die Navigation in SwiftUI konfigurieren und eine saubere Konfiguration vornehmen, erfahren Sie im n√§chsten </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Den Quellcode des Beispiels finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de500454/index.html">"Welche Yachth√§fen?" oder wir steuern den Controller √ºber Bluetooth mit einer mobilen Anwendung auf Xamarin (Android)</a></li>
<li><a href="../de500456/index.html">BpfTrace - endlich ein vollst√§ndiger Ersatz f√ºr Dtrace unter Linux</a></li>
<li><a href="../de500458/index.html">Technische Funktionen f√ºr Online-Sprache: Starter Pack</a></li>
<li><a href="../de500462/index.html">Erkennen von Szenen√§nderungen und Speichern von h264-Videoclips auf Raspberry Pi ohne Dekodierung</a></li>
<li><a href="../de500468/index.html">Java-Funktionshandbuch 8-14</a></li>
<li><a href="../de500472/index.html">Python ist Zeit, Platz zu schaffen. √úber die Aussichten von Julia</a></li>
<li><a href="../de500476/index.html">Unsicherheit</a></li>
<li><a href="../de500478/index.html">Tetris an der H√ºlse: gasdurchl√§ssiges Material f√ºr tragbare Elektronik</a></li>
<li><a href="../de500484/index.html">Webkomponenten statt zu reagieren - ein weiterer Versuch</a></li>
<li><a href="../de500486/index.html">Wie man die bin√§re Notation erkl√§rt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>