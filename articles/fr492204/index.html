<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌑 🧘🏼 🧘🏽 Comment contourner les erreurs lors de la création de rapports dans Power BI et arriver à la construction d'un système de téléchargement pour les mégadonnées 🚚 👩🏻‍🤝‍👨🏽 🙎🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Derrière des tableaux de bord Power BI magnifiques et compréhensibles se trouvent souvent des semaines de préparation et d'exploration de données. Sur...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment contourner les erreurs lors de la création de rapports dans Power BI et arriver à la construction d'un système de téléchargement pour les mégadonnées</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/agima/blog/492204/"><img src="https://habrastorage.org/webt/2d/wo/vr/2dwovr1h5boyixwojsztgjctksk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Derrière des tableaux de bord Power BI magnifiques et compréhensibles se trouvent souvent des semaines de préparation et d'exploration de données. </font><font style="vertical-align: inherit;">Surtout quand il s'agit de créer des rapports BI utiles dans une grande organisation avec un volume de trafic de dizaines de millions de visiteurs chaque mois. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, je veux décrire un certain nombre d'aspects négatifs que j'ai rencontrés lors de la création de rapports BI basés sur les données de systèmes d'analyse Web dans un certain nombre d'entreprises (grands représentants du commerce électronique russe, compagnies d'assurance, etc.). </font><font style="vertical-align: inherit;">L'article n'a pas pour but de faire de l'anti-publicité, ou vice versa, la publicité de certains outils ou décisions. </font><font style="vertical-align: inherit;">Il est préparé afin d'aider à éviter d'éventuels moments négatifs pour les autres utilisateurs et indiquer les options de solutions.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avertissement</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je parle de grandes quantités de données et montre des exemples de téléchargement et d'échantillonnage à partir de Google Analytics 360. Sur les projets avec une petite quantité de données, de telles difficultés peuvent ne pas exister. </font><font style="vertical-align: inherit;">J'ai rencontré tous les problèmes identifiés dans la pratique et dans l'article, je ne décris que mon expérience en résolution - la vôtre peut être complètement différente.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connecteur vers Yandex.Metrica</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yandex.Metrica a des conditions d'échantillonnage plus douces et une interface intuitive par rapport à Google Analytics. Par conséquent, de nombreux spécialistes du marketing préfèrent Yandex.Metrica et créent des rapports BI sur le téléchargement de données à partir de là. Pour ce faire, utilisez le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">connecteur de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Maxim Uvarov. Cette méthode n'est pas sûre et ne permet pas de traiter des demandes complexes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les grandes entreprises ont besoin d'une garantie que les informations confidentielles ne tomberont pas entre les mains des détracteurs, et les indicateurs financiers ne seront utilisés que pour les parties prenantes et exclusivement au sein de l'entreprise. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le premier gros inconvénient est que pour utiliser le connecteur, dans Power BI, vous devez activer le paramètre "Ignorer les niveaux de confidentialité", sinon cela ne fonctionnera tout simplement pas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ty/pg/eb/typgebof8euu4d6s2pgljyfqs4k.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, les données confidentielles peuvent tomber entre les mains de tout utilisateur non autorisé. Cela est confirmé par un extrait de l'aide de Power BI. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xd/2j/86/xd2j860l6kp0j7wuswlge0jor3u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La connexion de données est anonyme. Cependant, il n'y a aucune autorisation ou vérification de l'autorisation d'utiliser ces données pour les utilisateurs qui sont vraiment autorisés à le faire. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gd/b3/dn/gdb3dni9wi_kxd27btthfhuk5h0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour que ces connecteurs fonctionnent, vous devez obtenir un jeton d'accès OAUTH. La description du connecteur fournit un lien sur la façon de donner à l'application l'accès à votre compte. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-y/nq/gx/-ynqgxssteulef1kedj3smcflkk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, une application tierce aura accès à votre compte. Personne ne garantit la sécurité de vos données.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tm/ux/23/tmux237gyybnovyelwetareee4g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le deuxième inconvénient est que l'API Yandex.Metrica ne peut pas traiter de grandes quantités de données sur de grands projets et, par conséquent, le connecteur refuse également de travailler avec des requêtes complexes sur des données Yandex.Metrica brutes - il ne les décharge pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, vous devez télécharger des données pendant un an, sans aucun filtre complexe. Le connecteur renvoie une erreur: «La demande est trop complexe. Veuillez réduire l'espacement des dates ou l'échantillonnage. " </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xs/vx/fi/xsvxfi4zsihgayia1fo87_pbj88.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien sûr, il s'agit d'une traduction de l'erreur de l'API Yandex.Metrica elle-même. Cependant, dans ce cas, nous n'avons pas le choix de télécharger des données avec une ventilation par mois ou par jour - par exemple, pour faire un cycle de données pour chaque mois et les combiner en un seul ensemble de données surmontant une erreur d'API. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous réduisez considérablement la période, l'API vous permet de pomper des données, mais ce n'est qu'une petite partie de ce dont nous avons besoin.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xd/gd/6q/xdgd6qonfgcyjthxhjj65_ophyu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour créer des rapports volumineux, le déchargement pour de courtes périodes est peu pratique et peu pratique. </font><font style="vertical-align: inherit;">En pratique, vous avez souvent besoin de décharger via des entonnoirs complexes pour sites ouverts avec un grand nombre de visites par jour. </font><font style="vertical-align: inherit;">Surtout lors de l'utilisation de segments de visites complexes, il est pratiquement impossible de télécharger les données nécessaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Même si vous avez pu charger les données, ce n'est pas un fait qu'il sera possible de télécharger vers le modèle de données pour créer le rapport lui-même, car diverses erreurs de chargement apparaissent de temps en temps. </font><font style="vertical-align: inherit;">Pour une raison quelconque, même avec une table normalement chargée, des erreurs se produisent.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wk/9d/u8/wk9du8sdgpdqe1gb7cr-n2uk6_8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour que toutes les parties prenantes de l'entreprise puissent utiliser le rapport basé sur le connecteur API Yandex.Metrica, vous devez publier le rapport dans PowerBI Service. </font><font style="vertical-align: inherit;">Dans ce cas, les niveaux de confidentialité devront également être ignorés.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qc/dg/i8/qcdgi8gck0lkcdp-t--vedkmuiw.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque la visualisation est configurée et que le rapport est publié dans le cloud Microsoft, le connecteur affichera une erreur de requête combinée et ne sera pas mis à jour via le service Power BI - vous ne pourrez pas configurer la mise à jour planifiée de votre rapport. L'erreur se produit lorsque l'une des requêtes, qui forme la table de téléchargement finale, contient la logique du travail simultané avec la requête externe et interne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans l'erreur, la </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0-/ci/rt/0-cirtjh6ifdkpe-ajduldxstsc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
table </font><font style="vertical-align: inherit;">«Fonction appelée» </font><font style="vertical-align: inherit;">est </font><font style="vertical-align: inherit;">juste indiquée: </font><font style="vertical-align: inherit;">Cette table est obtenue grâce à la fonction PQYM, qui fonctionne avec une source de données externe - l'API Yandex.Metrica. Le mécanisme de mise à jour des rapports dans Power BI ne fonctionne pas et demande de refaire la combinaison de requêtes. Cela est dû aux liens internes d'une demande de connexion à une demande externe, ainsi qu'à la structure de la fonction elle-même.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vv/lv/mb/vvlvmbnqatqohghiivpcofsgxze.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons décidé de ne pas utiliser un tel connecteur lors de la création de rapports et sommes passés au déchargement des données de l'API Yandex.Metrica via des scripts Python, plus à ce sujet plus loin dans l'article.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connecteur Google Analytics</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour créer des rapports sur les données de Google Analytics (nous parlons de téléchargement direct à partir du système d'analyse), il existe également un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">connecteur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Maxim Uvarov. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, vous devrez également définir «Ignorer les niveaux de confidentialité». L'accès à l'API de votre système d'analyse, qui contient des données sur les ventes en ligne, se fait via une connexion anonyme. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pw/ke/x1/pwkex1vkvifxlkqne2kbvo0pvsy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selon les instructions, vous devrez à nouveau ouvrir l'accès à une application tierce, uniquement pour un compte Google, qui contient une menace pour la confidentialité de vos données. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zx/qr/0f/zxqr0fyqjpqp_6umz9y_o5_i83a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez réécrire certaines données dans le connecteur lui-même et commencer à les utiliser pour votre propre application. Pour ce faire, enregistrez «ID client OAuth 2.0» sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cloud.google.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, obtenez des jetons d'accès et entrez les clés d'accès nécessaires dans son mécanisme de travail. Mais même ces actions ne vous aideront pas dans la lutte contre l'échantillonnage et la mise à jour de vos rapports. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque fois que vous touchez les données agrégées de l'API Google Analytics, nous rencontrons toujours un échantillonnage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le connecteur a la possibilité de décharger un jour, mais même il ne sauvegarde pas toujours. L'indicateur d'échantillonnage intégré au connecteur montre qu'il est là même en une journée. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dk/kj/5l/dkkj5lp-e3zi8drcbylxc1hzmjk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, les données de session ventilées par Shopping Stage ne peuvent pas être téléchargées sans échantillonnage sur de telles quantités de données. Cela entraînera de grandes erreurs dans les données et les mesures lors de la création de rapports, en particulier lorsqu'il est nécessaire de calculer avec précision la conversion de la transition d'une étape à l'autre, ou de télécharger des données sur des entonnoirs avec une structure complexe de segments.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Même si la perte de données n'est pas critique pour vous, vous ne pouvez toujours pas configurer la mise à jour planifiée de vos rapports via le service Power BI. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sh/5q/61/sh5q61niklucdiieoedjfltnp3c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La même erreur du mécanisme de travail interfère, seules les fonctions PQGA.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/k0/ft/uy/k0ftuyqfzkqptqvupuotawgo1my.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons également refusé de travailler avec ce connecteur.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connecteur natif Google Analytics</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parfois, Google et Microsoft se font des concessions: Power BI prêt à l'emploi dispose d'un connecteur Google Analytics standard. </font><font style="vertical-align: inherit;">Malheureusement, il n'y a pas une telle option pour Yandex.Metrica.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xl/hk/po/xlhkpo-a4h95gz-nksi6ws_613k.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le mécanisme de travail avec l'API Google Analytics est plus facilement mis en œuvre ici que dans le connecteur de Maxim Uvarov, mais lors du téléchargement d'un grand nombre d'indicateurs, les données sont trop échantillonnées. </font><font style="vertical-align: inherit;">Les nombres répétés dans la capture d'écran sont les données échantillonnées.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/lw/ba/n_/lwban_daksuitnrmfw5sihfjqpm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez éviter l'échantillonnage si vous déchargez des mini-tableaux ventilés uniquement par date et par n'importe quel indicateur. Par exemple, la date, le nombre de sessions et le type d'appareil. Et puis à partir de ces tableaux pour collecter les rapports nécessaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous n'avez pas des millions de trafic, cela peut vous aider. Cependant, les rapports ne seront pas informatifs et avec des limites d'évolutivité: en raison des nombreuses mini-tables dans le modèle de données, il est difficile de créer des relations entre elles. Cela impose une restriction sur la création de filtres et de tranches. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez réécrire le connecteur standard et le forcer à télécharger des données pour chaque jour, tandis que les données seront proches des vrais chiffres dans l'interface GA, mais vous ne pourrez pas éviter l'échantillonnage.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/br/oc/fg/brocfgwihu2rpcqfjrdmhsvbsdc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selon mes observations, lors de la répartition des sessions Shopping Stage, pas un seul connecteur n'a pu normalement télécharger des données sans échantillonner de grandes quantités de données. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le connecteur standard, vous ne pouvez pas personnaliser les dates de téléchargement. </font><font style="vertical-align: inherit;">Tout ce qui est simplement une sélection de paramètres et de métriques à partir des API Google Analytics disposées dans des dossiers.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/he/_n/tt/he_ntt6qogkz6vm-3mjnbmn0rya.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce connecteur convient aux projets Internet de petite et moyenne taille avec peu de trafic. </font><font style="vertical-align: inherit;">Ici, une situation similaire se présente avec l'obtention de données auprès de Yandex.Metrica. </font><font style="vertical-align: inherit;">Toutes les informations nécessaires sans perte de précision ne peuvent être téléchargées directement via l'API qu'à l'aide de scripts ou de services de streaming de données spéciaux - plus d'informations à ce sujet plus loin dans l'article.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sticks in Wheels par Google</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Récemment, nous avons remarqué un verrou étrange - lors de la tentative de configuration de la mise à jour du connecteur "natif" de Google Analytics, une erreur d'autorisation est apparue via un compte Google dans l'interface du service Power BI. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o0/wt/yr/o0wtyrw-caxzwahcpjjb_pgfrbe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons essayé de savoir ce que Google devait faire dans une telle situation et comment «blanchir» la réputation du compte, mais nos tentatives ont échoué. Nous avons essayé d'enregistrer de nouveaux comptes et de nous connecter via différents appareils - Google a bloqué toute tentative d'autorisation.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Environ un mois après le blocage, nous avons toujours réussi à nous connecter via le même compte, mais un tel incident peut considérablement interférer avec la publication des rapports de BI nécessaires à temps et mettre le client dans une position délicate. </font><font style="vertical-align: inherit;">Immédiatement après l'écluse, nous avons commencé à chercher une issue possible à la situation. </font><font style="vertical-align: inherit;">Pour éviter les verrous inattendus, nous avons décidé de créer notre propre environnement contrôlé avec les données nécessaires pour les rapports BI.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options de solution</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obtenez les rapports BI nécessaires pour les moyennes et grandes organisations, et même sans échantillonnage est possible. </font><font style="vertical-align: inherit;">Mais vous devez essayer un peu et choisir l'une des différentes façons. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez utiliser des services prêts à l'emploi pour diffuser des données. </font><font style="vertical-align: inherit;">Leur objectif principal est de télécharger des données du système d'analyse, de divers systèmes de publicité, de CRM et d'autres services vers n'importe quel stockage. </font><font style="vertical-align: inherit;">Pratique, rapide et pratique, mais pas gratuit. </font><font style="vertical-align: inherit;">Sur de gros volumes de données ou des données avec plusieurs sources, les montants sont tangibles. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les services les plus connus:</font></font></b><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renta.im</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pipeline OWOX BI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myBI Connect</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chacun de ces systèmes vous permet de configurer la diffusion quotidienne de données non échantillonnées à partir de systèmes d'analyse Web (Yandex.Metrics et Google Analytics) vers des bases de données (par exemple, BigQuery, Azure SQL Database, Microsoft SQL Server ou ClickHouse) pour la connexion via Power BI et la création de rapports. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si les outils répertoriés sont trop chers pour l'entreprise, vous pouvez essayer d'implémenter votre système de téléchargement de données et utiliser Power BI + Python + Any Cloud Server (ou Yandex.Cloud) + PostgreSQL. Il s'agit de la méthode que nous utilisons lors de la création de rapports BI. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schéma d'interaction du système:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/kb/iu/um/kbiuumx6q6a_k5wxdq1g78ukehg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un tel schéma de travail assure la conservation, l'autonomie et l'agrégation des données nécessaires. Après avoir établi un tel schéma une fois, vous n'aurez pas besoin de passer du temps à collecter des informations - tout est dans le référentiel, il vous suffit de vous connecter et de commencer à créer un rapport sur Power BI. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les scripts Python «tirent» toutes les données selon l'API des sources nécessaires, écrivent dans la base de données ou déchargent les formulaires (par exemple, au format csv). Les scripts pour le téléchargement à partir de l'API et le chargement dans la base de données méritent un article séparé, et un jour je l'écrirai. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien sûr, il existe de nombreux modèles et solutions prêtes à l'emploi sur Internet, mais pour une mise à l'échelle supplémentaire, il est nécessaire de connaître les besoins individuels du système sous lequel les scripts de déchargement sont créés.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les données sont écrites dans une base de données pré-créée et configurée - dans notre cas, PostgreSQL. </font><font style="vertical-align: inherit;">Les scripts pompent des données pour chaque jour et les écrivent dans des tableaux selon un calendrier. </font><font style="vertical-align: inherit;">Ils sont situés sur un serveur cloud sous notre contrôle ou sous le contrôle du service de sécurité informatique du client. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe un grand nombre d'entreprises qui fournissent des services de stockage cloud. </font><font style="vertical-align: inherit;">En fonction de vos préférences personnelles, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">Cloud a</font></a><font style="vertical-align: inherit;"> été sélectionné </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avantages de Yandex.Cloud:</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration pratique et location de serveurs avec PostgreSQL préinstallé.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une documentation complète en russe, qui est clairement indiquée et vous permet d'apprendre rapidement à utiliser le service. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gestion de serveur pratique.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Support rapide de spécialistes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flexibilité des différents réglages et tarifs des équipements: personne n'impose de packages de configuration prêts à l'emploi, vous choisissez vous-même la configuration de vos équipements, et vous pouvez immédiatement commander le preset de n'importe quelle base de données.</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yt/f6/_-/ytf6_-9xrfcobvmfbwaajwyl8bm.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les téléchargements résultants sont écrits dans la base de données PostgreSQL. </font><font style="vertical-align: inherit;">Cette base de données a été choisie car il s'agit d'un SGBD relationnel objet (fonctionnant avec des tableaux multidimensionnels et le support JSON de la «boîte» - pour les structures de données complexes doivent avoir). </font><font style="vertical-align: inherit;">Il est flexible, fiable, gratuit et dispose également d'une énorme communauté de support. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Power BI dispose d'un connecteur direct intégré dans PostgreSQL. </font><font style="vertical-align: inherit;">Lors de la première connexion, vous devez installer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Npgsql</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> supplémentaire </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Power BI vous en informe et fournit un lien.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ju/n_/wf/jun_wfcjtsnm0khj3wf9pzj8h2s.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour configurer les mises à jour de rapports lors de l'utilisation du stockage cloud, vous devez configurer la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">passerelle Power BI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il est nécessaire de configurer la mise à jour des rapports BI et d'assurer la sécurité des données confidentielles lors de leur transfert à partir d'une base de données, qui doit être située dans le circuit informatique interne de votre organisation, ou sur un serveur cloud sécurisé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La passerelle permet un transfert de données rapide et sécurisé entre les magasins de données situés sur le réseau interne de l'organisation et les services cloud Microsoft. Le transfert de données entre Power BI et la passerelle est sécurisé, et toutes les informations d'identification fournies par les administrateurs de la passerelle sont cryptées pour protéger les informations dans le cloud et sont décryptées uniquement sur l'ordinateur de la passerelle.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/mm/hd/re/mmhdrebvglgmfz1zfbncjck835w.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir téléchargé </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Power BI Gateway</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et l'avoir lancé, une boîte de dialogue apparaît.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/or/q7/4z/orq74zn_gyemebomwqxzfxcwkfu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour enregistrer et utiliser la passerelle, les informations d'identification du service cloud Power BI Service sont requises.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/4z/pq/ft/4zpqft8l1urixndm8dfndrrje4s.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après tous les paramètres, une fenêtre sur la passerelle de travail apparaîtra. </font><font style="vertical-align: inherit;">Ensuite, vous devez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">définir des paramètres supplémentaires.</font></font></a><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/sw/mb/t2/swmbt2b7ldkzf42k56px-ucc4re.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une alternative plus simple à la personnalisation de PostgreSQL est Google BigQuery. </font><font style="vertical-align: inherit;">Power BI dispose d'un connecteur intégré dans Google BigQuery. </font><font style="vertical-align: inherit;">Dans ce cas, il est nécessaire de suivre le principe "sept fois pour calculer le coût, une fois pour répondre à la demande".</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/3m/gv/7a/3mgv7a-1zf0i3g8oxj-jiabgke4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BigQuery peut être utilisé gratuitement pendant un an, simplement en attachant une carte bancaire sur accord pour utiliser le service. </font><font style="vertical-align: inherit;">L'argent après la date limite à votre insu ne sera pas débité. </font><font style="vertical-align: inherit;">Tarification supplémentaire - selon les tarifs du système lui-même, mais avec quelques "avantages" agréables. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si les données téléchargées de vos systèmes n'atteignent pas 10 Go par mois (!), Le téléchargement ne sera pas facturé.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bg/il/hj/bgilhj19p3rswgrnp5co7lw75dq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si le traitement mensuel des données ne dépasse pas 1 To, aucun frais ne sera facturé non plus. </font><font style="vertical-align: inherit;">Si plus, alors 5 $ pour chaque traitement 1 To.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ff/gk/4l/ffgk4l0whznxxacywqupqmuht1i.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous devez stocker plus de 10 Go par mois, chaque gigaoctet suivant coûtera 0,010 $.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/lh/bn/7z/lhbn7zv038ot99ogeahedobx5bc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les tarifs sont décrits plus en détail sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la page BigQuery.</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sommaire</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez besoin de données provenant de divers systèmes d'analyse, et en même temps, la sûreté, la sécurité, l'agrégation continue, la convivialité et le manque d'échantillonnage sont fondamentaux pour vous, vous avez deux façons. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le premier est les services de streaming. </font><font style="vertical-align: inherit;">Ils sont faciles à utiliser, ils ont un support technique continu et une intégration prête à l'emploi avec les entrepôts de données. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Désavantages:</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coûts tangibles sur de grandes quantités de données.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Type d'intégration limité fourni.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Processus non contrôlés du côté du fournisseur de services de streaming pour travailler avec vos informations.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le second est son propre flux de téléchargement et d'agrégation de données. Évolutif, contrôlé, avec sécurité des données. Il peut sembler compliqué et long à mettre en œuvre. Si l'entreprise a besoin d'une organisation efficace du reporting BI, de son évolutivité et de la sécurité des données supplémentaires, cette option est la plus acceptable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous ceux qui pensent simplement à un reporting BI à part entière doivent ajouter la devise «Accumuler, structurer et protéger ces données contre les jeunes» dans la culture d'entreprise. Il n'y a rien de mieux qu'une base de données à part entière à haute tolérance aux pannes avec une sauvegarde régulière et avec des droits différenciés pour l'utiliser pour différentes catégories de parties prenantes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est nécessaire d'accumuler, de structurer et d'agréger vos données à partir de systèmes d'analyse, d'une application mobile et d'autres services clients. </font><font style="vertical-align: inherit;">Tout cela à l'avenir vous aidera à analyser à la fois votre audience et vos produits dans toutes les sections. </font><font style="vertical-align: inherit;">Les informations et les données dominent désormais le monde et coûtent parfois plus cher que l'argent. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment implémenter l'approche décrite dans l'article pour transférer des données d'analyse vers une base de données PostgreSQL à l'aide de scripts Python et des détails d'implémentation, je vais discuter dans les articles suivants.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr492190/index.html">Russian SaaS 2019 - résultats</a></li>
<li><a href="../fr492192/index.html">À la recherche de l'excellence de poche</a></li>
<li><a href="../fr492194/index.html">Rencontrez un gars qui vend des appareils sans fil pour voler rapidement des voitures de luxe</a></li>
<li><a href="../fr492200/index.html">Automatisation des tests: Java ou Python?</a></li>
<li><a href="../fr492202/index.html">Коронавирус COVID-19: только факты, без паники</a></li>
<li><a href="../fr492210/index.html">Présentation technique de l'architecture de stockage Infinidat</a></li>
<li><a href="../fr492212/index.html">Développement frontend de portails sur des logiciels open source: partager l'expérience</a></li>
<li><a href="../fr492214/index.html">Pourquoi vaut-il la peine de faire des réunions en marchant? Prouvé par la science, confirmé par la mafia</a></li>
<li><a href="../fr492216/index.html">Enregistrement de valeurs dans une application .Net au stade de la création</a></li>
<li><a href="../fr492218/index.html">Règles de conception d'icônes à retenir</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>