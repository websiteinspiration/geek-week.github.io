<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçß üÖøÔ∏è üë®üèæ‚Äçüé§ Differential privacy: comparing libraries üë®üèº‚Äçüåæ ü§ûüèæ üîñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is a practical, applied comparison. It does not explain all the details of differential privacy. If you want to study this question more ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Differential privacy: comparing libraries</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/496272/"><img src="https://habrastorage.org/webt/r3/og/g9/r3ogg9kk0qcx9lvj_yjpee3h3ic.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This article is a practical, applied comparison. </font><font style="vertical-align: inherit;">It does not explain all the details of differential privacy. </font><font style="vertical-align: inherit;">If you want to study this question more deeply, refer to the links at the end of the article.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The promise of differential privacy (more precisely, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œµ-differential privacy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) is to provide a measurable way to balance the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">privacy</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">accuracy of data</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> when publicly aggregating data in private datasets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's say you have a settings slider:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">take it to the left - keep complete privacy of people whose data is in the dataset, but at the same time add a lot of noise to the information, reducing the accuracy of the aggregate statistics;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">move to the right - you get the perfect accuracy of the aggregate statistics, but reveal private information about people from the dataset. </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The bottom line is that the slider can be translated anywhere on the scale, choosing a balance for a specific use case.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How data is converted</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Œµ-differential privacy allows you to find a balance between privacy and accuracy using a positive value of Œµ (epsilon). If Œµ is small, then we maintain more privacy, but impair accuracy. If Œµ is large, then privacy suffers for the sake of accuracy. The value of Œµ varies from 0 to infinity. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Differential privacy libraries implement different techniques that take the epsilon parameter as an input value and add </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">random noise</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> inverse to Œµ </font><font style="vertical-align: inherit;">to the values ‚Äã‚Äãin the original dataset </font><font style="vertical-align: inherit;">. That is, the smaller the epsilon, the more noise is added.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Some libraries use additional parameters and offer random noise control tools, for example, the probability density from which random numbers are taken (Laplace distribution, normal distribution, etc.). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Some libraries also implement the concept of a </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">budget of privacy</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (privacy budget): each time a function is called, the library uses the amount of a pre-allocated budget set by the user. </font><font style="vertical-align: inherit;">The theoretical basis is as follows: with every publication of new data, it is more likely that an attacker will extract information about people from the dataset. </font><font style="vertical-align: inherit;">And with the help of the privacy budget, the library may return an error instead of a value.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comparison of Differential Privacy Libraries</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compare the three libraries and their work with a given dataset using the same methods:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IBM / differential-privacy-library</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Python)</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">google / differential-privacy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (C ++)</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">brubinstein / diffpriv</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (R language)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We will see how the size of the dataset and the desired level of privacy (epsilon) affect the accuracy. </font><font style="vertical-align: inherit;">In each case, we will compare the results obtained at different libraries.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test dataset</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We will randomly generate a dataset containing a column with the weights of people in kilograms. </font><font style="vertical-align: inherit;">We will consider this information confidential, it must be kept secret. </font><font style="vertical-align: inherit;">Each weight is represented as a double value real number. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weights were generated in accordance with the normal distribution, in which the average weight in the dataset is 70 kg and the standard deviation is 30. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For the purposes of the study, we will make it possible to generate datasets of different sizes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is the weight generation code:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> random<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">generate_weight_dataset</span>(<span class="hljs-params">dataset_size</span>):</span>
    outpath = <span class="hljs-string">f"weights_<span class="hljs-subst">{dataset_size}</span>.csv"</span>
    mu = <span class="hljs-number">70</span>  <span class="hljs-comment"># mean</span>
    sigma = <span class="hljs-number">30</span>  <span class="hljs-comment"># standard deviation</span>
    <span class="hljs-keyword">with</span> open(outpath, <span class="hljs-string">"w+"</span>) <span class="hljs-keyword">as</span> fout:
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(dataset_size):<font></font>
            random_weight = random.normalvariate(mu, sigma)  <span class="hljs-comment"># normal distribution</span>
            random_weight = abs(random_weight)  <span class="hljs-comment"># make sure weights are positive</span>
            random_weight = round(random_weight, <span class="hljs-number">1</span>)  <span class="hljs-comment"># round to 1 decimal digit</span>
            line = <span class="hljs-string">f"<span class="hljs-subst">{random_weight}</span>"</span><font></font>
            print(line, file=fout)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For a dataset of size 10,600, the generated data will look like this:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aaa/bc7/d41/aaabc7d41e9fd2e49d3ed62f87e4ce6f.png" width="400"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The actual average should be around 70 because we used the normal distribution with </font></font><code>mean=70</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">However, this is not an exact value because weights are randomly generated. </font><font style="vertical-align: inherit;">In addition, there are no negative weights in our dataset, and the final values ‚Äã‚Äãare rounded to one digit after the decimal point. </font><font style="vertical-align: inherit;">In this case, the actual average value was 70.34812570579449, and the standard deviation was 29.488380395675765. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Please note that we did all this just to make the dataset look like a set of real data. </font><font style="vertical-align: inherit;">The distribution of values ‚Äã‚Äãwill not affect the estimates that we will discuss.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Using libraries</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's look at a way to use libraries. </font><font style="vertical-align: inherit;">We will always compare them using the same parameters. </font><font style="vertical-align: inherit;">For example, in all cases there will be the same input epsilon value. </font><font style="vertical-align: inherit;">For measurements, we will use the average value of the dataset. </font><font style="vertical-align: inherit;">All considered libraries implement such operations as average, deviation, sum and others using random noise adding mechanisms. </font><font style="vertical-align: inherit;">Often used the Laplace mechanism. </font><font style="vertical-align: inherit;">The average value search operation is chosen arbitrarily, it allows us to test all operations using the same mechanism. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We calculate the average value of differential privacy using the IBM library (Python):</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> diffprivlib.tools.utils<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dp_mean</span>(<span class="hljs-params">weights, epsilon, upper</span>):</span><font></font>
    dp_mean = diffprivlib.tools.utils.mean(weights, epsilon=epsilon, range=upper)<font></font>
    <span class="hljs-keyword">return</span> dp_mean<font></font>
<font></font>
upper = max(weights)<font></font>
epsilon = <span class="hljs-number">1.0</span><font></font>
dpm = dp_mean(weights, epsilon, upper)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The same with the Google library (C ++):</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">dp_mean</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">list</span>&lt;<span class="hljs-keyword">double</span>&gt; weights, <span class="hljs-keyword">double</span> epsilon, <span class="hljs-keyword">double</span> lower, <span class="hljs-keyword">double</span> upper)</span> </span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;differential_privacy::BoundedMean&lt;<span class="hljs-keyword">double</span>&gt;&gt; mean_algorithm = <font></font>
    differential_privacy::BoundedMean&lt;<span class="hljs-keyword">double</span>&gt;::Builder()<font></font>
    .SetEpsilon(epsilon)<font></font>
    .SetLower(<span class="hljs-number">0.0</span>)<font></font>
    .SetUpper(upper)<font></font>
    .Build()<font></font>
    .ValueOrDie();<font></font>
<font></font>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> weight : weights) {<font></font>
        mean_algorithm-&gt;AddEntry(weight);<font></font>
    }<font></font>
    <span class="hljs-keyword">double</span> privacy_budget = <span class="hljs-number">1.0</span>;
    <span class="hljs-keyword">auto</span> output = mean_algorithm-&gt;PartialResult(privacy_budget).ValueOrDie();
    <span class="hljs-keyword">return</span> differential_privacy::GetValue&lt;<span class="hljs-keyword">double</span>&gt;(output);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Please note that we use an entire privacy budget of 1.0 for every use of the Google Library. </font><font style="vertical-align: inherit;">And the IBM library does not accept this parameter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we calculate the average value of the DP using diffpriv (language R):</font></font><br>
<br>
<pre><code class="plaintext hljs">library(diffpriv)<font></font>
<font></font>
dp_mean &lt;- function(xs, epsilon) {<font></font>
  ## a target function we'd like to run on private data X, releasing the result<font></font>
  target &lt;- function(X) mean(X)<font></font>
<font></font>
  ## target seeks to release a numeric, so we'll use the Laplace mechanism---a<font></font>
  ## standard generic mechanism for privatizing numeric responses<font></font>
  n &lt;- length(xs)<font></font>
  mech &lt;- DPMechLaplace(target = target, sensitivity = 1/n, dims = 1)<font></font>
<font></font>
  r &lt;- releaseResponse(mech, privacyParams = DPParamsEps(epsilon = epsilon), X = xs)<font></font>
  r$response<font></font>
}<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How privacy affects accuracy</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The accuracy of the average value can be measured by simply calculating the difference between the average DP and the actual average. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's see what happens with the accuracy of the average weight when the epsilon changes. </font><font style="vertical-align: inherit;">Since we are adding random noise, we will execute 100 runs and calculate the mean square error to check if the library is generating distorted values. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The result should demonstrate that the error (the difference between the actual average and average DP) is inversely proportional to epsilon. </font><font style="vertical-align: inherit;">If epsilon is large, then the error should be small, and vice versa. </font><font style="vertical-align: inherit;">I tested epsilon values ‚Äã‚Äãranging from e ^ -10 to e ^ 10 (note the logarithmic scale). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The test used a dataset of arbitrary constant size of 10,600 lines.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standard error</font></font></h4><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b09/1bc/2cf/b091bc2cf1bb527a46e29a66eee9972a.png" width="400"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Indeed, the error decreases as epsilon increases. </font><font style="vertical-align: inherit;">Interestingly, the Google library has a standard error limit if the epsilon value is very small. </font><font style="vertical-align: inherit;">In the IBM and diffpriv libraries this is not observed. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The reason for this lies in the source code snippet of the Google library. </font><font style="vertical-align: inherit;">In numerical-mechanisms.h:</font></font><br>
<br>
<pre><code class="cpp hljs"> <span class="hljs-comment">//      . </span>
 <span class="hljs-comment">//   privacy_budget   .  </span>
  <span class="hljs-comment">//     (0, 1],        .</span>
  <span class="hljs-comment">// ,         </span>
  <span class="hljs-comment">//    ,           0.5 ( 0.4,  0.6  ..).</span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">double</span> <span class="hljs-title">AddNoise</span><span class="hljs-params">(<span class="hljs-keyword">double</span> result, <span class="hljs-keyword">double</span> privacy_budget)</span> </span>{
    <span class="hljs-keyword">if</span> (privacy_budget &lt;= <span class="hljs-number">0</span>) {<font></font>
      privacy_budget = <span class="hljs-built_in">std</span>::numeric_limits&lt;<span class="hljs-keyword">double</span>&gt;::min();<font></font>
    }<font></font>
    <span class="hljs-comment">//  snapping-,  </span>
    <span class="hljs-comment">// (2012, "On Significance of the Least Significant Bits For Differential Privacy").</span>
    <span class="hljs-keyword">double</span> noise = distro_-&gt;Sample(<span class="hljs-number">1.0</span> / privacy_budget);
    <span class="hljs-keyword">double</span> noised_result =<font></font>
        Clamp&lt;<span class="hljs-keyword">double</span>&gt;(LowerBound&lt;<span class="hljs-keyword">double</span>&gt;(), UpperBound&lt;<span class="hljs-keyword">double</span>&gt;(), result) +<font></font>
        noise;<font></font>
    <span class="hljs-keyword">double</span> nearest_power = GetNextPowerOfTwo(diversity_ / privacy_budget);
    <span class="hljs-keyword">double</span> remainder =<font></font>
        (nearest_power == <span class="hljs-number">0.0</span>) ? <span class="hljs-number">0.0</span> : <span class="hljs-built_in">fmod</span>(noised_result, nearest_power);
    <span class="hljs-keyword">double</span> rounded_result = noised_result - remainder;
    <span class="hljs-keyword">return</span> ClampDouble&lt;<span class="hljs-keyword">double</span>&gt;(LowerBound&lt;<span class="hljs-keyword">double</span>&gt;(), UpperBound&lt;<span class="hljs-keyword">double</span>&gt;(),<font></font>
                               rounded_result);<font></font>
  }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In bounded-mean.h:</font></font><br>
<br>
<pre><code class="cpp hljs">   <span class="hljs-comment">//  :    .</span>
    <span class="hljs-keyword">double</span> normalized_sum = sum_mechanism_-&gt;AddNoise(<font></font>
        sum - raw_count_ * midpoint_, remaining_budget);<font></font>
    <span class="hljs-keyword">double</span> average = normalized_sum / noised_count + midpoint_;<font></font>
    AddToOutput&lt;<span class="hljs-keyword">double</span>&gt;(&amp;output, Clamp&lt;<span class="hljs-keyword">double</span>&gt;(lower_, upper_, average));
    <span class="hljs-keyword">return</span> output;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When epsilon is very small (approximately less than 0.013), the discrepancy (equal to 1 / epsilon) will be extremely large, and the added noise will be zero. </font><font style="vertical-align: inherit;">Therefore, the library returns an average DP equivalent to the middle of the range used for the average. </font><font style="vertical-align: inherit;">This is explained by the beginning of the red line on the chart. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diffpriv has a smaller mean square error, which means better accuracy compared to two other libraries when using the same epsilon. </font><font style="vertical-align: inherit;">To ensure diffpriv has the same level of privacy as competitors, a lower epsilon value must be applied.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standard deviation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The standard deviation of the error for 100 runs looks like this:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ed/2e5/117/3ed2e51172a8d631efdf659915ce2cd2.png" width="400"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the Google library, with a small epsilon value, the deviation is approximately constant, and then quickly catches up with the IBM library. </font><font style="vertical-align: inherit;">In general, diffpriv has a smaller standard deviation than others.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How dataset size affects accuracy</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We are talking about the effect on the accuracy of the average value of the DP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the risks of a small dataset is that individuals have a big impact on the aggregated value, which is the average. </font><font style="vertical-align: inherit;">Thus, if there is only one person in the dataset, then the perfectly accurate average value will be equal to the exact weight of that person. </font><font style="vertical-align: inherit;">Let's see how libraries help to avoid the disclosure of individual information when resizing datasets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We will use an arbitrary constant value of epsilon 1.0.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standard error</font></font></h4><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6f2/df2/cff/6f2df2cff7b57f8d151399a36e97531b.png" width="400"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As the dataset size decreases, the mean-square error increases, and vice versa. </font><font style="vertical-align: inherit;">It was expected. </font><font style="vertical-align: inherit;">If there are few people, then I want to add more noise to avoid the disclosure of private data. </font><font style="vertical-align: inherit;">The disadvantage is that for small datasets, aggregated values ‚Äã‚Äãcan become completely irrelevant due to very low accuracy. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As for diffpriv, the standard error is much more dependent on changes in the size of the dataset. </font><font style="vertical-align: inherit;">However, the pattern is still noticeable, as in the other two libraries: as the dataset grows, the mean-square error decreases. </font><font style="vertical-align: inherit;">But this is true only for datasets up to about 30,000 lines. </font><font style="vertical-align: inherit;">Then the error changes little. </font><font style="vertical-align: inherit;">Also, pay attention to the anomalous fall in the size of the error with the size of the dataset 17 912.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standard deviation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You might ask how the size of the added noise changed over 100 runs for a given dataset size? </font><font style="vertical-align: inherit;">To answer this, let's plot the standard deviation of the error for 100 runs for each datasate size.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bc4/d7e/859/bc4d7e8596d0fa67692a44310f4bef92.png" width="400"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With small datasets, the variation in error is higher. </font><font style="vertical-align: inherit;">However, the Google Library has a peak with a dataset of size 6. Smaller and larger datasets have less fluctuation. </font><font style="vertical-align: inherit;">The IBM library does not observe this, the graph is closer to linear. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Again, diffpriv generally has a lower standard deviation.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We saw that the measures taken in three different libraries of differential privacy were in line with initial expectations. </font><font style="vertical-align: inherit;">However, different implementations lead to different results, especially in boundary cases, as is the case with very small epsilon values ‚Äã‚Äãand the Google library. </font><font style="vertical-align: inherit;">In practice, this should not interfere, because users will not use very large and very small datasets, as well as very small epsilon values. </font><font style="vertical-align: inherit;">However, in such situations, the library may issue a warning. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The behavior of diffpriv differs markedly from the other two libraries, so we recommend that you carefully choose the epsilon value.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">References</font></font></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Differential Privacy (Wikipedia)</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algorithmic fundamentals of differential privacy</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laplace noise addition estimation to ensure differential privacy of numerical data</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> :  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> :  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">       </a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en496258/index.html">Online holivar: a new format for the exchange of experience. This Saturday</a></li>
<li><a href="../en496260/index.html">Cybersecurity tips for working from home</a></li>
<li><a href="../en496262/index.html">Getting CVE ID</a></li>
<li><a href="../en496266/index.html">Coronavirus: shall we all die?</a></li>
<li><a href="../en496268/index.html">Huawei Enterprise networking products and solutions for enterprise customers in 2020</a></li>
<li><a href="../en496278/index.html">Static Analysis in GCC 10</a></li>
<li><a href="../en496286/index.html">How the new Federation / Eagle spacecraft was calculated. Interview with TESIS</a></li>
<li><a href="../en496290/index.html">Kotlin / Java console utility using args4j library</a></li>
<li><a href="../en496292/index.html">Neuro-stimulation of the spinal cord allows people paralyzed after spinal injuries to walk</a></li>
<li><a href="../en496300/index.html">Asynchronous code in Startup ASP.NET Core: 4 ways to get around GetAwaiter (). GetResult ()</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>