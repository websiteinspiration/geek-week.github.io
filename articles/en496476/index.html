<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏹 👩🏿‍💼 🧔🏾 Push Windows Server onto a low-powered VPS using Windows Server Core 🎚️ 👩‍👧 🧝🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Due to the gluttony of Windows systems, lightweight Linux distributions dominate the VPS environment: Mint, Colibri OS, Debian or Ubuntu, which are de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Push Windows Server onto a low-powered VPS using Windows Server Core</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/496476/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/en/wz/bd/enwzbdc8xxauv-rkoswizdznaic.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Due to the gluttony of Windows systems, lightweight Linux distributions dominate the VPS environment: Mint, Colibri OS, Debian or Ubuntu, which are deprived of the unnecessary, heavyweight desktop environment as part of our tasks. As they say, only the console, only hardcore! And in fact, this is not an exaggeration at all: the same Debian starts on 256 MB of memory and one core with a clock cycle of 1 Ghz, that is, on almost any “stump”. For comfortable work, you will need from 512 MB and a processor a little faster. But what if we tell you that roughly the same can be done on Windows VPS? What does not need to roll heavy Windows Server, which requires three to four hectares of RAM and a minimum of a couple of cores with a clock speed of 1.4 GHz? Just use the Windows Server Core - get rid of the GUI and some services. We will talk about how to do this in an article.</font></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Who is this your Windows Server Core?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is no clear information about what Windows (server) Core is even on the official website of Mikes, or rather, everything is so confusing that you won’t understand right away, but the first references date back to the era of Windows Server 2008. In fact, Windows Core is a workable Windows kernel Server (suddenly!), “Lost weight” by the size of its own GUI and about half of the side services. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The main feature of Windows Core is low hardware requirements and fully console management through PowerShell.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you go to the Microsoft website and check the technical requirements, then to start Windows Server 2016/2019 you will need 2 gigs of RAM and at least one core with a clock speed of 1.4 GHz. But we all understand that with this configuration we can only expect the system to start, but certainly not the comfortable operation of our OS. For this reason, Windows Server is usually allocated more memory and at least 2 cores / 4 threads from the processor, if they do not provide it with an expensive physical machine on some Xeon, instead of a cheap virtual machine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the same time, the core of the server system itself requires only 512 MB of memory, and those processor resources that were consumed by the GUI just to simply render on the screen and keep their numerous services running can be used for something more useful.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is a comparison of supported out-of-the-box Windows Core services and full-fledged Windows Server from the official Microsoft website:</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">application</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">server core</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">server with </font></font></strong><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desktop experience</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Command prompt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows PowerShell / Microsoft .NET</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perfmon.exe</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windbg (GUI)</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">supported</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resmon.exe</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regedit</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fsutil.exe</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disksnapshot.exe</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diskpart.exe</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diskmgmt.msc</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Devmgmt.msc</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server manager</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mmc.exe</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eventvwr</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wevtutil (Event queries)</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Services.msc</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Control panel</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Update (GUI)</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows explorer</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Taskbar</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Taskbar notifications</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Taskmgr</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet Explorer or Edge</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Built-in help system</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 10 Shell</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Media Player</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Powerhell</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerShell ISE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerShell IME</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mstsc.exe</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remote Desktop Services</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hyper-V Manager</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, a lot has been cut out of Windows Core. </font><font style="vertical-align: inherit;">Services and processes associated with the GUI of the system went under the knife, as well as any "garbage" that definitely would not be needed on our console virtual machine, for example, Windows Media Player.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Almost like Linux but not him</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I really want to compare Windows Server Core with Linux distributions, but in reality this is not entirely correct. Yes, these systems are similar to each other in terms of reduced resource consumption due to the abandonment of the GUI and many side services, but in terms of operation and some assembly approaches, it is still Windows, and not a unix system. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The simplest example is that with the help of manual assembly of the Linux kernel and the subsequent installation of packages and services, even the lightest Linux distribution can be turned into something heavy and similar to a Swiss knife (I really want to play jokey about Python and insert a picture from the series “If Programming Languages ​​Were Weapons ”, but we will not). In Windows Core, this freedom is much less, because we, nevertheless, are dealing with a Microsoft product.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windows Server Core comes with a ready-made assembly, the default configuration of which can be estimated from the table above. If you need something from the list of unsupported, you will have to add the missing elements online through the console. However, do not forget about Feature on demand and the ability to deflate components as .cab files, which you can then add to the assembly before installation. But this scenario does not work if you already found in the process that you are missing one of the cut services.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But what distinguishes the Core version from the full one is the ability to update the system and add services without stopping work. Windows Core supports rolling hot packages without reboot. As a result, based on practical observations: a machine running Windows Core needs to be restarted ~ 6 times less often than running Windows Server, that is, once every six months, and not once a month.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A nice bonus for administrators is that if you use the system as intended - through the console, without RDP - and do not make a second Windows Server out of it, then it becomes extremely secure compared to the full version. </font><font style="vertical-align: inherit;">After all, most of the vulnerabilities in Windows Server fall on RDP and the actions of a user who, through this same RDP, does what should not. </font><font style="vertical-align: inherit;">This is similar to the story with Henry Ford and his relation to the color of the car: "Any customer can have a car painted any color that he wants so long as it is </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">black</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ." </font><font style="vertical-align: inherit;">So it is with the system: the user can communicate in any way with the system, the main thing is that he does this through the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">console</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Install and manage Windows Server 2019 Core</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We mentioned earlier that Windows Core is actually a Windows Server without a GUI wrapper. That is, you can use almost any version of Windows Server as the core version, that is, abandon the GUI. For products of the Windows Server 2019 family, this is 3 of 4 server builds: the core mode is available for Windows Server 2019 Standard Edition, Windows Server 2019 Datacenter and Hyper-V Server 2019, that is, only Windows Server 2019 Essentials falls out of this list. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the same time, the installation package for Windows Server Core does not need to be searched. In the standard installer from Microsoft, the core version is offered literally by default, when you must manually select the version with the GUI:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/y6/6w/iw/y66wiwkl8oyl69hozecnlfu_km8.png" alt="image"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are actually more options for managing the system than the one mentioned by PowerShell, which is offered by the manufacturer by default. </font><font style="vertical-align: inherit;">There are at least five different ways to manage a virtual machine on Windows Server Core:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remote PowerShell</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remote Server Administration Tools (RSAT);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Admin Center</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sconfig;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server Manager</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first three positions are of most interest: standard PowerShell, RSAT and Windows Admin Center. </font><font style="vertical-align: inherit;">However, it is important to understand that when we gain the benefits of one of the tools, we also get the limitations imposed by it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We will not describe the capabilities of the console; PowerShell is PowerShell, with its obvious pros and cons. </font><font style="vertical-align: inherit;">RSAT and WAC are a little more complicated.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WAC gives you access to important system controls such as registry editing and disk and device management. </font><font style="vertical-align: inherit;">RSAT in the first case works only in the viewing mode and will not allow any changes to be made, and for managing disks and physical devices of Remote Server Administration Tools you need a GUI, which is not about our case. </font><font style="vertical-align: inherit;">In general, RSAT cannot work with files and, accordingly, updates, installing / uninstalling programs in editing the registry.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ System Management</font></font></font></h3><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><code>&nbsp;<br>
</code></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wac</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSAT</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Component management</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registry Editor</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Network management</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Event Viewer</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shared Folders</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drive management</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Only for servers with a GUI</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Task Scheduler</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Device management</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Only for servers with a GUI</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">File management</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">user management</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Group management</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Certificate management</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Updates</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uninstall programs</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">System monitor</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the other hand, RSAT gives us full control over the roles on the machine, when, like the Windows Admin Center, it can literally do nothing. </font><font style="vertical-align: inherit;">Here is a comparison of the capabilities of RSAT and WAC in this aspect, for clarity:</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Management roles</font></font></font></h3><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><code>&nbsp;<br>
</code></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wac</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSAT</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advanced thread protection</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TEXT</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows defender</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TEXT</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Containers</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TEXT</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AD Administrative Center</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TEXT</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AD Domain and Trusts</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AD sites and services</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DHCP</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TEXT</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DNS</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TEXT</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DFS Manager</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPO Manager</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IIS Manager</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">That is, it is already clear that if you abandon the GUI and PowerShell in favor of other controls, getting rid of using some kind of mono tool will not work: for full administration on all fronts, we need at least a bunch of RSAT and WAC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It should be remembered that the use of WAC will have to pay 150-180 megabytes of RAM. When connected, the Windows Admin Center creates 3-4 sessions on the server side, which are not killed even when the tool is disconnected from the virtual machine. WAC also does not work with older versions of PowerShell, so you will need a minimum of PowerShell 5.0. All this runs counter to our paradigm of austerity of resources, but you have to pay for comfort. In our case, by RAM.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another option for managing Server Core is installing third-party GUIs so as not to drag those tons of garbage that come in a full assembly along with the interface. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this case, we have two options: roll out the original Explorer to the system or use Explorer ++. As an alternative to the latter, any file manager is suitable: Total Commander, FAR Manager, Double Commander and so on. The latter is preferable if the memory saving is critical for you. You can add Explorer ++ or any other file manager by creating a network folder and launching it through the console or scheduler. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installing a full-fledged Explorer will give us more options in terms of working with software equipped with a UI. For this we </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will have to contact</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server Core App Compatibility Feature on Demand (FOD) which will return to the system MMC, Eventvwr, PerfMon, Resmon, Explorer.exe and even Powershell ISE. However, you will have to pay for this, as is the case with WAC: we will irretrievably lose about 150-200 megabytes of RAM, which merrily devour explorer.exe and other services. Even if the machine does not have an active user.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/af/fn/6o/affn6ower9-il8sc0k5l4__dhxq.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/di/to/on/ditoonswove2exiwjlfbzj0x-pk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is how the memory consumption of the system on machines with and without the native Explorer package looks like. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This raises the logical question: why all these dances with PowerShell, FOD, file managers, if any step left-right leads to an increase in RAM consumption? Why cover yourself with a bunch of tools and shy from side to side to ensure comfortable work on Windows Server Core, when you can just roll Windows Server 2016/2019 and live like a white person? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are several reasons for using Server Core. First: the current is almost half the memory consumption. If you remember, this condition was the basis of our article at the very beginning. For comparison, the memory consumption of Windows Server 2019, compare with the screenshots just above:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tt/r2/jo/ttr2joynrl-h2nris2d-cdlypps.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And so, 1146 MB of consumed memory instead of 655 MB on Core.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assuming you don’t need WAC and you use Explorer ++ instead of the original Explorer, you </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will still win almost half a hectare</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on every virtual machine running Windows Server. </font><font style="vertical-align: inherit;">If there is only one virtual machine, then the growth is insignificant, but if there are five of them? </font><font style="vertical-align: inherit;">Here the presence of a GUI matters, especially if you do not need it.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secondly, any dancing around Windows Server Core will not lead you to the fight against the main problem of operating Windows Server - RDP and its safety (more precisely, its complete absence). </font><font style="vertical-align: inherit;">Windows Core even in the form of FOD, RSAT and WAC is still a server without RDP, that is, it is not subject to 95% of existing attacks.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the balance</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, Windows Core is only slightly “fatter” than any stock Linux distribution, but much more functional. </font><font style="vertical-align: inherit;">If you need freeing up resources and you are ready to work with the console, WAC and RSAT, use file managers instead of a full GUI, then Core is worth paying attention to. </font><font style="vertical-align: inherit;">Moreover, it will not be possible to pay extra for a full-fledged Windows, and spend the money saved on the upset of your </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> by adding, for example, RAM. </font><font style="vertical-align: inherit;">For convenience, we have added Windows Server Core to our </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">marketplace</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en496456/index.html">Overview of domestic microchips complying with 719 regulation</a></li>
<li><a href="../en496458/index.html">Digitalization of drug turnover using the case of the Planet Health chain of pharmacies as an example</a></li>
<li><a href="../en496460/index.html">Unity Addressables: always enough memory</a></li>
<li><a href="../en496466/index.html">Any fast enough light source has a red Doppler shift</a></li>
<li><a href="../en496472/index.html">10 interesting repositories on GitHub, useful to any developer</a></li>
<li><a href="../en496480/index.html">The sound of future silence</a></li>
<li><a href="../en496482/index.html">The development of informed leadership for team management</a></li>
<li><a href="../en496484/index.html">Selection of the importance of features for k-nearest neighbors (well, or other hyperparameters) by descent similar to gradient</a></li>
<li><a href="../en496486/index.html">Opinion: Spamhaus - online censorship or clean web fighters?</a></li>
<li><a href="../en496488/index.html">IaaS providers fight against attacks on BGP protocol</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>