<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤²ğŸ¼ ğŸ‘©ğŸ¾â€ğŸš’ ğŸ’¶ Road to Hell JavaScript-AbhÃ¤ngigkeiten ğŸ­ ğŸ¥¤ ğŸ›¬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jedes JavaScript-Projekt beginnt mit guten Absichten, nÃ¤mlich dass sich seine Entwickler versprechen, wÃ¤hrend seiner Entwicklung nicht zu viele NPM-Pa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Road to Hell JavaScript-AbhÃ¤ngigkeiten</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/499668/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jedes JavaScript-Projekt beginnt mit guten Absichten, nÃ¤mlich dass sich seine Entwickler versprechen, wÃ¤hrend seiner Entwicklung nicht zu viele NPM-Pakete zu verwenden. Aber selbst wenn die Entwickler erhebliche Anstrengungen unternehmen, um dieses Versprechen einzuhalten, dringen NPM-Pakete nach und nach in ihre Projekte ein. Die DateigrÃ¶ÃŸe </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wÃ¤chst mit der Zeit. Und seit der </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation von AbhÃ¤ngigkeiten tritt ein echtes Entsetzen auf, das sich in HinzufÃ¼gungen und LÃ¶schungen von Paketen Ã¤uÃŸert, was sich besonders bei der nÃ¤chsten PR bemerkbar macht ... </font><font style="vertical-align: inherit;">
"Alles ist in Ordnung", sagt der Teamleiter. Der Rest des Teams nickt zustimmend. Was sonst zu tun? Wir alle genieÃŸen die Tatsache, dass das JavaScript-Ã–kosystem lebendig und gut ist. Wir mÃ¼ssen das Rad nicht jedes Mal neu erfinden und versuchen, die Probleme zu lÃ¶sen, die bereits von der Open Source-Community gelÃ¶st wurden.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/be/cf/ky/becfkyhkcfavrlygimyyrliz9t4.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angenommen, Sie erstellen ein Blog und mÃ¶chten Gatsby.js verwenden. </font><font style="vertical-align: inherit;">Versuchen Sie, diesen Site-Generator basierend auf Ihrem Projekt hinzuzufÃ¼gen. </font><font style="vertical-align: inherit;">Nun herzlichen GlÃ¼ckwunsch. </font><font style="vertical-align: inherit;">Ihr Projekt hatte gerade 19.000 zusÃ¤tzliche AbhÃ¤ngigkeiten. </font><font style="vertical-align: inherit;">Es ist in Ordnung? </font><font style="vertical-align: inherit;">Wie komplex kann ein JavaScript-AbhÃ¤ngigkeitsbaum werden? </font><font style="vertical-align: inherit;">Wie wird ein AbhÃ¤ngigkeitsbaum zur HÃ¶lle? </font><font style="vertical-align: inherit;">Lass es uns herausfinden.</font></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist ein JavaScript-Paket?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NPM (Node Package Manager, Node Package Manager) speichert die grÃ¶ÃŸte Paketregistrierung der Welt. </font><font style="vertical-align: inherit;">Dies sind JavaScript-Pakete. </font><font style="vertical-align: inherit;">NPM ist mehr als RubyGems, PyPi und Maven zusammen. </font><font style="vertical-align: inherit;">Diese Schlussfolgerung kann auf der Grundlage der Analyse der Daten des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module Counts-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Projekts gezogen werden </font><font style="vertical-align: inherit;">, das die Anzahl der Pakete in populÃ¤ren Registern Ã¼berwacht.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/259/d83/158/259d831584b0a9a5d1fd6226e3f799b0.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daten zur Anzahl der Pakete in gÃ¤ngigen Registern</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sie kÃ¶nnten denken, dass in dieser Grafik sehr groÃŸe Mengen an Code dargestellt werden. </font><font style="vertical-align: inherit;">Wie es ist. </font><font style="vertical-align: inherit;">Um ein Projekt in ein NPM-Paket umzuwandeln, muss dieses Paket eine Datei enthalten</font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ein solches Paket kann an die NPM-Registrierung gesendet werden.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist package.json?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier sind die Aufgaben, die es lÃ¶st </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es listet die Pakete auf, von denen Ihr Projekt abhÃ¤ngt (dies ist eine Liste der ProjektabhÃ¤ngigkeiten).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Darin werden unter Verwendung der Regeln der semantischen Versionierung Versionen von AbhÃ¤ngigkeitspaketen festgelegt, die Ihr Projekt verwenden kann.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie kÃ¶nnen die Umgebung reproduzieren, die fÃ¼r das Funktionieren des Pakets erforderlich ist, und vereinfachen dadurch die Ãœbertragung des Projekts an andere Entwickler.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Datei </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kann als eine </font></font><code>README</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit Steroiden gepumpte </font><font style="vertical-align: inherit;">Datei </font><font style="vertical-align: inherit;">betrachtet werden </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Hier kÃ¶nnen Sie die AbhÃ¤ngigkeiten Ihres Pakets beschreiben, hier kÃ¶nnen Sie Skripte schreiben, die wÃ¤hrend der Montage und des Testens des Projekts ausgefÃ¼hrt werden. </font><font style="vertical-align: inherit;">Dieselbe Datei enthÃ¤lt Informationen zur vom Entwickler angegebenen Projektversion und eine Beschreibung des Projekts. </font><font style="vertical-align: inherit;">Wir sind besonders an der MÃ¶glichkeit interessiert </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ProjektabhÃ¤ngigkeiten anzugeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielleicht sieht die Tatsache, dass die ProjektabhÃ¤ngigkeiten in dieser Datei angegeben sind, etwas alarmierend aus. </font><font style="vertical-align: inherit;">Stellen Sie sich vor, es gibt ein Paket, das von einem anderen Paket abhÃ¤ngt, und dieses andere Paket hÃ¤ngt von einem anderen Paket ab. </font><font style="vertical-align: inherit;">Eine solche AbhÃ¤ngigkeitskette kann beliebig lang sein. </font><font style="vertical-align: inherit;">Aus diesem Grund bedeutet die Installation des einzigen Pakets, Gatsby.js, dass das Projekt mit 19.000 zusÃ¤tzlichen AbhÃ¤ngigkeiten ausgestattet wird.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AbhÃ¤ngigkeitstypen in package.json</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um besser zu verstehen, wie ProjektabhÃ¤ngigkeitslisten im Laufe der Zeit wachsen, sprechen wir Ã¼ber die verschiedenen Arten von AbhÃ¤ngigkeiten, die ein Projekt haben kann. </font><font style="vertical-align: inherit;">Es </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kÃ¶nnen </font><font style="vertical-align: inherit;">nÃ¤mlich die </font><font style="vertical-align: inherit;">folgenden Abschnitte gefunden werden, die verschiedene AbhÃ¤ngigkeiten beschreiben:</font></font><br>
<br>
<ul>
<li><code>dependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dies sind gewÃ¶hnliche AbhÃ¤ngigkeiten, deren FunktionalitÃ¤t im Projekt verwendet wird und auf die Ã¼ber den Code zugegriffen wird.</font></font></li>
<li><code>devDependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Dies sind EntwicklungsabhÃ¤ngigkeiten. </font><font style="vertical-align: inherit;">Zum Beispiel die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">schÃ¶nere</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bibliothek, </font><font style="vertical-align: inherit;">die zum Formatieren von Code verwendet wird.</font></font></li>
<li><code>peerDependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Wenn AbhÃ¤ngigkeiten in diesen Abschnitt geschrieben werden, informiert der Paketentwickler den Installateur darÃ¼ber, dass er eine bestimmte Version des in diesem Abschnitt angegebenen Pakets benÃ¶tigt.</font></font></li>
<li><code>optionalDependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Sie listen optionale AbhÃ¤ngigkeiten auf, z. B. die UnfÃ¤higkeit zur Installation, die den Installationsprozess des Pakets nicht verletzt.</font></font></li>
<li><code>bundledDependencies</code> â€”    ,    .     ,    NPM,    ,             .</li>
</ul><br>
<h2><font color="#3AC1EF">   package-lock.json</font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir alle wissen, dass die Datei </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im Verlauf der Projektarbeit stÃ¤ndig geÃ¤ndert wird. Etwas wird daraus entfernt, etwas wird hinzugefÃ¼gt. Dies macht sich insbesondere beim Anzeigen von PR mit einer aktualisierten Version dieser Datei bemerkbar. Wir halten es oft fÃ¼r selbstverstÃ¤ndlich. Eine Datei wird </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">automatisch generiert, wenn sich eine Datei </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder ein Ordner </font><font style="vertical-align: inherit;">Ã¤ndert </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Auf diese Weise kÃ¶nnen Sie den Inhalt des AbhÃ¤ngigkeitsbaums genau so verwalten, wie er bei der Installation der ProjektabhÃ¤ngigkeiten war. Auf diese Weise kann bei der Installation des Projekts der AbhÃ¤ngigkeitsbaum reproduziert werden. Dies lÃ¶st das Problem, unterschiedliche Versionen desselben Pakets von unterschiedlichen Entwicklern zu haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sich ein Projekt vor, dessen AbhÃ¤ngigkeiten React enthalten. Der entsprechende Eintrag ist verfÃ¼gbar unter </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Wenn Sie sich die Datei ansehen</font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Von diesem Projekt kÃ¶nnen Sie dann Folgendes sehen:</font></font><br>
<br>
<pre><code class="javascript hljs">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"react"</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"version"</span>: <span class="hljs-string">"16.13.0"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"resolved"</span>: <span class="hljs-string">"https://registry.npmjs.org/react/-/react-16.13.0.tgz"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"integrity"</span>: <span class="hljs-string">"sha512-TSavZz2iSLkq5/oiE7gnFzmURKZMltmi193rm5HEoUDAXpzT9Kzw6oNZnGoai/4+fUnm7FqS5dwgUL34TujcWQ=="</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"requires"</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"loose-envify"</span>: <span class="hljs-string">"^1.1.0"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"object-assign"</span>: <span class="hljs-string">"^4.1.1"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"prop-types"</span>: <span class="hljs-string">"^15.6.2"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Datei </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist eine groÃŸe Liste von ProjektabhÃ¤ngigkeiten. </font><font style="vertical-align: inherit;">Hier finden Sie die AbhÃ¤ngigkeitsversionen, Pfade (URIs) zu den Modulen, Hashes, mit denen die IntegritÃ¤t des Moduls Ã¼berprÃ¼ft wird, und die von diesem Modul benÃ¶tigten Pakete. </font><font style="vertical-align: inherit;">Wenn Sie diese Datei lesen, finden Sie Aufzeichnungen aller Pakete, die React benÃ¶tigt. </font><font style="vertical-align: inherit;">Hier liegt die wahre HÃ¶lle der AbhÃ¤ngigkeiten. </font><font style="vertical-align: inherit;">Hier wird alles beschrieben, was das Projekt benÃ¶tigt.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grundlegendes zu Gatsby.js-AbhÃ¤ngigkeiten</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie kommt es, dass wir, nachdem wir nur eine AbhÃ¤ngigkeit hergestellt haben, dem Projekt bis zu 19.000 AbhÃ¤ngigkeiten hinzufÃ¼gen? </font><font style="vertical-align: inherit;">Es geht um AbhÃ¤ngigkeiten. </font><font style="vertical-align: inherit;">Deshalb haben wir, was wir haben:</font></font><br>
<br>
<pre><code class="bash hljs">$ npm install --save gatsby<font></font>
<font></font>
...<font></font>
<font></font>
+ gatsby@2.19.28<font></font>
added 1 package from 1 contributor, removed 9 packages, updated 10 packages and audited 19001 packages <span class="hljs-keyword">in</span> 40.382s
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie nachsehen </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, finden Sie dort nur eine AbhÃ¤ngigkeit. Aber wenn Sie es sich ansehen </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, stellt sich heraus, dass vor uns ein fast 14-Kilobyte-Monster steht. Eine detailliertere Antwort darauf, was all diese Codezeilen bedeuten </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, finden Sie in der Datei </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repository von Gatsby.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es gibt viele direkte AbhÃ¤ngigkeiten, nÃ¤mlich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nach npm-Berechnungen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 132. Wenn jede dieser AbhÃ¤ngigkeiten mindestens eine weitere AbhÃ¤ngigkeit aufweist, verdoppelt sich die Gesamtzahl der ProjektabhÃ¤ngigkeiten - und es gibt 264 AbhÃ¤ngigkeiten. In der realen Welt ist das natÃ¼rlich nicht so. Jede direkte ProjektabhÃ¤ngigkeit hat mehr als eine inhÃ¤rente AbhÃ¤ngigkeit. Infolgedessen ist die Liste der ProjektabhÃ¤ngigkeiten sehr lang.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir interessieren uns beispielsweise dafÃ¼r, wie oft die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lodash-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bibliothek als AbhÃ¤ngigkeit fÃ¼r andere Pakete verwendet wird </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">$ npm ls lodash<font></font>
example-js-package@1.0.0<font></font>
â””â”€â”¬ gatsby@2.19.28<font></font>
&nbsp;&nbsp;â”œâ”€â”¬ @babel/core@7.8.6<font></font>
&nbsp;&nbsp;â”‚ â”œâ”€â”¬ @babel/generator@7.8.6<font></font>
&nbsp;&nbsp;â”‚ â”‚ â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”‚ â”œâ”€â”¬ @babel/types@7.8.6<font></font>
&nbsp;&nbsp;â”‚ â”‚ â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”‚ â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”œâ”€â”¬ @babel/traverse@7.8.6<font></font>
&nbsp;&nbsp;â”‚ â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”œâ”€â”¬ @typescript-eslint/parser@2.22.0<font></font>
&nbsp;&nbsp;â”‚ â””â”€â”¬ @typescript-eslint/typescript-estree@2.22.0<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”œâ”€â”¬ babel-preset-gatsby@0.2.29<font></font>
&nbsp;&nbsp;â”‚ â””â”€â”¬ @babel/preset-env@7.8.6<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”œâ”€â”¬ @babel/plugin-transform-block-scoping@7.8.3<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”‚ â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”œâ”€â”¬ @babel/plugin-transform-classes@7.8.6<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”‚ â””â”€â”¬ @babel/helper-define-map@7.8.3<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”‚ &nbsp; â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”œâ”€â”¬ @babel/plugin-transform-modules-amd@7.8.3<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”‚ â””â”€â”¬ @babel/helper-module-transforms@7.8.6<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”‚ &nbsp; â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â””â”€â”¬ @babel/plugin-transform-sticky-regex@7.8.3<font></font>
&nbsp;&nbsp;â”‚ &nbsp; &nbsp; â””â”€â”¬ @babel/helper-regex@7.8.3<font></font>
&nbsp;&nbsp;â”‚ &nbsp; &nbsp; &nbsp; â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GlÃ¼cklicherweise werden die meisten dieser AbhÃ¤ngigkeiten durch dieselbe Version von lodash dargestellt. </font><font style="vertical-align: inherit;">Bei diesem Ansatz gibt </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es nur einen Ordner fÃ¼r die lodash-Bibliothek. </font><font style="vertical-align: inherit;">Dies ist normalerweise nicht ganz der Fall. </font><font style="vertical-align: inherit;">Manchmal benÃ¶tigen unterschiedliche Pakete unterschiedliche Versionen desselben Pakets. </font><font style="vertical-align: inherit;">Aus diesem Grund tauchten viele Witze Ã¼ber die enorme GrÃ¶ÃŸe des Ordners auf </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In unserem Fall ist jedoch nicht alles so schlecht:</font></font><br>
<br>
<pre><code class="bash hljs">$ du -sh node_modules<font></font>
200M&nbsp; &nbsp; node_modules<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
200 Megabyte sind nicht so schlecht. </font><font style="vertical-align: inherit;">Ich habe gesehen, wie leicht die GrÃ¶ÃŸe dieses Ordners 700 MB erreicht. </font><font style="vertical-align: inherit;">Wenn Sie erfahren mÃ¶chten, welche Module am meisten Platz beanspruchen, kÃ¶nnen Sie den folgenden Befehl ausfÃ¼hren:</font></font><br>
<br>
<pre><code class="bash hljs">$ du -sh ./node_modules/* | sort -nr | grep <span class="hljs-string">'\dM.*'</span><font></font>
&nbsp;17M&nbsp; &nbsp; ./node_modules/rxjs<font></font>
8.4M&nbsp; &nbsp; ./node_modules/@types<font></font>
7.4M&nbsp; &nbsp; ./node_modules/core-js<font></font>
6.8M&nbsp; &nbsp; ./node_modules/@babel<font></font>
5.4M&nbsp; &nbsp; ./node_modules/gatsby<font></font>
5.2M&nbsp; &nbsp; ./node_modules/eslint<font></font>
4.8M&nbsp; &nbsp; ./node_modules/lodash<font></font>
3.6M&nbsp; &nbsp; ./node_modules/graphql-compose<font></font>
3.6M&nbsp; &nbsp; ./node_modules/@typescript-eslint<font></font>
3.5M&nbsp; &nbsp; ./node_modules/webpack<font></font>
3.4M&nbsp; &nbsp; ./node_modules/moment<font></font>
3.3M&nbsp; &nbsp; ./node_modules/webpack-dev-server<font></font>
3.2M&nbsp; &nbsp; ./node_modules/caniuse-lite<font></font>
3.1M&nbsp; &nbsp; ./node_modules/graphql<font></font>
...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ja, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rxjs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein heimtÃ¼ckisches Paket. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist ein einfacher Befehl, mit dem Sie die GrÃ¶ÃŸe des Ordners reduzieren </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und seine Struktur vereinfachen kÃ¶nnen:</font></font><br>
<br>
<pre><code class="bash hljs">$ npm dedup<font></font>
moved 1 package and audited 18701 packages <span class="hljs-keyword">in</span> 4.622s<font></font>
<font></font>
51 packages are looking <span class="hljs-keyword">for</span> funding<font></font>
&nbsp;&nbsp;run `npm fund` <span class="hljs-keyword">for</span> details<font></font>
<font></font>
found 0 vulnerabilities<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WÃ¤hrend der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deduplizierung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> versucht npm, die Struktur des AbhÃ¤ngigkeitsbaums zu vereinfachen, indem die von anderen AbhÃ¤ngigkeiten verwendeten AbhÃ¤ngigkeiten ermittelt und verschoben werden, damit sie gemeinsam genutzt werden kÃ¶nnen. Dies gilt fÃ¼r unser lodash-Beispiel. Viele Pakete werden daher verwendet </font></font><code>lodash @4.17.15</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, um ihre FunktionsfÃ¤higkeit sicherzustellen. Es reicht aus, diese Version der Bibliothek nur einmal zu installieren. Dies ist natÃ¼rlich die Situation, in die wir von Anfang an geraten, nur indem wir AbhÃ¤ngigkeiten herstellen. Wenn Sie wÃ¤hrend der Arbeit an einem Projekt </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neue AbhÃ¤ngigkeiten hinzufÃ¼gen, wird manchmal empfohlen, sich an das Team zu erinnern </font></font><code>npm dedup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Wenn Sie den </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Garnpaket-</font></a><font style="vertical-align: inherit;"> Manager verwenden, sieht ein Ã¤hnlicher Befehl wie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Garn-Deduplizierung aus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">TatsÃ¤chlich besteht jedoch keine Notwendigkeit dafÃ¼r, da die AbhÃ¤ngigkeitsoptimierung automatisch ausgefÃ¼hrt wird, wenn der Befehl ausgefÃ¼hrt wird </font></font><code>yarn install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AbhÃ¤ngigkeitsvisualisierung</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Interessiert an einer grafischen Darstellung der AbhÃ¤ngigkeiten Ihres Projekts? </font><font style="vertical-align: inherit;">In diesem Fall kÃ¶nnen Sie eine solche PrÃ¤sentation mit speziellen Tools erstellen. </font><font style="vertical-align: inherit;">Betrachten wir einige davon. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das folgende Ergebnis der AbhÃ¤ngigkeitsvisualisierung wurde mit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">npm.anvaka.com/ erhalten</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dfb/f5d/373/dfbf5d37377bd62f4ea5cf422de62c74.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AbhÃ¤ngigkeitsvisualisierung mit npm.anvaka.com.</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Hier sehen Sie die AbhÃ¤ngigkeiten der AbhÃ¤ngigkeiten des Gatsby.js-Projektpakets. Das Ergebnis Ã¤hnelt einem riesigen Web. Das Gatsby.js-Projekt hat so viele AbhÃ¤ngigkeiten, dass dieses "Web" meinen Browser fast "hÃ¤ngen" lieÃŸ.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nun</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , wenn Sie interessiert sind, einen Link zu diesem Diagramm. Es kann in 3D-Form dargestellt werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist eine Visualisierung, die mit</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> npm.broofa.com erstellt wurde</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/285/cd6/c52/285cd6c52a00d9e87a7bc2095df6023f.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Fragment einer AbhÃ¤ngigkeitsvisualisierung, die mit npm.broofa.com erstellt wurde.</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dies Ã¤hnelt einem Flussdiagramm. </font><font style="vertical-align: inherit;">FÃ¼r Gatsby.js stellt sich heraus, dass sie sehr kompliziert ist. </font><font style="vertical-align: inherit;">Sie kÃ¶nnen es</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ansehen</font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Schaltungselemente kÃ¶nnen basierend auf SchÃ¤tzungen von</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> npms.io eingefÃ¤rbt werden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sie kÃ¶nnen Ihre eigene Datei auf die Site hochladen</font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dem Tool "</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Package Phobia"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kÃ¶nnen Sie herausfinden, wie viel Speicherplatz benÃ¶tigt wird, bevor Sie ein Paket installieren.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/25c/d26/ae4/25cd26ae4fc708f0c6900c5ad3a5dead.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit Package Phobia empfangene Paketinformationen</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Hier erfahren Sie, wie groÃŸ das verÃ¶ffentlichte Paket ist und wie viel Speicherplatz nach der Installation benÃ¶tigt wird.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit: Mit groÃŸer Kraft geht groÃŸe Verantwortung einher</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Ende mÃ¶chte ich sagen, dass JavaScript und NPM groÃŸartige Werkzeuge sind. </font><font style="vertical-align: inherit;">Das Gute ist, dass moderne Entwickler die MÃ¶glichkeit haben, eine Vielzahl von AbhÃ¤ngigkeiten zu nutzen. </font><font style="vertical-align: inherit;">Das AusfÃ¼hren des Befehls </font></font><code>npm install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, um sich das Schreiben einiger Codezeilen zu ersparen, ist so einfach, dass wir manchmal die Konsequenzen vergessen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem Sie bis zu diesem Punkt gelesen haben, sollten Sie die Funktionen der AbhÃ¤ngigkeitsbaumstruktur des npm-Projekts besser verstehen. </font><font style="vertical-align: inherit;">Wenn Sie dem Projekt eine Bibliothek hinzufÃ¼gen, die sehr groÃŸ ist, oder wenn Sie nur die AbhÃ¤ngigkeiten Ihres Projekts untersuchen, kÃ¶nnen Sie immer das nutzen, was wir hier besprochen haben, und die AbhÃ¤ngigkeiten analysieren. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liebe Leser!</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MÃ¶chten Sie in Ihren npm-Projekten so wenig AbhÃ¤ngigkeiten wie mÃ¶glich verwenden?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/a_/bs/aa/a_bsaactpbr8fltzymtkhqbw1d4.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de499656/index.html">Simulation des PID-Temperaturreglers</a></li>
<li><a href="../de499658/index.html">Ein Arbeiter statt eines Testers? Lohnt es sich, 2020 Selen zu studieren?</a></li>
<li><a href="../de499662/index.html">Root-of-Trust fÃ¼r IoT und andere IoT-Sicherheitstrends</a></li>
<li><a href="../de499664/index.html">Portieren von APIs nach TypeScript als ProblemlÃ¶ser</a></li>
<li><a href="../de499666/index.html">PEP 572 (ZuweisungsausdrÃ¼cke in Python 3.8)</a></li>
<li><a href="../de499670/index.html">Ğ¯ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ¶Ñƒ Ğ½Ğ° JavaScript</a></li>
<li><a href="../de499674/index.html">Ein weiterer Schritt zu optischen Computern</a></li>
<li><a href="../de499676/index.html">Ãœber 90 nÃ¼tzliche Tools fÃ¼r Kubernetes: Bereitstellung, Verwaltung, Ãœberwachung, Sicherheit und mehr</a></li>
<li><a href="../de499680/index.html">Kubernetes lernen: Basic 14.-16. Mai, Advanced 18.-20. Mai</a></li>
<li><a href="../de499682/index.html">Was kann ich beim Hackathon auÃŸer einem Geldpreis bekommen?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>