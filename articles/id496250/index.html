<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’¿ ğŸ‘ˆğŸ¿ ğŸ˜¬ Bagaimana kode aneh menyembunyikan kesalahan? Analisis TensorFlow.NET ğŸ“« ğŸ‘©â€âœˆï¸ ğŸš²</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Analisis statis adalah alat yang sangat berguna untuk pengembang mana pun, karena membantu menemukan dalam waktu tidak hanya kesalahan, tetapi juga po...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Bagaimana kode aneh menyembunyikan kesalahan? Analisis TensorFlow.NET</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/496250/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/765/bb4/d84/765bb4d84187d986358a301bbeed082f.png" alt="TensorFlow.NET dan PVS-Studio"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Analisis statis adalah alat yang sangat berguna untuk pengembang mana pun, karena membantu menemukan dalam waktu tidak hanya kesalahan, tetapi juga potongan kode yang mencurigakan dan aneh yang dapat menyebabkan kebingungan bagi programmer yang harus bekerja dengannya di masa depan. Gagasan ini akan ditunjukkan oleh analisis proyek C # TensorFlow.NET terbuka, yang sedang dikembangkan untuk bekerja dengan perpustakaan pembelajaran mesin TensorFlow yang populer.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nama saya Nikita Lipilin. </font><font style="vertical-align: inherit;">Beberapa waktu lalu saya bergabung dengan departemen programer C # di PVS-Studio. </font><font style="vertical-align: inherit;">Secara tradisional, semua pendatang baru di tim menulis artikel yang membahas hasil pemeriksaan berbagai proyek terbuka menggunakan analisa statis PVS-Studio. </font><font style="vertical-align: inherit;">Artikel semacam itu membantu karyawan baru untuk mengenal produk dengan lebih baik, dan pada saat yang sama memberikan manfaat tambahan dalam hal mempopulerkan metodologi analisis statis. </font><font style="vertical-align: inherit;">Saya menyarankan agar Anda membiasakan diri dengan karya pertama saya pada topik analisis proyek terbuka.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengantar</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berbagai kemungkinan kesalahan dalam kode program luar biasa. Beberapa dari mereka mengungkapkan diri mereka segera, setelah pemeriksaan permukaan aplikasi yang dibuat, yang lain mungkin sulit untuk diperhatikan bahkan ketika melakukan peninjauan kode oleh tim pengembang yang berpengalaman. Namun, itu juga terjadi bahwa, karena kurangnya perhatian atau alasan lain, programmer kadang-kadang menulis kode yang aneh dan tidak logis, yang, bagaimanapun, (tampaknya) berhasil memenuhi fungsinya. Tetapi hanya lebih jauh, ketika kembali ke apa yang ditulis, atau ketika orang lain mempelajari kode ini, pertanyaan mulai muncul yang tidak dapat dijawab.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Refactoring kode lama dapat berubah menjadi masalah, terutama jika bagian lain dari program bergantung padanya, jadi ketika Anda menemukan bahkan beberapa konstruksi yang bengkok secara terbuka, posisi â€³ Apakah itu berfungsi? Jangan menyentuhnya! â€³. Selanjutnya, ini membuatnya sulit untuk mempelajari sumbernya, dan karenanya, menjadi sulit untuk memperluas kemampuan yang tersedia. Basis kode tersumbat, ada kemungkinan bahwa beberapa masalah internal kecil dan tidak terlihat, tetapi berpotensi sangat tidak menyenangkan tidak akan diperbaiki dalam waktu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada titik tertentu, konsekuensi dari kesalahan ini akan terasa, tetapi pencariannya akan memakan banyak waktu, karena kecurigaan pengembang akan jatuh pada sejumlah besar fragmen kode aneh yang tidak direaktor ulang pada satu waktu. Karena itu berbagai masalah dan keanehan dalam fragmen tertentu harus diperbaiki segera setelah penulisan. Dalam kasus ketika ada alasan yang masuk akal untuk meninggalkan segala sesuatu sebagaimana adanya (misalnya, jika kode ditulis sebagai semacam kosong â€³ untuk nanti â€³), fragmen seperti itu harus disertai dengan komentar penjelasan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perlu juga dicatat bahwa, terlepas dari kualifikasi pengembang, beberapa momen bermasalah dan tidak berhasil dapat lolos dari tatapannya, dan kadang-kadang "solusi sementara" dapat diterapkan di beberapa tempat, yang akan segera dilupakan dan menjadi "permanen". Selanjutnya, analisis kode tersebut (kemungkinan besar, pengembang lain akan terlibat dalam hal ini) akan mengambil banyak upaya yang tidak dapat diterima. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kasus seperti itu, tinjauan kode dapat membantu. Namun, jika tugasnya cukup serius, maka opsi ini akan membutuhkan banyak waktu. Selain itu, ketika ada banyak kesalahan kecil atau kekurangan, maka di belakang mereka pemeriksa mungkin tidak melihat kesalahan tingkat tinggi. Memeriksa kode menjadi rutin yang membosankan, dan lambat laun efektivitas tinjauan menurun.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jelas, tugas-tugas rutin akan jauh lebih baik ditransfer dari orang ke komputer. Pendekatan ini digunakan di banyak bidang modernitas. Otomatisasi berbagai proses adalah kunci menuju kemakmuran. Apa otomasi dalam konteks topik ini? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Asisten yang dapat diandalkan dalam memecahkan masalah penulisan kode kerja yang masuk akal dan stabil adalah analisis statis. Setiap kali sebelum mengirimkan hasil kegiatan mereka ke ulasan, programmer akan dapat melakukan pemeriksaan otomatis dan tidak membebani pengembang lain (dan dirinya sendiri) dengan pekerjaan yang tidak perlu. Kode akan dikirim untuk verifikasi hanya setelah semua peringatan penganalisa telah diperhitungkan: kesalahan telah diperbaiki, dan momen aneh telah ditulis ulang, atau setidaknya dijelaskan oleh komentar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, kebutuhan untuk tinjauan kode tidak hilang, tetapi analisis statis melengkapi dan sangat menyederhanakan implementasinya. </font><font style="vertical-align: inherit;">Sebagian besar kesalahan akan diperbaiki berkat penganalisa, dan momen aneh pasti tidak akan dilupakan dan ditandai. </font><font style="vertical-align: inherit;">Dengan demikian, dengan tinjauan kode akan dimungkinkan untuk fokus pada verifikasi kebenaran implementasi interaksi logis yang kompleks dan menemukan masalah mendasar yang, sayangnya, (sejauh ini) tidak dapat dideteksi oleh penganalisa.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TensorFlow.NET</font></font></h2><br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d02/39d/72d/d0239d72ded7154a696d5c975a0555d1.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Artikel ini terinspirasi oleh proyek TensorFlow.NET. Ini mewakili implementasi kemampuan untuk bekerja dengan fungsionalitas pustaka pembelajaran mesin TensorFlow yang populer melalui kode C # (omong-omong, kami juga </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengujinya</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Gagasan ini sepertinya cukup menarik, karena pada saat penulisan, bekerja dengan perpustakaan hanya tersedia dalam Python, Java dan Go. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode sumber yang tersedia di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terus diperbarui dan sekarang volumenya sedikit lebih dari seratus ribu baris. Setelah studi superfisial, ada keinginan untuk melakukan verifikasi menggunakan analisis statis. PVS-Studio digunakan sebagai alat khusus, yang telah membuktikan keefektifannya dalam sejumlah besar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proyek yang berbeda</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/261/70b/247/26170b247e9b81a3643bd5682b7d5203.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk TensorFlow.NET, penganalisa menampilkan sejumlah peringatan: 39 tingkat tinggi, 227 tingkat menengah dan 154 tingkat rendah (Anda dapat membaca tentang tingkat peringatan </font><font style="vertical-align: inherit;">di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di ayat "Tingkat peringatan dan set aturan diagnostik"). Analisis terperinci dari masing-masing dari mereka akan membuat artikel ini sangat besar, oleh karena itu hanya mereka yang tampaknya paling menarik bagi saya yang dijelaskan di bawah ini. Perlu juga dicatat bahwa beberapa masalah yang ditemukan ditemui beberapa kali dalam proyek, dan analisis masing-masing potongan kode berada di luar cakupan artikel ini.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proyek itu sendiri menetapkan tugas yang agak serius, dan, sayangnya, penampilan berbagai jenis fragmen kode aneh tidak bisa dihindari. </font><font style="vertical-align: inherit;">Pada artikel ini saya akan mencoba menunjukkan bahwa penggunaan analisis statis dapat sangat menyederhanakan pekerjaan pemrogram, menunjuk ke area yang dapat menimbulkan pertanyaan. </font><font style="vertical-align: inherit;">Tidak selalu peringatan menunjukkan kesalahan, tetapi cukup sering itu menunjukkan kode yang akan menimbulkan pertanyaan pada seseorang. </font><font style="vertical-align: inherit;">Dengan demikian, kemungkinan kode aneh didesain ulang atau, dalam hal apa pun, komentar yang sesuai meningkat secara signifikan.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragmen yang menarik perhatian saat mempelajari laporan penganalisa</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bahkan, sejumlah besar penganalisa peringatan untuk proyek ini bisa disebut bukan karena banyak kesalahan, tetapi kode yang aneh. Saat melihat garis yang mengeluarkan peringatan, setidaknya timbul kebingungan. Tentu saja, beberapa contoh yang disajikan di bawah ini mungkin solutions solusi sementara â€³, tetapi mereka tidak memberikan komentar mengenai masalah ini, yang berarti bahwa seseorang yang akan bekerja dengan kode ini di masa mendatang akan memiliki pertanyaan, mencari jawaban yang akan memakan waktu ekstra.</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/263/3fc/e7c/2633fce7cba470cd8a0c16e6751b3513.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada saat yang sama, beberapa peringatan menunjukkan kode yang jelas bukan hanya aneh, tetapi juga salah. </font><font style="vertical-align: inherit;">Ini adalah bahaya utama â€³ kode aneh â€³ - sangat sulit untuk melihat kesalahan nyata jika di sana-sini Anda melihat solusi yang tidak dapat dipahami dan secara bertahap terbiasa dengan fakta bahwa kode tersebut tampaknya tidak benar.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tur koleksi canggih</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> _RemoveDefaultAttrs(....)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> producer_op_dict = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-keyword">string</span>, OpDef&gt;();<font></font>
  producer_op_list.Op.Select(op =&gt;<font></font>
  {<font></font>
    producer_op_dict[op.Name] = op;<font></font>
    <span class="hljs-keyword">return</span> op;<font></font>
  }).ToArray();           <font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan Analyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3010</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nilai kembali fungsi 'ToArray' harus digunakan. importir.cs 218 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penganalisis menganggap panggilan ke </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toray</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pada saat ini mencurigakan, karena nilai yang dikembalikan oleh fungsi ini tidak ditugaskan ke variabel. Namun, kode semacam itu bukan kesalahan. Konstruk ini digunakan untuk mengisi kamus </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">producer_op_dict</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan </font><font style="vertical-align: inherit;">nilai-nilai yang sesuai dengan unsur-unsur dari daftar </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">producer_op_list.Op</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Panggilan ke </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ToArray</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diperlukan agar fungsi yang diteruskan sebagai argumen ke metode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pilih</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dipanggil untuk semua elemen dalam koleksi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menurut pendapat saya, kode tidak terlihat terbaik. </font><font style="vertical-align: inherit;">Mengisi kamus agak tidak jelas, dan beberapa pengembang mungkin ingin menghapus panggilan â€³ yang tidak perlu </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari </font><i><font style="vertical-align: inherit;">ToArray</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Akan jauh lebih sederhana dan lebih mudah untuk menggunakan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foreach loop di</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sini </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> producer_op_dict = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-keyword">string</span>, OpDef&gt;();<font></font>
<font></font>
<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> op <span class="hljs-keyword">in</span> producer_op_list.Op)<font></font>
{<font></font>
  producer_op_dict[op.Name] = op;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam hal ini, kode terlihat sesederhana mungkin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Momen serupa lainnya terlihat seperti ini:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> GraphDef <span class="hljs-title">convert_variables_to_constants</span>(<span class="hljs-params">....</span>)</span><font></font>
{<font></font>
  ....<font></font>
  inference_graph.Node.Select(x =&gt; map_name_to_node[x.Name] = x).ToArray();<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan Analyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3010</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nilai kembali fungsi 'ToArray' harus digunakan. </font><font style="vertical-align: inherit;">graph_util_impl.cs 48 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Satu-satunya perbedaan adalah bahwa entri seperti itu terlihat lebih ringkas, tetapi hanya godaan untuk menghapus panggilan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ToArray di</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sini tidak hilang, dan itu masih terlihat tidak jelas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solusi sementara</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> GraphDef <span class="hljs-title">convert_variables_to_constants</span>(<span class="hljs-params">....</span>)</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">var</span> source_op_name = get_input_name(node);
  <span class="hljs-keyword">while</span>(map_name_to_node[source_op_name].Op == <span class="hljs-string">"Identity"</span>)<font></font>
  {<font></font>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException);<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan Analyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3020</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'lemparan' tanpa syarat dalam satu lingkaran. graph_util_impl.cs 73 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam proyek yang sedang dipertimbangkan, pendekatan berikut sering digunakan: jika beberapa perilaku harus diimplementasikan kemudian, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NotImplementedException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dilemparkan ke tempat yang tepat </font><font style="vertical-align: inherit;">. Jelas mengapa penganalisis memperingatkan kemungkinan kesalahan dalam bagian ini: menggunakan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sementara</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> alih-alih </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jika</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak benar-benar terlihat terlalu masuk akal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini bukan satu-satunya peringatan yang muncul karena penggunaan solusi sementara. Misalnya, ada metode:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] _SoftmaxCrossEntropyWithLogitsGrad(<font></font>
  Operation op, Tensor[] grads<font></font>
)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> grad_loss = grads[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">var</span> grad_grad = grads[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">var</span> softmax_grad = op.outputs[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">var</span> grad = _BroadcastMul(grad_loss, softmax_grad);<font></font>
<font></font>
  <span class="hljs-keyword">var</span> logits = op.inputs[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">if</span>(grad_grad != <span class="hljs-literal">null</span> &amp;&amp; !IsZero(grad_grad)) <span class="hljs-comment">// &lt;=</span><font></font>
  {<font></font>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">"_SoftmaxCrossEntropyWithLogitsGrad"</span>);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Tensor[] <font></font>
  {<font></font>
    grad,<font></font>
    _BroadcastMul(grad_loss, -nn_ops.log_softmax(logits))<font></font>
  };<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan Analyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><font style="vertical-align: inherit;">Ekspresi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3022</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'grad_grad! = Null &amp;&amp;! IsZero (grad_grad)' selalu salah. </font><font style="vertical-align: inherit;">nn_grad.cs 93 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bahkan, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NotImplementedException ("_ SoftmaxCrossEntropyWithLogitsGrad")</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak akan pernah dilempar, karena kode ini tidak dapat dijangkau. </font><font style="vertical-align: inherit;">Untuk mengungkap alasannya, Anda harus membuka kode fungsi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IsZero</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">IsZero</span>(<span class="hljs-params">Tensor g</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span> <span class="hljs-keyword">string</span>[] { <span class="hljs-string">"ZerosLike"</span>, <span class="hljs-string">"Zeros"</span> }.Contains(g.op.type))
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
<font></font>
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">"IsZero"</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metode ini mengembalikan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> atau melempar pengecualian. </font><font style="vertical-align: inherit;">Kode ini bukan kesalahan - jelas, implementasi di sini dibiarkan nanti. </font><font style="vertical-align: inherit;">Yang terpenting adalah â€³ lalu â€³ benar-benar telah tiba. </font><font style="vertical-align: inherit;">Nah, ternyata sangat berhasil bahwa PVS-Studio tidak akan membiarkan Anda lupa bahwa ada ketidaksempurnaan di sini :)</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apakah Tensor itu Tensor?</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Tensor[] _ExtractInputShapes(Tensor[] inputs)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> sizes = <span class="hljs-keyword">new</span> Tensor[inputs.Length];
  <span class="hljs-keyword">bool</span> fully_known = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; inputs.Length; i++)<font></font>
  {<font></font>
    <span class="hljs-keyword">var</span> x = inputs[i];<font></font>
<font></font>
    <span class="hljs-keyword">var</span> input_shape = array_ops.shape(x);
    <span class="hljs-keyword">if</span> (!(input_shape <span class="hljs-keyword">is</span> Tensor) || input_shape.op.type != <span class="hljs-string">"Const"</span>)<font></font>
    {<font></font>
      fully_known = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
<font></font>
    sizes[i] = input_shape;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan Analyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3051</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pemeriksaan tipe berlebihan. </font><font style="vertical-align: inherit;">Objek sudah dari tipe 'Tensor'. </font><font style="vertical-align: inherit;">array_grad.cs 154 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jenis pengembalian metode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bentuk</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tensor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Jadi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">input_shape adalah</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cek </font><i><font style="vertical-align: inherit;">Tensor</font></i><font style="vertical-align: inherit;"> terlihat setidaknya aneh. </font><font style="vertical-align: inherit;">Mungkin, setelah metode mengembalikan nilai dari jenis yang berbeda dan verifikasi masuk akal, tetapi juga mungkin bahwa alih-alih Tensor, syaratnya harus menentukan semacam pewaris kelas ini. </font><font style="vertical-align: inherit;">Dengan satu atau lain cara, pengembang harus memperhatikan fragmen ini.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemeriksaan menyeluruh</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] _BaseFusedBatchNormGrad(....)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (data_format == <span class="hljs-string">"NCHW"</span>) <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">""</span>);<font></font>
<font></font>
  <span class="hljs-keyword">var</span> results = grad_fun(<span class="hljs-keyword">new</span> FusedBatchNormParams<font></font>
  {<font></font>
    YBackprop = grad_y,<font></font>
    X = x,<font></font>
    Scale = scale,<font></font>
    ReserveSpace1 = pop_mean,<font></font>
    ReserveSpace2 = pop_var,<font></font>
    ReserveSpace3 = version == <span class="hljs-number">2</span> ? op.outputs[<span class="hljs-number">5</span>] : <span class="hljs-literal">null</span>,<font></font>
    Epsilon = epsilon,<font></font>
    DataFormat = data_format,<font></font>
    IsTraining = is_training<font></font>
  });<font></font>
<font></font>
  <span class="hljs-keyword">var</span> (dx, dscale, doffset) = (results[<span class="hljs-number">0</span>], results[<span class="hljs-number">1</span>], results[<span class="hljs-number">2</span>]);
  <span class="hljs-keyword">if</span> (data_format == <span class="hljs-string">"NCHW"</span>) <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">""</span>);<font></font>
<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan Analyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3021</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ada dua pernyataan 'jika' dengan ekspresi kondisional yang identik. </font><font style="vertical-align: inherit;">Pernyataan 'jika' pertama berisi pengembalian metode. </font><font style="vertical-align: inherit;">Ini berarti bahwa pernyataan kedua 'jika' tidak masuk akal nn_grad.cs 230</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ekspresi </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">V3022</font></a><font style="vertical-align: inherit;"> 'data_format == "NCHW"' selalu salah. </font><font style="vertical-align: inherit;">nn_grad.cs 247</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak seperti beberapa contoh sebelumnya, jelas ada yang salah dengan kode. </font><font style="vertical-align: inherit;">Pemeriksaan kedua tidak masuk akal, karena jika kondisinya benar, maka pelaksanaan program tidak akan mencapainya sama sekali. </font><font style="vertical-align: inherit;">Mungkin salah ketik diizinkan di sini, atau salah satu dari pemeriksaan umumnya berlebihan.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ilusi pilihan</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> Tensor <span class="hljs-title">Activate</span>(<span class="hljs-params">Tensor x, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span></span>)</span><font></font>
{<font></font>
  ....<font></font>
  Tensor negative_part;<font></font>
  <span class="hljs-keyword">if</span> (Math.Abs(_threshold) &gt; <span class="hljs-number">0.000001f</span>)<font></font>
  {<font></font>
    negative_part = gen_ops.relu(-x + _threshold);<font></font>
  } <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    negative_part = gen_ops.relu(-x + _threshold);<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan Analyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3004</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pernyataan 'then' setara dengan pernyataan 'else'. gen_nn_ops.activations.cs 156 Demonstrasi yang </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
agak lucu tentang efektivitas menggunakan analisis statis dalam pengembangan. Sulit untuk datang dengan alasan yang masuk akal mengapa pengembang menulis kode khusus ini - kemungkinan besar, ini adalah kesalahan copy-paste yang khas (meskipun ini, tentu saja, mungkin lain â€³ untuk nanti â€³). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada fragmen lain dari rencana serupa, misalnya:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Operation _GroupControlDeps(
  <span class="hljs-keyword">string</span> dev, Operation[] deps, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span><font></font>
)<font></font>
{<font></font>
  <span class="hljs-keyword">return</span> tf_with(ops.control_dependencies(deps), ctl =&gt;<font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (dev == <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
      <span class="hljs-keyword">return</span> gen_control_flow_ops.no_op(name);<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
      <span class="hljs-keyword">return</span> gen_control_flow_ops.no_op(name);<font></font>
    }<font></font>
  });<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan Analyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3004</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pernyataan 'then' setara dengan pernyataan 'else'. </font><font style="vertical-align: inherit;">control_flow_ops.cs 135 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mungkin begitu pemeriksaan masuk akal, tetapi seiring waktu menghilang, atau beberapa perubahan lebih lanjut direncanakan di masa depan. </font><font style="vertical-align: inherit;">Namun, tidak ada satu atau pun opsi lain yang cukup untuk meninggalkan sesuatu yang serupa dalam kode, tanpa menjelaskan keanehan ini dengan cara apa pun. </font><font style="vertical-align: inherit;">Dengan tingkat probabilitas yang tinggi, kesalahan salin-tempel dibuat dengan cara yang persis sama.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cek Terlambat</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] <span class="hljs-title">Input</span>(<span class="hljs-params"><span class="hljs-keyword">int</span>[] batch_shape = <span class="hljs-literal">null</span>,
  TF_DataType dtype = TF_DataType.DtInvalid,
  <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span>,
  <span class="hljs-keyword">bool</span> sparse = <span class="hljs-literal">false</span>,
  Tensor tensor = <span class="hljs-literal">null</span></span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">var</span> batch_size = batch_shape[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">var</span> shape = batch_shape.Skip(<span class="hljs-number">1</span>).ToArray(); <span class="hljs-comment">// &lt;=</span><font></font>
<font></font>
  InputLayer input_layer = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">if</span> (batch_shape != <span class="hljs-literal">null</span>)                   <span class="hljs-comment">// &lt;=</span><font></font>
    ....<font></font>
  <span class="hljs-keyword">else</span><font></font>
    ....<font></font>
<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan Analyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3095 Objek</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'batch_shape' digunakan sebelum diverifikasi dengan null. </font><font style="vertical-align: inherit;">Periksa baris: 39, 42. keras.layers.cs 39 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kesalahan klasik dan agak berbahaya dari potensi penggunaan variabel, yang merupakan tautan ke mana-mana. </font><font style="vertical-align: inherit;">Dalam hal ini, kode secara eksplisit menyiratkan kemungkinan bahwa </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">batch_shape</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan menjadi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nol</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ini jelas baik dari daftar argumen dan dari verifikasi selanjutnya dari variabel yang sama. </font><font style="vertical-align: inherit;">Jadi, alat analisa di sini menunjukkan kesalahan yang jelas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€³ Lain untuk nanti â€³?</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MnistDataSet</span>(<span class="hljs-params">
  NDArray images, NDArray labels, Type dataType, <span class="hljs-keyword">bool</span> reshape // &lt;=
</span>)</span> <font></font>
{<font></font>
  EpochsCompleted = <span class="hljs-number">0</span>;<font></font>
  IndexInEpoch = <span class="hljs-number">0</span>;<font></font>
<font></font>
  NumOfExamples = images.shape[<span class="hljs-number">0</span>];<font></font>
<font></font>
  images = images.reshape(<font></font>
    images.shape[<span class="hljs-number">0</span>], images.shape[<span class="hljs-number">1</span>] * images.shape[<span class="hljs-number">2</span>]<font></font>
  );<font></font>
  images = images.astype(dataType);<font></font>
  <span class="hljs-comment">// for debug np.multiply performance</span>
  <span class="hljs-keyword">var</span> sw = <span class="hljs-keyword">new</span> Stopwatch();<font></font>
  sw.Start();<font></font>
  images = np.multiply(images, <span class="hljs-number">1.0f</span> / <span class="hljs-number">255.0f</span>);<font></font>
  sw.Stop();<font></font>
  Console.WriteLine(<span class="hljs-string">$"<span class="hljs-subst">{sw.ElapsedMilliseconds}</span>ms"</span>);<font></font>
  Data = images;<font></font>
<font></font>
  labels = labels.astype(dataType);<font></font>
  Labels = labels;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan Analyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3117</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Parameter konstruktor 'membentuk kembali' tidak digunakan. </font><font style="vertical-align: inherit;">MnistDataSet.cs 15 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti beberapa keanehan lainnya, ini kemungkinan besar disebabkan oleh kenyataan bahwa fungsionalitasnya masih jauh dari implementasi sepenuhnya dan sangat mungkin bahwa parameter </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membentuk kembali</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan digunakan entah bagaimana dalam konstruktor ini di masa depan. </font><font style="vertical-align: inherit;">Tapi untuk saat ini, sepertinya dia dilemparkan ke sini begitu saja. </font><font style="vertical-align: inherit;">Jika ini benar-benar dilakukan â€³ untuk nanti â€³, maka akan lebih baik untuk menandai ini dengan beberapa komentar. </font><font style="vertical-align: inherit;">Jika tidak, maka ternyata kode yang membangun objek harus membuang parameter tambahan ke konstruktor, dan sangat mungkin bahwa akan lebih mudah untuk tidak melakukan ini.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sulit dipahami kemungkinan nol dereferensi</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] _GatherV2Grad(Operation op, Tensor[] grads)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span>((<span class="hljs-keyword">int</span>)axis_static == <span class="hljs-number">0</span>)<font></font>
  {<font></font>
    <span class="hljs-keyword">var</span> params_tail_shape = params_shape.slice(<span class="hljs-keyword">new</span> NumSharp.Slice(start:<span class="hljs-number">1</span>));
    <span class="hljs-keyword">var</span> values_shape = array_ops.concat(
      <span class="hljs-keyword">new</span>[] { indices_size, params_tail_shape }, <span class="hljs-number">0</span><font></font>
    );<font></font>
    <span class="hljs-keyword">var</span> values = array_ops.reshape(grad, values_shape);<font></font>
    indices = array_ops.reshape(indices, indices_size);<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Tensor[]<font></font>
    {<font></font>
      <span class="hljs-keyword">new</span> IndexedSlices(values, indices, params_shape), <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-literal">null</span>,
      <span class="hljs-literal">null</span><font></font>
    };<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan Analyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3146</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kemungkinan null dereference dari metode nilai 1 argumen pertama. '_Outputs.FirstOrDefault ()' dapat mengembalikan nilai nol default. array_grad.cs 199 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memahami apa masalahnya, Anda harus terlebih dahulu beralih ke </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> konstruktor </font><i><font style="vertical-align: inherit;">indexedSlices</font></i><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">IndexedSlices</span>(<span class="hljs-params">
  Tensor values, Tensor indices, Tensor dense_shape = <span class="hljs-literal">null</span>
</span>)</span><font></font>
{<font></font>
  _values = values;<font></font>
  _indices = indices;<font></font>
  _dense_shape = dense_shape;<font></font>
<font></font>
  _values.Tag = <span class="hljs-keyword">this</span>; <span class="hljs-comment">// &lt;=</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jelas, meneruskan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nol</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke konstruktor ini akan menimbulkan pengecualian. Namun, mengapa penganalisa menganggap bahwa variabel </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nilai</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mungkin mengandung </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nol</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio menggunakan teknik Analisis Aliran Data, yang memungkinkan Anda menemukan set nilai variabel yang mungkin ada di berbagai bagian kode. Peringatan memberi tahu Anda bahwa nol dalam variabel yang ditentukan dapat dikembalikan dengan baris berikut: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_outputs.FirstOrDefault ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Namun, melihat kode di atas, Anda dapat menemukan bahwa </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nilai</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variabel </font><i><font style="vertical-align: inherit;">nilai</font></i><font style="vertical-align: inherit;"> diperoleh dengan memanggil </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array_ops.reshape (grad, values_shape)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Jadi di manakah </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_outputs.FirstOrDefault ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Faktanya adalah bahwa ketika menganalisis aliran data, tidak hanya fungsi saat ini dipertimbangkan, tetapi juga semua disebut; </font><font style="vertical-align: inherit;">PVS-Studio mendapatkan informasi tentang set nilai yang mungkin dari variabel mana pun di mana saja. </font><font style="vertical-align: inherit;">Dengan demikian, peringatan berarti bahwa implementasi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array_ops.reshape (grad, values_shape)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> berisi panggilan ke </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_outputs.FirstOrDefault ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang hasilnya akhirnya dikembalikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memverifikasi ini, buka implementasi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membentuk kembali</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor reshape&lt;T1, T2&gt;(T1 tensor, T2 shape, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span>)<font></font>
            =&gt; gen_array_ops.reshape(tensor, shape, <span class="hljs-literal">null</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lalu pergi ke metode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membentuk kembali</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang </font><font style="vertical-align: inherit;">disebut di dalam:</font></font><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor reshape&lt;T1, T2&gt;(T1 tensor, T2 shape, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span>)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> _op = _op_def_lib._apply_op_helper(
    <span class="hljs-string">"Reshape"</span>, name, <span class="hljs-keyword">new</span> { tensor, shape }<font></font>
  );<font></font>
  <span class="hljs-keyword">return</span> _op.output;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fungsi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_apply_op_helper</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mengembalikan objek dari kelas </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang berisi properti </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">output</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Setelah menerima nilainya, kode yang dijelaskan dalam peringatan itu disebut:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> Tensor output =&gt; _outputs.FirstOrDefault();</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tensor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tentu saja, adalah tipe referensi, jadi nilai default untuk itu adalah </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nol</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dari semua ini dapat dilihat bahwa PVS-Studio teliti menganalisis struktur logis dari kode, menembus jauh ke dalam struktur panggilan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penganalisa menyelesaikan pekerjaannya, menunjukkan tempat yang berpotensi bermasalah. </font><font style="vertical-align: inherit;">Programmer harus memeriksa apakah suatu situasi dapat muncul ketika elemen-elemen dalam </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_output</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak ada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, analisis statis setidaknya akan memaksa pengembang untuk memperhatikan fragmen yang mencurigakan untuk mengevaluasi apakah kesalahan itu benar-benar terjadi di sana. </font><font style="vertical-align: inherit;">Dengan pendekatan ini, jumlah kesalahan yang tidak diperhatikan akan berkurang dengan cepat.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menunggu tidak dapat diandalkan?</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> (LoopVar&lt;TItem&gt;, Tensor[]) _BuildLoop&lt;TItem&gt;(<font></font>
  ....<font></font>
) <span class="hljs-keyword">where</span> ....<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-comment">// Finds the closest enclosing non-None control pivot.</span>
  <span class="hljs-keyword">var</span> outer_context = _outer_context;
  <span class="hljs-keyword">object</span> control_pivot = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">while</span> (outer_context != <span class="hljs-literal">null</span> &amp;&amp; control_pivot == <span class="hljs-literal">null</span>) <span class="hljs-comment">// &lt;=</span><font></font>
  {<font></font>
<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (control_pivot != <span class="hljs-literal">null</span>)<font></font>
  {<font></font>
<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan Analyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3032</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Menunggu ungkapan ini tidak dapat diandalkan, karena kompiler dapat mengoptimalkan beberapa variabel. </font><font style="vertical-align: inherit;">Gunakan variabel yang mudah menguap atau sinkronisasi primitif untuk menghindari hal ini. </font><font style="vertical-align: inherit;">WhileContext.cs 212 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penganalisis menunjukkan bahwa implementasi menunggu seperti itu dapat dioptimalkan oleh kompiler, tapi saya ragu mereka benar-benar mencoba menerapkan menunggu di sini - kemungkinan besar, kode itu tidak ditambahkan dan akan dikembangkan lebih lanjut di masa depan. </font><font style="vertical-align: inherit;">Mungkin layak untuk melempar </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NotImplementedException di sini</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mengingat praktik ini digunakan di tempat lain dalam proyek. </font><font style="vertical-align: inherit;">Dengan satu atau lain cara, saya percaya bahwa beberapa komentar jelas tidak akan sakit.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Melanggar batas</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TensorShape</span>(<span class="hljs-params"><span class="hljs-keyword">int</span>[][] dims</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span>(dims.Length == <span class="hljs-number">1</span>)<font></font>
  {<font></font>
    <span class="hljs-keyword">switch</span> (dims[<span class="hljs-number">0</span>].Length)<font></font>
    {<font></font>
      <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: shape = <span class="hljs-keyword">new</span> Shape(<span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">0</span>]); <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: shape = Shape.Vector((<span class="hljs-keyword">int</span>)dims[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]); <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: shape = Shape.Matrix(dims[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>], dims[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>]); <span class="hljs-keyword">break</span>; <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-keyword">default</span>: shape = <span class="hljs-keyword">new</span> Shape(dims[<span class="hljs-number">0</span>]); <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">"TensorShape int[][] dims"</span>);<font></font>
  }<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan Analyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3106</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kemungkinan indeks di luar batas. Indeks '1' menunjuk di luar batas 'dims'. TensorShape.cs 107 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di antara potongan kode aneh yang saya lihat, ada kesalahan nyata, yang sangat sulit untuk dilihat. Fragmen berikut keliru di sini: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redup [1] [2]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mendapatkan elemen dengan indeks 1 dari array satu elemen jelas merupakan kesalahan. Pada saat yang sama, jika Anda mengubah fragmen menjadi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meredup [0] [2]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kesalahan lain muncul - mendapatkan elemen dengan indeks 2 dari array </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dims [0]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , panjangnya dalam cabang kasus ini adalah 2. Dengan demikian, masalah ini ternyata menjadi seakan dengan "double bottom".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimanapun, fragmen kode ini harus dipelajari dan diperbaiki oleh pengembang. </font><font style="vertical-align: inherit;">Menurut pendapat saya, contoh ini adalah ilustrasi yang sangat baik tentang kinerja Analisis Aliran Data di PVS-Studio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Olepatka?</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> _init_from_args(<span class="hljs-keyword">object</span> initial_value = <span class="hljs-literal">null</span>, ....) <span class="hljs-comment">// &lt;=</span><font></font>
{<font></font>
  <span class="hljs-keyword">var</span> init_from_fn = initial_value.GetType().Name == <span class="hljs-string">"Func`1"</span>; <span class="hljs-comment">// &lt;=</span><font></font>
  ....<font></font>
  tf_with(...., scope =&gt;<font></font>
  {<font></font>
    ....<font></font>
    tf_with(...., <span class="hljs-keyword">delegate</span><font></font>
    {<font></font>
      initial_value = ops.convert_to_tensor(  <span class="hljs-comment">// &lt;=</span>
        init_from_fn ? (initial_value <span class="hljs-keyword">as</span> Func&lt;Tensor&gt;)():initial_value,<font></font>
        name: <span class="hljs-string">"initial_value"</span>,<font></font>
        dtype: dtype<font></font>
      );<font></font>
    });<font></font>
    _shape = shape ?? (initial_value <span class="hljs-keyword">as</span> Tensor).TensorShape;<font></font>
    _initial_value = initial_value <span class="hljs-keyword">as</span> Tensor; <span class="hljs-comment">// &lt;=</span><font></font>
    ....<font></font>
    _dtype = _initial_value.dtype.as_base_dtype(); <span class="hljs-comment">// &lt;=</span><font></font>
<font></font>
    <span class="hljs-keyword">if</span> (_in_graph_mode)<font></font>
    {<font></font>
      ....<font></font>
<font></font>
      <span class="hljs-keyword">if</span> (initial_value != <span class="hljs-literal">null</span>) <span class="hljs-comment">// &lt;=</span><font></font>
      {<font></font>
        ....<font></font>
      }<font></font>
<font></font>
      ....<font></font>
    }<font></font>
<font></font>
    ....<font></font>
  });<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memahami kode di atas, ada baiknya juga memperkenalkan implementasi fungsi tf_with:</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">DebuggerStepThrough</span>] <span class="hljs-comment">// with "Just My Code" enabled this lets the </span>
[<span class="hljs-meta">DebuggerNonUserCode()</span>]  <span class="hljs-comment">//debugger break at the origin of the exception</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> tf_with&lt;T&gt;(<font></font>
  T py, Action&lt;T&gt; action<font></font>
) <span class="hljs-keyword">where</span> T : ITensorFlowObject<font></font>
{<font></font>
  <span class="hljs-keyword">try</span><font></font>
  {<font></font>
    py.__enter__();<font></font>
    action(py);<font></font>
  }<font></font>
  <span class="hljs-keyword">finally</span><font></font>
  {<font></font>
    py.__exit__();<font></font>
    py.Dispose();<font></font>
  }<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan Analyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : V3019 Mungkin variabel yang salah dibandingkan dengan nol setelah konversi jenis menggunakan kata kunci 'sebagai'. Periksa variabel 'initial_value', '_initial_value'. ResourceVariable.cs 137 </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_init_from_args</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah fungsi yang cukup banyak, sehingga banyak fragmen yang dihilangkan. Anda dapat melihatnya sepenuhnya dengan mengklik </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tautan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Meskipun peringatan pada awalnya tidak tampak serius bagi saya, setelah belajar, saya menyadari bahwa ada sesuatu yang salah dengan kode tersebut. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, harus dicatat bahwa metode ini dapat dipanggil tanpa melewati parameter dan secara default </font><font style="vertical-align: inherit;">akan menjadi </font><i><font style="vertical-align: inherit;">null</font></i><font style="vertical-align: inherit;"> di </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initial_value</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dalam hal ini, pengecualian akan diberikan pada baris pertama. </font><font style="vertical-align: inherit;">
Kedua, verifikasi</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initial_value</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ketimpangan </font><font style="vertical-align: inherit;">terlihat aneh: jika </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initial_value</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> benar-benar menjadi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nol</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> setelah memanggil </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ops.convert_to_tensor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , maka </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_initial_value</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan menjadi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nol</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang berarti bahwa memanggil </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_initial_value.dtype.as_base_dtype ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> juga akan memberikan pengecualian. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Analyzer mengisyaratkan bahwa Anda mungkin perlu memeriksa </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nol</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_initial_value</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi seperti yang disebutkan di atas, merujuk pada variabel ini terjadi sebelum tes ini, jadi opsi ini juga akan salah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apakah kesalahan kecil ini terlihat dalam fungsi raksasa tanpa PVS-Studio? </font><font style="vertical-align: inherit;">Saya sangat meragukannya.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam sebuah proyek dengan banyak contoh kode aneh, banyak masalah bisa disembunyikan. Si programmer, terbiasa melihat yang tidak bisa dipahami, berhenti memperhatikan kesalahan pada saat bersamaan. Konsekuensinya bisa sangat menyedihkan. Memang, di antara peringatan penganalisa ada juga yang salah, namun, dalam kebanyakan kasus, peringatan setidaknya menunjukkan fragmen kode yang dapat menyebabkan pertanyaan ketika dilihat oleh seseorang. Dalam kasus ketika kode aneh ditulis dengan sengaja, ada baiknya meninggalkan penjelasan sehingga fragmennya jelas bagi pengembang yang akan bekerja dengan kode ini di masa mendatang (bahkan jika itu berarti meninggalkan komentar untuk dirinya sendiri).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada saat yang sama, alat analisis statis, seperti PVS-Studio, dapat sangat membantu dalam menemukan potensi kesalahan dan keanehan sehingga dapat terlihat dan tidak dilupakan, dan semua solusi sementara selanjutnya disempurnakan dan diubah menjadi pekerjaan yang bersih, terstruktur, dan stabil. Kode.</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a></p><div style="text-align:center;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/eb2/f9c/3bb/eb2f9c3bb5f32f39239298d36431961c.png"></a></div><p></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda ingin berbagi artikel ini dengan audiens yang berbahasa Inggris, silakan gunakan tautan ke terjemahan: Nikita Lipilin. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana kode aneh menyembunyikan kesalahan? </font><font style="vertical-align: inherit;">Analisis TensorFlow.NET</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id496234/index.html">Alasan utama mengapa bukan Linux</a></li>
<li><a href="../id496238/index.html">Dua Puluh Delapan Langkah untuk Bertahan dan Berhasil dalam Krisis</a></li>
<li><a href="../id496240/index.html">Penemuan Produk 101 untuk Manajer Produk</a></li>
<li><a href="../id496242/index.html">Cyberpunk sudah ada di sini: anak sekolah belajar di Minecraft, dan siswa mengambil tes fisik di CS: GO</a></li>
<li><a href="../id496248/index.html">Tantangan, kepala botak dan anggur. Bagaimana kami di HFLabs mengalami isolasi diri</a></li>
<li><a href="../id496252/index.html">Pesawat centering offset yang aerodinamis</a></li>
<li><a href="../id496254/index.html">Bagaimana Rostelecom salah mengarahkan lalu lintas ke Google, AWS, Cloudflare, dll.</a></li>
<li><a href="../id496256/index.html">Pembelajaran mesin pada R: teknik ahli untuk analisis prediktif</a></li>
<li><a href="../id496258/index.html">Holivar online: format baru untuk pertukaran pengalaman. Sabtu ini</a></li>
<li><a href="../id496260/index.html">Kiat keamanan siber untuk bekerja dari rumah</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>