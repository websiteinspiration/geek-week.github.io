<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚§¥Ô∏è üåâ üõ∂ 5 bonnes pratiques d'utilisation des hame√ßons React en production üóø üë† üßëüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'auteur de l'article, dont nous publions la traduction aujourd'hui, indique que commercetools a adopt√© les crochets React au d√©but de 2019 - au momen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>5 bonnes pratiques d'utilisation des hame√ßons React en production</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/494712/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'auteur de l'article, dont nous </font><font style="vertical-align: inherit;">publions </font><font style="vertical-align: inherit;">la traduction aujourd'hui, indique que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commercetools a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adopt√© les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crochets React</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> au d√©but de 2019 - au moment de leur apparition dans React 16.8.0. </font><font style="vertical-align: inherit;">Depuis lors, les programmeurs de l'entreprise ont constamment trait√© leur code, le traduisant en crochets. </font><font style="vertical-align: inherit;">Les crochets React vous permettent d'utiliser l'√©tat des composants et d'utiliser d'autres fonctionnalit√©s React sans utiliser de classes. </font><font style="vertical-align: inherit;">√Ä l'aide de crochets, vous pouvez, lorsque vous travaillez avec des composants fonctionnels, vous ¬´connecter¬ª aux √©v√©nements du cycle de vie des composants et r√©agir aux changements de leur √©tat.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/dp/fq/jr/dpfqjrae_1gxg8w2fhzc6izgffa.jpeg"></a><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En bref sur les r√©sultats de la mise en ≈ìuvre des crochets</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si, en r√©sum√©, nous parlons de ce que les crochets nous ont donn√©, il s'av√®re qu'ils ont contribu√© √† simplifier la base de code en extrayant la logique des composants et en facilitant la composition de diff√©rentes capacit√©s. </font><font style="vertical-align: inherit;">De plus, l'utilisation des crochets a conduit au fait que nous avons beaucoup appris. </font><font style="vertical-align: inherit;">Par exemple, comment mieux structurer votre code gr√¢ce √† l'am√©lioration continue des fonctionnalit√©s existantes. </font><font style="vertical-align: inherit;">Nous sommes s√ªrs que nous apprendrons beaucoup de choses plus int√©ressantes tout en continuant √† travailler avec les crochets React.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Forces de mise en ≈ìuvre du crochet</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici ce que l'introduction des crochets nous a donn√©:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Am√©lioration de la lisibilit√© du code. </font><font style="vertical-align: inherit;">Ceci est possible gr√¢ce √† l'utilisation d'arbres de composants plus petits qu'auparavant. </font><font style="vertical-align: inherit;">La cr√©ation de tels arbres de composants est facilit√©e par notre d√©sir d'abandonner les propri√©t√©s de rendu et les composants d'ordre sup√©rieur.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Am√©lioration des capacit√©s de d√©bogage de code. </font><font style="vertical-align: inherit;">Nous avions √† notre disposition une repr√©sentation visuelle am√©lior√©e du code et des informations de d√©bogage suppl√©mentaires fournies par les outils de d√©veloppement React.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Am√©lioration de la modularit√© du projet. </font><font style="vertical-align: inherit;">En raison de la nature fonctionnelle des crochets, le processus de cr√©ation et d'application d'une logique adapt√©e √† une utilisation r√©p√©t√©e a √©t√© simplifi√©.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S√©paration des responsabilit√©s. </font><font style="vertical-align: inherit;">Les composants React sont responsables de l'apparence des √©l√©ments d'interface et les hooks permettent d'acc√©der √† la logique du programme encapsul√©.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous voulons partager nos recommandations sur l'utilisation des crochets en production.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. R√©cup√©rez en temps opportun les crochets des composants et cr√©ez des crochets personnalis√©s</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commencer √† utiliser des crochets dans les composants fonctionnels est assez facile. </font><font style="vertical-align: inherit;">Par exemple, nous avons rapidement postul√© quelque part </font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, quelque part - </font></font><code>React.useEffect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et avons continu√© √† faire notre travail. </font><font style="vertical-align: inherit;">Cette approche, cependant, ne permet pas de profiter pleinement de toutes les opportunit√©s que les hame√ßons sont capables de donner. </font><font style="vertical-align: inherit;">Pr√©sentant </font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sous la forme d'un petit </font></font><code>use&lt;StateName&gt;State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, et </font></font><code>React.useEffect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- sous la forme </font></font><code>use&lt;EffectName&gt;Effect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, nous avons pu atteindre les objectifs suivants:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les composants sont plus petits qu'avec des crochets ordinaires.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les crochets peuvent √™tre r√©utilis√©s dans divers composants.</font></font></li>
<li>,         React,  ,    . ,   <code>State&lt;StateName&gt;</code>   <code>State</code>.        <code>React.useState</code>,     .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La r√©cup√©ration des crochets contribue √©galement au fait que la logique r√©utilisable et partag√©e est plus visible dans diverses parties de l'application. Une logique similaire ou en double est plus difficile √† remarquer si vous n'utilisez que des crochets int√©gr√©s au code du composant. Les crochets r√©sultants peuvent √™tre de petite taille et contenir tr√®s peu de code </font></font><code>useToggleState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. D'un autre c√¥t√©, des crochets plus gros, comme </font></font><code>useProductFetcher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, peuvent d√©sormais inclure plus de fonctionnalit√©s. Ces deux √©l√©ments nous ont aid√©s √† simplifier la base de code en r√©duisant la taille des composants React.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'exemple suivant cr√©e un petit crochet React con√ßu pour contr√¥ler la s√©lection des √©l√©ments. </font><font style="vertical-align: inherit;">Les avantages de l'encapsulation de cette fonctionnalit√© deviennent √©vidents imm√©diatement apr√®s avoir r√©alis√© √† quelle fr√©quence une telle logique est utilis√©e dans l'application. </font><font style="vertical-align: inherit;">Par exemple, pour s√©lectionner un ensemble de commandes dans une liste.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//  </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [selected, setSelected] = React.useState()
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> select = React.useCallback(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> setSelected(<span class="hljs-comment">/** ... */</span>), [<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selected,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setSelect<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;])<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">List</span> <span class="hljs-attr">selectedIds</span>=<span class="hljs-string">{selected}</span> <span class="hljs-attr">onSelect</span>=<span class="hljs-string">{id</span> =&gt;</span> select(id)} /&gt;</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//   </span><font></font>
<font></font>
<span class="hljs-keyword">const</span> useSelection = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [selected, setSelected] = React.useState()
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> select = React.useCallback(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> setSelected(<span class="hljs-comment">/** ... */</span>), [<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selected,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setSelect<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;])<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> [selected, select]<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [selected, select] = useSelection()<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">List</span> <span class="hljs-attr">selectedIds</span>=<span class="hljs-string">{selected}</span> <span class="hljs-attr">onSelect</span>=<span class="hljs-string">{id</span> =&gt;</span> select(id)} /&gt;</span><font></font>
}<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. √Ä propos des avantages de React.useDebugValue</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le crochet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">React.useDebugValue</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> standard </font><font style="vertical-align: inherit;">fait r√©f√©rence aux fonctionnalit√©s React peu connues. </font><font style="vertical-align: inherit;">Ce hook peut aider le d√©veloppeur lors du d√©bogage du code; il peut √™tre utile pour l'utiliser dans des hooks √† acc√®s partag√©. </font><font style="vertical-align: inherit;">Il s'agit de hooks utilisateur utilis√©s dans de nombreux composants de l'application. </font><font style="vertical-align: inherit;">Cependant, il n'est </font></font><code>useDebugValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pas recommand√© de l'utiliser dans tous les hooks utilisateur, car les hooks int√©gr√©s enregistrent d√©j√† les valeurs de d√©bogage standard.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez cr√©er un crochet personnalis√© con√ßu pour prendre une d√©cision sur la n√©cessit√© d'activer une fonctionnalit√© de l'application. </font><font style="vertical-align: inherit;">Les donn√©es sur l'√©tat de l'application sur lesquelles la d√©cision est bas√©e peuvent provenir de diff√©rentes sources. </font><font style="vertical-align: inherit;">Ils peuvent √™tre stock√©s dans un objet de contexte React, dont l'acc√®s est organis√© via </font></font><code>React.useContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin d'aider le d√©veloppeur √† d√©boguer, tout en travaillant avec les outils de d√©veloppement React, il peut √™tre utile de conna√Ætre le nom d'indicateur analys√© ( </font></font><code>flagName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) et la variante de la valeur d'indicateur ( </font></font><code>flagVariation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Dans ce cas, l'utilisation d'un petit crochet peut nous aider </font></font><code>React.useDebugValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useFeatureToggle</span>(<span class="hljs-params">flagName, flagVariation = true</span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> flags = React.useContext(FlagsContext)
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> isFeatureEnabled = getIsFeatureEnabled(flagName, flagVariation)(flags)<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;React.useDebugValue({<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flagName,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flagVariation,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isEnabled</span>: isFeatureEnabled<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;})<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> isFeatureEnabled<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, en travaillant avec les outils du d√©veloppeur React, nous pouvons voir des informations sur l'option de la valeur de l'indicateur, sur le nom de l'indicateur et si la fonctionnalit√© qui nous int√©resse est activ√©e ou non.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a37/b3d/78c/a37b3d78c562b28184abd5d5a8fe1c93.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation des outils de d√©veloppement React apr√®s avoir appliqu√© le hook React.useDebugValue</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Veuillez noter que dans les cas o√π les hooks utilisateur utilisent des hooks standard comme</font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou</font></font><code>React.useRef</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ces hooks enregistrent d√©j√† le statut correspondant ou les donn√©es ref-object. </font><font style="vertical-align: inherit;">Par cons√©quent, l'utilisation de constructions de vues ici</font></font><code>React.useDebugValue({ state })</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n'est pas particuli√®rement utile.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. La combinaison et la composition des crochets</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque nous avons commenc√© √† mettre en ≈ìuvre des crochets dans notre travail et √† utiliser de plus en plus de crochets dans les composants, il s'est rapidement av√©r√© que 5 √† 10 crochets pouvaient √™tre pr√©sents dans le m√™me composant. Dans ce cas, des crochets de diff√©rents types ont √©t√© utilis√©s. Par exemple, nous pourrions utiliser 2-3 hooks </font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, puis un hook </font></font><code>React.useContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(par exemple, pour obtenir des informations sur l'utilisateur actif), un hook </font></font><code>React.useEffect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et √©galement des hooks provenant d'autres biblioth√®ques, comme </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-router</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-intl</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce qui pr√©c√®de a √©t√© r√©p√©t√© encore et encore, en cons√©quence, m√™me de tr√®s petits composants n'√©taient pas si compacts. Afin d'√©viter cela, nous avons commenc√© √† extraire ces crochets individuels en crochets utilisateur, dont le p√©riph√©rique d√©pendait du composant ou d'une certaine capacit√© d'application.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez un m√©canisme d'application visant √† cr√©er une commande. </font><font style="vertical-align: inherit;">Lors du d√©veloppement de ce m√©canisme, de nombreux composants ont √©t√© utilis√©s, ainsi que des crochets de diff√©rents types. </font><font style="vertical-align: inherit;">Ces crochets peuvent √™tre combin√©s en tant que crochet personnalis√©, augmentant l'utilisabilit√© des composants. </font><font style="vertical-align: inherit;">Voici un exemple de combinaison d'un ensemble de petits crochets en un seul crochet.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OrderCreate</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orderCreater,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orderFetcher,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;applicationContext,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goToNextStep,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pendingOrder,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updatePendingChanges,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;revertPendingChanges<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;} = useOrderCreate()<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> (<span class="hljs-comment">/** ...children */</span>)<font></font>
}<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Comparaison de React.useReducer et React.useState</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons souvent eu recours √† </font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un crochet standard pour travailler avec l'√©tat des composants. Cependant, au fil du temps, l'√©tat du composant peut devoir √™tre compliqu√©, ce qui d√©pend des nouvelles exigences pour le composant, comme la pr√©sence de plusieurs valeurs dans l'√©tat. Dans certains cas, l'utilisation </font></font><code>React.useReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">peut aider √† √©viter d'avoir √† utiliser plusieurs valeurs et √† simplifier la logique de mise √† jour de l'√©tat. Imaginez la gestion des √©tats lorsque vous effectuez des requ√™tes HTTP et recevez des r√©ponses. Pour ce faire, vous devrez peut - </font><font style="vertical-align: inherit;">√™tre travailler avec des </font><font style="vertical-align: inherit;">valeurs telles que </font></font><code>isLoading</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et</font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Au lieu de cela, l'√©tat peut √™tre contr√¥l√© √† l'aide d'un r√©ducteur, ayant √† sa disposition diverses actions pour g√©rer les changements d'√©tat. </font><font style="vertical-align: inherit;">Cette approche, id√©alement, encourage le d√©veloppeur √† percevoir l'√©tat de l'interface sous la forme d'une machine √† √©tats. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le r√©ducteur transmis </font></font><code>React.useReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est similaire aux r√©ducteurs utilis√©s dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o√π le syst√®me re√ßoit l'√©tat actuel de l'action et doit retourner l'√©tat suivant. </font><font style="vertical-align: inherit;">L'action contient des informations sur son type, ainsi que des donn√©es sur la base desquelles l'√©tat suivant est form√©. </font><font style="vertical-align: inherit;">Voici un exemple d'un r√©ducteur simple con√ßu pour contr√¥ler un certain compteur:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> initialState = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> reducer = <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">switch</span> (action) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">case</span> <span class="hljs-string">'increment'</span>: <span class="hljs-keyword">return</span> state + <span class="hljs-number">1</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">case</span> <span class="hljs-string">'decrement'</span>: <span class="hljs-keyword">return</span> state - <span class="hljs-number">1</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">case</span> <span class="hljs-string">'reset'</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">default</span>: <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Unexpected action'</span>);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce r√©ducteur peut √™tre test√© isol√©ment puis utilis√© dans le composant en utilisant </font></font><code>React.useReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [count, dispatch] = React.useReducer(reducer, initialState);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{count}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch('increment')}&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch('decrement')}&gt;-1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch('reset')}&gt;reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;);<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, nous pouvons appliquer ce que nous avons examin√© dans les trois sections pr√©c√©dentes, √† savoir, nous pouvons tout extraire </font></font><code>useCounterReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Cela am√©liorera le code en masquant les informations de type d'action d'un composant qui d√©crit l'apparence d'un √©l√©ment d'interface. </font><font style="vertical-align: inherit;">En cons√©quence, cela aidera √† emp√™cher la fuite des d√©tails d'impl√©mentation dans le composant et nous donnera √©galement des opportunit√©s suppl√©mentaires pour le d√©bogage du code. </font><font style="vertical-align: inherit;">Voici √† quoi ressemblera le hook personnalis√© r√©sultant et le composant l'utilisant:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> CounterActionTypes = {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">Increment</span>: <span class="hljs-string">'increment'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">Decrement</span>: <span class="hljs-string">'decrement'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">Reset</span>: <span class="hljs-string">'reset'</span>,<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> useCounterReducer = <span class="hljs-function">(<span class="hljs-params">initialState</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [count, dispatch] = React.useReducer(reducer, initialState);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> increment = React.useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> dispatch(CounterActionTypes.Increment));
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> decrement = React.useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> dispatch(CounterActionTypes.Decrement));
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> reset = React.useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> dispatch(CounterActionTypes.Reset));<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decrement<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> {count, increment} = useCounterReducer(<span class="hljs-number">0</span>);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{count}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{increment}</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;);<font></font>
};<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Mise en place progressive des crochets</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä premi√®re vue, l'id√©e d'introduire progressivement des crochets peut ne pas sembler tout √† fait logique, mais ici, je sugg√®re que ceux qui le pensent suivent simplement mon raisonnement. Au fil du temps, divers mod√®les trouvent leur application dans la base de code. Dans notre cas, ces mod√®les incluent des composants d'ordre sup√©rieur, des propri√©t√©s de rendu et maintenant des crochets. Lors de la traduction d'un projet vers un nouveau mod√®le, les d√©veloppeurs ne cherchent pas √† r√©√©crire instantan√©ment tout le code, ce qui, en g√©n√©ral, est presque impossible. Par cons√©quent, vous devez d√©velopper un plan de transfert du projet vers les hooks React, qui ne pr√©voit pas de modifications majeures du code. Cette t√¢che peut √™tre tr√®s difficile, car apporter des modifications au code entra√Æne g√©n√©ralement une augmentation de sa taille et de sa complexit√©. En introduisant des crochets, nous nous effor√ßons d'√©viter cela.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre base de code utilise des composants bas√©s sur les classes et des composants fonctionnels. Quel que soit le composant utilis√© dans une certaine situation, nous avons cherch√© √† partager la logique via les hooks React. Tout d'abord, nous impl√©mentons la logique dans les hooks (ou r√©p√©tons l'impl√©mentation existante de certains m√©canismes en eux), puis cr√©ons de petits composants d'un ordre sup√©rieur, √† l'int√©rieur desquels ces hooks sont utilis√©s. Apr√®s cela, ces composants d'ordre sup√©rieur sont utilis√©s pour cr√©er des composants bas√©s sur les classes. En cons√©quence, nous avons √† notre disposition une logique situ√©e en un seul endroit, qui peut √™tre utilis√©e dans des composants de diff√©rents types. Voici un exemple d'impl√©mentation de la fonctionnalit√© de hook dans les composants via des composants d'ordre sup√©rieur.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> injectTracking = <span class="hljs-function">(<span class="hljs-params">propName = <span class="hljs-string">'tracking'</span></span>) =&gt;</span> <span class="hljs-function"><span class="hljs-params">WrappedComponent</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> WithTracking = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> tracking = useTracking();<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> trackingProp = {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[propName]: tracking,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">WrappedComponent</span> {<span class="hljs-attr">...props</span>} {<span class="hljs-attr">...trackingProp</span>} /&gt;</span></span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;WithTracking.displayName = wrapDisplayName(WrappedComponent, <span class="hljs-string">'withTracking'</span>);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> WithTracking;<font></font>
};<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> injectTracking;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela montre l'impl√©mentation de la fonctionnalit√© de raccordement </font></font><code>useTracking</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans un composant </font></font><code>WrappedComponent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Cela nous a d'ailleurs permis, entre autres, de s√©parer les t√¢ches d'impl√©mentation des hooks et de r√©√©criture des tests dans les anciennes parties du syst√®me. </font><font style="vertical-align: inherit;">Avec cette approche, nous avons encore √† notre disposition des m√©canismes pour utiliser des crochets dans toutes les parties de la base de code.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sommaire</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici quelques exemples de la fa√ßon dont l'utilisation des crochets React a am√©lior√© notre base de code. </font><font style="vertical-align: inherit;">Nous esp√©rons que les crochets profiteront √©galement √† votre projet. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chers lecteurs! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisez-vous des crochets React?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr494692/index.html">Injections indolores avec des aiguilles 4D</a></li>
<li><a href="../fr494700/index.html">Sc√©narios d'infection dans des villes sp√©cifiques sur la base de l'ensemble de donn√©es sur les mouvements de personnes √† travers la Russie</a></li>
<li><a href="../fr494702/index.html">Le condens√© de mati√®res fra√Æches du monde du front-end de la derni√®re semaine n ¬∞ 408 (23-29 mars 2020)</a></li>
<li><a href="../fr494704/index.html">CMI5, ou la vie apr√®s SCORM</a></li>
<li><a href="../fr494710/index.html">Utilisation de formats graphiques modernes dans les projets Web</a></li>
<li><a href="../fr494714/index.html">Sur l'impact positif des polices variables sur les performances des projets Web</a></li>
<li><a href="../fr494716/index.html">Tout sur le mot-cl√© auto en CSS</a></li>
<li><a href="../fr494718/index.html">Nouvelles du monde d'OpenStreetMap n ¬∞ 504 (10.03.2020-16.03.2020)</a></li>
<li><a href="../fr494720/index.html">Ma feuille de triche par pandas</a></li>
<li><a href="../fr494722/index.html">La premi√®re version d'aper√ßu de Microsoft PowerShell 7.1 pour Windows, Linux et macOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>