<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏮 🙋🏿 ☁️ マルチエージェント転送モデルを作成する方法 🧜🏻 🉑 👩🏾‍🤝‍👨🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは、ハブル！
 
 新しい道路を建設するタスクがあるとします。各方向に2車線の高速道路を構築できますが、これで十分でない場合はどうでしょうか。あるいは、逆に、1つのストリップで十分であることが判明しましたが、プロジェクトの実装には、多くの土地区画を購入する必要がありましたか？どちらの場合も、...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>マルチエージェント転送モデルを作成する方法</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494596/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは、ハブル！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しい道路を建設するタスクがあるとします。各方向に2車線の高速道路を構築できますが、これで十分でない場合はどうでしょうか。あるいは、逆に、1つのストリップで十分であることが判明しましたが、プロジェクトの実装には、多くの土地区画を購入する必要がありましたか？どちらの場合も、決定は無効になります。このようなリスクを最小限に抑えるために、輸送計画担当者はコンピュータモデリングを利用して支援を求めます。この記事では、マルチエージェントモデリングの世界について簡単に説明します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bq/k0/kj/bqk0kjbb814y7q7twu1uvqk3yf4.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際の交通システムのコピーであるモデルを使用して、予測される道路の各セクションで必要なスループットを推定したり、さまざまなトレースオプションを試したり、たとえば、官民パートナーシップの枠組みで有料道路についてプロジェクトの投資回収期間を推定したりできます。しかし、他の重要なタスクを解決することができます：最適な公共交通機関のルートを整理し、オペレーターの潜在的な収益を計算する方法、特定のエリアでの駐車スペースの不足の有無を評価する方法などです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も興味深いのは、フリーソフトウェアの時代に誰もが同様のモデルを構築できることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も一般的なマルチエージェントモデリングツールの1つはオープンソースです。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MATSim（マルチエージェント転送シミュレーション）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MATSimは、個々のエージェントの動作をシミュレートします。エージェントは、現実の世界における個人のコンピュータ表現です。そのような各エージェントには、1つのアクティビティから別のアクティビティ（home-work-home、home-institute-work-home、home-shop-work1-work2-homeなど）に基づいて移動する日次計画があり、作成しますしたがって、道路インフラの需要。日次計画の概略図は次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n6/xt/m_/n6xtm_ps8u0stk6f8doybvsxzq8.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
日中の人々の実際の行動を反映するエージェントの現実的な計画を作成するために、エージェントの居住者の総数、彼らの第三国定住、仕事の場所、研究、店の場所、ショッピングセンター、駅、その他の活動場所が考慮されます。需要を検証するために、モデルはフィールド調査にもとづいて調整されます。ニューラルネットワークを使用した監視カメラと無人偵察機のフローの認識と計算、または道路の強度の手動測定などです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0x/t-/ke/0xt-kelsnwf39k3mmu2saye2zky.gif" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シミュレーション中、エージェントはネットワークを介して配信され、人々の現実的な行動を模倣します。彼らの計画を実行すると、車は道路や駐車場の場所を占有し、公共交通機関のユーザーはバスで場所を取り、また、互いに対話し、多くのエージェントが一度に1つの道路を選択した場合、渋滞や渋滞が発生します。すべてが現実の世界のようです！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シミュレーションが完了すると、スコアリングと呼ばれるエージェントの日次計画の実行について評価が行われます。エージェントは活動の過程でユーティリティユニットを取得し、移動中にそれらを失います。したがって、交通渋滞に巻き込まれたエージェントは、自由道路を移動しているエージェントよりも多くのユーティリティユニットを失います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各反復の後、一部のエージェントは、パフォーマンスを改善するような方法で道路ネットワークの負荷に関する情報に基づいて計画を再構築します。エージェントは、出発時間の変更、輸送モードの変更、またはルートの変更を行うことができます。</font><font style="vertical-align: inherit;">残りのエージェントは、プログラムメモリに保存されている以前の計画に従います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理想的には、シミュレーションの後、ナッシュ均衡が達成される必要があります。つまり、他のエージェントの位置を悪化させることなく、どのエージェントも自分の位置を改善できない状況です。</font><font style="vertical-align: inherit;">通常、これは、住民が前日の経験を毎日再考することを考えると、時間とともに都市の道路で発生する状況です。</font><font style="vertical-align: inherit;">このため、1つのシナリオのフレームワークで少なくとも200回の反復が実行されます。</font><font style="vertical-align: inherit;">MATSimの作業サイクル全体は次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mr/zv/ds/mrzvds3njmsli5hbkiqvzhnuoju.png" alt="画像"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">理論から実践へ！ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のシナリオを実行するには、Java 1.8を搭載したIntellij IDEA（またはEclipse）が必要です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IDEを開き、</font><font style="vertical-align: inherit;">githubから</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MATSimリポジトリの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クローンを作成</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">する</font></a><font style="vertical-align: inherit;">と、最初のシナリオを実行する準備が整います。</font><font style="vertical-align: inherit;">とても簡単。</font><font style="vertical-align: inherit;">しかし、最初に、使用する入力ファイルを見てみましょう。</font><font style="vertical-align: inherit;">最も単純なシミュレーションには、ネットワーク、計画、構成の3つがあります。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通信網</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ネットワークファイルは、エージェントが移動するネットワークです。</font><font style="vertical-align: inherit;">ノードとノード/リンクで構成されます。</font><font style="vertical-align: inherit;">各リンクにはさまざまな属性があります。タイプ、セグメントの長さ、スループット、最大速度、車線数、片道交通、許可された交通手段などです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_n/5p/rx/_n5prxnenyiuei82fndy2uekigy.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
手動で都市グリッドを作成することは困難で、非実用的で非効率的です。</font><font style="vertical-align: inherit;">たとえば、サンクトペテルブルクのグリッドは、26,000個のノードと46,000個のリンクで構成されています。</font><font style="vertical-align: inherit;">しかし、良いニュースがあります。</font><font style="vertical-align: inherit;">グリッドはOpenStreetMapから変換し、オープンソースでもあるJOSMを使用して編集できます。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">予定</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
計画ファイルは、エージェントの日次計画の構造化された表現です。</font><font style="vertical-align: inherit;">最初のシナリオでは、家（type =” h”、link =” 1”）から朝（end = time =” 05:59”）に車（mode =” car”）で出発する100名のエージェントがいます（type = ” W”、リンク=” 20”）、その後しばらくして（dur =” 02:30”）帰宅します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8g/vh/sp/8gvhsph0hfmjwzpfspy0liqv7xo.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構成</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、構成ファイルで、必要なすべての設定がスクリプトを実行するように設定されています。</font><font style="vertical-align: inherit;">MATSimは、必要に応じてカスタマイズ、追加、または削除できるモジュールで構成されています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
設定ファイルの設定の多くは直感的ですが、常にいわゆるものを調べることもできます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MATSimブック</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ここで、2つのモジュールのみを検討します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スコアリングパラメーターはplanCalcScoreモジュールで設定されます。たとえば、エージェントは到着が遅れると18ユニットのペナルティを受け取ります。</font><font style="vertical-align: inherit;">1時間あたりのユーティリティ（それぞれ、10分の遅れは、3つのユーティリティユニットを失うことに相当します）; </font><font style="vertical-align: inherit;">一部のアクティビティ（パフォーマンスなど）のパフォーマンスは、1時間あたり6ユーティリティ単位をもたらし、車の運転には1時間あたり同じ6ユーティリティ単位がかかります。現実的なスコアリングパラメータを見つけるために、世論調査は「コスト」の分析に最もよく使用されます時間が。」</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戦略モジュールでは、再計画のパラメータが設定されている、例えば、薬剤（ModuleProbability）の何％が次の反復中に新しいルート（再ルーティング）をしようとします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dc/jf/yo/dcjfyoldbtrsg_zgrydyrrkc6ce.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このように、シミュレーションの目標は最低のコストでA地点からB地点までエージェントのGETを支援することです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクリプトの実行</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RunMatsimランナーを開いて最初のスクリプトを実行する時間です！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シミュレーション結果は、プロジェクトのルートの出力フォルダーにあります。視覚化の主なファイルは、ネットワークとイベントです。イベントファイルには、各エージェントのすべてのアクションに関する1秒ごとの情報が含まれているため、このファイルに基づいて、すべてのエージェントの動きの全体像を復元できます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して結果を視覚化でき</font><font style="vertical-align: inherit;">ます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
より代表的な結果を得るために、エージェントの数を500に増やします。これは、500エージェントの分布が最初の反復後にどのように見えるかです...反復</font></font><br>
<br>
<img src="https://habrastorage.org/webt/by/o3/zk/byo3zk14bt0yj1y7od2sth35nok.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
の開始時に、エージェントは</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ダイクストラ</font></a><font style="vertical-align: inherit;">を使用して最短の方法を計算しました</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークの1つのセクションのトラフィック強度がスループットを超えた結果、輻輳が発生しました。</font><font style="vertical-align: inherit;">しかし、別のルートを試す機会を彼らに与えたらどうでしょうか？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7l/_j/5_/7l_j5_q_n2g3roivtbnht8iwqfq.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
200回の反復（約5分）後、エージェントはネットワークに再配布され、リンク負荷レベルは0.5を超えなくなり、すべてのエージェントの平均移動時間は14％（5分）減少しました。</font><font style="vertical-align: inherit;">やったー、私たちはコルクを克服しました！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ああ、それがそんなに簡単だったら！</font><font style="vertical-align: inherit;">実際には、輸送システムははるかに複雑です。</font><font style="vertical-align: inherit;">次の記事では、サンクトペテルブルクや他の都市のモデルの開発に私がどのように参加したか、そして実際の問題について実際の問題をどのように解決したかを説明します。</font><font style="vertical-align: inherit;">サイエンティアポテンシアEST！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cj/v-/t0/cjv-t0plurhha0_szf4vhthcubo.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Andrey Kolomatsky、OTSLabのトランスポートアナリストによる投稿。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja494580/index.html">砂の中のフラクタル、または3つ以上が集まらない</a></li>
<li><a href="../ja494582/index.html">マイクロソフトはMCSE / MCSD / MCSA証明書を発行しなくなります</a></li>
<li><a href="../ja494586/index.html">線形代数の理論からの行列を扱う例としての関数型プログラミング</a></li>
<li><a href="../ja494590/index.html">コロナウイルス-パニックの神格化</a></li>
<li><a href="../ja494592/index.html">自家製マンガン蒸気レーザー</a></li>
<li><a href="../ja494598/index.html">スタンフォード大学の研究者は、走るための外骨格を開発しました</a></li>
<li><a href="../ja494600/index.html">discord.pyライブラリを使用して簡単なDiscordボットを作成する</a></li>
<li><a href="../ja494604/index.html">使い捨てマスクの再利用のためのUV滅菌ボックス</a></li>
<li><a href="../ja494606/index.html">月と惑星を観測する方法</a></li>
<li><a href="../ja494608/index.html">Ludum Dareの準備</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>