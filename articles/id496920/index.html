<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙇🏿 👃🏾 📣 Membuat rumah pintar dengan ASP.NET Core dan Arduino ✍🏽 🚒 👨🏻‍🚀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Selama karantina, ada banyak waktu yang saya ingin habiskan dengan menguntungkan dan mengkonsolidasikan pengetahuan saya yang diperoleh dari bidang ya...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Membuat rumah pintar dengan ASP.NET Core dan Arduino</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496920/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selama karantina, ada banyak waktu yang saya ingin habiskan dengan menguntungkan dan mengkonsolidasikan pengetahuan saya yang diperoleh dari bidang yang berbeda, ini ternyata merupakan proyek kecil yang mudah diulangi oleh pengembang mana pun.</font></font></p><br>
<p><img src="https://habrastorage.org/webt/um/fr/nm/umfrnmkjvnq8fulmpfowff6rpyk.jpeg" alt="gambar"></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya seorang siswa, saya tinggal di asrama. </font><font style="vertical-align: inherit;">Selalu ada masalah dengan iklim mikro di ruangan: panas, lalu dingin, maka tidak ada udara yang cukup, tetapi saya ingin hidup dalam kondisi normal untuk bekerja dan belajar yang nyaman.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadi mari kita mulai.</font></font></p><br>
<h2 id="neobhodimyy-minimum"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Persyaratan minimum</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di sudut ada kipas yang tua tapi kuat.</font></font></p><br>
<p><img src="https://habrastorage.org/webt/o9/_g/fs/o9_gfsimhqzoyykonnsbknmld5a.jpeg" alt="gambar"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada juga Uno Arduino yang tersisa dari sekolah. </font></font></p><br>
<p><img src="https://habrastorage.org/webt/pi/1_/t9/pi1_t9fver8upz-du4jhtdnlhoc.jpeg" alt="gambar"></p><br>
<p>     , -.      VPS  Centos 7. </p><br>
<h2 id="razrabotka"></h2><br>
<p>   Arduino.           . </p><br>
<pre><code class="cpp hljs">  <span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Adafruit_GFX.h&gt;</span></span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Adafruit_PCD8544.h&gt;</span></span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"DHT.h"</span></span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DHTPIN 2 <span class="hljs-comment">//  ,    </span></span>
  <span class="hljs-keyword">int</span> fanPin = <span class="hljs-number">3</span>;<font></font>
  byte incomingByte;<font></font>
  <span class="hljs-function">DHT <span class="hljs-title">dht</span><span class="hljs-params">(DHTPIN, DHT22)</span></span>;<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{<font></font>
    pinMode(fanPin, OUTPUT);<font></font>
    Serial.begin(<span class="hljs-number">9600</span>);<font></font>
    dht.begin();<font></font>
  }<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">//  2   </span>
    delay(<span class="hljs-number">2000</span>);
    <span class="hljs-comment">// </span>
    <span class="hljs-keyword">float</span> h = dht.readHumidity();
    <span class="hljs-comment">//  </span>
    <span class="hljs-keyword">float</span> t = dht.readTemperature();
    <span class="hljs-comment">//     .</span>
    <span class="hljs-keyword">if</span> (isnan(h) || isnan(t)) {<font></font>
      Serial.println(<span class="hljs-string">"   "</span>);
      <span class="hljs-keyword">return</span>;<font></font>
    } <font></font>
<font></font>
    Serial.print(<span class="hljs-string">" "</span>);<font></font>
    Serial.print( h );<font></font>
    Serial.print(<span class="hljs-string">" "</span>);<font></font>
    Serial.print(t);<font></font>
    Serial.print(<span class="hljs-string">" \n"</span>);<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (Serial.available() &gt; <span class="hljs-number">0</span>) {<font></font>
      incomingByte = Serial.read();<font></font>
<font></font>
      <span class="hljs-keyword">if</span>(incomingByte == <span class="hljs-string">'0'</span>){<font></font>
        digitalWrite(fanPin, HIGH);<font></font>
      }<font></font>
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (incomingByte == <span class="hljs-string">'1'</span>){<font></font>
        digitalWrite(fanPin, LOW); <font></font>
      }<font></font>
        Serial.print(<span class="hljs-string">"I received: "</span>);<font></font>
        Serial.println(incomingByte, DEC);<font></font>
    }<font></font>
  }</code></pre><br>
<p>      ASP.Net ore     Arduino      .      ,  /  -  Arduino.</p><br>
<pre><code class="cs hljs">        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Program</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
weatherContext db = <span class="hljs-keyword">new</span> weatherContext();
            <span class="hljs-keyword">var</span> serialPort = <span class="hljs-keyword">new</span> SerialPort(<span class="hljs-string">"COM3"</span>)<font></font>
            {<font></font>
                BaudRate = <span class="hljs-number">9600</span>,<font></font>
                Parity = Parity.None,<font></font>
                StopBits = StopBits.One,<font></font>
                DataBits = <span class="hljs-number">8</span>,<font></font>
                Handshake = Handshake.None<font></font>
            };<font></font>
            serialPort.Open();<font></font>
            <span class="hljs-keyword">var</span> reg = <span class="hljs-keyword">new</span> Regex(<span class="hljs-string">@"[0-9]{2}\.[0-9]{2}\s[0-9]{2}\.[0-9]{2}"</span>);<font></font>
<font></font>
            List&lt;DeviceDTO&gt; deviceDTOs = <span class="hljs-keyword">new</span> List&lt;DeviceDTO&gt;();
            <span class="hljs-keyword">var</span> userDevices = db.UserDevices.Where(d =&gt; d.UserId == <span class="hljs-number">0</span>);
            <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> userDevice <span class="hljs-keyword">in</span> userDevices)<font></font>
            {<font></font>
                <span class="hljs-keyword">var</span> device = db.Devices.Where(d =&gt; d.Id == userDevice.DeviceId).FirstOrDefault();
                <span class="hljs-keyword">if</span> (device != <span class="hljs-literal">null</span>)<font></font>
                {<font></font>
                    DeviceDTO deviceDTO = <span class="hljs-keyword">new</span> DeviceDTO()<font></font>
                    {<font></font>
                        Id = device.Id,<font></font>
                        Status = device.Status,<font></font>
                        Name = device.Name<font></font>
                    };<font></font>
                    deviceDTOs.Add(deviceDTO);<font></font>
                }<font></font>
            }<font></font>
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<font></font>
            {<font></font>
                DeviceActivator(serialPort, deviceDTOs);<font></font>
                <span class="hljs-keyword">string</span> message = serialPort.ReadExisting();<font></font>
                Console.WriteLine(<span class="hljs-string">"message is: "</span> + message);
                <span class="hljs-keyword">var</span> match = reg.Match(message);<font></font>
                IFormatProvider formatter = <span class="hljs-keyword">new</span> NumberFormatInfo { NumberDecimalSeparator = <span class="hljs-string">"."</span> };
                <span class="hljs-keyword">if</span> (match.Success)<font></font>
                {<font></font>
                    <span class="hljs-keyword">string</span> a = message.Substring(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>);
                    <span class="hljs-keyword">double</span> humidity = <span class="hljs-keyword">double</span>.Parse(a, formatter);
                    <span class="hljs-keyword">double</span> temperature = <span class="hljs-keyword">double</span>.Parse(message.Substring(<span class="hljs-number">6</span>, <span class="hljs-number">5</span>), formatter);<font></font>
<font></font>
                    List&lt;MeteringWriteDTO&gt; meterings = <span class="hljs-keyword">new</span> List&lt;MeteringWriteDTO&gt;();
                    <span class="hljs-keyword">var</span> meteringTemperature = <span class="hljs-keyword">new</span> MeteringWriteDTO()<font></font>
                    {<font></font>
                        Id = meteringCount + <span class="hljs-number">1</span>,<font></font>
                        Date = DateTime.UtcNow,<font></font>
                        Value = temperature,<font></font>
                        SensorId = <span class="hljs-number">0</span>,<font></font>
                    };<font></font>
                    meterings.Add(meteringTemperature);<font></font>
                    <span class="hljs-keyword">var</span> meteringHumidity = <span class="hljs-keyword">new</span> MeteringWriteDTO()<font></font>
                    {<font></font>
                        Id = meteringCount + <span class="hljs-number">1</span>,<font></font>
                        Date = DateTime.UtcNow,<font></font>
                        Value = humidity,<font></font>
                        SensorId = <span class="hljs-number">1</span>,<font></font>
                    };<font></font>
                    meterings.Add(meteringHumidity);<font></font>
                    SetSecondMetering(meterings);<font></font>
                    Console.WriteLine(message + DateTime.UtcNow + <span class="hljs-string">'\n'</span>);<font></font>
                    System.Threading.Thread.Sleep(<span class="hljs-number">1000</span>);<font></font>
                }<font></font>
                <span class="hljs-keyword">if</span> (DateTime.UtcNow.Second == <span class="hljs-number">0</span>)<font></font>
                {<font></font>
                    SetMinuteMetering();<font></font>
                }<font></font>
                <span class="hljs-keyword">if</span> (DateTime.UtcNow.Minute == <span class="hljs-number">0</span> &amp;&amp; DateTime.UtcNow.Second == <span class="hljs-number">0</span>)<font></font>
                {<font></font>
                    SetHourMetering();<font></font>
                }<font></font>
                <span class="hljs-keyword">if</span> (DateTime.UtcNow.Hour == <span class="hljs-number">0</span> &amp;&amp; DateTime.UtcNow.Minute == <span class="hljs-number">0</span> &amp;&amp; DateTime.UtcNow.Second == <span class="hljs-number">0</span>)<font></font>
                {<font></font>
                    AddDay();<font></font>
                }<font></font>
            }<font></font>
        }</code></pre><br>
<p>       PostgreSQL.</p><br>
<p>,       :</p><br>
<p><img src="https://habrastorage.org/webt/bj/ka/bv/bjkabvvlmbzvhdotzsbvrtbnj88.png" alt="gambar"></p><br>
<p>  ,    :</p><br>
<p><img src="https://habrastorage.org/webt/r0/ya/f3/r0yaf3nplbr1ewwo5rlocljzqji.png" alt="gambar"></p><br>
<p>      -   ASP.NET Core,     .     :</p><br>
<p><img src="https://habrastorage.org/webt/en/ll/mn/enllmn058sawfnyagnzw2vajj9g.png" alt="gambar"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seperti yang Anda lihat, semuanya singkat dan luas. </font><font style="vertical-align: inherit;">Anda dapat mengubah status perangkat dan melihat pembacaan sensor untuk jangka waktu tertentu.</font></font></p><br>
<h2 id="itogi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ringkasan</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menguji apa yang terjadi:</font></font></p><br>
<p><img src="https://habrastorage.org/webt/ya/wc/ga/yawcgay8gafew8_2rinn7n838pg.gif" alt="gambar"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semuanya berfungsi! </font><font style="vertical-align: inherit;">Kipas mulai dan berhenti hampir tanpa penundaan.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Direncanakan untuk menambahkan grafik dengan pembacaan sensor, sistem otorisasi sehingga pengguna lain dapat menggunakan sistem ini di rumah. </font><font style="vertical-align: inherit;">Anda dapat dengan mudah menyesuaikan nilai perangkat yang akan dihidupkan secara otomatis. </font><font style="vertical-align: inherit;">Juga, jumlah sensor dan perangkat seharusnya meningkat.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda tertarik dengan proyek ini, maka saya dapat membuat artikel terpisah untuk setiap langkah pengembangan.</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id496900/index.html">Impor USRLE melalui Apache NiFi. Langkah 1 - Unduh File melalui HTTPS</a></li>
<li><a href="../id496910/index.html">Bangun dan sesuaikan CDN Anda</a></li>
<li><a href="../id496912/index.html">ThinkPad E480 Intel pada Windows VS ThinkPad E495 AMD di Ubuntu apakah ada perbedaan?</a></li>
<li><a href="../id496914/index.html">Program desimal terpendek</a></li>
<li><a href="../id496916/index.html">Mengajar, Bernegosiasi, dan Berkonsultasi Jarak Jauh - Bagian 3: Server Pertemuan Yealink dan 4 Penawaran Khusus</a></li>
<li><a href="../id496922/index.html">Panduan tentang apk klien-server terbalik pada contoh pekerjaan NeoQUEST-2020</a></li>
<li><a href="../id496924/index.html">Routing Komponen Web</a></li>
<li><a href="../id496936/index.html">Mari mengenkripsi sertifikat SSL dengan manajer-sertifikat di Kubernetes</a></li>
<li><a href="../id496938/index.html">Superkomputer, sekuensing genom, dan prospek mengalahkan virus korona</a></li>
<li><a href="../id496940/index.html">Bagaimana insinyur GM menguji elektronik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>