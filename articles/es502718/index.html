<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëï üêë üå®Ô∏è El proyecto Talking Head, o la historia del desarrollo de software para un robot de telepresencia üå∏ üëåüèª üöö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mi trabajo en T-Systems comenz√≥ con un proyecto bastante inusual. En realidad, en gran parte debido a este proyecto, vine a la empresa. Durante nuestr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>El proyecto Talking Head, o la historia del desarrollo de software para un robot de telepresencia</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tsystems/blog/502718/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mi trabajo en T-Systems comenz√≥ con un proyecto bastante inusual. En realidad, en gran parte debido a este proyecto, vine a la empresa. Durante nuestra primera conversaci√≥n telef√≥nica, se me describi√≥ la tarea de la siguiente manera: es necesario desarrollar un sistema de traducci√≥n de voz para un robot de telepresencia. Escuch√© sobre el robot de telepresencia por primera vez, pero ¬øqu√© podr√≠a ser m√°s emocionante que desarrollar para robots? Por lo tanto, acept√© casi de inmediato.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/994/30b/6d5/99430b6d50dcc913d4ce745e20da2478.jpg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mi primera llamada al cliente. La tarea se plantea aproximadamente de esta manera: queremos que el sistema de traducci√≥n de voz funcione durante la conversaci√≥n a trav√©s de este robot de telepresencia, es decir, la persona habla ruso y, en el otro extremo del "cable", el robot reproduce su discurso en alem√°n y viceversa. Inmediatamente despu√©s de tal declaraci√≥n del problema fue seguida por la pregunta de cu√°nta gente y tiempo lleva desarrollar esto, y cu√°nto costar√°. Acordamos que mirar√© la documentaci√≥n del robot (el robot en s√≠ no estaba en nuestra oficina), estudiar√© los sistemas de traducci√≥n y dar√© estimaciones aproximadas en un mes, pero por ahora llamaremos un par de veces a la semana para aclarar los detalles.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La documentaci√≥n para el robot era bastante escasa, por decir lo menos. Era imposible encontrar otra cosa que materiales de marketing, as√≠ que escrib√≠ a los desarrolladores. El sistema existente hizo posible hacer una videollamada a un robot de telepresencia desde un navegador web y controlar sus movimientos en una ubicaci√≥n remota, y la idea obvia que tuve fue: ¬øes posible de alguna manera integrar un sistema de traducci√≥n de voz en el sistema actual?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Paralelamente, era necesario comprender c√≥mo se puede hacer el sistema de traducci√≥n y, lo que es m√°s importante, ¬øcu√°l ser√° la calidad de esta traducci√≥n? ¬øSer√° aceptable para el cliente? Por lo tanto, simult√°neamente con la correspondencia con los desarrolladores del robot, decid√≠ hacer una llamada con el cliente y comunicarme con √©l a trav√©s de Translator. Translator es una aplicaci√≥n m√≥vil de Microsoft que puede traducir y traducir por voz en diferentes idiomas. La aplicaci√≥n es gratuita, est√° instalada en Android o iOS y utiliza el servicio apropiado de Microsoft. Durante la llamada, tuvimos que averiguar si es posible mantener una conversaci√≥n de esta manera. Por la pureza del experimento, habl√© ruso y el cliente en alem√°n, es decir, ambos no sab√≠an el segundo idioma, llamaron a trav√©s de una llamada de conferencia y primero hablaron su idioma nativo en Translator,y luego llev√≥ el m√≥vil al tel√©fono de la conferencia.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En general, esto no parec√≠a muy conveniente, pero dio una idea general de la calidad de la traducci√≥n (un lector curioso dir√≠a que era m√°s f√°cil llamar por Skype con la traducci√≥n activada, pero por alguna raz√≥n no se nos ocurri√≥ en ese momento). </font><font style="vertical-align: inherit;">Despu√©s de la conversaci√≥n, decidimos que el proyecto y la calidad para el cliente son aceptables.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, de acuerdo con los resultados del primer mes de trabajo en el proyecto, se revel√≥ lo siguiente. </font><font style="vertical-align: inherit;">El sistema existente para el robot de telepresencia no se puede modificar, ya que los desarrolladores del robot no proporcionan una API para esto. </font><font style="vertical-align: inherit;">Sin embargo, result√≥ que el robot es una especie de Segway al que se conecta el iPad, y hay un SDK para iOS con el que puede controlar el Segway. </font><font style="vertical-align: inherit;">Es decir, debe escribir su propio sistema por completo, sin contar con la integraci√≥n con el existente. </font><font style="vertical-align: inherit;">Ha aparecido la primera representaci√≥n esquem√°tica de un producto futuro.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/0e0/bb9/bbe/0e0bb9bbe36876dc82235d7b0a78373e.png">&nbsp;<br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de una discusi√≥n con el cliente, se decidi√≥ que 3 personas trabajar√≠an en el proyecto: desarrolladores de iOS, desarrolladores de backend y frontend. Dividiremos el proyecto en etapas de 2 a 3 meses y estableceremos una meta para cada etapa con la conclusi√≥n de un contrato por separado. Al final de la etapa, una demostraci√≥n de los resultados al cliente e inversor del proyecto. Era importante para el cliente que para el a√±o nuevo ya hubiera un POC en funcionamiento. Desde que me un√≠ a la compa√±√≠a en julio, los plazos eran bastante ajustados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El objetivo para la primera etapa de 2 meses fue establecer dos desarrolladores m√°s, elegir servicios para videollamadas y traducci√≥n. Al final de la etapa, era necesario mostrar una aplicaci√≥n web simple que le permitiera hacer una videollamada con un servicio de traducci√≥n integrado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WebRTC ahora se usa ampliamente para hacer videollamadas, que actualmente es compatible con la mayor√≠a de los navegadores web. Sin embargo, en vista de los recursos limitados, no nos atrevimos a escribir en el WebRTC simple y elegimos un proveedor que proporcione el servicio adem√°s de WebRTC. Consideramos dos servicios: TokBox y Voxeet. Como resultado, eligieron TokBox. Es necesario tener en cuenta que estos servicios se pagan, por lo tanto, junto con la descripci√≥n de la arquitectura de la aplicaci√≥n, realizamos c√°lculos de costos durante un minuto de una videollamada con traducci√≥n.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/bdc/1ab/14d/bdc1ab14da6d21042d7c800e5cdd7b5b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n consideramos varios servicios para la traducci√≥n: TranslateYourWorld.com (proporciona una √∫nica API que une a varios proveedores de traducci√≥n a la vez, incluidos Google y Microsoft, pero la compa√±√≠a es muy peque√±a y poco confiable, al momento de escribir este art√≠culo su sitio web no se abri√≥), traducci√≥n de Google Cloud, Microsoft Speech. Como resultado, nos decidimos por el servicio MS Speech, ya que tiene una API m√°s conveniente, podemos transmitir la transmisi√≥n de audio al servicio a trav√©s de websocket e inmediatamente recibir grabaciones de audio con traducci√≥n, adem√°s de una buena calidad de traducci√≥n. Adem√°s, Microsoft es socio de nuestra empresa, lo que facilita la cooperaci√≥n con ellos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un desarrollador experimentado y talentoso (Misha, hola!) Full stack se uni√≥ a m√≠, y a principios de octubre, nuestro peque√±o equipo cerr√≥ con √©xito la siguiente etapa y demostr√≥ una aplicaci√≥n web simple que, utilizando los servicios TokBox y MS Speech, hizo posible organizar llamadas de video con traducci√≥n a varios idiomas. incluyendo ruso y alem√°n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La siguiente etapa fue dise√±ada por 3 meses y su objetivo era MVP con un robot. En esta etapa, el tercer y √∫ltimo desarrollador se uni√≥ a nosotros. Se eligi√≥ la siguiente pila de tecnolog√≠a para el proyecto: el backend: NodeJS + MongoDB, la interfaz web en ReactJS y Swift para la aplicaci√≥n iOS que interact√∫a con el robot. Una historia merece una historia separada sobre c√≥mo conduje un robot de Alemania a San Petersburgo y primero le expliqu√© al alem√°n, luego a nuestros funcionarios de aduanas, qu√© tipo de dispositivo hay en la caja.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/265/eef/3aa/265eef3aaee9258e004e83448e995da4.png"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/472/877/f5d/472877f5d568cdb19327362bf67d0988.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En las primeras etapas, aunque no ten√≠amos un robot, la aplicaci√≥n iOS solo nos permit√≠a hacer una videollamada con traducci√≥n. Cuando el robot estaba con nosotros, a principios de diciembre, agregamos r√°pidamente el env√≠o de se√±ales de control al robot a trav√©s de una conexi√≥n de llamada ya depurada, y fue posible controlar el robot presionando las flechas en el teclado. As√≠, en enero cerramos la tercera etapa y mostramos sus resultados al cliente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El resultado de la pen√∫ltima etapa fue un sistema depurado con la correcci√≥n de todos los errores cr√≠ticos. Al llamar a un robot, el operador puede ver la habitaci√≥n a trav√©s de la c√°mara principal y el piso a trav√©s de la c√°mara secundaria (para que sea m√°s f√°cil sortear obst√°culos). La cara del operador se muestra en la pantalla del robot. En este caso, la conversaci√≥n se puede llevar a cabo con la traducci√≥n a cualquiera de los 7 idiomas admitidos, que incluyen ruso, alem√°n y algunos otros idiomas. Durante la traducci√≥n, se ejecutan dos l√≠neas de texto: la primera es un discurso reconocido y la segunda traducci√≥n a otro idioma con iluminaci√≥n de karaoke, para que quede claro qu√© parte de la frase se est√° reproduciendo actualmente en el otro extremo de la conexi√≥n.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/009/a69/c5d/009a69c5d7e8e404d70812e4a06464a7.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y finalmente, en la √∫ltima etapa, agregamos un sistema de administraci√≥n de usuarios, grupos de usuarios, estad√≠sticas e informes sobre el n√∫mero y la duraci√≥n de las llamadas. </font><font style="vertical-align: inherit;">Por lo tanto, un a√±o despu√©s, completamos con √©xito el proyecto y lo transferimos al cliente.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante el trabajo en el proyecto, surgieron nuevas ideas interesantes. </font><font style="vertical-align: inherit;">Por ejemplo, use gafas de realidad virtual en el operador para que tenga el efecto de inmersi√≥n total y la capacidad de controlar el robot al girar la cabeza.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n realizamos un estudio sobre el tema de la creaci√≥n de un robot aut√≥nomo utilizando el marco ROS para "ense√±arlo" a fin de evitar obst√°culos por s√≠ solo y llegar del punto A al punto B o encontrarse con invitados en la entrada de la oficina. </font><font style="vertical-align: inherit;">En general, el proyecto result√≥ ser bastante fascinante, y qui√©n sabe qu√© otras caracter√≠sticas interesantes agregaremos al sistema en el futuro.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1fe/a1c/2ef/1fea1c2ef8947730c4f33ef4919a2f50.jpg"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es502704/index.html">C√≥mo reentrenamos el apoyo para hablar humanamente y qu√© sucedi√≥</a></li>
<li><a href="../es502706/index.html">El estado de las habilidades blandas.</a></li>
<li><a href="../es502712/index.html">¬øC√≥mo funciona una tira de direcci√≥n led?</a></li>
<li><a href="../es502714/index.html">Exportar datos de OpenStreetMap usando el editor visual en rete.js</a></li>
<li><a href="../es502716/index.html">¬øNo puedes compartir la computadora de tu casa? Haz uno de dos</a></li>
<li><a href="../es502720/index.html">Probar tendencias para observar en 2020</a></li>
<li><a href="../es502722/index.html">Silicon Valley en ruso. C√≥mo funciona # ITX5 en Innopolis</a></li>
<li><a href="../es502726/index.html">WebRTC Hacer una aplicaci√≥n con blackjack y videollamadas</a></li>
<li><a href="../es502728/index.html">Trucos interesantes y trucos SSH</a></li>
<li><a href="../es502730/index.html">¬øQu√© saben los dise√±adores industriales sobre los dispositivos que usa todos los d√≠as? O 50 a√±os transformando un mouse de computadora</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>