<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëáüèª üë©üèæ‚Äç‚úàÔ∏è üòû Wie z√§hlen wir Menschen, die Computer Vision verwenden? üîº üë©üèæ‚Äç‚úàÔ∏è üë©‚Äç‚ù§Ô∏è‚Äçüë®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Fotos aus offenen Quellen
 
 Massenversammlungen von Menschen verursachen Probleme in verschiedenen Bereichen (Einzelhandel, √∂ffentliche Dienste, Bank...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Wie z√§hlen wir Menschen, die Computer Vision verwenden?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/center2m/blog/496616/"><img src="https://habrastorage.org/webt/b2/gt/vy/b2gtvy54vvgxucterhxudpe5y58.png" alt="Bild"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fotos aus offenen Quellen</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Massenversammlungen von Menschen verursachen Probleme in verschiedenen Bereichen (Einzelhandel, </font><i><font style="vertical-align: inherit;">√∂ffentliche</font></i><font style="vertical-align: inherit;"> Dienste, Banken, Entwickler). Kunden m√ºssen Informationen √ºber die Anzahl der Personen an vielen Orten kombinieren und √ºberwachen: in Serviceb√ºros, Verwaltungsgeb√§uden, auf Baustellen usw. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Aufgaben der Personenz√§hlung haben vorgefertigte L√∂sungen, z. B. die Verwendung von Kameras mit integrierter Analyse. In vielen F√§llen ist es jedoch wichtig, eine gro√üe Anzahl von Kameras zu verwenden, die zuvor in verschiedenen Abteilungen installiert wurden. Dar√ºber hinaus ist eine L√∂sung, die die Besonderheiten eines bestimmten Kunden ber√ºcksichtigt, f√ºr ihn besser.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere Namen sind Tatyana Voronova und Elvira Dyaminova. Wir besch√§ftigen uns mit Datenanalysen im Center 2M. Obwohl das Thema das einfachste zu sein scheint, was derzeit bei Computer-Vision-Problemen ber√ºcksichtigt wird, m√ºssen selbst bei diesem Problem in Bezug auf die Praxis (Implementierung) viele komplexe und nicht triviale Teilaufgaben gel√∂st werden. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Zweck unseres Artikels ist es, die Komplexit√§t und die grundlegenden Ans√§tze f√ºr Computer-Vision-Probleme am Beispiel der L√∂sung eines der Grundprobleme aufzuzeigen.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> F√ºr die folgenden Materialien m√∂chten wir Kollegen gewinnen: Entwickler, Ingenieure, Projektmanager f√ºr Videoanalysen, damit sie √ºber die beteiligten Computerressourcen, Geschwindigkeitsmessungen, die Nuancen der Kommunikation mit Kunden und Projektimplementierungsgeschichten sprechen. Wir werden uns auf einige der verwendeten Datenanalysemethoden konzentrieren.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beginnen wir mit der folgenden Anweisung: Sie m√ºssen die Anzahl der Personen in der Warteschlange im Serviceb√ºro anzeigen. </font><font style="vertical-align: inherit;">Wenn die Warteschlange gem√§√ü den internen Regeln des Kundenunternehmens als kritisch eingestuft wird, wird das interne Szenario ausgearbeitet:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benachrichtigung √ºber die Notwendigkeit, einen zus√§tzlichen Eingang / eine zus√§tzliche Kasse zu er√∂ffnen;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manageranruf;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informationen √ºber die Notwendigkeit, Personenstr√∂me an andere (kostenlosere) Kassen umzuleiten.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So erspart unsere Arbeit den Kunden viele Nerven.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwendete Modelle f√ºr maschinelles Lernen</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Personen Silhouetten Erkennung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zun√§chst haben wir uns f√ºr ein bereits geschultes Modell zur Erkennung von Personen (Silhouetten) entschieden, da solche Aufgaben ziemlich gute L√∂sungen bieten, beispielsweise die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Definition von Silhouetten</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der TensorFlow-Bibliothek gibt es also eine gro√üe Anzahl </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vorgefertigter Modelle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach der Durchf√ºhrung der Tests haben wir uns zun√§chst f√ºr zwei Architekturen entschieden: Faster R-CNN und YOLO v2. Sp√§ter, nachdem die neue Version erschienen war, haben wir YOLO v3 hinzugef√ºgt. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beschreibung der Modelle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Beispiel f√ºr ein Erkennungsergebnis f√ºr YOLO v2 (im Folgenden werden Bilder aus freien Quellen aufgenommen - wir k√∂nnen keine Bilder von Kundenkameras ver√∂ffentlichen): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7d/7t/ci/7d7tciq9yzbof4hsrp00ckrbh7o.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Beispiel f√ºr ein Erkennungsergebnis f√ºr Faster R-CNN:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lg/qg/gq/lgqggq6y-hq6bbkmpkynivfy1co.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Vorteil von YOLO ist, dass das Modell schneller reagiert, und bei einigen Aufgaben ist dies wichtig. In der Praxis haben wir jedoch festgestellt, dass die Verwendung von Faster R-CNN korrekter ist, wenn es nicht m√∂glich ist, eine vorab trainierte Version des Modells zu verwenden und eine Umschulung f√ºr Ihr spezielles Trainingsset erforderlich ist. Wenn die Kamera weit genug von Personen entfernt installiert wurde (die H√∂he der Silhouette betr√§gt weniger als 100 Pixel f√ºr eine Aufl√∂sung von 1920 x 1080) oder zus√§tzlich die pers√∂nliche Schutzausr√ºstung einer Person erkannt werden musste: Helme, Befestigungselemente, Schutzkleidungselemente, in solchen Situationen ergibt sich die Qualit√§t des Trainings in Ihrem eigenen Datensatz (bis zu 10) tausend verschiedene Objekte) f√ºr YOLO v2 waren wir nicht zufrieden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
YOLO v3 zeigte akzeptable Ergebnisse, jedoch ergaben Geschwindigkeitstests keinen signifikanten Vorteil f√ºr YOLO v3 im Vergleich zu schnellerem R-CNN. Dar√ºber hinaus haben wir einen Weg gefunden, die Erkennungsgeschwindigkeit durch Stapelverarbeitung (Gruppenverarbeitung von Bildern) und selektive Analyse von Bildern zu erh√∂hen (mehr dazu weiter unten).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr alle Modelltypen haben wir die Genauigkeit durch Nachbearbeitung der Ergebnisse verbessert: Wir haben Ausrei√üer in Werten entfernt und die h√§ufigsten Werte f√ºr eine Reihe aufeinanderfolgender Frames verwendet. Eine Sekunde von einer Kamera entspricht normalerweise 25-50 Bildern. Um die Leistung zu verbessern (mit zunehmender Anzahl von Kameras), analysieren wir nat√ºrlich nicht jedes Bild, aber es ist oft m√∂glich, √ºber einen Zeitraum von mehreren Sekunden eine endg√ºltige Antwort zu geben, dh mehrere Bilder zu verwenden. Diese Entscheidung kann dynamisch getroffen werden, wobei die Gesamtzahl der Kameras (Videostreams zur Verarbeitung) und die verf√ºgbare Rechenleistung ber√ºcksichtigt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Beispiel f√ºr die Verwendung des Faster R-CNN-Modells, das auf unserem eigenen Datensatz trainiert wurde: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cn/b9/8i/cnb98ihri3ztp_kd6eanszvv2g4.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt f√ºhren wir Tests mit dem </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">SSD-300-</font></a><font style="vertical-align: inherit;"> Modell durch</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wir hoffen, dass wir dadurch die Produktivit√§t steigern und gleichzeitig eine akzeptable Qualit√§t der Anerkennung erhalten.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie Ihren eigenen Trainingsdatensatz</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In F√§llen, in denen Sie Ihr eigenes Lernset erstellen m√∂chten, haben wir f√ºr uns das folgende Verfahren entwickelt:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir sammeln Videoclips mit den erforderlichen Objekten: Kundenvideos, √∂ffentlich zug√§ngliche Videos (angelegte Videos, √úberwachungskameras);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir schneiden und filtern Videofragmente so, dass der resultierende Datensatz √ºber verschiedene Erkennungsobjekte verteilt ist.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir verteilen Frames zwischen Markern, um die erforderlichen Objekte hervorzuheben. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Beispiel f√ºr ein Markup-Tool</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úberpr√ºfen Sie selektiv die Ergebnisse der Marker.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei Bedarf f√ºhren wir eine Augmentation durch: Normalerweise f√ºgen wir Windungen hinzu, reflektieren, √§ndern die Sch√§rfe (bilden einen erweiterten markierten Datensatz).</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erkennungszonen verwenden</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eines der Probleme beim Z√§hlen von Personen in einer Linie ist der Schnittpunkt der Sichtbereiche mehrerer Kameras. </font><font style="vertical-align: inherit;">In einem Raum kann mehr als eine Kamera installiert werden. Daher ist es wichtig, den √ºberlappenden Bildbereich beizubehalten. Wenn eine Person das Sichtfeld mehrerer Kameras betritt, sollte dies einmal ber√ºcksichtigt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einigen Situationen m√ºssen Personen nur in einem bestimmten Bereich des Raums (in der N√§he der Servicefenster) oder der Plattform (in der N√§he der Ausr√ºstung) erkannt werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aus offensichtlichen Gr√ºnden ist es falsch zu √ºberpr√ºfen, ob das Rahmenrechteck (Kasten / Rahmen), das die gesamte Person einschr√§nkt, in die Zone (Polygon) f√§llt. </font><font style="vertical-align: inherit;">In dieser Situation wird der Boden (Drittel / H√§lfte) des Rechtecks ‚Äã‚Äãin Punkte - Knoten (ein Raster von 10 mal 10 Knoten wird genommen) unterteilt und das Fallen in die Zone der einzelnen ausgew√§hlten Knoten wird √ºberpr√ºft. </font><font style="vertical-align: inherit;">"Signifikante" Knoten werden vom Systemadministrator basierend auf der Geometrie des Raums zugewiesen (die Standardwerte werden ebenfalls ausgew√§hlt - wenn die Einstellung f√ºr einen bestimmten Raum nicht eingegeben wird). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fl/ck/6w/flck6wqyyr5ojbwpeuqebuidzoe.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dar√ºber hinaus wird die Anwendung der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mask R-CNN-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Architektur </font><font style="vertical-align: inherit;">f√ºr unsere Aufgaben </font><font style="vertical-align: inherit;">getestet </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mit dieser Methode k√∂nnen Sie den Umriss der Silhouette bestimmen. Auf diese Weise k√∂nnen Sie </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bei der Analyse des Schnittpunkts mit einer Zone nicht mehr ein Randrechteck verwenden</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<img src="https://habrastorage.org/webt/et/wy/oq/etwyoqwuuebhqh4jyxmf8j509-0.jpeg" alt="Bild"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein anderer Ansatz: Kopferkennung (Modelltraining)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qualit√§t wird nicht immer durch Auswahl eines Modells, Erh√∂hen / √Ñndern des Trainingssatzes und anderer rein ML-Methoden erreicht. Manchmal kann eine entscheidende Verbesserung nur erreicht werden, indem die gesamte Formulierung des Problems ge√§ndert wird (zum Beispiel in unserem Problem). In diesen Warteschlangen dr√§ngen sich die Menschen und √ºberlappen sich daher, sodass die Erkennungsqualit√§t h√§ufig nicht ausreicht, um nur diese Methode unter realen Bedingungen anzuwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nehmen Sie das Bild unten. Wir schlie√üen unsere Augen vor der Tatsache, dass das Bild auf dem Telefon aufgenommen wurde und der Neigungswinkel nicht dem Neigungswinkel von CCTV-Kameras entspricht. Der Rahmen enth√§lt 18 Personen, und das Silhouettenerkennungsmodell identifizierte 11 Personen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tw/qe/lr/twqelrrbt5dsacykfcb_2vm1zwe.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Ergebnisse zu verbessern, haben wir uns von der Definition von Silhouetten zur Definition von Zielen bewegt. Zu diesem Zweck wurde das Faster R-CNN-Modell anhand eines Datensatzes aus trainiert</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (der Datensatz enth√§lt Frames mit einer unterschiedlichen Anzahl von Personen, einschlie√ülich gro√üer Cluster, unter denen sich Personen unterschiedlicher Rassen und Altersgruppen befinden). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au√üerdem haben wir den Datensatz mit Rahmen aus dem Material (von den Kameras) des Kunden um etwa ein Drittel angereichert (haupts√§chlich aufgrund der Tatsache, dass der urspr√ºngliche Datensatz nur wenige K√∂pfe in H√ºten hatte). Ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tutorial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> war n√ºtzlich, um ein Modell selbst zu lernen </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hauptprobleme sind die Bildqualit√§t und die Gr√∂√üe der Objekte. Die K√∂pfe haben unterschiedliche Gr√∂√üen (wie aus dem obigen Bild ersichtlich), und die Rahmen der Kameras des Kunden hatten eine Aufl√∂sung von 640 x 480. Aus diesem Grund werden interessante Objekte (Hauben, Weihnachtskugeln, Stuhllehnen) manchmal als K√∂pfe erkannt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Beispiel haben wir im Trainingsdatensatz K√∂pfe beschriftet:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q6/u6/di/q6u6di-qwgmrlotfsyxeynpx-1q.png" alt="Bild"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Dies sind K√∂pfe in einem Datensatz. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rn/2r/es/rn2resr7gorbgtezqs7jhoozzhs.jpeg" alt="Bild"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- und das ist die R√ºckenlehne des Stuhls, aber das Modell m√∂chte glauben, dass dies der Kopf ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen kommt dieses Modell jedoch in F√§llen mit einer massiven Konzentration von Menschen recht gut zurecht. Im obigen Rahmen identifizierte unser Modell also 15 Personen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/b2/gt/vy/b2gtvy54vvgxucterhxudpe5y58.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Bild konnte das Modell also nicht nur drei K√∂pfe finden, die durch Fremdk√∂rper erheblich blockiert waren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Qualit√§t des Modells zu verbessern, k√∂nnen Sie die aktuellen Kameras durch Kameras mit einer h√∂heren Aufl√∂sung ersetzen und zus√§tzlich den Trainingsdatensatz sammeln und markieren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es sollte jedoch ber√ºcksichtigt werden, dass bei einer kleinen Anzahl von Personen die Methode zur Erkennung durch Silhouetten und nicht durch K√∂pfe besser geeignet ist, da es schwieriger ist, die Silhouette vollst√§ndig zu √ºberlappen oder mit Fremdk√∂rpern zu verwechseln. </font><font style="vertical-align: inherit;">Wenn es jedoch eine Menschenmenge gibt, gibt es keinen Ausweg. Um die Anzahl der Personen in einer Reihe zu z√§hlen, wurde beschlossen, zwei Modelle parallel zu verwenden - f√ºr K√∂pfe und Silhouetten - und die Antwort zu kombinieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Silhouetten und K√∂pfe, ein Beispiel f√ºr ein Erkennungsergebnis:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ku/rf/jt/kurfjth3rdirwguzsqnsrgnketg.png" alt="Bild"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Genauigkeitswertung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Testen des Modells wurden Rahmen ausgew√§hlt, die nicht an der Schulung teilgenommen haben (Datensatz mit einer unterschiedlichen Anzahl von Personen auf dem Rahmen, in verschiedenen Winkeln und verschiedenen Gr√∂√üen). Um die Qualit√§t des Modells zu bewerten, haben wir R√ºckruf und Pr√§zision verwendet. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√ºckruf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Vollst√§ndigkeit zeigt, welchen Anteil von Objekten, die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tats√§chlich</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zur positiven Klasse geh√∂ren, richtig vorhergesagt haben. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pr√§zision</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Genauigkeit zeigt, welchen Anteil von Objekten, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> als Objekte einer positiven Klasse </font><b><font style="vertical-align: inherit;">erkannt wurden</font></b><font style="vertical-align: inherit;"> , korrekt vorhergesagt wurden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei Bildern von Kameras auf Teststandorten (Bilder in diesen R√§umen befanden sich im Datensatz) Metriken: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9k/dc/to/9kdctoymo_ibp2pyhzxhnllrtkk.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei Bildern von neuen Kameras (diese R√§ume befanden sich nicht im Datensatz):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wn/pc/a0/wnpca03c5bbmnermgoiuh9zegzy.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn der Kunde eine Ziffer, eine Kombination aus Genauigkeit und Vollst√§ndigkeit, ben√∂tigte, gaben wir ein </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harmonisches Mittel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F-Ma√ü an</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<img src="https://habrastorage.org/webt/ye/3o/aw/ye3oawilyj5rh_cvzpxr0c0sx3w.png" alt="Bild"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berichterstattung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein wichtiger Teil des Dienstes ist die Statistik. Zusammen mit einzelnen Frames (und von ihnen gez√§hlten engagierten Personen) m√∂chten Kunden die Ergebnisse in Form von vorgefertigten Berichten (Dashboards) mit durchschnittlicher / maximaler Belegung f√ºr verschiedene Zeitintervalle anzeigen. Das Ergebnis ist oft in Form von Grafiken und Diagrammen interessant, die die Verteilung der Anzahl der Personen √ºber die Zeit charakterisieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserer L√∂sung f√ºr den Rahmen wird beispielsweise die Anzahl der Personen f√ºr beide Modelle (Silhouetten und K√∂pfe) berechnet und das Maximum ausgew√§hlt. Befinden sich mehrere Kameras im Raum, wird die Bild√ºberlappungszone (√ºber die Schnittstelle voreingestellt) gespeichert, und wenn eine Person den Bereich mehrerer Kameras betritt, wird sie einmal ber√ºcksichtigt.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes wird der Wert der Anzahl von Personen in der Warteschlange f√ºr mehrere aufeinanderfolgende Rahmen gebildet - f√ºr das Intervall </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œît</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Innerhalb einer Stunde werden Werte f√ºr mehrere solcher Intervalle f√ºr jeden Raum entladen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Gr√∂√üe des Zeitintervalls und die Anzahl der Intervalle werden basierend auf der Anzahl der R√§ume und der verwendeten Rechenleistung bestimmt. F√ºr jedes Intervall wird ein Array von Werten mit der Anzahl der Personen im Raum gebildet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der h√§ufigste Wert (Modus) wird ausgew√§hlt. Wenn mehrere Werte mit derselben Frequenz vorhanden sind, wird das Maximum ausgew√§hlt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der resultierende Wert ist die Anzahl der Personen in der Warteschlange zum Zeitpunkt </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unmittelbar nach dem fraglichen Intervall. </font><font style="vertical-align: inherit;">In nur einer Stunde wird eine Reihe von Werten f√ºr verschiedene Intervalle erhalten - dh Werte zu den Zeitpunkten </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t_1, t_2 .... </font><font style="vertical-align: inherit;">t_n</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weiter f√ºr </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t_1, t_2 .... </font><font style="vertical-align: inherit;">t_n werden die</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Maximal- und Durchschnittswerte der Anzahl der Personen berechnet - diese Werte werden im Bericht als Spitzen- und Durchschnittslasten f√ºr eine bestimmte Stunde angezeigt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diagramm der zeitlichen Verteilung der Personen bei maximaler Belastung (einfaches Beispiel): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/um/nb/zp/umnbzpjh1aj_0gdt1qhwywj8niu.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diagramm der zeitlichen Verteilung der Personen bei durchschnittlicher Belastung (einfaches Beispiel):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rj/h4/rx/rjh4rxxkyftekb8tspvwylamwu8.png" alt="Bild"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menschenmassen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abschlie√üend m√∂chte ich der Vollst√§ndigkeit halber das Thema sehr gro√üer Menschenmengen erw√§hnen, zum Beispiel Menschenmengen in Stadien an Orten mit starkem Menschenverkehr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei diesen Aufgaben geht es darum, die Gr√∂√üe der Menge zu sch√§tzen: Wenn es sich um eine Menge von 300 Personen handelt, wird eine Antwort von 312 oder 270 als akzeptabel angesehen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Praxis mussten wir solche Probleme nicht mithilfe von Videoanalysen l√∂sen (wenn es sich um eine organisierte Veranstaltung handelt, ist es f√ºr jede Person einfacher, ein Etikett auszustellen). Wir haben jedoch Tests durchgef√ºhrt. F√ºr solche Aufgaben werden separate Methoden verwendet, eine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úbersicht √ºber die Methoden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ergebnis des Modells aus der √úberpr√ºfung (auf CSRNet vorab trainiertes Modell) wurde reproduziert:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vq/ks/-k/vqks-kmt4kykj1vuls2t9dr18sc.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Winkel ist wichtig f√ºr die Einstellungen dieses Modells. Wenn der Aufnahmeort festgelegt ist, ist das Ergebnis besser als bei Anwendung auf verschiedene Bilder. </font><font style="vertical-align: inherit;">Im Allgemeinen besteht die M√∂glichkeit, dieses Modell neu zu trainieren. Die Qualit√§t kann w√§hrend des Modellbetriebs verbessert werden, wenn echtes Video von installierten Kameras eingeschaltet ist. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autoren des Artikels: Tatyana Voronova (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tvoronova</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), Elvira Dyaminova (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elviraa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de496600/index.html">–í —Ä–∞–º–∫–∞—Ö –∏–º–ø–æ—Ä—Ç–æ–∑–∞–º–µ—â–µ–Ω–∏—è –ú–æ—Å–∫–≤–∞ –∑–∞–∫—É–ø–∞–µ—Ç –ü–û¬†Microsoft –Ω–∞ 90 –º–ª–Ω —Ä—É–±–ª–µ–π</a></li>
<li><a href="../de496608/index.html">Food Design Digest, M√§rz 2020</a></li>
<li><a href="../de496610/index.html">Router Banana Pi R64 - Debian, Wireguard, ILV</a></li>
<li><a href="../de496612/index.html">Ja, mein alter Laptop ist um ein Vielfaches leistungsst√§rker als Ihr Produktionsserver</a></li>
<li><a href="../de496614/index.html">Wie haben sich die Habrachen in 5 Jahren ver√§ndert? Oder "280 Wochen sp√§ter"</a></li>
<li><a href="../de496620/index.html">Beliebte Fehler in Englisch bei IT-Fachleuten</a></li>
<li><a href="../de496626/index.html">Geselle und Drachen: Wie man dem Praktikanten hilft, sich als Team anzupassen</a></li>
<li><a href="../de496630/index.html">Interface Bikes Giftiger Gro√üvater. "Artefakte mein Arsch!" (s1 e5)</a></li>
<li><a href="../de496634/index.html">Schule 21 f√ºr den Antragsteller</a></li>
<li><a href="../de496638/index.html">F #, Markierungsalgorithmus f√ºr verbundene Bildkomponenten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>