<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéôÔ∏è üëò üìõ Medici√≥n de la demora del teclado al fot√≥n utilizando un sensor √≥ptico üë©‚Äçüë©‚Äçüëß‚Äçüëß üìµ üôå</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Para medir el tiempo de respuesta o la latencia en computadoras e interfaces, he estado usando la aplicaci√≥n Is It Snappy con una c√°mara de iPhone de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Medici√≥n de la demora del teclado al fot√≥n utilizando un sensor √≥ptico</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505260/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para medir el tiempo de respuesta o la latencia en computadoras e interfaces, he estado usando la aplicaci√≥n </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is It Snappy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con una c√°mara de iPhone de alta velocidad para contar cuadros entre una pulsaci√≥n de tecla y un cambio de pantalla. Sin embargo, el problema es determinar los cuadros exactos para la sincronizaci√≥n por ojo, lo cual es molesto cuando se realizan muchas pruebas. Tambi√©n hace que sea dif√≠cil medir la variabilidad de los resultados. Ya he simplificado estas pruebas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agregando un modo al firmware del teclado que cambia el color del LED despu√©s de enviar el evento a trav√©s de USB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pero esto solo aumenta ligeramente la velocidad y la precisi√≥n. Me gustar√≠a algo mejor </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces segu√≠ los pasos de mi amigo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rafa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e hizo un probador de retardo de hardware, que env√≠a eventos de teclado, y luego, con la ayuda de un sensor √≥ptico, mide el tiempo que lleva cambiar la pantalla. </font><font style="vertical-align: inherit;">Fue bastante f√°cil, y en este art√≠culo hablar√© sobre algunos de los resultados, as√≠ como sobre las dificultades de las pruebas de retraso de alta calidad y c√≥mo hacer su propio probador.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mi probador se basa en un sensor de luz con Amazon. </font><font style="vertical-align: inherit;">Est√° montado en un tr√≠pode ajustable conectado al microcontrolador </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teensy LC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que presiona 'a' y espera a que cambie el nivel de luz, elimina la letra y luego contin√∫a recolectando muestras mientras mantiene presionado el bot√≥n. </font><font style="vertical-align: inherit;">Con solo presionar un bot√≥n, muestra un hermoso histograma del retraso, que se ve as√≠:</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lat i = 60.3 +/- 9.3, a = 60, d = 59 (n = 65, q = 41) | </font><font style="vertical-align: inherit;">239_ |</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta l√≠nea muestra el retraso promedio de las inserciones ( </font></font><code>i=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), las eliminaciones ( </font></font><code>d=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) y su combinaci√≥n ( </font></font><code>a=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), la desviaci√≥n est√°ndar del tiempo de inserci√≥n ( </font></font><code>+/-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), el n√∫mero de mediciones ( </font></font><code>n=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) y la calidad ( </font></font><code>q=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), as√≠ como un peque√±o ascii-histograma, donde cada s√≠mbolo representa un fragmento (cubo) ) en 10 ms, y los n√∫meros del 1 al 9 representan proporcionalmente cu√°n lleno est√° este dep√≥sito. El s√≠mbolo </font></font><code>_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">significa un dep√≥sito con al menos una muestra, pero no es suficiente para llenar un noveno dep√≥sito, por lo que se trata de una cola de retraso con un peque√±o n√∫mero de muestras aleatorias. Esto es lo que parece (en los monitores de fotos estaban en modo vertical, pero todas las pruebas se realizaron en modo horizontal): </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/415/1f5/016/4151f5016c68014682c8e09eac08b240.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tambi√©n lo hice para que cuando se presiona el bot√≥n nuevamente, se muestren todos los resultados de medici√≥n, por ejemplo,</font></font><code>[35, 35, 33, 44]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para que puedas generar un gr√°fico:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/326/7b9/7ef/3267b97ef54e907c5d656dd0b7ae75d2.png"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monitorear el tiempo de respuesta</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comenzar√© con mi conjunto favorito de resultados:</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sublime Text, macOS, modo de pantalla completa sin distracciones en dos monitores 4k:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lat i = 35.3 +/- 4.7, a = 36, d = 36 (n = 67, q = 99) | </font><font style="vertical-align: inherit;">193 </font><font style="vertical-align: inherit;">Dell P2415Q arriba</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lat i = 52.9 +/- 5.0, a = 53, d = 54 (n = 66, q = 45) | </font><font style="vertical-align: inherit;">_391 | </font><font style="vertical-align: inherit;">Parte inferior de Dell P2415Q</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lat i = 65.1 +/- 5.0, a = 64, d = 63 (n = 109, q = 111) | </font><font style="vertical-align: inherit;">_292 | </font><font style="vertical-align: inherit;">HP Z27 superior</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lat i = 79.7 +/- 5.0, a = 80, d = 80 (n = 98, q = 114) | </font><font style="vertical-align: inherit;">89_ | </font><font style="vertical-align: inherit;">HP Z27 inferior</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay algo que ver aqu√≠:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En primer lugar, me gusta que el formato de una sola l√≠nea de un histograma de ancho fijo le permita colocar todos los resultados uno al lado del otro en un archivo de texto y marcarlos para compararlos.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vemos la diferencia esperada de 16 ms entre el tiempo de respuesta en la parte superior e inferior de la pantalla debido al tiempo de exploraci√≥n de las l√≠neas para cuadros a 60 Hz.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La desviaci√≥n est√°ndar no es muy diferente de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.6 ms</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de una distribuci√≥n uniforme de resultados con un tiempo de actualizaci√≥n de pantalla de 16 ms.</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°El HP Z27 tiene un tiempo de respuesta de aproximadamente 30 ms m√°s que el Dell P2415Q! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y esta medida es hasta el comienzo de la visualizaci√≥n del s√≠mbolo. </font><font style="vertical-align: inherit;">Estoy bastante seguro de que la pantalla completa tambi√©n lleva m√°s tiempo en el Z27. </font><font style="vertical-align: inherit;">Es decir, en Z27 en el editor Sublime, ¬°casi la mitad de todo el retraso es un retraso adicional del monitor!</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas las mediciones en el resto de este art√≠culo se realizaron en mi Dell P2415Q. </font><font style="vertical-align: inherit;">Ambos monitores tienen un tiempo de respuesta "r√°pido", el Z27 tiene una configuraci√≥n de tiempo de respuesta a√∫n m√°s r√°pida, pero solo afecta el tiempo de transici√≥n de principio a fin (tiempo de transici√≥n) e introduce pistas fantasma feas, sin ayudar a reducir el retraso inicial.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dificultades de medici√≥n</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la mayor√≠a de los m√©todos conocidos, medir la calidad del retraso es en realidad m√°s dif√≠cil de lo que piensas. </font><font style="vertical-align: inherit;">Para obtener resultados realistas, puse m√°s esfuerzo que la mayor√≠a de los experimentadores, pero todo fall√≥ las primeras veces, as√≠ que tuve que corregir los errores.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Medici√≥n real de retardo de extremo a extremo</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La raz√≥n principal para usar un probador de hardware es que hay muchos m√©todos incompletos y falsos para medir el retraso de extremo a extremo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay un art√≠culo conocido y realmente excelente llamado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Imprimimos con placer"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con buen an√°lisis y bellos gr√°ficos. Compara el retraso de varios editores de texto en diferentes sistemas operativos. Pero el autor implement√≥ mediciones mediante la simulaci√≥n de eventos de entrada y el raspado de pantalla utilizando las API del sistema. Yo mismo no tom√© medidas repetidas, por lo que no puedo se√±alar nada espec√≠ficamente incorrecto, pero hay muchos problemas potenciales con este enfoque. Por ejemplo, verificar el b√∫fer de pantalla en la CPU puede penalizar injustificadamente las aplicaciones que se procesan en la GPU, debido a las copias del b√∫fer de la ventana en algunos casos donde la captura puede funcionar. La entrada de simulaci√≥n puede ser diferente a las pulsaciones de teclas reales. A pesar de esto, incluso en el caso de mediciones de muy alta calidad y resultados objetivos (y no podemos estar seguros de esto sin verificarlos en la prueba completa),Estos resultados no nos dicen el tiempo de respuesta completo de principio a fin, lo cual es importante para una experiencia real.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sondeo USB de 1000 Hz</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una de las fuentes de retraso que experimentan los usuarios, pero que mi evaluador no mide, es la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">latencia del teclado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Muchos teclados pueden duplicar el tiempo de respuesta que med√≠ ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como mi teclado anterior</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) debido a intervalos de sondeo USB de 8 milisegundos, baja velocidad de escaneo de la rejilla del teclado, firmware lento y dise√±o mec√°nico controvertido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para construir un probador de retardo con una baja dispersi√≥n para emular el teclado, no puede tomar cualquier microcontrolador; por lo general, hay una encuesta predeterminada con una frecuencia de 125 Hz. </font><font style="vertical-align: inherit;">Mi microcontrolador </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teensy LC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es uno de los pocos que usa 1000 Hz por defecto.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asegurar un buen nivel de se√±al</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al principio, cuando dise√±√© mi probador para el tiempo de respuesta, no med√≠ la intensidad de la se√±al en absoluto. Al final, me confund√≠: en la misma aplicaci√≥n, en la misma pantalla en escenarios ligeramente diferentes, se obtuvieron resultados completamente diferentes. Hice algunas pruebas y descubr√≠ que a veces la se√±al es muy d√©bil en fuentes peque√±as con una ubicaci√≥n deficiente de los sensores, por lo que el sensor funciona solo al final de la salida del s√≠mbolo, aunque deber√≠a funcionar al principio (esta es su propia elecci√≥n subjetiva dif√≠cil).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sab√≠a que la raz√≥n deber√≠a ser el momento de una transici√≥n completa desde el principio hasta el final de la pantalla, porque incluso antes de escribir el firmware, jugu√© con una simple encuesta del sensor √≥ptico cada milisegundo, usando el plotter Arduino para generar los resultados. Simplemente escribiendo y borrando caracteres para mirar la se√±al. Puede notar que en algunas combinaciones del sensor √≥ptico y el monitor, la transici√≥n completa dura casi 100 ms. Pero la grabaci√≥n de video con </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is It Snappy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da la impresi√≥n de que la transici√≥n completa en el monitor Z27 toma solo unos 20 ms. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d32/500/02b/d3250002bac009103ed40a5c47cb56bc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para la correcci√≥n, agregu√© una medici√≥n de la intensidad de la se√±al de pico a pico despu√©s de una transici√≥n completa para verificar que obtengo una resoluci√≥n de medici√≥n adecuada para mi umbral en cinco pasos al comienzo de la transici√≥n. Este es el n√∫mero que ves despu√©s</font></font><code>q=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Al final result√≥ que, es muy importante establecer un tama√±o de fuente grande y un alto brillo de pantalla.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fuerte dispersi√≥n de peque√±as diferencias</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es posible que diferencias aparentemente insignificantes en el objeto de medici√≥n conduzcan a serias diferencias de retraso. Por ejemplo, quer√≠a ver si hay una diferencia significativa entre el tiempo de respuesta de Sublime y VSCode al seleccionar texto en un archivo peque√±o en comparaci√≥n con un archivo grande con una gram√°tica de selecci√≥n compleja y una ventana emergente de autocompletado. Por supuesto, hay una diferencia. Pero cuando not√© alguna variaci√≥n en los valores, realic√© algunas pruebas m√°s y descubr√≠ que el tiempo de respuesta es muy diferente entre ingresar 'a' en una l√≠nea vac√≠a e ingresar 'a' despu√©s del 'a' anterior ('aa'). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estos son los resultados de crear una nueva l√≠nea despu√©s de la l√≠nea </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3469</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el archivo </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">parser.rs</font></a><font style="vertical-align: inherit;"> grande </font><font style="vertical-align: inherit;">con 6199 l√≠neas. Todos los resultados se obtienen despu√©s de un posicionamiento similar del sensor m√°s cerca de la parte inferior del monitor Dell.</font></font><br>
<br>
<pre>lat i= 40.2 +/-   4.1, a= 40, d= 39 (n= 38,q= 90) |  _89           | sublime small .txt<font></font>
<font></font>
lat i= 41.2 +/-   6.9, a= 41, d= 42 (n= 54,q= 92) |   992          | sublime aa parser.rs<font></font>
lat i= 43.6 +/-   6.1, a= 43, d= 42 (n= 48,q=100) |   492          |<font></font>
lat i= 52.2 +/-   6.0, a= 52, d= 52 (n= 26,q=100) |    49          |<font></font>
lat i= 44.3 +/-   5.6, a= 43, d= 42 (n= 45,q=100) |   391          |<font></font>
lat i= 42.7 +/-   7.6, a= 42, d= 42 (n= 46,q=100) |  _491          |<font></font>
<font></font>
lat i= 48.1 +/-   6.8, a= 49, d= 50 (n= 43,q= 89) |   269          | sublime a parser.rs<font></font>
lat i= 43.9 +/-   5.4, a= 48, d= 52 (n= 32,q= 97) |   197          |<font></font>
lat i= 47.8 +/-   8.4, a= 49, d= 49 (n= 29,q= 97) |   197_         |<font></font>
lat i= 46.1 +/-   6.8, a= 47, d= 49 (n= 42,q= 97) |   196_         |<font></font>
<font></font>
lat i= 63.3 +/-   9.3, a= 63, d= 62 (n= 68,q=118) |    _963__      | vscode aa parser.rs<font></font>
lat i= 63.6 +/-   7.6, a= 64, d= 65 (n= 71,q=139) |    _49__     _ |<font></font>
lat i= 62.3 +/-   6.3, a= 61, d= 59 (n= 52,q=132) |    _791        |<font></font>
lat i= 62.0 +/-   5.8, a= 61, d= 60 (n= 40,q=111) |    _49_        |<font></font>
lat i= 61.9 +/-   9.7, a= 62, d= 61 (n= 35,q=111) |     981_       |<font></font>
<font></font>
lat i= 53.1 +/-   7.7, a= 51, d= 49 (n= 54,q=116) |   _79__        | vscode a parser.rs<font></font>
lat i= 52.2 +/-   6.3, a= 52, d= 51 (n= 41,q=133) |    692         |<font></font>
lat i= 53.2 +/-   7.8, a= 52, d= 52 (n= 57,q=134) |    591_        |<font></font>
lat i= 52.1 +/-   7.1, a= 52, d= 52 (n= 55,q=134) |    591_        |</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tom√© muchas medidas en diferentes momentos y con peque√±as variaciones para confirmar el efecto. Como puede ver, hay algunas diferencias entre las dimensiones en el mismo escenario, pero hay muchas m√°s variaciones entre simplemente ingresar 'a' y agregar 'a' despu√©s de la 'a' existente. Mire la columna </font></font><code>a=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que incluye los resultados de la inserci√≥n y eliminaci√≥n, para que haya menos ruido. Sublime ingresa el segundo car√°cter en la secuencia 'aa' m√°s r√°pido que el primero, y VSCode viceversa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En ambos editores, 'aa' hace que la ventana emergente de autocompletar aparezca y desaparezca para seleccionar una opci√≥n entre las dos listas y las letras 'a'. </font><font style="vertical-align: inherit;">Puedo suponer que Sublime es m√°s lento en el caso de 'a', porque abrir y cerrar la ventana de autocompletar emergente lleva alg√∫n tiempo, pero no tengo una versi√≥n clara de por qu√© VSCode es m√°s lento en el caso de 'aa' tanto durante la inserci√≥n como durante la eliminaci√≥n.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rassynchron con actualizaci√≥n de pantalla</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces not√© que las desviaciones est√°ndar eran sospechosamente bajas. A veces, la desviaci√≥n est√°ndar era de 1 ms, aunque l√≥gicamente deber√≠a superar los 4,6 ms debido a los intervalos de actualizaci√≥n de la pantalla de 16 ms. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mir√© mi c√≥digo y me di cuenta de que las mediciones se sincronizaron accidentalmente con las actualizaciones de la pantalla. Despu√©s de cada medici√≥n, el firmware esper√≥ exactamente 300 ms antes de volver a escribir 'a' o eliminar el s√≠mbolo y realizar la siguiente medici√≥n. Esto significa que los datos de entrada siempre se enviaron aproximadamente 300 ms despu√©s de la actualizaci√≥n de la pantalla, cayendo de manera estable en el mismo intervalo de actualizaci√≥n. Solucion√© este problema agregando un retraso aleatorio de 50 ms entre mediciones, una fluctuaci√≥n tan peculiar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
B√°sicamente, este error caus√≥ desviaciones demasiado bajas, pero podr√≠a conducir a valores promedio incorrectos si la aplicaci√≥n omite la fecha l√≠mite para la presentaci√≥n cuando el evento de entrada llega al final del marco. </font><font style="vertical-align: inherit;">Descubr√≠ esto durante las pruebas para este art√≠culo y ya no pude repetir todas las pruebas anteriores, por lo que en algunos lugares puede notar algunos valores de desviaci√≥n baja. </font><font style="vertical-align: inherit;">Pero volv√≠ a verificar los promedios para pruebas importantes como Sublime y VSCode.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Editores de texto</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prob√© el tiempo de respuesta de varios editores de texto en el mismo archivo de texto sin formato. </font><font style="vertical-align: inherit;">Pero como se√±al√© anteriormente, las pruebas se realizaron antes de la implementaci√≥n del rassinhron con la actualizaci√≥n de la pantalla mediante fluctuaciones. </font><font style="vertical-align: inherit;">Se realizaron pruebas repetidas solo para Sublime y VSCode.</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lat i = 32.5 +/- 4.0, a = 34, d = 35 (n = 38, q = 78) | </font><font style="vertical-align: inherit;">9_ | </font><font style="vertical-align: inherit;">texto sublime</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lat i = 33.4 +/- 1.4, a = 33, d = 33 (n = 68, q = 23) | </font><font style="vertical-align: inherit;">_9 | </font><font style="vertical-align: inherit;">textedit</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lat i = 47,6 +/- 7,0, a = 47, d = 47 (n = 71, q = 130) | </font><font style="vertical-align: inherit;">219 </font><font style="vertical-align: inherit;">vscode</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lat i = 34.2 +/- 3.5, a = 34, d = 33 (n = 57, q = 37) | </font><font style="vertical-align: inherit;">9 _ | </font><font style="vertical-align: inherit;">entrada html de Chrome</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lat i = 33.2 +/- 1.1, a = 33, d = 33 (n = 55, q = 30) | </font><font style="vertical-align: inherit;">9 | </font><font style="vertical-align: inherit;">stock mac emacs</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lat i = 45,6 +/- 7,0, a = 43, d = 41 (n = 35, q = 56) | </font><font style="vertical-align: inherit;">992_ | </font><font style="vertical-align: inherit;">√°tomo</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lat i = 35.0 +/- 4.7, a = 35, d = 35 (n = 66, q = 11) | </font><font style="vertical-align: inherit;">9__ | </font><font style="vertical-align: inherit;">xi</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dada la falta de fluctuaciones, en base a estos resultados, dir√≠a que todos los editores, excepto VSCode y Atom, funcionan igualmente bien. </font><font style="vertical-align: inherit;">E incluso para estos dos, con una escritura normal, una penalizaci√≥n menor por el tiempo de respuesta de lo habitual para un monitor o teclado.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terminales</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n med√≠ el retraso en diferentes terminales. </font><font style="vertical-align: inherit;">El terminal y el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gatito de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Apple parecen tener </font><font style="vertical-align: inherit;">tiempos de respuesta √≥ptimos, mientras que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iTerm2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alacritty se</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ven un poco peor.</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lat i = 53.1 +/- 6.6, a = 54, d = 55 (n = 53, q = 59) | </font><font style="vertical-align: inherit;">291 _ | </font><font style="vertical-align: inherit;">iterm2 gpu render</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lat i = 50.5 +/- 2.5, a = 50, d = 50 (n = 56, q = 59) | </font><font style="vertical-align: inherit;">19_ | </font><font style="vertical-align: inherit;">iterm2 sin gpu</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lat i = 35.8 +/- 7.0, a = 34, d = 33 (n = 73, q = 48) | </font><font style="vertical-align: inherit;">9___ | </font><font style="vertical-align: inherit;">terminal de manzana</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lat i = 35.1 +/- 2.5, a = 34, d = 32 (n = 35, q = 52) | </font><font style="vertical-align: inherit;">9_ | </font><font style="vertical-align: inherit;">terminal de manzana vim</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lat i = 50.4 +/- 3.9, a = 50, d = 49 (n = 60, q = 269) | </font><font style="vertical-align: inherit;">_59 | </font><font style="vertical-align: inherit;">alacritty</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lat i = 36.1 +/- 5.6, a = 35, d = 34 (n = 78, q = 199) | </font><font style="vertical-align: inherit;">9__ | </font><font style="vertical-align: inherit;">gatito</font></font></pre><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como hacerlo</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ est√° la lista de partes que us√©:</font></font><br>
<br>
<ul>
<li><b>$12</b>: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Teensy LC</a>     Teensy&nbsp;3+.   Arduino,  USB- Teensy     1000&nbsp; ( 1 ),      USB-      125&nbsp; ( 8&nbsp;     ). ,      1000&nbsp;.     ,     ,  Teensy&nbsp;3  .<br>
</li>
<li><b>$12</b>: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">  </a> (Amazon     ,    ).    ,           .<br>
</li>
<li><b>$13</b>: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"></a>         .<br>
</li>
<li>- /   <br>
</li>
<li>    , Teensy  <br>
</li>
<li>    ,     <br>
</li>
<li> USB micro-B   Teensy  </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El dispositivo se puede ensamblar de muchas maneras. La conclusi√≥n es que solo necesita conectar de alguna manera los tres cables (3V, tierra, salida anal√≥gica) desde el m√≥dulo del sensor √≥ptico a los pines Teensy correspondientes (3V, tierra y cualquier pin anal√≥gico). La forma m√°s f√°cil de hacer esto, que ni siquiera requiere soldadura, si compr√≥ Teensy con pines pre-soldados, es conectar tres </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cables con puentes mam√°-mam√°</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Entonces solo necesita alg√∫n tipo de interruptor para ejecutar la prueba. Aqu√≠, un pin del Teensy se conecta a tierra y el otro al pin de E / S digital. Si eres realmente vago, ¬°basta con tocar dos cables!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para asegurarme de que el m√≥dulo del sensor √≥ptico solo vea un √°rea limitada de la pantalla, lo envolv√≠ en un peque√±o cilindro de cinta aislante y cort√© cuidadosamente el extremo con unas tijeras. Result√≥ una peque√±a ventana redonda, que se puede presionar a la pantalla con un tr√≠pode para minimizar el ruido externo y obtener la se√±al m√°s limpia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya hice una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">funda de pedal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con un Teensy LC y una placa peque√±a en el interior, y ten√≠a un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conector TRRS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adicional en el lateral </font><font style="vertical-align: inherit;">, que instal√© especialmente, esperando un proyecto similar en el futuro donde ser√° necesario. Por lo tanto, quedaba por soldar el sensor √≥ptico al cable TRRS. ¬°Entonces puedes usar uno de mis pedales para controlar las pruebas!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tuve suerte con la soldadura, porque para un proyecto acabo de comprar plumas magn√©ticas, que tambi√©n se pueden usar en el proceso de soldadura. Desafortunadamente, result√≥ que en realidad no tengo muchas piezas grandes de metal en las que se puedan unir, por lo que al final tom√© una sart√©n de hierro fundido para soldar y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mi cubo de tungsteno</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para las operaciones en la mesa </font><font style="vertical-align: inherit;">(result√≥ que era un poco magnetizado).</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ccf/ae5/836/ccfae58364a964a71628451dcb1e9feb.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le sugiero que muestre su imaginaci√≥n y haga algo m√°s interesante que simplemente colgar los cables de conexi√≥n. Para mi pedal, compr√© una caja de pl√°stico en una tienda de electr√≥nica local, perfor√© algunos agujeros a los lados, insert√© tomas de audio y puse una peque√±a placa de prueba para reconfigurar las conexiones. Amazon tiene toneladas de pedales para m√°quinas de tatuaje y pianos el√©ctricos con conectores de tel√©fono de 1/4 ", puede elegir. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqu√≠ est√°n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mis favoritos para el silencio y las sensaciones t√°ctiles. Pero hay opciones m√°s baratas que pueden ser poco confiables, dif√≠ciles de presionar o desagradables para hacer ruido.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No recomendar√≠a usar el z√≥calo TRRS para el m√≥dulo del sensor en mi ejemplo. </font><font style="vertical-align: inherit;">Aunque es bueno y compacto y hay muchos cables disponibles para √©l, m√°s tarde result√≥ que debido a ello, se acortan demasiadas conexiones al conectar y desconectar la alimentaci√≥n. </font><font style="vertical-align: inherit;">Trat√© de minimizar esto separando la alimentaci√≥n y la conexi√≥n a tierra en los extremos opuestos de la placa, pero le aconsejo que tome un cable de alg√∫n tipo mejor, tal vez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uno de tel√©fono</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/3d5/fce/cfd/3d5fcecfdc63a4901b487091142a09c1.jpg"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firmware</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para determinar el comienzo y el final de la salida del personaje en la pantalla, no tengo el firmware m√°s sofisticado, pero pas√© un tiempo configur√°ndolo para que funcione bien y agregando varias funciones, por lo que recomiendo comenzar con √©l. </font><font style="vertical-align: inherit;">Instale </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teensyduino</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , luego puede descargar mi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">boceto Arduino</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que funciona para el pedal, pero puede comentar fragmentos innecesarios y configurarlo para usar los contactos correctos. </font><font style="vertical-align: inherit;">Entonces todo es simple: una pulsaci√≥n prolongada del bot√≥n inicia la medici√≥n y una pulsaci√≥n breve muestra los resultados.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es505246/index.html">Imprime el primer tramo con Upwork</a></li>
<li><a href="../es505252/index.html">Proyecto Avokado</a></li>
<li><a href="../es505254/index.html">Az√∫car de serpiente o escribe tu rango en JavaScript</a></li>
<li><a href="../es505256/index.html">Lanzamiento exitoso. 39¬∫ desde el comienzo del a√±o. 14 de los Estados Unidos. Sat√©lites Starlink SpaceX</a></li>
<li><a href="../es505258/index.html">Odontolog√≠a: expectativa y realidad</a></li>
<li><a href="../es505264/index.html">Mientras escrib√≠a el analizador html en php, y lo que surgi√≥ de √©l. Parte uno</a></li>
<li><a href="../es505268/index.html">Experiencia personal: de desarrollador frontend a l√≠der</a></li>
<li><a href="../es505274/index.html">Pecados capitales de la seguridad del sitio: lo que aprendimos de las estad√≠sticas del esc√°ner de vulnerabilidades del a√±o</a></li>
<li><a href="../es505276/index.html">C√≥mo ense√±amos a ABBYY FineReader PDF a editar p√°rrafos completos</a></li>
<li><a href="../es505278/index.html">39 abreviaturas en ingl√©s para vendedores principiantes y seoshnikov</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>