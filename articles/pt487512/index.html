<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèæ‚Äçü§ù‚ÄçüßëüèΩ üè≠ üßìüèª Como implementar ignorar usu√°rios bloqueados em grupos de telegrama? üåº üì∞ üèØ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="UPD: obrigado por ajudar Tkachoveste artigo ainda passou de uma solicita√ß√£o de ajuda para uma instru√ß√£o de trabalho. Nos coment√°rios, ele forneceu um ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Como implementar ignorar usu√°rios bloqueados em grupos de telegrama?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487512/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/n8/lx/it/n8lxiti0sdes3qvykd6fxu5smas.png" alt="imagem alt"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD: obrigado por ajudar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tkachov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">este artigo ainda passou de uma solicita√ß√£o de ajuda para uma instru√ß√£o de trabalho. Nos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coment√°rios,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ele forneceu um c√≥digo de trabalho para criar um ignorar no cliente de desktop Telegram. Para o caso, colocarei uma explica√ß√£o no final do artigo. Al√©m disso, o artigo continua da mesma forma em que foi escrito. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* * * </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gostaria de pedir ajuda √† comunidade, porque esgotei completamente todas as minhas possibilidades. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pode-se fazer uma pergunta sobre o servi√ßo de perguntas e respostas (tamb√©m conhecido como Toaster) - apenas eu j√° fiz isso e n√£o saiu muito disso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, apenas fazer uma pergunta sob o disfarce de um artigo n√£o me parece muito correto. Portanto, tentarei adicionar o plano de fundo de todo o processo ao texto e informar quais etapas j√° foram executadas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ tiver sorte, algu√©m nos coment√°rios dir√° a solu√ß√£o. </font><font style="vertical-align: inherit;">E aqueles que encontrarem este artigo nos mecanismos de pesquisa tamb√©m poder√£o resolver esse problema.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problema e Antecedentes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como todos os usu√°rios do Telegram est√£o cientes, nas conversas em grupo deste messenger, n√£o h√° fun√ß√£o de ignorar usu√°rio. Voc√™ pode bloquear um usu√°rio que √© desagrad√°vel para voc√™, mas isso apenas o pro√≠be de lhe escrever mensagens privadas. No bate-papo em grupo - e agora as conversas em grupo parecem acomodar at√© 10 mil usu√°rios - voc√™ simplesmente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">precisa</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ver tudo o que os outros membros do grupo jogaram fora. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No "Black Mirror" havia at√© uma s√©rie sobre isso. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zr/9h/lk/zr9hlk0liyhnvaexdinjwkpsgna.png"><br>
<sub><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Continue assistindo! Continue assistindo! Continue assistindo!</font></font></i></sub><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Se tentarmos encontrar uma solu√ß√£o para esse problema na Internet, encontraremos uma hist√≥ria t√≠pica de guerra de uma grande corpora√ß√£o e de um pequeno grupo de pessoas descontentes. Os est√°gios desta guerra s√£o claramente vis√≠veis no Github. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primeira solicita√ß√£o para esse recurso a partir de 2015.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ pode encontrar links para os seguintes t√≥picos neste t√≥pico. As pessoas solicitavam constantemente esse recurso nos anos seguintes, mas cada chamada acabou sendo encerrada com uma resposta bastante est√∫pida: "Este n√£o √© um problema do cliente, mas um problema de API". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o est√° claro para o programador que os dados s√£o mostrados ao usu√°rio usando o cliente. E mesmo que a API envie todas as mensagens do servidor - n√£o h√° problema em ocultar algumas delas no lado do cliente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas h√° cinco anos, todos os anos, e √†s vezes v√°rias vezes por ano, as pessoas chegam ao Github com um pedido para introduzir o ignorar em grupos - e cada vez que s√£o recusadas e o t√≥pico √© fechado. Mais de seis meses atr√°s, aparentemente cansados ‚Äã‚Äãdos requisitos constantes, os desenvolvedores </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">postaram uma desculpa n√£o vinculativa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : eles dizem que sim, sim, faremos tudo, algum dia no futuro distante.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/o8/vg/u7/o8vgu7sadj-sdregj1scnma6lz8.png"><br>
<sub><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu te ouvi! Eu s√≥ falei at√© estar pronto para responder, digamos, eu entendo sua posi√ß√£o. Vamos l√°, ligue, n√£o se perca!</font></font></i></sub><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Existe exatamente um benef√≠cio dessa desculpa - agora os administradores do tdesktop no Github consultam esta mensagem para todas as reclama√ß√µes. Diga - olhe, eles sabem tudo, far√£o tudo, desculpe, o ramo est√° fechado. Nos √∫ltimos seis meses, muitas mudan√ßas demoradas ocorreram no telegrama, por exemplo, adesivos animados e formul√°rios de ondula√ß√£o BONITOS para pesquisas foram adicionados √†s conversas. Mas n√£o ignorar chegou nem perto. Eu acho que n√£o aparecer√° em um ano.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao mesmo tempo, a situa√ß√£o parece um pouco sinistra - existe a sensa√ß√£o de que √© proibido introduzir essa fun√ß√£o com instru√ß√µes especiais para garfos oficiais. O telegrama possui pelo menos uma d√∫zia de garfos conhecidos (como o Unigram) e uma centena de garfos pouco conhecidos, mas nenhum deles possui esse recurso. Escrevi em apoio aos garfos mais populares, mas n√£o recebi resposta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao mesmo tempo, gerenciar com usu√°rios bloqueados </font></font><u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">podem ser</font></font></b></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mensagens do lado do cliente </font><font style="vertical-align: inherit;">. Isso √© confirmado pela exist√™ncia do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegreat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Este √© um fork do Telegram, no qual a op√ß√£o de ignorar usu√°rios bloqueados foi declarada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, esse ignorar n√£o √© real. Tudo o que a op√ß√£o ‚ÄúIgnorar usu√°rios bloqueados‚Äù faz √© colorir o texto das mensagens dos usu√°rios bloqueados em cinza. Fotos, v√≠deos, m√∫sicas ou adesivos de usu√°rios bloqueados ainda est√£o vis√≠veis; Al√©m disso, a cor cinza em t√≥picos escuros √© perfeitamente leg√≠vel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As pessoas costumam conversar com o desenvolvedor, onde eu fiquei um tempo, e pedir para fazer um "verdadeiro ignorar". Anteriormente, ele simplesmente recusava; nos √∫ltimos seis meses, ele abandonou completamente seu projeto, porque "n√£o tem tempo". Bem, isso √© comum em projetos de c√≥digo aberto gratuitos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menciono este projeto por dois motivos.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primeiro, ele √© anunciado precisamente como um "cliente com uma fun√ß√£o de ignorar" e √© recomendado por pessoas que leem apenas a descri√ß√£o, sem saber como esse "ignorar" √© realmente implementado l√°. </font><font style="vertical-align: inherit;">Como mencionado acima, esta fun√ß√£o n√£o funciona.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em segundo lugar, √© uma confirma√ß√£o viva de que no cliente Telegram √© poss√≠vel determinar a mensagem de um usu√°rio bloqueado e alter√°-la. </font><font style="vertical-align: inherit;">Isso √©, de fato, poss√≠vel ignorar no lado do cliente.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, ningu√©m faz isso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O melhor de tudo √© que meus sentimentos s√£o transmitidos em um coment√°rio sobre um </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">t√≥pico</font></a><font style="vertical-align: inherit;"> semelhante </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no Reddit h√° quatro anos:</font></font></a><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estou chocado que voc√™ n√£o pode fazer isso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A s√©rio? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se eu simplesmente n√£o quiser ler nada que alguns usu√°rios escrevam, eu devo faz√™-lo ... √© como, um dos recursos b√°sicos de todos os protocolos de comunica√ß√£o SEMPRE! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ poderia fazer isso nos anos 90 com e-mails e grupos de not√≠cias!</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, sempre que falamos sobre os motivos da aus√™ncia de um jogador, as mesmas coisas s√£o repetidas: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Voc√™ n√£o ver√° todas as mensagens e, por isso, n√£o entender√° o que est√° acontecendo no chat. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Voc√™ duplicar√° as mensagens. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - A funcionalidade do sistema de "respostas" ser√° violada </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
e, novamente, uso uma cita√ß√£o apenas para mostrar a voc√™ - estes n√£o s√£o meus pensamentos pessoais, esta √© a nossa posi√ß√£o comum, pessoas que desejam introduzir esta fun√ß√£o:</font></font><br>
<blockquote><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">I can assure you 100.00% of people asking for this feature, are fully aware of the side effects it has, and could not care less about those.<br>
<br>
Yes just not show it at all. Yes including if it's a reply. Yes if the admin needs to see everything to moderate, then they don't have the luxury of using ignore. And most certainly we can compare TG groups to IRC, because they are both a mechanism for accomplishing the same thing, namely multi-user communication.</a></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui est√° apenas um exemplo de vida em rela√ß√£o √† duplica√ß√£o - eu assisto a v√°rias conversas por telegrama e durante o dia </font><font style="vertical-align: inherit;">v√°rios usu√°rios </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sempre</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lan√ßam a mesma not√≠cia / captura de tela engra√ßada / novo meme popular no chat. Apesar do fato de que antes deles j√° era. Apesar de n√£o haver como ignorar, eles ainda n√£o leem o hist√≥rico de bate-papo e duplicam as mensagens. Sobre como as pessoas n√£o sabem como usar a pesquisa nos f√≥runs e repetem repetidamente as mesmas perguntas - eu nem vou mencionar, a maioria dos leitores provavelmente j√° se deparou com isso. Novamente, sem qualquer ignor√¢ncia, esse problema j√° existe. E ignor√°-la n√£o vai agravar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, por </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> essa fun√ß√£o realmente n√£o existe?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, a tese da conspira√ß√£o diz que o principal objetivo do Telegram √© coletar dados pessoais e gr√°ficos de intera√ß√£o do usu√°rio. Nesse sentido, cada grupo de telegramas permite que voc√™ conserte um grupo pequeno t√≠pico, que o usu√°rio possa suportar pelo menos e que pode suportar. Caso contr√°rio, ele √© expulso do grupo ou sai. A introdu√ß√£o de ignorar violar√° a pureza do experimento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A vers√£o de marketing √© um pouco mais f√°cil.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando Khaled Mardam Bay criou o mIRC em 1995, ele escreveu um programa para as pessoas. Quero dizer, para pessoas independentes que sabem o que querem, elas escolhem o que acham certo e s√£o respons√°veis ‚Äã‚Äãpelas consequ√™ncias de suas a√ß√µes. Por um lado, isso causou problemas, por exemplo, com vulnerabilidades com script - voc√™ executa uma linha com comandos e √© isso, voc√™ √© hackeado. Por outro lado, era um mensageiro usado por adultos e pessoas respons√°veis. E eles sabiam como existir em um bate-papo com ignorar, onde algumas das mensagens simplesmente n√£o s√£o vis√≠veis.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando, em 2013, Pasha Durov fez o Telegram, ele fez o programa "para donas de casa". Para um usu√°rio em massa burro que precisa de um bom tutor. Portanto, todo esse registro por n√∫mero de telefone, enviando mensagens para todos na lista telef√¥nica, bandeiras e proibi√ß√µes de todos os lados. Afinal, eles ‚Äúpressionam alguma coisa e tudo desaparece!‚Äù. E ent√£o eles escrever√£o reclama√ß√µes em apoio! Da√≠ essas desculpas est√∫pidas - "porque se voc√™ ignorar, n√£o ver√° as mensagens de outras pessoas". Quando voc√™ faz um produto em massa - voc√™ √© for√ßado a limitar qualquer funcionalidade. O produto para o tolo deve ter prote√ß√£o contra o tolo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A√≠ vem o argumento da coroa, que sempre √© apresentado no final: "N√£o goste - n√£o use assim". </font><font style="vertical-align: inherit;">N√£o vou explicar o que h√° de errado com ele, essa √© uma quest√£o √©tica do formato "por que as pessoas n√£o devem ser comidas" - quem pede a ele n√£o faz sentido explicar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas, no caso do Telegram, esse argumento √© ligeiramente modificado: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Eu n√£o gosto - fa√ßa como quiser, √© de c√≥digo aberto"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentativa de resolver</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cansado de muitos anos de pesquisa, decidi realmente tentar mudar alguma coisa sozinho. </font><font style="vertical-align: inherit;">Pareceu-me uma boa id√©ia fazer minha pr√≥pria assembl√©ia do telegrama. </font><font style="vertical-align: inherit;">N√£o no sentido de uma assembl√©ia p√∫blica, com um site e posicionamento na loja de aplicativos, mas simplesmente compilando o aplicativo e utilizando-o voc√™ mesmo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse sentido, eu n√£o me incomodaria com nenhum poss√≠vel "freio" ao ocultar mensagens ou "o problema de perder o contexto na conversa" ou o problema "como administrar o bate-papo se voc√™ n√£o vir algumas das mensagens". </font><font style="vertical-align: inherit;">Tudo isso n√£o me interessou. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pareceu-me √≥bvio que apenas adicionar uma linha como esta:</font></font><br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if message.author.isBlocked == true ent√£o message.value = 'A mensagem do usu√°rio bloqueado'</font></font></b></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desculpe pelo pseudo-c√≥digo, mas parece-me que ele transmite a ideia corretamente. Eu s√≥ queria pegar qualquer mensagem logo no in√≠cio, quando ela vem apenas do servidor, e substitu√≠-la por uma linha sobre bloqueio. Assim, o problema seria resolvido com imagens / adesivos / gifs - eles tamb√©m seriam substitu√≠dos por essa mensagem e n√£o seriam vis√≠veis. E mesmo que algu√©m respondesse ou citasse uma mensagem, ela ainda seria substitu√≠da. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas por onde come√ßar? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de perguntar aos amigos dos programadores, descobri que existem duas maneiras. O primeiro √© usar o cliente Telegram nativo e o segundo √© usar um cliente de terceiros gravado usando a biblioteca TDLib mais recente. Eu fui ao servi√ßo de perguntas mencionado no come√ßo do artigo e fiz uma </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">pergunta</font></a><font style="vertical-align: inherit;"> l√°</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Como voc√™ pode ver, a linha de entrevistados n√£o est√° alinhada. O √∫nico fio levou ao mensageiro Kotatogram. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conversei com o criador deste messenger e ele me deu duas dicas √∫teis. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, ele disse que as mensagens no cliente nativo s√£o exibidas da maneira usual e n√£o s√£o geradas (no entanto, suspeitei disso usando o exemplo do Telegreat) - portanto, voc√™ pode usar o cliente nativo como fonte. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em segundo lugar, ele disse onde procurar a sa√≠da da mensagem em si - no bloco history_message. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, ele, como o criador do Telegreat, tamb√©m n√£o teve tempo livre para adicionar independentemente a fun√ß√£o ignorar, que √© para o cliente dele, que √© para mim.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como eu procedi a seguir? </font><font style="vertical-align: inherit;">As instru√ß√µes de montagem existem no Github, mas n√£o refletem todas as etapas do trabalho. </font><font style="vertical-align: inherit;">Vou descrev√™-los aqui, caso algu√©m venha ao artigo que n√£o esteja particularmente familiarizado com programa√ß√£o, mas que queira fazer com que o mesmo cliente ignore por si mesmo:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu decidi fazer tudo em uma m√°quina virtual. </font><font style="vertical-align: inherit;">Para fazer isso, instalei o Oracle VM Virtual Box para mim e baixei </font><font style="vertical-align: inherit;">a m√°quina virtual oficial com o Windows 10 e o Visual Studio 2019 pr√©-instalados </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no site oficial da Microsoft</font></font></a><font style="vertical-align: inherit;"></font></li>
<li>      Visual Studio.  ,       C++,    Visual Studio Installer   .    Modify     C++,     .           QT <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"></a>.</li>
<li>    Git c <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">git-scm.com</a></li>
<li>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">  </a>. <b>  !</b> </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem 2 se√ß√µes de equipes. </font><font style="vertical-align: inherit;">E se a primeira se√ß√£o cont√©m cerca de uma d√∫zia de comandos que s√£o f√°ceis de copiar e colar na linha de comando, na segunda se√ß√£o de v√°rias dezenas de comandos, parece natural copiar todo o c√≥digo em um arquivo bat e execut√°-lo. </font><font style="vertical-align: inherit;">Isso √© um erro, porque o processo para pelo menos duas vezes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A primeira parada ocorre ap√≥s a linha:</font></font><br>
<br>
<pre><code class="plaintext hljs">gyp --no-circular-check breakpad_client.gyp --format=ninja</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A segunda √© ap√≥s a quarta linha do final, a longa instru√ß√£o de configura√ß√£o QT:</font></font><br>
<br>
<pre><code class="plaintext hljs">configure -prefix "%LibrariesPath%\Qt-5.12.5" ....... </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como meus amigos me disseram, isso se deve ao fato de que durante a execu√ß√£o desses comandos outros arquivos bat s√£o lan√ßados, nos quais uma sa√≠da direta do processo j√° est√° registrada. </font><font style="vertical-align: inherit;">Como resultado, voc√™ precisa simplesmente copiar e colar os comandos ou dividir a instru√ß√£o em 3 arquivos bat (mas nesse caso, lembre-se de que os comandos devem continuar sendo executados no mesmo diret√≥rio em que o processo parou!). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obter seu pr√≥prio api_id </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tamb√©m</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">descrito no Github</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por fim, compilei um arquivo exe do Telegram totalmente funcional. </font><font style="vertical-align: inherit;">No total, a montagem leva cerca de tr√™s horas (sem contar os downloads e instala√ß√µes preliminares), talvez esse tempo dependa da pot√™ncia do computador.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajuda do Hall (e solu√ß√£o encontrada)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E aqui finalmente meu pedido √† harasociety aparece. Como os leitores j√° imaginaram, n√£o sei o que e como mudar. Parece-me que encontrei um local onde a mensagem √© exibida, mas n√£o tenho certeza, porque n√£o conhe√ßo C ++. Sem mencionar que (talvez) seria correto alterar algo que n√£o esteja na mensagem history_, mas em algum lugar no item history_. </font><sub><i><font style="vertical-align: inherit;">"Alguma coisa √©lfica, n√£o sei ler"</font></i></sub><font style="vertical-align: inherit;"> 
Talvez algu√©m aqui j√° tenha encontrado o c√≥digo do Telegram ou apenas tenha uma habilidade muito desenvolvida e possa escrever a mesma linha com a substitui√ß√£o de qualquer mensagem de um usu√°rio bloqueado e tamb√©m dizer onde coloc√°-lo esse c√≥digo.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/wx/r6/el/wxr6el7uy7ed5dhp2fexr-9yhli.png"></a><br>
<sub><i><font style="vertical-align: inherit;"></font></i></sub><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponho que o mecanismo de retirada do telegrama n√£o mude repentinamente. </font><font style="vertical-align: inherit;">Portanto, ao atualizar o cliente, baixarei a vers√£o atualizada do github e adicionarei esta linha novamente com um bloqueio antes de compilar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD: Como mencionei no in√≠cio do artigo, </font><font style="vertical-align: inherit;">uma vers√£o de trabalho do c√≥digo apareceu </font><font style="vertical-align: inherit;">nos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coment√°rios</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Trago-o diretamente para o artigo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A primeira parte do c√≥digo substitui o texto por outra mensagem. </font><font style="vertical-align: inherit;">Isso √© necess√°rio porque </font><font style="vertical-align: inherit;">esse texto √© vis√≠vel entre aspas se outro usu√°rio responder ao bloqueado ou √† esquerda na janela de bate-papo, onde s√£o exibidas as √∫ltimas mensagens nos bate-papos em grupo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No arquivo History_Message.cpp, encontramos a fun√ß√£o no mesmo local da captura de tela acima:</font></font><br>
<br>
<pre><code class="cpp hljs">HistoryMessage::HistoryMessage(<font></font>
	not_null&lt;History*&gt; history,<font></font>
	<span class="hljs-keyword">const</span> MTPDmessage &amp;data,<font></font>
	MTPDmessage_ClientFlags clientFlags)<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E por dentro, substitu√≠mos o texto original:</font></font><br>
<br>
<pre><code class="cpp hljs">	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> media = data.vmedia()) {<font></font>
		setMedia(*media);<font></font>
	}<font></font>
	setText({<font></font>
		TextUtilities::Clean(qs(data.vmessage())),<font></font>
		Api::EntitiesFromMTP(data.ventities().value_or_empty())<font></font>
	});</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No avan√ßado:</font></font><br>
<br>
<pre><code class="cpp hljs"><font></font>
	UserId from = data.vfrom_id().value_or_empty();<font></font>
	PeerData* pd = from ? history-&gt;owner().user(from) : history-&gt;peer;<font></font>
	<span class="hljs-keyword">if</span> (pd-&gt;isUser() &amp;&amp; pd-&gt;asUser()-&gt;isBlocked()) {<font></font>
		setText({<font></font>
			TextUtilities::Clean(qs(<span class="hljs-string">"The message from blocked user"</span>)),<font></font>
			Api::EntitiesFromMTP(data.ventities().value_or_empty())<font></font>
			});<font></font>
	}<font></font>
	<span class="hljs-keyword">else</span> {
		<span class="hljs-comment">//   442-448:</span>
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> media = data.vmedia()) {<font></font>
			setMedia(*media);<font></font>
		}<font></font>
		setText({<font></font>
			TextUtilities::Clean(qs(data.vmessage())),<font></font>
			Api::EntitiesFromMTP(data.ventities().value_or_empty())<font></font>
			});<font></font>
	}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ usar apenas esse c√≥digo, as mensagens antigas dos usu√°rios bloqueados ser√£o vis√≠veis, mas as novas n√£o ser√£o mais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, a segunda parte da solu√ß√£o mencionada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neste</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coment√°rio </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
adiciona o seguinte c√≥digo ao arquivo history_view_message.cpp:</font></font><br>
<br>
<pre><code class="cpp hljs">PeerData* pd = item-&gt;from();
<span class="hljs-keyword">if</span> (pd-&gt;isUser() &amp;&amp; pd-&gt;asUser()-&gt;isBlocked()) <span class="hljs-keyword">return</span>;</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD: na nova vers√£o, o compilador jura com um retorno vazio, ent√£o adicionei a sa√≠da de QSize (0,0)</font></font><br>
<pre><code class="cpp hljs">PeerData* pd = item-&gt;from();
<span class="hljs-keyword">if</span> (pd-&gt;isUser() &amp;&amp; pd-&gt;asUser()-&gt;isBlocked()) <span class="hljs-keyword">return</span> QSize(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imediatamente ap√≥s declarar a vari√°vel do item nas </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fun√ß√µes QSize Message :: performCountOptimalSize () </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
e </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
void Message :: draw ( </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Painter &amp; p, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 clipe </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 QRect, sele√ß√£o </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 TextSelection </font><font style="vertical-align: inherit;">, </font><font style="vertical-align: inherit;">crl :: time ms) </font><font style="vertical-align: inherit;">, </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
isso impedir√° completamente as mensagens de usu√°rios bloqueados no log de bate-papo. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma adi√ß√£o importante:</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se de repente as mensagens do usu√°rio bloqueado ainda estiverem vis√≠veis - voc√™ s√≥ precisa clicar no perfil dele, as informa√ß√µes bloqueadas ser√£o atualizadas e todas as mensagens desaparecer√£o do registro de bate-papo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para aqueles que desejam, ele adicionou um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplicativo compilado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ao Dropbox </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">.</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
UPD: </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">criou</font></a><font style="vertical-align: inherit;"> um "site" para distribui√ß√£o de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sites.google.com/view/ignoram</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt487512/">https://habr.com/ru/post/pt487512/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt487498/index.html">Escolhendo um banco de dados para an√°lise</a></li>
<li><a href="../pt487502/index.html">Sondando dispositivos de impress√£o usando SNMP enquanto a impressora est√° imprimindo</a></li>
<li><a href="../pt487504/index.html">No dia da ci√™ncia russa, as melhores realiza√ß√µes de cientistas dom√©sticos de 2019 s√£o nomeadas</a></li>
<li><a href="../pt487508/index.html">Medindo a dist√¢ncia a objetos usando o RealSense D435</a></li>
<li><a href="../pt487510/index.html">Produtos radioativos. Espectr√¥metro gama. Parte 1</a></li>
<li><a href="../pt487514/index.html">Relat√≥rio anual de seguran√ßa e disponibilidade de rede da Qrator Labs</a></li>
<li><a href="../pt487516/index.html">T√©cnicas e t√°ticas de ca√ßa de atacantes usando arquivos de pr√©-busca</a></li>
<li><a href="../pt487518/index.html">Produtos radioativos. Espectr√¥metro gama. Parte 2</a></li>
<li><a href="../pt487522/index.html">N√≥s fazemos o terminal voar (parte 1)</a></li>
<li><a href="../pt487524/index.html">Por que um hackathon de inicializa√ß√£o de hardware precisa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>