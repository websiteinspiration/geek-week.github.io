<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚¨ÜÔ∏è üîâ üëèüèª Monitoreo en el centro de datos: c√≥mo cambiamos el viejo BMS a uno nuevo. Parte 1 üë∫ üßõ üñçÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øQu√© es un BMS?
 El sistema de monitoreo de los sistemas de ingenier√≠a en el centro de datos es un elemento clave de la infraestructura que afecta dir...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Monitoreo en el centro de datos: c√≥mo cambiamos el viejo BMS a uno nuevo. Parte 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/linxdatacenter/blog/492120/"><img src="https://habrastorage.org/getpro/habr/post_images/664/c21/53f/664c2153f646d342beb54c99478d0d8d.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQu√© es un BMS?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El sistema de monitoreo de los sistemas de ingenier√≠a en el centro de datos es un elemento clave de la infraestructura que afecta directamente un indicador tan importante para el centro de datos como la velocidad de respuesta del personal ante emergencias y, por lo tanto, la duraci√≥n de la operaci√≥n ininterrumpida.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muchos proveedores mundiales de equipos de centros de datos ofrecen sistemas de monitoreo BMS (Building Monitoring System). </font><font style="vertical-align: inherit;">Durante el trabajo del Linxdatacenter en Rusia, tuvimos la oportunidad de conocer diferentes sistemas y encontrar enfoques diametralmente opuestos de los proveedores para operar estos sistemas.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le contamos c√≥mo actualizamos completamente nuestro sistema BMS durante el a√±o pasado y por qu√©.&nbsp;&nbsp;</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La ra√≠z del problema</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo comenz√≥ hace 10 a√±os con el lanzamiento del centro de datos Linxdatacenter en San Petersburgo. El sistema BMS, de acuerdo con los est√°ndares de la industria de esos a√±os, era un servidor f√≠sico con software instalado al que se accede a trav√©s de un programa cliente (el llamado cliente "grueso").&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hab√≠a pocas compa√±√≠as que ofrecieran tales soluciones en ese momento. Sus productos eran el est√°ndar, la √∫nica respuesta a una solicitud existente. Y debemos darles lo que les corresponde: tanto en la actualidad como en la actualidad, los l√≠deres del mercado en su conjunto hacen frente a su tarea b√°sica: la entrega de soluciones funcionales para la operaci√≥n de los centros de datos.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La elecci√≥n l√≥gica para nosotros fue la soluci√≥n BMS de uno de los fabricantes m√°s grandes del mundo. El sistema seleccionado en ese momento cumpl√≠a con todos los requisitos para monitorear una instalaci√≥n de ingenier√≠a integrada, que es un centro de datos.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, con el tiempo, los requisitos y expectativas de los usuarios (es decir, nosotros, los operadores de centros de datos) de las soluciones de TI han cambiado. Y los grandes proveedores, como lo muestra el an√°lisis del mercado de soluciones propuestas, no estaban preparados para esto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El mercado corporativo de TI ha sido fuertemente influenciado por la industria B2C. Las soluciones digitales de hoy deber√≠an garantizar la comodidad del usuario final: este es el objetivo que los desarrolladores se han fijado. Esto es evidente en la mejora de las interfaces de usuario (UI) y la calidad de la experiencia del usuario (UX) de muchas aplicaciones empresariales.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una persona se acostumbra a la comodidad en todo lo que se relaciona con las herramientas digitales en la vida cotidiana, y hace las mismas demandas sobre las herramientas que utiliza para las tareas laborales. La gente espera de las aplicaciones corporativas la misma visibilidad, intuici√≥n, simplicidad y transparencia que tienen a su disposici√≥n en servicios financieros, llamadas de taxi o compras en l√≠nea. Los profesionales de TI que implementan soluciones en el entorno corporativo tambi√©n buscan obtener todas las "ventajas" modernas: implementaci√≥n y escalamiento simples, tolerancia a fallas y opciones de personalizaci√≥n ilimitadas.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los principales vendedores internacionales a menudo pasan por alto estas tendencias. </font><font style="vertical-align: inherit;">Con base en sus muchos a√±os de autoridad en la industria, las corporaciones que trabajan con clientes a menudo son categ√≥ricas e inflexibles. </font><font style="vertical-align: inherit;">La ilusi√≥n de su propia indispensabilidad no les permite ver c√≥mo las empresas tecnol√≥gicas j√≥venes aparecen literalmente ante sus narices, ofreciendo soluciones alternativas adaptadas a un cliente espec√≠fico y sin pagar de m√°s por la marca.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desventajas del antiguo sistema BMS&nbsp;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La principal desventaja de la soluci√≥n BMS obsoleta existente para nosotros fue su trabajo lento. La investigaci√≥n de varios eventos relacionados con la reacci√≥n insuficientemente r√°pida del personal de servicio nos ayud√≥ a comprender que a veces los eventos se mostraban en el sistema BMS con un largo retraso. Al mismo tiempo, el sistema no estaba sobrecargado o defectuoso, solo las versiones de sus componentes (por ejemplo, JAVA) estaban desactualizadas y no pod√≠an funcionar correctamente con nuevas versiones de sistemas operativos sin actualizaciones. Era posible actualizarlos solo junto con el sistema BMS, mientras que el proveedor no garantizaba la continuidad autom√°tica de la versi√≥n, es decir, para nosotros el proceso ser√≠a casi tan laborioso como la transici√≥n a un nuevo sistema, y ‚Äã‚Äãla nueva soluci√≥n retendr√≠a algunas de las deficiencias del antiguo.&nbsp;&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agregamos aqu√≠ algunas "cositas" m√°s desagradables:</font></font><br>
<br>
<ol>
<li>       ¬´ IP- ‚Äì   ¬ª;&nbsp;<br>
</li>
<li>       (            BMS);<br>
</li>
<li>  ;&nbsp;<br>
</li>
<li>  ¬´¬ª ,          ;<br>
</li>
<li>¬´¬ª     ,    .           ‚Äì            ;<br>
</li>
<li>¬´¬ª  ,  ,         ;<br>
</li>
<li> -      ,  ,      -  ;<br>
</li>
<li>    ‚Äì      -¬´¬ª   .   ‚Äì    ;<br>
<br>
    :<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6f0/c64/710/6f0c647101177fb535d396699097d7cc.png"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/44a/302/656/44a3026565568d4b1fbf1f679ffecd6f.png"></li>
<li>     ‚Äì    ,              ,   ;&nbsp;<br>
</li>
<li>          -  (,      );<br>
</li>
<li>     -   BMS    .&nbsp;<br>
</li>
</ol><br>
<br>
<h2>    BMS</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado lo anterior, nuestros principales requisitos son los siguientes:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dos m√°quinas independientes de reserva mutua con sincronizaci√≥n autom√°tica, que se ejecutan en dos plataformas de nube diferentes en diferentes centros de datos (en nuestro caso, centros de datos Linxdatacenter St. Petersburg y Mosc√∫);</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregue nuevos dispositivos de forma gratuita;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actualizaci√≥n gratuita de software y sus componentes (con la excepci√≥n de mejoras funcionales);</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo fuente abierto que nos permite soportar independientemente el sistema en caso de problemas del lado del desarrollador;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La capacidad de recibir y usar datos de BMS, por ejemplo en el sitio web o en su cuenta personal;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acceso a trav√©s de un navegador WEB sin un cliente "grueso";</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usar cuentas de usuario de dominio para acceder al BMS;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La presencia de animaci√≥n y muchos m√°s peque√±os y no muy deseos que se materializaron en una declaraci√≥n detallada de trabajo.</font></font><br>
</li>
</ol><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√öltimo intento</font></font></h2><br>
<img src="https://habrastorage.org/getpro/habr/post_images/d31/ad0/8f8/d31ad08f84082858ebe1d8ec8a20f207.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En ese momento, cuando nos dimos cuenta de que el centro de datos hab√≠a superado su BMS, la soluci√≥n m√°s obvia era actualizar el sistema existente. "No cambian caballos en el cruce", ¬øverdad?&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, las grandes corporaciones, por regla general, no ofrecen una modificaci√≥n personalizada de sus d√©cadas de soluciones "pulidas" que se venden en docenas de pa√≠ses. Mientras que las compa√±√≠as j√≥venes est√°n probando la idea o el prototipo de un producto futuro para consumidores potenciales y confiando en las revisiones de los usuarios en el desarrollo de productos, las corporaciones contin√∫an vendiendo licencias para un producto que alguna vez fue genial, pero, por desgracia, desactualizado y no flexible.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y sentimos la diferencia de enfoque en nosotros mismos. En el curso de la correspondencia con el fabricante del antiguo BMS, r√°pidamente se hizo evidente que la actualizaci√≥n del sistema existente por parte del vendedor de hecho nos llevar√≠a a comprar un nuevo sistema con una transferencia semiautom√°tica de la base, altos costos y dificultades durante la transferencia, que incluso el propio fabricante no pudo predecir. Por supuesto, en este caso, el costo del soporte t√©cnico de la soluci√≥n actualizada creci√≥ y qued√≥ la necesidad de comprar licencias para la expansi√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y la peor parte es que el nuevo sistema no pudo satisfacer completamente nuestros requisitos de redundancia. El sistema BMS actualizado podr√≠a implementarse, como quisi√©ramos, en una plataforma en la nube, lo que nos permitir√≠a abandonar el hardware, pero la opci√≥n de reserva no estaba incluida en el precio. Para hacer una copia de seguridad de los datos, tendr√≠amos que comprar un segundo servidor BMS virtual y un conjunto adicional de licencias. Con un costo de una licencia de aproximadamente $ 76 y el n√∫mero de direcciones IP de 1,000 unidades, se acumulan $ 76,000 de gastos adicionales solo para las licencias de la m√°quina de respaldo.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La "cereza" en la nueva versi√≥n de BMS fue la necesidad de comprar licencias adicionales "para todos los dispositivos", incluso para el servidor principal. </font><font style="vertical-align: inherit;">Aqu√≠ es necesario aclarar que hay dispositivos conectados al BMS a trav√©s de puertas de enlace. </font><font style="vertical-align: inherit;">La puerta de enlace tiene una direcci√≥n IP, pero controla varios dispositivos (en promedio 10). </font><font style="vertical-align: inherit;">En el antiguo BMS, esto requer√≠a una licencia para la direcci√≥n IP de la puerta de enlace, las estad√≠sticas se ve√≠an as√≠: "Direcciones IP / licencias 1000, dispositivos 1200". </font><font style="vertical-align: inherit;">El BMS actualizado funcionaba seg√∫n un principio diferente y las estad√≠sticas se ver√≠an como "direcciones IP 1000, dispositivos / licencias 1200". </font><font style="vertical-align: inherit;">Es decir, el proveedor en la nueva versi√≥n cambi√≥ el principio de asignaci√≥n de licencias, y tuvimos que comprar aproximadamente 200 licencias adicionales.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El presupuesto de la "actualizaci√≥n" como resultado consisti√≥ en cuatro puntos:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el costo de la versi√≥n en la nube y sus servicios de migraci√≥n;&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">licencias adicionales al paquete existente para dispositivos conectados a trav√©s de puertas de enlace;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">costo de la versi√≥n de respaldo de la nube;&nbsp;&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conjunto de licencias para la m√°quina de respaldo.&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°El costo total del proyecto fue de m√°s de $ 100,000! </font><font style="vertical-align: inherit;">Y esto sin mencionar la necesidad de comprar licencias para nuevos dispositivos en el futuro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, nos dimos cuenta de que ser√≠a m√°s f√°cil para nosotros, y quiz√°s m√°s barato, pedir un sistema creado desde cero, teniendo en cuenta todos nuestros requisitos y brindando la posibilidad de modernizaci√≥n en el futuro. </font><font style="vertical-align: inherit;">Pero aquellos que quer√≠an desarrollar un sistema tan complejo todav√≠a ten√≠an que encontrar, comparar propuestas, elegir e ir con el finalista desde TK hasta la implementaci√≥n ... Lea sobre esto en la segunda parte del material muy pronto.&nbsp;</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es492108/index.html">C√≥mo llegar a Silicon Valley: 7 formas de iniciarlo</a></li>
<li><a href="../es492110/index.html">Uso de un token en la nube con soporte para criptograf√≠a rusa en la plataforma Android</a></li>
<li><a href="../es492112/index.html">Alexander Plyushchev sobre la politizaci√≥n de Internet, la digitalizaci√≥n del poder y los robots que reemplazar√°n a los periodistas (pero esto no es exacto)</a></li>
<li><a href="../es492116/index.html">Tratando de lidiar con diferencias notables en la mortalidad por coronavirus en Italia y Corea del Sur</a></li>
<li><a href="../es492118/index.html">5 mitos sobre UPS, su refutaci√≥n y la situaci√≥n real</a></li>
<li><a href="../es492122/index.html">Migraci√≥n de Gitolite a GitLab con un script de Shell</a></li>
<li><a href="../es492128/index.html">Interface Tales of Toxic Grandfather "¬°Consigue un trapo!" (s1 e4)</a></li>
<li><a href="../es492130/index.html">Matem√°ticas borrosas. Relaciones y colas de lobo</a></li>
<li><a href="../es492134/index.html">Pros y contras de hacer negocios en los Estados Unidos: impresiones despu√©s de tres a√±os de desarrollo de dos compa√±√≠as</a></li>
<li><a href="../es492138/index.html">¬øPor qu√© (posiblemente) sobreestimamos la letalidad de COVID-19?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>