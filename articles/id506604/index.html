<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👆🏾 🙌🏼 👖 Konkurensi dan Efisiensi: Python vs FSM 📪 🤳🏿 🙌🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya akui, tapi saya tidak tahu Python. Hanya karena saya tidak menggunakannya. Namun demikian, mengambil perkembangannya, serta dalam mencoba untuk m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Konkurensi dan Efisiensi: Python vs FSM</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/506604/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya akui, tapi saya tidak tahu Python. Hanya karena saya tidak menggunakannya. Namun demikian, mengambil perkembangannya, serta dalam mencoba untuk menguraikan singkatan GIL yang misterius, saya pergi ke </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebuah artikel yang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menggambarkan "fenomena sihir yang tidak dapat dijelaskan" dari versi paralel dari fungsi yang bergantung pada CPU dengan Python. Ada keinginan untuk memeriksa kembali tes ini dan membandingkannya dengan implementasi yang setara dalam bentuk model mesin negara (singkatnya Finite-state machine atau FSM) di lingkungan Pemrograman Komponen Visual (otomatis) - VKP (a). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jelas </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ada</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">program ini tergantung pada CPU. Di sisi lain, jika ini bukan hanya assembler, maka dengan menguji dalam satu atau beberapa bahasa tingkat tinggi, kita akan lebih mungkin menyelidiki lapisan perangkat lunak yang disembunyikan olehnya. Oleh karena itu, mengingat Python, akan lebih tepat untuk berbicara tentang ketergantungan CPU dari interpreternya. Bahkan dapat diperdebatkan bahwa program Python akan memiliki kecepatan tergantung pada versi interpreter, dan akan memiliki karakteristik "mistisisme" untuknya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada saat yang sama, ada situasi di mana mungkin hampir tidak ada ketergantungan pada CPU (kita akan melihat ini). </font><font style="vertical-align: inherit;">Kita berbicara tentang bahasa yang model komputasinya berbeda dari arsitektur prosesor pada umumnya. </font><font style="vertical-align: inherit;">Model komputasi Python sesuai dengannya, dan model komputasi otomat, yang akan dibahas kemudian, memiliki arsitektur yang berbeda dan ini akan menentukan spesifikasi pengujiannya. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang akan menjadi kecepatan dan apakah mistik akan terjadi akan terungkap selama pengujian "kode automaton"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode Python yang dipinjam dari artikel, dalam versi serial dan paralel, masing-masing ditunjukkan pada Listing 1 dan 2. Dalam kasus kami, ini dilengkapi dengan garis-garis yang memperbaiki waktu kerja, dan tes berurutan dilampirkan dalam "pembungkus" yang memungkinkan Anda untuk mengatur jumlah pengulangan (konsekuensi dari kenalan saya dengan dekorator dengan Python). </font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daftar 1. Tes CPU berurutan dalam Python</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">import</span> time

def <span class="hljs-title">count</span><span class="hljs-params">(n)</span>:
  st_time </span>= time.time()
  <span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">0</span>:<font></font>
    n -= <span class="hljs-number">1</span><font></font>
  t = time.time() - st_time<font></font>
  print(<span class="hljs-string">"speed CPU------%s---"</span> % t)
  <span class="hljs-keyword">return</span> t<font></font>
<font></font>
def TestTime(fn, n):<font></font>
  def wrapper(*args):<font></font>
    tsum=<span class="hljs-number">0</span><font></font>
    st = time.time()<font></font>
    i=<span class="hljs-number">1</span>
    <span class="hljs-keyword">while</span> (i&lt;=n):<font></font>
      t = fn(*args)<font></font>
      tsum +=t<font></font>
      i +=<span class="hljs-number">1</span>
    <span class="hljs-keyword">return</span> tsum
  <span class="hljs-keyword">return</span> wrapper<font></font>
<font></font>
test1 = TestTime(count, <span class="hljs-number">2</span>)<font></font>
tt = test1(<span class="hljs-number">100000000</span>)<font></font>
print(<span class="hljs-string">"Total ---%s seconds ---"</span> % tt)
</code></pre><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daftar 2. Tes CPU paralel</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">
<span class="hljs-function"><span class="hljs-keyword">import</span> time
from threading <span class="hljs-keyword">import</span> Thread
def <span class="hljs-title">count</span><span class="hljs-params">(n)</span>:
  start_time </span>= time.time()
  <span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">0</span>:<font></font>
    n -= <span class="hljs-number">1</span>
  print(<span class="hljs-string">"speed CPU-%s seconds ---"</span> % (time.time() - start_time))<font></font>
<font></font>
k = <span class="hljs-number">2</span>
<span class="hljs-keyword">while</span> k &gt; <span class="hljs-number">0</span>:<font></font>
  print(<span class="hljs-string">"k=%d "</span> % k)<font></font>
  t1 = Thread(target=count,args=(<span class="hljs-number">100000000</span>,)); t1.start()<font></font>
  t2 = Thread(target=count,args=(<span class="hljs-number">100000000</span>,)); t2.start()<font></font>
  t1.join();<font></font>
  t2.join();<font></font>
  k -= <span class="hljs-number">1</span>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gbr. 1 dan Gbr. 2 menunjukkan hasil pengujian yang diperoleh untuk dua pengujian berturut-turut (Python 3.8.3 64-bit) untuk Intel® Core (TM) i5-2400S CPU @ 2.5 GHz, RAM 6.0 GB. </font><font style="vertical-align: inherit;">Hasilnya adalah sebagai berikut:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uji sekuensial - 14.221 detik</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tes paralel - 13,995 detik</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam artikel tentang GIL (selanjutnya disebut sebagai artikel asli) ini adalah 24,6 detik dan 45,5 detik masing-masing. </font><font style="vertical-align: inherit;">Waktu uji paralel perlu diperhatikan. </font><font style="vertical-align: inherit;">Dibandingkan dengan hasil artikel asli, ini menunjukkan bahwa banyak hal telah berkembang, jika hanya dari sudut pandang implementasi paralelisme penerjemah (meskipun ini hanya asumsi). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uo/mk/w6/uomkw6xfskl2xmcvhqzzuqo1yrk.jpeg" alt="gambar"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 1. </font><font style="vertical-align: inherit;">Runtime test sekuensial Python </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/w6/il/dw/w6ildwbdjwthschinfwkvvh66vc.jpeg" alt="gambar"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar. 2. </font><font style="vertical-align: inherit;">Uji paralel Python runtime</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perhatikan bahwa versi paralel hampir dua kali lebih lambat dari yang berurutan serupa. Selain itu, jika kita membuat tiga aliran, maka hasilnya akan melambat secara proporsional (lihat Gambar 3). Dari sini kita dapat menyimpulkan bahwa peningkatan jumlah utas mengarah ke beberapa peningkatan waktu operasi. Jika Anda tidak berada di bawah tenda, maka pada tingkat pemahaman Python saat ini, itu mungkin terlihat seperti mistisisme. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r7/lw/rm/r7lwrmuef38balputxp2u0vuguc.jpeg" alt="gambar"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 3. Tes CPU pada tiga utas dalam Python</font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sebelum melanjutkan pembuatan kode automaton dan pengujian di lingkungan VKP (a), kami mempertimbangkan penerapan automata di luarnya. Model dalam bentuk grafik automaton yang setara dengan algoritma artikel asli ditunjukkan pada Gambar. 4. Dari berbagai pilihan yang mungkin (lihat, misalnya, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) pertimbangkan yang paling khas dan terkenal - dalam format yang disebut teknologi SWITCH (untuk lebih jelasnya, lihat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">situs web ITMO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, kita akan membandingkan program Python dengan implementasi C ++. </font><font style="vertical-align: inherit;">Kode C ++ yang sesuai dengan grafik dengan kode peluncurannya (lihat fungsi utama) ditunjukkan pada Listing 3. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8l/io/zk/8liozkw_9cogioozutoi3xsadoq.jpeg" alt="gambar"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 4. </font><font style="vertical-align: inherit;">Model otomatis fungsi bergantung CPU</font></font></i><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daftar 3. Melaksanakan tes C ++</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FsmCount</span>
{</span>
<span class="hljs-keyword">public</span>:<font></font>
    FsmCount(<span class="hljs-keyword">int</span> n) { nCount = n; nState = <span class="hljs-number">0</span>; };
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ExecOneStep</span><span class="hljs-params">()</span></span>;
    <span class="hljs-keyword">int</span> nState;
<span class="hljs-keyword">protected</span>:
    <span class="hljs-keyword">int</span> nCount;
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x1</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y1</span><span class="hljs-params">()</span></span>;<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"FsmCount.h"</span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FsmCount::x1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> nCount &gt; <span class="hljs-number">0</span>; }
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FsmCount::y1</span><span class="hljs-params">()</span> </span>{ nCount--; }
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FsmCount::ExecOneStep</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">switch</span> (nState) {
    <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
        <span class="hljs-keyword">if</span> (x1())<font></font>
            y1();<font></font>
        <span class="hljs-keyword">else</span> nState = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QCoreApplication&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QTime&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"FsmCount.h"</span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[])</span>
</span>{
    <span class="hljs-function">QCoreApplication <span class="hljs-title">a</span><span class="hljs-params">(argc, argv)</span></span>;<font></font>
<font></font>
    QTime time;<font></font>
    FsmCount *pFsmCount{<span class="hljs-literal">nullptr</span>};<font></font>
<font></font>
    pFsmCount = <span class="hljs-keyword">new</span> FsmCount(<span class="hljs-number">100000000</span>);<font></font>
    time.start();<font></font>
    <span class="hljs-keyword">while</span> (!pFsmCount-&gt;nState)<font></font>
        pFsmCount-&gt;ExecOneStep();<font></font>
    <span class="hljs-keyword">double</span> dTime = QString::number(time.elapsed()).toDouble();
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%f"</span>, dTime);
    <span class="hljs-keyword">if</span> (pFsmCount) <span class="hljs-keyword">delete</span> pFsmCount;<font></font>
<font></font>
    <span class="hljs-keyword">return</span> a.exec();<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Waktu uji coba pada basis perangkat keras yang disebutkan adalah dalam 250 ms. </font><font style="vertical-align: inherit;">Ini lebih dari 55 kali lebih cepat dari kode Python. </font><font style="vertical-align: inherit;">Perbandingan dibuat dengan test case paralel untuk dua utas (lihat Gambar. 2). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi kecepatan dapat ditingkatkan bahkan lebih jika fungsi dihitung tanpa melampaui tindakan / metode y1 (lihat Listing 4). </font><font style="vertical-align: inherit;">Akibatnya, kecepatan tes menurun hingga kurang dari 1 ms (sulit untuk mengatakan lebih tepatnya, karena tes memberikan nilai yang sama dengan nol). </font><font style="vertical-align: inherit;">Jika nilai ini diambil sebagai dasar, maka kecepatannya lebih dari 14000 (!) Kali lebih tinggi daripada di Python. </font><font style="vertical-align: inherit;">Menjadi jelas mengapa C ++ lebih disukai ketika merancang sistem real-time yang sama.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daftar 4. Varian metode cepat untuk kelas FsmCount</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FsmCount::y1</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">while</span> (nCount&gt;<span class="hljs-number">0</span>)<font></font>
        nCount--;<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tujuan kami selanjutnya adalah </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membandingkan Python dengan lingkungan CPSU (a)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Tes otomatis, seperti di atas, harus sesuai dengan model pada Gambar. </font><font style="vertical-align: inherit;">4. Kode-nya menunjukkan Listing 5.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daftar 5. Program uji CPU otomatis</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"lfsaappl.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QTime&gt;</span></span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FCount</span> :</span>
    <span class="hljs-keyword">public</span> LFsaAppl<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">LFsaAppl* <span class="hljs-title">Create</span><span class="hljs-params">(CVarFSA *pCVF)</span> </span>{ Q_UNUSED(pCVF)<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FCount(nameFsa); }
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FCreationOfLinksForVariables</span><span class="hljs-params">()</span></span>;<font></font>
    FCount(<span class="hljs-built_in">string</span> strNam);<font></font>
    CVar *pVarCount;<font></font>
    CVar *pVarExtVarCount{<span class="hljs-literal">nullptr</span>};<font></font>
    CVar *pVarStrNameExtVarCount;<font></font>
    CVar *pVarWorkingHours;<font></font>
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x1</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x12</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y1</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y2</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y3</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y12</span><span class="hljs-params">()</span></span>;<font></font>
    QTime time;<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"stdafx.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"FCount.h"</span></span><font></font>
<font></font>
<span class="hljs-keyword">static</span> LArc TBL_Count[] = {<font></font>
    LArc(<span class="hljs-string">"st"</span>,	<span class="hljs-string">"st"</span>,<span class="hljs-string">"^x12"</span>,<span class="hljs-string">"y12"</span>),<font></font>
    LArc(<span class="hljs-string">"st"</span>,	<span class="hljs-string">"s1"</span>,<span class="hljs-string">"x12"</span>, <span class="hljs-string">"y2"</span>),<font></font>
    LArc(<span class="hljs-string">"s1"</span>,	<span class="hljs-string">"s1"</span>,<span class="hljs-string">"x1"</span>,  <span class="hljs-string">"y1"</span>),<font></font>
    LArc(<span class="hljs-string">"s1"</span>,	<span class="hljs-string">"st"</span>,<span class="hljs-string">"^x1"</span>, <span class="hljs-string">"y3"</span>),<font></font>
    LArc()<font></font>
};<font></font>
<font></font>
FCount::FCount(<span class="hljs-built_in">string</span> strNam):<font></font>
    LFsaAppl(TBL_Count, strNam)<font></font>
{ }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FCount::FCreationOfLinksForVariables</span><span class="hljs-params">()</span> </span>{<font></font>
    pVarCount = CreateLocVar(<span class="hljs-string">"n"</span>, CLocVar::vtInteger, <span class="hljs-string">"local counter"</span>);<font></font>
    pVarStrNameExtVarCount = CreateLocVar(<span class="hljs-string">"strNameExtVarCount"</span>, CLocVar::vtString, <span class="hljs-string">"external counter name"</span>);;
    <span class="hljs-built_in">string</span> str = pVarStrNameExtVarCount-&gt;strGetDataSrc();
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pVarExtVarCount = pTAppCore-&gt;GetAddressVar(pVarStrNameExtVarCount-&gt;strGetDataSrc().c_str(), <span class="hljs-keyword">this</span>); }<font></font>
    pVarWorkingHours  = CreateLocVar(<span class="hljs-string">"strWorkingHours"</span>, CLocVar::vtString, <span class="hljs-string">"working hours"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FCount::x1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarCount-&gt;GetDataSrc() &gt; <span class="hljs-number">0</span>; }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FCount::x12</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarExtVarCount != <span class="hljs-literal">nullptr</span>; }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCount::y1</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">int</span> n = <span class="hljs-keyword">int</span>(pVarCount-&gt;GetDataSrc());<font></font>
    pVarCount-&gt;SetDataSrc(<span class="hljs-keyword">this</span>, --n);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCount::y2</span><span class="hljs-params">()</span> </span>{<font></font>
    time.start();<font></font>
    pVarCount-&gt;SetDataSrc(<span class="hljs-keyword">this</span>, pVarExtVarCount-&gt;GetDataSrc());<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCount::y3</span><span class="hljs-params">()</span> </span>{<font></font>
    pVarWorkingHours-&gt;SetDataSrc(<span class="hljs-literal">nullptr</span>, QString::number(time.elapsed()).toStdString(), <span class="hljs-literal">nullptr</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCount::y12</span><span class="hljs-params">()</span> </span>{ FInit(); }
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Waktu pelaksanaan pengujian dalam kisaran 5,35 detik dengan jumlah siklus 100.000. ditulis dengan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cepat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C ++, ini berjalan lebih dari 2600 kali (!?) lebih lambat dari tes paralel dengan Python. Hasil seperti itu tidak bisa tidak mengecewakan :( Tapi kami mencatat bahwa durasi jam diskrit adalah 0,0535 ms. Misalnya, siklus PLC standar dari tipe OVEN-100 adalah 1 ms, dan karena itu, dari sudut pandang sistem kontrol waktu nyata, hasilnya cukup baik. Meskipun, masih sekilas, hasilnya, tidak mendukung AP, karena kodenya tebal, dan kecepatan menyebabkan alarm tertentu (misalnya, untuk tugas komputasi murni).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan C ++ sebagai bahasa desain VKP (a) membuatnya cukup mudah untuk memecahkan masalah kecepatan yang muncul. Listing 6 menunjukkan kode untuk otomat menggunakan utas sistem standar berdasarkan kelas QThread dari perpustakaan Qt. Akibatnya, waktu turun menjadi 70-80 ms bahkan ketika siklus meningkat menjadi 10.000.000. Dengan demikian, pengujian menggunakan aliran sudah 200 kali lebih cepat daripada di Python. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perhatikan bahwa hasil yang diperoleh adalah versi tes yang lebih lambat, disinkronkan dengan lingkungan CPSU (a). Jika Anda mengomentari baris (Listing 6):</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">while</span> (bIfExecuteStep) { bIfExecuteStep = <span class="hljs-literal">false</span>; }, </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
maka waktu akan "runtuh" ​​ke 1 ms atau kurang. </font><font style="vertical-align: inherit;">Akibatnya, kecepatan sehubungan dengan Python sudah akan lebih dari 14.000 kali lebih tinggi. </font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Catatan 1.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bendera bIfExecuteStep dikelola oleh lingkungan VKP (a). </font><font style="vertical-align: inherit;">Sudah diatur olehnya di awal ukuran diskrit saat ini. </font><font style="vertical-align: inherit;">Diperkenalkan untuk menyinkronkan dengan waktu diskrit dari ruang otomat proses. </font></font><br>
</i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk meningkatkan kecepatan, kami membuat kombinasi automaton dan stream, di mana yang terakhir mengimplementasikan fungsi yang diinginkan, dan automaton membungkusnya. </font><font style="vertical-align: inherit;">Ternyata menjadi objek yang agak spesifik, tetapi kami juga memecahkan masalah peningkatan kecepatan kerja, yang kami putuskan sebagai hasilnya.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daftar 6. Uji CPU berbasis ulir</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"lfsaappl.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QThread&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QTime&gt;</span></span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QCount</span>;</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ThCount</span> :</span> <span class="hljs-keyword">public</span> QThread<font></font>
{<font></font>
    Q_OBJECT<font></font>
<span class="hljs-keyword">public</span>:<font></font>
    ThCount(QCount *p, QObject *parent);<font></font>
<span class="hljs-keyword">protected</span>:
    <span class="hljs-keyword">bool</span> bIfRun{<span class="hljs-literal">false</span>};
    <span class="hljs-keyword">bool</span> bIfStop{<span class="hljs-literal">false</span>};
    <span class="hljs-keyword">bool</span> bIfExecuteStep{<span class="hljs-literal">false</span>};<font></font>
    QCount *pQCount;<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QCount</span>;</span><font></font>
};<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QCount</span> :</span>
    <span class="hljs-keyword">public</span> LFsaAppl<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ExecuteThreadStep</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">WaitForThreadToFinish</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function">LFsaAppl* <span class="hljs-title">Create</span><span class="hljs-params">(CVarFSA *pCVF)</span> </span>{ Q_UNUSED(pCVF)<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> QCount(nameFsa); }
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FCreationOfLinksForVariables</span><span class="hljs-params">()</span></span>;<font></font>
    QCount(<span class="hljs-built_in">string</span> strNam);
    <span class="hljs-keyword">virtual</span> ~QCount(<span class="hljs-keyword">void</span>);<font></font>
    ThCount  *pThCount{<span class="hljs-literal">nullptr</span>};<font></font>
    CVar *pVarCount;<font></font>
    CVar *pVarExtVarCount;<font></font>
    CVar *pVarStrNameExtVarCount;<font></font>
    CVar *pVarWorkingHours;<font></font>
<font></font>
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x1</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x12</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y1</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y2</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y12</span><span class="hljs-params">()</span></span>;<font></font>
    QTime time;<font></font>
<font></font>
<span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ThCount</span>;</span><font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"stdafx.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"QCount.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QTimer&gt;</span></span><font></font>
<font></font>
<span class="hljs-keyword">static</span> LArc TBL_Count[] = {<font></font>
    LArc(<span class="hljs-string">"st"</span>,		<span class="hljs-string">"st"</span>,<span class="hljs-string">"^x12"</span>,<span class="hljs-string">"y12"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"st"</span>,		<span class="hljs-string">"s2"</span>,<span class="hljs-string">"x12"</span>,	<span class="hljs-string">"y1"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"s2"</span>,		<span class="hljs-string">"s3"</span>,<span class="hljs-string">"^x1"</span>,	<span class="hljs-string">"y2"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"s3"</span>,		<span class="hljs-string">"s2"</span>,<span class="hljs-string">"^x1"</span>,	<span class="hljs-string">"--"</span>),			<span class="hljs-comment">//</span><font></font>
    LArc()<font></font>
};<font></font>
<font></font>
QCount::QCount(<span class="hljs-built_in">string</span> strNam):<font></font>
    LFsaAppl(TBL_Count, strNam, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>)<font></font>
{ }<font></font>
<font></font>
QCount::~QCount(<span class="hljs-keyword">void</span>) { }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">QCount::FCreationOfLinksForVariables</span><span class="hljs-params">()</span> </span>{<font></font>
    pVarCount = CreateLocVar(<span class="hljs-string">"n"</span>, CLocVar::vtInteger, <span class="hljs-string">"local counter"</span>);<font></font>
    pVarExtVarCount = <span class="hljs-literal">nullptr</span>;<font></font>
    pVarStrNameExtVarCount = CreateLocVar(<span class="hljs-string">"strNameExtVarCount"</span>, CLocVar::vtString, <span class="hljs-string">"external counter name"</span>);;
    <span class="hljs-built_in">string</span> str = pVarStrNameExtVarCount-&gt;strGetDataSrc();
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pVarExtVarCount = pTAppCore-&gt;GetAddressVar(pVarStrNameExtVarCount-&gt;strGetDataSrc().c_str(), <span class="hljs-keyword">this</span>); }<font></font>
    pVarWorkingHours  = CreateLocVar(<span class="hljs-string">"strWorkingHours"</span>, CLocVar::vtString, <span class="hljs-string">"working hours"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">QCount::ExecuteThreadStep</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">if</span> (pThCount) pThCount-&gt;bIfExecuteStep = <span class="hljs-literal">true</span>; }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">QCount::WaitForThreadToFinish</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">if</span> (pThCount) {
        <span class="hljs-comment">//  </span>
        pThCount-&gt;bIfRun = <span class="hljs-literal">false</span>;<font></font>
        pThCount-&gt;quit();<font></font>
        pThCount-&gt;wait(<span class="hljs-number">500</span>);<font></font>
        pThCount-&gt;<span class="hljs-built_in">terminate</span>();<font></font>
    }<font></font>
    <span class="hljs-keyword">delete</span> pThCount;<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">QCount::x1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarCount-&gt;GetDataSrc() &gt; <span class="hljs-number">0</span>; }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">QCount::x12</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarExtVarCount != <span class="hljs-literal">nullptr</span>; }
<span class="hljs-comment">//  </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">QCount::y1</span><span class="hljs-params">()</span> </span>{<font></font>
    pThCount    = <span class="hljs-keyword">new</span> ThCount(<span class="hljs-keyword">this</span>, pTAppCore-&gt;pMainFrame);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">QCount::y2</span><span class="hljs-params">()</span> </span>{ pVarCount-&gt;SetDataSrc(<span class="hljs-keyword">this</span>, pVarExtVarCount-&gt;GetDataSrc()); }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">QCount::y12</span><span class="hljs-params">()</span> </span>{ FInit(); }
<span class="hljs-comment">//                         </span><font></font>
ThCount::ThCount(QCount *p, QObject *parent) :<font></font>
    QThread(parent)<font></font>
{<font></font>
    pQCount = p;<font></font>
    bIfRun = <span class="hljs-literal">true</span>;      <span class="hljs-comment">//   / </span>
    start(QThread::IdlePriority);            <span class="hljs-comment">//  </span><font></font>
}<font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ThCount::run</span><span class="hljs-params">()</span>
</span>{<font></font>
    bIfStop = <span class="hljs-literal">false</span>;       <span class="hljs-comment">//    </span>
    pQCount-&gt;pVarWorkingHours-&gt;SetDataSrc(<span class="hljs-literal">nullptr</span>, <span class="hljs-string">""</span>, <span class="hljs-literal">nullptr</span>);<font></font>
    pQCount-&gt;pVarCount-&gt;SetDataSrc(pQCount, pQCount-&gt;pVarExtVarCount-&gt;GetDataSrc());<font></font>
    pQCount-&gt;pVarCount-&gt;UpdateVariable();<font></font>
    <span class="hljs-keyword">while</span>(bIfRun)  {
        <span class="hljs-keyword">if</span> (pQCount-&gt;pVarCount-&gt;GetDataSrc() &gt; <span class="hljs-number">0</span>) {<font></font>
            bIfExecuteStep = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">int</span> n = pQCount-&gt;pVarCount-&gt;GetDataSrc();
            <span class="hljs-keyword">if</span> (n&gt;<span class="hljs-number">0</span>) {<font></font>
                pQCount-&gt;time.start();<font></font>
            }<font></font>
            pQCount-&gt;time.start();<font></font>
            <span class="hljs-keyword">while</span> (n&gt;<span class="hljs-number">0</span>) {<font></font>
                n--;<font></font>
                <span class="hljs-keyword">while</span> (bIfExecuteStep) { bIfExecuteStep = <span class="hljs-literal">false</span>; }<font></font>
            }<font></font>
            <span class="hljs-built_in">string</span> str = QString::number(pQCount-&gt;time.elapsed()).toStdString();<font></font>
            pQCount-&gt;pVarWorkingHours-&gt;SetDataSrc(<span class="hljs-literal">nullptr</span>, QString::number(pQCount-&gt;time.elapsed()).toStdString(), <span class="hljs-literal">nullptr</span>);<font></font>
            pQCount-&gt;pVarCount-&gt;SetDataSrc(pQCount, <span class="hljs-number">0.0</span>);
            <span class="hljs-keyword">while</span> (n&lt;=<span class="hljs-number">0</span>) {<font></font>
                n = <span class="hljs-keyword">int</span>(pQCount-&gt;pVarCount-&gt;GetDataSrc());<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
    bIfStop = <span class="hljs-literal">true</span>;        <span class="hljs-comment">//    </span><font></font>
} <font></font>
</code></pre><br>
</div>
                    </div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertimbangkan tes lain, perhatikan waktu tayang utas.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Karena mereka benar-benar identik, kemudian diluncurkan secara bersamaan, mereka harus menyelesaikan pekerjaan secara bersamaan. Jika untuk Python ini benar hanya dalam kesalahan tertentu (lihat Gambar. 5), maka untuk proses dalam CPSU (a) waktu sepenuhnya bertepatan (lihat Gambar. 6). Perhatikan bahwa objek stopwatch tambahan yang dibuat, yang menentukan waktu tes berjalan di luarnya, menunjukkan waktu yang hampir sama dengan waktu yang diukur oleh tes / tes itu sendiri (lihat Listing 4). </font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komentar 2.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "Stopwatch" adalah proses otomatis yang memulai hitung mundur ketika proses yang dikontrol memasuki keadaan "s1" dan memperbaiki waktu ketika memasuki keadaan "st"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (lihat tabel transisi otomat pada Listing 4).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ye/m9/9j/yem99jhhwbjomjniiquk588avdq.jpeg" alt="gambar"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gbr.5. Test run time dalam Python </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/gj/vv/la/gjvvlahvngzhh_agxuwgesij9l0.jpeg" alt="gambar"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 6. Waktu uji dalam lingkungan VKP (a)</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Automata, dibandingkan dengan model lain, memiliki waktu diskrit. Nilai jam diskrit dapat diperbaiki untuk mesin sinkron atau mengambang - untuk asinkron (klasifikasi menurut Glushkov V.M.). </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tes selanjutnya adalah memeriksa lingkungan CPSU (a) untuk sinkronisasi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - kemampuan untuk mempertahankan ukuran waktu diskrit yang konstan. Ingatlah bahwa operasi sinkron mesin otomatis sangat dibutuhkan dalam desain sistem kontrol otomatis (lihat detail [1]). Pada saat yang sama, mode ini berfungsi sebagai </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contoh kemandirian sebenarnya dari model komputasi dari kecepatan CPU</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Waktu uji berjalan dengan siklus clock diskrit (dalam teori kontrol otomatis (TAU) disebut interval kuantisasi) dengan durasi 1 ms dan jumlah siklus 100000 harus 100 detik. </font><font style="vertical-align: inherit;">Hasil yang diperoleh selama pengujian ditunjukkan pada Gambar. </font><font style="vertical-align: inherit;">7. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bk/jk/po/bkjkpof2u2aemojgtv4at2jpvuq.jpeg" alt="gambar"><br>
 <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gbr. 7. </font><font style="vertical-align: inherit;">Pengujian dalam mode sinkron (1 ms)</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Kami benar-benar menyelesaikan pengujian utama dan sekarang kami dapat mendiskusikan jumlah kode, karena dengan melihat Listing 3, kritik tidak akan gagal untuk menunjukkan hal ini. </font><font style="vertical-align: inherit;">Tetapi sekali lagi mereka akan melupakan apa yang telah dikatakan lebih dari sekali. </font><font style="vertical-align: inherit;">Kode tersebut mencakup interaksi pengorganisasian shell dengan lingkungan CPSU (a). </font><font style="vertical-align: inherit;">Automaton jenis apa yang akan diambil jika Anda mengecualikannya dijelaskan pada Listing 7, yang merupakan kode murni untuk </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fungsi automaton</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daftar 7. Bersihkan kode mesin penjual otomatis</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"lfsaappl.h"</span></span><font></font>
<font></font>
<span class="hljs-keyword">extern</span> LArc TBL_CountMini[];
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FCountMini</span> :</span>
    <span class="hljs-keyword">public</span> LFsaAppl<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:<font></font>
    FCountMini(<span class="hljs-built_in">string</span> strNam): LFsaAppl(TBL_CountMini, strNam) {};
    <span class="hljs-keyword">int</span> nCount;
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x1</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y1</span><span class="hljs-params">()</span></span>;<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"stdafx.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"fcountmini.h"</span></span><font></font>
<font></font>
LArc TBL_CountMini[] = {<font></font>
    LArc(<span class="hljs-string">"1"</span>,	<span class="hljs-string">"1"</span>,<span class="hljs-string">"x1"</span>,	<span class="hljs-string">"y1"</span>),<font></font>
    LArc(<span class="hljs-string">"1"</span>,	<span class="hljs-string">"00"</span>,<span class="hljs-string">"^x1"</span>,	<span class="hljs-string">"--"</span>),<font></font>
    LArc()<font></font>
};<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FCountMini::x1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> nCount &gt; <span class="hljs-number">0</span>; }
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCountMini::y1</span><span class="hljs-params">()</span> </span>{ --nCount; }
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata, lebih sederhana, walaupun waktu operasinya tetap sama. </font><font style="vertical-align: inherit;">Tetapi, seperti yang telah kita ketahui, waktu dari suatu fungsi tertutup dalam suatu aliran secara harfiah adalah beberapa mikrodetik. </font><font style="vertical-align: inherit;">Tindakan serupa telah dipertimbangkan (lihat Listing 4). </font><font style="vertical-align: inherit;">Dengan itu, waktu pengujian akan dihitung, seperti sebelumnya, dalam mikrodetik (lihat Gambar. 8). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, banyak masalah program otomatis dapat diselesaikan jika Anda membayangkan bagaimana mengelola efektivitasnya. </font><font style="vertical-align: inherit;">Fitur C ++ dalam hal ini sebenarnya tidak terbatas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jc/9e/dd/jc9eddl6kh2-ycdztw6ukgrgcl4.jpeg" alt="gambar"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gbr. 8. </font><font style="vertical-align: inherit;">Hasil pengujian tindakan y1 (daftar 6). </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masih mempertimbangkan "pembungkus otomatis" untuk fungsi pada Listing 7. Listing 8. menunjukkannya. Kode ini tebal, tetapi, sekali lagi, generik, yang melakukan fungsi standar untuk lingkungan.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listing 8. Wrapper untuk fungsi otomat pada Listing 5</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"lfsaappl.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QTime&gt;</span></span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FCountMini</span>;</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FCount</span> :</span>
    <span class="hljs-keyword">public</span> LFsaAppl<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">LFsaAppl* <span class="hljs-title">Create</span><span class="hljs-params">(CVarFSA *pCVF)</span> </span>{ Q_UNUSED(pCVF)<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FCount(nameFsa); }
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FCreationOfLinksForVariables</span><span class="hljs-params">()</span></span>;<font></font>
    FCount(<span class="hljs-built_in">string</span> strNam);
    <span class="hljs-keyword">virtual</span> ~FCount(<span class="hljs-keyword">void</span>);<font></font>
    CVar *pVarCount;<font></font>
    CVar *pVarExtVarCount{<span class="hljs-literal">nullptr</span>};<font></font>
    CVar *pVarStrNameExtVarCount;<font></font>
    CVar *pVarWorkingHours;<font></font>
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x1</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x12</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-keyword">void</span> <span class="hljs-title">y3</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y4</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y12</span><span class="hljs-params">()</span></span>;<font></font>
    QTime time;<font></font>
    FCountMini *pCountMini{<span class="hljs-literal">nullptr</span>};<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"stdafx.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"FCount.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"fcountmini.h"</span></span><font></font>
<font></font>
<span class="hljs-keyword">static</span> LArc TBL_Count[] = {<font></font>
    LArc(<span class="hljs-string">"st"</span>,	<span class="hljs-string">"s1"</span>,<span class="hljs-string">"--"</span>,<span class="hljs-string">"y4"</span>),<font></font>
    LArc(<span class="hljs-string">"s1"</span>,	<span class="hljs-string">"st"</span>,<span class="hljs-string">"--"</span>,<span class="hljs-string">"y3"</span>),<font></font>
    LArc()<font></font>
};<font></font>
<font></font>
FCount::FCount(<span class="hljs-built_in">string</span> strNam):<font></font>
    LFsaAppl(TBL_Count, strNam)<font></font>
{ }<font></font>
<font></font>
FCount::~FCount(<span class="hljs-keyword">void</span>)<font></font>
{<font></font>
    <span class="hljs-keyword">if</span> (pCountMini) <span class="hljs-keyword">delete</span> pCountMini;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FCount::FCreationOfLinksForVariables</span><span class="hljs-params">()</span> </span>{<font></font>
    pVarCount = CreateLocVar(<span class="hljs-string">"n"</span>, CLocVar::vtInteger, <span class="hljs-string">"local counter"</span>);<font></font>
    pVarStrNameExtVarCount = CreateLocVar(<span class="hljs-string">"strNameExtVarCount"</span>, CLocVar::vtString, <span class="hljs-string">"external counter name"</span>);;
    <span class="hljs-built_in">string</span> str = pVarStrNameExtVarCount-&gt;strGetDataSrc();
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pVarExtVarCount = pTAppCore-&gt;GetAddressVar(pVarStrNameExtVarCount-&gt;strGetDataSrc().c_str(), <span class="hljs-keyword">this</span>); }<font></font>
    pVarWorkingHours  = CreateLocVar(<span class="hljs-string">"strWorkingHours"</span>, CLocVar::vtString, <span class="hljs-string">"working hours"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FCount::x1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarCount-&gt;GetDataSrc() &gt; <span class="hljs-number">0</span>; }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FCount::x12</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarExtVarCount != <span class="hljs-literal">nullptr</span>; }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCount::y3</span><span class="hljs-params">()</span> </span>{<font></font>
    pVarWorkingHours-&gt;SetDataSrc(<span class="hljs-literal">nullptr</span>, QString::number(time.elapsed()).toStdString(), <span class="hljs-literal">nullptr</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCount::y4</span><span class="hljs-params">()</span> </span>{<font></font>
    time.start();<font></font>
    <span class="hljs-keyword">if</span> (pCountMini) <span class="hljs-keyword">delete</span> pCountMini;<font></font>
        pCountMini = <span class="hljs-keyword">new</span> FCountMini(<span class="hljs-string">"CountMini"</span>);<font></font>
<font></font>
    pCountMini-&gt;nCount = pVarExtVarCount-&gt;GetDataSrc();<font></font>
    pCountMini-&gt;FCall(<span class="hljs-keyword">this</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCount::y12</span><span class="hljs-params">()</span> </span>{ FInit(); }
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, kita bisa meringkasnya. Dalam kasus umum, mesin di CPSU (a) bekerja hampir 2.600 kali lebih lambat dibandingkan dengan proses dalam Python. Faktanya, penilaian terhadap "penerjemah otomatis" dari lingkungan VKP (a). Di satu sisi, cadangan pertumbuhan kolosal tersembunyi di sini, dan, di sisi lain, dari sudut pandang reaktivitas media, bahkan laju seperti itu sudah cukup. Tetapi, ingat, penggunaan utas memungkinkan kita untuk mengatasi masalah ini sekarang dan sebaliknya, atas dasar ini menjadi lebih cepat daripada Phython lebih dari 200 kali. Selain utas, ada "solusi otomatis" yang lebih sederhana dan lebih akurat secara teoritis - memanggil fungsi masalah dalam satu tindakan atau lebih (analog dengan "memecah operasi atau proses menjadi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">potongan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " lihat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Dalam kasus apa pun, dengan C ++, situasi dalam AP dari sudut pandang kinerja program tidak terlihat putus asa, dan dalam situasi tertentu (merancang, misalnya, sistem real-time) bahkan lebih menguntungkan. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan akhirnya, sedikit tentang apa yang melampaui pengujian sederhana.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Saya terpikat oleh </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebuah artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Saya setuju bahwa "cukup untuk takut akan keputusan yang indah secara subyektif dalam kode." Dengan satu perubahan signifikan - saya untuk objektivitas. Kode program otomat mungkin tampak rumit (yang cukup dapat diperbaiki), tidak terlalu indah (ini sangat subjektif), dan bahkan mungkin tidak diatur dalam kecepatan (di sini, seperti yang telah kita lihat, ada lebih dari satu solusi dalam AP), tetapi pemahaman esensinya mengungkapkan sesuatu yang tersembunyi dari luar pemandangan indah. Apalagi keindahan objektif.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa kriteria objektivitas di sini? Teori. Dalam kasus kami, teori automata. Implementasinya, tidak peduli bagaimana tampilannya, menurut definisi, tidak bisa jelek;) Dan sebaliknya, jika implementasi tidak cocok, maka tidak peduli seberapa menguntungkan tampilannya, biasanya tidak memiliki perspektif dari sudut pandang teori. Itulah mengapa tidak peduli seberapa besar semangat Anda menyebarkan teknologi SWITCH, tidak peduli seberapa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memuji UniMod</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi jika mereka tidak memenuhi persyaratan teori automata, mendistorsi keindahannya, maka kami tanpa sadar dan obyektif menghadapi situasi bahwa “otomat tidak berbeda dengan banyak orang”. Dan "amburadul" dan "menari dengan rebana" tidak dapat memperbaiki situasi ini. Tetapi, jika Anda mengikuti teorinya, ini tidak diperlukan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menembak panah kritis ke arah senapan mesin, saya, seperti yang "buruk tentang bak mandi", tidak bisa tidak mengingat coroutine;)</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya ingin menguji mereka juga, tetapi pada saat yang sama mengevaluasi kecantikan mereka</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , karena apakah itu benar-benar keindahan "desain" seperti yang ditunjukkan pada gambar. 9 ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lihat juga</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), yang mengimplementasikan, jika saya tidak salah, dua paralel (?) Operator a = ab dan b = a + b, dapat menyebabkan setidaknya kekaguman minimal? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_1/lj/2t/_1lj2tagueuf7u2itoqbltdrvnu.jpeg" alt="gambar"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 9. Sebuah contoh dari corutin.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Mungkin kode ini bahkan efektif, tetapi bagi seseorang itu tidak diragukan lagi indah, tetapi itu sesuatu yang lain. Saya di sini bukan tentang keinginan besar untuk menggambarkan paralelisme dengan pola-pola pemikiran yang konsisten. Meskipun ini, jika itu mudah, menyebalkan, karena </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pemikiran perlu diubah</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Saya sangat berbeda. Adakah teori coroutine independen dari bahasa pemrograman yang akan memungkinkan kita untuk secara sederhana dan jelas mengatasi "coretan" bahasa (lihat sekali lagi Gambar 9) dan memberikan jawaban yang tidak ambigu untuk pertanyaan yang diajukan? Berkenaan dengan coroutine, saya tidak tahu teori seperti itu, meskipun, jujur ​​saja, saya mencarinya;) Untuk automata terbatas, ini adalah teori automata di mana otomat selalu merupakan otomat dalam bentuk apa pun (grafik, tabel, matriks, dll.) Tanpa koneksi bahasa / bahasa pemrograman. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menarik pada "string tes" yang tampaknya paling sederhana, kami menyentuh pada kusut ... masalah paralel. Mungkin memang benar bahwa mereka hanya mengembang sedikit. Dan mereka mulai, jika seseorang tidak lupa, dengan fungsi dasar CPU-dependent. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Siapa yang akan berpikir apa yang akan menghasilkan ... :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sastra</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Miroshnik IV </font><font style="vertical-align: inherit;">Teori kontrol otomatis. </font><font style="vertical-align: inherit;">Sistem linier. </font><font style="vertical-align: inherit;">- St. Petersburg: Peter, 2005 .-- 336 hal.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id506588/index.html">Apa itu algoritma! (bagian 2)</a></li>
<li><a href="../id506590/index.html">Конференция DEVOXX UK. Выбираем фреймворк: Docker Swarm, Kubernetes или Mesos. Часть 2</a></li>
<li><a href="../id506594/index.html">Redis Praktik Terbaik, Bagian 3</a></li>
<li><a href="../id506598/index.html">Microsoft: Rust является 'лучшим шансом' в отрасли программирования безопасных систем</a></li>
<li><a href="../id506600/index.html">Kontrak untuk pengembangan situs dalam hal manajemen proyek (teori + sampel)</a></li>
<li><a href="../id506606/index.html">Pencipta clicker PIXI.js</a></li>
<li><a href="../id506610/index.html">WAL-G: Pencadangan dan Pemulihan Basis Data PostgreSQL</a></li>
<li><a href="../id506612/index.html">Cara meningkatkan kelengkapan kursus online besar-besaran</a></li>
<li><a href="../id506620/index.html">Berpikir kreatif: apa itu, bagaimana mengukur dan meningkatkan potensi Anda</a></li>
<li><a href="../id506624/index.html">Berita FOSS No. 20 - ulasan berita gratis dan sumber terbuka untuk 8-14 Juni 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>