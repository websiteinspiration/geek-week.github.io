<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☝🏿 🤱🏼 🕺🏿 最小のオートメーション。ノート。RESTful API 🧜🏿 🤰🏽 🤷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="この記事は、一連の記事「Automation For The Smallest」で約束された短いメモの1つです。
 IPAMシステムとやり取りする主な方法はRESTful APIであるため、個別に説明することにしました。
 
 
 私は現代世界の建築家を称賛します-私たちは標準化されたインターフェー...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>最小のオートメーション。ノート。RESTful API</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485618/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事は、一連の記事「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automation For The Smallest」で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">約束された短いメモの1つです</font><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IPAMシステムとやり取りする主な方法はRESTful APIであるため、個別に説明することにしました。</font></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は現代世界の建築家を称賛します-私たちは標準化されたインターフェースを持っています。はい、それらの多くがあります-これはマイナスですが、彼らは-これはプラスです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのインタラクションインターフェイスは、API-Application Programming Interfaceという名前になりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのインターフェースの1つはRESTful APIであり、NetBoxでの作業に使用されます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/639/c1e/e86/639c1ee8692aed286b99deeb01796e89.svg" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非常にシンプルな場合、APIはクライアントにサーバーを管理するための一連のツールを提供します。また、クライアントは基本的に何でもかまいません。Webブラウザー、コマンドコンソール、製造元が開発したアプリケーション、またはAPIにアクセスできるその他のアプリケーションです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、NetBoxの場合、次の方法で新しいデバイスをデバイスに追加できます：Webブラウザーを介して、コンソールでリクエストを送信し、Postmanを使用し、Pythonでリクエストライブラリにアクセスし、pynetbox SDKを使用するか、Swaggerに移動します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、単一のインターフェースを作成すると、製造元はそれを接続する方法を新しいクライアントごとに同意する必要から永遠に解放されます（これは少し狡猾ですが）。</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテンツ</font></font></h1><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REST、RESTful、API</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTPメッセージの構造</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタートライン</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">見出し</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTPメッセージの本文</font></font></li>
</ul><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP GET</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP POST</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP PUT</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTPパッチ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP DELETE</font></font></li>
</ul><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTful APIを使用する方法</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カール</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">郵便配達</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python +リクエスト</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pynebtbox SDK</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SWAGGER</font></font></li>
</ul><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTと代替案に対する批判</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">役立つリンク</font></font></li>
</ul><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REST、RESTful、API</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下では、RESTについて簡単に説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTful API</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はまさに</font><font style="vertical-align: inherit;">RESTベースのインタラクション</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェイスですが</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REST</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REpresentational State Transfer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）自体はWEBサービスの作成に使用される一連の制限です。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Roy Fieldingの論文、Architectural Styles、Design of Network-based Software Architecturesの第5章にある</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
制限について正確に読むことができます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それらのうち（私の観点から）最も重要な3つだけを挙げましょう。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTアーキテクチャーは、クライアント/サーバー相互作用モデルを使用します。 </font></font></li>
<li> REST-   ,    .           , ,  ,   Stateless —     . </li>
<li> .     ,   .    ,        ,         .   ,   ,     .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RESTのすべての原則を満たすWEBサービスは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTful WEBサービス</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、RESTful WEBサービスを提供するAPIをRESTful APIと呼びます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RESTはプロトコルではなく、いわゆるアーキテクチャスタイル（の1つ）です。ロイ・フィールディングによってHTTPで開発されたRESTは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP 1.1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をトランスポートとして</font><font style="vertical-align: inherit;">使用することを目的とし</font><font style="vertical-align: inherit;">ていました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
宛先アドレス（つまり、オブジェクト、または別の方法で、エンドポイント）-これは通常の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URI</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
送信されるデータの形式は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linkmeupに関するこのシリーズの記事では、読み取り専用のデプロイメントがデプロイされています（読者の皆さんにとって）NetBoxのインストール：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">netbox.linkmeup.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：45127。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
読み取り権限は必要ありませんが、トークンを使用して読み取りたい場合は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIトークン：90a22967d0bc4bdcd8ca47ec490bbf0b0cb2d9c8を</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用できます</font><font style="vertical-align: inherit;">。</font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">楽しみのリクエストを1つ作成しましょう。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET -H <span class="hljs-string">"Authorization: TOKEN 90a22967d0bc4bdcd8ca47ec490bbf0b0cb2d9c8"</span> \<font></font>
-H <span class="hljs-string">"Accept: application/json; indent=4"</span> \<font></font>
http://netbox.linkmeup.ru:45127/api/dcim/devices/1/</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">curl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーティリティを使用して、</font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">netbox.linkmeup.ruで</font></a></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> GET</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブジェクト</font><font style="vertical-align: inherit;">を作成し</font><font style="vertical-align: inherit;">ます</font><b><font style="vertical-align: inherit;">：45127 / api / dcim / devices / 1 / </font></b><b><font style="vertical-align: inherit;">JSON形式の</font></b><font style="vertical-align: inherit;">応答</font><font style="vertical-align: inherit;">と</font><b><font style="vertical-align: inherit;">4つの</font></b><font style="vertical-align: inherit;">スペースの</font><font style="vertical-align: inherit;">インデント</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
またはもう少し学術的に：GETは</font><font style="vertical-align: inherit;">、</font><b><font style="vertical-align: inherit;">DCIM</font></b><font style="vertical-align: inherit;">オブジェクトのパラメーターである</font><font style="vertical-align: inherit;">型付き</font><b><font style="vertical-align: inherit;">デバイス</font></b><font style="vertical-align: inherit;">オブジェクトを返し</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
このリクエストも実行できます。ターミナルにコピーしてください。</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リクエストで参照しているURLは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Endpoint</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">ある意味で、これは相互作用する最後のオブジェクトです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 たとえば、ネットボックスの場合、すべてのエンドポイントのリストは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここにあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
</blockquote><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">また</font><font style="vertical-align: inherit;">、URLの最後</font><font style="vertical-align: inherit;">にある</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記号に注意してください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必須です</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これが私たちの応答です：</font></font><br>
<br>
<pre><code class="bash hljs">{
<span class="hljs-string">"id"</span>: 1,
<span class="hljs-string">"name"</span>: <span class="hljs-string">"mlg-host-0"</span>,
<span class="hljs-string">"display_name"</span>: <span class="hljs-string">"mlg-host-0"</span>,
<span class="hljs-string">"device_type"</span>: {
    <span class="hljs-string">"id"</span>: 4,
    <span class="hljs-string">"url"</span>: <span class="hljs-string">"http://netbox.linkmeup.ru/api/dcim/device-types/4/"</span>,
    <span class="hljs-string">"manufacturer"</span>: {
        <span class="hljs-string">"id"</span>: 4,
        <span class="hljs-string">"url"</span>: <span class="hljs-string">"http://netbox.linkmeup.ru/api/dcim/manufacturers/4/"</span>,
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"Hypermacro"</span>,
        <span class="hljs-string">"slug"</span>: <span class="hljs-string">"hypermacro"</span><font></font>
    },<font></font>
    <span class="hljs-string">"model"</span>: <span class="hljs-string">"Server"</span>,
    <span class="hljs-string">"slug"</span>: <span class="hljs-string">"server"</span>,
    <span class="hljs-string">"display_name"</span>: <span class="hljs-string">"Hypermacro Server"</span><font></font>
},<font></font>
<span class="hljs-string">"device_role"</span>: {
    <span class="hljs-string">"id"</span>: 1,
    <span class="hljs-string">"url"</span>: <span class="hljs-string">"http://netbox.linkmeup.ru/api/dcim/device-roles/1/"</span>,
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"Server"</span>,
    <span class="hljs-string">"slug"</span>: <span class="hljs-string">"server"</span><font></font>
},<font></font>
<span class="hljs-string">"tenant"</span>: null,
<span class="hljs-string">"platform"</span>: null,
<span class="hljs-string">"serial"</span>: <span class="hljs-string">""</span>,
<span class="hljs-string">"asset_tag"</span>: null,
<span class="hljs-string">"site"</span>: {
    <span class="hljs-string">"id"</span>: 6,
    <span class="hljs-string">"url"</span>: <span class="hljs-string">"http://netbox.linkmeup.ru/api/dcim/sites/6/"</span>,
    <span class="hljs-string">"name"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-string">"slug"</span>: <span class="hljs-string">"mlg"</span><font></font>
},<font></font>
<span class="hljs-string">"rack"</span>: {
    <span class="hljs-string">"id"</span>: 1,
    <span class="hljs-string">"url"</span>: <span class="hljs-string">"http://netbox.linkmeup.ru/api/dcim/racks/1/"</span>,
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"A"</span>,
    <span class="hljs-string">"display_name"</span>: <span class="hljs-string">"A"</span><font></font>
},<font></font>
<span class="hljs-string">"position"</span>: 41,
<span class="hljs-string">"face"</span>: {
    <span class="hljs-string">"value"</span>: <span class="hljs-string">"front"</span>,
    <span class="hljs-string">"label"</span>: <span class="hljs-string">"Front"</span>,
    <span class="hljs-string">"id"</span>: 0<font></font>
},<font></font>
<span class="hljs-string">"parent_device"</span>: null,
<span class="hljs-string">"status"</span>: {
    <span class="hljs-string">"value"</span>: <span class="hljs-string">"active"</span>,
    <span class="hljs-string">"label"</span>: <span class="hljs-string">"Active"</span>,
    <span class="hljs-string">"id"</span>: 1<font></font>
},<font></font>
<span class="hljs-string">"primary_ip"</span>: null,
<span class="hljs-string">"primary_ip4"</span>: null,
<span class="hljs-string">"primary_ip6"</span>: null,
<span class="hljs-string">"cluster"</span>: null,
<span class="hljs-string">"virtual_chassis"</span>: null,
<span class="hljs-string">"vc_position"</span>: null,
<span class="hljs-string">"vc_priority"</span>: null,
<span class="hljs-string">"comments"</span>: <span class="hljs-string">""</span>,
<span class="hljs-string">"local_context_data"</span>: null,
<span class="hljs-string">"tags"</span>: [],
<span class="hljs-string">"custom_fields"</span>: {},
<span class="hljs-string">"config_context"</span>: {},
<span class="hljs-string">"created"</span>: <span class="hljs-string">"2020-01-14"</span>,
<span class="hljs-string">"last_updated"</span>: <span class="hljs-string">"2020-01-14T18:39:01.288081Z"</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはJSON（リクエストしたとおり）で、ID 1のデバイスを表します。呼び出されるもの、役割、モデル、場所などです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTTPリクエストは次のようになります。</font></font><br>
<br>
<pre><code class="bash hljs">    GET /api/dcim/devices/1/ HTTP/1.1<font></font>
    Host: netbox.linkmeup.ru:45127<font></font>
    User-Agent: curl/7.54.0<font></font>
    Accept: application/json; indent=4</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、答えは次のようになります。</font></font><br>
<pre><code class="bash hljs">    HTTP/1.1 200 OK<font></font>
    Server: nginx/1.14.0 (Ubuntu)<font></font>
    Date: Tue, 21 Jan 2020 15:14:22 GMT<font></font>
    Content-Type: application/json<font></font>
    Content-Length: 1638<font></font>
    Connection: keep-alive<font></font>
    <font></font>
    Data</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/eucariot/ADSM/blob/master/docs/source/3_ipam_dcim/dumps/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トランザクションをダンプし</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、私たちが何をしたかを理解しましょう。</font></font><br>
<br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTPメッセージの構造</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTTPメッセージは3つの部分で構成され、最初の部分だけが必要です。 </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタートライン</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">見出し</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メッセージ本文</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタートライン</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTTP要求と応答の開始行は異なって見えます。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTPリクエスト</font></font></h4><br>
<pre><code class="bash hljs">METHOD URI&nbsp;HTTP_VERSION</code></pre><br>
<blockquote> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このメソッド</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、クライアントが実行するアクションを決定します。データの受信、オブジェクトの作成、更新、削除です。</font></font><br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URI-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クライアントがアクセスするリソースの識別子、つまり、リソース/ドキュメントへのパス。</font></font><br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP_VERSION</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はそれぞれHTTPバージョンです。</font><font style="vertical-align: inherit;">今日、RESTの場合は常に1.1です。</font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例：</font></font><br>
<br>
<pre><code class="bash hljs">GET /api/dcim/devices/1/ HTTP/1.1</code></pre><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP応答</font></font></h4><br>
<pre><code class="bash hljs">HTTP_VERSION STATUS_CODE REASON_PHRASE</code></pre><br>
<blockquote> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP_VERSION</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -HTTPバージョン（1.1）。</font></font><br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STATUS_CODE-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステータスコードの3桁（</font></font><br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">200、404、502</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">など）</font><b><font style="vertical-align: inherit;">REASON_PHRASE-</font></b><font style="vertical-align: inherit;">説明（OK、NOT FOUND、BAD GATEWAYなど）</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例：</font></font><br>
<br>
<pre><code class="bash hljs">HTTP/1.1 200 OK</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">見出し</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ヘッダーは、このHTTPトランザクションのパラメーターを渡します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、上記のHTTPリクエストの例では、次のとおりです。</font></font><br>
<br>
<pre><code class="bash hljs">    Host: netbox.linkmeup.ru:45127<font></font>
    User-Agent: curl/7.54.0<font></font>
    Accept: application/json; indent=4</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼らはそれを示しています</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ホスト</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">netbox.linkmeup.ru:45127に移動します</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リクエストは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">curl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">生成されました</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">また</font><font style="vertical-align: inherit;">、インデントが</font><b><font style="vertical-align: inherit;">4の</font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON形式の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データを受け入れます</font><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、ここにHTTP応答のヘッダーがあります：</font></font><br>
<br>
<pre><code class="bash hljs">    Server: nginx/1.14.0 (Ubuntu)<font></font>
    Date: Tue, 21 Jan 2020 15:14:22 GMT<font></font>
    Content-Type: application/json<font></font>
    Content-Length: 1638<font></font>
    Connection: keep-alive</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼らはそれを示しています</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバータイプ：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubuntuの上でnginxの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">反応時間</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">応答データ形式：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></b></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">応答データ長：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1638バイト</font></font></b></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続を閉じる必要はありません-データは残っています。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すでにお気づきのとおり、ヘッダーは「：」記号で区切られた名前と値のペアのように見えます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能なヘッダーの完全なリスト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTPメッセージの本文</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本文は、実際のデータを転送するために使用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTTP応答では、これはHTMLページ、またはこの場合はJSONオブジェクトです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ヘッダーと本文の間に少なくとも1つの空白行が必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTTPリクエストでGETメソッドを使用する場合、送信するものがないため、通常は本文はありません。</font><font style="vertical-align: inherit;">しかし、本文はHTTP応答に含まれています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、たとえば、POSTの場合、本文はすでにリクエストに含まれています。</font><font style="vertical-align: inherit;">メソッドについてお話ししましょう。</font></font><br>
<br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すでに理解したように、HTTPはメソッドを使用してWEBサービスを操作します。</font><font style="vertical-align: inherit;">RESTful APIについても同様です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
考えられる実際のシナリオは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CRUD-作成、読み取り、更新、削除</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">という用語で説明されてい</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CRUDを実装する最も一般的なHTTPメソッドのリストを次に示します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP GET</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP POST</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP PUT</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP DELETE</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTPパッチ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メソッド</font><font style="vertical-align: inherit;">は、実行されているアクションを示すため、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">動詞</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">も呼ば</font><font style="vertical-align: inherit;">れます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドの完全なリスト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NetBoxの例を使用して、それぞれを見てみましょう。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP GET</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
情報を取得する方法です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、たとえば、デバイスのリストを削除します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -H <span class="hljs-string">"Accept: application/json; indent=4"</span> \<font></font>
http://netbox.linkmeup.ru:45127/api/dcim/devices/ </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GETメソッドは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全です</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">safe</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。データは変更されず、要求のみが変更されるためです。</font><font style="vertical-align: inherit;">同じクエリが常に（データ自体が変更されるまで）同じ結果を返す</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ことは</font><font style="vertical-align: inherit;">、観点から</font><font style="vertical-align: inherit;">は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">べき等</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GETでは、サーバーはHTTPコードと応答本文（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">応答コード</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">応答本文</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）を</font><font style="vertical-align: inherit;">含むメッセージを返します</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、すべてがOKであれば、応答コードは200（OK）です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
URLが見つからない場合は、404（見つかりません）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーまたはコンポーネント自体に問題がある場合は、500（サーバーエラー）または502（不良ゲートウェイ）の可能性があります。</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての可能な応答コード</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本文はJSONまたはXML形式で返されます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/eucariot/ADSM/blob/master/docs/source/3_ipam_dcim/dumps/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トランザクションをダンプし</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらにいくつか例を挙げましょう。</font><font style="vertical-align: inherit;">次に、特定のデバイスに関する情報をその名前で要求します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET -H <span class="hljs-string">"Accept: application/json; indent=4"</span> \
<span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?name=mlg-leaf-0"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、URIに検索条件を設定するために、オブジェクトの属性（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">name</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメーター</font><font style="vertical-align: inherit;">とその値</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mlg-leaf-0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">も指定しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ご覧のとおり、条件の前とスラッシュの後に</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「？」</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があり</font><b><font style="vertical-align: inherit;">ます。</font></b><font style="vertical-align: inherit;">、および名前と値は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「=」</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記号で区切られ</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これがリクエストの様子です。</font></font><br>
<br>
<pre><code class="bash hljs">    GET /api/dcim/devices/?name=mlg-leaf-0 HTTP/1.1<font></font>
    Host: netbox.linkmeup.ru:45127<font></font>
    User-Agent: curl/7.54.0<font></font>
    Accept: application/json; indent=4</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/eucariot/ADSM/blob/master/docs/source/3_ipam_dcim/dumps/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トランザクションをダンプし</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いくつかの条件を指定する必要がある場合、クエリは次のようになります。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET -H <span class="hljs-string">"Accept: application/json; indent=4"</span> \
<span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?role=leaf&amp;site=mlg"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは</font><font style="vertical-align: inherit;">、</font><b><font style="vertical-align: inherit;">mlg</font></b><font style="vertical-align: inherit;"> Webサイトにある</font><font style="vertical-align: inherit;">すべての</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リーフ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバイスを要求し</font><font style="vertical-align: inherit;">ました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
つまり、2つの条件は</font><b><font style="vertical-align: inherit;">「＆」</font></b><font style="vertical-align: inherit;">記号で区切られてい</font><font style="vertical-align: inherit;">ます。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/eucariot/ADSM/blob/master/docs/source/3_ipam_dcim/dumps/" rel="nofollow"><font style="vertical-align: inherit;">トランザクションをダンプし</font></a><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">
好奇心旺盛で楽しい-「＆」を介して同じ名前の2つの条件を設定すると、それらの間に実際には論理的な「AND」ではなく、論理的な「OR」があります。</font><font style="vertical-align: inherit;">
つまり、このようなクエリは実際には2つのオブジェクト（mlg-leaf-0とmlg-spine-0）を返します。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/eucariot/ADSM/blob/master/docs/source/3_ipam_dcim/dumps/" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="bash hljs">curl -X GET -H <span class="hljs-string">"Accept: application/json; indent=4"</span> \
<span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?name=mlg-leaf-0&amp;name=mlg-spine-0"</span></code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/eucariot/ADSM/blob/master/docs/source/3_ipam_dcim/dumps/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トランザクションをダンプし</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
存在しないURLにアクセスしてみましょう。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET -H <span class="hljs-string">"Accept: application/json; indent=4"</span> \
<span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/IDGAF/"</span></code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/eucariot/ADSM/blob/master/docs/source/3_ipam_dcim/dumps/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トランザクションをダンプし</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP POST</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
POSTは、オブジェクトのコレクションに新しいオブジェクトを作成するために使用されます。</font><font style="vertical-align: inherit;">またはより複雑な言語で：新しい従属リソースを作成します。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">からの説明 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arthuriantech</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
含むが、これに限定されません。</font><font style="vertical-align: inherit;">POSTメソッドは、さらに処理するためにデータをサーバーに転送するように設計されています。これは、HTTP内で標準化する必要のないアクションに使用されます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFC 5789</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">より前</font><font style="vertical-align: inherit;">は、部分的な変更を行う唯一の合法的な方法でした。</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">roy.gbiv.com/untangled/2009/it-is-okay-to-use-post </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tools.ietf.org/html/rfc7231#section-4.3.3</font></font></a></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、デバイスのセットがある場合、POSTを使用すると、デバイス内に新しいデバイスオブジェクトを作成できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じエンドポイントを選択し、POSTを使用して新しいデバイスを作成します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X POST <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/"</span> \<font></font>
-H <span class="hljs-string">"accept: application/json"</span>\<font></font>
-H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
-H <span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span> \<font></font>
-d <span class="hljs-string">"{ \"name\": \"just a simple russian girl\", \"device_type\": 1, \"device_role\": 1, \"site\": 3, \"rack\": 3, \"position\": 5, \"face\": \"front\"}"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Authorization</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヘッダーがすでに表示</font><font style="vertical-align: inherit;">されており、書き込みリクエストを承認するトークンが含まれています。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-d</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクティブの後</font><font style="vertical-align: inherit;">に、作成されたデバイスのパラメーターを含むJSONがあります。</font></font><br>
<br>
<pre><code class="bash hljs">{
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"just a simple russian girl"</span>,
    <span class="hljs-string">"device_type"</span>: 1,
    <span class="hljs-string">"device_role"</span>: 1,
    <span class="hljs-string">"site"</span>: 3,
    <span class="hljs-string">"rack"</span>: 3,
    <span class="hljs-string">"position"</span>: 5,
    <span class="hljs-string">"face"</span>: <span class="hljs-string">"front"</span>}</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> トークンが無効になるため、リクエストは機能しません。NetBoxに書き込もうとしないでください。</font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 応答には、メッセージ本文にコード201（CREATED）とJSONを含むHTTP応答が含まれます。サーバーは、作成されたデバイスに関するすべてのパラメーターを返します。</font></font><br>
<br>
<pre><code class="bash hljs">    HTTP/1.1 201 Created<font></font>
    Server: nginx/1.14.0 (Ubuntu)<font></font>
    Date: Sat, 18 Jan 2020 11:00:22 GMT<font></font>
    Content-Type: application/json<font></font>
    Content-Length: 1123<font></font>
    Connection: keep-alive<font></font>
<font></font>
    JSON</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/eucariot/ADSM/blob/master/docs/source/3_ipam_dcim/dumps/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トランザクションをダンプし</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、GETメソッドを使用した新しいリクエストにより、出力でそれを確認できます。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET -H <span class="hljs-string">"Accept: application/json; indent=4"</span> \
<span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?q=russian"</span></code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> NetBoxの「Q」を使用すると、名前にさらに行を含むすべてのオブジェクトを検索できます。</font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">明らかに、POSTは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全でも</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">べき</font><b><font style="vertical-align: inherit;">等でもありません。</font></b><font style="vertical-align: inherit;">おそらくデータを変更し、二重に実行されたリクエストは2番目の同じオブジェクトの作成またはエラーのいずれかを引き起こします。</font></font><br>
<br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP PUT</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、既存のオブジェクトを変更するためのメソッドです。</font><font style="vertical-align: inherit;">PUTのエンドポイントはPOSTのエンドポイントとは異なって見えます-これには特定のオブジェクトが含まれています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PUTは201または200のコードを返す可能</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性があり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">このメソッドの重要なポイント：PUTは古いオブジェクトを置き換えるため、必要なすべての属性を渡す必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、たとえば、asset_tag属性を新しいデバイスに追加しようとすると、エラーが発生します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X PUT <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/18/"</span> \<font></font>
-H <span class="hljs-string">"accept: application/json"</span> \<font></font>
-H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
-H <span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span> \<font></font>
-d <span class="hljs-string">"{ \"asset_tag\": \"12345678\"}"</span></code></pre><br>
<pre><code class="bash hljs">{<span class="hljs-string">"device_type"</span>:[<span class="hljs-string">"This field is required."</span>],<span class="hljs-string">"device_role"</span>:[<span class="hljs-string">"This field is required."</span>],<span class="hljs-string">"site"</span>:[<span class="hljs-string">"This field is required."</span>]}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、不足しているフィールドを追加すると、すべてが機能します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X PUT <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/18/"</span> \<font></font>
-H <span class="hljs-string">"accept: application/json"</span> \<font></font>
-H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
-H <span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span> \<font></font>
-d <span class="hljs-string">"{ \"name\": \"just a simple russian girl\", \"device_type\": 1, \"device_role\": 1, \"site\": 3, \"rack\": 3, \"position\": 5, \"face\": \"front\", \"asset_tag\": \"12345678\"}"</span></code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/eucariot/ADSM/blob/master/docs/source/3_ipam_dcim/dumps/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トランザクションをダンプし</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここでURLに注意してください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">変更するデバイスのIDが含まれています（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
</blockquote><br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTPパッチ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このメソッドは、リソースを部分的に変更するために使用されます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ワット？</font><font style="vertical-align: inherit;">あなたは尋ねますが、PUTはどうですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PUTは、元々規格に存在していたメソッドであり、変更可能なオブジェクトの完全な置き換えを伴います。</font><font style="vertical-align: inherit;">したがって、PUTメソッドでは、上で書いたように、変更されないオブジェクトの属性も指定する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、PATCHは後で追加され、実際に変更される属性のみを指定できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例えば：</font></font><br>
<br>
<pre><code class="bash hljs">curl -X PATCH <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/18/"</span> \<font></font>
-H <span class="hljs-string">"accept: application/json"</span> \<font></font>
-H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
-H <span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span> \<font></font>
-d <span class="hljs-string">"{ \"serial\": \"BREAKINGBAD\"}"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、デバイスIDもURLで指定されていますが、変更する</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シリアル</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性は1つだけ</font><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/eucariot/ADSM/blob/master/docs/source/3_ipam_dcim/dumps/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トランザクションをダンプし</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP DELETE</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかにオブジェクトを削除します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X DELETE <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/21/"</span> \<font></font>
-H <span class="hljs-string">"accept: application/json"</span> \<font></font>
-H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
-H <span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DELETEメソッドは、繰り返されたクエリがリソースのリストの何も変更しないという観点からはべき等です（ただし、コード404（見つかりません）を返します）。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X DELETE <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/21/"</span> \<font></font>
-H <span class="hljs-string">"accept: application/json"</span> \<font></font>
-H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
-H <span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span></code></pre><br>
<pre><code class="bash hljs">{<span class="hljs-string">"detail"</span>:<span class="hljs-string">"Not found."</span>}</code></pre><br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTful APIを使用する方法</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、Curlは勇敢なCLIの戦士にとって非常に便利ですが、より優れたツールがあります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">郵便配達</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Postmanを使用すると、メソッド、ヘッダー、本文を選択してグラフィカルインターフェイスでクエリを作成し、結果を人間が読める形式で表示できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、クエリとURIを保存して、後で返すことができます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公式サイトからPostmanをダウンロードしてください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、GETを実行できます</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b00/869/169/b00869169e3e64b427e224587da49e12.png" width="800"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。GETのトークンは、例としてのみここにリストされています。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
POST：</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f1b/91f/655/f1b91f655182e7780ee62d44e8e25ae9.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PostmanはRESTful APIを操作するためだけのものです。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> たとえば、オートメーションのキャリアの黎明期に行ったように、NETCONF XMLを送信しないでください。</font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定されたAPIのすばらしい利点の1つは、すべてのエンドポイントとそのメソッドをコレクションとしてPostmanにインポートできることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、[ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インポート]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ウィンドウ</font><font style="vertical-align: inherit;">（[ファイル]-&gt; [インポート]）で、[ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リンクから</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インポート]を選択</font><font style="vertical-align: inherit;">し、ウィンドウに貼り付けます</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">netbox.linkmeup.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> URL </font><font style="vertical-align: inherit;">：45127 / api / docs /？Format = openapi。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f9f/48e/2d1/f9f48e2d1923e88995301379e4888b6c.png" width="400"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、あなたがコレクションで見つけることができるすべてのもの。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/eaa/616/c1a/eaa616c1adfcfacbaf164ea95531fd4e.png" width="200"><br>
<br>
<hr><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python +リクエスト</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、Postmanを介しても、おそらく運用システムを管理していません。</font><font style="vertical-align: inherit;">確かに、あなたはあなたの参加なしでそれらと対話したい外部アプリケーションを持っているでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、構成生成システムは、NetBoxからIPインターフェースのリストを取得する必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pythonには、</font><font style="vertical-align: inherit;">HTTPを介して作業を実装</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">するリクエストの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">素晴らしいライブラリがあり</font><font style="vertical-align: inherit;">ます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのデバイスのリストを要求する例：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> requests<font></font>
<font></font>
HEADERS = {<span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>, <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'application/json'</span>}<font></font>
NB_URL = <span class="hljs-string">"http://netbox.linkmeup.ru:45127"</span><font></font>
<font></font>
request_url = <span class="hljs-string">f"<span class="hljs-subst">{NB_URL}</span>/api/dcim/devices/"</span><font></font>
devices = requests.get(request_url, headers = HEADERS)<font></font>
print(devices.json())</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいデバイスをもう一度追加します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> requests<font></font>
<font></font>
API_TOKEN = <span class="hljs-string">"a9aae70d65c928a554f9a038b9d4703a1583594f"</span>
HEADERS = {<span class="hljs-string">'Authorization'</span>: <span class="hljs-string">f'Token <span class="hljs-subst">{API_TOKEN}</span>'</span>, <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>, <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'application/json'</span>}<font></font>
NB_URL = <span class="hljs-string">"http://netbox.linkmeup.ru:45127"</span><font></font>
<font></font>
request_url = <span class="hljs-string">f"<span class="hljs-subst">{NB_URL}</span>/api/dcim/devices/"</span><font></font>
<font></font>
device_parameters = {<font></font>
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"just a simple REQUESTS girl"</span>, 
    <span class="hljs-string">"device_type"</span>: <span class="hljs-number">1</span>, 
    <span class="hljs-string">"device_role"</span>: <span class="hljs-number">1</span>, 
    <span class="hljs-string">"site"</span>: <span class="hljs-number">3</span>, <font></font>
}<font></font>
new_device = requests.post(request_url, headers = HEADERS, json=device_parameters)<font></font>
print(new_device.json())</code></pre><br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python + NetBox SDK</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NetBoxの場合は、Python SDK- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pynetbox</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">もあります</font><font style="vertical-align: inherit;">。これは、すべてのNetBoxエンドポイントをオブジェクトとその属性として表し、URIの生成と応答の解析のすべてのダーティな作業を行いますが、もちろん無料ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、上記と同じようにpynetboxを使用してみましょう。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのデバイスのリスト：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> pynetbox<font></font>
<font></font>
NB_URL = <span class="hljs-string">"http://netbox.linkmeup.ru:45127"</span><font></font>
nb = pynetbox.api(NB_URL)<font></font>
<font></font>
devices = nb.dcim.devices.all()<font></font>
print(devices)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいデバイスを追加：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> pynetbox<font></font>
<font></font>
API_TOKEN = <span class="hljs-string">"a9aae70d65c928a554f9a038b9d4703a1583594f"</span>
NB_URL = <span class="hljs-string">"http://netbox.linkmeup.ru:45127"</span><font></font>
nb = pynetbox.api(NB_URL, token = API_TOKEN)<font></font>
<font></font>
device_parameters = {<font></font>
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"just a simple PYNETBOX girl"</span>, 
    <span class="hljs-string">"device_type"</span>: <span class="hljs-number">1</span>, 
    <span class="hljs-string">"device_role"</span>: <span class="hljs-number">1</span>, 
    <span class="hljs-string">"site"</span>: <span class="hljs-number">3</span>, <font></font>
}<font></font>
new_device = nb.dcim.devices.create(**device_parameters)<font></font>
print(new_device)</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントPynetbox</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SWAGGER</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
過去10年のおかげで他に価値があるのは、API仕様です。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このパス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をたどる</font><font style="vertical-align: inherit;">と、Swagger UI-Netbox APIのドキュメントが表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c5c/ec6/1db/c5cec61db67db108cc2fce2ba0492d3b.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このページには、すべてのエンドポイント、それらを操作する方法、可能なパラメーターと属性が一覧表示され、どのエンドポイントが必要かが示されます。</font><font style="vertical-align: inherit;">また、予想される回答が記載されています。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/4bc/886/8e6/4bc8868e6cfae94427e648abd0a1cd7b.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じページで、[ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">試してみる</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]をクリックし</font><b><font style="vertical-align: inherit;">て</font></b><font style="vertical-align: inherit;">インタラクティブなクエリを実行できます</font><font style="vertical-align: inherit;">。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">何らかの理由で、swaggerはポートのないサーバー名をベースURLとして使用するため、私のSwaggerの例では、試してみた機能が機能しません。</font><font style="vertical-align: inherit;">しかし、あなたはあなた自身のインストールでそれを試すことができます。</font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Execute</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Swagger </font><font style="vertical-align: inherit;">]をクリックする</font><font style="vertical-align: inherit;">と、UIは、コマンドラインから同様のリクエストを行うために使用できるカール文字列を生成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Swagger UIでは、オブジェクトを作成することもできます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/47b/311/74f/47b31174f7b1b8564b2aadea91db89bb.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、必要な権限を持つ承認されたユーザーで十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このページに表示されているのは、API仕様に基づいて生成されたドキュメントであるSwagger UIです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マイクロサービスアーキテクチャの傾向に伴い、コンポーネント間の相互作用のための標準化されたAPIを使用することがますます重要になり、エンドポイントとメソッドは、ソースコードやPDFドキュメントを調べなくても、人とアプリケーションの両方で簡単に判別できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、今日の開発者は、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">API Firstの</font></a><font style="vertical-align: inherit;">パラダイムにますます従います。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初にAPIについて考え、次に実装について考えます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この設計は最初にAPIを指定し、次に</font><font style="vertical-align: inherit;">ドキュメント、クライアントアプリケーション、サーバーパーツが</font><font style="vertical-align: inherit;">APIから</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成さ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">れ</font><font style="vertical-align: inherit;">、テストが必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Swaggerはフレームワークおよび仕様言語（現在はOpenAPI 2.0に名前が変更されています）であり、このタスクを実装できます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
深くは触れません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
詳細はこちら：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SwaggerのWebサイト</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用例</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open APIに関するWiki</font></font></a></li>
</ul><br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTと代替案に対する批判</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はい、あります。 2000年のその世界のすべてがすでにバラ色であるわけではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は専門家ではないため、この問題を実質的に開示することは想定していませんが、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハブレに関する議論の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">余地のない</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">記事</font></a><font style="vertical-align: inherit;">へのリンクを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">提供し</font></a><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今日のシステムコンポーネントの相互作用のための代替インターフェースはgRPCです。彼は、ネットワーク機器を扱うための新しいアプローチの分野で大きな未来を予言しています。しかし、私達は彼の番が来たときにいつか彼について話します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有望な</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GraphQLを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確認することもできますが</font><font style="vertical-align: inherit;">、ここでもまだ作業する必要はないので、自分で勉強する必要があります。</font></font><br>
<br>
<hr><br>
<blockquote> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要な</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 トークンa9aae70d65c928a554f9a038b9d4703a1583594fはデモンストレーション目的でのみ使用され、機能しなくなりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プログラムコードでのトークンの直接表示は受け入れられません。ここでは、例を簡略化する目的でのみ行っています。</font></font><br>
</blockquote><br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">役立つリンク</font></font></h1><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロイフィールディングのオリジナルレポート</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIファースト</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://restfulapi.net/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTPメソッド</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTの原則</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SwaggerのWebサイト</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swaggerの例</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenAPIに関するWiki</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTに対する批判</font></font></a></li>
</ul><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ありがとう</font></font></h1><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andrei Panfilovによる校正と編集</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">校正と編集のためのAlexander Fatin</font></font></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja485608/index.html">Spring Bootによるマイクロサービス。パート4.負荷分散のためのリボンの使用</a></li>
<li><a href="../ja485610/index.html">WindowsのWebAssemblyでQtアプリケーションを構築する</a></li>
<li><a href="../ja485612/index.html">宇宙事故は開発者として私に何を教えましたか</a></li>
<li><a href="../ja485614/index.html">赤い企業文化はロシアのビジネスの主要な問題です（パート3）</a></li>
<li><a href="../ja485616/index.html">プロジェクトAngularの外部に静的ファイルを追加する</a></li>
<li><a href="../ja485620/index.html">ヨシュカル・オラ、一般的に、ITの都市ですか？</a></li>
<li><a href="../ja485622/index.html">PostgreSQLバックアップツール。アンドレイ・サルニコフ（Data Egret）</a></li>
<li><a href="../ja485624/index.html">Minecraftサーバー：WindowsとLinux</a></li>
<li><a href="../ja485630/index.html">アフリカの宇宙飛行士：ゴミから現実へ</a></li>
<li><a href="../ja485632/index.html">Power BIでのクレジットスコアリングの監視</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>