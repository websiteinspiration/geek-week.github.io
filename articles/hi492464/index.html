<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСиЁЯП┐тАНЁЯОд ЁЯд╖ЁЯП╗ ЁЯОк DBA: рд╕рдХреНрд╖рдо рд░реВрдк рд╕реЗ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди рдФрд░ рдЖрдпрд╛рдд рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░реЗрдВ ЁЯХ│я╕П ЁЯдЭ ЁЯЫая╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдмрдбрд╝реЗ рдбреЗрдЯрд╛ рд╕реЗрдЯ (рд╡рд┐рднрд┐рдиреНрди рдИрдЯреАрдПрд▓ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ : рдЖрдпрд╛рдд, рд░реВрдкрд╛рдВрддрд░рдг рдФрд░ рдПрдХ рдмрд╛рд╣рд░реА рд╕реНрд░реЛрдд рдХреЗ рд╕рд╛рде рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди) рдХреЗ рдЬрдЯрд┐рд▓ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╕рд╛рде, рдЕрд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ "рдпрд╛рдж рд░рдЦрдирд╛...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>DBA: рд╕рдХреНрд╖рдо рд░реВрдк рд╕реЗ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди рдФрд░ рдЖрдпрд╛рдд рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░реЗрдВ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tensor/blog/492464/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрдбрд╝реЗ рдбреЗрдЯрд╛ рд╕реЗрдЯ (рд╡рд┐рднрд┐рдиреНрди </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдИрдЯреАрдПрд▓ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : рдЖрдпрд╛рдд, рд░реВрдкрд╛рдВрддрд░рдг рдФрд░ рдПрдХ рдмрд╛рд╣рд░реА рд╕реНрд░реЛрдд рдХреЗ рд╕рд╛рде рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди) рдХреЗ </font><font style="vertical-align: inherit;">рдЬрдЯрд┐рд▓ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗ </font><font style="vertical-align: inherit;">рд╕рд╛рде, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ "рдпрд╛рдж рд░рдЦрдирд╛" рдФрд░ рддреБрд░рдВрдд</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреБрдЫ рд╕реНрд╡реИрдЪреНрдЫрд┐рдХ </font><b><font style="vertical-align: inherit;">рдкреНрд░рдХреНрд░рд┐рдпрд╛</font></b><font style="vertical-align: inherit;"> рдХрд░рдирд╛ </font><font style="vertical-align: inherit;">рдЖрд╡рд╢реНрдпрдХ рд╣реИ </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рддрд░рд╣ рдХрд╛ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдп рдЖрдорддреМрд░ рдкрд░ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╕реЗ рд╣реЛрддрд╛ рд╣реИ: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдпрд╣рд╛рдВ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдЦрд╛ рд╡рд┐рднрд╛рдЧ рдиреЗ рдЧреНрд░рд╛рд╣рдХ рдмреИрдВрдХ рд╕реЗ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдВрддрд┐рдо рдкреНрд░рд╛рдкреНрдд рднреБрдЧрддрд╛рди </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдЕрдкрд▓реЛрдб рдХрд┐рдпрд╛ рд╣реИ</font></a><font style="vertical-align: inherit;"> , рд╣рдореЗрдВ рдЙрдиреНрд╣реЗрдВ рдЬрд▓реНрджреА рд╕реЗ рд╡реЗрдмрд╕рд╛рдЗрдЯ рдкрд░ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдФрд░ рдЦрд╛рддреЛрдВ рд╕реЗ рд▓рд┐рдВрдХ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ"</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рд▓реЗрдХрд┐рди рдЬрдм рдЗрд╕ "рдХреБрдЫ" рдХрд╛ рд╡реЙрд▓реНрдпреВрдо рд╕реИрдХрдбрд╝реЛрдВ рдореЗрдЧрд╛рдмрд╛рдЗрдЯ рдореЗрдВ рдорд╛рдкрд╛ рдЬрд╛рдирд╛ рд╢реБрд░реВ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рд╕реЗрд╡рд╛ рдпрд╣ 24x7 рдореЛрдб рдореЗрдВ рдЖрдзрд╛рд░ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП, рдРрд╕реЗ рдХрдИ рджреБрд╖реНрдкреНрд░рднрд╛рд╡ рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЗ рдЬреАрд╡рди рдХреЛ рдмрд░реНрдмрд╛рдж рдХрд░ рджреЗрдВрдЧреЗред</font></font><br>
<img src="https://habrastorage.org/webt/tl/g3/ff/tlg3ffjptyayqlu-5k06oonr_vi.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PostgreSQL рдореЗрдВ рдЙрдирдХреЗ рд╕рд╛рде рд╕рд╛рдордирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП (рдФрд░ рди рдХреЗрд╡рд▓ рдЗрд╕рдореЗрдВ), рдЖрдк рдХреБрдЫ рдЕрдиреБрдХреВрд▓рди рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЛ рддреЗрдЬреА рд╕реЗ рдФрд░ рдХрдо рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. рдЬрд╣рд╛рдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рд╛рдБ?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рддрдп рдХрд░реЗрдВ рдХрд┐ рд╣рдо рдЙрд╕ рдбреЗрдЯрд╛ рдХреЛ рдХрд╣рд╛рдВ рдЕрдкрд▓реЛрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ рд╣рдо "рдкреНрд░реЛрд╕реЗрд╕" рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1ред </font><font style="vertical-align: inherit;">рдЕрд╕реНрдерд╛рдпреА рддрд╛рд▓рд┐рдХрд╛рдПрдБ (рдЕрд╕реНрдерд╛рдпреА рддрд╛рд▓рд┐рдХрд╛)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, PostgreSQL рдХреЗ рд▓рд┐рдП, рдЕрд╕реНрдерд╛рдпреА рд╡рд╛рд▓реЗ рдХрд┐рд╕реА рднреА рдЕрдиреНрдп рдХреЗ рд╕рдорд╛рди рдЯреЗрдмрд▓ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рд╕рдм рдХреБрдЫ рдХреЗрд╡рд▓ рд╕реНрдореГрддрд┐ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдорд╛рдкреНрдд рд╣реЛ рд╕рдХрддрд╛ рд╣реИ"</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЬреИрд╕реЗ рдЕрдВрдзрд╡рд┐рд╢реНрд╡рд╛рд╕ рдЧрд▓рдд рд╣реИрдВ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдХрдИ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЕрдВрддрд░ рд╣реИрдВред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдХрдиреЗрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рд╕реНрд╡рдпрдВ рдХреЗ рдирд╛рдо рд╕реНрдерд╛рди</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ рджреЛ рдХрдиреЗрдХреНрд╢рди рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВ </font></font><code>CREATE TABLE x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рддреЛ рдХрд┐рд╕реА рдХреЛ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реЗ рдЧреИрд░-рдЕрдиреВрдареЗ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдбреАрдмреА рдСрдмреНрдЬреЗрдХреНрдЯ </font><b><font style="vertical-align: inherit;">рдХреА рддреНрд░реБрдЯрд┐</font></b><font style="vertical-align: inherit;"> рдорд┐рд▓реЗрдЧреА </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рдЕрдЧрд░ рджреЛрдиреЛрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">, рддреЛ рджреЛрдиреЛрдВ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рдХрд░реЗрдВрдЧреЗ, рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдХреЛ </font><font style="vertical-align: inherit;">рддрд╛рд▓рд┐рдХрд╛ </font><b><font style="vertical-align: inherit;">рдХреА рдЕрдкрдиреА рдкреНрд░рддрд┐</font></b><font style="vertical-align: inherit;"> рдкреНрд░рд╛рдкреНрдд рд╣реЛрдЧреА </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдФрд░ рдЙрдирдХреЗ рдмреАрдЪ рдХреБрдЫ рднреА рд╕рд╛рдорд╛рдиреНрдп рдирд╣реАрдВ рд╣реЛрдЧрд╛ред</font></font><code>CREATE <b>TEMPORARY</b> TABLE x</code><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдХреЗ рд╕рд╛рде "рдЖрддреНрдо-рд╡рд┐рдирд╛рд╢"</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЬрдм рдЖрдк рдХрдиреЗрдХреНрд╢рди рдмрдВрдж рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╕рднреА рдЕрд╕реНрдерд╛рдпреА рддрд╛рд▓рд┐рдХрд╛рдПрдБ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╣рдЯрд╛ рджреА рдЬрд╛рддреА рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП "рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ" рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ </font></font><code>DROP TABLE x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдХреЛрдИ рдЕрд░реНрде рдирд╣реАрдВ рд╣реИ, </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">рдЖрдк </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрди-рджреЗрди рдореЛрдб рдореЗрдВ pgbouncer рдХреЗ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">, рддреЛ рдбреЗрдЯрд╛рдмреЗрд╕ рдпрд╣ рдорд╛рдирддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдХрдиреЗрдХреНрд╢рди рдЕрднреА рднреА рд╕рдХреНрд░рд┐рдп рд╣реИ, рдФрд░ рдпрд╣ рдЕрд╕реНрдерд╛рдпреА рд╣реИ рддрд╛рд▓рд┐рдХрд╛ рдЕрднреА рднреА рдореМрдЬреВрдж рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд▓рд┐рдП, рдЗрд╕реЗ рдлрд┐рд░ рд╕реЗ рдмрдирд╛рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕, рдПрдХ рдЕрдиреНрдп рдХрдиреЗрдХреНрд╢рди рд╕реЗ pgbouncer рдХреЗ рд▓рд┐рдП, рдПрдХ рддреНрд░реБрдЯрд┐ рд╣реЛрдЧреАред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЗрд╕рдХрд╛ рдлрд╛рдпрджрд╛ рдЙрдард╛рдХрд░ рдЗрд╕реЗ рджрд░рдХрд┐рдирд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">
рд╕рдЪ рд╣реИ, рдпрд╣ рдмреЗрд╣рддрд░ рд╣реИ рдХрд┐ рдпрд╣ рд╕рдм рдПрдХ рд╣реА рди рдХрд░реЗрдВ, рдХреНрдпреЛрдВрдХрд┐ рддрдм рдЖрдк "рдкрд┐рдЫрд▓реЗ рдорд╛рд▓рд┐рдХ" рд╕реЗ рдЫреЛрдбрд╝реЗ рдЧрдП рдбреЗрдЯрд╛ рдХреЛ "рдЕрдЪрд╛рдирдХ" рдЦреЛрдЬ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рдореИрдиреБрдЕрд▓ рдкрдврд╝рдирд╛ рдмреЗрд╣рддрд░ рд╣реИ, рдФрд░ рджреЗрдЦреЗрдВ рдХрд┐ рдЯреЗрдмрд▓ рдмрдирд╛рддреЗ рд╕рдордп рдЬреЛрдбрд╝рдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рд╣реИ</font></font><code>CREATE TEMPORARY TABLE <b>IF NOT EXISTS</b> x</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>ON COMMIT <b>DROP</b></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - рдЕрд░реНрдерд╛рддреН, рдЬрдм рд▓реЗрдирджреЗрди рдкреВрд░рд╛ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рддрд╛рд▓рд┐рдХрд╛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╣рдЯрд╛ рджреА рдЬрд╛рдПрдЧреАред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЧреИрд░рдкреНрд░рддрд┐рдХреГрддрд┐</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреНрдпреЛрдВрдХрд┐ рдХреЗрд╡рд▓ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЬреБрдбрд╝рд╛рд╡ рд╣реЛрддрд╛ рд╣реИ, рдЕрд╕реНрдерд╛рдпреА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЛ рджреЛрд╣рд░рд╛рдпрд╛ рдирд╣реАрдВ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдвреЗрд░ + рд╡рд╛рд▓ рдореЗрдВ </font><b><font style="vertical-align: inherit;">рдбреЗрдЯрд╛ рдХреЛ рдбрдмрд▓-рд░рд╛рдЗрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ</font></b><font style="vertical-align: inherit;"> , рдЗрд╕рд▓рд┐рдП рдЗрд╕рдореЗрдВ INSERT / UPDATE / DELETE рдмрд╣реБрдд рддреЗрдЬреА рд╕реЗ рд╣реЛрддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рдЪреВрдВрдХрд┐ рдЕрд╕реНрдерд╛рдпреА рддрд╛рд▓рд┐рдХрд╛ рдЕрднреА рднреА рдПрдХ "рд▓рдЧрднрдЧ рд╕рд╛рдорд╛рдиреНрдп" рддрд╛рд▓рд┐рдХрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ рдкреНрд░рддрд┐рдХреГрддрд┐ рдкрд░ рднреА рдирд╣реАрдВ рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдХрдо рд╕реЗ рдХрдо рдЕрднреА рдХреЗ рд▓рд┐рдП, рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╕рдВрдмрдВрдзрд┐рдд рдкреИрдЪ рд▓рдВрдмреЗ рд╕рдордп рд╕реЗ рдЖрд╕рдкрд╛рд╕ рд╣реИред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2ред </font><font style="vertical-align: inherit;">рдЕрд╕реВрдЪреАрдмрджреНрдз рддрд╛рд▓рд┐рдХрд╛рдПрдБ (UNLOGGED TABLE)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рдХрд░реЗрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдХреБрдЫ рдкреНрд░рдХрд╛рд░ рдХреА рдмреЛрдЭрд┐рд▓ рдИрдЯреАрдПрд▓ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдПрдХ рд▓реЗрдирджреЗрди рдХреЗ рднреАрддрд░ рд▓рд╛рдЧреВ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдЖрдкрдХреЗ рдкрд╛рд╕ рдЕрднреА рднреА </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдирджреЗрди рдореЛрдб рдореЗрдВ pgbouncer рд╣реИ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? .. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╛ рдбреЗрдЯрд╛ рд╕реНрдЯреНрд░реАрдо рдЗрддрдиреА рдмрдбрд╝реА рд╣реИ рдХрд┐ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рддрд┐ рдХрдиреЗрдХреНрд╢рди рдкрд░реНрдпрд╛рдкреНрдд рдмреИрдВрдбрд╡рд┐рдбреНрде рдирд╣реАрдВ рд╣реИ?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ (рдкрдврд╝реЗрдВ, рд╕реАрдкреАрдпреВ рдкрд░ рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛)? .. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╛ рд╕рдВрдЪрд╛рд▓рди рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ </font><font style="vertical-align: inherit;">рдЕрд▓рдЧ-рдЕрд▓рдЧ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджрд┐рд╢рд╛рдУрдВ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореЗрдВ </font><b><font style="vertical-align: inherit;">рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рд░реВрдк</font></b><font style="vertical-align: inherit;"> рд╕реЗ </font><font style="vertical-align: inherit;">рдЪрд▓рддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">ред .. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреЗрд╡рд▓ рдПрдХ рд╣реА рд╡рд┐рдХрд▓реНрдк рд╣реИ - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ рдПрдХ рдЧреИрд░-рдЕрд╕реНрдерд╛рдпреА рддрд╛рд▓рд┐рдХрд╛ рдмрдирд╛рдПрдВ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рдкреБрди, рд╣рд╛рдБред </font><font style="vertical-align: inherit;">рдЕрд░реНрдерд╛рдд:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдзрд┐рдХрддрдо рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдирд╛рдореЛрдВ рдХреЗ рд╕рд╛рде "рдЙрд╕рдХрд╛" рдЯреЗрдмрд▓ рдмрдирд╛рдпрд╛ рддрд╛рдХрд┐ рдХрд┐рд╕реА рдХреЗ рд╕рд╛рде рдкрд╛рд░ рди рд╣реЛ</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХреНрд╕рдЯреНрд░реЗрдХреНрдЯ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : рдЙрдирдореЗрдВ рдХрд┐рд╕реА рдмрд╛рд╣рд░реА рд╕реНрд░реЛрдд рд╕реЗ рдбреЗрдЯрд╛ рдбрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯреНрд░рд╛рдВрд╕рдлрд╝реЙрд░реНрдо</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : рд░реВрдкрд╛рдВрддрд░рд┐рдд, рдХреБрдВрдЬреА рдмрдВрдзрди рдлрд╝реАрд▓реНрдб рдореЗрдВ рднрд░рд╛ рдЧрдпрд╛</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЛрдб</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : рд▓рдХреНрд╖рд┐рдд рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдореЗрдВ рддреИрдпрд╛рд░ рдбреЗрдЯрд╛ рдбрд╛рд▓рд╛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдореЗрд░реЗ" рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдЕрдм - рдорд░рд╣рдо рдореЗрдВ рдПрдХ рдордХреНрдЦреАред </font><font style="vertical-align: inherit;">рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL рдореЗрдВ рд╕рднреА рд▓реЗрдЦрди рджреЛ рдмрд╛рд░ рд╣реЛрддрд╛ рд╣реИ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╣рд▓реЗ рд╡рд╛рд▓ рдореЗрдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдлрд┐рд░ рдЯреЗрдмрд▓ / рдЗрдВрдбреЗрдХреНрд╕ рдХреЗ рд╢рд░реАрд░ рдореЗрдВред </font><font style="vertical-align: inherit;">рдпрд╣ рд╕рдм ACID рдФрд░ </font></font><code>COMMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдиреЗрд╕реНрдЯреЗрдб рдФрд░ </font></font><code>ROLLBACK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдиреЗрд╕реНрдЯреЗрдб рд▓реЗрдирджреЗрди рдХреЗ </font><font style="vertical-align: inherit;">рдмреАрдЪ рдбреЗрдЯрд╛ рдХреА рд╕рд╣реА рджреГрд╢реНрдпрддрд╛ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рд╣рдореЗрдВ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ! </font><font style="vertical-align: inherit;">рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдкреВрд░реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реИ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╛ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдпрд╛ рдирд╣реАрдВ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рдЗрд╕рд╕реЗ рдХреЛрдИ рдлрд░реНрдХ рдирд╣реАрдВ рдкрдбрд╝рддрд╛ рдХрд┐ рдЗрд╕рдореЗрдВ рдХрд┐рддрдиреЗ рдордзреНрдпрд╡рд░реНрддреА рд▓реЗрди-рджреЗрди рд╣реИрдВ - рд╣рдо "рдмреАрдЪ рд╕реЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЬрд╛рд░реА рд░рдЦрдиреЗ" рдореЗрдВ рд░реБрдЪрд┐ рдирд╣реАрдВ рд░рдЦрддреЗ рд╣реИрдВ, рдЦрд╛рд╕рдХрд░ рдЬрдм рдпрд╣ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдпрд╣ рдХрд╣рд╛рдБ рдерд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, PostgreSQL рдбреЗрд╡рд▓рдкрд░реНрд╕ рдиреЗ рд╕рдВрд╕реНрдХрд░рдг 9.1 рдкреЗрд╢ рдХрд┐рдпрд╛ рдЬреИрд╕реЗ рдХрд┐ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЧреИрд░-рдЬрд░реНрдирд▓ (UNLOGGED) рдЯреЗрдмрд▓</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<blockquote>      . ,    ,      (.  29),      <b>   </b>. ,     ;         <b> </b>.  ,    <b> </b>   .  ,    ,   .</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рдпрд╣ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд╣реБрдд рддреЗрдЬрд╝ рд╣реЛрдЧрд╛</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рд░реНрд╡рд░ "рдХреНрд░реИрд╢" рд╣реЛрддрд╛ рд╣реИ - рдпрд╣ рдЕрдкреНрд░рд┐рдп рд╣реЛрдЧрд╛ред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдпрд╣ рдХрд┐рддрдиреА рдмрд╛рд░ рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдХреНрдпрд╛ рдЖрдкрдХреА ETL рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ "рдкреБрдирд░реЛрджреНрдзрд╛рд░" рдХреЗ рдмрд╛рдж рдЗрд╕реЗ "рдмреАрдЪ рд╕реЗ" рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛ рдЬрд╛рдирддреА рд╣реИ? .. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ рдирд╣реАрдВ, рдФрд░ рдКрдкрд░ рдХрд╛ рдорд╛рдорд▓рд╛ рдЖрдкрдХреЗ рд╕рдорд╛рди рд╣реИ - рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ </font></font><code>UNLOGGED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рд▓реЗрдХрд┐рди </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд╛рд╕реНрддрд╡рд┐рдХ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдореЗрдВ рдЗрд╕ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЛ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрднреА </font><b><font style="vertical-align: inherit;">рд╢рд╛рдорд┐рд▓ рди рдХрд░реЗрдВ</font></b><font style="vertical-align: inherit;"> рдбреЗрдЯрд╛ рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рдЖрдк рдкреНрд░рд┐рдп рд╣реИрдВред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3ред </font><font style="vertical-align: inherit;">COMMIT {DELETE ROWS | </font><font style="vertical-align: inherit;">рдбреНрд░реЙрдк}</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдирджреЗрди рд╕рдорд╛рдкреНрдд рд╣реЛрдиреЗ рдкрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддрд╛рд▓рд┐рдХрд╛ рдмрдирд╛рддреЗ рд╕рдордп рдпрд╣ рдбрд┐рдЬрд╝рд╛рдЗрди рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ </font><font style="vertical-align: inherit;">рдореИрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдКрдкрд░ рд▓рд┐рдЦрд╛ рд╣реИ, рдпрд╣ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">, рд▓реЗрдХрд┐рди </font><font style="vertical-align: inherit;">рд╕реНрдерд┐рддрд┐ рдФрд░ рдЕрдзрд┐рдХ рджрд┐рд▓рдЪрд╕реНрдк рд╣реИ - рдпрд╣рд╛рдБ рдпрд╣ рдЙрддреНрдкрдиреНрди рд╣реЛрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">
рдЪреВрдВрдХрд┐ рдЕрд╕реНрдерд╛рдпреА рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рдореЗрдЯрд╛ рд╡рд┐рд╡рд░рдг рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрдкреВрд░реНрдг рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪрд╛ рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣ рдПрдХ рд╣реА рд╣реИ, рдЗрд╕рд▓рд┐рдП </font><b><font style="vertical-align: inherit;">рдЕрд╕реНрдерд╛рдпреА рддрд╛рд▓рд┐рдХрд╛рдУрдВ</font></b><font style="vertical-align: inherit;"> рдХреЗ </font><b><font style="vertical-align: inherit;">рдирд┐рд░рдВрддрд░ рдирд┐рд░реНрдорд╛рдг рдФрд░ рд╣рдЯрд╛рдиреЗ рд╕реЗ рд╕рд┐рд╕реНрдЯрдо рдЯреЗрдмрд▓</font></b><font style="vertical-align: inherit;"> pg_class, pg_attribute, pg_attrdef, pg_depend рдкрд░ </font><b><font style="vertical-align: inherit;">рдордЬрдмреВрдд "рд╕реВрдЬрди" рд╣реЛрддреА рд╣реИ</font></b><font style="vertical-align: inherit;"> ... </font><font style="vertical-align: inherit;">
рдЕрдм рдЖрдк рд▓рд╛рдЗрди рдкрд░ рдПрдХ рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рд╣реИ рдХрд▓реНрдкрдирд╛ рдХреАрдЬрд┐рдП рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛, рдЬреЛ рд╣рд░ рд╕реЗрдХрдВрдб рдПрдХ рдирдпрд╛ рд▓реЗрдирджреЗрди рдЦреЛрд▓рддрд╛ рд╣реИ, рдЕрд╕реНрдерд╛рдпреА рддрд╛рд▓рд┐рдХрд╛ рдмрдирд╛рддрд╛ рд╣реИ, рднрд░рддрд╛ рд╣реИ, рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╣рдЯрд╛рддрд╛ рд╣реИ ... рд╕рд┐рд╕реНрдЯрдо рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдореЗрдВ рдХрдЪрд░рд╛ рдЕрдзрд┐рдХ рдорд╛рддреНрд░рд╛ рдореЗрдВ рдЬрдорд╛ рд╣реЛ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдпрд╣ рдкреНрд░рддреНрдпреЗрдХ рдСрдкрд░реЗрд╢рди рдХреЗ рджреМрд░рд╛рди рдЕрддрд┐рд░рд┐рдХреНрдд рдмреНрд░реЗрдХ рд╣реИред</font></font><code>ON COMMIT <b>DROP</b></code><font style="vertical-align: inherit;"></font><code>DROP TABLE</code><font style="vertical-align: inherit;"></font><code>ON COMMIT <b>DELETE ROWS</b></code><font style="vertical-align: inherit;"></font><code>TRUNCATE TABLE</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдирд╣реАрдВ! </font><font style="vertical-align: inherit;">рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЗрд╕реЗ </font></font><code>CREATE TEMPORARY TABLE x ... ON COMMIT DELETE ROWS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрди-рджреЗрди рдХреЗ рдЪрдХреНрд░ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">рдмрд╣реБрдд рдЕрдзрд┐рдХ рдХреБрд╢рд▓ </font><font style="vertical-align: inherit;">рд╣реИ - рдлрд┐рд░ рдкреНрд░рддреНрдпреЗрдХ рдирдП рд▓реЗрдирджреЗрди рдХреА рд╢реБрд░реБрдЖрдд рд╕реЗ рддрд╛рд▓рд┐рдХрд╛ рдкрд╣рд▓реЗ рд╕реЗ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореМрдЬреВрдж рд╣реЛрдЧреА</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (рдХреЙрд▓ рдХреЛ рд╕рд╣реЗрдЬреЗрдВ </font></font><code>CREATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), рд▓реЗрдХрд┐рди рдпрд╣ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦрд╛рд▓реА рд╣реЛрдЧрд╛</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдзрдиреНрдпрд╡рд╛рдж </font></font><code>TRUNCATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рд╣рдордиреЗ рдХреЙрд▓ рдХреЛ рднреА рдмрдЪрд╛рдпрд╛) рдЬрдм рдкрд┐рдЫрд▓рд╛ рд▓реЗрдирджреЗрди рдкреВрд░рд╛ рд╣реЛ рдЧрдпрд╛ рдерд╛ред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.4ред </font><font style="vertical-align: inherit;">рдкрд╕рдВрдж рд╣реИ ... рд╢рд╛рдорд┐рд▓ рд╣реЛ рд░рд╣рд╛ рд╣реИ ...</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореИрдВрдиреЗ рд╢реБрд░реБрдЖрдд рдореЗрдВ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рд╣реИ рдХрд┐ рдЕрд╕реНрдерд╛рдпреА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреЗ рдЖрдпрд╛рдд рд╣реИрдВ - рдФрд░ рдбреЗрд╡рд▓рдкрд░ рдиреЗ рдЕрдкрдиреЗ рдЕрд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ рдШреЛрд╖рдгрд╛ рдореЗрдВ рд▓рдХреНрд╖реНрдп рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреА рд╕реВрдЪреА рдХреЛ рдХреЙрдкреА-рдкреЗрд╕реНрдЯ рдХрд┐рдпрд╛ ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рдЖрд▓рд╕реНрдп рдкреНрд░рдЧрддрд┐ рдХрд╛ рдЗрдВрдЬрди рд╣реИ! </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдореЙрдбрд▓ рдкрд░" рдПрдХ рдирдИ рддрд╛рд▓рд┐рдХрд╛ рдмрдирд╛рдирд╛</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдмрд╣реБрдд рд╕рд░рд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TEMPORARY</span> <span class="hljs-keyword">TABLE</span> import_table(
  <span class="hljs-keyword">LIKE</span> target_table<font></font>
);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЪреВрдВрдХрд┐ рдЖрдк рдЗрд╕ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдбреЗрдЯрд╛ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЗрд╕ рдкрд░ рдЦреЛрдЬреЗрдВ рдХрднреА рднреА рддреНрд╡рд░рд┐рдд рдирд╣реАрдВ рд╣реЛрдВрдЧреАред рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рдЦрд┐рд▓рд╛рдл рдПрдХ рдкрд╛рд░рдВрдкрд░рд┐рдХ рд╕рдорд╛рдзрд╛рди рд╣реИ - рдЗрдВрдбреЗрдХреНрд╕! рдФрд░, рд╣рд╛рдВ, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдЕрд╕реНрдерд╛рдпреА рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдЕрдиреБрдХреНрд░рдорд┐рдд рднреА рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЪреВрдВрдХрд┐, рдЕрдХреНрд╕рд░, рд╡рд╛рдВрдЫрд┐рдд рд╕реВрдЪрдХрд╛рдВрдХ рд▓рдХреНрд╖реНрдп рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рд╕реВрдЪрдХрд╛рдВрдХреЛрдВ рдХреЗ рд╕рд╛рде рдореЗрд▓ рдЦрд╛рддреЗ рд╣реИрдВ, рдЖрдк рдмрд╕ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">
рдпрджрд┐ рдЖрдкрдХреЛ рднреА </font><font style="vertical-align: inherit;">(рдкреНрд░рд╛рдердорд┐рдХ рдкреНрд░рдореБрдЦ рдореВрд▓реНрдпреЛрдВ рдХреЛ рднрд░рдиреЗ рдХреЗ рд▓рд┐рдП) рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреА </font><font style="vertical-align: inherit;">рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">, рддреЛ рдЖрдк рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">ред рдЦреИрд░, рдпрд╛ рдмрд╕ - </font><font style="vertical-align: inherit;">- рдпрд╣ рдбрд┐рдлреЙрд▓реНрдЯреНрд╕, рдЗрдВрдбреЗрдХреНрд╕, рдмрд╛рдзрд╛рдУрдВ рдХреА рдирдХрд▓ рдХрд░реЗрдЧрд╛ ... </font><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рдЖрдкрдХреЛ рдпрд╣ рд╕рдордЭрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдпрджрд┐ рдЖрдкрдиреЗ </font><b><font style="vertical-align: inherit;">рдЗрдВрдбреЗрдХреНрд╕ рдХреЗ рд╕рд╛рде рддреБрд░рдВрдд</font></b><font style="vertical-align: inherit;"> рдПрдХ </font><b><font style="vertical-align: inherit;">рдЖрдпрд╛рдд рддрд╛рд▓рд┐рдХрд╛</font></b><font style="vertical-align: inherit;"> рдмрдирд╛рдИ рд╣реИ </font><b><font style="vertical-align: inherit;">, рддреЛ рдбреЗрдЯрд╛ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рднрд░ рдЬрд╛рдПрдЧрд╛ред</font></b></font><code>LIKE target_table <b>INCLUDING INDEXES</b></code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>DEFAULT</code><font style="vertical-align: inherit;"></font><code>LIKE target_table <b>INCLUDING DEFAULTS</b></code><font style="vertical-align: inherit;"></font><code>LIKE target_table <b>INCLUDING ALL</b></code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рд╕рдм рдХреБрдЫ рдкрд╣рд▓реЗ рднрд░рддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рд╕реВрдЪрдХ рд░реЛрд▓ рдХрд░рддреЗ рд╣реИрдВ - рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ рджреЗрдЦреЗрдВ рдХрд┐ рдпрд╣ рдХреИрд╕реЗ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pg_dump</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд░рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рдм рд╕рдм рдореЗрдВ, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RTFM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> !</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. рдХреИрд╕реЗ рд▓рд┐рдЦреЗрдВ?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореИрдВ рдмрд╕ рдХрд╣реВрдБрдЧрд╛ - </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">COPY</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдкреИрдХ" рдХреЗ рдмрдЬрд╛рдп </font><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧ- </font><font style="vertical-align: inherit;">рдкреНрд░рд╡рд╛рд╣ </font></font><code>INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдИ рдмрд╛рд░ рддреНрд╡рд░рдг</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рдЖрдк рд╕реАрдзреЗ рдПрдХ рдкреВрд░реНрд╡-рдирд┐рд░реНрдорд┐рдд рдлрд╝рд╛рдЗрд▓ рд╕реЗ рднреА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. рдХреИрд╕реЗ рд╕рдВрднрд╛рд▓реЗрдВ?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рддреЛ, рд╣рдорд╛рд░реЗ рдкрд░рд┐рдЪрдпрд╛рддреНрдордХ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдХреБрдЫ рджреЗрдЦрдиреЗ рджреЛ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдкрдХреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ </font><b><font style="vertical-align: inherit;">1M рд░рд┐рдХреЙрд░реНрдб рдХреЗ</font></b><font style="vertical-align: inherit;"> рд▓рд┐рдП рдХреНрд▓рд╛рдЗрдВрдЯ рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рдкреНрд▓реЗрдЯ рд╣реИ</font></font><b><font style="vertical-align: inherit;"></font></b></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рд░ рджрд┐рди рдЧреНрд░рд╛рд╣рдХ рдЖрдкрдХреЛ рдПрдХ рдирдИ </font><b><font style="vertical-align: inherit;">рдкреВрд░реНрдг "рдЫрд╡рд┐"</font></b><font style="vertical-align: inherit;"> рднреЗрдЬрддрд╛ рд╣реИ</font></font><b><font style="vertical-align: inherit;"></font></b></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрднрд╡ рд╕реЗ рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рд╕рдордп-рд╕рдордп рдкрд░ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10K рд╕реЗ рдЕрдзрд┐рдХ рд░рд┐рдХреЙрд░реНрдб рдирд╣реАрдВ рдмрджрд▓рддреЗ рд╣реИрдВ</font></font></b></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдРрд╕реА рд╕реНрдерд┐рддрд┐ рдХрд╛ рдПрдХ рдЙрддреНрдХреГрд╖реНрдЯ рдЙрджрд╛рд╣рд░рдг </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KLADR рдбреЗрдЯрд╛рдмреЗрд╕ рд╣реИ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - рдмрд╣реБрдд рд╕рд╛рд░реЗ рдкрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдкреНрд░рддреНрдпреЗрдХ рд╕рд╛рдкреНрддрд╛рд╣рд┐рдХ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдЕрдкрд▓реЛрдб рдХрд░рдирд╛ (рдмрд╕реНрддрд┐рдпреЛрдВ рдХрд╛ рдирд╛рдо рдмрджрд▓рдирд╛, рд╕рдбрд╝рдХ рд╕рдВрдШреЛрдВ, рдирдП рдШрд░реЛрдВ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐) рдмрд╣реБрдд рдХрдо рд╣реИрдВ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд░рд╛рд╖реНрдЯреНрд░рд╡реНрдпрд╛рдкреА рднреАред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1ред </font><font style="vertical-align: inherit;">рдкреВрд░реНрдг рддреБрд▓реНрдпрдХрд╛рд▓рди рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рд╛рджрдЧреА рдХреЗ рд▓рд┐рдП, рдорд╛рди рд▓реЗрдВ рдХрд┐ рдЖрдкрдХреЛ рдбреЗрдЯрд╛ рдХрд╛ рдкреБрдирд░реНрдЧрдарди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ - рдмрд╕ рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рд╕рд╣реА рд░реВрдк рдореЗрдВ рд▓рд╛рдПрдВ, рд╡рд╣ рд╣реИ:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд╣ рд╕рдм рдХреБрдЫ </font><b><font style="vertical-align: inherit;">рд╣рдЯрд╛ рджреЗрдВ</font></b><font style="vertical-align: inherit;"> рдЬреЛ рдЕрдм рдирд╣реАрдВ рд╣реИ</font></font></li>
<li><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд╣ рд╕рдм рдХреБрдЫ </font><b><font style="vertical-align: inherit;">рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ</font></b><font style="vertical-align: inherit;"> рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рдерд╛, рдФрд░ рдЖрдкрдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ</font></font></li>
<li><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд╣ рд╕рдм рдХреБрдЫ </font><b><font style="vertical-align: inherit;">рдбрд╛рд▓реЗрдВ</font></b><font style="vertical-align: inherit;"> рдЬреЛ рдирд╣реАрдВ рд░рд╣рд╛ рд╣реИ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рдХреНрд░рдо рдореЗрдВ рдпрд╣ рд╕рдВрдЪрд╛рд▓рди рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рдХреНрдпреЛрдВ рд╣реИ? </font><font style="vertical-align: inherit;">рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЯреЗрдмрд▓ рдХрд╛ рдЖрдХрд╛рд░ рдиреНрдпреВрдирддрдо рд░реВрдк рд╕реЗ рдмрдврд╝рддрд╛ рд╣реИ ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVCC рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдпрд╛рдж рд░рдЦреЗрдВ!</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )ред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dst рд╕реЗ DELETE</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдирд╣реАрдВ, рдмреЗрд╢рдХ, рдЖрдк рд╕рд┐рд░реНрдл рджреЛ рдСрдкрд░реЗрд╢рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдЯрд╛рдирд╛</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><code>DELETE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рд╕рдм рдкрд░</font></font></li>
<li><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдирдИ рдЫрд╡рд┐ рд╕реЗ рд╕рдм рдХреБрдЫ </font><b><font style="vertical-align: inherit;">рдкреЗрд╕реНрдЯ</font></b><font style="vertical-align: inherit;"> рдХрд░реЗрдВ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ, MVCC рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддрд╛рд▓рд┐рдХрд╛ рдХрд╛ рдЖрдХрд╛рд░ рдареАрдХ рджреЛ рдмрд╛рд░ рдмрдврд╝ рдЬрд╛рдПрдЧрд╛</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ! </font><font style="vertical-align: inherit;">10K рдЕрдкрдбреЗрдЯ рдХреЗ рдХрд╛рд░рдг рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ + 1M рдЫрд╡рд┐ рд░рд┐рдХреЙрд░реНрдб рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ - рдЗрддрдирд╛-рдЕрддрд┐рд░реЗрдХ ...</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TRUNCATE dst</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдХ рдЕрдзрд┐рдХ рдЕрдиреБрднрд╡реА рдбреЗрд╡рд▓рдкрд░ рдЬрд╛рдирддрд╛ рд╣реИ рдХрд┐ рдкреВрд░реА рдкреНрд▓реЗрдЯ рдХреЛ рдХрд╛рдлреА рд╕рд╕реНрддреЗ рдореЗрдВ рд╕рд╛рдл рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдкрд╖реНрдЯ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><code>TRUNCATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдкреВрд░реА рдореЗрдЬ</font></font></li>
<li><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдирдИ рдЫрд╡рд┐ рд╕реЗ рд╕рдм рдХреБрдЫ </font><b><font style="vertical-align: inherit;">рдкреЗрд╕реНрдЯ</font></b><font style="vertical-align: inherit;"> рдХрд░реЗрдВ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╡рд┐рдзрд┐ рдкреНрд░рднрд╛рд╡реА рд╣реИ, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрднреА-рдХрднреА рдпрд╣ рдХрд╛рдлреА рд▓рд╛рдЧреВ рд╣реЛрддреА рд╣реИ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рд▓реЗрдХрд┐рди рдПрдХ рд╕рдорд╕реНрдпрд╛ рд╣реИ ... рд╣рдо 1M рд░рд┐рдХреЙрд░реНрдб рднрд░реЗрдВрдЧреЗ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдЗрд╕ рд╕рдордп рдХреЗ рд▓рд┐рдП рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рдЦрд╛рд▓реА рдЫреЛрдбрд╝рдиреЗ рдХрд╛ рдЬреЛрдЦрд┐рдо рдирд╣реАрдВ рдЙрдард╛ рд╕рдХрддреЗ рд╣реИрдВ (рдЬреИрд╕рд╛ рдХрд┐ рдПрдХрд▓ рд▓реЗрдирджреЗрди рдореЗрдВ рд▓рдкреЗрдЯреЗ рдмрд┐рдирд╛ рд╣реЛрдЧрд╛)ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЬрд┐рд╕рдХрд╛ рдорддрд▓рдм рд╣реИ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рдПрдХ </font><b><font style="vertical-align: inherit;">рд▓рдВрдмрд╛ рд▓реЗрдирджреЗрди</font></b><font style="vertical-align: inherit;"> рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ</font></font><b><font style="vertical-align: inherit;"></font></b></li>
<li><code>TRUNCATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓рдЧрд╛рддрд╛ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AccessExclusive</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рддрд╛рд▓рд╛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рдПрдХ рд▓рдВрдмреЗ рд╕рдордп рдХреЗ рд▓рд┐рдП рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕ рд╕рдордп </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рд░ рдХреЛрдИ рднреА рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛</font></font><code>SELECT</code></b></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреБрдЫ рдмреБрд░рд╛ рд╣реИ ...</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯреЗрдЯрд░ рдЯреЗрдмрд▓ ... рд░реЗрдирдо ... / рдбреНрд░реЙрдк рдЯреЗрдмрд▓ ...</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдХ рд╡рд┐рдХрд▓реНрдк рдХреЗ рд░реВрдк рдореЗрдВ, рд╕рдм рдХреБрдЫ рдПрдХ рдЕрд▓рдЧ рдирдИ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рднрд░реЗрдВ, рдФрд░ рдлрд┐рд░ рдЗрд╕реЗ рдкреБрд░рд╛рдиреЗ рдирд╛рдо рдореЗрдВ рдмрджрд▓ рджреЗрдВред </font><font style="vertical-align: inherit;">рдмрд╣реБрдд рдХрдо рдЪреАрдЬреЛрдВ рдХреА рдПрдХ рдЬреЛрдбрд╝реА:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AccessExclusive</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рднреА </font><font style="vertical-align: inherit;">, рднрд▓реЗ рд╣реА рд╕рдордп рдореЗрдВ рдХрд╛рдлреА рдХрдо рд╣реЛ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рд╕рднреА рдХреНрд╡реЗрд░реА рдкреНрд▓рд╛рди / рдЖрдБрдХрдбрд╝реЗ рд░реАрд╕реЗрдЯ рдХрд░ рджрд┐рдП рдЧрдП рд╣реИрдВ, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ANALYZE рдХреЛ рдЪрд▓рд╛рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ</font></font></a></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рднреА рд╡рд┐рджреЗрд╢реА рдХреБрдВрдЬрд┐рдпрд╛рдБ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (FK) рдЯреЗрдмрд▓ рдкрд░ </font><b><font style="vertical-align: inherit;">рдЯреВрдЯ</font></b><font style="vertical-align: inherit;"> рдЬрд╛рддреА рд╣реИрдВ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рд╛рдЗрдорди рд░рд┐рдЧреНрд╕ рд╕реЗ рдбрдмреНрд▓реНрдпреВрдЖрдИрдкреА рдкреИрдЪ рдерд╛, рдЬрд┐рд╕рдиреЗ </font></font><code>ALTER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдВрдХрдбрд╝реЗ рдФрд░ рдПрдлрдХреЗ рдХреЛ рдЫреВрдиреЗ рдХреЗ рдмрд┐рдирд╛, рдлрд╝рд╛рдЗрд▓ рд╕реНрддрд░ рдкрд░ рдЯреЗрдмрд▓ рдмреЙрдбреА рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">рдПрдХ </font><font style="vertical-align: inherit;">рдСрдкрд░реЗрд╢рди рдХрд░рдиреЗ рдХрд╛ </font><font style="vertical-align: inherit;">рд╕реБрдЭрд╛рд╡ рджрд┐рдпрд╛ </font><font style="vertical-align: inherit;">, рд▓реЗрдХрд┐рди рдХреЛрд░рдо рдЬрдорд╛ рдирд╣реАрдВ рдХрд┐рдпрд╛ред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DELETE, UPDATE, INSERT</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд▓рд┐рдП, рд╣рдо рддреАрди рдСрдкрд░реЗрд╢рди рдХреЗ рдПрдХ рдЧреИрд░-рдмреНрд▓реЙрдХрд┐рдВрдЧ рд╕рдВрд╕реНрдХрд░рдг рдкрд░ рд░реЛрдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд▓рдЧрднрдЧ рддреАрди ... рдпрд╣ рд╕рдмрд╕реЗ рдкреНрд░рднрд╛рд╡реА рдврдВрдЧ рд╕реЗ рдХреИрд╕реЗ рдХрд░реЗрдВ?</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-comment">--     ,     "" </span>
<span class="hljs-keyword">BEGIN</span>;<font></font>
<font></font>
<span class="hljs-comment">--      </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TEMPORARY</span> <span class="hljs-keyword">TABLE</span> tmp(
  <span class="hljs-keyword">LIKE</span> dst <span class="hljs-keyword">INCLUDING</span> <span class="hljs-keyword">INDEXES</span> <span class="hljs-comment">--    ,   </span>
) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COMMIT</span> <span class="hljs-keyword">DROP</span>; <span class="hljs-comment">--       </span><font></font>
<font></font>
<span class="hljs-comment">-- -     COPY</span><font></font>
COPY tmp FROM STDIN;<font></font>
<span class="hljs-comment">-- ...</span>
<span class="hljs-comment">-- \.</span><font></font>
<font></font>
<span class="hljs-comment">--  </span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span><font></font>
  dst D<font></font>
<span class="hljs-keyword">USING</span><font></font>
  dst X<font></font>
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span><font></font>
  tmp Y<font></font>
    <span class="hljs-keyword">USING</span>(pk1, pk2) <span class="hljs-comment">--   </span>
<span class="hljs-keyword">WHERE</span>
  (D.pk1, D.pk2) = (X.pk1, X.pk2) <span class="hljs-keyword">AND</span>
  Y <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">FROM</span> <span class="hljs-literal">NULL</span>; <span class="hljs-comment">-- ""</span><font></font>
<font></font>
<span class="hljs-comment">--  </span>
<span class="hljs-keyword">UPDATE</span><font></font>
  dst D<font></font>
<span class="hljs-keyword">SET</span><font></font>
  (f1, f2, f3) = (T.f1, T.f2, T.f3)<font></font>
<span class="hljs-keyword">FROM</span><font></font>
  tmp T<font></font>
<span class="hljs-keyword">WHERE</span>
  (D.pk1, D.pk2) = (T.pk1, T.pk2) <span class="hljs-keyword">AND</span>
  (D.f1, D.f2, D.f3) <span class="hljs-keyword">IS</span> <span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">FROM</span> (T.f1, T.f2, T.f3); <span class="hljs-comment">--   </span><font></font>
<font></font>
<span class="hljs-comment">--  </span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><font></font>
  dst<font></font>
<span class="hljs-keyword">SELECT</span><font></font>
  T.*<font></font>
<span class="hljs-keyword">FROM</span><font></font>
  tmp T<font></font>
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span><font></font>
  dst D<font></font>
    <span class="hljs-keyword">USING</span>(pk1, pk2)
<span class="hljs-keyword">WHERE</span>
  D <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">FROM</span> <span class="hljs-literal">NULL</span>;<font></font>
<font></font>
<span class="hljs-keyword">COMMIT</span>;
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2ред </font><font style="vertical-align: inherit;">рдЖрдпрд╛рдд рдкреЛрд╕реНрдЯ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдХ рд╣реА KLADER рдореЗрдВ, рд╕рднреА рдкрд░рд┐рд╡рд░реНрддрд┐рдд рд░рд┐рдХреЙрд░реНрдб рдЕрддрд┐рд░рд┐рдХреНрдд рд░реВрдк рд╕реЗ рдкреЛрд╕реНрдЯ-рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЪрд▓рдиреЗ рдЪрд╛рд╣рд┐рдП - рдХреАрд╡рд░реНрдб рдХреЛ рд╕рд╛рдорд╛рдиреНрдп рдХрд░реЗрдВ, рд╣рд╛рдЗрд▓рд╛рдЗрдЯ рдХрд░реЗрдВ, рдФрд░ рдЖрд╡рд╢реНрдпрдХ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдореЗрдВ рд▓рд╛рдПрдВред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЖрдк рдХреИрд╕реЗ рдЬрд╛рдирддреЗ рд╣реИрдВ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд┐</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди рдХреЛрдб рдХреЛ рдЬрдЯрд┐рд▓ рдХрд┐рдП рдмрд┐рдирд╛, </font><b><font style="vertical-align: inherit;">рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреНрдпрд╛ рдмрджрд▓ рдЧрдпрд╛ рд╣реИ</font></b><font style="vertical-align: inherit;"> , рдЖрджрд░реНрд╢ рд░реВрдк рд╕реЗ рдЗрд╕реЗ рдЫреВрдиреЗ рдХреЗ рдмрд┐рдирд╛? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ рдХреЗрд╡рд▓ рдЖрдкрдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рд╕рд┐рдВрдХреНрд░реЛрдирд╛рдЗрдЬрд╝реЗрд╢рди рдХреЗ рд╕рдордп рдкрд╣реБрдВрдЪ рд▓рд┐рдЦреА рд╣реИ, рддреЛ рдЖрдк рдПрдХ рдЯреНрд░рд┐рдЧрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рд╕рднреА рдкрд░рд┐рд╡рд░реНрддрди рдПрдХрддреНрд░ рдХрд░реЗрдЧрд╛:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-comment">--  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> kladr(...);
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> kladr_house(...);<font></font>
<font></font>
<span class="hljs-comment">--    </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> kladr$<span class="hljs-keyword">log</span>(<font></font>
  ro kladr, <span class="hljs-comment">--      /</span><font></font>
  rn kladr<font></font>
);<font></font>
<font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> kladr_house$<span class="hljs-keyword">log</span>(<font></font>
  ro kladr_house,<font></font>
  rn kladr_house<font></font>
);<font></font>
<font></font>
<span class="hljs-comment">--    </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">FUNCTION</span> diff$<span class="hljs-keyword">log</span>() <span class="hljs-keyword">RETURNS</span> <span class="hljs-keyword">trigger</span> <span class="hljs-keyword">AS</span> $$
<span class="hljs-keyword">DECLARE</span>
  dst <span class="hljs-built_in">varchar</span> = TG_TABLE_NAME || <span class="hljs-string">'$log'</span>;<font></font>
  stmt text = '';<font></font>
<span class="hljs-keyword">BEGIN</span>
  <span class="hljs-comment">--      </span>
  <span class="hljs-keyword">IF</span> TG_OP = <span class="hljs-string">'UPDATE'</span> <span class="hljs-keyword">THEN</span>
    <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NEW</span> <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">OLD</span> <span class="hljs-keyword">THEN</span>
      <span class="hljs-keyword">RETURN</span> <span class="hljs-keyword">NEW</span>;
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;
  <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;
  <span class="hljs-comment">--   </span>
  stmt = '<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-string">' || dst::text || '</span>(ro,rn)<span class="hljs-keyword">VALUES</span>(<span class="hljs-string">';
  CASE TG_OP
    WHEN '</span><span class="hljs-keyword">INSERT</span><span class="hljs-string">' THEN
      EXECUTE stmt || '</span><span class="hljs-literal">NULL</span>,$<span class="hljs-number">1</span>)<span class="hljs-string">' USING NEW;
    WHEN '</span><span class="hljs-keyword">UPDATE</span><span class="hljs-string">' THEN
      EXECUTE stmt || '</span>$<span class="hljs-number">1</span>,$<span class="hljs-number">2</span>)<span class="hljs-string">' USING OLD, NEW;
    WHEN '</span><span class="hljs-keyword">DELETE</span><span class="hljs-string">' THEN
      EXECUTE stmt || '</span>$<span class="hljs-number">1</span>,<span class="hljs-literal">NULL</span>)<span class="hljs-string">' USING OLD;
  END CASE;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм рд╣рдо рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЯреНрд░рд┐рдЧрд░ (рдпрд╛ рд╕рдХреНрд╖рдо рдХрд░реЗрдВ </font></font><code>ALTER TABLE ... ENABLE TRIGGER ...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> <span class="hljs-keyword">log</span>
  <span class="hljs-keyword">AFTER</span> <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">DELETE</span>
  <span class="hljs-keyword">ON</span> kladr
    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-keyword">ROW</span>
      <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">PROCEDURE</span> diff$<span class="hljs-keyword">log</span>();<font></font>
<font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> <span class="hljs-keyword">log</span>
  <span class="hljs-keyword">AFTER</span> <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">DELETE</span>
  <span class="hljs-keyword">ON</span> kladr_house
    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-keyword">ROW</span>
      <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">PROCEDURE</span> diff$<span class="hljs-keyword">log</span>();
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдлрд┐рд░ рд▓реЙрдЧ рдЯреЗрдмрд▓ рд╕реЗ рдЪреБрдкрдЪрд╛рдк рд╣рдо рдЕрдкрдиреА рдЬрд╝рд░реВрд░рдд рдХреЗ рд╕рднреА рдмрджрд▓рд╛рд╡ рдирд┐рдХрд╛рд▓рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдЕрддрд┐рд░рд┐рдХреНрдд рд╣реИрдВрдбрд▓рд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЪрд▓рд╛рддреЗ рд╣реИрдВред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3ред </font><font style="vertical-align: inherit;">рд╕рдВрдмрдВрдзрд┐рдд рд╕реЗрдЯ рдЖрдпрд╛рдд рдХрд░реЗрдВ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдКрдкрд░, рд╣рдордиреЗ рдРрд╕реЗ рдорд╛рдорд▓реЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд┐рдпрд╛ рдЬрдм рд╕реНрд░реЛрдд рдФрд░ рд░рд┐рд╕реАрд╡рд░ рдХреА рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛рдПрдВ рдореЗрд▓ рдЦрд╛рддреА рд╣реИрдВред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛ рдЕрдЧрд░ рдмрд╛рд╣рд░реА рд╕рд┐рд╕реНрдЯрдо рд╕реЗ рдЕрдирд▓реЛрдбрд┐рдВрдЧ рдХрд╛ рд╣рдорд╛рд░реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рд╕реНрдЯреЛрд░реЗрдЬ рд╕реНрдЯреНрд░рдХреНрдЪрд░ рд╕реЗ рдЕрд▓рдЧ рдХреЛрдИ рдкреНрд░рд╛рд░реВрдк рд╣реЛ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдФрд░ рдЙрдирдХреЗ рдЦрд╛рддреЛрдВ рдХреЗ рднрдВрдбрд╛рд░рдг рдХреЛ рд▓реЗрдВ, рдХреНрд▓рд╛рд╕рд┐рдХ рдХрдИ-рд╕реЗ-рдПрдХ рд╡рд┐рдХрд▓реНрдк:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">client</span>(<font></font>
  client_id<font></font>
    <span class="hljs-built_in">serial</span>
      PRIMARY <span class="hljs-keyword">KEY</span><font></font>
, inn<font></font>
    <span class="hljs-built_in">varchar</span>
      <span class="hljs-keyword">UNIQUE</span>
, <span class="hljs-keyword">name</span>
    <span class="hljs-built_in">varchar</span><font></font>
);<font></font>
<font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> invoice(<font></font>
  invoice_id<font></font>
    <span class="hljs-built_in">serial</span>
      PRIMARY <span class="hljs-keyword">KEY</span><font></font>
, client_id<font></font>
    <span class="hljs-built_in">integer</span>
      <span class="hljs-keyword">REFERENCES</span> <span class="hljs-keyword">client</span>(client_id)<font></font>
, <span class="hljs-built_in">number</span>
    <span class="hljs-built_in">varchar</span><font></font>
, dt<font></font>
    <span class="hljs-built_in">date</span>
, <span class="hljs-keyword">sum</span>
    <span class="hljs-built_in">numeric</span>(<span class="hljs-number">32</span>,<span class="hljs-number">2</span>)<font></font>
);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рдмрд╛рд╣рд░реА рд╕реНрд░реЛрдд рд╕реЗ рдЙрддрд╛рд░рдирд╛ рд╣рдорд╛рд░реЗ рд▓рд┐рдП "рд╕рднреА рдореЗрдВ рдПрдХ" рдХреЗ рд░реВрдк рдореЗрдВ рдЖрддрд╛ рд╣реИ:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TEMPORARY</span> <span class="hljs-keyword">TABLE</span> invoice_import(<font></font>
  client_inn<font></font>
    <span class="hljs-built_in">varchar</span><font></font>
, client_name<font></font>
    <span class="hljs-built_in">varchar</span><font></font>
, invoice_number<font></font>
    <span class="hljs-built_in">varchar</span><font></font>
, invoice_dt<font></font>
    <span class="hljs-built_in">date</span><font></font>
, invoice_sum<font></font>
    <span class="hljs-built_in">numeric</span>(<span class="hljs-number">32</span>,<span class="hljs-number">2</span>)<font></font>
);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЬрд╛рд╣рд┐рд░ рд╣реИ, рдЧреНрд░рд╛рд╣рдХ рдбреЗрдЯрд╛ рдХреЛ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдбреБрдкреНрд▓рд┐рдХреЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдореБрдЦреНрдп рд░рд┐рдХреЙрд░реНрдб "рдЦрд╛рддрд╛" рд╣реИ:</font></font><br>
<br>
<pre><code class="plaintext hljs">0123456789;;A-01;2020-03-16;1000.00<font></font>
9876543210;;A-02;2020-03-16;666.00<font></font>
0123456789;;B-03;2020-03-16;9999.00<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореЙрдбрд▓ рдХреЗ рд▓рд┐рдП, рдмрд╕ рд╣рдорд╛рд░реЗ рдкрд░реАрдХреНрд╖рдг рдбреЗрдЯрд╛ рдбрд╛рд▓реЗрдВ, рд▓реЗрдХрд┐рди рдпрд╛рдж рд░рдЦреЗрдВ - </font></font><code>COPY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдзрд┐рдХ рдХреБрд╢рд▓рддрд╛ рд╕реЗ!</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> invoice_import
<span class="hljs-keyword">VALUES</span>
  (<span class="hljs-string">'0123456789'</span>, <span class="hljs-string">''</span>, <span class="hljs-string">'A-01'</span>, <span class="hljs-string">'2020-03-16'</span>, <span class="hljs-number">1000.00</span>)<font></font>
, (<span class="hljs-string">'9876543210'</span>, <span class="hljs-string">''</span>, <span class="hljs-string">'A-02'</span>, <span class="hljs-string">'2020-03-16'</span>, <span class="hljs-number">666.00</span>)<font></font>
, (<span class="hljs-string">'0123456789'</span>, <span class="hljs-string">''</span>, <span class="hljs-string">'B-03'</span>, <span class="hljs-string">'2020-03-16'</span>, <span class="hljs-number">9999.00</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рдЙрди "рдХрдЯреНрд╕" рдХрд╛ рдЪрдпрди рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рдирд╕реЗ рд╣рдорд╛рд░реЗ "рддрдереНрдпреЛрдВ" рдХрд╛ рдЙрд▓реНрд▓реЗрдЦ рд╣реЛрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЦрд╛рддреЗ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддреЗ рд╣реИрдВ:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TEMPORARY</span> <span class="hljs-keyword">TABLE</span> client_import <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">ON</span>(client_inn)
<span class="hljs-comment">--   SELECT DISTINCT,    </span><font></font>
  client_inn inn<font></font>
, client_name <span class="hljs-string">"name"</span>
<span class="hljs-keyword">FROM</span>
  invoice_import;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЧреНрд░рд╛рд╣рдХ рдЖрдИрдбреА рдХреЗ рд╕рд╛рде рдЦрд╛рддреЛрдВ рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдкрд╣рд▓реЗ рдЗрди рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛рдУрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдпрд╛ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЙрдирдХреЗ рд▓рд┐рдП рдлрд╝реАрд▓реНрдб рдЬреЛрдбрд╝реЗрдВ:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> invoice_import <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> client_id <span class="hljs-built_in">integer</span>;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> client_import <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> client_id <span class="hljs-built_in">integer</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рдереЛрдбрд╝рд╛ рд╕реБрдзрд╛рд░ рдХреЗ рд╕рд╛рде рдКрдкрд░ рд╡рд░реНрдгрд┐рдд рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЛ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреА рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ - рд╣рдо рд▓рдХреНрд╖реНрдп рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдХреБрдЫ рднреА рдЕрдкрдбреЗрдЯ рдпрд╛ рдбрд┐рд▓реАрдЯ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ, рдХреНрдпреЛрдВрдХрд┐ рдЖрдпрд╛рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдХреНрд▓рд╛рдЗрдВрдЯ "рдХреЗрд╡рд▓-рдкрд░рд┐рд╢рд┐рд╖реНрдЯ" рд╣реИ:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-comment">--     ID   </span>
<span class="hljs-keyword">UPDATE</span><font></font>
  client_import T<font></font>
<span class="hljs-keyword">SET</span><font></font>
  client_id = D.client_id<font></font>
<span class="hljs-keyword">FROM</span>
  <span class="hljs-keyword">client</span> D
<span class="hljs-keyword">WHERE</span>
  T.inn = D.inn; <span class="hljs-comment">-- unique key</span><font></font>
<font></font>
<span class="hljs-comment">--       ID</span>
<span class="hljs-keyword">WITH</span> ins <span class="hljs-keyword">AS</span> (
  <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">client</span>(<font></font>
    inn<font></font>
  , <span class="hljs-keyword">name</span><font></font>
  )<font></font>
  <span class="hljs-keyword">SELECT</span><font></font>
    inn<font></font>
  , <span class="hljs-keyword">name</span>
  <span class="hljs-keyword">FROM</span><font></font>
    client_import<font></font>
  <span class="hljs-keyword">WHERE</span>
    client_id <span class="hljs-keyword">IS</span> <span class="hljs-literal">NULL</span> <span class="hljs-comment">--  ID  </span>
  <span class="hljs-keyword">RETURNING</span> *<font></font>
)<font></font>
<span class="hljs-keyword">UPDATE</span><font></font>
  client_import T<font></font>
<span class="hljs-keyword">SET</span><font></font>
  client_id = D.client_id<font></font>
<span class="hljs-keyword">FROM</span><font></font>
  ins D<font></font>
<span class="hljs-keyword">WHERE</span>
  T.inn = D.inn; <span class="hljs-comment">-- unique key</span><font></font>
<font></font>
<span class="hljs-comment">--  ID    </span>
<span class="hljs-keyword">UPDATE</span><font></font>
  invoice_import T<font></font>
<span class="hljs-keyword">SET</span><font></font>
  client_id = D.client_id<font></font>
<span class="hljs-keyword">FROM</span><font></font>
  client_import D<font></font>
<span class="hljs-keyword">WHERE</span>
  T.client_inn = D.inn; <span class="hljs-comment">--  </span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рджрд░рдЕрд╕рд▓, рд╕рдм рдХреБрдЫ - </font></font><code>invoice_import</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдм рд╣рдо рд╕рдВрдЪрд╛рд░ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рднрд░ рдЧрдП рд╣реИрдВ </font></font><code>client_id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рд╣рдо рдЦрд╛рддрд╛ рдбрд╛рд▓реЗрдВрдЧреЗред</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi492454/index.html">рд╣рдо рдПрдХ рдЧреНрд░рд╛рд╣рдХ рдХреЛ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рд░рд┐рдлреИрдХреНрдЯрд░рд┐рдВрдЧ рдмреЗрдЪрддреЗ рд╣реИрдВ рдпрд╛ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреА рд╕рдорд╕реНрдпрд╛ рдХреНрдпрд╛ рд╣реИ</a></li>
<li><a href="../hi492456/index.html">рдХреИрд╕реЗ рдХрд▓реНрдкрдирд╛ рдФрд░ рдЪреЗрддрди (рднреВрднреМрддрд┐рдХреАрдп) рдореЙрдбрд▓ред рдХрдЪреНрдЪрд╛ рдбреЗрдЯрд╛ рджрд┐рдЦрд╛рдПрдВ</a></li>
<li><a href="../hi492458/index.html">M5Stack (Arduino) рдХреЗ рд▓рд┐рдП рд╕рд░рд▓ GUI</a></li>
<li><a href="../hi492460/index.html">╨д╤Г╨╜╨║╤Ж╨╕╨╛╨╜╨░╨╗╤М╨╜╨╛╨╡ ╨┐╤А╨╛╨│╤А╨░╨╝╨╝╨╕╤А╨╛╨▓╨░╨╜╨╕╨╡ тАФ ╤В╨╛, ╤З╤В╨╛ ╨▓╨░╨╝ (╨╜╨░╨▓╨╡╤А╨╜╨╛) ╤А╨░╤Б╤Б╨║╨░╨╖╤Л╨▓╨░╨╗╨╕. ╨Х╤Б╨╗╨╕ ╨▓╤Л ╤Б╨╗╤Г╤И╨░╨╗╨╕</a></li>
<li><a href="../hi492462/index.html">рд╕рдЪреНрдЪрд╛рдИ рдХрд╛ рд╕реНрд░реЛрдд: рдПрдХ рд╡рд┐рд╢реНрд▓реЗрд╖рдХ рдПрдХ рдкреНрд░рдмрдВрдзрдХ рдФрд░ рдПрдХ рдбреЗрд╡рд▓рдкрд░ рдХреЛ рдПрдХ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдХреИрд╕реЗ рд╕рд┐рдЦрд╛рддрд╛ рд╣реИ</a></li>
<li><a href="../hi492466/index.html">рдХрд┐рд╕реА рднреА рд╣реЛрд╕реНрдЯ рдкреНрд░реЛрд╡рд╛рдЗрдбрд░ рд╕реЗ cPanel рдХреЗ рд╕рд╛рде рд╕рд┐рд░реНрдл рдкрд╛рдВрдЪ рдЪрд░рдгреЛрдВ рдореЗрдВ рд░реБрд╕реЙрдирд┐рдХреНрд╕ рдореЗрдВ Plesk рдореЗрдВ рдХреИрд╕реЗ рдЬрд╛рдПрдВ</a></li>
<li><a href="../hi492468/index.html">рд▓реЗрдиреЛрд╡реЛ рдерд┐рдВрдХрд╕реЗрд╡рд░ SE350: рдкрд░рд┐рдзрд┐ рд╕реЗ рдПрдХ рдирд╛рдпрдХ</a></li>
<li><a href="../hi492474/index.html">рд╣рдо рдПрдВрдбреНрд░реЙрдЗрдб рдмреЙрдХреНрд╕ рдкрд░ рдЬрд╛рдирдХрд╛рд░реА рдХреА рд╕рдВрд░рдЪрдирд╛ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рд╕рд╛рдорд╛рдиреНрдп рдЙрдкрд╕рд░реНрдЧ рдХреНрдпрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред</a></li>
<li><a href="../hi492478/index.html">рдЬреНрдЮрд╛рди рдкреНрд░рдмрдВрдзрди рдХреЗ рдмрд┐рдирд╛ рдпрд╣ рджрд░реНрдж рд╣реЛрддрд╛ рд╣реИ: рдПрдХ рдкреНрд░рдгрд╛рд▓реА рдХреА рдХрдореА рдХреЗ 5 рдореБрдЦреНрдп рдкрд░рд┐рдгрд╛рдо</a></li>
<li><a href="../hi492480/index.html">рд╣рдо рдкрд╣рд▓реЗ рдорд╣рд╛рдорд╛рд░реА рд╕реЗ рдХреИрд╕реЗ рдЬреВрдЭрддреЗ рдереЗ рдФрд░ рд╣рдо рдХреЛрд░реЛрдиреЛрд╡рд╛рдпрд░рд╕ рдХреЗ рдЦрд┐рд▓рд╛рдл рдХреНрдпрд╛ рдХрд░рддреЗ рд╣реИрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>