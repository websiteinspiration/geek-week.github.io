<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😔 👩🏾‍🚀 🙋🏻 Deferred use of directive functionality in Angular 👨‍🎓 🌙 👉🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I had to solve the problem of changing the old mechanism for displaying tooltips, implemented by means of our component library, to a new on...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Deferred use of directive functionality in Angular</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/500424/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recently, I had to solve the problem of changing the old mechanism for displaying tooltips, implemented by means of our component library, to a new one. As always, I decided not to invent the bicycle. In order to start solving this problem, I started looking for an open source library written in pure JavaScript that could be placed in the Angular directive and used in this form. </font><font style="vertical-align: inherit;">
In my case, since I work a lot with </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">popper.js</font></a><font style="vertical-align: inherit;"> , I found the </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">tippy.js</font></a><font style="vertical-align: inherit;"> library</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/es/wd/ka/eswdkavwzb12runf9unmttdcsf0.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">written by the same developer. </font><font style="vertical-align: inherit;">For me, such a library looked like the perfect solution to the problem. </font><font style="vertical-align: inherit;">The tippy.js library has an extensive set of features. </font><font style="vertical-align: inherit;">With its help, you can create tooltips (tooltip elements), and many other elements. </font><font style="vertical-align: inherit;">These elements can be customized using themes, they are fast, strongly typed, provide accessibility to content and have many other useful features.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I started by creating a wrapper directive for tippy.js:</font></font><br>
<br>
<pre><code class="javascript hljs">@Directive({ <span class="hljs-attr">selector</span>: <span class="hljs-string">'[tooltip]'</span> })
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TooltipDirective</span> </span>{<font></font>
&nbsp;&nbsp;private instance: Instance;<font></font>
&nbsp;&nbsp;private _content: string;<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">get</span> <span class="hljs-title">content</span>() {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._content;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;@Input(<span class="hljs-string">'tooltip'</span>) <span class="hljs-keyword">set</span> <span class="hljs-title">content</span>(<span class="hljs-params">content: string</span>) {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>._content = content;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.instance) <span class="hljs-keyword">this</span>.instance.setContent(content);<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">constructor</span>(private host: ElementRef&lt;Element&gt;, private zone: NgZone) {}<font></font>
<font></font>
&nbsp;&nbsp;ngAfterViewInit() {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.zone.runOutsideAngular(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.instance = tippy(<span class="hljs-keyword">this</span>.host.nativeElement, {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">content</span>: <span class="hljs-keyword">this</span>.content,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A tooltip is created by calling a function </font></font><code>tippy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and passing elements </font></font><code>host</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and to it </font></font><code>content</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In addition, we call </font></font><code>tippy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outside the Angular Zone, since we do not need the events that are logged </font></font><code>tippy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to trigger the change detection cycle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we’ll use the tooltip in a large list of 700 elements:</font></font><br>
<br>
<pre><code class="javascript hljs">@Component({
&nbsp;&nbsp;<span class="hljs-attr">selector</span>: <span class="hljs-string">'my-app'</span>,
&nbsp;&nbsp;<span class="hljs-attr">template</span>: <span class="hljs-string">`
&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li *ngFor="let item of data" [tooltip]="item.label"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ item.label }}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;
&nbsp;&nbsp;`</span><font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppComponent</span> </span>{<font></font>
&nbsp;&nbsp;data = <span class="hljs-built_in">Array</span>.from({ <span class="hljs-attr">length</span>: <span class="hljs-number">700</span> }, (_, i) =&gt; ({
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">id</span>: i,
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">label</span>: <span class="hljs-string">`Value <span class="hljs-subst">${i}</span>`</span>,<font></font>
&nbsp;&nbsp;}));<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everything works as expected. Each item displays a tooltip. But we can solve this problem better. In our case, 700 copies were created </font></font><code>tippy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. And for each element, tippy.js tools added 4 event listeners. This means that we registered 2800 listeners (700 * 4). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To see this for yourself, you can use the method </font></font><code>getEventListeners</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in the Chrome Developer Tools console. The view construct </font></font><code>getEventListeners(element)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">returns information about event listeners registered for a given element.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c85/ea9/5b6/c85ea95b6a8f60bc535c212f5cce21cd.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Summary of all event listeners</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
If you leave the code in this form, this can affect the memory consumption of the application and for the time of its first rendering. This is especially true for page output on mobile devices. Let us ponder this. Do I need to create instances</font></font><code>tippy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for items that are not displayed in the viewport? No, it doesn `t need.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We’ll use the API</font></font><code>IntersectionObserver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to delay the inclusion of tooltip support until the item appears on the screen. If you are not familiar with the API</font></font><code>IntersectionObserver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, take a look at the</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Create for the</font></font><code>IntersectionObserver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wrapper represented by the observed object:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> hasSupport = <span class="hljs-string">'IntersectionObserver'</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">window</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inView</span>(<span class="hljs-params">
&nbsp;&nbsp;element: Element,
&nbsp;&nbsp;options: IntersectionObserverInit = {
&nbsp;&nbsp;&nbsp;&nbsp;root: null,
&nbsp;&nbsp;&nbsp;&nbsp;threshold: <span class="hljs-number">0.5</span>,
&nbsp;&nbsp;}
</span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Observable(<span class="hljs-function">(<span class="hljs-params">subscriber</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> (!hasSupport) {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subscriber.next(<span class="hljs-literal">true</span>);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subscriber.complete();<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> IntersectionObserver(<span class="hljs-function">(<span class="hljs-params">[entry]</span>) =&gt;</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subscriber.next(entry.isIntersecting);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}, options);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;observer.observe(element);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> observer.disconnect();<font></font>
&nbsp;&nbsp;});<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We created an observable object that informs subscribers about the moment the element intersects with a given area. </font><font style="vertical-align: inherit;">In addition, here we check </font></font><code>IntersectionObserver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">browser </font><font style="vertical-align: inherit;">support </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">If the browser does not support </font></font><code>IntersectionObserver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, we simply issue </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and exit. </font><font style="vertical-align: inherit;">IE users themselves are to blame for their misery. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now </font></font><code>inView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">we can use the </font><font style="vertical-align: inherit;">observed object </font><font style="vertical-align: inherit;">in a directive that implements the tooltip functionality:</font></font><br>
<br>
<pre><code class="javascript hljs">@Directive({ <span class="hljs-attr">selector</span>: <span class="hljs-string">'[tooltip]'</span> })
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TooltipDirective</span> </span>{<font></font>
&nbsp;&nbsp;...<font></font>
<font></font>
&nbsp;&nbsp;ngAfterViewInit() {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//   </span>
&nbsp;&nbsp;&nbsp;&nbsp;inView(<span class="hljs-keyword">this</span>.host.nativeElement).subscribe(<span class="hljs-function">(<span class="hljs-params">inView</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> (inView &amp;&amp; !<span class="hljs-keyword">this</span>.instance) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.zone.runOutsideAngular(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.instance = tippy(<span class="hljs-keyword">this</span>.host.nativeElement, {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">content</span>: <span class="hljs-keyword">this</span>.content,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.instance) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.instance.destroy();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.instance = <span class="hljs-literal">null</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Run the code again to analyze the number of event listeners.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/14e/b0d/bc7/14eb0dbc72735f1086763e4fcc4527e2.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Summary of all event listeners after the finalization of the project</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Excellent. </font><font style="vertical-align: inherit;">Now we create tooltips for visible elements only. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's look for answers to a couple of questions related to the new solution. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Why don't we use virtual scrolling to solve this problem? </font><font style="vertical-align: inherit;">Virtual scrolling cannot be used in any situations. </font><font style="vertical-align: inherit;">And, in addition, the Angular Material library caches the template, as a result, the corresponding data will continue to occupy memory. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What about event delegation? </font><font style="vertical-align: inherit;">To do this, you need to implement additional mechanisms yourself, in Angular there is no universal way to solve this problem.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Summary</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here we talked about how to defer the application of the functionality of directives. </font><font style="vertical-align: inherit;">This allows the application to load faster and consume less memory. </font><font style="vertical-align: inherit;">The tooltip example is just one of many cases in which a similar technique can be applied. </font><font style="vertical-align: inherit;">I am sure you will find many ways to use it in your own projects. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And how would you solve the problem of displaying a large list of elements, each of which needs to be equipped with a tooltip?</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We remind you that we are continuing </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the prediction contest</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in which you can win a brand new iPhone. </font><font style="vertical-align: inherit;">There is still time to break into it, and make the most accurate forecast on topical values.</font></font></blockquote><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/a_/bs/aa/a_bsaactpbr8fltzymtkhqbw1d4.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en500414/index.html">3D CNC machine or everything is already done before us</a></li>
<li><a href="../en500416/index.html">Why (not) need getters?</a></li>
<li><a href="../en500418/index.html">New earthquake calculations predict their probable destructiveness</a></li>
<li><a href="../en500420/index.html">sMock - Swift mocking framework for Unit-tests (thanks gMock for ideas)</a></li>
<li><a href="../en500422/index.html">Visual Debugger for Jupyter</a></li>
<li><a href="../en500426/index.html">Python, pandas and solving three problems from the world of Excel</a></li>
<li><a href="../en500428/index.html">How to help pandas in processing large amounts of data?</a></li>
<li><a href="../en500430/index.html">How I looked for quarantined work</a></li>
<li><a href="../en500436/index.html">Coming of binary neural networks based on random neurons and logical functions</a></li>
<li><a href="../en500438/index.html">SFTP and FTPS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>