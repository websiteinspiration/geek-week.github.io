<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÜ üàÅ üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø T + Conf 2019: Tarantool na Aeroflot, ou MDM on the fly üë®‚Äçüë®‚Äçüëß üõÖ üé≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoje publicamos uma transcri√ß√£o do relat√≥rio de Nikolai Shevtsov e Rustam Kildiev com o T + Conf 2019 " Tarantool in Aeroflot, ou MDM (Master Data Man...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>T + Conf 2019: Tarantool na Aeroflot, ou MDM on the fly</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/497404/"><img src="https://habrastorage.org/webt/tt/v8/vo/ttv8vohzeerxnvyinyfsi7wi1tw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoje publicamos uma transcri√ß√£o do relat√≥rio de Nikolai Shevtsov e Rustam Kildiev com o T + Conf 2019 " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarantool in Aeroflot, ou MDM (Master Data Management) on the fly</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". </font><font style="vertical-align: inherit;">No relat√≥rio, voc√™ aprender√°:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que o MDM √© necess√°rio?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que preciso de tempo real?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A ci√™ncia de dados √© mais do que apenas um notebook Jupyter.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Profissionais de Tarantool.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que Lua √© boa em vendas.</font></font></li>
</ul><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A tecnologia da informa√ß√£o ajuda ativamente nossa empresa a atrair clientes. Hoje, estamos introduzindo ativamente v√°rios projetos de Big Data. S√£o projetos de marketing que nos ajudam a segmentar dados e comunicar informa√ß√µes aos clientes, pesquisas sociais, lidar com reclama√ß√µes e apela√ß√µes e muito mais. Al√©m disso, v√°rios projetos est√£o sendo implementados que ajudam a aumentar a lucratividade e a lucratividade do neg√≥cio. Por exemplo, um dos projetos √© a an√°lise da bagagem dispon√≠vel a bordo, a fim de vender excedentes no prazo, ou prever a falha de componentes individuais e pe√ßas de reposi√ß√£o de aeronaves para manuten√ß√£o oportuna. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â na plataforma de gerenciamento de chamadas que usamos ativamente o Tarantool e um pouco mais sobre isso.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O principal valor do Big Data para n√≥s √© a capacidade de analisar dados. Estamos tentando coletar todas as novas fontes de informa√ß√µes relacionadas √† Aeroflot em um √∫nico campo de informa√ß√µes para processamento adicional.</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0c2/53c/34a/0c253c34a90c2d118b770ca120e63ba2.png"></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nikolay Shevtsov, Aeroflot. Gerente de Projetos no Departamento de Sistemas de Informa√ß√£o.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Como as pessoas costumam comprar um ingresso? H√° uma ideia sobre a viagem, uma pessoa a compartilha com amigos e parentes, em redes sociais e f√≥runs, e depois compra um ingresso no site. Existem muitas fontes de informa√ß√£o, e nossa tarefa √© coletar todas e analis√°-las para entender a atitude dos passageiros em rela√ß√£o ao servi√ßo e √† companhia a√©rea como um todo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um de nossos projetos √© chamado de plataforma de chamadas. Coletamos todas as cr√≠ticas, recursos e reclama√ß√µes de diversas fontes. "Plataforma" √© a nossa √∫nica janela de coleta no site ou no aplicativo m√≥vel atrav√©s do qual recebemos informa√ß√µes dos usu√°rios. Tamb√©m coletamos an√°lises de m√≠dias sociais relacionadas √† Aeroflot.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muitas divis√µes da Aeroflot est√£o envolvidas no tratamento de reclama√ß√µes e recursos: funcion√°rios envolvidos na manuten√ß√£o a bordo, na √°rea de embarque, na √°rea de desembarque, etc. A maioria das reclama√ß√µes, cerca de 2,5 mil por dia, vem de passageiros que chegam com algum problema. Cada reclama√ß√£o precisa ser processada, classificada e redirecionada ao departamento apropriado para um funcion√°rio espec√≠fico que possa resolver o problema do passageiro. Reclama√ß√µes id√™nticas podem ser agrupadas para economizar tempo analisando a situa√ß√£o e tomando uma decis√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O objetivo do projeto √© otimizar o processamento de aplicativos e reduzir o tempo de processamento. </font><font style="vertical-align: inherit;">Para isso, foi necess√°rio criar um sistema que, no momento da reclama√ß√£o, determine automaticamente seu t√≥pico e o envie ao departamento apropriado ao funcion√°rio respons√°vel. </font><font style="vertical-align: inherit;">No processo de processamento de uma reclama√ß√£o, o sistema deve encontrar todas as informa√ß√µes dispon√≠veis no cliente, at√© seu perfil, futuros v√¥os planejados etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No in√≠cio do projeto, consideramos v√°rias ferramentas que poderiam nos ajudar nesse assunto e, eventualmente, escolhemos o Tarantool. </font><font style="vertical-align: inherit;">A vida mostrou que essa era a escolha certa: permite que voc√™ cumpra os requisitos de SLA e, ao mesmo tempo, escala bem com o aumento da carga.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementa√ß√£o</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A Aeroflot introduziu uma plataforma para lidar com reclama√ß√µes. </font><font style="vertical-align: inherit;">Este √© um reposit√≥rio de informa√ß√µes n√£o estruturadas, com base no qual a an√°lise e s√≠ntese de perfis de clientes exclusivos √© realizada.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b31/faa/6eb/b31faa6ebcbeb799116369a843ed6d96.jpg" width="300"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As informa√ß√µes recebidas mediante solicita√ß√µes devem ser processadas e sistematizadas. </font><font style="vertical-align: inherit;">Apela√ß√µes s√£o textos que n√£o podem ser armazenados em formato bruto, portanto todo o texto √© vetorizado. </font><font style="vertical-align: inherit;">√â feita uma pesquisa por um conjunto de ocorr√™ncias, um mapa de palavras e frases exclusivas √© compilado, com base no qual o vetor inicial √© calculado para converter todas as ocorr√™ncias subsequentes. </font><font style="vertical-align: inherit;">Inicialmente, nossos especialistas em an√°lise de dados usavam ferramentas cl√°ssicas - Python e Jupyter Notebook em um cluster ou laptop local. </font><font style="vertical-align: inherit;">O vetor tem um tamanho din√¢mico, o que cria dificuldades.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao contr√°rio de muitas outras ferramentas, o Tarantool √© um servidor de aplicativos completo. </font><font style="vertical-align: inherit;">Podemos usar muitas bibliotecas, como SciLua, escrever l√≥gica em uma linguagem de programa√ß√£o regular etc. </font><font style="vertical-align: inherit;">Agora estamos vetorizando dados usando a biblioteca SicLua em tempo real diretamente no Tarantool. </font><font style="vertical-align: inherit;">Em seguida, usando o m√©todo da dist√¢ncia do cosseno, o sistema procura um vetor semelhante por um per√≠odo de tr√™s meses. </font><font style="vertical-align: inherit;">Como resultado, recebemos chamadas duplas ou similares para processamento adicional. </font><font style="vertical-align: inherit;">No processo de busca, s√£o realizados muitos c√°lculos matem√°ticos: em 3 meses, aproximadamente 100 mil chamadas s√£o processadas de todas as fontes dispon√≠veis. </font><font style="vertical-align: inherit;">O tempo m√©dio de processamento √© de 120 ms.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e9d/bac/534/e9dbac534af68444ed73e6c6b0c10aba.png"></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rustam Kildiev, CTO da Innodata.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A infraestrutura</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nosso banco de dados Tarantool √© executado em quatro servidores de dezesseis n√∫cleos com uma grande quantidade de RAM. Gra√ßas ao m√≥dulo Vshard, foi poss√≠vel implementar uma pesquisa r√°pida com for√ßa bruta. Os dados s√£o divididos em partes - baldes, para que o processamento da consulta seja paralelo. O sistema √© f√°cil de dimensionar, basta adicionar um servidor. Temos replica√ß√£o mestre-mestre implementada, embora a maioria dos DBMSs esteja chegando a isso. Al√©m disso, n√£o precisamos adicionar m√≥dulos, n√£o h√° problemas com a administra√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nossa quantidade de dados, se contamos a partir da RAM, √© de cerca de 1 TB. </font><font style="vertical-align: inherit;">No est√°gio de inicializa√ß√£o, depura√ß√£o e corre√ß√£o de erros no projeto, surgiram problemas. </font><font style="vertical-align: inherit;">Quase todas as tabelas cont√™m 7-8 √≠ndices; portanto, o banco de dados Tarantool para 1 TB levou 20 a 40 minutos, o que √© inaceit√°vel. </font><font style="vertical-align: inherit;">Durante a inicializa√ß√£o, o sistema cria √≠ndices e, se voc√™ os remover, o carregamento ser√° muito mais r√°pido. </font><font style="vertical-align: inherit;">Nessa situa√ß√£o, a fun√ß√£o Hot-standby nos ajudou.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Planos </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tanto o cliente como n√≥s, os artistas, gostamos do Tarantool. Consideramos outras bases, mas no final escolhemos o Tarantool. Em primeiro lugar, precis√°vamos de uma base muito r√°pida. Em segundo lugar, ele ter√° que trabalhar muito com ele, escrever l√≥gica, etc., portanto Lua foi uma vantagem para n√≥s. Em terceiro lugar, o Tarantool grava imediatamente no disco e n√£o tira instant√¢neos, e isso tamb√©m √© bom para n√≥s, porque, embora haja muitas chamadas de clientes, n√£o podemos perder uma sequer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Tarantool provou sua utilidade na produ√ß√£o e carregaremos ainda mais dados nele, acrescentando l√≥gica de neg√≥cios. Ao contr√°rio de outros bancos de dados, ele n√£o precisa ser constantemente ajustado e algo alterado. A prop√≥sito, a convers√£o e o carregamento de dados no Tarantool a partir de outro sistema √© automatizada e √© realizada diariamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No futuro, planejamos mudar para o Tarantool Enterprise, o que nos permitir√° administrar e configurar convenientemente v√°rias inst√¢ncias do Tarantool. </font><font style="vertical-align: inherit;">Ainda existem poucos especialistas nesse banco de dados e a necessidade deles est√° em constante crescimento. </font><font style="vertical-align: inherit;">√Äs vezes, nossas qualifica√ß√µes n√£o s√£o suficientes. </font><font style="vertical-align: inherit;">Nesses casos, o bate-papo interno dos desenvolvedores do Tarantool ajuda, no qual voc√™ pode pedir ajuda. </font><font style="vertical-align: inherit;">Isso n√£o est√° em nenhum outro sistema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m planejamos atualizar para Tarantool2 e SQL. </font><font style="vertical-align: inherit;">Existem muitos especialistas em SQL no mercado de trabalho, portanto a transi√ß√£o n√£o ser√° muito dif√≠cil.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">achados </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O principal problema deste projeto foi Lua. </font><font style="vertical-align: inherit;">Poucos desenvolvedores sabem disso, mas adoram ainda menos. </font><font style="vertical-align: inherit;">Inicialmente, escrevemos usando outro idioma, mas devido ao grande n√∫mero de solicita√ß√µes, o sistema funcionou lentamente. </font><font style="vertical-align: inherit;">Portanto, copiamos tudo com Lua por um longo per√≠odo de tempo, mas, como resultado, o sistema funciona de forma clara e r√°pida, com um pequeno n√∫mero de corre√ß√µes e lan√ßamentos. </font><font style="vertical-align: inherit;">Lua est√° muito pr√≥ximo do c√≥digo de m√°quina e √© uma das linguagens mais r√°pidas da fam√≠lia C. Embora seja uma linguagem de script pequena, possui todas as bibliotecas necess√°rias e pudemos transferir algoritmos de pesquisa, vetoriza√ß√£o, dist√¢ncia de cosseno etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tarantool √© muito tolerante a falhas e funciona imediatamente. </font><font style="vertical-align: inherit;">Realizamos in√∫meras experi√™ncias: desligamos o Tarantool, levantamos etc. </font><font style="vertical-align: inherit;">- tudo funciona bem, e os dados intermedi√°rios s√£o gravados no disco, para n√£o perdermos dados.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt497392/index.html">Como crescer de um estudante para um engenheiro de software?</a></li>
<li><a href="../pt497394/index.html">Dez recursos com cursos de ci√™ncia da computa√ß√£o dispon√≠veis gratuitamente em abril</a></li>
<li><a href="../pt497396/index.html">Colegas: nem amigo nem inimigo, mas como?</a></li>
<li><a href="../pt497398/index.html">Processadores para servidor AMD EPYC Rome 7x32 - Registre o desempenho de um √∫nico n√∫cleo</a></li>
<li><a href="../pt497402/index.html">Como criar uma linguagem de programa√ß√£o Python?</a></li>
<li><a href="../pt497408/index.html">Como os exploradores polares russos obtiveram comunica√ß√µes celulares na Ant√°rtica</a></li>
<li><a href="../pt497412/index.html">Data Scientist: mem√≥rias de vida em quarentena e esperan√ßa para o futuro</a></li>
<li><a href="../pt497414/index.html">Processamento de dados de rede em tempo real</a></li>
<li><a href="../pt497416/index.html">Toque em Suporte em JavaScript</a></li>
<li><a href="../pt497420/index.html">StegoPy - Ferramenta de esteganografia LSB em Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>