<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìü üçæ üë®üèø How Gatsby circumvented Next.js ü¶Å üóΩ ‚òÉÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The author of the article, the translation of which we publish today, works as a programmer at Antler. This company is a global startup generator. The...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How Gatsby circumvented Next.js</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/500228/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The author of the article, the translation of which we publish today, works as a programmer at Antler. </font><font style="vertical-align: inherit;">This company is a global startup generator. </font><font style="vertical-align: inherit;">There are demo days at Antler several times a year, bringing together many startup creators and investors from around the world. </font><font style="vertical-align: inherit;">The situation around COVID-19 forced Antler to translate its events into an online format.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/hq/r9/an/hqr9anmkfyicv4znlhi2ynk16rm.jpeg"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The company wanted to make sure that visitors to their virtual events, without being distracted by anything, and not getting stuck anywhere, would see the most important thing. </font><font style="vertical-align: inherit;">Namely, the ideas of startups presented to the public, expressed as the contents of web pages. </font><font style="vertical-align: inherit;">Virtual demonstration days may be of interest to a fairly wide audience. </font><font style="vertical-align: inherit;">Some members of this audience may be participating for the first time in something like this. </font><font style="vertical-align: inherit;">Therefore, the company had to do everything in the best possible way and provide high speed loading of pages representing startups. </font><font style="vertical-align: inherit;">They decided that this is just the case when a high-performance progressive web application (PWA, Progressive Web App) can come in handy. </font><font style="vertical-align: inherit;">The main issue was finding the right technology for developing PWA.</font></font><br>
<a name="habracut"></a><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f54/6f9/1fa/f546f91fa52e40c139cc78fe26b1ad06.gif"></div><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server rendering or static site generator?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To start, I‚Äôll introduce you a little to the course. All our projects are based on React and the Material-UI library. As a result, we initially decided not to move away from this technology stack, which would allow us to ensure high development speed and make the new project compatible with what we already have. The key difference between this new project and our other React-applications was that the database for them was created using the create-react-app, and that they were fully rendered on the client (CSR, Client-Side Rendering). This, in particular, led to the fact that when the application was initially loaded, users were forced to observe a blank white screen while the projects JavaScript code was loading, processing and executing.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We needed an uncompromising level of performance. Therefore, we began to think about using either server-side rendering (SSR, Server-Side Rendering) or a static site generator (SSG, Static Site Generator) so that the initial loading of applications would be as quick as possible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Our data is stored in Cloud Firestore, and we access them using Algolia. This allows us to control, at the database field level, public access to data with restricted API keys. This also improves query performance. From experience, we know that Algolia queries are faster than normal, and that the compressed Firestore JavaScript SDK is </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">86 KB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in size </font><font style="vertical-align: inherit;">. In the case of Algolia, this is </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.5 Kb</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition, we wanted to make the data that we give to customers as fresh as possible. This would help us to very quickly correct erroneous data that could be accidentally published. While the standard practice of SSG provides for the implementation of relevant requests for data during the assembly of the project, we expected that in our database the data will be written quite often. In particular, we are talking about data recording initiated by administrators using the </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">firetable</font></a><font style="vertical-align: inherit;"> interface</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, and on the initiative of the founders of the projects using the web portal. This leads to competitive assembly of the project. In addition, due to the structural features of our database, minor changes may lead to new project assembly operations. This makes our CI / CD pipeline extremely inefficient. Therefore, we needed the requests to receive data from the repository to be executed every time a user requests a page to load. Unfortunately, this meant that our solution would not be an example of a ‚Äúclean‚Äù SSG project.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Initially, our application was created based on Gatsby, since we already used landing pages built on Gatsby, and one of them already used the Material-UI library. </font><font style="vertical-align: inherit;">The first version of the project formed a page that, while the data was being loaded, displayed a "skeleton". </font><font style="vertical-align: inherit;">At the same time, the first contentful paint (FCP) was in the region of 1 second.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d75/578/718/d7557871834d0d244f8501327d68810d.gif"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Downloading the "skeleton" of the page with subsequent data loading</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
The solution turned out to be interesting, but it had its drawbacks, because the data for the output of the page was downloaded on the client's initiative:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To see the contents of the page, users would have to wait for the download of this page itself and the data displayed in it, obtained through 4 requests to Algolia.</font></font></li>
<li>    JS-    .   ,  React   ¬´¬ª      .         DOM.</li>
<li>         .  ,  ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, over the long weekend, I decided to experiment with the SSR version of the project created using Next.js. Luckily for me, the documentation for Material-UI had an example project for Next.js. Therefore, I did not need to learn all this framework from scratch. I just had to look through some parts of the tutorial and documentation. I converted the application to a project that was rendered on the server. When a user requested a page load, the server executed requests for data necessary to fill the page. This step allowed us to solve all three of the above problems. Here are the test results for two application options.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b60/0da/cda/b600dacda702f25e97808ed9f762ff8c.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Results of researching applications using </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google PageSpeed ‚Äã‚ÄãInsights</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . On the left is Gatsby (SSG), on the right is Next.js (SSR) ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">original image</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
The FCP for the Next.js version of the project was about 3 times higher than for its version based on Gatsby. The Gatsby version of the project had a Speed ‚Äã‚ÄãIndex of 3.3 seconds, while the Next.js version had 6.2 seconds. The time to the first byte (TTFB, Time To First Byte) was 2.56 seconds when using Next.js, and 10-20 ms when using Gatsby.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It should be noted that the Next.js version of the site was deployed to another service (here we used the ZEIT Now and Firebase Hosting services - this could also affect the increase in TTFB). But, despite this, it was clear that the transfer of data upload operations to the server made the site appear slower, despite the fact that all the page materials were loaded in about the same time. The fact is that in the Next.js-version of the project the user for some time sees only a blank white page.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6e0/8a2/ab3/6e08a2ab3bcb4c06471cc92545848d8a.gif"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Screen capture showing loading two versions of an application. </font><font style="vertical-align: inherit;">Download did not complete at the same time. </font><font style="vertical-align: inherit;">Records are synchronized the moment you press the Enter key.</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
All this gives us an important lesson from the field of web development: you need to give users visual feedback. </font><font style="vertical-align: inherit;">One</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> study</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> found that applications that use skeletal screens seem to load faster. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This result, moreover, does not correspond to the mood that you might have caught if you read articles about web development in the last few years. </font><font style="vertical-align: inherit;">Namely, we are talking about the fact that there is nothing wrong with using the client‚Äôs resources, and that the SSR is not a comprehensive solution to performance problems.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Static Site Generation Performance: Comparing Gatsby and Next.js</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
While the two frameworks under consideration, Gatsby and Next.js, are known, respectively, for their ability to generate static sites and server rendering, </font><font style="vertical-align: inherit;">support for SSG was improved </font><font style="vertical-align: inherit;">in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next.js 9.3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which makes it a competitor to Gatsby. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the time of this writing, Next.js' ability to generate static sites was still very fresh. She was a little over a month. She is still reported on the first page of the project. Now there are not many comparisons of the SSG capabilities of Gatsby and Next.js (or maybe there are no such comparisons at all yet). As a result, I decided to conduct my own experiment.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I returned the Gatsby version of the project to the state when the data was downloaded on the client, and made it so that both versions of the application would have exactly the same set of features. Namely, I had to remove what Gatsby plugins are responsible for: SEO functions, generating favicons, PWA manifest. In order to compare exclusively JavaScript bundles created by frameworks, I did not include images and other content downloaded from external sources in the projects. Both versions of the application were deployed on the Firebase Hosting platform. For reference, two versions of the application were created based on Gatsby 2.20.9 and Next.js 9.3.4. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I ran Lighthouse on my computer 6 times for each version. The results showed a slight advantage to Gatsby.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/82a/522/059/82a522059afba13a70e62df76144b6e6.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Average values ‚Äã‚Äãobtained after 6 Lighthouse launches for each framework ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">original image</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
In terms of overall performance assessment, the Next.js version was only slightly behind the Gatsby version. The same goes for FCP and Speed ‚Äã‚ÄãIndex. The Next Potential First Input Delay for Next.js version of the application is slightly higher than for the Gatsby version.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order to better understand what is happening, I turned to the Network tab of the Chrome developer tools. As it turned out, in the Next.js version of the project, the number of fragments into which the JavaScript code is split is 3 more than in the Gatsby version (excluding manifest files), but the compressed code is 20 KB smaller. Can the extra requests needed to download these files outweigh the benefits of a smaller bundle so much that it hurts performance?</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/27b/d84/d9a/27bd84d9aad10ae1f3421a0f829c3fa2.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the Gatsby version of the project, 7 requests are executed to download 379 KB of data. In the Next.js version of the project - 12 requests for downloading 359 KB of data (the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">original image</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
If you analyze the JavaScript performance, then the developer tools say that the Next.js version of the project needs an additional 300 ms for the first rendering, and that this version spends more time on the Evaluate Script task. In the developer‚Äôs tools, this task was even marked as a ‚Äúlong task‚Äù.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/24b/1be/11c/24b1be11c62fc6a1561a413555e53c0f.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analysis of the performance of different project options using the Performance tab of the Chrome developer tools ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">original image</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
I compared the project code to find out if there are any differences in their implementation that could affect performance. With the exception of removing unnecessary code and corrections associated with missing TypeScript types, the only difference was the implementation of smooth scrolling of the page when moving to its individual parts. This feature was previously introduced by a file</font></font><code>gatsby-browser.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and was moved to a</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dynamically imported component</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . As a result, this code would only run in a browser. (We used the</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> smooth-scroll</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> npm package</font><font style="vertical-align: inherit;">, and when importing it, he needs an object</font></font><code>window</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.) This problem may be the culprit, but I just don‚Äôt know how it is handled in Next.js.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gatsby is more convenient from the point of view of the developer</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the end, I decided to opt for the Gatsby version of the project. Moreover, here I did not take into account the very small performance advantage that Gatsby showed in comparison with the Next.js SSG mechanism (I won‚Äôt seriously cling to the advantage of 0.6 seconds?). The fact is that many features of PWA are already implemented in the Gatsby version of the project, and I did not see the point of implementing them again in the Next.js version of the application. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When I was just creating the first Gatsby version of the project, I was able to quickly add some useful PWA features to the project. For example, to add to each page my own meta tags needed for SEO, I just had to </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">read the manual</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . To equip the project with a PWA manifest, I only needed to use the appropriate </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plugin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In order to equip the project with favicons that would support all available platforms (and in this case there is still a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terrible mess</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), I did not even have to do anything, since favicon support is part of the plugin responsible for the manifest. It is very comfortable!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Implementing the same features in the Next.js version of the application would require more work. I would have to look for training manuals, all sorts of ‚Äúbest practices‚Äù. And the fact that I would succeed, anyway, would not give me any advantages. After all, nevertheless, the Next.js version of the project does not differ in higher performance than its Gatsby version. This, in addition, was the reason why I decided to simply disable the corresponding features of the Gatsby version of the project, comparing it with the Next.js version. The Next.js documentation is more concise than the Gatsby documentation (maybe the fact is that </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next.js is</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> smaller than </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gatsby</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">I really like the gamified Next.js. tutorial </font><font style="vertical-align: inherit;">But the more extensive Gatsby documentation is more valuable with the actual development of PWA, even though at first glance it looks huge.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/010/138/800/0101388008c84ce2dda5f6f8f522cf6d.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gatsby Documentation</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
True, I can't keep silent about Next.js strengths:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thanks to the tutorial and the concise documentation of Next.js, it feels like this framework can be learned faster than Gatsby.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The data loading system used in Next.js is based on asynchronous functions and the Fetch API. </font><font style="vertical-align: inherit;">As a result, when developing Next.js, the developer does not have the feeling that he needs to learn GraphQL in order to take full advantage of the framework's capabilities.</font></font></li>
<li> Next.js    TypeScript,      Gatsby        ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">   </a> (    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>).     Next.js      ,     ,        ,        .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thanks to the fact that Next.js has improved SSG support, this framework has become a powerful tool that allows, at the level of each individual page, to choose the method of working with it. </font><font style="vertical-align: inherit;">It can be SSR, SSG or CSR. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In fact, if I could generate this application in a completely static form, then Next.js would suit me better, since I could use the standard Algolia JS-API and could keep the code for loading data </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in the same file</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> as and component code. </font><font style="vertical-align: inherit;">Since Algolia does not have a built-in GraphQL API, and there is no Gatsby plugin for Algolia, implementing such a mechanism in Gatsby would require adding this code </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to a new file</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">And this goes against the intuitive declarative way of describing pages.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">About Additional Ways to Improve Project Performance</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After we have solved the problem of choosing a framework, it can be noted that there are additional ways to improve project performance that are not related to the framework. </font><font style="vertical-align: inherit;">These improvements may well bring the Lighthouse project rating to 100.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">March</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Algolia </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">mailing list,</font></a><font style="vertical-align: inherit;"> it was recommended to add a hint </font></font><code>preconnect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to further increase the speed of query execution. </font><font style="vertical-align: inherit;">(True, unfortunately, the wrong code fragment is given in the newsletter. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here is the</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> correct code.)</font></font></li>
<li>    .   JS-  CSS-,  webpack- Gatsby.   Gatsby  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> </a>   .  ,       ,   Netlify  Amazon S3. ,  Firebase Hosting,  ,    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We use JPEG and PNG images uploaded by startup creators in the application. </font><font style="vertical-align: inherit;">We do not compress and optimize them. </font><font style="vertical-align: inherit;">Improving this aspect of our application is quite a challenge and is beyond the scope of this project. </font><font style="vertical-align: inherit;">In addition, it would be just great if all of these images were converted to WebP format. </font><font style="vertical-align: inherit;">As a result, we would have to store images using only one highly efficient graphic format. </font><font style="vertical-align: inherit;">Unfortunately, as with many other PWA features, the Safari WebKit development team is addictive with WebP support. </font><font style="vertical-align: inherit;">Now it is the only major browser that </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">does not support</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> this format.</font></font></li>
</ul><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Summary</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If we briefly summarize what we were talking about here, then we can say the following:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The output of the "skeletal" version of the page during the data loading by the client creates the user a feeling of faster website operation than when the user looks at a blank page while the server is loading data.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The gatsby version of the site was only slightly faster than the Next.js version. </font><font style="vertical-align: inherit;">However, the Gatsby plug-in system and high-quality project documentation increase the usability of this framework for the developer.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dear readers! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do you use static site generators or server-side rendering systems to speed up your projects?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/a_/bs/aa/a_bsaactpbr8fltzymtkhqbw1d4.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en500216/index.html">Forget the Anthropocene: we have entered the synthetic age</a></li>
<li><a href="../en500218/index.html">Epidemiological model Covid-19</a></li>
<li><a href="../en500220/index.html">Vinyl records and cassettes right in your Android</a></li>
<li><a href="../en500222/index.html">Cordless Phones from British WWI Biplanes</a></li>
<li><a href="../en500224/index.html">DIY electronic nose</a></li>
<li><a href="../en500232/index.html">Learning Akka.NET: Server of a simple online game</a></li>
<li><a href="../en500234/index.html">Why I made a personal expense accounting project for Git + JS</a></li>
<li><a href="../en500238/index.html">Tell me what's bothering you</a></li>
<li><a href="../en500244/index.html">Outside the array</a></li>
<li><a href="../en500246/index.html">Protecting and Hacking the Xbox 360 (Part 3)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>