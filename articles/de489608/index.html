<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧛🏿 🆑 📀 Interaktion mit NIDD über SCEF mit dem Dienstprogramm Postman. Eine kurze Tour durch SCEF und seine Funktionen 👩🏾‍🤝‍👨🏼 🖇️ ♋️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel erhalten diejenigen, die gerade mit der Entwicklung beginnen oder bereits die NB-IoT-Technologie anwenden, eine Vorstellung davon, w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Interaktion mit NIDD über SCEF mit dem Dienstprogramm Postman. Eine kurze Tour durch SCEF und seine Funktionen</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489608/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In diesem Artikel erhalten diejenigen, die gerade mit der Entwicklung beginnen oder bereits die NB-IoT-Technologie anwenden, eine Vorstellung davon, wie sie remote mit dem NB-IoT-Gerät interagieren können.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hj/ax/eq/hjaxeqtz5llcdmfzbwcv6zosici.png" alt="Bild"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kurze Review</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NB-IoT ist 2G auf den Fersen und hat sich als energieeffizienter Standard für die Mobilfunkkommunikation etabliert, der in absehbarer Zukunft 2G aus dem Weg räumen kann, was seine Position gestärkt hat. Der Grund dafür ist die Fähigkeit, das Problem des Energieverbrauchs eines der am meisten verbrauchenden Teile des Geräts - des Funksenders - flexibel anzugehen. Wenn Sie nicht auf Details eingehen, haben wir zusammen mit NB-IoT die Möglichkeit, die Betriebsmodi des Geräts flexibel zu konfigurieren, indem Sie den Kommunikationsplan des Geräts und die Interaktion des Geräts mit Servern im Internet festlegen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parallel dazu steigt die Anzahl der gleichzeitig mit einer Zelle verbundenen Teilnehmergeräte sowie die Kosten des Mobilfunkbetreibers für die Aufrechterhaltung der Funktionsfähigkeit dieser Kommunikation selbst erheblich an.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wird davon ausgegangen, dass der Leser ein ungefähres Verständnis der NB-IoT-Technologie hat und nur minimale Interaktionserfahrungen vorliegen.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Artikel wird regelmäßig aktualisiert und aktualisiert.</font></font></blockquote><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schwierigkeiten innerhalb des NB-IoT-Netzwerks</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusammen mit der Fähigkeit zur Steuerung des Funksenders und der hohen Energieeffizienz ist das Problem des Sendens von Daten in Richtung vom Server zum Modul (Gerät) aufgetreten. Der Grund dafür ist, dass es möglich ist, Hunderttausende von Geräten mit weißen IP-Adressen zu versorgen. Dies ist jedoch mit einem hohen Overhead verbunden und verringert die allgemeine Zuverlässigkeit des Netzwerks aufgrund seiner Komplexität. Das Modul empfängt die Adresse für das NAT des Bedieners und es ist für den Bediener aufgrund der großen Anzahl von Geräten schwierig, sie "out" zu übersetzen. Beispiel: 100.000 Geräte haben die gleiche Anzahl von IP-Adressen und im Rahmen von IPv4 scheint dies einfach nicht möglich zu sein. Der Übergang zu IPv6 kann dieses Problem lösen, Sie müssen jedoch immer noch für die „weiße“ Adresse des Geräts im Netzwerk bezahlen, was sich erheblich auf die Tasche der Unternehmenskunden auswirkt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das heißt, im allgemeinen Fall stellt sich heraus, dass das Gerät nur im Einwegmodus arbeiten kann, indem Daten an den Server übertragen werden, ohne dass Daten vom Server empfangen werden können, da der Server praktisch nicht weiß, wann das Gerät zum ersten Mal Kontakt aufnimmt. </font><font style="vertical-align: inherit;">Oder verwenden Sie durchschnittlich nicht mehr als fünf Minuten, nachdem die Verbindung zwischen dem Gerät und dem Server zum Übertragen von Daten vom Server zum Gerät hergestellt wurde.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NIDD (Non-IP Data Delivery) - warum wird dies benötigt?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Arbeit mit dem NB-IoT-Netzwerk ist es sehr schwierig, sich an ein Gerät zur Übertragung eines Befehls oder bestimmter Daten zu wenden. Um dieses Problem zu lösen, wurde ein Mechanismus zur Optimierung der Übertragung kleiner Datenmengen, Non-IP Data Delivery (NIDD), erfunden. </font><font style="vertical-align: inherit;">Der Mechanismus reduziert die Gesamtgröße der übertragenen Nachricht durch Reduzieren der Header. </font><font style="vertical-align: inherit;">Dies wirkt sich wiederum positiv auf die Eigenschaften des Geräts aus: Es reduziert den Stromverbrauch und erhöht die Autonomie (Batterielebensdauer). </font><font style="vertical-align: inherit;">Infolgedessen führt die Ablehnung der IP-Unterstützung zu billigeren Geräten, einer kürzeren Entwicklungszeit, einer höheren Wettbewerbsfähigkeit auf dem Markt für IoT-Geräte usw.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SCEF (Service Capability Exposure Function) - ein Geschenk für Benutzer</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SCEF ist ein funktionales Netzwerkelement, das erstmals angezeigt wurde, und 3GPP Release 13, das auf der Seite des Mobilfunkbetreibers bereitgestellt wird und einen sicheren Kommunikationskanal zwischen dem SCS / AS (Service Capability Server / Anwendungsserver) und dem NB-IoT-Gerät bereitstellt. SCEF bietet einen Kommunikationskanal für die Kommunikation mit dem Gerät über NIDD und bietet über eine einzige Anwendungsprogrammierschnittstelle (aus der API T8-Beschreibung) Zugriff auf zusätzliche Netzwerkfunktionen / -dienste des NB-IoT-Netzwerks. In 3GPP Release 13 wurde nur der SCEF-Mechanismus für die Schnittstelle mit zellularen Netzwerkschnittstellen standardisiert. Dadurch wird die Netzwerklast optimiert, die Interaktion mit dem Gerät vereinfacht und der Algorithmus des Geräts selbst vereinfacht.SCEF erfüllt auch hohe Anforderungen an die Sicherheit der Datenübertragung und die Erfüllung der Anforderungen, um eine erfolgreiche Datenübertragung in beide Richtungen zu bestätigen.</font></font><br>
<br>
<h3>    </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit SCEF können Sie komplexe Interaktionssysteme mit dem NB-IoT-Gerät abstrahieren, auch wenn sich dieses im eDRX- oder PSM-Modus befindet und nicht für die Datenübertragung in Richtung des Server-&gt; Geräts verfügbar ist. Wenn das Gerät eine Registrierung erhalten und mit dem Netzwerk des Netzbetreibers über den Kommunikationsplan „vereinbart“ hat, können Sie über eine einfache Schnittstelle Daten auf das Gerät übertragen und Daten von diesem empfangen, das „Abonnement“ Ihres Geräts und des AS für bestimmte Ereignisse verwalten, eindeutige Ereignisse festlegen und selbst binden Universelle ID-Namen und mehr. All dies über dieselbe Schnittstelle - T8 API. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist wichtig zu beachten, dass ein Server (AS) nicht einer, sondern mehrere sein kann und Sie die Verteilung von Informationen zwischen Servern für bestimmte Ereignisse oder Gerätegruppen flexibel konfigurieren können.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie es funktioniert</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die beliebteste Lösung zum Organisieren des Zugriffs eines Geräts auf ein Mobilfunknetz ist die Verwendung eines Mobilfunkmoduls, zum Beispiel:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/f6/yn/xw/f6ynxwxpeypur3-lg6wabxhwyay.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Registrierung in einem Mobilfunknetz überträgt ein solches Modul einige Informationen an den Betreiber, einschließlich der IMSI einer Teilnehmer-SIM-Karte, die der Betreiber dem Teilnehmerkonto oder dem Teilnehmer selbst zuordnen kann, wenn er Zugriff auf das persönliche Konto des Betreibers hat. Hinter dem SCEF-Bildschirm verbirgt sich das Wissen über die nächste Kommunikationssitzung mit dem Gerät. Die Registrierung eines Nicht-IP-Geräts im Netz des Betreibers ist nur möglich, wenn mindestens ein Abonnement von SCS / AS für dieses Gerät besteht. Kein Abonnement - niemand kommuniziert mit diesem Gerät über NIDD und das Gerät wird nicht im Netzwerk registriert. Somit kann SCEF, das über die nächste Kommunikationssitzung Bescheid weiß, Daten gemäß den angegebenen Übermittlungsparametern und der Lebensdauer der übertragenen Nachricht vom / zum Gerät übertragen, ohne dass eine zusätzliche Überwachung des Status der Datenübertragung und der Übermittlungssteuerung organisiert werden muss.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leichtigkeit</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Einkapseln von Datenbyteeinheiten vom Gerät in das TCP-Protokoll und das Übertragen auf den Server ist im Hinblick auf Hunderttausende von Teilnehmergeräten in der Flotte des Unternehmens teuer. </font><font style="vertical-align: inherit;">Mit SCEF können Sie die IP-Adresse des Geräts verlassen und nur Nicht-IP-Daten ohne IP-Header über den Signalkanal übertragen. Dies trägt zu einer erheblichen Reduzierung der Kosten für das übertragene Byte bei und bietet zusätzliche Vorteile bei der Verwendung des Dienstes. </font><font style="vertical-align: inherit;">Darüber hinaus nimmt SCEF keine Änderungen an den übertragenen Daten sowohl zum Gerät als auch von diesem vor. Die Nutzdaten werden transparent übertragen. </font><font style="vertical-align: inherit;">Mit NIDD ist es daher möglich, nicht nur unstrukturierte Daten zu übertragen, sondern auch Daten, die in einem verständlichen standardisierten Format wie JSON „verpackt“ sind, um die Datenverarbeitung auf der AS-Seite zu vereinfachen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeitsbeginn</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Struktur des URI (Uniform Resource Identifier) ​​am Beispiel von Postman</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zunächst müssen Sie vom Betreiber (M2M-Manager-Service) Zugriff auf Ihr persönliches Konto erhalten. </font><font style="vertical-align: inherit;">Für die kommerzielle Implementierung von MTS wird eine einzige Schnittstelle für persönliche Konten bereitgestellt, über die Sie unabhängig voneinander einen APN erstellen, einen Anmelde- / Kennwortzugriff auf die API erstellen und die Namen ScsAsID, extID für Ihre Geräte zuweisen können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jene. </font><font style="vertical-align: inherit;">wir werden zumindest brauchen:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScsAsID - Ihre AS ID</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APN - derjenige, der normalerweise für die Interaktion mit dem Netzwerk verwendet wird, funktioniert nicht</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Login / Passwort - Daten für den Zugriff auf Ihr persönliches Konto und die Interaktion mit SCEF</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URI - HTTP-Adresse und Port im Netzwerk, die Ihnen von SCEF zur Verfügung gestellt werden </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">externalID - ID unseres Geräts</font></font></li>
</ul><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lass uns weiter üben</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Theorie ist vorbei. Kommen wir zum interessantesten Teil - der Praxis des Produktionsmoduls SIMCom Wireless Solutions - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SIM7020E</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ue/d6/_o/ued6_opqiacsy2l1axsi8zch1d0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst müssen Sie das Modul selbst für die Arbeit mit NIDD konfigurieren. </font><font style="vertical-align: inherit;">Versetzen Sie dazu das Modul zunächst in den CFUN = 0-Modus und konfigurieren Sie es:</font></font><br>
<br>
<pre><code class="plaintext hljs">AT+CFUN=0<font></font>
+CPIN: NOT READY<font></font>
<font></font>
OK<font></font>
AT+ENVDM=1,tel_conn_mgr,default_pdn_flag,1,30<font></font>
OK<font></font>
AT*MCGDEFCONT="Non-IP","&lt;APN&gt;"<font></font>
OK<font></font>
AT+CFUN=1<font></font>
OK<font></font>
<font></font>
+CPIN: READY<font></font>
AT+EGACT=1,4,"&lt;APN&gt;"<font></font>
+EGACT:1<font></font>
<font></font>
OK<font></font>
<font></font>
+EGACT:1,1,1,4</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Überprüfen der Registrierung des Moduls im Paketdatennetz</font></font><br>
<br>
<pre><code class="plaintext hljs">AT+CGREG?<font></font>
+CGREG: 0,1<font></font>
<font></font>
OK</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und beenden Sie die Einrichtung von NIDD</font></font><br>
<br>
<pre><code class="plaintext hljs">AT+NIDD=0,"&lt;APN&gt;","&lt;login&gt;","&lt;pass&gt;"<font></font>
+NIDD=0,0<font></font>
<font></font>
OK</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Antwort des Moduls enthält hier account_id: + NIDD = 0, &lt;account_id&gt; - Dies ist nützlich, wenn Sie NIDD auf dem Modul aktivieren.</font></font><br>
<br>
<pre><code class="plaintext hljs">AT+NIDD=1,0<font></font>
+NIDD=1,0<font></font>
<font></font>
OK</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall ist account_id 0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fertig. </font><font style="vertical-align: inherit;">In dieser Phase ist die Arbeit mit dem Modul abgeschlossen. </font><font style="vertical-align: inherit;">Fahren wir mit der Einrichtung von SCEF fort. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein wichtiger Punkt: Ohne ein registriertes Abonnement in SCEF erhält das Modul keine Registrierung im Netzwerk!</font></font></u><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SCEF</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API T8</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt ein spezielles Dokument, das die Interaktion mit SCEF detailliert beschreibt. </font><font style="vertical-align: inherit;">Diese API definiert eine Reihe von Datenmodellen, Ressourcen und zugehörigen Verfahren zum Übertragen von Nicht-IP-Daten.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yd/nm/zz/ydnmzzwqtgnhqbxt7gnrsdpow00.png"></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeiten mit SCEF- und Dienstabonnements - JSON (JavaScript Object Notation)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daten, die die SCEF-Konfiguration enthalten und über HTTP / 1.1 an SCEF übertragen werden, müssen im JSON-Format codiert sein, und der Hauptteil der HTTP-Anforderung selbst im Feld Inhaltstyp muss den Header "application / json" enthalten. </font><font style="vertical-align: inherit;">Wenn die Nachricht an den Empfänger gesendet und die Zustellbestätigung empfangen wurde, muss SCEF gleichzeitig die entsprechende Konfiguration löschen, die Nachricht über HTTP POST für AS mit dem Statuscode „200 OK“ senden und den Ereignisbericht aktivieren.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Briefträger</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde mich nicht mit der Arbeit mit diesem Dienstprogramm befassen. Im Internet finden Sie viele Bewertungen. </font><font style="vertical-align: inherit;">Ich kann nur sagen, dass die kostenlose Version einige Einschränkungen aufweist, aber wir brauchen nicht viel. Die kostenlose Funktionalität ist mehr als ausreichend für unsere Aufgaben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem wir es heruntergeladen und geöffnet haben, wird uns der erste Tab begrüßen - Launchpad, wo uns angeboten wird, unsere erste Anfrage zu erstellen, werden wir nicht ablehnen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/mf/ej/si/mfejsivr_jj6forivsfp0jhstbu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fahren Sie sofort mit der Konfiguration unseres neuen Geräts fort. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zunächst haben wir die GET-Methode konfiguriert und auf POST umgestellt (wenig später wird klar, warum dies erforderlich ist). </font><font style="vertical-align: inherit;">Geben Sie auf der Registerkarte "Autorisierung" die verfügbaren "Anmeldeinformationen" ein:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/96/ci/zc/96cizcahk44iy5-rpfvcznue3jw.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie jetzt unsere erste Anfrage:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/kp/zj/rp/kpzjrpd26ykmyt5r6xtyyoizk1w.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Anfragetext geben wir Folgendes an:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"pdnEstablishmentOption"</span>: <span class="hljs-string">"WAIT_FOR_UE"</span>,
    <span class="hljs-attr">"duration"</span>:<span class="hljs-string">"2020-12-31T23:59:59Z"</span>,
    <span class="hljs-attr">"notificationDestination"</span>: <span class="hljs-string">"http://&lt;IP &gt;:&lt;port&gt;"</span>
}</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wichtig!</font></font></b>
                        <div class="spoiler_text">  :<br>
<ul>
<li>“duration” –      duration     SLA SCEF    (SCSAS/ID)   , SCEF    ,    </li>
<li>“maximumPacketSize” –       / </li>
</ul></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beachten wir sofort, dass in „pdnEstablishmentOption“ folgende Optionen möglich sind:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WAIT_FOR_UE - Puffer, wenn das Gerät nicht verfügbar ist (nicht im Netzwerk, im PSM oder in einem anderen Status registriert)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INDICATE_ERROR - Antworten Sie sofort mit einem Fehler, wenn das Gerät nicht verfügbar ist</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEND_TRIGGER - Device Triggering Service verwenden (alternativer Übermittlungskanal per SMS). </font><font style="vertical-align: inherit;">Dieser Artikel wird nicht berücksichtigt.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir verwenden denselben Parameter, um Daten an das Gerät zu senden. </font><font style="vertical-align: inherit;">Beim Erstellen eines Abonnements können wir sofort Daten an das Gerät senden, wodurch die Anzahl der API-Anforderungen verringert wird. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle! </font><font style="vertical-align: inherit;">Sie können auf die Schaltfläche Senden klicken und sorgfältig prüfen, was wir als Antwort von SCEF erhalten:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"duration"</span>: <span class="hljs-string">"2020-12-31T23:59:59Z"</span>,
    <span class="hljs-attr">"notificationDestination"</span>: <span class="hljs-string">"http://&lt;IP &gt;:&lt;port&gt;"</span>,<font></font>
    “reliableDataService<span class="hljs-attr">": false,
    "</span>maximumPacketSize<span class="hljs-attr">": 500,
    "</span>self<span class="hljs-attr">": "</span>/3gpp-nidd/v1/&lt;ScsAsID&gt;/configurations/&lt;ID &gt;<span class="hljs-attr">",
    "</span>status<span class="hljs-attr">": "</span>ACTIVE<span class="hljs-attr">"
}</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Selbstzeile sind wir hauptsächlich an der ID der von uns erstellten Konfiguration interessiert. Es ist äußerst unerwünscht, diese zu verlieren, da die Operatoren höchstwahrscheinlich die Anforderungsfunktion aller erstellten Konfigurationen nicht unterstützen. </font><font style="vertical-align: inherit;">Wenn im Rahmen einer ScsAsID mehrere tausend Geräte erstellt werden, wird auf den SCEF-Servern zu viel Last erstellt, um alle Gerätekonfigurationen zu übertragen. </font><font style="vertical-align: inherit;">Wir nehmen es in der Regel: ein Gerät = ein Abonnement als Teil des ScsAsID-Dienstes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Somit können wir bereits Daten vom Modul auf dem Server empfangen, dessen IP-Adresse und Port wir oben angegeben haben.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datenübertragung vom Modul zum AS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versuchen wir, Daten vom Gerät an AS zu übertragen, kehren wir zum SIM7020E-Modul zurück. Wenn wir es im vorherigen Kapitel nicht berührt und nicht ausgeschaltet haben, senden wir den Befehl an das Gerät:</font></font><br>
<br>
<pre><code class="plaintext hljs">AT+NIDD=3,&lt;account_id&gt;,"6162636465"<font></font>
OK</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bitte beachten Sie, dass unsere Nachricht in HEX codiert ist und eine einfache Sequenz enthält: "abcde". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fast sofort auf dem Server (AS), der der Host ist, werden wir sehen:</font></font><br>
<br>
<pre><code class="xml hljs">POST / HTTP/1.1<font></font>
OCSGHTTPProcessor: 147ff7c6-a43d-4fc9-b303-0ca50f497747<font></font>
X-callback-t8-type: 3<font></font>
X-callback-url: http://<span class="hljs-tag">&lt;<span class="hljs-name">IP</span> &gt;</span>:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span><font></font>
X-api-network-service-node: 0<font></font>
Content-Type: application/json<font></font>
Content-Length: 214<font></font>
Host: <span class="hljs-tag">&lt;<span class="hljs-name">IP</span> &gt;</span>:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span><font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpAsyncClient/4.1.3 (Java/1.8.0_181)<font></font>
<font></font>
{"externalId":"<span class="hljs-tag">&lt;<span class="hljs-name">ID</span> &gt;</span>","niddConfiguration":"/3gpp-nidd/v1/<span class="hljs-tag">&lt;<span class="hljs-name">ScsAsID</span>&gt;</span>/configurations/<span class="hljs-tag">&lt;<span class="hljs-name">ID</span> &gt;</span>","data":"YWJjZGU=","reliableDataService":false}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Nachricht selbst ist in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base64-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Codierung angekommen </font><font style="vertical-align: inherit;">und sieht folgendermaßen aus:</font></font><br>
<pre><code class="plaintext hljs">YWJjZGU=</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir aus der Base64-Codierung übersetzen, erhalten wir unsere ursprüngliche Nachricht:</font></font><br>
<pre><code class="plaintext hljs">abcde</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Base64-Codierung wird verwendet, da bei Verwendung der ASCII-Codierung manchmal einige Daten verloren gehen und die Verwendung der Base64 die Übertragung zuverlässiger macht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist auch zu beachten, dass in diesem Fall die vom Modul übertragenen Informationen nicht in SCEF gespeichert werden und sofort über HTTP an unseren Server übertragen werden.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datenübertragung vom AS zum Modul</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um Daten in Richtung von unserem AS an das Modul zu senden, kehren wir zu Postman zurück und erstellen eine neue Anforderung mit der POST-Methode und der Base64-Codierung. Wir senden 1234567890 (in Base64: MTIzNDU2Nzg5MA ==) an unser Modul: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/mj/mc/wzmjmczcilbscfvrsjryyi5qfr8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bitte beachten Sie, dass im Feld "Adresse" ein Nachtrag erschienen ist, in dem wir angegeben haben, für welche Konfiguration wir die Nachricht senden möchten. Wenn in unserer Konfiguration mehrere Geräte enthalten sind, können Sie die Kennung "externalGroupID" verwenden, und dann erhalten alle diese Daten. Ein weiterer wichtiger Punkt ist die Lebensdauer der gesendeten Nachricht, die in Sekunden angegeben wird und eine ziemlich große Reichweite hat.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Übrigens, wenn das Gerät zu diesem Zeitpunkt nicht online ist, wird unsere Nachricht an SCEF gepuffert, und die Zeile „MaximumLatency“ gibt an, wie viele Sekunden bis zur Zerstörung der Nachricht verbleiben, wenn das Gerät vor dem von uns eingestellten Timer nicht Kontakt aufnimmt . </font><font style="vertical-align: inherit;">Nachfolgend sehen Sie, wie die angeforderte aktuelle SCEF-Konfiguration aussehen wird (unter Verwendung des GET-Mechanismus, mehr dazu weiter unten):</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"duration"</span>: <span class="hljs-string">"2020-12-31T23:59:59Z"</span>,
    <span class="hljs-attr">"notificationDestination"</span>: <span class="hljs-string">"http://&lt;IP &gt;:&lt;port&gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"ACTIVE"</span>,
    <span class="hljs-attr">"niddDownlinkDataTransfers"</span>: [<font></font>
    {<font></font>
        <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
        <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">"data"</span>: <span class="hljs-string">"MDEyMzQ1Njc4OTA="</span>,
        <span class="hljs-attr">"maximumLatency"</span>: <span class="hljs-number">96</span>,
        <span class="hljs-attr">"priority"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"self"</span>: <span class="hljs-string">"/3gpp-nidd/v1/&lt;ScsAsID&gt;/configurations/&lt;ID &gt;/downlink-data-deliveries/1"</span><font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn das Gerät nach Ablauf des Timers immer noch nicht kontaktiert wurde, benachrichtigt SCEF Ihren Server (AS), dass die Nachricht aufgrund des Ablaufs des Timers nicht zugestellt wurde, und die Nachricht wird gelöscht:</font></font><br>
<br>
<pre><code class="xml hljs">POST / HTTP/1.1<font></font>
OCSGHTTPProcessor: 14c8cab8-ecce-4868-a59e-1f784224518b<font></font>
X-callback-t8-type: 4<font></font>
X-callback-url: http://<span class="hljs-tag">&lt;<span class="hljs-name">IP</span> &gt;</span>:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span><font></font>
X-api-network-service-node: 0<font></font>
Content-Type: application/json<font></font>
Content-Length: 139<font></font>
Host: <span class="hljs-tag">&lt;<span class="hljs-name">IP</span> &gt;</span>:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span><font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpAsyncClient/4.1.3 (Java/1.8.0_181)<font></font>
<font></font>
{"niddDownlinkDataTransfer":"/3gpp-nidd/v1/<span class="hljs-tag">&lt;<span class="hljs-name">ScsAsID</span>&gt;</span>/configurations/<span class="hljs-tag">&lt;<span class="hljs-name">ID</span> &gt;</span>/downlink-data-deliveries/1","status":"FAILURE"}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei Erfolg antwortet SCEF sofort:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"SUCCESS"</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können die Möglichkeit hinzufügen, Nachrichten zu priorisieren, falls sie gepuffert sind. </font><font style="vertical-align: inherit;">Sie wird durch den Parameter „Priorität“ geregelt. </font><font style="vertical-align: inherit;">Wenn eine neue Nachricht an das Gerät gesendet wird und der Zustellungspuffer von SCEF überschritten wird, wird die Nachricht durch eine Nachricht mit niedrigerer Priorität ersetzt, andernfalls wird die Nachricht nicht zur Zustellung angenommen. </font><font style="vertical-align: inherit;">Es ist auch möglich, eine Nachricht aus dem Puffer zu löschen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn die Nachricht nicht zugestellt werden kann und gepuffert ist, erhalten Sie Folgendes:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"self"</span>: <span class="hljs-string">"/3gpp-nidd/v1/&lt;ScsAsID&gt;/configurations/&lt;ID &gt;/downlink-data-deliveries/2"</span>,
   <span class="hljs-attr">"status"</span>: <span class="hljs-string">"BUFFERING"</span>
}</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wichtig!</font></font></b>
                        <div class="spoiler_text">  :<br>
/&lt;ID &gt;/downlink-data-deliveries/<b>1</b><br>
 –      SCEF.  ,    .         .</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach Erhalt der Nachricht meldet das Modul den folgenden URC:</font></font><br>
<br>
<pre><code class="plaintext hljs">+NIDD=4,0,11,0,"3031323334353637383930"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was in der Übersetzung von HEX nach ASCII unsere Botschaft sein wird:</font></font><br>
<br>
<pre><code class="plaintext hljs">1234567890</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lass es einfach hier. </font><font style="vertical-align: inherit;">Benachrichtigung über die Zustellung einer "gepufferten" Nachricht:</font></font><br>
<br>
<pre><code class="json hljs">{
<span class="hljs-attr">"niddDownlinkDataTransfer"</span>:<span class="hljs-string">"3gpp-nidd/v1/&lt;ScsAsID&gt;/configurations/&lt;ID &gt;/downlink-data-deliveries/1"</span>,
<span class="hljs-attr">"status"</span>:<span class="hljs-string">"SUCCESS"</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Überwachung des Status des Gerätestatus ist über einen anderen SCEF-Dienst namens „Monitoring Event (MONTE)“ möglich. </font><font style="vertical-align: inherit;">Innerhalb von MONTE ist es möglich, Benachrichtigungen über Ereignisse und Zeiten (z. B. wenn das Gerät verfügbar wird) über ein ähnliches Abonnementsystem zu erhalten. </font><font style="vertical-align: inherit;">Aber lassen Sie uns ein anderes Mal darüber sprechen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfiguration von SCEF abrufen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie haben wahrscheinlich bemerkt, dass Sie die aktuelle Konfiguration von SCEF erhalten können. </font><font style="vertical-align: inherit;">Lass uns das tun. </font><font style="vertical-align: inherit;">Wir nehmen den Postboten, den wir bereits geliebt haben, und erstellen die folgende Anfrage mit der GET-Methode:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/i_/jp/j6/i_jpj6tfbbgoxt0u5sf6gl9obnk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jene. </font><font style="vertical-align: inherit;">Wir lassen den Nachrichtentext selbst leer und müssen in der Adressleiste nur die ID der für uns erstellten Konfiguration angeben, um den aktuellen Status als Antwort zu erhalten:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"duration"</span>: <span class="hljs-string">"2020-12-31T23:59:59Z"</span>,
    <span class="hljs-attr">"notificationDestination"</span>: <span class="hljs-string">" http://&lt;IP &gt;:&lt;port&gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"ACTIVE"</span>,
    <span class="hljs-attr">"niddDownlinkDataTransfers"</span>: []<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Löschen einer Konfiguration in SCEF</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun und das letzte - wir werden die von uns erstellte Konfiguration löschen. </font><font style="vertical-align: inherit;">Verwenden Sie dazu dieselbe Adressleiste wie in der aktuellen Konfiguration, ändern Sie sie jedoch in LÖSCHEN:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/w_/bt/n5/w_btn5pki3qerymozmgnub-f4ug.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Antwort erhalten wir:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">" &lt;ID &gt;"</span>,
    <span class="hljs-attr">"duration"</span>: <span class="hljs-string">"2020-12-31T23:59:59Z"</span>,
    <span class="hljs-attr">" notificationDestination"</span>: <span class="hljs-string">" http://&lt;IP &gt;:&lt;port&gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"TERMINATED"</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wo in der Zeile "Status" sehen wir, dass die von uns erstellte Konfiguration gelöscht wird.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es kann mehr als eine Dissertation zum Thema SCEF geschrieben werden. Das Thema ist umfangreich und wird bald für viele M2M-Geräte in allen Bereichen und insbesondere für das Internet der Dinge äußerst relevant. </font><font style="vertical-align: inherit;">Die Hauptsache, die ich Ihnen vermitteln wollte, war, wie Sie sofort mit NIDD und SCEF arbeiten können, damit Sie es selbst herausfinden können. </font><font style="vertical-align: inherit;">Aber auch gerne helfe ich Ihnen weiter: support@simcom.com (markiert für RUS Team), in dem Brief müssen Sie Ihre Kontaktdaten und ein paar Worte zu Ihrem Projekt angeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den folgenden Artikeln werden wir andere Aspekte der Arbeit mit Mobilfunkmodulen sorgfältig analysieren und Sie schreiben in die Kommentare, welches Thema für Sie von Interesse sein wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mein besonderer Dank gilt Sergey Novikov, dem leitenden Experten für konvergierte Lösungen und Multimediadienste.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sanov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) von MTS für unschätzbare Unterstützung bei der Vorbereitung des Artikels.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwendete Quellen</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NB-IoT: Wie funktioniert es? </font><font style="vertical-align: inherit;">Teil 3: SCEF - ein einziges Fenster für den Zugang zu den Diensten des Betreibers </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ETSI TS 129 122</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de489594/index.html">Framework vs Platform: Was ist der Unterschied?</a></li>
<li><a href="../de489596/index.html">Die Zusammenfassung interessanter Materialien für den mobilen Entwickler # 334 (vom 17. bis 23. Februar)</a></li>
<li><a href="../de489600/index.html">GDC-2020: Was erwartet Sie von einer der größten Messen für Spieleentwicklung?</a></li>
<li><a href="../de489602/index.html">Prerender auf Leinwand 2D</a></li>
<li><a href="../de489604/index.html">Wie bewerte ich als Teamleiter Projekte?</a></li>
<li><a href="../de489610/index.html">Volle Hausautomation in einem neuen Gebäude</a></li>
<li><a href="../de489612/index.html">DEFCON 27 Konferenz. Vervielfältigung von mechanischen Schlüsseln mit eingeschränktem Zugriff. Teil 2</a></li>
<li><a href="../de489614/index.html">Markierung von Schuhresten in 1C. Lösen des Problems des Scannens und Hochladens auf Honest Sign</a></li>
<li><a href="../de489618/index.html">Benötigen wir ein solches Format? .. und einige Statistiken</a></li>
<li><a href="../de489620/index.html">9 Windows Terminal-Tipps von Scott Hanselman</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>