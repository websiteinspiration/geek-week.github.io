<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ« ğŸ™ ğŸ‘©ğŸ½â€ğŸš’ Node.jsï¼ŒTorï¼ŒPuppeteerå’ŒCheerioï¼šåŒ¿åç½‘ç»œæŠ“å– ğŸ”§ ğŸ‘¾ ğŸ˜œ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="WebæŠ“å–æ˜¯ä¸€ç§ä»ç½‘ç«™æ”¶é›†æ•°æ®çš„æ–¹æ³•ã€‚è¯¥æœ¯è¯­é€šå¸¸ç”¨äºè‡ªåŠ¨æ•°æ®æ”¶é›†ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•åŒ¿åä»ç½‘ç«™æ”¶é›†æ•°æ®ã€‚æœ‰äººåœ¨WebæŠ“å–ä¸­å¸Œæœ›åŒ¿åçš„åŸå› æ˜¯ï¼Œå› ä¸ºè®¸å¤šWebæœåŠ¡å™¨å°†æŸäº›è§„åˆ™åº”ç”¨äºIPåœ°å€çš„è¿æ¥ï¼Œåœ¨ä¸€å®šçš„æ—¶é—´å†…ä»ä¸­å‘å‡ºä¸€å®šæ•°é‡çš„è¯·æ±‚ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹å·¥å…·ï¼š
 
 

- æœ¨å¶ -ç”¨äºè®¿é—®ç½‘é¡µã€‚
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Node.jsï¼ŒTorï¼ŒPuppeteerå’ŒCheerioï¼šåŒ¿åç½‘ç»œæŠ“å–</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/486688/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebæŠ“å–æ˜¯ä¸€ç§ä»ç½‘ç«™æ”¶é›†æ•°æ®çš„æ–¹æ³•ã€‚</font><font style="vertical-align: inherit;">è¯¥æœ¯è¯­é€šå¸¸ç”¨äºè‡ªåŠ¨æ•°æ®æ”¶é›†ã€‚</font><font style="vertical-align: inherit;">ä»Šå¤©ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•åŒ¿åä»ç½‘ç«™æ”¶é›†æ•°æ®ã€‚</font><font style="vertical-align: inherit;">æœ‰äººåœ¨WebæŠ“å–ä¸­å¸Œæœ›åŒ¿åçš„åŸå› æ˜¯ï¼Œå› ä¸ºè®¸å¤šWebæœåŠ¡å™¨å°†æŸäº›è§„åˆ™åº”ç”¨äºIPåœ°å€çš„è¿æ¥ï¼Œåœ¨ä¸€å®šçš„æ—¶é—´å†…ä»ä¸­å‘å‡ºä¸€å®šæ•°é‡çš„è¯·æ±‚ã€‚</font><font style="vertical-align: inherit;">åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹å·¥å…·ï¼š</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ¨å¶</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -ç”¨äºè®¿é—®ç½‘é¡µã€‚</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cheerio-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”¨äºè§£æHTMLä»£ç ã€‚</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tor-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»ä¸åŒçš„IPåœ°å€æ‰§è¡Œæ¯ä¸ªè¯·æ±‚ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œç½‘ç»œæŠ“å–çš„æ³•å¾‹æ–¹é¢æ˜¯ä¸€ä¸ªå¤æ‚ä¸”å¸¸å¸¸ä¸æ¸…æ¥šçš„é—®é¢˜ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œè¯·éµå®ˆæ‰€</font><font style="vertical-align: inherit;">æ”¶é›†æ•°æ®é¡µé¢</font><font style="vertical-align: inherit;">çš„â€œ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨æ¡æ¬¾</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> â€ã€‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™æ˜¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ‰å…³æ­¤ä¸»é¢˜çš„ä¸€äº›å¥½ææ–™ã€‚</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/le/p2/ma/lep2maug31nga07riq1kdys4mkq.jpeg"></a><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Torå®‰è£…</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬ä»å¤´å¼€å§‹-å› æ­¤ï¼Œé¦–å…ˆï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…Torå®¢æˆ·ç«¯ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get install tor</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Torè®¾ç½®</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨é…ç½®Torå®¢æˆ·ç«¯ã€‚</font><font style="vertical-align: inherit;">Torçš„é»˜è®¤é…ç½®ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SOCKS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç«¯å£</font><font style="vertical-align: inherit;">ï¼Œè¯¥</font><font style="vertical-align: inherit;">ç«¯å£</font><font style="vertical-align: inherit;">ä¸ºæˆ‘ä»¬æä¾›äº†åˆ°å•ä¸ªè¾“å‡ºèŠ‚ç‚¹çš„ä¸€æ¡è·¯å¾„ï¼ˆå³ä¸€ä¸ªIPåœ°å€ï¼‰ã€‚</font><font style="vertical-align: inherit;">å¯¹äºTorçš„æ—¥å¸¸ä½¿ç”¨ï¼ˆä¾‹å¦‚ä»…æµè§ˆç½‘ç»œï¼‰ï¼Œè¿™æ˜¯éå¸¸åˆé€‚çš„ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯æˆ‘ä»¬éœ€è¦ä¸€äº›IPåœ°å€ã€‚</font><font style="vertical-align: inherit;">è¿™å°†å…è®¸æ‚¨åœ¨ç½‘ç»œæŠ“å–è¿‡ç¨‹ä¸­åœ¨å®ƒä»¬ä¹‹é—´åˆ‡æ¢ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†æ ¹æ®éœ€è¦é…ç½®Torï¼Œæˆ‘ä»¬åªéœ€æ‰“å¼€å…¶ä»–ç«¯å£å³å¯ä¾¦å¬SOCKSè¿æ¥ã€‚</font><font style="vertical-align: inherit;">è¿™å¯ä»¥é€šè¿‡å°†å‡ ä¸ªæ¡ç›®æ·»åŠ </font></font><code>SocksPort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ°ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶ä¸­æ¥å®Œæˆï¼Œå¯ä»¥åœ¨ä¸Šæ‰¾åˆ°</font></font><code>/etc/tor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä½¿ç”¨æŸäº›æ–‡æœ¬ç¼–è¾‘å™¨</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‰“å¼€æ–‡ä»¶</font></font><code>/etc/tor/torrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¹¶å°†ä»¥ä¸‹æ¡ç›®æ·»åŠ åˆ°æ–‡ä»¶æœ«å°¾ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">#  4 SOCKS-,       Tor-.<font></font>
<font></font>
SocksPort 9050<font></font>
SocksPort 9052<font></font>
SocksPort 9053<font></font>
SocksPort 9054</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™é‡Œå€¼å¾—æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</font></font><br>
<br>
<ul>
<li>   <code>SocksPort</code>  .  â€”   ,        ,   SOCKS,  .</li>
<li>   <code>SocksPort</code>  ,   ,       ,    -  .</li>
<li>    <code>9050</code> â€”  ,  Tor-  .</li>
<li>    <code>9051</code>.    Tor  ,    ,    ,   Tor.</li>
<li>    <code>9051</code>,    ,         1.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†åº”ç”¨å¯¹é…ç½®æ–‡ä»¶æ‰€åšçš„æ›´æ”¹ï¼Œè¯·é‡æ–°å¯åŠ¨Torå®¢æˆ·ç«¯ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">sudo /etc/init.d/tor restart</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»ºä¸€ä¸ªæ–°çš„Node.jsé¡¹ç›®</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºé¡¹ç›®åˆ›å»ºä¸€ä¸ªæ–°ç›®å½•ã€‚</font><font style="vertical-align: inherit;">å«å¥¹</font></font><code>superWebScraping</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">mkdir superWebScraping</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬è½¬åˆ°æ­¤ç›®å½•å¹¶åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„Nodeé¡¹ç›®ï¼š</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> superWebScraping &amp;&amp; npm init -y</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®¾ç½®å¿…è¦çš„ä¾èµ–å…³ç³»ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">npm i --save puppeteer cheerio</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨Puppeteerå¤„ç†ç½‘ç«™</font></font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puppeteer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯ä¸€ç§</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸å¸¦ç”¨æˆ·ç•Œé¢</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„æµè§ˆå™¨</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">ï¼Œ</font></a><font style="vertical-align: inherit;">è¯¥æµè§ˆå™¨</font><font style="vertical-align: inherit;">ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DevTools</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åè®®</font><font style="vertical-align: inherit;">ä¸</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chrome</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chromium</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿›è¡Œäº¤äº’</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬ä¹‹æ‰€ä»¥ä¸ä½¿ç”¨è¯¥åº“æ¥å¤„ç†è¯¸å¦‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tor-requestä¹‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">çš„è¯·æ±‚</font></a><font style="vertical-align: inherit;">ï¼Œæ˜¯å› ä¸ºè¿™æ ·çš„åº“å°†æ— æ³•å¤„ç†ä½œä¸ºå•é¡µWebåº”ç”¨ç¨‹åºåˆ›å»ºçš„ç½‘ç«™ï¼Œå…¶å†…å®¹ä¼šåŠ¨æ€åŠ è½½ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ›å»ºä¸€ä¸ªæ–‡ä»¶</font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¹¶å°†ä»¥ä¸‹ä»£ç æ”¾å…¥å…¶ä¸­ã€‚</font><font style="vertical-align: inherit;">æ³¨é‡Šä¸­æè¿°äº†æ­¤ä»£ç çš„ä¸»è¦åŠŸèƒ½ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">/**
&nbsp;*   puppeteer.
&nbsp;*/</span>
<span class="hljs-keyword">const</span> puppeteer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'puppeteer'</span>);<font></font>
<font></font>
<span class="hljs-comment">/**
&nbsp;*   main  , 
&nbsp;*     -.
&nbsp;* ,      ,
&nbsp;*   ,     
&nbsp;*  puppeteer.
&nbsp;*/</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*  Chromium.   `headless`   false,
&nbsp;&nbsp;&nbsp;*     .
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> puppeteer.launch({
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">headless</span>: <span class="hljs-literal">false</span><font></font>
&nbsp;&nbsp;});<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*   .
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> page = <span class="hljs-keyword">await</span> browser.newPage();<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*   ,   https://api.ipify.org.
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="hljs-keyword">await</span> page.goto(<span class="hljs-string">'https://api.ipify.org'</span>);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*  3     .
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;browser.close();<font></font>
&nbsp;&nbsp;}, <span class="hljs-number">3000</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/**
&nbsp;*  ,  main().
&nbsp;*/</span>
main();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œè„šæœ¬ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">node index.js</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¹‹åï¼ŒChromiumæµè§ˆå™¨çª—å£åº”å‡ºç°åœ¨å±å¹•ä¸Šï¼Œå…¶ä¸­è¯¥åœ°å€å·²æ‰“å¼€</font></font><code>https://api.ipify.org</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f5a/66a/fdc/f5a66afdc58793e9913dcb868f2e19c9.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æµè§ˆå™¨çª—å£ï¼Œä¸ä½¿ç”¨Torè¿æ¥ï¼Œ</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æˆ‘</font></font><code>https://api.ipify.org</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¹‹æ‰€ä»¥</font><font style="vertical-align: inherit;">åœ¨æµè§ˆå™¨çª—å£ä¸­æ‰“å¼€å®ƒæ­£æ˜¯</font><font style="vertical-align: inherit;">å› ä¸ºæ­¤é¡µé¢å¯ä»¥æ˜¾ç¤ºä»ä¸­è®¿é—®å®ƒçš„å…¬å…±IPåœ°å€ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæˆ‘åœ¨ä¸ä½¿ç”¨Torçš„æƒ…å†µä¸‹è®¿é—®è¿™äº›ç½‘ç«™ï¼Œåˆ™è¿™äº›åœ°å€å¯¹æˆ‘å¯è§ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šè¿‡å°†ä»¥ä¸‹é”®æ·»åŠ åˆ°å¸¦æœ‰ä¼ é€’çš„å‚æ•°çš„å¯¹è±¡ä¸­æ¥æ›´æ”¹ä¸Šè¿°ä»£ç </font></font><code>puppeteer.launch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs">&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*  Chromium.   `headless`  false,
&nbsp;&nbsp;&nbsp;*     .
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> puppeteer.launch({
&nbsp;&nbsp;<span class="hljs-attr">headless</span>: <span class="hljs-literal">false</span>,<font></font>
&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;<span class="hljs-comment">//   .</span>
&nbsp;&nbsp;<span class="hljs-attr">args</span>: [<span class="hljs-string">'--proxy-server=socks5://127.0.0.1:9050'</span>]<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å‘æµè§ˆå™¨ä¼ é€’äº†ä¸€ä¸ªå‚æ•°</font></font><code>--proxy-server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ­¤å‚æ•°çš„å€¼å‘Šè¯‰æµè§ˆå™¨ï¼Œå®ƒåº”è¯¥ä½¿ç”¨åœ¨æˆ‘ä»¬çš„è®¡ç®—æœºä¸Šè¿è¡Œå¹¶ä¸”å¯ä»¥åœ¨ç«¯å£ä¸Šè®¿é—®çš„socks5ä»£ç†æœåŠ¡å™¨</font></font><code>9050</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ç«¯å£å·æ˜¯æˆ‘ä»¬å…ˆå‰è¾“å…¥æ–‡ä»¶çš„ç«¯å£å·ä¹‹ä¸€</font></font><code>torrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å†æ¬¡è¿è¡Œè„šæœ¬ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">node index.js</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ¬¡ï¼Œåœ¨æ‰“å¼€çš„é¡µé¢ä¸Šï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å¦ä¸€ä¸ªIPåœ°å€ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯ç”¨äºé€šè¿‡Torç½‘ç»œæŸ¥çœ‹ç«™ç‚¹çš„åœ°å€ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b0a/805/c97/b0a805c971018fabeadbb4de130ec269.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æµè§ˆå™¨çª—å£ï¼Œä½¿ç”¨Torè¿æ¥ï¼Œ</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
åœ¨æˆ‘çš„æƒ…å†µä¸‹ï¼Œè¯¥çª—å£ä¸­å‡ºç°ä¸€ä¸ªåœ°å€</font></font><code>144.217.7.33</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯èƒ½è¿˜æœ‰å…¶ä»–åœ°å€ã€‚</font><font style="vertical-align: inherit;">è¯·æ³¨æ„ï¼Œå¦‚æœå†æ¬¡è¿è¡Œè¯¥è„šæœ¬å¹¶ä½¿ç”¨ç›¸åŒçš„ç«¯å£å·ï¼ˆ</font></font><code>9050</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ï¼Œåˆ™æ‚¨å°†æ”¶åˆ°ä»¥å‰è·å¾—çš„ç›¸åŒIPåœ°å€ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b0a/805/c97/b0a805c971018fabeadbb4de130ec269.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é‡æ–°å¯åŠ¨æµè§ˆå™¨çª—å£ï¼Œä½¿ç”¨Torè¿æ¥ï¼Œ</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨Torè®¾ç½®ä¸­æˆ‘ä»¬æ‰“å¼€äº†å‡ ä¸ªç«¯å£çš„åŸå› ã€‚</font><font style="vertical-align: inherit;">å°è¯•å°†æµè§ˆå™¨è¿æ¥åˆ°å…¶ä»–ç«¯å£ã€‚</font><font style="vertical-align: inherit;">è¿™å°†æ›´æ”¹IPåœ°å€ã€‚</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”¨Cheerioæ”¶é›†æ•°æ®</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ç§æ–¹ä¾¿çš„é¡µé¢åŠ è½½æœºåˆ¶ï¼Œç°åœ¨è¯¥è¿›è¡Œç½‘é¡µæŠ“å–äº†ã€‚</font><font style="vertical-align: inherit;">ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cheerio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åº“</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯ä¸€ä¸ªHTMLè§£æå™¨ï¼Œå…¶APIçš„æ„å»ºæ–¹å¼ä¸</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jQuery</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> APIç›¸åŒ</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä»â€œé»‘å®¢æ–°é—»â€é¡µé¢è·å–5ä¸ªæœ€æ–°å¸–å­ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è½¬åˆ°</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacker News</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç½‘ç«™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/09b/a64/e95/09ba64e9538179169b51068b3172e18d.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é»‘å®¢æ–°é—»ç½‘ç«™</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æˆ‘ä»¬å¸Œæœ›ä»æ‰“å¼€çš„é¡µé¢ä¸­è·å¾—5ä¸ªæ–°çš„å¤´æ¡æ–°é—»ï¼ˆç°åœ¨æ˜¯HAKMEMï¼ˆ1972ï¼‰ï¼Œæ‹‰é‡ŒÂ·ç½—ä¼¯èŒ¨å»ä¸–ï¼Œç­‰ç­‰ï¼‰ã€‚</font><font style="vertical-align: inherit;">ä½¿ç”¨æµè§ˆå™¨å¼€å‘äººå‘˜å·¥å…·æ£€æŸ¥äº†æ–‡ç« çš„æ ‡é¢˜ï¼Œæˆ‘æ³¨æ„åˆ°æ¯ä¸ªæ ‡é¢˜éƒ½æ”¾åœ¨</font></font><code>&lt;a&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¸¦æœ‰class</font><font style="vertical-align: inherit;">çš„HTMLå…ƒç´ ä¸­</font></font><code>storylink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a37/ccb/03e/a37ccb03e43a8bf1869a510acf167088.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ£€æŸ¥æ–‡æ¡£çš„ç»“æ„</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä¸ºäº†ä»é¡µé¢çš„HTMLä»£ç ä¸­æå–æˆ‘ä»¬éœ€è¦çš„å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œåºåˆ—ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨æ²¡æœ‰ç”¨æˆ·ç•Œé¢è¿æ¥åˆ°Torä»£ç†çš„æƒ…å†µä¸‹å¯åŠ¨æ–°çš„æµè§ˆå™¨å®ä¾‹ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»ºä¸€ä¸ªæ–°é¡µé¢ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è½¬åˆ°åœ°å€</font></font><code>https://news.ycombinator.com/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è·å–é¡µé¢çš„HTMLå†…å®¹ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†é¡µé¢çš„HTMLå†…å®¹åŠ è½½åˆ°ä¸­</font></font><code>cheerio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»ºä¸€ä¸ªæ•°ç»„æ¥ä¿å­˜æ–‡ç« æ ‡é¢˜ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”¨ç±»è®¿é—®å…ƒç´ </font></font><code>storylink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨</font></font><code>cheerio</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sliceï¼ˆï¼‰</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•è·å–å‰5ä¸ªå…ƒç´ </font><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨</font></font><code>cheerio</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eachï¼ˆï¼‰</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•éå†ç»“æœå…ƒç´ </font><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†æ‰¾åˆ°çš„æ¯ä¸ªæ ‡å¤´å†™å…¥æ•°ç»„ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥ä¸‹æ˜¯å®ç°è¿™äº›æ“ä½œçš„ä»£ç ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> puppeteer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'puppeteer'</span>);<font></font>
<font></font>
<span class="hljs-comment">/**
&nbsp;*   cheerio.
&nbsp;*/</span>
<span class="hljs-keyword">const</span> cheerio = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cheerio'</span>);<font></font>
<font></font>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> puppeteer.launch({
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*       (   ).
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">headless</span>: <span class="hljs-literal">true</span>,
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">args</span>: [<span class="hljs-string">'--proxy-server=socks5://127.0.0.1:9050'</span>]<font></font>
&nbsp;&nbsp;});<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> page = <span class="hljs-keyword">await</span> browser.newPage();<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">await</span> page.goto(<span class="hljs-string">'https://news.ycombinator.com/'</span>);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*      HTML-.
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> page.content();<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*    cheerio.
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> $ = cheerio.load(content);<font></font>
<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*      .
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> titles = [];<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*   ,   `storylink`.
&nbsp;&nbsp;&nbsp;*  slice()      5   .
&nbsp;&nbsp;&nbsp;*      each().
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;$(<span class="hljs-string">'.storylink'</span>).slice(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>).each(<span class="hljs-function">(<span class="hljs-params">idx, elem</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*   HTML-,   .
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> title = $(elem).text();<font></font>
&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*    .
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;titles.push(title);<font></font>
&nbsp;&nbsp;})<font></font>
<font></font>
&nbsp;&nbsp;browser.close();<font></font>
&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*     .
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(titles);<font></font>
}<font></font>
<font></font>
main();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿è¡Œæ­¤è„šæœ¬åï¼Œå°†å‘ç”Ÿä»¥ä¸‹æƒ…å†µã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b6/53a/c79/2b653ac79295243f1bc59c931fef3d78.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»é¡µé¢ä»£ç ä¸­æˆåŠŸæå–äº†å‰5ä¸ªé»‘å®¢æ–°é—»å¤´æ¡</font></font></font></i><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨ä¸åŒçš„IPåœ°å€è¿ç»­æŠ“å–</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨è®©æˆ‘ä»¬è®¨è®ºä¸€ä¸‹å¦‚ä½•ä½¿ç”¨æ–‡ä»¶ä¸­æŒ‡å®šçš„å„ç§SOCKSç«¯å£</font></font><code>torrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">è¿™å¾ˆç®€å•ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†å£°æ˜ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„éƒ½å°†åŒ…å«ä¸€ä¸ªç«¯å£å·ã€‚</font><font style="vertical-align: inherit;">ç„¶åå°†è¯¥å‡½æ•°é‡å‘½å</font></font><code>main()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œ</font></font><code>scrape()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶å£°æ˜ä¸€ä¸ªæ–°å‡½æ•°</font></font><code>main()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè¯¥å‡½æ•°å°†è°ƒç”¨è¯¥å‡½æ•°</font></font><code>scrape()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¹¶åœ¨æ¯æ¬¡è°ƒç”¨æ—¶å°†å…¶ä¼ é€’ç»™æ–°çš„ç«¯å£å·ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ˜¯å®Œæˆçš„ä»£ç ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> puppeteer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'puppeteer'</span>);
<span class="hljs-keyword">const</span> cheerio = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cheerio'</span>);<font></font>
<font></font>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scrape</span>(<span class="hljs-params">port</span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> puppeteer.launch({
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">args</span>: [<span class="hljs-string">'--proxy-server=socks5://127.0.0.1:'</span> + port]<font></font>
&nbsp;&nbsp;});<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> page = <span class="hljs-keyword">await</span> browser.newPage();
&nbsp;&nbsp;<span class="hljs-keyword">await</span> page.goto(<span class="hljs-string">'https://news.ycombinator.com/'</span>);
&nbsp;&nbsp;<span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> page.content();<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> $ = cheerio.load(content);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> titles = [];<font></font>
<font></font>
&nbsp;&nbsp;$(<span class="hljs-string">'.storylink'</span>).slice(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>).each(<span class="hljs-function">(<span class="hljs-params">idx, elem</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> title = $(elem).text();<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;titles.push(title);<font></font>
&nbsp;&nbsp;});<font></font>
<font></font>
&nbsp;&nbsp;browser.close();<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">return</span> titles;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*  SOCKS- Tor,    torrc.&nbsp;
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> ports = [
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">'9050'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">'9052'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">'9053'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">'9054'</span><font></font>
&nbsp;&nbsp;];<font></font>
&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*  -...
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> port <span class="hljs-keyword">of</span> ports) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* ...  -    .
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">await</span> scrape(port));<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;}<font></font>
}<font></font>
<font></font>
main();</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‘˜è¦</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å·¥å…·è¿›è¡ŒåŒ¿åWebæŠ“å–ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">äº²çˆ±çš„è¯»è€…ä»¬ï¼</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨æ›¾ç»åšè¿‡ç½‘é¡µæŠ“å–å—ï¼Ÿ</font><font style="vertical-align: inherit;">å¦‚æœæ˜¯è¿™æ ·ï¼Œè¯·å‘Šè¯‰æˆ‘ä»¬æ‚¨ä½¿ç”¨å“ªäº›å·¥å…·ã€‚</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN486688/">https://habr.com/ru/post/zh-CN486688/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN486678/index.html">ASP.NET Coreä¸­çš„çŸ³è‹±</a></li>
<li><a href="../zh-CN486680/index.html">MLï¼ŒVRå’Œæœºå™¨äººï¼ˆè¿˜æœ‰ä¸€ç‚¹äº‘ï¼‰</a></li>
<li><a href="../zh-CN486682/index.html">Docker Composeï¼šç®€åŒ–ä½¿ç”¨Makefile</a></li>
<li><a href="../zh-CN486684/index.html">æˆ‘å¯¹é‚£äº›ç›¸ä¿¡TDDçš„ä»·å€¼è¢«å¤¸å¤§çš„äººçš„å›ç­”</a></li>
<li><a href="../zh-CN486686/index.html">å…³äºåœ¨Pythonä¸­å®ç°æ·±åº¦å­¦ä¹ åº“</a></li>
<li><a href="../zh-CN486690/index.html">ç¼–å†™ä¼˜è´¨ç®­å¤´åŠŸèƒ½çš„5ä¸ªæŠ€å·§</a></li>
<li><a href="../zh-CN486692/index.html">æ‚¨å¯èƒ½ä»æœªä½¿ç”¨è¿‡çš„Chromeæ§åˆ¶å°åŠŸèƒ½</a></li>
<li><a href="../zh-CN486694/index.html">OpenStreetMapç¬¬496å·ä¸–ç•Œæ–°é—»ï¼ˆ01/14/2020/20/01/2020ï¼‰</a></li>
<li><a href="../zh-CN486702/index.html">2æœˆ3æ—¥è‡³9æ—¥åœ¨è«æ–¯ç§‘ä¸¾è¡Œçš„æ•°å­—æ´»åŠ¨</a></li>
<li><a href="../zh-CN486704/index.html">2æœˆ3æ—¥è‡³9æ—¥åœ¨åœ£å½¼å¾—å ¡ä¸¾è¡Œçš„æ•°å­—æ´»åŠ¨</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>