<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✋🏿 🎡 🤹🏽 Modul ES6 di browser: apakah siap atau tidak? ☂️ 🍃 🤮</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pernahkah Anda mendengar tentang penggunaan modul ES6 di browser? Sebenarnya, ini adalah modul ES6 biasa. Mereka hanya berlaku dalam kode yang ditujuk...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Modul ES6 di browser: apakah siap atau tidak?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/492510/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pernahkah Anda mendengar tentang penggunaan modul ES6 di browser? </font><font style="vertical-align: inherit;">Sebenarnya, ini adalah modul ES6 biasa. </font><font style="vertical-align: inherit;">Mereka hanya berlaku dalam kode yang ditujukan untuk browser.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/yl/q1/wl/ylq1wlx8jeaaomnc9kwintirrma.jpeg"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika ada yang tidak tahu - ini adalah tampilannya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada satu halaman </font></font><code>index.html</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><font></font>
&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"index.mjs"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">&lt;!--     "module" --&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada file yang </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mewakili modul yang terhubung ke halaman:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { doSomething } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.mjs'</span>;<font></font>
<font></font>
doSomething(<span class="hljs-string">'Make me a sandwich'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modul ini, pada gilirannya, mengimpor fungsi </font></font><code>doSomething</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dari modul </font></font><code>utils.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> doSomething = <span class="hljs-function"><span class="hljs-params">message</span> =&gt;</span> {
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'No.'</span>);<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modul ES6 telah ada selama bertahun-tahun. </font><font style="vertical-align: inherit;">Dan mungkin Anda berpikir untuk mencobanya. </font><font style="vertical-align: inherit;">Saya menggunakannya selama sekitar satu bulan di proyek saya sendiri. </font><font style="vertical-align: inherit;">Pada saat yang sama, saya sampai pada kesimpulan bahwa ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penangguhan!</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang dukungan browser untuk modul</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebelum saya berbicara tentang apa yang saya pahami, saya sarankan untuk melihat dukungan browser untuk modul. </font><font style="vertical-align: inherit;">Saya menulis materi ini di awal tahun 2020, sehingga </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tingkat dukungan untuk</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> modul cukup mengesankan 90%.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/484/cfd/9e6/484cfd9e669b731f483cfdd99a638777.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dukungan untuk modul dengan browser menurut caniuse.com,</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
saya cukup senang dengan 90% ini (saya tidak memperhitungkan kebutuhan 10% pengguna), walaupun Anda mungkin ingin lebih bertanggung jawab. </font><font style="vertical-align: inherit;">Tetapi, bahkan mempertimbangkan hal ini, jika proyek Anda tidak dirancang untuk IE, atau UC, atau Opera Mini, tingkat dukungan ini berarti bahwa hampir 100% audiens target Anda akan dapat bekerja dengan proyek Anda tanpa masalah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Benar, dukungan browser untuk modul hanyalah permulaan. </font><font style="vertical-align: inherit;">Di sini saya ingin menemukan jawaban untuk tiga pertanyaan yang muncul pada awal perjalanan saya menuju modul:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apakah penggunaan modul di browser memiliki keunggulan?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana dengan kontra?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya yakin saya memiliki pertanyaan ketiga, tetapi sekarang saya tidak dapat mengingatnya.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita cari tahu ...</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa kelebihan menggunakan modul di browser?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah JavaScript murni! </font><font style="vertical-align: inherit;">Tidak ada pipa proyek perakitan, tidak ada file konfigurasi Webpack 400-baris, tidak ada Babel, tidak ada plugins dan preset, dan tidak ada modul tambahan 45 npm. </font><font style="vertical-align: inherit;">Hanya Anda dan kode Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada sesuatu yang menyegarkan tentang penulisan kode yang akan dieksekusi di browser persis dalam bentuk di mana kode itu dibuat. </font><font style="vertical-align: inherit;">Ini mungkin memerlukan sedikit usaha, tetapi hasilnya sangat menyenangkan. </font><font style="vertical-align: inherit;">Ini adalah cara mengendarai mobil dengan transmisi manual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Begitu. </font><font style="vertical-align: inherit;">Kelebihan modul ES6 adalah JavaScript murni, ini adalah kurangnya perakitan, konfigurasi proyek, ini adalah penolakan terhadap dependensi yang telah menjadi tidak perlu. </font><font style="vertical-align: inherit;">Apa lagi? </font><font style="vertical-align: inherit;">Apakah ada hal lain? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak, tidak lebih.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa kerugian menggunakan modul di browser?</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Perbandingan modul dan bundler</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika berpikir apakah akan menggunakan modul ES6 di browser, Anda sebenarnya harus memilih antara menggunakan modul dan bundler seperti Webpack, Parcel, atau Rollup. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat (mungkin) menggunakan keduanya, tetapi pada kenyataannya, jika Anda berencana untuk menjalankan kode melalui bundler, tidak ada alasan untuk menggunakan desain </font></font><code>&lt;script type="module"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk memuat file bundel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, berdasarkan asumsi bahwa seseorang sedang mempertimbangkan kemungkinan menggunakan modul ES6 alih-alih bundler, inilah yang harus ia hilangkan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minifikasi kode yang sudah jadi.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fitur JavaScript mutakhir.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sintaks yang berbeda dari sintaks JavaScript (Bereaksi, TypeScript, dll.).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modul NPM.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caching</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertimbangkan tiga paragraf pertama dari daftar ini secara lebih rinci.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Ukuran File</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ukuran proyek saya, yang menggunakan modul, adalah 34 Kb. Karena saya tidak menggunakan langkah build proyek, kode yang dikirimkan melalui jaringan berisi nama variabel yang sangat panjang, ada banyak sekali komentar di dalamnya. Selain itu, ini mewakili sejumlah besar file kecil, yang tidak terlalu baik dalam hal kompresi data. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika saya memasukkan semua ini ke dalam bundel menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parcel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , maka ukuran apa yang akan </font><font style="vertical-align: inherit;">berubah </font><font style="vertical-align: inherit;">menjadi 18 Kb. Kalkulator Santai Casio saya melaporkan bahwa ini adalah "sekitar setengah" kode proyek di mana bundler tidak digunakan. Ini sebagian karena fakta bahwa Parcel meminimalkan file, tetapi juga karena bahan dengan pendekatan ini lebih baik dikompresi menggunakan gzip.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kompresi data menarik perhatian kita ke masalah lain: cara mengatur file (dalam arti kenyamanan pengembangan) langsung ditransfer ke cara file ditransfer melalui jaringan. Dan cara file diatur selama pengembangan tidak selalu sesuai dengan bagaimana Anda ingin melihatnya di situs. Misalnya, 150 modul (file) mungkin masuk akal saat mengerjakan proyek. Dan materi yang sama yang ditransfer ke browser dapat dibenarkan untuk diatur dalam 12 bundel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya akan menjelaskan ide ini. Saya tidak berbicara tentang fakta bahwa menggunakan modul berarti bahwa file tidak dapat dibundel dan diperkecil (fakta bahwa ini tidak dapat dilakukan adalah ilusi). Maksud saya, tidak masuk akal untuk melakukan keduanya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya, ini pengamatan yang lucu. </font><font style="vertical-align: inherit;">Dalam aplikasi saya, sampai saya menulis bagian ini, modul digunakan (saya tekankan!). </font><font style="vertical-align: inherit;">Saya memasang Parcel untuk menghitung ukuran perakitan yang benar. </font><font style="vertical-align: inherit;">Dan sekarang saya tidak melihat alasan untuk kembali ke modul normal. </font><font style="vertical-align: inherit;">Nah, apakah itu tidak menarik!</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Hidup tanpa transpilasi</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selama bertahun-tahun, saya sangat terbiasa menggunakan konstruksi sintaksis JavaScript terbaru, dan alat Babel yang luar biasa, yang mengubahnya menjadi kode yang dipahami semua browser. Saya sangat terbiasa sehingga saya jarang berpikir tentang dukungan browser (tentu saja, dengan pengecualian DOM dan CSS). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika saya pertama kali mencoba </font></font><code>type=«module»</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, saya akan melakukan semuanya sendiri. Tujuan saya adalah browser baru, jadi saya pikir saya bisa menggunakan JavaScript modern, yang sudah biasa saya gunakan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi kenyataannya tidak begitu cerah. Cobalah untuk menjawab pertanyaan-pertanyaan berikut dengan cepat dan tanpa melihat ke mana-mana. Apakah Edge Mendukung</font></font><code>flatMap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? Apakah Safari mendukung penugasan destruktif (objek dan array)? Apakah Chrome mendukung koma setelah argumen fungsi terakhir? Apakah Firefox mendukung eksponensial? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai contoh, saya harus mencari jawaban untuk pertanyaan-pertanyaan ini, melakukan tes lintas browser. Tapi saya menggunakan semua ini selama berabad-abad. Dalam setiap aplikasi yang cukup besar, ini kemungkinan besar akan menyebabkan kesalahan produksi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini juga berarti bahwa saya tidak akan dapat menggunakan inovasi JavaScript yang paling luar biasa sejak munculnya metode array </font></font><code>slice()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- yang disebut </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operator urutan opsional</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Saya menggunakan desain ajaib seperti</font></font><code>prop?.value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hanya sekitar satu bulan (sejak saat itu alat Create React App mulai mendukung mereka tanpa pengaturan tambahan). </font><font style="vertical-align: inherit;">Tetapi sudah tidak nyaman bagi saya untuk bekerja tanpa mereka.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Beban caching</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Caching bagi saya adalah batu sandungan terbesar. Faktanya, fakta bahwa solusi untuk masalah caching ternyata cukup menarik ternyata menjadi alasan utama mengapa saya memutuskan untuk menulis materi ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang Anda yakin, Anda tahu, ketika bahan diproses menggunakan bundler, masing-masing file yang dihasilkan mendapat nama unik - semacam </font></font><code>index.38fd9e.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Isi file dengan nama ini tidak pernah (tidak pernah) berubah. Oleh karena itu, dapat di-cache oleh browser untuk periode yang tidak terbatas. Jika file seperti itu diunduh satu kali, Anda tidak perlu mengunduhnya lagi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah sistem yang luar biasa - kecuali Anda mencoba menemukan jawaban untuk pertanyaan bagaimana menghapus cache. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modul dimuat menggunakan desain seperti</font></font><code>&lt;script type="module" src="index.mjs"&gt;&lt;/script&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Hash dalam nama file tidak digunakan. </font><font style="vertical-align: inherit;">Bagaimana, dalam situasi ini, ia seharusnya memberi tahu browser tentang tempat untuk mengunduhnya </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- dari cache atau dari jaringan? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perlu dicatat bahwa hampir memungkinkan untuk membuat cache berfungsi, tetapi itu akan membutuhkan usaha. </font><font style="vertical-align: inherit;">Inilah yang Anda butuhkan untuk ini:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda harus mengatur judul semua jawaban </font></font><code>cache-control</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke suatu nilai </font></font><code>no-cache</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Hebatnya, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tanpa-cache</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak berarti "jangan cache." </font><font style="vertical-align: inherit;">Ini berarti bahwa file tersebut harus di-cache, tetapi file tersebut tidak boleh "digunakan untuk memenuhi permintaan berikutnya tanpa verifikasi yang berhasil pada server sumber."</font></font></li>
<li>    ETag.    —  ()   , ,   ,    .  , <code>38fd9e</code>      .</li>
<li>   CDN-  ,   .     ETag       .     .   CDN-   .       (     ETag)      . (, ,     Firebase).</li>
<li>  -,    ,  «  »  .        ,     ,  ,  ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, ketika pengunjung mengunjungi kembali situs tersebut, browser akan mengatakan: “Saya perlu mengunduh file </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Saya melihat file ini sudah ada di cache saya, ETag-nya </font></font><code>38fd9e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Saya akan meminta file ini dari server, tetapi saya akan memberitahunya untuk mengirimkannya kepada saya hanya jika ETagnya tidak </font></font><code>38fd9e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. " Pekerja layanan akan mencegat permintaan ini, mengabaikan ETag dan mengembalikannya </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dari cache (file ini masuk ke cache ketika halaman dimuat terakhir kali). Kemudian pekerja layanan akan mengarahkan permintaan ke server. Server akan mengembalikan pesan yang menyatakan bahwa file tidak berubah, atau file yang akan disimpan dalam cache. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menurut saya, semua ini sangat merepotkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang, jika Anda tertarik, kode pekerja layanan:</font></font><br>
<br>
<pre><code class="javascript hljs">self.addEventListener(<span class="hljs-string">'fetch'</span>, e =&gt; {<font></font>
&nbsp;&nbsp;e.respondWith(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">async</span> (</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//       </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> cacheResponse = <span class="hljs-keyword">await</span> caches.match(e.request);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//   (),   </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">// (ETag-    )</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fetch(e.request).then(<span class="hljs-function"><span class="hljs-params">fetchResponse</span> =&gt;</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;caches<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.open(CACHE_NAME)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> cache.put(e.request, fetchResponse));<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> (cacheResponse) <span class="hljs-keyword">return</span> cacheResponse;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> fetch(e.request);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;})()<font></font>
&nbsp;&nbsp;);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya malas, jadi saya tidak belajar dan tidak menggunakan properti </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FetchEvent.navigationPreload</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terbaru </font><font style="vertical-align: inherit;">. Faktanya adalah bahwa pada saat itu saya menghabiskan lebih banyak waktu caching daripada menulis aplikasi (untuk informasi Anda, saya menghabiskan 10 dan 11 jam untuk masalah ini, masing-masing). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya, saya ingin mencatat bahwa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proposal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "kartu impor" ditujukan untuk menyelesaikan beberapa masalah yang dijelaskan di atas. Ini memungkinkan Anda untuk mengatur sesuatu seperti pemetaan </font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di </font></font><code>index.38fd9e.mj</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s. Tetapi untuk menghasilkan hash, bagaimanapun, Anda memerlukan semacam pipa perakitan, kartu impor harus tertanam dalam file HTML. Ini artinya diperlukan bundler di sini ... Sebenarnya, dalam situasi ini, modul tidak lagi diperlukan di browser.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alhasil, meskipun menarik untuk memahami semua ini, itu bisa dibandingkan dengan cara saya mengendarai kemana-mana dengan satu siklus selama satu tahun penuh. </font><font style="vertical-align: inherit;">Saya tidak akan melakukan ini lagi.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapi mungkin tidak semua orang menggunakan bundler?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menulis bahan ini dengan asumsi bahwa semua orang menulis kode dalam modul, menggunakan konstruksi </font></font><code>import/export</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau </font></font><code>require</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan kemudian mengumpulkan kode ke dalam bundel produksi menggunakan Webpack, Grunt, Gulp atau sesuatu seperti itu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apakah ada pengembang yang tidak menggunakan bundler? </font><font style="vertical-align: inherit;">Adakah orang yang menempatkan kode JavaScript mereka di beberapa file dan mengirimkannya ke produksi tanpa bundling? </font><font style="vertical-align: inherit;">Mungkin salah satu dari orang-orang ini adalah Anda? </font><font style="vertical-align: inherit;">Jika demikian, saya ingin tahu semua tentang kehidupan Anda.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ringkasan</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya berusaha keras untuk membuat semua keputusan serius, seperti memilih antara modul dan bundler, berdasarkan prinsip utama pengembangan yang efektif. Ini adalah produktivitas dan kualitas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sayangnya, penggunaan modul di browser tidak berkontribusi pada satu atau yang lain. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika besok saya mulai mengerjakan proyek baru, maka di kepala saya, saya tidak akan memiliki pertanyaan tentang apakah menjalankan aplikasi buat-reaksi lama yang baik. Semua pengaturan awal akan memakan waktu sekitar tiga puluh detik, dan meskipun ukuran proyek awal 40 Kb agak besar, untuk sebagian besar situs ini tidak akan memainkan peran apa pun.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan inilah situasi yang berbeda. Misalkan saya perlu mengumpulkan sedikit HTML / CSS dan JavaScript untuk beberapa jenis eksperimen, dan eksperimen semacam itu akan menjadi proyek yang menyertakan lebih banyak file daripada beberapa. Jika, saat mengerjakan proyek ini, saya tidak berencana untuk menghabiskan waktu menyiapkan sistem untuk membangunnya, maka saya mungkin akan menggunakan modul-modul di browser. Dan kemudian - jika saya tidak peduli dengan kinerja proyek ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya akan tertarik untuk mengetahui bagaimana Webpack dan alat terkait bekerja dengan modul ES6 di browser. Saya percaya bahwa di masa depan, ketika proposal untuk "kartu impor" menerima dukungan yang cukup, bundler mungkin akan menggunakannya sebagai mekanisme untuk abstrak hash yang tidak sedap dipandang yang digunakan saat ini.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pembaca yang budiman! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sudahkah Anda menggunakan modul ES6 di browser Anda?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id492500/index.html">Garasi Sains dalam bahasa Rusia. Pengalaman menerjemahkan pertunjukan Amerika</a></li>
<li><a href="../id492502/index.html">MIP * = RE: bukti pembuatan zaman dari bidang ilmu komputer yang menyebabkan efek domino dalam fisika dan matematika</a></li>
<li><a href="../id492504/index.html">Apa yang terjadi ketika modul JS diimpor dua kali?</a></li>
<li><a href="../id492506/index.html">3 cara membuat daftar besar di Angular</a></li>
<li><a href="../id492508/index.html">Pesan Kubernetes untuk DevOps</a></li>
<li><a href="../id492512/index.html">CSS: petualangan di tanah tembus cahaya</a></li>
<li><a href="../id492514/index.html">Bagaimana cara membangun aliran dokumen rekanan elektronik yang signifikan secara hukum di Rusia dan Kazakhstan?</a></li>
<li><a href="../id492518/index.html">Wabah virus membutuhkan kerja jarak jauh, yang berarti penandatanganan dokumen secara digital</a></li>
<li><a href="../id492520/index.html">Pemodelan 3D yang disesuaikan dari cawan bantalan di nanoCAD Plus 20</a></li>
<li><a href="../id492522/index.html">Komunikasi Tim Jarak Jauh</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>