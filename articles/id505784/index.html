<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛈️ 👨🏻‍✈️ 🤛🏿 Bagaimana dan mengapa opsi noatime meningkatkan kinerja sistem Linux 🈂️ 🤱🏻 🎺</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Memperbarui atime mempengaruhi kinerja sistem. Apa yang terjadi di sana dan apa yang harus dilakukan - baca artikelnya.
 
 
 Setiap kali saya memperba...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Bagaimana dan mengapa opsi noatime meningkatkan kinerja sistem Linux</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vdsina/blog/505784/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memperbarui atime mempengaruhi kinerja sistem. </font><font style="vertical-align: inherit;">Apa yang terjadi di sana dan apa yang harus dilakukan - baca artikelnya.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ul/95/o-/ul95o-nvhv-_qxazmshaml17zwq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setiap kali saya memperbarui Linux di komputer rumah saya, saya harus menyelesaikan masalah tertentu. Selama bertahun-tahun, ini telah menjadi kebiasaan: Saya membuat salinan cadangan file saya, menghapus sistem, menginstal semuanya dari awal, mengembalikan file saya, kemudian menginstal ulang aplikasi favorit saya. Saya juga mengubah pengaturan sistem untuk diri saya sendiri. Terkadang butuh terlalu banyak waktu. Dan baru-baru ini, saya bertanya-tanya apakah saya perlu sakit kepala ini.</font></font><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atime</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah salah satu dari tiga cap waktu untuk file di Linux (lebih lanjut tentang ini nanti). </font><font style="vertical-align: inherit;">Secara khusus, saya bertanya-tanya apakah masih ada gunanya untuk menonaktifkan atime pada sistem Linux nanti. </font><font style="vertical-align: inherit;">Karena atime diperbarui setiap kali file diakses, saya menyadari bahwa itu memiliki dampak signifikan pada kinerja sistem. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya baru-baru ini ditingkatkan ke Fedora 32 dan karena kebiasaan mulai dengan menonaktifkan atime. </font><font style="vertical-align: inherit;">Saya berpikir: apakah saya benar-benar membutuhkannya? </font><font style="vertical-align: inherit;">Saya memutuskan untuk mempelajari masalah ini dan itulah yang saya gali.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sedikit tentang cap waktu file</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memahami, Anda perlu mengambil langkah mundur dan mengingat beberapa hal tentang sistem file Linux dan bagaimana kernel menetapkan cap waktu untuk file dan direktori. </font><font style="vertical-align: inherit;">Anda dapat melihat tanggal perubahan file dan direktori terakhir dengan menjalankan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perintah ls-l (long)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> atau hanya dengan melihat informasi tentang hal itu di manajer file. </font><font style="vertical-align: inherit;">Tetapi di balik layar, kernel Linux melacak beberapa cap waktu untuk file dan direktori:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kapan terakhir kali file diubah (mtime)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kapan terakhir kali properti dan file metadata diubah (ctime)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kapan terakhir kali file diakses (atime)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda dapat menggunakan perintah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk melihat informasi file atau direktori. </font><font style="vertical-align: inherit;">Ini file </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / fstab</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari salah satu server pengujian saya:</font></font></li>
</ol><br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">stat</span> fstab<font></font>
  File: fstab<font></font>
  Size: 261             Blocks: 8          IO Block: 4096   regular file<font></font>
Device: b303h/45827d    Inode: 2097285     Links: 1<font></font>
Access: (0664/-rw-rw-r--)  Uid: (    0/    root)   Gid: (    0/    root)<font></font>
Context: system_u:object_r:etc_t:s0<font></font>
Access: 2019-04-25 21:10:18.083325111 -0500<font></font>
Modify: 2019-05-16 10:46:47.427686706 -0500<font></font>
Change: 2019-05-16 10:46:47.434686674 -0500<font></font>
 Birth: 2019-04-25 21:03:11.840496275 -0500</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini Anda dapat melihat bahwa file ini dibuat pada 25 April 2019, ketika saya menginstal sistem. </font><font style="vertical-align: inherit;">Saya </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / fstab</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terakhir diubah pada tanggal 16 Mei 2019 dan semua atribut lainnya yang berubah pada waktu yang sama. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika saya menyalin </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / fstab</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke file baru, tanggalnya berubah, yang menunjukkan bahwa ini adalah file baru:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo cp fstab fstab.bak<font></font>
$ <span class="hljs-built_in">stat</span> fstab.bak<font></font>
  File: fstab.bak<font></font>
  Size: 261             Blocks: 8          IO Block: 4096   regular file<font></font>
Device: b303h/45827d    Inode: 2105664     Links: 1<font></font>
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)<font></font>
Context: unconfined_u:object_r:etc_t:s0<font></font>
Access: 2020-05-12 17:53:58.442659986 -0500<font></font>
Modify: 2020-05-12 17:53:58.443659981 -0500<font></font>
Change: 2020-05-12 17:53:58.443659981 -0500<font></font>
 Birth: 2020-05-12 17:53:58.442659986 -0500</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi jika saya hanya mengganti nama file tanpa mengubah isinya, Linux hanya akan memperbarui waktu modifikasi file:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo mv fstab.bak fstab.tmp<font></font>
$ <span class="hljs-built_in">stat</span> fstab.tmp<font></font>
  File: fstab.tmp<font></font>
  Size: 261             Blocks: 8          IO Block: 4096   regular file<font></font>
Device: b303h/45827d    Inode: 2105664     Links: 1<font></font>
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)<font></font>
Context: unconfined_u:object_r:etc_t:s0<font></font>
Access: 2020-05-12 17:53:58.442659986 -0500<font></font>
Modify: 2020-05-12 17:53:58.443659981 -0500<font></font>
Change: 2020-05-12 17:54:24.576508232 -0500<font></font>
 Birth: 2020-05-12 17:53:58.442659986 -0500</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stempel waktu ini sangat berguna untuk program Unix tertentu. Misalnya, biff adalah program yang memberi tahu Anda tentang pesan baru dalam surel. Sekarang hanya sedikit orang yang menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biff</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi pada masa itu ketika kotak surat bersifat lokal bagi sistem, biff cukup tersebar luas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana program mengetahui jika Anda memiliki surat baru di kotak masuk Anda? biff membandingkan waktu terakhir yang dimodifikasi (ketika kotak masuk diperbarui dengan email baru) dan waktu akses terakhir (terakhir kali Anda membaca email Anda). Jika perubahan terjadi lebih lambat dari akses, maka biff akan memahami bahwa surat baru telah tiba dan akan memberi tahu Anda mengenai hal ini. Klien email Mutt bekerja dengan cara yang hampir sama.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stempel waktu akses terakhir juga berguna jika Anda perlu mengumpulkan statistik tentang penggunaan sistem file dan kinerja tune. Administrator sistem perlu mengetahui objek mana yang sedang diakses untuk mengkonfigurasi sistem file dengan benar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi sebagian besar program modern tidak lagi membutuhkan label ini, jadi ada proposal untuk tidak menggunakannya. Pada 2007, Linus Torvalds dan beberapa pengembang kernel lain mendiskusikan atime dalam konteks masalah kinerja. Pengembang kernel Linux Ingo Molnar membuat komentar berikut tentang atime dan sistem file ext3:</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“Agak aneh bahwa setiap desktop dan server Linux menderita penurunan nyata dalam kinerja I / O karena pembaruan konstan dari atime, meskipun hanya ada dua pengguna nyata: tmpwatch [yang dapat dikonfigurasi untuk menggunakan waktu, jadi ini bukan masalah besar] dan beberapa alat cadangan. " </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi orang masih menggunakan beberapa program yang membutuhkan label ini. </font><font style="vertical-align: inherit;">Jadi menghapus atime akan mengganggu pekerjaan mereka. </font><font style="vertical-align: inherit;">Pengembang kernel Linux tidak boleh melanggar kebebasan pengguna.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keputusan Salomo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Distribusi Linux mencakup banyak aplikasi, dan pengguna juga dapat mengunduh dan menginstal program lain sesuai dengan kebutuhan mereka. Ini adalah keuntungan utama dari OS open source. Tetapi ini membuatnya sulit untuk mengoptimalkan kinerja sistem file Anda. Menghapus komponen intensif sumber daya dapat mengganggu sistem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai kompromi, pengembang kernel Linux telah memperkenalkan opsi relaytime baru, yang bertujuan untuk mencapai keseimbangan antara kinerja dan kompatibilitas:</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atime diperbarui hanya jika waktu akses sebelumnya kurang dari waktu saat ini untuk memodifikasi atau mengubah status ... Dimulai dengan Linux 2.6.30, kernel menggunakan opsi ini secara default (jika noatime tidak ditentukan) ... Selain itu, dimulai dengan Linux 2.6 .30, waktu file terakhir diakses selalu diperbarui jika lebih dari 1 hari. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sistem Linux modern (dimulai dengan Linux 2.6.30, dirilis pada 2009) sudah menggunakan relaytime, yang seharusnya memberikan peningkatan kinerja yang sangat besar. </font><font style="vertical-align: inherit;">Ini berarti bahwa Anda tidak perlu mengkonfigurasi file </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / fstab</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan dengan relaytime Anda dapat mengandalkan nilai default.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meningkatkan kinerja sistem dengan noatime</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi jika Anda ingin menyetel sistem Anda untuk mendapatkan kinerja maksimal, menonaktifkan atime masih dimungkinkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perubahan kinerja mungkin tidak terlalu terlihat pada drive modern yang sangat cepat (seperti NVME atau Fast SSD), tetapi ada sedikit peningkatan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda tahu bahwa Anda tidak menggunakan perangkat lunak yang memerlukan atime, Anda dapat sedikit meningkatkan kinerja dengan memasukkan opsi noatime di file </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / fstab</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Setelah itu, kernel tidak akan memperbarui atime secara konstan. </font><font style="vertical-align: inherit;">Gunakan opsi noatime saat memasang sistem file:</font></font><br>
<br>
<pre><code class="bash hljs">/dev/mapper/fedora_localhost--live-root /          ext4   defaults,noatime,x-systemd.device-timeout=0 1 1<font></font>
UUID=be37c451-915e-4355-95c4-654729cf662a /boot    ext4   defaults,noatime        1 2<font></font>
UUID=C594-12B1                          /boot/efi  vfat   <span class="hljs-built_in">umask</span>=0077,shortname=winnt 0 2<font></font>
/dev/mapper/fedora_localhost--live-home /home      ext4   defaults,noatime,x-systemd.device-timeout=0 1 2<font></font>
/dev/mapper/fedora_localhost--live-swap none       swap   defaults,x-systemd.device-timeout=0 0 0</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perubahan akan berlaku pada saat Anda reboot.</font></font><br>
<br>
<hr><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagai iklan</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perlu server untuk meng-host situs? </font><font style="vertical-align: inherit;">Perusahaan kami menawarkan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">server yang andal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan pembayaran harian atau satu kali, setiap server terhubung ke saluran Internet 500 Megabits dan bebas dari serangan DDoS!</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/9fa/cf4/a34/9facf4a348ef01048b4eb5e16ae66daa.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id505764/index.html">Wawancara Robot</a></li>
<li><a href="../id505766/index.html">Memantau data saat istirahat dengan sistem DCAP</a></li>
<li><a href="../id505772/index.html">Acara digital di Moskow dari 8 hingga 14 Juni</a></li>
<li><a href="../id505778/index.html">HCI: solusi turnkey untuk membangun infrastruktur TI perusahaan yang fleksibel</a></li>
<li><a href="../id505780/index.html">Cara membuat generator kutipan dalam satu jam</a></li>
<li><a href="../id505786/index.html">5 teknik seni klasik untuk membuat presentasi yang baik</a></li>
<li><a href="../id505788/index.html">Hari Demo Go Ozon</a></li>
<li><a href="../id505796/index.html">CO2, Sp02 dan COVID-19: mengapa Anda perlu ventilasi lebih sering (beberapa pengukuran)</a></li>
<li><a href="../id505798/index.html">PHP 25 tahun: sejarah singkat bahasa dan diskon 50% di PhpStorm</a></li>
<li><a href="../id505802/index.html">Hosting dan server khusus: jawab pertanyaan. Bagian 4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>