<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✊🏽 👌 🧑🏿‍🤝‍🧑🏿 Erfahrung in der Verwendung der Rutoken-Technologie zur Registrierung und Autorisierung von Benutzern im System (Teil 3) 🚴🏾 🍾 ✊🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Guten Tag! 
 
 Im vorherigen Teil haben wir unser Zertifizierungszentrum erfolgreich eingerichtet. Wie kann es für unsere Zwecke nützlich sein? 
 
 Mi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Erfahrung in der Verwendung der Rutoken-Technologie zur Registrierung und Autorisierung von Benutzern im System (Teil 3)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/507166/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guten Tag! </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im vorherigen Teil haben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wir unser Zertifizierungszentrum erfolgreich eingerichtet. </font><font style="vertical-align: inherit;">Wie kann es für unsere Zwecke nützlich sein? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit Hilfe eines lokalen Zertifizierungszentrums können wir Zertifikate ausstellen und die Signatur dieser Zertifikate überprüfen.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Ausstellung eines Zertifikats an einen Benutzer verwendet die Zertifizierungsstelle eine spezielle Anforderung zum Ausstellen eines Pkcs # 10-Zertifikats mit dem Dateiformat ".csr". Diese Anforderung enthält eine codierte Sequenz, die die Zertifizierungsstelle korrekt analysieren kann. Die Anforderung enthält sowohl den öffentlichen Schlüssel des Benutzers als auch die Daten zum Erstellen des Zertifikats (assoziatives Array mit Benutzerdaten). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie eine Anforderung für ein Zertifikat erhalten, werden wir im nächsten Artikel betrachten. In diesem Artikel möchte ich die Hauptbefehle des Zertifizierungszentrums angeben, die uns bei der Erfüllung unserer Aufgabe auf der Backend-Seite helfen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst müssen wir ein Zertifikat erstellen. Verwenden Sie dazu den folgenden Befehl:</font></font><br>
<br>
<pre><code class="plaintext hljs">openssl ca -batch -in user.csr -out user.crt</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ca - openSSL-Befehl, der sich auf das Zertifizierungscenter bezieht, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-batch - bricht Bestätigungsanforderungen beim Generieren eines Zertifikats ab. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
user.csr - Anforderung zum Erstellen eines Zertifikats (Datei im CSR-Format). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
user.crt - Zertifikat (das Ergebnis des Befehls). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit dieser Befehl funktioniert, muss das Zertifizierungscenter genau wie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im vorherigen Teil des Artikels</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> beschrieben konfiguriert werden </font><font style="vertical-align: inherit;">. Andernfalls müssen Sie zusätzlich den Speicherort des Stammzertifikats der Zertifizierungsstelle angeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Befehl zur Überprüfung des Zertifikats:</font></font><br>
<br>
<pre><code class="plaintext hljs">openssl cms -verify -in authenticate.cms -inform PEM -CAfile /Users/……/demoCA/ca.crt -out data.file</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cms ist ein openSSL-Befehl, mit dem Daten und andere kryptografische Vorgänge mit openSSL signiert, überprüft, verschlüsselt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-verify - In diesem Fall überprüfen wir das Zertifikat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
authenticate.cms - Eine Datei, die die signierten Daten mit einem Zertifikat enthält, das vom vorherigen Befehl ausgestellt wurde. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-inform PEM - verwendet das PEM-Format. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-CAfile /Users/DP/demoCA/ca.crt - Pfad zum Stammzertifikat. </font><font style="vertical-align: inherit;">(Ohne dies hat der Befehl bei mir nicht funktioniert, obwohl die Pfade zu ca.crt in der Datei </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
openssl.cfg </font><font style="vertical-align: inherit;">geschrieben sind.) </font><font style="vertical-align: inherit;">-out data.file - Ich sende die entschlüsselten Daten an die Datei data.file. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Algorithmus zum Anwenden des Zertifizierungscenters auf der Backend-Seite lautet wie folgt:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benutzer Registration: </font></font><br>
 <ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir erhalten eine Anfrage, ein Zertifikat zu erstellen und es in der Datei user.csr zu speichern.</font></font><br>
 </li>
<li>        .bat  .cmd.     ,         user.csr.     user.crt.<br>
 </li>
<li>  user.crt     . <br>
 </li>
</ol><br>
 </li>
<li> : <br>
<ol>
<li>          authenticate.cms. </li>
<li>        .bat  .cmd.     ,        authenticate.cms.      data.file.</li>
<li> data.file      .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a>.   ,     .</li>
</ol></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um diese Algorithmen zu implementieren, können Sie jede Programmiersprache verwenden, die zum Schreiben des Backends verwendet wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im nächsten Artikel werden wir uns mit der Arbeit mit dem Retoken-Plugin befassen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielen Dank für Ihre Aufmerksamkeit!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de507150/index.html">Wir zeichnen ein Interferenzbild in JavaScript</a></li>
<li><a href="../de507156/index.html">Tetris auf Bitboards: alte Songs auf neue Weise</a></li>
<li><a href="../de507158/index.html">Antiquitäten: Jahrzehnt des Apple iPad</a></li>
<li><a href="../de507160/index.html">Über die "realistischste" "Interpretation" der Quantenmechanik</a></li>
<li><a href="../de507162/index.html">Game Code Command & Conquer: Bugs aus den 90ern. Band Eins</a></li>
<li><a href="../de507170/index.html">Sehen sich vierzehn Personen dieses Produkt mit Sicherheit an?</a></li>
<li><a href="../de507172/index.html">Was sie an der Fakultät für Niedertemperaturenergie der ITMO-Universität tun</a></li>
<li><a href="../de507174/index.html">Benötigen die Streitkräfte Russlands und andere Strukturen des Verteidigungsministeriums der Russischen Föderation einen Standard zur Beschreibung von Algorithmen?</a></li>
<li><a href="../de507176/index.html">MMS-System im Rechenzentrum: Wie wir das Wartungsmanagement automatisiert haben</a></li>
<li><a href="../de507178/index.html">Event2Mind für die russische Sprache. Wie wir dem Modell beigebracht haben, zwischen den Zeilen zu lesen und die Absichten des Gesprächspartners zu verstehen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>