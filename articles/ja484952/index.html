<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ° ğŸ‘¨ğŸ»â€âš•ï¸ ğŸ‘¨â€ğŸ”¬ Reduxã‚’Observablesã¨Reactãƒ•ãƒƒã‚¯ã§ç½®ãæ›ãˆã‚‹ ğŸ˜‰ ğŸ›°ï¸ ğŸ‘¶ğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="çŠ¶æ…‹ç®¡ç†ã¯ã€Reactã®é–‹ç™ºã§è§£æ±ºã•ã‚Œã‚‹æœ€ã‚‚é‡è¦ãªã‚¿ã‚¹ã‚¯ã®1ã¤ã§ã™ã€‚é–‹ç™ºè€…ãŒã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã®ã«å½¹ç«‹ã¤å¤šãã®ãƒ„ãƒ¼ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚æœ€ã‚‚äººæ°—ã®ã‚ã‚‹ãƒ„ãƒ¼ãƒ«ã¯ã€é–‹ç™ºè€…ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§Fluxè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«Dan AbramovãŒä½œæˆã—ãŸå°ã•ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹Reduxã§ã™ã€‚ã“ã®è¨˜...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Reduxã‚’Observablesã¨Reactãƒ•ãƒƒã‚¯ã§ç½®ãæ›ãˆã‚‹</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484952/"><p><img align="right" src="https://habrastorage.org/webt/fo/2d/t7/fo2dt7_8xrgtb3goulj7cwpxrpg.png"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çŠ¶æ…‹ç®¡ç†ã¯ã€Reactã®é–‹ç™ºã§è§£æ±ºã•ã‚Œã‚‹æœ€ã‚‚é‡è¦ãªã‚¿ã‚¹ã‚¯ã®1ã¤ã§ã™ã€‚</font><font style="vertical-align: inherit;">é–‹ç™ºè€…ãŒã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã®ã«å½¹ç«‹ã¤å¤šãã®ãƒ„ãƒ¼ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æœ€ã‚‚äººæ°—ã®ã‚ã‚‹ãƒ„ãƒ¼ãƒ«ã¯ã€é–‹ç™ºè€…ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§Fluxè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«Dan AbramovãŒä½œæˆã—ãŸå°ã•ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹Reduxã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®è¨˜äº‹ã§ã¯ã€ReduxãŒæœ¬å½“ã«å¿…è¦ã‹ã©ã†ã‹ã‚’èª¿ã¹ã€ãã‚Œã‚’Observableãƒ•ãƒƒã‚¯ã¨Reactãƒ•ãƒƒã‚¯ã«åŸºã¥ãã‚ˆã‚Šç°¡å˜ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ç½®ãæ›ãˆã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚</font></font></p><a name="habracut"></a><br>
<h1 id="zachem-nam-voobsche-nuzhen-redux"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãªãœReduxãŒå¿…è¦ãªã®ã§ã™ã‹ï¼Ÿ</font></font></h1><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduxã¯ã—ã°ã—ã°Reactã«é–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦ã„ã‚‹ãŸã‚ã€å¤šãã®é–‹ç™ºè€…ã¯ReduxãŒå¿…è¦ãªç†ç”±ã‚’è€ƒãˆãšã«ãã‚Œã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">Reactã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ãã®çŠ¶æ…‹ã‚’</font></font><code>setState()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font><font style="vertical-align: inherit;">ã¨ç°¡å˜ã«åŒæœŸã§ãã¾ã™ã€‚</font></font><code>useState()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ã—ã‹ã—ã€çŠ¶æ…‹ãŒè¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã‚ˆã£ã¦ä¸€åº¦ã«ä½¿ç”¨ã•ã‚Œå§‹ã‚ã‚‹ã¨ã™ãã«ã€ã™ã¹ã¦ãŒã‚ˆã‚Šè¤‡é›‘ã«ãªã‚Šã¾ã™ã€‚è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§å…±é€šã®çŠ¶æ…‹ã‚’å…±æœ‰ã™ã‚‹æœ€ã‚‚æ˜ç™½ãªè§£æ±ºç­–ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆçŠ¶æ…‹ï¼‰ã‚’å…±é€šã®è¦ªã«ç§»å‹•ã™ã‚‹ã“ã¨ã§ã™ã€‚ãŸã ã—ã€ã“ã®ã‚ˆã†ãªã€Œæ­£é¢ã€ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã™ãã«å•é¡Œã‚’å¼•ãèµ·ã“ã™å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆéšå±¤ã§äº’ã„ã«é›¢ã‚Œã¦ã„ã‚‹å ´åˆã€ä¸€èˆ¬çš„ãªçŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹ã«ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½•åº¦ã‚‚ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ React Contextã¯æµå‡ºã®æ•°ã‚’æ¸›ã‚‰ã™ã®ã«å½¹ç«‹ã¡ã¾ã™ãŒã€çŠ¶æ…‹ãŒåˆ¥ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨â€‹â€‹ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ãŸã³ã«æ–°ã—ã„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å®£è¨€ã™ã‚‹ã¨ã€ã‚ˆã‚Šå¤šãã®åŠ´åŠ›ãŒå¿…è¦ã«ãªã‚Šã€æœ€çµ‚çš„ã«ã‚¨ãƒ©ãƒ¼ã«ã¤ãªãŒã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redux </font></font><code>Store</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹å…¨ä½“ã‚’å«ã‚€</font><font style="vertical-align: inherit;">ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</font><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">æç¤ºã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ã“ã‚Œã‚‰ã®å•é¡Œã‚’è§£æ±º</font><font style="vertical-align: inherit;">ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">çŠ¶æ…‹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’å¿…è¦ã¨ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã¯ã€ã“ã‚Œ</font></font><code>Store</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦åŸ‹ã‚è¾¼ã¾ã‚Œã¾ã™</font></font><code>connect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã®æ©Ÿèƒ½ã«ã‚ˆã‚Šã€çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸã¨ãã«ã€ãã‚Œã«ä¾å­˜ã™ã‚‹ã™ã¹ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒç¢ºå®Ÿã«å†æç”»ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">æœ€å¾Œã«ã€çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã«ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€ãƒ¬ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼ã‚’ãƒˆãƒªã‚¬ãƒ¼ã—ã¦æ–°ã—ã„å¤‰æ›´ã•ã‚ŒãŸçŠ¶æ…‹ã‚’è¨ˆç®—ã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’é€ä¿¡ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font></p><br>
<img src="https://habrastorage.org/getpro/habr/post_images/b6f/531/9dc/b6f5319dc6eb751b9a18482cb7863f8d.gif"><br>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduxã®æ¦‚å¿µã‚’æœ€åˆã«ç†è§£ã—ãŸã¨ã</font></font></em></p><br>
<h1 id="chto-ne-tak-s-redux"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduxã®ä½•ãŒå•é¡Œã«ãªã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</font></font></h1><br>
<p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">  Redux</a>,       ,    ,   .      action,   reducer , ,  action. Redux   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> action creator</a>,      ,     .</p><br>
<p>   Redux   ,    .   ,  - ,         action.        action creator,     ,    reducers,     .     ,    middlewares, , , redux-saga,       .</p><br>
<p>, ,   TypeScript, Redux  .   action â€”   ,    .       Redux   TypeScript,               ,    .</p><br>
<img src="https://habrastorage.org/getpro/habr/post_images/b0e/9ff/261/b0e9ff26168370d91b5433ad8b1ae4fe.gif"><br>
<p><em>       Redux</em></p><br>
<h1 id="observable-i-hook-prostoy-podhod-k-upravleniyu-sostoyaniem">Observable  hook:     .</h1><br>
<h3 id="zamenyaem-store-c-pomoschyu-observable"> Store c  Observable</h3><br>
<p>        ,              .   ,    <code>Observable</code>,             .     ,   ,    <code>Observable</code>.</p><br>
<p> TypeScript     :</p><br>
<pre><code class="javascript hljs">type Listener&lt;T&gt; = <span class="hljs-function">(<span class="hljs-params">val: T</span>) =&gt;</span> <span class="hljs-keyword">void</span>;<font></font>
type Unsubscriber = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">void</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Observable</span>&lt;<span class="hljs-title">T</span>&gt; </span>{<font></font>
    private _listeners: Listener&lt;T&gt;[];<font></font>
<font></font>
    <span class="hljs-keyword">constructor</span>(private _val: T) {}<font></font>
<font></font>
    get(): T {<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._val;<font></font>
    }<font></font>
<font></font>
    set(val: T) {<font></font>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._val !== val) {
            <span class="hljs-keyword">this</span>._val = val;
            <span class="hljs-keyword">this</span>._listeners.forEach(<span class="hljs-function"><span class="hljs-params">l</span> =&gt;</span> l(val));<font></font>
        }<font></font>
    }<font></font>
<font></font>
    subscribe(listener: Listener&lt;T&gt;): Unsubscriber {<font></font>
        <span class="hljs-keyword">this</span>._listeners.push(listener);
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-keyword">this</span>._listeners = <span class="hljs-keyword">this</span>._listeners.filter(<span class="hljs-function"><span class="hljs-params">l</span> =&gt;</span> l !== listener);<font></font>
        };<font></font>
    }<font></font>
}</code></pre><br>
<p>    c Redux <code>Store</code>,  ,    : <code>get()</code>  <code>getState()</code>,  <code>subscribe()</code> â€”   .      <code>dispatch()</code>,       <code>set()</code>,           reducer.      , ,   Redux,     <code>Observable</code>   <code>Store</code>,   .</p><br>
<h3 id="zamenyaem-reducer-servisami"> reducer </h3><br>
<p> <code>Observable</code>      ,       ,   reducer.      .  â€”  ,    -  .    reducer <code>Todo</code>   Redux   <code>Todo</code>,  <code>Observable</code>:</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { Observable } <span class="hljs-keyword">from</span> <span class="hljs-string">"./observable"</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> interface Todo {<font></font>
    readonly text: string;<font></font>
    readonly completed: boolean;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> enum VisibilityFilter {<font></font>
    SHOW_ALL,<font></font>
    SHOW_COMPLETED,<font></font>
    SHOW_ACTIVE,<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoService</span> </span>{<font></font>
    readonly todos = <span class="hljs-keyword">new</span> Observable&lt;Todo[]&gt;([]);<font></font>
    readonly visibilityFilter = <span class="hljs-keyword">new</span> Observable(VisibilityFilter.SHOW_ALL);<font></font>
<font></font>
    addTodo(text: string) {<font></font>
        <span class="hljs-keyword">this</span>.todos.set([...this.todos.get(), { text, <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span> }]);<font></font>
    }<font></font>
<font></font>
    toggleTodo(index: number) {<font></font>
        <span class="hljs-keyword">this</span>.todos.set(<span class="hljs-keyword">this</span>.todos.get().map(
            <span class="hljs-function">(<span class="hljs-params">todo, i</span>) =&gt;</span> (i === index ? { <span class="hljs-attr">text</span>: todo.text, <span class="hljs-attr">completed</span>: !todo.completed } : todo)<font></font>
        ));<font></font>
    }<font></font>
<font></font>
    setVisibilityFilter(filter: VisibilityFilter) {<font></font>
        <span class="hljs-keyword">this</span>.visibilityFilter.set(filter);<font></font>
    }<font></font>
}</code></pre><br>
<p>   reducer <code>Todo</code>,     :</p><br>
<ul>
<li>Action   ,     action type,  action  action creator.</li>
<li>     switch    action type.   Javascript (   )    .</li>
<li>   ,     ,   .      reducers,    .</li>
</ul><br>
<h2 id="dostup-k-servisam-i-observable-iz-komponentov">    Observable  </h2><br>
<p>,    Â«store  reducer  ReduxÂ»  Â«Observable  Â»,         React.     :     IoC , , Inversify;   React     ,    <code>Store</code> Redux, â€“      .       :</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { TodoService } <span class="hljs-keyword">from</span> <span class="hljs-string">"./todoService"</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> todoService = <span class="hljs-keyword">new</span> TodoService();</code></pre><br>
<p>               React,   <code>todoService</code>.          ,      .   ,    hook,      ,   <code>Observable</code>    ,   <code>Observable</code> :</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { Observable } <span class="hljs-keyword">from</span> <span class="hljs-string">"./observable"</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useObservable</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">observable: Observable&lt;T&gt;</span>): <span class="hljs-title">T</span> </span>{
    <span class="hljs-keyword">const</span> [val, setVal] = useState(observable.get());<font></font>
<font></font>
    useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
        setVal(observable.get()); <span class="hljs-comment">//   @mayorovp</span>
        <span class="hljs-keyword">return</span> observable.subscribe(setVal);<font></font>
    }, [observable]);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> val;<font></font>
}</code></pre><br>
<h1 id="sobiraem-vse-vmeste">  </h1><br>
<p>  .    <code>Observable</code>         <code>useObservable</code>,  ,        .</p><br>
<p>   TodoList   Redux,   hook:</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { useObservable } <span class="hljs-keyword">from</span> <span class="hljs-string">"./observableHook"</span>;
<span class="hljs-keyword">import</span> { todoService } <span class="hljs-keyword">from</span> <span class="hljs-string">"./services"</span>;
<span class="hljs-keyword">import</span> { Todo, VisibilityFilter } <span class="hljs-keyword">from</span> <span class="hljs-string">"./todoService"</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> TodoList = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> todos = useObservable(todoService.todos);
    <span class="hljs-keyword">const</span> filter = useObservable(todoService.visibilityFilter);
    <span class="hljs-keyword">const</span> visibleTodos = getVisibleTodos(todos, filter);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                {visibleTodos.map((todo, index) =&gt; (
                    <span class="hljs-tag">&lt;<span class="hljs-name">TodoItem</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span> <span class="hljs-attr">todo</span>=<span class="hljs-string">{todo}</span> <span class="hljs-attr">index</span>=<span class="hljs-string">{index}</span> /&gt;</span>
                ))}
            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
                Show: <span class="hljs-tag">&lt;<span class="hljs-name">FilterLink</span> <span class="hljs-attr">filter</span>=<span class="hljs-string">{VisibilityFilter.SHOW_ALL}</span>&gt;</span>All<span class="hljs-tag">&lt;/<span class="hljs-name">FilterLink</span>&gt;</span>,
                <span class="hljs-tag">&lt;<span class="hljs-name">FilterLink</span> <span class="hljs-attr">filter</span>=<span class="hljs-string">{VisibilityFilter.SHOW_ACTIVE}</span>&gt;</span>Active<span class="hljs-tag">&lt;/<span class="hljs-name">FilterLink</span>&gt;</span>,
                <span class="hljs-tag">&lt;<span class="hljs-name">FilterLink</span> <span class="hljs-attr">filter</span>=<span class="hljs-string">{VisibilityFilter.SHOW_ALL}</span>&gt;</span>Completed<span class="hljs-tag">&lt;/<span class="hljs-name">FilterLink</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
    );<font></font>
};<font></font>
<font></font>
<span class="hljs-keyword">const</span> TodoItem = <span class="hljs-function">(<span class="hljs-params">{ todo: { text, completed }, index }: { todo: Todo; index: number }</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>
            <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
                <span class="hljs-attr">textDecoration:</span> <span class="hljs-attr">completed</span> ? "<span class="hljs-attr">line-through</span>" <span class="hljs-attr">:</span> "<span class="hljs-attr">none</span>",
            }}
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> todoService.toggleTodo(index)}
        &gt;
            {text}
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><font></font>
    );<font></font>
};<font></font>
<font></font>
<span class="hljs-keyword">const</span> FilterLink = <span class="hljs-function">(<span class="hljs-params">{ filter, children }: { filter: VisibilityFilter; children: React.ReactNode }</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> activeFilter = useObservable(todoService.visibilityFilter);
    <span class="hljs-keyword">const</span> active = filter === activeFilter;
    <span class="hljs-keyword">return</span> active ? (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><font></font>
    ) : (<font></font>
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">""</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> todoService.setVisibilityFilter(filter)}&gt;
            {children}
        <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><font></font>
    );<font></font>
};<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getVisibleTodos</span>(<span class="hljs-params">todos: Todo[], filter: VisibilityFilter</span>): <span class="hljs-title">Todo</span>[] </span>{
    <span class="hljs-keyword">switch</span> (filter) {
        <span class="hljs-keyword">case</span> VisibilityFilter.SHOW_ALL:
            <span class="hljs-keyword">return</span> todos;
        <span class="hljs-keyword">case</span> VisibilityFilter.SHOW_COMPLETED:
            <span class="hljs-keyword">return</span> todos.filter(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.completed);
        <span class="hljs-keyword">case</span> VisibilityFilter.SHOW_ACTIVE:
            <span class="hljs-keyword">return</span> todos.filter(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> !t.completed);<font></font>
    }<font></font>
}</code></pre><br>
<p>  ,    ,       (<code>todos</code>  <code>visibilityFilter</code>).         <code>todoService</code>.  hook useObservable,     ,        .</p><br>
<h1 id="vyvod"></h1><br>
<p>       Redux,    :</p><br>
<ul>
<li><strong>:</strong> ,      â€”      <code>Observable</code>   hook <code>useObservable</code>       .    action, action creator,    reducer         <code>mapStateToProps</code>  <code>mapDispatchToProps</code>.</li>
<li><strong>:</strong>      .  ,         â€”         .        ,          .</li>
<li><strong> (type-safety)  :</strong>   TypeScript    ,     .          action.</li>
<li><strong> async/await:</strong>      ,       ,    .     middleware,   redux-thunk,          .</li>
</ul><br>
<p>Redux, , -    ,  Redux DevTools,                 ,       .    ,    ,  ,   ,      .</p><br>
<p>    React  React Native     ,     .              ,  .</p><br>
<h1 id="primechaniya"></h1><br>
<p> <code>Observable</code>,    ,  .      ,   micro-observables (  )  RxJS.</p><br>
<p>      ,      MobX.     ,  MobX     .     - ES6,    ,    ,   ,     ,  .  MobX       .</p><br>
<blockquote><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒˆãƒ©ãƒ³ã‚¹ãƒ¬ãƒ¼ã‚¿ãƒ¼</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‹ã‚‰ï¼šã“ã®å‡ºç‰ˆç‰©ã¯ã€Observableã‚’ä½¿ç”¨ã—ãŸçŠ¶æ…‹ç®¡ç†ã®ç´¹ä»‹</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¨è¦‹ãªã™</font></a><font style="vertical-align: inherit;">ã“ã¨ãŒã§ãã€ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®ä½¿ç”¨ã‚’ç°¡ç•¥åŒ–ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã™ã‚‹</font><font style="vertical-align: inherit;">è¨˜äº‹ã€Œ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Rexux / MobXã®å˜ç´”ãªä»£æ›¿æ‰‹æ®µã¨ã—ã¦ã®RxJS / Immerã«ã‚ˆã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã®ç®¡ç†ã€ã§</font></a><font style="vertical-align: inherit;">èª¬æ˜ã•ã‚Œã¦ã„ã‚‹ãƒˆãƒ”ãƒƒã‚¯ã®ç¶šãã§ã™</font><font style="vertical-align: inherit;">ã€‚</font></font></blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja484936/index.html">ãƒãƒ¼ãƒ ã®çŸ¥è­˜ã¨èƒ½åŠ›ï¼šè¦‹ã¤ã‘ã€è¦‹ã€ãƒãƒ³ãƒ—</a></li>
<li><a href="../ja484938/index.html">æŸ”è»Ÿãªãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹è£½å“ç®¡ç†</a></li>
<li><a href="../ja484944/index.html">Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ I Ğ² ACID Ğ¸Ğ»Ğ¸ Ğ²Ñ‹ Ğ½Ğ°Ğ¼ Ğ½Ğµ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚Ğµ</a></li>
<li><a href="../ja484946/index.html">GPRãƒ¢ãƒ‡ãƒªãƒ³ã‚°</a></li>
<li><a href="../ja484948/index.html">NECã€20ãƒšã‚¢ã®å…‰ãƒ•ã‚¡ã‚¤ãƒãƒ¼ã‚’è¨˜éŒ²ã—ãŸæµ·åº•ã‚±ãƒ¼ãƒ–ãƒ«ã‚’ç™ºå£²</a></li>
<li><a href="../ja484954/index.html">Kubernetesã®è¦–è¦šçš„ãªãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰</a></li>
<li><a href="../ja484958/index.html">ãƒ•ã‚£ãƒœãƒŠãƒƒãƒã‚µãƒ©ãƒ€ï¼šseccompã¨forkã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ç”¨ã—ãŸã‚½ãƒ¼ã‚¹ã®æœ€å°åŒ–ã®é«˜é€ŸåŒ–</a></li>
<li><a href="../ja484960/index.html">SageMathã¨CoCalcï¼šã™ã¹ã¦ã®å§‹ã¾ã‚Šã€‚äºŒéƒ¨</a></li>
<li><a href="../ja484964/index.html">InfoWatch Traffic Monitorã§ã®è² è·åˆ†æ•£ã®æ§‹æˆ</a></li>
<li><a href="../ja484966/index.html">Springã‚’ä½¿ç”¨ã—ã¦ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã®æ—¢è£½ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>