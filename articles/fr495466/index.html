<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëäüèΩ ü§∑üèæ üë©üèº‚Äçüíº Pi√®ges de pirate. D√©tectez le piratage t√¥t avec Canarytokens üêë üé° ‚òÉÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Honey Tokens (en anglais - ¬´honey signs / signs / identifiers¬ª) est l'une des vari√©t√©s de l'id√©e Honeypot, un app√¢t pour les intrus pour d√©tecter le f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Pi√®ges de pirate. D√©tectez le piratage t√¥t avec Canarytokens</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/495466/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Honey Tokens (en anglais - ¬´honey signs / signs / identifiers¬ª) est l'une des vari√©t√©s de l'id√©e Honeypot, un app√¢t pour les intrus pour d√©tecter le fait d'un piratage ou pour identifier sa source. </font><font style="vertical-align: inherit;">Lorsque l'attaquant est d√©j√† entr√© dans le syst√®me, il est susceptible d'effectuer des actions inhabituelles pour l'utilisateur ordinaire. </font><font style="vertical-align: inherit;">Cela peut √™tre utilis√© comme un moyen de d√©tecter le piratage. </font><font style="vertical-align: inherit;">Dans cet article, nous verrons √† quel point il est facile de cr√©er vos propres d√©clencheurs pour d√©tecter le piratage √† un stade pr√©coce. </font><font style="vertical-align: inherit;">Ces pi√®ges sont utiles pour les administrateurs syst√®me et m√™me pour les utilisateurs ordinaires soucieux de la confidentialit√© de leurs donn√©es.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/xq/wk/ks/xqwkksjf6adatsv3lhu-am4ph6w.jpeg"></div></a><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avant l'invention des analyseurs de gaz, les mineurs ont emmen√© un canari avec eux √† la mine. </font><font style="vertical-align: inherit;">En raison du petit corps et du m√©tabolisme rapide, les oiseaux ont r√©agi aux gaz dangereux dans l'air beaucoup plus t√¥t et ont averti les mineurs.</font></font></i></font><a name="habracut"></a><br>
<br>
<h3><font color="‚Äú#3AC1EF‚Äù"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi est-ce n√©cessaire?</font></font></font></h3><br>
<img src="https://habrastorage.org/webt/ji/uf/cb/jiufcbwkepg-izswuadwxjkerxe.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le pirate, une fois dans le nouveau syst√®me, commence √† regarder autour de lui, comme un voleur, apr√®s avoir p√©n√©tr√© dans l'appartement, commence √† ouvrir toutes les bo√Ætes √† la recherche de bijoux. </font><font style="vertical-align: inherit;">L'attaquant ne sait pas √† l'avance exactement quelles donn√©es ont de la valeur, mais avec une forte probabilit√©, il v√©rifiera toutes les options possibles. </font><font style="vertical-align: inherit;">Par cons√©quent, il est important que les pi√®ges ressemblent √† des donn√©es r√©elles et soient aussi attrayants que possible pour l'attaquant. </font><font style="vertical-align: inherit;">Plus t√¥t le propri√©taire remarque que le pi√®ge est d√©clench√©, plus vite il se rendra compte qu'il a √©t√© pirat√© et pourra r√©pondre.</font></font><br>
<br>
<h3><font color="‚Äú#3AC1EF‚Äù"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Service Canarytokens</font></font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canarytokens.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un service en ligne pour cr√©er facilement vos propres marqueurs (hanitokens) pour le piratage. </font><font style="vertical-align: inherit;">Il prend en charge plusieurs options de d√©clenchement et vous permet de g√©n√©rer un d√©clencheur pr√™t √† l'emploi avec du courrier joint, o√π une notification sera envoy√©e si le d√©clencheur a fonctionn√©. </font></font><br>
<img src="https://habrastorage.org/webt/dt/as/lm/dtaslm6-vs_4c-cl6h5nqzlqh70.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le service est enti√®rement gratuit et un d√©clencheur peut √™tre g√©n√©r√© instantan√©ment sans inscription. </font><font style="vertical-align: inherit;">Il existe √©galement une version auto-h√©berg√©e pour ceux qui pr√©f√®rent garder des secrets sur leur infrastructure. </font><font style="vertical-align: inherit;">Ensuite, nous verrons comment fonctionne chacun des d√©clencheurs et √† la fin, nous d√©ploierons notre propre serveur canarytokens dans le conteneur Docker.</font></font><br>
<br>
<h3><font color="‚Äú#3AC1EF‚Äù"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©clencher lors de l'ouverture d'un fichier .doc et pdf</font></font></font></h3><br>
<img width="300" src="https://habrastorage.org/webt/x9/mw/tn/x9mwtnlqxhixsnu5o6fod1tgwao.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela fonctionnera si le document a √©t√© ouvert par le programme pour √™tre visualis√©. </font><font style="vertical-align: inherit;">J'utilise cette astuce tr√®s souvent. </font><font style="vertical-align: inherit;">Sur chaque ordinateur et lecteur flash, j'ai des documents avec des noms attrayants comme Passwords.pdf ou Bitcoins.doc. </font><font style="vertical-align: inherit;">J'adore voir comment les comptables avec curiosit√© examinent tous les fichiers du lecteur flash qui leur sont transf√©r√©s. </font></font><br>
 &nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Je consid√®re que ce d√©clencheur est le plus efficace et le plus utile pour toutes les cat√©gories d'utilisateurs, des professionnels de la s√©curit√© de l'information aux d√©butants. </font><font style="vertical-align: inherit;">Presque personne ne sait qu'un visualiseur PDF peut transmettre le fait d'ouvrir un fichier au propri√©taire du document. </font><font style="vertical-align: inherit;">Tout le monde tombe dessus.</font></font><br>
 &nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Il existe plusieurs fa√ßons de saisir le fait d'ouvrir un document. </font><font style="vertical-align: inherit;">Canarytokens utilise une URL sp√©cifique au document incorpor√©e dans le document pour v√©rifier les certificats SSL r√©voqu√©s (liste de r√©vocation de certificats). </font><font style="vertical-align: inherit;">En cons√©quence, le programme va √† cette adresse et le d√©clencheur se d√©clenche.</font></font><br>
<br>
<h3><font color="‚Äú#3AC1EF‚Äù"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©clenchement via la r√©solution DNS</font></font></font></h3><br>
<img width="500" src="https://habrastorage.org/webt/am/i1/wh/ami1whax3utfizv4zfgxuerxc9g.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit d'un d√©clencheur tr√®s int√©ressant dont les avantages ne sont pas imm√©diatement √©vidents. </font><font style="vertical-align: inherit;">Cela fonctionnera si quelqu'un demande l'adresse IP du sous-domaine g√©n√©r√©, qui est sp√©cialement g√©n√©r√© pour qu'il ne puisse pas √™tre devin√© par hasard ou tordu. </font><font style="vertical-align: inherit;">Ainsi, les op√©rations accidentelles sont exclues. </font><font style="vertical-align: inherit;">Ce d√©clencheur est utilis√© pour de nombreuses techniques d√©crites ci-dessous, notamment pour d√©tecter le fait d'ouvrir un dossier et comme d√©clencheur dans la base de donn√©es MS SQL. </font><font style="vertical-align: inherit;">En fait, il existe de nombreuses options pour utiliser ce d√©clencheur.</font></font><br>
<br>
<h3><font color="‚Äú#3AC1EF‚Äù"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©clencheur d'URL</font></font></font></h3><br>
<img width="500" src="https://habrastorage.org/webt/60/mk/dn/60mkdnqqsqvla-5cc7-2nbkotrs.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, il suffit qu'une requ√™te GET, POST ou HEAD soit ex√©cut√©e par r√©f√©rence. </font><font style="vertical-align: inherit;">Cela d√©clenchera le d√©clencheur. </font><font style="vertical-align: inherit;">En plus de son utilisation habituelle, il peut √©galement √™tre utilis√© dans des scripts pour v√©rifier les analyseurs qui suivent les liens et afficher des aper√ßus de contenu. </font><font style="vertical-align: inherit;">Il en va de m√™me, par exemple, pour les messageries instantan√©es: il suffit d'√©crire un lien dans le champ de saisie sur lequel vous avez cliqu√© depuis les serveurs de messagerie.</font></font><br>
<br>
<h3><font color="‚Äú#3AC1EF‚Äù"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Image</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'image classique de 1 x 1 pixel est connue de tous ceux qui suivent la publicit√© en ligne. </font><font style="vertical-align: inherit;">Le d√©clencheur fonctionnera si un fichier image a √©t√© t√©l√©charg√©. </font><font style="vertical-align: inherit;">Un tel pixel peut √™tre ins√©r√© dans n'importe quelle page html ou dans une lettre. </font><font style="vertical-align: inherit;">Il est pratique de l'appeler √† partir des scripts JS sur la page si la condition n√©cessaire a fonctionn√©. </font><font style="vertical-align: inherit;">Vous pouvez √©galement remplacer le pixel standard par votre propre image.</font></font><br>
<br>
<h3><font color="‚Äú#3AC1EF‚Äù"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©clencheur d'e-mail</font></font></font></h3><br>
<img width="300" src="https://habrastorage.org/webt/mo/4e/sm/mo4esmyilw_y8lzwqhhw2-kaemq.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si une lettre arrive dans la bo√Æte aux lettres g√©n√©r√©e, le d√©clencheur fonctionnera. </font><font style="vertical-align: inherit;">Il est pratique d'utiliser des adresses e-mail, des listes de contacts, etc. pour surveiller les fuites de bases de donn√©es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, vous pouvez ajouter cette adresse √† votre liste de contacts et savoir quand votre ordinateur portable sur votre t√©l√©phone sera fusionn√© par une application demandant l'acc√®s √† votre liste de contacts. . </font><font style="vertical-align: inherit;">Il est √©galement possible pour tous les employ√©s d'ajouter des adresses de d√©clenchement diff√©rentes aux blocs-notes sur un ordinateur, un t√©l√©phone, un client de messagerie et de suivre d'o√π viennent les contacts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une adresse e-mail est sp√©cialement g√©n√©r√©e qui n'est pas pr√©visible, par cons√©quent, la probabilit√© de s√©lection et de d√©clenchement accidentel d'un d√©clencheur est exclue.</font></font><br>
<br>
<h3><font color="‚Äú#3AC1EF‚Äù"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©clencheur d'ouverture de dossier Windows</font></font></font></h3><br>
<img width="100" src="https://habrastorage.org/webt/fp/zd/hx/fpzdhxc0olbpomnpgglqlhrd9f4.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beaucoup ont s√ªrement vu un fichier desktop.ini cach√© qui se trouve dans chaque dossier Windows. </font><font style="vertical-align: inherit;">Il s'av√®re qu'il n'est pas si simple. </font><font style="vertical-align: inherit;">Dans celui-ci, vous pouvez sp√©cifier l'adresse de l'ic√¥ne sur le serveur distant, en utilisant des chemins UNC (ce sont ceux utilis√©s pour les lecteurs r√©seau et commencer par \\), tandis que Windows effectuera la r√©solution DNS sur le domaine sp√©cifi√© dans le lien vers l'ic√¥ne et activera le d√©clencheur. </font><font style="vertical-align: inherit;">Le fichier desktop.ini peut √™tre compress√© avec d'autres fichiers dans l'archive, et cela fonctionnera si l'archive est d√©compress√©e.</font></font><br>
<br>
<h3><font color="‚Äú#3AC1EF‚Äù"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©clencheur de clonage de site</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un script simple pour les pages Web qui fonctionne si la page n'est pas ouverte √† partir de votre domaine. </font><font style="vertical-align: inherit;">Peut √™tre utile pour d√©tecter le phishing.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (<span class="hljs-built_in">document</span>.domain != <span class="hljs-string">"mydomain.com"</span>) {
    <span class="hljs-keyword">var</span> l = location.href;
    <span class="hljs-keyword">var</span> r = <span class="hljs-built_in">document</span>.referrer;
    <span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Image();<font></font>
    m.src = <span class="hljs-string">"http://canarytokens.com/"</span>+
            <span class="hljs-string">"blablabla.jpg?l="</span>+
            <span class="hljs-built_in">encodeURI</span>(l) + <span class="hljs-string">"&amp;r="</span> + <span class="hljs-built_in">encodeURI</span>(r);<font></font>
}</code></pre><br>
<h3><font color="‚Äú#3AC1EF‚Äù"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©clencheur pour ex√©cuter un fichier EXE ou une DLL</font></font></font></h3><br>
<img width="300" src="https://habrastorage.org/webt/co/3f/q5/co3fq5b-ivp-imere3zbbdcmmfe.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Permet de coller le d√©clencheur avec un fichier ou une biblioth√®que ex√©cutable .exe existant. </font><font style="vertical-align: inherit;">Il n'est pas d√©tect√© par les antivirus. </font><font style="vertical-align: inherit;">Il convient de garder √† l'esprit qu'un tel collage peut casser certains programmes, il est donc pr√©f√©rable d'utiliser quelque chose de simple. </font><font style="vertical-align: inherit;">En fait, il s'agit d'une m√©thode connue depuis longtemps utilis√©e pour propager des chevaux de Troie et des virus, mais dans notre cas, la fonctionnalit√© cach√©e est totalement inoffensive. </font><font style="vertical-align: inherit;">Cependant, il convient de garder √† l'esprit que le fichier ex√©cutable peut provoquer une plus grande vigilance pour l'attaquant, et √©galement ne pas s'ex√©cuter sur son syst√®me d'exploitation.</font></font><br>
<br>
<h3><font color="‚Äú#3AC1EF‚Äù"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©clencheur pour MS SQL</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MS SQL vous permet d'ajouter un d√©clencheur pour ex√©cuter INSERT, SELECT, DELETE, etc. Pour d√©clencher un d√©clencheur, utilisez la m√™me m√©thode que pour un fichier desktop.ini, √† savoir r√©soudre un nom DNS via des chemins UNC.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple de d√©clenchement pour MS SQL</font></font></b><div class="spoiler_text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--cr√©er un proc stock√© qui pingera les canarytokens </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 CREATE proc ping_canarytoken </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 AS </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 BEGIN </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 declare</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nom d'utilisateur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> varchar (max), </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base64</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> varchar (max), @tokendomain varchar (128), @unc varchar (128), </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Taille</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">termin√©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al√©atoire</font></font></a> varchar(3);<br>
<br>
--setup the variables<br>
 set @tokendomain = 'qo2dd6tftntl1pej9j68v31k6.canarytokens.com';<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">size</a> = 128;<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">done</a> = 0;<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">random</a> = cast(round(rand()*100,0) as varchar(2));<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">random</a> = concat(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">random</a>, '.');<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">username</a> = SUSER_SNAME();<br>
<br>
--loop runs until the UNC path is 128 chars or less<br>
 while <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">done</a> &lt;= 0<br>
 begin<br>
 --convert username into base64<br>
 select <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">base64</a> = (SELECT<br>
 CAST(N'' AS XML).value(<br>
 'xs:base64Binary(xs:hexBinary(sql:column(¬´bin¬ª)))'<br>
, 'VARCHAR(MAX)'<br>
 ) Base64Encoding<br>
 FROM (<br>
 SELECT CAST(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">username</a> AS VARBINARY(MAX)) AS bin<br>
 ) AS bin_sql_server_temp);<br>
<br>
--replace base64 padding as dns will choke on =<br>
 select <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">base64</a> = replace(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">base64</a>,'=','-')<br>
<br>
--construct the UNC path<br>
 select @unc = concat('\\',@base64,'.',@random,@tokendomain,'\a')<br>
<br>
 ‚Äî if too big, trim the username and try again<br>
 if len(@unc) &lt;= <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">size</a><br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">done</a> = 1<br>
 else<br>
 --trim from the front, to keep the username and lose domain details<br>
 select <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">username</a> = substring(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">username</a>, 2, len(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">username</a>)-1)<br>
 end<br>
 exec master.dbo.xp_fileexist @unc;<br>
 END<br>
<br>
--add a trigger if data is altered<br>
 CREATE TRIGGER TRIGGER1<br>
 ON TABLE1<br>
 AFTER INSERT<br>
 AS<br>
 BEGIN<br>
 exec ping_canarytoken<br>
 end<br>
</div></div><br>
<h3><font color="‚Äú#3AC1EF‚Äù"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©clencheur de connexion Amazon Web Services</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La cl√© API des services Amazon devrait inciter un attaquant √† v√©rifier ce qu'il contient. </font><font style="vertical-align: inherit;">Si cette cl√© API est utilis√©e pour la connexion, le d√©clencheur se d√©clenchera. </font><font style="vertical-align: inherit;">Dans ce cas, bien s√ªr, il n'y a pas de donn√©es.</font></font><br>
<br>
<h3><font color="‚Äú#3AC1EF‚Äù"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autres d√©clencheurs</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le service canarytokens.org prend √©galement en charge d'autres d√©clencheurs, tels qu'un hook SVN, une redirection Web, la lecture d'un code QR, une cl√© API Slack, etc. </font><font style="vertical-align: inherit;">Ils utilisent tous un principe similaire, et si vous le souhaitez, vous pouvez cr√©er ind√©pendamment votre propre d√©clencheur, en ayant dans votre arsenal un nom DNS, un lien avec une image, une adresse postale et des cl√©s API pour les services populaires. </font><font style="vertical-align: inherit;">En plus des notifications par e-mail, Canarytokens peut tirer un crochet Web si un d√©clencheur se d√©clenche. </font><font style="vertical-align: inherit;">Les m√©canismes de fonctionnement sont d√©crits dans la documentation.</font></font><br>
<br>
<h3><font color="‚Äú#3AC1EF‚Äù"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Canarytokens Native Server</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un pirate exp√©riment√©, voyant dans le code source l'adresse canarytokens.org devine imm√©diatement tout. </font><font style="vertical-align: inherit;">Par cons√©quent, pour une utilisation dans l'entreprise, il est pr√©f√©rable de d√©ployer votre propre instance de canarytokens de sorte que toutes les adresses de d√©clenchement soient dirig√©es vers les domaines internes de l'entreprise et ne puissent pas √™tre distingu√©es des services internes r√©els. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les d√©veloppeurs fournissent une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">image Docker pr√™te √† l'emploi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Le processus d'installation est assez typique pour n'importe quelle image, nous n'aborderons donc pas ce sujet. </font><font style="vertical-align: inherit;">Arr√™tons-nous uniquement sur des points non √©vidents. </font><font style="vertical-align: inherit;">Avant l'installation, vous devrez √©diter les fichiers </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">frontend.env</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">switchboard.env</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># ()       </span>
<span class="hljs-comment">#     IP-    Docker.        SSL-.</span><font></font>
CANARY_DOMAINS=example1.com,example2.com<font></font>
<font></font>
<span class="hljs-comment">#            PDF-</span>
<span class="hljs-comment">#    NS-          .</span>
<span class="hljs-comment">#   example3.com     example1.com  example2.com</span><font></font>
CANARY_NXDOMAINS=example3.com<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour envoyer du courrier, je recommande d'utiliser le service Mailgun, car Sendgrid est instable.</font></font><br>
<br>
<h3><font color="‚Äú#3AC1EF‚Äù"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces pi√®ges sont vraiment efficaces. </font><font style="vertical-align: inherit;">Dans mon cas, les d√©clencheurs avec des fichiers PDF sont particuli√®rement utiles. </font><font style="vertical-align: inherit;">Le service sera utile pour les utilisateurs ordinaires et les pentesters exp√©riment√©s. </font><font style="vertical-align: inherit;">M√™me un attaquant sophistiqu√© qui conna√Æt l'existence des Hanipots et des Hanitokens ne pourra pas r√©sister √† la tentation de minimiser au moins le sous-domaine trouv√© dans la documentation. </font><font style="vertical-align: inherit;">Si vous utilisez soigneusement et judicieusement les pi√®ges, vous pouvez d√©tecter un cracker √† un stade pr√©coce. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces techniques peuvent √™tre utilis√©es sur des serveurs, des ordinateurs de bureau, des stockages de fichiers et m√™me sur des t√©l√©phones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous souhaitez d√©ployer des canarytokens dans votre propre instance Docker, sur nos machines virtuelles Docker est install√© en un clic depuis la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">place de march√©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">De plus, nous offrons une remise de 15% sur tous les serveurs utilisant le code promo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DONTPANIC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr495456/index.html">Examen de 14 nouveaux plugins pour Figma qui aideront √† augmenter la productivit√© pendant que nous tous</a></li>
<li><a href="../fr495458/index.html">Comment √©crire du code lorsque les enfants courent autour de vous et demandent: ¬´Pour quoi travaillerez-vous?¬ª</a></li>
<li><a href="../fr495460/index.html">Une bulle de gaz de 22 000 fois la taille de la Terre a explos√© sur Uranus</a></li>
<li><a href="../fr495462/index.html">.NET Core: intrins√®que x86_64 sur les machines virtuelles</a></li>
<li><a href="../fr495464/index.html">Message d'information 404 - non seulement une erreur, mais aussi des vacances</a></li>
<li><a href="../fr495468/index.html">Algorithme de reconnaissance des √©tiquettes de prix qui fonctionne m√™me sur les terminaux de collecte de donn√©es</a></li>
<li><a href="../fr495472/index.html">Le passage au v√©g√©tarisme n'emp√™chera pas les gens d'√™tre infect√©s par des maladies comme COVID-19</a></li>
<li><a href="../fr495474/index.html">DataGrip 2020.1: lancement des configurations, exportation vers Excel, r√©sultats dans l'√©diteur et plus</a></li>
<li><a href="../fr495476/index.html">Pourquoi le succ√®s d'Atari DeepMind AI est d√©cevant</a></li>
<li><a href="../fr495478/index.html">Testeur de donn√©es grandes et petites: tendances, th√©orie, mon histoire</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>