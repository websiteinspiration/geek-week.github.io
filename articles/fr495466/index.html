<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👊🏽 🤷🏾 👩🏼‍💼 Pièges de pirate. Détectez le piratage tôt avec Canarytokens 🐑 🎡 ☃️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Honey Tokens (en anglais - «honey signs / signs / identifiers») est l'une des variétés de l'idée Honeypot, un appât pour les intrus pour détecter le f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Pièges de pirate. Détectez le piratage tôt avec Canarytokens</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/495466/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Honey Tokens (en anglais - «honey signs / signs / identifiers») est l'une des variétés de l'idée Honeypot, un appât pour les intrus pour détecter le fait d'un piratage ou pour identifier sa source. </font><font style="vertical-align: inherit;">Lorsque l'attaquant est déjà entré dans le système, il est susceptible d'effectuer des actions inhabituelles pour l'utilisateur ordinaire. </font><font style="vertical-align: inherit;">Cela peut être utilisé comme un moyen de détecter le piratage. </font><font style="vertical-align: inherit;">Dans cet article, nous verrons à quel point il est facile de créer vos propres déclencheurs pour détecter le piratage à un stade précoce. </font><font style="vertical-align: inherit;">Ces pièges sont utiles pour les administrateurs système et même pour les utilisateurs ordinaires soucieux de la confidentialité de leurs données.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/xq/wk/ks/xqwkksjf6adatsv3lhu-am4ph6w.jpeg"></div></a><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avant l'invention des analyseurs de gaz, les mineurs ont emmené un canari avec eux à la mine. </font><font style="vertical-align: inherit;">En raison du petit corps et du métabolisme rapide, les oiseaux ont réagi aux gaz dangereux dans l'air beaucoup plus tôt et ont averti les mineurs.</font></font></i></font><a name="habracut"></a><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi est-ce nécessaire?</font></font></font></h3><br>
<img src="https://habrastorage.org/webt/ji/uf/cb/jiufcbwkepg-izswuadwxjkerxe.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le pirate, une fois dans le nouveau système, commence à regarder autour de lui, comme un voleur, après avoir pénétré dans l'appartement, commence à ouvrir toutes les boîtes à la recherche de bijoux. </font><font style="vertical-align: inherit;">L'attaquant ne sait pas à l'avance exactement quelles données ont de la valeur, mais avec une forte probabilité, il vérifiera toutes les options possibles. </font><font style="vertical-align: inherit;">Par conséquent, il est important que les pièges ressemblent à des données réelles et soient aussi attrayants que possible pour l'attaquant. </font><font style="vertical-align: inherit;">Plus tôt le propriétaire remarque que le piège est déclenché, plus vite il se rendra compte qu'il a été piraté et pourra répondre.</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Service Canarytokens</font></font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canarytokens.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un service en ligne pour créer facilement vos propres marqueurs (hanitokens) pour le piratage. </font><font style="vertical-align: inherit;">Il prend en charge plusieurs options de déclenchement et vous permet de générer un déclencheur prêt à l'emploi avec du courrier joint, où une notification sera envoyée si le déclencheur a fonctionné. </font></font><br>
<img src="https://habrastorage.org/webt/dt/as/lm/dtaslm6-vs_4c-cl6h5nqzlqh70.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le service est entièrement gratuit et un déclencheur peut être généré instantanément sans inscription. </font><font style="vertical-align: inherit;">Il existe également une version auto-hébergée pour ceux qui préfèrent garder des secrets sur leur infrastructure. </font><font style="vertical-align: inherit;">Ensuite, nous verrons comment fonctionne chacun des déclencheurs et à la fin, nous déploierons notre propre serveur canarytokens dans le conteneur Docker.</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Déclencher lors de l'ouverture d'un fichier .doc et pdf</font></font></font></h3><br>
<img width="300" src="https://habrastorage.org/webt/x9/mw/tn/x9mwtnlqxhixsnu5o6fod1tgwao.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela fonctionnera si le document a été ouvert par le programme pour être visualisé. </font><font style="vertical-align: inherit;">J'utilise cette astuce très souvent. </font><font style="vertical-align: inherit;">Sur chaque ordinateur et lecteur flash, j'ai des documents avec des noms attrayants comme Passwords.pdf ou Bitcoins.doc. </font><font style="vertical-align: inherit;">J'adore voir comment les comptables avec curiosité examinent tous les fichiers du lecteur flash qui leur sont transférés. </font></font><br>
 &nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Je considère que ce déclencheur est le plus efficace et le plus utile pour toutes les catégories d'utilisateurs, des professionnels de la sécurité de l'information aux débutants. </font><font style="vertical-align: inherit;">Presque personne ne sait qu'un visualiseur PDF peut transmettre le fait d'ouvrir un fichier au propriétaire du document. </font><font style="vertical-align: inherit;">Tout le monde tombe dessus.</font></font><br>
 &nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Il existe plusieurs façons de saisir le fait d'ouvrir un document. </font><font style="vertical-align: inherit;">Canarytokens utilise une URL spécifique au document incorporée dans le document pour vérifier les certificats SSL révoqués (liste de révocation de certificats). </font><font style="vertical-align: inherit;">En conséquence, le programme va à cette adresse et le déclencheur se déclenche.</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Déclenchement via la résolution DNS</font></font></font></h3><br>
<img width="500" src="https://habrastorage.org/webt/am/i1/wh/ami1whax3utfizv4zfgxuerxc9g.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit d'un déclencheur très intéressant dont les avantages ne sont pas immédiatement évidents. </font><font style="vertical-align: inherit;">Cela fonctionnera si quelqu'un demande l'adresse IP du sous-domaine généré, qui est spécialement généré pour qu'il ne puisse pas être deviné par hasard ou tordu. </font><font style="vertical-align: inherit;">Ainsi, les opérations accidentelles sont exclues. </font><font style="vertical-align: inherit;">Ce déclencheur est utilisé pour de nombreuses techniques décrites ci-dessous, notamment pour détecter le fait d'ouvrir un dossier et comme déclencheur dans la base de données MS SQL. </font><font style="vertical-align: inherit;">En fait, il existe de nombreuses options pour utiliser ce déclencheur.</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Déclencheur d'URL</font></font></font></h3><br>
<img width="500" src="https://habrastorage.org/webt/60/mk/dn/60mkdnqqsqvla-5cc7-2nbkotrs.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, il suffit qu'une requête GET, POST ou HEAD soit exécutée par référence. </font><font style="vertical-align: inherit;">Cela déclenchera le déclencheur. </font><font style="vertical-align: inherit;">En plus de son utilisation habituelle, il peut également être utilisé dans des scripts pour vérifier les analyseurs qui suivent les liens et afficher des aperçus de contenu. </font><font style="vertical-align: inherit;">Il en va de même, par exemple, pour les messageries instantanées: il suffit d'écrire un lien dans le champ de saisie sur lequel vous avez cliqué depuis les serveurs de messagerie.</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Image</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'image classique de 1 x 1 pixel est connue de tous ceux qui suivent la publicité en ligne. </font><font style="vertical-align: inherit;">Le déclencheur fonctionnera si un fichier image a été téléchargé. </font><font style="vertical-align: inherit;">Un tel pixel peut être inséré dans n'importe quelle page html ou dans une lettre. </font><font style="vertical-align: inherit;">Il est pratique de l'appeler à partir des scripts JS sur la page si la condition nécessaire a fonctionné. </font><font style="vertical-align: inherit;">Vous pouvez également remplacer le pixel standard par votre propre image.</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Déclencheur d'e-mail</font></font></font></h3><br>
<img width="300" src="https://habrastorage.org/webt/mo/4e/sm/mo4esmyilw_y8lzwqhhw2-kaemq.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si une lettre arrive dans la boîte aux lettres générée, le déclencheur fonctionnera. </font><font style="vertical-align: inherit;">Il est pratique d'utiliser des adresses e-mail, des listes de contacts, etc. pour surveiller les fuites de bases de données. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, vous pouvez ajouter cette adresse à votre liste de contacts et savoir quand votre ordinateur portable sur votre téléphone sera fusionné par une application demandant l'accès à votre liste de contacts. . </font><font style="vertical-align: inherit;">Il est également possible pour tous les employés d'ajouter des adresses de déclenchement différentes aux blocs-notes sur un ordinateur, un téléphone, un client de messagerie et de suivre d'où viennent les contacts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une adresse e-mail est spécialement générée qui n'est pas prévisible, par conséquent, la probabilité de sélection et de déclenchement accidentel d'un déclencheur est exclue.</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Déclencheur d'ouverture de dossier Windows</font></font></font></h3><br>
<img width="100" src="https://habrastorage.org/webt/fp/zd/hx/fpzdhxc0olbpomnpgglqlhrd9f4.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beaucoup ont sûrement vu un fichier desktop.ini caché qui se trouve dans chaque dossier Windows. </font><font style="vertical-align: inherit;">Il s'avère qu'il n'est pas si simple. </font><font style="vertical-align: inherit;">Dans celui-ci, vous pouvez spécifier l'adresse de l'icône sur le serveur distant, en utilisant des chemins UNC (ce sont ceux utilisés pour les lecteurs réseau et commencer par \\), tandis que Windows effectuera la résolution DNS sur le domaine spécifié dans le lien vers l'icône et activera le déclencheur. </font><font style="vertical-align: inherit;">Le fichier desktop.ini peut être compressé avec d'autres fichiers dans l'archive, et cela fonctionnera si l'archive est décompressée.</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Déclencheur de clonage de site</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un script simple pour les pages Web qui fonctionne si la page n'est pas ouverte à partir de votre domaine. </font><font style="vertical-align: inherit;">Peut être utile pour détecter le phishing.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (<span class="hljs-built_in">document</span>.domain != <span class="hljs-string">"mydomain.com"</span>) {
    <span class="hljs-keyword">var</span> l = location.href;
    <span class="hljs-keyword">var</span> r = <span class="hljs-built_in">document</span>.referrer;
    <span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Image();<font></font>
    m.src = <span class="hljs-string">"http://canarytokens.com/"</span>+
            <span class="hljs-string">"blablabla.jpg?l="</span>+
            <span class="hljs-built_in">encodeURI</span>(l) + <span class="hljs-string">"&amp;r="</span> + <span class="hljs-built_in">encodeURI</span>(r);<font></font>
}</code></pre><br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Déclencheur pour exécuter un fichier EXE ou une DLL</font></font></font></h3><br>
<img width="300" src="https://habrastorage.org/webt/co/3f/q5/co3fq5b-ivp-imere3zbbdcmmfe.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Permet de coller le déclencheur avec un fichier ou une bibliothèque exécutable .exe existant. </font><font style="vertical-align: inherit;">Il n'est pas détecté par les antivirus. </font><font style="vertical-align: inherit;">Il convient de garder à l'esprit qu'un tel collage peut casser certains programmes, il est donc préférable d'utiliser quelque chose de simple. </font><font style="vertical-align: inherit;">En fait, il s'agit d'une méthode connue depuis longtemps utilisée pour propager des chevaux de Troie et des virus, mais dans notre cas, la fonctionnalité cachée est totalement inoffensive. </font><font style="vertical-align: inherit;">Cependant, il convient de garder à l'esprit que le fichier exécutable peut provoquer une plus grande vigilance pour l'attaquant, et également ne pas s'exécuter sur son système d'exploitation.</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Déclencheur pour MS SQL</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MS SQL vous permet d'ajouter un déclencheur pour exécuter INSERT, SELECT, DELETE, etc. Pour déclencher un déclencheur, utilisez la même méthode que pour un fichier desktop.ini, à savoir résoudre un nom DNS via des chemins UNC.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple de déclenchement pour MS SQL</font></font></b><div class="spoiler_text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--créer un proc stocké qui pingera les canarytokens </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 CREATE proc ping_canarytoken </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 AS </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 BEGIN </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 declare</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nom d'utilisateur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> varchar (max), </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base64</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> varchar (max), @tokendomain varchar (128), @unc varchar (128), </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Taille</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terminé</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aléatoire</font></font></a> varchar(3);<br>
<br>
--setup the variables<br>
 set @tokendomain = 'qo2dd6tftntl1pej9j68v31k6.canarytokens.com';<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">size</a> = 128;<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">done</a> = 0;<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">random</a> = cast(round(rand()*100,0) as varchar(2));<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">random</a> = concat(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">random</a>, '.');<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">username</a> = SUSER_SNAME();<br>
<br>
--loop runs until the UNC path is 128 chars or less<br>
 while <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">done</a> &lt;= 0<br>
 begin<br>
 --convert username into base64<br>
 select <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">base64</a> = (SELECT<br>
 CAST(N'' AS XML).value(<br>
 'xs:base64Binary(xs:hexBinary(sql:column(«bin»)))'<br>
, 'VARCHAR(MAX)'<br>
 ) Base64Encoding<br>
 FROM (<br>
 SELECT CAST(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">username</a> AS VARBINARY(MAX)) AS bin<br>
 ) AS bin_sql_server_temp);<br>
<br>
--replace base64 padding as dns will choke on =<br>
 select <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">base64</a> = replace(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">base64</a>,'=','-')<br>
<br>
--construct the UNC path<br>
 select @unc = concat('\\',@base64,'.',@random,@tokendomain,'\a')<br>
<br>
 — if too big, trim the username and try again<br>
 if len(@unc) &lt;= <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">size</a><br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">done</a> = 1<br>
 else<br>
 --trim from the front, to keep the username and lose domain details<br>
 select <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">username</a> = substring(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">username</a>, 2, len(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">username</a>)-1)<br>
 end<br>
 exec master.dbo.xp_fileexist @unc;<br>
 END<br>
<br>
--add a trigger if data is altered<br>
 CREATE TRIGGER TRIGGER1<br>
 ON TABLE1<br>
 AFTER INSERT<br>
 AS<br>
 BEGIN<br>
 exec ping_canarytoken<br>
 end<br>
</div></div><br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Déclencheur de connexion Amazon Web Services</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La clé API des services Amazon devrait inciter un attaquant à vérifier ce qu'il contient. </font><font style="vertical-align: inherit;">Si cette clé API est utilisée pour la connexion, le déclencheur se déclenchera. </font><font style="vertical-align: inherit;">Dans ce cas, bien sûr, il n'y a pas de données.</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autres déclencheurs</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le service canarytokens.org prend également en charge d'autres déclencheurs, tels qu'un hook SVN, une redirection Web, la lecture d'un code QR, une clé API Slack, etc. </font><font style="vertical-align: inherit;">Ils utilisent tous un principe similaire, et si vous le souhaitez, vous pouvez créer indépendamment votre propre déclencheur, en ayant dans votre arsenal un nom DNS, un lien avec une image, une adresse postale et des clés API pour les services populaires. </font><font style="vertical-align: inherit;">En plus des notifications par e-mail, Canarytokens peut tirer un crochet Web si un déclencheur se déclenche. </font><font style="vertical-align: inherit;">Les mécanismes de fonctionnement sont décrits dans la documentation.</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Canarytokens Native Server</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un pirate expérimenté, voyant dans le code source l'adresse canarytokens.org devine immédiatement tout. </font><font style="vertical-align: inherit;">Par conséquent, pour une utilisation dans l'entreprise, il est préférable de déployer votre propre instance de canarytokens de sorte que toutes les adresses de déclenchement soient dirigées vers les domaines internes de l'entreprise et ne puissent pas être distinguées des services internes réels. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les développeurs fournissent une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">image Docker prête à l'emploi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Le processus d'installation est assez typique pour n'importe quelle image, nous n'aborderons donc pas ce sujet. </font><font style="vertical-align: inherit;">Arrêtons-nous uniquement sur des points non évidents. </font><font style="vertical-align: inherit;">Avant l'installation, vous devrez éditer les fichiers </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">frontend.env</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">switchboard.env</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># ()       </span>
<span class="hljs-comment">#     IP-    Docker.        SSL-.</span><font></font>
CANARY_DOMAINS=example1.com,example2.com<font></font>
<font></font>
<span class="hljs-comment">#            PDF-</span>
<span class="hljs-comment">#    NS-          .</span>
<span class="hljs-comment">#   example3.com     example1.com  example2.com</span><font></font>
CANARY_NXDOMAINS=example3.com<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour envoyer du courrier, je recommande d'utiliser le service Mailgun, car Sendgrid est instable.</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces pièges sont vraiment efficaces. </font><font style="vertical-align: inherit;">Dans mon cas, les déclencheurs avec des fichiers PDF sont particulièrement utiles. </font><font style="vertical-align: inherit;">Le service sera utile pour les utilisateurs ordinaires et les pentesters expérimentés. </font><font style="vertical-align: inherit;">Même un attaquant sophistiqué qui connaît l'existence des Hanipots et des Hanitokens ne pourra pas résister à la tentation de minimiser au moins le sous-domaine trouvé dans la documentation. </font><font style="vertical-align: inherit;">Si vous utilisez soigneusement et judicieusement les pièges, vous pouvez détecter un cracker à un stade précoce. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces techniques peuvent être utilisées sur des serveurs, des ordinateurs de bureau, des stockages de fichiers et même sur des téléphones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous souhaitez déployer des canarytokens dans votre propre instance Docker, sur nos machines virtuelles Docker est installé en un clic depuis la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">place de marché</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">De plus, nous offrons une remise de 15% sur tous les serveurs utilisant le code promo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DONTPANIC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr495456/index.html">Examen de 14 nouveaux plugins pour Figma qui aideront à augmenter la productivité pendant que nous tous</a></li>
<li><a href="../fr495458/index.html">Comment écrire du code lorsque les enfants courent autour de vous et demandent: «Pour quoi travaillerez-vous?»</a></li>
<li><a href="../fr495460/index.html">Une bulle de gaz de 22 000 fois la taille de la Terre a explosé sur Uranus</a></li>
<li><a href="../fr495462/index.html">.NET Core: intrinsèque x86_64 sur les machines virtuelles</a></li>
<li><a href="../fr495464/index.html">Message d'information 404 - non seulement une erreur, mais aussi des vacances</a></li>
<li><a href="../fr495468/index.html">Algorithme de reconnaissance des étiquettes de prix qui fonctionne même sur les terminaux de collecte de données</a></li>
<li><a href="../fr495472/index.html">Le passage au végétarisme n'empêchera pas les gens d'être infectés par des maladies comme COVID-19</a></li>
<li><a href="../fr495474/index.html">DataGrip 2020.1: lancement des configurations, exportation vers Excel, résultats dans l'éditeur et plus</a></li>
<li><a href="../fr495476/index.html">Pourquoi le succès d'Atari DeepMind AI est décevant</a></li>
<li><a href="../fr495478/index.html">Testeur de données grandes et petites: tendances, théorie, mon histoire</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>