<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßíüèø üññüèº üë©üèø‚Äçüè≠ Do we need such a format? .. and some statistics üçÅ ü•Ä üë®üèø‚Äçüî¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For several months in his spare time he was developing a new image format. Here is what came of this in the form of a presentation:
 
 
 
 
 
 
 
 
 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Do we need such a format? .. and some statistics</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489618/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For several months in his spare time he was developing a new image format. </font><font style="vertical-align: inherit;">Here is what came of this in the form of a presentation:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_o/vx/9o/_ovx9ogax2g4xhvbxhok1kybakq.png"><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/cj/qe/dc/cjqedcojxxxmlkykyugebropj9q.png"><br>
<br>
<img src="https://habrastorage.org/webt/ol/lh/p4/ollhp4pmm96i2gfmu5tusg1gmec.png"><br>
<br>
<img src="https://habrastorage.org/webt/qx/fe/gh/qxfegh1gi74ippk7kdm0nntv7si.png"><br>
<br>
<img src="https://habrastorage.org/webt/tq/pj/zy/tqpjzynkehka5xmgrfx7whhd-0s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At such dimensions, on average, the occupied image PNG can be used to record the same images as 43% JPG, and on VRP as 44% JPG. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now on the graph (trend lines are polynomial, 2nd degree, dashed lines are extrapolation of my lean brain): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lk/gm/z6/lkgmz6ohbkxurh1_3mbxj1omu3s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VRP is less than BMP (almost uncompressed) from 1B to 350 B and from ~ 7KB, that is, compression works. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VRP with an uncompressed image size: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
from 1 B to 250 B: optimal </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
from 250 B to 1 KB: acceptable </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
from 1 KB to 7 KB: not optimal </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
from 7 KB to 400 KB: possibly acceptable </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
from 400 KB: possibly optimal </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now let's compare VRP ( lossless) and raster formats that support lossy compression (but the error is no more than ¬± 10/256 on average per pixel per channel - thanks for the idea</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Griboks</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) - different templates were tested for each format (so that all images in this format satisfy the condition ‚Äî lossy compression was successful only with JPG, other formats satisfy the condition only without loss) </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-n/gq/q3/-ngqq3grrcssg7wuvkbn5_kj4qu.png"><br>
<br>
<img src="https://habrastorage.org/webt/oo/w7/jw/oow7jwk_rby3pbuasl4eclmroeu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trend lines are logarithmic, formats in increasing size: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JPEG 80% quality downsampling 4: 2: 2 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VectoRabbitPicture lossless </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JPEG 2000 lossless </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JPEG XR lossless </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WebP lossless </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also analyzed: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 HEIF: images up to 64x64 are not supported and colors are distorted in any case </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 DjVu: in any case, large losses come out </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* the scope of this analysis - poorly visible loss of quality and small images</font></font><br>
<br>
<img src="https://habrastorage.org/webt/i1/eq/ye/i1eqyemcfuyb_56fhqh0hypd1_y.png"><br>
<br>
<img src="https://habrastorage.org/webt/v9/vp/zy/v9vpzyzoumrcle0gadme11gu-pq.png"><br>
<br>
<img src="https://habrastorage.org/webt/xo/du/oi/xoduoiuc3ttoe9pqoww4ew6gvng.png"><br>
<br>
<img src="https://habrastorage.org/webt/d1/wt/ni/d1wtninzwrwxchy4fmg5z07qnco.png"><br>
<br>
<img src="https://habrastorage.org/webt/2j/x2/4d/2jx24dfdtzb2p_ss6nm6oyv2heo.png"><br>
<br>
<img src="https://habrastorage.org/webt/rz/vy/ds/rzvydsutopzo_sm3tcrag-kdlie.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When automatically tracing from a raster, the result is lossy. </font><font style="vertical-align: inherit;">In VRP, at least there is no loss up to a scale of 100%. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And as you can see on the graph, at the same time, the icons, pictograms and simple logos in SVG (and in almost any other vector formats) will also obviously have several times more VRP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also, since VRP is a lossless format at scales up to 100%, it is possible to get exactly the same results from the same file as PNGA; if you have extra time, even mix different results! </font><font style="vertical-align: inherit;">Also, when choosing VRP results, this will take less time than raster formats</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faster Decoding</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I believe that due to hardware acceleration and in the case of light compression, since the data is stored in a vector form, and not about each pixel separately and interpolation (PNG) is not required, there are fewer primitives and they are encoded not in human language, but specifically for the decoder (SVG) will be a faster rendering of the image (after the file has been downloaded). This is very important with large photos and weak devices, as well as for future plans for the development of the format. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Several coding patterns with a single decoding pattern, depending on which is stronger from the above or something in between. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compression of any vector images</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> with losses, but you can specify any percentage of losses</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2r/rz/iw/2rrziwqxnl2ic_d_wq80ujm5eji.png"><br>
<br>
<img src="https://habrastorage.org/webt/g7/1m/0h/g71m0hnvlbvl2gegajzilzejv0i.png"><br>
<br>
<img src="https://habrastorage.org/webt/oc/yi/ij/ocyiij2xphvst6fwaww5ls-y1vc.png"><br>
<br>
<img src="https://habrastorage.org/webt/ei/5k/mh/ei5kmhtw-riv5gpjzouswfvgywk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The VRP line indicates where other vector formats are located (in size and how much you need to lose in order to be a plus relative to the format): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ya/ct/6n/yact6nofy9iwwub88eh2mss3bee.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Do not wait, the image on the right will not load better) </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stylize images</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to make the image unique and create video effects. There are several revolutionary possibilities for styling: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
a) The choice of how to stylize strongly (from 1 to 100) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
b) How many colors to use (all, 2mln, ..., 512, 64, 8) - the result varies greatly and not only colors </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
c) Choice the shape of the element (circle, triangle, square, heart, cat ...) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d) The size of the polygons (from 0.5 to 1) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
e) The size of the additions to the polygons and whether they are needed (from 0 to 1) </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* For styling, the image must be in VRP format</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/6u/wy/vt/6uwyvtrnajhdg_6_opmdl5blr7m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here are a few results with different settings: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Above the settings image (a, b, c, d, e). </font><font style="vertical-align: inherit;">Everywhere without interpolation, the </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x_/ic/xo/x_icxojpcxyqektbthbte0irgac.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Automatic algorithm will not be able to identify the picture and will consider it original, even if it does not stylize very much: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5 parameters (a, b, c, d, e) with completely different values ‚Äã‚Äãplus several interpolation options (both at the input and at the output) give an infinite number of options and even different stylizations will be considered the original picture without claims of copyright infringement. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It can also be used as a video effect, based on a static frame or a set of frames from a video, when some parameters smoothly change and each result is recorded as a frame.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Progressiveness</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Typically, on sites, the picture is loaded from top to bottom or sometimes the quality grows as it loads. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In VRP format, this is not possible, but in 27% of cases or in 100% of cases when choosing the ‚ÄúFastest Rendering‚Äù template during saving, not color quality will improve when loading , i.e. </font><font style="vertical-align: inherit;">the picture is immediately visible and you can understand that on it, plus, the last stages of loading the eye will be almost invisible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Illustrations in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">original presentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">(download and watch through F5 in PowerPoint) </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imitation of drawing an image</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Illustration in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">original presentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">(download and watch through F5 in PowerPoint) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The format can be easily supplemented.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Format development and addition of new features with full backward compatibility</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Programs that do not support the new version of the format will still be able to open files, with the exception of new features. </font><font style="vertical-align: inherit;">Programs that support the new version of the format will open all the old versions of the format, and also if in the specific case new functions are not used, the file will immediately become the oldest version and will weigh less.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shortcomings</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Basically, all the shortcomings can be eliminated, but it takes time and money. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So far, slow conversion and compression, due to the non-optimization of the algorithm, the use of an outdated programming language and non-adaptation for x64, which is why processing images from more than 1000 pixels so far takes unacceptable time. </font><font style="vertical-align: inherit;">This can definitely be eliminated, but it takes a lot of man-hours. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vector compression, progressiveness, simulation of drawing can definitely be done, but not yet fully implemented </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Faster decoding has not yet been proved</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Development plans</font></font></h4><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Correct deficiencies</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implement everything to the end</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Improve display and compression as much as possible</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add transparency support</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Develop based on this format, format and algorithms for animation and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">video</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> with all the same features</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monetization</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can monetize both the format and the services that provide services based on the algorithm in completely different ways. </font><font style="vertical-align: inherit;">Of the most obvious:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reception of sponsorship for the creation and maintenance of an open format and free provision for programs based on it</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sale of licenses for using the format in video / cameras / printers</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selling programs that implement the interface for working with the format and all the features of the algorithm</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Creating a paid library for using the format and services based on it</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sell ‚Äã‚Äãa finished work product to a large company</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
That's almost all. </font><font style="vertical-align: inherit;">Soon I will add a few more tables. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Waiting for your comments - is this format needed? </font><font style="vertical-align: inherit;">Why yes? </font><font style="vertical-align: inherit;">Why not? </font><font style="vertical-align: inherit;">Where can I be wrong? </font><font style="vertical-align: inherit;">Who is willing to invest? </font><font style="vertical-align: inherit;">Who is ready to buy a working prototype?</font></font></b></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en489604/index.html">How do I, team leader, evaluate projects</a></li>
<li><a href="../en489608/index.html">Interaction with NIDD via SCEF using the Postman utility. A brief tour of SCEF and its features</a></li>
<li><a href="../en489610/index.html">Full home automation in a new building</a></li>
<li><a href="../en489612/index.html">DEFCON 27 Conference. Duplication of mechanical keys with limited access. Part 2</a></li>
<li><a href="../en489614/index.html">Marking of shoe residues in 1C. Solving the problem of scanning and uploading to Honest Sign</a></li>
<li><a href="../en489620/index.html">9 Windows Terminal Tips by Scott Hanselman</a></li>
<li><a href="../en489622/index.html">We make Python and Bash friends: smart-env and python-shell libraries</a></li>
<li><a href="../en489626/index.html">Paul Graham: How to write useful (on Habr)</a></li>
<li><a href="../en489628/index.html">Is higher education compulsory in IT?</a></li>
<li><a href="../en489630/index.html">Stack Overflow merges user e-mail addresses</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>