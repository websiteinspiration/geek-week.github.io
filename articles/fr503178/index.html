<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî™ üìß üíß Apple Mac et appareils fantaisie. LTO, SAS, Fibre Channel, eSATA üíÜüèª ü§úüèª ‚õ≤Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le sujet de cet article est de connecter des p√©riph√©riques externes au Mac via des interfaces SAS, Fibre Channel (FC), eSATA. Faites imm√©diatement une...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Apple Mac et appareils fantaisie. LTO, SAS, Fibre Channel, eSATA</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503178/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le sujet de cet article est de connecter des p√©riph√©riques externes au Mac via des interfaces SAS, Fibre Channel (FC), eSATA. Faites imm√©diatement une r√©servation pour r√©soudre le probl√®me d'acc√®s √† de tels appareils, il y a une mani√®re saine: assembler un PC bon march√©, y coller une carte contr√¥leur HBA SAS ou FC (par exemple, l'adaptateur LSI le plus simple), connecter vos appareils √† ce contr√¥leur, installer n'importe quel Linux sur le PC et travailler depuis Mac via le r√©seau. Mais c'est banal et sans int√©r√™t. Nous allons suivre le chemin du hardcore et connecter nos appareils </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">directement</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> au Mac.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce dont nous aurons besoin pour cela: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- une somme d'argent d√©cente pour acheter de nouveaux √©quipements, ou bonne chance dans les ench√®res sur eBay (o√π, avec un peu d'effort, vous pouvez acheter l'√©quipement requis des g√©n√©rations pr√©c√©dentes 10 fois moins cher que la liste de prix); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Cet article.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour travailler avec une bande magn√©tique (actuellement repr√©sent√©e presque universellement par le format LTO), vous devez disposer d'un lecteur de bande (lecteur de bande) ou d'une biblioth√®que de bandes de la norme LTO. Il s'agit d'un appareil assez cher pour l'achat initial (√† partir de centaines de milliers de roubles), mais qui en vaut la peine lors de l'achat d'un d'occasion. √âtant donn√© que les g√©n√©rations LTO changent environ tous les deux ans et que la compatibilit√© est limit√©e √† deux g√©n√©rations, le march√© secondaire est suffisamment satur√© d'appareils utilisables de quatre ans ou plus, c'est-√†-dire l'ann√©e derni√®re et au-del√†. Si vous achetez un nouvel appareil √† des fins commerciales, vous comprenez vous-m√™me pourquoi vous en avez besoin. Si vous souhaitez acheter pour la maison et la famille, vous pouvez consid√©rer cette option comme un moyen d'archiver les informations (car le m√©dia lui-m√™me est tr√®s bon march√© pour 1 gigaoctet).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä partir de la g√©n√©ration LTO-5 (et en partie LTO-4), les p√©riph√©riques √† bande magn√©tique sont connect√©s √† l'ordinateur via une interface SAS ou FC (il existe g√©n√©ralement deux versions de chaque p√©riph√©rique) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
.Par contre, Apple nous fournit gentiment dans notre Mac Interface USB-C (fonctionnant via les protocoles USB, Thunderbolt 3 ou DisplayPort), parfois une interface Ethernet, ainsi que des adaptateurs propri√©taires Thunderbolt 3 - Thunderbolt 2 et Thunderbolt - FireWire 800. Une </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
situation d√©sesp√©r√©e? Pas vraiment. Heureusement, le bus Thunderbolt peut fonctionner en mode PCIe et offrir la possibilit√© de connecter des cartes PCIe de la m√™me mani√®re que si elles √©taient install√©es directement √† l'int√©rieur du bo√Ætier de l'ordinateur. Pour cette raison, toutes les extensions de la configuration mat√©rielle Mac sont possibles, il y aurait un adaptateur et des pilotes appropri√©s.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La fa√ßon la plus simple sur le plan conceptuel de r√©soudre le probl√®me consiste √† utiliser un bo√Ætier externe pour les adaptateurs PCIe avec interface Thunderbolt (syst√®me d'extension de carte PCIe), dans lequel vous pouvez installer un contr√¥leur (adaptateur de bus h√¥te, HBA) SAS ou FC. Par exemple, ces bo√Ætes sont produites par </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sonnet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et plusieurs autres. Il y a une nuance: tous les contr√¥leurs ne nous conviennent pas, mais uniquement avec un pilote pour macOS. Il n'y a que quelques cartes de ce type, et les moins ch√®res et les plus populaires (par exemple, le m√™me LSI) ne sont pas incluses dans leur nombre. Heureusement, Sonnet avait du mal √† compiler </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tableau de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">compatibilit√© des</font></a><font style="vertical-align: inherit;"> cartes PCIe pour diff√©rents syst√®mes d'exploitation via l'interface Thunderbolt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre solution consiste √† acheter un convertisseur pr√™t √† l'emploi pour le convertisseur d'interface Thunderbolt-SAS ou Thunderbolt-FC, qui, en fait, est un assemblage pr√™t √† l'emploi de la bo√Æte et du contr√¥leur. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ATTO est</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> surtout connu dans ce domaine </font><font style="vertical-align: inherit;">, mais on trouve √©galement des produits d'autres soci√©t√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notez que tous les contr√¥leurs SAS et FC ne sont pas certifi√©s conformes √† la norme LTO, car cela seul co√ªte de l'argent. Certains fabricants √©crivent directement que le fonctionnement de leurs contr√¥leurs avec des lecteurs de bande n'est pas fourni. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour compl√©ter le tableau, nous notons que la soci√©t√© mLogic produit un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">appareil</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, qui est un lecteur IBM LTO-8 dans un bo√Ætier externe, dans lequel le convertisseur SAS vers Thunderbolt 3 est imm√©diatement int√©gr√©. Ceci, cependant, est encore plus exotique que tout ce qui pr√©c√®de, en particulier par rapport aux normes de notre r√©gion. Je doute que cet appareil puisse m√™me √™tre l√©galement import√© en Russie (les lecteurs LTO contiennent des outils cryptographiques, et les fabricants tels qu'IBM et HP, pour cette raison, re√ßoivent l'autorisation d'importation FSB pour chaque mod√®le). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous consid√©rons par exemple un ensemble sp√©cifique d'√©quipements, dont l'auteur est devenu propri√©taire √† la suite de plusieurs acquisitions r√©ussies, mais le principe g√©n√©ral devrait √™tre maintenu pour toutes les options. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons donc l'√©quipement suivant pour travailler avec du ruban:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- ordinateur Apple Mac mini 2018 avec macOS 10.15 Catalina, qui dispose de ports USB-C avec prise en charge de Thunderbolt 3; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Adaptateur Apple Thunderbolt 3 / Thunderbolt 2; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- C√¢ble Apple Thunderbolt 2; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Convertisseur d'interface ATTO ThunderLink SH 1068 (2 * Thunderbolt / 2 * SAS-2); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- C√¢ble SAS SFF-8088 - SFF-8088; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- lecteur de bande LTO-5 IBM TS2350; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Cartouches LTO-5, cartouche de nettoyage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, comme on dit, avec toutes ces ordures, nous allons essayer de d√©coller. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
T√©l√©chargez la derni√®re version du pilote ThunderLink SH 1068 sur le site Web d'ATTO (apparemment, pour notre commodit√©, il est combin√© avec le pilote SH 2068 et se trouve dans la section 2068, qui est √©crite uniquement dans l'archive du pilote lui-m√™me) et l'utilitaire de configuration ATTO.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7b8/7a2/a61/7b87a2a613e003ad3929a7fe456145f4.gif" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le pilote, bien s√ªr, doit √™tre install√©. </font><font style="vertical-align: inherit;">Avant de telles actions, l'auteur conseille de toujours faire un instantan√© du syst√®me de fichiers APFS du disque de d√©marrage avec la commande</font></font><br>
<br>
<pre><code class="bash hljs">tmutil localsnapshot</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ou une copie de sauvegarde du disque de d√©marrage, s'il existe HFS +. </font><font style="vertical-align: inherit;">On ne sait jamais quoi. </font><font style="vertical-align: inherit;">Il sera ensuite facile de revenir en arri√®re √† partir d'un instantan√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, inexp√©riment√© mais faisant preuve d'une diligence raisonnable, l'esprit sera sans aucun doute enclin √† lire attentivement les instructions ATTO pour installer le pilote et l'ex√©cuter. </font><font style="vertical-align: inherit;">Le r√©sultat est tadam! </font><font style="vertical-align: inherit;">- nous obtenons le syst√®me d'exploitation suspendu √† l'√©tape de d√©marrage. </font><font style="vertical-align: inherit;">Ici, nous pouvons utiliser un instantan√© √† partir duquel vous pouvez r√©cup√©rer en appelant Time machine √† partir de la partition de r√©cup√©ration, ou vous pouvez effacer manuellement un kext malade du catalogue d'extension du noyau de la m√™me partition de r√©cup√©ration (l'auteur ne recommande g√©n√©ralement pas de le faire).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pourquoi √ßa arrive? </font><font style="vertical-align: inherit;">Parce qu'Apple a pris soin de nous. </font><font style="vertical-align: inherit;">Dans les versions r√©centes de macOS, il n'est pas facile de prendre et d'injecter du code superflu dans le processus de d√©marrage. </font><font style="vertical-align: inherit;">Les bons programmeurs Apple ont bloqu√© un tel comportement destructeur. </font><font style="vertical-align: inherit;">Plus pr√©cis√©ment, ils l'ont bloqu√© de moiti√© lorsque l'attente du pilote est introduite, mais le pilote lui-m√™me ne l'est pas, donc tout se bloque. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que doit faire un esprit sophistiqu√© avant d'installer un pilote? </font><font style="vertical-align: inherit;">D'abord, donnez la commande:</font></font><br>
<br>
<pre><code class="bash hljs">csrutil status</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si en r√©ponse, nous obtenons:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtat de la protection de l'int√©grit√© du syst√®me: activ√©.</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cela signifie que les bons programmeurs Apple se soucient de nous, donc rien ne viendra de nous jusqu'√† ce que nous d√©sactivions leur merveilleuse protection. </font><font style="vertical-align: inherit;">Pour ce faire, nous red√©marrons dans la partition de r√©cup√©ration (‚åòR), appelons le terminal et donnons la commande:</font></font><br>
<br>
<pre><code class="bash hljs">csrutil <span class="hljs-built_in">disable</span></code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cela, nous red√©marrons dans le syst√®me de travail, puis nous installons le pilote et en m√™me temps l'utilitaire de configuration ATTO (en principe, l'utilitaire de configuration n'est n√©cessaire que pour les diagnostics et n'est pas requis pendant le fonctionnement normal). Dans le processus, lorsque nous vous le demandons, nous confirmons l'autorisation ATTO dans les param√®tres syst√®me. Apr√®s l'installation, vous pouvez √† nouveau red√©marrer dans la partition de r√©cup√©ration et donner la commande</font></font><br>
<br>
<pre><code class="bash hljs">csrutil <span class="hljs-built_in">enable</span></code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apple prend √† nouveau soin de nous. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons maintenant une interface prise en charge par le pilote pour les p√©riph√©riques SAS externes (ou FC, si le convertisseur FC a √©t√© utilis√©). Mais comment travailler avec la bande √† un niveau logique? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme le sait un esprit inexp√©riment√© mais √©rudit, tout syst√®me compatible Unix prend en charge les lecteurs de bande au niveau du noyau et les principaux utilitaires du syst√®me, qui comprennent principalement mt (gestion des bandes) et tar (un archiveur prenant en charge le travail avec les archives de bandes) . Mais que sp√©cifiera l'esprit sophistiqu√©? Tout syst√®me compatible Unix </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sauf macOS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Apple s'inqui√©tait pour nous en supprimant la prise en charge des p√©riph√©riques de bande de son code.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais est-il vraiment impossible de renvoyer ce code en portant les utilitaires open source open source standard sur macOS? La bonne nouvelle est que Tolis l'a d√©j√† fait (un lien auquel je ne fournis pas) dans son produit Tolis Tape Tools. La mauvaise nouvelle est que ladite soci√©t√© estime l'utilisation des r√©sultats de ses travaux √† 399 dollars am√©ricains. Les estimations de ce fait peuvent √™tre diff√©rentes, mais l'auteur personnellement n'est pas pr√™t √† payer √† quelqu'un 400 dollars pour un code, pour la plupart √©crit par des personnes compl√®tement diff√©rentes et ouvertement utilis√© depuis les ann√©es 1970, et donc ce probl√®me est pour l'auteur consid√®re ferm√©. (√Ä propos, il y a un projet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IOSCSITape</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gratuit </font><font style="vertical-align: inherit;">sur le m√™me sujet </font><font style="vertical-align: inherit;">sur le github dans un √©tat vague </font><font style="vertical-align: inherit;">).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heureusement, il existe une soci√©t√© IBM dans le monde dont les app√©tits commerciaux sont d'une √©chelle compl√®tement diff√©rente, et n'apparaissent donc pas dans tous les d√©tails. Elle a notamment d√©velopp√© le syst√®me de fichiers de bandes LTFS open source, qui est √©galement distribu√© pour macOS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe une nuance dans le fait que diff√©rents fabricants de p√©riph√©riques de bande publient leurs propres versions de LTFS qui prennent en charge leurs p√©riph√©riques. √âtant donn√© que l'auteur utilise le lecteur de bande IBM, LTFS a √©galement √©t√© install√© par IBM. Les disques tiers peuvent avoir besoin de leurs propres ports LTFS. Et il existe une impl√©mentation openLTFS universelle sur github et homebrew.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est important pour nous que LTFS utilise la fonction de partition multim√©dia et puisse donc fonctionner avec des p√©riph√©riques et des cartouches, √† commencer par la g√©n√©ration LTO-5. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, dans notre cas, nous t√©l√©chargeons le produit IBM Spectrum Archive Single Drive Edition pour macOS √† partir du site Web IBM, qui inclut simplement l'impl√©mentation LTFS. </font><font style="vertical-align: inherit;">Sans aucune aventure, nous installons le produit avec notre propre installateur. </font><font style="vertical-align: inherit;">Dans le processus, il installe √©galement le package FUSE, et dans les param√®tres syst√®me, vous devrez confirmer l'autorisation d'un programmeur intelligent nomm√© Anatol Pomozov, dont d√©pend dans ce cas tout IBM. </font><font style="vertical-align: inherit;">Respect et respect pour cette personne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est conseill√© d'√©crire imm√©diatement la ligne: /Library/Frameworks/LTFS.framework/Versions/Current/etc/ltfs.conf.local:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">option single-drive sync_type = time @ 1</font></font><br>
</blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sp√©cifiant le montage de la bande par d√©faut avec la r√©initialisation du tampon d'enregistrement apr√®s 1 minute d'inactivit√© (5 minutes par d√©faut). </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/47b/ac4/46a/47bac446a112a11830c3df9ea44dbad1.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, tout est pr√™t √† se connecter. </font><font style="vertical-align: inherit;">Nous connectons la cha√Æne: Mac - adaptateur T3 / T2 - c√¢ble Thunderbolt - convertisseur ATTO - c√¢ble SAS - lecteur de bande (le choix de plusieurs ports sur le Mac, le convertisseur et le lecteur est sans importance). </font><font style="vertical-align: inherit;">Mettez le convertisseur sous tension. </font><font style="vertical-align: inherit;">Mettez le lecteur de bande sous tension. </font><font style="vertical-align: inherit;">On attend l'initialisation du variateur par son indication. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous donnons la commande:</font></font><br>
<br>
<pre><code class="bash hljs">ltfs -o device_list</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hourra! </font><font style="vertical-align: inherit;">Nous obtenons (de la mani√®re diagnostique habituelle pour IBM):</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">307 LTFS14000I D√©marrage LTFS, LTFS version 2.4.2.0 (10418), niveau de journalisation 2. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
307 LTFS14058I Sp√©cification de format LTFS version 2.4.0. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
307 LTFS14104I Lanc√© par "ltfs -o device_list". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
307 LTFS14105I Ce binaire est con√ßu pour Mac OS X. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
307 LTFS14106I La version GCC est 4.2.1 compatible Apple Clang 4.1 ((tags / Apple / clang-421.11.66)). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
307 LTFS17087I Version du noyau: Darwin Kernel Version 19.4.0: Wed Mar 4 22:28:40 PST 2020; </font><font style="vertical-align: inherit;">racine: xnu-6153.101.6 ~ 15 / RELEASE_X86_64. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
307 LTFS17085I Plugin: Chargement du backend de bande "iokit". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Liste des p√©riph√©riques de bande:. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nom du p√©riph√©rique = 0, ID fournisseur = IBM, ID produit = ULT3580-TD5, num√©ro de s√©rie = **********, nom du produit = [ULT3580-TD5].</font></font><br>
</blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous ins√©rons la cartouche, attendons le t√©l√©chargement et formater:</font></font><br>
<br>
<pre><code class="bash hljs">mkltfs -d 0 -nTest -r <span class="hljs-string">"size=10M/name=.DS_Store"</span></code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, le param√®tre -d sp√©cifie le num√©ro du lecteur (toujours z√©ro s'il est le seul, mais ne peut pas √™tre omis de cette commande), -n est le nom de la bande (vous pouvez l'omettre) et le param√®tre -r requiert que le contenu des fichiers .DS_Store ne d√©passe pas la taille 10 m√©gaoctets, dans la section index (c'est-√†-dire destin√©e aux r√©pertoires) de la bande au lieu de la section donn√©es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La vie myst√©rieuse dans le lecteur de bande a disparu. Nous attendons quelques minutes, nous obtenons la r√©ponse:</font></font><br>
<br>
<blockquote>LTFS15000I Starting mkltfs, LTFS version 2.4.2.0 (10418), log level 2.<br>
LTFS15041I Launched by ¬´mkltfs -d 0 -nTest -r size=10M/name=.DS_Store¬ª.<br>
LTFS15042I This binary is built for Mac OS X.<br>
LTFS15043I GCC version is 4.2.1 Compatible Apple Clang 4.1 ((tags/Apple/clang-421.11.66)).<br>
LTFS17087I Kernel version: Darwin Kernel Version 19.4.0: Wed Mar 4 22:28:40 PST 2020; root:xnu-6153.101.6~15/RELEASE_X86_64.<br>
LTFS15003I Formatting device '0'.<br>
LTFS15004I LTFS volume blocksize: 524288.<br>
LTFS15005I Index partition placement policy: size=10M/name=.DS_Store.<br>
<br>
LTFS11337I Update index-dirty flag (1) ‚Äî NO_BARCODE (0x0x1021081e0).<br>
LTFS17085I Plugin: Loading ¬´iokit¬ª tape backend.<br>
LTFS30810I Opening a device through iokit driver (0).<br>
LTFS30814I Vendor ID is IBM.<br>
LTFS30815I Product ID is 'ULT3580-TD5 '.<br>
LTFS30816I Firmware revision is H976.<br>
LTFS30817I Drive serial is **********.<br>
LTFS17160I Maximum device block size is 1048576.<br>
LTFS11330I Loading cartridge.<br>
LTFS30854I Logical block protection is disabled.<br>
LTFS11332I Load successful.<br>
LTFS17157I Changing the drive setting to write-anywhere mode.<br>
LTFS15049I Checking the medium (mount).<br>
LTFS30854I Logical block protection is disabled.<br>
LTFS15010I Creating data partition b on SCSI partition 1.<br>
LTFS15011I Creating index partition a on SCSI partition 0.<br>
LTFS17165I Resetting the medium's capacity proportion.<br>
LTFS11097I Partitioning the medium.<br>
LTFS11100I Writing label to partition b.<br>
LTFS11278I Writing index to partition b.<br>
LTFS30808I READ_ATTR (0x8c) returns -20501.<br>
LTFS30865I READ_ATTR returns Invalid Field in CDB (-20501) 0.<br>
LTFS30836I Cannot read attribute (-20501).<br>
LTFS11336I The attribute does not exist. Ignore the expected error.<br>
LTFS17235I Writing index of NO_BARCODE to b (Reason: Format, 0 files) **********.<br>
LTFS17236I Wrote index of NO_BARCODE (b, **********).<br>
LTFS11337I Update index-dirty flag (0) ‚Äî NO_BARCODE (0x0x1021081e0).<br>
LTFS11100I Writing label to partition a.<br>
LTFS11278I Writing index to partition a.<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LTFS30808I READ_ATTR (0x8c) renvoie -20501. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LTFS30865I READ_ATTR renvoie un champ non valide dans CDB (-20501) 0. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LTFS30836I Impossible de lire l'attribut (-20501). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LTFS11336I L'attribut n'existe pas. </font><font style="vertical-align: inherit;">Ignorez l'erreur attendue. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LTFS17235I √âcriture de l'index de NO_BARCODE dans un (motif: format, 0 fichier) 9068025555. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LTFS17236I √âcriture de l'index de NO_BARCODE (a, **********). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'UUID du volume LTFS15013I est: 3802a70d-bd9f-47a6-a999-eb74ffa67fc1. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LTFS15019I La capacit√© de volume est de 1425 Go. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LTFS30854I La protection de bloc logique est d√©sactiv√©e. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LTFS15024I Medium format√© avec succ√®s.</font></font><br>
</blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Montez la bande format√©e:</font></font><br>
<br>
<pre><code class="bash hljs">sudo mkdir /Volumes/LTFS<font></font>
sudo chmod 777 /Volumes/LTFS/<font></font>
sudo ltfs /Volumes/LTFS</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous obtenons encore quelques minutes de fonctionnement du variateur, diagnostics:</font></font><br>
<br>
<blockquote>307 LTFS14000I LTFS starting, LTFS version 2.4.2.0 (10418), log level 2.<br>
307 LTFS14058I LTFS Format Specification version 2.4.0.<br>
307 LTFS14104I Launched by ¬´ltfs /Volumes/LTFS/¬ª.<br>
307 LTFS14105I This binary is built for Mac OS X.<br>
307 LTFS14106I GCC version is 4.2.1 Compatible Apple Clang 4.1 ((tags/Apple/clang-421.11.66)).<br>
307 LTFS17087I Kernel version: Darwin Kernel Version 19.4.0: Wed Mar 4 22:28:40 PST 2020; root:xnu-6153.101.6~15/RELEASE_X86_64.<br>
307 LTFS14063I Sync type is ¬´time¬ª, Sync time is 60 sec.<br>
307 LTFS17085I Plugin: Loading ¬´iokit¬ª tape backend.<br>
307 LTFS17085I Plugin: Loading ¬´unified¬ª iosched backend.<br>
307 LTFS14095I Set the tape device write-anywhere mode to avoid cartridge ejection.<br>
307 LTFS30810I Opening a device through iokit driver (0).<br>
307 LTFS30814I Vendor ID is IBM.<br>
307 LTFS30815I Product ID is 'ULT3580-TD5 '.<br>
307 LTFS30816I Firmware revision is H976.<br>
307 LTFS30817I Drive serial is **********.<br>
307 LTFS17160I Maximum device block size is 1048576.<br>
307 LTFS11330I Loading cartridge.<br>
307 LTFS30854I Logical block protection is disabled.<br>
307 LTFS11332I Load successful.<br>
307 LTFS17157I Changing the drive setting to write-anywhere mode.<br>
307 LTFS11005I Mounting the volume.<br>
307 LTFS30854I Logical block protection is disabled.<br>
307 LTFS17227I Tape attribute: Vendor = IBM.<br>
307 LTFS17227I Tape attribute: Application Name = LTFS.<br>
307 LTFS17227I Tape attribute: Application Version = 2.4.2.0.<br>
307 LTFS17227I Tape attribute: Medium Label =.<br>
307 LTFS17228I Tape attribute: Text Localization ID = 0x81.<br>
307 LTFS17227I Tape attribute: Barcode =.<br>
307 LTFS17227I Tape attribute: Application Format Version = 2.4.0.<br>
307 LTFS17228I Tape attribute: Volume Lock Status = 0x00.<br>
307 LTFS17227I Tape attribute: Media Pool name =.<br>
307 LTFS14111I Initial setup completed successfully.<br>
307 LTFS14112I Invoke 'mount' command to check the result of final setup.<br>
307 LTFS14113I Specified mount point is listed if succeeded.<br>
</blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et la voici, notre bande sur le bureau, appel√©e Test (ltfs)! La bande sans nom recevra le nom OSXFUSE Volume 0 (ltfs). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant tu peux travailler avec elle. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/06f/956/191/06f9561919067fcc4c631f390c8b4d1e.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, vous devez garder √† l'esprit qu'il est conseill√© de ne pas abuser de l'affichage du contenu des r√©pertoires de bande dans les fen√™tres du Finder, car il s'agit d'une op√©ration incroyablement co√ªteuse pour LTFS, mais il est pr√©f√©rable de travailler avec des commandes de terminal, ou de simplement vider le r√©pertoire de sauvegarde en vrac sur la bande, comme illustr√© dans la fen√™tre ci-dessus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soit dit en passant, il existe un utilitaire IBM sp√©cialement √©crit ltfs_copy et ses clones con√ßus pour une copie plus efficace entre la bande et le disque, mais jusqu'√† pr√©sent, l'auteur n'a pas √©t√© en mesure de les trouver dans le domaine public lors des recherches de surface. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez d√©monter la bande avec la commande:</font></font><br>
<br>
<pre><code class="bash hljs">umount /Volumes/LTFS</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ou jetez-le simplement dans le panier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, il existe une sorte de shell graphique pour macOS dans la nature pour faciliter ces actions, mais avons-nous, apr√®s de telles perversions, peur de taper quelques lignes dans le terminal? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme effet secondaire, nous avons la possibilit√© de connecter des disques eSATA externes via un c√¢ble SAS / 4 * eSATA.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f6f/47b/ca9/f6f47bca9d7ea9928136b4757bab2c0f.jpg" alt="image"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr503156/index.html">Les gares de Russie peuvent √™tre √©quip√©es d'imageurs thermiques russes; en apparence, ils sont tr√®s similaires aux Chinois</a></li>
<li><a href="../fr503158/index.html">L'intelligence artificielle peint une image par elle-m√™me, vraiment par elle-m√™me - sans apprendre des exemples d'autres peintures</a></li>
<li><a href="../fr503164/index.html">Publicit√© sur les jeux: politique de Google</a></li>
<li><a href="../fr503172/index.html">C #: Pr√©sentation des g√©n√©rateurs de code source</a></li>
<li><a href="../fr503176/index.html">Impl√©mentation d'un algorithme de d√©termination de la largeur d'un objet √† l'aide d'un t√©l√©m√®tre √† ultrasons et d'encodeurs en langage RobotC</a></li>
<li><a href="../fr503182/index.html">"Je suis le premier d√©veloppeur aveugle de mon entreprise." Partie 1</a></li>
<li><a href="../fr503184/index.html">Nous vous invitons √† la r√©union en ligne Zabbix</a></li>
<li><a href="../fr503192/index.html">oVirt en 2 heures. Partie 4. Op√©rations de base</a></li>
<li><a href="../fr503194/index.html">ISA ne pardonne pas les erreurs</a></li>
<li><a href="../fr503196/index.html">450 cours gratuits de la Ivy League</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>