<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêÄ üî† üïó Desarrollo de una biblioteca corporativa de componentes React. Enfoque multiplataforma üöí üéã üë®üèª‚Äçüåæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este art√≠culo cuenta la historia de la implementaci√≥n exitosa del sistema de dise√±o en la compa√±√≠a de uno de los minoristas de bricolaje m√°s grandes. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Desarrollo de una biblioteca corporativa de componentes React. Enfoque multiplataforma</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/luxoft/blog/501656/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este art√≠culo cuenta la historia de la implementaci√≥n exitosa del sistema de dise√±o en la compa√±√≠a de uno de los minoristas de bricolaje m√°s grandes. </font><font style="vertical-align: inherit;">Se describen los principios y enfoques del desarrollo multiplataforma de componentes de la interfaz de usuario utilizando las bibliotecas React y React Native, as√≠ como la soluci√≥n al problema de reutilizar el c√≥digo entre proyectos para diferentes plataformas.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, algunas palabras sobre c√≥mo comenz√≥ todo y por qu√© surgi√≥ la idea de implementar un dise√±o de sistema. Todo comenz√≥ con una aplicaci√≥n m√≥vil de Android para vendedores en tiendas. La aplicaci√≥n se basa en el marco React-Native. La funcionalidad inicial estaba representada por solo unos pocos m√≥dulos, como la b√∫squeda de productos en el cat√°logo y la tarjeta de producto, documento de ventas. Por cierto, ahora esta es una aplicaci√≥n bastante poderosa que ya ha reemplazado en gran medida la funcionalidad de los escritorios de informaci√≥n en las tiendas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, se lanzaron proyectos de aplicaciones web para empleados del departamento de log√≠stica, as√≠ como varios configuradores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta etapa, apareci√≥ una comprensi√≥n de los enfoques generales para el dise√±o de estas aplicaciones, as√≠ como la presencia de una base de c√≥digo bastante grande. Y era l√≥gico sistematizar el otro para su posterior reutilizaci√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para sistematizar UI / UX, se decidi√≥ desarrollar un sistema de dise√±o. No entrar√© en detalles sobre lo que es. En Internet, puede encontrar muchos art√≠culos sobre este tema. Por ejemplo, en Habr√©, el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trabajo de Andrei Sundiev</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se puede recomendar para leer </font><font style="vertical-align: inherit;">.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPor qu√© dise√±ar un sistema y cu√°les son sus ventajas? La primera es una experiencia com√∫n y la sensaci√≥n de usar productos. Los usuarios obtienen una interfaz familiar independientemente de la aplicaci√≥n: los botones se ven y funcionan de la forma en que est√°n acostumbrados, el men√∫ se abre en el lugar correcto y con la din√°mica correcta, los campos de entrada funcionan de la manera habitual. La segunda ventaja es la introducci√≥n de ciertos est√°ndares y enfoques comunes tanto desde el lado del dise√±o como desde el lado del desarrollo. Cada nueva funcionalidad se desarrolla de acuerdo con los c√°nones y enfoques ya establecidos. Desde los primeros d√≠as, los nuevos empleados reciben una l√≠nea de trabajo clara. El siguiente es reutilizar componentes y simplificar el desarrollo. No hay necesidad de "reinventar la rueda" cada vez. Puede crear interfaces a partir de bloques preparados con el resultado final esperado.Bueno, la principal ventaja en primer lugar para el cliente es ahorrar dinero y tiempo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, qu√© hemos hecho. De hecho, hemos creado no solo una biblioteca de componentes, sino un marco completo multiplataforma. El marco se basa en un esquema por lotes. Tenemos 5 paquetes principales de npm. Es el n√∫cleo para implementar aplicaciones web y Android multiplataforma. Paquetes de m√≥dulos, utilidades y servicios. Y un paquete de componentes, que se discutir√° m√°s adelante. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n se muestra el diagrama UML del paquete de componentes. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wi/kn/xs/wiknxsuqj_n4jze72crt4c4u10g.jpeg" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Incluye los componentes en s√≠, algunos de los cuales son independientes (elementos), y algunos est√°n conectados entre s√≠, as√≠ como el n√∫cleo interno o "sub-n√∫cleo".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consideremos con m√°s detalle lo que se incluye en el "subn√∫cleo". El primero es la capa visual del dise√±o del sistema. Todo aqu√≠ se trata de la paleta de colores, tipograf√≠a, sistema de sangr√≠a, cuadr√≠culas, etc. El siguiente bloque son los servicios necesarios para que los componentes funcionen, como: ComponentsConfig (configuraci√≥n de componentes), StyleSet (analizar√© este concepto con m√°s detalle m√°s adelante) y Device (un m√©todo para trabajar con la API del dispositivo). Y el tercer bloque es todo tipo de ayudantes (resolvers, generadores de estilos, etc.).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fx/7l/f6/fx7lf6zz7n8olddc2yuf7576s6a.jpeg" alt="imagen"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al desarrollar la biblioteca, utilizamos un enfoque at√≥mico para el dise√±o de componentes. Todo comenz√≥ con la creaci√≥n de componentes o elementos elementales. Son "part√≠culas" elementales que son independientes entre s√≠. Los principales son Ver, Texto, Imagen, Icono. Los siguientes son los componentes m√°s complejos. Cada uno de ellos usa uno o m√°s elementos para construir su estructura. Por ejemplo, botones, campos de entrada, selecciones, etc. El siguiente nivel son los patrones. Son una combinaci√≥n de componentes para resolver cualquier problema de IU. Por ejemplo, un formulario de autorizaci√≥n, un encabezado con par√°metros y configuraciones, o una tarjeta de producto dise√±ada por un dise√±ador que puede usarse en diferentes m√≥dulos. El √∫ltimo y m√°s dif√≠cil y al mismo tiempo importante nivel es el llamado comportamiento. Estos son m√≥dulos listos para usar,Implementando cierta l√≥gica de negocios y, posiblemente, incluyendo el conjunto necesario de solicitudes de back-end.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/00/jv/e3/00jve3iwyh64n0tifikfxtoz0v4.jpeg" alt="imagen"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, pasemos a la implementaci√≥n de la biblioteca de componentes. </font><font style="vertical-align: inherit;">Como mencion√© antes, tenemos dos plataformas de destino: web y Android (react-native). </font><font style="vertical-align: inherit;">Si en la web estos son elementos familiares para todos los desarrolladores web como div, span, img, header, etc., en react-native estos son los componentes View, Text, Image, Modal. </font><font style="vertical-align: inherit;">Y lo primero que acordamos es el nombre de los componentes. </font><font style="vertical-align: inherit;">Decidimos usar un sistema de estilo nativo de reacci√≥n, como </font><font style="vertical-align: inherit;">en primer lugar, algunos componentes b√°sicos ya se han implementado en proyectos y, en segundo lugar, estos nombres son los m√°s universales y comprensibles para los desarrolladores web y los nativos de reacci√≥n. </font><font style="vertical-align: inherit;">Por ejemplo, considere el componente Ver. </font><font style="vertical-align: inherit;">El m√©todo del componente de representaci√≥n condicional para la web se parece a esto:</font></font><br>
<br>
<pre><code class="javascript hljs">render() {
	<span class="hljs-keyword">return</span>(
		<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> {<span class="hljs-attr">...props</span>}&gt;</span>
			{children}
		<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
	)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquellos. </font><font style="vertical-align: inherit;">debajo del cap√≥, esto no es m√°s que un div con los accesorios y descendientes necesarios. </font><font style="vertical-align: inherit;">En react-native, la estructura es muy similar, solo se usa el componente View en lugar de divs:</font></font><br>
<br>
<pre><code class="javascript hljs">render() {
	<span class="hljs-keyword">return</span>(
		<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> {<span class="hljs-attr">...props</span>}&gt;</span>
			{children}
		<span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><font></font>
	)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Surge la pregunta: ¬øc√≥mo combinar esto en un componente y al mismo tiempo dividir el renderizado? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ es donde un patr√≥n de Reacci√≥n llamado HOC o Componente de Orden Superior viene al rescate. </font><font style="vertical-align: inherit;">Si intenta dibujar un diagrama UML de este patr√≥n, obtendr√° algo como lo siguiente:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/73/sz/tb/73sztbbrwdkvgknh3edlwk93gyo.jpeg" alt="imagen"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, cada componente consta de un llamado delegado que recibe accesorios del exterior y es responsable de la l√≥gica com√∫n a ambas plataformas, y de dos partes de la plataforma en las que los m√©todos espec√≠ficos para cada plataforma ya est√°n encapsulados y la representaci√≥n m√°s importante. </font><font style="vertical-align: inherit;">Por ejemplo, considere el c√≥digo de delegado de bot√≥n:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buttonDelegate</span>(<span class="hljs-params">ReactComponent: ComponentType&lt;Props&gt;</span>): <span class="hljs-title">ComponentType</span>&lt;<span class="hljs-title">Props</span>&gt; </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ButtonDelegate</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span>&lt;<span class="hljs-title">Props</span>&gt; </span>{<font></font>
        <font></font>
        <span class="hljs-comment">// Button common methods</span><font></font>
<font></font>
        render() {<font></font>
           <span class="hljs-keyword">const</span> { onPress, onPressIn, onPressOut } = <span class="hljs-keyword">this</span>.props;
            <span class="hljs-keyword">const</span> delegate = {
                <span class="hljs-attr">buttonContent</span>: <span class="hljs-keyword">this</span>.buttonContent,
                <span class="hljs-attr">buttonSize</span>: <span class="hljs-keyword">this</span>.buttonSize,
                <span class="hljs-attr">iconSize</span>: <span class="hljs-keyword">this</span>.iconSize,
                <span class="hljs-attr">onClick</span>: onPress,
                <span class="hljs-attr">onMouseUp</span>: onPressIn,
                <span class="hljs-attr">onMouseDown</span>: onPressOut,
                <span class="hljs-attr">onPress</span>: <span class="hljs-keyword">this</span>.onPress,
                <span class="hljs-attr">textColor</span>: <span class="hljs-keyword">this</span>.textColor,<font></font>
            };<font></font>
            <span class="hljs-keyword">return</span> (<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ReactComponent</span> {<span class="hljs-attr">...this.props</span>} <span class="hljs-attr">delegate</span>=<span class="hljs-string">{delegate}</span> /&gt;</span></span>);<font></font>
        }<font></font>
    };<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El delegado recibe como argumento la parte de plataforma del componente, implementa m√©todos comunes a ambas plataformas y los pasa a la parte de plataforma. </font><font style="vertical-align: inherit;">La parte de la plataforma del componente en s√≠ es la siguiente:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Button</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span>&lt;<span class="hljs-title">WebProps</span>, <span class="hljs-title">State</span>&gt; </span>{<font></font>
    <font></font>
   <span class="hljs-comment">// Web specific methods</span><font></font>
<font></font>
    render() {<font></font>
        <span class="hljs-keyword">const</span> { <span class="hljs-attr">delegate</span>: { onPress, buttonContent } } = <span class="hljs-keyword">this</span>.props;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                <span class="hljs-attr">className</span>=<span class="hljs-string">{this.classes}</span>
                {<span class="hljs-attr">...buttonProps</span>}
                <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onPress}</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span>
            &gt;</span>
                {buttonContent(this.spinner, this.iconText)}
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><font></font>
        );<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> buttonDelegate(Button);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ hay un m√©todo de renderizado con todas sus caracter√≠sticas de plataforma. La funcionalidad general del delegado se presenta en forma de un objeto a trav√©s del accesorio delegado. Un ejemplo de la parte de la plataforma de un bot√≥n para una implementaci√≥n nativa de reacci√≥n:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Button</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span>&lt;<span class="hljs-title">NativeProps</span>, <span class="hljs-title">State</span>&gt; </span>{<font></font>
<font></font>
    <span class="hljs-comment">// Native specific methods</span><font></font>
<font></font>
    render() {<font></font>
        <span class="hljs-keyword">const</span> { <span class="hljs-attr">delegate</span>: { onPress, buttonContent } } = <span class="hljs-keyword">this</span>.props;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">styleSet</span>=<span class="hljs-string">{this.styles}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">TouchableOpacity</span>
                    {<span class="hljs-attr">...butonProps</span>}
                    <span class="hljs-attr">onPress</span>=<span class="hljs-string">{onPress}</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">{this.touchableStyles}</span>
                    {<span class="hljs-attr">...touchableProps</span>}    
                &gt;</span>
                    {buttonContent(this.spinner, this.iconText)}
                <span class="hljs-tag">&lt;/<span class="hljs-name">TouchableOpacity</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><font></font>
        );<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> buttonDelegate(Button);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este caso, la l√≥gica es similar, pero se utilizan componentes nativos de reacci√≥n. En ambos listados, buttonDelegate es un HOC con l√≥gica com√∫n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con este enfoque en la implementaci√≥n de componentes, surge la cuesti√≥n de la separaci√≥n de las partes de la plataforma durante el montaje del proyecto. Es necesario asegurarse de que el paquete web utilizado por nosotros en proyectos para la web recolecte solo partes de componentes destinados a la web, mientras que el paquete metropolitano en react-native deber√≠a "enganchar" las partes de su plataforma, sin prestar atenci√≥n al componente para la web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para resolver este problema, utilizaron la funci√≥n integrada de paquete de metro, que le permite especificar el prefijo de extensi√≥n de archivo de la plataforma. En nuestro caso, metro.config.js se ve as√≠:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">resolver</span>: {
        <span class="hljs-attr">useWatchman</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">platforms</span>: [<span class="hljs-string">'native'</span>],<font></font>
    },<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, al compilar el paquete, metro primero busca archivos con la extensi√≥n native.js y luego, si no est√° en el directorio actual, engancha el archivo con la extensi√≥n .js. Esta funcionalidad hizo posible colocar las partes de la plataforma de los componentes en archivos separados: la parte para la web se encuentra en el archivo .js, la parte de reacci√≥n nativa se coloca en el archivo con la extensi√≥n .native.js. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, webpack tiene la misma funcionalidad usando NormalModuleReplacementPlugin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otro objetivo del enfoque multiplataforma era proporcionar un mecanismo √∫nico para dise√±ar componentes. En el caso de las aplicaciones web, elegimos el preprocesador sass, que finalmente se compila en CSS normal. Aquellos. para los componentes web, utilizamos los conocidos desarrolladores reaccionar className.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los componentes nativos de reacci√≥n se dise√±an a trav√©s de estilos en l√≠nea y estilo de accesorios. </font><font style="vertical-align: inherit;">Era necesario combinar estos dos enfoques, haciendo posible el uso de clases de estilo para aplicaciones de Android. </font><font style="vertical-align: inherit;">Para este prop√≥sito, se introdujo el concepto de styleSet, que no es m√°s que una serie de cadenas: nombres de clase:</font></font><br>
<br>
<pre><code class="javascript hljs">styleSet: <span class="hljs-built_in">Array</span>&lt;string&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al mismo tiempo, se implement√≥ el servicio StyleSet con el mismo nombre para react-native, que permite registrar nombres de clase:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> StyleSet.define({
    <span class="hljs-string">'lmui-Button'</span>: {
        <span class="hljs-attr">borderRadius</span>: <span class="hljs-number">6</span>,<font></font>
    },<font></font>
    <span class="hljs-string">'lmui-Button-buttonSize-md'</span>: {
        <span class="hljs-attr">paddingTop</span>: <span class="hljs-number">4</span>,
        <span class="hljs-attr">paddingBottom</span>: <span class="hljs-number">4</span>,
        <span class="hljs-attr">paddingLeft</span>: <span class="hljs-number">12</span>,
        <span class="hljs-attr">paddingRight</span>: <span class="hljs-number">12</span>,<font></font>
    },<font></font>
    <span class="hljs-string">'lmui-Button-buttonSize-lg'</span>: {
        <span class="hljs-attr">paddingTop</span>: <span class="hljs-number">8</span>,
        <span class="hljs-attr">paddingBottom</span>: <span class="hljs-number">8</span>,
        <span class="hljs-attr">paddingLeft</span>: <span class="hljs-number">16</span>,
        <span class="hljs-attr">paddingRight</span>: <span class="hljs-number">16</span>,<font></font>
    },<font></font>
})</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para los componentes web, styleSet es una matriz de nombres de clase css que est√°n "pegados" usando la biblioteca de nombres de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clase</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que el proyecto es multiplataforma, es obvio que con el crecimiento de la base de c√≥digo, tambi√©n aumenta el n√∫mero de dependencias externas. Adem√°s, las dependencias son diferentes para cada plataforma. Por ejemplo, para componentes web, se necesitan bibliotecas como style-loader, react-dom, classnames, webpack, etc. Para componentes react-native, se usa una gran cantidad de sus bibliotecas nativas, por ejemplo, react-native. Si un proyecto en el que se supone que debe usar la biblioteca de componentes tiene solo una plataforma de destino, entonces instalar todas las dependencias en otra plataforma es irracional. Para resolver este problema, utilizamos el gancho postinstall de npm, en el que se instal√≥ un script para instalar dependencias para la plataforma especificada. Las dependencias mismas se registraron en la secci√≥n correspondiente de package.json del paquete,y la plataforma de destino debe especificarse en el paquete del proyecto.json como una matriz.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, este enfoque revel√≥ un inconveniente, que posteriormente se convirti√≥ en varios problemas durante el ensamblaje en el sistema CI. La ra√≠z del problema fue que con package-lock.json, el script especificado en postinstall no instal√≥ todas las dependencias registradas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tuve que buscar otra soluci√≥n a este problema. La soluci√≥n fue simple. Se aplic√≥ un esquema de dos paquetes en el que todas las dependencias de la plataforma se colocaron en la secci√≥n de dependencias del paquete de la plataforma correspondiente. Por ejemplo, en el caso de la web, el paquete se llama components-web, en el que hay un solo archivo package.json. Contiene todas las dependencias para la plataforma web, as√≠ como el paquete principal con componentes componentes. Este enfoque nos permiti√≥ mantener la separaci√≥n de dependencias y preservar la funcionalidad de package-lock.json.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conclusi√≥n, dar√© un ejemplo de c√≥digo JSX usando nuestra biblioteca de componentes:</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;View row&gt;
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>
      <span class="hljs-attr">col-xs</span>=<span class="hljs-string">{12}</span>
      <span class="hljs-attr">col-md</span>=<span class="hljs-string">{8}</span>
      <span class="hljs-attr">col-lg</span>=<span class="hljs-string">{4}</span>
      <span class="hljs-attr">col-xl</span>=<span class="hljs-string">{4}</span>
      <span class="hljs-attr">middle-xs</span>
      <span class="hljs-attr">col-md-offset-3</span>
   /&gt;</span></span>
     <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">size</span>=<span class="hljs-string">‚Äùfs1‚Äù</span>&gt;</span>Sample text<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span><font></font>
   &lt;/View&gt;<font></font>
&lt;/View&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este fragmento de c√≥digo es multiplataforma y funciona igual en una aplicaci√≥n de reacci√≥n para la web y en una aplicaci√≥n de Android en react-native. </font><font style="vertical-align: inherit;">Si es necesario, el mismo c√≥digo se puede "enrollar" en iOS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, se resolvi√≥ la tarea principal a la que nos enfrentamos: la reutilizaci√≥n m√°xima de ambos enfoques de dise√±o y la base de c√≥digo entre varios proyectos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Indique en los comentarios qu√© preguntas sobre este tema fueron interesantes de aprender en el pr√≥ximo art√≠culo.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es501646/index.html">Go, Vue y 3 d√≠as para desarrollar: un sistema en tiempo real para monitorear pacientes</a></li>
<li><a href="../es501648/index.html">10 extensiones para VS Code, sin las cuales no puedo programar</a></li>
<li><a href="../es501650/index.html">¬øQu√© hay dentro de un archivo .wasm? Introduciendo wasm-decompile</a></li>
<li><a href="../es501652/index.html">Nuxt como servidor fullstack: servidor API frontend + backend (Parte 1)</a></li>
<li><a href="../es501654/index.html">Cree procesos de trabajo en un sitio remoto: recomendaciones pr√°cticas</a></li>
<li><a href="../es501658/index.html">C√≥mo establecer un flujo de trabajo "a distancia": 7 pasos pr√°cticos</a></li>
<li><a href="../es501662/index.html">Por qu√© Axure pudo doblar a Sketch y Figma, pero no se dobl√≥</a></li>
<li><a href="../es501664/index.html">La videoconferencia es ahora un mercado y nuevas tecnolog√≠as. Longrid, segunda parte</a></li>
<li><a href="../es501668/index.html">Proporcionar comunicaciones de objetos y herramientas en movimiento para aumentar su fiabilidad.</a></li>
<li><a href="../es501670/index.html">Cu√°nto cuesta la vida o $ 2.1 millones por inyecci√≥n: una maravillosa terapia g√©nica</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>