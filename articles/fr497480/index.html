<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👎🏻 👼🏿 🏽 Conférences vidéo: Unix Way 🤾🏿 👨🏽‍🤝‍👨🏼 😈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La quarantaine est un moment merveilleux pour apprendre quelque chose. Cependant, comme vous le savez, pour que quelqu'un apprenne quelque chose, quel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Conférences vidéo: Unix Way</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497480/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/vm/gw/wm/vmgwwmtfoo_hivajmmrsjdynktm.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La quarantaine est un moment merveilleux pour apprendre quelque chose. </font><font style="vertical-align: inherit;">Cependant, comme vous le savez, pour que quelqu'un apprenne quelque chose, quelqu'un doit enseigner. </font><font style="vertical-align: inherit;">Si vous avez une présentation avec laquelle vous souhaitez parler à un millionième public, gagner une renommée mondiale, alors cet article est pour vous. </font><font style="vertical-align: inherit;">Vous trouverez ici des instructions étape par étape sur la façon de créer une vidéo à partir de la présentation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous marquons la manière d'enregistrer des «commentaires sonores» dans PowerPoint et d'exporter la présentation en vidéo comme triviale et de ne pas donner un dixième des possibilités nécessaires pour une vidéo vraiment cool. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer, nous déciderons des cadres dont nous avons besoin:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Glisse en fait avec une voix off</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Changement de diapositive</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interrompre les citations de films populaires</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelques images avec la physionomie du conférencier et du chat préféré (facultatif)</font></font></li>
</ol><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créer une structure de répertoires</font></font></h3><br>
<pre><code class="bash hljs">.<font></font>
├── clipart<font></font>
├── clips<font></font>
├── rec<font></font>
├── slide<font></font>
└── sound<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Affectation des catalogues dans l'ordre de référencement: films dont nous tirerons des citations (clipart), fragments de notre future vidéo (clips), vidéos de la caméra (rec), diapositives d'image (diapositive), son (son).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faire une présentation en images</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour un vrai </font><font style="vertical-align: inherit;">Linuxoid </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aux yeux</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> rouges, faire une présentation sous forme d'images ne pose aucun problème. </font><font style="vertical-align: inherit;">Permettez-moi de vous rappeler qu'un document pdf peut être analysé en images par</font></font><br>
<br>
<pre><code class="bash hljs">pdftocairo -png -r 128 ../lecture.pdf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S'il n'y a pas une telle commande, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">installez le paquet poppler-utils</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (instructions pour Ubuntu; si vous avez Arch, alors vous savez déjà quoi faire sans moi). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ci-après, je pense que la vidéo est en cours de préparation au format HD Ready, soit 1280 × 720. </font><font style="vertical-align: inherit;">Une présentation d'une taille horizontale de 10 pouces donne exactement cette taille lors du déchargement (voir l'option -r 128).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous préparons le texte</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous voulez faire du matériel vraiment cool, alors votre discours doit d'abord être écrit. </font><font style="vertical-align: inherit;">J'ai aussi pensé pouvoir dire le texte sans préparation, d'autant plus que j'ai une bonne expérience de cours. </font><font style="vertical-align: inherit;">Mais c'est une chose de jouer en direct et une autre d'enregistrer des vidéos. </font><font style="vertical-align: inherit;">Ne soyez pas paresseux - le temps passé à taper sera payant plus d'une fois. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_6/jl/bb/_6jlbbte4tfrvad0s6ukynie_ou.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici mon format d'enregistrement. </font><font style="vertical-align: inherit;">Le nombre dans l'en-tête est égal au numéro de la diapositive, les interruptions sont surlignées en rouge. </font><font style="vertical-align: inherit;">Tout éditeur convient à la préparation, mais il est préférable de prendre un traitement de texte à part entière - par exemple, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnlyOffice</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diapositives sonores</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que puis-je dire - allumez le microphone et écrivez :) L' </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
expérience montre que la qualité d'enregistrement, même à partir du microphone externe le moins cher, est incomparablement meilleure qu'avec le microphone intégré de l'ordinateur portable. Si vous voulez un équipement de haute qualité, je recommande </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cet article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour l'enregistrement, j'ai utilisé </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un enregistreur audio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - une application d'enregistrement très simple. Vous pouvez le prendre, par exemple, ici:</font></font><br>
<br>
<pre><code class="bash hljs">sudo add-apt-repository ppa:audio-recorder/ppa<font></font>
sudo apt-get update<font></font>
sudo apt-get install audio-recorder</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'essentiel de cette étape est la dénomination correcte des fichiers. </font><font style="vertical-align: inherit;">Le nom doit être composé d'un numéro de diapositive et d'un numéro de fragment. </font><font style="vertical-align: inherit;">Les fragments sont numérotés avec des nombres impairs - 1, 3, 5, etc. Ainsi, pour une diapositive dont le texte est montré dans l'image, deux fichiers seront créés: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">002-1.mp3</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">002-3.mp3</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez enregistré toutes les vidéos à la fois dans une pièce calme, rien ne peut être fait avec. </font><font style="vertical-align: inherit;">Si vous avez enregistré en plusieurs étapes, il est préférable d'égaliser le niveau de volume:</font></font><br>
<br>
<pre><code class="bash hljs">mp3gain -r *.mp3</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour </font><font style="vertical-align: inherit;">une raison quelconque, les </font><font style="vertical-align: inherit;">utilitaires </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mp3gain</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ne sont pas dans les référentiels standard, mais vous pouvez les obtenir ici:</font></font><br>
<br>
<pre><code class="bash hljs">sudo add-apt-repository ppa:flexiondotorg/audio<font></font>
sudo apt-get update<font></font>
sudo apt-get install mp3gain</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après tout cela, vous devez écrire un autre fichier avec silence. </font><font style="vertical-align: inherit;">Il est nécessaire d'ajouter une bande son aux clips muets: s'il y a une bande son dans un clip et pas dans l'autre, il est difficile de coller ces clips. </font><font style="vertical-align: inherit;">Le silence peut être enregistré à partir du microphone, mais il est préférable de créer un fichier dans l'éditeur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Audacity</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Le fichier doit durer au moins une seconde (plus long) et </font><i><font style="vertical-align: inherit;">silence.mp3</font></i><font style="vertical-align: inherit;"> doit être </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">appelé</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rouleaux de dépannage de cuisson</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout ici n'est limité que par votre imagination. </font><font style="vertical-align: inherit;">Vous pouvez utiliser l'éditeur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avidemux</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour éditer la vidéo </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Une fois qu'il était dans des référentiels standard, mais pour une raison quelconque, il a été scié. </font><font style="vertical-align: inherit;">Cela ne nous arrêtera pas:</font></font><br>
<br>
<pre><code class="bash hljs">sudo add-apt-repository ppa:ubuntuhandbook1/avidemux<font></font>
sudo apt-get update<font></font>
sudo apt-get install avidemux2.7-qt5</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instructions pour travailler avec cet éditeur sur la mer, oui, en principe, tout y est intuitif. Il est important de respecter plusieurs conditions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, la résolution du film doit correspondre à la résolution cible du film. Pour ce faire, dans la «vidéo de sortie», vous devez utiliser deux filtres: swsResize pour changer la résolution et «ajouter des champs» pour faire du film soviétique de «format étroit» un format large. Tous les autres filtres sont facultatifs. Par exemple, si quelqu'un ne comprend pas la déclaration de M. Sharikov dans le fragment en cours de discussion, en utilisant le filtre «ajouter un logo», vous pouvez ajouter le logo PostgreSQL au-dessus de «Dog’s Heart».</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deuxièmement, tous les fragments doivent utiliser la même fréquence d'images. J'utilise 25 images par seconde, car cela donne tellement mon appareil photo et les vieux films soviétiques. Si le film à partir duquel vous coupez l'image est tourné à une vitesse différente, utilisez le filtre «Rééchantillonner la vidéo». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Troisièmement, tous les fragments doivent être compressés avec le même codec et emballés dans les mêmes conteneurs. Par conséquent, dans </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avidemux</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour le format, sélectionnez la vidéo - " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mpeg4 AVC (x264)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", l'audio - " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AAC (Faac)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", le format de sortie - " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MP4 Muxer</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quatrièmement, il est important de nommer correctement les clips coupés. </font><font style="vertical-align: inherit;">Le nom du fichier doit être composé d'un numéro de diapositive et d'un numéro de fragment. </font><font style="vertical-align: inherit;">Les fragments sont numérotés avec des nombres pairs, en commençant par 2. Ainsi, pour l'image en discussion, le clip avec le hachage doit être appelé </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">002-2.mp4 Une</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
fois les clips prêts, vous devez les transférer dans le répertoire contenant les fragments. </font><font style="vertical-align: inherit;">Les paramètres d' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avidemux</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diffèrent des paramètres </font><font style="vertical-align: inherit;">par défaut de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ffmpeg</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par les mystérieux paramètres tbr, tbn, tbc. </font><font style="vertical-align: inherit;">Ils n'affectent pas la reproduction, mais ils ne permettent pas de coller les rouleaux. </font><font style="vertical-align: inherit;">Par conséquent, nous recodons:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> ???-?.mp4;
<span class="hljs-keyword">do</span>
  ffmpeg -hide_banner -y -i <span class="hljs-string">"<span class="hljs-variable">${f}</span>"</span> -c copy -r 25 -video_track_timescale 12800 ../clips/<span class="hljs-variable">$f</span>
<span class="hljs-keyword">done</span></code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous supprimons les économiseurs d'écran</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout ici est aussi simple: filmer en arrière-plan une sorte de schéma intelligent, placer les vidéos reçues dans le répertoire </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rec</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puis les transférer dans le répertoire avec des fragments. </font><font style="vertical-align: inherit;">Les règles de dénomination sont les mêmes que pour les ruptures de devis, la commande de recodage est la suivante:</font></font><br>
<br>
<pre><code class="bash hljs">ffmpeg -y -i source_file -r 25 -vcodec libx264 -pix_fmt yuv420p -profile:v high -coder 1 -s 1280x720 -ar 44100 -ac 2 ../clips/xxx-x.mp4
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous prévoyez de démarrer la vidéo avec votre discours, nommez ce fragment </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">000-1.mp4</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous fabriquons des cadres à partir d'images statiques</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est temps de monter des clips à partir d'images et de sons statiques. </font><font style="vertical-align: inherit;">Cela se fait avec ce script:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash
</span>
<span class="hljs-keyword">for</span> sound <span class="hljs-keyword">in</span> sound/*.mp3
<span class="hljs-keyword">do</span>
  soundfile=<span class="hljs-variable">${sound##*/}</span>
  chunk=<span class="hljs-variable">${soundfile%%.mp3}</span>
  clip=<span class="hljs-variable">${chunk}</span>.mp4<font></font>
  pic=slide/<span class="hljs-variable">${chunk%%-?}</span>.png<font></font>
<font></font>
  duration=$(soxi -D <span class="hljs-variable">${sound}</span> 2&gt;/dev/null)
  <span class="hljs-built_in">echo</span> <span class="hljs-variable">${sound}</span> <span class="hljs-variable">${pic}</span> <span class="hljs-variable">${clip}</span> <span class="hljs-string">" - "</span> <span class="hljs-variable">${duration}</span><font></font>
<font></font>
  ffmpeg -hide_banner -y -loop 1 -i <span class="hljs-variable">${pic}</span> -i <span class="hljs-variable">${sound}</span> -r 25 -vcodec libx264 -tune stillimage -pix_fmt yuv420p -profile:v high -coder 1 -t <span class="hljs-variable">${duration}</span> clips/<span class="hljs-variable">${clip}</span>
<span class="hljs-keyword">done</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veuillez noter que la durée du fichier son est d'abord déterminée par l'utilitaire </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soxi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puis la vidéo de la longueur souhaitée est montée. Toutes les recommandations que j'ai trouvées sont plus simples: au lieu de l' </font><font style="vertical-align: inherit;">indicateur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-t $ {duration}</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , l'indicateur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-shortest</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est </font><i><font style="vertical-align: inherit;">utilisé</font></i><font style="vertical-align: inherit;"> . En fait, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ffmpeg</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> détermine très approximativement la longueur du mp3 et lors de l'installation, la longueur de la piste audio peut être très (une à deux secondes) différente de la longueur de la piste vidéo. Peu importe si la vidéo entière se compose d'une seule image, mais lors du collage d'un tel film avec une rupture à la frontière, des effets extrêmement désagréables avec le bégaiement se produisent. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre façon de déterminer la durée d'un fichier mp3 est d'utiliser </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mp3info</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Elle se trompe aussi, et parfois</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ffmpeg</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> donne plus que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mp3info</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , parfois vice versa, parfois ils mentent tous les deux - je n'ai remarqué aucun motif. </font><font style="vertical-align: inherit;">Mais </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soxi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fonctionne correctement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour installer cet utilitaire utile, procédez comme suit:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get install sox libsox-fmt-mp3</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faire des transitions entre les diapositives</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Transition - une courte vidéo dans laquelle une diapositive se transforme en une autre. </font><font style="vertical-align: inherit;">Pour réaliser de telles vidéos, prenez des diapositives par paires et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilisez imagemagick pour</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> transformer l'une en l'autre:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash
</span><font></font>
BUFFER=$(mktemp -d)<font></font>
<font></font>
<span class="hljs-keyword">for</span> pic <span class="hljs-keyword">in</span> slide/*.png
<span class="hljs-keyword">do</span>
  <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">${prevpic}</span> != <span class="hljs-string">""</span> ]]
  <span class="hljs-keyword">then</span>
    clip=<span class="hljs-variable">${pic##*/}</span>
    clip=<span class="hljs-variable">${clip/.png/-0.mp4}</span>
    <span class="hljs-comment">#</span>
    <span class="hljs-comment">#  </span>
    <span class="hljs-comment">#</span>
    ./fade.pl <span class="hljs-variable">${prevpic}</span> <span class="hljs-variable">${BUFFER}</span> 1280 720 5 direct 0<font></font>
    ./fade.pl <span class="hljs-variable">${pic}</span> <span class="hljs-variable">${BUFFER}</span> 1280 720 5 reverse 12
    <span class="hljs-comment">#</span>
    <span class="hljs-comment">#   </span>
    <span class="hljs-comment">#</span>
    ffmpeg -y -hide_banner -i <span class="hljs-string">"<span class="hljs-variable">${BUFFER}</span>/%03d.png"</span> -i sound/silence.mp3 -r 25 -y -acodec aac -vcodec libx264 -pix_fmt yuv420p -profile:v high -coder 1 -shortest clips/<span class="hljs-variable">${clip}</span>
    rm -f <span class="hljs-variable">${BUFFER}</span>/*
  <span class="hljs-keyword">fi</span>
  prevpic=<span class="hljs-variable">${pic}</span>
<span class="hljs-keyword">done</span><font></font>
<font></font>
rmdir <span class="hljs-variable">${BUFFER}</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour une raison quelconque, je voulais que la diapositive se disperse en points, puis la diapositive suivante a été assemblée à partir des points, et pour cela j'ai écrit un script appelé </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fade.pl</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ayant </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagemagick</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un vrai Linuxoid créera un effet spécial, mais si quelqu'un aime mon idée de dispersion, voici le script:</font></font><br>
<br>
<pre><code class="perl hljs"><span class="hljs-comment">#!/usr/bin/perl</span><font></font>
<font></font>
<span class="hljs-keyword">use</span> strict;
<span class="hljs-keyword">use</span> warnings;
<span class="hljs-keyword">use</span> locale;
<span class="hljs-keyword">use</span> utf8;
<span class="hljs-keyword">use</span> <span class="hljs-keyword">open</span> <span class="hljs-string">qw(:std :utf8)</span>;
<span class="hljs-keyword">use</span> Encode <span class="hljs-string">qw(decode)</span>;
<span class="hljs-keyword">use</span> I18N::Langinfo <span class="hljs-string">qw(langinfo CODESET)</span>;<font></font>
<font></font>
<span class="hljs-keyword">my</span> $codeset = langinfo(CODESET);<font></font>
@ARGV = <span class="hljs-keyword">map</span> { decode $codeset, $_ } @ARGV;<font></font>
<font></font>
<span class="hljs-keyword">my</span> ($source, $target, $width, $height, $pixsize, $rev, $file_no) = @ARGV;<font></font>
<font></font>
<span class="hljs-keyword">my</span> @rects;<font></font>
$rects[$_] = <span class="hljs-string">"0123456789AB"</span> <span class="hljs-keyword">for</span> <span class="hljs-number">0</span>..$width*$height/$pixsize/$pixsize/<span class="hljs-number">12</span> - <span class="hljs-number">1</span>;<font></font>
<font></font>
<span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $i (<span class="hljs-number">0</span>..<span class="hljs-number">11</span>) {
  <span class="hljs-keyword">substr</span>($_,<span class="hljs-keyword">int</span>(<span class="hljs-keyword">rand</span>(<span class="hljs-number">12</span>-$i)),<span class="hljs-number">1</span>) = <span class="hljs-string">""</span> <span class="hljs-keyword">for</span> (@rects);
  <span class="hljs-keyword">my</span> $s = $source;<font></font>
  $s =~ <span class="hljs-keyword">s</span><span class="hljs-comment">#^.*/##;</span>
  <span class="hljs-keyword">open</span>(PICTURE,<span class="hljs-string">"| convert - -transparent white PNG:- | convert \"$source\" - -composite \"$target/"</span>.substr(<span class="hljs-string">"00"</span>.($file_no+$i),-<span class="hljs-number">3</span>).<span class="hljs-string">".png\""</span>);
  <span class="hljs-keyword">printf</span> PICTURE (<span class="hljs-string">"P3\n%d %d\n255\n"</span>,$width,$height);
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $row (<span class="hljs-number">1</span>..$height/$pixsize/<span class="hljs-number">3</span>) {
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $j (<span class="hljs-number">0</span>..<span class="hljs-number">2</span>) {
      <span class="hljs-keyword">my</span> $l = <span class="hljs-string">""</span>;
      <span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $col (<span class="hljs-number">1</span>..$width/$pixsize/<span class="hljs-number">4</span>) {
        <span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $k (<span class="hljs-number">0</span>..<span class="hljs-number">3</span>) {<font></font>
          $l .= (<span class="hljs-keyword">index</span>($rects[($row-<span class="hljs-number">1</span>)*$width/$pixsize/<span class="hljs-number">4</span>+$col-<span class="hljs-number">1</span>],<span class="hljs-keyword">sprintf</span>(<span class="hljs-string">"%1X"</span>,$j*<span class="hljs-number">4</span>+$k))==-<span class="hljs-number">1</span> <span class="hljs-keyword">xor</span> $rev eq <span class="hljs-string">"reverse"</span>) ? <span class="hljs-string">"0 0 0\n"</span> : <span class="hljs-string">"255 255 255\n"</span> <span class="hljs-keyword">for</span> (<span class="hljs-number">1</span>..$pixsize);<font></font>
        }<font></font>
      }<font></font>
      <span class="hljs-keyword">print</span> PICTURE ($l) <span class="hljs-keyword">for</span> (<span class="hljs-number">1</span>..$pixsize);<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">close</span>(PICTURE);<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Montez le rouleau fini</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous avons tous les fragments. </font><font style="vertical-align: inherit;">Nous allons dans le répertoire des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clips</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et collectons le film fini avec deux commandes:</font></font><br>
<br>
<pre><code class="bash hljs">ls -1 ???-?.mp4 | gawk -e <span class="hljs-string">'{print "file " $0}'</span> &gt;list.txt<font></font>
ffmpeg -y -hide_banner -f concat -i list.txt -c copy MOVIE.mp4<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Profitez de votre visionnement à vos étudiants reconnaissants!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr497466/index.html">Sysbench et la distribution des variables aléatoires</a></li>
<li><a href="../fr497468/index.html">[Master class] Attaques pratiques sur l'interface USB</a></li>
<li><a href="../fr497470/index.html">Comment éjecter des virus sur le SDK Corona</a></li>
<li><a href="../fr497476/index.html">Top 8 des structures de données JavaScript</a></li>
<li><a href="../fr497478/index.html">Tutoriel de simulateur de réseau ns-3. Chapitre 4</a></li>
<li><a href="../fr497482/index.html">Authentification dans Kubernetes avec Dex: attachez LDAP</a></li>
<li><a href="../fr497484/index.html">Utilisation d'algorithmes ML pour classer des documents multipages: expérience VTB</a></li>
<li><a href="../fr497486/index.html">Division des données. année 2013. Rétrospective</a></li>
<li><a href="../fr497488/index.html">Automatisez les processus RH à l'aide de Microsoft Teams, PowerApps et Power Automate. Demandes de retrait d'employés</a></li>
<li><a href="../fr497490/index.html">Difficultés de paternité des hippocampes: métamorphoses génétiques du système immunitaire</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>