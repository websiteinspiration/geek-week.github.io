<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💫 ⏬ 🏚️ ジュリアと分布の意味 🍆 🔩 🐓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ジュリア言語の世界での最後の出版以来、多くの興味深いことが起こりました：
 

- 彼女はサポートパッケージの成長に関してすべての最初の場所を取った。このため、私は統計が大好きです-主なものは、便利な測定単位を選択することです。たとえば、与えられたリソースのようにパーセンテージを選択します
- 1....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ジュリアと分布の意味</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478790/"><p><img src="https://habrastorage.org/webt/bm/pm/rs/bmpmrsqirc__-_xff0qawasgsag.png"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジュリア言語の世界で</font><font style="vertical-align: inherit;">の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後の出版</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以来</font><font style="vertical-align: inherit;">、多くの興味深いことが起こりました：</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼女は</font><font style="vertical-align: inherit;">サポートパッケージの成長に関して</font><font style="vertical-align: inherit;">すべての</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初の場所を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取った</font><font style="vertical-align: inherit;">。</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このため、私は統計が大好きです-主なものは、便利な測定単位を選択することです。たとえば、与えられたリソースのようにパーセンテージを選択します</font></font></em></li>
<li>  1.3.0 —      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">  </a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a></li>
<li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> Nvidia</a></li>
<li>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">  </a>    </li>
</ul><br>
<p>         ,    :</p><br>
<ul>
<li>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a></li>
<li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">  GPU</a></li>
<li>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a></li>
<li>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">  </a>.</li>
</ul><br>
<p>           .      ,              -,    —    40000 .</p><a name="habracut"></a><br>
<p>         Julia      <abbr title="自然言語処理">NLP</abbr> — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Julia NLP.  </a>.           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">TextAnalysis</a>.</p><br>
<h2 id="textanalisys">TextAnalisys</h2><br>
<p>   ,       :</p><br>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> TextAnalysis<font></font>
<font></font>
str = <span class="hljs-string">"""
Ich mag die Sonne, die Palmen und das Meer,
Ich mag den Himmel schauen, den Wolken hinterher.
Ich mag den kalten Mond, wenn der Vollmond rund,
Und ich mag dich mit einem Knebel in dem Mund.
"""</span>;<font></font>
<font></font>
sd = StringDocument(str)</code></pre><br>
<pre><code class="julia hljs">StringDocument{<span class="hljs-built_in">String</span>}(<span class="hljs-string">"Ich mag die ... dem Mund.\n"</span>, <font></font>
TextAnalysis.DocumentMetadata(Languages.Default(), <font></font>
<span class="hljs-string">"Untitled Document"</span>, 
<span class="hljs-string">"Unknown Author"</span>, 
<span class="hljs-string">"Unknown Time"</span>))</code></pre><br>
<p>          ,  ,  ,   ,      :</p><br>
<pre><code class="julia hljs">title!(sd, <span class="hljs-string">"Knebel"</span>)<font></font>
<font></font>
prepare!(sd, strip_punctuation)<font></font>
remove_case!(sd)<font></font>
text(sd)</code></pre><br>
<pre><code class="julia hljs"><span class="hljs-string">"ich mag die sonne  die palmen und das meer \nich mag den himmel schauen  den wolken hinterher \nich mag den kalten mond  wenn der vollmond rund \nund ich mag dich mit einem knebel in dem mund \n"</span></code></pre><br>
<p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">n-</a>  :</p><br>
<pre><code class="julia hljs">dict1 = ngrams(sd)<font></font>
<font></font>
<span class="hljs-built_in">Dict</span>{<span class="hljs-built_in">String</span>,<span class="hljs-built_in">Int64</span>} with <span class="hljs-number">26</span> entries:
  <span class="hljs-string">"dem"</span>       =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"himmel"</span>    =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"knebel"</span>    =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"der"</span>       =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"schauen"</span>   =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"mund"</span>      =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"rund"</span>      =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"in"</span>        =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"mond"</span>      =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"dich"</span>      =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"einem"</span>     =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"ich"</span>       =&gt; <span class="hljs-number">4</span>
  <span class="hljs-string">"hinterher"</span> =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"wolken"</span>    =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"den"</span>       =&gt; <span class="hljs-number">3</span>
  <span class="hljs-string">"das"</span>       =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"palmen"</span>    =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"kalten"</span>    =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"mag"</span>       =&gt; <span class="hljs-number">4</span>
  <span class="hljs-string">"sonne"</span>     =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"vollmond"</span>  =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"die"</span>       =&gt; <span class="hljs-number">2</span>
  <span class="hljs-string">"mit"</span>       =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"meer"</span>      =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"wenn"</span>      =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"und"</span>       =&gt; <span class="hljs-number">2</span></code></pre><br>
<p> ,             ,           ,     .  n-      , ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a>,       ,    ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">     </a></p><br>
<h2 id="prochzen-modelovho-grafu">Procházení modelového grafu</h2><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a> —     ,    ,     ()  .  ,        . N-     :           ,        ()  . </p><br>
<p><img src="https://habrastorage.org/webt/or/kw/pw/orkwpwcftqjgonhw5rbwbl-r60a.png"><br>
<em>    "ABABD"</em></p><br>
<p>         ,   Julia     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">Markovify</a>,       .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">  </a>,     .</p><br>
<p>    (,  )</p><br>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Markovify, Markovify.Tokenizer<font></font>
<font></font>
tokens = tokenize(str, on = words)<font></font>
<font></font>
<span class="hljs-number">2</span>-element <span class="hljs-built_in">Array</span>{<span class="hljs-built_in">Array</span>{<span class="hljs-built_in">String</span>,<span class="hljs-number">1</span>},<span class="hljs-number">1</span>}:<font></font>
 [<span class="hljs-string">"Ich"</span>, <span class="hljs-string">"mag"</span>, <span class="hljs-string">"die"</span>, <span class="hljs-string">"Sonne,"</span>, <span class="hljs-string">"die"</span>, <span class="hljs-string">"Palmen"</span>, <span class="hljs-string">"und"</span>, <span class="hljs-string">"das"</span>, <span class="hljs-string">"Meer,"</span>, <span class="hljs-string">"Ich"</span>, <span class="hljs-string">"mag"</span>, <span class="hljs-string">"den"</span>, <span class="hljs-string">"Himmel"</span>, <span class="hljs-string">"schauen,"</span>, <span class="hljs-string">"den"</span>, <span class="hljs-string">"Wolken"</span>, <span class="hljs-string">"hinterher."</span>]        <font></font>
 [<span class="hljs-string">"Ich"</span>, <span class="hljs-string">"mag"</span>, <span class="hljs-string">"den"</span>, <span class="hljs-string">"kalten"</span>, <span class="hljs-string">"Mond,"</span>, <span class="hljs-string">"wenn"</span>, <span class="hljs-string">"der"</span>, <span class="hljs-string">"Vollmond"</span>, <span class="hljs-string">"rund,"</span>, <span class="hljs-string">"Und"</span>, <span class="hljs-string">"ich"</span>, <span class="hljs-string">"mag"</span>, <span class="hljs-string">"dich"</span>, <span class="hljs-string">"mit"</span>, <span class="hljs-string">"einem"</span>, <span class="hljs-string">"Knebel"</span>, <span class="hljs-string">"in"</span>, <span class="hljs-string">"dem"</span>, <span class="hljs-string">"Mund."</span>]</code></pre><br>
<p>    (   ):</p><br>
<pre><code class="julia hljs">mdl = Model(tokens; order=<span class="hljs-number">1</span>)<font></font>
<font></font>
Model{<span class="hljs-built_in">String</span>}(<span class="hljs-number">1</span>, <span class="hljs-built_in">Dict</span>([<span class="hljs-string">"dich"</span>] =&gt; <span class="hljs-built_in">Dict</span>(<span class="hljs-string">"mit"</span> =&gt; <span class="hljs-number">1</span>),[<span class="hljs-string">"den"</span>] =&gt; <span class="hljs-built_in">Dict</span>(<span class="hljs-string">"Himmel"</span> =&gt; <span class="hljs-number">1</span>,<span class="hljs-string">"kalten"</span> =&gt; <span class="hljs-number">1</span>,<span class="hljs-string">"Wolken"</span> =&gt; <span class="hljs-number">1</span>),[<span class="hljs-string">"in"</span>] =&gt; <span class="hljs-built_in">Dict</span>(<span class="hljs-string">"dem"</span> =&gt; <span class="hljs-number">1</span>),[<span class="hljs-string">"Palmen"</span>] =&gt; <span class="hljs-built_in">Dict</span>(<span class="hljs-string">"und"</span> =&gt; <span class="hljs-number">1</span>),[<span class="hljs-string">"wenn"</span>] =&gt; <span class="hljs-built_in">Dict</span>(<span class="hljs-string">"der"</span> =&gt; <span class="hljs-number">1</span>),[<span class="hljs-string">"rund,"</span>] =&gt; <span class="hljs-built_in">Dict</span>(<span class="hljs-string">"Und"</span> =&gt; <span class="hljs-number">1</span>),[:<span class="hljs-keyword">begin</span>] =&gt; <span class="hljs-built_in">Dict</span>(<span class="hljs-string">"Ich"</span> =&gt; <span class="hljs-number">2</span>),[<span class="hljs-string">"Vollmond"</span>] =&gt; <span class="hljs-built_in">Dict</span>(<span class="hljs-string">"rund,"</span> =&gt; <span class="hljs-number">1</span>),[<span class="hljs-string">"die"</span>] =&gt; <span class="hljs-built_in">Dict</span>(<span class="hljs-string">"Sonne,"</span> =&gt; <span class="hljs-number">1</span>,<span class="hljs-string">"Palmen"</span> =&gt; <span class="hljs-number">1</span>),[<span class="hljs-string">"kalten"</span>] =&gt; <span class="hljs-built_in">Dict</span>(<span class="hljs-string">"Mond,"</span> =&gt; <span class="hljs-number">1</span>)…))</code></pre><br>
<p>          .  , , ,  ,   ,   :</p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><pre><code class="julia hljs"><span class="hljs-keyword">function</span> gensentences(model, fun, n)<font></font>
    sentences = []<font></font>
    <span class="hljs-comment"># Stop only after n sentences were generated</span>
    <span class="hljs-comment"># and passed through the length test</span>
    <span class="hljs-keyword">while</span> length(sentences) &lt; n<font></font>
        seq = fun(model)<font></font>
        <span class="hljs-comment"># Add the sentence to the array iff its length is ok</span>
        <span class="hljs-keyword">if</span> length(seq) &gt; <span class="hljs-number">3</span> &amp;&amp; length(seq) &lt; <span class="hljs-number">20</span>
            push!(sentences, join(seq, <span class="hljs-string">" "</span>))
        <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span><font></font>
    sentences<font></font>
<span class="hljs-keyword">end</span></code></pre></div></div><br>
<p>     : <code>walk</code>  <code>walk2</code> (  ,     ),        .  :</p><br>
<pre><code class="julia hljs">gensentences(mdl, walk, <span class="hljs-number">4</span>)<font></font>
<font></font>
<span class="hljs-number">4</span>-element <span class="hljs-built_in">Array</span>{<span class="hljs-built_in">Any</span>,<span class="hljs-number">1</span>}:
 <span class="hljs-string">"Ich mag den Wolken hinterher."</span>                                                     
 <span class="hljs-string">"Ich mag die Palmen und das Meer, Ich mag den Himmel schauen, den Wolken hinterher."</span>
 <span class="hljs-string">"Ich mag den Wolken hinterher."</span>                                                     
 <span class="hljs-string">"Ich mag die Palmen und das Meer, Ich mag dich mit einem Knebel in dem Mund."</span><font></font>
<font></font>
gensentences(mdl, walk2, <span class="hljs-number">4</span>)<font></font>
<font></font>
<span class="hljs-number">4</span>-element <span class="hljs-built_in">Array</span>{<span class="hljs-built_in">Any</span>,<span class="hljs-number">1</span>}:
 <span class="hljs-string">"Ich mag den Wolken hinterher."</span>                                                                         
 <span class="hljs-string">"Ich mag dich mit einem Knebel in dem Mund."</span>                                                            
 <span class="hljs-string">"Ich mag den Himmel schauen, den kalten Mond, wenn der Vollmond rund, Und ich mag den Wolken hinterher."</span>
 <span class="hljs-string">"Ich mag die Sonne, die Palmen und das Meer, Ich mag dich mit einem Knebel in dem Mund."</span></code></pre><br>
<p>,      ,    .   ,    ,     . ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>,    ,    ,       UTF-8,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>. </p><br>
<p>   ,               n-,    :</p><br>
<pre><code class="julia hljs"> <span class="hljs-string">",             !"</span>
 <span class="hljs-string">".   , :    !"</span> 
 <span class="hljs-string">",   , , ,       ?"</span>
 <span class="hljs-string">"      !"</span> 
 <span class="hljs-string">".     ,     !"</span>
 <span class="hljs-string">".  ,       ?"</span> 
<span class="hljs-string">"    ,         !"</span>
<span class="hljs-string">"      ?"</span>
<span class="hljs-string">" ,   ,       ?"</span>
<span class="hljs-string">"     ?"</span>
<span class="hljs-string">",      .     ?"</span></code></pre><br>
<p> ,          … ,      ...</p><br>
<h2 id="analyze-it">Analyze it</h2><br>
<p>   TextAnalysis     ,          </p><br>
<p><img src="https://habrastorage.org/webt/jd/-q/q2/jd-qq2jk5-objypdt073tbh7jhy.png"></p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><pre><code class="julia hljs"><span class="hljs-keyword">using</span> TextAnalysis, Clustering, Plots<span class="hljs-comment">#, MultivariateStats</span>
pth = <span class="hljs-string">"C:\\Users\\User\\.julia\\packages\\TextAnalysis\\pcFQf\\test\\data\\sotu"</span>
files = readdir(pth)</code></pre><br>
<pre><code class="julia hljs"><span class="hljs-number">29</span>-element <span class="hljs-built_in">Array</span>{<span class="hljs-built_in">String</span>,<span class="hljs-number">1</span>}:
 <span class="hljs-string">"Bush_1989.txt"</span>   
 <span class="hljs-string">"Bush_1990.txt"</span>   
 <span class="hljs-string">"Bush_1991.txt"</span>   
 <span class="hljs-string">"Bush_1992.txt"</span>   
 <span class="hljs-string">"Bush_2001.txt"</span>   
 <span class="hljs-string">"Bush_2002.txt"</span>   
 <span class="hljs-string">"Bush_2003.txt"</span>   
 <span class="hljs-string">"Bush_2004.txt"</span>   
 <span class="hljs-string">"Bush_2005.txt"</span>   
 <span class="hljs-string">"Bush_2006.txt"</span>   
 <span class="hljs-string">"Bush_2007.txt"</span>   
 <span class="hljs-string">"Bush_2008.txt"</span>   
 <span class="hljs-string">"Clinton_1993.txt"</span><font></font>
 ⋮                 <font></font>
 <span class="hljs-string">"Clinton_1998.txt"</span>
 <span class="hljs-string">"Clinton_1999.txt"</span>
 <span class="hljs-string">"Clinton_2000.txt"</span>
 <span class="hljs-string">"Obama_2009.txt"</span>  
 <span class="hljs-string">"Obama_2010.txt"</span>  
 <span class="hljs-string">"Obama_2011.txt"</span>  
 <span class="hljs-string">"Obama_2012.txt"</span>  
 <span class="hljs-string">"Obama_2013.txt"</span>  
 <span class="hljs-string">"Obama_2014.txt"</span>  
 <span class="hljs-string">"Obama_2015.txt"</span>  
 <span class="hljs-string">"Obama_2016.txt"</span>  
 <span class="hljs-string">"Trump_2017.txt"</span> </code></pre></div></div><br>
<p>       ,           :</p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><pre><code class="julia hljs">crps = DirectoryCorpus(pth)<font></font>
<font></font>
standardize!(crps, StringDocument)<font></font>
<font></font>
crps = Corpus(crps[<span class="hljs-number">1</span>:<span class="hljs-number">29</span>]);</code></pre><br>
<pre><code class="julia hljs">remove_case!(crps)<font></font>
prepare!(crps, strip_punctuation)<font></font>
<font></font>
update_lexicon!(crps)<font></font>
update_inverse_index!(crps)<font></font>
<font></font>
lexicon(crps)</code></pre><br>
<pre><code class="julia hljs"><span class="hljs-built_in">Dict</span>{<span class="hljs-built_in">String</span>,<span class="hljs-built_in">Int64</span>} with <span class="hljs-number">9078</span> entries:
  <span class="hljs-string">"enriching"</span>   =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"ferret"</span>      =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"offend"</span>      =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"enjoy"</span>       =&gt; <span class="hljs-number">4</span>
  <span class="hljs-string">"limousines"</span>  =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"shouldn"</span>     =&gt; <span class="hljs-number">21</span>
  <span class="hljs-string">"fight"</span>       =&gt; <span class="hljs-number">85</span>
  <span class="hljs-string">"everywhere"</span>  =&gt; <span class="hljs-number">17</span>
  <span class="hljs-string">"vigilance"</span>   =&gt; <span class="hljs-number">4</span>
  <span class="hljs-string">"helping"</span>     =&gt; <span class="hljs-number">62</span>
  <span class="hljs-string">"whose"</span>       =&gt; <span class="hljs-number">22</span>
  <span class="hljs-string">"’"</span>           =&gt; <span class="hljs-number">725</span>
  <span class="hljs-string">"manufacture"</span> =&gt; <span class="hljs-number">3</span>
  <span class="hljs-string">"sleepless"</span>   =&gt; <span class="hljs-number">2</span>
  <span class="hljs-string">"favor"</span>       =&gt; <span class="hljs-number">6</span>
  <span class="hljs-string">"incoherent"</span>  =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"parenting"</span>   =&gt; <span class="hljs-number">2</span>
  <span class="hljs-string">"wrongful"</span>    =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"poised"</span>      =&gt; <span class="hljs-number">3</span>
  <span class="hljs-string">"henry"</span>       =&gt; <span class="hljs-number">3</span>
  <span class="hljs-string">"borders"</span>     =&gt; <span class="hljs-number">30</span>
  <span class="hljs-string">"worship"</span>     =&gt; <span class="hljs-number">3</span>
  <span class="hljs-string">"star"</span>        =&gt; <span class="hljs-number">10</span>
  <span class="hljs-string">"strand"</span>      =&gt; <span class="hljs-number">1</span>
  <span class="hljs-string">"rejoin"</span>      =&gt; <span class="hljs-number">3</span>
  ⋮             =&gt; ⋮</code></pre></div></div><br>
<p>         , ,       :</p><br>
<pre><code class="julia hljs">crps[<span class="hljs-string">"promise"</span>]'
<span class="hljs-number">1</span>×<span class="hljs-number">24</span> LinearAlgebra.Adjoint{<span class="hljs-built_in">Int64</span>,<span class="hljs-built_in">Array</span>{<span class="hljs-built_in">Int64</span>,<span class="hljs-number">1</span>}}:
 <span class="hljs-number">1</span>  <span class="hljs-number">2</span>  <span class="hljs-number">3</span>  <span class="hljs-number">4</span>  <span class="hljs-number">6</span>  <span class="hljs-number">7</span>  <span class="hljs-number">9</span>  <span class="hljs-number">10</span>  <span class="hljs-number">11</span>  <span class="hljs-number">12</span>  <span class="hljs-number">15</span>  …  <span class="hljs-number">21</span>  <span class="hljs-number">22</span>  <span class="hljs-number">23</span>  <span class="hljs-number">24</span>  <span class="hljs-number">25</span>  <span class="hljs-number">26</span>  <span class="hljs-number">27</span>  <span class="hljs-number">28</span>  <span class="hljs-number">29</span><font></font>
<font></font>
crps[<span class="hljs-string">"reached"</span>]'
<span class="hljs-number">1</span>×<span class="hljs-number">7</span> LinearAlgebra.Adjoint{<span class="hljs-built_in">Int64</span>,<span class="hljs-built_in">Array</span>{<span class="hljs-built_in">Int64</span>,<span class="hljs-number">1</span>}}:
 <span class="hljs-number">12</span>  <span class="hljs-number">14</span>  <span class="hljs-number">15</span>  <span class="hljs-number">17</span>  <span class="hljs-number">19</span>  <span class="hljs-number">20</span>  <span class="hljs-number">22</span></code></pre><br>
<p>   :</p><br>
<pre><code class="julia hljs">lexical_frequency(crps, <span class="hljs-string">"i"</span>), lexical_frequency(crps, <span class="hljs-string">"you"</span>)<font></font>
(<span class="hljs-number">0.010942182388035081</span>, <span class="hljs-number">0.005905479339070189</span>)</code></pre><br>
<p>  <del>   </del>       . </p><br>
<h2 id="matematricy"></h2><br>
<p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>  ,  ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>.</p><br>
<p>-  (<strong>DTM</strong>) —      <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi><mo>&amp;#x00D7;</mo><mi>W</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.339ex" height="2.009ex" viewBox="0 -755.5 3159.9 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/478790/&amp;usg=ALkJrhhHV6zWYlSvHsBM61mpiz-qC-DwUQ#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/478790/&amp;usg=ALkJrhhHV6zWYlSvHsBM61mpiz-qC-DwUQ#MJMAIN-D7" x="1110" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/478790/&amp;usg=ALkJrhhHV6zWYlSvHsBM61mpiz-qC-DwUQ#MJMATHI-57" x="2111" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi><mo>×</mo><mi>W</mi></math></span></span><script type="math/tex" id="MathJax-Element-1">N \times W</script>,  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.009ex" viewBox="0 -755.5 888.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/478790/&amp;usg=ALkJrhhHV6zWYlSvHsBM61mpiz-qC-DwUQ#MJMATHI-4E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi></math></span></span><script type="math/tex" id="MathJax-Element-2">N</script> —    ,  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>W</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.435ex" height="2.009ex" viewBox="0 -755.5 1048.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/478790/&amp;usg=ALkJrhhHV6zWYlSvHsBM61mpiz-qC-DwUQ#MJMATHI-57" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>W</mi></math></span></span><script type="math/tex" id="MathJax-Element-3">W</script> —    ..   ()     .  <em>i</em>- , <em>j</em>-     —    <em>i</em>-   <em>j</em>- .</p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><pre><code class="julia hljs">dtm1 = DocumentTermMatrix(crps)</code></pre><br>
<pre><code class="julia hljs">D = dtm(dtm1, :dense)<font></font>
<font></font>
<span class="hljs-number">29</span>×<span class="hljs-number">9078</span> <span class="hljs-built_in">Array</span>{<span class="hljs-built_in">Int64</span>,<span class="hljs-number">2</span>}:
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">1</span>  <span class="hljs-number">4</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  …  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">16</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">1</span>  <span class="hljs-number">4</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>     <span class="hljs-number">1</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">4</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>     <span class="hljs-number">1</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">3</span>  <span class="hljs-number">1</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>     <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">6</span>  <span class="hljs-number">5</span>  <span class="hljs-number">8</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>     <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">10</span>   <span class="hljs-number">38</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">3</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">5</span>  <span class="hljs-number">0</span>  …  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">22</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">12</span>  <span class="hljs-number">4</span>  <span class="hljs-number">2</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">3</span>  <span class="hljs-number">0</span>     <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">41</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">1</span>  <span class="hljs-number">1</span>  <span class="hljs-number">2</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">5</span>  <span class="hljs-number">0</span>     <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">1</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>     <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">44</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">2</span>  <span class="hljs-number">1</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">2</span>  <span class="hljs-number">0</span>     <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">67</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">14</span>   <span class="hljs-number">1</span>   <span class="hljs-number">1</span>  <span class="hljs-number">31</span>
 <span class="hljs-number">2</span>  <span class="hljs-number">0</span>   <span class="hljs-number">8</span>  <span class="hljs-number">2</span>  <span class="hljs-number">1</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">4</span>  <span class="hljs-number">0</span>  …  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">50</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">2</span>  <span class="hljs-number">0</span>   <span class="hljs-number">3</span>  <span class="hljs-number">3</span>  <span class="hljs-number">0</span>  <span class="hljs-number">2</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">2</span>  <span class="hljs-number">1</span>     <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">11</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">8</span>  <span class="hljs-number">3</span>  <span class="hljs-number">6</span>  <span class="hljs-number">3</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>     <span class="hljs-number">1</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">4</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span><font></font>
 ⋮               ⋮              ⋮        ⋱     ⋮                    ⋮        <font></font>
 <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">11</span>  <span class="hljs-number">5</span>  <span class="hljs-number">3</span>  <span class="hljs-number">3</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>     <span class="hljs-number">1</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">44</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">11</span>  <span class="hljs-number">5</span>  <span class="hljs-number">4</span>  <span class="hljs-number">5</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>     <span class="hljs-number">1</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">48</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">18</span>  <span class="hljs-number">6</span>  <span class="hljs-number">8</span>  <span class="hljs-number">4</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>     <span class="hljs-number">1</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">80</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">1</span>  <span class="hljs-number">2</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  …  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">26</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">1</span>  <span class="hljs-number">0</span>   <span class="hljs-number">4</span>  <span class="hljs-number">5</span>  <span class="hljs-number">5</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>     <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">45</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">1</span>
 <span class="hljs-number">1</span>  <span class="hljs-number">0</span>   <span class="hljs-number">8</span>  <span class="hljs-number">2</span>  <span class="hljs-number">1</span>  <span class="hljs-number">3</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">2</span>  <span class="hljs-number">0</span>     <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">47</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">170</span>  <span class="hljs-number">11</span>  <span class="hljs-number">11</span>   <span class="hljs-number">1</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">7</span>  <span class="hljs-number">1</span>  <span class="hljs-number">1</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>     <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">3</span>   <span class="hljs-number">2</span>   <span class="hljs-number">0</span>  <span class="hljs-number">208</span>   <span class="hljs-number">2</span>   <span class="hljs-number">2</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">1</span>  <span class="hljs-number">0</span>   <span class="hljs-number">5</span>  <span class="hljs-number">2</span>  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>     <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">41</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">122</span>   <span class="hljs-number">7</span>   <span class="hljs-number">7</span>   <span class="hljs-number">1</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">4</span>  <span class="hljs-number">3</span>  <span class="hljs-number">4</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  …  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">62</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">173</span>  <span class="hljs-number">11</span>  <span class="hljs-number">11</span>   <span class="hljs-number">7</span>
 <span class="hljs-number">2</span>  <span class="hljs-number">0</span>   <span class="hljs-number">6</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">3</span>  <span class="hljs-number">0</span>     <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">3</span>  <span class="hljs-number">0</span>  <span class="hljs-number">3</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>     <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">35</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>
 <span class="hljs-number">1</span>  <span class="hljs-number">0</span>   <span class="hljs-number">2</span>  <span class="hljs-number">2</span>  <span class="hljs-number">0</span>  <span class="hljs-number">2</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">0</span>     <span class="hljs-number">0</span>  <span class="hljs-number">0</span>   <span class="hljs-number">0</span>  <span class="hljs-number">30</span>   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span></code></pre></div></div><br>
<p>    <em></em> </p><br>
<pre><code class="julia hljs">m.terms[<span class="hljs-number">3450</span>:<span class="hljs-number">3465</span>]<font></font>
<font></font>
<span class="hljs-number">16</span>-element <span class="hljs-built_in">Array</span>{<span class="hljs-built_in">String</span>,<span class="hljs-number">1</span>}:
 <span class="hljs-string">"franklin"</span> 
 <span class="hljs-string">"frankly"</span>  
 <span class="hljs-string">"frankness"</span>
 <span class="hljs-string">"fraud"</span>    
 <span class="hljs-string">"frayed"</span>   
 <span class="hljs-string">"fraying"</span>  
 <span class="hljs-string">"fre"</span>      
 <span class="hljs-string">"freak"</span>    
 <span class="hljs-string">"freddie"</span>  
 <span class="hljs-string">"free"</span>     
 <span class="hljs-string">"freed"</span>    
 <span class="hljs-string">"freedom"</span>  
 <span class="hljs-string">"freedoms"</span> 
 <span class="hljs-string">"freely"</span>   
 <span class="hljs-string">"freer"</span>    
 <span class="hljs-string">"frees"</span></code></pre><br>
<p>...</p><br>
<pre><code class="julia hljs">crps[<span class="hljs-string">"freak"</span>]
<span class="hljs-number">1</span>-element <span class="hljs-built_in">Array</span>{<span class="hljs-built_in">Int64</span>,<span class="hljs-number">1</span>}:
 <span class="hljs-number">25</span><font></font>
<font></font>
files[<span class="hljs-number">25</span>]
<span class="hljs-string">"Obama_2013.txt"</span></code></pre><br>
<p>   ...</p><br>
<p>        . ,      </p><br>
<pre><code class="julia hljs">w1, w2 = dtm1.column_indices[<span class="hljs-string">"freedom"</span>], dtm1.column_indices[<span class="hljs-string">"terror"</span>]<font></font>
<font></font>
(<span class="hljs-number">3452</span>, <span class="hljs-number">8101</span>)</code></pre><br>
<pre><code class="julia hljs">D[:, w1] |&gt; bar</code></pre><br>
<p><img src="https://habrastorage.org/webt/1s/v-/wm/1sv-wmh3g4m1ba10m9vp3zzepo8.png"></p><br>
<pre><code class="julia hljs">D[:, w1] |&gt; bar</code></pre><br>
<p><img src="https://habrastorage.org/webt/bp/wg/ri/bpwgrijobtsbkzms7airvmxuegq.png"></p><br>
<p>      :</p><br>
<pre><code class="julia hljs">k = <span class="hljs-number">3</span>            <span class="hljs-comment">#    </span>
iterations = <span class="hljs-number">1000</span> <span class="hljs-comment"># number of gibbs sampling iterations</span>
α = <span class="hljs-number">0.1</span>      <span class="hljs-comment"># hyper parameter</span>
β  = <span class="hljs-number">0.1</span>       <span class="hljs-comment"># hyper parameter</span>
<span class="hljs-comment"># Latent Dirichlet Allocation</span>
ϕ, θ  = lda(m, k, iterations, α, β) <span class="hljs-comment"># Latent Dirichlet Allocation</span>
plot(θ', line = <span class="hljs-number">3</span>)</code></pre><br>
<p><img src="https://habrastorage.org/webt/oi/na/ci/oinaciuidbfqo-hgzd6i1ywye_e.png"><br>
<em> ,         </em></p><br>
<p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>  ,   ,         </p><br>
<pre><code class="julia hljs">T = tf_idf(D)<font></font>
<font></font>
cl = kmeans(T, <span class="hljs-number">5</span>) <span class="hljs-comment">#  </span>
assign = assignments(cl) <span class="hljs-comment">#      </span>
clc = cl.centers <span class="hljs-comment">#  </span>
clsize = counts(cl) <span class="hljs-comment">#  </span><font></font>
<font></font>
<span class="hljs-number">5</span>-element <span class="hljs-built_in">Array</span>{<span class="hljs-built_in">Int64</span>,<span class="hljs-number">1</span>}:
    <span class="hljs-number">1</span>
 <span class="hljs-number">1784</span>
   <span class="hljs-number">36</span>
    <span class="hljs-number">1</span>
 <span class="hljs-number">7280</span></code></pre><br>
<pre><code class="julia hljs">s1 = scatter(T[<span class="hljs-number">10</span>, <span class="hljs-number">1</span>:<span class="hljs-number">10</span>:<span class="hljs-keyword">end</span>], assign, yaxis = <span class="hljs-string">"Bush  2006"</span>)<font></font>
s2 = scatter(T[<span class="hljs-number">29</span>, <span class="hljs-number">1</span>:<span class="hljs-number">10</span>:<span class="hljs-keyword">end</span>], assign, yaxis = <span class="hljs-string">"Obama 2016"</span>)<font></font>
s3 = scatter(T[<span class="hljs-number">30</span>, <span class="hljs-number">1</span>:<span class="hljs-number">10</span>:<span class="hljs-keyword">end</span>], assign, yaxis = <span class="hljs-string">"Trump 2017"</span>)<font></font>
plot(s1, s2, s3, layout  = (<span class="hljs-number">3</span>,<span class="hljs-number">1</span>), legend=<span class="hljs-literal">false</span> )</code></pre><br>
<p><img src="https://habrastorage.org/webt/wf/pf/pc/wfpfpcdozapqgn6edlajx0ptjuy.png"></p><br>
<p>  , - .    NLP   ,          :        (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> LDA</a>  )</p><br>
<p>     ,     :</p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><pre><code class="julia hljs"><span class="hljs-keyword">function</span> loadfiles(filenames)
    <span class="hljs-keyword">return</span> (<font></font>
        open(filename) <span class="hljs-keyword">do</span> file<font></font>
            text = read(file, <span class="hljs-built_in">String</span>)
            <span class="hljs-comment"># Tokenize on words (we could also tokenize on letters/lines etc.)</span>
            <span class="hljs-comment"># That means: split the text to sentences and then those sentences to words</span><font></font>
            tokens = tokenize(text; on=letters)<font></font>
            <span class="hljs-keyword">return</span> Model(tokens; order=N)
        <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> filenames<font></font>
    )<font></font>
<span class="hljs-keyword">end</span><font></font>
<font></font>
pth = <span class="hljs-string">"C:\\Users\\User\\.julia\\packages\\TextAnalysis\\pcFQf\\test\\data\\sotu"</span><font></font>
FILENAMES = readdir(pth)<font></font>
<font></font>
N = <span class="hljs-number">1</span><font></font>
MODEL = combine(loadfiles(FILENAMES)...)<font></font>
<font></font>
gensentences(MODEL, walk2, <span class="hljs-number">7</span>)</code></pre></div></div><br>
<pre><code class="julia hljs"><span class="hljs-number">7</span>-element <span class="hljs-built_in">Array</span>{<span class="hljs-built_in">Any</span>,<span class="hljs-number">1</span>}:
 <span class="hljs-string">"I want harmony and fathers, sons and we mark the jobkilling TransPacific Partnership."</span>                                           
 <span class="hljs-string">"I am asking all across our partners must be one very happy, indeed."</span>                                                             
 <span class="hljs-string">"At the health insurance and terrorismrelated offenses since my Inauguration, and the future and pay their jobs, their community."</span>
 <span class="hljs-string">"Millions lifted from this Nation, and Jessica Davis."</span>                                                                            
 <span class="hljs-string">"It will expand choice, increase access, lower the Director of our aspirations, not working."</span>                                     
 <span class="hljs-string">"We will defend our freedom."</span>                                                                                                     
 <span class="hljs-string">"The challenges we will celebrate the audience tonight, has come for a record."</span>  </code></pre><br>
<h2 id="long-short-term-memory">Long Short Term Memory</h2><br>
<p>      !         ,    Julia   .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">Knet</a>, ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   Flux</a>,            ,         .            ,      .        ,      (,            ).     Knet     ,      Flux.</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">    Flux</a> —         </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">RNN  Flux</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">RNN  Knet</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">  LSTM</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">  TPU-</a></li>
</ul><br>
<p>         ,     :</p><br>
<pre><code class="julia hljs">QUEN:<font></font>
Chiet? The buswievest by his seld me not report.<font></font>
Good eurronish too <span class="hljs-keyword">in</span> me will lide upon the name;<font></font>
Nor pain eat, comes, like my nature is night.<font></font>
<font></font>
GRUMIO:<font></font>
What <span class="hljs-keyword">for</span> the Patrople:<font></font>
While Antony ere the madable sut killing! <span class="hljs-literal">I</span> think, bull call.
<span class="hljs-literal">I</span> have what is that from the mock of France:<font></font>
Then, <span class="hljs-keyword">let</span> me?<font></font>
<font></font>
CAMILLE:<font></font>
Who! we <span class="hljs-keyword">break</span> be what you known, shade well?<font></font>
<font></font>
PRINCE HOTHEM:<font></font>
If <span class="hljs-literal">I</span> kiss my go reas, <span class="hljs-keyword">if</span> he will leave; which my king myself.<font></font>
<font></font>
BENEDICH:<font></font>
The aunest hathing rouman can as? Come, my arms and haste.<font></font>
This weal the humens?<font></font>
Come sifen, shall as some best smine? You would hain to all make on,<font></font>
That that herself: whom will you come, lords and lafe to overwark the could king to me,<font></font>
My shall it foul thou art not from her.<font></font>
A time he must seep ablies <span class="hljs-keyword">in</span> the genely sunsition.<font></font>
<font></font>
BEATIAR:<font></font>
When hitherdin: so like it be vannen-brother; straight Edwolk,<font></font>
Wholimus'd you ainly.<font></font>
<font></font>
DUVERT:<font></font>
And <span class="hljs-keyword">do</span>, still ene holy <span class="hljs-keyword">break</span> the what, govy.<font></font>
<font></font>
Servant:<font></font>
<span class="hljs-literal">I</span> fearesed, Anto joy? Is it <span class="hljs-keyword">do</span> this sweet lord Caesar:<font></font>
The dece</code></pre><br>
<p>      ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>.</p><br>
<p><img src="https://habrastorage.org/webt/k7/8h/yr/k78hyrlbcowjfdmghxt119t7q90.png"><br>
<em>   </em></p><br>
<p>       ,      ,       ,  ,        — -. </p><br>
<h3 id="sbor-dannyh"> </h3><br>
<p>   —  ,   ,        .</p><br>
<p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">poetory.ru</a>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">hior</a>.              .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> HTML</a>     -. ,    Julia      :</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">HTTP.jl</a> — HTTP-     </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">Gumbo.jl</a> —  html-   </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">Cascadia.jl</a> —    Gumbo</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/cm/yp/sx/cmypsxsie6a-q68hdrry1vwz2qo.png"></p><br>
<p>  ,         :</p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><pre><code class="julia hljs"><span class="hljs-keyword">using</span> HTTP, Gumbo, Cascadia<font></font>
<font></font>
<span class="hljs-keyword">function</span> grabit(npages)<font></font>
    str = <span class="hljs-string">""</span>
    <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>:npages<font></font>
<font></font>
        url = <span class="hljs-string">"https://poetory.ru/por/rating/<span class="hljs-variable">$i</span>"</span>
 <span class="hljs-comment"># https://poetory.ru/pir/rating/$i</span><font></font>
<font></font>
        res = HTTP.get(url)<font></font>
        body1 = <span class="hljs-built_in">String</span>(res.body)<font></font>
        htmlka = parsehtml(body1)<font></font>
        qres = eachmatch(<span class="hljs-string">sel".item-text"</span>, htmlka.root)<font></font>
<font></font>
        <span class="hljs-keyword">for</span> elem <span class="hljs-keyword">in</span> qres<font></font>
            str *= (elem[<span class="hljs-number">1</span>].text * <span class="hljs-string">"\n\n"</span>)
        <span class="hljs-keyword">end</span>
        print(i, <span class="hljs-string">' '</span>)
    <span class="hljs-keyword">end</span><font></font>
<font></font>
    f = open(<span class="hljs-string">"poroh.txt"</span>,<span class="hljs-string">"w"</span>)<font></font>
    write(f, str)<font></font>
    close(f)<font></font>
<span class="hljs-keyword">end</span><font></font>
<font></font>
grabit(<span class="hljs-number">30</span>)</code></pre></div></div><br>
<p>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>.       :</p><br>
<pre><code class="julia hljs">str = read(<span class="hljs-string">"pies.txt"</span>, <span class="hljs-built_in">String</span>) * read(<span class="hljs-string">"poroh.txt"</span>, <span class="hljs-built_in">String</span>);<font></font>
length(str)<font></font>
<font></font>
<span class="hljs-comment"># 7092659</span></code></pre><br>
<p>    :</p><br>
<pre><code class="julia hljs">prod(sort([unique(str)..., <span class="hljs-string">'_'</span>]) )
<span class="hljs-comment"># "\n !\"#\$&amp;'()*+,-./012345678:&lt;&gt;?@ABCDEFGHIKLMNOPQRSTUV[]^__abcdefghijklmnopqrstuvwxyz«\uad°º»¾¿ÐÑßàáãäåæçèéêëìíîðñóõöùûüýþÿıņōŏƍǝǹɐɓɔɯɹʁʎʚʞ́εєіїўѣҺאבהוחטיךלםמעףצקרשתئاةتجدرزسعكلمنهوپچڑکگںھہیے  \u200b–—…€║╛╨█□　\ufeff"</span></code></pre><br>
<p><img src="https://habrastorage.org/webt/5t/3d/l5/5t3dl58chzqfspuxjufhfu8aitc.png"><br>
<em>     </em></p><br>
<p>--,  !     (       ).        </p><br>
<pre><code class="julia hljs">str = lowercase(str) <span class="hljs-comment">#   </span>
 <span class="hljs-comment">#     </span>
str = replace(str, <span class="hljs-string">r"|"</span> =&gt; <span class="hljs-string">s""</span> );
<span class="hljs-comment">#  </span>
str = replace(str, <span class="hljs-string">r"　| | "</span> =&gt; <span class="hljs-string">" "</span>);
<span class="hljs-comment">#    </span>
str = replace(str, <span class="hljs-string">r"[!-]|[ѐ-\u2714]|\ufeff"</span> =&gt; <span class="hljs-string">""</span>)<font></font>
<font></font>
alstr = str |&gt; unique |&gt; sort |&gt; prod<font></font>
<span class="hljs-comment">#alstr = prod(sort(unique(str)) ) # </span><font></font>
<font></font>
<span class="hljs-comment"># "\n "</span></code></pre><br>
<blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">rssdev10</a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a></blockquote><p>    .        ,             —      .</p><br>
<p><img src="https://habrastorage.org/webt/d9/ue/ov/d9ueovabs8fspm1l7e4zf9q_15o.jpeg"></p><br>
<p>    Flux       onehot-:</p><br>
<div class="spoiler"><b class="spoiler_title">   Flux</b><div class="spoiler_text"><pre><code class="julia hljs"><span class="hljs-keyword">using</span> Flux
<span class="hljs-keyword">using</span> Flux: onehot, chunk, batchseq, throttle, crossentropy
<span class="hljs-keyword">using</span> StatsBase: wsample
<span class="hljs-keyword">using</span> Base.Iterators: partition<font></font>
<font></font>
texta = collect(str)<font></font>
println(length(texta)) <span class="hljs-comment"># 7086899</span><font></font>
<font></font>
alphabet = [unique(texta)..., <span class="hljs-string">'_'</span>]<font></font>
texta = map(ch -&gt; onehot(ch, alphabet), texta)<font></font>
stopa = onehot(<span class="hljs-string">'_'</span>, alphabet)<font></font>
<font></font>
println(length(alphabet)) <span class="hljs-comment"># 34</span><font></font>
<font></font>
N = length(alphabet)<font></font>
seqlen = <span class="hljs-number">128</span>
nbatch = <span class="hljs-number">128</span><font></font>
<font></font>
Xs = collect(partition(batchseq(chunk(texta, nbatch), stopa), seqlen))<font></font>
Ys = collect(partition(batchseq(chunk(texta[<span class="hljs-number">2</span>:<span class="hljs-keyword">end</span>], nbatch), stopa), seqlen));</code></pre></div></div><br>
<p>    LSTM-,    ,    ,      :</p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><pre><code class="julia hljs">m = Chain(<font></font>
  LSTM(N, <span class="hljs-number">256</span>),<font></font>
  LSTM(<span class="hljs-number">256</span>, <span class="hljs-number">128</span>),<font></font>
  Dense(<span class="hljs-number">128</span>, N),<font></font>
  softmax)<font></font>
<font></font>
<span class="hljs-comment"># m = gpu(m)</span><font></font>
<font></font>
<span class="hljs-keyword">function</span> loss(xs, ys)<font></font>
  l = sum(crossentropy.(m.(gpu.(xs)), gpu.(ys)))<font></font>
  Flux.truncate!(m)<font></font>
  <span class="hljs-keyword">return</span> l
<span class="hljs-keyword">end</span><font></font>
<font></font>
opt = ADAM(<span class="hljs-number">0.01</span>)<font></font>
tx, ty = (Xs[<span class="hljs-number">5</span>], Ys[<span class="hljs-number">5</span>])<font></font>
evalcb = () -&gt; <span class="hljs-meta">@show</span> loss(tx, ty)</code></pre></div></div><br>
<p>   ,     ,     ,          .        ,   -     ...</p><br>
<pre><code class="julia hljs"><span class="hljs-meta">@time</span> Flux.train!(loss, params(m), zip(Xs, Ys), opt,<font></font>
            cb = throttle(evalcb, <span class="hljs-number">30</span>))</code></pre><br>
<p>        </p><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><pre><code class="julia hljs"><span class="hljs-keyword">function</span> sample(m, alphabet, len)
  <span class="hljs-comment">#m = cpu(m)</span><font></font>
  Flux.reset!(m)<font></font>
  buf = <span class="hljs-built_in">IOBuffer</span>()<font></font>
  c = rand(alphabet)<font></font>
  <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>:len<font></font>
    write(buf, c)<font></font>
    c = wsample(alphabet, m( onehot(c, alphabet) ).data )<font></font>
  <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">String</span>(take!(buf))
<span class="hljs-keyword">end</span><font></font>
<font></font>
sample(m, alphabet, <span class="hljs-number">1000</span>) |&gt; println</code></pre></div></div><br>
<pre><code class="julia hljs">   <font></font>
   <font></font>
    <font></font>
   <font></font>
<font></font>
  <font></font>
   <font></font>
   <font></font>
   <font></font>
<font></font>
    <font></font>
  <font></font>
  <font></font>
  <font></font>
<font></font>
  <font></font>
    <font></font>
  <font></font>
    <font></font>
<font></font>
    <font></font>
  <font></font>
    <font></font>
    </code></pre><br>
<p>  -   .                  ,      ,              . ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>.</p><br>
<p><img src="https://habrastorage.org/webt/_u/gs/pe/_ugspe9moto6oywzonf36s4lple.jpeg"></p><br>
<p>      ,     </p><br>
<pre><code class="julia hljs">weights = Tracker.data.(params(model));<font></font>
<font></font>
<span class="hljs-keyword">using</span> BSON: <span class="hljs-meta">@save</span> <span class="hljs-comment"># https://github.com/JuliaIO/BSON.jl</span><font></font>
<font></font>
<span class="hljs-meta">@save</span> <span class="hljs-string">"Pies_34x128.bson"</span> weights
<span class="hljs-comment">#     :</span>
<span class="hljs-keyword">using</span> BSON: <span class="hljs-meta">@load</span><font></font>
<font></font>
<span class="hljs-meta">@load</span> <span class="hljs-string">"mymodel1.bson"</span> weights<font></font>
<font></font>
Flux.loadparams!(m, weights)</code></pre><br>
<p>      -.        ,      .          </p><br>
<p><img src="https://habrastorage.org/webt/rh/k5/cj/rhk5cjluubyz2llawwg9_ozimpa.png"></p><br>
<pre><code class="julia hljs">        !     .<font></font>
<font></font>
 ?  ,    ,                 ,   ,        ,  ,   , <font></font>
<font></font>
   ,                      .           , ,       ,          ,        .            ,         . ?<font></font>
<font></font>
, ,  ,   ,       ,  ,   </code></pre><br>
<p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">   Julia</a>    :</p><br>
<div class="spoiler"><b class="spoiler_title">ex machina</b><div class="spoiler_text"><pre><code class="julia hljs">                 <span class="hljs-comment"># optional</span>
    _ = <span class="hljs-built_in">Expr</span>(expMreadcos, <span class="hljs-built_in">Expr</span>(:meta, :stderr), :n, :default, ex, context[o.<span class="hljs-literal">e</span>.ex, ex.args[<span class="hljs-number">1</span>] -typeinfo + <span class="hljs-built_in">Int</span>])<font></font>
<font></font>
    isprint((v), <span class="hljs-built_in">GotoNode</span>(<span class="hljs-literal">e</span>))
<span class="hljs-keyword">end</span><font></font>
<font></font>
<span class="hljs-keyword">for</span> (fname, getfield) <span class="hljs-keyword">do</span> t<font></font>
        print(io, <span class="hljs-string">":"</span>)<font></font>
        new()<font></font>
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span><font></font>
<font></font>
<span class="hljs-keyword">if</span> option
    <span class="hljs-keyword">quote</span>
        bounds <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>
    <span class="hljs-meta">@sprintf</span>(<span class="hljs-string">"Other prompt"</span>, ex.field, UV_REQ) == pop!(bb_start_off+<span class="hljs-number">1</span>, i)<font></font>
    write(io, take!(builder_path))<font></font>
<span class="hljs-keyword">end</span><font></font>
<font></font>
Base.:Table(io::<span class="hljs-built_in">IOContext</span>) = write(io, position(s))<font></font>
<font></font>
<span class="hljs-keyword">function</span> const_rerror(pre::<span class="hljs-built_in">GlobalRef</span>)<font></font>
    ret = proty(d)<font></font>
    <span class="hljs-keyword">if</span> !rel_key &amp;&amp; length(blk)
        <span class="hljs-keyword">return</span> htstarted_keys(terminal(u, p))
    <span class="hljs-keyword">end</span>
    write(io, (<span class="hljs-string">"\\\\"</span> =&gt; <span class="hljs-string">"\n\n\n\n"</span>) ? <span class="hljs-string">"&lt;username&gt;\n&gt;\n"</span><font></font>
    p = empty(dir+stdout)<font></font>
    n = MD(count_ok_new_data(L) : n_power<font></font>
    <span class="hljs-keyword">while</span> push!(blks[$ur], altbuf)
    <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">function</span> prec_uninitual(p, keep='\n')<font></font>
        print(io, <span class="hljs-string">"1 2"</span>)
    <span class="hljs-keyword">else</span><font></font>
        p = blk + p0<font></font>
        out = Mair(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">elseif</span> occursin(<span class="hljs-string">".cmd"</span>, keep=ks) != <span class="hljs-number">0</span><font></font>
        res = write(io, c)<font></font>
    <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">while</span> take!(word)</code></pre></div></div><br>
<p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>,      ,    , !        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>.</p><br>
<p> ,  ,      .  ,    ,       .  ,      ,        .          Natural Language Processing,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    </a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a>.</p><br>
<p>   .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>,  — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>,   ,   ,   ,    !</p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja478772/index.html">畳み込みテクスチャ</a></li>
<li><a href="../ja478774/index.html">Arduinoとスティックからの新年の気分</a></li>
<li><a href="../ja478778/index.html">ハブラ探偵とお祭り気分</a></li>
<li><a href="../ja478782/index.html">ロシア連邦でドローン（BVS、UAV）の飛行許可を取得</a></li>
<li><a href="../ja478788/index.html">ある王国では、「勢いのある」状態ではありません。Yandexレポート</a></li>
<li><a href="../ja478796/index.html">アメリカの学部：一流の高校への異例の道</a></li>
<li><a href="../ja478798/index.html">それでもできなかったグラフェン</a></li>
<li><a href="../ja478802/index.html">React-adminとdjango RESTフレームワーク</a></li>
<li><a href="../ja478804/index.html">骨董品：Sound Blaster Pro 2のより悪い、より良い、または機能</a></li>
<li><a href="../ja478806/index.html">JSONソースをREFL.MEに自動的に追加して、メッセージとアラートを生成します</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>