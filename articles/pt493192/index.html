<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì§ ü§±üèª üé≠ Jogo ASCII - um compromisso de autenticidade e conveni√™ncia üë©üèæ‚Äç‚öïÔ∏è üë©üèø üí£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° a todos! Enquanto desenvolvia um jogo estilizado como modo de texto, cheguei √† contradi√ß√£o esperada. Por um lado, o jogo deve estar saturado com o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Jogo ASCII - um compromisso de autenticidade e conveni√™ncia</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493192/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ol√° a todos! </font><font style="vertical-align: inherit;">Enquanto desenvolvia um jogo estilizado como modo de texto, cheguei √† contradi√ß√£o esperada. </font><font style="vertical-align: inherit;">Por um lado, o jogo deve estar saturado com o esp√≠rito do modo de texto, porque para isso eu gosto e, espero, os f√£s de jogos retr√¥ gostem. </font><font style="vertical-align: inherit;">Por outro lado, quero que a jogabilidade seja o mais divertida e moderna poss√≠vel. </font><font style="vertical-align: inherit;">Neste artigo, descreverei cinco pontos nos quais me desviei do modo de texto verdadeiro. </font><font style="vertical-align: inherit;">Consegui manter o humor alfanum√©rico do tubo no jogo? </font><font style="vertical-align: inherit;">Pe√ßo para expressar uma opini√£o!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3m/au/i_/3maui_cqcqdkfsxpfwj-us8x0e4.jpeg"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Conjunto de Caracteres</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Absolutamente todos os gr√°ficos do jogo s√£o criados usando os caracteres digitados no teclado. </font><font style="vertical-align: inherit;">Para ser mais preciso, s√£o usados ‚Äã‚Äãos caracteres da tabela ASCII do 32¬∫ ao 126¬∫ caracteres. </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/11/7_/e7/117_e79lbv7xxuzovttn1i3e7hy.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, os textos do jogo est√£o localizados em v√°rios idiomas. </font><font style="vertical-align: inherit;">Agora, suporte russo e ingl√™s em paralelo, mas quero adicionar mais alguns, incluindo chin√™s. </font><font style="vertical-align: inherit;">Os caracteres das tabelas ASCII, mesmo os estendidos, claramente n√£o s√£o suficientes para esses fins. </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/du/cl/oa/ducloab5-3du4oldzbmxptnvvja.jpeg"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As caixas de di√°logo no jogo podem conter personagens que n√£o pertencem ao intervalo aut√™ntico. </font><font style="vertical-align: inherit;">No entanto, esses caracteres n√£o est√£o envolvidos no design. </font><font style="vertical-align: inherit;">Os gr√°ficos s√£o apenas ASCII.</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Precis√£o de sub caracteres</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diferentemente dos modos de texto, o ASCIIDENT usa precis√£o de pixel para mover camadas de texto e sprites. </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/0o/l0/op/0ol0ophebaebco715pyi0kic2e4.gif"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No modo de texto, a mudan√ßa de sprite em uma posi√ß√£o parece um salto percept√≠vel. Para um jogo din√¢mico como o ASCIIDENT - isso √© inaceit√°vel do ponto de vista da experi√™ncia moderna em jogos. Portanto, para sprites individuais e camadas de texto, que ser√£o discutidas mais adiante, fiz um movimento suave. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para manter a autenticidade, aderir √† regra a seguir. Dentro de uma camada de texto, todos os objetos est√°ticos est√£o claramente alinhados na grade de caracteres. Al√©m disso, cada sprite consiste em caracteres tamb√©m alinhados em uma grade de caracteres.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em rela√ß√£o umas √†s outras, camadas e objetos em movimento podem estar localizados a uma dist√¢ncia sub-simb√≥lica. </font><font style="vertical-align: inherit;">Isso garante um movimento suave e, consequentemente, uma jogabilidade confort√°vel. </font><font style="vertical-align: inherit;">Esse √© um compromisso.</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Parallax</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O jogo tem v√°rias camadas de texto que se movem em velocidades diferentes, percebendo o efeito de paralaxe. </font><font style="vertical-align: inherit;">Os s√≠mbolos das camadas superiores se sobrep√µem aos s√≠mbolos das camadas inferiores. </font><font style="vertical-align: inherit;">Com precis√£o de subcaracteres, o crit√©rio de sobreposi√ß√£o √© uma sobreposi√ß√£o de mais de 50% da largura e / ou altura da c√©lula de texto. </font><font style="vertical-align: inherit;">Usando um buffer z simples, essa sobreposi√ß√£o √© f√°cil de implementar. </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/tx/6f/sf/tx6fsfikvf90-erih8upoha3ssi.gif"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A paralaxe com movimento suave das camadas √© uma t√©cnica gr√°fica muito expressiva. </font><font style="vertical-align: inherit;">Sim, isso pode violar bastante a autenticidade do modo de texto. </font><font style="vertical-align: inherit;">No entanto, eu decidi usar paralaxe. </font><font style="vertical-align: inherit;">Acontece muito bem.</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Anima√ß√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anima√ß√£o de sprites individuais no jogo "honesto", feito estritamente no modo de texto. A posi√ß√£o de cada caractere √© alinhada na grade de texto. As anima√ß√µes s√£o obtidas substituindo caracteres nas c√©lulas. </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/rq/-n/bt/rq-nbtwibvurx8nqe48jrl928fw.gif"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Achei muito importante manter a integridade das anima√ß√µes de sprites. Esta √© provavelmente a principal coisa que torna o jogo t√£o atraente. Al√©m disso, com esse tipo de anima√ß√£o, torna-se tecnicamente muito simples criar e editar sprites ASCII animados. N√£o pude resistir e criei um editor ASCII embutido no jogo. A qualquer momento, qualquer elemento gr√°fico pode ser carregado e alterado. Voc√™ pode, por exemplo, editar o ba√∫ adicionando quadros de anima√ß√£o e depois de salvar todos os ba√∫s em todos os lugares do jogo, ele se tornar√° novo. Qualquer jogador pode fazer isso, criando assim o seu pr√≥prio mod do jogo.</font></font><br>
 <br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/AZw6BZaF250" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, √†s vezes voc√™ precisa de anima√ß√£o suave! </font><font style="vertical-align: inherit;">Por exemplo, no jogo existe um local onde a fibra √≥ptica biol√≥gica √© cultivada. </font><font style="vertical-align: inherit;">Um drone voa acima das camas, o que irriga a fibra √≥ptica com um l√≠quido t√≥xico. </font><font style="vertical-align: inherit;">O l√≠quido deve pingar suavemente, caso contr√°rio, √© feio. </font><font style="vertical-align: inherit;">Para implementar esses efeitos, criei geradores de sprites e sua liga√ß√£o a quaisquer outros sprites no mundo do jogo. </font><font style="vertical-align: inherit;">Tecnicamente, cada gota √© um sprite separado que pode se mover com precis√£o de subpixel. </font><font style="vertical-align: inherit;">Um compromisso razo√°vel novamente.</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Luz, cor e fonte</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muitas pessoas para quem eu mostro o jogo comentam que h√° muitas cores no meu jogo. Nos modos de texto, n√£o havia tanta riqueza de tons. O fato √© que implementei um mapa de luz em tela cheia que calcula qualquer n√∫mero de fontes de luz. Ao mesmo tempo, a cor de cada caractere √© de 24 bits (16.777.216 cores diferentes). √Äs vezes a imagem parece colorida. </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/ta/5h/2i/ta5h2i1ijypt1yhav7kwmikgn1w.gif"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para emular os modos de cores retr√¥, fiz sete op√ß√µes adicionais: tr√™s modos monocrom√°ticos, dois modos de 16 cores (DOS / Mac), 2 bits e modo Game Boy. O modo de fonte LED tamb√©m est√° dispon√≠vel. Nesse modo, cada pixel de cada caractere √© separado dos vizinhos. O v√≠deo abaixo mostra todos os modos - como eles afetam a imagem.</font></font><br>
 <br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Xnl4sGhA0m0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O algoritmo de convers√£o de cores para os modos monocrom√°ticos fez isso. Primeiro, calculo o brilho da cor (R, G, B): </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V = 0,3 * R + 0,59 * G + 0,11 * B Os </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
monitores retr√¥ monocrom√°ticos possuem tons de cores diferentes para diferentes brilhos de s√≠mbolos. Portanto, a sombra tamb√©m deve mudar. Eu uso essa interpola√ß√£o linear: </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RR = sqrt (V) * (monoR1 * (1 - V) + monoR2 * V) </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GG = sqrt (V) * (monoG1 * (1 - V) + monoG2 * V) </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BB = sqrt (V ) * (monoB1 * (1 - V) + monoB2 * V) </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cor final (RR, GG, BB) </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para modos de 16 cores, eu uso um algoritmo diferente. Para cada cor (R, G, B), estou procurando a cor mais pr√≥xima da paleta. Isso √© tudo.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O modo de 2 bits e Game Boy tem apenas quatro cores na paleta. </font><font style="vertical-align: inherit;">Uma pesquisa simples pela cor mais pr√≥xima fornece uma imagem muito escura. </font><font style="vertical-align: inherit;">Portanto, antes de procurar uma cor na paleta, fa√ßo a normaliza√ß√£o: </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d = 1 / max (R, G, B) </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
normR = d * R, normG = d * G, normB = d * B </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As f√≥rmulas s√£o esquem√°ticas. </font><font style="vertical-align: inherit;">Os cheques para divis√£o por zero n√£o foram mencionados. </font><font style="vertical-align: inherit;">Espero que todos que decidirem jogar ASCIIDENT possam escolher por si mesmos um esquema de cores que aque√ßa ao m√°ximo sua alma retr√¥.</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. Console com um modo de texto honesto</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No processo de cria√ß√£o do jogo, surgiu a id√©ia de colocar terminais de computador com um modo de texto honesto no mundo do jogo. Voc√™ pode abord√°-los, conectar-se e trabalhar / se divertir. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o jogo em si √© estilizado como um modo de texto de 80x25 com rolagem suave e paralaxe de camadas de texto, a tela do terminal interno possui uma resolu√ß√£o de 72x20 caracteres, sem possibilidade de ir al√©m dessa grade. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos os aplicativos para terminais incorporados (incluindo o gerenciador de inicializa√ß√£o) s√£o escritos na linguagem de programa√ß√£o DUHASM. Esse idioma √© semelhante ao Assembler, mas possui vari√°veis ‚Äã‚Äãdin√¢micas e matrizes. Aqui est√°, por exemplo, uma parte do c√≥digo do jogo Pi-astre Hanter: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yu/fh/gi/yufhgigy6d6il1scdqgmgaaen4q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um recurso divertido - os loops s√£o implementados como parte de constru√ß√µes condicionais, onde LOOP √© colocado em vez de END.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No lan√ßamento, o jogo carrega aplicativos de arquivos * .duhasm e os compila em c√≥digo de bytes. Quando um jogador ativa o console, um int√©rprete honesto √© iniciado. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No momento, escrevi dois jogos no DUHASM, que j√° est√£o dispon√≠veis na vers√£o atual. Existe um plano para escrever um editor de c√≥digo (tamb√©m no DUHASM, √© claro) para que cada jogador possa tentar criar um aplicativo / jogo que todos os outros jogadores ver√£o.</font></font><br>
 <br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/xlJWOktA9k0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espero que em v√£o n√£o tenha gasto muito esfor√ßo e tempo para implementar esse recurso e que haja pessoas que gostem dele. </font><font style="vertical-align: inherit;">A linguagem DUHASM certamente precisa de algum refinamento. </font><font style="vertical-align: inherit;">N√£o gosto muito de como, por exemplo, fun√ß√µes s√£o chamadas com argumentos. </font><font style="vertical-align: inherit;">De acordo com a hist√≥ria do jogo, a linguagem DUHASM surgiu com um ciborgue semi-sens√≠vel que escapou do laborat√≥rio de piratas espaciais. </font><font style="vertical-align: inherit;">Surpreendentemente, essa linguagem de programa√ß√£o se enraizou nos arredores da parte habitada do universo.</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CONCLUS√ÉO</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, havia muitos compromissos - um conjunto de caracteres, precis√£o de sub-caracteres, anima√ß√£o, cores. </font><font style="vertical-align: inherit;">Mas tamb√©m para manter um senso de autenticidade no modo de texto, comprometi-me muito nesses mais de dois anos de desenvolvimento. </font><font style="vertical-align: inherit;">Para obter mais feedback e entender se estou indo na dire√ß√£o certa, decidi iniciar o jogo com </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acesso antecipado no Steam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">H√° algo magicamente atraente nos modos de texto. </font><font style="vertical-align: inherit;">Quando qualquer imagem pode ser digitada com caracteres no teclado, √†s vezes √© dif√≠cil resistir e n√£o iniciar o jogo com o editor ASCII embutido, e nem mesmo desenhar um prot√≥tipo de um novo minijogo, que ser√° implementado na linguagem DUHASM. </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/0y/i7/se/0yi7sedgucpkb-nstvzouepmo2s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obrigado a todos! </font><font style="vertical-align: inherit;">At√©!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt493172/index.html">Quanto maior, pior ou por que o loop do jogo √© importante</a></li>
<li><a href="../pt493178/index.html">Tudo √© incr√≠vel em software, mas todo mundo est√° infeliz</a></li>
<li><a href="../pt493184/index.html">Desenvolvimento de contrato de eletr√¥nica. C√°lculo do projeto</a></li>
<li><a href="../pt493186/index.html">Os melhores artigos relacionados a autom√≥veis para desenvolvedores em Habr√© [170+]</a></li>
<li><a href="../pt493190/index.html">Como criamos a galeria de arte em redes neurais e por que n√£o damos fotos para copiar</a></li>
<li><a href="../pt493196/index.html">Preparando-se para o SHAD sem sair de casa</a></li>
<li><a href="../pt493198/index.html">Como visualizar e animar modelos (geof√≠sicos). Modelos Voxel e superf√≠cies de malha</a></li>
<li><a href="../pt493200/index.html">Distribui√ß√£o de um cavalo esf√©rico no v√°cuo em toda a Federa√ß√£o Russa</a></li>
<li><a href="../pt493202/index.html">O RBK.money lan√ßou o primeiro processamento de pagamentos de c√≥digo aberto do mundo - criando o futuro juntos</a></li>
<li><a href="../pt493204/index.html">Alexey Komissarov sobre Digital Breakthrough 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>