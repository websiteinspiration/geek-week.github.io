<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õÖÔ∏è üõ•Ô∏è üë≤üèª Ahorre tiempo, nervios y horas hombre üëãüèæ üö∂ üïµÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nuestros proyectos son generalmente regionales, y los clientes, generalmente ministerios. Pero, adem√°s del sector p√∫blico, las organizaciones privadas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Ahorre tiempo, nervios y horas hombre</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/barsgroup/blog/495942/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nuestros proyectos son generalmente regionales, y los clientes, generalmente ministerios. </font><font style="vertical-align: inherit;">Pero, adem√°s del sector p√∫blico, las organizaciones privadas tambi√©n usan nuestros sistemas. </font><font style="vertical-align: inherit;">Pr√°cticamente no hay problemas con ellos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, los proyectos principales son regionales, y a veces hay problemas con ellos. </font><font style="vertical-align: inherit;">Por ejemplo, con rendimiento, cuando en regiones de 20k nuestros preciosos usuarios est√°n en el per√≠odo de implementaci√≥n de nuevas funcionalidades en servidores de productos. </font><font style="vertical-align: inherit;">Es un dolor ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mi nombre es Ruslan y estoy involucrado en escoltar los sistemas de informaci√≥n del Grupo BARS y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desarrollar un robot asesino para DBAs seriales brutales</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">El ayuno no es para los d√©biles de coraz√≥n: muchas letras e im√°genes.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_2/kf/av/_2kfavets7hbt3nwzvy_bd9mqos.jpeg"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ awr</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algunas de nuestras aplicaciones se ejecutan en Oracle DBMS. Hay proyectos en el DBMS PostgreSQL. Oracle tiene algo maravilloso: recopilar estad√≠sticas sobre la carga en el DBMS, que resalta los problemas existentes e incluso ofrece recomendaciones para su eliminaci√≥n: el Dep√≥sito de carga de trabajo autom√°tico (AWR). En un momento (es decir, en el momento del dolor), los desarrolladores pidieron constantemente recopilar </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">informes AWR para el an√°lisis de rendimiento</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Honestamente fuimos al servidor DBMS, recopilamos informes, nos los arrastramos y los enviamos para su an√°lisis a producci√≥n. Una vez despu√©s del 5 comenz√≥ a tensarse ... despu√©s del 10 - para causar irritaci√≥n ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un d√≠a, uno de mis colegas expres√≥ la idea de que todo lo que se haga m√°s de una vez deber√≠a automatizarse. Hasta el momento de la molestia, para ser honesto, no pens√© en ello y trat√© de automatizar todo lo que se puede automatizar, pero a menudo no ten√≠a demanda y era m√°s investigaci√≥n que aplicaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y luego pens√©: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Los administradores no son necesarios para generar un informe ..."</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Despu√©s de todo, recopilar un informe es ejecutar el script sql @ $ ORACLE_HOME / rdbms / admin / awrrpt.sql y recoger el informe del servidor para nosotros ... Oh s√≠, no dejamos que el desarrollo salga a la venta.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego busqu√© en Google la informaci√≥n necesaria, cre√© una funci√≥n del art√≠culo a modo de prueba, extraje el script y un milagro: el informe se recopil√≥ y se puede guardar localmente. Las funciones creadas donde los informes AWR a menudo se necesitaban, les dijeron a los desarrolladores c√≥mo usarlo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alrededor de este tiempo, en mi tiempo libre, despu√©s de hablar con @BotFather, cre√© un bot de Telegram para m√≠, solo por diversi√≥n. Me atornill√© un simple funcional all√≠: para mostrar la hora actual, los tipos de cambio, el clima, le ense√±√© a enviar cumplidos a mi esposa (entonces una ni√±a) en un horario. Quiz√°s en ese momento enviar cumplidos era la funcionalidad m√°s buscada de mi bot, mi esposa lo agradeci√≥.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces. Los desarrolladores nos escriben en Telegram, les enviamos un informe en Telegram ... Pero, ¬øqu√© pasa si no nos escriben a nosotros, sino al bot? De hecho, ser√° mejor para todos, el informe ser√° recibido m√°s r√°pido y, lo m√°s importante, por nosotros. Entonces, la idea de la primera funcionalidad buscada naci√≥ para mi bot. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comenc√© la implementaci√≥n. Lo hice, como lo logr√©, en PHP (en realidad nuestra aplicaci√≥n est√° en PHP, lo entiendo m√°s que Python). El codificador es m√°s o menos m√≠o, as√≠ que no mostrar√© mi c√≥digo :) El </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
bot vive en nuestra red corporativa, tiene acceso a ciertos proyectos, incluidas las bases de datos de destino. Para no molestarme con los par√°metros en el comando o el men√∫, atornill√© esta funcionalidad a un chat grupal con notificaciones de monitoreo. Entonces, el bot sabe de inmediato en qu√© base de datos recopilar el informe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Habiendo recibido un comando de la forma </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ awr N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, donde N es la cantidad de horas completas para las que se necesita un informe (de forma predeterminada, 1 hora), incluso durante una semana, si la base de datos no se reinicia, el bot comienza a funcionar de inmediato, recopila el informe, lo publica como una p√°gina web y all√≠ mismo (casi all√≠ mismo) proporciona un enlace a un informe muy necesario. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seguimos el enlace y aqu√≠ est√°, el informe de AWR: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ki/yr/tk/kiyrtktigm4qjsumovp2vl4roa0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como se esperaba, los desarrolladores hicieron frente a esta generaci√≥n de informes, incluso alguien agradeci√≥. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Habiendo apreciado la conveniencia del equipo, los gerentes de proyecto de otras regiones quer√≠an lo mismo, porque sobre todo </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obtienen luli del cliente que se</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> preocupa por el rendimiento y la disponibilidad de los sistemas. Se agreg√≥ un bot a otros chats. Todav√≠a lo usan, y me alegro por eso.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M√°s tarde, colegas de CIT escribieron sobre c√≥mo recopilamos informes, tambi√©n quer√≠an hacerlo. </font><font style="vertical-align: inherit;">No los agregu√© a nuestros chats, cre√© un chat separado con la generaci√≥n de informes en un horario y a pedido.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ pgBadger</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenemos otras aplicaciones en PHP junto con PostgreSQL. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se implement√≥ la recopilaci√≥n del informe pgBadger para aquellos que lo necesitan con el mismo principio: en los chats grupales. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al principio lo usaron, pero luego se detuvieron. </font><font style="vertical-align: inherit;">Corte funcional como innecesario.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ deber</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En nuestro departamento hay turnos nocturnos y, en consecuencia, hay un horario. </font><font style="vertical-align: inherit;">Est√° en las tablas de google. </font><font style="vertical-align: inherit;">No siempre es conveniente buscar un enlace, abrir un cronograma, buscarlo usted mismo ... Uno de los antiguos colegas tambi√©n jug√≥ con su bot Telegram e introdujo en el chat de nuestro departamento </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">notificaciones sobre el inicio de un turno de servicio para los empleados del departamento.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El bot analiza el horario, determina el asistente por la fecha actual y, de acuerdo con el horario o por solicitud, informa qui√©n est√° en servicio hoy. </font><font style="vertical-align: inherit;">Result√≥ genial, c√≥modo. </font><font style="vertical-align: inherit;">Es cierto que no me gust√≥ mucho el formato del mensaje. </font><font style="vertical-align: inherit;">Adem√°s, para los empleados de otro departamento (por ejemplo, el centro de negocios "Medicina"), la informaci√≥n sobre el personal de servicio en otras √°reas no es realmente necesaria, pero usted necesita saber qui√©n es el oficial de servicio en la "Medicina" en caso de problemas. </font><font style="vertical-align: inherit;">Decid√≠ "tomar prestada" la funcionalidad, pero cambiar lo que no me gust√≥. </font><font style="vertical-align: inherit;">Hice un formato de mensaje conveniente para m√≠ y para otros, eliminando informaci√≥n redundante.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ tnls</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de la "prueba de la pluma" de la automatizaci√≥n a trav√©s del bot Telegram, aparecieron muchas ideas diferentes, pero quer√≠a hacer las cosas estrictamente necesarias. Decid√≠ mantener </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estad√≠sticas sobre las apelaciones.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Para acceder a los proyectos de nuestros clientes, hemos implementado el llamado "servidor de salto" o el servidor de reenv√≠o. Las conexiones VPN se generan en √©l, luego a trav√©s de ssh, los puertos de aplicaciones, las bases de datos y otras sondas auxiliares se env√≠an a nuestra red local para facilitar el acceso a los proyectos de nuestros empleados, sin problemas con las conexiones VPN. Es suficiente configurar una conexi√≥n VPN a nuestra red corporativa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las estad√≠sticas de llamadas sugirieron que a menudo, despu√©s de la ca√≠da de uno de los t√∫neles (en caso de problemas de red, por tiempo de espera, por ejemplo), recurren para restaurar el acceso al proyecto. </font><font style="vertical-align: inherit;">En la mayor√≠a de los casos, solo reiniciar la conexi√≥n es suficiente y todo se arregla. </font><font style="vertical-align: inherit;">Hag√°moslo t√∫ mismo. </font><font style="vertical-align: inherit;">Aqu√≠ est√° el comando: </font></font><br>
<img src="https://habrastorage.org/webt/pq/th/ad/pqthadwkyi0tegqd7tn2qzrpxws.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Fall" a trav√©s del elemento de men√∫ deseado, seleccione su proyecto, espere un minuto y todos est√©n contentos y satisfechos ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al recibir el comando, con un ligero movimiento de </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">los</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bytes y bits, el bot se conecta al servidor de reenv√≠o, sabiendo de antemano qu√© reenv√≠o debe reiniciarse, y hace su trabajo: restaura la conexi√≥n con el proyecto. </font><font style="vertical-align: inherit;">Escrib√≠ instrucciones para resolver tales problemas por mi cuenta. </font><font style="vertical-align: inherit;">Y nos contactaron solo si la herramienta provista no funciona ...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ecp_to_pem</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las estad√≠sticas adicionales mostraron que a menudo es necesario convertir la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">firma digital Crypto Pro al formato pem</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base64</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) para diversas integraciones, y tenemos muchas de ellas. Tarea: toma el contenedor, lo copia en una computadora con Windows con la utilidad P12FromGostCSP instalada (por cierto, paga), la convierte a pfx y convierte pfx usando OpenSSL (con soporte para cifrado GOST) a pem. No es muy conveniente, pero lo quiero con el clic de un dedo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Google nuevamente vino al rescate. Encontr√≥ la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilidad de alguna persona amable</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Recogido, como est√° escrito en README - ganado. Ense√±√≥ al bot a trabajar con la utilidad y obtuvo una conversi√≥n casi instant√°nea.</font></font><br>
<img src="https://habrastorage.org/webt/aq/qo/yu/aqqoyu8qmwsrjbske46acai6bie.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el momento de la implementaci√≥n final, se emiti√≥ una orden para cambiar a un nuevo formato de cifrado: gost-2012. </font><font style="vertical-align: inherit;">Por lo que recuerdo, la utilidad en ese momento solo funcionaba con el viejo GOST (2001), quiz√°s en general era otra utilidad similar de otra buena persona, no recuerdo exactamente. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de la transici√≥n al nuevo GOST, la funcionalidad del bot se elimin√≥ por razones de seguridad. </font><font style="vertical-align: inherit;">Lo implement√© en un contenedor acoplable.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dockerfile, de repente quien necesita:</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">FROM ubuntu:16.04                                                                                                                                                                        <font></font>
RUN apt update &amp;&amp; apt -y install git sudo wget unzip gcc g++ make &amp;&amp; \                       <font></font>
   cd /srv/ &amp;&amp; git clone https://github.com/kov-serg/get-cpcert.git &amp;&amp; \                    <font></font>
   cd get-cpcert &amp;&amp; chmod +x *.sh &amp;&amp; ./prepare.sh &amp;&amp; ./build.sh &amp;&amp; \                        <font></font>
   mkdir -p /srv/{in,out} &amp;&amp; \                                                              <font></font>
   echo '#!/bin/bash' &gt; /srv/getpem.sh &amp;&amp; \                                                 <font></font>
   echo 'cd /srv/get-cpcert' &gt;&gt; /srv/getpem.sh &amp;&amp; \                                         <font></font>
   echo './get-cpcert /srv/in/$CONT.000 $PASS &gt; /srv/out/$CONT.pem' &gt;&gt; /srv/getpem.sh &amp;&amp; \  <font></font>
   chmod +x /srv/getpem.sh                                                                  ENTRYPOINT /srv/getpem.sh</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para realizar la conversi√≥n, debe colocar el contenedor de origen (un directorio del formulario xxx.000) en el directorio / srv / in, y recoger el pem finalizado en / srv / out. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para convertir:</font></font><br>
<br>
<pre><code class="plaintext hljs"> docker run -t -i -e CONT='&lt;   ( ".000")&gt;' -e PASS='&lt;  &gt;' -v /srv/in:/srv/in -v /srv/out:/srv/out --name ecptopem &lt;  &gt;/med/ecptopem:latest </code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ emstop y / emstart</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez, nuestra empresa obtuvo un Oracle DBA muy bueno, con m√°s experiencia en la administraci√≥n del DBMS y en el desarrollo. Y no sucedi√≥ de inmediato con una conexi√≥n ssh a los servidores DBMS: o no sabe d√≥nde conectarse y c√≥mo, entonces los accesos no se describen claramente, es imposible reenviar algo a s√≠ mismo. Bueno, estamos felices de ayudar, hablamos sobre c√≥mo conectarnos y enviamos Enterprise Manager para ello. Pero con ssh todav√≠a no funcion√≥. Uno de los colegas lo explic√≥ simplemente: Pura sangre DBA :) Decidimos que si necesitamos ajustar algo en el servidor, lo haremos nosotros mismos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
EM se bloquea bajo una carga pesada y lo reinicia ... necesita conectarse a trav√©s de ssh y reiniciar a trav√©s del terminal. </font><font style="vertical-align: inherit;">"Los administradores lo saben bien", decidi√≥ nuestro nuevo colega. </font><font style="vertical-align: inherit;">Cargas grandes en el DBMS no son infrecuentes con nosotros, las solicitudes para reiniciar EM tambi√©n son frecuentes. </font><font style="vertical-align: inherit;">Luego el mismo escenario: tensi√≥n, irritaci√≥n y la b√∫squeda de una soluci√≥n al problema. </font><font style="vertical-align: inherit;">Entonces en el mismo grupo de chats apareci√≥ el comando: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ emstop y / emstart.</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/kk/yd/8j/kkyd8jikdyflvrkkoqvyens8dym.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ matar</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el caso de una fuerte competencia en la base, y esto a veces sucede, debe descargar r√°pidamente la base de datos. </font><font style="vertical-align: inherit;">La forma m√°s r√°pida es matar el proceso problem√°tico ... Para hacer esto, con√©ctese a trav√©s de ssh, kill -9 ... ¬°El bot ayudar√°! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jb/8q/cs/jb8qcsft8ce6jp5e7rijqtvcjti.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alexey apreci√≥ al equipo y le dio un nombre cari√±oso: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Kilyalka"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o una pistola. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez, despu√©s de ver c√≥mo Alex est√° intentando y sufriendo, cada vez que ingreso / mato xxx para cada uno de los procesos, decid√≠ agregar "multilateralismo" a nuestra arma: ¬° </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5d/sc/kh/5dsckh_3qe5lhmvhop1pmxkt1hk.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eso es mejor! </font><font style="vertical-align: inherit;">¬°Todo para ti, Alex, solo trabaja, querido! </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naturalmente, el acceso a un comando tan importante estaba limitado </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">por user_id: "protecci√≥n contra el tonto".</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Al ver c√≥mo Lesha acert√≥ los procesos en el servidor de la base de datos, varias personas intentaron ingresar un comando con un n√∫mero de proceso aleatorio, pero no puedes enga√±ar a mi robot inteligente, se neg√≥ de inmediato.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ alertlog </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, por si acaso, hice un comando: </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ alertlog &lt;n√∫mero de l√≠neas&gt;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : obtener el n√∫mero especificado de l√≠neas alertlog'a El </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
bot extrae el registro de alertas y lo env√≠a a nuestro servicio, como pastebin, llamado pyste, y env√≠a un enlace para pegar al chat de solicitud.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ cheques</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego vino una solicitud para </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">monitorear el rendimiento real de nuestra aplicaci√≥n.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hasta ahora, el soporte t√©cnico para el proyecto ha estado recopilando estos datos a mano. No es un trato! Nuestros valientes probadores han desarrollado casos de prueba para esto. El registro de prueba resultante no es muy conveniente de leer, un usuario inexperto comprender√° durante mucho tiempo y no el hecho de que resaltar√° la informaci√≥n necesaria. Y no nos gusta hacer con nuestras manos lo que no podemos hacer con nuestras manos ... ¬°Una nueva tarea para el bot! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/--/u6/1l/--u61ld0yk0fljkwuerjn3g8zsa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El comando / cheques muestra un men√∫ sencillo e inequ√≠voco, ¬°esta vez nuestros muchachos aprendieron a usar este comando sin instrucciones! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando selecciona el elemento deseado, en lugar del men√∫, aparece una notificaci√≥n sobre el inicio de la prueba para que los usuarios impacientes no ejecuten nuestra prueba 100500 veces:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j7/xv/sv/j7xvsv_byo8gdw7y3qweig15msq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dependiendo del elemento de men√∫ seleccionado, se inicia una prueba espec√≠fica desde nuestra red, es decir, desde la m√°quina donde vive el bot (el jmeter est√° preconfigurado all√≠, las pruebas necesarias se colocan ...) o inmediatamente desde el centro de datos (desde la m√°quina preparada al lado de la aplicaci√≥n), de modo que al probar elimine los retrasos de la red, bueno, o minim√≠celos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de completar la prueba y recibir el registro, el bot lo analiza y muestra el resultado en una forma "legible para humanos":</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7w/xp/s8/7wxps8jupg80bbq_uuywyz1-gag.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Colecci√≥n de m√©tricas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La funcionalidad ha "ingresado" y los gerentes de proyecto que lo deseen han recibido dicha funci√≥n para sus regiones. Y un Gerente de Proyecto compasivo dijo: "¬°Quiero tener estad√≠sticas a tiempo!" Alguien de CIT le dijo que ser√≠a conveniente controlar todo esto en Zabbix. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zabbix, entonces Zabbix ...</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pens√© que era necesario prepararse para la necesidad de duplicar la soluci√≥n ... Dise√±√© la idea en un contenedor acoplable. En el contenedor, de acuerdo con el cronograma (cada 10 minutos), se inicia jmeter, agrega el registro en un lugar espec√≠fico, php lo analiza y muestra los datos necesarios en forma de p√°gina web. Zabbix usa la tecla web.page.get para obtener esta p√°gina, selecciona regularmente los datos necesarios para ciertos elementos dependientes y construye un gr√°fico.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oq/aq/cd/oqaqcdqj2mjodianmnwmrucyix8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece que no estuvo mal. </font><font style="vertical-align: inherit;">Observando el gr√°fico, nosotros, en primer lugar, vemos la velocidad aproximada de la aplicaci√≥n, y si se detectan picos en el gr√°fico, sabemos aproximadamente d√≥nde est√° el "tap√≥n". </font><font style="vertical-align: inherit;">Todo es simple </font><font style="vertical-align: inherit;">Hasta ahora, ha resultado tener demanda solo para una regi√≥n, pero estoy listo para replicarla para aquellos que lo deseen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desarrollo de aplicaciones</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las estad√≠sticas sobre tareas del mismo tipo no hace mucho tiempo arrojaron ideas para simplificar y facilitar el trabajo. En algunos proyectos, en servidores de aplicaciones, es necesario instalar los contenedores clave de Crypto Pro, hay muchos de ellos y la firma digital caducar√° con el tiempo. A veces, 2 tareas "vuelan" por d√≠a. Pero consider√© que usar el bot para estos fines no era seguro y decid√≠ que har√≠a la funcionalidad directamente en la aplicaci√≥n. Naturalmente con autorizaci√≥n y control de acceso. Si tiene los privilegios necesarios, estar√° disponible un elemento de men√∫ adicional para trabajar con firmas digitales, instalaci√≥n, eliminaci√≥n, visualizaci√≥n de informaci√≥n, etc. En este momento, la funcionalidad est√° en desarrollo. Al final result√≥ que esto no es muy dif√≠cil, debe leer las instrucciones un poco, mirar ejemplos de c√≥digo, preguntar a colegas m√°s experimentados en desarrollo y hacerlo.En el proceso de investigaci√≥n, aparecieron ideas para agregar a la aplicaci√≥n. No construir√© planes napole√≥nicos: hay desarrollo, que cada uno haga lo suyo. Pero por ahora es interesante, lo estoy haciendo yo mismo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Planes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como dije, muchas ideas diferentes nacieron para usar nuestro bot y no solo, en general, digamos, ideas para "puntos de automatizaci√≥n", muchas de ellas fueron olvidadas, ya que no tuve tiempo de escribirlas. </font><font style="vertical-align: inherit;">Ahora trato de escribir todo lo que me viene a la mente, y recomiendo que otros hagan lo mismo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero Alex no se olvida de tirar su lista de deseos. </font><font style="vertical-align: inherit;">De lo √∫ltimo: </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ kill_sql SQL_ID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - mata todas las sesiones con una consulta SQL_ID </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ kill_block</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - mata la sesi√≥n de bloqueo de ra√≠z </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ show_em</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - muestra una imagen de rendimiento EM </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trick, quiere unir DBA desde el tel√©fono =) ¬° </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As√≠ es como trabajamos por el bien de la Patria! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øY c√≥mo te salvas de las tareas rutinarias y poco interesantes?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espero que la lectura haya sido interesante, y tal vez incluso √∫til para alguien, y no tuve tiempo de cansar al lector ... Buena suerte para todos.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es495924/index.html">¬øPor qu√© es tan dif√≠cil construir un buen modelo de distribuci√≥n COVID-19?</a></li>
<li><a href="../es495926/index.html">Estamos escribiendo firmware para TI cc2530 en Z-Stack 3.0 para Zigbee relay Sonoff BASICZBR3 con sensor ds18b20</a></li>
<li><a href="../es495932/index.html">¬øCu√°l es el significado oculto de los autores en la Gu√≠a SCRUM? Parte 1. Sobre el proceso</a></li>
<li><a href="../es495934/index.html">DataGovernance en el hogar</a></li>
<li><a href="../es495938/index.html">Una selecci√≥n de art√≠culos sobre aprendizaje autom√°tico: casos, gu√≠as y estudios para marzo de 2020</a></li>
<li><a href="../es495944/index.html">TOP50 actualizado (calificaci√≥n de supercomputadoras CIS): din√°mica y tendencias</a></li>
<li><a href="../es495946/index.html">Norbert Wiener: el padre distra√≠do de la cibern√©tica</a></li>
<li><a href="../es495948/index.html">√ìxido incrustado. Desarrollo para procesadores Cortex-M3 utilizando la placa de depuraci√≥n STM32F103C8T6 (Black Pill)</a></li>
<li><a href="../es495954/index.html">¬øC√≥mo ha estado funcionando Cisco en modo de acceso remoto y un per√≠metro ausente durante 20 a√±os?</a></li>
<li><a href="../es495956/index.html">Tengo que ir r√°pido. Optimizar las solicitudes de contenido de correo electr√≥nico IMAP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>