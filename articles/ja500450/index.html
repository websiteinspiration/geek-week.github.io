<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♿️ 🌋 👩🏼‍🔬 古い子供用シンセサイザーからMIDIキーボードを作成する 🦔 🙅🏼 🧑🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ある日、家に帰って、入り口のゴミシュートの近くで、古い子供用おもちゃのシンセサイザーを見ました。ゴミ箱から取り出すのは「罪深い」ので通り過ぎたが、心の中でそれをそこから引きずり出したかった。すでに深夜の2時頃に、彼女がまだそこに立っているかどうかを確認することにしました。そしてはい、彼女はまだそこに...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>古い子供用シンセサイザーからMIDIキーボードを作成する</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500450/"><img src="https://habrastorage.org/webt/-g/1_/nu/-g1_nu7zf-kudqjkv5ygvqjysao.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ある日、家に帰って、入り口のゴミシュートの近くで、古い子供用おもちゃのシンセサイザーを見ました。ゴミ箱から取り出すのは「罪深い」ので通り過ぎたが、心の中でそれをそこから引きずり出したかった。すでに深夜の2時頃に、彼女がまだそこに立っているかどうかを確認することにしました。そしてはい、彼女はまだそこにいました！見た目はすっきりしていて綺麗だったので、とられないほどのきしみはありませんでした。そう、私は彼女を連れて行きました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は長い間自分のためにピアノが欲しかったのですが、私はプロのミュージシャンではありません。 「甘やかすために」何かを買う私は「ヒキガエルに首を絞められた」、そしてここに-無料のおもちゃ。ゴミ箱から取り出したとき、それを子供のおもちゃとして使うことすら考えていなかったので、すぐに「ああ……、MIDIキーボードを作成するための良いベースだ」と思いました。</font></font><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はすでにプロのキーボードやMIDIキーボードとの通信の経験があるので、自分のアイデアのすべての欠点をすぐに理解しました。つまり、おもちゃは実際にはおもちゃのままです。これに基づいて、キーストロークの力を実現することは不可能です。 「軽量」のプラスチック製のキー自体は、これも不完全であるため、価値のある何かを実行することはできません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、おもちゃのシンセサイザーを「ねじで」分解し、すべてのプラスチックを石鹸でよく洗いました。ボードとキーの連絡先グループもクリーニングされます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
解体後、なぜ人々がそれを捨てたかについての理解が得られました。おもちゃ（理由はわかりません：時々、中国の部品の品質や操作の困難さから）、1つ目：内蔵スピーカーがバラバラになり、2つ目：壊れたコネクターがヘッドホンジャックに詰まっているため、引き出す方法がほとんどありませんでした。 。おそらく、内蔵スピーカーで遊ぶのをやめた後、ヘッドフォンでそれを使用し、そこでコネクターを壊した後、ただ捨てただけでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
内部では、おもちゃのシンセサイザーは、ケーブルループによって相互接続された3つのボードで構成されていました。サウンドの生成などを担当する中央のボードは、他の2つのボードからすぐにはんだ付けを外され、取り除かれました。他の2つのボードには、おもちゃの前面パネルのボタンとピアノの鍵自体の接点がありました。特にボードの穴ピッチが2.54 mmだったので、PBSコネクタをはんだ付けしました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bp/mh/qc/bpmhqcxmblsmtoqy7zu7wfbqwm4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/nj/dr/us/njdrusxpjqa57hm8ezczbzidcu0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、数時間かけてこれらのボードの図をキーで作成しました。結局のところ、このスキームは単純なマトリックスキーボードです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yt/uh/m6/ytuhm6oamte_d4mo60zuvzucqfm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
黄色の円の図では、番号は「水平」接点の番号であり、キーの番号はキーボードボードのPBS-13コネクタの「垂直」接点の番号です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/m6/qc/lk/m6qclkogjo6vprfkk4ywi2qtqzq.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/n0/lz/tf/n0lztfhulhpdeytl2ltfl0zxqna.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/bw/w2/pa/bww2pa-cgsmxubbn2ixa2sr373w.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、これらすべてが隅に投げ込まれ、1年間ほこりを払いました。それから、自己分離の期間が始まりました...それは退屈になり、特に行く場所がなく、それは不可能なので、私は自分の手で何かをしたかったのです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結局、私はこのおもちゃを少なくとも少しは完成させることにしました。コントローラーのベースとしてArduinoボードを使用しました。キーチェーンの数がArduino UNOピンの数よりも多いため、シフトレジスタ74HC595および74HC165を使用することにしました。その結果、私たちはそのようなスキームを得ました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_j/y9/m9/_jy9m906okczf38_zjmeyvy9qbc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
回路は当初、無はんだブレッドボード上で組み立てられました。回路の操作性をテストするために（どこにも接続にエラーがないこと）、すべてが機能しているように見えることを示すテストプログラムが開発されました。テストプログラムのアルゴリズムは単純でした：シフト出力チップの出力の1つがオンになり、キーを押しながらシフト入力チップからサイクルで値が読み取られます。一見、問題の予兆は何もありませんでした...そして、すべてがうまくいくようでした... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bx/uh/an/bxuhanfuxtixrojargnmaeqv5oe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の数日、私はゆっくりと「宿題」、つまり、ボードのすべてのコンポーネントをブレッドボードにはんだ付けすることに取り組みました。私は自分の場所にあるものからすべて収集しました。彼はArduino NANOをコントロールボードとして採用しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2o/h9/f-/2oh9f-a8fplwk8bqnt5dultsxee.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボードのこのような「サンドイッチ」は、おもちゃの2つのボード（1つはボタン付き、もう1つはキーボード付き）が異なるレベルにあるためです。はんだ付けする前に、「どういうわけか、私が家に持っているコンポーネントは多かれ少なかれ見栄えが良いですか？」そして、コネクタで相互接続された2つのボードのこの設計が判明しました。私の観点から見ると、ホームバージョンの場合、自己分離状態にいると、かなりうまくいきました。ブレッドボードを切り、おもちゃの本体を少し変更して、ArduinoボードにUSBケーブルを接続できるようにしました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bb/xz/md/bbxzmdv5zabj-jq6hlyg7jhjpxy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバイスが期待どおりに機能しないことに気づいたのは、テストプログラムを完成させたときです。アルゴリズムは単純です。74HC165チップの入力の状​​態を考慮して、74HC595チップの各出力をオンにし、結果を個別の変数に書き込みます。合計で、74HC595の5つの出力がキーボードに接続されているため、このポーリング後に最終的に40ビット（5 * 8）のデータを取得しました。 40ビットのストリングがコンソールに出力され、デバイスが複数のキーの同時キーストロークをどのように処理するかを確認するためにキーが押されました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/d0/ra/o7/d0rao77gsxvrvtbeumy1ufguxsw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで問題が表面化しました。1つのキーを押しても問題はありませんでしたが、同時に2つ以上のキーを押した場合、何が読み取られるかを予測できない状況が発生しました。結果は1つの組み合わせでは正しい場合があり、別の組み合わせでは完全に予測できない場合があります。問題は、このスキームの機能が考慮されていないことでした。複数のキーが同時に押されると、キーボードスキャンのいくつかの垂直方向がロックされるだけでなく（これは許容されます）、複数の水平線をキーで閉じることができます（これは決して許容されません）。この問題の詳細と解決方法については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちらをご覧ください。</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
私はこの問題の「基本的な解決策」を選択しました。つまり、キーボードの各キーにダイオードがあると判断しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の頭の中では、私はすでに精神的に私はどのようにボード上のトラックをカットし、SMDパッケージのダイオードを破壊する必要があるかを考え始めました。私は自分の保管室に登ったところ、SMDケースにダイオードがそれほど多くないことに気付きました（私たち全員が自己分離の上に座って、無線コンポーネントを購入することは非常に不可能であることに注意してください。これらは絶対に必要なものではないためです）。少し気が動転して、ボードをもっと詳しく見ることにしました。いくつかのトラックに出力ダイオードを配置することが可能かもしれません（私もいくつか持っていました）。そして、各キーにジャンパー（ボードは片面）があり、このジャンパーの代わりにダイオードを配置できるように回路が作成されていることを確認しました。すぐに思いました-何もカットする必要はなく、どこにでもジャンパーの代わりに出力ダイオードを配置するだけです。私はまた、そのような数の出力ダイオードを持っていませんでした。 「多分LED？」回路は+ 5Vで動作し、（LEDの中で）電圧降下が最小の赤いLEDを配置した場合、最終的に正しい判断のための論理レベルが必要になります。つまり、キーが押されているかどうかです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ff/1c/37/ff1c37wrrsclbwl0d7edw1x-ork.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを念頭に置いて、私は再び株式に登り、可能な限り赤いLEDをつかみました。キーボードのキーと同じ数だけありました！これは兆候だと思い、ジャンパーの代わりにいくつかのLEDをはんだ付けしてテストしました。テスト結果は、ソリューションが機能していることを示しました。その後、ジャンパーの代わりに残りのLEDをはんだ付けしました。テストプログラムでは、少なくともすべてのキーを同時に押すことができ、すべてのキーが正しく読み取られることが示されています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/g8/i0/-b/g8i0-b1rwc2ykc3oq1hcecu-ohs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おもちゃにある追加のボタンにはダイオードを付けないことにしました。これは、一度に複数のボタンを押すことはほとんどないためです。また、プログラムではこれらのボタンをクリックする処理がまだありません。さて、それらの使い方はまだ決めていません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このデバイスをコンピュータ上でMIDIキーボードとして表示する方法と、データを送信するために必要な形式を理解する時が来ました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インターネットで見つかった情報は、ファームウェアを注ぐだけでArduinoからMIDIキーボードを簡単に作成できることを教えてくれました。コンピューターをCOMポートではなくMIDIキーボードとして認識させます。当初、私は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この決定</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">導か</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">れましたが</font></a><font style="vertical-align: inherit;">、特にそれがどのように実装されるかについては触れていませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、彼に連絡して注意深く読んだところ、CH340チップをベースにしたCOMポートがあったので、私のArduino NANOボードはこのソリューションには適していないことに気付きました。</font><font style="vertical-align: inherit;">上記のリンクからファームウェアを使用するには、USBポートがすでにコントローラー上にある場合（例：AtMega32u4）、またはCOMポート経由の通信がFT232RLタイプの変換チップなどではなく、AtMegaマイクロコントローラー上で実行されるカードのみが適しています。</font><font style="vertical-align: inherit;">したがって、ボードのファームウェアは、データをMIDI形式でCOMポートに送信する必要があり、コンピューターでは、このデータを傍受して仮想MIDIポートに送信するソフトウェアをインストールして構成する必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キーの読み取りとMIDIコマンドの生成のアルゴリズムは次のとおりです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jj/-2/d6/jj-2d67yncypthxguaeyvotcvue.jpeg"><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino NANOコントローラーのプログラムは次のようになります。</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">//    +5V<font></font>
//   ST_CP  74HC595<font></font>
#define latchPin      11<font></font>
//   SH_CP  74HC595<font></font>
#define clockPin      13<font></font>
//   DS  74HC595<font></font>
#define dataPin       12<font></font>
<font></font>
//     +5V<font></font>
#define latchPin_IN   9<font></font>
#define clockPin_IN   10<font></font>
#define dataPin_IN    8<font></font>
<font></font>
// ,       1-16    <font></font>
#define BUT_OUT0      7<font></font>
#define BUT_OUT1      6<font></font>
#define BUT_OUT2      5<font></font>
#define BUT_OUT3      4<font></font>
<font></font>
byte but_out[4] = {BUT_OUT0, BUT_OUT1, BUT_OUT2, BUT_OUT3};<font></font>
//       <font></font>
byte kbd_in[5] = {0, 0, 0, 0, 0};<font></font>
byte kbd_in_new[5] = {0, 0, 0, 0, 0};<font></font>
<font></font>
//       <font></font>
byte btn_in[4] = {0, 0, 0, 0};<font></font>
byte btn_in_new[4] = {0, 0, 0, 0};<font></font>
<font></font>
//  3  -   (1 - , 0 - )<font></font>
byte kbd_out = 0b11100000;<font></font>
<font></font>
//  <font></font>
void init_electronics() {<font></font>
  //  ,   +5V<font></font>
  //  OUTPUT<font></font>
  pinMode(latchPin, OUTPUT);<font></font>
  pinMode(clockPin, OUTPUT);<font></font>
  pinMode(dataPin, OUTPUT);<font></font>
<font></font>
  //  ,   +5V<font></font>
  pinMode(latchPin_IN, OUTPUT);<font></font>
  pinMode(clockPin_IN, OUTPUT);<font></font>
  pinMode(dataPin_IN, INPUT);<font></font>
<font></font>
  //          <font></font>
  for (byte i = 0; i &lt; 4; i++) pinMode(but_out[i], OUTPUT);<font></font>
}<font></font>
<font></font>
//      74HC595<font></font>
void write_5V(byte a) {<font></font>
    digitalWrite(latchPin, LOW);<font></font>
    //    dataPin<font></font>
    shiftOut(dataPin, clockPin, MSBFIRST, a); <font></font>
     //"" ,      <font></font>
    digitalWrite(latchPin, HIGH); <font></font>
}<font></font>
<font></font>
void read_5V(byte *btn, byte *kbd) {<font></font>
  digitalWrite(clockPin_IN, HIGH);<font></font>
  digitalWrite(latchPin_IN, LOW);<font></font>
  digitalWrite(latchPin_IN, HIGH);<font></font>
  <font></font>
  //    -    <font></font>
  *btn = shiftIn(dataPin_IN, clockPin_IN, LSBFIRST);<font></font>
  <font></font>
  //    -    <font></font>
  *kbd = shiftIn(dataPin_IN, clockPin_IN, LSBFIRST);<font></font>
}<font></font>
<font></font>
void setup() {<font></font>
  init_electronics();<font></font>
  write_5V(kbd_out);<font></font>
  Serial.begin(115200);<font></font>
}<font></font>
<font></font>
//       ,   <font></font>
void read_kbd_and_btn_state(byte *btn, byte *kbd) {<font></font>
 byte tmp;<font></font>
  for (byte i = 0; i &lt; 5; i++) {<font></font>
    write_5V(kbd_out | (1 &lt;&lt; i));<font></font>
    read_5V(&amp;tmp, &amp;kbd[i]);<font></font>
  }<font></font>
}<font></font>
<font></font>
void noteOn(int cmd, int pitch, int velocity) {<font></font>
  Serial.write(cmd);<font></font>
  Serial.write(pitch);<font></font>
  Serial.write(velocity);<font></font>
}<font></font>
<font></font>
//     num  ,   <font></font>
// 0 -  0,  0<font></font>
// 1 -  0,  1<font></font>
// 2 -  1,  1<font></font>
// 3 -  1,  0<font></font>
byte compare_bit(byte old_state, byte new_state, byte num) {<font></font>
  byte tmp_old, tmp_new;<font></font>
  tmp_old = (old_state &gt;&gt; num) &amp; 1;<font></font>
  tmp_new = (new_state &gt;&gt; num) &amp; 1;<font></font>
  if ((tmp_old == 0) &amp;&amp; (tmp_new == 0)) return 0;<font></font>
  if ((tmp_old == 0) &amp;&amp; (tmp_new == 1)) return 1;<font></font>
  if ((tmp_old == 1) &amp;&amp; (tmp_new == 1)) return 2; <font></font>
  if ((tmp_old == 1) &amp;&amp; (tmp_new == 0)) return 3;  <font></font>
}<font></font>
<font></font>
void loop() {<font></font>
  read_kbd_and_btn_state(btn_in_new, kbd_in_new);<font></font>
  for (byte i = 0; i &lt; 5; i++) {<font></font>
    for (byte j = 0; j &lt; 8; j++) {<font></font>
      switch (compare_bit(kbd_in[i], kbd_in_new[i], 7 - j)) {<font></font>
        //  <font></font>
        case 1: noteOn(0x90, 0x1D + (8 * i + j), 0x7F);<font></font>
                break;<font></font>
        //  <font></font>
        case 2: //noteOn(0x00, 0x1D + (8 * i + j), 0x7F);<font></font>
                break;<font></font>
        //  <font></font>
        case 3: noteOn(0x90, 0x1D + (8 * i + j), 0x00);<font></font>
                break;<font></font>
      }<font></font>
    }<font></font>
    kbd_in[i] = kbd_in_new[i];<font></font>
  }<font></font>
} <font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
で読むことができるので、MIDIデータの操作方法を詳細にペイントしても意味がありません</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">。</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
コンピュータのソフトウェアと遭遇した問題について詳しく説明します。このソフトウェアの通常のドキュメントがないために問題が発生しました。したがって、コンピュータが私のようなデバイスからMIDIデータを正常に受信できるようにするには、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loopMIDI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serial-Midi Converterの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2つのプログラムが必要</font><font style="vertical-align: inherit;">です。シリアルMIDIコンバーターでは、コンピューターにJavaがインストールされていない場合は、Javaもインストールする必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
loopMIDIプログラムを起動し、2つの仮想ポートを作成します。私はそれらをArduino INとArduino OUTと呼びました。このプログラムは仮想MIDIデバイスになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/e8/do/hee8doojjloz3jiocd58qpugocg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、Serial-MIDI Converterを実行し、起動時にセットアップのプロセスを実行します。残念ながら、起動するたびにこれを実行する必要がありますが、それほど怖くはありません。文字通りキーボードの4つのキーストロークで行われます。 COMポート番号は異なる場合があり、Arduino NANOボードが接続されているときにコンピューターに表示されます。ポート速度はArduino NANOファームウェアで設定されます。赤い矢印は私の設定を示しており、すべてがうまくいった。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zu/qj/l0/zuqjl0ruk96yomobfupdvbstgps.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、セットアッププロセスは完了しており、デバイスからのキーストロークを受け入れることでサウンドを再生するソフトウェアを既に使用できます。ソフトウェア設定では、入力として「Arduino_OUT」を選択する必要があります。次の図は、Kontakt Playerの構成例です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qs/eu/uu/qseuuugs_lbaywuoplve0qgc2wg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最終的には次のように機能します。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/cOnQOAYKlg0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次は何ですか？</font><font style="vertical-align: inherit;">そして、すべてが期待通りに起こりました-おもちゃは、最初に述べたすべての欠点を備えたおもちゃのままです。</font><font style="vertical-align: inherit;">おそらく子供はこれを大騒ぎで演奏しますが、大人にとっては通常のキーボード楽器の後で...中古のMIDIキーボードを安く購入する方が簡単で、このおもちゃよりはるかに優れています。</font><font style="vertical-align: inherit;">私はこのおもちゃをそのままにしておくことにしましたが、それにいくつかの変更を加えました：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元のケースをそのままにします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実用的なスピーカーを置いて、それらのアンプを作ります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンピュータに接続せずに「子供のおもちゃ」モードで動作させる、つまり、サウンド自体を再生できるようにします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常の楽器と同じように、FootSwitch（以下のピアノのペダルと同じペダル）を接続して、キーを離しても音をホールドできるようにします。</font></font></li>
<li>    ,       .</li>
<li>    ,      -,      .</li>
</ol><br>
<img src="https://habrastorage.org/webt/qa/79/bk/qa79bkjnapd9sf84teo-y_nxn0g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどのポイントの実装を行うことはできませんが、私たち全員が「自宅」にいる間は、これに必要なすべてのコンポーネントが自宅にないためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インターネットに段落3を実装するために、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SamplerBox</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれるソリューションが見つかりました</font><font style="vertical-align: inherit;">。プロジェクトの本質は、任意のMIDIキーボードをRaspberry Piボードに接続できることです。RaspberryPiボードは、キーボードからのMIDIコマンドを処理し、サウンドを再生したり、楽器を切り替えたりします。 Raspberry Piボードをおもちゃの本体内に置くだけで、SDカードを交換する（ケースを分解せずに）ことはできません。おもちゃの本体のボタンを構成してツールを切り替えれば、このプロジェクトをこのフォームに残すのに十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、これはすべて自己分離の期間が終了した後に起こります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の経験が役に立てば幸いです。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja500436/index.html">ランダムニューロンと論理関数に基づくバイナリニューラルネットワークの到来</a></li>
<li><a href="../ja500438/index.html">SFTPおよびFTPS</a></li>
<li><a href="../ja500444/index.html">初心者と経験者を区別する9つのPythonプログラミングスキル</a></li>
<li><a href="../ja500446/index.html">R2DBCとPostgreSQLについて一言</a></li>
<li><a href="../ja500448/index.html">Prometheus：BlackboxエクスポーターによるHTTPモニタリング</a></li>
<li><a href="../ja500452/index.html">ディープラーニングに関する高い推論</a></li>
<li><a href="../ja500454/index.html">「どんなマリーナ？」または、Xamarin（Android）のモバイルアプリケーションを使用してBluetooth経由でコントローラーを制御します</a></li>
<li><a href="../ja500456/index.html">BpfTrace-最後に、Linux上のDtraceの完全な代替品</a></li>
<li><a href="../ja500458/index.html">オンライン音声技術機能：Starter Pack</a></li>
<li><a href="../ja500462/index.html">シーンの変化を検出し、デコードせずにH264ビデオクリップをRaspberry Piに保存する</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>