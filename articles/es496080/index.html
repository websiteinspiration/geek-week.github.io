<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïù üë©‚Äçüë¶‚Äçüë¶ üôéüèæ Crear interacciones simples de IA con objetos del entorno üèçÔ∏è üïú üòª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Al crear inteligencia artificial para videojuegos, uno de los aspectos m√°s importantes es su ubicaci√≥n. La posici√≥n del personaje de IA puede cambiar ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Crear interacciones simples de IA con objetos del entorno</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496080/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b5/840/cec/6b5840cec8e3b42adad879472c47930d.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al crear inteligencia artificial para videojuegos, uno de los aspectos m√°s importantes es su ubicaci√≥n. La posici√≥n del personaje de IA puede cambiar completamente sus tipos de comportamiento y decisiones futuras. En este tutorial entenderemos c√≥mo el entorno del juego puede afectar a la IA y c√≥mo usarla correctamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este art√≠culo est√° tomado del libro </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Practical Game AI Programming</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , escrito por Michael Dagrack y publicado por Packt Publishing. Este libro te permite aprender c√≥mo crear un juego de IA y desde cero implementar los algoritmos de IA m√°s avanzados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las interacciones visuales son b√°sicas, no afectan directamente el juego, pero te permiten mejorar el videojuego y sus personajes al hacerlos parte del entorno que creamos, lo que afecta en gran medida la inmersi√≥n del jugador en el juego. </font><font style="vertical-align: inherit;">Esto nos demuestra la importancia de que el entorno sea parte del juego, y no solo de ayudar a llenar el espacio en la pantalla. </font><font style="vertical-align: inherit;">Interacciones similares se encuentran cada vez m√°s en los juegos, y los jugadores esperan verlas. </font><font style="vertical-align: inherit;">Si hay un objeto en el juego, entonces debe cumplir alguna funci√≥n, aunque no la m√°s importante.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uno de los primeros ejemplos de interacci√≥n con entornos se puede encontrar en el primer Castlevania, lanzado en 1986 para Nintendo Entertainment System. </font><font style="vertical-align: inherit;">Desde el principio, el jugador puede usar el l√°tigo para destruir velas e incendios, que originalmente formaban parte del fondo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90c/a93/19c/90ca9319cffa8e665c51bc56297876a5.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este y algunos juegos de esa √©poca abrieron muchas puertas y oportunidades en t√©rminos de la percepci√≥n moderna de los entornos y entornos de los personajes del juego. </font><font style="vertical-align: inherit;">Obviamente, debido a las limitaciones de hardware de esa generaci√≥n de consolas, fue mucho m√°s dif√≠cil crear cosas simples que generalmente son aceptadas por los est√°ndares actuales. </font><font style="vertical-align: inherit;">Pero cada generaci√≥n de consolas trajo nuevas caracter√≠sticas y los desarrolladores las usaron para crear juegos incre√≠bles.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, nuestro primer ejemplo de interacci√≥n visual es un objeto en el fondo que puede destruirse sin afectar directamente el juego. </font><font style="vertical-align: inherit;">Este tipo de interacci√≥n se encuentra en muchos juegos. </font><font style="vertical-align: inherit;">Implementarlo es simple, solo anima el objeto cuando es atacado. </font><font style="vertical-align: inherit;">Despu√©s de eso, podemos decidir si se deben soltar puntos u objetos del objeto que recompense al jugador por explorar el juego.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora podemos pasar al siguiente ejemplo: objetos en el juego que est√°n animados o se mueven cuando los personajes los atraviesan. El principio aqu√≠ es el mismo que con los objetos destructibles, pero esta vez la interacci√≥n es m√°s sutil: requiere que el personaje se mueva al punto donde est√° el objeto. Esto se puede aplicar a varios elementos del juego, desde el movimiento de hierba, polvo o agua, hasta p√°jaros voladores o personas que hacen gestos divertidos; Las posibilidades son infinitas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al analizar estas interacciones, podemos determinar f√°cilmente que no necesariamente usan AI, y en la mayor√≠a de los casos es solo una funci√≥n booleana que se activa de acuerdo con alguna acci√≥n dada. Pero son parte del entorno y, por lo tanto, deben tenerse en cuenta al implementar una interacci√≥n de alta calidad entre el entorno y la IA.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear interacciones simples con el entorno.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como ya hemos visto, el entorno una vez se convirti√≥ en parte de la jugabilidad, y esto dio lugar a muchos nuevos conceptos e ideas para futuros juegos. </font><font style="vertical-align: inherit;">El siguiente paso fue la integraci√≥n de estos peque√±os cambios en el juego y su uso para cambiar el comportamiento del jugador en el juego. </font><font style="vertical-align: inherit;">Esto definitivamente afect√≥ positivamente la historia de los videojuegos, porque todos los elementos de la escena gradualmente comenzaron a cobrar vida y el jugador comenz√≥ a darse cuenta de lo rico que era el entorno. </font><font style="vertical-align: inherit;">El uso de entornos para lograr objetivos en el juego se ha convertido en parte del juego.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad2/0c6/39f/ad20c639fd190d338f6e2e72847338b1.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para demostrar un ejemplo de un entorno que afecta directamente el juego, tomaremos un excelente ejemplo: la franquicia Tomb Raider. En este ejemplo, nuestro personaje, Lara Croft, debe empujar el cubo hasta que aterrice en el √°rea marcada. Esto cambiar√° el entorno y abrir√° un nuevo camino, permitiendo que el jugador avance m√°s de nivel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estos acertijos se pueden encontrar en muchos juegos: debes realizar una acci√≥n en cierto punto del mapa para que algo suceda en otra parte del mismo, y esto se puede usar para lograr alg√∫n objetivo en el juego. Por lo general, necesitamos cambiar el entorno mismo para avanzar m√°s de nivel. Por lo tanto, cuando los desarrolladores planifican un mapa o nivel, lo tienen en cuenta y crean todas las reglas relacionadas con cada interacci√≥n. Por ejemplo:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(cube.transform.position == mark.transform.position)<font></font>
{<font></font>
  openDoor = <span class="hljs-literal">true</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora imagine por un momento que Lara Croft tiene un personaje aliado cuya tarea principal es ayudarla a poner esta caja en su lugar. </font><font style="vertical-align: inherit;">Y en este cap√≠tulo consideraremos solo este tipo de interacci√≥n: el personaje de IA comprende c√≥mo funciona el entorno y c√≥mo usarlo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entorno en movimiento en Tomb Raider</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vayamos directamente a este escenario e intentemos recrear una situaci√≥n en la que haya un personaje de IA que pueda ayudar al jugador a lograr su objetivo. </font><font style="vertical-align: inherit;">En este ejemplo, imaginaremos que un jugador est√° atrapado del cual no puede obtener acceso a un objeto interactivo que pueda liberarlo. </font><font style="vertical-align: inherit;">El personaje que creamos debe poder encontrar el cubo y empujarlo en la direcci√≥n correcta.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b5/840/cec/6b5840cec8e3b42adad879472c47930d.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces ahora tenemos todos los personajes y objetos. Planifiquemos c√≥mo deber√≠a comportarse el personaje AI en esta situaci√≥n. Primero, debe ver que el jugador est√° cerca, para poder comenzar a buscar y mover el cubo a la posici√≥n deseada. Suponga que si el cubo est√° en la marca, entonces aparece un nuevo bloque de la arena, lo que permite al jugador avanzar m√°s de nivel. Un personaje AI puede empujar un cubo en cuatro direcciones: izquierda, derecha, adelante y atr√°s, para que se ajuste perfectamente con la marca de posici√≥n.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/804/463/982/8044639827005d84bcf50014f095b46e.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El personaje AI debe verificar y validar cada acci√≥n mostrada en este √°rbol de comportamiento. Lo primero y m√°s importante para continuar la tarea es que el personaje debe estar seguro de que el jugador se encuentra en su marca. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el jugador a√∫n no ha llegado all√≠, entonces nuestro personaje debe esperar y permanecer en su lugar. Si el jugador ya ha llegado a la marca, entonces el personaje AI contin√∫a la ejecuci√≥n y se pregunta a qu√© distancia est√° del objeto cubo. Si no, entonces el personaje debe moverse hacia el cubo, y una vez que se confirma esta acci√≥n, debe hacer la misma pregunta. Cuando la respuesta se vuelve positiva y el personaje est√° al lado del cubo, necesita descubrir de qu√© manera primero debes empujar el cubo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego comienza a empujar el cubo a lo largo del eje Y o X hasta que coincida con la posici√≥n de marcado y se completa la tarea.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> GameObject playerMesh;
<span class="hljs-keyword">public</span> Transform playerMark;
<span class="hljs-keyword">public</span> Transform cubeMark;
<span class="hljs-keyword">public</span> Transform currentPlayerPosition;
<span class="hljs-keyword">public</span> Transform currentCubePosition;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueY;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> nearValue;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> playerOnMark;<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the current position of the player</span><font></font>
  currentPlayerPosition.transform.position = playerMesh.transform.position;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the X axis</span><font></font>
  proximityValueX = playerMark.transform.position.x - currentPlayerPosition.transform.position.x;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the Y axis</span><font></font>
  proximityValueYplayerMark.transform.position.y - currentPlayerPosition.transform.position.y;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates if the player is near of his MARK POSITION</span>
  <span class="hljs-keyword">if</span>((proximityValueX + proximityValueY) &lt; nearValue)<font></font>
  {<font></font>
     playerOnMark = <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estamos comenzando a agregar informaci√≥n al c√≥digo que permite al personaje verificar si el jugador est√° al lado de su posici√≥n marcada. Para hacer esto, creamos todas las variables necesarias para calcular las distancias entre el jugador y la posici√≥n en la que deber√≠a estar. </font></font><code>playerMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se refiere al modelo 3D del jugador, del cual extraemos su posici√≥n y la usamos como </font></font><code>currentPlayerPosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para saber si est√° cerca de la marca, necesitamos una variable que represente la posici√≥n de la marca, y en nuestro ejemplo creamos una variable </font></font><code>playerMark</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en la que podemos escribir la posici√≥n en la que deber√≠a estar el jugador. Luego agregamos tres variables que nos permiten saber si el jugador est√° cerca. </font></font><code>proximityValueX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calcular√° la distancia entre el jugador y la marca del eje X. </font></font><code>proximityValueY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calcula la distancia entre el jugador y la marca del eje Y.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, tenemos </font></font><code>nearValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, en el que podemos determinar qu√© tan lejos puede estar el jugador de la posici√≥n de la marca, cuando el personaje AI puede comenzar a trabajar para lograr el objetivo. Tan pronto como el jugador est√© cerca de la marca, la variable booleana </font></font><code>playerOnMark</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cambia el valor a </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para calcular la distancia entre el jugador y la marca, utilizamos lo siguiente: la distancia entre el jugador y su marca, similar </font></font><code>(mark.position - player.position)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, para determinar si el personaje AI est√° cerca del cubo, calculamos la misma ecuaci√≥n calculando la distancia entre la IA y el cubo. Adem√°s, complementamos el c√≥digo con posiciones en ambas marcas (jugador y cubo):</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> GameObject playerMesh;
<span class="hljs-keyword">public</span> Transform playerMark;
<span class="hljs-keyword">public</span> Transform cubeMark;
<span class="hljs-keyword">public</span> Transform currentPlayerPosition;
<span class="hljs-keyword">public</span> Transform currentCubePosition;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueY;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> nearValue;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeProximityX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeProximityY;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> nearCube;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> playerOnMark;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> cubeIsNear;<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
   Vector3 playerMark = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">81.2f</span>, <span class="hljs-number">32.6f</span>, <span class="hljs-number">-31.3f</span>);<font></font>
   Vector3 cubeMark = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">81.9f</span>, <span class="hljs-number">-8.3f</span>, <span class="hljs-number">-2.94f</span>);<font></font>
   nearValue = <span class="hljs-number">0.5f</span>;<font></font>
   nearCube = <span class="hljs-number">0.5f</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the current position of the player</span><font></font>
  currentPlayerPosition.transform.position = playerMesh.transform.position;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the X axis</span><font></font>
  proximityValueX = playerMark.transform.position.x - currentPlayerPosition.transform.position.x;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the Y axis</span><font></font>
  proximityValueY = playerMark.transform.position.y - currentPlayerPosition.transform.position.y;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates if the player is near of his MARK POSITION</span>
  <span class="hljs-keyword">if</span>((proximityValueX + proximityValueY) &lt; nearValue)<font></font>
  {<font></font>
     playerOnMark = <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
<font></font>
  cubeProximityX = currentCubePosition.transform.position.x - <span class="hljs-keyword">this</span>.transform.position.x;<font></font>
  cubeProximityY = currentCubePosition.transform.position.y - <span class="hljs-keyword">this</span>.transform.position.y;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>((cubeProximityX + cubeProximityY) &lt; nearCube)<font></font>
  {<font></font>
     cubeIsNear = <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
     cubeIsNear = <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora que nuestro personaje de IA sabe si est√° al lado del cubo, esto nos permite responder la pregunta y determinar si puede pasar a la siguiente rama que planeamos. </font><font style="vertical-align: inherit;">Pero, ¬øqu√© sucede cuando el personaje no est√° al lado del cubo? </font><font style="vertical-align: inherit;">Tendr√° que acercarse al cubo. </font><font style="vertical-align: inherit;">Por lo tanto, agregaremos esto al c√≥digo:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> GameObject playerMesh;
<span class="hljs-keyword">public</span> Transform playerMark;
<span class="hljs-keyword">public</span> Transform cubeMark;
<span class="hljs-keyword">public</span> Transform cubeMesh;
<span class="hljs-keyword">public</span> Transform currentPlayerPosition;
<span class="hljs-keyword">public</span> Transform currentCubePosition;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueY;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> nearValue;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeProximityX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeProximityY;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> nearCube;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> playerOnMark;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> cubeIsNear;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> speed;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> Finding;<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
   Vector3 playerMark = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">81.2f</span>, <span class="hljs-number">32.6f</span>, <span class="hljs-number">-31.3f</span>);<font></font>
   Vector3 cubeMark = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">81.9f</span>, <span class="hljs-number">-8.3f</span>, <span class="hljs-number">-2.94f</span>);<font></font>
   nearValue = <span class="hljs-number">0.5f</span>;<font></font>
   nearCube = <span class="hljs-number">0.5f</span>;<font></font>
   speed = <span class="hljs-number">1.3f</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the current position of the player</span><font></font>
  currentPlayerPosition.transform.position = playerMesh.transform.position;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the X axis</span><font></font>
  proximityValueX = playerMark.transform.position.x - currentPlayerPosition.transform.position.x;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the Y axis</span><font></font>
  proximityValueY = playerMark.transform.position.y - currentPlayerPosition.transform.position.y;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates if the player is near of his MARK POSITION</span>
  <span class="hljs-keyword">if</span>((proximityValueX + proximityValueY) &lt; nearValue)<font></font>
  { <font></font>
      playerOnMark = <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
<font></font>
  cubeProximityX = currentCubePosition.transform.position.x - <span class="hljs-keyword">this</span>.transform.position.x;<font></font>
  cubeProximityY = currentCubePosition.transform.position.y - <span class="hljs-keyword">this</span>.transform.position.y;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>((cubeProximityX + cubeProximityY) &lt; nearCube)<font></font>
  {<font></font>
      cubeIsNear = <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
      cubeIsNear = <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(playerOnMark == <span class="hljs-literal">true</span> &amp;&amp; cubeIsNear == <span class="hljs-literal">false</span> &amp;&amp; Finding == <span class="hljs-literal">false</span>)<font></font>
  {<font></font>
     PositionChanging();<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(playerOnMark == <span class="hljs-literal">true</span> &amp;&amp; cubeIsNear == <span class="hljs-literal">true</span>)<font></font>
  {<font></font>
     Finding = <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">PositionChanging</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  Finding = <span class="hljs-literal">true</span>;<font></font>
  Vector3 positionA = <span class="hljs-keyword">this</span>.transform.position;<font></font>
  Vector3 positionB = cubeMesh.transform.position;<font></font>
  <span class="hljs-keyword">this</span>.transform.position = Vector3.Lerp(positionA, positionB, Time.deltaTime * speed);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasta ahora, nuestro personaje AI puede calcular la distancia entre √©l y el cubo; </font><font style="vertical-align: inherit;">si est√°n demasiado separados, √©l ir√° al cubo. </font><font style="vertical-align: inherit;">Despu√©s de completar esta tarea, puede pasar a la siguiente fase y comenzar a empujar el cubo. </font><font style="vertical-align: inherit;">Lo √∫ltimo que necesita calcular es qu√© tan lejos est√° el cubo de la posici√≥n de la marca, despu√©s de lo cual decide qu√© forma de empujar, teniendo en cuenta a qu√© lado del cubo est√° m√°s cerca la marca.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/de1/be5/bf7/de1be5bf7e65540dfaeb6ab186a8e3c8.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El cubo solo se puede empujar a lo largo de los ejes X y Z, y su rotaci√≥n a√∫n no es importante para nosotros, porque el bot√≥n se activa cuando el cubo est√° instalado en √©l. Dado todo esto, el personaje AI debe calcular qu√© tan lejos est√° el cubo de la posici√≥n de la marca en X y la posici√≥n de la marca en Z. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego compara los dos valores en dos ejes y selecciona cu√°l est√° m√°s lejos de la posici√≥n deseada, y luego comienza a avanzar. eje. El personaje continuar√° empujando en esta direcci√≥n hasta que el cubo est√© alineado con la posici√≥n de la marca, y luego cambie al otro lado, y lo empujar√° hasta que est√© completamente sobre la posici√≥n de la marca:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> GameObject playerMesh;
<span class="hljs-keyword">public</span> Transform playerMark;
<span class="hljs-keyword">public</span> Transform cubeMark;
<span class="hljs-keyword">public</span> Transform cubeMesh;
<span class="hljs-keyword">public</span> Transform currentPlayerPosition;
<span class="hljs-keyword">public</span> Transform currentCubePosition;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueY;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> nearValue;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeProximityX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeProximityY;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> nearCube;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeMarkProximityX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeMarkProximityZ;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> playerOnMark;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> cubeIsNear;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> speed;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> Finding;<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        Vector3 playerMark = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">81.2f</span>, <span class="hljs-number">32.6f</span>, <span class="hljs-number">-31.3f</span>);<font></font>
        Vector3 cubeMark = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">81.9f</span>, <span class="hljs-number">-8.3f</span>, <span class="hljs-number">-2.94f</span>);<font></font>
        nearValue = <span class="hljs-number">0.5f</span>;<font></font>
        nearCube = <span class="hljs-number">0.5f</span>;<font></font>
        speed = <span class="hljs-number">1.3f</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the current position of the player</span><font></font>
  currentPlayerPosition.transform.position = playerMesh.transform.position;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the X axis</span><font></font>
  proximityValueX = playerMark.transform.position.x - currentPlayerPosition.transform.position.x;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the Y axis</span><font></font>
  proximityValueY = playerMark.transform.position.y - currentPlayerPosition.transform.position.y;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates if the player is near of his MARK POSITION</span>
  <span class="hljs-keyword">if</span>((proximityValueX + proximityValueY) &lt; nearValue)<font></font>
  {<font></font>
     playerOnMark = <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
<font></font>
  cubeProximityX = currentCubePosition.transform.position.x - <span class="hljs-keyword">this</span>.transform.position.x;<font></font>
  cubeProximityY = currentCubePosition.transform.position.y - <span class="hljs-keyword">this</span>.transform.position.y;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>((cubeProximityX + cubeProximityY) &lt; nearCube)<font></font>
  {<font></font>
     cubeIsNear = <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
     cubeIsNear = <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(playerOnMark == <span class="hljs-literal">true</span> &amp;&amp; cubeIsNear == <span class="hljs-literal">false</span> &amp;&amp; Finding == <span class="hljs-literal">false</span>)<font></font>
  {<font></font>
      PositionChanging();<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(playerOnMark == <span class="hljs-literal">true</span> &amp;&amp; cubeIsNear == <span class="hljs-literal">true</span>)<font></font>
  {<font></font>
      Finding = <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
   cubeMarkProximityX = cubeMark.transform.position.x - currentCubePosition.transform.position.x;<font></font>
   cubeMarkProximityZ = cubeMark.transform.position.z - currentCubePosition.transform.position.z;<font></font>
<font></font>
   <span class="hljs-keyword">if</span>(cubeMarkProximityX &gt; cubeMarkProximityZ)<font></font>
   {<font></font>
     PushX();<font></font>
   }<font></font>
<font></font>
   <span class="hljs-keyword">if</span>(cubeMarkProximityX &lt; cubeMarkProximityZ)<font></font>
   {<font></font>
     PushZ();<font></font>
   }<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">PositionChanging</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  Finding = <span class="hljs-literal">true</span>;<font></font>
  Vector3 positionA = <span class="hljs-keyword">this</span>.transform.position;<font></font>
  Vector3 positionB = cubeMesh.transform.position;<font></font>
  <span class="hljs-keyword">this</span>.transform.position = Vector3.Lerp(positionA, positionB, Time.deltaTime * speed);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de agregar las √∫ltimas acciones al c√≥digo, el personaje debe aprender a determinar su objetivo, encontrar y empujar el cubo a la posici√≥n deseada para que el jugador pueda pasar y terminar el nivel. </font><font style="vertical-align: inherit;">En este ejemplo, nos centramos en c√≥mo calcular distancias entre objetos de escena y personajes. </font><font style="vertical-align: inherit;">Esto nos ayudar√° a crear tipos similares de interacciones en las que necesitamos colocar el objeto del juego en una determinada posici√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El ejemplo demuestra un personaje AI amigable que ayuda al jugador, pero los mismos principios se pueden aplicar si necesitamos el efecto contrario (si el personaje es un enemigo), en el que el personaje necesita encontrar el cubo lo antes posible para detener al jugador.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obst√°culos en entornos que utilizan el ejemplo de Age of Empires</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como vimos anteriormente, puedes usar o mover objetos en el juego para lograr objetivos, pero ¬øqu√© sucede si alg√∫n objeto obstruye el camino del personaje? El jugador puede colocar el objeto o simplemente ubicarlo el dise√±ador en esta posici√≥n del mapa. En cualquier caso, el personaje AI deber√≠a poder determinar qu√© debe hacerse en esta situaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podemos observar este comportamiento, por ejemplo, en una estrategia llamada Age of Empires II desarrollada por Ensemble Studios. Cada vez que un personaje del juego no puede llegar al territorio enemigo debido al hecho de que est√° rodeado de muros fortificados, la IA cambia a destruir parte del muro para seguir adelante.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este tipo de interacci√≥n tambi√©n es muy inteligente e importante, porque de lo contrario los personajes simplemente deambular√≠an por la pared en busca de una entrada, y esto no se ver√≠a como un comportamiento razonable. </font><font style="vertical-align: inherit;">Dado que el jugador crea la pared reforzada, se puede colocar en cualquier lugar y tener cualquier forma. </font><font style="vertical-align: inherit;">Por lo tanto, debes pensar en esto cuando desarrolles una IA enemiga.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f44/137/655/f44137655e3220988033bcb97db85b96.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este ejemplo tambi√©n se relaciona con el tema de nuestro art√≠culo, porque en la etapa de planificaci√≥n, cuando creamos √°rboles de comportamiento, necesitamos pensar en lo que suceder√° si algo se interpone en el camino del personaje y √©l no puede cumplir sus objetivos. </font><font style="vertical-align: inherit;">Consideraremos este aspecto en detalle en los pr√≥ximos cap√≠tulos del libro, pero por ahora simplificamos la situaci√≥n y analizamos c√≥mo debe comportarse el personaje AI si el objeto del entorno le impide cumplir su objetivo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dfb/464/89b/dfb46489b482f383bc95662246308536.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En nuestro ejemplo, el personaje AI debe entrar en la casa, pero cuando se acerca, se da cuenta de que est√° rodeado por una valla de madera, a trav√©s de la cual no puede pasar. Queremos que el personaje elija un objetivo en este punto y comience a atacar hasta que esta parte de la cerca se destruya y pueda entrar en la casa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este ejemplo, necesitamos calcular a qu√© cerca debe atacar el personaje, dada la distancia y el estado de salud actual de la cerca. Una cerca con bajo HP deber√≠a tener una prioridad m√°s alta para el ataque, a diferencia de una cerca con HP completo, por lo que lo tendremos en cuenta en nuestros c√°lculos.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/223/23f/ac4/22323fac4373a3556b58383bfb6b36fe.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Queremos establecer el vecindario alrededor del personaje, dentro del cual las cercas m√°s cercanas transmiten su informaci√≥n a la inteligencia artificial para que pueda decidir cu√°l es m√°s f√°cil de destruir. Esto se puede implementar de varias maneras, ya sea utilizando el reconocimiento de colisiones de cercas con el jugador o forz√°ndolas a calcular la distancia entre cercas / objetos y el jugador; establecemos el valor de la distancia a la que el jugador comienza a percibir el estado de la cerca. En nuestro ejemplo, calcularemos la distancia y la usaremos para notificar al personaje sobre las cercas de HP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comencemos creando el c√≥digo que se aplicar√° al objeto de valla; Todos tendr√°n el mismo gui√≥n:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> HP;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> distanceValue;
<span class="hljs-keyword">private</span> Transform characterPosition;
<span class="hljs-keyword">private</span> GameObject characterMesh;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> proximityValueX;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> proximityValueY;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> nearValue;<font></font>
<font></font>
<span class="hljs-comment">// Use this for initialization</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  HP = <span class="hljs-number">100f</span>;<font></font>
  distanceValue = <span class="hljs-number">1.5f</span>;<font></font>
<font></font>
  <span class="hljs-comment">// Find the Character Mesh</span>
  characterMesh = GameObject.Find(<span class="hljs-string">"AICharacter"</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// Update is called once per frame</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  <span class="hljs-comment">// Obtain the Character Mesh Position</span><font></font>
  characterPosition = characterMesh.transform;<font></font>
<font></font>
  <span class="hljs-comment">//Calculate the distance between this object and the AI Character</span>
  proximityValueX = characterPosition.transform.position.x - <span class="hljs-keyword">this</span>.transform.position.x;<font></font>
  proximityValueY = characterPosition.transform.position.y - <span class="hljs-keyword">this</span>.transform.position.y;<font></font>
<font></font>
  nearValue = proximityValueX + proximityValueY;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este script, agregamos informaci√≥n b√°sica sobre HP y las distancias, que se utilizar√°n para conectarse con el personaje AI. Esta vez agregamos el gui√≥n de c√°lculo de distancia no al personaje, sino a los objetos del entorno; Esto le da m√°s dinamismo al objeto y nos permite crear m√°s oportunidades. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, si los personajes del juego tambi√©n participan en la creaci√≥n de cercas, entonces tendr√°n diferentes estados, por ejemplo, "en construcci√≥n", "completado" o "da√±ado"; entonces el personaje podr√° recibir esta informaci√≥n y usarla para sus propios fines.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos a configurar el personaje interactuando con el objeto del entorno. Su objetivo principal ser√° obtener acceso a la casa, pero cuando se acerca, se da cuenta de que no puede entrar debido al hecho de que est√° rodeado de cercas de madera. Queremos que, despu√©s de analizar la situaci√≥n, nuestro personaje destruya la cerca para cumplir su objetivo y entrar en la casa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el script de caracteres, agregaremos una funci√≥n est√°tica, a la entrada de las cuales las cercas podr√°n transmitir informaci√≥n sobre su "estado" actual; Esto ayudar√° al personaje a elegir la cerca m√°s adecuada para la destrucci√≥n.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">float</span> fenceHP;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">float</span> lowerFenceHP;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">float</span> fencesAnalyzed;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> GameObject bestFence;<font></font>
<font></font>
<span class="hljs-keyword">private</span> Transform House;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> timeWasted;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> speed;<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        fenceHP = <span class="hljs-number">100f</span>;<font></font>
        lowerFenceHP = fenceHP;<font></font>
        fencesAnalyzed = <span class="hljs-number">0</span>;<font></font>
        speed = <span class="hljs-number">0.8</span>;<font></font>
<font></font>
        Vector3 House = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">300.2f</span>, <span class="hljs-number">83.3f</span>, <span class="hljs-number">-13.3f</span>);<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        timeWasted += Time.deltaTime;<font></font>
<font></font>
        <span class="hljs-keyword">if</span>(fenceHP &gt; lowerFenceHP)<font></font>
        {<font></font>
            lowerFenceHP = fenceHP;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">if</span>(timeWasted &gt; <span class="hljs-number">30f</span>)<font></font>
        {<font></font>
            GoToFence();  <font></font>
        }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GoToFence</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        Vector3 positionA = <span class="hljs-keyword">this</span>.transform.position;<font></font>
        Vector3 positionB = bestFence.transform.position;<font></font>
        <span class="hljs-keyword">this</span>.transform.position = Vector3.Lerp(positionA, positionB, Time.deltaTime * speed);<font></font>
}</code></pre><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7a8/970/af0/7a8970af0c9b5aa303ba32d6dc021ec8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya hemos agregado la informaci√≥n m√°s b√°sica al personaje. </font></font><code>fenceHP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ser√° una variable est√°tica en la que cada cerca que se encuentre dentro del radio del vecindario del personaje registrar√° informaci√≥n sobre el HP actual. Luego, el personaje de AI analiza la informaci√≥n recibida y la compara con la valla con el menor HP presentado </font></font><code>lowerFenceHP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El personaje tiene una variable que </font></font><code>timeWasted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">representa la cantidad de segundos que ya pas√≥ buscando una cerca adecuada para destruir. </font></font><code>fencesAnalyzed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se usar√° para averiguar si ya hay una cerca en el c√≥digo, y si no, se agrega la primera cerca encontrada por el personaje; en caso de que las cercas tengan el mismo valor de HP, el personaje las ataca primero. Ahora agreguemos el c√≥digo de las cercas para que puedan acceder al gui√≥n del personaje e ingresar informaci√≥n √∫til.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> HP;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> distanceValue;
<span class="hljs-keyword">private</span> Transform characterPosition;
<span class="hljs-keyword">private</span> GameObject characterMesh;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> proximityValueX;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> proximityValueY;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> nearValue;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        HP = <span class="hljs-number">100f</span>;<font></font>
        distanceValue = <span class="hljs-number">1.5f</span>;<font></font>
<font></font>
        <span class="hljs-comment">// Find the Character Mesh</span>
        characterMesh = GameObject.Find(<span class="hljs-string">"AICharacter"</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        <span class="hljs-comment">// Obtain the Character Mesh Position</span><font></font>
        characterPosition = characterMesh.transform;<font></font>
<font></font>
        <span class="hljs-comment">//Calculate the distance between this object and the AI Character</span>
        proximityValueX = characterPosition.transform.position.x - <span class="hljs-keyword">this</span>.transform.position.x;<font></font>
        proximityValueY = characterPosition.transform.position.y - <span class="hljs-keyword">this</span>.transform.position.y;<font></font>
<font></font>
        nearValue = proximityValueX + proximityValueY;<font></font>
<font></font>
        <span class="hljs-keyword">if</span>(nearValue &lt;= distanceValue){
            <span class="hljs-keyword">if</span>(AICharacter.fencesAnalyzed == <span class="hljs-number">0</span>){<font></font>
                AICharacter.fencesAnalyzed = <span class="hljs-number">1</span>;<font></font>
                AICharacter.bestFence = <span class="hljs-keyword">this</span>.gameObject;<font></font>
            }<font></font>
<font></font>
            AICharacter.fenceHP = HP;<font></font>
<font></font>
            <span class="hljs-keyword">if</span>(HP &lt; AICharacter.lowerFenceHP){<font></font>
                AICharacter.bestFence = <span class="hljs-keyword">this</span>.gameObject;<font></font>
            }<font></font>
        }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente completamos este ejemplo. </font><font style="vertical-align: inherit;">Ahora la cerca compara su HP actual con los datos del personaje ( </font></font><code>lowerFenceHP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), y si su HP es menor que el valor m√°s bajo que tiene el personaje, entonces se considerar√° esta cerca </font></font><code>bestFence</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este ejemplo demuestra c√≥mo adaptar un personaje AI a varios objetos din√°micos en el juego; </font><font style="vertical-align: inherit;">El mismo principio puede extenderse y utilizarse para interactuar con casi cualquier objeto. </font><font style="vertical-align: inherit;">Tambi√©n es aplicable y √∫til cuando se usan objetos para interactuar con un personaje, vinculando informaci√≥n entre ellos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta publicaci√≥n, exploramos varias formas de interactuar con el medio ambiente. </font><font style="vertical-align: inherit;">Las t√©cnicas demostradas en este cap√≠tulo pueden extenderse a muchos g√©neros diferentes de juegos y usarse para realizar interacciones simples y complejas entre los personajes de IA y el entorno.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es496046/index.html">Gr√°ficos 3D en el STM32F103</a></li>
<li><a href="../es496050/index.html">Tigres y leones contraen coronavirus en Nueva York</a></li>
<li><a href="../es496052/index.html">¬øC√≥mo puede una empresa de servicios evitar multas de un cliente? Un par de ventajas obvias de la automatizaci√≥n de procesos.</a></li>
<li><a href="../es496056/index.html">Digital: c√≥mo nos enga√±an los n√∫meros y los t√©rminos</a></li>
<li><a href="../es496058/index.html">¬øPor qu√© es necesario usar cosechadoras agr√≠colas rob√≥ticas, cu√°les son las dificultades y c√≥mo lo hicimos en dos a√±os?</a></li>
<li><a href="../es496082/index.html">Ingeniero de datos y cient√≠fico de datos: ¬øcu√°l es la diferencia?</a></li>
<li><a href="../es496084/index.html">Blazor Client Side Online Store: Parte 6 - Crear un pedido y trabajar con acciones compensatorias</a></li>
<li><a href="../es496086/index.html">Organizaci√≥n del trabajo remoto con trabajos digitales de Zextras</a></li>
<li><a href="../es496088/index.html">21 de abril en vivo! Reuni√≥n de localizaci√≥n de Badoo</a></li>
<li><a href="../es496090/index.html">Eliminado con Zyxel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>