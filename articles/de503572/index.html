<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👰🏼 📃 🤑 Udalenka. Eine weitere Geschichte zur Selbstisolierung der VPN-Bereitstellung 😘 💪🏿 🈂️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Eine andere Geschichte darüber, wie es notwendig war, den Fernzugriff für ein kleines Unternehmen schnell bereitzustellen, das sich selbst isolierte, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Udalenka. Eine weitere Geschichte zur Selbstisolierung der VPN-Bereitstellung</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503572/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine andere Geschichte darüber, wie es notwendig war, den Fernzugriff für ein kleines Unternehmen schnell bereitzustellen, das sich selbst isolierte, es sich aber nicht leisten konnte, nicht weiter zu arbeiten.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie viele andere erkannte auch das Unternehmen, das mich um die Organisation des Fernzugriffs gebeten hatte, dass es nur wenige Tage vor der Ankündigung dieser Maßnahmen durch den Präsidenten zur Selbstisolierung aufbrechen musste. </font><font style="vertical-align: inherit;">Es war notwendig, schnell zu handeln.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe die Erfahrung gemacht, dass Mitarbeiter plötzlich auf RDP-Server remote arbeiten. Dies ist ein Schock, alle üblichen Prozesse brechen zusammen, die Effektivität der Mitarbeiterinteraktion nimmt für eine Weile ab und einige Prozesse werden vollständig gestoppt. Es dauert einige Zeit, bis alle Prozesse wieder funktionieren. Im Allgemeinen ist die Option, alle in kurzer Zeit auf einen RDP-Server zu übertragen, nicht geeignet, da sich das übliche Arbeitsumfeld der Mitarbeiter ändert. Daher wurde beschlossen, den Zugriff direkt auf die Computer der Mitarbeiter zu ermöglichen. In diesem Fall bleibt das übliche Arbeitsumfeld beim Mitarbeiter, praktisch nichts ändert sich oder bricht in ihm.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Unternehmen gibt es neben herkömmlichen Benutzerprofilen wie Geschäftsleuten, Verkäufern, Buchhaltern usw. Designer. Es musste sichergestellt werden, dass Designer RDP in Grafikanwendungen verarbeiten können. Sie müssen auch daran denken, den Mitarbeitern auf allen PCs den Fernzugriff zu ermöglichen und ein Energiesparschema einzurichten, damit Computer nachts nicht einschlafen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um zu überprüfen, ob Designer bequem remote arbeiten können, wurde ein Test OpenVPN bereitgestellt, dann wurden mehrere Designer mit ihren PCs verbunden und der Betrieb ihrer Anwendungen überprüft. Fernzugriff und ein Energiesparschema sind über Gruppenrichtlinien zulässig.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Leistung des VPN-Servers nicht zu beeinträchtigen, um die Zugriffskapazitäten zu erweitern und die Serverwartung durchzuführen, ohne diesen Zugriff zu stoppen, wurde beschlossen, einen Cluster aus mehreren OpenVPN-Knoten bereitzustellen, auf die HaProxy den Zugriff verteilt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Planen:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fz/ji/bn/fzjibnejcha28mbxb-sjrqojxmm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden Benutzer in der Active Directory-Domäne autorisieren. Erstellen Sie dazu eine Gruppe in der Domäne. Ich habe sie der Einfachheit halber COVID-19 genannt. In dieser Gruppe müssen Sie Benutzer hinzufügen, denen Remotezugriff gewährt wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für die Autorisierung über AD in OpenVPN müssen Sie das dafür vorgesehene Modul anschließen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe nicht mit openvpn-auth-ldap gearbeitet, es war keine Zeit, es herauszufinden, also habe ich das Skript </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aus diesem Repository verwendet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Die Verbindung ist einfach, legen Sie sie einfach im Verzeichnis openvpn ab, fügen Sie eine Zeile zur Datei openvpn.conf hinzu und geben Sie die Suchparameter für den AD-Benutzer an. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es bleibt eine Mindestanweisung für die Selbstinstallation des OpenVPN-Clients und des Verbindungsprofils zu schreiben und diese an Benutzer zu senden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So konnten die Mitarbeiter des Unternehmens innerhalb weniger Tage schnell in den Selbstisolationsmodus wechseln und weiterarbeiten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde keine detaillierte Analyse der Servereinstellungen geben. Wer einen Cluster sehen und sogar bereitstellen möchte, habe auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub ein</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Playbook für Ansible veröffentlicht, das HaProxy und OpenVPN auf drei Servern bereitstellt. Beachtung! Ich habe FreeBSD verwendet, Playbooks sind für dieses Betriebssystem geschrieben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit Administratoren sehen können, wer aktuell mit welchem ​​Server verbunden ist, hat er ein Skript geschrieben, das den Server nach Krone abfragt und eine einfache HTML-Seite generiert. Informationen zu Mitarbeitern werden aus dem internen Ressourcen-Wiki übernommen. Sie können diesen Block aus dem Skript entfernen und nur AD-Konten belassen oder ihn durch Informationen zu Mitarbeitern aus AD ersetzen, sofern diese Informationen dort verfügbar sind. Das Skript befindet sich im Ordner misc, im Repository unter dem Link, zu dem ich oben angegeben habe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Während des Betriebs wurde in Windows 10 1903 ein unangenehmer Fehler festgestellt. Bei der Remote-Arbeit über RDP 10 wurde die Verbindung getrennt. Danach konnte keine Verbindung mehr hergestellt werden. Der Fehler wird durch den Patch KV4522355 behoben</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist die ganze Geschichte. </font><font style="vertical-align: inherit;">Der Zweck ist möglicherweise verspätet, ein Beispiel dafür zu liefern, wie Sie den Remotezugriff schnell und zu minimalen Kosten bereitstellen können. </font><font style="vertical-align: inherit;">Die Implementierung eignet sich sowohl für kleine als auch für mittlere Unternehmen und kann die Anzahl der Remoteverbindungen erhöhen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielen Dank für Ihre Aufmerksamkeit.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de503556/index.html">Alles, was Sie über std :: any wissen müssen</a></li>
<li><a href="../de503560/index.html">Scala lernen: Teil 1 - Das Schlangenspiel</a></li>
<li><a href="../de503562/index.html">Die Zusammenfassung interessanter Materialien für den mobilen Entwickler # 345 (18. - 24. Mai)</a></li>
<li><a href="../de503566/index.html">Ist es möglich, Linux Desktop in einer Windows-Infrastruktur zu verwenden?</a></li>
<li><a href="../de503570/index.html">Xiaomi Gateway 2 kann nicht gelötet werden</a></li>
<li><a href="../de503574/index.html">Analyse des Inhalts von QR-Codes in Dokumenten der elektronischen Regierung der Republik Kasachstan im Frontend</a></li>
<li><a href="../de503576/index.html">"Passed by": Themen, die Sie vergessen haben, auf russischsprachigen Websites über Startups und Technologien zu diskutieren</a></li>
<li><a href="../de503578/index.html">Gute Programmierer kopieren, gute Programmierer stehlen</a></li>
<li><a href="../de503580/index.html">Was ist Big Data?</a></li>
<li><a href="../de503588/index.html">Bill Gates: Was Sie über COVID-19-Impfstoff wissen müssen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>