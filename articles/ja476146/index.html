<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏇🏽 🤪 👨‍👧 データセンターを拡張する方法。Yandexレポート 👩🏻‍🤝‍👨🏾 👳🏿 💚</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="データセンターのネットワークの設計を開発しました。これにより、1秒あたり1ペタビットを超える二分帯域幅で10万台を超えるサーバーにコンピューティングクラスターを展開できます。
 
 Dmitry Afanasyevのレポートから、新しい設計の基本原則、これらの問題で発生するトポロジのスケーリング、そ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>データセンターを拡張する方法。Yandexレポート</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/476146/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データセンターのネットワークの設計を開発しました。これにより、1秒あたり1ペタビットを超える二分帯域幅で10万台を超えるサーバーにコンピューティングクラスターを展開できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dmitry Afanasyevのレポートから、新しい設計の基本原則、これらの問題で発生するトポロジのスケーリング、それらの解決策、多数のECMPルートを持つ密に接続されたトポロジにおける最新のネットワークデバイスの転送プレーン機能のルーティングとスケーリングの機能について学びます。</font><font style="vertical-align: inherit;">さらに、Dimaは外部接続の構成、物理レベル、ケーブルシステム、および容量をさらに増やす方法について簡単に説明しました。</font></font><br>
<br>
<a name="academy"></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/rd/dy/sc/rddysciofis_rkvkotpo1tr52i0.jpeg"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-こんにちは、皆さん！</font><font style="vertical-align: inherit;">私はDmitry Afanasyevと申します。Yandexのネットワークアーキテクトであり、主にデータセンターネットワークの設計を担当しています。</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/zv/gl/5v/zvgl5vyexhel7a_6_mxp8wm4qoe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の話は、Yandexデータセンターの更新されたネットワークについてです。これは主に私たちが持っていたデザインの進化ですが、同時にいくつかの新しい要素があります。多くの情報を短時間で合わせる必要があったので、これはレビュープレゼンテーションです。まず、論理トポロジを選択します。次に、コントロールプレーンの概要とデータプレーンのスケーラビリティの問題、物理レベルで何を行うかを選択します。デバイスのいくつかの機能を見てみましょう。少し触れ、MPLSを使用してデータセンターで何が起こっているかについて触れます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ew/lm/rc/ewlmrcydwmv1s3gz2irvhuyev-q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで、ワークロードとサービスの観点からYandexは何ですか？ Yandexは典型的なハイパースケーラーです。ユーザーを見ると、主にユーザーのリクエストを処理しています。また、ストレージサービスもあるので、さまざまなストリーミングサービスやデータ出力が可能です。バックエンドにより近い場合、分散オブジェクトストア、データレプリケーション、そしてもちろん永続キューなどのインフラストラクチャの負荷とサービスがあります。ロードの主なタイプの1つは、MapReduceなど、ストリーミング処理、機械学習などです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qi/71/qd/qi71qdjq7zbaxhmfmqbd6y66fba.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これがすべて発生するインフラストラクチャはどうですか？繰り返しますが、私たちはかなり典型的なハイパースケーラーですが、おそらく、小さなハイパースケーラーが配置されているスペクトルの側に少し近いでしょう。しかし、私たちはすべての属性を持っています。可能な限り、汎用ハードウェアと水平スケーリングを使用しています。リソースプーリングは完全に成長しています。個別のマシンや個別のラックを使用するのではなく、それらを組み合わせて、計画と割り当てに関与するいくつかの追加サービスを備えた交換可能なリソースの大きなプールに統合し、このすべてのプールを使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、次のレベル、つまりオペレーティングシステムレベルのコンピューティングクラスタがあります。使用するテクノロジースタックを完全に制御することは非常に重要です。エンドポイント（ホスト）、ネットワーク、およびソフトウェアスタックを制御します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロシアと海外にいくつかの大規模なデータセンターがあります。それらは、MPLSテクノロジーを使用するバックボーンによって統合されます。私たちの内部インフラストラクチャはほぼIPv6ベースですが、主にIPv4経由で配信される外部トラフィックを処理する必要があるため、IPv4経由で到着したリクエストを何らかの方法でフロントエンドサーバーに配信し、それでも少し外部IPv4-に移動する必要がありますインターネット-たとえば、索引付け。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データセンターネットワーク設計の最後の数回の反復では、マルチレベルのClosトポロジを使用しており、L3のみが使用されています。少し前にL2を離れ、安堵のため息をついた。最後に、インフラストラクチャには数十万のコンピューティング（サーバー）インスタンスが含まれています。少し前の最大クラスターサイズは約1万サーバーでした。これは主に、非常にクラスターレベルのオペレーティングシステム（スケジューラー、リソース割り当てなど）がどのように機能するかによるものです。インフラストラクチャソフトウェアの側面で進歩があったため、現在の目標は1つのコンピューティングクラスター内の約10万台のサーバーであり、そのようなクラスターでリソースを効率的にプールできるネットワークファクトリを構築できるようにするというタスクがありました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ra/co/cb/racocb4wtrqihsf4qcpswzzihhc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データセンターネットワークには何が必要ですか？まず第一に-多くの安価でかなり均一に分散された帯域幅。ネットワークは、私たちがリソースのプールを行うことができるその基質だからです。新しいターゲットサイズは、1つのクラスターで約10万サーバーです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、スケーラブルで安定したコントロールプレーンも必要です。これは、このような大規模なインフラストラクチャでは、ランダムなイベントだけでも多くの頭痛が発生し、コントロールプレーンが頭痛をもたらすことを望まないためです。同時に、その中の状態を最小化したいです。状態が小さいほど、すべてがよりよく、より安定して機能し、診断が容易になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、そのようなインフラストラクチャを手動で管理することは不可能であり、以前は不可能であったため、自動化が必要です。可能な限り、可能な限り、運用サポートとCI / CDサポートが必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようなサイズのデータ​​センターとクラスターでは、サービスを中断することなく段階的な展開と拡張をサポートする作業が非常に困難になっています。クラスター上で1,000台の車のサイズがおそらく1万台のマシンに近い場合、それらは1つの操作としてロールアウトされる可能性があります。つまり、インフラストラクチャの拡張を計画しており、数千台のマシンが1つの操作として追加された場合、10万台のサイズのクラスターは発生しません。そのように、それはしばらくの間構築されました。そして、この間ずっと、すでに汲み出されているもの、配備されているインフラストラクチャが利用可能であることが望ましい。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、私たちが残した1つの要件は、マルチテナンシー、つまり仮想化またはネットワークセグメンテーションのサポートです。これで、ネットワークファクトリレベルでこれを行う必要がなくなりました。セグメンテーションがホストに行われるため、スケーリングが非常に簡単になったためです。 IPv6と大きなアドレススペースのおかげで、内部インフラストラクチャで重複したアドレスを使用する必要がなくなりました。すべてのアドレス指定は既に一意でした。また、ホストに対してフィルタリングとネットワークセグメンテーションを行ったため、データセンターネットワークに仮想ネットワークエンティティを作成する必要はありません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nx/hi/9l/nxhi9l-ggxw-kvhbuoeldgkhnno.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非常に重要なことは、私たちが必要としないことです。一部の機能をネットワークから削除できる場合、これにより寿命が大幅に短縮され、一般に、利用可能な機器とソフトウェアの選択肢が広がり、診断が大幅に簡素化されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで、私たちが必要としないもの、私たちが拒否することができたものは何ですか？これが起こった瞬間にいつも喜びではなく、プロセスが完了したときに大きな安心で？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず第一に、L2の拒否。 L2は、リアルでもエミュレートでも必要ありません。アプリケーションスタックを制御しているため、あまり使用されていません。私たちのアプリケーションは水平方向にスケーリングされており、L3アドレッシングで動作し、特定のインスタンスが停止することを本当に心配していません。新しいインスタンスを展開するだけで、クラスターに配置されたマシンの個別のレベルのサービス検出と監視があるため、古いアドレスに展開する必要はありません。 。このタスクはネットワークに転送されません。ネットワークのタスクは、ポイントAからポイントBにパケットを配信することです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、アドレスがネットワーク内で移動する状況はないため、これを監視する必要があります。多くの設計では、これは通常、VMモビリティをサポートするために必要です。大きなYandexの内部インフラストラクチャで仮想マシンのモビリティを使用することはありません。さらに、これが行われたとしても、これはネットワークサポートでは発生しないはずです。本当にこれを行う必要がある場合は、ホストレベルでこれを行い、オーバーレイに移行できるアドレスを駆動して、ルーティングシステム自体のアンダーレイ（トランスポートネットワーク）に触れたり動的な変更を加えすぎたりしないようにする必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用しないもう1つのテクノロジーはマルチキャストです。理由を詳しく説明します。誰かが彼に対処し、マルチキャストのコントロールプレーンがどのように見えるかを見た場合、これは非常に簡単になります。最も単純なものを除くすべてのインストールで、これは大きな頭痛の種です。さらに、たとえば、適切に機能するオープンソース実装を見つけるのは困難です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、ネットワークがあまり変更されないように設計します。ルーティングシステムでの外部イベントのフローは小さいと予想できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qa/nz/e3/qanze3l9jiktreg59urwgnfmpec.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データセンターネットワークを開発する場合、どのような問題が発生し、どのような制限を考慮する必要がありますか？もちろんコスト。スケーラビリティ。どのレベルまで成長させたいか。サービスを停止することなく拡張する必要性。帯域幅の可用性。監視システム、運用チームのために、ネットワークで何が起こっているかを可視化します。自動化のサポート-追加のレイヤーの導入など、さまざまなレベルでさまざまなタスクを解決できるため、可能な限り繰り返します。まあ-[可能な限り]-ベンダーへの依存。異なる歴史的時期ではありますが、どのセクションを見るかによって異なりますが、この独立性を達成するのは簡単または困難でした。ネットワークデバイスのチップの一部を取り上げた場合、最近まで、ベンダーからの独立について話します。高帯域幅のチップも必要な場合は、非常に条件付きである可能性があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fd/bq/s1/fdbqs1_kegdd7s4twvg144y0rus.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ネットワークの構築に使用する論理トポロジは何ですか？これはマルチレベルのClosになります。実際、現在、実際の代替手段はありません。また、基数の大きなスイッチを使用している場合は、Closトポロジーで十分です。これを、さまざまな高度なトポロジーと比較しても十分です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4y/pk/tt/4ypkttuvzezqubmxx3te-envyzo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
階層化されたClosネットワークはどのように大まかに構造化されており、その中で呼び出されるさまざまな要素は何ですか？まず、風が上がり、北、南、東、西の場所を確認しました。このタイプのネットワークは、通常、西から東へのトラフィックが非常に多い人々によって構築されます。残りの要素については、小さなスイッチから組み立てられた仮想スイッチが上部に示されています。これは、Closネットワークを再帰的に構築する基本的な考え方です。基数のある要素を取り、それらを接続して、基数を持つより大きなスイッチと見なすことができるようにします。さらに必要な場合は、手順を繰り返すことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、2レベルのClosの場合、図で垂直になっているコンポーネントを明確に区別できる場合、それらは通常平面と呼ばれます。 3レベルのスパインスイッチ（境界ではなく、ToRスイッチではなく、トランジットにのみ使用される）を使用してClosを構築した場合、平面はより複雑になり、2レベルはまったく同じように見えます。 ToRまたはリーフスイッチのブロックと、関連する第1レベルのスパインスイッチ（Podと呼びます）。ポッドの上部にあるスパインレベル1スイッチは、ポッドの上部、ポッドの上部です。工場全体の最上部にあるスイッチは、工場の最上層であるTop of fabricです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k-/sk/dd/k-skddvn98f6y-jk2e_5zzvlm4a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、問題が発生します。Closネットワークはしばらく前から構築されており、アイデア自体は一般に、古典的なテレフォニーであるTDMネットワークの時代に由来しています。たぶんもっと良いものが現れたのかもしれないし、どうにかして何かもっと良いことができるのでしょうか？はいといいえ。理論的には、はい、実際には、近い将来、間違いなくそうです。興味深いトポロジーは多数あるため、それらのいくつかは本番環境でも使用されています。たとえば、DragonflyはHPCアプリケーションで使用されています。 Xpander、FatClique、Jellyfishな​​どの興味深いトポロジもあります。最近SIGCOMMやNSDIなどの会議でのレポートを見ると、Closよりも優れたプロパティ（どちらか一方）を持つ代替トポロジに関するかなり多数の論文を見つけることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、これらのトポロジーにはすべて1つの興味深い特性があります。これにより、データセンターのネットワークでの実装が妨げられます。これは、私たちが一般的なハードウェア上に構築しようとしているものであり、妥当な費用がかかります。これらすべての代替トポロジでは、残念ながら、ほとんどの帯域は最短経路でアクセスできません。したがって、従来のコントロールプレーンを使用できなくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理論的には、問題の解決策はわかっています。これらは、たとえば、k最短パスを使用したリンク状態の変更ですが、本番環境で実装され、機器で大量に利用できるプロトコルはありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、ほとんどの容量は最短パスではアクセスできないため、これらすべてのパスを選択するようにコントロールプレーンだけでなく変更する必要があります（ちなみに、これはコントロールプレーンでははるかに大きな状態です）。それでも転送プレーンを変更する必要があり、原則として、少なくとも2つの追加機能が必要です。これは、たとえばホスト上で、パッケージの転送に関するすべての決定を1回行う機会です。これは実際にはソースルーティングであり、相互接続ネットワークに関する文献では、これはオールアットワンス転送決定と呼ばれています。また、アダプティブルーティングはすでにネットワーク要素に必要な機能であり、たとえば、キュ​​ーの最小負荷に関する情報に基づいてネクストホップを選択するということになります。例として、他のオプションが可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、方向性は興味深いものですが、残念ながら、現時点では適用できません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5d/ki/zy/5dkizyihr8k0owfwar8yjdkx5m0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、Closの論理トポロジに落ち着きました。どのようにスケーリングしますか？それがどのように機能し、何ができるか見てみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ap/dy/-2/apdy-2dnjdljys76pfv4rw7sr-k.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Closネットワークには、何らかの方法で変化させて特定の結果を得ることができる2つの主要なパラメーターがあります。基数要素とネットワーク内のレベル数です。どちらかがサイズにどのように影響するかを模式的に示します。理想的には、両方を組み合わせます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5d/ki/zy/5dkizyihr8k0owfwar8yjdkx5m0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Closネットワークの全幅は、南部の基数のスパインスイッチのすべてのレベル、ダウンしているリンクの数、分岐の方法の積であることがわかります。これは、ネットワークのサイズをスケーリングする方法です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ap/dy/-2/apdy-2dnjdljys76pfv4rw7sr-k.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
容量については、特にToRスイッチでは、2つのスケーリングオプションがあります。一般的なトポロジーを維持しながら、より高速なリンクを使用することも、プレーンを追加することもできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Closネットワークの詳細バージョン（右下隅）を見て、下のClosネットワークを使用してこの図に戻ると</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4y/pk/tt/4ypkttuvzezqubmxx3te-envyzo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、これはまったく同じトポロジですが、このスライドでは、よりコンパクトに折りたたまれ、ファクトリープレーンが互いに重なり合っています。 。同じです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n9/ny/zd/n9nyzdzmz4i8o_c-adybirjhfos.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Closネットワークのスケーリングは数値でどのように見えますか？ここに、ネットワークが取得できる最大幅、ラック、ToRスイッチ、またはリーフスイッチの最大数に関するデータがあります。それらがラックにない場合、スパインに使用するスイッチの基数に応じて取得できます。レベルと使用するレベルの数。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、ラックの数、サーバーの数、およびラックあたり20 kWの速度でこれがすべて消費できる量を示しています。少し前に、約10万台のサーバーのクラスターサイズを目指していることを述べました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この全体の構造では、2.5オプションが重要であることがわかります。 2つのスパインと64ポートスイッチのオプションがあり、少し短いです。次に、2つのレベルを持つ128ポート（128基数）スパインスイッチ、または3つのレベルを持つ32基数を持つスイッチに完全に適合するオプション。また、基数とレベルが多い場合はすべて、非常に大規模なネットワークを作成できますが、予想消費量を見ると、原則としてギガワットになります。ケーブルを敷設することはできますが、1つのサイトでそれほど多くの電力を得ることはほとんどありません。統計を見てみると、150 MWを超える推定容量のデータセンターに関する公開データはほとんど見つかりません。さらに、原則として、データセンターのキャンパスは、互いにかなり近くにあるいくつかの大規模なデータセンターです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の重要なパラメーターがあります。左の列を見ると、使用可能な帯域幅がリストされています。 Closネットワークでは、ポートの大部分がスイッチの相互接続に費やされていることに気づくのは簡単です。使用可能な帯域幅は、サーバーに向けて提供できる帯域幅です。当然、私は条件付きポートとストリップについて話している。原則として、ネットワーク内のリンクはサーバーへのリンクよりも高速ですが、バンドの単位ごとに、サーバー機器にそれを提供できる限り、ネットワーク自体にはまだいくつかのバンドがあります。そして、レベルが増えるほど、このストリップを外部に提供するための単価が高くなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、この余分なバンドもまったく同じではありません。スパンは短いですが、多額の費用がかかるDAC（直接接続銅線、つまりTwinaxケーブル）やマルチモードオプティクスなどを使用できます。より本格的にスパンに切り替えるとすぐに-これは原則としてシングルモードの光学系であり、この追加帯域のコストは著しく増加します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、前のスライドに戻って、再サブスクライブせずにClosネットワークを作成すると、図を簡単に確認でき、ネットワークがどのように構築されているかを確認できます。スパインスイッチの各レベルを追加して、下にあるストリップ全体を繰り返します。レベルに加えて-スイッチのポート、前のレベルにあったのと同じ数の同じ帯域全体、さらに多くのトランシーバー。したがって、スパインスイッチのレベル数を最小限に抑えることが非常に望ましいです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この図に基づいて、128基数のスイッチのようなものの上に本当に構築したいことは明らかです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lh/hu/qu/lhhuquq763qnw40v3n66copxa5w.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原則として、ここでのすべては先ほど述べたものと同じ</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">このスライドは後で検討される可能性が高くなります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ci/yy/zi/ciyyzijzbhajnlsarxtn-tcoybo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのようなスイッチとして選択できるオプションは何ですか？シングルチップスイッチでこのようなネットワークを構築できるようになったのは、とても嬉しいニュースです。そして、これはとてもクールです、彼らは多くの素晴らしい機能を持っています。たとえば、内部構造はほとんどありません。これは、簡単に壊れることを意味します。彼らはそれなしでは壊れますが、幸いにも完全に壊れます。モジュラーデバイスでは、ネイバーおよびコントロールプレーンの観点からは機能しているように見えますが、たとえば工場の一部を離れており、フル稼働では機能していない場合に、非常に多くの誤動作（非常に不快）があります。そしてそれへのトラフィックはそれが完全に機能しているという事実に基づいてバランスが取れており、私たちは混雑する可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または、たとえば、モジュラーデバイスの内部には高速SerDesもあるため、バックプレーンに問題があります。内部は非常に複雑です。転送要素間のプレートが同期しているか、同期していないかのどちらかです。一般に、それ自体の内部に多数の要素で構成される生産的なモジュール式デバイスには、原則として、診断が非常に難しい同じClosネットワークが含まれています。多くの場合、ベンダーでさえ診断が困難です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、デバイスが劣化する多数の障害シナリオがありますが、トポロジーから完全に脱落するわけではありません。私たちは大規模なネットワークを持っているので、同一の要素間のバランスがアクティブに使用されています。ネットワークは非常に規則的です。つまり、すべての順序が別の方法と変わらない1つの方法です。トポロジから一部のデバイスを単に失うほうが、状況に陥るよりも収益性が高くなります。一部は機能しているように見えますが、機能していないようです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8y/in/ym/8yinymhp1wcbtuhl6tbvooghq24.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シングルチップデバイスの次の優れた機能は、デバイスがより速くより速く進化することです。彼らはまた、より良い能力を持つ傾向があります。円の中にある大きな組み立てられた設計を採用すると、同じ速度のポートでの大破ユニットの容量は、モジュール式デバイスの容量のほぼ2倍になります。シングルチップを中心に構築されたデバイスは、モジュラーチップよりも著しく安価で、消費電力も少なくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、もちろん、それだけではなく、欠点もあります。まず、ほとんどの場合、基数はモジュラーデバイスよりも小さいです。 128ポートの1チップを中心にデバイスを構築できれば、数百ポートのモジュラーデバイスを問題なく入手できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、転送テーブルのサイズが著しく小さく、原則としてすべてがデータプレーンのスケーラビリティに関連しています。浅いバッファー。そして、原則として、かなり制限された機能。しかし、これらの制限を知っていて、それらを回避するために時間内に注意を払うか、または単にそれらを考慮に入れれば、これはそれほど怖くないことがわかります。基数が小さいという事実、最近登場した、ついに、基数128のデバイスは問題ではなくなり、2層のスパインで構築できます。そして、私たちが構築するのに興味深いものは2つ未満ではまだ不可能です。 1つのレベルでは、非常に小さなクラスターが取得されます。私たちの以前の設計と要件でさえ、まだそれらを超えていました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、突然ソリューションが危機に瀕している場合でも、スケーリングする方法があります。サーバーが接続される最後（または最初）の最低レベルはToRスイッチまたはリーフスイッチであるため、1つのラックをそれらに接続する必要はありません。したがって、ソリューションが約2倍短い場合は、下位の基数が大きいスイッチを使用して、たとえば2つまたは3つのラックを1つのスイッチに接続することを考えることができます。これもオプションですが、独自のコストがかかりますが、かなりうまく機能し、サイズを2倍に伸ばす必要がある場合に適切なソリューションになる場合があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wc/yl/hl/wcylhl91sqnrvns5wqmembthdaa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要約すると、2つのレベルのスパインを持つトポロジーに基づいて構築されており、ファクトリーの8つのレイヤーがあります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uz/mo/ng/uzmongpipgv1bxt94ksbvlkruvi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
物理学はどうなりますか？非常に簡単な計算。スパインに2つのレベルがある場合、スイッチには3つのレベルしかないため、ネットワークには3つのケーブルセグメントが存在することが予想されます。サーバーからリーフスイッチ、スパイン1、スパイン2までです。使用できるオプションは次のとおりです。これは、twinax、マルチモード、シングルモードです。そして、ここで、利用可能な帯域、費用、物理的寸法、通過できるスパン、アップグレード方法を検討する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コストをかけて、すべてをラインに組み込むことができます。 Tweenaxesは、アクティブオプティックスよりも大幅に安価であり、マルチモードトランシーバーよりも安価です。端から見ると、100ギガビットスイッチポートよりもやや安価です。そして、注意してください、シングルモードが必要なフライトでは、データセンターでは、いくつかの理由で、CWDMを使用することが理にかなっているため、シングルモードの光学よりも安価です。パラレルシングルモード（PSM）で作業するのはあまり便利ではなく、非常に大きなパックが得られますファイバー、そしてこれらのテクノロジーに焦点を当てれば、価格でこのような階層ができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう1つの注意：残念ながら、逆アセンブルされた100から4x25のマルチモードポートを使用することはあまり成功していません。トランシーバーの設計機能により、SFP28は100ギガビットQSFP28よりも安価ではありません。そして、このマルチモードの逆アセンブリはあまりうまく機能しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう1つの制限は、コンピューティングクラスタのサイズとサーバーの数により、データセンターが物理的に大きいことです。これは、少なくとも1つのスパンがシングルモードで実行される必要があることを意味します。繰り返しになりますが、ポッドの物理的なサイズのため、ツインアクス（銅ケーブル）を使用した2つのスパンは機能しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、価格を最適化し、この設計のジオメトリを考慮すると、CWDMを使用して、1つのツインスパンスパン、1つのマルチモードスパン、および1つのシングルスパンスパンが得られます。これは可能なアップグレードパスを考慮に入れます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ea/ci/pf/eacipf4xy2usawno2ccx4ucuwsm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちが動いているところ、そして何が可能なのか、それは最近のように見えます。少なくとも、マルチモードとシングルモードの両方で50ギガビットSerDesに移行する方法は明らかです。さらに、シングルモードトランシーバーの現在の状況と400Gの見通しを見ると、50G SerDesが電気側から来ている場合でも、レーンあたり100 Gbpsが光に入る可能性があります。したがって、50に切り替える代わりに、100ギガビットのSerDesとレーンあたり100 Gbpsに移行する可能性があります。これは、多くのベンダーの約束によると、それらの可用性はすぐに期待できるためです。 50G SerDesが最速だった期間は、100G SerDesが最初のコピーをほぼ来年にロールアウトするため、それほど長くはないようです。そしてそれからしばらくして、彼らはおそらく妥当な金額の費用がかかるでしょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uz/mo/ng/uzmongpipgv1bxt94ksbvlkruvi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
物理学の選択に関する別のニュアンス。原則として、今では、50G SerDesを使用して400ギガビットポートまたは200ギガビットポートを使用できます。しかし、これはあまり意味がないことがわかりました。先に述べたように、当然のことながら、スイッチにはかなり大きな基数が必要だからです。 128が必要です。チップキャパシティが限られていて、リンクの速度を上げると、基数はもちろん下がります。奇跡はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、飛行機による総容量を増やすことができ、同時に特別な費用は発生しません。飛行機の数を追加できます。また、基数を失うと、追加のレベルを導入する必要があるため、現在のレイアウトでは、1チップの現在の最大利用可能容量で、より大きな基数を取得できるため、100ギガビットポートを使用する方が効率的であることがわかります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0b/r0/or/0br0oryllu-b_r4p9fcbino5bks.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の質問は、物理がどのように構成されているかということですが、ケーブルインフラストラクチャの観点からです。それは非常に面白い組織であることがわかります。リーフスイッチと第1レベルのスパインの間のケーブル接続-そこには多くのリンクはなく、すべてが比較的単純にそこで構築されます。しかし、1つの平面を使用すると、内部で何が発生するかがわかります。最初のレベルのすべてのスパインを2番目のレベルのすべてのスパインに接続する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、原則として、データセンター内でどのように見えるべきかについていくつかの要望があります。たとえば、ケーブルを1つにまとめて引っ張り、1つの高密度パッチパネルを完全に1つのパッチパネルにまとめて、動物園の長さをなくしたいと考えました。私たちはなんとかこの問題を解決しました。元の論理トポロジーを見ると、プレーンが独立しており、各プレーンを独自に構築できることがわかります。ただし、このようなバンドルを追加してパッチパネル全体をパッチパネルにドラッグする場合は、1つのバンドル内に異なるプレーンを混在させ、光クロスコネクトの形で中間デザインを導入して、1つのセグメントでの組み立て方法からそれらを再パックする必要があります。 、それらが別のセグメントでどのように組み立てられるかについて。これのおかげで、私たちは素晴らしい機能を手に入れました：すべての複雑なスイッチングは、ラックを超えません。 Closネットワークで時々呼ばれるように、「平面を展開する」ために何かを非常に織り交ぜる必要があるとき、それはすべて1つのラック内に集中されます。個々のリンクまで、分解されたラック間の交換はあまりありません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1t/hu/rq/1thurqskba0vbopspd3nhpfgsus.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、ケーブルインフラストラクチャの論理的な構成の観点から見ていきます。左の図では、マルチカラーのブロックは、8レベルのスパインスイッチブロックを示しています。それぞれ8つ、4つのケーブルバンドルがあり、スパイン2スイッチブロックからのバンドルと交差します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
小さなボックスは交差点を示します。左上がそのような交差点のスキャンです。これは実際には512ポート512ポートクロスコネクトモジュールであり、ケーブルを再パッケージして、スパイン2プレーンが1つしかない1つのラックに完全に到着します。そして右側に、この画像のスキャンは、スパイン1レベルのいくつかのポッドと、クロスコネクトにどのようにパッケージ化されているか、スパイン2レベルにどのようになっているのかについて、もう少し詳しく説明しています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/c6/gv/mr/c6gvmrqk7tjkdwxuvopyn76gvn8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これがどのように見えるかです。不完全なスパイン2ラック（左）とクロスコネクトラック。残念ながら、目に見えるものはあまりありません。この設計全体は、現在拡張中の大規模データセンターの1つに展開されています。これは進行中の作業であり、よりきれいに見え、よりよく満たされます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ip/gh/sd/ipghsdpwb_goedtygn0bpaj89kq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要な質問：彼らは論理トポロジー、構築された物理学を選択しました。コントロールプレーンはどうなりますか？これは運用経験から非常によく知られています。リンク状態プロトコルが優れているという報告は多数あります。それらを使用して作業するのは良いことですが、残念ながら、緊密に結び付いたトポロジではうまく拡張できません。そして、これを防ぐ主な要因が1つあります。リンクステートプロトコルでフラッディングが機能する方法です。フォールディングアルゴリズムを使用するだけで、ネットワークの構造を確認すると、すべてのステップで非常に大きなファンアウトがあり、コントロールプレーンが更新で溢れていることがわかります。具体的には、リンクステートプロトコルの従来のフラッドアルゴリズムを具体的に使用したこのようなトポロジは、混合が不十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
選択はBGPを使用することです。大規模なデータセンターでのBGPの使用については、RFC 7938で適切に調理する方法が説明されています。基本的な考え方は単純です。ホストごとのプレフィックスの最小数と一般的にネットワーク上のプレフィックスの最小数は、可能であれば集約を使用し、パスハンティングを抑制します。私たちは、非常にきちんと制御されたアップデートの配布、いわゆるバレーフリーを望んでいます。ネットワークを通過する更新を1回だけ展開する必要があります。それらが下から発生した場合、それらは上昇し、一度しか展開されません。ジグザグはないはずです。ジグザグは非常に悪いです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、基本的なBGPメカニズムを使用するのに十分簡単なスキームを使用します。つまり、リンクローカルで実行されているeBGPを使用し、スタンドアロンシステムは次のように割り当てられます。ToRのスタンドアロンシステム、1つのポッドのスパイン1スイッチのブロック全体のスタンドアロンシステム、Top of Fabric全体の共通スタンドアロンシステム。 BGPの通常の動作でさえ、必要な更新の配布が得られることは簡単に確認できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hw/ep/kf/hwepkfz0cr9y5fhmdix0xbvhv00.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然、ルーティングの構築方法と互換性があるようにアドレスのアドレッシングと集約を設計する必要があります。これにより、コントロールプレーンの安定性が確保されます。トランスポートのL3アドレッシングはトポロジに関連付けられています。これは、この集約なしでは達成できず、これがないと、個々のアドレスがルーティングシステムに侵入するためです。そしてもう1つは、残念ながら、集約はマルチパスとあまりうまく混合しないということです。これは、マルチパスがあり、集約がある場合はすべて問題なく、ネットワーク全体が動作している場合は、障害が発生しないためです。残念ながら、ネットワークに障害が発生してトポロジの対称性が失われるとすぐに、ユニットがアナウンスされたところにたどり着き、そこから必要な場所に行くことができなくなります。したがって、集約はマルチパスがない場合に最適です。この場合、これらはToRスイッチです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/md/ce/zb/mdcezbkgiaxpdjcs1llfgnsvvps.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、集約することは可能ですが、ネットワークの停止時に制御された分解を行うことができるかどうかは慎重に検討してください。しかし、これはかなり難しいタスクであり、これを実行できるかどうか、BGPを正しくキックして目的の動作を実行する追加のオートメーションとステートマシンを接続できるかどうかさえ疑問に思いました。残念ながら、コーナーケースの処理は非常に明白で複雑であり、BGPに外部アタッチメントを添付することにより、このタスクは十分に解決されません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この点に関して非常に興味深い研究は、RIFTプロトコルのフレームワーク内で行われました。これについては、次のレポートで説明します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0u/h7/uq/0uh7uqwufze4nmj1oqrb6kun2jm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう1つの重要なことは、多数の代替パスがあるタイトトポロジでデータプレーンがどのようにスケーリングするかです。この場合、いくつかの追加のデータ構造が使用されます。ECMPグループは、次にネクストホップグループを記述します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正常に機能しているネットワークで、障害が発生せずに、Closトポロジを上る場合は、1つのグループのみを使用するだけで十分です。デフォルトでは、ローカルではないものすべてが記述されているため、上に移動できます。上から下に南に行くと、すべてのパスがECMPではなく、単一パスパスになります。物事は良いです。問題は、そして古典的なClosトポロジーの特殊性は、ファブリックのトップを見ると、任意の要素で、以下の要素に1つの方法があることです。このパスに沿って障害が発生した場合、具体的には、ファクトリの上部にあるこの要素は、壊れたパスの背後にあるプレフィックスに対して無効になります。そして残りは有効であり、ECMPグループを解析して新しい状態を導入する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最新のデバイスでのデータプレーンのスケーラビリティはどのように見えますか？ LPM（最長のプレフィックス一致）を行う場合、100kを超えるプレフィックスで十分です。ネクストホップグループについて話していると、すべてがさらに悪化し、2〜4千になります。ネクストホップ（または隣接）の説明を含むテーブルについて話している場合、これは16kから64kのどこかにあります。そして、それは問題になる可能性があります。そして、ここで興味深い余談があります。データセンターのMPLSはどうなりましたか。原則、やりたかった。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ze/ub/bj/zeubbjnb97nq_gvoprd374lotda.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つのことが起こりました。ホストでマイクロセグメンテーションを行ったので、ネットワークでこれを行う必要がなくなりました。さまざまなベンダーのサポートについてはあまりよくありませんでした。さらに、MPLSを使用したホワイトボックスでのオープンな実装については、それはなおさらです。そして、残念なことに、MPLSは、少なくともその従来の実装では、ECMPとうまく混合しません。そしてそれが理由です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fc/za/pr/fczaprpywdv5b1jhoqrn9lxq8ti.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、IPのECMP転送の構造です。多数のプレフィックスが同じグループと同じNext Hopsブロック（または隣接関係、異なるデバイスの異なるドキュメントでは、これは異なる方法で呼び出すことができます）を使用できます。ポイントは、これが発信ポートとして記述されていること、および正しいネクストホップに到達するためにMACアドレスを書き換えるものです。 IPの場合、すべてが単純に見えます。同じグループの非常に多数のプレフィックスで、まったく同じNext Hopsブロックを使用できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n5/bl/jw/n5bljwqyrivakkgc2_f8cl4oifw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
従来のMPLSアーキテクチャでは、発信インターフェイスに応じて、ラベルを異なる値に書き換えることができます。したがって、入力ラベルごとにグループとNext Hopsブロックを保持する必要があります。そして、悲しいかな、これはスケーリングしません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スパイン1からスパイン2に移動した場合、設計では約4,000のToRスイッチが必要であり、最大幅は64 ECMPパスであることがわかります。 ToRが付いたプレフィックスが1つだけ残されている場合、制限でECMPグループの1つのテーブルにクロールすることはほとんどなく、Next Hopsテーブルにもクロールしません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ut/rz/jf/utrzjfe-ddmgf0dxjbq5ipxukcs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
セグメントルーティングのようなアーキテクチャはグローバルラベルを意味するため、すべてが絶望的ではありません。正式には、これらすべてのNext Hopsブロックは再び崩壊する可能性があります。これを行うには、ワイルドカードなどの操作が必要です。ラベルを取得し、特定の値なしで同じものに書き換えます。しかし、残念ながら、アクセス可能な実装では、これはあまり存在しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして最後に、外部トラフィックをデータセンターにもたらす必要があります。どうやってするの？以前は、Closネットワークでトラフィックが上から開始されていました。つまり、ファブリックの上部にあるすべてのデバイスに接続する境界ルーターがありました。このソリューションは、中小規模のサイズで非常にうまく機能します。残念ながら、この方法でネットワーク全体に対称的にトラフィックを取得するには、すべてのTop of Fabric要素に同時に到達する必要があり、それらが100を超える場合、境界ルーターにも大きな基数が必要であることがわかります。一般的に、ボーダールーターはより機能的であり、それらのポートはより高価であり、デザインはあまり美しくありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別のオプションは、そのようなトラフィックを下から開始することです。 Closトポロジが下から、つまりToR側からのトラフィックが2つの反復でレベル全体に渡ってファブリック全体に均等に分散され、ネットワーク全体をロードするように設計されていることを簡単に確認できます。したがって、外部接続を提供する特別なタイプのポッドEdge Podを導入します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう1つのオプションがあります。たとえば、Facebookはそうです。これは、Fabric AggregatorまたはHGRIDと呼ばれます。複数のデータセンターを接続するために、追加のスパインレベルが導入されています。このような構造は、関節に追加の機能やカプセル化の変更がない場合に可能です。もしそうなら、これらは追加のタッチポイントであり、困難です。原則として、より多くの機能と、データセンターのさまざまな部分を分離する一種の膜があります。そのような大きな膜を作ることはそれだけの価値はありませんが、何らかの理由でそれが非常に必要な場合は、それを取り除く可能性を考慮し、できるだけ広くしてホストに転送することは理にかなっています。これは、たとえば、多くのクラウドオペレーターで行われます。オーバーレイがあり、ホストから始まります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mw/sj/ci/mwsjcikq0-fdqoklr0nal6vtjtg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どのような開発機会がありますか？まず、CI / CDパイプラインのサポートが改善されました。テストの方法で飛行し、飛行の方法をテストします。インフラストラクチャが大きいため、これはあまり良くありません。テストのためにそれを複製することは不可能です。あなたはそれを落とすことなく、動作しているインフラストラクチャにテスト要素を導入する方法を理解する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
優れた計装、優れた監視は決して不必要ではありません。問題全体は、努力と恵みのバランスです。あなたが合理的な力を加えることができるならば-とても良いです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ネットワークデバイスのオープンオペレーティングシステム。最高のプロトコルとRIFTのような最高のルーティングシステム。最適な輻輳制御方式の適用、および場合によっては少なくともいくつかの時点で、クラスター内でのRDMAサポートの導入についての調査も必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
より遠い将来を見据えた場合、高度なトポロジーが必要であり、おそらくオーバーヘッドの少ないネットワークが必要です。最近、HPC Cray Slingshotのファクトリーテクノロジーに関する出版物が発表されました。これは、商品イーサネットに基づいていますが、より短いヘッダーを使用するオプションがあります。その結果、オーバーヘッドが削減されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ja/-z/yx/ja-zyxc9orfwrz1lryew_4jt7r4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべては可能な限りシンプルにする必要がありますが、シンプルにする必要はありません。</font><font style="vertical-align: inherit;">複雑さはスケーラビリティの敵です。</font><font style="vertical-align: inherit;">シンプルさと定期的な構造は私たちの友達です。</font><font style="vertical-align: inherit;">どこかでスケールアウトできる場合は、それを実行してください。</font><font style="vertical-align: inherit;">そして、一般的に、ネットワークテクノロジーに携わることは素晴らしいことです。</font><font style="vertical-align: inherit;">多くの興味深いことが起こっています。</font><font style="vertical-align: inherit;">感謝。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja476134/index.html">MONQ-ロシア出身の監視とAIOps</a></li>
<li><a href="../ja476138/index.html">天文学者は、通信衛星SpaceX、OneWeb、その他の企業が天文学の未来を脅かしていると信じています</a></li>
<li><a href="../ja476140/index.html">7000語は知っているが耳で理解できない場合、リスニングを改善するにはどうすればよいですか？</a></li>
<li><a href="../ja476142/index.html">Javaでフローを制御するために例外の使用を避ける理由</a></li>
<li><a href="../ja476144/index.html">シークレットサンタをプレイするボットの例を使用して、ボットのチャットを作成する必要性と不要な方法</a></li>
<li><a href="../ja476148/index.html">FreeBSDでのpostfix + dovecot + mysql</a></li>
<li><a href="../ja476156/index.html">Apache Kafkaを使用した同期リクエスト/レスポンス</a></li>
<li><a href="../ja476160/index.html">教育ソフトウェアの誕生とその歴史：機械から最初のコンピューターまで</a></li>
<li><a href="../ja476162/index.html">最新のWebアプリケーションを作成します。プロジェクトの知識と仕事の準備。パート1</a></li>
<li><a href="../ja476164/index.html">「これもデータ分析です。」ミハイル・ゲルファンドとバイオインフォマティクスについて語る</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>