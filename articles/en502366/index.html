<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöÑ üôáüèΩ üíô Compare the work of open source Python - libraries for the recognition of named entities üë®üèº‚ÄçüöÄ ‚¨áÔ∏è ü§≤üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction
 We at the company are creating a service that allows you to automatically create, manage and safely store license agreements and other a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Compare the work of open source Python - libraries for the recognition of named entities</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502366/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introduction</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We at the company are creating a service that allows you to automatically create, manage and safely store license agreements and other agreements between freelancers and their clients. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To solve this problem, I tried dozens of solutions in the field of natural language processing, including open source solutions and would like to share my experience with open source Python - libraries for recognizing named entities.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recognized Named Entities </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A few words about the problem itself. </font><font style="vertical-align: inherit;">Named Entity Recognition (NER) is a branch of human language processing technology, the software implementation of which allows one to find objectified categories of words and phrases in speech and text. </font><font style="vertical-align: inherit;">At first, these were geographical names, names of people, organizations, addresses, but now this concept has been expanded to a great extent and with the help of NER we are looking in the text for relative and absolute dates, numbers, numbers, etc. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The identification of named entities is the ‚Äúgateway‚Äù to the human language, it allows you to identify and process the intentions of a person, to establish the connection of words in his speech and the real world.</font></font><br>
<br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Language inequality</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To begin with, I would like to draw attention to the obvious inequality in software solutions for different languages. </font><font style="vertical-align: inherit;">So, most of the developments (including those created by Russian programmers) work with English. </font><font style="vertical-align: inherit;">Finding ready-made models for Bahasa, Hindi or Arabic is an ungrateful task. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
European languages ‚Äã‚Äãare at the very least represented in the most popular libraries; African languages ‚Äã‚Äãdo not exist in modern Natural Language Processing in principle. </font><font style="vertical-align: inherit;">Meanwhile, from my own experience I know that the African continent is a huge and rich market, and this attitude is most likely the inertia of the market.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are several solutions for the Russian language that are surprising in their quality, however, they do not feel such commercial power and academic potential as for developed libraries "built" to process English. </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Text to be processed</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I took several suggestions from different sources, and combined them into a somewhat hypnotic text to test how well the selected libraries would do their job. </font></font><br>
<br>
<pre><code class="python hljs">english_text = <span class="hljs-string">''' I want a person available 7 days and with prompt response all most every time. Only Indian freelancer need I need PHP developer who have strong experience in Laravel and Codeigniter framework for daily 4 hours. I need this work by Monday 27th Jan. should be free from plagiarism . 
Need SAP FICO consultant for support project needs to be work on 6 months on FI AREAWe.  Want a same site to be created as the same as this https://www.facebook.com/?ref=logo, please check the site before contacting to me and i want this site to be ready in 10 days. They will be ready at noon tomorrow .'''</span><font></font>
<font></font>
russian_text = <span class="hljs-string">'''   110     ,     .        https://www.sobyanin.ru/  , 1 .     .51 (   :  , )  ?     2107   47     24,    . 
 c        10  1970 ,     -, . ,  5/1 8 000 ( )  00  .               .              - .'''</span><font></font>
<font></font>
</code></pre><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NLTK library</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NLTK is a classic library for natural language processing, it is easy to use, does not require long-term study and performs 99% of the tasks that may arise when solving student problems. </font></font><br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> nltk<font></font>
nltk.download(<span class="hljs-string">'punkt'</span>)<font></font>
nltk.download(<span class="hljs-string">'averaged_perceptron_tagger'</span>)<font></font>
nltk.download(<span class="hljs-string">'maxent_ne_chunker'</span>)<font></font>
nltk.download(<span class="hljs-string">'words'</span>)
<span class="hljs-keyword">for</span> sent <span class="hljs-keyword">in</span> nltk.sent_tokenize(english_text):
   <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> nltk.ne_chunk(nltk.pos_tag(nltk.word_tokenize(sent))):
      <span class="hljs-keyword">if</span> hasattr(chunk, <span class="hljs-string">'label'</span>):<font></font>
         print(chunk)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output: </font><font style="vertical-align: inherit;">
As we can see, NLTK did a good job, but in order to make the result more ‚Äúrich‚Äù we will have to train our own tagger (or choose another one from a fairly wide list). </font><font style="vertical-align: inherit;">But is it worth it in 2020 if there are simpler solutions?</font></font><br>
<code>(GPE Indian/JJ)<br>
(ORGANIZATION PHP/NNP)<br>
(GPE Laravel/NNP)<br>
(PERSON Need/NNP)<br>
(ORGANIZATION SAP/NNP)<br>
(ORGANIZATION FI/NNP)<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stanford CoreNLP</font></font></h3><br>
<img src="https://images.g2crowd.com/uploads/product/image/social_landscape/social_landscape_8c3334e07be0d50b757d5526a9acebcc/stanford-corenlp.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One way to extend the capabilities of NLTK is to use the classic Java library from Stanford CoreNLP along with the classic Python library. </font><font style="vertical-align: inherit;">Quality improves significantly, with relatively low requirements.</font></font><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> nltk.tag.stanford <span class="hljs-keyword">import</span> StanfordNERTagger<font></font>
jar = <span class="hljs-string">"stanford-ner-2015-04-20/stanford-ner-3.5.2.jar"</span>
model = <span class="hljs-string">"stanford-ner-2015-04-20/classifiers/"</span> 
st_3class = StanfordNERTagger(model + <span class="hljs-string">"english.all.3class.distsim.crf.ser.gz"</span>, jar, encoding=<span class="hljs-string">'utf8'</span>) <font></font>
st_4class = StanfordNERTagger(model + <span class="hljs-string">"english.conll.4class.distsim.crf.ser.gz"</span>, jar, encoding=<span class="hljs-string">'utf8'</span>) <font></font>
st_7class = StanfordNERTagger(model + <span class="hljs-string">"english.muc.7class.distsim.crf.ser.gz"</span>, jar, encoding=<span class="hljs-string">'utf8'</span>)
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [st_3class.tag(english_text.split()), st_4class.tag(english_text.split()), st_7class.tag(english_text.split())]:
  <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> i:
    <span class="hljs-keyword">if</span> b[<span class="hljs-number">1</span>] != <span class="hljs-string">'O'</span>:<font></font>
        print(b)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output: </font><font style="vertical-align: inherit;">
 As we can see, the quality of the output has improved significantly, and now, given the speed and ease of use, it is obvious that NLTK is quite suitable for industrial applications as well.</font></font><br>
<code>('PHP', 'ORGANIZATION')<br>
('Laravel', 'LOCATION')<br>
('Indian', 'MISC')<br>
('PHP', 'ORGANIZATION')<br>
('Laravel', 'LOCATION')<br>
('Codeigniter', 'PERSON')<br>
('SAP', 'ORGANIZATION')<br>
('FICO', 'ORGANIZATION')<br>
('PHP', 'ORGANIZATION')<br>
('Laravel', 'LOCATION')<br>
('Monday', 'DATE')<br>
('27th', 'DATE')<br>
('Jan.', 'DATE')<br>
('SAP', 'ORGANIZATION')<br>
</code><br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spacy</font></font></h3><br>
<br>
<img src="https://spacy.io/static/social_default-1d3b50b1eba4c2b06244425ff0c49570.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spacy is an open source Python library for natural language processing, it is published under the MIT license (!), It was created and developed by Matthew Hannibal and Ines Montany, founders of the developer company Explosion. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a rule, everyone who is faced with the need to solve some problems for processing a natural language will sooner or later learn about this library. Most of the functions are accessible ‚Äúout of the box‚Äù; developers take care that the library is easy to use. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Space offers 18 tags that mark named entities, as well as a simple way to retrain your own model. Add excellent documentation, a huge community and good support here - and it will become clear why this solution has become so popular in the last couple of years.</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> spacy<font></font>
model_sp = en_core_web_lg.load()<font></font>
<span class="hljs-keyword">for</span> ent <span class="hljs-keyword">in</span> model_sp(english_text).ents:<font></font>
  print(ent.text.strip(), ent.label_)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output: </font><font style="vertical-align: inherit;">
As you can see, the result is much better, and the code is much simpler and more understandable. </font><font style="vertical-align: inherit;">Cons of the work - a large weight of models, slow operation, relatively illogical "tags", the lack of models for many languages, including Russian (although there are multilingual models).</font></font><br>
<code>7 days DATE<br>
New York GPE<br>
Indian NORP<br>
Laravel LOC<br>
Codeigniter NORP<br>
4 hours TIME<br>
Monday 27th Jan. DATE<br>
FICO ORG<br>
6 months DATE<br>
10 days DATE<br>
noon TIME<br>
tomorrow DATE<br>
Iceland GPE<br>
</code><br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flair</font></font></h3><br>
<img src="https://raw.githubusercontent.com/flairNLP/flair/master/resources/docs/flair_logo_2020.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Flair offers a much deeper immersion in the subject area, the library was created, in fact, for solving research problems, the documentation is not bad, but with some failures, there is integration with a large number of other libraries, clear, logical and readable code. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The library has a developed community, and not only oriented to English, due to the large number of available models, Flair is significantly more democratic in choosing languages ‚Äã‚Äãthan Spacy.</font></font><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> flair.models <span class="hljs-keyword">import</span> SequenceTagger<font></font>
tagger = SequenceTagger.load(<span class="hljs-string">'ner'</span>)
<span class="hljs-keyword">from</span> flair.data <span class="hljs-keyword">import</span> Sentence<font></font>
s = Sentence(english_text)<font></font>
tagger.predict(s)<font></font>
<span class="hljs-keyword">for</span> entity <span class="hljs-keyword">in</span> s.get_spans(<span class="hljs-string">'ner'</span>):<font></font>
    print(entity)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output: </font><font style="vertical-align: inherit;">
 As you can see, the trained model worked not in the best way. </font><font style="vertical-align: inherit;">However, few people use Flair ‚Äúout of the box‚Äù - it is primarily a library for creating their own tools. </font><font style="vertical-align: inherit;">
The same, with reservations, can be said about the next library.</font></font><br>
<code>Span [6,7]: "7 days" [‚àí Labels: DATE (0.9329)]<br>
Span [17]: "Indian" [‚àí Labels: NORP (0.9994)]<br>
Span [35,36]: "4 hours." [‚àí Labels: TIME (0.7594)]<br>
Span [42,43,44]: "Monday 27th Jan." [‚àí Labels: DATE (0.9109)]<br>
Span [53]: "FICO" [‚àí Labels: ORG (0.6987)]<br>
Span [63,64]: "6 months" [‚àí Labels: DATE (0.9412)]<br>
Span [98,99]: "10 days." [‚àí Labels: DATE (0.9320)]<br>
Span [105,106]: "noon tomorrow" [‚àí Labels: TIME (0.8667)]<br>
</code><br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deeppavlov</font></font></h3><br>
<img src="https://avatars3.githubusercontent.com/u/29918795?s=400&amp;v=4" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DeepPavlov is an open source library built by TensorFlow and Keras. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Developers suggest using the system primarily for ‚Äúconversational‚Äù systems, chat bots, etc., but the library is also excellent for solving research problems. </font><font style="vertical-align: inherit;">Using it ‚Äúin production‚Äù without serious work to ‚Äúcustomize‚Äù and ‚Äúfinish‚Äù the solution is a task that, it seems, is not even suggested by the creators of MIPT. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A strange and illogical approach to the code architecture, which contradicts Python Zen, nevertheless brings good results if you spend enough time to deal with it.</font></font><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> deeppavlov <span class="hljs-keyword">import</span> configs, build_model
<span class="hljs-keyword">from</span> deeppavlov <span class="hljs-keyword">import</span> build_model, configs<font></font>
<font></font>
ner_model = build_model(configs.ner.ner_ontonotes_bert, download=<span class="hljs-literal">True</span>)<font></font>
result = ner_model([english_text])<font></font>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(result[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>])):
     <span class="hljs-keyword">if</span> result [<span class="hljs-number">1</span>][<span class="hljs-number">0</span>][i] != <span class="hljs-string">'O'</span>:<font></font>
         print(result[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>][i], result[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>][i])
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output: </font><font style="vertical-align: inherit;">
The result is predictable, understandable, detailed and one of the best. </font><font style="vertical-align: inherit;">The model itself can also be used directly in Hugging Face Transformers, which removes, in many ways, claims to the code architecture.</font></font><br>
<code>7 B-DATE<br>
days I-DATE<br>
Indian B-NORP<br>
Laravel B-PRODUCT<br>
Codeigniter B-PRODUCT<br>
daily B-DATE<br>
4 B-TIME<br>
hours I-TIME<br>
Monday B-DATE<br>
27th I-DATE<br>
Jan I-DATE<br>
6 B-DATE<br>
months I-DATE<br>
FI B-PRODUCT<br>
AREAWe I-PRODUCT<br>
10 B-DATE<br>
days I-DATE<br>
noon B-TIME<br>
tomorrow B-DATE</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deepmipt / ner</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is, in fact, the library with which Deep Pavlov began. </font><font style="vertical-align: inherit;">It can be used to understand the direction of developers' thoughts and the progress that they have made.</font></font><br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> ner<font></font>
example = russian_text<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deepmint_ner</span>(<span class="hljs-params">text</span>):</span><font></font>
  extractor = ner.Extractor()<font></font>
  <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> extractor(text):<font></font>
     print(m)<font></font>
deepmint_ner(example)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output:</font></font><br>
<code>Match(tokens=[Token(span=(7, 13), text='')], span=Span(start=7, end=13), type='LOC')<br>
Match(tokens=[Token(span=(492, 499), text='')], span=Span(start=492, end=499), type='PER')<br>
Match(tokens=[Token(span=(511, 520), text=''), Token(span=(521, 525), text='')], span=Span(start=511, end=525), type='PER')<br>
Match(tokens=[Token(span=(591, 600), text='')], span=Span(start=591, end=600), type='LOC')<br>
Match(tokens=[Token(span=(814, 820), text=''), Token(span=(821, 829), text='')], span=Span(start=814, end=829), type='PER')<br>
</code><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Polyglot</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the oldest libraries, fast work and a large number of supported languages ‚Äã‚Äãmake it still popular. </font><font style="vertical-align: inherit;">On the other hand, the viral GPLv3 license does not allow its full use in commercial development.</font></font><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> polyglot.text <span class="hljs-keyword">import</span> Text
<span class="hljs-keyword">for</span> ent <span class="hljs-keyword">in</span> Text(english_text).entities:<font></font>
 print(ent[<span class="hljs-number">0</span>],ent.tag)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output: </font><font style="vertical-align: inherit;">
And for the Russian language:</font></font><br>
<code>Laravel I-LOC<br>
SAP I-ORG<br>
FI I-ORG<br>
</code><br><font style="vertical-align: inherit;"></font><br>
<pre><code class="python hljs">!polyglot download embeddings2.ru ner2.ru
<span class="hljs-keyword">for</span> ent <span class="hljs-keyword">in</span> Text(russian_text).entities:<font></font>
 print(ent[<span class="hljs-number">0</span>],ent.tag)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output: </font><font style="vertical-align: inherit;">
The result is not the best, but the speed and good support can improve it if you make an effort.</font></font><br>
<code>24 I-ORG<br>
 I-PER<br>
 I-LOC<br>
 I-PER<br>
 I-ORG<br>
 I-PER</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AdaptNLP</font></font></h3> <br>
<img src="https://raw.githubusercontent.com/novetta/adaptnlp/master/docs/img/NovettaAdaptNLPlogo-400px.png" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another new library with an extremely low entry threshold for the researcher. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AdaptNLP allows users, from students to experienced data engineers, to use modern NLP models and training methods. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The library is built on top of the popular Flair and Hugging Face Transformers libraries.</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> adaptnlp <span class="hljs-keyword">import</span> EasyTokenTagger<font></font>
tagger = EasyTokenTagger()<font></font>
sentences = tagger.tag_text(<font></font>
    text = english_text, model_name_or_path = <span class="hljs-string">"ner-ontonotes"</span><font></font>
)<font></font>
spans = sentences[<span class="hljs-number">0</span>].get_spans(<span class="hljs-string">"ner"</span>)
<span class="hljs-keyword">for</span> sen <span class="hljs-keyword">in</span> sentences:
    <span class="hljs-keyword">for</span> entity <span class="hljs-keyword">in</span> sen.get_spans(<span class="hljs-string">"ner"</span>):<font></font>
        print(entity)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output: </font><font style="vertical-align: inherit;">
The result is acceptable, but the library allows you to use a variety of models to complete the task, and it can be repeatedly improved if you make efforts (but why, if you have Flair and Hugging Face Transformers directly). </font><font style="vertical-align: inherit;">
Nevertheless, simplicity, a large list of tasks and a good architecture, as well as the systematic efforts of developers allow us to hope that the library has a future.</font></font><br>
<code>DATE-span [6,7]: "7 days"<br>
NORP-span [18]: "Indian"<br>
PRODUCT-span [30]: "Laravel"<br>
TIME-span [35,36,37]: "daily 4 hours"<br>
DATE-span [44,45,46]: "Monday 27th Jan."<br>
ORG-span [55]: "FICO"<br>
DATE-span [65,66]: "6 months"<br>
DATE-span [108,109]: "10 days"<br>
TIME-span [116,117]: "noon tomorrow"<br>
</code><br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stanza</font></font></h3><br>
<img src="https://raw.githubusercontent.com/stanfordnlp/stanza/dev/images/stanza-logo.png" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stanza from StanfordNlp is a gift to developers in 2020 from Stanford University. </font><font style="vertical-align: inherit;">What Spacy lacked was multilingualism, a deep immersion in the language along with ease of use. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the community supports this library, it has every chance of becoming one of the most popular.</font></font><br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> stanza<font></font>
stanza.download(<span class="hljs-string">'en'</span>)
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">stanza_nlp</span>(<span class="hljs-params">text</span>):</span>
  nlp = stanza.Pipeline(lang=<span class="hljs-string">'en'</span>, processors=<span class="hljs-string">'tokenize,ner'</span>)<font></font>
  doc = nlp(text)<font></font>
  print(*[<span class="hljs-string">f'entity: <span class="hljs-subst">{ent.text}</span>\ttype: <span class="hljs-subst">{ent.type}</span>'</span> <span class="hljs-keyword">for</span> sent <span class="hljs-keyword">in</span> doc.sentences <span class="hljs-keyword">for</span> ent <span class="hljs-keyword">in</span> sent.ents], sep=<span class="hljs-string">'\n'</span>)<font></font>
stanza_nlp(english_text)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output: </font><font style="vertical-align: inherit;">
And for the Russian language:</font></font><br>
<code>entity: 7 days type: DATE<br>
entity: Indian type: NORP<br>
entity: Laravel type: ORG<br>
entity: Codeigniter type: PRODUCT<br>
entity: daily 4 hours type: TIME<br>
entity: Monday 27th Jan. type: DATE<br>
entity: SAP type: ORG<br>
entity: FICO type: ORG<br>
entity: 6 months type: DATE<br>
entity: FI AREAWe type: ORG<br>
entity: 10 days type: DATE<br>
entity: noon tomorrow type: TIME<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> stanza<font></font>
stanza.download(<span class="hljs-string">'ru'</span>)
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">stanza_nlp_ru</span>(<span class="hljs-params">text</span>):</span>
  nlp = stanza.Pipeline(lang=<span class="hljs-string">'ru'</span>, processors=<span class="hljs-string">'tokenize,ner'</span>)<font></font>
  doc = nlp(text)<font></font>
  print(*[<span class="hljs-string">f'entity: <span class="hljs-subst">{ent.text}</span>\ttype: <span class="hljs-subst">{ent.type}</span>'</span> <span class="hljs-keyword">for</span> sent <span class="hljs-keyword">in</span> doc.sentences <span class="hljs-keyword">for</span> ent <span class="hljs-keyword">in</span> sent.ents], sep=<span class="hljs-string">'\n'</span>)<font></font>
stanza_nlp_ru(russian_text)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output: </font><font style="vertical-align: inherit;">
Fast work, beautiful code, good result.</font></font><br>
<code>2020-05-15 08:01:18 INFO: Use device: cpu<br>
2020-05-15 08:01:18 INFO: Loading: tokenize<br>
2020-05-15 08:01:18 INFO: Loading: ner<br>
2020-05-15 08:01:19 INFO: Done loading processors!<br>
entity:  type: LOC<br>
entity:   type: LOC<br>
entity:  type: PER<br>
entity: 2107 type: MISC<br>
entity: 47 type: MISC<br>
entity: 24 type: MISC<br>
entity:    type: PER<br>
entity: - type: LOC<br>
entity: .  type: LOC<br>
entity:  type: LOC<br>
entity:  type: LOC<br>
entity:   type: PER<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allennlp</font></font></h3><br>
<img src="https://raw.githubusercontent.com/allenai/allennlp/master/docs/img/allennlp-logo-dark.png" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Library for research, built on PyTorch / </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the one hand, simple architecture and fast speed, on the other hand, developers are constantly changing something in the architecture, which affects the work of the library as a whole.</font></font><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> allennlp.predictors.predictor <span class="hljs-keyword">import</span> Predictor
<span class="hljs-keyword">import</span> allennlp_models.ner.crf_tagger<font></font>
predictor = Predictor.from_path(<span class="hljs-string">"https://storage.googleapis.com/allennlp-public-models/ner-model-2020.02.10.tar.gz"</span>)<font></font>
allen_result = predictor.predict(<font></font>
  sentence=english_text<font></font>
)<font></font>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> zip(allen_result[<span class="hljs-string">'tags'</span>], allen_result[<span class="hljs-string">'words'</span>]):
    <span class="hljs-keyword">if</span> (i[<span class="hljs-number">0</span>]) != <span class="hljs-string">'O'</span>:<font></font>
      print(i)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
('U-MISC', 'Indian') ('U-MISC', ' </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PHP') </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
('U-MISC', 'Laravel') </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
('U-MISC', 'Codeigniter') </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
('B- ORG ',' SAP ') </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(' L-ORG ',' FICO ') </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The module works quickly, but the result is unacceptably poor.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hanlp</font></font></h3><br>
<img src="https://repository-images.githubusercontent.com/24976755/b76ee080-2f44-11ea-9928-4e6109d3fd79" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HanLP is one of the open source libraries from developers from China. </font><font style="vertical-align: inherit;">A smart, well-developed, active project, which, it seems to me, will find its niche beyond the borders of the Celestial Empire. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NLP library for researchers and companies created on TensorFlow 2.0. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HanLP comes with pre-prepared models for different languages, including English, Chinese and many others. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The only problem is the quality of the output "jumps" after each update of the library.</font></font><br>
<pre><code class="python hljs">recognizer = hanlp.load(hanlp.pretrained.ner.MSRA_NER_BERT_BASE_ZH)<font></font>
recognizer([list(<span class="hljs-string">'‰∏äÊµ∑ÂçéÂÆâÂ∑•‰∏öÔºàÈõÜÂõ¢ÔºâÂÖ¨Âè∏Ëë£‰∫ãÈïøË∞≠Êó≠ÂÖâÂíåÁßò‰π¶Âº†ÊôöÈúûÊù•Âà∞ÁæéÂõΩÁ∫ΩÁ∫¶Áé∞‰ª£Ëâ∫ÊúØÂçöÁâ©È¶ÜÂèÇËßÇ„ÄÇ'</span>),<font></font>
                list(<span class="hljs-string">'Ëê®ÂìàÂ§´ËØ¥Ôºå‰ºäÊãâÂÖãÂ∞ÜÂêåËÅîÂêàÂõΩÈîÄÊØÅ‰ºäÊãâÂÖãÂ§ßËßÑÊ®°ÊùÄ‰º§ÊÄßÊ≠¶Âô®ÁâπÂà´ÂßîÂëò‰ºöÁªßÁª≠‰øùÊåÅÂêà‰Ωú„ÄÇ'</span>)])
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output:</font></font><br>
<code> <br>
[[('‰∏äÊµ∑ÂçéÂÆâÂ∑•‰∏öÔºàÈõÜÂõ¢ÔºâÂÖ¨Âè∏', 'NT', 0, 12), ('Ë∞≠Êó≠ÂÖâ', 'NR', 15, 18),<br>
 ('Âº†ÊôöÈúû', 'NR', 21, 24),<br>
 ('ÁæéÂõΩ', 'NS', 26, 28),<br>
 ('Á∫ΩÁ∫¶Áé∞‰ª£Ëâ∫ÊúØÂçöÁâ©È¶Ü', 'NS', 28, 37)],<br>
 [('Ëê®ÂìàÂ§´', 'NR', 0, 3),<br>
 ('‰ºäÊãâÂÖã', 'NS', 5, 8),<br>
 ('ËÅîÂêàÂõΩÈîÄÊØÅ‰ºäÊãâÂÖãÂ§ßËßÑÊ®°ÊùÄ‰º§ÊÄßÊ≠¶Âô®ÁâπÂà´ÂßîÂëò‰ºö', 'NT', 10, 31)]]</code><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> hanlp<font></font>
tokenizer = hanlp.utils.rules.tokenize_english<font></font>
testing = tokenizer(<span class="hljs-string">'Need SAP FICO consultant for support project needs to be work on 6 months on FI AREAWe'</span>)<font></font>
recognizer = hanlp.load(hanlp.pretrained.ner.CONLL03_NER_BERT_BASE_UNCASED_EN)<font></font>
recognizer(testing)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output: </font><font style="vertical-align: inherit;">
For English, the result is unstable, but, this is solved using the tokenizer from NLTK.</font></font><br>
<code>[('SAP FICO', 'ORG', 1, 3)]<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PullEnti</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C # library for NER in Russian. </font><font style="vertical-align: inherit;">In 2016, she won first place in the factRuEval-2016 competition. </font><font style="vertical-align: inherit;">In 2018, the author ported the code to Java and Python. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Probably the prettiest solution for the Russian language. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quickly, deeply, with attention to detail. </font><font style="vertical-align: inherit;">The decision is rule based, which naturally limits its development, but its autonomy, speed and results allow us to hope for the development of the project. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is a python-wrapper for the library, although it looks ‚Äúabandoned‚Äù.</font></font><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> pullenti_wrapper.processor <span class="hljs-keyword">import</span> (<font></font>
    Processor,<font></font>
    MONEY,<font></font>
    URI,<font></font>
    PHONE,<font></font>
    DATE,<font></font>
    KEYWORD,<font></font>
    DEFINITION,<font></font>
    DENOMINATION,<font></font>
    MEASURE,<font></font>
    BANK,<font></font>
    GEO,<font></font>
    ADDRESS,<font></font>
    ORGANIZATION,<font></font>
    PERSON,<font></font>
    MAIL,<font></font>
    TRANSPORT,<font></font>
    DECREE,<font></font>
    INSTRUMENT,<font></font>
    TITLEPAGE,<font></font>
    BOOKLINK,<font></font>
    BUSINESS,<font></font>
    NAMEDENTITY,<font></font>
    WEAPON,<font></font>
)<font></font>
<font></font>
processor = Processor([PERSON, ORGANIZATION, GEO, DATE, MONEY])<font></font>
text = russian_text<font></font>
result = processor(text)<font></font>
result.graph<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output:</font></font><img src="https://drive.google.com/uc?export=download&amp;confirm=no_antivirus&amp;id=17XRP-PCNMY7UDOyyekzswdupa6O0zBwf" alt="image"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Natasha</font></font></h3><br>
<img src="https://raw.githubusercontent.com/natasha/natasha-logos/master/natasha.svg" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Natasha, this seems to be one of the main NLP projects for the Russian language. </font><font style="vertical-align: inherit;">It has a long history, and began with a rule based solution that was developed through the popular Yargy Parser, and now solves the main NLP tasks for the Russian language: tokenization, sentence segmentation, lemmatization, phrase normalization, parsing, NER-tagging, fact extraction.</font></font><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> natasha <span class="hljs-keyword">import</span> (<font></font>
    Segmenter,<font></font>
    MorphVocab,<font></font>
    <font></font>
    NewsEmbedding,<font></font>
    NewsMorphTagger,<font></font>
    NewsSyntaxParser,<font></font>
    NewsNERTagger,<font></font>
    <font></font>
    PER,<font></font>
    NamesExtractor,<font></font>
<font></font>
    Doc<font></font>
)<font></font>
<font></font>
segmenter = Segmenter()<font></font>
morph_vocab = MorphVocab()<font></font>
<font></font>
emb = NewsEmbedding()<font></font>
morph_tagger = NewsMorphTagger(emb)<font></font>
syntax_parser = NewsSyntaxParser(emb)<font></font>
ner_tagger = NewsNERTagger(emb)<font></font>
<font></font>
names_extractor = NamesExtractor(morph_vocab)<font></font>
<font></font>
doc = Doc(russian_text)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output: </font><font style="vertical-align: inherit;">
The result, unfortunately, is not stable, unlike the custom rules of Yargy Parser from the same developer, however, the project is actively developing, and shows a decent result for commercial use.</font></font><br>
<code>   110     , <br>
 LOC‚îÄ‚îÄ‚îÄ <br>
    .      <br>
  https://www.sobyanin.ru/  , 1 .   <br>
  .51 (   : <br>
LOC‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ <br>
 , )  ?   <br>
 ORG PER‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ <br>
  2107   47   <br>
  24,    . <br>
 ORG‚îÄ‚îÄ <br>
 c     <br>
 PER‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br>
   10  1970 ,    <br>
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ <br>
 -, . ,  5/1 8 000 ( )<br>
 LOC‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ PER‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ <br>
  00         <br>
 LO <br>
       .   <br>
          <br>
 PER‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ <br>
 - .</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ner-d</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The last module is a private project, not particularly popular, built on top of Spacy and Thinc and, nevertheless, worthy of attention to the approach chosen to the architecture (emphasis on ease of use).</font></font><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> nerd <span class="hljs-keyword">import</span> ner<font></font>
doc_nerd_d = ner.name(english_text)<font></font>
text_label = [(X.text, X.label_) <span class="hljs-keyword">for</span> X <span class="hljs-keyword">in</span> doc_nerd_d]<font></font>
print(text_label)<font></font>
</code></pre> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Output: </font><font style="vertical-align: inherit;">
Of all the projects, the most ‚Äúbalanced‚Äù and convenient, with acceptable results and ease of use seems to me to be Stanza from StanfordNlp - the work of most languages ‚Äã‚Äãout of the box, high-quality academic study and support of the scientific community of the university itself makes the project the most promising, in my opinion . </font><font style="vertical-align: inherit;">
Next time I will share my experience about working with "closed" solutions and the proposed API for processing natural language. </font><font style="vertical-align: inherit;">
All Code Available by </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Google Colab</font></a></font><br>
<code>[('7 days', 'DATE'), ('Indian', 'NORP'), ('PHP', 'ORG'), ('Laravel', 'GPE'), ('daily 4 hours', 'DATE'), ('Monday 27th Jan.', 'DATE'), ('Need SAP FICO', 'PERSON'), ('6 months', 'DATE'), ('10 days', 'DATE'), ('noon', 'TIME'), ('tomorrow', 'DATE')]<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en502352/index.html">The digest of interesting materials for the mobile developer # 344 (May 12 - 17)</a></li>
<li><a href="../en502354/index.html">IaaS providers are fighting for the European market - discussing the situation and industry events</a></li>
<li><a href="../en502358/index.html">Implementation of MVP based on ApplicationController and IoC in a WinForms application</a></li>
<li><a href="../en502360/index.html">Grizzly Discharges or Super Drill</a></li>
<li><a href="../en502362/index.html">Learning Event Tracing for Windows: Theory and Practice</a></li>
<li><a href="../en502368/index.html">We pump the treadmill</a></li>
<li><a href="../en502370/index.html">Putting the game "Snake" on the breadboard. Part 1: state machines</a></li>
<li><a href="../en502372/index.html">Problems and principles of customization of the boxed version of Bitrix24</a></li>
<li><a href="../en502374/index.html">FT8 Communication Protocol - How It Works</a></li>
<li><a href="../en502380/index.html">Celery + asyncio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>