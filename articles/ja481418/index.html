<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏴󠁧󠁢󠁳󠁣󠁴󠁿 📷 🙌🏽 ビデオコーデックの仕組み。パート1.基本 🏞️ 🕺🏿 👇</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="パート2：ビデオコーデックのしくみ
 
 すべてのラスターイメージは、2次元マトリックスとして表すことができます。色については、画像を3次元マトリックスの形式で見ることでアイデアを生み出すことができます。追加の測定値を使用して各色のデータを保存します。
 
 最終的な色をいわゆる原色（赤、緑、青）で...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ビデオコーデックの仕組み。パート1.基本</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/edison/blog/481418/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート2：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビデオコーデックのしくみ</font></font></a></h3><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのラスター</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イメージ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2次元マトリックス</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">として表すことができます</font><font style="vertical-align: inherit;">。色については、画像を</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3次元マトリックスの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">形式で見ることでアイデアを生み出すことができます</font><font style="vertical-align: inherit;">。追加の測定値を使用して各色のデータを保存します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最終的な色をいわゆる原色（赤、緑、青）では、3次元マトリックスで3つの平面を決定します。1つは赤、2つ目は緑、最後は青です。</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img width="746" height="235" src="https://habrastorage.org/webt/gz/rx/7q/gzrx7qp8p_kzdeb2cat-raur3sk.png" alt="3D RGBマトリックス" title="3D RGBマトリックス"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この行列の各点をピクセル（画像要素）と呼びます。</font><font style="vertical-align: inherit;">各ピクセルには、各色の強度情報（通常は数値の形式）が含まれています。</font><font style="vertical-align: inherit;">たとえば、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">赤いピクセル</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、緑が0、青が0、赤が最大であることを意味します。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ピンク色のピクセル</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、3色の組み合わせを使用して形成できます。</font><font style="vertical-align: inherit;">0から255の数値範囲を使用して、ピンク色のピクセルは以下のように定義される</font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">赤= 255</font></font></b></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">緑= 192、</font></font></b></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">青= 203</font></font></b></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><a name="habracut"></a><blockquote><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="EDISONソフトウェア-ウェブ開発"><img align="left" width="153" height="75" src="https://habrastorage.org/webt/w0/zl/to/w0zltoxvysbr0yeinstkfvw1wbg.png" alt="EDISONソフトウェア-ウェブ開発"></a><br clear="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事はEDISONのサポートを得て公開されました。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ビデオ監視、ストリーミングビデオ</font></a><font style="vertical-align: inherit;">、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">手術室でのビデオ録画の</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">アプリケーション</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を開発してい</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></blockquote><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代替の色分け手法</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
画像を構成する色を表現するために、他にも多くのモデルがあります。</font><font style="vertical-align: inherit;">たとえば、RGBモデルを使用するときに必要な3つではなく、各ピクセルを表すために1バイトのみが必要なインデックス付きパレットを使用できます。</font><font style="vertical-align: inherit;">このモデルでは、3Dマトリックスの代わりに2Dマトリックスを使用して各色を表すことができます。</font><font style="vertical-align: inherit;">これはメモリを節約しますが、色が少なくなります。</font></font><br>
<br>
<img width="479" height="120" src="https://habrastorage.org/webt/yx/pp/nb/yxppnbcixbaszve4ixpqzbvsrdy.png" alt="NESパレット" title="NESパレット"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RGB</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、下の写真を見てください。最初の面は完全に塗装されています。その他は、赤、緑、青の平面です（対応する色の強度はグレースケールで表示されます）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n1/_6/uc/n1_6uc9on4ze-fixad_o7ijvl1u.png" alt="RGBチャネル強度" title="RGBチャネル強度"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オリジナルの赤の色合いは、2番目の人の最も明るい部分が観察されるのと同じ場所にあることがわかります。ブルーの貢献は主にマリオ（最後の顔）の目と彼の服の要素でのみ見ることができます。 3つのカラープレーンすべての寄与が最も少ない場所（画像の最も暗い部分）に注意してください-これはマリオの口ひげです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各色の強度を保存するには、特定の数のビットが必要です-この値は</font><b><font style="vertical-align: inherit;">ビット深度</font></b><font style="vertical-align: inherit;">と呼ばれ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 1つのカラープレーンで8ビットが（0〜255の値に基づいて）費やされているとしましょう。次に、24ビットの色深度があります（8ビット* 3 R / G / Bプレーン）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
画像のもう1つのプロパティは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解像度です</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは、1次元のピクセル数です。それはしばしば呼ばれる</font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">幅×高さ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4で例示画像4において以下のように</font></font><br>
<img width="401" height="185" src="https://habrastorage.org/webt/5q/2i/so/5q2isolirmyfjxl-hb7m4hj_7au.png" alt="画像解像度" title="画像解像度"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、我々は画像を扱う場合に対処することを別のプロパティ/ビデオは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アスペクト比</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の画像またはピクセルの幅と高さとの間の通常の比例関係を示し、。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
映画または画像が16 x 9であると彼らが言うとき、それは通常</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディスプレイの縦横比</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DAR</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示アスペクト比</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">しかし、時々 、個々の画素の異なる形状が存在し得る-このケースでは話している</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">画素の比率</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PAR</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -から</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ピクセル縦横比</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<img width="536" height="254" src="https://habrastorage.org/webt/xg/mb/gp/xgmbgpydyzkiraifaxf9ltiqkxq.png" alt="アスペクト比を表示" title="アスペクト比を表示"><br>
<br>
<img width="725" height="318" src="https://habrastorage.org/webt/sg/ti/eq/sgtieqvisg6eu5oaddpmfxmrxnm.png" alt="ピクセル縦横比" title="ピクセル縦横比"><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ホストへの注意：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DVD</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DAR 4</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
x </font><b><font style="vertical-align: inherit;">3に</font></b><font style="vertical-align: inherit;">対応し</font><font style="vertical-align: inherit;">ます</font><b><font style="vertical-align: inherit;">。DVD</font></b><font style="vertical-align: inherit;">の実際の解像度は704x480ですが、PARの値は10:11（704x10 / 480x11）であるため、4：3のアスペクト比を維持します。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして最後に、我々は定義することができ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ビデオを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のシーケンスとして</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n個</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の期間にわたってフレーム</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">時間</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加の次元と考えることができ、。</font><font style="vertical-align: inherit;">及び</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、フレームレートまたは秒当たりのフレーム（の数である</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FPS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -から</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">秒当たりのフレーム数</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<img width="710" height="240" src="https://habrastorage.org/webt/67/kd/us/67kdus1r36qphfoi1jqqt9uinpy.png" alt="ビデオ" title="ビデオ"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ビデオの表示に必要な1秒あたりのビット数は、その</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">転送速度</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビットレート）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビットレート=幅*高さ*ビット深度* 1秒あたりのフレーム数</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、30フレーム/秒、24ビット/ピクセル、480x240解像度、82,944,000ビット/秒、つまり82,944 Mbps（30x480x240x24）のビデオの場合、これは圧縮方法を使用しない場合に必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
伝送速度</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がほぼ一定</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">である場合、それは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一定のビットレート</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CBR- </font></font></b><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一定のビットレート</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">と呼ばれ</font><font style="vertical-align: inherit;">ます。ただし、この場合、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可変ビットレート</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VBR- </font></font></b><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可変ビットレート</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">と呼ばれることもあります</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このグラフは、完全に暗いフレームの場合にビット数が多すぎない場合のVBRの制限を示しています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5l/sb/v-/5lsbv-4t7iucyksv39yyqgqmggs.png" alt="限定VBR" title="限定VBR"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当初、エンジニアは、追加の帯域幅を使用せずに、ビデオディスプレイのフレームレートを2倍にする方法を開発しました。この方法は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターレースビデオ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。基本的に、最初の「フレーム」で画面の半分を送信し、次の「フレーム」で残りの半分を送信します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、シーンの視覚化は主に</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プログレッシブスキャン技術</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して行われてい</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。これは、各フレームのすべての線が順番に描かれた動画を表示、保存、または送信する方法です。</font></font><br>
<br>
<img width="747" height="299" src="https://habrastorage.org/webt/bp/z5/u8/bpz5u84cyduvkd6izoangniaevs.png" alt="インターレースおよびプログレッシブ" title="インターレースおよびプログレッシブ"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上手！</font><font style="vertical-align: inherit;">これで、画像がデジタル形式でどのように表現されるか、色がどのように配置されるか、伝送速度が一定（CBR）または可変（VBR）の場合にビデオを表示するために1秒あたり何ビットを費やすかがわかりました。</font><font style="vertical-align: inherit;">特定のフレームレートを使用した特定の解像度については、インターレースビデオ、PAR、その他の用語など、他の多くの用語に精通しています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">冗長性の削除</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
圧縮なしの映像は正常に使用できないことが知られています。</font><font style="vertical-align: inherit;">720pの解像度と毎秒30フレームの頻度の1時間ごとのビデオは、278 GBを占有します。</font><font style="vertical-align: inherit;">この値に到達するには、1280 x 720 x 24 x 30 x 3600（幅、高さ、ピクセルあたりのビット数、FPS、および秒単位の時間）を掛けます。</font><font style="vertical-align: inherit;">DEFLATE（PKZIP、Gzip、PNGで</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用）などの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロスレス圧縮アルゴリズムを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用しても、必要な帯域幅を十分に削減できません。</font><font style="vertical-align: inherit;">ビデオを圧縮する他の方法を探す必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これには、私たちのビジョンの機能を使用できます。</font><font style="vertical-align: inherit;">色よりも明るさを区別します。</font><font style="vertical-align: inherit;">ビデオは、時間の経過とともに繰り返される一連の連続した画像です。</font><font style="vertical-align: inherit;">同じシーンの隣接するフレーム間に小さな違いがあります。</font><font style="vertical-align: inherit;">さらに、各フレームには、同じ（または類似した）色を使用する多くの領域が含まれています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">色、明るさ、そして私たちの目</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの目は色よりも明るさに敏感です。</font><font style="vertical-align: inherit;">あなたはこの写真を見て自分の目で確かめることができます。</font></font><br>
<br>
<div style="text-align:center;"><img width="637" height="239" src="https://habrastorage.org/webt/gj/00/kv/gj00kvz32okevvthxqf9_jqi9ng.png" alt="明るさ対色" title="明るさ対色"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
画像の左半分で四角</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">色</font><font style="vertical-align: inherit;">が実際に同じである</font><font style="vertical-align: inherit;">ことがわからない場合</font><font style="vertical-align: inherit;">、これは正常です。</font><font style="vertical-align: inherit;">私たちの脳は私たちに、色よりもキアロスクーロにもっと注意を払うように強いています。</font><font style="vertical-align: inherit;">マークされた四角の間の右側には、同じ色のジャンパーがあります。したがって、私たち（つまり、脳）は、実際には同じ色があることを簡単に判断できます。</font></font><blockquote>  ()    .  —  ,    .        .    120    6  .<br>
<br>
           (  ,    ,   ).  ,  ,   ,         .     ,     : S- ( ), M- ( )  L- ( ).<br>
<br>
      (),   (),   ,          ,  .<br>
<br>
<img width="672" height="373" src="https://habrastorage.org/webt/8z/ul/yl/8zulylhy-pkitzl5mubbzdcbswm.jpeg" alt="アイメイク" title="アイメイク"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コントラスト感度関数</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実験心理学や他の多くの分野の研究者は、人間の視覚に関する多くの理論を発展させてきました。</font><font style="vertical-align: inherit;">そして、そのうちの1つは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コントラスト感度関数</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それらは空間的および時間的照明に関連付けられています。</font><font style="vertical-align: inherit;">要するに、それは観察者がそれらを見る前にいくつの変更が必要かについてです。</font><font style="vertical-align: inherit;">「機能」という単語の複数形に注意してください。</font><font style="vertical-align: inherit;">これは、白黒の画像だけでなく、色のコントラストにも対応できる感度関数を測定できるためです。</font><font style="vertical-align: inherit;">これらの実験の結果は、ほとんどの場合、私たちの目は色よりも明るさに敏感であることを示しています。</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">画像の明るさに敏感であることがわかっているので、この事実を試してみることができます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カラーモデル</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RGBスキームを使用してカラー画像を処理する方法を少し理解しました。</font><font style="vertical-align: inherit;">他のモデルがあります。</font><font style="vertical-align: inherit;">輝度を彩度から分離するモデルがあり、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">YCbCr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">として知られてい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">ちなみに、同様の分離を行うモデルは他にもありますが、ここではこれだけを考えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このカラーモデルでは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は明るさの表現であり、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cb</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（飽和青）と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（飽和赤）の</font><font style="vertical-align: inherit;">2つのカラーチャネルが使用されます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">YCbCrはRGBから取得でき、逆変換も可能です。</font><font style="vertical-align: inherit;">このモデルを使用して、以下に示すように、フルカラー画像を作成できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_y/ee/3x/_yee3xnjjk7xq1mpw_bvndfsnru.png" alt="ycbcrの例" title="ycbcrの例"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">YCbCrとRGB間の変換</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
誰かが反対するでしょう：緑が使用されていない場合、どのようにしてすべての色を取得することができますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この質問に答えるには、RGBをYCbCrに変換します。</font><b><font style="vertical-align: inherit;">ITU-R</font></b><font style="vertical-align: inherit;">ユニットで推奨されて</font><b><font style="vertical-align: inherit;">いる</font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BT.601規格</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">採用されている係数を使用し</font><font style="vertical-align: inherit;">ます。このユニットは、デジタルビデオ規格を定義します。例：4Kとは？フレームレート、解像度、カラーモデルはどのようにする必要がありますか？</font><font style="vertical-align: inherit;">
まず、明るさを計算します。 ITUによって提案された定数を使用して、RGB値を置き換えます。</font><b><font style="vertical-align: inherit;">Y</font></b><font style="vertical-align: inherit;"> = 0.299 </font><b><font style="vertical-align: inherit;">R</font></b><font style="vertical-align: inherit;"> + 0.587 </font><b><font style="vertical-align: inherit;">G</font></b><font style="vertical-align: inherit;"> + 0.114 </font><b><font style="vertical-align: inherit;">B</font></b><font style="vertical-align: inherit;"> 
我々は明るさを取得した後、我々は、青色及び赤色を分離：</font><b><font style="vertical-align: inherit;">Cbの</font></b><font style="vertical-align: inherit;"> = 0.564（</font><b><font style="vertical-align: inherit;">B</font></b><font style="vertical-align: inherit;"> -</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b> <br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 0.713（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、YCbCrを使用して変換してグリーンにすることもできます</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。R</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + 1.402 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr </font></font></b><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + 1.772 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cb </font></font></b><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">G</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -0.344 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cb</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -0.714 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
通常は（モニター、テレビ、画面など）は、RGBモデルのみを使用します。</font><font style="vertical-align: inherit;">ただし、このモデルはさまざまな方法で編成できます。</font></font><br>
<br>
<img width="550" height="550" src="https://habrastorage.org/webt/rq/is/by/rqisbywjfks_tvcpk7liyvyaiqw.jpeg" alt="ピクセルジオメトリ" title="ピクセルジオメトリ"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カラーダウンサンプリング</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明るさと色の組み合わせとして表示される画像では、情報を選択的に削除すると、人間の視覚系の感度を色よりも明るさに対して高くできます。カラーダウンサンプリングは、明るさよりも色の解像度を低くして画像をエンコードする方法です。</font></font><br>
<br>
<div style="text-align:center;"><img width="715" height="361" src="https://habrastorage.org/webt/ce/ee/9_/ceee9_x9vh8b_vpklek7rnhvoz0.png" alt="ycbcrサンプリング解像度" title="YCBCRサブサンプリング権限"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
色の解像度を下げることはどの程度許容できますか？！解決とマージの処理方法を説明するスキームがすでにいくつかあることがわかります</font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（最終的な色= Y + Cb + Cr）。</font></font></nobr><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これらのスキームは、として知られている</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サブサンプリングシステム</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と3倍の比として表される- </font><nobr><font style="vertical-align: inherit;">：</font></nobr><font style="vertical-align: inherit;"> </font><nobr><b><font style="vertical-align: inherit;">X</font></b></nobr><nobr><font style="vertical-align: inherit;">：</font></nobr><nobr><b><font style="vertical-align: inherit;">Y</font></b></nobr><font style="vertical-align: inherit;">、輝度・色差信号のサンプル数を決定します。</font><b><font style="vertical-align: inherit;">a</font></b><font style="vertical-align: inherit;">は水平サンプル標準（通常4）です</font><b><font style="vertical-align: inherit;">。x</font></b><font style="vertical-align: inherit;">はピクセルの最初の行のカラーサンプルの数（</font><b><font style="vertical-align: inherit;">a</font></b><font style="vertical-align: inherit;">に対する水平解像度</font><font style="vertical-align: inherit;">）です</font><b><font style="vertical-align: inherit;">。y</font></b><font style="vertical-align: inherit;">はピクセルの最初の行と2番目の行の間のカラーサンプルの変化の数です。</font></font><nobr><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b></nobr><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例外は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0で</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、4 x 4の輝度解像度ブロックごとに1つのカラーサンプルを提供します。</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最新のコーデックで使用される一般的なスキーム：</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ダウンサンプリングなし）</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b></li>
</ul><blockquote><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">YCbCr 4：2：0-マージの例</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、YCbCr 4：2：0を使用した結合画像フラグメントです。</font><font style="vertical-align: inherit;">ピクセルあたり12ビットしか使用しないことに注意してください。</font></font><br>
<br>
<div style="text-align:center;"><img width="555" height="315" src="https://habrastorage.org/webt/yq/fj/oi/yqfjoiza1glbn0rcj4nl0gfrsrm.png" alt="YCbCr 4：2：0" title="YCbCr 4：2：0"></div></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、主なタイプのカラーサブサンプリングによってエンコードされた同じ画像がどのように見えるかです。</font><font style="vertical-align: inherit;">最初の行は最後のYCbCrで、下の行はカラー解像度を示しています。</font><font style="vertical-align: inherit;">品質のわずかな損失を考えると、非常にまともな結果です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q5/g_/-f/q5g_-f0w41riagjrnt3msc0a-us.jpeg" alt="クロマサブサンプリングの例" title="クロマサブサンプリングの例"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
720pの解像度と30フレーム/秒の1時間のビデオファイルに対して278 GBのストレージスペースを数えたことを思い出してください。</font><font style="vertical-align: inherit;">YCbCr 4：2：0を使用すると、このサイズは半分（139 GB）減少します。</font><font style="vertical-align: inherit;">これまでのところ、それはまだ許容できる結果からほど遠いです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
YCbCrヒストグラムは、FFmpegを使用して自分で取得できます。</font><font style="vertical-align: inherit;">この画像では、赤が青よりも優勢で、ヒストグラム自体にはっきりと表示されています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gj/wa/lr/gjwalry6l_oeqssuishxlxtjrae.png"><blockquote><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">色、明るさ、色域-ビデオレビュー</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この素晴らしいビデオを見ることをお勧めします。</font><font style="vertical-align: inherit;">これは明るさが何であるかを説明し、実際、すべてのポイントは</font><font style="vertical-align: inherit;">明るさと色の</font><font style="vertical-align: inherit;">上の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上に</font><font style="vertical-align: inherit;">配置</font><font style="vertical-align: inherit;">されます。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Ymt47wXUDEU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></blockquote><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フレームタイプ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
先に進みます。</font><font style="vertical-align: inherit;">時間の冗長性を排除してみましょう。</font><font style="vertical-align: inherit;">しかし、最初に、いくつかの基本的な用語を定義しましょう。</font><font style="vertical-align: inherit;">1秒あたり30フレームの映画があるとします。最初の4フレームは次の</font></font><br>
<br>
<img width="64" height="64" src="https://habrastorage.org/webt/iv/6n/5x/iv6n5xrkspmna4ysdwmx-geaavg.png" alt="ボール1" title="ボール1"> <img width="64" height="64" src="https://habrastorage.org/webt/yx/pm/jb/yxpmjbgftbludyfwblix9e51mie.png" alt="ボール2" title="ボール2"> <img width="64" height="64" src="https://habrastorage.org/webt/gp/wk/no/gpwknos5yniugafyfj-hk_a1pkk.png" alt="ボール3" title="ボール3"> <img width="64" height="64" src="https://habrastorage.org/webt/-k/22/81/-k228175bwr2raujpfa-72p7hnm.png" alt="ボール4" title="ボール4"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
とおりです。たとえば、フレームごとに変化しない青色の背景など、フレームに多くの繰り返しが見られます。</font><font style="vertical-align: inherit;">この問題を解決するために、3種類のフレームとして抽象的に分類できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iフレーム（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ntroフレーム）</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Iフレーム（リンクフレーム、キーフレーム、内部フレーム）は自律型です。</font><font style="vertical-align: inherit;">何を視覚化する必要があるかに関係なく、Iフレームは実際には静的な写真です。</font><font style="vertical-align: inherit;">通常、最初のフレームはIフレームですが、最初のフレームから遠く離れた場所で定期的にIフレームを観察します。</font></font><br>
<br>
<img width="64" height="64" src="https://habrastorage.org/webt/iv/6n/5x/iv6n5xrkspmna4ysdwmx-geaavg.png" alt="ボール1" title="ボール1"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pフレーム（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">予測フレーム）</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pフレーム（予測フレーム）は、ほとんどの場合、現在の画像を前のフレームを使用して再生できるという事実を利用しています。</font><font style="vertical-align: inherit;">たとえば、2番目のフレームでは、唯一の変更はフォワードボールです。</font><font style="vertical-align: inherit;">フレーム1をわずかに変更するだけでフレーム2を取得できます。これらのフレーム間の違いのみを使用します。</font><font style="vertical-align: inherit;">フレーム2を作成するには、その前のフレーム1を参照してください。</font></font><br>
<br>
<img width="64" height="64" src="https://habrastorage.org/webt/iv/6n/5x/iv6n5xrkspmna4ysdwmx-geaavg.png" alt="ボール1" title="ボール1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">←</font></font><img width="64" height="64" src="https://habrastorage.org/webt/3o/-a/-_/3o-a-_o0jmv5vrg6wu2jmma0xpo.png" alt="ボール1" title="ボール1"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bフレーム（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> i予測フレーム）</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに良い圧縮を提供するために、過去だけでなく将来のフレームへのリンクについてはどうですか？</font><font style="vertical-align: inherit;">これは基本的にBフレーム（双方向フレーム）です。</font></font><br>
<br>
<img width="64" height="64" src="https://habrastorage.org/webt/iv/6n/5x/iv6n5xrkspmna4ysdwmx-geaavg.png" alt="ボール1" title="ボール1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">← </font></font><img width="64" height="64" src="https://habrastorage.org/webt/3o/-a/-_/3o-a-_o0jmv5vrg6wu2jmma0xpo.png" alt="ボール1" title="ボール1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">→</font></font><img width="64" height="64" src="https://habrastorage.org/webt/gp/wk/no/gpwknos5yniugafyfj-hk_a1pkk.png" alt="ボール3" title="ボール3"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中間引き出し</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのフレームタイプは、最高の圧縮を提供するために使用されます。</font><font style="vertical-align: inherit;">これがどのように発生するかについては、次のセクションで説明します。</font><font style="vertical-align: inherit;">一方、Iフレームはメモリの点で最も「高価」であり、Pフレームははるかに安価ですが、Bフレームはビデオにとって最も収益性の高いオプションです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kb/tq/iv/kbtqivaoykzul7air0x-bi4p0nk.png" alt="フレームタイプの例" title="フレームタイプの例"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一時的な冗長性（フレーム間予測）</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
繰り返しを最小限に抑える機会があるものを見てみましょう。このタイプの冗長性は、相互予測の方法を使用して解決できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは、フレーム0と1の配列をコードする可能な限り少ないビットとして過ごすことにしようとする</font></font><br>
<br>
<img width="489" height="249" src="https://habrastorage.org/webt/_r/or/uu/_roruusxx8nchbiamc6hxqxv7ns.png" alt="オリジナルフレーム" title="オリジナルフレーム"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我々はできる</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引く</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我々はそれだけと、前のフレームとの間の差異を使用し、我々はフレーム1を取得し、フレーム0から、ちょうど減算フレーム1を、実際には、我々は唯一の余りを符号化します。</font></font><br>
<br>
<img width="334" height="330" src="https://habrastorage.org/webt/lz/1q/vm/lz1qvmad3_cjsaulbo4dy-qfwuc.png" alt="デルタフレーム" title="デルタフレーム"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、さらに少ないビットを使用するさらに良い方法があると私が言ったらどうですか？！まず、フレーム0をブロックの明確なグリッドに分割しましょう。次に、フレーム0のブロックとフレーム1のブロックを比較します。つまり、フレーム間の動きを評価します。</font></font><blockquote>   — <b>  </b><br>
<br>
             ,   (    ,  <i></i>     ,     ,    .    —    ,  ,     ,    ).       .            ,      .</blockquote><img width="489" height="249" src="https://habrastorage.org/webt/mm/0n/r3/mm0nr3fmjnihn1xgvgeip8lnqcy.png" alt="デルタフレーム" title="デルタフレーム"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
評価プロセスでは、ボールが</font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 0、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 25）</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 6、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 26）</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">移動したことがわかり</font><font style="vertical-align: inherit;">ます</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。x</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値がモーションベクトルを決定します。ビットを保存するために実行できるもう1つの手順は、ブロックの最後の位置と予測された位置の間の動きベクトルの差のみをエンコードすることです。そのため、最終的な動きベクトルは</font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（x = 6-0 = 6、y = 26-25 = 1）になります。</font></font></nobr><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
実際の状況では、このボールは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n個の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブロックに</font><font style="vertical-align: inherit;">分割され</font><font style="vertical-align: inherit;">ますが、問題の本質は変わりません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フレーム内のオブジェクトは3次元で移動するため、ボールが移動すると、視覚的に小さくなります（ビューアに向かって移動すると、ボールが大きくなります）。</font><font style="vertical-align: inherit;">ブロック間で完全な一致が存在しないことは正常です。</font><font style="vertical-align: inherit;">これは、私たちの評価と実際の状況を組み合わせたビューです。</font></font><br>
<br>
<img width="374" height="361" src="https://habrastorage.org/webt/g2/0v/lf/g20vlfrxrjfd2z5jopsrwtjeayu.png" alt="動き推定" title="動き推定"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、モーション推定を適用すると、フレーム間のデルタを計算するより簡単な方法を使用する場合よりも、コーディング用のデータが著しく少なくなることがわかります。</font></font><br>
<br>
<img width="489" height="249" src="https://habrastorage.org/webt/al/yh/um/alyhumga0r2vz1sduqqpbbfwsf0.png" alt="デルタに対する動きの推定" title="モーション推定デルタ"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実際の動き補償はどのようになるか</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この手法は、すべてのブロックにすぐに適用されます。</font><font style="vertical-align: inherit;">多くの場合、条件付き移動ボールは一度にいくつかのブロックに分割されます。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Jupyter</font></a></font><br>
<br>
<img src="https://habrastorage.org/webt/qd/r9/zi/qdr9zittbih-suwng4vhcktrini.png" alt="実世界の動き補償" title="実世界の動き補償"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を使用して、これらの概念を自分で感じることができます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
モーションベクトルを確認するには、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ffmpeg</font></a><font style="vertical-align: inherit;">を使用して外部予測のあるビデオを作成できます</font><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Intel Video Pro Analyzerを</font></a><font style="vertical-align: inherit;"> 
使用することもできます</font><font style="vertical-align: inherit;">（有償ですが、最初の10フレームでのみ制限される無料の試用版があります）。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<img width="730" height="434" src="https://habrastorage.org/webt/8p/fz/y4/8pfzy4_x_u8rhx0e-qdwggcfz18.png" alt="ffmpegを使用したフレーム間予測（動きベクトル）" title="ffmpegによるフレーム間予測（明示的なモーション）"><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/gi/xv/2x/gixv2xsurl-vpyoqppvr_w9qtc4.png" alt="アナライザーに関するインター予測アナライザーのビデオ" title="アナライザーに関するインター予測アナライザーのビデオ"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空間的冗長性（内部予測）</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ビデオの各フレームを分析すると、相互に関連する多くの領域が見つかります。</font></font><br>
<br>
<img width="550" height="312" src="https://habrastorage.org/webt/cy/rt/wu/cyrtwua6vufuvoommyb-3ggyfu0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例を見てみましょう。このシーンは主に青と白で構成されています。</font></font><br>
<br>
<img width="277" height="156" src="https://habrastorage.org/webt/-i/yr/8r/-iyr8rtaba0yxiwgvrp0xzhpghg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはIフレームです。前のフレームを予測に使用することはできませんが、圧縮することがわかります。赤いブロックの選択をエンコードします。彼の隣人を見ると、彼の周りにいくつかの色の傾向があることがわかります。</font></font><br>
<br>
<img width="278" height="413" src="https://habrastorage.org/webt/pi/2l/bg/pi2lbg2js6klz5_qepjcqtgevqq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フレームでは、色が垂直方向に伝播すると仮定します。つまり、未知のピクセルの色には、隣接するピクセルの値が含まれます。</font></font><br>
<br>
<img width="246" height="404" src="https://habrastorage.org/webt/wy/qe/zt/wyqezt5qtss2h37wim8itgpgobe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのような予測は間違っているかもしれません。</font><font style="vertical-align: inherit;">このため、この方法（内部予測）を適用してから、実際の値を差し引く必要があります。</font><font style="vertical-align: inherit;">これにより残差ブロックが得られ、元のブロックと比較してはるかに圧縮された行列になります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ks/at/av/ksatavivnluz7pgxmawvtgixu1y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
内部予測で練習したい場合は、ffmpegを使用してマクロブロックとその予測を含む動画を作成できます。</font><font style="vertical-align: inherit;">ブロックの各色の意味を理解するには、ffmpegのドキュメントをよく理解する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/70/pd/tq/70pdtqqlhlx-atda44tfwrygtna.png" alt="ffmpegを使用した内部予測（マクロブロック）" title="ffmpegによるフレーム間予測（明示的なモーション）"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または、インテルビデオプロアナライザーを使用することもできます（前述のように、試用版では最初の10フレームに制限がありますが、最初はこれで十分です）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_e/3x/f-/_e3xf-wuez64lr6x89oxhozl0a4.png" alt="イントラ予測Intel Video Pro Analyzer" title="インテルプロインテリジェントアナライザー"><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート2：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビデオコーデックのしくみ</font></font></a></h3><br>
<br>
<hr><hr><hr><hr><hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img align="right" width="390" height="105" src="https://habrastorage.org/webt/iq/5e/y9/iq5ey9gdaadu6njvmmj6wul03ni.png"></a><br clear="left">
<h4><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
EDISON社</font><font style="vertical-align: inherit;">のブログも</font><font style="vertical-align: inherit;">ご覧ください。</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FFmpeg libavマニュアル</font></font></b></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja481394/index.html">私たちが昔から好きだったものを新しいゲームで再現</a></li>
<li><a href="../ja481398/index.html">テスターなどのための基本的なLinuxコマンド</a></li>
<li><a href="../ja481402/index.html">QObjectクラスの子のツリー走査の遅延実装</a></li>
<li><a href="../ja481406/index.html">イローナマスクへの投資に没頭</a></li>
<li><a href="../ja481416/index.html">ミンスクでの2番目のAWSミートアップの発表（2020年2月13日）</a></li>
<li><a href="../ja481420/index.html">15の最高で最大のアイコンライブラリ</a></li>
<li><a href="../ja481424/index.html">Angularのカスタムコントロール</a></li>
<li><a href="../ja481428/index.html">プログラマー向けのゲームFuncBall</a></li>
<li><a href="../ja481430/index.html">HACリストで科学ジャーナルを復元する方法</a></li>
<li><a href="../ja481432/index.html">Pythonプログラミング用の6つのコアライブラリ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>