<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🌾 ♏️ 🙃 Bekerja dengan chip Cina ADC Hx711 💘 ☝🏽 🤝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Alasan untuk menulis posting ini adalah keinginan untuk berurusan dengan modul 24 bit delta sigma ADC converter berdasarkan chip Hx711. Konverter itu ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Bekerja dengan chip Cina ADC Hx711</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487066/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alasan untuk menulis posting ini adalah keinginan untuk berurusan dengan modul 24 bit delta sigma ADC converter berdasarkan chip Hx711. </font><font style="vertical-align: inherit;">Konverter itu sendiri dirakit dalam bentuk modul yang sudah jadi sesuai dengan sirkuit switching yang direkomendasikan oleh pabrikan (????). </font><font style="vertical-align: inherit;">Ada juga komentar tentang pengoperasian modul ini di situs web ini di blog Andrey Gerasimenko </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ADC 711 dari 3.3V- tidak percaya pada dokumentasi berbahasa Mandarin dan tidak hanya ..."</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menguji modul ini, sebuah sirkuit berbasis mikrokontroler ATmega16, modul ADC, LCD dua jalur BC1602, berdasarkan pada pengontrol HD44780, empat tombol telah dipasang. Sebagai lingkungan pengembangan, kami menggunakan program AVR Code Vision, versi 1.25.9 profesional, AVR Studio 4, Versi 4.09.0.338, programmer USB AVR JTAG, yang memungkinkan tidak hanya pemrograman kristal, tetapi juga melacak langkah demi langkah, jika perlu, pelaksanaan program dalam mikrokontroler, hampir secara real time.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dn/yi/hh/dnyihhcg8d2ckj5tzu68ae5f_cg.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sel beban buatan Tiongkok dengan batas berat maksimum 40 kg dipilih sebagai sumber sinyal untuk ADC. dan unit penyisipan sensor standar. Perlu dicatat bahwa penggunaan unit integrasi "asli" memungkinkan Anda untuk mendapatkan semua data output yang didalilkan dari tipe sel beban Single Point, model CZL A6. Jadi, pengukur regangan tipe Single Point, ketika menggunakan ukuran yang ditentukan dalam spesifikasi teknis platform untuk lokasi kargo yang ditimbang, dirancang sedemikian rupa sehingga sinyal ketidakseimbangan strain gage tidak tergantung pada posisi beban pada platform. Ini adalah sifat MEKANIK dari badan sensor: dimensi geometris, lokasi film pengukur regangan yang direkatkan, khususnya potongan “tulang” di tengah badan sensor, ukuran platform yang mempengaruhi torsi yang diterapkan pada badan sensor menentukan independensi ini.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k1/jp/zw/k1jpzwxmwwbmdko-l2o7tj_bfbc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nah, sumber terakhir adalah "GOST 29329-92. Timbangan untuk penimbangan statis. Persyaratan teknis umum. " GOST ini mendefinisikan sifat instrumen pengukur berat badan. Penting juga untuk bekerja dengan program kantor EXCEL. Saya menggunakan EXCEL 2003 XP3. Ini memungkinkan Anda untuk dengan cepat memproses hasil menggunakan metode yang sudah jadi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya harap semua informasi yang diperlukan untuk mengulangi eksperimen saya diberikan sepenuhnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang program itu sendiri yang saya gunakan untuk bekerja dengan modul. Program ini difokuskan pada PERIKSA, dan hampir tidak secara langsung, yaitu tanpa perubahan, itu dapat diterapkan untuk beberapa kebutuhan yang diterapkan. Meskipun, seperti yang mereka katakan, "tergantung di mana harus melamar."</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Program itu sendiri adalah struktur blok. Ini terdiri dari 4 rutinitas dan utama utama kelima. Subrutin pertama: ReadCount, membaca data dari modul ADC dan membuatnya menjadi variabel Count. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CreatInput, menghasilkan array input data konversi dari 32 nilai. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CreatOutput, menghasilkan array output data konversi ADC dengan mengatur rata-rata bergerak dengan ukuran jendela 16 data. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Keys, program sederhana untuk merespons penekanan tombol. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi itu saja. Variabel pada dasarnya semua global, terutama karena sumber daya mega diperbolehkan.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/md/z4/xz/mdz4xz4rpghbubo4yfc4luas2y4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Program utama dimulai dengan membuat array input CreatInput, kemudian data input disaring menggunakan metode moving average. Pemilihan filter ini didasarkan pada yang berikut ini. Ketika program sedang berjalan, data pada tampilan mengubah nilainya dalam rentang yang cukup besar. Saya telah mengambil nilai-nilai ADC pada upaya nol pada platform dan ditabulasi. Nilai tersebut diperoleh dengan menggunakan JATAG USB debugger di lingkungan AVR Studio. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8w/x7/ne/8wx7ne82a80fp4ofgryytwhza7s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam file Excel "Akuisisi Data", pada tab "Moving Average", hasil pemfilteran data InputBuff berosilasi (amplitudo osilasi 436 unit) dengan jendela rata-rata interval 3,12,16 ditampilkan. Hasilnya ditunjukkan dalam sel A37-A40. Dari sini terlihat bahwa yang paling efektif, dalam hal ini, adalah rata-rata bergerak dengan jendela 16 sampel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grafik yang dibuat menunjukkan ini dengan jelas. </font><font style="vertical-align: inherit;">Data diambil dari pengontrol yang berfungsi, dihentikan pada saat transisi ke prosedur tampilan data. </font><font style="vertical-align: inherit;">Contoh-contoh ilustrasi dari pengambilan data tersebut ditunjukkan dalam gambar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/li/d2/5s/lid25s7vqelzw_hlumiy2uol9qa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak ada metode penyaringan data, melalui penggunaan berbagai filter digital, dengan cara apa pun dapat “menjinakkan” fluktuasi input. </font><font style="vertical-align: inherit;">Jika Anda melihat grafik dari data input, maka distribusi Gaussian di sini bahkan tidak "berbau". </font><font style="vertical-align: inherit;">Sebagaimana dikonfirmasi oleh pengguna Nikopol_86 di blog "... jangan percaya dokumentasi China"</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nikopol_86 5 Februari 2019 pada 09:27 0</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sejujurnya, ia memiliki cukup banyak rasio sama sekali. Saya melakukan riset pada distribusi kepadatan kode ADC yang dikeluarkan dengan sirkuit input yang disingkat, sehingga ada penyebaran hingga 1000 1_5V dan nifiga bukan hukum distribusi normal, yang menunjukkan bahwa kabel papan bermasalah, atau dengan ADC, atau semuanya diambil bersamaan . Saya juga memperhatikan bahwa dia juga tidak memiliki stabilisasi suhu, dan kisaran suhu operasi yang diklaim tidak sesuai dengan kenyataan. Jika hanya karena ketika Anda menghubungkan pengukur regangan 5 kg ke ADC, mengubah suhu di ruangan sebesar 1 derajat akan membawa pembacaan sebesar 2 gram, dan jika Anda menghangatkan sirkuit mikro dengan jari Anda, bacaan akan terbang hingga 5-7 gram. Secara umum, saya membuat kesimpulan sendiri bahwa hanya dispenser makanan kucing yang dapat dibuat pada perangkat ini,di mana akurasi dalam satu perhentian trem akan lebih dari cukup. Dan sayangnya, solusi normal tidak murah, karena Anda harus menggunakan ADC berkualitas tinggi dari AO atau T1.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang Anda lihat, kesimpulannya dikonfirmasi. Benar, hal yang sama berlaku: </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jushabrauser 4 Februari 2019 pada 12:52 hal.</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dengan rasio sinyal-ke-noise &lt;1, ini tidak akan pernah membantu. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bahkan dengan rangkaian jembatan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oleh karena itu, dalam kondisi normal (tanpa matematika dan / atau sirkuit khusus) setidaknya 8 bit orde rendah memberikan omong kosong (kemungkinan besar). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
24 bit Cina jujur ​​untuk 350 rubel? Jangan katakan sandal saya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika setrika itu sendiri "berbohong" - apa yang dapat Anda lakukan? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini, bahkan filter nonlinear orde ketiga tidak akan membantu, karena data sumber bukan kue. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari tempat inilah saya ingin melihat kemampuan modul ini dalam komposisi timbangan. Mencari masalah pada jaringan dengan jitter dari bit terakhir ADC, dibawa ke forum </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kazus.ru/forums/showthread.php?t=105320&amp;page=4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Inilah keseluruhan diskusi tentang menstabilkan bacaan. Namun, tidak ada metode matematika yang diusulkan "menenangkan" input data yang saya terima. Dari "perangkat keras" itu sendiri, untuk menstabilkan pembacaan, diperkenalkan: koneksi ground digital dan analog, serta hubungan pendek input B ke ground. Kami menggunakan perisai penuh dan memberi daya modul dari baterai 6v (diikuti oleh stabilizer 7805) secara terpisah dari sirkuit pengontrol. Tidak ada hasil, data input berayun ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, kategori 24 "bersih" tidak dapat diperoleh dan alasannya di sini menurut saya adalah sirkuit / kualitas rendah. Jadi, Anda perlu memangkas rentang konversi yang dihasilkan. Untuk ini, dalam program ReadCount, garis diperkenalkan dengan membagi data dengan 100. 100 sedikit kurang dari 2 hingga 8 derajat. UNTUK. Konversi AD datang dalam 16 bit. Namun, bahkan batasan seperti itu tidak membuat kesaksian itu dapat diandalkan. Dan alasannya di sini adalah sifat strain gauge.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, setelah menerapkan proses kalibrasi (menghubungkan nilai ADC dan berat pada platform), berat ditampilkan dalam gram. Ia menampilkan 500 gram sebagai angka 500, satu kg sebagai 1000. Harga pembagian adalah 1 gram. Itu kami dapatkan dengan sensor 40 kg 40.000 divisi. Menurut data teknis untuk load cell, kita bisa dapatkan dari sensor hanya 3.000 divisi (simbol C3 atas nama sensor). Jadi harga pembagian harus (40000/3000) = 13,3 gram. Namun, menurut GOST 29329, metrologi berat tidak beroperasi dengan angka 3. Digit harus digunakan: </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1.3 Nilai nilai divisi kalibrasi (e), harga pembagian skala (d) dan resolusi pembacaan (dd) dalam satuan massa harus dipilih dari yang berikut: 1X10a; 2X10a; 5X10a, di mana a adalah bilangan bulat positif, negatif atau nol.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UNTUK. harga pembagian untuk sensor ini, dijamin oleh pabrik 10 gram. Artinya, format output harus 0,0x kg. di mana x = 1,2,3, ... .0. Mari kita coba membuat pembagian harga 5 gram. Tindakan programatik yang relevan dicantumkan. Setelah pembatasan seperti itu, kami "mengambil" dari sensor 40.000 / 5 = 8.000 divisi, yang 2,6 kali lebih banyak dari yang diizinkan. Setelah asumsi ini, timbangan yang dihasilkan bekerja cukup mantap.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pernyataan di atas tentang load cell yang diterapkan dan "resolusinya" tidak memungkinkan kami untuk menyatakan secara meyakinkan bahwa modul ini tidak dapat menghasilkan konversi 24-bit. Namun, saya telah menguji sensor ini untuk operasi dengan resolusi 1 gram, pada perangkat lain, dengan konverter AD yang berbeda. Pada perangkat ini, pengoperasian sensor dan konversi dapat dianggap memuaskan, karena fluktuasi bobotnya tidak lebih dari 3 gram. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang tidak memungkinkan penggunaan ADC ini dalam perdagangan?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nah, hal pertama dan terpenting adalah ketergantungan pengukuran pada suhu. Kedua, menggunakan operasi pembagian dan multiplikasi yang dibangun di dalam ATMEGA, terutama untuk 8 bit, sulit untuk mengkalibrasi timbangan pada seluruh rentang berat pada kondisi ini. Harus diingat bahwa program tidak bereaksi dengan cara apa pun terhadap kelebihan sensor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana cara mengatasi ketidaknyamanan ini. Pertama, masukkan sensor suhu dan sesuaikan pembacaan bobot dari nilai suhu. Yang cukup rumit. "Lebih murah" adalah untuk memperkenalkan opsi kalibrasi, untuk beban yang berbeda dan tergantung pada kesalahan yang disebabkan oleh suhu, kalibrasi berat yang digunakan dalam pekerjaan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yang kedua lebih sulit. Ganti prosedur perkalian dan pembagian dengan operasi tabular dan geser. Saya pikir ini adalah cara terbaik untuk menggunakan modul ini dalam praktik membangun bobot. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk melengkapi deskripsi persyaratan untuk membuat program untuk timbangan, perlu menggunakan "Program kalibrasi timbangan metrologi (sertifikasi)" yang dilampirkan pada setiap saldo. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pembuatan skala berdasarkan m / s Hx711 dimungkinkan untuk semua persyaratan metrologi untuk skala tersebut. </font><font style="vertical-align: inherit;">Pengenalan koreksi untuk ketergantungan suhu konversi harus disediakan dalam prosedur terpisah. </font><font style="vertical-align: inherit;">Menggunakan modul dengan resolusi lebih dari 16 bit memerlukan pendekatan dan kontrol terpisah.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id487056/index.html">Apakah berbahaya untuk membuat RDP terbuka di Internet?</a></li>
<li><a href="../id487058/index.html">"Hadoop. ZooKeeper "dari seri Mail.Ru Group Technostream" Mendistribusikan Pemrosesan Data Besar di Hadoop "</a></li>
<li><a href="../id487060/index.html">Menggunakan Google Chrome? Jadi Google mengumpulkan data Anda melalui data klien-X</a></li>
<li><a href="../id487062/index.html">CBS mengizinkan pengguna Linux untuk menonton Star Trek, terima kasih padanya untuk itu</a></li>
<li><a href="../id487064/index.html">Tahun kedua saya sebagai pengembang independen</a></li>
<li><a href="../id487068/index.html">Kartu Bisnis APEC: Alternatif untuk Visa Bisnis ke Tiongkok dan Negara-Negara Lain</a></li>
<li><a href="../id487072/index.html">aku ingin menikah</a></li>
<li><a href="../id487074/index.html">Bagaimana ABLYY NLP Technologies Belajar Memantau Berita dan Mengelola Risiko</a></li>
<li><a href="../id487076/index.html">Iklan Google / Yandex Tidak Ditampilkan: 15 Alasan</a></li>
<li><a href="../id487078/index.html">Как мы приучили коллег брать вещи без спроса</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>