<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥡 👨🏽‍🎤 🆎 ストレージのアラートとエラー、それらに対処する方法？ 👐🏿 🤽🏾 👇🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="少し前まで、N市では、顧客データの処理に特化した1つのIT企業が24時間年中無休でDCでの作業に成功しています。 「靴の中の靴屋」、つまりIT企業ではITはよくデバッグされていました。興味深いことは、長年の仕事の後、テクニカルディレクターが、IT部門全体の適切な運用の制御が維持された基本事項に立って...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ストレージのアラートとエラー、それらに対処する方法？</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490012/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">少し前まで、N市では、顧客データの処理に特化した1つのIT企業が24時間年中無休でDCでの作業に成功しています。 「靴の中の靴屋」、つまりIT企業ではITはよくデバッグされていました。興味深いことは、長年の仕事の後、テクニカルディレクターが、IT部門全体の適切な運用の制御が維持された基本事項に立っていた彼のポストを去ったときに始まりました。彼は同様に経験豊富な男性（以下、「プロ」と呼ぶ）に置き換えられ、より広い視野でさえ、彼は文字通り「ビジネス」を新しい発展の視野で魅了しました。しかし、よくあることですが、空高く飛ぶ人々は、通常の行政レベルで地面に降りることに非常に消極的です。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bl/k-/52/blk-52evzgrj4dxsxzjxi44bp-s.png" alt="画像"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インシデントのタイミング</font><font style="vertical-align: inherit;">：1 </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日目（4月）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：1つのローカルストレージシステムがアラートを流し始め、最初のエラーが発生しました。これを見て、管理者は指示に従って上司に通知しました。私たちのプロは、「プログラマーの黄金のルール」-「それはうまくいくのですか？手を触れないでください！"。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初日の撤退-通常、ストレージシステムはアラートを使用して通信します。その中で、（「アラート」からの）アラート-アラームを強調表示する価値があります。実際、これらはアラームイベントを通知したり、警告したりするアラートです。アラートのタイプ：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
警告（「警告」から）-警告。通常、落ち着いて考える時間を与えます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Errora（「Error」から）-エラー。たとえば、ディスクはクラッシュしましたが、データアクセスは中断されませんでした。ここで、彼らの決定を後で延期する価値はありません。</font></font><br>
  ( “Critical Error”) –  ,  <a name="habracut"></a>  ,   .<br>
<br>
  (/) ,  (  /)      ,         .     (         ) ,           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a> </i><br>
<img src="https://habrastorage.org/webt/gl/72/s4/gl72s4kikfawqfbska4gjwm-ppg.jpeg" alt="画像"><br>
<b>  ()</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：お客様の別のプロジェクトに取り組んでいるエンジニア（Agat-A）がこれらのエラーを見つけ、「彼らは何をしましたか？」と疑問に思います。答えは「何もない、内部システムにケースがあり、管理は最新です...」 。ローカル管理者側から見ると、すべてが2か月前の指示に従って、標準的なプロセスに従って行われました。質問に対して-おそらくあなたは助けが必要です、管理者は彼が自分の役割を完了したと答えましたが、チームはありませんでした。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2日目のリトリート：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
災害復旧チェックリスト</font><font style="vertical-align: inherit;">の</font><font style="vertical-align: inherit;">導入と慎重な使用は、アクションの全体像を復元するのに役立ち、明らかな間違いや不必要な混乱を回避するのにも役立ちます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンプレックスの災害復旧のためのチェックリストの例：</font></font></b> <br>
             ,       .<br>
  —      .        —     .<br>
<br>
      ,     ,      .<br>
<br>
                  ,          —  .</i><br>
<br>
<img src="https://habrastorage.org/webt/e8/e2/vc/e8e2vcrovcvghhqzwgit2_rke0e.jpeg" alt="画像"><br>
<br>
<b>  ()</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：エラーを無視すると、ストレージシステムの応答が遅くなり、すでに「何らかの理由で」、山積みになっているタスクが常に引き出されるとは限らなかったという事実につながりました。ピーク時間中の作業速度に関する顧客の最初の不満が現れました。そして、ここではすでにプロ（ITマネージャー）が計画会議について質問しました。彼は何かをする時だと気づき、「エンジンルーム」に行きました。結論-日中、ベンダーのポータルで...コントローラーの故障についてケースが開かれました！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、カスタマーエンジニアから丁寧にサポートを依頼されました。それとは別に、システムを購入する際にオンサイトパートナーシップとベンダーサポートを節約するために、これらの問題にまったく対処するべきではなかったと判断しましたが、顧客との良好な関係とプロジェクトが毎年約1回半実施されているため、お客様のご要望に応じて解決致します。すぐにログを削除するよう依頼してください。すぐにログを受け取り、ベンダーに連絡する状況をより明確に説明し、重要度を設定します。ログには、1つのコントローラーが故障し、2番目のコントローラーがクラッシュしたことが示されていますが、エラーはその場で修正され、2番目のコントローラーのバッテリーも故障しています。私たちは診断を発表します（まあ、それは文章ではありません）。いつものように、メーカーからのコントローラーの注文を加速します。彼らはロシアの倉庫にいませんでした。</font></font><br>
<br>
<i>   —       ,     .           .          /   .<br>
<br>
          . <br>
:<br>
<br>
         . <br>
:   ____________________. <br>
: ____________________.<br>
              . <br>
:   ____________________. <br>
: ____________________.<br>
<br>
     ,     .<br>
 ,                  .<br>
<br>
      ,   ,      ,    .       ,    .<br>
<br>
        : <br>
<br>
<ul>
<li>   , ..    ,   ,     . </li>
<li>  , ..        IT-. </li>
<li>   . </li>
<li>          IT-.</li>
</ul></i><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4日目（8月）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：数週間後、コントローラーは税関を通過してサーバーの顧客に届きました（途中でシリアル番号を書き直しました。古いコントローラーを送信するときにベンダーをサポートするためにケースをクローズする必要があります）。税関からサーバーへのパスは2日です。そして……ゆるゆる現実が再び始まりました。そして、なぜ私たちはそんなに急いでいたのですか？コントローラーのスペシャリストへの交換の提案をお客様が拒否したか、少なくともこのプロセスに付随する場合、私たち自身がばかではなく、それを理解します（前のテクニカルディレクターの作業中に示したように、これは100％真実でした）。サービスの条件により、交換された古いコントローラーを2週間以内にメーカーに返送することが必要です（非常に望ましいです！）。製造業者は顧客に返品を何度も思い出させました。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4日目のリトリート-人々は人間であり、質問することを恐れず、助けを求めることを躊躇せず、自分を再確認することを軽視しないでください。もちろん、1日12時間働き、組織コンポーネント全体をドラッグするこぶ、経験、能力に取り組むことができる人々がいます。チームワークは、誰もが自分の強みを使用し、その逆ではないことを意味します。専門家として、重要な状況が発生する前にバックアップオプションを検討してください。事前に準備して、通り過ぎるようにします。そして、何かが起こったとしても、あなたは準備ができており、最小限の損失でこれらのテストに合格することができます。</font></font><br>
</i><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5日目（10月、クライマックス）：</font></font></b> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
以下は、当社の一人称エンジニアが作成したテキストです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
早朝、事務所が徒歩約5分のところにあったが、不明な番号から電話がかかってきた。私は電話に出る-驚いた声が彼らのストレージの問題を解決するのを助けるように彼らのプロに頼む顧客はサービスにアクセスできません。会話の過程で、私はお客様を特定しようとしています。そして、彼らと同じように、彼（プロ）はSPoF（単一障害点）を完全に機能しないコントローラーとして排除したように見えましたが、彼は常に2番目のコントローラーの交換を延期しました。わかりました。技術的な詳細については技術者のみが伝えるため、9月初旬に採用されることが判明したまったく新しい管理者を介して、専門家と管理者を調整し、すぐに電話をかけます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題を特定するために、私は質問を始め、より正確な質問を始めます。新しい管理者+プロの束でいくつかの回答を引用します。「8月末または9月初めに、すぐに交換用の古いデッドコントローラ」...「2番目のものは変更せず、システムのシャットダウンを必要とする交換でいくつかの作業を実行したい」 ...「これまでのところすべてが機能している」...「テロリストや批判がなくなった」...「そしてここでストレージシステムが停止した」...「ネットワークにアクセスできなくなった」...「すべてのサービスが停止した」...「一部のライトがオフになっている」...「どこでも点滅しない通常は「...」で点滅しますこれが何を意味するのかわかりません。」</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数分後、私の質問への回答のおかげで写真が現れましたが、最初のカバーが行われました。別の質問です。コントローラー設定のバックアップコピーはありますか。突然、完全な無音が聞こえました。 1分後、画像が完成しました。ストレージシステムをオフにすることなく、Profiを交換しました（物理的に古いものを取り外し、新しいものを彼の場所に挿入しました。重大なエラーは消えました）。1つのコントローラー（完全に死んだコントローラー）。そして、実際にはそれだけです！その後、彼はそれ以上何もしませんでした。 「ライトが点灯し、重大なエラーはなくなりました。」彼は、ストレージがオフになるまで2台目（かろうじて生きているコントローラー）の交換を残しました。ストレージがオフになり、約1か月半（再び、2番目のルールが動作中）遅れました。それから私は考えるために一時停止を求めました（実際には消化する、なぜなら脳は単に彼らが聞いたことを信じることを拒否したためです）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の感覚に少し（おそらく沈黙の瞬間）気づいたとき、私はようやく気づきました：1人が亡くなり、それが空の新しいものに置き換えられ、2人目がその生涯を生きました（3か月以上の間、貧しい仲間だけがバッテリー全体でシステム全体を引き出し、すぐに単一のエラーによって修正されました）、そしてまた死にました。設定のコピーはなく、ユーザー自身がすぐに設定を取得できず、物理的にリモート（インターネットの「何か」）を与えることができず、工数が失われます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初にこれを修正する方法を見つけ、次にネットワークについて明確にし始めました。ネットワークマップをすばやく取得することは可能ですか（いいえ、いいえ、ほとんど手元にありません）。さまざまなサービス、ストレージ、ネットワーク機器へのさまざまなゲートで数分間の不必要なノックの後（私は尋ねて何をすべきかを言った、彼らはそれが判明した、すべてがリモートなしで起こるので、「なんらかの理由でインターネットもない」ので答えた。 DHCPサーバーは仮想であり、このストレージシステムから開始されるため、静的な場所がないため、何も利用できないという質問と回答が届きました。これは2番目のカバーでした（下に行く場所がなく、制御ポートを使用せずにノックダウンしただけだと思いました）静力学は悪です。）さて、今回は自分がはるかに速くなり、大まかな行動計画を頭に描いて「同僚」に説明しました。ストレージシステムの横にパッチコードが付いたコンピューターまたはラップトップが必要です。さらに、コントローラーのセットアップ手順（欠落/紛失した場合は、すぐに見つけて送信します）と、ストレージシステム周辺のネットワークマップの「一部」（「一部」=基本的なネットワーク設定）が必要です。これらすべての準備が整ったら、基本的に新しいストレージコントローラーを構成し、指示に従ってパッチコードを使用してラップトップから直接接続し、見つかったネットワーク設定を使用してDHCPを引き上げ、すでに競合しているストレージコントローラーを構成し、各システムを持ち上げて確認します必要に応じて機能します。私は指示を見つけて送信します（ちなみに、このSHDにも依存しているため、会社のメールも機能しません。したがって、個人用のメールを使用します...）。さらに、このときまでに、プロはSHDの基本的なネットワーク設定（両方のコントローラーのIPアドレスなど）を見つけました。 .P。）。プロは最終的に何をすべきか理解しました、そして、彼はさらに管理すると述べた。連絡を取り、離したことを思い出しました。しばらくして、このクライアントからのサービス「24/7」が獲得しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私にとって、事件全体は40分以内に収まりました。一方で、オンラインと電話で問題を迅速に解決できたことを嬉しく思います。一方で、そのような人生にどうやって到達できるかに非常に驚きました。そして、このIT企業のクライアントもこの事件に感謝しなかった。 promiseサービスは24時間年中無休で稼働することになっており、これが稼働日の始まりでした（タイムゾーンを考えると、誰かが稼働日の高ささえあります）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rv/vi/0w/rvvi0wi-h1rknscftatbrbndemu.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで終わりかもしれませんが、私にとって、ケースの完了はバグの作業です。したがって、私の同僚と私は書こうとしました：これが将来起こるのを防ぐために、私たちの（そして私たちだけでなく）作業で何を変更できるか/変更すべきか。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この訴訟はただの自由な仕事であることが判明し、おかげで不平を言うことすらありませんでした。それは明らかです、なぜならお客様がすぐに忘れたいものを見つけて、証人を森に葬りました。しかし、このケースは、ストレージシステムと関連システムを使用および保守するときに管理者、エンジニア、およびビジネスが直面する最も一般的な状況のチートシート/テンプレートのコレクションに追加されました。一部の人にとっては、これらのチートシートと指示は単純すぎるか、さらには狭く見えるかもしれません。いずれの場合でも、システムごとに、これらのチートシート/テンプレートにデータを入力する必要があります（誰もが独自のランドスケープ、情報とサービスに対する独自の要件などを持っているため）、独自のスキームを描き、独自のアルゴリズムを開発する必要があります。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後に、バックアップポリシーの例を示します。</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/hn/i5/ac/hni5ac5cx66cdfv56gscawyij2w.jpeg" alt="画像"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システム用に作成された同様のチートシートは、初心者とマスターの両方に非常に役立ちます。</font><font style="vertical-align: inherit;">マスターがすべてを頭の中で維持できるとしても、彼は24時間365日の勤務スケジュールを持つバイオロボットではありません。</font><font style="vertical-align: inherit;">そしていずれにせよ、どのツールもその合理的な使用を必要とします。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、「そして、就寝する人たちに、良い睡眠を」と唱え、私たちは物語を終えます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja489994/index.html">Kubernetesのヒントとコツ：NGINXとPHP-FPMの優雅なシャットダウンランタイム機能</a></li>
<li><a href="../ja489998/index.html">11. Fortinet Getting Started v6.0。ライセンシング</a></li>
<li><a href="../ja490002/index.html">KotlinとMicronautでGraphQLをグラフ化し、複数のマイクロサービスのAPIへの単一のアクセスポイントを作成する方法</a></li>
<li><a href="../ja490006/index.html">技術仕様の教育プログラム</a></li>
<li><a href="../ja490010/index.html">音楽の正しさをチェックするための型システムの検査</a></li>
<li><a href="../ja490014/index.html">プロのようなJavaScriptツリーの揺れ</a></li>
<li><a href="../ja490018/index.html">片手でモバイルアプリケーションを設計する方法</a></li>
<li><a href="../ja490020/index.html">PVS-Studioの例によるIT分野での英語への翻訳</a></li>
<li><a href="../ja490022/index.html">PowerShellを使用してREST APIを操作する</a></li>
<li><a href="../ja490024/index.html">PhpStormプラグインでルーチンを取り除く</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>