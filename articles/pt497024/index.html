<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍜 👩‍🏭 👨🏾 Por que hiperconvergência? Visão geral e testes do Cisco HyperFlex 🤟🏾 🍤 👩🏽‍🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em TI, o principal é três letras
 A tarefa de qualquer infraestrutura de TI é fornecer uma plataforma confiável para os processos de negócios da empre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Por que hiperconvergência? Visão geral e testes do Cisco HyperFlex</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/cti/blog/497024/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em TI, o principal é três letras</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A tarefa de qualquer infraestrutura de TI é fornecer uma plataforma confiável para os processos de negócios da empresa. Tradicionalmente, acredita-se que a qualidade da infraestrutura de tecnologia da informação seja avaliada de acordo com três parâmetros principais: acessibilidade, segurança e confiabilidade. No entanto, a avaliação para esse triplo não está de forma alguma relacionada aos negócios e à receita / perda direta da empresa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Três letras principais governam a TI. Se as letras "RUB" não estiverem no topo da hierarquia de TI, você estará criando sua infraestrutura de TI incorretamente. Obviamente, é difícil criar TI diretamente, começando apenas com receitas / despesas; portanto, existe uma hierarquia de “três letras” - das mais importantes às mais privadas. SLA, RPO, RTO, GRC - tudo isso é conhecido por especialistas do setor e há muito tempo é usado na construção de infra-estruturas. Infelizmente, nem sempre vinculamos esses indicadores a uma hierarquia de ponta a ponta.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oj/wm/6n/ojwm6n6_0mqymccxwojckh8q4fi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoje, muitas empresas estão construindo infraestrutura para o futuro usando a tecnologia de ontem na arquitetura de ontem. </font><font style="vertical-align: inherit;">E, ao mesmo tempo, o desenvolvimento acelerado da TI mostra que os serviços modernos estão mudando fundamentalmente não apenas os negócios, mas também a sociedade - as pessoas da era digital estão acostumadas ao fato de que alguns segundos são suficientes para acessar qualquer informação. </font><font style="vertical-align: inherit;">A TI de uma tecnologia incompreensível se tornou comum para as massas, como um hambúrguer ou uma cafeteria. </font><font style="vertical-align: inherit;">Isso adicionou novas três cartas extremamente importantes à TI. </font><font style="vertical-align: inherit;">Essas cartas - TTM (Time to market) - o tempo antes do lançamento de um serviço produtivo no mercado.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ot/k1/ns/otk1nsmpnwofr1v2bzlexp5a9j8.png"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sds</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por outro lado, um kraken surgiu das profundezas da tecnologia, revertendo a TI e o estilo de vida tradicionais. À medida que o poder de computação dos processadores x86 aumentou, os sistemas de armazenamento de software se tornaram o primeiro tentáculo. Os sistemas clássicos de armazenamento eram peças muito específicas de ferro cheias de “silício personalizado”, vários aceleradores de hardware proprietários e software especializado. E era administrado por uma pessoa especialmente treinada que era praticamente adorada na companhia como sacerdote de um culto das trevas. Expandir o sistema de armazenamento de dados em operação na empresa foi um projeto inteiro, com muitos cálculos e aprovações - afinal, é caro!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O alto custo e a complexidade estimularam a criação de sistemas de armazenamento de software sobre o hardware x86 usual, com um sistema operacional de uso geral comum - Windows, Linux, FreeBSD ou Solaris. Somente o software permaneceu no hardware personalizado complexo, funcionando nem mesmo no kernel, mas no nível do usuário. Os primeiros sistemas de software eram obviamente bastante simples e limitados em funcionalidade, geralmente eram soluções de nicho especializadas, mas o tempo passava. E agora até grandes fornecedores de sistemas de armazenamento começaram a abandonar soluções especializadas de hardware - o TTM para esses sistemas não podia mais suportar a concorrência e o custo do erro tornou-se muito alto. De fato, com raras exceções, até os sistemas de armazenamento clássicos até 2020 se tornaram os servidores x86 mais comuns, apenas com lindos focinhos de plástico e várias prateleiras de discos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O segundo tentáculo do kraken que se aproxima é a aparência e a adoção maciça pelo mercado da tecnologia de memória flash, que se tornou um pilar de concreto quebrando as costas de um elefante.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O desempenho dos discos magnéticos não muda há muitos anos e os processadores dos controladores de armazenamento lidam completamente com centenas de discos. </font><font style="vertical-align: inherit;">Porém, mais cedo ou mais tarde, a quantidade se tornará qualidade - e o sistema de armazenamento já está em um nível médio, sem mencionar o inicial, e possui um limite superior no número significativo de unidades flash. </font><font style="vertical-align: inherit;">Com uma certa quantidade (literalmente de dez discos), o desempenho do sistema não para de crescer, mas também pode começar a diminuir devido à necessidade de processar um volume cada vez maior. </font><font style="vertical-align: inherit;">Afinal, o poder de processamento e a taxa de transferência dos controladores não mudam com o aumento da capacidade. </font><font style="vertical-align: inherit;">A solução, em teoria, foi o surgimento de sistemas de expansão que podem montar muitas prateleiras independentes com discos e recursos de processador em um único cluster que parece de fora como um único sistema de armazenamento com vários controladores. </font><font style="vertical-align: inherit;">Restava apenas um passo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hiper convergência</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O passo mais óbvio para o futuro foi a unificação de pontos de processamento e armazenamento de dados anteriormente díspares. Em outras palavras, por que não implementar o armazenamento distribuído, não em servidores separados, mas diretamente nos hosts de virtualização, recusando, assim, uma rede de armazenamento especial e um hardware dedicado, combinando funções. O kraken acordou. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas deixe-me dizer, você vê, porque combinação é convergência. De onde veio esse prefixo estúpido hiper?</font></font><br>
<blockquote>        .        +  + .    .    ,      “ ”.<br>
…<br>
 ,  ,            ,        .       —       SDS.<br>
<br>
:<br>
<br>
<ul>
<li>  — , ,       ,   /.    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sistema convergente - tudo de uma fonte, um suporte, um número de parceiro. </font><font style="vertical-align: inherit;">Não deve ser confundido com a montagem automática de um fornecedor.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E acontece que o termo para nossa arquitetura convergente já foi adotado. </font><font style="vertical-align: inherit;">Exatamente a mesma situação que com o supervisor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sistema hiperconvergente - Um sistema convergente com arquitetura convergente.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As definições são retiradas do artigo " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teoria Geral e Arqueologia da Virtualização</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", na qual escrevi uma parte animada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que dá a abordagem hiperconvergente no aplicativo às três letras mencionadas?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comece com um volume mínimo (e custo mínimo)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capacidade de armazenamento cresce com poder de computação</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cada nó do sistema é seu controlador - e o problema do "teto de vidro" é removido (os discos podem, mas o controlador não existe mais)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gerenciamento de armazenamento simplificado drasticamente</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para o último parágrafo, os sistemas hiperconvergentes não gostam muito dos administradores de armazenamento no modo antigo, usados ​​para administrar filas nas portas Fibre Channel. </font><font style="vertical-align: inherit;">O espaço é alocado em apenas alguns cliques do mouse no console de gerenciamento da infraestrutura virtual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em outras palavras, apenas as nuvens são mais rápidas que os sistemas hiperconvergentes no lançamento de um produto, mas as nuvens não são adequadas para todos e / ou nem sempre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você é um administrador técnico e lê até aqui - regozije-se, as palavras gerais terminaram e agora vou falar sobre minha visão pessoal do sistema Cisco Hyperflex, que recebi em patas tenazes por realizar vários testes nele.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cisco Hyperflex</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que a Cisco</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A Cisco é conhecida principalmente como fornecedor dominante no mercado de equipamentos de rede, mas ao mesmo tempo está amplamente presente em outros segmentos do mercado de data centers, oferecendo soluções para servidores e hiperconvergentes, bem como sistemas de automação e controle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Surpreendentemente, até 2020, ainda existem pessoas: “Servidores Cisco? E de quem ela os tira?</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A Cisco começou a lidar com servidores já em 2009, escolhendo o caminho do crescimento ativo das soluções blade naquele momento. A idéia da Cisco era implementar a abordagem de calculadoras anônimas. O resultado foi um sistema UCS (Sistema de Computação Unificado) que consiste em dois comutadores especializados (chamados de Fabric Interconnect) e de 1 a 20 chassis (8 blades de tamanho médio) ou até 160 servidores. Ao mesmo tempo, o chassi tornou-se geralmente estúpido com um pedaço de ferro com potência, toda a lógica e comutação são feitas no Fabric Interconnect; o chassi é apenas uma maneira de hospedar servidores e conectá-los ao sistema. O Fabric Interconnect é totalmente responsável por todas as interações do servidor com o mundo externo - Ethernet, FC e gerenciamento. Parece que as lâminas e lâminas, o que está lá, exceto para comutação externa, e não como todos os outros no chassi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um momento chave na implementação dessas mesmas “calculadoras anônimas”. Como parte do conceito do Cisco UCS, os servidores não têm outra personalidade além de um número de série. Nem MAC, nem WWN, nem qualquer outra coisa. O sistema de gerenciamento UCS desenvolvido pela Fabric Interconnect é baseado em perfis e modelos de servidor. Após conectar um pacote de servidores no chassi, eles precisam receber um perfil apropriado, dentro do qual todos os endereços e identificadores de identificação são definidos. Obviamente, se você tiver apenas uma dúzia de servidores, o jogo não valerá a pena. Mas quando há pelo menos duas, ou mesmo três dúzias delas, essa é uma vantagem séria. Torna-se fácil e rápido migrar configurações ou, mais importante, replicar configurações de servidor na quantidade certa, aplicar as alterações imediatamente a um grande número de servidores,essencialmente gerenciando um conjunto de servidores (por exemplo, um farm de virtualização) como uma única entidade. A abordagem proposta no sistema UCS permite, com a abordagem correta, simplificar seriamente a vida dos administradores, aumentar a flexibilidade e reduzir significativamente os riscos, para que os blades UCS literalmente em 2 a 3 anos se tornem a plataforma blade mais vendida no Hemisfério Ocidental, e hoje eles são globalmente uma das duas plataformas dominantes, junto com a HPE.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Logo ficou claro que a mesma abordagem baseada em uma fábrica universal com gerenciamento integrado baseado em políticas e modelos é totalmente requisitada e se aplica não apenas a blades, mas também a servidores em rack. E, nesse sentido, os servidores de montagem em rack da Cisco conectados ao Fabric Interconnect obtêm os mesmos benefícios que tornam os blades tão populares. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoje vou falar sobre o HyperFlex, uma solução hiperconvergente da Cisco construída em servidores montados em rack conectados ao Fabric Interconnect. O que torna o HyperFlex interessante e vale a pena considerar na revisão:</font></font><br>
<br>
<ul>
<li>  Cisco   ,  , «» –        ,      HyperFlex;     , ,   ,         HyperFlex    ;</li>
<li>   –          ;  HyperFlex  ,    ,      ;          ,       .</li>
<li> «  » —     « »,       ,       ;</li>
<li>           Fabric Interconnect    Cisco   -,     SAN ,       native FC;</li>
<li>    “” –  ,  ,     ;</li>
<li>   Cisco      ,   ,            ,      ;</li>
<li>  ,      , Cisco        HCI,      , HyperFlex      ,   ,   .</li>
</ul><br>
<h3> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O HyperFlex é um verdadeiro sistema hiperconvergente com VMs controladoras dedicadas. </font><font style="vertical-align: inherit;">Deixe-me lembrá-lo de que a principal vantagem dessa arquitetura é sua portabilidade potencial para diferentes hipervisores. </font><font style="vertical-align: inherit;">Hoje, a Cisco implementou o suporte ao VMware ESXi e Microsoft Hyper-V, mas é possível que uma das opções do KVM apareça à medida que sua popularidade cresce no segmento corporativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere o mecanismo de trabalho no exemplo do ESXi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os dispositivos que usam a tecnologia VM_DIRECT_PATH - disco de cache e discos de nível de armazenamento - são lançados diretamente para a VM do controlador (a seguir CVM). </font><font style="vertical-align: inherit;">Portanto, excluímos o efeito da pilha de discos do hipervisor no desempenho. </font><font style="vertical-align: inherit;">Pacotes VIB adicionais são instalados no próprio hypervisor:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO Visor: fornece o ponto de montagem do armazenamento de dados NFS para o hypervisor</font></font></li>
<li>VAAI:   VMware  API  « » </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os blocos de disco virtual são distribuídos uniformemente por todos os hosts em um cluster com relativamente pouca granularidade. Quando a VM no host executa algum tipo de operação em disco, através da pilha de discos do hipervisor, a operação vai para o armazenamento de dados, depois para o IO Visor e depois para a CVM responsável por esses blocos. Nesse caso, o CVM pode estar localizado em qualquer host do cluster. Dado os recursos muito limitados do IO Visor, é claro que não há tabelas de metadados e a escolha é matematicamente determinada. Em seguida, a CVM que a solicitação chegou processou. No caso de leitura, ele envia dados de um dos níveis de cache (RAM, cache de gravação, cache de leitura) ou dos discos de seu host. No caso de gravação, ele grava no diário local e duplica a operação para um (RF2) ou dois (RF3) CVM.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k_/hq/eq/k_hqeqytlifhbevdrf8r7mk_rv0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez isso seja suficiente para entender o princípio do trabalho dentro da estrutura desta publicação; caso contrário, pegarei o pão dos treinadores da Cisco e ficarei com vergonha. </font><font style="vertical-align: inherit;">Na verdade não, mas ainda o suficiente.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pergunta sobre testes sintéticos</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Navegador, aparelhos! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
36! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- O que é 36? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- E os eletrodomésticos? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algo assim hoje parece com a maioria dos testes sintéticos de sistemas de armazenamento. Por que é que? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Até relativamente recentemente, a maioria dos sistemas de armazenamento era plana com acesso uniforme. O que isto significa? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O espaço total em disco disponível foi coletado de discos com as mesmas características. Por exemplo, 300 unidades de 15k. E o desempenho foi o mesmo em todo o espaço. Com o advento da tecnologia de armazenamento em camadas, os sistemas de armazenamento tornaram-se não estáveis ​​- o desempenho varia em um único espaço em disco. E não é apenas diferente, mas também imprevisível, dependendo dos algoritmos e recursos de um modelo de armazenamento específico.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E tudo não seria tão interessante se os sistemas hiperconvergentes com localização de dados não aparecessem. </font><font style="vertical-align: inherit;">Além da desigualdade do próprio espaço em disco (cansações, caches em flash), também há acesso desigual a ele - dependendo se uma das cópias de dados está localizada nos discos locais do nó ou se deve ser acessada pela rede. </font><font style="vertical-align: inherit;">Tudo isso leva ao fato de que o número de testes sintéticos pode ser absolutamente qualquer, e não falar de nada praticamente significativo. </font><font style="vertical-align: inherit;">Por exemplo, o consumo de combustível de um carro de acordo com uma brochura publicitária que você nunca pode alcançar na vida real.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pergunta sobre dimensionamento</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O outro lado dos números de teste sintéticos foi dimensionar números e especificações sob o teclado de pré-venda. Neste caso, as pré-vendas são divididas em duas categorias - algumas simplesmente estupidamente martelam seu TK no configurador do fornecedor, e o segundo é o próprio, porque eles entendem como ele funciona. Mas com o segundo você terá que considerar em detalhes o que escreveu no seu TK. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como você sabe, sem um TK claro - o resultado do HZ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nk/li/uq/nkliuqyn2iv0ogsigw-nd_m94ky.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por experiência prática - ao dimensionar um sistema hiperconvergente bastante pesado em uma competição com um dos clientes, pessoalmente, depois do piloto, peguei os indicadores de carga do sistema e os comparei com o que estava escrito no TOR. Acabou como em uma piada:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Rabinovich, é verdade que você ganhou um milhão na loteria? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Quem te contou isso? </font><font style="vertical-align: inherit;">Não um milhão, mas dez rublos, não na loteria, mas na preferência, e não ganhou, mas perdeu.</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em outras palavras, a situação clássica do GIGO - Garbage In Garbage Out - Entrada de lixo = Lixo na saída. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O dimensionamento prático aplicável para a hiperconvergência é quase garantido para ser de dois tipos: leve-nos com uma margem ou, por um longo tempo, dirigiremos um piloto e tomaremos indicadores.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Há mais um ponto no dimensionamento e avaliação das especificações. Sistemas diferentes são construídos de maneira diferente e funcionam de maneira diferente com discos; seus controladores interagem de maneira diferente. Portanto, é praticamente inútil comparar “frente a frente” de acordo com as especificações, o número e o volume de discos. Você tem algum tipo de TK, dentro do qual entende o nível de carga. E há um certo número de caixas de velocidades, nas quais você oferece vários sistemas que atendem aos requisitos de desempenho e confiabilidade. Qual é a diferença fundamental, quanto custa um disco e que tipo no sistema 1, e que no sistema 2 existem mais / menos deles se ambos lidarem com êxito com a tarefa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o desempenho é geralmente determinado pelos controladores que vivem nos mesmos hosts que as máquinas virtuais, para alguns tipos de cargas, ele pode nadar significativamente, simplesmente porque processadores com frequências diferentes estão localizadas em diferentes clusters, sendo todas as outras coisas iguais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em outras palavras, mesmo o arquiteto-arquiteto de pré-venda mais experiente não informará a especificação com mais precisão do que você formula os requisitos e com mais precisão do que "bem, em algum lugar do SAM-VOSEM" sem projetos-piloto.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/79/su/eq/79sueqtcnez6nz-kop4mp1i4qlq.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre instantâneos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O HyperFlex pode fazer instantâneos nativos de máquinas virtuais usando a tecnologia Redirect-on-Write. E aqui é necessário parar separadamente para considerar diferentes tecnologias de instantâneos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, havia instantâneos do tipo Copy-on-Write (CoW), e os instantâneos nativos do VMware vSphere podem ser tomados como um exemplo clássico. O princípio de operação é o mesmo com o vmdk sobre o VMFS ou o NFS, que com sistemas de arquivos nativos como o VSAN. Depois de criar um instantâneo CoW, os dados originais (blocos ou arquivos vmdk) são congelados e, quando você tenta gravar em blocos congelados, uma cópia é criada e os dados são gravados em um novo bloco / arquivo (arquivo delta para vmdk). Como resultado, à medida que a árvore de instantâneos cresce, o número de acessos "espúrios" ao disco que não possuem nenhum significado produtivo aumenta e</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quedas / atrasos de desempenho aumentam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, foram inventados os instantâneos Redirect-on-Write (RoW), nos quais, em vez de criar cópias de blocos com dados, uma cópia dos metadados é criada e o registro continua sem atrasos, leituras e verificações adicionais. Com a implementação correta do RoW, os instantâneos têm efeito quase zero no desempenho do sistema de disco. O segundo efeito de trabalhar com metadados em vez dos dados ativos em si não é apenas a criação instantânea de instantâneos, mas também clones de VM, que imediatamente após a criação não ocupam espaço (não consideramos a sobrecarga do sistema para os arquivos de serviço da VM).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E o terceiro ponto principal que distingue radicalmente os instantâneos RoW de CoW para sistemas produtivos é a remoção instantânea do instantâneo. Parece que é assim? No entanto, você precisa se lembrar de como os snapshots da CoW funcionam e a remoção de um snapshot não é realmente uma remoção delta, mas sua confirmação. E aqui o tempo de sua confirmação é extremamente dependente do tamanho do delta acumulado e do desempenho do sistema de disco. Os instantâneos RoW são confirmados instantaneamente, simplesmente porque não importa quantos terabytes de diferença se acumulam, a exclusão (confirmação) de instantâneos RoW é uma atualização da tabela de metadados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E aqui aparece uma aplicação interessante dos instantâneos RoW - reduza o RPO para valores de dezenas de minutos. Fazer backups a cada 30 minutos é quase impossível no caso geral e, na maioria dos casos, é feito uma vez por dia, o que fornece um RPO de 24 horas. Mas, ao mesmo tempo, podemos fazer instantâneos de RoW em uma programação, levando o RPO para 15 a 30 minutos e armazená-los por um dia ou dois. Não há penalidade no desempenho, gastando apenas capacidade. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas existem algumas nuances.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para operação adequada de instantâneos nativos e integração com o VMware, o HyperFlex requer um instantâneo oficial chamado Sentinel. A captura instantânea do Sentinel é criada automaticamente quando você cria uma captura instantânea para uma determinada VM por meio do HXConnect e não deve excluí-la, não deve "voltar" para ela, basta confirmar que, na interface da lista de capturas instantâneas, esse é o primeiro instantâneo de serviço do Sentinel. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6v/xv/fk/6vxvfkz6yuhzkylorocntklep1w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As capturas instantâneas do HyperFlex podem ser executadas no modo consistente com falha ou no modo consistente com o aplicativo. O segundo tipo envolve "liberar buffers" dentro da VM, requer VMTools e inicia se a caixa de seleção "Quiesce" estiver marcada no menu de instantâneo do HXConnect.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Além dos snapshots HyperFlex, ninguém proíbe o uso de snapshots VMware "nativos". </font><font style="vertical-align: inherit;">Vale a pena para uma máquina virtual específica determinar quais instantâneos você usará e, no futuro, se concentrar nessa tecnologia, “não perturbando” diferentes instantâneos para uma VM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como parte do teste, tentei criar instantâneos e verificar sua FIO. </font><font style="vertical-align: inherit;">E, no entanto, sim, posso confirmar que os instantâneos são realmente RoW, eles não afetam o desempenho. </font><font style="vertical-align: inherit;">As capturas instantâneas são realmente criadas rapidamente (alguns segundos, dependendo do perfil de carregamento e do tamanho do conjunto de dados), posso dar a seguinte recomendação com base nos resultados: se a sua carga possui muitas operações de gravação aleatória, você deve começar a criar uma captura instantânea a partir da interface HXConnect, com a marca de verificação "Quiesce" e com uma prévia a presença de um instantâneo do Sentinel.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testes</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plataforma de teste</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A seguinte plataforma caiu em patas tenazes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 x C220 M4 (2630v4 10c x 2,20 GHz, 256, 800 + 6 * 960)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vSphere 6.7</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HX Data Platform 4.0.2</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teste de correção clara</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que tipo de teste sem o CrystalDisk? É isso mesmo, não pode ser, caras normais sempre iniciam um disco cristalizado! Bem, se for necessário, então é necessário. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hp/tl/x5/hptlx5eb-ojjdbwet5l87h6wjx4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para o disco de cristal, foi criada uma VM criada especialmente com 2 vCPU de 4 GB e Windows 7 a bordo. Ah, e eu cansei de colocar patches nele, eu vou te dizer! O teste foi realizado nas melhores tradições das melhores casas de Londres e Paris - ou seja, apenas um disco virtual foi adicionado sem pensar e o teste foi lançado. Sim, a propósito, é claro que o próprio CrystalDiskMark não está envolvido nos testes, é apenas uma interface, mas carrega diretamente o sistema de disco com o conhecido pacote DiskSpd incluído no kit. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ns/wt/i9/nswti9u6hmne-srf37nniqjevzq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que me impressionou literalmente - por algum motivo, todos ignoraram a escolha de unidades no canto superior direito. E tudo mais!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kg/3y/th/kg3ythef08dpqq3zcsrr20wmq8w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ouça, honestamente, eu não esperava 75 mil IOPS e mais de 1 gigabyte por segundo da micro-máquina no modo próximo ao próximo acabamento! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para dizer o mínimo, nem toda empresa na Rússia possui cargas que excedem esses indicadores no total. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Testes adicionais foram realizados usando o VMware HCI Bench e o Nutanix XRay, como “ideologicamente hostis” ao HyperFlex e, portanto, era esperado que não fôssemos presos. Como os números se mostraram extremamente próximos, os resultados do pacote XRay foram tomados como base simplesmente porque ele possui um sistema de relatórios mais conveniente e modelos de carregamento prontos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para quem não confia em ninguém e deseja controle total sobre o processo, lembro-lhe do meu artigo sobre como criar seu próprio sistema para gerar a carga em uma plataforma hiperconvergente - "</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sistemas de teste de desempenho giperkonvergentnyh e SDS com as próprias mãos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Achtung! </font><font style="vertical-align: inherit;">Uwaga! </font><font style="vertical-align: inherit;">Pozor!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos os outros resultados e suas interpretações são da opinião do autor do artigo e são apresentados por eles mesmos no âmbito do estudo do sistema. </font><font style="vertical-align: inherit;">A maioria dos testes é sintética simples e é aplicável apenas para entender os indicadores de limite em casos extremos e degenerados, que você nunca alcançará na vida real.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microbenchmark FourCorners</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O microteste de quatro lados foi projetado para avaliar o sistema "rapidamente" para obter o máximo desempenho teórico e máximo de desempenho dos controladores. A aplicação prática para esse teste é verificar o sistema imediatamente após o lançamento quanto a erros de configuração e ambiente, especialmente erros de rede. Essa. se você executa esses sistemas regularmente, sabe apenas quais números deve esperar "se tudo estiver bem". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/wl/70/imwl70bqxpwhlum10vhlhm1kbk0.png"><br>
<br>
<img src="https://habrastorage.org/webt/61/xf/ss/61xfss1sc92seaez55-aq_shz2i.png"><br>
<br>
<img src="https://habrastorage.org/webt/4x/38/l7/4x38l7clygg4y5lavoks-lecrfs.png"><br>
<br>
<img src="https://habrastorage.org/webt/si/he/kg/sihekgnrrioansimgwwetryowme.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Números finais: IOPS de 280k / 174k, 3,77 / 1,72 GBps (leitura / gravação) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como se comportaram nossos controladores?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-_/co/qv/-_coqvha1rwj6l78ng3fl_kowoi.png"><br>
<br>
<img src="https://habrastorage.org/webt/xu/hd/8s/xuhd8szlg-hrwoyeasjl-nqybbm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A partir do qual se pode observar que o consumo total de recursos para 4 controladores e 4 cargas de VM foi de 49 núcleos de 2,2. De acordo com as estatísticas da VMware, a utilização da CPU dos controladores era de até 80%, ou seja, de fato, o desempenho foi limitado pelo desempenho dos controladores e, especificamente, dos processadores. A velocidade das operações seqüenciais descansava especificamente contra a velocidade da rede 10G. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos tentar de novo. O desempenho máximo em um pequeno cluster de 4 nós com os processadores de 2,2 GHz mais rápidos é de quase 300 mil IOPS em alturas de 4U. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A conversa "aqui temos 10, 20 ou até 40% a mais / menos" é praticamente sem sentido devido à ordem dos números. O mesmo que começar a medir "e eu posso ter um carro 240, tenho 280", apesar do limite ser 80.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os nós de 280k / 4 oferecem um desempenho máximo de 70k / nó, que por exemplo excede os números da calculadora VMware VSAN, que pressupõe que o nó AF emita não mais que 46k por grupo de discos. </font><font style="vertical-align: inherit;">No nosso caso, aqui na terminologia do VMware, há apenas um grupo de discos, que é executado na x1.8.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efeito do tamanho do bloco do armazenamento de dados</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao criar um armazenamento de dados HyperFlex, você pode escolher o tamanho do bloco de dados - 4k ou 8k. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que isso afetará? </font><font style="vertical-align: inherit;">Execute o mesmo teste quadrangular. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/70/rc/vf/70rcvfpf8-l_zewvlxiawo6lgmm.png"><br>
<br>
<img src="https://habrastorage.org/webt/gd/s6/ys/gds6ysghq6zmspmh1aiprlngtni.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se a imagem é quase idêntica à leitura, o registro é contrário. </font><font style="vertical-align: inherit;">O teste quadrangular utiliza uma carga de 8k. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Números totais: 280k / 280k, 172-158k / 200-180k (4k 8k). </font><font style="vertical-align: inherit;">Quando o tamanho do bloco corresponde, é obtido + 15% do desempenho da gravação. </font><font style="vertical-align: inherit;">Se você espera uma quantidade significativa de gravação com um pequeno bloco (4k) na carga - crie um armazenamento de dados para essa carga específica com um bloco de 4k, caso contrário, use 8k.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simulador OLTP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um quadro muito mais próximo da realidade é dado por outro teste. </font><font style="vertical-align: inherit;">Como parte disso, dois geradores são lançados com um perfil próximo a um DBMS transacional e um nível de carga de 6000 + 400 IOPS. </font><font style="vertical-align: inherit;">Aqui, o atraso é medido, o que deve permanecer em um nível baixo estável. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/aw/tb/ty/awtbtyfcnnow6yydbgr28dpgiqc.png"><br>
<br>
<img src="https://habrastorage.org/webt/o9/kd/m1/o9kdm1zv2lksnqi1g7qk8o5gl7m.png"><br>
<br>
<img src="https://habrastorage.org/webt/cp/3n/oh/cp3noh9aqrp7y0kfrdgehpd19xe.png"><br>
<br>
<img src="https://habrastorage.org/webt/rn/qh/0j/rnqh0jmup291dks_4ir4eg1ssu8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O atraso para o carregamento da VM foi de 1,07 / 1,08 ms. </font><font style="vertical-align: inherit;">Em suma, um ótimo resultado, mas vamos adicionar um pouco de calor!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Colocação do Banco de Dados: Alta Intensidade</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como a base transacional se comportará, dependendo dos atrasos, se de repente um vizinho consecutivo barulhento for formado. </font><font style="vertical-align: inherit;">Bem, muito barulhento. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0s/wg/1w/0swg1wykmap5tqivoahd3qymfbe.png"><br>
<br>
<img src="https://habrastorage.org/webt/kr/uy/xh/kruyxhmfiswvbc2tue7whwpwu60.png"><br>
<br>
<img src="https://habrastorage.org/webt/jw/3l/ib/jw3libpbrez473tlexzbilmepyy.png"><br>
<br>
<img src="https://habrastorage.org/webt/p1/4g/2j/p14g2jumznxoh8oyw2y1f3slyge.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, a base OLTP no nó 1 gera 4200 IOPS com atraso de 0,85 ms. </font><font style="vertical-align: inherit;">O que acontece depois que um sistema DSS repentinamente começa a consumir recursos em operações seqüenciais? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dois geradores nos nós 2 e 3 carregam a plataforma em 1,18 / 1,08 GBps, respectivamente, esses 2,26 GBps no total. </font><font style="vertical-align: inherit;">É claro que o atraso no OLTP aumenta e se torna menos estável, mas o valor médio permanece 1,85ms, e a base recebe seus 4200 IOPS sem problemas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impacto da captura instantânea</font></font></h3><br>
<img src="https://habrastorage.org/webt/n0/eo/w8/n0eow8pfcfna7kqwhrt0xblqq8g.png"><br>
<br>
<img src="https://habrastorage.org/webt/-a/0h/dl/-a0hdlvysga1zwnpwtyvb1zq1_c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sistema sequencialmente tira vários instantâneos uma vez por hora em uma base OLTP. </font><font style="vertical-align: inherit;">Não há nada de surpreendente no cronograma e, além disso, geralmente é um indicador de como os instantâneos clássicos do VMware funcionam, pois o Nutanix XRay não sabe como trabalhar com os instantâneos nativos, exceto os seus. </font><font style="vertical-align: inherit;">Você não precisa usar os instantâneos do vSphere regularmente, porque nem todos os iogurtes são igualmente úteis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os snapshots nativos do HyperFlex funcionam muito melhor, use-os e seu cabelo ficará macio e sedoso!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ingestão de Big Data</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o HyperFlex digerirá uma grande quantidade de dados carregados sequencialmente? </font><font style="vertical-align: inherit;">Bem, digamos 1 TB. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0f/ll/m7/0fllm7dze4walp1c2xff9msn-wg.png"><br>
<br>
<img src="https://habrastorage.org/webt/vx/go/ig/vxgoigfhqqpqguabodmsmklgmma.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O teste levou 27 minutos, incluindo clonagem, ajuste e partida dos geradores.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escalabilidade de taxa de transferência</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, carregue gradualmente todo o cluster e observe os números constantes. Para começar com a leitura aleatória e depois a escrita. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iu/kb/jy/iukbjyoms8btipiqv8ckw7-oikg.png"><br>
<br>
<img src="https://habrastorage.org/webt/zw/zj/gy/zwzjgyqeu9wn4ofiatztt5umy70.png"><br>
<br>
<img src="https://habrastorage.org/webt/zd/eu/r2/zdeur21emet_sylypa1p7btvg9c.png"><br>
<br>
<img src="https://habrastorage.org/webt/_u/z1/_p/_uz1_p1ht5ll4bihnaeuxj_znoa.png"><br>
<br>
<img src="https://habrastorage.org/webt/-c/ms/o4/-cmso46htkcgb6ixeetyowyninq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estamos vendo uma imagem estável com uma diminuição gradual no desempenho da carga da máquina de 78k para 55-57k IOPS, com prateleiras suaves. Ao mesmo tempo, há um aumento constante no desempenho geral de 78 para 220k IOPS. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/to/cj/w0/tocjw0zga3ug1recbqb8oa133sq.png"><br>
<br>
<img src="https://habrastorage.org/webt/3z/nt/df/3zntdf3yigfx_acxr0ra6n5nwfa.png"><br>
<br>
<img src="https://habrastorage.org/webt/od/4x/jh/od4xjhnjcvxthkezbcrncc33c5a.png"><br>
<br>
<img src="https://habrastorage.org/webt/mu/zj/mz/muzjmzjtko49unkx1iwzzm_zzo0.png"><br>
<br>
<img src="https://habrastorage.org/webt/v4/wr/0j/v4wr0jbbzvpfz94majmfgisny1m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A gravação é um pouco menos suave, mas ainda estáveis ​​nas prateleiras de 64k a 19-21k por carro. Ao mesmo tempo, a carga nos controladores é muito menor. Se durante a leitura o nível de carga total do processador aumentou de 44 para 109, em seguida, na gravação de 57 para 73 GHz.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui você pode observar o exemplo mais simples e óbvio dos recursos dos sistemas hiperconvergentes - o único consumidor simplesmente não é capaz de utilizar completamente todos os recursos do sistema e, quando a carga é adicionada, não há queda significativa no desempenho. </font><font style="vertical-align: inherit;">A queda que estamos testemunhando já é o resultado de cargas sintéticas extremas projetadas para comprimir tudo até a última gota, o que quase nunca ocorre em um produto normal.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quebrando OLTP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A essa altura, tornou-se ainda chato o quão previsível o HyperFlex era. </font><font style="vertical-align: inherit;">Necessidade urgente de quebrar alguma coisa! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nw/rq/da/nwrqdazu_dn_gpyg6cdu3z0paju.png"><br>
<br>
<img src="https://habrastorage.org/webt/wr/fw/ks/wrfwkshatwbjd5gr2rvvtevdf8s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O ponto vermelho marca o momento em que a VM do controlador é encerrada em um dos hosts com uma carga. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como, por padrão, a reconstrução no HyperFlex inicia imediatamente apenas quando o disco é perdido e, quando o nó é perdido, o tempo limite é de 2 horas, o momento da reconstrução forçada é marcado com um ponto verde.</font></font><br>
<br>
<pre><code class="plaintext hljs">login as: admin<font></font>
 HyperFlex StorageController 4.0(2a)<font></font>
admin@192.168.***.***'s password:<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt; stcli rebalance status<font></font>
rebalanceStatus:<font></font>
    percentComplete: 0<font></font>
    rebalanceState: cluster_rebalance_not_running<font></font>
rebalanceEnabled: True<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt; stcli rebalance start -f<font></font>
msgstr: Successfully started rebalance<font></font>
params:<font></font>
msgid: Successfully started rebalance<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt; stcli rebalance status<font></font>
rebalanceStatus:<font></font>
    percentComplete: 16<font></font>
    rebalanceState: cluster_rebalance_ongoing<font></font>
rebalanceEnabled: True<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt;</code></pre><br>
<img src="https://habrastorage.org/webt/sh/ry/qo/shryqousd3rdr6w7pwmdemcjpzk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As operações congelaram por alguns segundos e continuaram novamente, quase percebendo a reconstrução. </font><font style="vertical-align: inherit;">Ele está em um estado estável quando está longe da sobrecarga do cluster. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por que 2 horas Cisco não é um problema, embora os concorrentes tenham menos números? </font><font style="vertical-align: inherit;">A Cisco recomenda enfaticamente o uso do RF3 como um nível básico de proteção de dados para tudo, exceto máquinas que não são uma pena. </font><font style="vertical-align: inherit;">Você decidiu instalar patches ou fazer algo com o host, desligue-o. </font><font style="vertical-align: inherit;">E existe a chance de que nesse momento outro host falhe - e, no caso da RF2, tudo se tornará uma aposta, e com a RF3 haverá uma cópia ativa dos dados. </font><font style="vertical-align: inherit;">E sim, é realmente possível sobreviver duas horas em um acidente na RF2 até que a recuperação da RF3 comece.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Me quebre completamente!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quebrando - tão quebrando. </font><font style="vertical-align: inherit;">Carga máxima. </font><font style="vertical-align: inherit;">Nesse caso, criei um teste com um perfil mais ou menos semelhante a uma carga real (70% lida, 20% aleatória, 8k, 6d 128q). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4k/6l/rr/4k6lrrwh29qbybibwy2_gvq9y-e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adivinhe onde a CVM foi desativada e onde começou a reconstrução? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0h/ur/am/0huramdwazcpyvzycht-hn1bwks.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na situação com a reconstrução, o HyperFlex teve um bom desempenho, sem causar uma queda catastrófica no desempenho ou um aumento múltiplo nos atrasos, mesmo sob carga sob os tomates. </font><font style="vertical-align: inherit;">A única coisa que eu realmente gostaria é da querida Cisco, fazer o tempo limite ser igual a menos de 2 horas por padrão.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">achados</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para concluir, recordo o objetivo do teste: investigar o sistema Cisco HyperFlex hoje, sem olhar para o histórico, investigar seu desempenho usando sintéticos e tirar conclusões sobre sua aplicabilidade a um produto real. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusão 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sobre desempenho. O desempenho é muito bom e você não comenta aqui. Como eu tinha um sistema da geração anterior em teste, posso dizer exatamente uma coisa: no HyperFlex All Flash, você terá capacidade, processador e memória, mas não discos. Exceto, talvez, 1% dos aplicativos sobrecarregados, mas é necessário conversar pessoalmente com eles. Os instantâneos de RoW nativos funcionam. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusão 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, por disponibilidade. O sistema após a detecção de uma falha é bastante bom (sem uma queda de desempenho às vezes) realiza a restauração do número de cópias de dados. Há uma pequena reclamação no tempo limite padrão de duas horas antes de iniciar a recuperação (se o host for perdido), mas, considerando o RF3 altamente recomendado, isso é mais exigente. A recuperação após uma falha no disco começa imediatamente. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusão 3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, em preço e comparação com concorrentes. </font><font style="vertical-align: inherit;">O preço do sistema pode variar muitas vezes, dependendo da configuração de um projeto específico. </font><font style="vertical-align: inherit;">Uma grande parte do custo do projeto será um sistema licenciado e software de aplicativo, que funcionará na parte superior da plataforma de infraestrutura. </font><font style="vertical-align: inherit;">Portanto, a única maneira de comparar com os concorrentes é comparar ofertas comerciais específicas que atendem aos requisitos técnicos, especificamente para sua empresa para um projeto específico. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusão final</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : o sistema está funcionando, bastante maduro para uso no produto em abril de 2020, se as recomendações do fornecedor forem lidas e aplicadas, em vez de fumar.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt497010/index.html">Investir em períodos de desaceleração do mercado: 3 estratégias de comportamento na bolsa de valores</a></li>
<li><a href="../pt497014/index.html">Quem é você, engenheiro ou testador de controle de qualidade?</a></li>
<li><a href="../pt497016/index.html">13 de abril - Java Digest</a></li>
<li><a href="../pt497020/index.html">DocuSign, um popular serviço de assinatura digital, agora suporta a infraestrutura GlobalSign</a></li>
<li><a href="../pt497022/index.html">Atualizando o acesso à rede corporativa. Novos comutadores ExtremeSwitching X435 Gigabit</a></li>
<li><a href="../pt497028/index.html">Bem-vindo ao MeetUp de sistema operacional de robô</a></li>
<li><a href="../pt497030/index.html">Experiência na implementação de fábricas de rede baseadas em EVPN VXLAN e Cisco ACI e uma pequena comparação</a></li>
<li><a href="../pt497032/index.html">Negócio de serviços e crise: histórias de sucesso. Como o pensamento fora da caixa funciona para você?</a></li>
<li><a href="../pt497034/index.html">O que é o novo nRF Connect SDK for Nordic? Evolução, revolução ou alternativa?</a></li>
<li><a href="../pt497036/index.html">Quando parar o processo de reconhecimento de sequência de vídeo?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>