<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçú üë©‚Äçüè≠ üë®üèæ Por que hiperconverg√™ncia? Vis√£o geral e testes do Cisco HyperFlex ü§üüèæ üç§ üë©üèΩ‚Äçüîß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em TI, o principal √© tr√™s letras
 A tarefa de qualquer infraestrutura de TI √© fornecer uma plataforma confi√°vel para os processos de neg√≥cios da empre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Por que hiperconverg√™ncia? Vis√£o geral e testes do Cisco HyperFlex</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/cti/blog/497024/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em TI, o principal √© tr√™s letras</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A tarefa de qualquer infraestrutura de TI √© fornecer uma plataforma confi√°vel para os processos de neg√≥cios da empresa. Tradicionalmente, acredita-se que a qualidade da infraestrutura de tecnologia da informa√ß√£o seja avaliada de acordo com tr√™s par√¢metros principais: acessibilidade, seguran√ßa e confiabilidade. No entanto, a avalia√ß√£o para esse triplo n√£o est√° de forma alguma relacionada aos neg√≥cios e √† receita / perda direta da empresa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tr√™s letras principais governam a TI. Se as letras "RUB" n√£o estiverem no topo da hierarquia de TI, voc√™ estar√° criando sua infraestrutura de TI incorretamente. Obviamente, √© dif√≠cil criar TI diretamente, come√ßando apenas com receitas / despesas; portanto, existe uma hierarquia de ‚Äútr√™s letras‚Äù - das mais importantes √†s mais privadas. SLA, RPO, RTO, GRC - tudo isso √© conhecido por especialistas do setor e h√° muito tempo √© usado na constru√ß√£o de infra-estruturas. Infelizmente, nem sempre vinculamos esses indicadores a uma hierarquia de ponta a ponta.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oj/wm/6n/ojwm6n6_0mqymccxwojckh8q4fi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoje, muitas empresas est√£o construindo infraestrutura para o futuro usando a tecnologia de ontem na arquitetura de ontem. </font><font style="vertical-align: inherit;">E, ao mesmo tempo, o desenvolvimento acelerado da TI mostra que os servi√ßos modernos est√£o mudando fundamentalmente n√£o apenas os neg√≥cios, mas tamb√©m a sociedade - as pessoas da era digital est√£o acostumadas ao fato de que alguns segundos s√£o suficientes para acessar qualquer informa√ß√£o. </font><font style="vertical-align: inherit;">A TI de uma tecnologia incompreens√≠vel se tornou comum para as massas, como um hamb√∫rguer ou uma cafeteria. </font><font style="vertical-align: inherit;">Isso adicionou novas tr√™s cartas extremamente importantes √† TI. </font><font style="vertical-align: inherit;">Essas cartas - TTM (Time to market) - o tempo antes do lan√ßamento de um servi√ßo produtivo no mercado.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ot/k1/ns/otk1nsmpnwofr1v2bzlexp5a9j8.png"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sds</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por outro lado, um kraken surgiu das profundezas da tecnologia, revertendo a TI e o estilo de vida tradicionais. √Ä medida que o poder de computa√ß√£o dos processadores x86 aumentou, os sistemas de armazenamento de software se tornaram o primeiro tent√°culo. Os sistemas cl√°ssicos de armazenamento eram pe√ßas muito espec√≠ficas de ferro cheias de ‚Äúsil√≠cio personalizado‚Äù, v√°rios aceleradores de hardware propriet√°rios e software especializado. E era administrado por uma pessoa especialmente treinada que era praticamente adorada na companhia como sacerdote de um culto das trevas. Expandir o sistema de armazenamento de dados em opera√ß√£o na empresa foi um projeto inteiro, com muitos c√°lculos e aprova√ß√µes - afinal, √© caro!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O alto custo e a complexidade estimularam a cria√ß√£o de sistemas de armazenamento de software sobre o hardware x86 usual, com um sistema operacional de uso geral comum - Windows, Linux, FreeBSD ou Solaris. Somente o software permaneceu no hardware personalizado complexo, funcionando nem mesmo no kernel, mas no n√≠vel do usu√°rio. Os primeiros sistemas de software eram obviamente bastante simples e limitados em funcionalidade, geralmente eram solu√ß√µes de nicho especializadas, mas o tempo passava. E agora at√© grandes fornecedores de sistemas de armazenamento come√ßaram a abandonar solu√ß√µes especializadas de hardware - o TTM para esses sistemas n√£o podia mais suportar a concorr√™ncia e o custo do erro tornou-se muito alto. De fato, com raras exce√ß√µes, at√© os sistemas de armazenamento cl√°ssicos at√© 2020 se tornaram os servidores x86 mais comuns, apenas com lindos focinhos de pl√°stico e v√°rias prateleiras de discos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O segundo tent√°culo do kraken que se aproxima √© a apar√™ncia e a ado√ß√£o maci√ßa pelo mercado da tecnologia de mem√≥ria flash, que se tornou um pilar de concreto quebrando as costas de um elefante.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O desempenho dos discos magn√©ticos n√£o muda h√° muitos anos e os processadores dos controladores de armazenamento lidam completamente com centenas de discos. </font><font style="vertical-align: inherit;">Por√©m, mais cedo ou mais tarde, a quantidade se tornar√° qualidade - e o sistema de armazenamento j√° est√° em um n√≠vel m√©dio, sem mencionar o inicial, e possui um limite superior no n√∫mero significativo de unidades flash. </font><font style="vertical-align: inherit;">Com uma certa quantidade (literalmente de dez discos), o desempenho do sistema n√£o para de crescer, mas tamb√©m pode come√ßar a diminuir devido √† necessidade de processar um volume cada vez maior. </font><font style="vertical-align: inherit;">Afinal, o poder de processamento e a taxa de transfer√™ncia dos controladores n√£o mudam com o aumento da capacidade. </font><font style="vertical-align: inherit;">A solu√ß√£o, em teoria, foi o surgimento de sistemas de expans√£o que podem montar muitas prateleiras independentes com discos e recursos de processador em um √∫nico cluster que parece de fora como um √∫nico sistema de armazenamento com v√°rios controladores. </font><font style="vertical-align: inherit;">Restava apenas um passo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hiper converg√™ncia</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O passo mais √≥bvio para o futuro foi a unifica√ß√£o de pontos de processamento e armazenamento de dados anteriormente d√≠spares. Em outras palavras, por que n√£o implementar o armazenamento distribu√≠do, n√£o em servidores separados, mas diretamente nos hosts de virtualiza√ß√£o, recusando, assim, uma rede de armazenamento especial e um hardware dedicado, combinando fun√ß√µes. O kraken acordou. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas deixe-me dizer, voc√™ v√™, porque combina√ß√£o √© converg√™ncia. De onde veio esse prefixo est√∫pido hiper?</font></font><br>
<blockquote>        .        +  + .    .    ,      ‚Äú ‚Äù.<br>
‚Ä¶<br>
 ,  ,            ,        .       ‚Äî       SDS.<br>
<br>
:<br>
<br>
<ul>
<li>  ‚Äî , ,       ,   /.    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sistema convergente - tudo de uma fonte, um suporte, um n√∫mero de parceiro. </font><font style="vertical-align: inherit;">N√£o deve ser confundido com a montagem autom√°tica de um fornecedor.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E acontece que o termo para nossa arquitetura convergente j√° foi adotado. </font><font style="vertical-align: inherit;">Exatamente a mesma situa√ß√£o que com o supervisor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sistema hiperconvergente - Um sistema convergente com arquitetura convergente.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As defini√ß√µes s√£o retiradas do artigo " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teoria Geral e Arqueologia da Virtualiza√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", na qual escrevi uma parte animada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que d√° a abordagem hiperconvergente no aplicativo √†s tr√™s letras mencionadas?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comece com um volume m√≠nimo (e custo m√≠nimo)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capacidade de armazenamento cresce com poder de computa√ß√£o</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cada n√≥ do sistema √© seu controlador - e o problema do "teto de vidro" √© removido (os discos podem, mas o controlador n√£o existe mais)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gerenciamento de armazenamento simplificado drasticamente</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para o √∫ltimo par√°grafo, os sistemas hiperconvergentes n√£o gostam muito dos administradores de armazenamento no modo antigo, usados ‚Äã‚Äãpara administrar filas nas portas Fibre Channel. </font><font style="vertical-align: inherit;">O espa√ßo √© alocado em apenas alguns cliques do mouse no console de gerenciamento da infraestrutura virtual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em outras palavras, apenas as nuvens s√£o mais r√°pidas que os sistemas hiperconvergentes no lan√ßamento de um produto, mas as nuvens n√£o s√£o adequadas para todos e / ou nem sempre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ √© um administrador t√©cnico e l√™ at√© aqui - regozije-se, as palavras gerais terminaram e agora vou falar sobre minha vis√£o pessoal do sistema Cisco Hyperflex, que recebi em patas tenazes por realizar v√°rios testes nele.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cisco Hyperflex</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que a Cisco</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A Cisco √© conhecida principalmente como fornecedor dominante no mercado de equipamentos de rede, mas ao mesmo tempo est√° amplamente presente em outros segmentos do mercado de data centers, oferecendo solu√ß√µes para servidores e hiperconvergentes, bem como sistemas de automa√ß√£o e controle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Surpreendentemente, at√© 2020, ainda existem pessoas: ‚ÄúServidores Cisco? E de quem ela os tira?</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A Cisco come√ßou a lidar com servidores j√° em 2009, escolhendo o caminho do crescimento ativo das solu√ß√µes blade naquele momento. A id√©ia da Cisco era implementar a abordagem de calculadoras an√¥nimas. O resultado foi um sistema UCS (Sistema de Computa√ß√£o Unificado) que consiste em dois comutadores especializados (chamados de Fabric Interconnect) e de 1 a 20 chassis (8 blades de tamanho m√©dio) ou at√© 160 servidores. Ao mesmo tempo, o chassi tornou-se geralmente est√∫pido com um peda√ßo de ferro com pot√™ncia, toda a l√≥gica e comuta√ß√£o s√£o feitas no Fabric Interconnect; o chassi √© apenas uma maneira de hospedar servidores e conect√°-los ao sistema. O Fabric Interconnect √© totalmente respons√°vel por todas as intera√ß√µes do servidor com o mundo externo - Ethernet, FC e gerenciamento. Parece que as l√¢minas e l√¢minas, o que est√° l√°, exceto para comuta√ß√£o externa, e n√£o como todos os outros no chassi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um momento chave na implementa√ß√£o dessas mesmas ‚Äúcalculadoras an√¥nimas‚Äù. Como parte do conceito do Cisco UCS, os servidores n√£o t√™m outra personalidade al√©m de um n√∫mero de s√©rie. Nem MAC, nem WWN, nem qualquer outra coisa. O sistema de gerenciamento UCS desenvolvido pela Fabric Interconnect √© baseado em perfis e modelos de servidor. Ap√≥s conectar um pacote de servidores no chassi, eles precisam receber um perfil apropriado, dentro do qual todos os endere√ßos e identificadores de identifica√ß√£o s√£o definidos. Obviamente, se voc√™ tiver apenas uma d√∫zia de servidores, o jogo n√£o valer√° a pena. Mas quando h√° pelo menos duas, ou mesmo tr√™s d√∫zias delas, essa √© uma vantagem s√©ria. Torna-se f√°cil e r√°pido migrar configura√ß√µes ou, mais importante, replicar configura√ß√µes de servidor na quantidade certa, aplicar as altera√ß√µes imediatamente a um grande n√∫mero de servidores,essencialmente gerenciando um conjunto de servidores (por exemplo, um farm de virtualiza√ß√£o) como uma √∫nica entidade. A abordagem proposta no sistema UCS permite, com a abordagem correta, simplificar seriamente a vida dos administradores, aumentar a flexibilidade e reduzir significativamente os riscos, para que os blades UCS literalmente em 2 a 3 anos se tornem a plataforma blade mais vendida no Hemisf√©rio Ocidental, e hoje eles s√£o globalmente uma das duas plataformas dominantes, junto com a HPE.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Logo ficou claro que a mesma abordagem baseada em uma f√°brica universal com gerenciamento integrado baseado em pol√≠ticas e modelos √© totalmente requisitada e se aplica n√£o apenas a blades, mas tamb√©m a servidores em rack. E, nesse sentido, os servidores de montagem em rack da Cisco conectados ao Fabric Interconnect obt√™m os mesmos benef√≠cios que tornam os blades t√£o populares. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoje vou falar sobre o HyperFlex, uma solu√ß√£o hiperconvergente da Cisco constru√≠da em servidores montados em rack conectados ao Fabric Interconnect. O que torna o HyperFlex interessante e vale a pena considerar na revis√£o:</font></font><br>
<br>
<ul>
<li>  Cisco   ,  , ¬´¬ª ‚Äì        ,      HyperFlex;     , ,   ,         HyperFlex    ;</li>
<li>   ‚Äì          ;  HyperFlex  ,    ,      ;          ,       .</li>
<li> ¬´  ¬ª ‚Äî     ¬´ ¬ª,       ,       ;</li>
<li>           Fabric Interconnect    Cisco   -,     SAN ,       native FC;</li>
<li>    ‚Äú‚Äù ‚Äì  ,  ,     ;</li>
<li>   Cisco      ,   ,            ,      ;</li>
<li>  ,      , Cisco        HCI,      , HyperFlex      ,   ,   .</li>
</ul><br>
<h3> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O HyperFlex √© um verdadeiro sistema hiperconvergente com VMs controladoras dedicadas. </font><font style="vertical-align: inherit;">Deixe-me lembr√°-lo de que a principal vantagem dessa arquitetura √© sua portabilidade potencial para diferentes hipervisores. </font><font style="vertical-align: inherit;">Hoje, a Cisco implementou o suporte ao VMware ESXi e Microsoft Hyper-V, mas √© poss√≠vel que uma das op√ß√µes do KVM apare√ßa √† medida que sua popularidade cresce no segmento corporativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere o mecanismo de trabalho no exemplo do ESXi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os dispositivos que usam a tecnologia VM_DIRECT_PATH - disco de cache e discos de n√≠vel de armazenamento - s√£o lan√ßados diretamente para a VM do controlador (a seguir CVM). </font><font style="vertical-align: inherit;">Portanto, exclu√≠mos o efeito da pilha de discos do hipervisor no desempenho. </font><font style="vertical-align: inherit;">Pacotes VIB adicionais s√£o instalados no pr√≥prio hypervisor:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO Visor: fornece o ponto de montagem do armazenamento de dados NFS para o hypervisor</font></font></li>
<li>VAAI:   VMware  API  ¬´ ¬ª </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os blocos de disco virtual s√£o distribu√≠dos uniformemente por todos os hosts em um cluster com relativamente pouca granularidade. Quando a VM no host executa algum tipo de opera√ß√£o em disco, atrav√©s da pilha de discos do hipervisor, a opera√ß√£o vai para o armazenamento de dados, depois para o IO Visor e depois para a CVM respons√°vel por esses blocos. Nesse caso, o CVM pode estar localizado em qualquer host do cluster. Dado os recursos muito limitados do IO Visor, √© claro que n√£o h√° tabelas de metadados e a escolha √© matematicamente determinada. Em seguida, a CVM que a solicita√ß√£o chegou processou. No caso de leitura, ele envia dados de um dos n√≠veis de cache (RAM, cache de grava√ß√£o, cache de leitura) ou dos discos de seu host. No caso de grava√ß√£o, ele grava no di√°rio local e duplica a opera√ß√£o para um (RF2) ou dois (RF3) CVM.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k_/hq/eq/k_hqeqytlifhbevdrf8r7mk_rv0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez isso seja suficiente para entender o princ√≠pio do trabalho dentro da estrutura desta publica√ß√£o; caso contr√°rio, pegarei o p√£o dos treinadores da Cisco e ficarei com vergonha. </font><font style="vertical-align: inherit;">Na verdade n√£o, mas ainda o suficiente.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pergunta sobre testes sint√©ticos</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Navegador, aparelhos! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
36! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- O que √© 36? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- E os eletrodom√©sticos? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algo assim hoje parece com a maioria dos testes sint√©ticos de sistemas de armazenamento. Por que √© que? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At√© relativamente recentemente, a maioria dos sistemas de armazenamento era plana com acesso uniforme. O que isto significa? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O espa√ßo total em disco dispon√≠vel foi coletado de discos com as mesmas caracter√≠sticas. Por exemplo, 300 unidades de 15k. E o desempenho foi o mesmo em todo o espa√ßo. Com o advento da tecnologia de armazenamento em camadas, os sistemas de armazenamento tornaram-se n√£o est√°veis ‚Äã‚Äã- o desempenho varia em um √∫nico espa√ßo em disco. E n√£o √© apenas diferente, mas tamb√©m imprevis√≠vel, dependendo dos algoritmos e recursos de um modelo de armazenamento espec√≠fico.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E tudo n√£o seria t√£o interessante se os sistemas hiperconvergentes com localiza√ß√£o de dados n√£o aparecessem. </font><font style="vertical-align: inherit;">Al√©m da desigualdade do pr√≥prio espa√ßo em disco (cansa√ß√µes, caches em flash), tamb√©m h√° acesso desigual a ele - dependendo se uma das c√≥pias de dados est√° localizada nos discos locais do n√≥ ou se deve ser acessada pela rede. </font><font style="vertical-align: inherit;">Tudo isso leva ao fato de que o n√∫mero de testes sint√©ticos pode ser absolutamente qualquer, e n√£o falar de nada praticamente significativo. </font><font style="vertical-align: inherit;">Por exemplo, o consumo de combust√≠vel de um carro de acordo com uma brochura publicit√°ria que voc√™ nunca pode alcan√ßar na vida real.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pergunta sobre dimensionamento</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O outro lado dos n√∫meros de teste sint√©ticos foi dimensionar n√∫meros e especifica√ß√µes sob o teclado de pr√©-venda. Neste caso, as pr√©-vendas s√£o divididas em duas categorias - algumas simplesmente estupidamente martelam seu TK no configurador do fornecedor, e o segundo √© o pr√≥prio, porque eles entendem como ele funciona. Mas com o segundo voc√™ ter√° que considerar em detalhes o que escreveu no seu TK. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ sabe, sem um TK claro - o resultado do HZ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nk/li/uq/nkliuqyn2iv0ogsigw-nd_m94ky.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por experi√™ncia pr√°tica - ao dimensionar um sistema hiperconvergente bastante pesado em uma competi√ß√£o com um dos clientes, pessoalmente, depois do piloto, peguei os indicadores de carga do sistema e os comparei com o que estava escrito no TOR. Acabou como em uma piada:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Rabinovich, √© verdade que voc√™ ganhou um milh√£o na loteria? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Quem te contou isso? </font><font style="vertical-align: inherit;">N√£o um milh√£o, mas dez rublos, n√£o na loteria, mas na prefer√™ncia, e n√£o ganhou, mas perdeu.</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em outras palavras, a situa√ß√£o cl√°ssica do GIGO - Garbage In Garbage Out - Entrada de lixo = Lixo na sa√≠da. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O dimensionamento pr√°tico aplic√°vel para a hiperconverg√™ncia √© quase garantido para ser de dois tipos: leve-nos com uma margem ou, por um longo tempo, dirigiremos um piloto e tomaremos indicadores.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° mais um ponto no dimensionamento e avalia√ß√£o das especifica√ß√µes. Sistemas diferentes s√£o constru√≠dos de maneira diferente e funcionam de maneira diferente com discos; seus controladores interagem de maneira diferente. Portanto, √© praticamente in√∫til comparar ‚Äúfrente a frente‚Äù de acordo com as especifica√ß√µes, o n√∫mero e o volume de discos. Voc√™ tem algum tipo de TK, dentro do qual entende o n√≠vel de carga. E h√° um certo n√∫mero de caixas de velocidades, nas quais voc√™ oferece v√°rios sistemas que atendem aos requisitos de desempenho e confiabilidade. Qual √© a diferen√ßa fundamental, quanto custa um disco e que tipo no sistema 1, e que no sistema 2 existem mais / menos deles se ambos lidarem com √™xito com a tarefa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o desempenho √© geralmente determinado pelos controladores que vivem nos mesmos hosts que as m√°quinas virtuais, para alguns tipos de cargas, ele pode nadar significativamente, simplesmente porque processadores com frequ√™ncias diferentes est√£o localizadas em diferentes clusters, sendo todas as outras coisas iguais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em outras palavras, mesmo o arquiteto-arquiteto de pr√©-venda mais experiente n√£o informar√° a especifica√ß√£o com mais precis√£o do que voc√™ formula os requisitos e com mais precis√£o do que "bem, em algum lugar do SAM-VOSEM" sem projetos-piloto.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/79/su/eq/79sueqtcnez6nz-kop4mp1i4qlq.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre instant√¢neos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O HyperFlex pode fazer instant√¢neos nativos de m√°quinas virtuais usando a tecnologia Redirect-on-Write. E aqui √© necess√°rio parar separadamente para considerar diferentes tecnologias de instant√¢neos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, havia instant√¢neos do tipo Copy-on-Write (CoW), e os instant√¢neos nativos do VMware vSphere podem ser tomados como um exemplo cl√°ssico. O princ√≠pio de opera√ß√£o √© o mesmo com o vmdk sobre o VMFS ou o NFS, que com sistemas de arquivos nativos como o VSAN. Depois de criar um instant√¢neo CoW, os dados originais (blocos ou arquivos vmdk) s√£o congelados e, quando voc√™ tenta gravar em blocos congelados, uma c√≥pia √© criada e os dados s√£o gravados em um novo bloco / arquivo (arquivo delta para vmdk). Como resultado, √† medida que a √°rvore de instant√¢neos cresce, o n√∫mero de acessos "esp√∫rios" ao disco que n√£o possuem nenhum significado produtivo aumenta e</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quedas / atrasos de desempenho aumentam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, foram inventados os instant√¢neos Redirect-on-Write (RoW), nos quais, em vez de criar c√≥pias de blocos com dados, uma c√≥pia dos metadados √© criada e o registro continua sem atrasos, leituras e verifica√ß√µes adicionais. Com a implementa√ß√£o correta do RoW, os instant√¢neos t√™m efeito quase zero no desempenho do sistema de disco. O segundo efeito de trabalhar com metadados em vez dos dados ativos em si n√£o √© apenas a cria√ß√£o instant√¢nea de instant√¢neos, mas tamb√©m clones de VM, que imediatamente ap√≥s a cria√ß√£o n√£o ocupam espa√ßo (n√£o consideramos a sobrecarga do sistema para os arquivos de servi√ßo da VM).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E o terceiro ponto principal que distingue radicalmente os instant√¢neos RoW de CoW para sistemas produtivos √© a remo√ß√£o instant√¢nea do instant√¢neo. Parece que √© assim? No entanto, voc√™ precisa se lembrar de como os snapshots da CoW funcionam e a remo√ß√£o de um snapshot n√£o √© realmente uma remo√ß√£o delta, mas sua confirma√ß√£o. E aqui o tempo de sua confirma√ß√£o √© extremamente dependente do tamanho do delta acumulado e do desempenho do sistema de disco. Os instant√¢neos RoW s√£o confirmados instantaneamente, simplesmente porque n√£o importa quantos terabytes de diferen√ßa se acumulam, a exclus√£o (confirma√ß√£o) de instant√¢neos RoW √© uma atualiza√ß√£o da tabela de metadados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E aqui aparece uma aplica√ß√£o interessante dos instant√¢neos RoW - reduza o RPO para valores de dezenas de minutos. Fazer backups a cada 30 minutos √© quase imposs√≠vel no caso geral e, na maioria dos casos, √© feito uma vez por dia, o que fornece um RPO de 24 horas. Mas, ao mesmo tempo, podemos fazer instant√¢neos de RoW em uma programa√ß√£o, levando o RPO para 15 a 30 minutos e armazen√°-los por um dia ou dois. N√£o h√° penalidade no desempenho, gastando apenas capacidade. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas existem algumas nuances.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para opera√ß√£o adequada de instant√¢neos nativos e integra√ß√£o com o VMware, o HyperFlex requer um instant√¢neo oficial chamado Sentinel. A captura instant√¢nea do Sentinel √© criada automaticamente quando voc√™ cria uma captura instant√¢nea para uma determinada VM por meio do HXConnect e n√£o deve exclu√≠-la, n√£o deve "voltar" para ela, basta confirmar que, na interface da lista de capturas instant√¢neas, esse √© o primeiro instant√¢neo de servi√ßo do Sentinel. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6v/xv/fk/6vxvfkz6yuhzkylorocntklep1w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As capturas instant√¢neas do HyperFlex podem ser executadas no modo consistente com falha ou no modo consistente com o aplicativo. O segundo tipo envolve "liberar buffers" dentro da VM, requer VMTools e inicia se a caixa de sele√ß√£o "Quiesce" estiver marcada no menu de instant√¢neo do HXConnect.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m dos snapshots HyperFlex, ningu√©m pro√≠be o uso de snapshots VMware "nativos". </font><font style="vertical-align: inherit;">Vale a pena para uma m√°quina virtual espec√≠fica determinar quais instant√¢neos voc√™ usar√° e, no futuro, se concentrar nessa tecnologia, ‚Äún√£o perturbando‚Äù diferentes instant√¢neos para uma VM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como parte do teste, tentei criar instant√¢neos e verificar sua FIO. </font><font style="vertical-align: inherit;">E, no entanto, sim, posso confirmar que os instant√¢neos s√£o realmente RoW, eles n√£o afetam o desempenho. </font><font style="vertical-align: inherit;">As capturas instant√¢neas s√£o realmente criadas rapidamente (alguns segundos, dependendo do perfil de carregamento e do tamanho do conjunto de dados), posso dar a seguinte recomenda√ß√£o com base nos resultados: se a sua carga possui muitas opera√ß√µes de grava√ß√£o aleat√≥ria, voc√™ deve come√ßar a criar uma captura instant√¢nea a partir da interface HXConnect, com a marca de verifica√ß√£o "Quiesce" e com uma pr√©via a presen√ßa de um instant√¢neo do Sentinel.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testes</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plataforma de teste</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A seguinte plataforma caiu em patas tenazes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 x C220 M4 (2630v4 10c x 2,20 GHz, 256, 800 + 6 * 960)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vSphere 6.7</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HX Data Platform 4.0.2</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teste de corre√ß√£o clara</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que tipo de teste sem o CrystalDisk? √â isso mesmo, n√£o pode ser, caras normais sempre iniciam um disco cristalizado! Bem, se for necess√°rio, ent√£o √© necess√°rio. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hp/tl/x5/hptlx5eb-ojjdbwet5l87h6wjx4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para o disco de cristal, foi criada uma VM criada especialmente com 2 vCPU de 4 GB e Windows 7 a bordo. Ah, e eu cansei de colocar patches nele, eu vou te dizer! O teste foi realizado nas melhores tradi√ß√µes das melhores casas de Londres e Paris - ou seja, apenas um disco virtual foi adicionado sem pensar e o teste foi lan√ßado. Sim, a prop√≥sito, √© claro que o pr√≥prio CrystalDiskMark n√£o est√° envolvido nos testes, √© apenas uma interface, mas carrega diretamente o sistema de disco com o conhecido pacote DiskSpd inclu√≠do no kit. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ns/wt/i9/nswti9u6hmne-srf37nniqjevzq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que me impressionou literalmente - por algum motivo, todos ignoraram a escolha de unidades no canto superior direito. E tudo mais!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kg/3y/th/kg3ythef08dpqq3zcsrr20wmq8w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou√ßa, honestamente, eu n√£o esperava 75 mil IOPS e mais de 1 gigabyte por segundo da micro-m√°quina no modo pr√≥ximo ao pr√≥ximo acabamento! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para dizer o m√≠nimo, nem toda empresa na R√∫ssia possui cargas que excedem esses indicadores no total. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Testes adicionais foram realizados usando o VMware HCI Bench e o Nutanix XRay, como ‚Äúideologicamente hostis‚Äù ao HyperFlex e, portanto, era esperado que n√£o f√¥ssemos presos. Como os n√∫meros se mostraram extremamente pr√≥ximos, os resultados do pacote XRay foram tomados como base simplesmente porque ele possui um sistema de relat√≥rios mais conveniente e modelos de carregamento prontos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para quem n√£o confia em ningu√©m e deseja controle total sobre o processo, lembro-lhe do meu artigo sobre como criar seu pr√≥prio sistema para gerar a carga em uma plataforma hiperconvergente - "</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sistemas de teste de desempenho giperkonvergentnyh e SDS com as pr√≥prias m√£os</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Achtung! </font><font style="vertical-align: inherit;">Uwaga! </font><font style="vertical-align: inherit;">Pozor!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos os outros resultados e suas interpreta√ß√µes s√£o da opini√£o do autor do artigo e s√£o apresentados por eles mesmos no √¢mbito do estudo do sistema. </font><font style="vertical-align: inherit;">A maioria dos testes √© sint√©tica simples e √© aplic√°vel apenas para entender os indicadores de limite em casos extremos e degenerados, que voc√™ nunca alcan√ßar√° na vida real.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microbenchmark FourCorners</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O microteste de quatro lados foi projetado para avaliar o sistema "rapidamente" para obter o m√°ximo desempenho te√≥rico e m√°ximo de desempenho dos controladores. A aplica√ß√£o pr√°tica para esse teste √© verificar o sistema imediatamente ap√≥s o lan√ßamento quanto a erros de configura√ß√£o e ambiente, especialmente erros de rede. Essa. se voc√™ executa esses sistemas regularmente, sabe apenas quais n√∫meros deve esperar "se tudo estiver bem". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/wl/70/imwl70bqxpwhlum10vhlhm1kbk0.png"><br>
<br>
<img src="https://habrastorage.org/webt/61/xf/ss/61xfss1sc92seaez55-aq_shz2i.png"><br>
<br>
<img src="https://habrastorage.org/webt/4x/38/l7/4x38l7clygg4y5lavoks-lecrfs.png"><br>
<br>
<img src="https://habrastorage.org/webt/si/he/kg/sihekgnrrioansimgwwetryowme.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√∫meros finais: IOPS de 280k / 174k, 3,77 / 1,72 GBps (leitura / grava√ß√£o) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como se comportaram nossos controladores?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-_/co/qv/-_coqvha1rwj6l78ng3fl_kowoi.png"><br>
<br>
<img src="https://habrastorage.org/webt/xu/hd/8s/xuhd8szlg-hrwoyeasjl-nqybbm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A partir do qual se pode observar que o consumo total de recursos para 4 controladores e 4 cargas de VM foi de 49 n√∫cleos de 2,2. De acordo com as estat√≠sticas da VMware, a utiliza√ß√£o da CPU dos controladores era de at√© 80%, ou seja, de fato, o desempenho foi limitado pelo desempenho dos controladores e, especificamente, dos processadores. A velocidade das opera√ß√µes seq√ºenciais descansava especificamente contra a velocidade da rede 10G. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos tentar de novo. O desempenho m√°ximo em um pequeno cluster de 4 n√≥s com os processadores de 2,2 GHz mais r√°pidos √© de quase 300 mil IOPS em alturas de 4U. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A conversa "aqui temos 10, 20 ou at√© 40% a mais / menos" √© praticamente sem sentido devido √† ordem dos n√∫meros. O mesmo que come√ßar a medir "e eu posso ter um carro 240, tenho 280", apesar do limite ser 80.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os n√≥s de 280k / 4 oferecem um desempenho m√°ximo de 70k / n√≥, que por exemplo excede os n√∫meros da calculadora VMware VSAN, que pressup√µe que o n√≥ AF emita n√£o mais que 46k por grupo de discos. </font><font style="vertical-align: inherit;">No nosso caso, aqui na terminologia do VMware, h√° apenas um grupo de discos, que √© executado na x1.8.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efeito do tamanho do bloco do armazenamento de dados</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao criar um armazenamento de dados HyperFlex, voc√™ pode escolher o tamanho do bloco de dados - 4k ou 8k. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que isso afetar√°? </font><font style="vertical-align: inherit;">Execute o mesmo teste quadrangular. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/70/rc/vf/70rcvfpf8-l_zewvlxiawo6lgmm.png"><br>
<br>
<img src="https://habrastorage.org/webt/gd/s6/ys/gds6ysghq6zmspmh1aiprlngtni.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se a imagem √© quase id√™ntica √† leitura, o registro √© contr√°rio. </font><font style="vertical-align: inherit;">O teste quadrangular utiliza uma carga de 8k. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√∫meros totais: 280k / 280k, 172-158k / 200-180k (4k 8k). </font><font style="vertical-align: inherit;">Quando o tamanho do bloco corresponde, √© obtido + 15% do desempenho da grava√ß√£o. </font><font style="vertical-align: inherit;">Se voc√™ espera uma quantidade significativa de grava√ß√£o com um pequeno bloco (4k) na carga - crie um armazenamento de dados para essa carga espec√≠fica com um bloco de 4k, caso contr√°rio, use 8k.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simulador OLTP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um quadro muito mais pr√≥ximo da realidade √© dado por outro teste. </font><font style="vertical-align: inherit;">Como parte disso, dois geradores s√£o lan√ßados com um perfil pr√≥ximo a um DBMS transacional e um n√≠vel de carga de 6000 + 400 IOPS. </font><font style="vertical-align: inherit;">Aqui, o atraso √© medido, o que deve permanecer em um n√≠vel baixo est√°vel. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/aw/tb/ty/awtbtyfcnnow6yydbgr28dpgiqc.png"><br>
<br>
<img src="https://habrastorage.org/webt/o9/kd/m1/o9kdm1zv2lksnqi1g7qk8o5gl7m.png"><br>
<br>
<img src="https://habrastorage.org/webt/cp/3n/oh/cp3noh9aqrp7y0kfrdgehpd19xe.png"><br>
<br>
<img src="https://habrastorage.org/webt/rn/qh/0j/rnqh0jmup291dks_4ir4eg1ssu8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O atraso para o carregamento da VM foi de 1,07 / 1,08 ms. </font><font style="vertical-align: inherit;">Em suma, um √≥timo resultado, mas vamos adicionar um pouco de calor!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coloca√ß√£o do Banco de Dados: Alta Intensidade</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como a base transacional se comportar√°, dependendo dos atrasos, se de repente um vizinho consecutivo barulhento for formado. </font><font style="vertical-align: inherit;">Bem, muito barulhento. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0s/wg/1w/0swg1wykmap5tqivoahd3qymfbe.png"><br>
<br>
<img src="https://habrastorage.org/webt/kr/uy/xh/kruyxhmfiswvbc2tue7whwpwu60.png"><br>
<br>
<img src="https://habrastorage.org/webt/jw/3l/ib/jw3libpbrez473tlexzbilmepyy.png"><br>
<br>
<img src="https://habrastorage.org/webt/p1/4g/2j/p14g2jumznxoh8oyw2y1f3slyge.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, a base OLTP no n√≥ 1 gera 4200 IOPS com atraso de 0,85 ms. </font><font style="vertical-align: inherit;">O que acontece depois que um sistema DSS repentinamente come√ßa a consumir recursos em opera√ß√µes seq√ºenciais? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dois geradores nos n√≥s 2 e 3 carregam a plataforma em 1,18 / 1,08 GBps, respectivamente, esses 2,26 GBps no total. </font><font style="vertical-align: inherit;">√â claro que o atraso no OLTP aumenta e se torna menos est√°vel, mas o valor m√©dio permanece 1,85ms, e a base recebe seus 4200 IOPS sem problemas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impacto da captura instant√¢nea</font></font></h3><br>
<img src="https://habrastorage.org/webt/n0/eo/w8/n0eow8pfcfna7kqwhrt0xblqq8g.png"><br>
<br>
<img src="https://habrastorage.org/webt/-a/0h/dl/-a0hdlvysga1zwnpwtyvb1zq1_c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sistema sequencialmente tira v√°rios instant√¢neos uma vez por hora em uma base OLTP. </font><font style="vertical-align: inherit;">N√£o h√° nada de surpreendente no cronograma e, al√©m disso, geralmente √© um indicador de como os instant√¢neos cl√°ssicos do VMware funcionam, pois o Nutanix XRay n√£o sabe como trabalhar com os instant√¢neos nativos, exceto os seus. </font><font style="vertical-align: inherit;">Voc√™ n√£o precisa usar os instant√¢neos do vSphere regularmente, porque nem todos os iogurtes s√£o igualmente √∫teis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os snapshots nativos do HyperFlex funcionam muito melhor, use-os e seu cabelo ficar√° macio e sedoso!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ingest√£o de Big Data</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o HyperFlex digerir√° uma grande quantidade de dados carregados sequencialmente? </font><font style="vertical-align: inherit;">Bem, digamos 1 TB. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0f/ll/m7/0fllm7dze4walp1c2xff9msn-wg.png"><br>
<br>
<img src="https://habrastorage.org/webt/vx/go/ig/vxgoigfhqqpqguabodmsmklgmma.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O teste levou 27 minutos, incluindo clonagem, ajuste e partida dos geradores.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escalabilidade de taxa de transfer√™ncia</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, carregue gradualmente todo o cluster e observe os n√∫meros constantes. Para come√ßar com a leitura aleat√≥ria e depois a escrita. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iu/kb/jy/iukbjyoms8btipiqv8ckw7-oikg.png"><br>
<br>
<img src="https://habrastorage.org/webt/zw/zj/gy/zwzjgyqeu9wn4ofiatztt5umy70.png"><br>
<br>
<img src="https://habrastorage.org/webt/zd/eu/r2/zdeur21emet_sylypa1p7btvg9c.png"><br>
<br>
<img src="https://habrastorage.org/webt/_u/z1/_p/_uz1_p1ht5ll4bihnaeuxj_znoa.png"><br>
<br>
<img src="https://habrastorage.org/webt/-c/ms/o4/-cmso46htkcgb6ixeetyowyninq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estamos vendo uma imagem est√°vel com uma diminui√ß√£o gradual no desempenho da carga da m√°quina de 78k para 55-57k IOPS, com prateleiras suaves. Ao mesmo tempo, h√° um aumento constante no desempenho geral de 78 para 220k IOPS. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/to/cj/w0/tocjw0zga3ug1recbqb8oa133sq.png"><br>
<br>
<img src="https://habrastorage.org/webt/3z/nt/df/3zntdf3yigfx_acxr0ra6n5nwfa.png"><br>
<br>
<img src="https://habrastorage.org/webt/od/4x/jh/od4xjhnjcvxthkezbcrncc33c5a.png"><br>
<br>
<img src="https://habrastorage.org/webt/mu/zj/mz/muzjmzjtko49unkx1iwzzm_zzo0.png"><br>
<br>
<img src="https://habrastorage.org/webt/v4/wr/0j/v4wr0jbbzvpfz94majmfgisny1m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A grava√ß√£o √© um pouco menos suave, mas ainda est√°veis ‚Äã‚Äãnas prateleiras de 64k a 19-21k por carro. Ao mesmo tempo, a carga nos controladores √© muito menor. Se durante a leitura o n√≠vel de carga total do processador aumentou de 44 para 109, em seguida, na grava√ß√£o de 57 para 73 GHz.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui voc√™ pode observar o exemplo mais simples e √≥bvio dos recursos dos sistemas hiperconvergentes - o √∫nico consumidor simplesmente n√£o √© capaz de utilizar completamente todos os recursos do sistema e, quando a carga √© adicionada, n√£o h√° queda significativa no desempenho. </font><font style="vertical-align: inherit;">A queda que estamos testemunhando j√° √© o resultado de cargas sint√©ticas extremas projetadas para comprimir tudo at√© a √∫ltima gota, o que quase nunca ocorre em um produto normal.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quebrando OLTP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A essa altura, tornou-se ainda chato o qu√£o previs√≠vel o HyperFlex era. </font><font style="vertical-align: inherit;">Necessidade urgente de quebrar alguma coisa! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nw/rq/da/nwrqdazu_dn_gpyg6cdu3z0paju.png"><br>
<br>
<img src="https://habrastorage.org/webt/wr/fw/ks/wrfwkshatwbjd5gr2rvvtevdf8s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O ponto vermelho marca o momento em que a VM do controlador √© encerrada em um dos hosts com uma carga. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como, por padr√£o, a reconstru√ß√£o no HyperFlex inicia imediatamente apenas quando o disco √© perdido e, quando o n√≥ √© perdido, o tempo limite √© de 2 horas, o momento da reconstru√ß√£o for√ßada √© marcado com um ponto verde.</font></font><br>
<br>
<pre><code class="plaintext hljs">login as: admin<font></font>
 HyperFlex StorageController 4.0(2a)<font></font>
admin@192.168.***.***'s password:<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt; stcli rebalance status<font></font>
rebalanceStatus:<font></font>
    percentComplete: 0<font></font>
    rebalanceState: cluster_rebalance_not_running<font></font>
rebalanceEnabled: True<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt; stcli rebalance start -f<font></font>
msgstr: Successfully started rebalance<font></font>
params:<font></font>
msgid: Successfully started rebalance<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt; stcli rebalance status<font></font>
rebalanceStatus:<font></font>
    percentComplete: 16<font></font>
    rebalanceState: cluster_rebalance_ongoing<font></font>
rebalanceEnabled: True<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt;</code></pre><br>
<img src="https://habrastorage.org/webt/sh/ry/qo/shryqousd3rdr6w7pwmdemcjpzk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As opera√ß√µes congelaram por alguns segundos e continuaram novamente, quase percebendo a reconstru√ß√£o. </font><font style="vertical-align: inherit;">Ele est√° em um estado est√°vel quando est√° longe da sobrecarga do cluster. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por que 2 horas Cisco n√£o √© um problema, embora os concorrentes tenham menos n√∫meros? </font><font style="vertical-align: inherit;">A Cisco recomenda enfaticamente o uso do RF3 como um n√≠vel b√°sico de prote√ß√£o de dados para tudo, exceto m√°quinas que n√£o s√£o uma pena. </font><font style="vertical-align: inherit;">Voc√™ decidiu instalar patches ou fazer algo com o host, desligue-o. </font><font style="vertical-align: inherit;">E existe a chance de que nesse momento outro host falhe - e, no caso da RF2, tudo se tornar√° uma aposta, e com a RF3 haver√° uma c√≥pia ativa dos dados. </font><font style="vertical-align: inherit;">E sim, √© realmente poss√≠vel sobreviver duas horas em um acidente na RF2 at√© que a recupera√ß√£o da RF3 comece.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Me quebre completamente!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quebrando - t√£o quebrando. </font><font style="vertical-align: inherit;">Carga m√°xima. </font><font style="vertical-align: inherit;">Nesse caso, criei um teste com um perfil mais ou menos semelhante a uma carga real (70% lida, 20% aleat√≥ria, 8k, 6d 128q). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4k/6l/rr/4k6lrrwh29qbybibwy2_gvq9y-e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adivinhe onde a CVM foi desativada e onde come√ßou a reconstru√ß√£o? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0h/ur/am/0huramdwazcpyvzycht-hn1bwks.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na situa√ß√£o com a reconstru√ß√£o, o HyperFlex teve um bom desempenho, sem causar uma queda catastr√≥fica no desempenho ou um aumento m√∫ltiplo nos atrasos, mesmo sob carga sob os tomates. </font><font style="vertical-align: inherit;">A √∫nica coisa que eu realmente gostaria √© da querida Cisco, fazer o tempo limite ser igual a menos de 2 horas por padr√£o.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">achados</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para concluir, recordo o objetivo do teste: investigar o sistema Cisco HyperFlex hoje, sem olhar para o hist√≥rico, investigar seu desempenho usando sint√©ticos e tirar conclus√µes sobre sua aplicabilidade a um produto real. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sobre desempenho. O desempenho √© muito bom e voc√™ n√£o comenta aqui. Como eu tinha um sistema da gera√ß√£o anterior em teste, posso dizer exatamente uma coisa: no HyperFlex All Flash, voc√™ ter√° capacidade, processador e mem√≥ria, mas n√£o discos. Exceto, talvez, 1% dos aplicativos sobrecarregados, mas √© necess√°rio conversar pessoalmente com eles. Os instant√¢neos de RoW nativos funcionam. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, por disponibilidade. O sistema ap√≥s a detec√ß√£o de uma falha √© bastante bom (sem uma queda de desempenho √†s vezes) realiza a restaura√ß√£o do n√∫mero de c√≥pias de dados. H√° uma pequena reclama√ß√£o no tempo limite padr√£o de duas horas antes de iniciar a recupera√ß√£o (se o host for perdido), mas, considerando o RF3 altamente recomendado, isso √© mais exigente. A recupera√ß√£o ap√≥s uma falha no disco come√ßa imediatamente. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o 3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, em pre√ßo e compara√ß√£o com concorrentes. </font><font style="vertical-align: inherit;">O pre√ßo do sistema pode variar muitas vezes, dependendo da configura√ß√£o de um projeto espec√≠fico. </font><font style="vertical-align: inherit;">Uma grande parte do custo do projeto ser√° um sistema licenciado e software de aplicativo, que funcionar√° na parte superior da plataforma de infraestrutura. </font><font style="vertical-align: inherit;">Portanto, a √∫nica maneira de comparar com os concorrentes √© comparar ofertas comerciais espec√≠ficas que atendem aos requisitos t√©cnicos, especificamente para sua empresa para um projeto espec√≠fico. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o final</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : o sistema est√° funcionando, bastante maduro para uso no produto em abril de 2020, se as recomenda√ß√µes do fornecedor forem lidas e aplicadas, em vez de fumar.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt497010/index.html">Investir em per√≠odos de desacelera√ß√£o do mercado: 3 estrat√©gias de comportamento na bolsa de valores</a></li>
<li><a href="../pt497014/index.html">Quem √© voc√™, engenheiro ou testador de controle de qualidade?</a></li>
<li><a href="../pt497016/index.html">13 de abril - Java Digest</a></li>
<li><a href="../pt497020/index.html">DocuSign, um popular servi√ßo de assinatura digital, agora suporta a infraestrutura GlobalSign</a></li>
<li><a href="../pt497022/index.html">Atualizando o acesso √† rede corporativa. Novos comutadores ExtremeSwitching X435 Gigabit</a></li>
<li><a href="../pt497028/index.html">Bem-vindo ao MeetUp de sistema operacional de rob√¥</a></li>
<li><a href="../pt497030/index.html">Experi√™ncia na implementa√ß√£o de f√°bricas de rede baseadas em EVPN VXLAN e Cisco ACI e uma pequena compara√ß√£o</a></li>
<li><a href="../pt497032/index.html">Neg√≥cio de servi√ßos e crise: hist√≥rias de sucesso. Como o pensamento fora da caixa funciona para voc√™?</a></li>
<li><a href="../pt497034/index.html">O que √© o novo nRF Connect SDK for Nordic? Evolu√ß√£o, revolu√ß√£o ou alternativa?</a></li>
<li><a href="../pt497036/index.html">Quando parar o processo de reconhecimento de sequ√™ncia de v√≠deo?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>