<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßñüèº üñêüèΩ üéø Entwicklung einer Unternehmensbibliothek von React-Komponenten. Plattform√ºbergreifender Ansatz ü§∑üèª üçö üöæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel erz√§hlt die Geschichte der erfolgreichen Implementierung des Designsystems in der Gesellschaft eines der gr√∂√üten Heimwerker. Die Prinzi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Entwicklung einer Unternehmensbibliothek von React-Komponenten. Plattform√ºbergreifender Ansatz</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/luxoft/blog/501656/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieser Artikel erz√§hlt die Geschichte der erfolgreichen Implementierung des Designsystems in der Gesellschaft eines der gr√∂√üten Heimwerker. </font><font style="vertical-align: inherit;">Die Prinzipien und Ans√§tze der plattform√ºbergreifenden Entwicklung von UI-Komponenten unter Verwendung der React- und React Native-Bibliotheken sowie die L√∂sung des Problems der Wiederverwendung von Code zwischen Projekten f√ºr verschiedene Plattformen werden beschrieben.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zun√§chst ein paar Worte dar√ºber, wie alles begann und warum die Idee zur Implementierung eines Systemdesigns aufkam. Alles begann mit einer mobilen Android-Anwendung f√ºr Verk√§ufer in Gesch√§ften. Die Anwendung basiert auf dem React-Native-Framework. Die Startfunktionalit√§t wurde durch nur wenige Module dargestellt, z. B. die Suche nach Produkten im Katalog und in der Produktkarte, Verkaufsbeleg. √úbrigens ist dies jetzt eine ziemlich leistungsf√§hige Anwendung, die die Funktionalit√§t von Informationsschaltern in Gesch√§ften bereits weitgehend ersetzt hat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes wurden Webanwendungsprojekte f√ºr Mitarbeiter der Logistikabteilung sowie verschiedene Konfiguratoren gestartet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zu diesem Zeitpunkt zeigte sich ein Verst√§ndnis der allgemeinen Ans√§tze f√ºr das Design dieser Anwendungen sowie des Vorhandenseins einer ziemlich gro√üen Codebasis. Und es war logisch, den anderen f√ºr die weitere Wiederverwendung zu systematisieren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um UI / UX zu systematisieren, wurde beschlossen, ein Design-System zu entwickeln. Ich werde nicht ins Detail gehen, was es ist. Im Internet finden Sie viele Artikel zu diesem Thema. Zum Beispiel kann auf Habr√© die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeit von Andrei Sundiev</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zum Lesen empfohlen werden </font><font style="vertical-align: inherit;">.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Warum Design System und was sind seine Vorteile? Das erste ist eine gemeinsame Erfahrung und das Gef√ºhl, Produkte zu verwenden. Benutzer erhalten unabh√§ngig von der Anwendung eine vertraute Benutzeroberfl√§che: Die Schaltfl√§chen sehen aus und funktionieren wie gewohnt, das Men√º wird an der richtigen Stelle ge√∂ffnet und mit der richtigen Dynamik funktionieren die Eingabefelder wie gewohnt. Der zweite Vorteil ist die Einf√ºhrung bestimmter Standards und gemeinsamer Ans√§tze sowohl von der Design- als auch von der Entwicklungsseite. Jede neue Funktionalit√§t wird nach bereits etablierten Kanonen und Ans√§tzen entwickelt. Neue Mitarbeiter erhalten ab den ersten Tagen eine klare Arbeitslinie. Das n√§chste ist die Wiederverwendung von Komponenten und die Vereinfachung der Entwicklung. Es ist nicht notwendig, das Rad jedes Mal neu zu erfinden. Sie k√∂nnen Schnittstellen aus vorgefertigten Bl√∂cken mit dem erwarteten Endergebnis erstellen.Der Hauptvorteil f√ºr den Kunden besteht darin, Geld und Zeit zu sparen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also, was haben wir getan? Tats√§chlich haben wir nicht nur eine Komponentenbibliothek erstellt, sondern ein ganzes plattform√ºbergreifendes Framework. Das Framework basiert auf einem Batch-Schema. Wir haben 5 Kern-npm-Pakete. Es ist der Kern f√ºr die Bereitstellung plattform√ºbergreifender Web- und Android-Anwendungen. Pakete von Modulen, Dienstprogrammen und Diensten. Und ein Paket von Komponenten, die sp√§ter besprochen werden. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unten sehen Sie das UML-Diagramm des Komponentenpakets. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wi/kn/xs/wiknxsuqj_n4jze72crt4c4u10g.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es enth√§lt die Komponenten selbst, von denen einige unabh√§ngig sind (Elemente) und einige miteinander verbunden sind, sowie den inneren Kern oder ‚ÄûUnterkern‚Äú.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns genauer betrachten, was im ‚ÄûSub-Core‚Äú enthalten ist. Die erste ist die visuelle Ebene des Systemdesigns. Hier dreht sich alles um Farbpalette, Typografie, Einr√ºckungssystem, Gitter usw. Der n√§chste Block sind die Dienste, die f√ºr das Funktionieren der Komponenten erforderlich sind, z. B.: ComponentsConfig (Konfiguration der Komponenten), StyleSet (auf dieses Konzept werde ich sp√§ter n√§her eingehen) und Device (eine Methode zum Arbeiten mit der Ger√§te-API). Und der dritte Block besteht aus allen Arten von Helfern (Resolver, Stilgeneratoren usw.).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fx/7l/f6/fx7lf6zz7n8olddc2yuf7576s6a.jpeg" alt="Bild"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Entwicklung der Bibliothek haben wir einen atomaren Ansatz f√ºr das Design von Komponenten verwendet. Alles begann mit der Erstellung elementarer Komponenten oder Elemente. Sie sind elementare ‚ÄûTeilchen‚Äú, die voneinander unabh√§ngig sind. Die wichtigsten sind Ansicht, Text, Bild, Symbol. Als n√§chstes folgen die komplexeren Komponenten. Jeder von ihnen verwendet ein oder mehrere Elemente, um seine Struktur aufzubauen. Zum Beispiel Schaltfl√§chen, Eingabefelder, Auswahlm√∂glichkeiten usw. Die n√§chste Ebene sind Muster. Sie sind eine Kombination von Komponenten zur L√∂sung eines UI-Problems. Zum Beispiel ein Autorisierungsformular, eine Kopfzeile mit Parametern und Einstellungen oder eine von einem Designer entworfene Produktkarte, die in verschiedenen Modulen verwendet werden kann. Die letzte und schwierigste und zugleich wichtige Ebene ist das sogenannte Verhalten. Dies sind gebrauchsfertige Module,Implementierung bestimmter Gesch√§ftslogiken und m√∂glicherweise einschlie√ülich der erforderlichen Back-End-Anforderungen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/00/jv/e3/00jve3iwyh64n0tifikfxtoz0v4.jpeg" alt="Bild"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fahren wir also mit der Implementierung der Komponentenbibliothek fort. </font><font style="vertical-align: inherit;">Wie bereits erw√§hnt, haben wir zwei Zielplattformen - Web und Android (React-Native). </font><font style="vertical-align: inherit;">Wenn es sich im Web um Elemente handelt, die allen Webentwicklern wie div, span, img, header usw. bekannt sind, handelt es sich bei den reaktionsbezogenen Elementen um die Komponenten Ansicht, Text, Bild, Modal. </font><font style="vertical-align: inherit;">Und als erstes haben wir uns auf den Namen der Komponenten geeinigt. </font><font style="vertical-align: inherit;">Wir haben uns f√ºr ein System im React-Native-Stil entschieden </font><font style="vertical-align: inherit;">Erstens wurde bereits eine Komponentenbasis in den Projekten implementiert, und zweitens sind diese Namen sowohl f√ºr Web- als auch f√ºr reaktionsnative Entwickler am universellsten und verst√§ndlichsten. </font><font style="vertical-align: inherit;">Betrachten Sie beispielsweise die View-Komponente. </font><font style="vertical-align: inherit;">Die Methode der bedingten Renderkomponente f√ºr das Web sieht ungef√§hr so ‚Äã‚Äãaus:</font></font><br>
<br>
<pre><code class="javascript hljs">render() {
	<span class="hljs-keyword">return</span>(
		<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> {<span class="hljs-attr">...props</span>}&gt;</span>
			{children}
		<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
	)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jene. </font><font style="vertical-align: inherit;">Unter der Haube ist dies nichts weiter als ein Div mit den notwendigen Requisiten und Nachkommen. </font><font style="vertical-align: inherit;">In React-Native ist die Struktur sehr √§hnlich, nur die View-Komponente wird anstelle von divs verwendet:</font></font><br>
<br>
<pre><code class="javascript hljs">render() {
	<span class="hljs-keyword">return</span>(
		<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> {<span class="hljs-attr">...props</span>}&gt;</span>
			{children}
		<span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><font></font>
	)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellt sich die Frage: Wie kann man dies zu einer Komponente kombinieren und gleichzeitig das Rendering aufteilen? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier kommt ein Reaktionsmuster namens HOC oder Component h√∂herer Ordnung zur Rettung. </font><font style="vertical-align: inherit;">Wenn Sie versuchen, ein UML-Diagramm dieses Musters zu zeichnen, erhalten Sie ungef√§hr Folgendes:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/73/sz/tb/73sztbbrwdkvgknh3edlwk93gyo.jpeg" alt="Bild"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Somit besteht jede Komponente aus einem sogenannten Delegaten, der Requisiten von au√üen empf√§ngt und f√ºr die beiden Plattformen gemeinsame Logik verantwortlich ist, sowie zwei Plattformteilen, in denen die f√ºr jede Plattform spezifischen Methoden bereits gekapselt sind, und dem wichtigsten Rendering. </font><font style="vertical-align: inherit;">Betrachten Sie beispielsweise den Schaltfl√§chen-Delegatencode:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buttonDelegate</span>(<span class="hljs-params">ReactComponent: ComponentType&lt;Props&gt;</span>): <span class="hljs-title">ComponentType</span>&lt;<span class="hljs-title">Props</span>&gt; </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ButtonDelegate</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span>&lt;<span class="hljs-title">Props</span>&gt; </span>{<font></font>
        <font></font>
        <span class="hljs-comment">// Button common methods</span><font></font>
<font></font>
        render() {<font></font>
           <span class="hljs-keyword">const</span> { onPress, onPressIn, onPressOut } = <span class="hljs-keyword">this</span>.props;
            <span class="hljs-keyword">const</span> delegate = {
                <span class="hljs-attr">buttonContent</span>: <span class="hljs-keyword">this</span>.buttonContent,
                <span class="hljs-attr">buttonSize</span>: <span class="hljs-keyword">this</span>.buttonSize,
                <span class="hljs-attr">iconSize</span>: <span class="hljs-keyword">this</span>.iconSize,
                <span class="hljs-attr">onClick</span>: onPress,
                <span class="hljs-attr">onMouseUp</span>: onPressIn,
                <span class="hljs-attr">onMouseDown</span>: onPressOut,
                <span class="hljs-attr">onPress</span>: <span class="hljs-keyword">this</span>.onPress,
                <span class="hljs-attr">textColor</span>: <span class="hljs-keyword">this</span>.textColor,<font></font>
            };<font></font>
            <span class="hljs-keyword">return</span> (<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ReactComponent</span> {<span class="hljs-attr">...this.props</span>} <span class="hljs-attr">delegate</span>=<span class="hljs-string">{delegate}</span> /&gt;</span></span>);<font></font>
        }<font></font>
    };<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Delegat erh√§lt als Argument den Plattformteil der Komponente, implementiert Methoden, die beiden Plattformen gemeinsam sind, und √ºbergibt sie an den Plattformteil. </font><font style="vertical-align: inherit;">Der Plattformteil der Komponente selbst ist wie folgt:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Button</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span>&lt;<span class="hljs-title">WebProps</span>, <span class="hljs-title">State</span>&gt; </span>{<font></font>
    <font></font>
   <span class="hljs-comment">// Web specific methods</span><font></font>
<font></font>
    render() {<font></font>
        <span class="hljs-keyword">const</span> { <span class="hljs-attr">delegate</span>: { onPress, buttonContent } } = <span class="hljs-keyword">this</span>.props;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                <span class="hljs-attr">className</span>=<span class="hljs-string">{this.classes}</span>
                {<span class="hljs-attr">...buttonProps</span>}
                <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onPress}</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span>
            &gt;</span>
                {buttonContent(this.spinner, this.iconText)}
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><font></font>
        );<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> buttonDelegate(Button);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist eine Rendermethode mit all ihren Plattformfunktionen. Die allgemeine Funktionalit√§t des Delegaten erfolgt in Form eines Objekts durch einen Requisitendelegierten. Ein Beispiel f√ºr den Plattformteil einer Schaltfl√§che f√ºr eine reaktionsnative Implementierung:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Button</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span>&lt;<span class="hljs-title">NativeProps</span>, <span class="hljs-title">State</span>&gt; </span>{<font></font>
<font></font>
    <span class="hljs-comment">// Native specific methods</span><font></font>
<font></font>
    render() {<font></font>
        <span class="hljs-keyword">const</span> { <span class="hljs-attr">delegate</span>: { onPress, buttonContent } } = <span class="hljs-keyword">this</span>.props;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">styleSet</span>=<span class="hljs-string">{this.styles}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">TouchableOpacity</span>
                    {<span class="hljs-attr">...butonProps</span>}
                    <span class="hljs-attr">onPress</span>=<span class="hljs-string">{onPress}</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">{this.touchableStyles}</span>
                    {<span class="hljs-attr">...touchableProps</span>}    
                &gt;</span>
                    {buttonContent(this.spinner, this.iconText)}
                <span class="hljs-tag">&lt;/<span class="hljs-name">TouchableOpacity</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><font></font>
        );<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> buttonDelegate(Button);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall ist die Logik √§hnlich, es werden jedoch reaktionsnative Komponenten verwendet. In beiden Listen ist buttonDelegate ein HOC mit gemeinsamer Logik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei diesem Ansatz bei der Implementierung von Komponenten stellt sich die Frage nach der Trennung von Plattformteilen w√§hrend der Montage des Projekts. Es muss sichergestellt werden, dass das von uns in Webprojekten verwendete Webpack nur Teile von Komponenten sammelt, die f√ºr das Web bestimmt sind, w√§hrend der Metro-Bundler in React-Native seine Plattformteile ‚Äûeinhaken‚Äú sollte, ohne auf die Komponente f√ºr das Web zu achten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dieses Problem zu l√∂sen, verwendeten sie die integrierte Metro-Bundler-Funktion, mit der Sie das Pr√§fix f√ºr die Plattform-Dateierweiterung angeben k√∂nnen. In unserem Fall sieht metro.config.js folgenderma√üen aus:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">resolver</span>: {
        <span class="hljs-attr">useWatchman</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">platforms</span>: [<span class="hljs-string">'native'</span>],<font></font>
    },<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher sucht die Metro beim Erstellen des Bundles zuerst nach Dateien mit der Erweiterung native.js und hakt die Datei dann mit der Erweiterung .js ein, wenn sie sich nicht im aktuellen Verzeichnis befindet. Diese Funktionalit√§t erm√∂glichte es, die Plattformteile der Komponenten in separaten Dateien zu platzieren: Der Teil f√ºr das Web befindet sich in der .js-Datei, der reaktionsnative Teil wird in der Datei mit der Erweiterung .native.js platziert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webpack hat √ºbrigens die gleiche Funktionalit√§t mit NormalModuleReplacementPlugin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiteres Ziel des plattform√ºbergreifenden Ansatzes bestand darin, einen einzigen Mechanismus f√ºr das Styling von Komponenten bereitzustellen. Bei Webanwendungen haben wir uns f√ºr den sass-Pr√§prozessor entschieden, der letztendlich zu regul√§rem CSS kompiliert wird. Jene. F√ºr Webkomponenten haben wir die bekannten React ClassName-Entwickler verwendet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reaktiv native Komponenten werden durch Inline-Stile und Requisitenstil gestaltet. </font><font style="vertical-align: inherit;">Diese beiden Ans√§tze mussten kombiniert werden, um die Verwendung von Stilklassen f√ºr Android-Anwendungen zu erm√∂glichen. </font><font style="vertical-align: inherit;">Zu diesem Zweck wurde das Konzept von styleSet eingef√ºhrt, das nichts weiter als ein Array von Zeichenfolgen ist - Klassennamen:</font></font><br>
<br>
<pre><code class="javascript hljs">styleSet: <span class="hljs-built_in">Array</span>&lt;string&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gleichzeitig wurde der gleichnamige StyleSet-Dienst f√ºr react-native implementiert, mit dem Klassennamen registriert werden k√∂nnen:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> StyleSet.define({
    <span class="hljs-string">'lmui-Button'</span>: {
        <span class="hljs-attr">borderRadius</span>: <span class="hljs-number">6</span>,<font></font>
    },<font></font>
    <span class="hljs-string">'lmui-Button-buttonSize-md'</span>: {
        <span class="hljs-attr">paddingTop</span>: <span class="hljs-number">4</span>,
        <span class="hljs-attr">paddingBottom</span>: <span class="hljs-number">4</span>,
        <span class="hljs-attr">paddingLeft</span>: <span class="hljs-number">12</span>,
        <span class="hljs-attr">paddingRight</span>: <span class="hljs-number">12</span>,<font></font>
    },<font></font>
    <span class="hljs-string">'lmui-Button-buttonSize-lg'</span>: {
        <span class="hljs-attr">paddingTop</span>: <span class="hljs-number">8</span>,
        <span class="hljs-attr">paddingBottom</span>: <span class="hljs-number">8</span>,
        <span class="hljs-attr">paddingLeft</span>: <span class="hljs-number">16</span>,
        <span class="hljs-attr">paddingRight</span>: <span class="hljs-number">16</span>,<font></font>
    },<font></font>
})</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr Webkomponenten ist styleSet ein Array von CSS-Klassennamen, die mithilfe der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klassennamenbibliothek</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äûgeklebt‚Äú werden </font><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da das Projekt plattform√ºbergreifend ist, ist es offensichtlich, dass mit dem Wachstum der Codebasis auch die Anzahl der externen Abh√§ngigkeiten zunimmt. Dar√ºber hinaus sind die Abh√§ngigkeiten f√ºr jede Plattform unterschiedlich. F√ºr Webkomponenten werden beispielsweise Bibliotheken wie Style-Loader, React-Dom, Klassennamen, Webpack usw. ben√∂tigt. F√ºr React-Native-Komponenten wird eine gro√üe Anzahl ihrer "nativen" Bibliotheken verwendet, z. B. React-Native selbst. Wenn ein Projekt, in dem die Komponentenbibliothek verwendet werden soll, nur eine Zielplattform hat, ist die Installation aller Abh√§ngigkeiten auf einer anderen Plattform irrational. Um dieses Problem zu l√∂sen, haben wir den Postinstall-Hook von npm selbst verwendet, in dem ein Skript installiert wurde, um Abh√§ngigkeiten f√ºr die angegebene Plattform zu installieren. Die Abh√§ngigkeiten selbst wurden im entsprechenden Abschnitt von package.json des Pakets registriert.und die Zielplattform sollte im Projekt package.json als Array angegeben werden.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Ansatz zeigte jedoch einen Nachteil, der sp√§ter bei der Montage im CI-System zu mehreren Problemen f√ºhrte. Die Wurzel des Problems war, dass mit package-lock.json das in postinstall angegebene Skript nicht alle registrierten Abh√§ngigkeiten installiert hat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich musste nach einer anderen L√∂sung f√ºr dieses Problem suchen. Die L√∂sung war einfach. Es wurde ein Zwei-Paket-Schema angewendet, bei dem alle Plattformabh√§ngigkeiten im Abschnitt Abh√§ngigkeiten des entsprechenden Plattformpakets platziert wurden. Im Fall des Webs hei√üt das Paket beispielsweise Komponenten-Web, in dem sich eine einzige Datei package.json befindet. Es enth√§lt alle Abh√§ngigkeiten f√ºr die Webplattform sowie das Hauptpaket mit Komponentenkomponenten. Dieser Ansatz erm√∂glichte es uns, die Trennung von Abh√§ngigkeiten beizubehalten und die Funktionalit√§t von package-lock.json beizubehalten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abschlie√üend werde ich ein Beispiel f√ºr JSX-Code unter Verwendung unserer Komponentenbibliothek geben:</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;View row&gt;
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>
      <span class="hljs-attr">col-xs</span>=<span class="hljs-string">{12}</span>
      <span class="hljs-attr">col-md</span>=<span class="hljs-string">{8}</span>
      <span class="hljs-attr">col-lg</span>=<span class="hljs-string">{4}</span>
      <span class="hljs-attr">col-xl</span>=<span class="hljs-string">{4}</span>
      <span class="hljs-attr">middle-xs</span>
      <span class="hljs-attr">col-md-offset-3</span>
   /&gt;</span></span>
     <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">size</span>=<span class="hljs-string">‚Äùfs1‚Äù</span>&gt;</span>Sample text<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span><font></font>
   &lt;/View&gt;<font></font>
&lt;/View&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Code-Snippet ist plattform√ºbergreifend und funktioniert in einer React-Anwendung f√ºr das Web und in einer Android-Anwendung auf React-Native gleich. </font><font style="vertical-align: inherit;">Bei Bedarf kann derselbe Code unter iOS "abgewickelt" werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit war die Hauptaufgabe gel√∂st, mit der wir konfrontiert waren - die maximale Wiederverwendung beider Entwurfsans√§tze und der Codebasis zwischen verschiedenen Projekten. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bitte geben Sie in den Kommentaren an, welche Fragen zu diesem Thema im n√§chsten Artikel interessant waren.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de501646/index.html">Go, Vue und 3 Tage zu entwickeln: ein Echtzeitsystem zur √úberwachung von Patienten</a></li>
<li><a href="../de501648/index.html">10 Erweiterungen f√ºr VS Code, ohne die ich nicht programmieren kann</a></li>
<li><a href="../de501650/index.html">Was befindet sich in einer .wasm-Datei? Einf√ºhrung in wasm-decompile</a></li>
<li><a href="../de501652/index.html">Nuxt als Fullstack-Server: Frontend + Backend-API-Server (Teil 1)</a></li>
<li><a href="../de501654/index.html">Erstellen Sie Arbeitsprozesse an einem entfernten Standort: praktische Empfehlungen</a></li>
<li><a href="../de501658/index.html">So richten Sie einen Workflow "in der Ferne" ein: 7 praktische Schritte</a></li>
<li><a href="../de501662/index.html">Warum Axure Sketch und Figma biegen konnte, aber nicht bog</a></li>
<li><a href="../de501664/index.html">Videokonferenzen sind jetzt ein Markt und neue Technologien. Longrid, Teil zwei</a></li>
<li><a href="../de501668/index.html">Bereitstellung der Kommunikation von sich bewegenden Objekten und Werkzeugen zur Erh√∂hung der Zuverl√§ssigkeit</a></li>
<li><a href="../de501670/index.html">Wie viel kostet das Leben oder 2,1 Millionen US-Dollar pro Injektion: eine wunderbare Gentherapie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>