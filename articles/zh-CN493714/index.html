<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‰ ğŸŒ ğŸ‘©ğŸ»â€ğŸ« å®‰å…¨å¤‡å¿˜å•ï¼šNode.js ğŸ‘¨â€ğŸ­ ğŸ‘´ğŸ» ğŸ¤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å…³äºNodeJSçš„æµè¡Œå·²ç»æœ‰å¾ˆå¤šè¯´æ³•ã€‚åº”ç”¨ç¨‹åºæ•°é‡çš„å¢åŠ æ˜¯æ˜¾è€Œæ˜“è§çš„-NodeJSéå¸¸æ˜“äºå­¦ä¹ ï¼Œæ‹¥æœ‰å¤§é‡çš„åº“ä»¥åŠåŠ¨æ€å‘å±•çš„ç”Ÿæ€ç³»ç»Ÿã€‚
 
 æˆ‘ä»¬å·²åŸºäºOWASPå¤‡å¿˜å•ä¸ºNodeJSå¼€å‘äººå‘˜å‡†å¤‡äº†å»ºè®®ï¼Œä»¥å¸®åŠ©æ‚¨é¢„æµ‹å¼€å‘åº”ç”¨ç¨‹åºæ—¶çš„å®‰å…¨é—®é¢˜ã€‚
 
 NodeJSåº”ç”¨ç¨‹åºçš„å®‰å…¨å»ºè®®å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š
 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>å®‰å…¨å¤‡å¿˜å•ï¼šNode.js</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/acribia/blog/493714/"><img src="https://habrastorage.org/webt/bs/ml/lo/bsmllozt2li3jmn_6ec8vy4krdq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å…³äºNodeJSçš„æµè¡Œå·²ç»æœ‰å¾ˆå¤šè¯´æ³•ã€‚</font><font style="vertical-align: inherit;">åº”ç”¨ç¨‹åºæ•°é‡çš„å¢åŠ æ˜¯æ˜¾è€Œæ˜“è§çš„-NodeJSéå¸¸æ˜“äºå­¦ä¹ ï¼Œæ‹¥æœ‰å¤§é‡çš„åº“ä»¥åŠåŠ¨æ€å‘å±•çš„ç”Ÿæ€ç³»ç»Ÿã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å·²</font><font style="vertical-align: inherit;">åŸºäºOWASPå¤‡å¿˜å•</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºNodeJSå¼€å‘äººå‘˜</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡†å¤‡äº†</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><b><font style="vertical-align: inherit;">å»ºè®®ï¼Œ</font></b></a><font style="vertical-align: inherit;">ä»¥å¸®åŠ©æ‚¨é¢„æµ‹å¼€å‘åº”ç”¨ç¨‹åºæ—¶çš„å®‰å…¨é—®é¢˜ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NodeJSåº”ç”¨ç¨‹åºçš„å®‰å…¨å»ºè®®å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åº”ç”¨ç¨‹åºå¼€å‘è¿‡ç¨‹ä¸­çš„å®‰å…¨æ€§ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœåŠ¡å™¨å®‰å…¨æ€§ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹³å°å®‰å…¨ï¼›</font></font></li>
</ul><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åº”ç”¨å¼€å‘å®‰å…¨</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é¿å…</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä½¿ç”¨å›è°ƒå‡½æ•°ï¼ˆå›è°ƒï¼‰æ˜¯NodeJSçš„æœ€å¤§ä¼˜åŠ¿ä¹‹ä¸€ï¼Œä½†æ˜¯ï¼Œåœ¨åµŒå¥—å›è°ƒæ—¶ï¼Œæ‚¨å¾ˆå®¹æ˜“å¿˜è®°åœ¨å…¶ä¸­ä¸€ä¸ªå‡½æ•°ä¸­å¤„ç†é”™è¯¯ã€‚</font><font style="vertical-align: inherit;">é¿å…å›è°ƒåœ°ç‹±çš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨promiseã€‚</font><font style="vertical-align: inherit;">å³ä½¿æ‚¨ä½¿ç”¨çš„æ¨¡å—ä¸æ”¯æŒä½¿ç”¨Promiseï¼Œä¹Ÿå¯ä»¥å§‹ç»ˆä½¿ç”¨Promise.promisifyAllï¼ˆï¼‰ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯å³ä½¿ä½¿ç”¨è¯ºè¨€ï¼Œä¹Ÿè¦æ³¨æ„åµŒå¥—ã€‚</font><font style="vertical-align: inherit;">ä¸ºäº†å®Œå…¨é¿å…å›è°ƒåœ°ç‹±é”™è¯¯ï¼Œè¯·éµå¾ªâ€œå¹³å¦â€çš„æ‰¿è¯ºé“¾ã€‚</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å›è°ƒåœ°ç‹±ç¤ºä¾‹ï¼š</font></font></i><br>
<br>
<pre><code class="java hljs"><span class="hljs-function">function <span class="hljs-title">func1</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">500</span>);<font></font>
}<font></font>
<span class="hljs-function">function <span class="hljs-title">func2</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">100</span>);<font></font>
}<font></font>
<span class="hljs-function">function <span class="hljs-title">func3</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">900</span>);<font></font>
}<font></font>
<span class="hljs-function">function <span class="hljs-title">func4</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">3000</span>);<font></font>
}<font></font>
<font></font>
func1(<span class="hljs-string">"input1"</span>, function(err, result1){
   <span class="hljs-keyword">if</span>(err){
      <span class="hljs-comment">// error operations</span><font></font>
   }<font></font>
   <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">//some operations</span>
      func2(<span class="hljs-string">"input2"</span>, function(err, result2){
         <span class="hljs-keyword">if</span>(err){
            <span class="hljs-comment">//error operations</span><font></font>
         }<font></font>
         <span class="hljs-keyword">else</span>{
            <span class="hljs-comment">//some operations</span>
            func3(<span class="hljs-string">"input3"</span>, function(err, result3){
               <span class="hljs-keyword">if</span>(err){
                  <span class="hljs-comment">//error operations</span><font></font>
               }<font></font>
               <span class="hljs-keyword">else</span>{
                  <span class="hljs-comment">// some operations</span>
                  func4(<span class="hljs-string">"input 4"</span>, function(err, result4){
                     <span class="hljs-keyword">if</span>(err){
                        <span class="hljs-comment">// error operations</span><font></font>
                     }<font></font>
                     <span class="hljs-keyword">else</span> {
                        <span class="hljs-comment">// some operations</span><font></font>
                     }<font></font>
                  });<font></font>
               }<font></font>
            });<font></font>
         }<font></font>
      });<font></font>
   }<font></font>
});<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨å¹³é“¾æ‰¿è¯ºçš„ç›¸åŒä»£ç ï¼š</font></font></i><br>
<br>
<pre><code class="java hljs"><span class="hljs-function">function <span class="hljs-title">func1</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">500</span>);<font></font>
}<font></font>
<span class="hljs-function">function <span class="hljs-title">func2</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">100</span>);<font></font>
}<font></font>
<span class="hljs-function">function <span class="hljs-title">func3</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">900</span>);<font></font>
}<font></font>
<span class="hljs-function">function <span class="hljs-title">func4</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">3000</span>);<font></font>
}<font></font>
<font></font>
func1(<span class="hljs-string">"input1"</span>)<font></font>
   .then(function (result){<font></font>
      <span class="hljs-keyword">return</span> func2(<span class="hljs-string">"input2"</span>);<font></font>
   })<font></font>
   .then(function (result){<font></font>
      <span class="hljs-keyword">return</span> func3(<span class="hljs-string">"input3"</span>);<font></font>
   })<font></font>
   .then(function (result){<font></font>
      <span class="hljs-keyword">return</span> func4(<span class="hljs-string">"input4"</span>);<font></font>
   })<font></font>
   .<span class="hljs-keyword">catch</span>(function (error) {
      <span class="hljs-comment">// error operations</span><font></font>
   });<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é™åˆ¶è¯·æ±‚çš„å¤§å°</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
è§£æ</font><b><font style="vertical-align: inherit;">è¯·æ±‚</font></b><font style="vertical-align: inherit;">ä¸»ä½“å¯èƒ½æ˜¯ä¸€é¡¹éå¸¸è€—è´¹èµ„æºçš„æ“ä½œã€‚å¦‚æœæ‚¨ä¸é™åˆ¶è¯·æ±‚çš„å¤§å°ï¼Œæ”»å‡»è€…å°†èƒ½å¤Ÿå‘é€è¶³å¤Ÿå¤§çš„è¯·æ±‚ï¼Œè¿™äº›è¯·æ±‚å¯ä»¥å¡«æ»¡æ‰€æœ‰ç£ç›˜ç©ºé—´æˆ–è€—å°½æ‰€æœ‰æœåŠ¡å™¨èµ„æºï¼Œä½†åŒæ—¶ï¼Œåœ¨æ‰€æœ‰æƒ…å†µä¸‹é™åˆ¶è¯·æ±‚å¤§å°å¯èƒ½æ˜¯ä¸æ­£ç¡®çš„ï¼Œå› ä¸ºå­˜åœ¨è¯·æ±‚ï¼Œä¾‹å¦‚ä¸‹è½½æ–‡ä»¶ã€‚å› æ­¤ï¼Œå»ºè®®ä¸ºä¸åŒç±»å‹çš„å†…å®¹è®¾ç½®é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨å¿«é€Ÿæ¡†æ¶ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼å®ç°ï¼š</font></font><br>
<br>
<pre><code class="java hljs">app.use(express.urlencoded({ limit: <span class="hljs-string">"1kb"</span> }));<font></font>
app.use(express.json({ limit: <span class="hljs-string">"1kb"</span> }));<font></font>
app.use(express.multipart({ limit:<span class="hljs-string">"10mb"</span> }));
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 åº”å½“æ³¨æ„ï¼Œæ”»å‡»è€…å¯ä»¥æ›´æ”¹è¯·æ±‚å†…å®¹çš„ç±»å‹å’Œè§„é¿é™åˆ¶ï¼Œå› æ­¤ï¼Œæœ‰å¿…è¦æ£€æŸ¥è¯·æ±‚çš„å†…å®¹æ˜¯å¦ä¸è¯·æ±‚æ ‡å¤´ä¸­æŒ‡å®šçš„å†…å®¹ç±»å‹ç›¸åŒ¹é…ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ£€æŸ¥å†…å®¹çš„ç±»å‹ä¼šå½±å“æ€§èƒ½ï¼Œåˆ™åªèƒ½æ£€æŸ¥æŸäº›ç±»å‹æˆ–å¤§äºç‰¹å®šå¤§å°çš„æŸ¥è¯¢ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸è¦é˜»å¡äº‹ä»¶å¾ªç¯</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
è¯­è¨€çš„é‡è¦ç»„æˆéƒ¨åˆ†æ˜¯äº‹ä»¶å¾ªç¯ï¼Œå®ƒä»…å…è®¸æ‚¨åˆ‡æ¢æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œè€Œæ— éœ€ç­‰å¾…æ“ä½œå®Œæˆã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œæœ‰äº›é˜»å¡æ“ä½œçš„NodeJSå¿…é¡»ç­‰å¾…å…¶å®Œæˆæ‰èƒ½ç»§ç»­æ‰§è¡Œä»£ç ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œå¤§å¤šæ•°åŒæ­¥æ–¹æ³•æ­£åœ¨é˜»å¡ï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> fs = require(<span class="hljs-string">'fs'</span>);<font></font>
fs.unlinkSync(<span class="hljs-string">'/file.txt'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å»ºè®®å¼‚æ­¥æ‰§è¡Œæ­¤ç±»æ“ä½œï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> fs = require(<span class="hljs-string">'fs'</span>);<font></font>
fs.unlink(<span class="hljs-string">'/file.txt'</span>, (err) =&gt; {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 åŒæ—¶ï¼Œä¸è¦å¿˜è®°å¼‚æ­¥è°ƒç”¨ä¹‹åçš„ä»£ç å°†åœ¨ä¸ç­‰å¾…ä¸Šä¸€ä¸ªæ“ä½œå®Œæˆçš„æƒ…å†µä¸‹æ‰§è¡Œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæ–‡ä»¶å°†åœ¨è¯»å–å‰è¢«åˆ é™¤ï¼Œè¿™å¯èƒ½å¯¼è‡´ç«äº‰ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> fs = require(<span class="hljs-string">'fs'</span>);<font></font>
fs.readFile(<span class="hljs-string">'/file.txt'</span>, (err, data) =&gt; {
  <span class="hljs-comment">// perform actions on file content</span><font></font>
});<font></font>
fs.unlinkSync(<span class="hljs-string">'/file.txt'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæ‚¨å¯ä»¥åœ¨éé˜»å¡å‡½æ•°ä¸­ç¼–å†™æ‰€æœ‰æ“ä½œï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> fs = require(<span class="hljs-string">'fs'</span>);<font></font>
fs.readFile(<span class="hljs-string">'/file.txt'</span>, (err, data) =&gt; {
  <span class="hljs-comment">// perform actions on file content</span>
  fs.unlink(<span class="hljs-string">'/file.txt'</span>, (err) =&gt; {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<font></font>
  });<font></font>
});<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ£€æŸ¥è¾“å…¥å­—æ®µ</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æ£€æŸ¥</font><b><font style="vertical-align: inherit;">è¾“å…¥</font></b><font style="vertical-align: inherit;">å­—æ®µæ˜¯ä»»ä½•åº”ç”¨ç¨‹åºå®‰å…¨æ€§çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚éªŒè¯é”™è¯¯å¯èƒ½å¯¼è‡´æ‚¨çš„åº”ç”¨ç¨‹åºç«‹å³å˜å¾—å®¹æ˜“å—åˆ°å¤šç§æ”»å‡»ï¼šsqlæ³¨å…¥ï¼Œxssï¼Œå‘½ä»¤æ³¨å…¥å’Œå…¶ä»–æ”»å‡»ã€‚ä¸ºäº†ç®€åŒ–è¡¨å•éªŒè¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨mongo-express-sanitizeéªŒè¯ç¨‹åºåŒ…ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è½¬ä¹‰ç”¨æˆ·æ•°æ®</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å¯ä»¥ä¿æŠ¤æ‚¨å…å—xssæ”»å‡»çš„è§„åˆ™ä¹‹ä¸€å°±æ˜¯å±è”½ç”¨æˆ·æ•°æ®ã€‚æ‚¨å¯ä»¥ä¸ºæ­¤ä½¿ç”¨escape-htmlæˆ–node-esapiåº“ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¿ç•™æ—¥å¿—</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æ­¤å¤–ï¼Œå®ƒå°†æœ‰åŠ©äºè°ƒè¯•é”™è¯¯ï¼Œæ—¥å¿—å¯ç”¨äºå“åº”äº‹ä»¶ã€‚æ‚¨å¯ä»¥</font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">åœ¨æ­¤å¤„</font></a></b><font style="vertical-align: inherit;">é˜…è¯»æœ‰å…³ç™»å½•éœ€æ±‚çš„æ›´å¤šä¿¡æ¯</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æœ€æµè¡Œçš„NodeJSæ—¥å¿—è®°å½•è½¯ä»¶åŒ…ä¹‹ä¸€æ˜¯Winstonå’ŒBunyanã€‚</font><font style="vertical-align: inherit;">ä¸‹é¢çš„ç¤ºä¾‹æ˜¾ç¤ºå¦‚ä½•ä½¿ç”¨Winstonå°†æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°å’Œæ–‡ä»¶ï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> logger = <span class="hljs-keyword">new</span> (Winston.Logger) ({<font></font>
    transports: [<font></font>
        <span class="hljs-keyword">new</span> (winston.transports.Console)(),
        <span class="hljs-keyword">new</span> (winston.transports.File)({ filename: <span class="hljs-string">'application.log'</span> })<font></font>
    ],<font></font>
    level: <span class="hljs-string">'verbose'</span><font></font>
});<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ§åˆ¶äº‹ä»¶çš„å‘¨æœŸ</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å¦‚æœæ‚¨çš„æœåŠ¡å™¨å¤„äºç¹å¿™çš„ç½‘ç»œæµé‡ä¸­ï¼Œåˆ™ç”¨æˆ·åœ¨ä½¿ç”¨æœåŠ¡æ—¶å¯èƒ½ä¼šé‡åˆ°å›°éš¾ã€‚</font><font style="vertical-align: inherit;">è¿™æœ¬è´¨ä¸Šæ˜¯DoSæ”»å‡»ã€‚</font><font style="vertical-align: inherit;">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥è·Ÿè¸ªå“åº”æ—¶é—´ï¼Œå¦‚æœå“åº”æ—¶é—´è¶…è¿‡æŒ‡å®šçš„æ—¶é—´ï¼Œåˆ™å°†æ¶ˆæ¯å‘é€åˆ°503æœåŠ¡å™¨å¤ªå¿™ã€‚</font><font style="vertical-align: inherit;">toobusy-jsæ¨¡å—å¯ä»¥æä¾›å¸®åŠ©ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨æ¨¡å—çš„ç¤ºä¾‹ï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> toobusy = require(<span class="hljs-string">'toobusy-js'</span>);
<span class="hljs-keyword">var</span> express = require(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">var</span> app = express();<font></font>
app.use(function(req, res, next) {<font></font>
    <span class="hljs-keyword">if</span> (toobusy()) {
        <span class="hljs-comment">// log if you see necessary</span>
        res.send(<span class="hljs-number">503</span>, <span class="hljs-string">"Server Too Busy"</span>);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
    next();<font></font>
    }<font></font>
});<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é‡‡å–é¢„é˜²æªæ–½ä»¥é˜²è›®åŠ›ï¼Œ</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å†æ¬¡ï¼Œæ¨¡å—å¼€å§‹æ•‘æ´ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œå¿«é€Ÿç²—éº»å¸ƒæˆ–å¿«é€Ÿå¼¹è·³å™¨ã€‚</font><font style="vertical-align: inherit;">ç”¨æ³•ç¤ºä¾‹ï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> bouncer = require(<span class="hljs-string">'express-bouncer'</span>);<font></font>
bouncer.whitelist.push(<span class="hljs-string">'127.0.0.1'</span>); <span class="hljs-comment">// whitelist an IP address</span>
<span class="hljs-comment">// give a custom error message</span><font></font>
bouncer.blocked = function (req, res, next, remaining) {<font></font>
    res.send(<span class="hljs-number">429</span>, <span class="hljs-string">"Too many requests have been made. Please wait "</span> + remaining/<span class="hljs-number">1000</span> + <span class="hljs-string">" seconds."</span>);<font></font>
};<font></font>
<span class="hljs-comment">// route to protect</span>
app.post(<span class="hljs-string">"/login"</span>, bouncer.block, function(req, res) {
    <span class="hljs-keyword">if</span> (LoginFailed){  }
    <span class="hljs-keyword">else</span> {<font></font>
        bouncer.reset( req );<font></font>
    }<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨éªŒè¯ç æ˜¯å¦ä¸€ç§å¸¸è§çš„æš´åŠ›å¯¹ç­–ã€‚</font><font style="vertical-align: inherit;">svg-captchaæ˜¯å¸®åŠ©å®ç°éªŒè¯ç çš„å¸¸ç”¨æ¨¡å—ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨CSRFä»¤ç‰Œ</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æŠµå¾¡CSRFæ”»å‡»çš„æœ€å¯é æ–¹æ³•ä¹‹ä¸€æ˜¯ä½¿ç”¨CSRFä»¤ç‰Œã€‚</font><font style="vertical-align: inherit;">ä»¤ç‰Œå¿…é¡»ä»¥é«˜ç†µç”Ÿæˆï¼Œå¿…é¡»ç»è¿‡ä¸¥æ ¼æ£€æŸ¥å¹¶ä¸ç”¨æˆ·ä¼šè¯ç»‘å®šã€‚</font><font style="vertical-align: inherit;">ä¸ºäº†ç¡®ä¿CSRFä»¤ç‰Œçš„è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨csurfæ¨¡å—ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç”¨æ³•ç¤ºä¾‹ï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> csrf = require(<span class="hljs-string">'csurf'</span>);<font></font>
csrfProtection = csrf({ cookie: <span class="hljs-keyword">true</span> });<font></font>
app.get(<span class="hljs-string">'/form'</span>, csrfProtection, function(req, res) {<font></font>
    res.render(<span class="hljs-string">'send'</span>, { csrfToken: req.csrfToken() })<font></font>
})<font></font>
app.post(<span class="hljs-string">'/process'</span>, parseForm, csrfProtection, function(req, res) {<font></font>
    res.send(<span class="hljs-string">'data is being processed'</span>);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸è¦å¿˜è®°å°†ä»¤ç‰Œæ·»åŠ åˆ°é¡µé¢ä¸Šçš„éšè—å­—æ®µä¸­ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">&lt;input type="hidden" name="_csrf" value="{{ csrfToken }}"&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨å¯ä»¥åœ¨æˆ‘ä»¬çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–‡ç« ä¸­</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é˜…è¯»æœ‰å…³CSRFä»¤ç‰Œçš„æ›´å¤šä¿¡æ¯</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ é™¤ä¸å¿…è¦çš„è·¯ç”±</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Webåº”ç”¨ç¨‹åºä¸åº”åŒ…å«ç”¨æˆ·æœªä½¿ç”¨çš„é¡µé¢ï¼Œå› ä¸ºè¿™ä¼šå¢åŠ æ”»å‡»é¢ã€‚å› æ­¤ï¼Œå¿…é¡»ç¦ç”¨æ‰€æœ‰æœªä½¿ç”¨çš„APIè·¯ç”±ã€‚å¦‚æœä½¿ç”¨Sailsæˆ–Feathersæ¡†æ¶ï¼Œåˆ™åº”ç‰¹åˆ«æ³¨æ„è¯¥é—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬ä¼šè‡ªåŠ¨ç”ŸæˆAPIç«¯ç‚¹ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¿æŠ¤è‡ªå·±å…å—HPPï¼ˆHTTPå‚æ•°æ±¡æŸ“ï¼‰çš„å½±å“</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
é»˜è®¤æƒ…å†µä¸‹ï¼Œexpresså°†è¯·æ±‚ä¸­çš„æ‰€æœ‰å‚æ•°æ·»åŠ åˆ°æ•°ç»„ä¸­ã€‚ OWASPå»ºè®®ä½¿ç”¨hppæ¨¡å—ï¼Œè¯¥æ¨¡å—ä¼šå¿½ç•¥req.queryå’Œ/æˆ–req.bodyä¸­çš„æ‰€æœ‰å‚æ•°å€¼ï¼Œè€Œä»…ä»é‡å¤çš„å€¼ä¸­é€‰æ‹©æœ€åä¸€ä¸ªå€¼ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> hpp = require(<span class="hljs-string">'hpp'</span>);<font></font>
app.use(hpp());<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç›‘è§†è¿”å›çš„å€¼ï¼Œ</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä¾‹å¦‚ï¼Œç”¨æˆ·è¡¨å¯ä»¥å­˜å‚¨é‡è¦æ•°æ®ï¼šå¯†ç ï¼Œç”µå­é‚®ä»¶åœ°å€ï¼Œå‡ºç”Ÿæ—¥æœŸç­‰ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œä»…è¿”å›å¿…è¦çš„æ•°æ®å¾ˆé‡è¦ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¾‹å¦‚ï¼š</font></font><br>
<br>
<pre><code class="java hljs"> <span class="hljs-keyword">exports</span>.sanitizeUser = function(user) {
  <span class="hljs-keyword">return</span> {<font></font>
    id: user.id,<font></font>
    username: user.username,<font></font>
    fullName: user.fullName<font></font>
  };<font></font>
};<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨æè¿°ç¬¦ï¼šæè¿°</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ç¬¦å¯ç”¨äºæè¿°å„ç§æ“ä½œçš„å±æ€§è¡Œä¸ºï¼šå¯å†™-æ˜¯å¦å¯ä»¥æ›´æ”¹å±æ€§çš„å€¼ï¼Œå¯æšä¸¾-æ˜¯å¦å¯ä»¥åœ¨for..inå¾ªç¯ä¸­ä½¿ç”¨å±æ€§ï¼Œå¯é…ç½®-æ˜¯å¦å¯ä»¥è¦†ç›–å±æ€§ã€‚</font><font style="vertical-align: inherit;">å»ºè®®æ³¨æ„åˆ—å‡ºçš„å±æ€§ï¼Œå› ä¸ºåœ¨å®šä¹‰å¯¹è±¡çš„å±æ€§æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰è¿™äº›å±æ€§éƒ½è®¾ç½®ä¸ºtrueã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥æŒ‰å¦‚ä¸‹æ‰€ç¤ºæ›´æ”¹å±æ€§çš„å€¼ï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> o = {};<font></font>
Object.defineProperty(o, <span class="hljs-string">"a"</span>, {<font></font>
    writable: <span class="hljs-keyword">true</span>,<font></font>
    enumerable: <span class="hljs-keyword">true</span>,<font></font>
    configurable: <span class="hljs-keyword">true</span>,<font></font>
    value: <span class="hljs-string">"A"</span><font></font>
});<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨ACL</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Aclå¯å¸®åŠ©æ ¹æ®è§’è‰²åŒºåˆ†æ•°æ®è®¿é—®ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œæ·»åŠ æƒé™å¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-comment">// guest is allowed to view blogs</span>
acl.allow(<span class="hljs-string">'guest'</span>, <span class="hljs-string">'blogs'</span>, <span class="hljs-string">'view'</span>)
<span class="hljs-comment">// allow function accepts arrays as any parameter</span>
acl.allow(<span class="hljs-string">'member'</span>, <span class="hljs-string">'blogs'</span>, [<span class="hljs-string">'edit'</span>, <span class="hljs-string">'view'</span>, <span class="hljs-string">'delete'</span>])
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ•è·uncaughtException</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœå‘ç”Ÿæœªæ•è·çš„å¼‚å¸¸ï¼ŒNodeJSå°†æŠ›å‡ºå½“å‰å †æ ˆè·Ÿè¸ªå¹¶ç»ˆæ­¢æ‰§è¡Œçº¿ç¨‹ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼ŒNodeJSå…è®¸æ‚¨è‡ªå®šä¹‰æ­¤è¡Œä¸ºã€‚</font><font style="vertical-align: inherit;">å¦‚æœå‘ç”Ÿæœªæ•è·çš„å¼‚å¸¸ï¼Œåˆ™ä¼šå¼•å‘uncaughtExceptionäº‹ä»¶ï¼Œå¯ä»¥ä½¿ç”¨æµç¨‹å¯¹è±¡æ•è·è¯¥äº‹ä»¶ï¼š</font></font><br>
<br>
<pre><code class="java hljs">process.on(<span class="hljs-string">"uncaughtException"</span>, function(err) {
    <span class="hljs-comment">// clean up allocated resources</span>
    <span class="hljs-comment">// log necessary error details to log files</span>
    process.exit(); <span class="hljs-comment">// exit the process to avoid unknown state</span><font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å€¼å¾—è®°ä½çš„æ˜¯ï¼Œå½“å‘ç”ŸuncaughtExceptionæ—¶ï¼Œæ‚¨å¿…é¡»åœ¨å®ŒæˆZè¿›ç¨‹ä¹‹å‰æ¸…é™¤æ‰€æœ‰åˆ†é…çš„èµ„æºï¼ˆä¾‹å¦‚ï¼Œæ–‡ä»¶æè¿°ç¬¦å’Œå¤„ç†ç¨‹åºï¼‰ï¼Œä»¥é¿å…æ— æ³•é¢„æ–™çš„é”™è¯¯ã€‚</font><font style="vertical-align: inherit;">å¼ºçƒˆå»ºè®®å¦‚æœå‘ç”ŸuncaughtExceptionï¼Œåˆ™ç¨‹åºå°†ç»§ç»­è¿è¡Œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒæ ·ï¼Œåœ¨æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯æ—¶ï¼Œç”¨æˆ·ä¸åº”æ³„éœ²è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾‹å¦‚å †æ ˆè·Ÿè¸ªã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœåŠ¡å™¨å®‰å…¨æ€§</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨ä½¿ç”¨cookieæ—¶ï¼Œè®¾ç½®æ ‡å¤´çš„æ ‡å¿—</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æœ‰å‡ ç§æ ‡å¿—å¯ä»¥å¸®åŠ©é˜²æ­¢xsså’Œcsrfç­‰æ”»å‡»ï¼šhttpOnlyï¼Œå®ƒå¯ä»¥é˜²æ­¢é€šè¿‡javascriptè®¿é—®cookieï¼›</font><font style="vertical-align: inherit;">å®‰å…¨-ä»…å…è®¸é€šè¿‡HTTPSå’ŒSameSiteå‘é€cookieï¼Œè¿™å†³å®šäº†å°†cookieä¼ è¾“åˆ°ç¬¬ä¸‰æ–¹èµ„æºçš„èƒ½åŠ›ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç”¨æ³•ç¤ºä¾‹ï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> session = require(<span class="hljs-string">'express-session'</span>);<font></font>
app.use(session({<font></font>
    secret: <span class="hljs-string">'your-secret-key'</span>,<font></font>
    key: <span class="hljs-string">'cookieName'</span>,<font></font>
    cookie: { secure: <span class="hljs-keyword">true</span>, httpOnly: <span class="hljs-keyword">true</span>, path: <span class="hljs-string">'/user'</span>, sameSite: <span class="hljs-keyword">true</span>}<font></font>
}));<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®¾ç½®HTTPæ ‡å¤´ä»¥æé«˜å®‰å…¨æ€§</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä»¥ä¸‹æ˜¯æ ‡å¤´å’Œå¦‚ä½•è¿æ¥å®ƒä»¬çš„ç¤ºä¾‹ï¼Œä»¥å¸®åŠ©æ‚¨ä¿æŠ¤è‡ªå·±å…å—å¤šç§å¸¸è§æ”»å‡»ã€‚</font><font style="vertical-align: inherit;">æ ‡å¤´ä½¿ç”¨å¤´ç›”æ¨¡å—è®¾ç½®</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â€¢ä¸¥æ ¼ä¼ è¾“å®‰å…¨æ€§ï¼šHTTPä¸¥æ ¼ä¼ è¾“å®‰å…¨æ€§ï¼ˆHSTSï¼‰å‘Šè¯‰æµè§ˆå™¨åªèƒ½é€šè¿‡HTTPSè®¿é—®è¯¥åº”ç”¨ç¨‹åº</font></font><br>
<br>
<pre><code class="java hljs">app.use(helmet.hsts()); <span class="hljs-comment">// default configuration</span>
app.use(helmet.hsts(<span class="hljs-string">"&lt;max-age&gt;"</span>, <span class="hljs-string">"&lt;includeSubdomains&gt;"</span>)); <span class="hljs-comment">// custom configuration</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â€¢X-Frame-Optionsï¼šç¡®å®šé¡µé¢æ˜¯å¦å¯ä»¥åœ¨æ¡†æ¶ï¼Œiframeï¼ŒåµŒå…¥æˆ–å¯¹è±¡ä¸­ä½¿ç”¨</font></font><br>
<br>
<pre><code class="java hljs">app.use(hemlet.xframe()); <span class="hljs-comment">// default behavior (DENY)</span>
helmet.xframe(<span class="hljs-string">'sameorigin'</span>); <span class="hljs-comment">// SAMEORIGIN</span>
helmet.xframe(<span class="hljs-string">'allow-from'</span>, <span class="hljs-string">'http://alloweduri.com'</span>); <span class="hljs-comment">//ALLOW-FROM uri</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â€¢X-XSS-Protectionï¼šå¦‚æœæµè§ˆå™¨æ£€æµ‹åˆ°åå°„çš„XSSæ”»å‡»ï¼Œåˆ™å…è®¸æµè§ˆå™¨åœæ­¢åŠ è½½é¡µé¢ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> xssFilter = require(<span class="hljs-string">'x-xss-protection'</span>);<font></font>
app.use(xssFilter());<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â€¢X-Content-Type-Optionsï¼šç”¨äºé˜²æ­¢ä½¿ç”¨MIMEç±»å‹çš„æ”»å‡»</font></font><br>
<br>
<pre><code class="java hljs">app.use(helmet.noSniff());
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â€¢å†…å®¹å®‰å…¨ç­–ç•¥ï¼šé˜²æ­¢è¯¸å¦‚XSSå’Œæ•°æ®æ³¨å…¥æ”»å‡»ä¹‹ç±»çš„æ”»å‡»</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> csp = require(<span class="hljs-string">'helmet-csp'</span>)<font></font>
app.use(csp({<font></font>
   directives: {<font></font>
       defaultSrc: [<span class="hljs-string">"'self'"</span>],  <span class="hljs-comment">// default value for all directives that are absent</span>
       scriptSrc: [<span class="hljs-string">"'self'"</span>],   <span class="hljs-comment">// helps prevent XSS attacks</span>
       frameAncestors: [<span class="hljs-string">"'none'"</span>],  <span class="hljs-comment">// helps prevent Clickjacking attacks</span>
       imgSrc: [<span class="hljs-string">"'self'"</span>, <span class="hljs-string">"'http://imgexample.com'"</span>],<font></font>
       styleSrc: [<span class="hljs-string">"'none'"</span>]<font></font>
    }<font></font>
}))<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â€¢Cache-Controlå’ŒPragmaï¼šå¯¹äºç®¡ç†ç¼“å­˜ï¼Œå°¤å…¶æ˜¯æ­¤æ ‡å¤´å¯¹äºåŒ…å«æ•æ„Ÿæ•°æ®çš„é¡µé¢å¾ˆæœ‰ç”¨ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œè¯·è®°ä½ï¼Œç¦ç”¨æ‰€æœ‰é¡µé¢ä¸Šçš„ç¼“å­˜ä¼šå½±å“æ€§èƒ½ã€‚</font></font><br>
<br>
<pre><code class="java hljs">app.use(helmet.noCache());
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â€¢X-Download-Optionsï¼šæ ‡å¤´å¯é˜²æ­¢Inter Exploreræ‰§è¡Œä¸‹è½½çš„æ–‡ä»¶</font></font><br>
<br>
<pre><code class="java hljs">app.use(helmet.ieNoOpen());
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â€¢Expect-CTï¼šè¯ä¹¦é€æ˜æ€§-ä¸€ç§ä¸ºè§£å†³SSLè¯ä¹¦åŸºç¡€ç»“æ„ä¸­çš„æŸäº›é—®é¢˜è€Œåˆ›å»ºçš„æœºåˆ¶ï¼Œæ­¤æ ‡å¤´å‘ŠçŸ¥æµè§ˆå™¨CTæ—¥å¿—ä¸­éœ€è¦å…¶ä»–è¯ä¹¦éªŒè¯</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> expectCt = require(<span class="hljs-string">'expect-ct'</span>);<font></font>
app.use(expectCt({ maxAge: <span class="hljs-number">123</span> }));<font></font>
app.use(expectCt({ enforce: <span class="hljs-keyword">true</span>, maxAge: <span class="hljs-number">123</span> }));<font></font>
app.use(expectCt({ enforce: <span class="hljs-keyword">true</span>, maxAge: <span class="hljs-number">123</span>, reportUri: <span class="hljs-string">'http://example.com'</span>}));
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â€¢X-Powered-Byï¼šå¯é€‰æ ‡å¤´ï¼Œç”¨äºæŒ‡ç¤ºæœåŠ¡å™¨ä¸Šä½¿ç”¨çš„æŠ€æœ¯ã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼éšè—æ­¤æ ‡é¢˜ï¼š</font></font><br>
<br>
<pre><code class="java hljs">app.use(helmet.hidePoweredBy());
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 æ­¤å¤–ï¼Œæ‚¨å¯ä»¥æ›´æ”¹è¯¥å€¼ä»¥éšè—æœ‰å…³æ‰€ä½¿ç”¨æŠ€æœ¯çš„çœŸå®ä¿¡æ¯ï¼š</font></font><br>
<br>
<pre><code class="java hljs">app.use(helmet.hidePoweredBy({ setTo: <span class="hljs-string">'PHP 4.2.0'</span> }));
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹³å°å®‰å…¨</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ›´æ–°è½¯ä»¶åŒ…</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
åº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§å–å†³äºæ‚¨ä½¿ç”¨çš„è½¯ä»¶åŒ…çš„å®‰å…¨æ€§ï¼Œå› æ­¤ä½¿ç”¨è½¯ä»¶åŒ…çš„æœ€æ–°ç‰ˆæœ¬éå¸¸é‡è¦ã€‚ä¸ºç¡®ä¿æ‚¨ä½¿ç”¨çš„è½¯ä»¶åŒ…ä¸åŒ…å«å·²çŸ¥æ¼æ´ï¼Œå¯ä»¥ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç‰¹æ®Šçš„OWASPåˆ—è¡¨</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨æ£€æŸ¥ç¨‹åºåŒ…ä¸­æ˜¯å¦å­˜åœ¨å·²çŸ¥æ¼æ´Retire.jsçš„åº“ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯·å‹¿ä½¿ç”¨ä¸å®‰å…¨çš„åŠŸèƒ½ã€‚</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å»ºè®®å°½å¯èƒ½åˆ é™¤ä¸€äº›åŠŸèƒ½ã€‚åœ¨è¿™äº›å‡½æ•°ä¸­æœ‰evalï¼ˆï¼‰ï¼Œå®ƒæ‰§è¡Œä¸€ä¸ªä½œä¸ºå‚æ•°çš„å­—ç¬¦ä¸²ã€‚ä¸ç”¨æˆ·è¾“å…¥ç»“åˆä½¿ç”¨æ—¶ï¼Œä½¿ç”¨æ­¤å‡½æ•°å¯èƒ½ä¼šå¯¼è‡´è¿œç¨‹æ‰§è¡Œä»£ç æ¼æ´ï¼Œå› ä¸ºå‡ºäºç±»ä¼¼çš„åŸå› ï¼Œä½¿ç”¨child_process.execä¹Ÿæ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºè¯¥å‡½æ•°ä¼šå°†æ¥æ”¶åˆ°çš„å‚æ•°ä¼ é€’ç»™bin / shã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤å¤–ï¼Œåº”è°¨æ…ä½¿ç”¨è®¸å¤šæ¨¡å—ã€‚ä¾‹å¦‚ï¼Œç”¨äºæ–‡ä»¶çš„fsæ¨¡å—ã€‚å¦‚æœä»¥æŸç§æ–¹å¼å°†ç”Ÿæˆçš„ç”¨æˆ·è¾“å…¥ä¼ é€’ç»™å‡½æ•°ï¼Œåˆ™æ‚¨çš„åº”ç”¨ç¨‹åºå¯èƒ½ä¼šå˜å¾—å®¹æ˜“å—åˆ°æœ¬åœ°æ–‡ä»¶å’Œç›®å½•éå†çš„å½±å“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vmæ¨¡å—æä¾›ç”¨äºåœ¨V8è™šæ‹Ÿæœºä¸Šç¼–è¯‘å’Œè¿è¡Œä»£ç çš„APIï¼Œä»…åº”åœ¨æ²™ç®±ä¸­ä½¿ç”¨ã€‚</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨è¿™é‡Œï¼Œ</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨å¯ä»¥ç†Ÿæ‚‰å¯èƒ½ä¼šä½¿æ‚¨çš„åº”ç”¨ç¨‹åºä¸å®‰å…¨çš„å…¶ä»–å‡½æ•°ï¼›</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ—¶è¦å°å¿ƒï¼›</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å¯ä»¥ç¼–å†™æ­£åˆ™è¡¨è¾¾å¼ï¼Œä»¥ä½¿è¡¨è¾¾å¼å¯ä»¥æˆæŒ‡æ•°å¢é•¿ï¼Œä»è€Œå¯¼è‡´æ‹’ç»æœåŠ¡ã€‚è¿™ç§æ”»å‡»ç§°ä¸ºReDoSã€‚æœ‰å‡ ç§å·¥å…·å¯ä»¥æ£€æŸ¥æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦å®‰å…¨ï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯vuln-regex-detectorã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®šæœŸè¿è¡Œlint</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¾ˆéš¾ç‰¢è®°æ‰€æœ‰å®‰å…¨å»ºè®®ï¼Œè€Œåœ¨å›¢é˜Ÿå¼€å‘æ–¹é¢ï¼Œè¦ä½¿æ‰€æœ‰å›¢é˜Ÿæˆå‘˜éƒ½éµå®ˆè§„åˆ™å¹¶ä¸å®¹æ˜“ã€‚ä¸ºæ­¤ï¼Œæœ‰ä¸€äº›ç”¨äºé™æ€å®‰å…¨åˆ†æçš„å·¥å…·ã€‚æ­¤ç±»å·¥å…·æ— éœ€æ‰§è¡Œä»£ç å³å¯åœ¨å…¶ä¸­å¯»æ‰¾æ¼æ´ã€‚æ­¤å¤–ï¼Œlintå…è®¸æ‚¨æ·»åŠ è‡ªå®šä¹‰è§„åˆ™ï¼Œä»¥åœ¨ä»£ç ä¸­æŸ¥æ‰¾å¯èƒ½æ˜“å—æ”»å‡»çš„ä½ç½®ã€‚æœ€å¸¸ç”¨çš„çŸ­ç»’æ˜¯ESLintå’ŒJSHintã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Javascriptæœ‰è®¸å¤šä¸å®‰å…¨å’Œè¿‡æ—¶çš„åŠŸèƒ½ï¼Œä¸åº”ä½¿ç”¨ã€‚ä¸ºäº†æ’é™¤ä½¿ç”¨è¿™äº›åŠŸèƒ½çš„å¯èƒ½æ€§ï¼Œè¿˜æä¾›äº†ä¸¥æ ¼æ¨¡å¼ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">éµå®ˆä¸€èˆ¬å®‰å…¨åŸåˆ™</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‰€æè¿°çš„å»ºè®®é›†ä¸­åœ¨NodeJSä¸Šï¼Œä½†ä¸è¦å¿˜è®°æ— è®ºä½¿ç”¨ä»€ä¹ˆå¹³å°ï¼Œéƒ½å¿…é¡»éµå®ˆçš„ä¸€èˆ¬å®‰å…¨æ€§åŸåˆ™ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN493702/index.html">å¤§è§„æ¨¡è¿‡æ¸¡åˆ°è¿œç¨‹å·¥ä½œï¼šæŠ€æœ¯é—®é¢˜å’Œå¯¹å®‰å…¨çš„å¨èƒ</a></li>
<li><a href="../zh-CN493704/index.html">åœ¨JavaScriptä¸­ä½¿ç”¨TypeScriptè€Œä¸ç¼–å†™TypeScript</a></li>
<li><a href="../zh-CN493706/index.html">è®¤è¯†ä½ çš„æ•Œäººï¼šåˆ›å»ºä¸€ä¸ªNode.jsåé—¨</a></li>
<li><a href="../zh-CN493708/index.html">æˆ‘çš„å®¶åº­Kubernetesé›†ç¾¤çš„å‰–æ</a></li>
<li><a href="../zh-CN493712/index.html">æ–°çš„TypeScriptåŠŸèƒ½å¯å¢å¼ºå¯ç”¨æ€§</a></li>
<li><a href="../zh-CN493716/index.html">ä½¿ç”¨as constæ„é€ å’Œinferå…³é”®å­—ä½¿ç”¨TypeScriptè¿›è¡Œç±»å‹æ¨æ–­</a></li>
<li><a href="../zh-CN493718/index.html">è®¨è®ºï¼šå¾ˆå°‘ä½¿ç”¨ä¸”å½“å‰æ­£åœ¨ä½¿ç”¨çš„æ ‡å‡†UNIXå®ç”¨ç¨‹åº</a></li>
<li><a href="../zh-CN493720/index.html">å®Œç¾é£æš´ï¼šæŠ€æœ¯å¦‚ä½•æ”¹å˜é£Ÿå“æœåŠ¡è¡Œä¸š</a></li>
<li><a href="../zh-CN493724/index.html">RPA | é€šè¿‡åˆ†æäººå‘˜å®ç°æµç¨‹è‡ªåŠ¨åŒ–</a></li>
<li><a href="../zh-CN493726/index.html">åŸºäºIntel NUCçš„ç…§ç‰‡æˆ–è§†é¢‘çš„å¸çƒŸæ£€æµ‹ç»¼åˆä½“</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>