<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🅾️ 🍋 🎊 Draw a speech: Software Automatic Mouth 🧑🏿‍🤝‍🧑🏻 🖥️ 🦐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I concluded the last year’s article “We draw sound” with recognition: “Is it possible to draw sound from a blank sheet without tracing the spectrogram...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Draw a speech: Software Automatic Mouth</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500764/"><img src="https://habrastorage.org/webt/p-/zo/0e/p-zo0etro6sou28n3f8juxbiakw.jpeg" width="260" align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I concluded the </font><i><font style="vertical-align: inherit;">last</font></i><font style="vertical-align: inherit;"> year’s article </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“We draw sound”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> with recognition: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“Is it possible to draw sound from a blank sheet without tracing the spectrogram of the audio recording? Frankly, I didn’t succeed. ”</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> But recently I learned about </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SAM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - released in </font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1982</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> by Don't Ask Software, it was the first commercially successful PC speech synthesis program. In the mid </font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-2000s,</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> German demo appraisers Tobias Korbmacher and Sebastian Macke took an assembled SAM listing for Commodore 64 and converted it into unreadable, but workable C code; then in </font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2014 the</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> British Vidar Hokstad tried to bring the C code into a readable form - manually giving the variables meaningful names and replacing</font></font><code>goto</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">on loops and branches; and finally, in </font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2017</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> another German Christian Schiffler rewrote code from C to JavaScript. You can try it in action as a "black box" on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">discordier.github.io/sam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In my opinion, a primitive JavaScript speech synthesizer is the most convenient experimental model for those who want to understand how speech synthesis works in general. My SAM fork with substantially cleaned code and comments is available at </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/tyomitch/sam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Unfortunately, the previous authors managed to fade interest in SAM, and now they are not up to the analysis of pull requests in a hobby project of many years ago. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SAM consists of four functional components:</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reciter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> translates the English text into a phoneme record: for example, “A LITTLE TOO LOW” (an example from the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">demo program</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> attached to SAM </font><font style="vertical-align: inherit;">) turns into “AH LIHTUL TUW5 LOW”.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parser</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> turns a phonemic record into a phonetic one: from "AH LIHTUL TUW5 LOW" it turns out " </font></font><code><nobr>AH, ,L,IH,DX,AX,LX, ,T,*,*,UX,WX, ,L,OW,WX</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">". </font><font style="vertical-align: inherit;">For each </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">background</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> displayed, </font><font style="vertical-align: inherit;">Parser also sets the duration and tone.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> builds an array of frequencies, amplitudes and other acoustic characteristics from phonetic recording;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The last, anonymous component (function </font></font><code>ProcessFrames</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) turns an array of frequencies and amplitudes into a PCM stream for audio output.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this article, I will analyze all four components in turn.</font></font><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reciter</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reciter was attached to SAM as a separate program: the creators claimed that the Reciter 469 pronunciation rules laid down correctly transcribed about 90% of English words. </font><font style="vertical-align: inherit;">This means that the transcription of every tenth word needed manual editing before submitting it to the input of the following components. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SAM uses </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">its own transcription system</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , where English phonemes are indicated by separate characters from a set </font></font><code>[A-Z/]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or in pairs of two such characters:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Phoneme</font></font></sub></th>
<th><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Designation</font></font></sub></th>
<th><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Phoneme</font></font></sub></th>
<th><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Designation</font></font></sub></th>
<th><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Phoneme</font></font></sub></th>
<th><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Designation</font></font></sub></th>
<th><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Phoneme</font></font></sub></th>
<th><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Designation</font></font></sub></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ b /</font></font></td>
<td><code>B</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ p /</font></font></td>
<td><code>P</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ v /</font></font></td>
<td><code>V</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ f /</font></font></td>
<td><code>F</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ d /</font></font></td>
<td><code>D</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ t /</font></font></td>
<td><code>T</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ z /</font></font></td>
<td><code>Z</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ s /</font></font></td>
<td><code>S</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ dʒ /</font></font></td>
<td><code>J</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ tʃ /</font></font></td>
<td><code>CH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ʒ /</font></font></td>
<td><code>ZH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ʃ /</font></font></td>
<td><code>SH</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ g /</font></font></td>
<td><code>G</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ k /</font></font></td>
<td><code>K</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ h /</font></font></td>
<td><code>/H</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ð /</font></font></td>
<td><code>DH</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ m /</font></font></td>
<td><code>M</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ n /</font></font></td>
<td><code>N</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ŋ /</font></font></td>
<td><code>NX</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ θ /</font></font></td>
<td><code>TH</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ l /</font></font></td>
<td><code>L</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ r /</font></font></td>
<td><code>R</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ j /</font></font></td>
<td><code>Y</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ w /</font></font></td>
<td><code>W</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ æ /</font></font></td>
<td><code>AE</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ɛ /</font></font></td>
<td><code>EH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ɪ /</font></font></td>
<td><code>IH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ i /</font></font></td>
<td><code>IY</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ʌ /</font></font></td>
<td><code>AH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ɔ /</font></font></td>
<td><code>AO</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ʊ /</font></font></td>
<td><code>UH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ u /</font></font></td>
<td><code>UX</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ɒ /</font></font></td>
<td><code>OH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ɑ /</font></font></td>
<td><code>AA</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ə /</font></font></td>
<td><code>AX</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ɜ /</font></font></td>
<td><code>ER</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ eɪ /</font></font></td>
<td><code>EY</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ aɪ /</font></font></td>
<td><code>AY</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ɔɪ /</font></font></td>
<td><code>OY</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ aʊ /</font></font></td>
<td><code>AW</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ oʊ /</font></font></td>
<td><code>OW</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[l̩]</font></font></td>
<td><code>UL</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[m̩]</font></font></td>
<td><code>UM</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[n̩]</font></font></td>
<td><code>UN</code></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In addition to phonemes, the numbers 1–8 are used in SAM transcription to </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indicate stress and tone</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 1 means “very emotional” stress, 4 means normal stress, 6 means neutral tone, 8 means “extreme drop in tone”. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reciter is arranged quite simply: context-sensitive rules from the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">list</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> are applied alternately to the input line </font><font style="vertical-align: inherit;">, for example, the rule " </font></font><code><nobr>(IR)#=AYR</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" replaces the text ⟨ir⟩ before the vowel with / aɪr /; the rule " </font></font><code><nobr>.(S) =Z</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" replaces ⟨s⟩ between the voiced consonant and the space (end of the word) with / z /; the rule " </font></font><code><nobr>(U)^^=AH5</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" replaces ⟨u⟩ before two consonants in a row with / ʌ /, and makes the syllable stressed. It is important to note that in many words Reciter does not emphasize any vowel, and in some it notes several vowels at once: for example,the word ⟨provoking⟩ turns into "</font></font><code>PRUW4VOW5KIHNX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">", ie </font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ˈpruˈvoʊkɪŋ /.</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> An attentive reader will notice that unnecessary stress is not the only mistake in this transcription. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/cab/de6/a56/cabde6a56adc4119e4731fb057dc6818.jpg" align="right" width="430"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I decided that transcription is the least interesting part of the speech synthesizer; and given the relatively low quality of transcription at the Reciter output, I decided There are several freely available Internet services for transcribing excerpts of English texts; instead of heuristic rules, these services use rather large dictionaries. In my experience, the best quality of transcription is for </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tophonetics.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">photransedit.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">at the same time, the second has a number of drawbacks: it uses not quite standard phoneme notation, notes stress even in monosyllabic words, and what is most inconvenient - it is written in ASP.NET and requires correct values ​​in POST requests </font></font><code>__VIEWSTATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>__EVENTVALIDATION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which complicates its use from third-party sites. </font><font style="vertical-align: inherit;">Therefore, in my demonstration of the device and the SAM, available on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tyomitch.github.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , I used transliteration through </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://cors-anywhere.herokuapp.com/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://cors-anywhere.herokuapp.com/https://tophonetics.com/</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parser</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unlike Reciter, so called by the creators of SAM, the Parser and Renderer components were given names by German reverse engineers, so these names do not quite accurately reflect the purpose of these components. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parser has three main tasks:</font></font><br>
<br>
<ol>
<li> «»  (, )  .        (       )  «-» <code>UL, UM, UN</code>,    [l̩, m̩, n̩].  ,        /əl, əm, ən/;  Parser       ,    <code>AXL, AXM, AXN</code> .</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"></a>, ..       .     «AH LIHTUL TUW LOW»   ,   /t/   [ɾ] (<code>DX</code>)     [t] (<code>T,*,*</code>)   . (   .)  , /l/   [ɫ] (<code>LX</code>)   ,   [l] (<code>L</code>)  .</li>
<li>      .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SAM supports 81 backgrounds, of which 61 have names and can be used in phoneme recordings to “outwit” Parser and immediately set the desired sound. </font><font style="vertical-align: inherit;">The remaining 20 backgrounds are nameless; </font><font style="vertical-align: inherit;">18 of them can appear only as a result of the work of Parser, and backgrounds with codes 46 and 47 cannot appear in any way, and probably remained undetermined by an oversight of SAM developers </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Backgrounds with codes 0-4 ( </font></font><code> .?,-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) correspond to silence; </font><font style="vertical-align: inherit;">the rest are summarized in the following table:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The code</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Designation</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sound</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The code</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Designation</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sound</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></td>
<td><code>IY</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[i]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">42</font></font></td>
<td><code>CH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[t] in the composition / tʃ /</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></td>
<td><code>IH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ɪ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43</font></font></td>
<td><code>*</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ʃ] as part of / tʃ /</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></td>
<td><code>EH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ɛ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">44</font></font></td>
<td><code>J</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[d] in the composition / dʒ /</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
<td><code>AE</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[æ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">45</font></font></td>
<td><code>*</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ʒ] of / dʒ /</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9</font></font></td>
<td><code>AA</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ɑ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">48</font></font></td>
<td><code>EY</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~ [ɜ] in / eɪ /</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></td>
<td><code>AH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ʌ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">49</font></font></td>
<td><code>AY</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~ [ɑ] in / aɪ /</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eleven</font></font></td>
<td><code>AO</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ɔ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fifty</font></font></td>
<td><code>OY</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ɔ] of / ɔɪ /</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12</font></font></td>
<td><code>UH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ʊ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">51</font></font></td>
<td><code>AW</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ɑ] in / aʊ /</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">thirteen</font></font></td>
<td><code>AX</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ə]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">52</font></font></td>
<td><code>OW</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ɔ] as part of / oʊ /</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14</font></font></td>
<td><code>IX</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shorter [ɪ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">53</font></font></td>
<td><code>UW</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~ [u]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fifteen</font></font></td>
<td><code>ER</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ɜ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">54</font></font></td>
<td><code>B</code></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[b]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sixteen</font></font></td>
<td><code>UX</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[u]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">55</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17</font></font></td>
<td><code>OH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[o]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">56</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eighteen</font></font></td>
<td><code>RX</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ɹ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">57</font></font></td>
<td><code>D</code></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[d]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nineteen</font></font></td>
<td><code>LX</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ɫ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">58</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">twenty</font></font></td>
<td><code>WX</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">short [ʊ] in diphthongs</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">59</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21</font></font></td>
<td><code>YX</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">short [ɪ] in diphthongs</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">60</font></font></td>
<td><code>G</code></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[gʲ]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22</font></font></td>
<td><code>WH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">longer [w]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">61</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23</font></font></td>
<td><code>R</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ɹ̠]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">62</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24</font></font></td>
<td><code>L</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[l]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">63</font></font></td>
<td><code>GX</code></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[g]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25</font></font></td>
<td><code>W</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[w]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">26</font></font></td>
<td><code>Y</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[j]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">65</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27</font></font></td>
<td><code>M</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[m]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">66</font></font></td>
<td><code>P</code></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[p]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28</font></font></td>
<td><code>N</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[n]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">67</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">29th</font></font></td>
<td><code>NX</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ŋ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">68</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">thirty</font></font></td>
<td><code>DX</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ɾ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">69</font></font></td>
<td><code>T</code></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[t]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">31</font></font></td>
<td><code>Q</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ʔ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">70</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32</font></font></td>
<td><code>S</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[s]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">71</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33</font></font></td>
<td><code>SH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ʃ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">72</font></font></td>
<td><code>K</code></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[kʲ]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">34</font></font></td>
<td><code>F</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[f]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">73</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35</font></font></td>
<td><code>TH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[θ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">74</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">36</font></font></td>
<td><code>/H</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ç]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">75</font></font></td>
<td><code>KX</code></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[k]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">37</font></font></td>
<td><code>/X</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[h]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">76</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">38</font></font></td>
<td><code>Z</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[z]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">77</font></font></td>
<td><code>*</code></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39</font></font></td>
<td><code>ZH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ʒ]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">78</font></font></td>
<td><code>UL</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[l̩]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">40</font></font></td>
<td><code>V</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[v]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">79</font></font></td>
<td><code>UM</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[m̩]</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">41</font></font></td>
<td><code>DH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ð]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">80</font></font></td>
<td><code>UN</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[n̩]</font></font></td>
</tr>
</tbody></table></div><br>
<img src="https://habrastorage.org/webt/qy/q5/ol/qyq5olw3du3z3knjdacdo7bueke.jpeg" align="right" width="430"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The actions performed by Parser consist of seven steps:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parsing itself: a list of background codes and a parallel list of tones given by numbers in the input line are formed on the input line.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Applying a set of two dozen rules to the list of backgrounds: for example, the substitutions / t / + / r / → [tʃ] + [ɹ̠] and / k / + / non-front vowel / → [k] + [vowel]. </font><font style="vertical-align: inherit;">(/ k / in front of the front vowels remain unchanged and match the background [kʲ].)</font></font></li>
<li><code>CopyStress</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: The tone set for stressed vowels extends to the consonants that precede them.</font></font></li>
<li><code>SetPhonemeLength</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: duration is substituted for each background (in conditional "frames"). </font><font style="vertical-align: inherit;">Two background longitude tables are used - one for stressed syllables and one for unstressed ones.</font></font></li>
<li><code>AdjustLengths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Applies a set of seven rules for adjusting background durations. </font><font style="vertical-align: inherit;">For example, vowels before voiced consonants are lengthened one and a half times, and consecutive explosive consonants are halved.</font></font></li>
<li><code>ProlongPlosiveStopConsonants</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: explosive consonants in front of vowels, smooth and fricative consonants are divided into triples of backgrounds. </font><font style="vertical-align: inherit;">The first background in the three corresponds to a lower intensity of sound, the second to full intensity, the third to silence.</font></font></li>
<li><code>InsertBreath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: the phrase is divided </font></font><code> .?,-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">into </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“exhalations”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> by “silent” backgrounds ( </font><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">up to 232 frames (this is about 2½ seconds). </font><font style="vertical-align: inherit;">In a SAM implementation for retro PCs, such a partition was necessary to save memory; </font><font style="vertical-align: inherit;">in the JavaScript version it makes no sense, and in my fork it is deleted.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parser outputs three parallel lists: background codes, their tones, and their duration.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renderer</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This component is responsible for the synthesis of speech in the narrow sense of the word. </font><font style="vertical-align: inherit;">At the input, it receives a list of backgrounds with specified tones and durations, as well as parameters that affect the synthesized voice. </font><font style="vertical-align: inherit;">At the output, it produces eight parallel lists: the frequencies of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">formants</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> F </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> –F </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , their intensities (amplitudes), the main frequency F </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (tone of voice), and the values </font></font><code>sampledConsonant</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which will be described in more detail below. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With reference to the SAM instruction </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, the</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> following examples of voice parameter values </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">are provided</font></a><font style="vertical-align: inherit;"> :</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vote</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speed</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pitch</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Throat</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mouth</font></font></th>
<td rowspan="8"><img src="https://habrastorage.org/getpro/habr/post_images/79f/0f8/404/79f0f84047f67b637c21a862d7c87b1c.png" width="240"></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elf</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">72</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">110</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">160</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Little robot</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">92</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">60</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">190</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">190</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stuffy guy</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">82</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">72</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">110</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">105</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Little old lady</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">82</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">145</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">145</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Extra-terrestrial</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">150</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">200</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SAM</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">72</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">128</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">128</font></font></td>
</tr>
<tr>
<td><abbr title="Added in the instructions for the SAM port for BBC micro: bit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalek</font></font></abbr></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">120</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">200</font></font></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is worth noting that the Speed ​​parameter is used not in Renderer, but already at the stage of audio generation: the duration of the sound generated for one frame depends on this parameter. In addition to the Speed ​​parameter, the frame duration also depends on the type of sound, as will be explained below. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Formant speech synthesis is based on the fact that each background is associated with the frequencies and amplitudes of the first few formants. For the synthesis of vowels, the use of two formants is sufficient - for example, a </font><font style="vertical-align: inherit;">graph of formant frequencies typical of English vowels </font><font style="vertical-align: inherit;">taken from the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">website of the University of Manitoba</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<img src="https://habrastorage.org/webt/tk/c6/ps/tkc6psyuhrbycd2agmtgrlymfng.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To synthesize consonants, additional formants are needed. Moreover, as I mentioned in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">last year’s article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , noisy consonants are characterized by “bursts” in a wide frequency band:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zg/ep/6c/zgep6cwqlhifz5vy33mjmtd_tra.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These “bursts” cannot be obtained by pure formant synthesis, therefore SAM reproduces the sounds of noisy consonants from the sample table. </font><font style="vertical-align: inherit;">The values ​​mentioned above </font></font><code>sampledConsonant</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">select the part of the table corresponding to the particular noisy consonant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The actions performed by Renderer consist of five steps:</font></font><br>
<br>
<ol>
<li><code>SetMouthThroat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: for vowels and sonor backgrounds (codes 5–29 and 48–53), the tabulated values ​​of the frequencies F </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and F </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 are</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> multiplied by the parameters Mouth and Throat, respectively.</font></font></li>
<li><code>CreateFrames</code>:              .        ,        (1–8)      Pitch (<nobr>1 → −32</nobr>, <nobr>6 → 0</nobr>, <nobr>8 → +12</nobr>).  ,        (  30 )    , .</li>
<li><code>CreateTransitions</code>:   F<sub>0</sub>–F<sub>3</sub>   F<sub>1</sub>–F<sub>3</sub>       .  ,    ,     .</li>
<li> F<sub>0</sub>       F<sub>1</sub>,   «pitch contour»,         .</li>
<li>,         ()  ,    PCM.</li>
</ol><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From a physical point of view, speech is a glottal pulse train created by the vocal cords (see. Fig.), Which along the way out passes through the mouth and nose ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">speech tract</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), and those like the resonator amplify certain harmonics in the larynx wave. The frequency of the laryngeal wave - this is the main frequency of the voice F </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . As a rule, its values ​​are between 100 and 400 Hz: lower for men, higher for women, even higher for children. </font><font style="vertical-align: inherit;">
The voice model used in formant synthesis is that several band-pass filters are applied to the larynx wave, each of which distinguishes one formant. The width of the allocated band depends on the frequency of the formant, and according to experimental data, it is up to 200 Hz: </font><font style="vertical-align: inherit;">
In my SAM demonstration on </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">tyomitch.github.io</font></a></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/7r/bz/ky/7rbzky2vbt3-0ksfxjxj5jieomo.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/xz/i_/rj/xzi_rjinaolovitwii46y1c9j0i.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this approach is used: with the default value of the parameter Bandwidth = 3, each formant introduces harmonics F </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> into the </font><font style="vertical-align: inherit;">resulting audio signal </font><font style="vertical-align: inherit;">within ± 5.9% of the formant frequency. This roughly corresponds to the above graphs: the formant with a frequency of 3 KHz allocates a band width of 177 Hz. In the classical SAM implementation, the generation of the required number of harmonics was approached more inventively: for each formant one wave is generated, but the phase of this wave is zeroed with a frequency F </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In my demo, you can switch to the mode that synthesizes one wave for each formant (but without zeroing the phase) by unchecking the Pitch parameter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The function </font></font><code>ProcessFrames</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in the classic SAM processes deaf and voiced noisy consonants separately from all other backgrounds:</font></font><br>
<br>
<ul>
<li>       .   ,      Speed.    ([s])  105 ,   ([p]  [t]) —  10.4 .</li>
<li>      <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mfrac><mrow><mi>S</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mo>&amp;#x22C5;</mo><mn>162</mn></mrow><mn>50</mn></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.039ex" height="3.759ex" viewBox="0 -1132.2 3461 1618.6" role="img" focusable="false" style="vertical-align: -1.13ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(120,0)"><rect stroke="none" width="3221" height="60" x="0" y="220"></rect><g transform="translate(60,548)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMATHI-70" x="645" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMATHI-65" x="1149" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMATHI-65" x="1615" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMATHI-64" x="2082" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMAIN-22C5" x="2605" y="0"></use><g transform="translate(2039,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMAIN-36" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMAIN-32" x="1001" y="0"></use></g></g><g transform="translate(1256,-383)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMAIN-35"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMAIN-30" x="500" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mrow><mi>S</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mo>⋅</mo><mn>162</mn></mrow><mn>50</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-1">\frac{Speed\cdot162}{50}</script> PCM-,     :  ()  F<sub>1</sub>  F<sub>2</sub>,   ( )  F<sub>3</sub>.  ,        Speed=72  10.6   .</li>
<li>      ,   ,  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mfrac><mn>3</mn><mn>4</mn></mfrac><mo>&amp;#x22C5;</mo><mfrac><mrow><mi>S</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mo>&amp;#x22C5;</mo><mn>162</mn></mrow><mn>50</mn></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="11.376ex" height="3.759ex" viewBox="0 -1132.2 4897.9 1618.6" role="img" focusable="false" style="vertical-align: -1.13ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(120,0)"><rect stroke="none" width="473" height="60" x="0" y="220"></rect><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMAIN-33" x="84" y="604"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMAIN-34" x="84" y="-553"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMAIN-22C5" x="936" y="0"></use><g transform="translate(1214,0)"><g transform="translate(342,0)"><rect stroke="none" width="3221" height="60" x="0" y="220"></rect><g transform="translate(60,548)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMATHI-70" x="645" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMATHI-65" x="1149" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMATHI-65" x="1615" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMATHI-64" x="2082" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMAIN-22C5" x="2605" y="0"></use><g transform="translate(2039,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMAIN-36" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMAIN-32" x="1001" y="0"></use></g></g><g transform="translate(1256,-383)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMAIN-35"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/500764/&amp;usg=ALkJrhgWdKSYt-_xBsTqmIl0uLYqHi3-VA#MJMAIN-30" x="500" y="0"></use></g></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mn>3</mn><mn>4</mn></mfrac><mo>⋅</mo><mfrac><mrow><mi>S</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mo>⋅</mo><mn>162</mn></mrow><mn>50</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-2">\frac34\cdot\frac{Speed\cdot162}{50}</script> PCM-,      .      ,    Speed  .   ,      Pitch=64,    1.6   , .. 9.5       .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For noisy consonants, five sample tables are used: one for the alveolar ([t, s, z]), one for the chamber-alveolar ([ʃ, ʒ]), one for the labial and dental ([p, f, v, θ, ð ]), and one for [ç] and [h]. Samples related to the same table differ from each other only in duration and intensity. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In my demo, for the sake of simplicity, a sound of equal duration is generated for all frames, and this duration depends only on the Speed ​​parameter: at its default value, one frame corresponds to 10.4 ms of sound. As experiments show, this “on average” corresponds to the classic SAM, although with respect to it, individual sounds in the synthesized phrase can “move” for units of ms forward or backward.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In conclusion, I will demonstrate three spectrograms of the welcome phrase created by the classic SAM audio generator and my audio generator with the tone synthesis turned on and off: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/hn/z8/cqhnz8gfcccpxllgraatfaapdiu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, turning off the tone synthesis achieves a compromise between the sound quality and the visibility of the formants on the spectrogram.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en500752/index.html">MASK-RCNN for finding roofs from drone images</a></li>
<li><a href="../en500754/index.html">How to become a dollar millionaire in 30 years, lying on the couch</a></li>
<li><a href="../en500756/index.html">Remote All-Power. How does streaming at JUG Ru Group online conferences work?</a></li>
<li><a href="../en500758/index.html">Key trends in the cybersecurity and information security market 2020-2021 versus forecast 2019-2020</a></li>
<li><a href="../en500760/index.html">How to kill zombies more efficiently with ZeroTier</a></li>
<li><a href="../en500768/index.html">Twitter suggests editing insulted tweets before posting</a></li>
<li><a href="../en500770/index.html">Welcome to the FPGA Starter Webinar</a></li>
<li><a href="../en500772/index.html">Kinda Heroes - Devstory Cute Chibik RPG</a></li>
<li><a href="../en500776/index.html">Materials from the shift for students in mathematics and programming in "Sirius"</a></li>
<li><a href="../en500780/index.html">Flutter 1.17 released</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>