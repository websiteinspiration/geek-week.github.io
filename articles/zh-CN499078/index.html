<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¥ ğŸˆ ğŸ“Ÿ TypeScriptå’ŒReactçš„Clean Architectureã€‚ç¬¬1éƒ¨åˆ†ï¼šåŸºç¡€çŸ¥è¯† ğŸ† ğŸ‘¬ ğŸ’–</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä¸‹åˆå¥½ï¼Œäº²çˆ±çš„è¯»è€…ä»¬ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºWebå¼€å‘ä¸­çš„è½¯ä»¶ä½“ç³»ç»“æ„ã€‚å¾ˆé•¿æ—¶é—´ä»¥æ¥ï¼Œæˆ‘å’Œæˆ‘çš„åŒäº‹ä½¿ç”¨äº†â€œæ¸…æ´æ¶æ„â€çš„ä¸€ç§å˜ä½“åœ¨å…¶Frontendé¡¹ç›®ä¸­æ„å»ºæ¶æ„ã€‚æœ€åˆï¼Œæˆ‘åœ¨è¿‡æ¸¡åˆ°TypeScriptæ—¶å°†å…¶æŠ•å…¥ä½¿ç”¨ï¼Œå› ä¸ºæˆ‘åœ¨Reactçš„å¼€å‘ä¸–ç•Œä¸­æ²¡æœ‰æ‰¾åˆ°å…¶ä»–åˆé€‚çš„é€šç”¨æ¶æ„æ–¹æ³•ï¼ˆè€Œä¸”æˆ‘æ¥è‡ªAndroidå¼€...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>TypeScriptå’ŒReactçš„Clean Architectureã€‚ç¬¬1éƒ¨åˆ†ï¼šåŸºç¡€çŸ¥è¯†</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499078/"><img src="https://habrastorage.org/webt/q7/ls/cw/q7lscw7mpm4ex_ivtew-qlanrkw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸‹åˆå¥½ï¼Œäº²çˆ±çš„è¯»è€…ä»¬ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºWebå¼€å‘ä¸­çš„è½¯ä»¶ä½“ç³»ç»“æ„ã€‚å¾ˆé•¿æ—¶é—´ä»¥æ¥ï¼Œæˆ‘å’Œæˆ‘çš„åŒäº‹ä½¿ç”¨äº†</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œæ¸…æ´æ¶æ„â€çš„</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€ç§å˜ä½“</font><font style="vertical-align: inherit;">åœ¨å…¶Frontendé¡¹ç›®ä¸­æ„å»ºæ¶æ„ã€‚æœ€åˆï¼Œæˆ‘åœ¨è¿‡æ¸¡åˆ°TypeScriptæ—¶å°†å…¶æŠ•å…¥ä½¿ç”¨ï¼Œå› ä¸ºæˆ‘åœ¨Reactçš„å¼€å‘ä¸–ç•Œä¸­æ²¡æœ‰æ‰¾åˆ°å…¶ä»–åˆé€‚çš„é€šç”¨æ¶æ„æ–¹æ³•ï¼ˆè€Œä¸”æˆ‘æ¥è‡ªAndroidå¼€å‘ï¼Œå¾ˆä¹…ä»¥å‰ï¼Œåœ¨Kotlinä¹‹å‰ï¼Œæˆ‘å¯¹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fernando Cejasçš„ä¸€ç¯‡æ–‡ç« </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤§æƒŠå°æ€ª</font><font style="vertical-align: inherit;">ï¼Œæˆ‘æœ‰æ—¶ä»ç„¶ä¼šæåˆ°ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘æƒ³å‘æ‚¨ä»‹ç»æˆ‘ä»¬åœ¨ä½¿ç”¨TypeScriptçš„Reactåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨Clean Architectureçš„ç»éªŒã€‚</font><font style="vertical-align: inherit;">æˆ‘ä¸ºä»€ä¹ˆè¦å‘Šè¯‰è¿™ä¸ªï¼Ÿ</font><font style="vertical-align: inherit;">-æœ‰æ—¶æˆ‘å¿…é¡»å‘å°šä¸ç†Ÿæ‚‰è¿™ç§æ–¹æ³•çš„å¼€å‘äººå‘˜æ¾„æ¸…å¹¶è¯æ˜å…¶ç”¨æ³•ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œåœ¨è¿™é‡Œæˆ‘å°†è¿›è¡Œè¯¦ç»†çš„åˆ†æï¼Œå¹¶é™„æœ‰ç›´è§‚çš„è§£é‡Šï¼Œä»¥åæˆ‘å¯ä»¥å‚è€ƒã€‚</font></font><br>
<a name="habracut"></a><br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å†…å®¹</font></font></b></u><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»‹ç»</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç†è®ºéƒ¨åˆ†</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å»ºç­‘çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¸…æ´å»ºç­‘çš„åŸå§‹å®šä¹‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‰ç«¯çš„å¹²å‡€æ¶æ„</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®è·µéƒ¨åˆ†</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webæˆæƒç”³è¯·è¯´æ˜</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æºä»£ç ç»“æ„</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> UMLé¡¹ç›®å›¾</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»£ç è§£æ</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»“è®º</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èµ„æºå’Œæ¥æº</font></font></li>
</ol><br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.ç®€ä»‹</font></font></u></b><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é¦–å…ˆï¼Œæ¶æ„æ˜¯å…¨çƒæ€§çš„äº‹ç‰©ã€‚</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨ç‰¹å®šçš„ç¼–ç¨‹è¯­è¨€çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œä¸éœ€è¦ç†è§£å®ƒã€‚æ‚¨é€šå¸¸éœ€è¦äº†è§£å…³é”®æ€æƒ³ï¼Œè¿™æ„å‘³ç€å¯ä»¥å®ç°ä½¿ç”¨ä¸€ç§æˆ–å¦ä¸€ç§ä½“ç³»ç»“æ„çš„å¥½å¤„ã€‚å…¶åŸç†ä¸è®¾è®¡æ¨¡å¼æˆ–SOLIDç›¸åŒ-å®ƒä»¬ä¸æ˜¯ä¸ºç‰¹å®šçš„è¯­è¨€è€Œæ˜¯ä¸ºæ•´ä¸ªç¼–ç¨‹æ–¹æ³•ï¼ˆä¾‹å¦‚OOPï¼‰è€Œå‘æ˜çš„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çœ‹åˆ°æ•´ä¸ªå›¾æ™¯æ—¶ï¼Œæœ€å®¹æ˜“ç†è§£ä½“ç³»ç»“æ„ã€‚å› æ­¤ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä¸ä»…ä¼šè®¨è®ºâ€œç†è®ºä¸Šâ€åº”è¯¥å¦‚ä½•åšï¼Œè¿˜å°†æä¾›è¯¥é¡¹ç›®çš„å…·ä½“ç¤ºä¾‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†åœ¨å‰ç«¯å¤„ç†ä½¿ç”¨Clean Architectureçš„ç†è®ºéƒ¨åˆ†ï¼Œç„¶åè€ƒè™‘ä¸€ä¸ªå¸¦æœ‰UMLå›¾å’Œæ¯ä¸ªç±»çš„æè¿°çš„Webåº”ç”¨ç¨‹åºã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é‡è¦è¯´æ˜ï¼šæ¸…æ´ä½“ç³»ç»“æ„å¹¶æ²¡æœ‰ä¸ºç»„ç»‡åº”ç”¨ç¨‹åºå»ºç«‹ä¸¥æ ¼çš„è§„åˆ™ï¼Œä»…ç»™å‡ºå»ºè®®ã€‚æ¯ç§å¹³å°å’Œè¯­è¨€éƒ½æœ‰å…¶ç»†å¾®å·®åˆ«ã€‚æœ¬æ–‡ä»‹ç»äº†æˆ‘å·²ç»ä¸åŒäº‹ä¸€èµ·ä½¿ç”¨å¹¶ä¸”ç°åœ¨æ­£åœ¨ä½¿ç”¨çš„æ–¹æ³•-å®ƒä¸æ˜¯ä¸‡èƒ½è¯ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘è¿˜æƒ³æŒ‡å‡ºï¼Œå¯¹äºå°å‹é¡¹ç›®ï¼Œä½¿ç”¨è¿™ç§æ¶æ„æ–¹æ³•å¯èƒ½æ˜¯å¤šä½™çš„ã€‚</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»»ä½•ä½“ç³»ç»“æ„çš„ä¸»è¦ç›®æ ‡éƒ½æ˜¯ä½¿ä»£ç æ˜“äºç†è§£ï¼Œæ”¯æŒå’Œæµ‹è¯•ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºåœ¨æ²¡æœ‰ä½“ç³»ç»“æ„ï¼Œæµ‹è¯•å’Œå…¶ä»–æ¡ä»¶çš„æƒ…å†µä¸‹ä½¿ç”¨JSç¼–å†™çš„é€Ÿåº¦æ›´å¿«ï¼Œè¿™æ˜¯å¾ˆæ­£å¸¸çš„ã€‚</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸è¦åœ¨ä¸éœ€è¦çš„åœ°æ–¹è¿›è¡Œè¿‡åº¦è®¾è®¡ã€‚</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¯·è®°ä½ï¼Œæ¶æ„/æµ‹è¯•çš„ä¸»è¦ä¼˜åŠ¿æ˜¯åœ¨å…·æœ‰å¤šä¸ªå¼€å‘äººå‘˜çš„å¤§å‹é¡¹ç›®ä¸­è·å¾—çš„ï¼Œæ‚¨éœ€è¦åœ¨å…¶ä¸­ç†è§£å’Œæ›´æ”¹å…¶ä»–äººçš„ä»£ç ã€‚</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD_0</font></font></b>
                        <div class="spoiler_text"><b>UPD_0:</b>            .      ,     â€” <b>  ,   ,     .</b>          - ,      .      ,       ,      .<br>
<br>
   ,  ,    :<br>
<br>
<blockquote>  â€”   ( )   .<br>
<br>
â€”  , Â«Computer Programming as an ArtÂ» (1974)<br>
</blockquote><br>
<br>
 , Â« â€”  Â».     - ,       (  ,      ). <br>
</div>
                    </div><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.ç†è®ºéƒ¨åˆ†</font></font></b></u><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1ã€‚å»ºç­‘çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</font></font></b></u><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç­”ï¼šæ¶æ„å¯¹äºèŠ‚çœå¼€å‘è¿‡ç¨‹ä¸­çš„æ—¶é—´ï¼Œåœ¨è¾ƒé•¿çš„å¼€å‘å‘¨æœŸå†…ä¿æŒç³»ç»Ÿçš„å¯æµ‹è¯•æ€§å’Œå¯æ‰©å±•æ€§æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å¦‚æœæ‚¨ä¸ä¸ºå¤§å‹åº”ç”¨ç¨‹åºæ„å»ºä½“ç³»ç»“æ„ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Œæ‚¨å¯ä»¥æ›´è¯¦ç»†åœ°é˜…è¯»ï¼Œä¾‹å¦‚ï¼Œåœ¨Bob Martinæ’°å†™çš„ã€Š The Clean Architectureã€‹ä¸€ä¹¦ä¸­ã€‚ä¸ºäº†ç®€è¦è¯´æ˜ï¼Œæˆ‘å°†æä¾›æœ¬ä¹¦çš„ä»¥ä¸‹å›¾è¡¨ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7n/t2/pr/7nt2praknbscvpol8lrcqetew7c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¯¥å›¾è¡¨ä¸Šï¼Œæˆ‘ä»¬çœ‹åˆ°æ¯ä¸ªæ–°ç‰ˆæœ¬ï¼ˆå‡è®¾å®ƒä»¬å®šæœŸå‘å¸ƒï¼‰ä¼šå‘ç³»ç»Ÿä¸­æ·»åŠ è¶Šæ¥è¶Šå°‘çš„è¡Œï¼Œå¹¶ä¸”å¢åŠ äº†ä¸€è¡Œçš„æˆæœ¬ã€‚è¿™æ˜¯ç”±äºç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œå¹¶ä¸”è¿›è¡Œæ›´æ”¹å¼€å§‹éœ€è¦ä¸åˆç†çš„å¤§é‡å·¥ä½œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨â€œå¹²å‡€çš„ä½“ç³»ç»“æ„â€ä¸­ï¼Œæ­¤å›¾æ˜¯ä¸è‰¯ä½“ç³»ç»“æ„çš„ä¸€ä¸ªç¤ºä¾‹ã€‚</font><font style="vertical-align: inherit;">è¿™ç§æ–¹æ³•è¿Ÿæ—©ä¼šå¯¼è‡´è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå³æ‰©å±•ç³»ç»Ÿçš„æˆæœ¬è¦æ¯”ç³»ç»Ÿæœ¬èº«çš„æ”¶ç›Šé«˜ã€‚</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å†æ¬¡å…³äºå¼€å‘æ—¶é—´çš„æ¯”ä¾‹</font></font></b>
                        <div class="spoiler_text">           (   ):<br>
<blockquote>Â«  90    10  ,   .   10     90 Â»<br>
<br>
â€”  , Bell Labs</blockquote><br>
:   ,      ,       .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæˆ‘ä»¬ï¼ˆå¼€å‘äººå‘˜ï¼Œé¡¹ç›®ç»ç†ï¼Œå®¢æˆ·ï¼‰å¸Œæœ›åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­çœ‹åˆ°æˆ‘çš„â€œç†æƒ³â€é€‰é¡¹ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/46/h9/_s/46h9_st273xssd8efxtwezq5uhw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥å›¾æ¸…æ¥šåœ°è¡¨æ˜ï¼Œè¡Œæ•°çš„å¢é•¿ç‡ä¸ä¼šå› ç‰ˆæœ¬è€Œå˜åŒ–ã€‚</font><font style="vertical-align: inherit;">ä¸€è¡Œä»£ç çš„æˆæœ¬ï¼ˆå–å†³äºç‰ˆæœ¬ï¼‰ä¼šå¢åŠ ï¼Œä½†è€ƒè™‘åˆ°æˆ‘ä»¬æ­£åœ¨è°ˆè®ºæ•°ç™¾ä¸‡è¡Œçš„ä»£ç ï¼Œè¿™å¹¶ä¸ä¼šæ˜¾ç€å¢åŠ ã€‚</font><font style="vertical-align: inherit;">ä¸å¹¸çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è°ˆè®ºçš„æ˜¯å¤§å‹ä¼ä¸šç³»ç»Ÿï¼Œé‚£ä¹ˆè¿™ç§é€‰æ‹©æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºéšç€äº§å“çš„æ‰©å±•ï¼Œç³»ç»Ÿçš„å¤æ‚æ€§å¢åŠ ï¼Œå¼€å‘äººå‘˜çš„å˜åŒ–ï¼Œå› æ­¤å¼€å‘æˆæœ¬å°†ä¸å¯é¿å…åœ°å¢åŠ ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ï¼Œæˆ‘ä¹Ÿå¯ä»¥è¯·æ‚¨-æˆ‘ä»¬æ­£åœ¨è°ˆè®ºå‰ç«¯åº”ç”¨ç¨‹åºï¼è®©æˆ‘ä»¬é¢å¯¹ç°å®-é€šå¸¸ï¼Œæ­¤ç±»åº”ç”¨ç¨‹åºä¸ä¼šå¢é•¿åˆ°æ•°ç™¾ä¸‡è¡Œï¼Œå¦åˆ™æµè§ˆå™¨ä¼šè®¨åŒä¸‹è½½æ­¤ç±»åº”ç”¨ç¨‹åºã€‚åœ¨æç«¯æƒ…å†µä¸‹ï¼Œå®ƒä»¬ä¼šåˆ†ä¸ºä¸åŒçš„äº§å“ï¼Œå¹¶ä¸”ä¸»è¦é€»è¾‘ä½äºåç«¯ã€‚å› æ­¤ï¼Œåœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åŠªåŠ›äº‰å–ä¸Šè¿°å¢åŠ ä»£ç æˆæœ¬çš„è¶‹åŠ¿ï¼ˆæ ¹æ®åº”ç”¨ç¨‹åºçš„å¤§å°ï¼ŒæˆåŠŸçš„æ–¹æ³•ä¸åŒï¼‰ã€‚å¦‚æœæˆ‘ä»¬çš„é¡¹ç›®ç»´æŠ¤æˆæœ¬æ¯”æ²¡æœ‰å¥½çš„ä½“ç³»ç»“æ„ä¾¿å®œ50ï¼…ï¼Œè¿™å·²ç»èŠ‚çœäº†å¼€å‘äººå‘˜çš„æ—¶é—´å’Œå®¢æˆ·èµ„é‡‘ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆæ„å»ºäº†è‰¯å¥½ä¸”æ¸…æ™°çš„æ¶æ„ä¹‹åï¼Œæˆ‘ä»¬è·å¾—äº†ä»¥ä¸‹</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¼˜åŠ¿</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<ul>
<li><b>  </b> (,     );</li>
<li><b>  </b> (,       -  â€œ  â€);</li>
<li><b>     </b>.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘è®¤ä¸ºé—®é¢˜â€œä¸ºä»€ä¹ˆè¿™æ˜¯å¿…è¦çš„ï¼Ÿï¼â€æˆ‘å›ç­”ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿›å…¥é—®é¢˜çš„æŠ€æœ¯éƒ¨åˆ†ã€‚</font></font><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2ã€‚æœ€åˆçš„å®šä¹‰</font></font></b></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æˆ‘å°†ä¸å¯¹â€œå¹²å‡€çš„ä½“ç³»ç»“æ„â€è¿›è¡Œè¯¦ç»†æè¿°ï¼Œå› ä¸ºè¯¥ä¸»é¢˜å·²åœ¨è®¸å¤šæ–‡ç« ä¸­è¿›è¡Œäº†æŠ«éœ²ï¼Œè€Œåªæ˜¯ç®€è¦åœ°é˜è¿°äº†é—®é¢˜çš„å®è´¨ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨2012å¹´Bob Martinçš„åŸå§‹æ–‡ç« ä¸­ï¼Œæ˜¾ç¤ºäº†ä¸‹å›¾ï¼šè¯¥å›¾çš„</font></font><br>
<br>
<img src="https://habrastorage.org/webt/58/se/fx/58sefxx6ubqmvllmbzzwsiw_yz0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å…³é”®æ€æƒ³æ˜¯å°†åº”ç”¨ç¨‹åºåˆ’åˆ†ä¸ºå‡ å±‚ï¼ˆå¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å±‚ï¼‰ã€‚</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å†…å±‚ä¸çŸ¥é“å¤–å±‚ï¼Œä¾èµ–å…³ç³»å˜æˆä¸­å¿ƒ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚è¯¥å±‚ç¦»ä¸­å¿ƒè¶Šè¿œï¼Œå®ƒå¯¹åº”ç”¨ç¨‹åºçš„â€œéåŠ æƒâ€ç»†èŠ‚ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨å“ªç§æ¡†æ¶ä»¥åŠå±å¹•ä¸Šæœ‰å¤šå°‘ä¸ªæŒ‰é’®ï¼‰çš„äº†è§£å°±è¶Šå¤šã€‚</font></font><br>
<br>
<ul>
<li><b>Entities.</b>      Entities ().    -       . Entities   - . ,   Cart () â€”      ,    ..    ,  React,  ,  â€”    .<br>
<br>
      ,        React\Angular\Express\Nest.js\DI  .. , ,  ,       Web-  Reactâ€™e â€”      NodeJS  .</li>
<li><b>Use cases.</b>      Use Cases (  â€”  ,   â€” Interactors).   ,        . ,      ,       â€”   ,            (. ).</li>
<li><b>Gateways, Presenters, etc.</b>    (Gateways = Repositories, Presenters = View Models) â€”  ,      -      . ,   ,        API  ,  View Model      React-   -.<br>
<br>
:    Use Cases  Repositories,  ,     ,      frontend         API.</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤–éƒ¨æ¥å£ã€‚</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹³å°ç›¸å…³å±‚ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯å¯¹APIï¼ŒReactç»„ä»¶ç­‰çš„ç›´æ¥è°ƒç”¨ã€‚</font><font style="vertical-align: inherit;">è¿™å±‚æ˜¯æœ€éš¾æµ‹è¯•å’ŒæŠ½è±¡çš„ï¼ˆReact'eä¸­çš„ä¸€ä¸ªæŒ‰é’®-æœ‰ä¸€ä¸ªReact'eæŒ‰é’®ï¼‰ã€‚</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.3ã€‚</font><font style="vertical-align: inherit;">åœ¨å‰ç«¯ç¯å¢ƒä¸­è¿›è¡Œå®šä¹‰</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ç°åœ¨ï¼Œè®©æˆ‘ä»¬è¿›å…¥å‰ç«¯åŒºåŸŸã€‚</font><font style="vertical-align: inherit;">åœ¨Frontendçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œä¸Šå›¾å¯ä»¥è¿™æ ·è¡¨ç¤ºï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gp/5l/_e/gp5l_eksd3uomyw5w82-gigeozo.png"><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ä½“ã€‚</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸šåŠ¡å®ä½“ä¸åŸå§‹ä½“ç³»ç»“æ„ä¸­çš„ç›¸åŒã€‚</font><font style="vertical-align: inherit;">è¯·æ³¨æ„ï¼Œå®ä½“å¯ä»¥å­˜å‚¨çŠ¶æ€ï¼Œå¹¶ä¸”é€šå¸¸ç”¨äºæ­¤ç›®çš„ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œå®ä½“â€œè´­ç‰©ç¯®â€å¯ä»¥å­˜å‚¨å½“å‰ä¼šè¯çš„è®¢å•ï¼Œä»¥ä¾¿æä¾›ç”¨äºå¤„ç†å®ƒä»¬çš„æ–¹æ³•ï¼ˆè·å–æ€»ä»·ï¼Œå•†å“æ€»é‡ç­‰ï¼‰ã€‚</font></font></li>
<li><b>Repository interfaces.</b>     API, ,   . .   ,        â€œâ€  . ,   ,         .         ,    .      SOLIDâ€™a (     ,    ).     (,   ,      API     ).</li>
<li><b>Use Cases</b>.   . ,   -     (. . ,     â€” , , , ).</li>
<li><b>View Models  View Interfaces.</b><br>
<br>
ViewModel â€”   Presenters   .       MVVP  MVP\MVC\MV*.   ,   MVP   : Presenter   View    ,  ViewModel    View,       . View  â€œâ€  View Model. MVVP    (View â†’ ViewModel),  MVP â€”  (View ï¸ Presenter).   â€”  .<br>
<br>
View Interfaces â€”   ,      View,   View Model    View  .     onViewModelChanged(): void.     .</li>
<li><b>5. External interfaces.</b>   ,       .     â€”   Reactâ€™a       API.         (AngularJS, React Native)     (IndexDB, local storage  ..). The Clean Architecutre     ,   ,      -   .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœä»¥ä¸‰å±‚åº”ç”¨ç¨‹åºçš„å½¢å¼æ˜¾ç¤ºä¸Šé¢çš„å›¾ï¼Œåˆ™å®ƒé‡‡ç”¨ä»¥ä¸‹å½¢å¼ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xo/wp/vo/xowpvop6kgrincjtlrapfycy6hm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çº¢è‰²ç®­å¤´æ˜¾ç¤ºæ•°æ®æµï¼ˆä½†ä¸æ˜¾ç¤ºä¾èµ–å…³ç³»ï¼Œä¾èµ–å…³ç³»å›¾æ˜¾ç¤ºåœ¨ä¸Šé¢çš„é¥¼å›¾ä¸­ï¼‰ã€‚çŸ©å½¢å›¾å½¢å¼çš„å›¾åƒä½¿æ‚¨å¯ä»¥æ›´å¥½åœ°äº†è§£æ•°æ®æµå¦‚ä½•åœ¨åº”ç”¨ç¨‹åºå†…éƒ¨ç§»åŠ¨ã€‚æˆ‘åœ¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™ç¯‡</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–‡ç« ä¸­</font><font style="vertical-align: inherit;">ä»¥è¿™ç§å›¾è¡¨çš„å½¢å¼çœ‹åˆ°äº†æè¿°çš„</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">æƒ³æ³•</font></a><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯·è®°ä½ï¼Œåœ¨æ›´å¤æ‚çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå±‚ç»“æ„å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚ä¾‹å¦‚ï¼Œå½“æ¯ä¸ªå±‚éƒ½é«˜äºåŸŸæ—¶ï¼Œè¿™æ˜¯ä¸€ç§å¸¸è§çš„åšæ³•-å®ƒå¯ä»¥å…·æœ‰è‡ªå·±çš„æ˜ å°„å™¨ä»¥è¿›è¡Œæ•°æ®è½¬æ¢ã€‚</font></font><br>
<br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.ç¤ºä¾‹åº”ç”¨ç¨‹åº</font></font></u></b><br>
<br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1ã€‚ Webæˆæƒç”³è¯·è¯´æ˜</font></font></u></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†ä½¿ä½“ç³»ç»“æ„çš„åº”ç”¨ç¨‹åºæ›´ç›´è§‚å’Œæ˜“äºç†è§£ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªåŸºäºå…¶æ„å»ºçš„Webåº”ç”¨ç¨‹åºã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥åœ¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubå­˜å‚¨åº“ä¸­</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŸ¥çœ‹åº”ç”¨ç¨‹åºçš„æºä»£ç </font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">è¯¥åº”ç”¨ç¨‹åºå¦‚ä¸‹æ‰€ç¤ºï¼šè¯¥</font></font><br>
<br>
<img src="https://habrastorage.org/webt/br/rj/wy/brrjwylya7qywcwp6vrjexacmk0.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªç®€å•çš„ç™»å½•çª—å£ã€‚</font><font style="vertical-align: inherit;">ä¸ºäº†ä½¿åº”ç”¨ç¨‹åºæœ¬èº«å¤æ‚åŒ–ï¼ˆä»¥ä¾¿ä½¿ä½“ç³»ç»“æ„é€‚ç”¨ï¼‰ï¼Œæˆ‘ä»¬è¿›è¡Œä»¥ä¸‹ä»‹ç»ï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å­—æ®µä¸èƒ½ä¸ºç©ºï¼ˆéªŒè¯ï¼‰ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¾“å…¥çš„é‚®ä»¶å¿…é¡»å…·æœ‰æ­£ç¡®çš„æ ¼å¼ï¼ˆéªŒè¯ï¼‰ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®¿é—®æ•°æ®å¿…é¡»åœ¨æœåŠ¡å™¨ä¸ŠéªŒè¯ï¼ˆAPIå­˜æ ¹ï¼‰å¹¶æ¥æ”¶éªŒè¯å¯†é’¥ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºäº†è¿›è¡Œæˆæƒï¼ŒAPIæ–¹æ³•éœ€è¦æä¾›éªŒè¯æ•°æ®å’ŒéªŒè¯å¯†é’¥ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆæƒåï¼Œè®¿é—®å¯†é’¥å¿…é¡»ä¿å­˜åœ¨åº”ç”¨ç¨‹åºï¼ˆå®ä½“å±‚ï¼‰ä¸­ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€€å‡ºåï¼Œå¿…é¡»ä»å†…å­˜ä¸­åˆ é™¤æˆæƒå¯†é’¥ã€‚</font></font></li>
</ol><br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2ã€‚</font><font style="vertical-align: inherit;">æºä»£ç ç»“æ„</font></font></u></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œsrcæ–‡ä»¶å¤¹çš„ç»“æ„å¦‚ä¸‹ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cu/5i/gz/cu5igzdr9m0fk_kvvyuqm_snlm0.png"><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ•°æ®</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -åŒ…å«ç”¨äºå¤„ç†æ•°æ®çš„ç±»ã€‚</font><font style="vertical-align: inherit;">è¯¥ç›®å½•æ˜¯é¥¼å›¾ä¸­çš„æœ€åä¸€ä¸ªåœ†åœˆï¼Œå› ä¸ºå®ƒåŒ…å«ç”¨äºå®ç°å­˜å‚¨åº“æ¥å£çš„ç±»ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œè¿™äº›ç±»çŸ¥é“APIå’Œç‰¹å®šäºå¹³å°çš„å†…å®¹ï¼ˆæœ¬åœ°å­˜å‚¨ï¼Œcookieç­‰ï¼‰ã€‚</font></font></li>
<li><b>domain </b> â€”   .   Entities, Use Cases  Repository Interfaces.   entities     : models  structures.      ,  models â€”    ,  structures â€”    (  POJO  Java).     ,    models   ,    ()    ,   structures â€” ,      JSON- (json2ts, Â«Â»)        .</li>
<li><b>presentation </b> â€”  View Models, View Interfaces  View ( ),   util â€”   ,   ..</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“ç„¶ï¼Œç»“æ„å¯èƒ½å› é¡¹ç›®è€Œå¼‚ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œåœ¨æˆ‘çš„ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œè¡¨ç¤ºçš„æ ¹æœ¬æ˜¯ç”¨äºç›‘è§†ä¾§æ çŠ¶æ€çš„ç±»å’Œç”¨äºåœ¨é¡µé¢ä¹‹é—´å¯¼èˆªçš„ç±»ã€‚</font></font><br>
<br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3ã€‚</font><font style="vertical-align: inherit;">URMé¡¹ç›®å›¾</font></font></u></b><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/580/b00/846/580b008464e6c4e0ea26e20879989581.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä¸æ–­å¢åŠ çš„æº</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çŸ©å½¢æ¸…æ¥šåœ°æ˜¾ç¤ºäº†æŒ‰å±‚åˆ’åˆ†ç±»ã€‚</font><font style="vertical-align: inherit;">è¯·æ³¨æ„ï¼Œä¾èµ–å…³ç³»ç›´æ¥æŒ‡å‘åŸŸå±‚ï¼ˆæ ¹æ®ç¤ºæ„å›¾ï¼‰ã€‚</font></font><br>
<br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.4ã€‚</font><font style="vertical-align: inherit;">ä»£ç </font></font></u></b><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ä½“å±‚çš„</font></font></b><font style="vertical-align: inherit;"><b><u><font style="vertical-align: inherit;">åˆ†æ</font></u></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†éå†æ‰€æœ‰ç±»å¹¶æè¿°å…¶å·¥ä½œé€»è¾‘ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬ä»æœ€è¿œçš„åœ†-å®ä½“å¼€å§‹ï¼Œå› ä¸ºå…¶ä½™çš„ç±»éƒ½åŸºäºå®ƒã€‚</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthListener.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//    </span>
<span class="hljs-comment">//   AuthHolder</span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;AuthListener&nbsp;{<font></font>
&nbsp;&nbsp;onAuthChanged():&nbsp;<span class="hljs-keyword">void</span>;<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthHolder.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;AuthListener&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./AuthListener'</span>;<font></font>
<font></font>
<span class="hljs-comment">//      (. 3.1.5).  , </span>
<span class="hljs-comment">//  presentation ,    Observer</span>
<span class="hljs-comment">//   AuthListener</span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">AuthHolder</span>&nbsp;</span>{<font></font>
&nbsp;&nbsp;private&nbsp;authListeners:&nbsp;AuthListener[];<font></font>
&nbsp;&nbsp;private&nbsp;isAuthorized:&nbsp;boolean;<font></font>
&nbsp;&nbsp;private&nbsp;authToken:&nbsp;string;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;<span class="hljs-keyword">constructor</span>()&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthorized&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authListeners&nbsp;=&nbsp;[];
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authToken&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onSignedIn(authToken:&nbsp;string):&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthorized&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authToken&nbsp;=&nbsp;authToken;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyListeners();<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onSignedOut():&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthorized&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authToken&nbsp;=&nbsp;<span class="hljs-string">''</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyListeners();<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;isUserAuthorized():&nbsp;boolean&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">this</span>.isAuthorized;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws&nbsp;<span class="hljs-type">{Error}</span>&nbsp;</span>if&nbsp;user&nbsp;is&nbsp;not&nbsp;authorized
&nbsp;&nbsp;&nbsp;*/</span><font></font>
&nbsp;&nbsp;public&nbsp;getAuthToken():&nbsp;string&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(!<span class="hljs-keyword">this</span>.isAuthorized)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">throw</span>&nbsp;<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Error</span>(<span class="hljs-string">'User&nbsp;is&nbsp;not&nbsp;authorized'</span>);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">this</span>.authToken;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;addAuthListener(authListener:&nbsp;AuthListener):&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authListeners.push(authListener);<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;removeAuthListener(authListener:&nbsp;AuthListener):&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authListeners.splice(<span class="hljs-keyword">this</span>.authListeners.indexOf(authListener),&nbsp;<span class="hljs-number">1</span>);<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;private&nbsp;notifyListeners():&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authListeners.forEach(<span class="hljs-function">(<span class="hljs-params">listener</span>)&nbsp;=&gt;</span>&nbsp;listener.onAuthChanged());<font></font>
&nbsp;&nbsp;}<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthorizationResult.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//       </span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;AuthorizationResult&nbsp;{
&nbsp;&nbsp;<span class="hljs-attr">authorizationToken</span>:&nbsp;string;<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValidationResult.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//        </span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;ValidationResult&nbsp;{
&nbsp;&nbsp;<span class="hljs-attr">validationKey</span>:&nbsp;string;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ ·å°±ç»“æŸäº†å®ä½“å±‚ã€‚</font><font style="vertical-align: inherit;">è¯·æ³¨æ„ï¼Œè¯¥å±‚ä¸“é—¨å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ˆçŠ¶æ€å­˜å‚¨ï¼‰ï¼Œå¹¶ç”¨äºåœ¨åº”ç”¨ç¨‹åºçš„å…¶ä½™éƒ¨åˆ†ä¸­ä¼ è¾“æ•°æ®ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šå¸¸ï¼ŒçŠ¶æ€ä¸éœ€è¦å­˜å‚¨åœ¨ä¸šåŠ¡é€»è¾‘ç±»ä¸­ã€‚</font><font style="vertical-align: inherit;">ä¸ºæ­¤ï¼Œå…·æœ‰ä½¿ç”¨åœºæ™¯ï¼ˆç”¨äºæ•°æ®è½¬æ¢ï¼‰çš„å­˜å‚¨åº“åŒ…éå¸¸é€‚åˆã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å­˜å‚¨åº“æ¥å£</font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthRepository.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;ValidationResult&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../entity/auth/stuctures/ValidationResult'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthorizationResult&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../entity/auth/stuctures/AuthorizationResult'</span>;<font></font>
<font></font>
<span class="hljs-comment">//    ,        API</span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;AuthRepository&nbsp;{
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws&nbsp;<span class="hljs-type">{Error}</span>&nbsp;</span>if&nbsp;validation&nbsp;has&nbsp;not&nbsp;passed
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;validateCredentials(email:&nbsp;string,&nbsp;<span class="hljs-attr">password</span>:&nbsp;string):&nbsp;<span class="hljs-built_in">Promise</span>&lt;ValidationResult&gt;;<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;{Error}&nbsp;if&nbsp;credentials&nbsp;have&nbsp;not&nbsp;passed
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;login(email:&nbsp;string,&nbsp;<span class="hljs-attr">password</span>:&nbsp;string,&nbsp;<span class="hljs-attr">validationKey</span>:&nbsp;string):&nbsp;<span class="hljs-built_in">Promise</span>&lt;AuthorizationResult&gt;;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”¨ä¾‹</font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LoginUseCase.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;AuthRepository&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../repository/auth/AuthRepository'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthHolder&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../entity/auth/models/AuthHolder'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">LoginUseCase</span>&nbsp;</span>{<font></font>
&nbsp;&nbsp;private&nbsp;authRepository:&nbsp;AuthRepository;<font></font>
&nbsp;&nbsp;private&nbsp;authHolder:&nbsp;AuthHolder;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;<span class="hljs-keyword">constructor</span>(authRepository:&nbsp;AuthRepository,&nbsp;authHolder:&nbsp;AuthHolder)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authRepository&nbsp;=&nbsp;authRepository;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authHolder&nbsp;=&nbsp;authHolder;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws&nbsp;<span class="hljs-type">{Error}</span>&nbsp;</span>if&nbsp;credentials&nbsp;are&nbsp;not&nbsp;valid&nbsp;or&nbsp;have&nbsp;not&nbsp;passed
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;public&nbsp;<span class="hljs-keyword">async</span>&nbsp;loginUser(email:&nbsp;string,&nbsp;<span class="hljs-attr">password</span>:&nbsp;string):&nbsp;<span class="hljs-built_in">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;validationResult&nbsp;=&nbsp;<span class="hljs-keyword">await</span>&nbsp;<span class="hljs-keyword">this</span>.authRepository.validateCredentials(email,&nbsp;password);
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;authResult&nbsp;=&nbsp;<span class="hljs-keyword">await</span>&nbsp;<span class="hljs-keyword">this</span>.authRepository.login(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;email,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;password,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validationResult.validationKey,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authHolder.onSignedIn(authResult.authorizationToken);<font></font>
&nbsp;&nbsp;}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”¨ä¾‹åªæœ‰ä¸€ç§æ–¹æ³•ã€‚é€šå¸¸ï¼Œç”¨ä¾‹åªæœ‰ä¸€ä¸ªå…¬å…±æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸ºä¸€é¡¹æ“ä½œå®ç°å¤æ‚çš„é€»è¾‘ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¿…é¡»é¦–å…ˆè¿›è¡ŒéªŒè¯ï¼Œç„¶åå°†éªŒè¯æ•°æ®å‘é€åˆ°æˆæƒAPIæ–¹æ³•ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ï¼Œå¦‚æœå°†å…·æœ‰å…±åŒé€»è¾‘çš„å¤šä¸ªåœºæ™¯ç»„åˆåˆ°ä¸€ä¸ªåœºæ™¯ä¸­ï¼Œé€šå¸¸ä¼šä½¿ç”¨ä¸€ç§æ–¹æ³•ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»”ç»†ç¡®ä¿ç”¨ä¾‹ä¸åŒ…å«å¿…é¡»å­˜åœ¨äºå®ä½“ä¸­çš„é€»è¾‘ã€‚ç”¨ä¾‹ä¸­è¿‡å¤šçš„æ–¹æ³•æˆ–å­˜å‚¨çŠ¶æ€é€šå¸¸ç”¨ä½œæŒ‡ç¤ºä»£ç åº”åœ¨å¦ä¸€å±‚ä¸­çš„æŒ‡ç¤ºã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å­˜å‚¨åº“å®ç°</font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthFakeApi.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;AuthRepository&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../domain/repository/auth/AuthRepository'</span>;
<span class="hljs-keyword">import</span>&nbsp;ValidationResult&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../domain/entity/auth/stuctures/ValidationResult'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthorizationResult&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../domain/entity/auth/stuctures/AuthorizationResult'</span>;<font></font>
<font></font>
<span class="hljs-comment">// ,    API</span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">AuthFakeApi</span>&nbsp;<span class="hljs-title">implements</span>&nbsp;<span class="hljs-title">AuthRepository</span>&nbsp;</span>{
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws&nbsp;<span class="hljs-type">{Error}</span>&nbsp;</span>if&nbsp;validation&nbsp;has&nbsp;not&nbsp;passed
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;validateCredentials(email:&nbsp;string,&nbsp;<span class="hljs-attr">password</span>:&nbsp;string):&nbsp;<span class="hljs-built_in">Promise</span>&lt;ValidationResult&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,&nbsp;reject</span>)&nbsp;=&gt;</span>&nbsp;{
      <span class="hljs-comment">//  ,      </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(password.length&nbsp;&lt;&nbsp;<span class="hljs-number">5</span>)&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Error</span>(<span class="hljs-string">'Password&nbsp;length&nbsp;should&nbsp;be&nbsp;more&nbsp;than&nbsp;5&nbsp;characters'</span>));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve({<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">validationKey</span>:&nbsp;<span class="hljs-string">'A34dZ7'</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws&nbsp;<span class="hljs-type">{Error}</span>&nbsp;</span>if&nbsp;credentials&nbsp;have&nbsp;not&nbsp;passed
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;login(email:&nbsp;string,&nbsp;<span class="hljs-attr">password</span>:&nbsp;string,&nbsp;<span class="hljs-attr">validationKey</span>:&nbsp;string):&nbsp;<span class="hljs-built_in">Promise</span>&lt;AuthorizationResult&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,&nbsp;reject</span>)&nbsp;=&gt;</span>&nbsp;{
      <span class="hljs-comment">//    </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(validationKey&nbsp;===&nbsp;<span class="hljs-string">'A34dZ7'</span>)&nbsp;{
        <span class="hljs-comment">//       user@email.com   password</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(email&nbsp;===&nbsp;<span class="hljs-string">'user@email.com'</span>&nbsp;&amp;&amp;&nbsp;password&nbsp;===&nbsp;<span class="hljs-string">'password'</span>)&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve({<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">authorizationToken</span>:&nbsp;<span class="hljs-string">'Bearer&nbsp;ASKJdsfjdijosd93wiesf93isef'</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword">else</span>&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Error</span>(<span class="hljs-string">'Validation&nbsp;key&nbsp;is&nbsp;not&nbsp;correct.&nbsp;Please&nbsp;try&nbsp;later'</span>));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Error</span>(<span class="hljs-string">'Email&nbsp;or&nbsp;password&nbsp;is&nbsp;not&nbsp;correct'</span>));<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æ­¤ç±»ä¸­ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿäº†å¯¹APIçš„è®¿é—®ã€‚æˆ‘ä»¬å°†è¿”å›ä¸€ä¸ªPromiseï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªå®é™…çš„è·å–è¯·æ±‚ã€‚å¦‚æœæˆ‘ä»¬æƒ³ç”¨çœŸå®çš„APIæ›¿æ¢å®ç°ï¼Œåªéœ€åœ¨App.tsxæ–‡ä»¶æˆ–ä¾èµ–é¡¹æ³¨å…¥å·¥å…·ï¼ˆå¦‚æœä½¿ç”¨ï¼‰ä¸­å°†AuthFakeApiç±»æ›´æ”¹ä¸ºAuthApiã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ³¨é‡Šäº†é”™è¯¯æè¿°æ–¹æ³•ï¼Œä»¥ä¾¿å…¶ä»–ç¨‹åºå‘˜ç†è§£é”™è¯¯å¤„ç†çš„å¿…è¦æ€§ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒTypeScriptå½“å‰æ²¡æœ‰æœ‰å…³Javaä¸­å¼•å‘ç±»å‹çš„æŒ‡ä»¤ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç®€å•çš„æ³¨é‡Šã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilï¼ˆè¡¨ç¤ºå±‚ï¼‰</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
åœ¨æ­¤ç›®å½•ä¸­ï¼Œæˆ‘ä»¬æ”¾ç½®äº†å®ç°â€œé¢„é˜²æ€§â€æ•°æ®éªŒè¯é€»è¾‘çš„ç±»ï¼Œä»¥åŠç”¨äºUIå±‚çš„å…¶ä»–ç±»ã€‚</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FormValidator.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">FormValidator</span>&nbsp;</span>{
&nbsp;&nbsp;<span class="hljs-keyword">static</span>&nbsp;isValidEmail(email:&nbsp;string):&nbsp;boolean&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;emailRegex&nbsp;=&nbsp;<span class="hljs-regexp">/^\S+@\S+\.\S+$/</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;emailRegex.test(email);<font></font>
&nbsp;&nbsp;}<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Viewæ¥å£</font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BaseView.tsxä¸€ä¸ª</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ç±»ï¼Œå…è®¸Viewæ¨¡å‹å°†æ›´æ”¹é€šçŸ¥ç»™Viewã€‚</font><font style="vertical-align: inherit;">ç”±æ‰€æœ‰Viewç»„ä»¶å®ç°ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;BaseView&nbsp;{<font></font>
&nbsp;&nbsp;onViewModelChanged():&nbsp;<span class="hljs-keyword">void</span>;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è§†å›¾æ¨¡å‹</font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BaseViewModel.tsxä¸€ä¸ª</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ç±»ï¼Œæä¾›ç”¨äºé“¾æ¥è§†å›¾æ¨¡å‹å’Œè§†å›¾çš„åŸºæœ¬æ–¹æ³•ã€‚</font><font style="vertical-align: inherit;">ç”±æ‰€æœ‰è§†å›¾æ¨¡å‹å®ç°ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;BaseView&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../view/BaseView'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;BaseViewModel&nbsp;{<font></font>
&nbsp;&nbsp;attachView(baseView:&nbsp;BaseView):&nbsp;<span class="hljs-keyword">void</span>;<font></font>
&nbsp;&nbsp;detachView():&nbsp;<span class="hljs-keyword">void</span>;<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthViewModel.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;BaseViewModel&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../BaseViewModel'</span>;<font></font>
<font></font>
<span class="hljs-comment">//  ViewModel,    View. </span>
<span class="hljs-comment">//    ,    View</span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;AuthViewModel&nbsp;extends&nbsp;BaseViewModel&nbsp;{
&nbsp;&nbsp;<span class="hljs-attr">emailQuery</span>:&nbsp;string;<font></font>
&nbsp;&nbsp;passwordQuery:&nbsp;string;<font></font>
&nbsp;&nbsp;isSignInButtonVisible:&nbsp;boolean;<font></font>
&nbsp;&nbsp;isSignOutButtonVisible:&nbsp;boolean;<font></font>
<font></font>
&nbsp;&nbsp;isShowError:&nbsp;boolean;<font></font>
&nbsp;&nbsp;errorMessage:&nbsp;string;<font></font>
<font></font>
&nbsp;&nbsp;authStatus:&nbsp;string;<font></font>
&nbsp;&nbsp;isAuthStatusPositive:&nbsp;boolean;<font></font>
<font></font>
&nbsp;&nbsp;onEmailQueryChanged(loginQuery:&nbsp;string):&nbsp;<span class="hljs-keyword">void</span>;<font></font>
&nbsp;&nbsp;onPasswordQueryChanged(passwordQuery:&nbsp;string):&nbsp;<span class="hljs-keyword">void</span>;<font></font>
&nbsp;&nbsp;onClickSignIn():&nbsp;<span class="hljs-keyword">void</span>;<font></font>
&nbsp;&nbsp;onClickSignOut():&nbsp;<span class="hljs-keyword">void</span>;<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthViewModelImpl.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span>&nbsp;AuthViewModel&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./AuthViewModel'</span>;
<span class="hljs-keyword">import</span>&nbsp;BaseView&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../view/BaseView'</span>;
<span class="hljs-keyword">import</span>&nbsp;LoginUseCase&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../../domain/interactors/auth/LoginUseCase'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthHolder&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../../domain/entity/auth/models/AuthHolder'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthListener&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../../domain/entity/auth/models/AuthListener'</span>;
<span class="hljs-keyword">import</span>&nbsp;FormValidator&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../util/FormValidator'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">AuthViewModelImpl</span>&nbsp;<span class="hljs-title">implements</span>&nbsp;<span class="hljs-title">AuthViewModel</span>,&nbsp;<span class="hljs-title">AuthListener</span>&nbsp;</span>{<font></font>
&nbsp;&nbsp;public&nbsp;emailQuery:&nbsp;string;<font></font>
&nbsp;&nbsp;public&nbsp;passwordQuery:&nbsp;string;<font></font>
&nbsp;&nbsp;public&nbsp;isSignInButtonVisible:&nbsp;boolean;<font></font>
&nbsp;&nbsp;public&nbsp;isSignOutButtonVisible:&nbsp;boolean;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;isShowError:&nbsp;boolean;<font></font>
&nbsp;&nbsp;public&nbsp;errorMessage:&nbsp;string;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;authStatus:&nbsp;string;<font></font>
&nbsp;&nbsp;public&nbsp;isAuthStatusPositive:&nbsp;boolean;<font></font>
<font></font>
&nbsp;&nbsp;private&nbsp;baseView?:&nbsp;BaseView;<font></font>
&nbsp;&nbsp;private&nbsp;loginUseCase:&nbsp;LoginUseCase;<font></font>
&nbsp;&nbsp;private&nbsp;authHolder:&nbsp;AuthHolder;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;<span class="hljs-keyword">constructor</span>(loginUseCase:&nbsp;LoginUseCase,&nbsp;authHolder:&nbsp;AuthHolder)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.emailQuery&nbsp;=&nbsp;<span class="hljs-string">''</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.passwordQuery&nbsp;=&nbsp;<span class="hljs-string">''</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignInButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignOutButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">false</span>;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authStatus&nbsp;=&nbsp;<span class="hljs-string">'is&nbsp;not&nbsp;authorized'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthStatusPositive&nbsp;=&nbsp;<span class="hljs-literal">false</span>;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.loginUseCase&nbsp;=&nbsp;loginUseCase;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authHolder = authHolder;<font></font>
<font></font>
    <span class="hljs-comment">//      </span>
    <span class="hljs-keyword">this</span>.authHolder.addAuthListener(<span class="hljs-keyword">this</span>);<font></font>
  }<font></font>
<font></font>
  public attachView = (baseView: BaseView): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.baseView = baseView;<font></font>
  };<font></font>
<font></font>
  public detachView = (): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.baseView = <span class="hljs-literal">undefined</span>;<font></font>
  };<font></font>
<font></font>
  <span class="hljs-comment">//      AuthListener</span>
&nbsp;&nbsp;public&nbsp;onAuthChanged&nbsp;=&nbsp;():&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;{
    <span class="hljs-comment">//   ,  View</span>
    <span class="hljs-comment">//      </span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(<span class="hljs-keyword">this</span>.authHolder.isUserAuthorized())&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignInButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignOutButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authStatus&nbsp;=&nbsp;<span class="hljs-string">'authorized'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthStatusPositive&nbsp;=&nbsp;<span class="hljs-literal">true</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword">else</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignInButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignOutButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authStatus&nbsp;=&nbsp;<span class="hljs-string">'is&nbsp;not&nbsp;autorized'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthStatusPositive&nbsp;=&nbsp;<span class="hljs-literal">false</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyViewAboutChanges();<font></font>
&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onEmailQueryChanged&nbsp;=&nbsp;(loginQuery:&nbsp;string):&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.emailQuery&nbsp;=&nbsp;loginQuery;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyViewAboutChanges();<font></font>
&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onPasswordQueryChanged&nbsp;=&nbsp;(passwordQuery:&nbsp;string):&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.passwordQuery&nbsp;=&nbsp;passwordQuery;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyViewAboutChanges();<font></font>
&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onClickSignIn&nbsp;=&nbsp;<span class="hljs-keyword">async</span>&nbsp;():&nbsp;<span class="hljs-built_in">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;&nbsp;=&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(!<span class="hljs-keyword">this</span>.validateLoginForm())&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyViewAboutChanges();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">try</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">await</span>&nbsp;<span class="hljs-keyword">this</span>.loginUseCase.loginUser(<span class="hljs-keyword">this</span>.emailQuery,&nbsp;<span class="hljs-keyword">this</span>.passwordQuery);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword">catch</span>&nbsp;(e)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;e.message;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">true</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyViewAboutChanges();<font></font>
&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onClickSignOut&nbsp;=&nbsp;():&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;{
    <span class="hljs-comment">//         </span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authHolder.onSignedOut();<font></font>
&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;private&nbsp;validateLoginForm&nbsp;=&nbsp;():&nbsp;<span class="hljs-function"><span class="hljs-params">boolean</span>&nbsp;=&gt;</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(!<span class="hljs-keyword">this</span>.emailQuery)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">'Email&nbsp;cannot&nbsp;be&nbsp;empty'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-literal">false</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
    <span class="hljs-comment">//  ,      </span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(<span class="hljs-keyword">this</span>.errorMessage&nbsp;===&nbsp;<span class="hljs-string">'Email&nbsp;cannot&nbsp;be&nbsp;empty'</span>)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(!FormValidator.isValidEmail(<span class="hljs-keyword">this</span>.emailQuery))&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">'Email&nbsp;format&nbsp;is&nbsp;not&nbsp;valid'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-literal">false</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(<span class="hljs-keyword">this</span>.errorMessage&nbsp;===&nbsp;<span class="hljs-string">'Email&nbsp;format&nbsp;is&nbsp;not&nbsp;valid'</span>)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(!<span class="hljs-keyword">this</span>.passwordQuery)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">'Password&nbsp;cannot&nbsp;be&nbsp;empty'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-literal">false</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(<span class="hljs-keyword">this</span>.errorMessage&nbsp;===&nbsp;<span class="hljs-string">'Password&nbsp;cannot&nbsp;be&nbsp;empty'</span>)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-literal">true</span>;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;private&nbsp;notifyViewAboutChanges&nbsp;=&nbsp;():&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(<span class="hljs-keyword">this</span>.baseView)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.baseView.onViewModelChanged();<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;};<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ³¨æ„æ–¹æ³•</font></font><code>onClickSignOut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-åœ¨å…¶ä¸­æˆ‘ä»¬ç›´æ¥å¼•ç”¨AuthHolderç±»ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯å…¶ä¸­ä½¿ç”¨åœºæ™¯å½¢å¼çš„ä¸­ä»‹æ˜¯å¤šä½™çš„æƒ…å†µä¹‹ä¸€ï¼Œå› ä¸ºè¯¥æ–¹æ³•çš„é€»è¾‘éå¸¸çç¢ã€‚</font><font style="vertical-align: inherit;">åŒæ ·ï¼Œæ‚¨å¯ä»¥ç›´æ¥è®¿é—®å­˜å‚¨åº“ç•Œé¢ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ï¼Œå¦‚æœä»£ç å¾ˆå¤æ‚ï¼Œåˆ™ä¸ºäº†é€€å‡ºï¼Œæœ‰å¿…è¦å°†å…¶æ”¾åœ¨å•ç‹¬çš„ç”¨ä¾‹ä¸­ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”¨æˆ·ç•Œé¢ï¼ˆè§†å›¾ï¼‰</font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthComponent.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span>&nbsp;React&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span>&nbsp;<span class="hljs-string">'./auth-component.css'</span>;
<span class="hljs-keyword">import</span>&nbsp;BaseView&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../BaseView'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthViewModel&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../view-model/auth/AuthViewModel'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;interface&nbsp;AuthComponentProps&nbsp;{
&nbsp;&nbsp;<span class="hljs-attr">authViewModel</span>:&nbsp;AuthViewModel;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;interface&nbsp;AuthComponentState&nbsp;{
&nbsp;&nbsp;<span class="hljs-attr">emailQuery</span>:&nbsp;string;<font></font>
&nbsp;&nbsp;passwordQuery:&nbsp;string;<font></font>
&nbsp;&nbsp;isSignInButtonVisible:&nbsp;boolean;<font></font>
&nbsp;&nbsp;isSignOutButtonVisible:&nbsp;boolean;<font></font>
<font></font>
&nbsp;&nbsp;isShowError:&nbsp;boolean;<font></font>
&nbsp;&nbsp;errorMessage:&nbsp;string;<font></font>
<font></font>
&nbsp;&nbsp;authStatus:&nbsp;string;<font></font>
&nbsp;&nbsp;isAuthStatusPositive:&nbsp;boolean;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">AuthComponent</span>&nbsp;
  <span class="hljs-keyword">extends</span>&nbsp;<span class="hljs-title">React</span>.<span class="hljs-title">Component</span>&lt;<span class="hljs-title">AuthComponentProps</span>,&nbsp;<span class="hljs-title">AuthComponentState</span>&gt;
&nbsp;&nbsp;<span class="hljs-title">implements</span>&nbsp;<span class="hljs-title">BaseView</span>&nbsp;</span>{<font></font>
&nbsp;&nbsp;private&nbsp;authViewModel:&nbsp;AuthViewModel;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;<span class="hljs-keyword">constructor</span>(props:&nbsp;AuthComponentProps)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">super</span>(props);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;{&nbsp;authViewModel&nbsp;}&nbsp;=&nbsp;<span class="hljs-keyword">this</span>.props;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authViewModel&nbsp;=&nbsp;authViewModel;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.state&nbsp;=&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">emailQuery</span>:&nbsp;authViewModel.emailQuery,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">passwordQuery</span>:&nbsp;authViewModel.passwordQuery,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isSignInButtonVisible</span>:&nbsp;authViewModel.isSignInButtonVisible,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isSignOutButtonVisible</span>:&nbsp;authViewModel.isSignOutButtonVisible,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isShowError</span>:&nbsp;authViewModel.isShowError,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">errorMessage</span>:&nbsp;authViewModel.errorMessage,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">authStatus</span>:&nbsp;authViewModel.authStatus,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isAuthStatusPositive</span>:&nbsp;authViewModel.isAuthStatusPositive,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;};<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;componentDidMount():&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authViewModel.attachView(<span class="hljs-keyword">this</span>);<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;componentWillUnmount():&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authViewModel.detachView();<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
  <span class="hljs-comment">//    ViewModel,   </span>
  <span class="hljs-comment">// state  </span>
&nbsp;&nbsp;public&nbsp;onViewModelChanged():&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.setState({
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">emailQuery</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.emailQuery,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">passwordQuery</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.passwordQuery,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isSignInButtonVisible</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.isSignInButtonVisible,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isSignOutButtonVisible</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.isSignOutButtonVisible,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isShowError</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.isShowError,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">errorMessage</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.errorMessage,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">authStatus</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.authStatus,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isAuthStatusPositive</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.isAuthStatusPositive,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;render():&nbsp;JSX.Element&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emailQuery,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;passwordQuery,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isSignInButtonVisible,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isSignOutButtonVisible,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isShowError,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errorMessage,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;authStatus,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isAuthStatusPositive,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;=&nbsp;<span class="hljs-keyword">this</span>.state;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;flex-grow-1&nbsp;d-flex&nbsp;justify-content-center&nbsp;align-items-center"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="auth-container&nbsp;col&nbsp;bg-white&nbsp;border&nbsp;rounded-lg&nbsp;py-4&nbsp;px-5"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;mt-2&nbsp;mb-4"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status:&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;className={`${isAuthStatusPositive&nbsp;?&nbsp;'text-success'&nbsp;:&nbsp;'text-danger'}`}&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{authStatus}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;mt-2"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type="text"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;placeholder="user@email.com"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onChange={(e:&nbsp;React.FormEvent&lt;HTMLInputElement&gt;):&nbsp;void&nbsp;=&gt;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.authViewModel.onEmailQueryChanged(e.currentTarget.value);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value={emailQuery}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;className="form-control"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;mt-2"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type="password"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;placeholder="password"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onChange={(e:&nbsp;React.FormEvent&lt;HTMLInputElement&gt;):&nbsp;void&nbsp;=&gt;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.authViewModel.onPasswordQueryChanged(e.currentTarget.value);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value={passwordQuery}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;className="form-control"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{isShowError&nbsp;&amp;&amp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;my-3&nbsp;text-danger&nbsp;justify-content-center"&gt;{errorMessage}&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{isSignInButtonVisible&nbsp;&amp;&amp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;mt-4"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type="button"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;className="col&nbsp;btn&nbsp;btn-primary"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClick={():&nbsp;void&nbsp;=&gt;&nbsp;this.authViewModel.onClickSignIn()}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sign&nbsp;in<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/button&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{isSignOutButtonVisible&nbsp;&amp;&amp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;mt-4"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type="button"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;className="col&nbsp;btn&nbsp;btn-primary"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClick={():&nbsp;void&nbsp;=&gt;&nbsp;this.authViewModel.onClickSignOut()}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sign&nbsp;out<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/button&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;);<font></font>
&nbsp;&nbsp;}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥ç»„ä»¶å–å†³äºæ¡†æ¶ï¼Œå› æ­¤ä½äºå›¾çš„æœ€æç«¯ã€‚</font><font style="vertical-align: inherit;">å®‰è£…ï¼ˆ</font><font style="vertical-align: inherit;">ï¼‰æ—¶ï¼Œ</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthComponentä¼š</font></font></i><font style="vertical-align: inherit;"></font><code>componentDidMount</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é™„åŠ åˆ°</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthViewModelä¸Šï¼Œ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è€Œå½“ï¼ˆ</font></font><code>componentWillUnmount</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font><font style="vertical-align: inherit;">æ¶ˆå¤±æ—¶</font><font style="vertical-align: inherit;">ï¼Œ</font><i><font style="vertical-align: inherit;">AuthComponentä¼šåˆ†ç¦»</font></i><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ¯æ¬¡</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ViewModel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ›´æ”¹æ—¶</font><font style="vertical-align: inherit;">ï¼Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthComponentéƒ½ä¼š</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ›´æ–°å…¶çŠ¶æ€ä»¥è¿›ä¸€æ­¥æ›´æ–°æ ‡è®°ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ ¹æ®çŠ¶æ€æ³¨æ„æ¡ä»¶æ¸²æŸ“ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><font></font>
{isSignOutButtonVisible&nbsp;&amp;&amp;&nbsp;(<font></font>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&nbsp;<span class="hljs-attr">className</span>=<span class="hljs-string">"row&nbsp;mt-4"</span>&gt;</span>
&nbsp;&nbsp;  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">className</span>=<span class="hljs-string">"col&nbsp;btn&nbsp;btn-primary"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">onClick</span>=<span class="hljs-string">{():</span>&nbsp;<span class="hljs-attr">void</span>&nbsp;=&gt;</span>&nbsp;this.authViewModel.onClickSignOut()}
&nbsp;&nbsp;&nbsp;&nbsp;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;  Sign&nbsp;out
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
)}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥åŠè°ƒç”¨ViewModelæ–¹æ³•ä»¥ä¼ é€’å€¼ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs">onClick={():&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;<span class="hljs-keyword">this</span>.authViewModel.onClickSignOut()}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¥å£ç‚¹</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
è¦è¿›å…¥åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬ä½¿ç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">index.tsx</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App.tsxæ–‡ä»¶</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">index.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span>&nbsp;React&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span>&nbsp;ReactDOM&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'react-dom'</span>;
<span class="hljs-keyword">import</span>&nbsp;<span class="hljs-string">'bootstrap/dist/css/bootstrap.css'</span>;<font></font>
<font></font>
<span class="hljs-keyword">import</span>&nbsp;App&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./App'</span>;
<span class="hljs-keyword">import</span>&nbsp;*&nbsp;<span class="hljs-keyword">as</span>&nbsp;serviceWorker&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./serviceWorker'</span>;<font></font>
<font></font>
ReactDOM.render(<font></font>
&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.StrictMode</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">App</span>&nbsp;/&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">React.StrictMode</span>&gt;</span></span>,
&nbsp;&nbsp;<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>),<font></font>
);<font></font>
<font></font>
serviceWorker.unregister();<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span>&nbsp;React&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span>&nbsp;<span class="hljs-string">'./app.css'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthComponent&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./presentation/view/auth/AuthComponent'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthViewModelImpl&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./presentation/view-model/auth/AuthViewModelImpl'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthFakeApi&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./data/auth/AuthFakeApi'</span>;
<span class="hljs-keyword">import</span>&nbsp;LoginUseCase&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./domain/interactors/auth/LoginUseCase'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthHolder&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./domain/entity/auth/models/AuthHolder'</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span>&nbsp;<span class="hljs-title">App</span>(<span class="hljs-params"></span>):&nbsp;<span class="hljs-title">JSX</span>.<span class="hljs-title">Element</span>&nbsp;</span>{
&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;data&nbsp;layer</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;authRepository&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthFakeApi();
&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;domain&nbsp;layer</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;authHolder&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthHolder();
&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;loginUseCase&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;LoginUseCase(authRepository,&nbsp;authHolder);
&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;view&nbsp;layer</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;authViewModel&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthViewModelImpl(loginUseCase,&nbsp;authHolder);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;(
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&nbsp;<span class="hljs-attr">className</span>=<span class="hljs-string">"app-container&nbsp;d-flex&nbsp;container-fluid"</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">AuthComponent</span>&nbsp;<span class="hljs-attr">authViewModel</span>=<span class="hljs-string">{authViewModel}</span>&nbsp;/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&nbsp;&nbsp;);<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;App;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆå§‹åŒ–</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App.tsx</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æ–‡ä»¶</font><font style="vertical-align: inherit;">ä¸­çš„æ‰€æœ‰ä¾èµ–é¡¹ã€‚</font><font style="vertical-align: inherit;">åœ¨æ­¤åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä¸ä¼šä½¿ç”¨ä¾èµ–æ³¨å…¥å·¥å…·ï¼Œä»¥å…ä¸å¿…è¦åœ°ä½¿ä»£ç å¤æ‚åŒ–ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœéœ€è¦æ›´æ”¹æŸäº›ä¾èµ–å…³ç³»ï¼Œæˆ‘ä»¬å°†åœ¨æ­¤æ–‡ä»¶ä¸­æ›¿æ¢å®ƒã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œä»£æ›¿ä»¥ä¸‹è¡Œï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span>&nbsp;authRepository&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthFakeApi();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å†™ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span>&nbsp;authRepository&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthApi();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿˜è¦æ³¨æ„ï¼Œæˆ‘ä»¬ä»…ä½¿ç”¨æ¥å£ï¼Œè€Œä¸ä½¿ç”¨ç‰¹å®šçš„å®ç°ï¼ˆä¸€åˆ‡éƒ½åŸºäºæŠ½è±¡ï¼‰ã€‚</font><font style="vertical-align: inherit;">å£°æ˜å˜é‡æ—¶ï¼Œæˆ‘ä»¬çš„æ„æ€æ˜¯ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span>&nbsp;authRepository: AuthRepository&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthFakeApi();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™ä½¿æ‚¨å¯ä»¥éšè—å®ç°ç»†èŠ‚ï¼ˆä»¥ä¾¿ä»¥ååœ¨ä¸æ›´æ”¹ç•Œé¢çš„æƒ…å†µä¸‹è¿›è¡Œæ›¿æ¢ï¼‰ã€‚</font></font><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.ç»“è®º</font></font></b></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æˆ‘å¸Œæœ›é˜…è¯»æœ¬æ–‡æ—¶ï¼Œæ‚¨èƒ½äº†è§£å¦‚ä½•å°†Clean Architectureåº”ç”¨äºReactï¼ˆä¸ä»…æ˜¯é¡¹ç›®ï¼‰ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„ç»éªŒå°†æœ‰åŠ©äºä½¿æ‚¨çš„åº”ç”¨ç¨‹åºæ›´å¥½ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ¬æ–‡ä»‹ç»äº†åœ¨å‰ç«¯é¡¹ç›®ä¸­ä½¿ç”¨The Clean Architectureçš„ç†è®ºå’Œå®è·µåŸºç¡€ã€‚å¦‚å‰æ‰€è¿°ï¼Œâ€œå¹²å‡€çš„ä½“ç³»ç»“æ„â€ä»…æä¾›æœ‰å…³å¦‚ä½•æ„å»ºä½“ç³»ç»“æ„çš„å»ºè®®ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸Šé¢æ˜¯ä½¿ç”¨æ­¤ä½“ç³»ç»“æ„çš„ç®€å•åº”ç”¨ç¨‹åºçš„ç¤ºä¾‹ã€‚</font><font style="vertical-align: inherit;">è¯·è®°ä½ï¼Œéšç€åº”ç”¨ç¨‹åºçš„å¢é•¿ï¼Œä½“ç³»ç»“æ„å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤ä¸Šé¢çš„ä»£ç ä¸æ˜¯ä¸‡èƒ½çš„ï¼ˆå¦‚å¼€å¤´æ‰€è¿°ï¼‰ï¼Œæœ¬æ–‡åªæ˜¯æˆ‘ä»¬ç»éªŒçš„ä¸€éƒ¨åˆ†ã€‚</font></font><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.èµ„æº</font></font></b></u><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æºä»£ç </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UMLå›¾</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN499064/index.html">ä½¿ç”¨ç»Ÿè®¡è¯­è¨€æ¨¡å‹çš„æ›¿ä»£ä¸Šä¸‹æ–‡ç†è§£</a></li>
<li><a href="../zh-CN499068/index.html">å®šä¹‰ç‚¹äº‘è½¬æ¢å‚æ•°</a></li>
<li><a href="../zh-CN499070/index.html">ĞŸAndroidĞ•AndroidStudioæˆ–å¦‚ä½•å……åˆ†ä½¿ç”¨VCSå·¥å…·</a></li>
<li><a href="../zh-CN499074/index.html">å¦‚ä½•åœ¨symfony 5 bundleä¸­é‡ç”¨ä»£ç ï¼Ÿç¬¬4éƒ¨åˆ†ã€‚ä¸»æœºæ†ç»‘æ‰©å±•</a></li>
<li><a href="../zh-CN499076/index.html">å¦‚ä½•åœ¨symfony 5 bundleä¸­é‡ç”¨ä»£ç ï¼Ÿç¬¬5éƒ¨åˆ†ã€‚é…ç½®</a></li>
<li><a href="../zh-CN499086/index.html">è¾¾æ–¯å…‹å®¶åº­é›†ç¾¤</a></li>
<li><a href="../zh-CN499088/index.html">æ— éœ€åª’ä½“æŸ¥è¯¢çš„çµæ´»æ ‡è®°ï¼šminï¼ˆï¼‰ï¼Œmaxï¼ˆï¼‰ï¼Œclampï¼ˆï¼‰å‡½æ•°</a></li>
<li><a href="../zh-CN499090/index.html">æ§åˆ¶å°å‘½ä»¤çš„å¤æ‚æ€§ï¼Œ1979-2020å¹´</a></li>
<li><a href="../zh-CN499092/index.html">å‚è€ƒæ¨¡å‹BIANã€‚å®ƒä¸ºé“¶è¡Œçš„ä¼ä¸šæ¶æ„æä¾›äº†å“ªäº›æ–°çš„æœ‰ç”¨çš„åŠŸèƒ½ï¼Ÿ</a></li>
<li><a href="../zh-CN499096/index.html">æ¼‚äº®å›¾ç‰‡ä¸­çš„æ¨¡ç³Šé€»è¾‘ã€‚ä¸åŒéš¶å±å‡½æ•°çš„å“åº”é¢</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>