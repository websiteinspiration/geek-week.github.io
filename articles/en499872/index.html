<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüëß‚Äçüë¶ ‚è∏Ô∏è ü§≥üèæ Modularity in Java 9 ü¶ç üîÜ üë•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The main innovation in Java 9 was the introduction of modularity. There was a lot of talk about this feature, the release date was postponed several t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Modularity in Java 9</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499872/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The main innovation in Java 9 was the introduction of modularity. </font><font style="vertical-align: inherit;">There was a lot of talk about this feature, the release date was postponed several times to finish everything properly. </font><font style="vertical-align: inherit;">In this post, we will talk about what gives the mechanism of modules, and what useful Java 9 brought in general. </font><font style="vertical-align: inherit;">The basis for the post was the report of my colleague, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sergei Malkevich</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p><br>
<img src="https://habrastorage.org/webt/iw/pu/7t/iwpu7tdtfukrgul-dx7psz6r2ia.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To implement the modules in this version of Java, a whole project was allocated - Project Jigsaw - which includes several JEP and JSR. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yr/w1/gx/yrw1gxgxxkoogldzhbojsyfdddc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For fans of official documentation, you can read more about each JEP </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">More on Project Jigsaw</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Project Jigsaw, which implements modularity, began to be developed back in 2005: first JSR 277 was released, and already in 2008, direct work on the project began. </font><font style="vertical-align: inherit;">The release took place only in 2017. </font><font style="vertical-align: inherit;">That is, in order to screw the modules in Java, it took almost 10 years. </font><font style="vertical-align: inherit;">Which, in fact, emphasizes the full scale of the work and the changes that were made during the implementation of modularity. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What are the goals set by the developers:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">facilitate the development of large applications and libraries;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Improve the security of Java SE in general, and JDK in particular;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">increase application performance;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">create the ability to reduce the size of the JRE to run on small devices so as not to consume too much memory;</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAR HELL</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (more on that later).</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What useful Java 9 brought</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prior to version 9, JDK and JRE were monolithic. </font><font style="vertical-align: inherit;">Their size grew with each release. </font><font style="vertical-align: inherit;">Java 8 already occupied hundreds of megabytes, and all this the developers had to ‚Äúcarry with them‚Äù every time in order to be able to run Java applications. </font><font style="vertical-align: inherit;">Only </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rt.jar alone</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> weighs about 60 Mb. </font><font style="vertical-align: inherit;">Well, here we also add a slow start and high memory consumption. </font><font style="vertical-align: inherit;">Java 9 came to the rescue. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JDK 9</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">module separation was introduced, namely, the JDK was divided into 73 modules. </font><font style="vertical-align: inherit;">And with each new version, the number of these modules is growing. </font><font style="vertical-align: inherit;">In version 11, this number is close to 100. This separation allowed developers to create the JLINK utility. </font><font style="vertical-align: inherit;">Using JLINK, you can create custom JRE sets that will include only the ‚Äúnecessary‚Äù modules that your application really needs. </font><font style="vertical-align: inherit;">Thus, a simple application and some </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">customJRE</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> with a minimal (or small) set of modules can ultimately fit in 20 Mb, which is good news. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The list of modules can be found </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With the advent of Java 9, the JDK structure has changed: now it is identical to the JRE structure. </font><font style="vertical-align: inherit;">If earlier the JDK included the JRE folder, where bin is again and files are duplicated, now everything looks like this:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/du/9w/mn/du9wmn9grm8tmssx5qldnicxrci.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modules</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actually. What is a module? A module is a new level of package and resource aggregation (orig. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúA uniquely named, reusable group of related packages, as well as resources and a module descriptor‚Äù</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modules are delivered in JAR files with packages and module descriptor </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">module-info.java</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . The </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">module-info.java</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file </font><font style="vertical-align: inherit;">contains a description of the module: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
name, dependencies, exported packages, consumed and provided services, permissions for reflection access. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examples of module descriptor descriptions:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">module</span> java.sql {
    <span class="hljs-keyword">requires</span> transitive java.logging;
    <span class="hljs-keyword">requires</span> transitive java.transaction.xa;
    <span class="hljs-keyword">requires</span> transitive java.xml;<font></font>
<font></font>
    <span class="hljs-keyword">exports</span> java.sql;
    <span class="hljs-keyword">exports</span> javax.sql;<font></font>
<font></font>
    uses java.sql.Driver;<font></font>
}</code></pre><br>
<pre><code class="java hljs"><span class="hljs-keyword">module</span> jdk.javadoc {
   <span class="hljs-keyword">requires</span> java.xml;<font></font>
   <font></font>
   <span class="hljs-keyword">requires</span> transitive java.compiler;
   <span class="hljs-keyword">requires</span> transitive jdk.compiler;<font></font>
   <font></font>
   <span class="hljs-keyword">exports</span> jdk.javadoc.doclet;<font></font>
   <font></font>
   provides java.util.spi.ToolProvider with<font></font>
       jdk.javadoc.internal.tool.JavadocToolProvider;<font></font>
   <font></font>
   provides javax.tools.DocumentationTool with<font></font>
       jdk.javadoc.internal.api.JavadocTool;<font></font>
   <font></font>
   provides javax.tools.Tool with<font></font>
      jdk.javadoc.internal.api.JavadocTool;   <font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After the keyword module, we have the name of the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jdk.javadoc</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> package </font><font style="vertical-align: inherit;">, which depends on another </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">java.xml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> package </font><font style="vertical-align: inherit;">and transitively depends on other packages. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's take a closer look at each of the keywords:</font></font><br>
<br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requires</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indicates the modules on which the current module depends;</font></font></li>
</ul><br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requires transitive</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - a transitive dependence - means the following: if the module </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m1 is</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> transitively dependent on the module </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and we have some third module </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mX</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which depends on </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - the module </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mX will also have access to m2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
</ul><br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requires static</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> allows you to specify compile-time dependencies;</font></font></li>
</ul><br>
<ul>
<li><i>exports</i>  ,     (  ‚Äú‚Äù);</li>
</ul><br>
<ul>
<li><i>exports...to‚Ä¶</i>   : <i>export com.my.package.name to com.specific.package</i>;            - () ()  ;</li>
</ul><br>
<ul>
<li><i>uses</i> ,    :<br>
 <br>
<pre><code class="java hljs">uses java.sql.Driver;</code></pre><br>
   ,     ;</li>
</ul><br>
<ul>
<li><i>provides</i> ,    :<br>
 <br>
<pre><code class="java hljs">provides javax.tools.Tool with<font></font>
    jdk.javadoc.internal.api.JavadocTool;</code></pre><br>
    ‚Äî <i>javax.tools.Tool</i>,  with ‚Äî .</li>
</ul><br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A little about services.</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Let's say we have several modules connected that implement an abstract service - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MyService</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . When building the application, we have the opportunity to decide which service implementation to use by ‚Äúdragging‚Äù the required service implementation modules to </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--module-path</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="java hljs">Iterable&lt;MyService&gt; services = <font></font>
        ServiceLoader.load(MyService.class);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, the returned Iterator contains a list of implementations of the MyService interface. In fact, it will contain all the implementations found in the modules found on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--module-path</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Why, in principle, were services introduced? They are needed to show how our code will be used. That is, there is a semantic role. Also, modularity is about encapsulation and security, since we can make the implementation private and exclude the possibility of unauthorized access through reflection. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also, one of the options for using services is a fairly simple implementation of plugins. We can implement the plugin interface for our application and connect modules to work with them. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's return to the syntax for describing modules:</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Until 9ki, through reflection, we had access to almost everything and could do whatever we want and with what we want. </font><font style="vertical-align: inherit;">And the 9th version, as already mentioned, allows you to protect yourself from ‚Äúillegal‚Äù reflection access. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We can fully open the module for reflection access by declaring </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">open</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="java hljs">open <span class="hljs-keyword">module</span> my.<span class="hljs-keyword">module</span> {<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Or, we can specify any packages for reflection access by declaring </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opens</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">module</span> my.<span class="hljs-keyword">module</span> {<font></font>
    opens com.my.coolpackage;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here it is also possible to use </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opens</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com.my.coolpackage </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ...</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , thus giving reflection access to the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com.my.coolpackage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> package </font><font style="vertical-align: inherit;">from the package that we will indicate after </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Types of Modules</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Project Jigsaw classifies modules as follows:</font></font><br>
<br>
<ul>
<li>System Modules ‚Äî Java SE  JDK .    ,   <i>java --list-modules</i>.</li>
</ul><br>
<ul>
<li>Application Modules ‚Äî   ,   ,     (  ),    .</li>
</ul><br>
<ul>
<li>Automatic Modules ‚Äî     ,  Java   JAR-. ,        ,    - .      JAR-  <i>--module-path</i>  Java     ,    JAR-. </li>
</ul><br>
<ul>
<li>Unnamed Module ‚Äî  ,     JAR-,    <i>--class-path</i>.           Java .</li>
</ul><br>
<h3>Class-path vs module-path</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With the advent of modules, a new concept appeared - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">module-path</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In essence, this is the same </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">class-path</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , but for modules. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The launch of a modular application is as follows: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hh/vp/0z/hhvp0zd-py0ds1onano6l8kj0lw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In normal launch mode, we specify the options and the full path to the main class. In case we want to work with modules, we also specify options and the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-m</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-module</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> parameter </font><font style="vertical-align: inherit;">, which just indicates that we will run the modules. That is, we automatically translate our application into modular mode. Next, we indicate the name of the module and the path to the main class from the module. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also, if in normal mode we are used to working with the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-cp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--class-path options</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, in modular mode, we prescribe a new parameter </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-p</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--module-path</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which indicates the paths to the modules used in the application. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Often I meet with the fact that developers do not switch to version 9+, because they believe that they will have to work with modules. </font><font style="vertical-align: inherit;">Although in fact, we can run our applications in the old mode, simply without writing a parameter or using modules, but using only other new chips.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jar hell</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I also want to diagonally dwell on the Jar Hell problem. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cs/bv/rq/csbvrqh03ughwg3yvyelzm5_irk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What is Jar Hell in a nutshell? For example, we have some kind of our application and it depends on </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the X </font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">library</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font><b><font style="vertical-align: inherit;">the Y library</font></b><font style="vertical-align: inherit;"> . At the same time, both of these libraries depend on </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the Z library</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , but on different versions: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> depends on </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">version 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">version 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Well, if version 2 is backward compatible with version 1, then no problem. And if not, it is obvious that we are getting a version conflict, that is, the same library cannot be loaded into memory by the same class loader.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How do you get out of this situation? There are standard methods that developers have been using since the very first Java, for example, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exclude</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , someone uses plugins for Maven, which rename the names of the root packages of the library. Or, developers are looking for different versions of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the X library</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to find a compatible option. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Why am I: the first Jigsaw prototypes implied that the module had a version and allowed the loading of several versions through different ClassLoaders, but later it was abandoned. As a result, the ‚Äúsilver bullet‚Äù, which many were waiting for, did not work out. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But, right out of the box, we were a little safe from such problems. Java 9 Disables </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Split Packages</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- packages that are divided into several modules. That is, if we have the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com.my.coolpackage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> package </font><font style="vertical-align: inherit;">in one module, we cannot use it in another module within the same application. When you start the application with modules containing the same packages, we simply crash. This small improvement eliminates the possibility of unpredictable behavior in connection with downloading Split packages. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also, in addition to the modules themselves, there is also a layer mechanism or </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jigsaw Layers</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which also helps to cope with the Jar Hell problem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A jigsaw layer can be defined as some local modular system. </font><font style="vertical-align: inherit;">And here it is worth noting that the Split packages mentioned above are prohibited only within the framework of one Jigsaw layer. </font><font style="vertical-align: inherit;">Modules with the same packages have a place to be, but they must belong to different layers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It looks like this: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mw/cu/s6/mwcus6cggzhadfiihrbo1olk2nw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When the application starts, the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">boot</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> layer is created </font><font style="vertical-align: inherit;">, which includes the platform modules loaded by Bootstrap, additional platform modules loaded by the platform loader and our application modules loaded by the Application loader. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At any time, we can create our own layers and ‚Äúput‚Äù modules of different versions there and not fall. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There's a great, detailed YouTube talk about the topic: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escaping Jar Hell with Jigsaw Layers</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The module engine from Java 9 opens up new possibilities for us, while the support for libraries today is quite small. </font><font style="vertical-align: inherit;">Yes, people run Spring, Spring Boot and so on. </font><font style="vertical-align: inherit;">But most libraries have not switched to the full use of modules. </font><font style="vertical-align: inherit;">Apparently, therefore, all these changes were perceived rather skeptically by the technical community. </font><font style="vertical-align: inherit;">Modules provide us with new opportunities, but the question of demand remains open. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And finally, I offer a selection of materials on this topic: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Project Jigsaw </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JDK Module Summary </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paul Deitel - Understanding Java 9 Modules </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">baeldung.com - Introduction to Project Jigsaw </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alex Buckley - Modular Development with JDK 9 </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Evgeny Kozlov - Modules in Java</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en499850/index.html">How to analyze competitors and set up a digital strategy in 40 minutes</a></li>
<li><a href="../en499852/index.html">English-language documentation for Angular</a></li>
<li><a href="../en499854/index.html">Apache Bigtop and the choice of Hadoop distribution today</a></li>
<li><a href="../en499858/index.html">What to do on the weekend: an overview of some board games for those who are tired of blue screens</a></li>
<li><a href="../en499870/index.html">Pylint: a detailed test of the code analyzer</a></li>
<li><a href="../en499874/index.html">Cough Detection on Intel NUC</a></li>
<li><a href="../en499876/index.html">Top 5 classic books to improve financial literacy and prepare for the first steps on the exchange</a></li>
<li><a href="../en499878/index.html">The fight for milliseconds. How to choose the server with the least ping</a></li>
<li><a href="../en499882/index.html">How we select designers and conduct technical interviews</a></li>
<li><a href="../en499884/index.html">11 things I understood about CustDev</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>