<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍💻 ☢️ 🕒 ﻿CおよびC ++に最適なコピーアンドペーストアルゴリズム。Haiku OSレシピコレクション 👌🏼 👩🏽‍🏭 👧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PVS-StudioアナライザーによるHaikuコード検証に関する追加記事のトピックとして、多数のタイプミスとコピーアンドペーストコードが取り上げられました。ただし、タイプミスではなく、不注意やリファクタリングの失敗に関連するエラーが発生します。見つかったエラーの例は、ソフトウェア開発におけるヒュー...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>﻿CおよびC ++に最適なコピーアンドペーストアルゴリズム。Haiku OSレシピコレクション</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/461519/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-StudioアナライザーによるHaikuコード検証に関する追加記事のトピックとして、多数のタイプミスとコピーアンドペーストコードが取り上げられました。</font><font style="vertical-align: inherit;">ただし、タイプミスではなく、不注意やリファクタリングの失敗に関連するエラーが発生します。</font><font style="vertical-align: inherit;">見つかったエラーの例は、ソフトウェア開発におけるヒューマンファクターの強さを示しています。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/628/e3b/d89/628e3bd8949d3e3155f16a836fc0595c.png" alt="写真1"></div><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haiku</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、パーソナルコンピュータ用の無料のオープンソースオペレーティングシステムです。</font><font style="vertical-align: inherit;">現在、国際的な開発者グループがシステムのコンポーネントに積極的に取り組んでいます。</font><font style="vertical-align: inherit;">最後の重要な開発イベントの1つは、LibreOfficeをオペレーティングシステムに移植し、R1ベータ1 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
の</font><font style="vertical-align: inherit;">最初のベータバージョンをリリースしたことです</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。PVS-Studio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">静的コードアナライザーの開発者チームは</font><font style="vertical-align: inherit;">、2015年からプロジェクトの開発を監視し、コードの欠陥のレビューをリリースしています。</font><font style="vertical-align: inherit;">これは、これまでで4回目のレビューです。</font><font style="vertical-align: inherit;">これらのリンクで以前の記事を知ることができます：</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haikuオペレーティングシステム（BeOSファミリ）の確認。</font><font style="vertical-align: inherit;">パート1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haikuオペレーティングシステム（BeOSファミリ）の確認。</font><font style="vertical-align: inherit;">パート2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CとC ++で足元に自分を撃つ方法。</font><font style="vertical-align: inherit;">Haiku OSレシピコレクション</font></font></a></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最新のコード分析の特徴は、Linux用PVS-Studioの公式バージョンを使用できることです。</font><font style="vertical-align: inherit;">2015年には表示されず、エラーを表示するための便利なレポートもありませんでした。</font><font style="vertical-align: inherit;">次に、開発者に完全なレポートを便利な形式で送信します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジャンルのクラシック</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V501</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「-」演算子の左側と右側に同じサブ式があります：（addr_t）b-（addr_t）b BitmapManager.cpp 51</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span>
<span class="hljs-title">compare_app_pointer</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ServerApp* a, <span class="hljs-keyword">const</span> ServerApp* b)</span>
</span>{
  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">addr_t</span>)b - (<span class="hljs-keyword">addr_t</span>)b;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼の人生のすべてのプログラマーは、変数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ...などを</font><font style="vertical-align: inherit;">混在させる必要があり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V501</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> '||'の左側と右側に同じサブ式があります </font><font style="vertical-align: inherit;">演算子：入力== __null || </font><font style="vertical-align: inherit;">入力== __null MediaClient.cpp 182</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">status_t</span>
<span class="hljs-title">BMediaClient::Unbind</span><span class="hljs-params">(BMediaInput* input, BMediaOutput* output)</span>
</span>{<font></font>
  CALLED();<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (input == <span class="hljs-literal">NULL</span>
    || input == <span class="hljs-literal">NULL</span>)
    <span class="hljs-keyword">return</span> B_ERROR;<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (input-&gt;fOwner != <span class="hljs-keyword">this</span> || output-&gt;fOwner != <span class="hljs-keyword">this</span>)
    <span class="hljs-keyword">return</span> B_ERROR;<font></font>
<font></font>
  input-&gt;fBind = <span class="hljs-literal">NULL</span>;<font></font>
  output-&gt;fBind = <span class="hljs-literal">NULL</span>;
  <span class="hljs-keyword">return</span> B_OK;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この状態では、同じ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入力</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポインターが2回チェックされ</font><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出力</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポインター</font><font style="vertical-align: inherit;">はチェックされないままになるため、nullポインターの逆参照が発生する可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
修正されたコード：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span> (input == <span class="hljs-literal">NULL</span>
    || output == <span class="hljs-literal">NULL</span>)
    <span class="hljs-keyword">return</span> B_ERROR;</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V583</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「？：」演算子は、その条件式に関係なく、常に1つの同じ値500000を返します。usb_modeswitch.cpp 361</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">status_t</span>
<span class="hljs-title">my_transfer_data</span><span class="hljs-params">(....)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">do</span> {
    <span class="hljs-keyword">bigtime_t</span> timeout = directionIn ? <span class="hljs-number">500000</span> : <span class="hljs-number">500000</span>;<font></font>
    result = acquire_sem_etc(device-&gt;notify, <span class="hljs-number">1</span>, B_RELATIVE_TIMEOUT, timeout);<font></font>
    ....<font></font>
  } <span class="hljs-keyword">while</span> (result == B_INTERRUPTED);<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プログラマーがミスをして2つの同一の戻り値</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-50000</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を書き込んだ場合、3項演算子は意味を失いました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V519</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'm_kindex1'変数には、2回続けて値が割り当てられます。</font><font style="vertical-align: inherit;">おそらくこれは間違いです。</font><font style="vertical-align: inherit;">チェック行：40、41。agg_trans_double_path.cpp 41</font></font><br>
<br>
<pre><code class="cpp hljs">trans_double_path::trans_double_path() :<font></font>
    m_kindex1(<span class="hljs-number">0.0</span>),<font></font>
    m_kindex2(<span class="hljs-number">0.0</span>),<font></font>
    m_base_length(<span class="hljs-number">0.0</span>),<font></font>
    m_base_height(<span class="hljs-number">1.0</span>),<font></font>
    m_status1(initial),<font></font>
    m_status2(initial),<font></font>
    m_preserve_x_scale(<span class="hljs-literal">true</span>)<font></font>
{<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">trans_double_path::reset</span><span class="hljs-params">()</span>
</span>{<font></font>
    m_src_vertices1.remove_all();<font></font>
    m_src_vertices2.remove_all();<font></font>
    m_kindex1 = <span class="hljs-number">0.0</span>;<font></font>
    m_kindex1 = <span class="hljs-number">0.0</span>;<font></font>
    m_status1 = initial;<font></font>
    m_status2 = initial;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リセット</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
関数</font><font style="vertical-align: inherit;">でエラーが発生しました：</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m_kindex2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数のインデックスのタイプミス</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この変数の値はリセットされません。これは、他のコードフラグメントの実行に影響を与える可能性があります。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V501</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> '&gt;'演算子の左側と右側に同じサブ式があります：fg [order_type :: R]&gt; fg [order_type :: R] agg_span_image_filter_rgba.h 898</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">typedef</span> Source source_type;
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">typename</span> source_type::color_type color_type;
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">typename</span> source_type::order_type order_type;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">generate</span><span class="hljs-params">(color_type* span, <span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y, <span class="hljs-keyword">unsigned</span> len)</span>
</span>{<font></font>
 ....<font></font>
 <span class="hljs-keyword">if</span>(fg[<span class="hljs-number">0</span>] &lt; <span class="hljs-number">0</span>) fg[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;
 <span class="hljs-keyword">if</span>(fg[<span class="hljs-number">1</span>] &lt; <span class="hljs-number">0</span>) fg[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;
 <span class="hljs-keyword">if</span>(fg[<span class="hljs-number">2</span>] &lt; <span class="hljs-number">0</span>) fg[<span class="hljs-number">2</span>] = <span class="hljs-number">0</span>;
 <span class="hljs-keyword">if</span>(fg[<span class="hljs-number">3</span>] &lt; <span class="hljs-number">0</span>) fg[<span class="hljs-number">3</span>] = <span class="hljs-number">0</span>;<font></font>
<font></font>
 <span class="hljs-keyword">if</span>(fg[order_type::A] &gt; base_mask)        fg[order_type::A] = base_mask;
 <span class="hljs-keyword">if</span>(fg[order_type::R] &gt; fg[order_type::R])fg[order_type::R] = fg[order_type::R];
 <span class="hljs-keyword">if</span>(fg[order_type::G] &gt; fg[order_type::G])fg[order_type::G] = fg[order_type::G];
 <span class="hljs-keyword">if</span>(fg[order_type::B] &gt; fg[order_type::B])fg[order_type::B] = fg[order_type::B];<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後の行には、同じ変数の比較と同じ変数の割り当てがすぐにあります。</font><font style="vertical-align: inherit;">ここで何が考えられていたのかはわかりません。</font><font style="vertical-align: inherit;">フラグメントに不審なマークを付けるだけです。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V570</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「wPipeIndex」変数はそれ自体に割り当てられます。</font><font style="vertical-align: inherit;">CEchoGals_transport.cpp 244</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">ECHOSTATUS <span class="hljs-title">CEchoGals::CloseAudio</span> <span class="hljs-params">(....)</span>
</span>{<font></font>
  ....<font></font>
  wPipeIndex = wPipeIndex;<font></font>
  m_ProcessId[ wPipeIndex ] = <span class="hljs-literal">NULL</span>;<font></font>
  m_Pipes[ wPipeIndex ].wInterleave = <span class="hljs-number">0</span>;<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wPipeIndex</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
変数</font><i><font style="vertical-align: inherit;">は</font></i><font style="vertical-align: inherit;">独自の値に初期化されます。</font><font style="vertical-align: inherit;">おそらく、タイプミスが行われました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポインタのエラー</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V522</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nullポインター 'currentInterface'の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">逆</font></a><font style="vertical-align: inherit;">参照が行われる場合があります。</font><font style="vertical-align: inherit;">Device.cpp 258</font></font><br>
<br>
<pre><code class="cpp hljs">Device::Device(....) : ....<font></font>
{<font></font>
  ....<font></font>
  usb_interface_info* currentInterface = <span class="hljs-literal">NULL</span>;                     <span class="hljs-comment">// &lt;=</span>
  uint32 descriptorStart = <span class="hljs-keyword">sizeof</span>(usb_configuration_descriptor);
  <span class="hljs-keyword">while</span> (descriptorStart &lt; actualLength) {
    <span class="hljs-keyword">switch</span> (configData[descriptorStart + <span class="hljs-number">1</span>]) {<font></font>
    ....<font></font>
    <span class="hljs-keyword">case</span> USB_DESCRIPTOR_ENDPOINT:<font></font>
    {<font></font>
      ....<font></font>
      <span class="hljs-keyword">if</span> (currentInterface == <span class="hljs-literal">NULL</span>)                                <span class="hljs-comment">// &lt;=</span>
        <span class="hljs-keyword">break</span>;<font></font>
      currentInterface-&gt;endpoint_count++;<font></font>
      ....<font></font>
    }<font></font>
    ....<font></font>
    <span class="hljs-keyword">case</span> USB_DESCRIPTOR_ENDPOINT_COMPANION: {<font></font>
      usb_endpoint_descriptor* desc = currentInterface             <span class="hljs-comment">// &lt;=</span>
        -&gt;endpoint[currentInterface-&gt;endpoint_count - <span class="hljs-number">1</span>].descr;<font></font>
      ....<font></font>
    }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">currentInterface</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ポインター</font><i><font style="vertical-align: inherit;">は、</font></i><font style="vertical-align: inherit;">最初はゼロに初期化され、次に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">switchステートメントの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブランチに入るときにチェックされます</font><font style="vertical-align: inherit;">が、すべてのケースで</font><font style="vertical-align: inherit;">はチェックさ</font><font style="vertical-align: inherit;">れません。</font><font style="vertical-align: inherit;">アナライザーは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USB_DESCRIPTOR_ENDPOINT_COMPANION</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ラベルに移動すると、</font><font style="vertical-align: inherit;">NULLポインターを逆参照する可能性</font><i><font style="vertical-align: inherit;">が</font></i><font style="vertical-align: inherit;">あることを</font><font style="vertical-align: inherit;">警告し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V522</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヌルポインター「ディレクトリ」の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">逆</font></a><font style="vertical-align: inherit;">参照が行われる場合があります。</font><font style="vertical-align: inherit;">PathMonitor.cpp 1465</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">bool</span><font></font>
PathHandler::_EntryCreated(....)<font></font>
{<font></font>
  ....<font></font>
  Directory* directory = directoryNode-&gt;ToDirectory();<font></font>
  <span class="hljs-keyword">if</span> (directory == <span class="hljs-literal">NULL</span>) {
    <span class="hljs-comment">// We're out of sync with reality.</span>
    <span class="hljs-keyword">if</span> (!dryRun) {
      <span class="hljs-keyword">if</span> (Entry* nodeEntry = directory-&gt;FirstNodeEntry()) {<font></font>
        ....<font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクトリ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ポインター</font><font style="vertical-align: inherit;">をnull値と</font><font style="vertical-align: inherit;">比較する際に</font><font style="vertical-align: inherit;">誤り</font><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">あり、条件は反対</font><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">ある</font><font style="vertical-align: inherit;">と思います</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">現在の実装では、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dryRun</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数</font><font style="vertical-align: inherit;">が</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falseの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクトリの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nullポインターが逆参照され</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V522</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヌルポインター「入力」の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">逆</font></a><font style="vertical-align: inherit;">参照が行われる可能性があります。</font><font style="vertical-align: inherit;">MediaRecorder.cpp 343</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GetInput</span><span class="hljs-params">(media_input* input)</span></span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">const</span> media_input&amp;
<span class="hljs-title">BMediaRecorder::MediaInput</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span>
</span>{<font></font>
  CALLED();<font></font>
<font></font>
  media_input* input = <span class="hljs-literal">NULL</span>;<font></font>
  fNode-&gt;GetInput(input);<font></font>
  <span class="hljs-keyword">return</span> *input;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入力</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ポインタは</font><font style="vertical-align: inherit;">ゼロに初期化され、その値のままです。</font><font style="vertical-align: inherit;">GetInput関数では、ポインターは変更されません。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BMediaRecorder</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスの他のメソッドは、</font><font style="vertical-align: inherit;">異なる</font><font style="vertical-align: inherit;">方法で</font><font style="vertical-align: inherit;">書き込みます。次に例を示します。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">status_t</span><font></font>
BMediaRecorder::_Connect(....)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-comment">// Find our Node's free input</span><font></font>
  media_input ourInput;<font></font>
  fNode-&gt;GetInput(&amp;ourInput);     <span class="hljs-comment">// &lt;=</span><font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここではすべてが正しいですが、最初のコードフラグメントでこのように記述することはできません。そうでない場合、関数はローカルオブジェクトへのリンクを返しますが、どういうわけかコードを修正する必要があります。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V522</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nullポインタ 'mustFree'の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">逆</font></a><font style="vertical-align: inherit;">参照が行われる可能性があります。</font><font style="vertical-align: inherit;">RequestUnflattener.cpp 35</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">status_t</span>
<span class="hljs-title">Reader::Read</span><span class="hljs-params">(int32 size, <span class="hljs-keyword">void</span>** buffer, <span class="hljs-keyword">bool</span>* mustFree)</span>
</span>{
  <span class="hljs-keyword">if</span> (size &lt; <span class="hljs-number">0</span> || !buffer || mustFree)  <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">return</span> B_BAD_VALUE;<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (size == <span class="hljs-number">0</span>) {<font></font>
    *buffer = <span class="hljs-literal">NULL</span>;<font></font>
    *mustFree = <span class="hljs-literal">false</span>;                  <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">return</span> B_OK;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての無効な入力データがチェックされる条件式で、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mustFree</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポインターをチェックするときにタイプミスが行われました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ほとんどの場合、関数からの出口はこのポインターのゼロ値でなければなりません。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span> (size &lt; <span class="hljs-number">0</span> || !buffer || !mustFree)  <span class="hljs-comment">// &lt;=</span>
  <span class="hljs-keyword">return</span> B_BAD_VALUE;</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V757</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「dynamic_cast」を使用して型変換した後、不正な変数がnullptrと比較される可能性があります。</font><font style="vertical-align: inherit;">チェック行：474、476。recover.cpp 474</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span>
<span class="hljs-title">checkStructure</span><span class="hljs-params">(Disk &amp;disk)</span>
</span>{<font></font>
  ....<font></font>
  Inode* missing = gMissing.Get(run);<font></font>
  dir = <span class="hljs-keyword">dynamic_cast</span>&lt;Directory *&gt;(missing);<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (missing == <span class="hljs-literal">NULL</span>) {<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不足している</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ポインターの代わりに、</font><font style="vertical-align: inherit;">型変換後に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポインターを確認</font><font style="vertical-align: inherit;">する</font><font style="vertical-align: inherit;">必要が</font><font style="vertical-align: inherit;">あります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ちなみに、</font><font style="vertical-align: inherit;">C＃プログラマーは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">よく</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">似た間違いをし</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これは、いくつかのエラーが使用されている言語に依存しないことをもう一度証明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コード内のさらに似た場所を2つ：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V757「dynamic_cast」を使用して型変換した後、不正な変数がnullptrと比較される可能性があります。</font><font style="vertical-align: inherit;">チェック行：355、357。ExpandoMenuBar.cpp 355</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V757「dynamic_cast」を使用して型変換した後、不正な変数がnullptrと比較される可能性があります。</font><font style="vertical-align: inherit;">チェック行：600、601。ValControl.cpp 600</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インデックスエラー</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V557</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アレイのオーバーランが発生する可能性があります。</font><font style="vertical-align: inherit;">'BT_SCO'インデックスは配列の境界を超えています。</font><font style="vertical-align: inherit;">h2upper.cpp 75</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">bt_usb_dev</span> {</span><font></font>
  ....<font></font>
  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">list</span> <span class="hljs-title">nbuffersTx</span>[(1 + 1 + 0 + 0)];</span>         <span class="hljs-comment">// &lt;= [0..1]</span><font></font>
  ....<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> {<font></font>
    BT_COMMAND = <span class="hljs-number">0</span>,<font></font>
    BT_EVENT,<font></font>
    BT_ACL,<font></font>
    BT_SCO,                                        <span class="hljs-comment">// &lt;= 3</span><font></font>
    BT_ESCO,<font></font>
<font></font>
    HCI_NUM_PACKET_TYPES<font></font>
} <span class="hljs-keyword">bt_packet_t</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span>
<span class="hljs-title">sched_tx_processing</span><span class="hljs-params">(bt_usb_dev* bdev)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (!list_is_empty(&amp;bdev-&gt;nbuffersTx[BT_SCO])) { <span class="hljs-comment">// &lt;= fail</span>
    <span class="hljs-comment">// TODO to be implemented</span><font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bdev-は&gt; nbuffersTxアレイは、</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2つだけの要素で構成され、そしてコードでは、アレイが発生するの境界を越えて3 A保証出口の値を有する定数BT_SCO、によってアクセスされます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V557</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アレイのオーバーランが発生する可能性があります。 「ieee80211_send_setup」関数は値「16」を処理します。 4番目の引数を調べます。チェック行：842、911。ieee80211_output.c 842</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ieee80211_node</span> {</span><font></font>
  ....<font></font>
  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ieee80211_tx_ampdu</span> <span class="hljs-title">ni_tx_ampdu</span>[16];</span>              <span class="hljs-comment">// &lt;= [0..15]</span><font></font>
  ....<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IEEE80211_NONQOS_TID 16</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span>
<span class="hljs-title">ieee80211_mgmt_output</span><span class="hljs-params">(....)</span>
</span>{<font></font>
  ....<font></font>
  ieee80211_send_setup(ni, m,<font></font>
     IEEE80211_FC0_TYPE_MGT | type, IEEE80211_NONQOS_TID, <span class="hljs-comment">// &lt;= 16</span><font></font>
     vap-&gt;iv_myaddr, ni-&gt;ni_macaddr, ni-&gt;ni_bssid);<font></font>
  ....<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span>
<span class="hljs-title">ieee80211_send_setup</span><span class="hljs-params">(
  struct ieee80211_node *ni,
  struct mbuf *m,
  <span class="hljs-keyword">int</span> type,
  <span class="hljs-keyword">int</span> tid,                                                <span class="hljs-comment">// &lt;= 16</span>
  ....)</span>
</span>{<font></font>
  ....<font></font>
  tap = &amp;ni-&gt;ni_tx_ampdu[tid];                            <span class="hljs-comment">// &lt;= 16</span><font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列からの別の方法。この場合、1つのアイテムのみです。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手続き</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">間の分析は</font><font style="vertical-align: inherit;">、16個の要素で構成される</font><font style="vertical-align: inherit;">配列</font><i><font style="vertical-align: inherit;">ni-&gt; ni_tx_ampdu</font></i><font style="vertical-align: inherit;">がインデックス</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16で</font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">アクセスさ</font></i><font style="vertical-align: inherit;">れ</font><font style="vertical-align: inherit;">た状況を特定するのに役立ちました</font><font style="vertical-align: inherit;">。 CおよびC ++では、配列のインデックス付けは最初から行われます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V781</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'vector'変数の値は、使用後にチェックされます。プログラムのロジックに誤りがある可能性があります。チェック行：802、805。oce_if.c 802</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> OCE_MAX_EQ 32</span><font></font>
<font></font>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">oce_softc</span> {</span><font></font>
  ....<font></font>
  OCE_INTR_INFO intrs[OCE_MAX_EQ];<font></font>
  ....<font></font>
} OCE_SOFTC, *POCE_SOFTC;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span>
<span class="hljs-title">oce_alloc_intr</span><span class="hljs-params">(POCE_SOFTC sc, <span class="hljs-keyword">int</span> <span class="hljs-built_in">vector</span>, <span class="hljs-keyword">void</span> (*isr) (<span class="hljs-keyword">void</span> *arg, <span class="hljs-keyword">int</span> pending))</span>
</span>{<font></font>
  POCE_INTR_INFO ii = &amp;sc-&gt;intrs[<span class="hljs-built_in">vector</span>];
  <span class="hljs-keyword">int</span> rc = <span class="hljs-number">0</span>, rr;<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">vector</span> &gt;= OCE_MAX_EQ)
    <span class="hljs-keyword">return</span> (EINVAL);<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーは</font><font style="vertical-align: inherit;">、無効なインデックス（配列の境界を超える）による</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sc-&gt; intrs配列</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">へのアクセスを検出しました</font><font style="vertical-align: inherit;">。この理由は、コードの順序が間違っているためです。ここでは、最初に配列にアクセスし、次にインデックス値が有効かどうかを確認します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
誰かが問題はないと言うかもしれません。ここでは、結局のところ、配列要素の値は取得されませんが、セルアドレスが取得されます。いいえ、とにかくそれを行うことはできません。続きを読む：「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nullポインターを逆参照すると、未定義の動作が発生し</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。」</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V519</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数には、2回続けて値が割り当てられます。おそらくこれは間違いです。チェック行：199、200。nvme_ctrlr.c 200</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">nvme_ctrlr_set_intel_supported_features</span><span class="hljs-params">(struct nvme_ctrlr *ctrlr)</span>
</span>{
  <span class="hljs-keyword">bool</span> *supported_feature = ctrlr-&gt;feature_supported;<font></font>
<font></font>
  supported_feature[NVME_INTEL_FEAT_MAX_LBA] = <span class="hljs-literal">true</span>;<font></font>
  supported_feature[NVME_INTEL_FEAT_MAX_LBA] = <span class="hljs-literal">true</span>;<font></font>
  supported_feature[NVME_INTEL_FEAT_NATIVE_MAX_LBA] = <span class="hljs-literal">true</span>;<font></font>
  supported_feature[NVME_INTEL_FEAT_POWER_GOVERNOR_SETTING] = <span class="hljs-literal">true</span>;<font></font>
  supported_feature[NVME_INTEL_FEAT_SMBUS_ADDRESS] = <span class="hljs-literal">true</span>;<font></font>
  supported_feature[NVME_INTEL_FEAT_LED_PATTERN] = <span class="hljs-literal">true</span>;<font></font>
  supported_feature[NVME_INTEL_FEAT_RESET_TIMED_WORKLOAD_COUNTERS] = <span class="hljs-literal">true</span>;<font></font>
  supported_feature[NVME_INTEL_FEAT_LATENCY_TRACKING] = <span class="hljs-literal">true</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インデックス</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NVME_INTEL_FEAT_MAX_LBA</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の配列</font><i><font style="vertical-align: inherit;">要素に</font></i><font style="vertical-align: inherit;">は同じ値</font><i><font style="vertical-align: inherit;">が</font></i><font style="vertical-align: inherit;">割り当てられます。</font><font style="vertical-align: inherit;">幸い、この関数ではすべての可能な定数が表現されており、コードは単にコピーアンドペーストプログラミングの結果です。</font><font style="vertical-align: inherit;">しかし、この方法でミスをする可能性は非常に高いです。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V519</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'copiedPath [len]'変数には、2回続けて値が割り当てられます。</font><font style="vertical-align: inherit;">おそらくこれは間違いです。</font><font style="vertical-align: inherit;">チェック行：92、93。kernel_emu.cpp 93</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">int</span>
UserlandFS::KernelEmu::new_path(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *path, <span class="hljs-keyword">char</span> **copy)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-comment">// append a dot, if desired</span>
  <span class="hljs-keyword">if</span> (appendDot) {<font></font>
    copiedPath[len] = <span class="hljs-string">'.'</span>;<font></font>
    copiedPath[len] = <span class="hljs-string">'\0'</span>;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、ここで開発者はコピーに不運でした。</font><font style="vertical-align: inherit;">記号「ドット」が特定の行に追加され、すぐにターミナルゼロで上書きされます。</font><font style="vertical-align: inherit;">ほとんどの場合、コードの作成者は文字列をコピーし、インデックスをインクリメントするのを忘れました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">奇妙な条件</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V517</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'if（A）{...} else if（A）{...}'パターンの使用が検出されました。論理エラーが存在する可能性があります。チェック行：1407、1410。FindPanel.cpp 1407</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span>
<span class="hljs-title">FindPanel::BuildAttrQuery</span><span class="hljs-params">(BQuery* query, <span class="hljs-keyword">bool</span> &amp;dynamicDate)</span> <span class="hljs-keyword">const</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">case</span> B_BOOL_TYPE:<font></font>
  {<font></font>
    uint32 value;<font></font>
    <span class="hljs-keyword">if</span> (strcasecmp(textControl-&gt;Text(),
        <span class="hljs-string">"true"</span>) == <span class="hljs-number">0</span>) {<font></font>
      value = <span class="hljs-number">1</span>;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (strcasecmp(textControl-&gt;Text(),
        <span class="hljs-string">"true"</span>) == <span class="hljs-number">0</span>) {<font></font>
      value = <span class="hljs-number">1</span>;<font></font>
    } <span class="hljs-keyword">else</span><font></font>
      value = (uint32)atoi(textControl-&gt;Text());<font></font>
<font></font>
    value %= <span class="hljs-number">2</span>;<font></font>
    query-&gt;PushUInt32(value);<font></font>
    <span class="hljs-keyword">break</span>;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードをコピーするとすぐに2つのエラーが発生しました。条件式は同じです。最も可能性が高いのは、そのうちの1つに「true」ではなく「false」という文字列との比較があるはずです。次に、値falseを処理するブランチで、値の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変更する必要があります</font><font style="vertical-align: inherit;">。アルゴリズムは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">false</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以外の他の値</font><font style="vertical-align: inherit;">は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atoi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数を使用して数値に変換されることを</font><font style="vertical-align: inherit;">前提として</font><font style="vertical-align: inherit;">いますが、エラーのため、テキストには「false」というテキストが表示されます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V547</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">式 'error ==（（int）0）'は常にtrueです。 Directory.cpp 688</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">int32
<span class="hljs-title">BDirectory::CountEntries</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-keyword">status_t</span> error = Rewind();
  <span class="hljs-keyword">if</span> (error != B_OK)
    <span class="hljs-keyword">return</span> error;<font></font>
  int32 count = <span class="hljs-number">0</span>;<font></font>
  BPrivate::Storage::LongDirEntry entry;<font></font>
  <span class="hljs-keyword">while</span> (error == B_OK) {
    <span class="hljs-keyword">if</span> (GetNextDirents(&amp;entry, <span class="hljs-keyword">sizeof</span>(entry), <span class="hljs-number">1</span>) != <span class="hljs-number">1</span>)
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(entry.d_name, <span class="hljs-string">"."</span>) != <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">strcmp</span>(entry.d_name, <span class="hljs-string">".."</span>) != <span class="hljs-number">0</span>)<font></font>
      count++;<font></font>
  }<font></font>
  Rewind();<font></font>
  <span class="hljs-keyword">return</span> (error == B_OK ? count : error);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラー</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数の値</font><font style="vertical-align: inherit;">が常に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B_OKである</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こと</font><font style="vertical-align: inherit;">を検出しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ほとんどの場合、</font><font style="vertical-align: inherit;">この変数の変更は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whileループで</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">見落とさ</font><font style="vertical-align: inherit;">れて</font><i><font style="vertical-align: inherit;">いました</font></i><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V564</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> '＆'演算子はブール型の値に適用されます。</font><font style="vertical-align: inherit;">かっこを含めるのを忘れたか、 '&amp;&amp;'演算子を使用するつもりでした。</font><font style="vertical-align: inherit;">strtod.c 545</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span>
<span class="hljs-title">lo0bits</span><span class="hljs-params">(ULong *y)</span>
</span>{
  <span class="hljs-keyword">int</span> k;<font></font>
  ULong x = *y;<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (!(x &amp; <span class="hljs-number">1</span>)) {<font></font>
    k++;<font></font>
    x &gt;&gt;= <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (!x &amp; <span class="hljs-number">1</span>)   <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-keyword">return</span> <span class="hljs-number">32</span>;<font></font>
  }<font></font>
  *y = x;<font></font>
  <span class="hljs-keyword">return</span> k;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おそらく、最後の条件式では、上記の条件のように、括弧を配置するのを忘れていました。</font><font style="vertical-align: inherit;">おそらく、そこにも否定演算子は括弧の外にあるべきです：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span> (!(x &amp; <span class="hljs-number">1</span>))   <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-keyword">return</span> <span class="hljs-number">32</span>;</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V590</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この式を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">調べることを</font></a><font style="vertical-align: inherit;">検討してください。</font><font style="vertical-align: inherit;">表現が過剰であるか、誤植が含まれています。</font><font style="vertical-align: inherit;">PoseView.cpp 5851</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span>
<span class="hljs-title">BPoseView::AttributeChanged</span><span class="hljs-params">(<span class="hljs-keyword">const</span> BMessage* message)</span>
</span>{<font></font>
  ....<font></font>
  result = poseModel-&gt;OpenNode();<font></font>
  <span class="hljs-keyword">if</span> (result == B_OK || result != B_BUSY)
    <span class="hljs-keyword">break</span>;<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは明白ではありませんが、条件の結果はB_OKの値に依存しません。</font><font style="vertical-align: inherit;">したがって、次のように簡略化できます。</font></font><br>
<br>
<pre><code class="cpp hljs">If (result != B_BUSY)
  <span class="hljs-keyword">break</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結果</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数の値の真理値表を作成することで簡単に確認できます</font><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B_OK</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B_BUSY</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以外の他の値を特に考慮する必要がある場合</font><font style="vertical-align: inherit;">は、コードを別の方法で書き直す必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに2つの同様の条件：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V590この式を調べることを検討してください。</font><font style="vertical-align: inherit;">式が過剰であるか、誤植が含まれています。</font><font style="vertical-align: inherit;">Tracker.cpp 1714</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V590この式を調べることを検討してください。</font><font style="vertical-align: inherit;">式が過剰であるか、誤植が含まれています。</font><font style="vertical-align: inherit;">if_ipw.c 1871</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V590</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'argc == 0 ||の検査を検討してください </font><font style="vertical-align: inherit;">argc！= 2 '式。</font><font style="vertical-align: inherit;">表現が過剰であるか、誤植が含まれています。</font><font style="vertical-align: inherit;">cmds.c 2667</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span>
<span class="hljs-title">unsetoption</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[])</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (argc == <span class="hljs-number">0</span> || argc != <span class="hljs-number">2</span>) {
    <span class="hljs-built_in">fprintf</span>(ttyout, <span class="hljs-string">"usage: %s option\n"</span>, argv[<span class="hljs-number">0</span>]);
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おそらくこれは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V590</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">診断の動作を示す最も簡単な例です</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">引数が渡されなかったり、引数が2つもない場合は、プログラムの説明を表示する必要があります。</font><font style="vertical-align: inherit;">明らかに、ゼロを含む2以外の値は条件を満たしません。</font><font style="vertical-align: inherit;">したがって、条件は次のように簡単に簡略化できます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span> (argc != <span class="hljs-number">2</span>) {
    <span class="hljs-built_in">fprintf</span>(ttyout, <span class="hljs-string">"usage: %s option\n"</span>, argv[<span class="hljs-number">0</span>]);
    <span class="hljs-keyword">return</span>;<font></font>
}</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V590</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> '* ptr =='; 'の検査を検討してください </font><font style="vertical-align: inherit;">&amp;&amp; * ptr！= '\ 0' '式。</font><font style="vertical-align: inherit;">表現が過剰であるか、誤植が含まれています。</font><font style="vertical-align: inherit;">pc.c 316</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">ULONG
<span class="hljs-title">parse_expression</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *str)</span>
</span>{<font></font>
  ....<font></font>
  ptr = skipwhite(ptr);<font></font>
  <span class="hljs-keyword">while</span> (*ptr == SEMI_COLON &amp;&amp; *ptr != <span class="hljs-string">'\0'</span>)<font></font>
   {<font></font>
     ptr++;<font></font>
     <span class="hljs-keyword">if</span> (*ptr == <span class="hljs-string">'\0'</span>)
       <span class="hljs-keyword">continue</span>;<font></font>
<font></font>
     val = assignment_expr(&amp;ptr);<font></font>
   }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、論理演算子が変更されていますが、論理は同じままです。</font><font style="vertical-align: inherit;">ここで、whileループの条件は、文字が</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEMI_COLON</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の値と等しいかどうかにのみ依存します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V590</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この式を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">調べることを</font></a><font style="vertical-align: inherit;">検討してください。</font><font style="vertical-align: inherit;">表現が過剰であるか、誤植が含まれています。</font><font style="vertical-align: inherit;">writembr.cpp 99</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span>
<span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>** argv)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-built_in">string</span> choice;<font></font>
  getline(<span class="hljs-built_in">cin</span>, choice, <span class="hljs-string">'\n'</span>);
  <span class="hljs-keyword">if</span> (choice == <span class="hljs-string">"no"</span> || choice == <span class="hljs-string">""</span> || choice != <span class="hljs-string">"yes"</span>) {
    <span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"MBR was NOT written"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<font></font>
    fs.close();<font></font>
    <span class="hljs-keyword">return</span> B_ERROR;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例にはすでに3つの条件があります。</font><font style="vertical-align: inherit;">また、ユーザーが「はい」を選択したかどうかを確認することもできます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span> (choice != <span class="hljs-string">"yes"</span>) {
  <span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"MBR was NOT written"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<font></font>
  fs.close();<font></font>
  <span class="hljs-keyword">return</span> B_ERROR;<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その他のエラー</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V530</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数 'begin'の戻り値を利用する必要があります。</font><font style="vertical-align: inherit;">IMAPFolder.cpp 414</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span>
<span class="hljs-title">IMAPFolder::RegisterPendingBodies</span><span class="hljs-params">(...., <span class="hljs-keyword">const</span> BMessenger* replyTo)</span>
</span>{<font></font>
  ....<font></font>
  IMAP::MessageUIDList::const_iterator iterator = uids.begin();<font></font>
  <span class="hljs-keyword">for</span> (; iterator != uids.end(); iterator++) {
    <span class="hljs-keyword">if</span> (replyTo != <span class="hljs-literal">NULL</span>)<font></font>
      fPendingBodies[*iterator].push_back(*replyTo);<font></font>
    <span class="hljs-keyword">else</span>
      fPendingBodies[*iterator].begin();   <span class="hljs-comment">// &lt;=</span><font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーが</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">begin（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イテレーターへの無意味な呼び出しを検出しました</font><i><font style="vertical-align: inherit;">。</font></i><font style="vertical-align: inherit;">コードを修正する方法がわからない。</font><font style="vertical-align: inherit;">開発者はこの場所に注意を払う必要があります。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V609</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゼロで除算します。</font><font style="vertical-align: inherit;">分母の範囲[0..64]。</font><font style="vertical-align: inherit;">UiUtils.cpp 544</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> int32 <span class="hljs-title">GetSIMDFormatByteSize</span><span class="hljs-params">(uint32 format)</span>
</span>{
  <span class="hljs-keyword">switch</span> (format) {
    <span class="hljs-keyword">case</span> SIMD_RENDER_FORMAT_INT8:
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">char</span>);
    <span class="hljs-keyword">case</span> SIMD_RENDER_FORMAT_INT16:
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">sizeof</span>(int16);
    <span class="hljs-keyword">case</span> SIMD_RENDER_FORMAT_INT32:
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">sizeof</span>(int32);
    <span class="hljs-keyword">case</span> SIMD_RENDER_FORMAT_INT64:
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">sizeof</span>(int64);
    <span class="hljs-keyword">case</span> SIMD_RENDER_FORMAT_FLOAT:
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">float</span>);
    <span class="hljs-keyword">case</span> SIMD_RENDER_FORMAT_DOUBLE:
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">double</span>);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">const</span> BString&amp;
<span class="hljs-title">UiUtils::FormatSIMDValue</span><span class="hljs-params">(<span class="hljs-keyword">const</span> BVariant&amp; value, uint32 bitSize,
  uint32 format, BString&amp; _output)</span>
</span>{<font></font>
  _output.SetTo(<span class="hljs-string">"{"</span>);
  <span class="hljs-keyword">char</span>* data = (<span class="hljs-keyword">char</span>*)value.ToPointer();<font></font>
  uint32 count = bitSize / (GetSIMDFormatByteSize(format) * <span class="hljs-number">8</span>);  <span class="hljs-comment">// &lt;=</span><font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetSIMDFormatByteSize</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
関数は、</font><font style="vertical-align: inherit;">実際には</font><font style="vertical-align: inherit;">デフォルト値として</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">返します</font><i><font style="vertical-align: inherit;">。</font></i><font style="vertical-align: inherit;">これは、ゼロによる除算につながる可能性があります。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V654</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ループの 'specificSequence！= Sequence'条件は常にfalseです。 pthread_key.cpp 55</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span>*
<span class="hljs-title">get_key_value</span><span class="hljs-params">(pthread_thread* thread, uint32 key, int32 sequence)</span>
</span>{<font></font>
  pthread_key_data&amp; keyData = thread-&gt;specific[key];<font></font>
  int32 specificSequence;<font></font>
  <span class="hljs-keyword">void</span>* value;<font></font>
<font></font>
  <span class="hljs-keyword">do</span> {<font></font>
    specificSequence = keyData.sequence;<font></font>
    <span class="hljs-keyword">if</span> (specificSequence != sequence)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<font></font>
<font></font>
    value = keyData.value;<font></font>
  } <span class="hljs-keyword">while</span> (specificSequence != sequence);<font></font>
<font></font>
  keyData.value = <span class="hljs-literal">NULL</span>;<font></font>
<font></font>
  <span class="hljs-keyword">return</span> value;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">while</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステートメントの条件が</font><font style="vertical-align: inherit;">常にfalse </font><font style="vertical-align: inherit;">であることは正しいです</font><font style="vertical-align: inherit;">。このため、ループで実行される反復は1つだけです。つまり、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">while（0）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と書いても何も変わりません</font><font style="vertical-align: inherit;">。これはすべて奇妙なことであり、このコードには作業ロジックに何らかのエラーが含まれています。開発者はこの場所に注意を払う必要があります。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V672</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここで新しい「パス」変数を​​作成する必要はおそらくありません。関数の引数の1つに同じ名前があり、この引数は参照です。チェック行：348、429。translate.cpp 429</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">status_t</span>
<span class="hljs-title">Translator::FindPath</span><span class="hljs-params">(...., TypeList &amp;path, <span class="hljs-keyword">double</span> &amp;pathQuality)</span>
</span>{<font></font>
  ....<font></font>
  TypeList path;<font></font>
  <span class="hljs-keyword">double</span> quality;
  <span class="hljs-keyword">if</span> (FindPath(&amp;formats[j], stream, typesSeen, path, quality) == B_OK) {
    <span class="hljs-keyword">if</span> (bestQuality &lt; quality * formatQuality) {<font></font>
      bestQuality = quality * formatQuality;<font></font>
      bestPath.SetTo(path);<font></font>
      bestPath.Add(formats[j].type);<font></font>
      status = B_OK;<font></font>
    }<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パス</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
変数は</font><font style="vertical-align: inherit;">、参照によって</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FindPath</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数に渡さ</font><font style="vertical-align: inherit;">れます。これは、関数の本体でこの変数を変更できることを意味します。しかし、ここには変更されている同じ名前のローカル変数があります。この場合、すべての変更はローカル変数にのみ残ります。おそらく、ローカル変数の名前を変更するか削除する必要があります。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V705</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'else'ブロックが忘れられたかコメントアウトされた可能性があり、プログラムの操作ロジックが変更されました。 HostnameView.cpp 109</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">status_t</span><font></font>
HostnameView::_LoadHostname()<font></font>
{<font></font>
  BString fHostnameString;<font></font>
  <span class="hljs-keyword">char</span> hostname[MAXHOSTNAMELEN];<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (gethostname(hostname, MAXHOSTNAMELEN) == <span class="hljs-number">0</span>) {<font></font>
<font></font>
    fHostnameString.SetTo(hostname, MAXHOSTNAMELEN);<font></font>
    fHostname-&gt;SetText(fHostnameString);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> B_OK;<font></font>
  } <span class="hljs-keyword">else</span><font></font>
<font></font>
  <span class="hljs-keyword">return</span> B_ERROR;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
貧弱なコード設計の例。</font><font style="vertical-align: inherit;">「凍結された」</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">else</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キーワード</font><font style="vertical-align: inherit;">はまだロジックを変更しませんが、これは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">returnステートメントの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前に挿入された最初のコード部分まで</font><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V763</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータ「メニュー」は、使用前に常に関数本体で書き換えられます。</font><font style="vertical-align: inherit;">video.cpp 648</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span>
<span class="hljs-title">video_mode_hook</span><span class="hljs-params">(Menu *menu, MenuItem *item)</span>
</span>{<font></font>
  video_mode *mode = <span class="hljs-literal">NULL</span>;<font></font>
<font></font>
  menu = item-&gt;Submenu();<font></font>
  item = menu-&gt;FindMarked();<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数の入り口で関数の引数がすぐに上書きされる場合が多かった。</font><font style="vertical-align: inherit;">この動作は、これらの同じ機能を呼び出す他の開発者を誤解させます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不審な場所のリスト全体：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V763パラメータ 'force_16bit'は、使用前に関数本体で常に書き換えられます。</font><font style="vertical-align: inherit;">ata_adapter.cpp 151</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V763パラメータ 'force_16bit'は、使用前に関数本体で常に書き換えられます。</font><font style="vertical-align: inherit;">ata_adapter.cpp 179</font></font></li>
<li>V763 Parameter 'menu' is always rewritten in function body before being used. video.cpp 264</li>
<li>V763 Parameter 'length' is always rewritten in function body before being used. MailMessage.cpp 677</li>
<li>V763 Parameter 'entry' is always rewritten in function body before being used. IconCache.cpp 773</li>
<li>V763 Parameter 'entry' is always rewritten in function body before being used. IconCache.cpp 832</li>
<li>V763 Parameter 'entry' is always rewritten in function body before being used. IconCache.cpp 864</li>
<li>V763 Parameter 'rect' is always rewritten in function body before being used. ErrorLogWindow.cpp 56</li>
<li>V763 Parameter 'updateRect' is always rewritten in function body before being used. CalendarMenuWindow.cpp 49</li>
<li>V763 Parameter 'rect' is always rewritten in function body before being used. MemoryView.cpp 165</li>
<li>V763 Parameter 'rect' is always rewritten in function body before being used. TypeEditors.cpp 1124</li>
<li>V763 Parameter 'height' is always rewritten in function body before being used. Workspaces.cpp 857</li>
<li>V763 Parameter 'width' is always rewritten in function body before being used. Workspaces.cpp 856</li>
<li>V763 Parameter 'frame' is always rewritten in function body before being used. SwatchGroup.cpp 48</li>
<li>V763 Parameter 'frame' is always rewritten in function body before being used. PlaylistWindow.cpp 89</li>
<li>V763 Parameter 'rect' is always rewritten in function body before being used. ConfigView.cpp 78</li>
<li>V763 Parameter 'm' is always rewritten in function body before being used. mkntfs.c 3917</li>
<li>V763 Parameter 'rxchainmask' is always rewritten in function body before being used. ar5416_cal.c 463</li>
<li>V763 Parameter 'c' is always rewritten in function body before being used. if_iwn.c 6854</li>
</ul><br>
<h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Haikuプロジェクトは、興味深いまれなバグのソースです。</font><font style="vertical-align: inherit;">エラー例のデータベースを補充し、コード分析中に特定されたアナライザーのいくつかの問題を修正しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コード分​​析ツールを使用してコードを長期間チェックしていない場合、説明されている内容がおそらくコードに含まれています。</font><font style="vertical-align: inherit;">プロジェクトでPVS-Studioを使用して、コードがC、C ++、C＃、またはJavaで記述されている場合は、コードの品質を制御します。</font><font style="vertical-align: inherit;">アナライザーは登録せずにSMS </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダウンロードできます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
俳句を試してみて、質問がありますか？</font><font style="vertical-align: inherit;">Haiku開発者が</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">電報チャンネルに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">招待します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
この記事を英語を話す視聴者と共有したい場合は、翻訳へのリンクを使用してください：Svyatoslav Razmyslov。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CおよびC ++に最適なコピーアンドペーストアルゴリズム。</font><font style="vertical-align: inherit;">Haiku OSクックブック</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja461503/index.html">データベースをリモート接続で使用できるようにする</a></li>
<li><a href="../ja461505/index.html">あなたがプロになるのを妨げる初心者JavaScript開発者の8つのバグ</a></li>
<li><a href="../ja461507/index.html">なぜGazprom NeftコーポレートアクセラレータStartupDriveを発売することにしたのですか？</a></li>
<li><a href="../ja461509/index.html">旅行アシスタント：ガジェットとアクセサリーのセレクション</a></li>
<li><a href="../ja461511/index.html">Python依存関係管理：アプローチの比較</a></li>
<li><a href="../ja461523/index.html">PostgreSQLのWAL：4.ログのセットアップ</a></li>
<li><a href="../ja461525/index.html">本当にアダプティブなスライダー（カルーセル）をどのように実行したか</a></li>
<li><a href="../ja461527/index.html">DIY音響浮上</a></li>
<li><a href="../ja461531/index.html">Tic Tac Toeパート6：フラスコとセロリ/ RabbitMQ</a></li>
<li><a href="../ja461533/index.html">毛布のパターンでの子供の最初の年の睡眠の視覚化</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>