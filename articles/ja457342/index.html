<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏼‍🤝‍🧑🏻 🙏🏽 ⭕️ 上からの兆候：不要な作業や赤目から地図製作者を救った方法 👉 🧙🏿 🤜🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="2GISはデータの正確性を誇っています。各都市の毎日の作業で、専門家がエリア全体を回り、地図上のすべての変更を修正します-新しい家、道路、さらには小道まで。また、道路標識を収集して貼付することで、道路や徒歩のルートを適切に構築するのに役立ちます。この記事では、地図製作者を支援し、道路標識の自動収集を...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>上からの兆候：不要な作業や赤目から地図製作者を救った方法</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/2gis/blog/457342/"><img src="https://habrastorage.org/webt/qh/ar/dd/qharddtefsq8_kvfphp1wpxe9y8.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2GISはデータの正確性を誇っています。</font><font style="vertical-align: inherit;">各都市の毎日の作業で、専門家がエリア全体を回り、地図上のすべての変更を修正します-新しい家、道路、さらには小道まで。</font><font style="vertical-align: inherit;">また、道路標識を収集して貼付することで、道路や徒歩のルートを適切に構築するのに役立ちます。</font><font style="vertical-align: inherit;">この記事では、地図製作者を支援し、道路標識の自動収集を開始する方法について説明します。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィジーとは何ですか？なぜ標識があるのですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フィジーは、GISスペシャリストのために開発したマップエディターです。</font><font style="vertical-align: inherit;">これは、古典的なクライアント/サーバーアプリケーションです。</font><font style="vertical-align: inherit;">私たちはフィジーについて話しているHabrに関する記事をすでにいくつか持っています：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エンタープライズアプリケーションのUI、または地図を作成するための便利なシステムの作成方法</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カードを作る人のためにどのようにカードを作るのですか</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無限のローカリゼーション、または地図をリアルタイムで翻訳する方法</font></font></a></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前に標識を集める方法</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フィジーには、標識を収集および更新するための特別な操作モードがあります。</font><font style="vertical-align: inherit;">このモードでは、マッパーはDVRによって記録されたビデオを開くことができます。</font><font style="vertical-align: inherit;">ビデオ自体が別のウィンドウに表示され、そのトラックがマップに表示されます。</font><font style="vertical-align: inherit;">マーカーは現在の位置を示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sn/ve/vf/snvevfj1qfrrvqtr4fzry_cb5ms.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グリッドはビデオの上に適用されます-グリッドまでの距離を決定することができます。</font><font style="vertical-align: inherit;">文字がセルのサイズになるとすぐに、地図製作者は一時停止して文字を作成します。</font><font style="vertical-align: inherit;">この時点で、現在の位置と標識までの距離がわかっているので、標識を前方に移動してリンクに描画します。</font><font style="vertical-align: inherit;">用語のリンクは、道路のセクションの略図です。</font><font style="vertical-align: inherit;">各文字には独自の数値コードがあり、地図製作者は特別なフィールドに入力します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すでに文字を入力している場合は、それを文字エディターにロードします。地図製作者はビデオをチェックし、必要に応じて、同じ数値コードを使用して変更を加えます。または、記号が正しい場合は、更新済みとしてマークします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、この方法では地図製作者が各ビデオを表示する必要があり、さらに各文字の入力にも時間を費やす必要があります。</font><font style="vertical-align: inherit;">さらに、マップ上の標識の位置は正確に決定されていません。グリッドによって決定された距離だけ現在の位置から逸脱し、その結果のポイントを最も近い道路に描画します。</font><font style="vertical-align: inherit;">その結果、必要に応じて標識がまったく作成されない場合があります（まったく作成されない場合もあります）。</font><font style="vertical-align: inherit;">これは、地図製作者も彼を適切な場所に移動する必要があることを意味し、これも彼の時間を消費します。</font><font style="vertical-align: inherit;">さらに、ビデオにはまったく兆候がない可能性がありますが、地図製作者は引き続きそれを表示する必要があります。</font><font style="vertical-align: inherit;">もちろん、プログラムではビデオの速度を上げることができますが、いずれの場合も時間コストはゼロ以上になります。</font><font style="vertical-align: inherit;">したがって、このプロセスを自動化することにしました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今集める方法</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レジストラの動画はまだ必要です。</font><font style="vertical-align: inherit;">しかし今では、地図製作者はそれぞれを見る代わりに、必要なファイルを選択して「ダウンロード」ボタンを押すだけです。</font><font style="vertical-align: inherit;">その後、彼は他のことを行うことができます-ビデオが処理され、道路標識が地図に表示されます。</font><font style="vertical-align: inherit;">さまざまな疑わしいケースが具体的に示されます。</font><font style="vertical-align: inherit;">したがって、地図製作者が残しているのは、これらのケースを調べて修正することだけです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">建築</font></font></h2><br>
<img src="https://habrastorage.org/webt/kf/b9/ln/kfb9lnyqkgw-erepgi-icq-myne.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ビデオから必要な属性を持つ必要なクラスのオブジェクトを取得するために、いくつかのサービスを作成しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つはVideoPreprocessingServiceです。これは、ビデオファイルがアップロードされる場所です。サービスはファイルをリポジトリに送信し、データベースにファイルを記録し、処理のためのタスクを作成します。特定の頻度でビデオからフレームを切り取り、トラックからGPSポイントを選択して、フレーム処理サービスに結果を送信する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の2つのタスクは、サービス自体ではなく、ワーカーによって実行されます。これは、これらのワーカーの数を簡単に変更できるようにするためです。したがって、そのようなニーズがあれば、生産性が向上します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FrameProcessingServiceは、受信したすべてのフレームとポイントを保存します。</font><font style="vertical-align: inherit;">また、フレームをキューにアップロードします。</font><font style="vertical-align: inherit;">これは、同僚の機械学習スペシャリストが作成したサービスによって読み取られます。</font><font style="vertical-align: inherit;">彼は道路標識を認識しています。</font><font style="vertical-align: inherit;">もちろん、FrameProcessingServiceはこのサービスからの応答を読み取ります。これらは、フレーム上にある場合の文字のコードと、この文字が内接している長方形です。</font><font style="vertical-align: inherit;">長方形のサイズが分かれば、標識までの距離がわかります。</font><font style="vertical-align: inherit;">そして、ビデオからのすべてのフレームが処理されると、彼はそれらを私たちのマップサーバーに送信します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マップサーバーはシステムの最も重要な部分です。</font><font style="vertical-align: inherit;">クライアントは、私たちが格納するすべてのデータ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をタイル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から受け取ります（</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">タイルを除く</font></a><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">彼はこのデータを保存し、すべてのビジネスロジックを実行します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
地図データは地理オブジェクトです。地理オブジェクトは、ジオメトリ（つまり、空間内のオブジェクトの位置）と一連の属性です。それらをデータベースに格納して操作します。ただし、FrameProcessingServiceから取得できるのは、標識コード、標識が認識されたポイントの座標、フレーム自体、およびこのフレームの標識マスクだけです。したがって、このデータセットを地理オブジェクトに変換する必要があります。各geoオブジェクトはいくつかのクラスに属しています。道路標識の各タイプは個別のクラスです。サインコードから簡単に取得できます。サインコードから、このクラスに固有の属性を取得できます。たとえば、コード3_24_60を受け取りました。 3_24-これは制限速度であることを示します（交通規則で3.24に署名）。これらの文字には制限値を指定する必要があります。彼はコードの3番目の部分を教えてくれます-ここでは60 km / hになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、geoオブジェクトクラスが定義され、その属性も特定されます。すでにgeoオブジェクトを作成できるようです。しかし、それは早すぎます。まず、各標識には「方向」という属性があります。これは、標識が作用する方向を示します。次に、このgeoオブジェクトのジオメトリはまだありません。サインを見たところがあります。したがって、標識自体は私たちから少し離れた場所にあります。さらに、そのジオメトリは方向属性の値に影響します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8f/lb/pw/8flbpwm0fabred0ai5qdhfgeqyg.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで少し余談をします。もちろん、道路網もあります。個々のリンクで構成されています。各リンクは線です。図の最初の部分では、2つのリンクを描きました。矢印はそれらが描かれた方向を示しています。左は下から上に、右は上から下に描かれました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各リンクには、リンクに沿って移動できる方向に関する情報が含まれています。移動の方向は別の属性であり、レンダリングの方向とは異なります。この属性は、描画方向を基準にして、リンクに沿って移動できる方向を示します。図の2番目の部分では、両方のリンクのこの属性の値が同じで、3番目の図では反対の値です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは標識とどのように関係していますか？</font><font style="vertical-align: inherit;">そのため、リンクに沿って下から上に移動すると、ある種の標識が表示されます。</font><font style="vertical-align: inherit;">したがって、左側のリンクでは、看板の方向は「まっすぐのみ」、右側には「後ろのみ」、つまり </font><font style="vertical-align: inherit;">3番目の図のリンクと同じです。</font><font style="vertical-align: inherit;">ここではすべてが単純であることがわかりましたが、これは、リンクが一方向であるためです。</font><font style="vertical-align: inherit;">実際には、非常に多くのリンクが双方向です。</font><font style="vertical-align: inherit;">彼らの方向は「両方向に」という意味を持っています。</font><font style="vertical-align: inherit;">そして、標識は常に一方向に向けられており、私たちはどちらの方向を理解する必要があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マップマッチング</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
地図に標識を配置する前に、ビデオを録画したときに走行した道路を理解する必要があります。</font><font style="vertical-align: inherit;">GPSデータはこれには十分ではありません：それはしばしば数十メートルと間違えられます。</font><font style="vertical-align: inherit;">さらに、マップはまだスキームであり、実際の地形と一致しない場合もあります。</font><font style="vertical-align: inherit;">たとえば、広い複数車線の道路などです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは一度に多くの問題を解決します：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標識はこれらの道路にすでに作成されている場合があるため、標識があれば変更することができます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらのキャラクターの一部はビデオに表示されない場合があり、そのようなキャラクターを見つけて、特別なラベルを付けることができます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いくつかの認識された標識を見たときに私たちがどの道を進んでいたかを理解できます。これは、この標識をマップ上の適切な場所に配置するのに役立ちます。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アルゴリズム</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用したアルゴリズムはかなり単純です。</font><font style="vertical-align: inherit;">ハブレ</font><font style="vertical-align: inherit;">に関する彼の説明を</font><font style="vertical-align: inherit;">含む</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がすでにあり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">一般的には、次のように聞こえます。選択した道路があり、その端に最も近いGPSポイントをトラックから取得します。</font><font style="vertical-align: inherit;">そして、このポイントに関して、私たちはパスに加わる道路を評価します-つまり、私たちのポイントがこの特定の道路を参照している可能性がどれだけあるかを評価します。</font><font style="vertical-align: inherit;">各道路はポイントを受け取り、ポイントが最も多い道路が選択されます。</font><font style="vertical-align: inherit;">トラックが終了するまで繰り返します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その過程で、アルゴリズムにいくつかの追加を行いました。</font><font style="vertical-align: inherit;">アルゴリズムは道路リンクの方向を考慮していなかったので、最初に行ったのはそれらを考慮に入れ始めたことです。リンクが一方向の場合、リンクに沿って移動する方向がわかります。</font><font style="vertical-align: inherit;">この方向がリンクの方向と一致しない場合、このリンクは破棄されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初はこれで十分だと私たちには思われ、最初のテストでこれが確認されました。しかし、それから私たちは住宅街で記録されたビデオをチェックし始めました、そしてすべてはそれほどバラ色ではないことがわかりました。実際、道路上を含め、データの精度は非常に高いです。したがって、四半期内のすべての私道を細部まで描きました。一方、先ほど述べたように、GPSはあまり正確ではないか、非常に不正確でさえあります。そして、高い建物のある道路を走ると、線路のポイントが非常に強く離れることがあります。以前は、ポイントが20メートルを超える方向に移動したことがありました。その結果、私たちが通らなかった道路の近くに多くのポイントがあることがわかりました。そのようなトラックの収縮の結果はこの絵でした：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/w_/ur/qe/w_urqefphdidxo2ap6w66ipauz4.jpeg" alt="画像"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
常識的に言って、そのような道路には標識がほとんどないため、それらを集める意味はほとんどありません。したがって、ほとんどの場合、車は大通りに沿って移動しました。したがって、四半期内の私道に罰金を課しました。罰金とは、道路沿いのポイント数の減少を意味します。その結果、クォーター内の私道の問題は解決されました-私たちがそれらに沿って行かなかった場合、それらは出ませんでした、そして私たちが実際に彼らに沿って移動したとき、たとえ罰金にもかかわらず、それらは最良の選択肢であることが判明し、私たちはそれらを選びました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、結果はすでに非常に良好でした。そして、マップマッチングが終わったように見えました。しかし、彼らが待たなかったところから、問題が起こりました。突然、別の道路が道路から分岐して非常にスムーズに動く場合があることがわかりました。そして、少なくともしばらくの間、分岐道路も私たちの道路と平行になる可能性があるという事実によって、すべてが悪化しました。同時に、お知らせしますが、GPSトラックは、移動したリンクの上に配置されることはほとんどなく、少しずれています。そしてもちろん、これらすべてのおかげで、アルゴリズムはこれらのブランチに固執し始めました。そのため、せいぜい、実際には通過しなかったいくつかのリンクを受け取りました。そして最悪の場合、彼らはコースをかなり間違って着席させました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2z/gs/y9/2zgsy9lrsmmots0z2wcbnnovcki.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのため、道路の追加評価を行いました。</font><font style="vertical-align: inherit;">リンクを選択したポイントを基準にして、GPSトラックの前のポイントと次のポイントを取得します。</font><font style="vertical-align: inherit;">そして、これらの点での方位角は、このリンクに沿った移動の方位角とあまり変わらないことがわかります。</font><font style="vertical-align: inherit;">それが大きく異なる場合-このリンクを罰金します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、時々小さなエラーがまだ発生しますが、私たちに合った結果が得られました（場合によっては、実行しなかった追加のリンクが選択されることがあります）。</font><font style="vertical-align: inherit;">しかし、それらは非常にまれであるため、私たちにとって重要ではありません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キャラクター配置</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、走行した一連の道路リンクと、標識付きの一連のフレームがあります。</font><font style="vertical-align: inherit;">このフレームのどの文字に関する情報と、トラック上のどのポイントからこのフレームと文字のマスクが取得されるか（このフレームの文字を表す長方形）。</font><font style="vertical-align: inherit;">したがって、これらの標識を地図上に配置できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のステップは、サインを適切な場所に配置するのに役立つ追加情報を取得することです。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方位記号。</font><font style="vertical-align: inherit;">マークが正確にフレームの中心にある場合、GPSポイントの方位角と一致します。</font><font style="vertical-align: inherit;">標識が中央に配置されていない場合、これはポイントの方位角+フレームの中心と標識の間の角度です。</font><font style="vertical-align: inherit;">GPSポイントの方位角はすでにわかっており、フレームの中心と標識の間の角度を計算できます。</font><font style="vertical-align: inherit;">サインマスクがフレームのどこに配置されているか、ビデオが記録された視野角がわかっています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPSポイントからマークまでの距離。</font><font style="vertical-align: inherit;">計算できるのは、</font><font style="vertical-align: inherit;">サインマスクのサイズ、フレームの解像度、ビデオが記録される視野角がわかっています。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、標識のインストールに直接進むことができます。</font><font style="vertical-align: inherit;">なぜなら </font><font style="vertical-align: inherit;">トラック上のポイントが常に道路リンク上にあるとは限りません（実際にはほとんどありません）。最初に、標識検出ポイントをリンク上に配置する必要があります。</font><font style="vertical-align: inherit;">次のように行います。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トラックが設置された道路のうち、GPSポイントの周囲にある種類のバッファーを横切る道路のみを残します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">選択した各道路までの距離を計算し、増加する順に並べ替えます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">道路を利用して、GPSポイントの投影を計算します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この時点で、この道路に沿って移動している方向を取得します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この道路でアイテム4からの方向が受け入れられない場合は、アイテム3に戻り、そこで次の道を進みます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方向が許容できる場合は、停止します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、GPSポイントを設定したときに取った道路と、このポイントの道路への投影ができました。</font><font style="vertical-align: inherit;">実際、この道路、つまりポイントが正しく選択されていない可能性があります。</font><font style="vertical-align: inherit;">たとえば、コーナリング時にミスを犯しやすいです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qt/2k/1b/qt2k1bdnjoo0gxkoeytgv2a-2zm.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、次に進む前に、私たちが間違っていないことを確認する必要があります。</font><font style="vertical-align: inherit;">または、間違えた場合は、道路を正しい道路に置き換えて、そこに投影します。</font><font style="vertical-align: inherit;">これを行うには、道路に接続している道路を利用して、距離と方位角で評価します。</font><font style="vertical-align: inherit;">その結果、特定のポイントに最適な道路が得られ、そこに投影が作成されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GPSポイントが道路に引き寄せられたので、それに対する標識の位置を計算できます。これを行うには、この点から、標識の方位角と一致する方向での標識までの距離に等しい長さを持つベクトルを作成します。その後、トラックが設置されている道路の1つに標識を引っ張ろうとします。この場合、道路の方向と標識の方位を考慮します。標識の方位は、標識の方位角を通る各道路について計算されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この段階では、適切な道路がなかったことが判明する場合があります。たとえば、これらの道路では標識が許容できない方向を向いている（つまり、一方通行である）ためです。この場合、この標識は、通過していない隣接道路にあります。つまり、単に作成しないだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、道路に描かれた標識の座標がわかりました。時々、間違いをする可能性があるため、標識が適切に設定されていることを確認する必要があります。</font><font style="vertical-align: inherit;">これを行うために、この距離をフレームを介して取得した標識までの距離といくつかの仮定を置いて比較することにより、標識が元のGPSポイントから遠すぎないことを確認します。</font><font style="vertical-align: inherit;">また、標識がGPSポイントの背後にないことを確認してください。</font><font style="vertical-align: inherit;">検証が成功した場合、道路上の標識の座標とその方向を取得しました。これは、ジオオブジェクトにジオメトリと必要なすべての属性があることを意味します。</font><font style="vertical-align: inherit;">保存を続行できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マージサイン</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、保護に移行するには早すぎます。実際には、いくつかの特殊な場合を除いて、標識がトラックの後ろなどの障害物に隠れているように見える場合、各標識はいくつかのフレームから見ることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの各フレームから、標識の地理オブジェクトを取得しました。これらのフレームは同じ属性を持ち、ほぼ同じポイントに配置されています。つまり、そのうちの1つだけを残す必要があります。さらに、この標識が新しいものでない場合は、すでにデータベースに登録されています。つまり、新しい標識を作成するのではなく、更新されたことを示す標識を付ける必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このために、私たちは自分たちの間で、そして既存のものと新しいジオオブジェクトのマージを実行します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず第一に、私たちが運転したリンク上に、すでに作成したすべての標識を取得します。</font><font style="vertical-align: inherit;">それらに、フレームから認識したすべての文字を追加します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それらを使用して行う必要があること：これらのクラス、属性、およびジオメトリから、これらのジオオブジェクトの特定のセットが同じ記号であることを理解する必要があります。</font><font style="vertical-align: inherit;">このセットに既存のgeoオブジェクトがある場合は、それだけを残して、更新されていることに注意してください。</font><font style="vertical-align: inherit;">セットに新しいgeoオブジェクトのみが含まれている場合は、そのうちの1つだけを残します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは4つのステップで行います。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスごとに地理オブジェクトをグループ化します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手順1の各グループで、属性によってグループを取得します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ2の各グループについて、ジオメトリ別にグループを収集します。</font></font></li>
<li>     3    —    (   —    ),        —  ,    .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、最終的に保存できる文字数が決まります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lr/hd/wi/lrhdwidcpddigmpg98qtqfwu8-y.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、ある種の兆候があるかもしれませんが、ビデオではそれを認識できませんでした。</font><font style="vertical-align: inherit;">この場合、このシンボルは更新されません。</font><font style="vertical-align: inherit;">残念ながら、私たちはこの標識がもはや地上にないことを確信できません。</font><font style="vertical-align: inherit;">それは、ビデオ録画中に何らかの障害で覆われる可能性があります。</font><font style="vertical-align: inherit;">そのため、この標識をすぐに削除するのではなく、ビデオにないものとしてマークします。</font><font style="vertical-align: inherit;">この標識が他のビデオに表示されている場合は、この標識を削除して更新します。</font><font style="vertical-align: inherit;">それでも彼が表示されない場合-地図製作者はこの標識に対処する必要があります。</font><font style="vertical-align: inherit;">本当になくなったら削除してください。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即時計画</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">側道からの標識</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ビデオは、私たちが運転する道路からの標識だけでなく、側道からの標識も示しています。</font><font style="vertical-align: inherit;">またはその逆-私たちから分岐する道路。</font><font style="vertical-align: inherit;">それは私たちと平行な道路でさえありえます。</font><font style="vertical-align: inherit;">これらの道路に立つ標識と、私たちが必要とする標識を区別することは非常に困難です。</font><font style="vertical-align: inherit;">結局のところ、彼らはしばしば私たちの道に近いです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この問題を解決するために、リンクに標識を配置するときにいくつかのセマンティックルールを使用する予定です。</font><font style="vertical-align: inherit;">たとえば、5 km / hの制限速度は高速道路ではありそうもありませんが、ガソリンスタンドの入り口にある可能性が非常に高くなります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追跡標識</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
標識を保持しない場合もあれば、その逆の場合もあります。マージする必要がない標識を保持します。</font><font style="vertical-align: inherit;">したがって、文字をフレームで追跡することを計画しています-地理オブジェクトに変換する前でも、異なるフレームで同じ文字を認識するためです。</font><font style="vertical-align: inherit;">そして、この知識をマージで使用します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在のバージョンは基本的にベータ版です。</font><font style="vertical-align: inherit;">したがって、それは不完全です。</font><font style="vertical-align: inherit;">近い将来に解決する問題があります。</font><font style="vertical-align: inherit;">解決方法がまだ不明な問題があります。</font><font style="vertical-align: inherit;">そして、一般的にアルゴリズムを使用して解決される可能性が低いものがあります。</font><font style="vertical-align: inherit;">たとえば、GPSトラックの品質は非常に低い場合があります。</font><font style="vertical-align: inherit;">または、画像とトラックが同期していないビデオ-これを見るだけで理解できます。</font><font style="vertical-align: inherit;">一般に、このタスクは最初に計算したよりもはるかに複雑であることがわかりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはさまざまな問題を解決するための巨大な分野を持っています。</font><font style="vertical-align: inherit;">それで、決定します。</font><font style="vertical-align: inherit;">そしてもちろん、何か面白いものに出会ったかどうかを知るために。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja457332/index.html">CおよびC ++コードのPVS-Studioアナライザーによって生成された興味深い警告をすばやく確認するにはどうすればよいですか？</a></li>
<li><a href="../ja457334/index.html">TacacsGUI、構成マネージャー</a></li>
<li><a href="../ja457336/index.html">親知らずの早すぎる除去の結果</a></li>
<li><a href="../ja457338/index.html">Ilya Krasinskyとの電撃戦：悪い仮説を立てる方法、製品を却下する理由、最小限のアクションで成長する方法</a></li>
<li><a href="../ja457340/index.html">レイアウト時間を節約する10個のPostCSSプラグイン</a></li>
<li><a href="../ja457348/index.html">GitHubからPythonAnywhereへのデプロイ</a></li>
<li><a href="../ja457350/index.html">オシロスコープに暗号化サポートが必要なのはなぜですか？</a></li>
<li><a href="../ja457352/index.html">バイヤーのディスプレイ上の情報表示</a></li>
<li><a href="../ja457354/index.html">パフォーマンステストのデータ難読化</a></li>
<li><a href="../ja457362/index.html">RUVDSからのプロモーション：夏にサーバーを準備する</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>