<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍🔧 💯 🖍️ Installation de Firebird 3 sur les versions Linux modernes: CentOS8 et Ubuntu 19 💅🏾 🤭 🤙🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, nous décrivons l'ensemble minimal d'étapes requises pour installer de manière optimale Firebird version 3.0 sur les nouvelles distri...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Installation de Firebird 3 sur les versions Linux modernes: CentOS8 et Ubuntu 19</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491094/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans cet article, nous décrivons l'ensemble minimal d'étapes requises pour installer de manière optimale Firebird version 3.0 sur les nouvelles distributions Linux. </font><font style="vertical-align: inherit;">Par exemple, CentOS 8 et Ubuntu 19 ont été sélectionnés. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour la "livraison" de la distribution Firebird au système cible, dans ce guide, l'option de télécharger l'archive tar.gz à partir du lien du site Web officiel du projet ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">firebirdsql.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) a été </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">sélectionnée</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour les plus impatients - immédiatement au combat:</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation rapide</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modifiez le fichier </font></font><code>/etc/sysctl.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en ajoutant la ligne:</font></font><br>
<br>
<pre><code class="plaintext hljs">vm.max_map_count = 256000
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enregistrez le fichier et appliquez le paramètre:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo sysctl -p /etc/sysctl.conf
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'autres instructions diffèrent pour CentOS 8 et Ubuntu 19, mais elles </font><font style="vertical-align: inherit;">indiquent </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">également </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le lien du site Web officiel du projet Firebird pour télécharger le package de distribution et le répertoire dans lequel le package de distribution sera décompressé pendant le processus de démarrage. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actuellement (mars 2020), la version Firebird 3.0.5 est pertinente ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voici un lien</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vers la version 64 bits). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CentOS 8</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo yum -y install epel-release<font></font>
sudo yum -y makecache<font></font>
sudo yum -y install libicu libtommath tar<font></font>
ln -s libncurses.so.5 \<font></font>
/usr/lib64/libncurses.so.5<font></font>
ln -s libtommath.so.1 \<font></font>
/usr/lib64/libtommath.so.0<font></font>
curl -L |tar -zxC /tmp<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ubuntu 19</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo apt-get -y install libncurses5 libtommath1<font></font>
ln -s libtommath.so.1 \<font></font>
/usr/lib/x86_64-linux-gnu/libtommath.so.0<font></font>
wget -O- |tar -zxC /tmp<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installation actuelle du SGBD Firebird:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd /tmp/<font></font>
sudo ./install.sh<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous voulez mieux comprendre à quoi servent ces actions, lisez la suite. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie principale </font></font></strong><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Petit préambule</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
On suppose que le système d'exploitation est déjà installé dans la version minimale et l'accès aux référentiels publics ou à leurs copies locales est configuré. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est supposé que le lecteur possède une connaissance de base de Linux et du SGBD Firebird. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Planification Il est</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
recommandé d'allouer des sections distinctes pour les fichiers temporaires ( </font></font><code>/tmp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), les fichiers de base de données et les sauvegardes locales </font><font style="vertical-align: inherit;">sur le serveur SGBD </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les fichiers temporaires incluent les fichiers de verrouillage, les fichiers de tri, les fichiers de «matérialisation» des tables temporaires globales (GTT) et les tables de surveillance. Les fichiers de tri et les tables temporaires globales se trouvent dans </font></font><code>/tmp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, les fichiers de table mon $ et les fichiers de verrouillage se trouvent dans </font></font><code>/tmp/firebird</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les fichiers de tri sont «supprimés» ( </font></font><code>unlink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) immédiatement après leur création, ils ne peuvent donc pas être «vus» dans la liste des répertoires - uniquement dans la liste des descripteurs de processus (marqués comme </font></font><code>deleted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo ls -lhF /proc/`pgrep firebird`/fd
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la </font></font><code>/proc/…/fd/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">liste </font><font style="vertical-align: inherit;">des pseudo- </font><font style="vertical-align: inherit;">répertoires, des liens symboliques sont affichés et les informations réelles sur le fichier donnent:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo stat -L /proc/`pgrep firebird`/fd/
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
où </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est le descripteur (descripteur) du fichier d'intérêt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au lieu d'appeler " </font></font><code>pgrep -</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">", vous pouvez immédiatement remplacer l'identifiant du processus qui vous intéresse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les fichiers temporaires peuvent être très volumineux, il est donc </font></font><code>/tmp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recommandé d'allouer au moins 20 à 30 Go pour. Gardez à l'esprit que la taille des fichiers de tri ne dépend que de la quantité de données triées explicitement ou implicitement dans la demande et qu'un seul utilisateur peut «créer» des gigaoctets de fichiers temporaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La section des fichiers de base de données doit contenir tous les fichiers de base de données. plus au moins une copie du plus grand fichier de base de données. Il devrait tenir compte de la croissance des fichiers de bases de données à l'avenir pendant plusieurs années à l'avance.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La section des sauvegardes locales doit contenir au moins une archive de sauvegarde de toutes les bases plus la sauvegarde de la plus grande base. </font><font style="vertical-align: inherit;">Il est conseillé que cette section dispose également d'un emplacement pour restaurer la plus grande base. </font><font style="vertical-align: inherit;">Il devrait prendre en compte la croissance des sauvegardes et des archives de sauvegarde à l'avenir pour plusieurs années à venir. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Préparation préliminaire</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Le serveur SGBD Firebird 3.0 alloue et libère dynamiquement la mémoire système, ce qui peut entraîner une fragmentation. </font><font style="vertical-align: inherit;">Par exemple, après qu'un grand nombre d'utilisateurs se sont déconnectés du super serveur en même temps, des erreurs peuvent se produire avec de nouvelles connexions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La fragmentation de la mémoire est contrôlée par le paramètre système </font></font><code>vm.max_map_count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, par défaut - 64 Ko. </font><font style="vertical-align: inherit;">Il est recommandé d'augmenter sa valeur quatre fois:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo sysctl vm.max_map_count=256000
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour définir la nouvelle valeur au redémarrage du système, ajoutez la </font></font><code>/etc/sysctl.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ligne </font><font style="vertical-align: inherit;">au fichier </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">vm.max_map_count = 256000
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est conseillé de faire un commentaire afin de comprendre la raison de la modification de ce paramètre. Vous pouvez d'abord modifier le fichier, puis appliquer les paramètres qui y sont enregistrés:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo sysctl -p /etc/sysctl.conf
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installation des packages requis </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les exécutables du SGBD Firebird 3.0 Linux dépendent des bibliothèques ncurses ( </font></font><code>libncurses.so.5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), ICU (sans </font></font><code>ldd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">liaison de </font><font style="vertical-align: inherit;">version et sans sortie </font><font style="vertical-align: inherit;">) et tommath ( </font></font><code>libtommath.so.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). Pour télécharger et décompresser l'archive d'assemblage, des utilitaires sont requis </font></font><code>gzip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>tar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>curl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code>wget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Version de l'unité de </font><font style="vertical-align: inherit;">soins intensifs, </font></font><code>gzip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>tar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>curl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>wget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- sont insignifiants. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le travail avec les packages dépend du système et du gestionnaire de packages utilisé dans le système, nous les considérerons donc un par un. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CentOS 8</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
CentOS 8 utilise le nouveau gestionnaire de paquets - </font></font><code>dnf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et il est appelé de manière "transparente" sur commande </font></font><code>yum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Puisqu'il n'y a aucune différence entre eux à nos fins, il y aura des exemples </font></font><code>yum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mise à jour du cache de métadonnées:</font></font><code>sudo yum makecache</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le paquet libtomath est situé dans des référentiels E (xtra) P (ackages pour) E (nterprise) L (inux) distincts, nous vérifions donc qu'il est déjà connecté:</font></font><br>
<br>
<pre><code class="plaintext hljs">yum -C repolist
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'option "uniquement à partir du cache" ( </font></font><code>-C</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code>--cache-only</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">est </font><font style="vertical-align: inherit;">utilisée pour éliminer les vérifications et les téléchargements inutiles, accélérant ainsi le yum. </font><font style="vertical-align: inherit;">S'il n'y a pas de référentiel epel dans la liste, installez-le et mettez à jour le cache de métadonnées:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo yum install epel-release &amp;&amp;<font></font>
sudo yum makecache<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous confirmons les demandes, si nécessaire, en vérifiant les valeurs des clés pgp avec celles déjà connues d'une source de confiance. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous rencontrez des problèmes lors du téléchargement des méta-informations du référentiel à partir des ressources https, modifiez le fichier </font></font><code>/etc/yum.repos.d/epel.repo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, remplacez-le </font></font><code>https://</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">par </font></font><code>http://</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et répétez la commande de mise à jour du cache. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vérifiez l'état des packages nécessaires (la commande est repliée, dans l'exemple de sortie, le package 32 bits est filtré):</font></font><br>
<br>
<pre><code class="plaintext hljs">yum -C list \<font></font>
ncurses libicu libtommath \<font></font>
gzip tar curl wget |<font></font>
grep -v i686<font></font>
Installed Packages<font></font>
curl.x86_64 7.61.1-11.el8 @anaconda<font></font>
gzip.x86_64 1.9-9.el8 @anaconda<font></font>
ncurses.x86_64 6.1-7.20180224.el8 @anaconda<font></font>
Available Packages<font></font>
libicu.x86_64 60.3-1.el8 BaseOS<font></font>
libtommath.x86_64 1.1.0-1.el8 epel<font></font>
tar.x86_64 2:1.30-4.el8 BaseOS<font></font>
wget.x86_64 1.19.5-8.el8_1.1 AppStream<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous voyons cela </font></font><code>curl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>gzip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>ncurses</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sont situés dans le pseudo-référentiel du programme d'installation ( </font></font><code>anaconda</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), et </font></font><code>tar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- est exclu de l'installation minimale du système. </font><font style="vertical-align: inherit;">Versions majeures </font></font><code>libncurses</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>libtommath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plus que nécessaire: 6 et 1 au lieu de 5 et 0, respectivement. </font><font style="vertical-align: inherit;">Si le même package est installé et disponible, une mise à jour a été publiée pour lui. </font><font style="vertical-align: inherit;">Installez les packages manquants:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo yum install \<font></font>
libicu libtommath tar<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ubuntu 19 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
utilitaires sont conçus pour la </font><font style="vertical-align: inherit;">gestion des paquets </font></font><code>apt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>apt‑get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>apt‑cache</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Le premier est conçu pour un travail interactif, et les deux derniers - pour une utilisation dans des scripts. </font><font style="vertical-align: inherit;">Les noms des packages sont légèrement différents et incluent une version. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous vérifions l'état des packages nécessaires (la commande est complexe, l'exemple de sortie est réduit et les paquets 32 bits sont filtrés):</font></font><br>
<br>
<pre><code class="plaintext hljs">apt list libncurses? libicu?? libtommath? \<font></font>
gzip tar curl wget |<font></font>
grep -v i386<font></font>
curl 7.65.3-1<font></font>
gzip 1.10-0 [upgradable…]<font></font>
libicu63 63.2-2 [installed]<font></font>
libncurses5 6.1<font></font>
libncurses6 6.1 [installed,automatic]<font></font>
libtommath1 1.1.0<font></font>
tar 1.30 [installed]<font></font>
wget 1.20.3 [installed]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Packages pour lesquels </font></font><code>installed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>upgradable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- sont installés </font><font style="vertical-align: inherit;">entre crochets </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Disponible, mais pas installé </font></font><code>ncurses5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, au lieu d'être </font></font><code>curl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">installé </font></font><code>wget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Installez les packages manquants:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo apt‑get install \<font></font>
libncurses5 libtommath1<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Création de liens symboliques </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puisqu'ils </font></font><code>libtommath.so.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sont </font></font><code>libncurses.so.6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rétrocompatibles avec </font></font><code>libtommath.so.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>libncurses.so.5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, il suffit que Firebird crée des liens symboliques vers des versions existantes de bibliothèques. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On trouve </font></font><code>libtommath.so.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><code>libncurses.so.?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">situé dans le même répertoire):</font></font><br>
<br>
<pre><code class="plaintext hljs">find /usr -name libtommath.so.1
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CentOS:</font></font><br>
<br>
<pre><code class="plaintext hljs">/usr/lib64/libtommath.so.1
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ubuntu:</font></font><br>
<br>
<pre><code class="plaintext hljs">/usr/lib/x86_64-linux-gnu/libtommath.so.1
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Créez des liens symboliques. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CentOS:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo ln -s libtommath.so.1 \<font></font>
/usr/lib64/libtommath.so.0<font></font>
sudo ln -s libncurses.so.6 \<font></font>
/usr/lib64/libncurses.so.5<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ubuntu:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo ln -s libtommath.so.1 \<font></font>
/usr/lib/x86_64-linux-gnu/libtommath.so.0<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vérifiez le résultat (la commande est repliée, les exemples de sortie sont raccourcis):</font></font><br>
<br>
<pre><code class="plaintext hljs">ls -lhF \<font></font>
$(dirname `find /usr -name libtommath.so.1`) |<font></font>
grep "lib\(ncurses\|tommath\)\.so\."<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CentOS:</font></font><br>
<br>
<pre><code class="plaintext hljs">libncurses.so.5 -&gt; libncurses.so.6*<font></font>
libncurses.so.6 -&gt; libncurses.so.6.1*<font></font>
libncurses.so.6.1*<font></font>
libtommath.so.0 -&gt; libtommath.so.1*<font></font>
libtommath.so.1 -&gt; libtommath.so.1.1.0*<font></font>
libtommath.so.1.1.0*<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ubuntu:</font></font><br>
<br>
<pre><code class="plaintext hljs">libncurses.so.5 -&gt; libncurses.so.5.9<font></font>
libncurses.so.5.9<font></font>
libncurses.so.6 -&gt; libncurses.so.6.1<font></font>
libncurses.so.6.1<font></font>
libtommath.so.0 -&gt; libtommath.so.1<font></font>
libtommath.so.1 -&gt; libtommath.so.1.1.0<font></font>
libtommath.so.1.1.0<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Téléchargement du kit de distribution du SGBD Firebird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le site officiel du projet Firebird (firebirdsql.org) publie des liens vers les distributions des versions «officielles» (versions) et des assemblages «quotidiens» (construction de clichés). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les versions officielles de Linux sont disponibles sous forme d'archives (tar.gz) et de packages deb / rpm, et les versions sont disponibles uniquement sous forme d'archives. </font><font style="vertical-align: inherit;">Nous allons voir le "programme d'installation générique" (programme d'installation générique de tar.gz). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'archive d'assemblage doit être téléchargée et décompressée, mais nous combinerons ces deux processus. </font><font style="vertical-align: inherit;">Le déballage se fait en </font></font><code>/tmp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, l'URL indique un lien vers l'archive téléchargeable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
boucle:</font></font><br>
<br>
<pre><code class="plaintext hljs">curl -L URL | tar -zxC /tmp
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
wget:</font></font><br>
<br>
<pre><code class="plaintext hljs">wget -O– URL | tar -zxC /tmp
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par défaut, il </font></font><code>curl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">envoie les données chargées à la sortie standard, mais ne traite pas les redirections et nous ajoutons " </font></font><code>‑L</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">", mais </font></font><code>wget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, au contraire: il traite les redirections, mais écrit les données dans un fichier et nous mettons " </font></font><code>‑O‑</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">". Pour </font></font><code>tar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indiquer l'utilisation du </font></font><code>gzip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">filtre et du répertoire dans lequel le déballage sera effectué. À la </font><font style="vertical-align: inherit;">fin du processus sera sorte de répertoire </font></font><code>Firebird‑3.0.5.33220‑0.amd64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec trois fichiers: </font></font><code>install.sh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>buildroot.tar.gz</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>manifest.txt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation de Firebird</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Au cours de la préparation préliminaire, nous avons ajusté la valeur du paramètre système </font></font><code>vm.max_map_count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, vérifié la disponibilité et installé les bibliothèques ICU, ncurses et tommath. Nous nous sommes assurés que les versions de ncurses et tommath ( </font></font><code>libncures.so.5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>libtommath.so.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) étaient </font><font style="vertical-align: inherit;">correctes </font><font style="vertical-align: inherit;">et </font><font style="vertical-align: inherit;">avons </font><font style="vertical-align: inherit;">créé les liens symboliques nécessaires.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, l'installation est très simple. </font><font style="vertical-align: inherit;">Nous allons dans le répertoire où l'archive du kit de distribution Firebird a été décompressé, vérifions et, si nécessaire, définissons le drapeau «exécutable» pour le script </font></font><code>install.sh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">chmod +x install.sh
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
exécutez le script d'installation:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo ./install.sh
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en appuyant sur la touche Entrée, nous confirmons le début de l'installation, et à réception de la demande - entrez le mot de passe sysdba. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le script d'installation lance automatiquement une </font></font><code>systemd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unité </font></font><code>firebird-superserver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(l'architecture Firebird 3.0 par défaut). </font><font style="vertical-align: inherit;">Le service Firebird fonctionnera avec les paramètres par défaut pour un super serveur: un cache de pages de 2048 pages (par base), un tampon de tri de 64 Mo (partagé), et connectant uniquement les clients de la troisième version. </font><font style="vertical-align: inherit;">Afficher les options </font></font><code>firebird.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">grep -v ^# firebird.conf | grep -v ^$
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veuillez noter que les nouvelles valeurs de </font></font><code>firebird.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne seront activées qu'après le redémarrage du service Firebird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la sélection des valeurs des paramètres, il convient de tenir compte du fait qu'il existe trois «consommateurs» principaux: le cache de page (pour la base de données), le tampon de tri (partagé) et la mémoire allouée par le serveur pour les connexions client. Vous ne pouvez gérer que les deux premiers - la quantité de mémoire pour les connexions client dépend du nombre et du texte des demandes mises en cache, de leurs plans et des objets de base de données impliqués dans les demandes. L'évaluation de la mémoire des connexions client se fait uniquement de manière empirique et peut changer lorsque les applications client et / ou les objets de base de données changent. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour un super serveur sur des hôtes avec une petite quantité de mémoire (jusqu'à 12-16 Go), vous ne devez pas allouer plus d'un tiers ou un quart de la RAM totale pour le cache de page et le tampon de tri.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si le nombre de bases de données n'est pas fixe et peut changer, la mémoire totale du cache de pages doit être divisée par le nombre maximal de bases de données pouvant se trouver sur le serveur. La taille du cache de pages est définie en pages et doit être convertie séparément en octets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour basculer vers l'architecture classique, vous devez au moins explicitement spécifier </font></font><code>ServerMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans </font></font><code>firebird.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, réduire le cache de page au même endroit (pas plus de 2 Ko), réduire le tampon de tri (la quantité totale autorisée de toutes sortes, divisée par le nombre maximal de connexions), désactiver et arrêter l'unité </font></font><code>firebird-superserver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, activer et exécuter unité </font></font><code>firebird-classic.socket</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'utilisation de l'architecture superclassique dans Firebird 3.0 n'a pas beaucoup de sens: la «fiabilité» - comme un super serveur, a le même tampon de tri général. </font><font style="vertical-align: inherit;">Il n'y a pas de cache de page général et la «perte» de synchronisation des différentes connexions entre elles est la même que celle d'un classique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il ne faut pas oublier que dans Firebird 3.0, certains paramètres (cache de page, tailles de fichier de verrouillage, tables de hachage et autres) peuvent être définis </font></font><code>databases.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">individuellement pour chaque base de données. </font><font style="vertical-align: inherit;">Pour un superserveur, il est utile, par exemple, de définir une petite valeur </font></font><code>DefaultDbCachePages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans </font></font><code>firebird.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et de définir des caches de page individuels pour les bases de données nécessaires dans </font></font><code>databases.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Posez des questions sur l'article dans les commentaires ou écrivez des lettres à notre adresse d'assistance </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">support@ibase.ru.</font></font></b></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr491084/index.html">saneex.c: essayez / catch / finalement basé sur setjmp / longjmp (C99) plus rapidement que les exceptions C ++ standard ¹</a></li>
<li><a href="../fr491086/index.html">Bibliothèque JavaScript Webix vue par un débutant. Partie 6. Interaction avec le serveur</a></li>
<li><a href="../fr491088/index.html">GitHub: nouvelle bibliothèque Open Source pour OSINT</a></li>
<li><a href="../fr491090/index.html">Convertir des documents texte en xml en C #</a></li>
<li><a href="../fr491092/index.html">Comment Crash Bandicoot a piraté Playstation</a></li>
<li><a href="../fr491100/index.html">Sur Wanhao 5S, ils ont imprimé une poupée avec une taille d'une personne</a></li>
<li><a href="../fr491102/index.html">Comment développer un service en présence de concurrents coriaces</a></li>
<li><a href="../fr491104/index.html">Comment j'ai trouvé un problème matériel sur ma tablette Lenovo MiiX 2 10</a></li>
<li><a href="../fr491106/index.html">Pourquoi avez-vous besoin d'une réplication semi-synchrone?</a></li>
<li><a href="../fr491108/index.html">Organisation des déploiements dans de nombreux environnements K8 à l'aide de Helmfile</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>