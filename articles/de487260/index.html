<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôøÔ∏è ü•™ üë©üèæ‚Äçü§ù‚Äçüë®üèª NoVerify: Ein PHP-Linter, der schnell arbeitet üë®üèæ‚Äçü§ù‚Äçüë®üèº üñ•Ô∏è ü§≥üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es gibt gute Dienstprogramme zur statischen Analyse f√ºr PHP: PHPStan, Psalm, Phan, Exakat. Linters machen ihre Arbeit gut, aber sehr langsam, da fast ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>NoVerify: Ein PHP-Linter, der schnell arbeitet</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/487260/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt gute Dienstprogramme zur statischen Analyse f√ºr PHP: PHPStan, Psalm, Phan, Exakat. </font><font style="vertical-align: inherit;">Linters machen ihre Arbeit gut, aber sehr langsam, da fast alle in PHP (oder Java) geschrieben sind. </font><font style="vertical-align: inherit;">F√ºr den pers√∂nlichen Gebrauch oder ein kleines Projekt ist dies normal, aber f√ºr eine Site mit Millionen von Benutzern ist dies ein kritischer Faktor. </font><font style="vertical-align: inherit;">Ein langsamer Linter verlangsamt die CI-Pipeline und macht es unm√∂glich, sie als L√∂sung zu verwenden, die in einen Texteditor oder eine IDE integriert werden kann. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/of/zg/kr/ofzgkrouigpm_lqdgdxepukek4q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Site mit Millionen von Benutzern ist VKontakte. </font><font style="vertical-align: inherit;">Entwicklung und Hinzuf√ºgung neuer Funktionen, Testen und Beheben von Fehlern, √úberpr√ºfungen - all dies sollte unter den Bedingungen harter Fristen schnell gehen. </font><font style="vertical-align: inherit;">Daher ist ein guter und schneller Linter, der die Codebasis in 5-10 Sekunden auf 5 Millionen Zeilen √ºberpr√ºfen kann, unersetzlich.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt keine geeigneten Linters auf dem Markt, so Yuri Nasretdinov (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">youROCK</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) von VKontakte schrieb seine Hilfe an Entwicklungsteams - NoVerify. </font><font style="vertical-align: inherit;">Dies ist ein Linter f√ºr PHP, der in Go geschrieben ist. </font><font style="vertical-align: inherit;">Es funktioniert 10 bis 30 Mal schneller als Analoga, kann etwas finden, vor dem PhpStorm nicht warnt, erweitert sich leicht und l√§sst sich gut in Projekte integrieren, in denen sie noch nie von statischen Analysen geh√∂rt haben.&nbsp;</font><strong><font style="vertical-align: inherit;">Iskander Sharipov</font></strong></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
wird √ºber diesen Linter berichten </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unter der Katze: Wie man einen Linter ausw√§hlt und lieber einen eigenen schreibt, warum NoVerify so schnell ist und wie er im Inneren angeordnet ist, warum er in Go geschrieben ist, was er finden und wie er sich ausdehnt, welche Kompromisse Sie eingehen mussten und was auf seiner Basis aufgebaut werden kann.</font></font><br>
<a name="habracut"></a><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/dlcDvUTQ5Lk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iskander Sharipov</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quasilyte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) arbeitet in der Backend-Infrastruktur von VKontakte und ist mit NoVerify gut vertraut. </font><font style="vertical-align: inherit;">In der Vergangenheit war er im Go-Compiler des Intel-Teams besch√§ftigt. </font><font style="vertical-align: inherit;">Er schreibt nicht in PHP, aber dies ist seine Lieblingssprache f√ºr statische Analysen - es gibt viele Dinge, die schief gehen k√∂nnen. </font></font><br>
<br>
<i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis. </font></font></strong></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um den Hintergrund zu verstehen, lesen Sie den Artikel von Yuri Nasretdinov, dem Autor von NoVerify on </font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Habr√©,</font></font></i></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit einem Hintergrund und einem Vergleich mit einigen vorhandenen Lintern, die normalerweise in PHP geschrieben sind. </font><font style="vertical-align: inherit;">Alle Aussagen in Richtung PHP (im Artikel von Yuri und hier) sind ein Witz. </font><font style="vertical-align: inherit;">Iskander liebt PHP, jeder liebt PHP.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Produktentwicklung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In VKontakte ist dies eine Website-Entwicklung auf KPHP. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geschwindigkeit ist f√ºr VKontakte wichtig:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Beheben von Fehlern, Hinzuf√ºgen und Entwickeln neuer Funktionen von der ersten bis zur letzten Phase. Aber </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geschwindigkeit geht mit Fehlern einher</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , besonders wenn es harte Fristen gibt - wir haben es eilig, sind nerv√∂s und machen mehr Fehler als in einer ruhigen Situation. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fehler betreffen Benutzer</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wir wollen nicht, dass sie leiden, deshalb kontrollieren wir die Qualit√§t. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Qualit√§tskontrolle verlangsamt jedoch die Entwicklung</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dies wollen wir auch nicht, daher muss der Effekt minimiert werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dies zu </font><font style="vertical-align: inherit;">tun, k√∂nnten wir f√ºhren </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mehr</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Code </font><strong><font style="vertical-align: inherit;">Bewertungen</font></strong><font style="vertical-align: inherit;"> Unfehlbar mieten </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mehr Tester</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und schreibe weitere Tests. </font><font style="vertical-align: inherit;">All dies ist jedoch schlecht automatisiert: Die √úberpr√ºfung muss durchgef√ºhrt und die Tests m√ºssen geschrieben werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hauptaufgaben meines Teams sind unterschiedlich. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sammeln Sie Metriken, analysieren Sie sie und reparieren Sie sie schnell</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wenn etwas schief gelaufen ist, m√∂chten wir es schnell zur√ºcksetzen, verstehen, was falsch ist, es beheben und den Arbeitscode schnell wieder in die Produktion einf√ºgen. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úberwachen Sie die Genauigkeit der Pipeline,</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> damit nicht funktionierender Code √ºberhaupt nicht in Produktion geht - Sie m√ºssen ihn nicht zur√ºcksetzen. </font><font style="vertical-align: inherit;">Hier kommen Linters zur Rettung - statische Code-Analysatoren. </font><font style="vertical-align: inherit;">Wir werden dar√ºber reden.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">W√§hle einen Linter</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
W√§hlen wir einen Linter, den wir der Pipeline hinzuf√ºgen. Wir verfolgen einen einfachen Ansatz - wir formulieren die Anforderungen. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linter sollte schnell arbeiten</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Unsere Pipeline besteht aus mehreren Schritten: Der Betrieb des Linter sollte nicht viel Zeit und zeitaufw√§ndigen Entwickler erfordern, w√§hrend er auf Feedback wartet. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unterst√ºtzung f√ºr "ihre" Schecks</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . H√∂chstwahrscheinlich hat der Linter nicht alles, was wir brauchen - wir m√ºssen unsere eigenen Schecks hinzuf√ºgen. Sie sollten Probleme finden, die f√ºr unsere Codebasis typisch sind, und den Code aus der Sicht unseres Projekts √ºberpr√ºfen. Nicht alles kann (oder bequem) durch Tests abgedeckt werden. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unterst√ºtzung f√ºr "eigene" Schecks</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wir k√∂nnen viele Tests schreiben, aber werden sie gut unterst√ºtzt? </font><font style="vertical-align: inherit;">Wenn wir beispielsweise √ºber regul√§re Ausdr√ºcke schreiben, werden diese komplizierter, wenn Sie den Kontext, die Semantik und die Syntax der Sprache ber√ºcksichtigen m√ºssen. </font><font style="vertical-align: inherit;">Daher sind Tests keine Option. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die meisten der von uns √ºberpr√ºften Linters sind in PHP geschrieben. </font><font style="vertical-align: inherit;">Sie geben aber nicht weiter. </font><font style="vertical-align: inherit;">Linters in PHP (es gibt noch keine AOT-Kompilierung) arbeiten 10 bis 20 Mal langsamer als in anderen Sprachen - unsere gr√∂√üte Datei kann mehrere zehn Sekunden lang analysiert werden. </font><font style="vertical-align: inherit;">Dies verlangsamt den Workflow zu sehr und zu sehr - dies ist ein </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">schwerwiegender Fehler</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Was machen Entwickler in diesem Fall? </font><font style="vertical-align: inherit;">Sie schreiben ihre eigenen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deshalb haben wir unseren NoVerify PHP Linter on Go geschrieben. </font><font style="vertical-align: inherit;">Warum darauf? </font><font style="vertical-align: inherit;">Spoiler: Nicht nur, weil Jura es so entschieden hat.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Noverify</font></font></h3><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go ist ein guter Kompromiss zwischen Entwicklungsgeschwindigkeit und Produktivit√§t.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der erste "Beweis" im Bild mit "Infografiken": gute Ausf√ºhrungsgeschwindigkeit, einfache Unterst√ºtzung. </font><font style="vertical-align: inherit;">Wir verlieren an Entwicklungsgeschwindigkeit, aber die ersten beiden Punkte sind uns wichtiger.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c67/bfb/e53/c67bfbe537c7b8996cc429cef661c377.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Figuren werden aus dem Kopf genommen, sie werden von nichts gest√ºtzt. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr den zweiten ‚ÄûBeweis‚Äú argumentierte er einfacher.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c10/6e7/2e9/c106e72e9b04791cd5abd3097664c875.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP ist langsamer, Go ist schneller und so weiter.&nbsp;</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wir haben uns aus drei Gr√ºnden f√ºr Go entschieden. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go als Sprache f√ºr Versorgungsunternehmen ist auf einer grundlegenden Ebene leicht zu erlernen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Im PHP-Entwicklungsteam hat sicher jemand von Go geh√∂rt, Docker angeschaut, wei√ü, dass es in Go geschrieben ist, vielleicht sogar die Quelle gesehen. Mit einem Grundverst√§ndnis k√∂nnen sie nach ein oder zwei Wochen intensiven Go-Lernens Code darauf schreiben. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go ist sehr effektiv</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Selbst ein Anf√§nger wird nicht viele Fehler machen k√∂nnen, weil Go eine gute Stimmung und viel Linter hat. In Go ist der durchschnittliche Code etwas besser als in anderen Sprachen, da es viel weniger M√∂glichkeiten gibt, das eigene Bein zu schie√üen. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go-Apps sind einfach zu warten.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go ist eine ziemlich ausgereifte Programmiersprache, f√ºr die fast alle Entwickler-Tools verf√ºgbar sind, die Sie sich w√ºnschen k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden NoVerify mit unseren Anforderungen √ºberpr√ºfen.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NoVerify ist um ein </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vielfaches schneller als Alternativen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daf√ºr k√∂nnen Sie </font><font style="vertical-align: inherit;">sowohl Open Source- als auch eigene </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erweiterungen schreiben</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Es ist wichtig, dass wir diese Pr√ºfungen trennen k√∂nnen und Sie Ihre eigenen schreiben k√∂nnen.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einfach zu testen und zu entwickeln. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zum Teil, weil die Standard-Go-Distribution √ºber ein Standard-Framework mit Profilerstellung und Tests verf√ºgt. </font><font style="vertical-align: inherit;">Es wird haupts√§chlich f√ºr Unit-Tests verwendet. </font><font style="vertical-align: inherit;">Besonders geschickt kann man wie wir f√ºr die Integration verwenden - wir haben Integrationstests, die durch Go-Tests geschrieben wurden.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kompromiss der Integration</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beginnen wir mit dem Problem. </font><font style="vertical-align: inherit;">Wenn Sie zum </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ersten Mal</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> einen </font><font style="vertical-align: inherit;">Linter f√ºr </font><font style="vertical-align: inherit;">ein altes Projekt </font><font style="vertical-align: inherit;">starten, f√ºr das </font><font style="vertical-align: inherit;">keine Analyse verwendet wurde, wird dies h√∂chstwahrscheinlich angezeigt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rx/yu/qz/rxyuqz6edr8po3uc7xo87byzgpu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oh mein Code! </font><font style="vertical-align: inherit;">Niemand wird jemals so viele Fehler korrigieren. </font><font style="vertical-align: inherit;">Ich m√∂chte das Projekt schlie√üen, den Linter entfernen und ihn nie wieder ausf√ºhren. </font><font style="vertical-align: inherit;">Was tun, um dies zu vermeiden?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integrieren</font></font></h3><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im Diff-Modus ausf√ºhren</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wir m√∂chten nicht alle √úberpr√ºfungen des gesamten Projekts mit einer Million Fehlern bei jedem CI-Schritt durchf√ºhren. Vielleicht kennen Sie die Baseline: In NoVerify ist dies sofort einsatzbereit. Sie m√ºssen kein separates Dienstprogramm einbetten. Wir waren sofort der Ansicht, dass ein solches Regime erforderlich ist. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºgen Sie den Ausnahmen Legacy (Anbieter) hinzu</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es ist einfacher, einige Dinge nicht zu ber√ºhren, selbst bei einem Defekt beiseite zu lassen, um ihn nicht selbst zu modifizieren und keine Spuren in der Geschichte zu hinterlassen. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir beginnen mit einer Teilmenge von Schecks</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sie k√∂nnen nicht alles verbinden, was Stil beinhaltet. Zun√§chst werden echte Fehler gefunden: Wir finden, beheben und wechseln zu etwas Neuem. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir sammeln Feedback von Kollegen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wie kann man verstehen, wann es Zeit ist, etwas anderes einzuschalten? </font><font style="vertical-align: inherit;">Fragen Sie Kollegen. </font><font style="vertical-align: inherit;">Sobald sie froh sind, dass die Fehler verschwunden sind und fast nichts gefunden wurde, schalten Sie etwas anderes ein - es ist Zeit zu arbeiten.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Git-Setup</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diff-Modus bedeutet, dass Sie ein Versionskontrollsystem haben - Git. Wenn Sie SVN haben, hilft die Anweisung nicht weiter, gehen Sie zu Git. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir installieren den Pre-Push-Haken mit einem Linter</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und pr√ºfen, bevor wir den Code starten. Wir √ºberpr√ºfen den lokalen Computer </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit der Option </font></font></strong><code>--no-verify</code><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, den Linter zu umgehen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es w√§re wahrscheinlich bequemer, einen Pre-Receive-Hook zu verwenden und den serverseitigen Linter zu deaktivieren, aber aus historischen Gr√ºnden passieren in VK viele Dinge in einem Pre-Push-Hook, sodass auch NoVerify eingebaut wurde. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Push werden CI-Pr√ºfungen gestartet. NoVerify verf√ºgt √ºber zwei Betriebsarten: mit vollst√§ndiger Analyse und ohne. Auf CI m√∂chten (und k√∂nnen) Sie h√∂chstwahrscheinlich ausf√ºhren</font></font><code>--git-full-diff</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Maschinen in CI k√∂nnen h√§rter geladen werden und √ºberpr√ºfen auch die Dateien, die sich nicht ge√§ndert haben. </font><font style="vertical-align: inherit;">Auf lokalen Computern k√∂nnen wir eine weniger strenge, aber schnellere Analyse nur ge√§nderter Dateien ausf√ºhren (5-15 Sekunden schneller).&nbsp;</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fehlalarm</font></font></h3><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5c8/508/9c9/5c85089c909c79ed02c4c72f25bb9850.jpg"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betrachten Sie das folgende Beispiel: In dieser Funktion wird etwas akzeptiert, das ein Feld enth√§lt, aber der Typ wird in keiner Weise beschrieben. </font><font style="vertical-align: inherit;">Es ist keine Tatsache, dass es √ºberhaupt ein Feld gibt, wenn eine Funktion aus verschiedenen Kontexten aufgerufen wird. </font><font style="vertical-align: inherit;">In einer strengen Version k√∂nnte sich der Linter beschweren: "Es ist nicht klar, um welchen Typ es sich handelt, wie kann ich ein Feld ohne Pr√ºfung zur√ºckgeben?" </font><font style="vertical-align: inherit;">Dies ist jedoch nicht unbedingt ein Fehler.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_foo</span>(<span class="hljs-params">$obj</span>) </span>{
    <span class="hljs-keyword">return</span> $obj-&gt;foo;<font></font>
    ^^^<font></font>
}<font></font>
<font></font>
Warning:<font></font>
Property <span class="hljs-string">"foo"</span> does not exist</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">False Positives st√∂ren.&nbsp;</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies ist der Hauptgrund f√ºr den Verzicht auf Linter. </font><font style="vertical-align: inherit;">Menschen w√§hlen andere Optionen, die weniger Fehler finden, aber weniger Fehlalarme erzeugen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie schubsen oft herum, wenn etwas funktioniert, aber das ist kein Fehler. </font><font style="vertical-align: inherit;">Viele haben einen Mechanismus, um Linter zu umgehen - um mit der Flagge zu laufen, ohne den Linter zu √ºberpr√ºfen. </font><font style="vertical-align: inherit;">In unserem Land wurde diese Flagge als </font></font><code>no-verify</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pre-Push-Haken bezeichnet. </font><font style="vertical-align: inherit;">Wir haben es oft benutzt und der Name wurde im Namen des Linter verewigt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pickiness</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine weitere Linter-Eigenschaft. </font><font style="vertical-align: inherit;">Zum Beispiel verstehen viele Aliase nicht. </font><font style="vertical-align: inherit;">In PHP ist </font></font><code>sizeof</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dies ein Analogon </font></font><code>count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Es berechnet nicht die Gr√∂√üe, sondern gibt die Anzahl der Elemente zur√ºck. </font><font style="vertical-align: inherit;">Das mentale Modell der C-Entwickler hat eine </font></font><code>sizeof</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">andere Bedeutung. </font><font style="vertical-align: inherit;">Wenn es in der Codebasis </font></font><code>sizeof</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h√∂chstwahrscheinlich einen Mittelwert gibt </font></font><code>count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Aber das ist ein Trottel.</font></font><br>
<br>
<pre><code class="php hljs">$len = sizeof($x);<font></font>
    ^^^^^^<font></font>
<font></font>
Warning:<font></font>
<span class="hljs-keyword">use</span> "<span class="hljs-title">count</span>" <span class="hljs-title">instead</span> <span class="hljs-title">of</span> "<span class="hljs-title">sizeof</span>"</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was soll man damit machen?</font></font></h3><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sei streng und zwinge alles ausnahmslos zu regieren</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Regeln auferlegen, fordern, beachten und nicht umgehen lassen - funktioniert nie. Damit eine solche Starrheit funktioniert, muss das Team aus denselben Personen bestehen: Charakter, Kulturniveau, Pedanterie und Wahrnehmung der Qualit√§t des Codes. Wenn dies nicht so ist, wird es einen Aufstand geben. Es ist einfacher, ein Team aus Ihren Klonen zusammenzustellen, als alle Regeln zu befolgen.&nbsp; </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blockieren Sie nicht Push / commit auf Kommentare wie Fixierung </font></font><code>sizeof</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf </font></font><code>count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dies ist h√∂chstwahrscheinlich kein Fehler, sondern eine Fehlauswahl und wirkt sich nicht auf den Code aus. Aber dann werden 99% der Antworten (vom Team) ignoriert und es werden immer zus√§tzliche im Code sein </font></font><code>sizeof</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erm√∂glichen Sie eine gewisse Konfigurationsebene f√ºr verschiedene Teams und Entwickler.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie k√∂nnen die Konfiguration f√ºr jeden Befehl so konfigurieren, dass diejenigen, die nicht zu √§ndern m√∂chten </font></font><code>sizeof</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dies nicht tun k√∂nnen. </font><font style="vertical-align: inherit;">Lassen Sie alle anderen die Regeln befolgen. </font><font style="vertical-align: inherit;">Eine gute Option, aber die Konsistenz sinkt, und in einigen Verzeichnissen ist der Code etwas schlechter. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºhren Sie solche √úberpr√ºfungen einmal im Monat auf Subbotniks durch</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">√úberpr√ºfungen k√∂nnen nicht jedes Mal am CI oder Pre-Push-Haken durchgef√ºhrt werden, sondern einmal im Monat in der Routine Cron. </font><font style="vertical-align: inherit;">F√ºhren Sie alles aus, was Sie nach der aktiven Entwicklung finden, und bearbeiten Sie es. </font><font style="vertical-align: inherit;">Diese Arbeit erfordert jedoch Ressourcen f√ºr die Automatisierung und √úberpr√ºfung. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nichts tun. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Deaktivieren von Stilpr√ºfungen ist ebenfalls eine Option.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kompromiss</font></font></h3><br>
<img src="https://habrastorage.org/webt/-l/jq/ao/-ljqaougomtrtjxnr_kl_b6rgyk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wird immer einen Kompromiss zwischen einem gl√ºcklichen Entwickler und einem gl√ºcklichen Linter geben. </font><font style="vertical-align: inherit;">Es ist leicht, einen Linter gl√ºcklich zu machen: der strengste Modus und das Fehlen von Problemumgehungen. </font><font style="vertical-align: inherit;">Vielleicht bleibt danach niemand mehr im Team. Wenn der Linter die Arbeit st√∂rt, ist dies ein Problem.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vor allem n√ºtzliche Ma√ünahmen.</font></font></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NoVerify Technische Details</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Private Schecks VKontakte.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Noverify ist so etwas geschrieben. In GitHub ist das NoVerify-Repository in zwei Teile unterteilt: das Framework, mit dem der Linter implementiert wird, und separate √úberpr√ºfungen, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vklints</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dies geschieht, damit der Linter Schecks von Drittanbietern l√§dt: Sie k√∂nnen ein separates Modul auf Go schreiben und diese registrieren sich im Framework. Nach dem Start von der NoVerify-Bin√§rdatei l√§dt das Framework alle registrierten √úberpr√ºfungss√§tze und sie funktionieren als Ganzes.&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/s8/jj/5z/s8jj5zbegovtmxkg8ydhezx2mfw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NoVerify ist sowohl eine Bibliothek als auch eine Bin√§rdatei (Linter). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere Schecks hei√üen </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vklints</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sie stellen fest, dass PhpStorm und Open Source NoVerify nicht angezeigt werden - wichtige Fehler, die nicht f√ºr den allgemeinen Gebrauch geeignet sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was ist vklints?</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úberpr√ºfen der Besonderheiten der Verwendung bestimmter Funktionen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Klassen und sogar globaler Variablen, die nicht unseren Konventionen entsprechen. Dies kann aus verschiedenen Gr√ºnden, die im Styleguide beschrieben sind, nicht an bestimmten Orten verwendet werden. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zus√§tzliche Stilpr√ºfungen.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sie entsprechen nicht dem, was in der PHP-Community akzeptiert wird, sind in der PHP-Standardempfehlung nicht beschrieben oder widersprechen ihr sogar, aber f√ºr uns ist es der Standard. Es macht keinen Sinn, sie zu Open Source hinzuzuf√ºgen, da Sie ihnen nicht folgen m√∂chten. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Strenge Vergleichsanforderungen f√ºr einige Typen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Zum Beispiel haben wir eine Pr√ºfung, bei der Zeichenfolgen mit einem Vergleichsoperator verglichen werden m√ºssen </font></font><code>===</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Insbesondere muss ein Flag zum strikten Vergleich von Funktionen √ºbergeben werden, um Zeichenfolgen zu vergleichen. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verd√§chtige Array-Schl√ºssel.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein weiterer interessanter Fehler: Manchmal k√∂nnen Entwickler beim Festschreiben Tastenkombinationen dr√ºcken, bevor sie die Datei speichern. </font><font style="vertical-align: inherit;">Diese Zeichen verbleiben manchmal in einer Zeichenfolge oder in einem Code. </font><font style="vertical-align: inherit;">Einmal befand sich im Schl√ºssel des Arrays der russische Buchstabe ‚ÄûY‚Äú. </font><font style="vertical-align: inherit;">H√∂chstwahrscheinlich hat der Entwickler im russischen Layout STRG-S gedr√ºckt, die Datei gespeichert und festgeschrieben. </font><font style="vertical-align: inherit;">Manchmal finden wir solche Schl√ºssel in Arrays, aber neue Fehler werden nicht mehr √ºbertragen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dynamische Regeln sind ein einfacherer NoVerify-Erweiterungsmechanismus, der in PHP beschrieben wird. </font><font style="vertical-align: inherit;">Dazu wurde ein separater Artikel geschrieben: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie man NoVerify Schecks hinzuf√ºgt, ohne eine einzige Zeile Go-Code zu schreiben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So funktioniert NoVerify</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um PHP zu analysieren, ben√∂tigen Sie einen </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parser</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wir k√∂nnen den PHP-Parser in PHP nicht verwenden: Er ist langsam, von Go aus kann er nur √ºber einen Wrapper in C verwendet werden. Daher verwenden wir den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parser</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in Go. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Parser hat mehrere Probleme. </font><font style="vertical-align: inherit;">Leider kann er nur mit UTF-8 arbeiten und wir m√ºssen zwischen UTF-8 und </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nicht UTF-8 unterscheiden</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Neben UTF-8 ist Windows-1251 h√§ufig in russischen PHP-Projekten enthalten. </font><font style="vertical-align: inherit;">Wir haben auch solche Dateien. </font><font style="vertical-align: inherit;">Woran erkennen wir sie?&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Datei </font></font><code>encodings.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">listet alle Pfade auf, in denen sich die Dateien mit UTF-8 befinden. </font><font style="vertical-align: inherit;">Wenn wir auf eine Datei au√üerhalb dieser Pfade sto√üen, </font><font style="vertical-align: inherit;">streamen </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wir</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im laufenden Betrieb per Streaming-Stream zu UTF-8 (ohne vorher zu konvertieren).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c47/ace/5aa/c47ace5aa12a572a201925c6be5e522a.jpg"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analyse und Analyse</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In wenigen Schritten abgeschlossen. </font><font style="vertical-align: inherit;">Zum einen </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">laden</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wir </font><strong><font style="vertical-align: inherit;">Metadaten von phpstorm-stubs</font></strong><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dies sind Daten, die wie PHP-Code aussehen, aber niemals ausgef√ºhrt werden und die Arten von Ein- / Ausg√§ngen von Standardfunktionen beschreiben. </font><font style="vertical-align: inherit;">Die phpStorm-Metadaten haben eine n√ºtzliche </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Override-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Direktive f√ºr den Linter </font><font style="vertical-align: inherit;">... Sie k√∂nnen beispielsweise beschreiben, dass wir ein Array vom Typ akzeptieren </font></font><code>T[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und den Typ zur√ºckgeben </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(n√ºtzlich f√ºr Funktionen </font></font><code>array_pop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c62/a79/6a6/c62a796a6fc623a27e92633d80de56c2.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Phpstorm-stubs wird zuerst geladen. </font><font style="vertical-align: inherit;">Wir verwenden Metadaten als anf√§ngliche Typinformationen - die Grundlage. </font><font style="vertical-align: inherit;">Diese Grundlage wird vom Linter absorbiert und wir beginnen mit der Analyse der Quellen. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir laden den aktuellen Master</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vor der Absorption. </font><font style="vertical-align: inherit;">Wir √ºberpr√ºfen den Code in zwei Modi:</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lokale √Ñnderungen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : In Bezug auf die Grundlinie finden wir neue Fehler im Code;</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir geben den Bereich der Revisionen an</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : die erste und die letzte Revision, und zwischen ihnen ist alles inklusive - dies ist der neue Code und alles, was ‚Äûvorher‚Äú alt ist.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes folgt die Analysephase.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3e4/d05/03b/3e4d0503b0d2932b765ba30c6d8ef698.jpg"></div><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AST-Analyse</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wir haben jetzt Metadaten, Typinformationen. </font><font style="vertical-align: inherit;">Wir nehmen die gesamte PHP-Quelle, analysieren und analysieren direkt √ºber dem AST - wir haben im Moment keine Zwischendarstellung. </font><font style="vertical-align: inherit;">Das Analysieren eines unformatierten AST ist nicht sehr praktisch, insbesondere wenn Sie von den darin enthaltenen Bibliotheken und Datentypen abh√§ngen.&nbsp;</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/43c/864/84c/43c86484c14609526fb5db5228bb7f67.jpg"></div><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Analyseergebnisse werden im Cache gespeichert</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es wird in der Reanalyse verwendet, die viel schneller ist. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berichte und Filterung</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dann generieren wir zweimal </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berichte oder Warnungen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Zuerst finden wir Warnungen f√ºr die alte Version des Codes (vor der Baseline), dann f√ºr die neue. Berichte werden nach Vergleich gefiltert (diff) - wir suchen nach Warnungen, die in der neuen Version des Codes enthalten sind, und geben sie an den Benutzer weiter. In einigen statischen Analyseger√§ten wird dies als "Basismodus" bezeichnet.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b0c/469/a6d/b0c469a6d2d66eb821b38a37fdd4b828.jpg"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Doppelcode-Analyse (im Diff-Modus) ist sehr langsam. </font><font style="vertical-align: inherit;">Aber wir k√∂nnen es uns leisten - NoVerify ist immer noch Dutzende Male schneller als andere PHP-Linker. </font><font style="vertical-align: inherit;">Gleichzeitig verf√ºgt es √ºber eine Reserve f√ºr zus√§tzliche Beschleunigung von mindestens 30 Prozent. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie analysieren wir Dateien? </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In PHP k√∂nnen Sie eine Funktion aufrufen, bevor sie definiert wird. Sie m√ºssen die Informationen zu dieser Funktion kennen, bevor Sie sie analysieren k√∂nnen. </font><font style="vertical-align: inherit;">Daher gehen wir zuerst die gesamte Datei in AST durch, indexieren, identifizieren die Typen aller Funktionen, registrieren die Klassen und analysieren sie erst dann.&nbsp;</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a6/5f2/844/9a65f2844b9ba3cf78e8b4dee2616430.jpg"></div><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Analyse ist der zweite Durchgang durch die Datei</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Die meisten Interpreten und Compiler arbeiten auch mit zwei Durchg√§ngen und mehr. </font><font style="vertical-align: inherit;">Um die Datei nicht ein zweites Mal zu "scannen", m√ºssen Sie vor der Verwendung Deklarationen haben, wie beispielsweise in C.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Typinferenz</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Interessanteste ist, dass hier am h√§ufigsten Fehler auftreten. </font><font style="vertical-align: inherit;">Es entspricht immer noch nicht der Korrektheit des PHP-Typsystems, das formal schwer zu definieren ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie sieht das Modell aus?</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8ae/8ec/ca9/8ae8ecca980c79343d149b8b1f15bb15.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semantisches Modell (Demo). </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arten von Typen:</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erwartet</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wird das, was wir in den Kommentaren beschreiben. Wir erwarten einige Typen im Programm, aber dies bedeutet nicht, dass sie wirklich darin verwendet werden.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tats√§chlich</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - echte, die im Programm sind. </font><font style="vertical-align: inherit;">Wenn wir beispielsweise etwas eine Nummer zuweisen, ist es offensichtlich, dass </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder </font></font><code>float</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(wenn dies eine Gleitkommazahl ist) tats√§chliche Typen sind.&nbsp;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tats√§chliche Typen scheinen "st√§rker" zu sein - sie sind real, wahr. </font><font style="vertical-align: inherit;">Aber manchmal k√∂nnen wir einen Typ nur durch Annotation erhalten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anmerkungen (in erwarteten Typen) k√∂nnen in zwei Kategorien unterteilt werden: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vertrauen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Misstrauen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Zum Beispiel geh√∂ren phpstorm-stubs zur ersten Kategorie. </font><font style="vertical-align: inherit;">Sie gelten als moderiert (ohne Fehler), bevor wir sie verwenden. </font><font style="vertical-align: inherit;">Unzuverl√§ssige sind diejenigen, die andere Entwickler schreiben, weil sie m√∂glicherweise Fehler aufweisen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tats√§chliche Typen k√∂nnen auch in mehrere Teile unterteilt werden: Werte, Zusicherungen, Pr√§dikate und Typhinweise, wodurch die Funktionen von PHP 7 erweitert werden. Es gibt jedoch ein Problem, das durch Typhinweise nicht gel√∂st werden kann.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erwartet gegen Ist</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angenommen, eine Klasse </font></font><code>Foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hat einen Erben. Aus der Nachkommenklasse k√∂nnen wir Methoden aufrufen, die nicht in Foo enthalten sind, da der Nachkomme das √ºbergeordnete Element erweitert. Aber wenn wir das Erbe bekommen </font></font><code>Foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von </font></font><code>new static()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dieser Anmerkung des R√ºckgabetypen (aus </font></font><code>self</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), dann wird ein Problem auftreten. Wir k√∂nnen diese Methode aufrufen, aber die IDE fordert Sie nicht dazu auf - Sie m√ºssen angeben </font></font><code>static()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dies ist eine sp√§te </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">statische Bindung in PHP</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , wenn der </font></font><code>Foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klassenvererb </font><font style="vertical-align: inherit;">nicht zur√ºckkehren kann </font><font style="vertical-align: inherit;">.&nbsp;</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> </span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@return</span> static */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">newStatic</span>(<span class="hljs-params"></span>) : <span class="hljs-title">self</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">static</span>();<font></font>
    }<font></font>
}<font></font>
<span class="hljs-comment">// actual = Foo</span>
<span class="hljs-comment">// expected = static</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir schreiben </font></font><code>new static()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kann nicht nur die Klasse zur√ºckkehren </font></font><code>new Foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wenn beispielsweise eine </font></font><code>Foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klasse geerbt wird </font></font><code>bar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kann dies der Fall sein </font></font><code>new bar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dementsprechend ben√∂tigen wir mindestens zwei Typinformationen. </font><font style="vertical-align: inherit;">Keiner von ihnen ist redundant - beide werden ben√∂tigt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher ist der tats√§chliche Typ hier </font></font><code>self</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- f√ºr den PHP-Interpreter. </font><font style="vertical-align: inherit;">Aber damit die IDE und die Linters funktionieren, brauchen wir </font></font><code>static</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wenn wir diesen Code aus dem Kontext der Erbenklasse aufrufen, m√ºssen wir die Information kennen, dass dies nicht dieselbe Basisklasse ist und mehr Methoden hat.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> </span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@return</span> static */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">newStatic</span>(<span class="hljs-params"></span>) : <span class="hljs-title">self</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">static</span>();<font></font>
    }<font></font>
}<font></font>
<span class="hljs-comment">// actual -  PHP </span>
<span class="hljs-comment">// expected -   IDE/</span></code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipp Hinweis</font></font></h3><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Statische Typisierung und Typhinweis sind nicht dasselbe.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie haben vielleicht geh√∂rt, dass Sie nur an den Grenzen von Funktionen √ºberpr√ºfen k√∂nnen. </font><font style="vertical-align: inherit;">An den R√§ndern √ºberpr√ºfen wir die Ein- und Ausg√§nge, wobei die Eingabe die Funktionsargumente sind. </font><font style="vertical-align: inherit;">Innerhalb der Funktion k√∂nnen Sie jeden Unsinn machen: Weisen Sie einen </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wert zu </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, obwohl Sie beschrieben haben, was es ist </font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Sie k√∂nnen sich beschweren, dass Sie die von Ihnen deklarierten Typen verletzen, aber f√ºr PHP gibt es </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">keinen Fehler</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .&nbsp;</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">T $foo</span>) </span>{<font></font>
        $foo = <span class="hljs-number">10</span>; <span class="hljs-comment">//  int</span>
        <span class="hljs-keyword">return</span> $foo;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Beispiel ist schwieriger - wir kehren zur√ºck </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">Zu Beginn der Funktion haben wir festgestellt, dass </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dies der Fall ist </font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und es gibt keine Informationen √ºber die R√ºckgabe.&nbsp;</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">T $foo</span>) </span>{<font></font>
    $foo = <span class="hljs-number">10</span>; <span class="hljs-comment">//  int</span>
    <span class="hljs-keyword">return</span> $foo;<font></font>
}<font></font>
<span class="hljs-comment">// ? 1. f -&gt; int</span>
<span class="hljs-comment">// ? 2. f -&gt; T|int</span>
<span class="hljs-comment">// ? 3. f -&gt; T</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Welcher Typ ist richtig? </font><font style="vertical-align: inherit;">Die ersten beiden werden wir den Unterschied zwischen ihnen analysieren. </font><font style="vertical-align: inherit;">PhpStorm und Linter geben die zweite Option aus. </font><font style="vertical-align: inherit;">Trotz der Tatsache, dass es immer zur√ºckkehrt </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, wird der Typ abgeleitet </font></font><code>T|int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- die "Vereinigung" der Typen. </font><font style="vertical-align: inherit;">Dies ist ein Typ, dem beide Werte zugewiesen werden k√∂nnen: Zuerst hatten wir Informationen √ºber den Typ T, dann haben wir sie zugewiesen </font></font><code>10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sodass der Typ der Variablen </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit diesen beiden Typen kompatibel sein muss.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anmerkungen</font></font></h3><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kommentare und Anmerkungen k√∂nnen l√ºgen.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im folgenden Beispiel haben wir geschrieben, dass wir eine Zahl, aber eine Zeichenfolge zur√ºckgeben. </font><font style="vertical-align: inherit;">Wenn der Linter nur auf der Ebene von Anmerkungen und Typhinweisen funktioniert, wird davon ausgegangen, dass er immer zur√ºckkehrt </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Tats√§chliche Typen helfen jedoch nur dabei, sich davon zu l√∂sen: Hier ist der erwartete Typ der folgende </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und der tats√§chliche Typ eine Zeichenfolge. </font><font style="vertical-align: inherit;">Linter wei√ü, dass die Zeichenfolge zur√ºckgegeben wird, und warnt Sie m√∂glicherweise, dass Sie die R√ºckgabe versprochen haben </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Diese Trennung ist uns wichtig.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-comment">/** <span class="hljs-doctag">@return</span> int */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"I lied!"</span>; }</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vererbung von Anmerkungen. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hier meine ich, dass eine Klasse, die eine Art Schnittstelle implementiert, eine Methode hat. </font><font style="vertical-align: inherit;">Die Methode hat gute Kommentare, Dokumentation, Typen - es wird ben√∂tigt, um die Schnittstelle zu implementieren. </font><font style="vertical-align: inherit;">Es gibt jedoch keine Kommentare in der Implementierung: Es gibt nur </font></font><code>@inheritdoc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder gar nichts.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IFoo</span> </span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@return</span> int */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>)</span>;<font></font>
}<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fooer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IFoo</span> </span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@inheritdoc</span> */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"10"</span>; }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was gibt diese Methode zur√ºck? Es scheint, dass das, was in der - Schnittstelle beschrieben wird, zur√ºckgegeben wird </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aber tats√§chlich eine Zeichenfolge. Das ist nicht gut: PHP ist egal, aber Konvergenz ist uns wichtig. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt zwei M√∂glichkeiten, diesen Code zu reparieren. Das Offensichtliche ist, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zur√ºckzukehren</font></font></strong><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Aber vielleicht m√ºssen Sie einen anderen Typ zur√ºckgeben. Was zu tun ist? Schreiben Sie, dass wir </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">den String zur√ºckgeben</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In diesem Fall sind explizite Typinformationen sowohl f√ºr die IDE als auch f√ºr den Linter erforderlich, um den Code korrekt zu analysieren.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IFoo</span> </span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@return</span> int */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>)</span>;<font></font>
}<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fooer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IFoo</span> </span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@return</span> string */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"10"</span>; }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Informationen w√ºrden √ºberhaupt nicht ben√∂tigt, wenn Leute Kommentare schreiben w√ºrden, nicht </font></font><code>@inheritdoc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">PhpStorm muss nicht verstehen, welche Typen Sie haben. </font><font style="vertical-align: inherit;">Wenn die Typen jedoch nicht korrekt beschrieben werden, liegt ein Problem vor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PhpStorm und der Linter haben eine Reihe von disjunkten Fehlern, wenn wir dieselben Dateien f√ºr Metadaten (Typen) verwenden. </font><font style="vertical-align: inherit;">Wenn wir alles, was wir brauchen, in phpstorm-stubs aus dem JetBrains-Repository reparieren, wird die IDE h√∂chstwahrscheinlich kaputt gehen. </font><font style="vertical-align: inherit;">Wenn Sie standardm√§√üig alles </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">belassen,</font></a><font style="vertical-align: inherit;"> funktioniert </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
bei uns </font><font style="vertical-align: inherit;">nicht alles richtig </font><font style="vertical-align: inherit;">. Daher haben wir eine kleine Gabel -&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VKCOM / phpstorm-stubs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Es wurden einige Patches hinzugef√ºgt, um etwas zu beheben, das nicht passt. </font><font style="vertical-align: inherit;">Ich kann es f√ºr PhpStorm nicht empfehlen, aber es ist notwendig, damit der Linter funktioniert.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open Source</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Noverify ist ein Open Source-Projekt. Es ist auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub ver√∂ffentlicht</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kurze Anweisungen "Wenn etwas schief gelaufen ist." </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn etwas kaputt ist oder nicht startet.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die falsche Reaktion besteht darin, NoVerify erneut zu senden und zu entfernen. Die richtige Reaktion: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://github.com/login%3Freturn_to%3D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ein Ticket</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf GitHub </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://github.com/login%3Freturn_to%3D"><font style="vertical-align: inherit;">ausstellen</font></a><font style="vertical-align: inherit;"> und √ºber Ihr Problem sprechen. H√∂chstwahrscheinlich wird es in 1-2 Tagen behoben sein. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ihnen fehlt eine Funktion.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Falsche Reaktion: Entfernen Sie NoVerify und schreiben Sie Ihren eigenen Linter (obwohl das Schreiben Ihres eigenen Linter immer cool ist). Die richtige Reaktion: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://github.com/login%3Freturn_to%3D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um ein Ticket</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf GitHub </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://github.com/login%3Freturn_to%3D"><font style="vertical-align: inherit;">auszustellen</font></a><font style="vertical-align: inherit;"> und vielleicht werden wir eine neue Funktion hinzuf√ºgen. Es ist komplizierter mit Funktionen als mit Fehlern - es entsteht eine Diskussion, und jede Person hat eine andere Vision von der Implementierung im Team. Aber am Ende werden sie noch umgesetzt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie an der Entwicklung des Projekts interessiert sind oder nur √ºber statische Analysen sprechen m√∂chten, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">besuchen Sie</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unseren Chatraum - </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">noverify_linter</font></a><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<blockquote>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  PHP-</a>,   ,  ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">    </a>,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PHP Russia</a>.<br>
 <br>
     ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a>.       ,    ,     .         telegram- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">@PHPRussiaConfChannel</a>.   ,  . <br>
</blockquote></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de487260/">https://habr.com/ru/post/de487260/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de487246/index.html">Die Tensor-Zertifizierungsstelle kann die privaten Schl√ºssel des Kunden gef√§hrden</a></li>
<li><a href="../de487248/index.html">Ein bisschen mehr √ºber unsachgem√§√üe Tests</a></li>
<li><a href="../de487250/index.html">Verz√∂gerte Alpha-Mischung</a></li>
<li><a href="../de487254/index.html">Verwendung von CCTV-Kameras nicht nur zur √úberwachung von Eindringlingen</a></li>
<li><a href="../de487256/index.html">Verbrenne und kehre aus der Asche oder den Menschen in Phoenix zur√ºck</a></li>
<li><a href="../de487262/index.html">Offene Konferenz PHP Russia Online</a></li>
<li><a href="../de487266/index.html">GitLab 12.7 wurde mit Parent-Child-Pipelines und der Beta-Version g√§ngiger Job-Handler f√ºr Windows ver√∂ffentlicht</a></li>
<li><a href="../de487270/index.html">Perowskite k√∂nnen die Lebensdauer von Gadget-Bildschirmen verl√§ngern</a></li>
<li><a href="../de487272/index.html">Lesezeichen - das Z√§hlen ist beendet</a></li>
<li><a href="../de487274/index.html">Wie f√ºhre ich eine Code√ºberpr√ºfung durch?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>