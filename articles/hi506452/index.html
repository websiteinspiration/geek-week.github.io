<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯЩПЁЯП╗ ЁЯХ┤ЁЯП╝ ЁЯМ┐ ESNI рдХреЗ рд╕рд╛рде рдЕрдкрдиреА рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд╕рд╛рдЗрдЯ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХреИрд╕реЗ рдХрд░реЗрдВ ЁЯСм ЁЯСйЁЯП╛тАНЁЯдЭтАНЁЯСиЁЯП┐ ЁЯЪ╢ЁЯП╗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╣рд╛рдп Habr, рдореЗрд░рд╛ рдирд╛рдо рдЗрд▓рд┐рдпрд╛ рд╣реИ, рдореИрдВ Exness рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдЯреАрдо рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реВрдВред рд╣рдо рдмреБрдирд┐рдпрд╛рджреА рдЕрд╡рд╕рдВрд░рдЪрдирд╛ рдШрдЯрдХреЛрдВ рдХреЛ рд╡рд┐рдХрд╕рд┐рдд рдФрд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рд╣рдорд╛рд░реЗ рдЙрддреНрдкрд╛рдж...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ESNI рдХреЗ рд╕рд╛рде рдЕрдкрдиреА рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд╕рд╛рдЗрдЯ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХреИрд╕реЗ рдХрд░реЗрдВ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/exness/blog/506452/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рд╛рдп Habr, рдореЗрд░рд╛ рдирд╛рдо рдЗрд▓рд┐рдпрд╛ рд╣реИ, рдореИрдВ Exness рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдЯреАрдо рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реВрдВред </font><font style="vertical-align: inherit;">рд╣рдо рдмреБрдирд┐рдпрд╛рджреА рдЕрд╡рд╕рдВрд░рдЪрдирд╛ рдШрдЯрдХреЛрдВ рдХреЛ рд╡рд┐рдХрд╕рд┐рдд рдФрд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рд╣рдорд╛рд░реЗ рдЙрддреНрдкрд╛рдж рд╡рд┐рдХрд╛рд╕ рдЯреАрдореЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рдореИрдВ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд╡реЗрдмрд╕рд╛рдЗрдЯреЛрдВ рдХреЗ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдореЗрдВ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб SNI (ESNI) рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рдЕрдиреБрднрд╡ рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ред</font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/3v/bq/my3vbqy87t_ep9l7wnjzsghs9oo.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рддрдХрдиреАрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдкрд░ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд╡реЗрдмрд╕рд╛рдЗрдЯ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд╕реНрддрд░ рдореЗрдВ рд╡реГрджреНрдзрд┐ рд╣реЛрдЧреА рдФрд░ рдХрдВрдкрдиреА рджреНрд╡рд╛рд░рд╛ рдЕрдкрдирд╛рдП рдЧрдП рдЖрдВрддрд░рд┐рдХ рд╕реБрд░рдХреНрд╖рд╛ рдорд╛рдирдХреЛрдВ рдХрд╛ рдЕрдиреБрдкрд╛рд▓рди рд╣реЛрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдореИрдВ рдзреНрдпрд╛рди рджреЗрдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдХрд┐ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рдорд╛рдирдХреАрдХреГрдд рдирд╣реАрдВ рд╣реИ рдФрд░ рдЕрднреА рднреА рдорд╕реМрджреЗ рдореЗрдВ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ CloudFlare рдФрд░ Mozilla рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрд╕рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреЗ рд╣реИрдВ ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд╕реМрджрд╛ 01 рдореЗрдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )ред </font><font style="vertical-align: inherit;">рдЗрд╕рдиреЗ рд╣рдореЗрдВ рдРрд╕реЗ рдкреНрд░рдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдкреНрд░реЗрд░рд┐рдд рдХрд┐рдпрд╛ред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд┐рджреНрдзрд╛рдВрдд рдХреА рдмрд┐рдЯ</font></font></h3><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдИрдПрд╕рдПрдирдЖрдИ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЯреАрдПрд▓рдПрд╕ 1.3 рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХрд╛ рдПрдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ "рдХреНрд▓рд╛рдЗрдВрдЯ рд╣реИрд▓реЛ" рдЯреАрдПрд▓рдПрд╕ рд╣реИрдВрдбрд╢реЗрдХ рд╕рдВрджреЗрд╢ рдореЗрдВ </font><i><font style="vertical-align: inherit;">рдПрд╕рдПрдирдЖрдИ</font></i><font style="vertical-align: inherit;"> рдХреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ рдЧреНрд░рд╛рд╣рдХ рд╣реИрд▓реЛ рдИрдПрд╕рдПрдирдЖрдИ рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде рдХреИрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИ (рд╕рд╛рдорд╛рдиреНрдп рдПрд╕рдПрдирдЖрдИ рдХреЗ рдмрдЬрд╛рдп, рд╣рдо рдИрдПрд╕рдПрдирдЖрдИ рджреЗрдЦрддреЗ рд╣реИрдВ): </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/74d/efd/449/74defd4491b50c470ee3b81651edfb62.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;рдИрдПрд╕рдПрдирдЖрдИ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рддреАрди рдЪреАрдЬреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбреАрдПрдирдПрд╕&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЧреНрд░рд╛рд╣рдХ рд╕рд╣реЗрдпрддрд╛</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд░реНрд╡рд░ рд╕рд╛рдЗрдб рд╕рдорд░реНрдердиред</font></font><br>
</li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбреАрдПрдирдПрд╕</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рджреЛ DNS рд░рд┐рдХреЙрд░реНрдбреНрд╕ рдХреЛ рдЬреЛрдбрд╝рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдП</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдФрд░ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TXT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (TXT рд░рд┐рдХреЙрд░реНрдб рдореЗрдВ рдПрдХ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХреБрдВрдЬреА рд╣реИ рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдЧреНрд░рд╛рд╣рдХ рдПрд╕рдПрдирдЖрдИ рдХреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ) - рдиреАрдЪреЗ рджреЗрдЦреЗрдВред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╡рд╣рд╛рдБ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DoH</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рдорд░реНрдерди </font><font style="vertical-align: inherit;">(HTTPS рдкрд░ DNS) </font><font style="vertical-align: inherit;">рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП </font><font style="vertical-align: inherit;">, рдХреНрдпреЛрдВрдХрд┐ рдЙрдкрд▓рдмреНрдз рдЧреНрд░рд╛рд╣рдХ (рдиреАрдЪреЗ рджреЗрдЦреЗрдВ) DoH рдХреЗ рдмрд┐рдирд╛ ESNI рд╕рдорд░реНрдерди рдХреЛ рд╕рдХреНрд░рд┐рдп рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдпрд╣ рддрд░реНрдХрд╕рдВрдЧрдд рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдИрдПрд╕рдПрдирдЖрдИ рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рд╣рдо рдЬрд┐рд╕ рд╕рдВрд╕рд╛рдзрди рддрдХ рдкрд╣реБрдВрдЪ рд░рд╣реЗ рд╣реИрдВ, рдЙрд╕рдХреЗ рдирд╛рдо рдХрд╛ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рд╣реИ, рдЕрд░реНрдерд╛рдд рдпреВрдбреАрдкреА рдкрд░ рдбреАрдПрдирдПрд╕ рдХреЛ рдПрдХреНрд╕реЗрд╕ рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DNSSEC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд╛ рдЙрдкрдпреЛрдЧ </font><font style="vertical-align: inherit;">рдЗрд╕ рдкрд░рд┐рджреГрд╢реНрдп рдореЗрдВ рдХреИрд╢ рдкреЙрдЗрдЬрд╝рдирд┐рдВрдЧ рд╣рдорд▓реЛрдВ рд╕реЗ рдмрдЪрд╛рддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╡рд░реНрддрдорд╛рди рдореЗрдВ, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдИ DoH рдкреНрд░рджрд╛рддрд╛ рдЙрдкрд▓рдмреНрдз рд╣реИрдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдЙрдирдореЗрдВ рд╕реЗ:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://developers.cloudflare.com/1.1.1.1/dns-over-"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CloudFlare</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenDNS</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЧреВрдЧрд▓</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CloudFlare </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдШреЛрд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (рдореЗрд░рд╛ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдЬрд╛рдВрдЪреЗрдВ (рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб SNI тЖТ рдЕрдзрд┐рдХ рдЬрд╛рдиреЗрдВ) рдХрд┐ рдЙрдирдХреЗ рд╕рд░реНрд╡рд░ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА ESNI рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреЗ рд╣реИрдВ, рдЕрд░реНрдерд╛рдд, DNS рдореЗрдВ CloudFlare рд╕рд░реНрд╡рд░ рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХрдо рд╕реЗ рдХрдо рджреЛ рд░рд┐рдХреЙрд░реНрдб рд╣реИрдВ - рдП рдФрд░ TXTред </font><font style="vertical-align: inherit;">рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рд╣рдо Google DNS (HTTPS рд╕реЗ рдЕрдзрд┐рдХ) рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╣реИрдВ:&nbsp; </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд░рд┐рдХреЙрд░реНрдб:</font></font><br>
<br>
<pre><code class="plaintext hljs">curl 'https://dns.google.com/resolve?name=www.cloudflare.com&amp;type=A' \<font></font>
-s -H 'accept: application/dns+json'<font></font>
{<font></font>
&nbsp; "Status": 0,<font></font>
&nbsp; "TC": false,<font></font>
&nbsp; "RD": true,<font></font>
&nbsp; "RA": true,<font></font>
&nbsp; "AD": true,<font></font>
&nbsp; "CD": false,<font></font>
&nbsp; "Question": [<font></font>
&nbsp; &nbsp; {<font></font>
&nbsp; &nbsp; &nbsp; "name": "www.cloudflare.com.",<font></font>
&nbsp; &nbsp; &nbsp; "type": 1<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp; ],<font></font>
&nbsp; "Answer": [<font></font>
&nbsp; &nbsp; {<font></font>
&nbsp; &nbsp; &nbsp; "name": "www.cloudflare.com.",<font></font>
&nbsp; &nbsp; &nbsp; "type": 1,<font></font>
&nbsp; &nbsp; &nbsp; "TTL": 257,<font></font>
&nbsp; &nbsp; &nbsp; "data": "104.17.210.9"<font></font>
&nbsp; &nbsp; },<font></font>
&nbsp; &nbsp; {<font></font>
&nbsp; &nbsp; &nbsp; "name": "www.cloudflare.com.",<font></font>
&nbsp; &nbsp; &nbsp; "type": 1,<font></font>
&nbsp; &nbsp; &nbsp; "TTL": 257,<font></font>
&nbsp; &nbsp; &nbsp; "data": "104.17.209.9"<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp; ]<font></font>
}<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TXT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд░рд┐рдХреЙрд░реНрдб, рдЕрдиреБрд░реЛрдз рдЯреЗрдореНрдкрд▓реЗрдЯ рджреНрд╡рд╛рд░рд╛ рдЙрддреНрдкрдиреНрди рд╣реЛрддрд╛ рд╣реИ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_esni.FQDN</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">curl 'https://dns.google.com/resolve?name=_esni.www.cloudflare.com&amp;type=TXT' \<font></font>
-s -H 'accept: application/dns+json'<font></font>
{<font></font>
&nbsp; "Status": 0,<font></font>
&nbsp; "TC": false,<font></font>
&nbsp; "RD": true,<font></font>
&nbsp; "RA": true,<font></font>
&nbsp; "AD": true,<font></font>
&nbsp; "CD": false,<font></font>
&nbsp; "Question": [<font></font>
&nbsp; &nbsp; {<font></font>
&nbsp; &nbsp; "name": "_esni.www.cloudflare.com.",<font></font>
&nbsp; &nbsp; "type": 16<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp; ],<font></font>
&nbsp; "Answer": [<font></font>
&nbsp; &nbsp; {<font></font>
&nbsp; &nbsp; "name": "_esni.www.cloudflare.com.",<font></font>
&nbsp; &nbsp; "type": 16,<font></font>
&nbsp; &nbsp; "TTL": 1799,<font></font>
&nbsp; &nbsp; "data": "\"/wEUgUKlACQAHQAg9SiAYQ9aUseUZr47HYHvF5jkt3aZ5802eAMJPhRz1QgAAhMBAQQAAAAAXtUmAAAAAABe3Q8AAAA=\""<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp; ],<font></font>
&nbsp; "Comment": "Response from 2400:cb00:2049:1::a29f:209."<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рддреЛ, DNS рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ, рд╣рдореЗрдВ DoH (рдЕрдзрд┐рдорд╛рдирддрдГ DNSSEC рдХреЗ рд╕рд╛рде) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рджреЛ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпрд╛рдБ рдЬреЛрдбрд╝рдирд╛ рдЪрд╛рд╣рд┐рдПред&nbsp;</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЧреНрд░рд╛рд╣рдХ рд╕рд╣реЗрдпрддрд╛</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдЧрд░ рд╣рдо рдмреНрд░рд╛рдЙрдЬрд╝рд░реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдлрд┐рд▓рд╣рд╛рд▓ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдорд░реНрдерди рдХреЗрд╡рд▓ рдлрд╝рд╛рдпрд░рдлрд╝реЙрдХреНрд╕ рдореЗрдВ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдлрд╝рд╛рдпрд░рдлрд╝реЙрдХреНрд╕ рдореЗрдВ ESNI рдФрд░ DoH рд╕рдорд░реНрдерди рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдореЗрдВ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╕реЗ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдП: </font><font style="vertical-align: inherit;">рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреА рдЬрд╛рдБрдЪ рдХреЗ рд▓рд┐рдП </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f06/6ef/b4c/f066efb4ce235c0abf798652123b1a13.png"><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓рд┐рдВрдХ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдмреЗрд╢рдХ, рдЯреАрдПрд▓рдПрд╕ 1.3 рдХрд╛ рдЙрдкрдпреЛрдЧ рдИрдПрд╕рдПрдирдЖрдИ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдХреНрдпреЛрдВрдХрд┐ рдИрдПрд╕рдПрдирдЖрдИ рдЯреАрдПрд▓рдПрд╕ 1.3 рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдИрдПрд╕рдПрдирдЖрдИ рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде рдмреИрдХрдПрдВрдб рдХреЗ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП, рд╣рдордиреЗ рдЧреНрд░рд╛рд╣рдХ рдХреЛ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд╛рдиреЗ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ </font><font style="vertical-align: inherit;">, рд▓реЗрдХрд┐рди рдмрд╛рдж рдореЗрдВ рдЙрд╕ рдкрд░ рдФрд░ рдЕрдзрд┐рдХред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд░реНрд╡рд░ рд╕рд╛рдЗрдб рд╕рдорд░реНрдерди</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ESNI рд╡рд░реНрддрдорд╛рди рдореЗрдВ nginx / apache рдЖрджрд┐ рдЬреИрд╕реЗ рд╡реЗрдм рд╕рд░реНрд╡рд░ рджреНрд╡рд╛рд░рд╛ рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рдУрдкрдирдПрд╕рдПрд╕рдПрд▓ / рдмреЛрд░рд┐рдВрдЧрдПрд╕рдПрд╕рдПрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЯреАрдПрд▓рдПрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рдИрдПрд╕рдПрдирдЖрдИ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд░реВрдк рд╕реЗ рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд▓рд┐рдП, рд╣рдордиреЗ рдЕрдкрдирд╛ рд╕реНрд╡рдпрдВ рдХрд╛ рдлреНрд░рдВрдЯ-рдПрдВрдб рдХрдВрдкреЛрдиреЗрдВрдЯ (ESNI рд░рд┐рд╡рд░реНрд╕ рдкреНрд░реЙрдХреНрд╕реА) рдмрдирд╛рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛, рдЬреЛ ESNI рдХреЗ рд╕рд╛рде TLS 1.3 рдХреА рд╕рдорд╛рдкреНрддрд┐ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдЧрд╛ рдФрд░ HTTP (S) рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЕрдкрд╕реНрдЯреНрд░реАрдо рдХреЗ рд▓рд┐рдП рдЕрдкрд╕реНрдЯреНрд░реАрдо рдХрд░реЗрдЧрд╛ рдЬреЛ ESNI рдХреЛ рд╕рдкреЛрд░реНрдЯ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдЖрдкрдХреЛ рдореБрдЦреНрдп рдШрдЯрдХреЛрдВ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рдмрд┐рдирд╛, рдПрдХ рдореМрдЬреВрджрд╛ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдореЗрдВ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ - рдЕрд░реНрдерд╛рдд, рд╡рд░реНрддрдорд╛рди рд╡реЗрдм-рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдЬреЛ рдХрд┐ рдПрд▓рдПрд╕рдЖрдИ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕реНрдкрд╖реНрдЯрддрд╛ рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдХ рдЖрд░реЗрдЦ рджреЗрддреЗ рд╣реИрдВ:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b30/035/725/b30035725aca99c4c0085c237a1d1a9e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореИрдВ рдзреНрдпрд╛рди рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдкреНрд░реЙрдХреНрд╕реА рдХреЛ ESNI рдХреЗ рдмрд┐рдирд╛ TLS рдХрдиреЗрдХреНрд╢рди рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдХреЗ рд╕рд╛рде рдХрд▓реНрдкрдирд╛ рдХреА рдЧрдИ рдереА, ESNI рдХреЗ рдмрд┐рдирд╛ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЕрдкрд╕реНрдЯреНрд░реАрдо рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ 1.3 рд╕реЗ рдХрдо TLS рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╕рд╛рде HTTP рдпрд╛ HTTPS рд╣реЛ рд╕рдХрддрд╛ рд╣реИ (рдпрджрд┐ рдЕрдкрд╕реНрдЯреНрд░реАрдо 1.3 рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ)ред рдпрд╣ рдбрд┐рдЬрд╝рд╛рдЗрди рдЕрдзрд┐рдХрддрдо рд▓рдЪреАрд▓рд╛рдкрди рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╣рдордиреЗ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">CloudFlare</font></a><font style="vertical-align: inherit;"> рд╕реЗ </font><b><font style="vertical-align: inherit;">рдЬрд╛рдиреЗ</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рдкрд░ ESNI рд╕рдорд░реНрдерди </font><font style="vertical-align: inherit;">рдХреЗ </font><font style="vertical-align: inherit;">рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ </font><font style="vertical-align: inherit;">рдЙрдзрд╛рд░ рд▓рд┐рдпрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред рддреБрд░рдВрдд, рдореИрдВ рдзреНрдпрд╛рди рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕реНрд╡рдпрдВ рдХрд╛рдлреА рдЧреИрд░-рддреБрдЪреНрдЫ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдорд╛рдирдХ </font><b><font style="vertical-align: inherit;">рдХреНрд░рд┐рдкреНрдЯреЛ / </font></b><b><font style="vertical-align: inherit;">tls </font></b><b><font style="vertical-align: inherit;">рдкреБрд╕реНрддрдХрд╛рд▓рдп</font></b><font style="vertical-align: inherit;"> рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдХрд╛ рдЕрд░реНрде рд╣реИ </font><font style="vertical-align: inherit;">рдФрд░ рдЗрд╕рд▓рд┐рдП </font><font style="vertical-align: inherit;">рд╡рд┐рдзрд╛рдирд╕рднрд╛ рд╕реЗ рдкрд╣рд▓реЗ </font><b><font style="vertical-align: inherit;">GOROOT</font></b><font style="vertical-align: inherit;"> "рдкреИрдЪрд┐рдВрдЧ" рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">
рдИрдПрд╕рдПрдирдЖрдИ рдХреБрдВрдЬреА рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдордиреЗ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдПрд╕реНрдиреАрдЯреВрд▓</font></a><font style="vertical-align: inherit;"> ( </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдХреНрд▓рд╛рдЙрдбрдлреНрд▓рд╛рд░реЗ</font></a><font style="vertical-align: inherit;"> рдХреЗ рджрд┐рдорд╛рдЧ рдХреА рдЙрдкрдЬ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ред рдЗрди рдХреБрдВрдЬрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ SNI рдХреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ / рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдордиреЗ рд▓рд┐рдирдХреНрд╕ (рдбреЗрдмрд┐рдпрди, рдЕрд▓реНрдкрд╛рдЗрди) рдФрд░ рдореИрдХрдУрдПрд╕ рдкрд░ 1.13 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрд┐рд▓реНрдб рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд┐рдпрд╛ред&nbsp;</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░рд┐рдЪрд╛рд▓рди рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рд╢рдмреНрдж</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ESNI рд░рд┐рд╡рд░реНрд╕ рдкреНрд░реЙрдХреНрд╕реА рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рдЖрд░рдкреАрдПрд╕, рдЕрдкрд╕реНрдЯреНрд░реАрдо рд▓реЗрдЯреЗрдВрд╕реА рдФрд░ рд░рд┐рд╕реНрдкрд╛рдВрд╕ рдХреЛрдб, рдЕрд╕рдлрд▓ / рд╕рдлрд▓ рдЯреАрдПрд▓рдПрд╕ рд╣реИрдВрдбрд╢реЗрдХ рдФрд░ рдЯреАрдПрд▓рдПрд╕ рд╣реИрдВрдбрд╢реЗрдХ рдЕрд╡рдзрд┐ред </font><font style="vertical-align: inherit;">рдкрд╣рд▓реА рдирдЬрд╝рд░ рдореЗрдВ, рдпрд╣ рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░рдирд╛ рдкрд░реНрдпрд╛рдкреНрдд рдерд╛ рдХрд┐ рдкреНрд░реЙрдХреНрд╕реА рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдХреИрд╕реЗ рд╕рдВрднрд╛рд▓рддреА рд╣реИред&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдордиреЗ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рддрдирд╛рд╡ рдкрд░реАрдХреНрд╖рдг рднреА рдХрд┐рдпрд╛ред </font><font style="vertical-align: inherit;">рдиреАрдЪреЗ рдкрд░рд┐рдгрд╛рдо:</font></font><br>
<br>
<pre><code class="plaintext hljs">wrk -t50 -c1000 -d360s 'https://esni-rev-proxy.npw:443' --timeout 15s<font></font>
Running 6m test @ https://esni-rev-proxy.npw:443<font></font>
&nbsp;&nbsp;50 threads and 1000 connections<font></font>
&nbsp;&nbsp;Thread Stats &nbsp; Avg&nbsp; &nbsp; &nbsp; Stdev &nbsp; &nbsp; Max &nbsp; +/- Stdev<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Latency &nbsp; &nbsp; 1.77s &nbsp; &nbsp; 1.21s&nbsp; &nbsp; 7.20s&nbsp; &nbsp; 65.43%<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Req/Sec&nbsp; &nbsp; 13.78&nbsp; &nbsp; &nbsp; 8.84 &nbsp; 140.00 &nbsp; &nbsp; 83.70%<font></font>
&nbsp;&nbsp;206357 requests in 6.00m, 6.08GB read<font></font>
Requests/sec:&nbsp; &nbsp; 573.07<font></font>
Transfer/sec: &nbsp; &nbsp; 17.28MB&nbsp;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдордиреЗ ESNI рд░рд┐рд╡рд░реНрд╕ рдкреНрд░реЙрдХреНрд╕реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдФрд░ рдмрд┐рдирд╛ рдпреЛрдЬрдирд╛рдУрдВ рдХреА рддреБрд▓рдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╢реБрджреНрдз рдЧреБрдгрд╡рддреНрддрд╛ рдХрд╛ рд▓реЛрдб рдкрд░реАрдХреНрд╖рдг рдХрд┐рдпрд╛ред </font><font style="vertical-align: inherit;">рдордзреНрдпрд╡рд░реНрддреА рдШрдЯрдХреЛрдВ рдореЗрдВ "рд╣рд╕реНрддрдХреНрд╖реЗрдк" рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдордиреЗ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ "рдпрд╛рддрд╛рдпрд╛рдд" рдбрд╛рд▓рд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд▓рд┐рдП, ESNI рд╕рдорд░реНрдерди рдФрд░ HTTP рдХреЗ рд╕рд╛рде рдКрдкрд░ рдХреА рдУрд░ рдмрдврд╝рдиреЗ рдХреЗ рд╕рд╛рде, рд╣рдореЗрдВ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╕реЗ рд▓рдЧрднрдЧ 550 rps рдорд┐рд▓реЗ, ESNI рд░рд┐рд╡рд░реНрд╕ рдкреНрд░реЙрдХреНрд╕реА рдХреЗ рдФрд╕рдд CPU / RAM рдХреА рдЦрдкрдд рдХреЗ рд╕рд╛рде:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">80% CPU рдЙрдкрдпреЛрдЧ (4 vCPU, 4 GB RAM рд╣реЛрд╕реНрдЯ, рд▓рд┐рдирдХреНрд╕) </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">130 рдПрдордмреА рдореЗрдо рдЖрд░рдПрд╕рдПрд╕ </font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/lx/ad/em/lxademanjtgdgtbp2zj3dtztoaa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рддреБрд▓рдирд╛ рдХреЗ рд▓рд┐рдП, рдЖрд░рдкреАрдПрд╕ рдЯреАрдПрд▓рдПрд╕ рд╕рдорд╛рдкреНрддрд┐ (HTTP рдкреНрд░реЛрдЯреЛрдХреЙрд▓) рдХреЗ рдмрд┐рдирд╛ рдПрдХ рд╣реА рдЕрдкрд╕реНрдЯреНрд░реАрдо рдирдЧрдиреЗрдХреНрд╕ рдХреЗ рд▓рд┐рдП ~ 1100:</font></font><br>
<br>
<pre><code class="plaintext hljs">wrk -t50 -c1000 -d360s 'http://lb.npw:80' тАУ-timeout 15s<font></font>
Running 6m test @ http://lb.npw:80<font></font>
&nbsp;&nbsp;50 threads and 1000 connections<font></font>
&nbsp;&nbsp;Thread Stats &nbsp; Avg&nbsp; &nbsp; &nbsp; Stdev &nbsp; &nbsp; Max &nbsp; +/- Stdev<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Latency &nbsp; &nbsp; 1.11s &nbsp; &nbsp; 2.30s &nbsp; 15.00s&nbsp; &nbsp; 90.94%<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Req/Sec&nbsp; &nbsp; 23.25 &nbsp; &nbsp; 13.55 &nbsp; 282.00 &nbsp; &nbsp; 79.25%<font></font>
&nbsp;&nbsp;393093 requests in 6.00m, 11.35GB read<font></font>
&nbsp;&nbsp;Socket errors: connect 0, read 0, write 0, timeout 9555<font></font>
&nbsp;&nbsp;Non-2xx or 3xx responses: 8111<font></font>
Requests/sec: &nbsp; 1091.62<font></font>
Transfer/sec: &nbsp; &nbsp; 32.27MB&nbsp;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЯрд╛рдЗрдордЖрдЙрдЯ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдЗрдВрдЧрд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рдХрдореА рд╣реИ (рд╣рдордиреЗ 4 рд╡реАрд╕реАрдкреАрдпреВ, 4 рдЬреАрдмреА рд░реИрдо рд╣реЛрд╕реНрдЯ, рд▓рд┐рдирдХреНрд╕) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рд╣реИ, рдФрд░ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╕рдВрднрд╛рд╡рд┐рдд рдЖрд░рдкреАрдПрд╕ рдЕрдзрд┐рдХ рд╣реИ (рд╣рдореЗрдВ рдЕрдзрд┐рдХ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдкрд░ 2700 рдЖрд░рдкреАрдПрд╕ рддрдХ рдХреА рд╕рдВрдЦреНрдпрд╛ рдорд┐рд▓реА рд╣реИ)ред </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдВрдд рдореЗрдВ, рдореИрдВ рдзреНрдпрд╛рди</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдИрдПрд╕рдПрдирдЖрдИ рддрдХрдиреАрдХ рдХрд╛рдлреА рдЖрд╢рд╛рдЬрдирдХ рд╣реИред </font><font style="vertical-align: inherit;">рдХрдИ рдФрд░ рдЦреБрд▓реЗ рдкреНрд░рд╢реНрди рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, DNS рдореЗрдВ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ ESNI рдХреБрдВрдЬреА рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдФрд░ ESNI рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЛ рдШреБрдорд╛рдиреЗ рдХреЗ рдкреНрд░рд╢реНрди - рдЗрди рдореБрджреНрджреЛрдВ рдкрд░ рд╕рдХреНрд░рд┐рдп рд░реВрдк рд╕реЗ рдЪрд░реНрдЪрд╛ рдХреА рдЬрд╛рддреА рд╣реИ, рдФрд░ рдорд╕реМрджреЗ рдХрд╛ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг (рд▓реЗрдЦрди рдХреЗ рд╕рдордп) ESNI рдкрд╣рд▓реЗ рд╕реЗ рд╣реА </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7 рд╣реИ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi506432/index.html">рдХреИрд╕реЗ рдЦрд░реЛрдВрдЪ рд╕реЗ рдПрдХ рдХрд╕реНрдЯрдо рд╡реЗрдм рдпрд╛ рдореЛрдмрд╛рдЗрд▓ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП: рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ, рдирд┐рдпрдореЛрдВ рдФрд░ рдереЛрдбрд╝рд╛ рдЦреВрди</a></li>
<li><a href="../hi506438/index.html">"рдЪреНрд╡рд╛рдЗрд╕" / "рд╕реЗрд▓реЗрдХреНрдЯ" рд╢рдмреНрджреЛрдВ рдХреЗ рдЕрдиреБрд╡рд╛рдж рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд┐рдирд╛ рдЪреЙрдЗрд╕ / рдЪреНрд╡рд╛рдЗрд╕ рдХреЗ</a></li>
<li><a href="../hi506442/index.html">рдЯрд┐рдХ рдЯрдХ</a></li>
<li><a href="../hi506444/index.html">рднрд╡рд┐рд╖реНрдп рдХреА рдЪреБрдиреМрддрд┐рдпрд╛рдВ</a></li>
<li><a href="../hi506450/index.html">рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ рдФрд░ рдЕрдзрд┐рдХреГрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд░реБрддреЛрдХрди рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдЕрдиреБрднрд╡ (рднрд╛рдЧ 1)</a></li>
<li><a href="../hi506454/index.html">рдХрд┐рд╕-рдХрд┐рд╕ рдмрд┐рдо-рдореИрдиреЗрдЬрд░ рдХреЛ 100 рд╣рдЬрд╛рд░ рдорд┐рд▓рддреЗ рд╣реИрдВ рдФрд░ рдХреИрд╕реЗ рдПрдХ рдмрдирддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi506456/index.html">рд╣рдо рдПрд╕рдбреАрдЖрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рднреБрдЧрддрд╛рди рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рд░реЗрдбрд┐рдпреЛ рд╕рд┐рдЧреНрдирд▓ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi506460/index.html">рдорд╣рд┐рд▓рд╛ рд╕реЗ рдкреБрд░реБрд╖ рдорд╕реНрддрд┐рд╖реНрдХ рдХреЗ рдЕрдВрддрд░: рдорд╣рд┐рд▓рд╛ рдХреЛрдб рдмреЗрд╣рддрд░?</a></li>
<li><a href="../hi506462/index.html">рдкреБрд╢рдкрд▓реНрд╕ рдФрд░ рдЯреИрдХрд░реНрд╕ - рдореИрдВрдиреЗ рдЬреЛ рдХреБрдЫ рднреА рдкрд╛рдпрд╛, рдЙрд╕рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд┐рдпрд╛</a></li>
<li><a href="../hi506472/index.html">рдЗрдВрдЯрд░рдиреЗрдЯ рдЙрджреНрдпрдорд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рд╕реБрд░рдХреНрд╖рд╛: рдЬрд╣рд╛рдВ рдПрдХ рдХрдВрдкрдиреА рдЦреЛрд▓рдирд╛ рдФрд░ рдЦрд╛рддрд╛ рдЦреЛрд▓рдирд╛ рд╣реИ, рд╡рд╣рд╛рдВ рдХреНрдпрд╛ рджреЗрдЦрдирд╛ рд╣реИ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>