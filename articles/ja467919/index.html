<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤¦ğŸ¾ ğŸ² ğŸ‘©ğŸ½â€ğŸ¤â€ğŸ‘¨ğŸ¿ ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒãƒƒãƒå‡¦ç†ã®å•é¡Œã¨ãã®è§£æ±ºç­–ï¼ˆãƒ‘ãƒ¼ãƒˆ2ï¼‰ ğŸ‘©â€ğŸ« ğŸ§“ğŸ¾ ğŸˆšï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã“ã‚Œã¯ã€ã€Œãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒãƒƒãƒå‡¦ç†ã®å•é¡Œã¨ãã®è§£æ±ºç­–ã€ã®ç¶šãã§ã™ã€‚æœ€åˆã®éƒ¨åˆ†ã¯ã€å•é¡Œã®æœ¬è³ªã¨ãã®è§£æ±ºç­–ã¸ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’è©³ç´°ã«èª¬æ˜ã—ã¦ã„ã‚‹ãŸã‚ã€æœ€åˆã«ç†è§£ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚ã“ã“ã§ã¯ä»–ã®æ–¹æ³•ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚
 
 ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ 
  
 Â Â Â Â -
 Â Â Â Â Â Â Â Â  
 Â Â Â Â Â Â Â Â 
 Â Â Â Â ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒãƒƒãƒå‡¦ç†ã®å•é¡Œã¨ãã®è§£æ±ºç­–ï¼ˆãƒ‘ãƒ¼ãƒˆ2ï¼‰</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/custis/blog/467919/"><img src="https://habrastorage.org/webt/ad/_6/oe/ad_6oeq50j8z5q33t5ixjrcssqs.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã¯ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€Œãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒãƒƒãƒå‡¦ç†ã®å•é¡Œã¨ãã®è§£æ±ºç­–ã€ã®</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¶šãã§ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æœ€åˆã®éƒ¨åˆ†ã¯ã€å•é¡Œã®æœ¬è³ªã¨ãã®è§£æ±ºç­–ã¸ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’è©³ç´°ã«èª¬æ˜ã—ã¦ã„ã‚‹ãŸã‚ã€æœ€åˆã«ç†è§£ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã“ã§ã¯ä»–ã®æ–¹æ³•ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚</font></font><br>
<a name="habracut"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</font></font></b><div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">-</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">-</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   DDD</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a></div></div><br>
<a name="Revision"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¿ã‚¹ã‚¯ã®æ¦‚è¦</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
äº‹å‰å®šç¾©ã•ã‚ŒãŸä¸€é€£ã®å‚åŠ è€…ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª¿æ•´ã™ã‚‹ãŸã‚ã®ãƒãƒ£ãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã¯ãƒ†ã‚­ã‚¹ãƒˆã¨ãƒ•ã‚¡ã‚¤ãƒ«ãŒå«ã¾ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€é€šå¸¸ã®ãƒãƒ£ãƒƒãƒˆã¨åŒæ§˜ã«ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯è¿”ä¿¡ãŠã‚ˆã³è»¢é€ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ¢ãƒ‡ãƒ«</font></font></b><div class="spoiler_text"><code><font color="7f0055"><b>data&nbsp;class&nbsp;</b></font><font color="3e7eff"><b>ChatMessage</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="3f7f5f">//&nbsp;nullable&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;persist</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">id</font>:&nbsp;<font color="3e7eff"><b>Long</b></font>?&nbsp;<font color="333333">=&nbsp;</font><font color="7f0055"><b>null</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="395da1">/**&nbsp;&nbsp;&nbsp;&nbsp;*/</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">author</font>:&nbsp;<font color="3e7eff"><b>UserReference</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="395da1">/**&nbsp;&nbsp;*/</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">message</font>:&nbsp;<font color="3e7eff"><b>String</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="395da1">/**&nbsp;&nbsp;&nbsp;&nbsp;*/</font><br>
&nbsp;&nbsp;<font color="3f7f5f">//&nbsp;-&nbsp;&nbsp;&nbsp;JPA+&nbsp;&nbsp;&nbsp;&nbsp;null,&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">files</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>FileReference</b></font><font color="333333">&gt;</font>?&nbsp;<font color="333333">=&nbsp;</font><font color="7f0055"><b>null</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="395da1">/**&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">replyTo</font>:&nbsp;<font color="3e7eff"><b>ChatMessage</b></font>?&nbsp;<font color="333333">=&nbsp;</font><font color="7f0055"><b>null</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="395da1">/**&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">forwardFrom</font>:&nbsp;<font color="3e7eff"><b>ChatMessage</b></font>?&nbsp;<font color="333333">=&nbsp;</font><font color="7f0055"><b>null</b></font><br>
<font color="000066">)</font></code></div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¾å­˜æ€§æ³¨å…¥ã«ã‚ˆã‚Šã€æ¬¡ã®å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã‚’å®Ÿè£…ã§ãã¾ã™ã€‚</font></font></b><div class="spoiler_text"><code><font color="7f0055"><b>interface&nbsp;</b></font><font color="3e7eff"><b>ChatMessageRepository&nbsp;</b></font><font color="000066">{</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>fun&nbsp;</b></font><font color="170591"><b>findLast</b></font><font color="000066">(</font><font color="000066"><i>n</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="000066">)</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>ChatMessage</b></font><font color="333333">&gt;</font><br>
<font color="000066">}</font><br>
<br>
<font color="7f0055"><b>data&nbsp;class&nbsp;</b></font><font color="3e7eff"><b>FileHeadRemote</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">id</font>:&nbsp;<font color="3e7eff"><b>FileReference</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">name</font>:&nbsp;<font color="3e7eff"><b>String</b></font><br>
<font color="000066">)</font><br>
<br>
<font color="7f0055"><b>interface&nbsp;</b></font><font color="3e7eff"><b>FileRemoteApi&nbsp;</b></font><font color="000066">{</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>fun&nbsp;</b></font><font color="170591"><b>getHeadById</b></font><font color="000066">(</font><font color="000066"><i>id</i></font>:&nbsp;<font color="3e7eff"><b>FileReference</b></font><font color="000066">)</font>:&nbsp;<font color="3e7eff"><b>FileHeadRemote</b></font><br>
<font color="3e7eff"><b>&nbsp;&nbsp;</b></font><font color="7f0055"><b>fun&nbsp;</b></font><font color="170591"><b>getHeadsByIds</b></font><font color="000066">(</font><font color="000066"><i>id</i></font>:&nbsp;<font color="3e7eff"><b>Set</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>FileReference</b></font><font color="333333">&gt;</font><font color="000066">)</font>:&nbsp;<font color="3e7eff"><b>Set</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>FileHeadRemote</b></font><font color="333333">&gt;</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>fun&nbsp;</b></font><font color="170591"><b>getHeadsByIds</b></font><font color="000066">(</font><font color="000066"><i>id</i></font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>FileReference</b></font><font color="333333">&gt;</font><font color="000066">)</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>FileHeadRemote</b></font><font color="333333">&gt;</font><br>
<font color="000066">}</font><br>
<br>
<font color="7f0055"><b>data&nbsp;class&nbsp;</b></font><font color="3e7eff"><b>UserRemote</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">id</font>:&nbsp;<font color="3e7eff"><b>UserReference</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">name</font>:&nbsp;<font color="3e7eff"><b>String</b></font><br>
<font color="000066">)</font><br>
<br>
<font color="7f0055"><b>interface&nbsp;</b></font><font color="3e7eff"><b>UserRemoteApi&nbsp;</b></font><font color="000066">{</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>fun&nbsp;</b></font><font color="170591"><b>getUserById</b></font><font color="000066">(</font><font color="000066"><i>id</i></font>:&nbsp;<font color="3e7eff"><b>UserReference</b></font><font color="000066">)</font>:&nbsp;<font color="3e7eff"><b>UserRemote</b></font><br>
<font color="3e7eff"><b>&nbsp;&nbsp;</b></font><font color="7f0055"><b>fun&nbsp;</b></font><font color="170591"><b>getUsersByIds</b></font><font color="000066">(</font><font color="000066"><i>id</i></font>:&nbsp;<font color="3e7eff"><b>Set</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>UserReference</b></font><font color="333333">&gt;</font><font color="000066">)</font>:&nbsp;<font color="3e7eff"><b>Set</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>UserRemote</b></font><font color="333333">&gt;</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>fun&nbsp;</b></font><font color="170591"><b>getUsersByIds</b></font><font color="000066">(</font><font color="000066"><i>id</i></font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>UserReference</b></font><font color="333333">&gt;</font><font color="000066">)</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>UserRemote</b></font><font color="333333">&gt;</font><br>
<font color="000066">}&nbsp;</font></code></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RESTã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<code><font color="7f0055"><b>interface&nbsp;</b></font><font color="3e7eff"><b>ChatRestApi&nbsp;</b></font><font color="000066">{</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>fun&nbsp;</b></font><font color="170591"><b>getLast</b></font><font color="000066">(</font><font color="000066"><i>n</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="000066">)</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>ChatMessageUI</b></font><font color="333333">&gt;</font><br>
<font color="000066">}</font></code><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã©ã“ï¼š</font></font></b><div class="spoiler_text"><code><font color="395da1">/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font><br>
<font color="7f0055"><b>data&nbsp;class&nbsp;</b></font><font color="3e7eff"><b>ReferenceUI</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="395da1">/**&nbsp;&nbsp;&nbsp;url&nbsp;*/</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">ref</font>:&nbsp;<font color="3e7eff"><b>String</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="395da1">/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">name</font>:&nbsp;<font color="3e7eff"><b>String</b></font><br>
<font color="000066">)</font><br>
<br>
<font color="7f0055"><b>data&nbsp;class&nbsp;</b></font><font color="3e7eff"><b>ChatMessageUI</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">id</font>:&nbsp;<font color="3e7eff"><b>Long</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="395da1">/**&nbsp;&nbsp;&nbsp;&nbsp;*/</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">author</font>:&nbsp;<font color="3e7eff"><b>ReferenceUI</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="395da1">/**&nbsp;&nbsp;*/</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">message</font>:&nbsp;<font color="3e7eff"><b>String</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="395da1">/**&nbsp;&nbsp;&nbsp;&nbsp;*/</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">files</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>ReferenceUI</b></font><font color="333333">&gt;,</font><br>
&nbsp;&nbsp;<font color="395da1">/**&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">replyTo</font>:&nbsp;<font color="3e7eff"><b>ChatMessageUI</b></font>?&nbsp;<font color="333333">=&nbsp;</font><font color="7f0055"><b>null</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="395da1">/**&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">forwardFrom</font>:&nbsp;<font color="3e7eff"><b>ChatMessageUI</b></font>?&nbsp;<font color="333333">=&nbsp;</font><font color="7f0055"><b>null</b></font><br>
<font color="000066">)</font><br>
</code></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‰ã®ãƒ‘ãƒ¼ãƒˆã§ã¯ã€ãƒãƒƒãƒå‡¦ç†ã‚’ä½¿ç”¨ã—ãŸã‚µãƒ¼ãƒ“ã‚¹ã®ç´ æœ´ãªå®Ÿè£…ã¨ã€ãã‚Œã‚’é«˜é€ŸåŒ–ã™ã‚‹ã„ãã¤ã‹ã®æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯éå¸¸ã«å˜ç´”ã§ã™ãŒã€ãã‚Œã‚‰ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ååˆ†ã«å„ªã‚ŒãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æä¾›ã—ã¾ã›ã‚“ã€‚</font></font><br>
<br>
<a name="Enlargement"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å¢—ã‚„ã™</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç´ æœ´ãªã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸»ãªå•é¡Œã¯ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚µã‚¤ã‚ºãŒå°ã•ã„ã“ã¨ã§ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ¼ãƒ«ã‚’ã‚ˆã‚Šå¤§ããªãƒ‘ã‚±ãƒƒãƒˆã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã™ã‚‹ã«ã¯ã€ä½•ã‚‰ã‹ã®å½¢ã§è¦æ±‚ã‚’è“„ç©ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®è¡Œã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®è“„ç©ã‚’æ„å‘³ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“</font><font style="vertical-align: inherit;">
ã€‚å®Ÿè¡Œæ™‚ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¹ãƒˆã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã®ç‰¹åˆ¥ãªå ´æ‰€ã¯ã‚ã‚Šã¾ã›ã‚“-å¾ã€…ã«å½¢æˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">
æœ€åˆã«ã€ChatMessage.toFrontModelãƒ¡ã‚½ãƒƒãƒ‰ã§ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ†é›¢ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">
ã“ã®é–¢æ•°ã¯ã€3ã¤ã®å¤–éƒ¨é–¢æ•°ã®ã¿ã«ä¾å­˜ã™ã‚‹ã“ã¨ãŒ</font><font style="vertical-align: inherit;">ã‚ã‹ã‚Š</font><font style="vertical-align: inherit;">ã¾ã™ï¼ˆæœ€åˆã®ã‚ˆã†ã«ã€ã‚¯ãƒ©ã‚¹å…¨ä½“ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚</font><font style="vertical-align: inherit;">
ã“ã®ã‚ˆã†ãªã‚„ã‚Šç›´ã—ã®å¾Œã€é–¢æ•°ã®æœ¬ä½“ãŒæ˜ç¢ºã«ãªã‚‰ãšã€å¥‘ç´„ãŒå³ã—ããªã‚Šã¾ã—ãŸï¼ˆã“ã‚Œã«ã¯é•·æ‰€ã¨çŸ­æ‰€ã®ä¸¡æ–¹ãŒã‚ã‚Šã¾ã™ï¼‰ã€‚</font></font><br>
<br>
<code><font color="4a86e8">author&nbsp;=&nbsp;</font><font color="566874">userRepository</font><font color="333333">.</font><font color="170591">getUserById</font><font color="000066">(</font><font color="566874">author</font><font color="000066">)</font><font color="333333">.</font><i><b>toFrontReference</b></i><font color="000066">()</font><font color="333333">,</font></code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code><font color="7f0055"><b>private&nbsp;fun&nbsp;</b></font><font color="3e7eff"><b>ChatMessage</b></font><font color="333333">.</font><font color="170591"><b>toFrontModel</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="000066"><i>getUser</i></font>:&nbsp;<font color="000066">(</font><font color="3e7eff"><b>UserReference</b></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="3e7eff"><b>UserRemote</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="000066"><i>getFile</i></font>:&nbsp;<font color="000066">(</font><font color="3e7eff"><b>FileReference</b></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="3e7eff"><b>FileHeadRemote</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="000066"><i>serializeMessage</i></font>:&nbsp;<font color="000066">(</font><font color="3e7eff"><b>ChatMessage</b></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="3e7eff"><b>ChatMessageUI</b></font><br>
<font color="000066">)</font>:&nbsp;<font color="3e7eff"><b>ChatMessageUI&nbsp;</b></font><font color="333333">=</font><br>
&nbsp;&nbsp;<font color="170591">ChatMessageUI</font><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">id&nbsp;=&nbsp;</font><font color="566874">id&nbsp;</font>?:&nbsp;<font color="7f0055"><b>throw&nbsp;</b></font><font color="170591">IllegalStateException</font><font color="000066">(</font><b>"</b><font color="333333"><b>$</b></font><font color="7f0055"><b>this</b></font><b>&nbsp;must&nbsp;be&nbsp;persisted"</b><font color="000066">)</font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">author&nbsp;=&nbsp;</font><font color="000066"><i>getUser</i></font><font color="000066">(</font><font color="566874">author</font><font color="000066">)</font><font color="333333">.</font><i><b>toFrontReference</b></i><font color="000066">()</font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">message&nbsp;=&nbsp;</font><font color="566874">message</font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">files&nbsp;=&nbsp;</font><font color="566874">files</font><font color="333333">?.</font><i><b>let&nbsp;</b></i><font color="000066"><b>{</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><b>it</b><font color="333333">.</font><i><b>map</b></i><font color="000066">(</font><font color="000066"><i>getFile</i></font><font color="000066">)</font><font color="333333">.</font><i><b>map&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><i><b>toFrontReference</b></i><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</b></font>?:&nbsp;<i><b>listOf</b></i><font color="000066">()</font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">forwardFrom&nbsp;=&nbsp;</font><font color="566874">forwardFrom</font><font color="333333">?.</font><i><b>let</b></i><font color="000066">(</font><font color="000066"><i>serializeMessage</i></font><font color="000066">)</font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">replyTo&nbsp;=&nbsp;</font><font color="566874">replyTo</font><font color="333333">?.</font><i><b>let</b></i><font color="000066">(</font><font color="000066"><i>serializeMessage</i></font><font color="000066">)</font><br>
<font color="000066">&nbsp;&nbsp;)</font></code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Ÿéš›ã€å¥‘ç´„ã‚’ã“ã®ã‚ˆã†ã«ç‹­ã‚ã‚‹ã“ã¨ã¯ã§ããšã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ä¾å­˜é–¢ä¿‚ã‚’æ®‹ã™ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ä¸»ãªã“ã¨ã¯ã€ä»£æ›¿ã®å®Ÿè£…ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ãã‚Œã‚‰ã«ä¸å¿…è¦ãªã‚‚ã®ã¯çµ¶å¯¾ã«ãªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
serializeMessageé–¢æ•°ã¯å†å¸°é–¢æ•°ã«ä¼¼ã¦ã„ã‚‹ãŸã‚ã€ã“ã‚Œã¯ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã§æ˜ç¤ºçš„ãªå†å¸°ã®å½¢ã§å®Ÿè¡Œã§ãã¾ã™</font><font style="vertical-align: inherit;">
ã€‚ã“ã‚Œã¾ã§ã®ã¨ã“ã‚ã€æœ€åˆã®å˜ç´”ãªå®Ÿè£…ã¨ã¾ã£ãŸãåŒã˜ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹toFrontModelãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚¹ã‚¿ãƒ–ã‚’ä½œæˆã—ã¾ã—ãŸï¼ˆ3ã¤ã®å¤–éƒ¨é–¢æ•°ã™ã¹ã¦ã®å®Ÿè£…ã¯åŒã˜ã§ã™ï¼‰ã€‚</font></font><br>
<br>
<code><font color="7f0055"><b>class&nbsp;</b></font><font color="3e7eff"><b>ChatRestController</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">messageRepository</font>:&nbsp;<font color="3e7eff"><b>ChatMessageRepository</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">userRepository</font>:&nbsp;<font color="3e7eff"><b>UserRemoteApi</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">fileRepository</font>:&nbsp;<font color="3e7eff"><b>FileRemoteApi</b></font><br>
<font color="000066">)&nbsp;</font>:&nbsp;<font color="3e7eff"><b>ChatRestApi&nbsp;</b></font><font color="000066">{</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>override&nbsp;fun&nbsp;</b></font><font color="170591"><b>getLast</b></font><font color="000066">(</font><font color="000066"><i>n</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="000066">)&nbsp;</font><font color="333333">=</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="566874">messageRepository</font><font color="333333">.</font><font color="170591">findLast</font><font color="000066">(</font><font color="000066"><i>n</i></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>map&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><i><b>toFrontModel</b></i><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font></code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code><font color="7f0055"><b>private&nbsp;fun&nbsp;</b></font><font color="3e7eff"><b>ChatMessage</b></font><font color="333333">.</font><font color="170591"><b>toFrontModel</b></font><font color="000066">()</font>:&nbsp;<font color="3e7eff"><b>ChatMessageUI&nbsp;</b></font><font color="333333">=</font><br>
&nbsp;&nbsp;<i><b>toFrontModel</b></i><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">getUser&nbsp;=&nbsp;</font><font color="566874">userRepository</font>::getUserById<font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">getFile&nbsp;=&nbsp;</font><font color="566874">fileRepository</font>::getHeadById<font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">serializeMessage&nbsp;=&nbsp;</font><font color="000066"><b>{</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><i><b>toFrontModel</b></i><font color="000066">()</font><font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;</b></font><font color="000066">)</font></code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã ã—ã€é–¢æ•°getUserã€getFileã€ãŠã‚ˆã³serializeMessageãŒåŠ¹ç‡çš„ã«æ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šã€é©åˆ‡ãªã‚µã‚¤ã‚ºï¼ˆç†è«–çš„ã«ã¯ã€ã“ã®ã‚µã‚¤ã‚ºã¯ã‚µãƒ¼ãƒ“ã‚¹ã”ã¨ã«ç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼‰ã®å¯¾å¿œã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã‹ã€ç„¡åˆ¶é™ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒè¨±å¯ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯é€šå¸¸ã€ã‚µãƒ¼ãƒ“ã‚¹ã”ã¨ã«1ã¤ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã‚’å®Ÿç¾ã™ã‚‹æœ€ã‚‚ç°¡å˜ãªæ–¹æ³•ã¯ã€å‡¦ç†ã‚’é–‹å§‹ã™ã‚‹å‰ã«å¿…è¦ãªã™ã¹ã¦ã®ã‚¯ã‚¨ãƒªã‚’ç”¨æ„ã—ã¦ãŠãã“ã¨ã§ã™ã€‚ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€toFrontModelã‚’å‘¼ã³å‡ºã™å‰ã«ã€å¿…è¦ãªã™ã¹ã¦ã®ãƒªãƒ³ã‚¯ã‚’åé›†ã—ã€ãƒãƒƒãƒå‡¦ç†ã‚’å®Ÿè¡Œã—ã¦ã€çµæœã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãŸã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è“„ç©ã—ã¦å¾ã€…ã«å®Ÿè¡Œã™ã‚‹ã‚¹ã‚­ãƒ¼ãƒ ã‚‚è©¦ã™ã“ã¨ãŒã§ãã¾ã™ã€‚ãŸã ã—ã€ã“ã®ã‚ˆã†ãªã‚¹ã‚­ãƒ¼ãƒ ã§ã¯éåŒæœŸå®Ÿè¡ŒãŒå¿…è¦ã«ãªã‚Šã¾ã™ãŒã€ã“ã“ã§ã¯åŒæœŸã‚¹ã‚­ãƒ¼ãƒ ã«ç„¦ç‚¹ã‚’å½“ã¦ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ãŸãŒã£ã¦ã€ãƒãƒƒãƒå‡¦ç†ã®ä½¿ç”¨ã‚’é–‹å§‹ã™ã‚‹ã«ã¯ã€ä½•ã‚‰ã‹ã®æ–¹æ³•ã§ã€ã§ãã‚‹é™ã‚Šå¤šãã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆã§ãã‚Œã°ã™ã¹ã¦ï¼‰ã‚’äº‹å‰ã«ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">RESTã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã«ã¤ã„ã¦è©±ã—ã¦ã„ã‚‹å ´åˆã€ã‚»ãƒƒã‚·ãƒ§ãƒ³å…¨ä½“ã§å„ã‚µãƒ¼ãƒ“ã‚¹ã®è¦æ±‚ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã™ã¹ã¦ã®é€šè©±ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–</font></font></b><div class="spoiler_text">    ,   &nbsp; ,     &nbsp;&nbsp;  &nbsp; &nbsp;&nbsp; , &nbsp;&nbsp;. &nbsp;  &nbsp; &nbsp;      &nbsp;    .<br>
<br>
  ,    ,&nbsp;â€” ,  &nbsp;   &nbsp;  .  &nbsp;    &nbsp; ,    .<br>
<br>
  &nbsp;   ,    ,   , &nbsp; .  ,     , &nbsp;      ,     &nbsp;  .  ,        .<br>
<br>
 ,   &nbsp; -  &nbsp;  &nbsp;,      &nbsp; &nbsp;&nbsp; .    &nbsp;, &nbsp;   .<br>
<br>
 &nbsp;      ,      .</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¯ã‚¨ãƒªã®å¤§ããªã‚»ãƒƒãƒˆã‚’å–å¾—ã™ã‚‹ã“ã®ã‚ˆã†ãªæ–¹æ³•ã‚’åŒºåˆ¥ã§ãã¾ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ“ã‚¸ãƒã‚¹ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚¹;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DDDã®ã‚¹ã‚¿ã‚¤ãƒ«ã®é›†è¨ˆã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ­ã‚­ã‚·ã¨äºŒé‡å‘¼ã³å‡ºã—ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¾‹ã®ã™ã¹ã¦ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br>
<a name="ReverseEngineering"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°</font></font></h4><br>
<a name="RequirementsGathering"></a><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã™ã¹ã¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
åé›†æƒ…å ±ã®åé›†ã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç”¨ã®å¤‰æ›ã«é–¢é€£ã™ã‚‹ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹ã®ã§ã€ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã—ã¦ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ã©ã®ã‚ˆã†ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ãªã‚‹ã‹ã‚’ç†è§£ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">
ã™ã¹ã¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒåé›†ã•ã‚ŒãŸã®ã§ã€å®Ÿéš›ã®ãƒãƒƒãƒå‡¦ç†ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">
allUserReqãŠã‚ˆã³allFileReqã®å ´åˆã€å¤–éƒ¨ã‚¯ã‚¨ãƒªã‚’ä½œæˆã—ã€IDã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ‘ã‚±ãƒƒãƒˆã‚µã‚¤ã‚ºã«åˆ¶é™ãŒãªã„å ´åˆã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">
åˆ¶é™ãŒã‚ã‚‹å ´åˆã€ã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">
æ®‹å¿µãªãŒã‚‰ã€Streamã¨ã¯ç•°ãªã‚Šã€Sequenceã¯ä¸¦åˆ—ãƒ‘ã‚±ãƒƒãƒˆè¦æ±‚ã«ç°¡å˜ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">
ä¸¦åˆ—ã‚¯ã‚¨ãƒªãŒæœ‰åŠ¹ã‹ã¤å¿…è¦ã§ã‚ã‚‹ã¨è€ƒãˆã‚‹å ´åˆã€ãŸã¨ãˆã°æ¬¡ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font></font><br>
<br>
<code><font color="7f0055"><b>class&nbsp;</b></font><font color="3e7eff"><b>ChatRestController</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">messageRepository</font>:&nbsp;<font color="3e7eff"><b>ChatMessageRepository</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">userRepository</font>:&nbsp;<font color="3e7eff"><b>UserRemoteApi</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">fileRepository</font>:&nbsp;<font color="3e7eff"><b>FileRemoteApi</b></font><br>
<font color="000066">)&nbsp;</font>:&nbsp;<font color="3e7eff"><b>ChatRestApi&nbsp;</b></font><font color="000066">{</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>override&nbsp;fun&nbsp;</b></font>getLast<font color="000066">(</font><font color="000066"><i>n</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="000066">)&nbsp;</font><font color="333333">=</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="566874">messageRepository</font><font color="333333">.</font><font color="170591">findLast</font><font color="000066">(</font><font color="000066"><i>n</i></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>let&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>messages&nbsp;</i></font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;forward&nbsp;&nbsp;reply</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="170591">allMessages&nbsp;</font><font color="333333">=&nbsp;</font><font color="000066"><i>messages</i></font><font color="333333">.</font><i><b>asSequence</b></i><font color="000066">()</font><font color="333333">.</font><i><b>flatMap&nbsp;</b></i><font color="000066"><b>{</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><i><b>sequenceOf</b></i><font color="000066">(</font><font color="000066"><i>it</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">forwardFrom</font><font color="333333">,&nbsp;</font><b>it</b><font color="333333">.</font><font color="566874">replyTo</font><font color="000066">)</font><font color="333333">.</font><i><b>filterNotNull</b></i><font color="000066">()</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><font color="333333">.</font><i><b>toSet</b></i><font color="000066">()</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="170591">allUserReq&nbsp;</font><font color="333333">=&nbsp;</font><font color="170591">allMessages</font><font color="333333">.</font><i><b>map&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it</b><font color="333333">.</font><font color="566874">author&nbsp;</font><font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="7f0055"><b>val&nbsp;</b></font><font color="170591">allFileReq&nbsp;</font><font color="333333">=&nbsp;</font><font color="170591">allMessages</font><font color="333333">.</font><i><b>flatMap&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">files&nbsp;</font>?:&nbsp;<i><b>listOf</b></i><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">.</font><i><b>toSet</b></i><font color="000066">()</font></code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code><font color="566874">userRepository</font><font color="333333">.</font><font color="170591">getUsersByIds</font><font color="000066">(</font><font color="170591">allMessages</font><font color="333333">.</font><i><b>map&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it</b><font color="333333">.</font><font color="566874">author&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">.</font><i><b>toSet</b></i><font color="000066">())</font><br>
&nbsp;&nbsp;<font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it</b><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}</b></font>::get<br>
<font color="566874">fileRepository</font><font color="333333">.</font><font color="170591">getHeadsByIds</font><font color="000066">(</font><font color="170591">allMessages</font><font color="333333">.</font><i><b>flatMap&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it</b><font color="333333">.</font><font color="566874">files&nbsp;</font>?:&nbsp;<i><b>listOf</b></i><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">.</font><i><b>toSet</b></i><font color="000066">())</font><br>
&nbsp;&nbsp;<font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}</b></font>::get</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code><font color="7f0055"><b>val&nbsp;</b></font><font color="170591">userApiChunkLimit&nbsp;</font><font color="333333">=&nbsp;</font><font color="333333"><b>100</b></font><br>
<font color="170591">allMessages</font><font color="333333">.</font><i><b>map&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it</b><font color="333333">.</font><font color="566874">author&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">.</font><i><b>asSequence</b></i><font color="000066">()</font><font color="333333">.</font><i><b>distinct</b></i><font color="000066">()</font><br>
&nbsp;&nbsp;<font color="333333">.</font><i><b>chunked</b></i><font color="000066">(</font><font color="170591">userApiChunkLimit</font><font color="333333">,&nbsp;</font><font color="566874">userRepository</font>::getUsersByIds<font color="000066">)</font><br>
&nbsp;&nbsp;<font color="333333">.</font><i><b>flatten</b></i><font color="000066">()</font><br>
&nbsp;&nbsp;<font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}</b></font>::get</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code><font color="170591">allMessages</font><font color="333333">.</font><i><b>map&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">author&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">.</font><font color="170591">parallelStream</font><font color="000066">()</font><font color="333333">.</font><font color="170591">distinct</font><font color="000066">()</font><br>
&nbsp;&nbsp;<font color="333333">.</font><i><b>chunked</b></i><font color="000066">(</font><font color="05314d"><b>userApiChunkLimit</b></font><font color="333333">,&nbsp;</font><font color="566874">userRepository</font>::getUsersByIds<font color="000066">)</font><br>
&nbsp;&nbsp;<font color="333333">.</font><i><b>flatten</b></i><font color="000066">()</font><br>
&nbsp;&nbsp;<font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}</b></font>::get</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½•ã‚‚å¤‰ã‚ã£ã¦ã„ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã«ã¯ã€Kotlinã®é­”æ³•ã‚’ã‚ã‚‹ç¨‹åº¦ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒå½¹ç«‹ã¡ã¾ã—ãŸã€‚</font></font><br>
<br>
<code><font color="7f0055"><b>fun&nbsp;</b></font><font color="333333">&lt;</font><font color="000066"><i>T</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>R</i></font><font color="333333">&gt;&nbsp;</font><font color="3e7eff"><b>Stream</b></font><font color="333333">&lt;</font><font color="7f0055"><b>out&nbsp;</b></font><font color="000066"><i>T</i></font><font color="333333">&gt;.</font><font color="170591"><b>chunked</b></font><font color="000066">(</font><font color="000066"><i>size</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="333333">,&nbsp;</font><font color="000066"><i>transform</i></font>:&nbsp;<font color="000066">(</font><font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="000066"><i>T</i></font><font color="333333">&gt;</font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="000066"><i>R</i></font><font color="000066">)</font>:&nbsp;<font color="3e7eff"><b>Stream</b></font><font color="333333">&lt;</font><font color="7f0055"><b>out&nbsp;</b></font><font color="000066"><i>R</i></font><font color="333333">&gt;&nbsp;=</font><br>
&nbsp;&nbsp;<i><b>batches</b></i><font color="000066">(</font><font color="7f0055"><b>this</b></font><font color="333333">,&nbsp;</font><font color="000066"><i>size</i></font><font color="000066">)</font><font color="333333">.</font><font color="170591">map</font><font color="000066">(</font><font color="000066"><i>transform</i></font><font color="000066">)</font><br>
<br>
<font color="7f0055"><b>fun&nbsp;</b></font><font color="333333">&lt;</font><font color="000066"><i>T</i></font><font color="333333">&gt;&nbsp;</font><font color="3e7eff"><b>Stream</b></font><font color="333333">&lt;</font><font color="7f0055"><b>out&nbsp;</b></font><font color="3e7eff"><b>Collection</b></font><font color="333333">&lt;</font><font color="000066"><i>T</i></font><font color="333333">&gt;&gt;.</font><font color="170591"><b>flatten</b></font><font color="000066">()</font>:&nbsp;<font color="3e7eff"><b>Stream</b></font><font color="333333">&lt;</font><font color="000066"><i>T</i></font><font color="333333">&gt;&nbsp;=</font><br>
&nbsp;&nbsp;<font color="170591">flatMap&nbsp;</font><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="170591">stream</font><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font><br>
<br>
<font color="7f0055"><b>fun&nbsp;</b></font><font color="333333">&lt;</font><font color="000066"><i>T</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>K</i></font><font color="333333">&gt;&nbsp;</font><font color="3e7eff"><b>Stream</b></font><font color="333333">&lt;</font><font color="000066"><i>T</i></font><font color="333333">&gt;.</font><font color="170591"><b>associateBy</b></font><font color="000066">(</font><font color="000066"><i>keySelector</i></font>:&nbsp;<font color="000066">(</font><font color="000066"><i>T</i></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="000066"><i>K</i></font><font color="000066">)</font>:&nbsp;<font color="3e7eff"><b>Map</b></font><font color="333333">&lt;</font><font color="000066"><i>K</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>T</i></font><font color="333333">&gt;&nbsp;=</font><br>
&nbsp;&nbsp;<font color="170591">collect</font><font color="000066">(</font><font color="3e7eff"><b>Collectors</b></font><font color="333333">.</font><font color="170591">toMap</font><font color="000066">(</font><font color="000066"><i>keySelector</i></font><font color="333333">,&nbsp;</font><font color="000066"><b>{&nbsp;</b></font><b>it&nbsp;</b><font color="000066"><b>}</b></font><font color="000066">))</font></code><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»Šã§ã¯ã€ã™ã¹ã¦ã‚’ä¸€ç·’ã«åé›†ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font></b><div class="spoiler_text"><code><font color="7f0055"><b>override&nbsp;fun&nbsp;</b></font><font color="170591"><b>getLast</b></font><font color="000066">(</font><font color="000066"><i>n</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="000066">)&nbsp;</font><font color="333333">=</font><br>
&nbsp;&nbsp;<font color="566874">messageRepository</font><font color="333333">.</font><font color="170591">findLast</font><font color="000066">(</font><font color="000066"><i>n</i></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>let&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>messages&nbsp;</i></font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;forward&nbsp;&nbsp;reply</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="170591">allMessages&nbsp;</font><font color="333333">=&nbsp;</font><font color="000066"><i>messages</i></font><font color="333333">.</font><i><b>asSequence</b></i><font color="000066">()</font><font color="333333">.</font><i><b>flatMap&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>message&nbsp;</i></font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><i><b>sequenceOf</b></i><font color="000066">(</font><font color="000066"><i>message</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>message</i></font><font color="333333">.</font><font color="566874">forwardFrom</font><font color="333333">,&nbsp;</font><font color="000066"><i>message</i></font><font color="333333">.</font><font color="566874">replyTo</font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>filterNotNull</b></i><font color="000066">()</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><font color="333333">.</font><i><b>toSet</b></i><font color="000066">()</font><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><i>messages</i></font><font color="333333">.</font><i><b>map</b></i><font color="000066">(</font><font color="170591">ValueHolder</font><font color="333333">&lt;</font><font color="000066">(</font><font color="3e7eff"><b>ChatMessage</b></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="3e7eff"><b>ChatMessageUI</b></font><font color="333333">&gt;</font><font color="000066">()</font><font color="333333">.</font><i><b>apply&nbsp;</b></i><font color="000066"><b>{</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="566874">value&nbsp;</font><font color="333333">=&nbsp;</font><i><b>memoize&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>message</i></font>:&nbsp;<font color="3e7eff"><b>ChatMessage&nbsp;</b></font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066"><i>message</i></font><font color="333333">.</font><i><b>toFrontModel</b></i><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">getUser&nbsp;=&nbsp;</font><font color="3e7eff"><b>allMessages</b></font><font color="333333">.</font><i><b>map&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it</b><font color="333333">.</font><font color="566874">author&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">.</font><font color="170591">parallelStream</font><font color="000066">()</font><font color="333333">.</font><font color="170591">distinct</font><font color="000066">()</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>chunked</b></i><font color="000066">(</font><font color="05314d"><b>userApiChunkLimit</b></font><font color="333333">,&nbsp;</font><font color="566874">userRepository</font>::getUsersByIds<font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>flatten</b></i><font color="000066">()</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it</b><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}</b></font>::get<font color="333333">.</font><i><b>orThrow&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="170591">IllegalArgumentException</font><font color="000066">(</font><b>"User&nbsp;</b><font color="333333"><b>$</b></font><b>it"</b><font color="000066">)&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">getFile&nbsp;=&nbsp;</font><font color="566874">fileRepository</font><font color="333333">.</font><font color="170591">getHeadsByIds</font><font color="000066">(</font><font color="3e7eff"><b>allMessages</b></font><font color="333333">.</font><i><b>flatMap&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">files&nbsp;</font>?:&nbsp;<i><b>listOf</b></i><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">.</font><i><b>toSet</b></i><font color="000066">())</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}</b></font>::get<font color="333333">.</font><i><b>orThrow&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="170591">IllegalArgumentException</font><font color="000066">(</font><b>"File&nbsp;</b><font color="333333"><b>$</b></font><b>it"</b><font color="000066">)&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">serializeMessage&nbsp;=&nbsp;</font><font color="566874">value</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</b></font><font color="333333">.</font><font color="566874">value</font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font></code></div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èª¬æ˜ã¨ç°¡ç•¥åŒ–</font></font></b><div class="spoiler_text">,    &nbsp;,&nbsp;â€”   memoize.  &nbsp;,   serializeMessage       &nbsp;     (- reply &nbsp;forward). ,    toFrontModel      (&nbsp;     , &nbsp;&nbsp;&nbsp;).       serializeMessage.  , , :<br>
<br>
<code><font color="7f0055"><b>fun&nbsp;</b></font><font color="333333">&lt;</font><font color="000066"><i>A</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>R</i></font><font color="333333">&gt;&nbsp;</font><font color="170591"><b>memoize</b></font><font color="000066">(</font><font color="000066"><i>func</i></font>:&nbsp;<font color="000066">(</font><font color="000066"><i>A</i></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="000066"><i>R</i></font><font color="000066">)&nbsp;</font><font color="333333">=&nbsp;</font><font color="000066"><i>func&nbsp;</i></font><font color="7f0055"><b>as?&nbsp;</b></font><font color="3e7eff"><b>Memoize2&nbsp;</b></font>?:&nbsp;<font color="170591">Memoize2</font><font color="000066">(</font><font color="000066"><i>func</i></font><font color="000066">)</font><br>
<font color="7f0055"><b>class&nbsp;</b></font><font color="3e7eff"><b>Memoize2</b></font><font color="333333">&lt;</font><font color="000066"><i>A</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>R</i></font><font color="333333">&gt;</font><font color="000066">(</font><font color="7f0055"><b>val&nbsp;</b></font><font color="566874">func</font>:&nbsp;<font color="000066">(</font><font color="000066"><i>A</i></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="000066"><i>R</i></font><font color="000066">)&nbsp;</font>:&nbsp;<font color="000066">(</font><font color="000066"><i>A</i></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="000066"><i>R</i></font><font color="333333">,&nbsp;</font>java<font color="333333">.</font>util<font color="333333">.</font>function<font color="333333">.</font><font color="3e7eff"><b>Function</b></font><font color="333333">&lt;</font><font color="000066"><i>A</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>R</i></font><font color="333333">&gt;&nbsp;</font><font color="000066">{</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">cache&nbsp;</font><font color="333333">=&nbsp;</font><i><b>hashMapOf</b></i><font color="333333">&lt;</font><font color="000066"><i>A</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>R</i></font><font color="333333">&gt;</font><font color="000066">()</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>override&nbsp;fun&nbsp;</b></font><font color="170591"><b>invoke</b></font><font color="000066">(</font><font color="000066"><i>p1</i></font>:&nbsp;<font color="000066"><i>A</i></font><font color="000066">)&nbsp;</font><font color="333333">=&nbsp;</font><font color="566874">cache</font><font color="333333">.</font><i><b>getOrPut</b></i><font color="000066">(</font><font color="000066"><i>p1</i></font><font color="333333">,&nbsp;</font><font color="000066"><b>{&nbsp;</b></font><font color="566874">func</font><font color="000066">(</font><font color="000066"><i>p1</i></font><font color="000066">)&nbsp;</font><font color="000066"><b>}</b></font><font color="000066">)</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>override&nbsp;fun&nbsp;</b></font><font color="170591"><b>apply</b></font><font color="000066">(</font><font color="000066"><i>t</i></font>:&nbsp;<font color="000066"><i>A</i></font><font color="000066">)</font>:&nbsp;<font color="000066"><i>R&nbsp;</i></font><font color="333333">=&nbsp;</font><font color="170591">invoke</font><font color="000066">(</font><font color="000066"><i>t</i></font><font color="000066">)</font><br>
<font color="000066">}</font></code><br>
<br>
      serializeMessage, &nbsp;  &nbsp;     .         ,       .       ValueHolder,     &nbsp; (    - ,  AtomicReference).     ,   :<br>
<br>
<code><font color="7f0055"><b>inline&nbsp;fun&nbsp;</b></font><font color="333333">&lt;</font><font color="000066"><i>A</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>R</i></font><font color="333333">&gt;&nbsp;</font><font color="170591"><b>recursiveMemoize</b></font><font color="000066">(</font><font color="7f0055"><b>crossinline&nbsp;</b></font><font color="000066"><i>func</i></font>:&nbsp;<font color="000066">(</font><font color="000066"><i>A</i></font><font color="333333">,&nbsp;</font><font color="000066">(</font><font color="000066"><i>A</i></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="000066"><i>R</i></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="000066"><i>R</i></font><font color="000066">)</font>:&nbsp;<font color="000066">(</font><font color="000066"><i>A</i></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="000066"><i>R&nbsp;</i></font><font color="333333">=</font><br>
&nbsp;&nbsp;<font color="170591">ValueHolder</font><font color="333333">&lt;</font><font color="000066">(</font><font color="000066"><i>A</i></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="000066"><i>R</i></font><font color="333333">&gt;</font><font color="000066">()</font><font color="333333">.</font><i><b>apply&nbsp;</b></i><font color="000066"><b>{</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="566874">value&nbsp;</font><font color="333333">=&nbsp;</font><i><b>memoize&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>a&nbsp;</i></font><font color="000066"><b>-&gt;&nbsp;</b></font><font color="3e7eff"><b>func</b></font><font color="000066">(</font><font color="000066"><i>a</i></font><font color="333333">,&nbsp;</font><font color="566874">value</font><font color="000066">)&nbsp;</font><font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;}</b></font><font color="333333">.</font><font color="566874">value</font></code><br>
<br>
       &nbsp; &nbsp;â€” ,    :-)<br>
<br>
     :<br>
<br>
<code><font color="7f0055"><b>override&nbsp;fun&nbsp;</b></font><font color="170591"><b>getLast</b></font><font color="000066">(</font><font color="000066"><i>n</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="000066">)&nbsp;</font><font color="333333">=</font><br>
&nbsp;&nbsp;<font color="566874">messageRepository</font><font color="333333">.</font><font color="170591">findLast</font><font color="000066">(</font><font color="000066"><i>n</i></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>let&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>messages&nbsp;</i></font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;forward&nbsp;&nbsp;reply</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="170591">allMessages&nbsp;</font><font color="333333">=&nbsp;</font><font color="000066"><i>messages</i></font><font color="333333">.</font><i><b>asSequence</b></i><font color="000066">()</font><font color="333333">.</font><i><b>flatMap&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>message&nbsp;</i></font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><i><b>sequenceOf</b></i><font color="000066">(</font><font color="000066"><i>message</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>message</i></font><font color="333333">.</font><font color="566874">forwardFrom</font><font color="333333">,&nbsp;</font><font color="000066"><i>message</i></font><font color="333333">.</font><font color="566874">replyTo</font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>filterNotNull</b></i><font color="000066">()</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><font color="333333">.</font><i><b>toSet</b></i><font color="000066">()</font><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="170591">getUser&nbsp;</font><font color="333333">=&nbsp;</font><font color="170591">allMessages</font><font color="333333">.</font><i><b>map&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it</b><font color="333333">.</font><font color="566874">author&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">.</font><font color="170591">parallelStream</font><font color="000066">()</font><font color="333333">.</font><font color="170591">distinct</font><font color="000066">()</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>chunked</b></i><font color="000066">(</font><font color="05314d"><b>userApiChunkLimit</b></font><font color="333333">,&nbsp;</font><font color="566874">userRepository</font>::getUsersByIds<font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>flatten</b></i><font color="000066">()</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}</b></font>::get<font color="333333">.</font><i><b>orThrow&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="170591">IllegalArgumentException</font><font color="000066">(</font><b>"User&nbsp;</b><font color="333333"><b>$</b></font><font color="000066"><i>it</i></font><b>"</b><font color="000066">)&nbsp;</font><font color="000066"><b>}</b></font><br>
<br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="170591">getFile&nbsp;</font><font color="333333">=&nbsp;</font><font color="566874">fileRepository</font><font color="333333">.</font><font color="170591">getHeadsByIds</font><font color="000066">(</font><font color="170591">allMessages</font><font color="333333">.</font><i><b>flatMap&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it</b><font color="333333">.</font><font color="566874">files&nbsp;</font>?:&nbsp;<i><b>listOf</b></i><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">.</font><i><b>toSet</b></i><font color="000066">())</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}</b></font>::get<font color="333333">.</font><i><b>orThrow&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="170591">IllegalArgumentException</font><font color="000066">(</font><b>"File&nbsp;</b><font color="333333"><b>$</b></font><b>it"</b><font color="000066">)&nbsp;</font><font color="000066"><b>}</b></font><br>
<br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066"><i>messages</i></font><font color="333333">.</font><i><b>map</b></i><font color="000066">(</font><i><b>recursiveMemoize&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>message</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>memoized</i></font>:&nbsp;<font color="000066">(</font><font color="3e7eff"><b>ChatMessage</b></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="3e7eff"><b>ChatMessageUI&nbsp;</b></font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066"><i>message</i></font><font color="333333">.</font><i><b>toFrontModel</b></i><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">getUser&nbsp;=&nbsp;</font><font color="170591">getUser</font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">getFile&nbsp;=&nbsp;</font><font color="170591">getFile</font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">serializeMessage&nbsp;=&nbsp;</font><font color="000066"><i>memoized</i></font><br>
<font color="000066"><i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><font color="000066">)</font></code><br>
<br>
   orThrow,   :<br>
<br>
<code><font color="395da1">/**&nbsp;&nbsp;&nbsp;</font><font color="3d3d3d"><i><b>[exception]</b></i></font><font color="395da1">,&nbsp;&nbsp;&nbsp;&nbsp;null&nbsp;*/</font><br>
<font color="7f0055"><b>fun&nbsp;</b></font><font color="333333">&lt;</font><font color="000066"><i>P</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>R</i></font><font color="333333">&gt;&nbsp;</font><font color="000066">((</font><font color="000066"><i>P</i></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="000066"><i>R</i></font>?<font color="000066">)</font><font color="333333">.</font><font color="170591"><b>orThrow</b></font><font color="000066">(</font><font color="000066"><i>exception</i></font>:&nbsp;<font color="000066">(</font><font color="000066"><i>P</i></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="3e7eff"><b>Exception</b></font><font color="000066">)</font>:&nbsp;<font color="000066">(</font><font color="000066"><i>P</i></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="000066"><i>R&nbsp;</i></font><font color="333333">=</font><br>
&nbsp;&nbsp;<font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>p&nbsp;</i></font><font color="000066"><b>-&gt;&nbsp;</b></font><font color="170591">invoke</font><font color="000066">(</font><font color="000066"><i>p</i></font><font color="000066">)</font><font color="333333">.</font><i><b>let&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it&nbsp;</b>?:&nbsp;<font color="7f0055"><b>throw&nbsp;</b></font><font color="3e7eff"><b>exception</b></font><font color="000066">(</font><font color="000066"><i>p</i></font><font color="000066">)&nbsp;</font><font color="000066"><b>}&nbsp;}</b></font></code><br>
<br>
 &nbsp;    &nbsp; id &nbsp;   ,   &nbsp;- -.<br>
<br>
   ,    getLast  &nbsp; 300&nbsp;.     ,      &nbsp; &nbsp;  (    ). ,   -&nbsp;â€” 500&nbsp;, &nbsp;     250&nbsp;.</div></div><br>
<a name="Parallelism"></a><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸¦åˆ—å‡¦ç†</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã—ã‹ã—ã€æ¬¡ã«é€²ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">userRepositoryã¨fileRepositoryã®å‘¼ã³å‡ºã—ã¯å®Œå…¨ã«ç‹¬ç«‹ã—ã¦ãŠã‚Šã€ç†è«–çš„ã«ã¯200ãƒŸãƒªç§’ã«è¿‘ã¥ãã‚ˆã†ã«ç°¡å˜ã«ä¸¦åˆ—åŒ–ã§ãã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŸã¨ãˆã°ã€joiné–¢æ•°ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font></font></b><div class="spoiler_text"><code><font color="7f0055"><b>override&nbsp;fun&nbsp;</b></font><font color="170591"><b>getLast</b></font><font color="000066">(</font><font color="000066"><i>n</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="000066">)&nbsp;</font><font color="333333">=</font><br>
&nbsp;&nbsp;<font color="566874">messageRepository</font><font color="333333">.</font><font color="170591">findLast</font><font color="000066">(</font><font color="000066"><i>n</i></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>let&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>messages&nbsp;</i></font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;forward&nbsp;&nbsp;reply</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="170591">allMessages&nbsp;</font><font color="333333">=&nbsp;</font><font color="000066"><i>messages</i></font><font color="333333">.</font><i><b>asSequence</b></i><font color="000066">()</font><font color="333333">.</font><i><b>flatMap&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>message&nbsp;</i></font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><i><b>sequenceOf</b></i><font color="000066">(</font><font color="000066"><i>message</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>message</i></font><font color="333333">.</font><font color="566874">forwardFrom</font><font color="333333">,&nbsp;</font><font color="000066"><i>message</i></font><font color="333333">.</font><font color="566874">replyTo</font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>filterNotNull</b></i><font color="000066">()</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><font color="333333">.</font><i><b>toSet</b></i><font color="000066">()</font><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i><b>join</b></i><font color="000066">(</font><font color="000066"><b>{</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="3e7eff"><b>allMessages</b></font><font color="333333">.</font><i><b>map&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it</b><font color="333333">.</font><font color="566874">author&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">.</font><font color="170591">parallelStream</font><font color="000066">()</font><font color="333333">.</font><font color="170591">distinct</font><font color="000066">()</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>chunked</b></i><font color="000066">(</font><font color="05314d"><b>userApiChunkLimit</b></font><font color="333333">,&nbsp;</font><font color="566874">userRepository</font>::getUsersByIds<font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>flatten</b></i><font color="000066">()</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</b></font><font color="333333">,&nbsp;</font><font color="000066"><b>{</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="566874">fileRepository</font><font color="333333">.</font><font color="170591">getHeadsByIds</font><font color="000066">(</font><font color="3e7eff"><b>allMessages</b></font><font color="333333">.</font><i><b>flatMap&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">files&nbsp;</font>?:&nbsp;<i><b>listOf</b></i><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">.</font><i><b>toSet</b></i><font color="000066">())</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it</b><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</b></font><font color="000066">)</font><font color="333333">.</font><i><b>let&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066">(</font><font color="170591">users</font><font color="333333">,&nbsp;</font><font color="170591">files</font><font color="000066">)&nbsp;</font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066"><i>messages</i></font><font color="333333">.</font><i><b>map</b></i><font color="000066">(</font><i><b>recursiveMemoize&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>message</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>memoized</i></font>:&nbsp;<font color="000066">(</font><font color="3e7eff"><b>ChatMessage</b></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="3e7eff"><b>ChatMessageUI&nbsp;</b></font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066"><i>message</i></font><font color="333333">.</font><i><b>toFrontModel</b></i><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">getUser&nbsp;=&nbsp;</font><font color="170591">users</font>::get<font color="333333">.</font><i><b>orThrow&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="170591">IllegalArgumentException</font><font color="000066">(</font><b>"User&nbsp;</b><font color="333333"><b>$</b></font><b>it"</b><font color="000066">)&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">getFile&nbsp;=&nbsp;</font><font color="170591">files</font>::get<font color="333333">.</font><i><b>orThrow&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="170591">IllegalArgumentException</font><font color="000066">(</font><b>"File&nbsp;</b><font color="333333"><b>$</b></font><font color="000066"><i>it</i></font><b>"</b><font color="000066">)&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">serializeMessage&nbsp;=&nbsp;</font><font color="000066"><i>memoized</i></font><br>
<font color="000066"><i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;}</b></font></code></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Ÿç¿’ã§ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€å®Ÿè¡Œã«ã¯ç´„200ãƒŸãƒªç§’ã‹ã‹ã‚Šã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°ã®å¢—åŠ ã«ä¼´ã£ã¦æ™‚é–“ãŒé•·ããªã‚‰ãªã„ã“ã¨ãŒéå¸¸ã«é‡è¦ã§ã™ã€‚</font></font><br>
<br>
<a name="Problems"></a><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å•é¡Œ</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä¸€èˆ¬ã«ã€ã‚³ãƒ¼ãƒ‰ã¯ã‚‚ã¡ã‚ã‚“ã€æœ€åˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚ˆã‚Šã‚‚èª­ã¿ã«ãããªã‚Šã¾ã™ãŒã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³è‡ªä½“ï¼ˆtoFrontModelã®å®Ÿè£…ï¼‰ã¯ã‚ã¾ã‚Šå¤‰æ›´ã•ã‚Œã¦ãŠã‚‰ãšã€å®Œå…¨ã«èª­ã¿ã‚„ã™ã„ã¾ã¾ã§ã™ã€‚å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®ç‹¡çŒ¾ãªä»•äº‹ã®è«–ç†å…¨ä½“ãŒ1ã‹æ‰€ã«ã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®æ¬ ç‚¹ã¯ã€æŠ½è±¡åŒ–ãŒé€²ã‚“ã§ã„ã‚‹ã“ã¨ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
toFrontModelã«å¤‰æ›´ã‚’åŠ ãˆã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€ã»ã¼ç¢ºå®Ÿã«</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Liskovä»£å…¥åŸç†ã«</font><font style="vertical-align: inherit;">é•åã™ã‚‹getLasté–¢æ•°ã«å¤‰æ›´ã‚’åŠ ãˆã‚‹å¿…è¦ãŒã‚ã‚Š</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã¨ãˆã°ã€ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ã§æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¾©å·åŒ–ã—ã€è¿”ä¿¡ã¨è»¢é€ï¼ˆè¿”ä¿¡/è»¢é€ï¼‰ã€ã¾ãŸã¯ç¬¬1ãƒ¬ãƒ™ãƒ«ã®å¿œç­”ã¨è»¢é€ã§ã®ã¿å¾©å·åŒ–ã™ã‚‹ã“ã¨ã«åŒæ„ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã“ã®å ´åˆã€toFrontModelã‚³ãƒ¼ãƒ‰ã«å¤‰æ›´ã‚’åŠ ãˆãŸå¾Œã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’åé›†ã™ã‚‹ãŸã‚ã«ã‚³ãƒ¼ãƒ‰ã§å¯¾å¿œã™ã‚‹ä¿®æ­£ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€ä¿®æ­£ã¯ç°¡å˜ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">
ã“ã“ã§ã¯ã€å‰ã®å•é¡Œã¨å¯†æ¥ã«é–¢é€£ã™ã‚‹åˆ¥ã®å•é¡Œã«ã‚¹ãƒ ãƒ¼ã‚ºã«å–ã‚Šçµ„ã‚“ã§ã„ã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰å…¨ä½“ã®æ­£ã—ã„å‹•ä½œã¯ã€ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®ãƒªãƒ†ãƒ©ã‚·ãƒ¼ã«ä¾å­˜ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ä¸€éƒ¨ã®è¤‡é›‘ãªã‚±ãƒ¼ã‚¹ã§ã¯ã€ã‚¯ã‚¨ãƒªã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãŒæ­£ã—ããªã„ãŸã‚ã€ã‚³ãƒ¼ãƒ‰ãŒæ­£ç¢ºã«æ©Ÿèƒ½ã—ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚ˆã†ãªãƒˆãƒªãƒƒã‚­ãƒ¼ãªçŠ¶æ³ã™ã¹ã¦ã‚’ã‚«ãƒãƒ¼ã™ã‚‹å˜ä½“ãƒ†ã‚¹ãƒˆã‚’ã™ãã«æ€ã„ä»˜ãã“ã¨ãŒã§ãã‚‹ã¨ã„ã†ä¿è¨¼ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br>
<code><font color="566874">fileRepository</font><font color="333333">.</font><font color="170591">getHeadsByIds</font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="3e7eff"><b>allMessages</b></font><font color="333333">.</font><i><b>flatMap&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">files&nbsp;</font>?:&nbsp;<i><b>listOf</b></i><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">.</font><i><b>toSet</b></i><font color="000066">()</font><br>
<font color="000066">)</font></code><br>
<br><font style="vertical-align: inherit;"></font><br>
 <br>
<a name="Summary1"></a><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµè«–ã®</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ãƒ¡ãƒªãƒƒãƒˆï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¡ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ç°¡å˜ã«åˆ†é›¢ã§ãã‚‹ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’äº‹å‰ã«å—ã‘å–ã‚‹æ˜ç™½ãªæ–¹æ³•ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨ã«ã‹ãå—ä¿¡ã•ã‚Œã‚‹ã¯ãšã ã£ãŸãƒ‡ãƒ¼ã‚¿ã®ã¿ã®ä½¿ç”¨ã«é–¢é€£ã™ã‚‹ãƒ¡ãƒ¢ãƒªã¨æ™‚é–“ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒã»ã¼å®Œå…¨ã«ãªããªã‚‹ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤–éƒ¨ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚µã‚¤ã‚ºã«é–¢ä¿‚ãªãã€ç†è«–çš„ã«ã¯äºˆæ¸¬å¯èƒ½ãªæ™‚é–“ã‚’æ‹…å½“ã™ã‚‹ã€å„ªã‚ŒãŸã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã¨ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ§‹ç¯‰ã™ã‚‹æ©Ÿèƒ½ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒã‚¤ãƒŠã‚¹ï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒãƒƒãƒå‡¦ç†è‡ªä½“ã®ãŸã‚ã®ã‹ãªã‚Šè¤‡é›‘ãªã‚³ãƒ¼ãƒ‰ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ—¢å­˜ã®å®Ÿè£…ã§ã®è¦æ±‚ã®åˆ†æã«å¤§ããè²¬ä»»ã‚’æŒã¤ä½œæ¥­ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŠ½è±¡åŒ–ã®æµã‚Œã€ãã—ã¦çµæœã¨ã—ã¦ã€å®Ÿè£…ã®å¤‰æ›´ã«é–¢é€£ã—ãŸã‚¹ã‚­ãƒ¼ãƒ å…¨ä½“ã®è„†å¼±æ€§ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚µãƒãƒ¼ãƒˆã®é›£ã—ã•ï¼šã‚¯ã‚¨ãƒªäºˆæ¸¬ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚¨ãƒ©ãƒ¼ã¯ã€ãƒ¡ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰ã®ã‚¨ãƒ©ãƒ¼ã¨åŒºåˆ¥ã™ã‚‹ã®ãŒå›°é›£ã§ã™ã€‚</font><font style="vertical-align: inherit;">ç†æƒ³çš„ã«ã¯ã€2å€ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€æœ¬ç•ªç’°å¢ƒã§ã‚¨ãƒ©ãƒ¼ã®ã‚ã‚‹æ‰‹ç¶šãã¯2å€å›°é›£ã«ãªã‚Šã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã™ã‚‹éš›ã®SOLIDã®åŸå‰‡ã¸ã®æº–æ‹ ï¼šã‚³ãƒ¼ãƒ‰ã¯ã€ãƒãƒƒãƒå‡¦ç†ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å¼•ãé›¢ã™ã‚ˆã†ã«æº–å‚™ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚‰ã®åŸå‰‡ã‚’å°å…¥ã™ã‚‹ã ã‘ã§ã„ãã¤ã‹ã®åˆ©ç‚¹ãŒã‚‚ãŸã‚‰ã•ã‚Œã‚‹ãŸã‚ã€ã“ã®ãƒã‚¤ãƒŠã‚¹ã¯æœ€ã‚‚é‡è¦ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®æ–¹æ³•ã¯ã€ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚’è¡Œã‚ãªãã¦ã‚‚ä½¿ç”¨ã§ãã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</font><font style="vertical-align: inherit;">getLastã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã«ã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®äº‹å‰è¨ˆç®—ï¼ˆä»¥ä¸‹ã€ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒï¼‰ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãŒä¾å­˜ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®å ´åˆã€getLastï¼ˆãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ï¼‰ã®å®Ÿè£…ã‚’è¦‹ã‚‹ã“ã¨ã§ã“ã‚Œã‚’å®Ÿç¾ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã¯å•é¡ŒãŒç™ºç”Ÿã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®2ã¤ã®ã‚³ãƒ¼ãƒ‰ã®ç·¨é›†ã¯å¸¸ã«åŒæœŸçš„ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã€ã©ã®ã‚ˆã†ãªæ–¹æ³•ã§ã‚‚ã“ã‚Œã‚’ä¿è¨¼ã™ã‚‹ã“ã¨ã¯ä¸å¯èƒ½ã§ã™ï¼ˆhashCodeã¨ç­‰ã—ã„ã“ã¨ã‚’æ€ã„å‡ºã—ã¦ãã ã•ã„ã€‚ã¾ã£ãŸãåŒã˜ã‚‚ã®ãŒã‚ã‚Šã¾ã™ï¼‰ã€‚</font><font style="vertical-align: inherit;">ç§ãŒãŠè¦‹ã›ã—ãŸã„æ¬¡ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ã€ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ï¼ˆã¾ãŸã¯å°‘ãªãã¨ã‚‚è»½æ¸›ã™ã‚‹ï¼‰ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<a name="BusinessHeuristics"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ“ã‚¸ãƒã‚¹ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚¹</font></font></h4><br>
<a name="ManagingContractProblem1"></a><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¥‘ç´„ã®å•é¡Œã®è§£æ±º</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æ­£ç¢ºãªå¥‘ç´„ã§ã¯ãªãã€ã—ãŸãŒã£ã¦æ­£ç¢ºãªä¸€é€£ã®è¦æ±‚ã§ã¯ãªãã€ãŠãŠã‚ˆãã®å¥‘ç´„ã§é‹ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã©ã†ãªã‚Šã¾ã™ã‹ï¼Ÿ</font><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€æ­£ç¢ºãªã‚»ãƒƒãƒˆã‚’å³å¯†ã«å«ã¿ã€å¯¾è±¡é ˜åŸŸã®ç‰¹æ€§ã«åŸºã¥ã„ã¦ã€ãŠãŠã‚ˆãã®ã‚»ãƒƒãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ãŸãŒã£ã¦ã€getLastã«å¯¾ã™ã‚‹ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ä¾å­˜é–¢ä¿‚ã®ä»£ã‚ã‚Šã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã£ã¦æŒ‡ç¤ºã•ã‚Œã‚‹ã„ãã¤ã‹ã®ä¸€èˆ¬çš„ãªã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«å¯¾ã™ã‚‹ä¸¡æ–¹ã®ä¾å­˜é–¢ä¿‚ã‚’ç¢ºç«‹ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ä¸»ãªå›°é›£ã¯ã€ã“ã®ä¸€èˆ¬çš„ãªå¥‘ç´„ã‚’ä½•ã‚‰ã‹ã®å½¢ã§ã‚³ãƒ¼ãƒ‰ã®å½¢ã§å…·ä½“åŒ–ã™ã‚‹ã“ã¨ã§ã™ã€‚</font></font><br>
<br>
<a name="UsefulRestrictions"></a><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¾¿åˆ©ãªåˆ¶ç´„ã‚’è¦‹ã¤ã‘ã‚‹</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä¾‹ã‚’ä½¿ç”¨ã—ã¦ã“ã‚Œã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ãŸã¡ã®å ´åˆã€æ¬¡ã®ãƒ“ã‚¸ãƒã‚¹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒãƒ£ãƒƒãƒˆå‚åŠ è€…ã®ãƒªã‚¹ãƒˆã¯äº‹å‰å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒãƒ£ãƒƒãƒˆã¯äº’ã„ã«å®Œå…¨ã«åˆ†é›¢ã•ã‚Œã¦ã„ã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿”ä¿¡/è»¢é€ãƒã‚§ãƒ¼ãƒ³ã®ãƒã‚¹ãƒˆã¯å°ã•ã„ï¼ˆã€œ2-3ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆã®åˆ¶é™ã‹ã‚‰ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å›é¿ã—ãŸã‚Šã€ãã“ã«ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’èª¿ã¹ãŸã‚Šã€å›ºæœ‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠã—ãŸã‚Šã€ãã‚Œã‚‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¦æ±‚ã‚’ã—ãŸã‚Šã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚äº‹å‰å®šç¾©ã•ã‚ŒãŸãƒªã‚¹ãƒˆã‚’ã‚¯ã‚¨ãƒªã™ã‚‹ã ã‘ã§ã™ã€‚ã‚ãªãŸãŒã“ã®å£°æ˜ã«åŒæ„ã—ãŸå ´åˆã€ç§ã¯ã‚ãªãŸã‚’æ•ã¾ãˆã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Ÿéš›ã€ã™ã¹ã¦ãŒãã‚Œã»ã©å˜ç´”ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒªã‚¹ãƒˆã¯äº‹å‰å®šç¾©ã§ãã¾ã™ãŒã€æ•°åƒã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå­˜åœ¨ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ãã®ã‚ˆã†ãªã“ã¨ã‚’æ˜ç¢ºã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ç§ãŸã¡ã®å ´åˆã€ãƒãƒ£ãƒƒãƒˆã®å‚åŠ è€…ã¯é€šå¸¸2ã€œ3äººã§ã™ãŒã€ãã‚Œä»¥ä¸Šã«ãªã‚‹ã“ã¨ã¯ã‚ã£ãŸã«ã‚ã‚Šã¾ã›ã‚“ã€‚ã—ãŸãŒã£ã¦ã€ãã‚Œã‚‰ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡ã™ã‚‹ã“ã¨ã¯å®Œå…¨ã«è¨±å®¹ã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã‚‰ã«ã€ãƒãƒ£ãƒƒãƒˆãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¹ãƒˆãŒäº‹å‰ã«æ±ºå®šã•ã‚Œã¦ã„ã‚‹ãŒã€ã“ã®æƒ…å ±ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã«ãªã„å ´åˆï¼ˆéå¸¸ã«å¯èƒ½æ€§ãŒé«˜ã„ï¼‰ã€ãã®ã‚ˆã†ãªæƒ…å ±ã‹ã‚‰ã¯æ„å‘³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ãƒãƒ£ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆã«å¯¾ã—ã¦è¿½åŠ ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¡Œã„ã¾ã™ãŒã€ãã‚Œã§ã‚‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ãƒãƒ£ãƒƒãƒˆã®æ¥ç¶šã«é–¢ã™ã‚‹æƒ…å ±ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹ã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚ç§ãŸã¡ã®å ´åˆã€æ¥ç¶šã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™ã«ã‚ˆã£ã¦æ±ºå®šã•ã‚Œã‚‹ãŸã‚ã€ã“ã‚Œã¯ãã†ã§ã™ã€‚æ¬¡ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦æ¬¡ã®ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã¾ã™</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€‚ãƒãƒ£ãƒƒãƒˆIDã‚’æ¸¡ã—ã¦ã„ãªã„ã“ã¨ã¯ã€ã“ã“ã§ã¯æ„å¤–ã«æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã‚Œã¯ã€ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãŒä¹±é›‘ã«ãªã‚‰ãªã„ã‚ˆã†ã«æ„å›³çš„ã«è¡Œã£ãŸã‚‚ã®ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸€è¦‹ã™ã‚‹ã¨ã€2ç•ªç›®ã®åˆ¶é™ã‹ã‚‰ä½•ã‚‚ç¶šãã¾ã›ã‚“ã€‚ã„ãšã‚Œã«ã—ã¦ã‚‚ã€ç§ã¯ã¾ã å½¼ã‹ã‚‰ä½•ã‹å½¹ã«ç«‹ã¤ã‚‚ã®ã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã§ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã§ã«3ç•ªç›®ã®åˆ¶é™ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ä¼šè©±ã®ä¿å­˜ã¨å—ä¿¡ã®æ–¹æ³•ã«å¤§ããªå½±éŸ¿ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ RESTã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚„ãƒãƒƒãƒå‡¦ç†ã¨ã¯é–¢ä¿‚ãŒãªã„ãŸã‚ã€ã“ã®ãƒˆãƒ”ãƒƒã‚¯ã®é–‹ç™ºã¯é–‹å§‹ã—ã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã©ã†ã™ã‚‹ã‹1ã¤ã®ç°¡å˜ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã™ã¹ã¦ã®ãƒãƒ£ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªã‚¹ãƒˆã‚’å–å¾—ã—ãŸã„ã®ã§ã™ãŒã€‚ APIã®æ¡ä»¶ã§ã¯ã€ãƒœãƒ‡ã‚£ã¯ãªããƒ•ã‚¡ã‚¤ãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã¿ãŒå¿…è¦ãªãŸã‚ã€ã“ã‚Œã¯å‘¼ã³å‡ºã—å…ƒã«ã¨ã£ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’å¤§é‡ã«æ¶ˆè²»ã™ã‚‹å±é™ºãªã‚¿ã‚¹ã‚¯ã®ã‚ˆã†ã«ã¯è¦‹ãˆã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸€æ–¹ã€ã™ã¹ã¦ã®ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡ã™ã‚‹ã®ã§ã¯ãªãã€æœ€å¾Œã®Nã®ã¿ã‚’å—ä¿¡ã™ã‚‹ã“ã¨ã‚’è¦šãˆã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã¯ãƒ•ã‚¡ã‚¤ãƒ«ãŒã¾ã£ãŸãå«ã¾ã‚Œã¦ã„ãªã„ã“ã¨ãŒç°¡å˜ã«ã‚ã‹ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ™®éçš„ãªç­”ãˆã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãã‚Œã¯ã™ã¹ã¦ã€ãƒ“ã‚¸ãƒã‚¹ã®è©³ç´°ã¨ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«ä¾å­˜ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">è£½å“ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹ã¨ãã«ã€1ã¤ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚’ä½¿ç”¨ã™ã‚‹ã¨å•é¡ŒãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ç•°ãªã‚‹æ–¹æ³•ã§æ©Ÿèƒ½ã‚’æ“ä½œã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ‡ãƒ¢ã‚„ãƒ—ãƒªã‚»ãƒ¼ãƒ«ã‚¹ã®å ´åˆã€ã“ã‚Œã¯è‰¯ã„é¸æŠè‚¢ã§ã™ãŒã€ä»Šã¯æ­£ç›´ãªåˆ¶ä½œã‚µãƒ¼ãƒ“ã‚¹ã‚’æ›¸ã“ã†ã¨ã—ã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ãŸãŒã£ã¦ã€æ‚²ã—ã„ã‹ãªã€ã“ã“ã§ã®æ“ä½œã¨çµ±è¨ˆåé›†ã®çµæœã®ã¿ã«åŸºã¥ã„ã¦ï¼ˆã¾ãŸã¯å°‚é–€å®¶ã®è©•ä¾¡å¾Œã«ï¼‰ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ“ã‚¸ãƒã‚¹ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ã ä½•ã‚‰ã‹ã®æ–¹æ³•ã§ãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©ç”¨ã—ãŸã„ã®ã§ã€çµ±è¨ˆãŒä»¥ä¸‹ã‚’ç¤ºã—ãŸã¨ã—ã¾ã™ã€‚</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€èˆ¬çš„ãªä¼šè©±ã¯ã€1ã¤ä»¥ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§å§‹ã¾ã‚Šã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ãªã„è¿”ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç¶šãã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã»ã¨ã‚“ã©ã™ã¹ã¦ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€é€šå¸¸ã®ä¼šè©±ã§é€ã‚‰ã‚Œã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1å›ã®ãƒãƒ£ãƒƒãƒˆå†…ã§äºˆæœŸã•ã‚Œã‚‹ä¸€æ„ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®æ•°ã¯ã€æœ€å¤§20ã§ã™ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ãŸãŒã£ã¦ã€ã»ã¼ã™ã¹ã¦ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€ã„ãã¤ã‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆChatMessageUIã¯ãã®ã‚ˆã†ã«é…ç½®ã•ã‚Œã¦ã„ã‚‹ãŸã‚ï¼‰ã€‚ã¾ãŸã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ç·æ•°ã¯å°‘ãªã„ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®å ´åˆã€1å›ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã™ã¹ã¦ã®ãƒãƒ£ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å—ä¿¡ã™ã‚‹ã®ãŒå¦¥å½“ã¨æ€ã‚ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®APIã«ä»¥ä¸‹ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</font><font style="vertical-align: inherit;">
ã€‚getHeadsByChatãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æœ€é©åŒ–ã—ãŸã„ã¨ã„ã†ç†ç”±ã§ã€å®Œå…¨ã«ãƒ•ã‚§ãƒƒãƒã•ã‚Œã¦ä½œæˆã•ã‚ŒãŸã‚ˆã†ã«ã¯è¦‹ãˆã¾ã›ã‚“ï¼ˆã“ã‚Œã‚‚ååˆ†ãªç†ç”±ã§ã™ï¼‰ã€‚</font><font style="vertical-align: inherit;">å¤šãã®å ´åˆã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚ã‚‹ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä½¿ç”¨ã•ã‚ŒãŸã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€è¿½åŠ ã•ã‚ŒãŸé †åºã§ï¼ˆã—ãŸãŒã£ã¦ã€ãƒªã‚¹ãƒˆã‚’ä½¿ç”¨ã—ã¦ï¼‰ç¢ºèªã—ãŸã„ã¨è€ƒãˆã¾ã™ã€‚</font></font><br>
<br>
<code><font color="7f0055"><b>fun&nbsp;</b></font><font color="170591"><b>getHeadsByChat</b></font><font color="000066">()</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>FileHeadRemote</b></font><font color="333333">&gt;</font></code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚ˆã†ãªæ˜ç¤ºçš„ãªæ¥ç¶šã‚’å®Ÿè£…ã™ã‚‹ã«ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚µãƒ¼ãƒ“ã‚¹ã¾ãŸã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«è¿½åŠ æƒ…å ±ã‚’æ ¼ç´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ç§ãŸã¡ã®æ„è¦‹ã§ã¯ã€ãƒãƒ£ãƒƒãƒˆã¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¥ç¶šã«é–¢ã™ã‚‹ã“ã®å†—é•·ãªæƒ…å ±ã‚’ä¿å­˜ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã¯ã€èª°ã®è²¬ä»»ã®é ˜åŸŸã«ä¾å­˜ã™ã‚‹ã‹ã§ã™ã€‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯æ—¢ã«ãƒ•ã‚¡ã‚¤ãƒ«ã«é–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦ãŠã‚Šã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ãƒãƒ£ãƒƒãƒˆã«é–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦ã„ã‚‹ãŸã‚ã€å†—é•·ã§ã™ã€‚éæ­£è¦åŒ–ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ãŒã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰ãã®å ´ã§ã€ã¤ã¾ã‚ŠSQLå†…ã§ã“ã®æƒ…å ±ã‚’æŠ½å‡ºã—ã€ãƒãƒ£ãƒƒãƒˆå…¨ä½“ï¼ˆã“ã‚Œã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã«ã‚ã‚Šã¾ã™ï¼‰ã®ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã™ãã«å–å¾—ã—ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ä¸€åº¦ã«ãã‚Œã‚‰ã™ã¹ã¦ã‚’è¦æ±‚ã—ã¾ã™ã€‚ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå¤šã„å ´åˆã€ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã†ã¾ãæ©Ÿèƒ½ã—ã¾ã›ã‚“ãŒã€éæ­£è¦åŒ–ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚ä¸¡æ–¹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’getHeadsByChatã®èƒŒå¾Œã«éš ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</font></font><br>
<br>
<code><font color="7f0055"><b>override&nbsp;fun&nbsp;</b></font>getLast<font color="000066">(</font><font color="000066"><i>n</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="000066">)&nbsp;</font><font color="333333">=</font><br>
&nbsp;&nbsp;<font color="566874">messageRepository</font><font color="333333">.</font><font color="170591">findLast</font><font color="000066">(</font><font color="000066"><i>n</i></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>let&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>messages&nbsp;</i></font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><i><b>join</b></i><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>{&nbsp;</b></font><font color="566874">userRepository</font><font color="333333">.</font><font color="170591">getUsersByChat</font><font color="000066">()</font><font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}&nbsp;}</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>{&nbsp;</b></font><font color="566874">fileRepository</font><font color="333333">.</font><font color="170591">getHeadsByChat</font><font color="000066">()</font><font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it</b><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}&nbsp;}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>let&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;}</b></font></code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨æ¯”è¼ƒã—ã¦ã€ã»ã¨ã‚“ã©å¤‰æ›´ã•ã‚Œã¦ãŠã‚‰ãšã€ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒéƒ¨åˆ†ã®ã¿ãŒå½±éŸ¿ã‚’å—ã‘ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ç´ æ™´ã‚‰ã—ã„ã“ã¨ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã‚³ãƒ¼ãƒ‰ãŒå¤§å¹…ã«çŸ­ãæ˜ç¢ºã«ãªã‚Šã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®æ•°ã¯åŒã˜ã§ã‚ã‚‹ãŸã‚ã€å®Ÿè¡Œæ™‚é–“ã¯å¤‰æ›´ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã“ã‚Œã¯è«–ç†çš„ã§ã™ã€‚ç†è«–çš„ã«ã¯ã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ãŒæ­£ç›´ãªãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚ˆã‚Šã‚‚å„ªã‚Œã¦ã„ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼ˆè¤‡é›‘ãªè¨ˆç®—ã®ãƒªãƒ³ã‚¯ã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã®ã¿ï¼‰ã€‚ãŸã ã—ã€åå¯¾ã®çŠ¶æ³ã‚‚åŒæ§˜ã«å¯èƒ½æ€§ãŒé«˜ããªã‚Šã¾ã™ã€‚ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã®è¡ŒãŒå¤šã™ãã¾ã™ã€‚å®Ÿè·µãŒç¤ºã™ã‚ˆã†ã«ã€é©åˆ‡ãªãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚’æ€ã„ã¤ã„ãŸå ´åˆã€å®Ÿè¡Œæ™‚é–“ã«ç‰¹åˆ¥ãªå¤‰æ›´ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã ã—ã€ã“ã‚Œã ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã«é–¢ã™ã‚‹è©³ç´°ãªãƒ‡ãƒ¼ã‚¿ã®å—ä¿¡ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å—ä¿¡ã¨ã¯ç„¡é–¢ä¿‚ã§ã‚ã‚Šã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ä¸¦è¡Œã—ã¦èµ·å‹•ã§ãã‚‹ã“ã¨ã‚’è€ƒæ…®ã«å…¥ã‚Œã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã«å®‰å®šã—ãŸ100ãƒŸãƒªç§’ãŒæä¾›</font><font style="vertical-align: inherit;">ã•ã‚Œ</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<a name="Mistakes"></a><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã¨ãã«ã€ã‚¯ã‚¨ãƒªã‚»ãƒƒãƒˆãŒå¤§ãããªãã¦ã‚‚ã€æœ¬æ¥ã‚ˆã‚Šã‚‚ã‚ãšã‹ã«å°ã•ã„å ´åˆã¯ã©ã†ãªã‚Šã¾ã™ã‹ï¼Ÿ</font><font style="vertical-align: inherit;">ã»ã¨ã‚“ã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã¯ã€ã“ã®ã‚ˆã†ãªãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ãŒæ©Ÿèƒ½ã—ã¾ã™ãŒã€ä¾‹å¤–ãŒã‚ã‚Šã€åˆ¥ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç§ã®å®Ÿè·µã§ã¯ã€å„ä¾‹å¤–ãŒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å¤§ããªå½±éŸ¿ã‚’ä¸ãˆã€æœ€çµ‚çš„ã«ä¸€éƒ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Œå…¨ã«ä¾‹å¤–ã§æ§‹æˆã•ã‚Œã‚‹è¦æ±‚ã‚’è¡Œã£ãŸãŸã‚ã€ãã®ã‚ˆã†ãªæ±ºå®šã¯å¤±æ•—ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚ˆã†ãªçŠ¶æ³ã§ã¯ã€ã‚¯ã‚¨ãƒªã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒä¸æ°—å‘³ã§èª­ã‚ãªã„å ´åˆã§ã‚‚ã€ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚’ä½¿ç”¨ã™ã‚‹æ–¹ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ãŒã€ã‚‚ã¡ã‚ã‚“ã€ã™ã¹ã¦ãŒã‚µãƒ¼ãƒ“ã‚¹ã®é‡è¦åº¦ã«ä¾å­˜ã—ã¾ã™ã€‚</font></font><br>
<br>
<a name="Summary2"></a><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµè«–ã®</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ãƒ¡ãƒªãƒƒãƒˆï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ“ã‚¸ãƒã‚¹ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã®ãƒ­ã‚¸ãƒƒã‚¯ã¯èª­ã¿ã‚„ã™ãã€é€šå¸¸ã¯ç°¡å˜ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€é©ç”¨ç¯„å›²ã®åˆ¶é™ã‚’ç†è§£ã—ã€ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ç¢ºèªãŠã‚ˆã³å¤‰æ›´ã™ã‚‹ãŸã‚ã«å½¹ç«‹ã¡ã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã¯ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã¨åŒã˜ãã‚‰ã„å„ªã‚Œã¦ã„ã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿ã«å¿œã˜ãŸã‚³ãƒ¼ãƒ‰ã®ä¸€è²«æ€§ãŒä½ä¸‹ã—ã€ã‚³ãƒ¼ãƒ‰ã®ä¸¦åˆ—åŒ–ãŒå‘ä¸Šã—ã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒãƒ­ã‚¸ãƒƒã‚¯ã¨RESTã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã®ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã¯ã€è¦ä»¶ã«åŸºã¥ã„ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">è¦ä»¶ãŒé »ç¹ã«å¤‰æ›´ã•ã‚Œã‚‹å ´åˆã€ã“ã‚Œã¯å¼±ã„ãƒ—ãƒ©ã‚¹ã§ã™ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒã‚¤ãƒŠã‚¹ï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¦ä»¶ã‹ã‚‰ã€ã‚¯ã‚¨ãƒªäºˆæ¸¬ã®ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚’å°å‡ºã™ã‚‹ã“ã¨ã¯ãã‚Œã»ã©ç°¡å˜ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">è¦ä»¶ã®æ˜ç¢ºåŒ–ã¯ã€ã‚¢ã‚¸ãƒ£ã‚¤ãƒ«ã¨ã®äº’æ›æ€§ãŒä½ã„ç¨‹åº¦ã¾ã§å¿…è¦ã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿½åŠ ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãŒåŠ¹æœçš„ã«æ©Ÿèƒ½ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã«ã¯ã€ãŠãã‚‰ããƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®éæ­£è¦åŒ–ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚‰ã®æœ€é©åŒ–ã¯ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã«åŸºã¥ã„ã¦ã„ã‚‹ãŸã‚ã€ã“ã‚Œã¯å¼±ã„ãƒã‚¤ãƒŠã‚¹ã§ã™ã€‚ã—ãŸãŒã£ã¦ã€ã»ã¨ã‚“ã©ã®å ´åˆã€ã•ã¾ã–ã¾ãªãƒ—ãƒ­ã‚»ã‚¹ã«ã‚ˆã£ã¦è¦æ±‚ã•ã‚Œã¾ã™ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ä¾‹ã‹ã‚‰ã€ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’é©ç”¨ã™ã‚‹ã“ã¨ã¯éå¸¸ã«å›°é›£ã§ã‚ã‚Šã€ã‚²ãƒ¼ãƒ ã¯ã‚­ãƒ£ãƒ³ãƒ‰ãƒ«ã®ä¾¡å€¤ãŒãªã„ã¨çµè«–ä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">å®Ÿéš›ã€å®Ÿéš›ã®ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€åˆ¶é™ã®æ•°ãŒè†¨å¤§ã§ã‚ã‚Šã€ã“ã®ãƒ’ãƒ¼ãƒ—ã‹ã‚‰ã€ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†å‰²ã—ãŸã‚Šçµ±è¨ˆã‚’äºˆæ¸¬ã—ãŸã‚Šã™ã‚‹ã®ã«å½¹ç«‹ã¤ä½•ã‹ã‚’å¾—ã‚‹ã“ã¨ãŒã—ã°ã—ã°å¯èƒ½ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®ä¸»ãªåˆ©ç‚¹ã¯ã€ä½¿ç”¨ã•ã‚Œã‚‹åˆ¶é™ãŒãƒ“ã‚¸ãƒã‚¹ã«ã‚ˆã£ã¦è§£é‡ˆã•ã‚Œã‚‹ãŸã‚ã€ç°¡å˜ã«ç†è§£ãŠã‚ˆã³æ¤œè¨¼ã§ãã‚‹ã“ã¨ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šå¸¸ã€ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ä½¿ç”¨ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ãã®æœ€å¤§ã®å•é¡Œã¯ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã®åˆ†é›¢ã§ã™ã€‚</font><font style="vertical-align: inherit;">é–‹ç™ºè€…ã¯ã€ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã«ååˆ†ã«æ²¡é ­ã—ã€ç‰¹å®šã®ãƒ¬ãƒ™ãƒ«ã®ã‚¤ãƒ‹ã‚·ã‚¢ãƒãƒ–ãŒå¿…è¦ãªè³ªå•ã‚’æ˜ç¢ºã«ã™ã‚‹ã‚¢ãƒŠãƒªã‚¹ãƒˆã®è³ªå•ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<a name="DDDAgregates"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DDDã‚¹ã‚¿ã‚¤ãƒ«ã®ãƒ¦ãƒ‹ãƒƒãƒˆ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¤§è¦æ¨¡ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚’åŠ¹ç‡çš„ã«æ§‹é€ åŒ–ã§ãã‚‹ãŸã‚ã€DDDãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®ä½¿ç”¨ã‚’ã‚ˆãç›®ã«ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã¹ã¦ã®DDDãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“-å ´åˆã«ã‚ˆã£ã¦ã¯ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å°å…¥ã—ãŸå ´åˆã§ã‚‚ã€è‰¯ã„ãƒªã‚¿ãƒ¼ãƒ³ãŒå¾—ã‚‰ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">DDDã®æ¦‚å¿µã‚’é›†åˆä½“ã¨ã—ã¦è€ƒãˆã¾ã™ã€‚</font><font style="vertical-align: inherit;">é›†åˆä½“ã¯ã€è«–ç†çš„ã«é–¢é€£ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®çµåˆã§ã‚ã‚Šã€ä½œæ¥­ã¯é›†åˆä½“ã®ãƒ«ãƒ¼ãƒˆã‚’ä»‹ã—ã¦ã®ã¿å®Ÿè¡Œã•ã‚Œã¾ã™ï¼ˆé€šå¸¸ã€ã“ã‚Œã¯ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£æ¥ç¶šã‚°ãƒ©ãƒ•ã®ä¸€ç•ªä¸Šã«ã‚ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã§ã™ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã¨ã„ã†è¦³ç‚¹ã‹ã‚‰è¦‹ã‚‹ã¨ã€é›†è¨ˆã®ä¸»ãªã‚‚ã®ã¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒªã‚¹ãƒˆã‚’æ“ä½œã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯å…¨ä½“ãŒ1ã‹æ‰€ã€ã¤ã¾ã‚Šé›†è¨ˆã§ã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">å»ºè¨­ä¸­ã«ãƒ¦ãƒ‹ãƒƒãƒˆã«è»¢é€ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚‚ã®ã«ã¯2ã¤ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¦ãƒ‹ãƒƒãƒˆã«é–¢æ•°ã‚’è»¢é€ã—ã¦å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’æ±ºå®šã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã¯ã€ãƒ¦ãƒ‹ãƒƒãƒˆå†…ã«ã‚ã‚Šã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¿…è¦ãªã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’è»¢é€ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’æ±ºå®šã™ã‚‹ãŸã‚ã®ãƒ­ã‚¸ãƒƒã‚¯ã¯ã€é›†è¨ˆã®å¤–éƒ¨ã«ã‚ã‚Šã¾ã™ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®é¸æŠã¯ã€ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã‚’é›†åˆä½“ã®å¤–ã«ã©ã‚Œã ã‘ç°¡å˜ã«ç§»å‹•ã§ãã‚‹ã‹ã«å¤§ããä¾å­˜ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒãƒ­ã‚¸ãƒƒã‚¯ãŒãƒ“ã‚¸ãƒã‚¹ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã«åŸºã¥ã„ã¦ã„ã‚‹å ´åˆã€é€šå¸¸ã€ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒãƒ­ã‚¸ãƒƒã‚¯ã‚’é›†ç´„ã‹ã‚‰åˆ†é›¢ã™ã‚‹ã®ã¯ç°¡å˜ã§ã™ã€‚</font><font style="vertical-align: inherit;">è«–ç†çš„ã«é–¢é€£ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ç•°ãªã‚‹ã‚¯ãƒ©ã‚¹ã«åˆ†æ•£ã™ã‚‹ãŸã‚ã€ãã®ä½¿ç”¨ï¼ˆãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ï¼‰ã®åˆ†æã«åŸºã¥ã„ã¦ãƒ­ã‚¸ãƒƒã‚¯ã‚’é›†ç´„ã®ç¯„å›²ã‚’è¶…ãˆã¦ç§»å‹•ã™ã‚‹ã“ã¨ã¯å±é™ºãªå ´åˆãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<a name="EnlargementInside"></a><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é›†ç´„å†…ã®ã‚¯ã‚¨ãƒªã‚’æ‹¡å¤§ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã€Œãƒãƒ£ãƒƒãƒˆã€ã®æ¦‚å¿µã«å¯¾å¿œã™ã‚‹é›†ç´„ã‚’ã‚¹ã‚±ãƒƒãƒã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ ChatMessageã€UserReferenceã€FileReferenceã‚¯ãƒ©ã‚¹ã¯ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ¢ãƒ‡ãƒ«ã«å¯¾å¿œã—ã¦ã„ã‚‹ãŸã‚ã€é©åˆ‡ãªãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’ä»˜ã‘ã¦åå‰ã‚’å¤‰æ›´ã§ãã¾ã™ãŒã€å°è¦æ¨¡ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚‹ãŸã‚ã€ãã®ã¾ã¾ã«ã—ã¦ãŠãã¾ã™ã€‚ã‚¢ã‚»ãƒ³ãƒ–ãƒªã‚’ãƒãƒ£ãƒƒãƒˆã¨å‘¼ã³ã€ãã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ChatPageãŠã‚ˆã³ChatPageMesâ€‹â€‹sageã§ã™ã€‚</font><font style="vertical-align: inherit;">
ã“ã‚Œã¾ã§ã®ã¨ã“ã‚ã€æ„å‘³ã®ãªã„å¤šãã®é‡è¤‡ãŒå–å¾—ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€å¯¾è±¡ãƒ¢ãƒ‡ãƒ«ãŒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ¢ãƒ‡ãƒ«ã«ä¼¼ã¦ãŠã‚Šã€ã©ã¡ã‚‰ã‚‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ¢ãƒ‡ãƒ«ã«ä¼¼ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚</font><font style="vertical-align: inherit;">
FileHeadRemoteã‚¯ãƒ©ã‚¹ã¨UserRemoteã‚¯ãƒ©ã‚¹ã‚’ç›´æ¥ä½¿ç”¨ã—ã¦ã€ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã—ã™ããªã„ã‚ˆã†ã«ã—ã¾ã™ãŒã€é€šå¸¸ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã§ç›´æ¥ã“ã®ã‚ˆã†ãªã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯é¿ã‘ã¦ãã ã•ã„ã€‚</font></font><br>
<br>
<code><font color="7f0055"><b>interface&nbsp;</b></font><font color="3e7eff"><b>Chat&nbsp;</b></font><font color="000066">{</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>fun&nbsp;</b></font><font color="170591"><b>getLastPage</b></font><font color="000066">(</font><font color="000066"><i>n</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="000066">)</font>:&nbsp;<font color="3e7eff"><b>ChatPage</b></font><br>
<font color="000066">}</font><br>
<br>
<font color="7f0055"><b>interface&nbsp;</b></font><font color="3e7eff"><b>ChatPage&nbsp;</b></font><font color="000066">{</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">messages</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>ChatPageMessage</b></font><font color="333333">&gt;</font><br>
<font color="000066">}</font><br>
<br>
<font color="7f0055"><b>data&nbsp;class&nbsp;</b></font><font color="3e7eff"><b>ChatPageMessage</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">id</font>:&nbsp;<font color="3e7eff"><b>Long</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">author</font>:&nbsp;<font color="3e7eff"><b>UserRemote</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">message</font>:&nbsp;<font color="3e7eff"><b>String</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">files</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>FileHeadRemote</b></font><font color="333333">&gt;,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">replyTo</font>:&nbsp;<font color="3e7eff"><b>ChatPageMessage</b></font>?<font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="566874">forwardFrom</font>:&nbsp;<font color="3e7eff"><b>ChatPageMessage</b></font>?<br>
<font color="000066">)</font></code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚ˆã†ãªé›†ç´„ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€RESTã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¯æ¬¡ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">
ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€æœ€åˆã®å˜ç´”ãªå®Ÿè£…ã‚’å¤§éƒ¨åˆ†é€£æƒ³ã•ã›ã¾ã™ãŒã€é‡è¦ãªåˆ©ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¯ã€ãƒ‡ãƒ¼ã‚¿ã®ç›´æ¥å—ä¿¡ã«é–¢ä¸ã—ãªããªã‚Šã€ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸã‚¯ãƒ©ã‚¹ã«ä¾å­˜ã—ãªããªã‚Šã¾ã™ãŒã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‹ã‚‰è¨­å®šã•ã‚Œã‚‹ãƒ¦ãƒ‹ãƒƒãƒˆã‹ã‚‰ã®ã¿ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒãƒ­ã‚¸ãƒƒã‚¯ã¯ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã«ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¯ãƒ¦ãƒ‹ãƒƒãƒˆã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ¢ãƒ‡ãƒ«ã¸ã®å¤‰æ›ã®ã¿ã‚’æ‰±ã„ã€å˜ä¸€è²¬ä»»åŸå‰‡ï¼ˆSRPï¼‰ã«æº–æ‹ ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">
æ®‹å¿µãªãŒã‚‰ã€é›†è¨ˆã«è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹ã™ã¹ã¦ã®ãƒ¡ã‚½ãƒƒãƒ‰ã«ã¤ã„ã¦ã€å®Ÿè£…ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<code><font color="7f0055"><b>class&nbsp;</b></font><font color="3e7eff"><b>ChatRestController</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">chat</font>:&nbsp;<font color="3e7eff"><b>Chat</b></font><br>
<font color="000066">)&nbsp;</font>:&nbsp;<font color="3e7eff"><b>ChatRestApi&nbsp;</b></font><font color="000066">{</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>override&nbsp;fun&nbsp;</b></font><font color="170591"><b>getLast</b></font><font color="000066">(</font><font color="000066"><i>n</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="000066">)&nbsp;</font><font color="333333">=</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="566874">chat</font><font color="333333">.</font><font color="170591">getLastPage</font><font color="000066">(</font><font color="000066"><i>n</i></font><font color="000066">)</font><font color="333333">.</font><i><b>toFrontModel</b></i><font color="000066">()</font><br>
<br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;fun&nbsp;</b></font><font color="3e7eff"><b>ChatPage</b></font><font color="333333">.</font><font color="170591"><b>toFrontModel</b></font><font color="000066">()&nbsp;</font><font color="333333">=</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="566874">messages</font><font color="333333">.</font><i><b>map&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it</b><font color="333333">.</font><i><b>toFrontModel</b></i><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font><br>
<br>
<font color="000066"><b>&nbsp;&nbsp;</b></font><font color="7f0055"><b>private&nbsp;fun&nbsp;</b></font><font color="3e7eff"><b>ChatPageMessage</b></font><font color="333333">.</font><font color="170591"><b>toFrontModel</b></font><font color="000066">()</font>:&nbsp;<font color="3e7eff"><b>ChatMessageUI&nbsp;</b></font><font color="333333">=</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="170591">ChatMessageUI</font><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">id&nbsp;=&nbsp;</font><font color="566874">id</font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">author&nbsp;=&nbsp;</font><font color="566874">author</font><font color="333333">.</font><i><b>toFrontReference</b></i><font color="000066">()</font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">message&nbsp;=&nbsp;</font><font color="566874">message</font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">files&nbsp;=&nbsp;</font><font color="566874">files</font><font color="333333">.</font><i><b>toFrontReference</b></i><font color="000066">()</font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">forwardFrom&nbsp;=&nbsp;</font><font color="566874">forwardFrom</font><font color="333333">?.</font><i><b>toFrontModel</b></i><font color="000066">()</font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">replyTo&nbsp;=&nbsp;</font><font color="566874">replyTo</font><font color="333333">?.</font><i><b>toFrontModel</b></i><font color="000066">()</font><br>
<font color="000066">&nbsp;&nbsp;&nbsp;&nbsp;)</font><br>
<font color="000066">}</font></code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ“ã‚¸ãƒã‚¹ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚’ä½¿ç”¨ã™ã‚‹ã¨ãã«å®Ÿè£…ã•ã‚ŒãŸã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä¿å­˜ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</font></font></b><div class="spoiler_text"><code><font color="7f0055"><b>class&nbsp;</b></font><font color="3e7eff"><b>ChatImpl</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">messageRepository</font>:&nbsp;<font color="3e7eff"><b>ChatMessageRepository</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">userRepository</font>:&nbsp;<font color="3e7eff"><b>UserRemoteApi</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">fileRepository</font>:&nbsp;<font color="3e7eff"><b>FileRemoteApi</b></font><br>
<font color="000066">)&nbsp;</font>:&nbsp;<font color="3e7eff"><b>Chat&nbsp;</b></font><font color="000066">{</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>override&nbsp;fun&nbsp;</b></font><font color="170591"><b>getLastPage</b></font><font color="000066">(</font><font color="000066"><i>n</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="000066">)&nbsp;</font><font color="333333">=&nbsp;</font><font color="7f0055"><b>object&nbsp;</b></font>:&nbsp;<font color="3e7eff"><b>ChatPage&nbsp;</b></font><font color="000066">{</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="7f0055"><b>override&nbsp;val&nbsp;</b></font><font color="566874">messages</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>ChatPageMessage</b></font><font color="333333">&gt;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="7f0055"><b>get</b></font><font color="000066">()&nbsp;</font><font color="333333">=</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i><b>runBlocking</b></i><font color="000066">(</font><font color="05314d"><b>IO</b></font><font color="000066">)&nbsp;</font><font color="000066"><b>{</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="7f0055"><b>val&nbsp;</b></font><font color="170591">prefetch&nbsp;</font><font color="333333">=&nbsp;</font><i><b>async</b></i><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>{&nbsp;</b></font><font color="566874">userRepository</font><font color="333333">.</font><font color="170591">getUsersByChat</font><font color="000066">()</font><font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it</b><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}&nbsp;}</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>{&nbsp;</b></font><font color="566874">fileRepository</font><font color="333333">.</font><font color="170591">getHeadsByChat</font><font color="000066">()</font><font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}&nbsp;}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066">)</font><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i><b>withContext</b></i><font color="000066">(</font><font color="05314d"><b>IO</b></font><font color="000066">)&nbsp;</font><font color="000066"><b>{&nbsp;</b></font><font color="566874">messageRepository</font><font color="333333">.</font><font color="170591">findLast</font><font color="000066">(</font><font color="3e7eff"><b>n</b></font><font color="000066">)&nbsp;</font><font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="333333">.</font><i><b>map</b></i><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="170591">prefetch</font><font color="333333">.</font><font color="170591">await</font><font color="000066">()</font><font color="333333">.</font><i><b>let&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066">(</font><font color="170591">users</font><font color="333333">,&nbsp;</font><font color="170591">files</font><font color="000066">)&nbsp;</font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><i><b>recursiveMemoize&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>message</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>memoized</i></font>:&nbsp;<font color="000066">(</font><font color="3e7eff"><b>ChatMessage</b></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="3e7eff"><b>ChatPageMessage&nbsp;</b></font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066"><i>message</i></font><font color="333333">.</font><i><b>toDomainModel</b></i><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">getUser&nbsp;=&nbsp;</font><font color="170591">users</font>::get<font color="333333">.</font><i><b>orThrow&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="170591">IllegalArgumentException</font><font color="000066">(</font><b>"User&nbsp;</b><font color="333333"><b>$</b></font><font color="000066"><i>it</i></font><b>"</b><font color="000066">)&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">getFile&nbsp;=&nbsp;</font><font color="170591">files</font>::get<font color="333333">.</font><i><b>orThrow&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="170591">IllegalArgumentException</font><font color="000066">(</font><b>"File&nbsp;</b><font color="333333"><b>$</b></font><font color="000066"><i>it</i></font><b>"</b><font color="000066">)&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">serializeMessage&nbsp;=&nbsp;</font><font color="000066"><i>memoized</i></font><br>
<font color="000066"><i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;</b></font><font color="000066">}</font><br>
<font color="000066">}</font><br>
<br>
<font color="7f0055"><b>private&nbsp;fun&nbsp;</b></font><font color="3e7eff"><b>ChatMessage</b></font><font color="333333">.</font><font color="170591"><b>toDomainModel</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="000066"><i>getUser</i></font>:&nbsp;<font color="000066">(</font><font color="3e7eff"><b>UserReference</b></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="3e7eff"><b>UserRemote</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="000066"><i>getFile</i></font>:&nbsp;<font color="000066">(</font><font color="3e7eff"><b>FileReference</b></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="3e7eff"><b>FileHeadRemote</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="000066"><i>serializeMessage</i></font>:&nbsp;<font color="000066">(</font><font color="3e7eff"><b>ChatMessage</b></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="3e7eff"><b>ChatPageMessage</b></font><br>
<font color="000066">)&nbsp;</font><font color="333333">=&nbsp;</font><font color="170591">ChatPageMessage</font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="4a86e8">id&nbsp;=&nbsp;</font><font color="566874">id&nbsp;</font>?:&nbsp;<font color="7f0055"><b>throw&nbsp;</b></font><font color="170591">IllegalStateException</font><font color="000066">(</font><b>"</b><font color="333333"><b>$</b></font><font color="7f0055"><b>this</b></font><b>&nbsp;must&nbsp;be&nbsp;persisted"</b><font color="000066">)</font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="4a86e8">author&nbsp;=&nbsp;</font><font color="000066"><i>getUser</i></font><font color="000066">(</font><font color="566874">author</font><font color="000066">)</font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="4a86e8">message&nbsp;=&nbsp;</font><font color="566874">message</font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="4a86e8">files&nbsp;=&nbsp;</font><font color="566874">files</font><font color="333333">?.</font><i><b>map</b></i><font color="000066">(</font><font color="000066"><i>getFile</i></font><font color="000066">)&nbsp;</font>?:&nbsp;<i><b>listOf</b></i><font color="000066">()</font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="4a86e8">forwardFrom&nbsp;=&nbsp;</font><font color="566874">forwardFrom</font><font color="333333">?.</font><i><b>let</b></i><font color="000066">(</font><font color="000066"><i>serializeMessage</i></font><font color="000066">)</font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="4a86e8">replyTo&nbsp;=&nbsp;</font><font color="566874">replyTo</font><font color="333333">?.</font><i><b>let</b></i><font color="000066">(</font><font color="000066"><i>serializeMessage</i></font><font color="000066">)</font><br>
<font color="000066">)</font><br>
</code></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
getLastPageé–¢æ•°è‡ªä½“ã«ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã‚’å«ã‚€ãƒ‡ãƒ¼ã‚¿å–å¾—æˆ¦ç•¥ãŒã‚ã‚Šã€toDomainModelé–¢æ•°ã¯ç´”ç²‹ã«æŠ€è¡“çš„ã§ã‚ã‚Šã€æ ¼ç´ã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«ã‚’ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã«å¤‰æ›ã™ã‚‹è²¬ä»»ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kotlinã§ã¯ã€userRepositoryã€fileRepositoryã€ãŠã‚ˆã³messageRepositoryã¸ã®ä¸¦åˆ—å‘¼ã³å‡ºã—ã‚’ã‚ˆã‚Šèº«è¿‘ãªå½¢å¼ã«æ›¸ãç›´ã—ã¾ã—ãŸã€‚ã“ã®ãŸã‚ã€ã‚³ãƒ¼ãƒ‰ã®ã‚ã‹ã‚Šã‚„ã™ã•ãŒæãªã‚ã‚Œãªã„ã“ã¨ã‚’é¡˜ã£ã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸€èˆ¬ã«ã€ã“ã®ã‚ˆã†ãªæ–¹æ³•ã¯ã™ã§ã«å®Œå…¨ã«æ©Ÿèƒ½ã—ã¦ãŠã‚Šã€ãã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¯ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚„ãƒ“ã‚¸ãƒã‚¹ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚¹ã‚’å˜ç´”ã«ä½¿ç”¨ã—ãŸå ´åˆã¨åŒã˜ã§ã™ã€‚</font></font><br>
<br>
<a name="EnlargementOutside"></a><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é›†è¨ˆã®å¤–éƒ¨ã§ã‚¯ã‚¨ãƒªã‚’æ‹¡å¤§ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯é›†è¨ˆ</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚’ä½œæˆã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã§ã¯ã€ã™ãã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã™ã€‚ChatPageã‚’ä½œæˆã™ã‚‹ã«ã¯ã€é€šå¸¸ã®ã‚ˆã†ã«ã€ChatPageã‚’ä½œæˆã™ã‚‹ã¨ãã«ãƒšãƒ¼ã‚¸ã‚µã‚¤ã‚ºã‚’å®šæ•°ã¨ã—ã¦è¨­å®šã—ã€getLastï¼ˆï¼‰ã«æ¸¡ã•ãªã„ã‚ˆã†ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">
æˆ‘ã€…ã¯ã‚ˆ</font><font style="vertical-align: inherit;">çµ±åˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è‡ªä½“ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">æˆ‘ã€…ã¯æ®‹ã‚Šã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¨˜ã‚’æŒã£ã¦ãŠã‚Šã€ç§ãŸã¡ã¯ã—ã£ã‹ã‚Šã¨é›†è¨ˆå¤–ã®ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ãŸã„ã®ã§ã€æˆ‘ã€…ã¯å®Œå…¨ã«ãƒãƒ£ãƒƒãƒˆãƒ¬ãƒ™ãƒ«ã®é›†è¨ˆã‚’æ”¾æ£„ã—ChatPageãƒ«ãƒ¼ãƒˆã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š</font><font style="vertical-align: inherit;">
æ¬¡ã«ã€æˆ‘ã€…ã¯ã€é›†ç´„ã¨ã¯åˆ¥ã®ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">
ä»Šã€ãã®ãŸã‚ã«ã‚¢ã‚°ãƒªã‚²ãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹ã«ã¯ã€ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã§ãƒ‰ãƒƒã‚­ãƒ³ã‚°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ DDDã§ã¯ã€ã“ã®ç¨®ã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚ˆã£ã¦è¡Œã‚ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<code><font color="7f0055"><b>interface&nbsp;</b></font><font color="3e7eff"><b>Chat&nbsp;</b></font><font color="000066">{</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>fun&nbsp;</b></font><font color="170591"><b>getPage</b></font><font color="000066">()</font>:&nbsp;<font color="3e7eff"><b>ChatPage</b></font><br>
<font color="000066">}</font></code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code><font color="7f0055"><b>class&nbsp;</b></font><font color="3e7eff"><b>ChatPageImpl</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">messageData</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>ChatMessage</b></font><font color="333333">&gt;,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">userData</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>UserRemote</b></font><font color="333333">&gt;,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">fileData</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>FileHeadRemote</b></font><font color="333333">&gt;</font><br>
<font color="000066">)&nbsp;</font>:&nbsp;<font color="3e7eff"><b>ChatPage&nbsp;</b></font><font color="000066">{</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>override&nbsp;val&nbsp;</b></font><font color="566874">messages</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>ChatPageMessage</b></font><font color="333333">&gt;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="7f0055"><b>get</b></font><font color="000066">()&nbsp;</font><font color="333333">=</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="566874">messageData</font><font color="333333">.</font><i><b>map</b></i><font color="000066">(</font><br>
<font color="000066">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</font><font color="566874">userData</font><font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><b>it</b><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}&nbsp;</b></font><i><b>to&nbsp;</b></i><font color="566874">fileData</font><font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}</b></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>let&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066">(</font><font color="170591">users</font><font color="333333">,&nbsp;</font><font color="170591">files</font><font color="000066">)&nbsp;</font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><i><b>recursiveMemoize&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>message</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>self</i></font>:&nbsp;<font color="000066">(</font><font color="3e7eff"><b>ChatMessage</b></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="3e7eff"><b>ChatPageMessage&nbsp;</b></font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066"><i>message</i></font><font color="333333">.</font><i><b>toDomainModel</b></i><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">getUser&nbsp;=&nbsp;</font><font color="170591">users</font>::get<font color="333333">.</font><i><b>orThrow</b></i><font color="000066">()</font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">getFile&nbsp;=&nbsp;</font><font color="170591">files</font>::get<font color="333333">.</font><i><b>orThrow</b></i><font color="000066">()</font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="4a86e8">serializeMessage&nbsp;=&nbsp;</font><font color="000066"><i>self</i></font><br>
<font color="000066"><i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066">)</font><br>
<font color="000066">}</font></code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code><font color="7f0055"><b>fun&nbsp;</b></font><font color="170591"><b>chatPagePrefetch</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="000066"><i>pageSize</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="000066"><i>messageRepository</i></font>:&nbsp;<font color="3e7eff"><b>ChatMessageRepository</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="000066"><i>userRepository</i></font>:&nbsp;<font color="3e7eff"><b>UserRemoteApi</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="000066"><i>fileRepository</i></font>:&nbsp;<font color="3e7eff"><b>FileRemoteApi</b></font><br>
<font color="000066">)&nbsp;</font><font color="333333">=</font><br>
&nbsp;&nbsp;<i><b>runBlocking</b></i><font color="000066">(</font><font color="05314d"><b>IO</b></font><font color="000066">)&nbsp;</font><font color="000066"><b>{</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;</b></font><i><b>async</b></i><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>{&nbsp;</b></font><font color="3e7eff"><b>userRepository</b></font><font color="333333">.</font><font color="170591">getUsersByChat</font><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>{&nbsp;</b></font><font color="3e7eff"><b>fileRepository</b></font><font color="333333">.</font><font color="170591">getHeadsByChat</font><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>{&nbsp;</b></font><font color="3e7eff"><b>messageRepository</b></font><font color="333333">.</font><font color="170591">findLast</font><font color="000066">(</font><font color="3e7eff"><b>pageSize</b></font><font color="000066">)&nbsp;</font><font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066">)</font><br>
&nbsp;&nbsp;<font color="000066"><b>}</b></font></code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code><font color="7f0055"><b>class&nbsp;</b></font><font color="3e7eff"><b>ChatService</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">messageRepository</font>:&nbsp;<font color="3e7eff"><b>ChatMessageRepository</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">userRepository</font>:&nbsp;<font color="3e7eff"><b>UserRemoteApi</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">fileRepository</font>:&nbsp;<font color="3e7eff"><b>FileRemoteApi</b></font><br>
<font color="000066">)&nbsp;{</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;fun&nbsp;</b></font><font color="170591"><b>chatPagePrefetch</b></font><font color="000066">(</font><font color="000066"><i>pageSize</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="000066">)&nbsp;</font><font color="333333">=</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i><b>runBlocking</b></i><font color="000066">(</font><font color="05314d"><b>IO</b></font><font color="000066">)&nbsp;</font><font color="000066"><b>{</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><i><b>async</b></i><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>{&nbsp;</b></font><font color="566874">messageRepository</font><font color="333333">.</font><font color="170591">findLast</font><font color="000066">(</font><font color="3e7eff"><b>pageSize</b></font><font color="000066">)&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>{&nbsp;</b></font><font color="566874">userRepository</font><font color="333333">.</font><font color="170591">getUsersByChat</font><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>{&nbsp;</b></font><font color="566874">fileRepository</font><font color="333333">.</font><font color="170591">getHeadsByChat</font><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066">)</font><font color="333333">.</font><font color="170591">await</font><font color="000066">()</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><br>
<br>
<font color="000066"><b>&nbsp;&nbsp;</b></font><font color="7f0055"><b>fun&nbsp;</b></font><font color="170591"><b>getLastPage</b></font><font color="000066">(</font><font color="000066"><i>n</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="000066">)</font>:&nbsp;<font color="3e7eff"><b>ChatPage&nbsp;</b></font><font color="333333">=</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="170591">chatPagePrefetch</font><font color="000066">(</font><font color="000066"><i>n</i></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="333333">.</font><i><b>let&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066">(</font><font color="170591">messageData</font><font color="333333">,&nbsp;</font><font color="170591">userData</font><font color="333333">,&nbsp;</font><font color="170591">fileData</font><font color="000066">)&nbsp;</font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="170591">ChatPageImpl</font><font color="000066">(</font><font color="170591">messageData</font><font color="333333">,&nbsp;</font><font color="170591">userData</font><font color="333333">,&nbsp;</font><font color="170591">fileData</font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><br>
<font color="000066">}</font></code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã¦ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¯ãã‚Œã»ã©å¤‰åŒ–ã—ã¾ã›ã‚“ã€‚Chat:: getLastPageã®ä»£ã‚ã‚Šã«ChatService :: getLastPageã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã ã‘ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã¤ã¾ã‚Šã€ã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<code><font color="7f0055"><b>class&nbsp;</b></font>ChatRestController<font color="000066">(</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">chat</font>:&nbsp;<font color="3e7eff"><b>ChatService</b></font><br>
<font color="000066">)&nbsp;</font>:&nbsp;<font color="3e7eff"><b>ChatRestApi</b></font><br>
</code><br>
<br>
<a name="Summary3"></a><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èª¿æŸ»çµæœ</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒãƒ­ã‚¸ãƒƒã‚¯ã¯ã€ãƒ¦ãƒ‹ãƒƒãƒˆå†…ã¾ãŸã¯åˆ¥ã®å ´æ‰€ã«é…ç½®ã§ãã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒãƒ­ã‚¸ãƒƒã‚¯ãŒã‚¢ã‚°ãƒªã‚²ãƒ¼ãƒˆã®å†…éƒ¨ãƒ­ã‚¸ãƒƒã‚¯ã«å¼·ãé–¢é€£ã—ã¦ã„ã‚‹å ´åˆã¯ã€ã‚«ãƒ—ã‚»ãƒ«åŒ–ã‚’ä¸­æ–­ã•ã›ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒãƒ­ã‚¸ãƒƒã‚¯ã‚’å–ã‚Šå‡ºã•ãªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">å€‹äººçš„ã«ã¯ã€ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã‚’é›†ç´„ã®å¤–ã«ç§»å‹•ã™ã‚‹ã“ã¨ã«ã‚ã¾ã‚Šæ„å‘³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å¯èƒ½æ€§ãŒå¤§å¹…ã«åˆ¶é™ã•ã‚Œã€ã‚³ãƒ¼ãƒ‰ã®æš—é»™çš„ãªä¸€è²«æ€§ãŒé«˜ã¾ã‚‹ã‹ã‚‰ã§ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤§é‡ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¯¾ã™ã‚‹åˆ¶å¾¡ãŒå¼·åŒ–ã•ã‚Œã€ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒãƒ­ã‚¸ãƒƒã‚¯ã®å ´æ‰€ãŒéå¸¸ã«æ˜ç¢ºã«ãªã‚‹ãŸã‚ã€é›†ç´„çµ„ç¹”è‡ªä½“ãŒãƒãƒƒãƒå‡¦ç†ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ãƒ—ãƒ©ã‚¹ã®å½±éŸ¿ã‚’ä¸ãˆã¾ã™ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã®ç« ã§ã¯ã€ãƒ¡ã‚¤ãƒ³é–¢æ•°ã‹ã‚‰åˆ†é›¢ã—ã¦å®Ÿè£…ã§ããªã„ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒå®Ÿè£…ã«ã¤ã„ã¦æ¤œè¨ã—ã¾ã™ã€‚</font></font><br>
<br>
<a name="Proxying"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ­ã‚­ã‚·ã¨äºŒé‡å‘¼ã³å‡ºã—</font></font></h4><br>
<a name="ManagingContractProblem2"></a><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®å•é¡Œã®è§£æ±º</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã“ã‚Œã¾ã§ã®ãƒ‘ãƒ¼ãƒˆã§èª¬æ˜ã—ãŸã‚ˆã†ã«ã€ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ä¸»ãªå•é¡Œã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™ã™ã‚‹å¿…è¦ãŒã‚ã‚‹é–¢æ•°ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã¨å¼·ãçµã³ã¤ã„ã¦ã„ã‚‹ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã‚ˆã‚Šæ­£ç¢ºã«ã¯ã€ãƒ¡ã‚¤ãƒ³é–¢æ•°ãŒå¿…è¦ã¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">äºˆæ¸¬ã™ã‚‹ã®ã§ã¯ãªãã€ã‚³ãƒ¼ãƒ‰è‡ªä½“ã‚’ä½¿ç”¨ã—ã¦ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚’å®Ÿè¡Œã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã©ã†ãªã‚‹ã§ã—ã‚‡ã†ã‹ã€‚</font><font style="vertical-align: inherit;">å˜ç´”ãªçŠ¶æ³ã§ã¯ã€ãƒ†ã‚¹ãƒˆã§ä¸€èˆ¬çš„ã«ä½¿ç”¨ã•ã‚Œã‚‹ãƒ—ãƒ­ã‚­ã‚·ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒå½¹ç«‹ã¡ã¾ã™ã€‚</font><font style="vertical-align: inherit;">Mockitoãªã©ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ã¯ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®Ÿè£…ã‚’å‚™ãˆãŸã‚¯ãƒ©ã‚¹ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã“ã‚Œã¯ã€å‘¼ã³å‡ºã—ã«é–¢ã™ã‚‹æƒ…å ±ã‚‚è“„ç©ã§ãã¾ã™ã€‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç§ãŸã¡ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚‚åŒæ§˜ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒ­ã‚­ã‚·ã•ã‚ŒãŸãƒªãƒã‚¸ãƒˆãƒªã‚’ä½¿ç”¨ã—ã¦ãƒ¡ã‚¤ãƒ³é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã€å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã«é–¢ã™ã‚‹æƒ…å ±ã‚’åé›†ã™ã‚‹ã¨ã€ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å½¢å¼ã§å–å¾—ã—ã€ãƒ¡ã‚¤ãƒ³é–¢æ•°ã‚’å†åº¦å‘¼ã³å‡ºã—ã¦æœ€çµ‚çµæœã‚’å–å¾—ã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸»ãªæ¡ä»¶ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚è¦æ±‚ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã¯å¾Œç¶šã®è¦æ±‚ã«å½±éŸ¿ã‚’ä¸ãˆã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚ãƒ—ãƒ­ã‚­ã‚·ã¯å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã•ãšã€ä¸€éƒ¨ã®ã‚¹ã‚¿ãƒ–ã®ã¿ã‚’è¿”ã™ãŸã‚ã€é–¢é€£ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®åˆ†å²ã¨å—ä¿¡ã¯ã™ã¹ã¦æ¶ˆãˆã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»Šå›ã®ã‚±ãƒ¼ã‚¹ã§ã¯ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®çµæœã«åŸºã¥ã„ã¦ã•ã‚‰ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒè¡Œã‚ã‚Œã‚‹ãŸã‚ã€messageRepositoryã‚’ãƒ—ãƒ­ã‚­ã‚·ã™ã‚‹ã“ã¨ã¯ç„¡æ„å‘³ã§ã™ã€‚ messageRepositoryã«å¯¾ã™ã‚‹è¦æ±‚ã¯1ã¤ã—ã‹ãªã„ãŸã‚ã€ã“ã‚Œã¯å•é¡Œã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã—ãŸãŒã£ã¦ã€ã“ã“ã§ã¯ãƒãƒƒãƒå‡¦ç†ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å˜ç´”ãªé–¢æ•°UserReference-&gt; UserRemoteãŠã‚ˆã³FileReference-&gt; FileHeadRemoteã‚’ãƒ—ãƒ­ã‚­ã‚·ã™ã‚‹ã®ã§ã€å¼•æ•°ã®2ã¤ã®ãƒªã‚¹ãƒˆã‚’è“„ç©ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã®çµæœã€æ¬¡ã®çµæœãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚</font></font></b><div class="spoiler_text"><code><font color="7f0055"><b>class&nbsp;</b></font><font color="3e7eff"><b>ChatRestController</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">messageRepository</font>:&nbsp;<font color="3e7eff"><b>ChatMessageRepository</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">userRepository</font>:&nbsp;<font color="3e7eff"><b>UserRemoteApi</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>private&nbsp;val&nbsp;</b></font><font color="566874">fileRepository</font>:&nbsp;<font color="3e7eff"><b>FileRemoteApi</b></font><br>
<font color="000066">)&nbsp;</font>:&nbsp;<font color="3e7eff"><b>ChatRestApi&nbsp;</b></font><font color="000066">{</font><br>
&nbsp;&nbsp;<font color="7f0055"><b>override&nbsp;fun&nbsp;</b></font><font color="170591"><b>getLast</b></font><font color="000066">(</font><font color="000066"><i>n</i></font>:&nbsp;<font color="3e7eff"><b>Int</b></font><font color="000066">)</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>ChatMessageUI</b></font><font color="333333">&gt;&nbsp;</font><font color="000066">{</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="170591">messages&nbsp;</font><font color="333333">=&nbsp;</font><font color="566874">messageRepository</font><font color="333333">.</font><font color="170591">findLast</font><font color="000066">(</font><font color="000066"><i>n</i></font><font color="000066">)</font><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="7f0055"><b>fun&nbsp;</b></font><font color="170591"><b>transform</b></font><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><i>getUser</i></font>:&nbsp;<font color="000066">(</font><font color="3e7eff"><b>UserReference</b></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="3e7eff"><b>UserRemote</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><i>getFile</i></font>:&nbsp;<font color="000066">(</font><font color="3e7eff"><b>FileReference</b></font><font color="000066">)&nbsp;-&gt;&nbsp;</font><font color="3e7eff"><b>FileHeadRemote</b></font><br>
<font color="3e7eff"><b>&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066">)</font>:&nbsp;<font color="3e7eff"><b>List</b></font><font color="333333">&lt;</font><font color="3e7eff"><b>ChatMessageUI</b></font><font color="333333">&gt;&nbsp;=</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="3e7eff"><b>messages</b></font><font color="333333">.</font><i><b>map</b></i><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i><b>recursiveMemoize&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>message</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>self&nbsp;</i></font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066"><i>message</i></font><font color="333333">.</font><i><b>toFrontModel</b></i><font color="000066">(</font><font color="000066"><i>getUser</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>getFile</i></font><font color="333333">,&nbsp;</font><font color="000066"><i>self</i></font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066">)</font><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="3f7f5f">//&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="170591">userIds&nbsp;</font><font color="333333">=&nbsp;</font><i><b>mutableSetOf</b></i><font color="333333">&lt;</font><font color="3e7eff"><b>UserReference</b></font><font color="333333">&gt;</font><font color="000066">()</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="7f0055"><b>val&nbsp;</b></font><font color="170591">fileIds&nbsp;</font><font color="333333">=&nbsp;</font><i><b>mutableSetOf</b></i><font color="333333">&lt;</font><font color="3e7eff"><b>FileReference</b></font><font color="333333">&gt;</font><font color="000066">()</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="170591">transform</font><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>{&nbsp;</b></font><font color="3e7eff"><b>userIds&nbsp;</b></font><font color="333333">+=&nbsp;</font><b>it</b><font color="333333">;&nbsp;</font><font color="170591">UserRemote</font><font color="000066">(</font><font color="333333"><b>0L</b></font><font color="333333">,&nbsp;</font><b>""</b><font color="000066">)&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>{&nbsp;</b></font><font color="3e7eff"><b>fileIds&nbsp;</b></font><font color="333333">+=&nbsp;</font><font color="000066"><i>it</i></font><font color="333333">;&nbsp;</font><font color="170591">FileHeadRemote</font><font color="000066">(</font><font color="333333"><b>0L</b></font><font color="333333">,&nbsp;</font><b>""</b><font color="000066">)&nbsp;</font><font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066">)</font><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="7f0055"><b>return&nbsp;</b></font><i><b>runBlocking</b></i><font color="000066">(</font><font color="05314d"><b>IO</b></font><font color="000066">)&nbsp;</font><font color="000066"><b>{</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="3f7f5f">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i><b>async</b></i><font color="000066">(</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>{&nbsp;</b></font><font color="566874">userRepository</font><font color="333333">.</font><font color="170591">getUsersByIds</font><font color="000066">(</font><font color="3e7eff"><b>userIds</b></font><font color="000066">)</font><font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}</b></font>::get<font color="333333">.</font><i><b>orThrow</b></i><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font><font color="333333">,</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>{&nbsp;</b></font><font color="566874">fileRepository</font><font color="333333">.</font><font color="170591">getHeadsByIds</font><font color="000066">(</font><font color="3e7eff"><b>fileIds</b></font><font color="000066">)</font><font color="333333">.</font><i><b>associateBy&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066"><i>it</i></font><font color="333333">.</font><font color="566874">id&nbsp;</font><font color="000066"><b>}</b></font>::get<font color="333333">.</font><i><b>orThrow</b></i><font color="000066">()&nbsp;</font><font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="000066">)</font><font color="333333">.</font><font color="170591">await</font><font color="000066">()</font><font color="333333">.</font><i><b>let&nbsp;</b></i><font color="000066"><b>{&nbsp;</b></font><font color="000066">(</font><font color="170591">getUser</font><font color="333333">,&nbsp;</font><font color="170591">getFile</font><font color="000066">)&nbsp;</font><font color="000066"><b>-&gt;</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></font><font color="170591">transform</font><font color="000066">(</font><font color="170591">getUser</font><font color="333333">,&nbsp;</font><font color="170591">getFile</font><font color="000066">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="000066"><b>}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;&nbsp;&nbsp;}</b></font><br>
<font color="000066"><b>&nbsp;&nbsp;</b></font><font color="000066">}</font><br>
<font color="000066">}</font></code></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æ¸¬å®šã™ã‚‹å ´åˆã€ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã¯ã€é–¢æ•°ã‚’2å›å‘¼ã³å‡ºã—ã¾ã™ãŒã€ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°æ‰‹æ³•ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã‚Šã‚‚æ‚ªããªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€å¤–éƒ¨ã‚¯ã‚¨ãƒªã®å®Ÿè¡Œæ™‚é–“ã¨æ¯”è¼ƒã—ã¦ã€å¤‰æ›é–¢æ•°ã®å®Ÿè¡Œæ™‚é–“ã‚’ç„¡è¦–ã§ãã‚‹ãŸã‚ã§ã™ï¼ˆã“ã®å ´åˆï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ“ã‚¸ãƒã‚¹ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨æ¯”è¼ƒã™ã‚‹ã¨ã€ç§ãŸã¡ã®å ´åˆã€ã‚¯ã‚¨ãƒªã®ç´¯ç©ã¯ã‚ã¾ã‚ŠåŠ¹æœçš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ãã®ã‚ˆã†ãªå„ªã‚ŒãŸãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚’å¸¸ã«è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨ã¯é™ã‚‰ãªã„ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</font><font style="vertical-align: inherit;">ãŸã¨ãˆã°ã€ãƒãƒ£ãƒƒãƒˆã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ãŒå¤šãã€ãƒ•ã‚¡ã‚¤ãƒ«ã®æ•°ã‚‚å¤šãã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã»ã¨ã‚“ã©æ·»ä»˜ã•ã‚Œã¦ã„ãªã„å ´åˆã€ãƒ“ã‚¸ãƒã‚¹ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ã™ãã«å¤±ã‚ã‚Œã€æ­£ç›´ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒªã‚¹ãƒˆã‚’å—ä¿¡ã—ã¾ã™ã€‚</font></font><br>
<br>
<a name="Summary4"></a><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµè«–ã®</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ãƒ¡ãƒªãƒƒãƒˆï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã«ã€ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚³ãƒ¼ãƒ‰ã®ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã»ã¨ã‚“ã©ã®å ´åˆã€ãƒ¡ã‚¤ãƒ³é–¢æ•°ã‚’å¤‰æ›´ã—ã¦ã‚‚ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã«ã¯å½±éŸ¿ã—ã¾ã›ã‚“ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã¯ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã¨åŒã˜ãã‚‰ã„å„ªã‚Œã¦ã„ã¾ã™ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒã‚¤ãƒŠã‚¹ï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥å‰ã®ã‚¯ã‚¨ãƒªã®çµæœã‹ã‚‰æ¬¡ã®ã‚¯ã‚¨ãƒªã‚’ç‹¬ç«‹ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã‚Œã¯ã‚ã£ãŸã«ä½¿ç”¨ã•ã‚Œãªã„ãŸã‚ã€ãƒ­ã‚¸ãƒƒã‚¯ã¯ãã‚Œã»ã©æ˜ç™½ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ˜ã‚‰ã‹ãªç•°å›½é¢¨ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€ãƒ—ãƒ­ã‚­ã‚·ã¨ãƒªã‚³ãƒ¼ãƒ«ã«ã‚ˆã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®è“„ç©ã¯ã€ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒå—ä¿¡ãƒ‡ãƒ¼ã‚¿ã«é–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦ã„ãªã„çŠ¶æ³ã§éå¸¸ã«é©ç”¨ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã“ã§ã®ä¸»ãªå•é¡Œã¯ã€ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®å ´åˆã¨åŒã˜ã§ã™ã€‚ç¾åœ¨ã®æ©Ÿèƒ½ã®å®Ÿè£…ã«å–ã‚Šâ€‹â€‹æ›ã‹ã£ã¦ã„ã¾ã™ãŒã€ãã®ç¨‹åº¦ã¯ã¯ã‚‹ã‹ã«å°ã•ããªã£ã¦ã„ã¾ã™ï¼ˆæ¬¡ã®ã‚¯ã‚¨ãƒªãŒä»¥å‰ã®ã‚¯ã‚¨ãƒªã®çµæœã«ä¾å­˜ã—ãªã„ã¨ã„ã†äº‹å®Ÿã«ã®ã¿ä¾å­˜ã—ã¾ã™ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¯å°‘ã—ä½ä¸‹ã—ã¾ã™ãŒã€ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã‚³ãƒ¼ãƒ‰ã§ã¯ã€ãƒ¡ã‚¤ãƒ³é–¢æ•°ã®å®Ÿè£…ã®ã™ã¹ã¦ã®ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ã‚’è€ƒæ…®ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ã€ã‚¯ã‚¨ãƒªäºˆæ¸¬ã®ãŸã‚ã®å„ªã‚ŒãŸãƒ“ã‚¸ãƒã‚¹ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚’æ§‹ç¯‰ã§ããšã€ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã¨é–¢æ•°ã®æ¥ç¶šã‚’å‰Šæ¸›ã—ãŸã„å ´åˆã«ä½¿ç”¨ã§ãã¾ã™ã€‚</font></font><br>
<br>
<a name="Conclusion"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµè«–</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒãƒƒãƒå‡¦ç†ã®ä½¿ç”¨ã¯ã€ä¸€è¦‹ã—ãŸã¨ã“ã‚ã»ã©ç°¡å˜ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã™ã¹ã¦ã®ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã“ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’è¦šãˆã¦ãŠã„ã¦ãã ã•ã„ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’åŠ¹ç‡çš„ã«ãƒãƒƒãƒå‡¦ç†ã™ã‚‹ã«ã¯ã€å‘¼ã³å‡ºã—å…ƒãŒã§ãã‚‹ã ã‘å¤šãã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’åé›†ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚ã“ã‚Œã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§‹é€ ã«ã‚ˆã£ã¦å¦¨ã’ã‚‰ã‚Œã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚Šã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹ç‡çš„ã«å‡¦ç†ã§ãã‚‹ã‚ˆã†ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­è¨ˆã™ã‚‹ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åå¿œæ€§ã®é«˜ã„ãƒ‡ãƒã‚¤ã‚¹ã«ã¤ãªãŒã‚‹å¯èƒ½æ€§ãŒéå¸¸ã«é«˜ã„ï¼‰ã‹ã€ã‚ˆãã‚ã‚‹ã“ã¨ã§ã™ãŒã€å¤§å¹…ãªå†æ§‹ç¯‰ã‚’è¡Œã‚ãšã«æ—¢å­˜ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒãƒƒãƒå‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã¿ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¯ã‚¨ãƒªã‚’ã¾ã¨ã‚ã‚‹æœ€ã‚‚æ˜ç™½ãªæ–¹æ³•ã¯ã€é‡ã„ã‚¯ã‚¨ãƒªã‚’æ¢ã™ãŸã‚ã«æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®ä¸»ãªæ¬ ç‚¹ã¯ã€æš—é»™çš„ãªã‚³ãƒ¼ãƒ‰æ¥ç¶šã®å¢—åŠ ã§ã™ã€‚</font><font style="vertical-align: inherit;">åˆ¥ã®æ–¹æ³•ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒ£ãƒ³ã‚¯ã«åˆ†å‰²ã™ã‚‹ãŸã‚ã«ãƒ“ã‚¸ãƒã‚¹æ©Ÿèƒ½ã«é–¢ã™ã‚‹æƒ…å ±ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã™ã€‚ãƒãƒ£ãƒ³ã‚¯ã¯ã€å¤šãã®å ´åˆå…±æœ‰ã•ã‚Œã€å…¨ä½“ã§ã™ã€‚</font><font style="vertical-align: inherit;">æ™‚ã€…ã€ãã®ã‚ˆã†ãªåŠ¹æœçš„ãªåˆ†é›¢ã®ãŸã‚ã«ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’éæ­£è¦åŒ–ã™ã‚‹ã“ã¨ãŒå¿…è¦ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã“ã‚ŒãŒæˆåŠŸã—ãŸå ´åˆã€ãƒãƒƒãƒå‡¦ç†ã®ãƒ­ã‚¸ãƒƒã‚¯ã¯ã‚µãƒ–ã‚¸ã‚§ã‚¯ãƒˆé ˜åŸŸã«ã‚ˆã£ã¦æ±ºå®šã•ã‚Œã€ã“ã‚Œã¯è‰¯ã„ã“ã¨ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã¹ã¦ã®è¦æ±‚ã‚’å–å¾—ã™ã‚‹ãã‚Œã»ã©æ˜ç™½ã§ã¯ãªã„æ–¹æ³•ã¯ã€2ã¤ã®ãƒ‘ã‚¹ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">æœ€åˆã®æ®µéšã§ã¯ã€å¿…è¦ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã™ã¹ã¦åé›†ã—ã€2ç•ªç›®ã®æ®µéšã§ã¯ã€ã™ã§ã«å—ä¿¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®é©ç”¨æ€§ã¯ã€ç›¸äº’ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ç‹¬ç«‹æ€§ã®è¦ä»¶ã«ã‚ˆã£ã¦åˆ¶é™ã•ã‚Œã¾ã™ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja467903/index.html">IntelliJ IDEAã®ãƒˆãƒƒãƒ—20ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã€‚ãƒ‘ãƒ¼ãƒˆ1</a></li>
<li><a href="../ja467909/index.html">iOSã§ã®ãƒãƒ£ãƒƒãƒˆï¼šã‚½ã‚±ãƒƒãƒˆã®ä½¿ç”¨</a></li>
<li><a href="../ja467913/index.html">ã€Œç²—æ‚ªãªé‰±ç‰©ã€ã€ã¾ãŸã¯ã‚½ãƒ¼ãƒ©ãƒ¼ãƒ‘ãƒãƒ«ã®æ–°ã—ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’æ”¹å–„ã™ã‚‹æ–¹æ³•</a></li>
<li><a href="../ja467915/index.html">Openshiftå†…ã®postgresã®ç›£è¦–</a></li>
<li><a href="../ja467917/index.html">ç®¡ç†ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</a></li>
<li><a href="../ja467921/index.html">ã»ã“ã‚Šã£ã½ã„ãƒšãƒ³ã‚’å–ã‚Šå‡ºã—ã¦ãã ã•ã„ï¼šæ‰‹æ›¸ãã¯è„³ã«è‰¯ã„ã§ã™</a></li>
<li><a href="../ja467923/index.html">ã‚ãªãŸã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®åˆ†é‡ã®ã‚¢ãƒŠãƒªã‚¹ãƒˆã«ãªã‚ŠãŸã„ã¨æ€ã£ã¦ã„ã¾ã™...</a></li>
<li><a href="../ja467925/index.html">é–‹ç™ºè€…ãŒãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒã‚’ãã‚“ãªã«å¥½ããªç†ç”±</a></li>
<li><a href="../ja467929/index.html">ã‚«ã‚ªã‚¹ã‚’çµ„ç¹”ã™ã‚‹ã€ã¾ãŸã¯çµ„ç¹”ã«ãƒ—ãƒ­ã‚»ã‚¹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•</a></li>
<li><a href="../ja467933/index.html">ãã‚Œã§ã‚‚ã€PositãŒIEEâ€‹â€‹E 754ã«ä»£ã‚ã‚‹ä¾¡å€¤ã®ã‚ã‚‹ç†ç”±</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>