<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥘 🤟🏻 🚍 Testen von JavaScript-Code mit Jest auf Dummies. Teil 1 🗻 👏🏾 🚤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Dieser Leitfaden ist der erste Teil einer geplanten Artikelserie über ein so großartiges Test-Framework wie Jest. Das Material ist nützlic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Testen von JavaScript-Code mit Jest auf Dummies. Teil 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502302/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo Habr! </font><font style="vertical-align: inherit;">Dieser Leitfaden ist der erste Teil einer geplanten Artikelserie über ein so großartiges Test-Framework wie Jest. </font><font style="vertical-align: inherit;">Das Material ist nützlich für Anfänger und diejenigen, die sich gerade erst mit dem Testen vertraut machen und dieses Framework studieren möchten. </font><font style="vertical-align: inherit;">Im ersten Teil werden wir diskutieren: wie man mit Scherz anfängt, wie man einen einfachen Test schreibt und welche Methoden es gibt, um die zu prüfenden Werte mit den erwarteten zu vergleichen. </font><font style="vertical-align: inherit;">Wen kümmert es - willkommen bei kat!</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist Scherz?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie auf der Projekthomepage angegeben:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jest ist eine erstaunliche JavaScript-Testumgebung mit Schwerpunkt auf Einfachheit.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und in der Tat ist Jest sehr einfach. </font><font style="vertical-align: inherit;">Es erfordert keine zusätzlichen Einstellungen, ist leicht zu verstehen und zu verwenden und verfügt auch über eine ziemlich gute Dokumentation. </font><font style="vertical-align: inherit;">Ideal für Projekte mit Node, React, Angular, Vue, Babel, TypeScript und mehr. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist auch Open Source und wird von Facebook unterstützt.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gehen Sie wie folgt vor, um Jest in Ihrem Projekt zu installieren:</font></font><br>
<br>
<pre><code class="bash hljs">npm install --save-dev jest</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie Garn verwenden:</font></font><br>
<br>
<pre><code class="bash hljs">yarn add --dev jest</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach der Installation können Sie den Skriptabschnitt Ihrer package.json aktualisieren:</font></font><br>
<br>
<pre><code class="json hljs">“scripts” : {<font></font>
     “test”: “jest”<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit diesem einfachen Aufruf können wir unsere Tests bereits ausführen (für Scherz muss mindestens ein Test vorhanden sein). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können auch global installieren (dies würde ich jedoch nicht empfehlen, da die globale Installation von Modulen für mich eine schlechte Praxis ist):</font></font><br>
<br>
<pre><code class="bash hljs">npm install jest --global</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und dementsprechend für Garn:</font></font><br>
<br>
<pre><code class="bash hljs">yarn global add jest</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach können Sie Jest direkt über die Befehlszeile verwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie den Befehl jest --init im Stammverzeichnis des Projekts aufrufen und nach Beantwortung einiger Fragen die Einstellungsdatei jest.config.js abrufen. </font><font style="vertical-align: inherit;">Oder Sie können die Konfiguration direkt zu package.json hinzufügen. </font><font style="vertical-align: inherit;">Fügen Sie dazu den Schlüssel "jest" zum json-Stammverzeichnis hinzu und fügen Sie im entsprechenden Objekt die erforderlichen Einstellungen hinzu. </font><font style="vertical-align: inherit;">Wir werden die Optionen später selbst analysieren. </font><font style="vertical-align: inherit;">Dies ist zu diesem Zeitpunkt nicht erforderlich, da der Scherz ohne zusätzliche Konfigurationen sofort verwendet werden kann.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erster Test</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns die Datei first.test.js erstellen und unseren ersten Test schreiben:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//first.test.js</span>
test(<span class="hljs-string">'My first test'</span>, () =&gt; {<font></font>
    expect(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>)).toBe(<span class="hljs-number">10</span>);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Führen Sie unsere Tests mit npm run test oder direkt mit dem Befehl jest aus (falls global installiert). </font><font style="vertical-align: inherit;">Nach dem Start wird ein Bericht über das Bestehen der Tests angezeigt.</font></font><br>
<br>
<pre><code class="plaintext hljs"> &lt;b&gt;PASS&lt;/b&gt;  ./first.test.js<font></font>
  ✓ My first test (1 ms)<font></font>
<font></font>
Test Suites: 1 passed, 1 total<font></font>
Tests:       1 passed, 1 total<font></font>
Snapshots:   0 total<font></font>
Time:        0.618 s, estimated 1 s<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns unseren Test abbrechen und erneut scherzen:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//first.test.js</span>
test(<span class="hljs-string">'My first test'</span>, () =&gt; {<font></font>
    expect(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>)).toBe(<span class="hljs-number">5</span>);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie wir sehen können, besteht unser Test den Test jetzt nicht. Jest zeigt detaillierte Informationen darüber an, wo das Problem aufgetreten ist, was das erwartete Ergebnis war und was wir stattdessen erhalten haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns nun den Code des Tests selbst analysieren. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testfunktion</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird verwendet, um einen neuen Test zu erstellen. Es werden drei Argumente benötigt (im Beispiel haben wir einen Aufruf mit zwei Argumenten verwendet). Die erste ist eine Zeile mit dem Namen des Tests, dessen Scherz im Bericht angezeigt wird. Die zweite ist eine Funktion, die die Logik unseres Tests enthält. Sie können auch das dritte Argument verwenden - Timeout. Es ist optional und der Standardwert beträgt 5 Sekunden. Es wird in Millisekunden eingestellt. Dieser Parameter ist erforderlich, wenn wir mit asynchronem Code arbeiten und ein Versprechen von der Testfunktion zurückgeben. Es gibt an, wie lange der Scherz warten muss, bis sich das Versprechen aufgelöst hat. Wenn das Versprechen nach dieser Zeit nicht eingehalten wurde, wird der Test als fehlgeschlagen angesehen. Weitere Informationen zum Arbeiten mit asynchronen Aufrufen finden Sie in den folgenden Abschnitten. Alternativ können </font><font style="vertical-align: inherit;">Sie </font><i><font style="vertical-align: inherit;">es ()</font></i><font style="vertical-align: inherit;"> anstelle von </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test </font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">() verwenden.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Es gibt keinen Unterschied zwischen solchen Anrufen. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">it ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist nur ein Alias ​​für die Funktion </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Innerhalb der Testfunktion rufen wir zuerst </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">require () auf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . An ihn geben wir den Wert weiter, den wir überprüfen möchten. In unserem Fall ist dies das Ergebnis des Aufrufs von </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Math.max (1, 5, 10)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erwarteten ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gibt ein Wrapper-Objekt zurück, das eine Reihe von Methoden zum Vergleichen des resultierenden Werts mit dem erwarteten Wert enthält. Eine dieser Methoden, die wir verwendet haben, ist </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBe</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns die wichtigsten dieser Methoden an:</font></font><br>
<br>
<ul>
<li><b>toBe()</b> — ,                ,     .     <i>Object.is()</i>.    ===     0  -0,   NaN c NaN.</li>
<li><b>toEqual()</b> — ,        .        .    .       .<br>
<br>
<pre><code class="javascript hljs">test(<span class="hljs-string">'toEqual with objects'</span>, () =&gt; {<font></font>
    expect({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">baz</span>: <span class="hljs-string">'baz'</span> } })<font></font>
        .toEqual({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">baz</span>: <span class="hljs-string">'baz'</span> } });  <span class="hljs-comment">// </span>
    expect({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">num</span>: <span class="hljs-number">0</span> } })<font></font>
        .toEqual({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">baz</span>: <span class="hljs-string">'baz'</span> } });  <span class="hljs-comment">//    .</span><font></font>
});<font></font>
<font></font>
test(<span class="hljs-string">'toEqual with arrays'</span>, () =&gt; {<font></font>
    expect([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>, <span class="hljs-number">5</span>]).toEqual([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>, <span class="hljs-number">5</span>]); <span class="hljs-comment">// </span>
    expect([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>, <span class="hljs-number">5</span>]).toEqual([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>]); <span class="hljs-comment">// </span><font></font>
});<font></font>
</code></pre><br>
</li>
<li><b>toContain()</b> —       .     ===.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> arr = [<span class="hljs-string">'apple'</span>, <span class="hljs-string">'orange'</span>, <span class="hljs-string">'banana'</span>];<font></font>
expect(arr).toContain(<span class="hljs-string">'banana'</span>);<font></font>
expect(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(arr)).toContain(<span class="hljs-string">'banana'</span>);<font></font>
expect(<span class="hljs-string">'apple, orange, banana'</span>).toContain(<span class="hljs-string">'banana'</span>);
</code></pre><br>
</li>
<li><b>toContainEqual()</b> —        .<br>
<br>
<pre><code class="javascript hljs">expect([{<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>}, {<span class="hljs-attr">b</span>: <span class="hljs-number">2</span>}]).toContainEqual({<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>});
</code></pre><br>
</li>
<li><b>toHaveLength()</b> —    length    .<br>
<br>
<pre><code class="javascript hljs">expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]).toHaveLength(<span class="hljs-number">4</span>);<font></font>
expect(<span class="hljs-string">'foo'</span>).toHaveLength(<span class="hljs-number">3</span>);<font></font>
expect({ <span class="hljs-attr">length</span>: <span class="hljs-number">1</span> }).toHaveLength(<span class="hljs-number">1</span>);
</code></pre><br>
</li>
<li><b>toBeNull()</b> —     null.</li>
<li><b>toBeUndefined()</b> —     undefined.</li>
<li><b>toBeDefined()</b> — <i> toBeUndefined</i>.    !== undefined.</li>
<li><b>toBeTruthy()</b> —        true.     false, null, undefined, 0, NaN   .</li>
<li><b>toBeFalsy()</b> —  <i>toBeTruthy()</i>.        false.</li>
<li><b>toBeGreaterThan()</b>  <b>toBeGreaterThanOrEqual()</b> —        ,   &gt;,       &gt;=.</li>
<li><b>toBeLessThan()</b>  <b>toBeLessThanOrEqual()</b> —  <i>toBeGreaterThan()</i>  <i>toBeGreaterThanOrEqual()</i></li>
<li><b>toBeCloseTo()</b> —       ,         ,        .             .<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> num = <span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span>; <span class="hljs-comment">// 0.30000000000000004</span>
expect(num).toBeCloseTo(<span class="hljs-number">0.3</span>);<font></font>
expect(<span class="hljs-built_in">Math</span>.PI).toBeCloseTo(<span class="hljs-number">3.14</span>, <span class="hljs-number">2</span>);
</code></pre><br>
</li>
<li><b>toMatch()</b> —     .<br>
<br>
<pre><code class="javascript hljs">expect(<span class="hljs-string">'Banana'</span>).toMatch(<span class="hljs-regexp">/Ba/</span>);
</code></pre><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toThrow ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - wird verwendet, wenn die Ausnahme überprüft werden muss. </font><font style="vertical-align: inherit;">Sie können sowohl die Tatsache des Fehlers selbst als auch das Auslösen von Ausnahmen einer bestimmten Klasse überprüfen, entweder anhand der Fehlermeldung oder anhand der Entsprechung der Nachricht mit dem regulären Ausdruck.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">funcWithError</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'some error'</span>);<font></font>
}   <font></font>
expect(funcWithError).toThrow();<font></font>
expect(funcWithError).toThrow(<span class="hljs-built_in">Error</span>);<font></font>
expect(funcWithError).toThrow(<span class="hljs-string">'some error'</span>);<font></font>
expect(funcWithError).toThrow(<span class="hljs-regexp">/some/</span>);
</code></pre><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nicht</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Mit dieser Eigenschaft können Sie nach Ungleichheit suchen. </font><font style="vertical-align: inherit;">Es stellt ein Objekt bereit, das alle oben aufgeführten Methoden enthält, aber umgekehrt funktioniert.</font></font><br>
<br>
<pre><code class="javascript hljs">expect(<span class="hljs-literal">true</span>).not.toBe(<span class="hljs-literal">false</span>);<font></font>
expect({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span> }).not.toEqual({});<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">funcWithoutError</span>(<span class="hljs-params"></span>) </span>{}<font></font>
expect(funcWithoutError).not.toThrow();<font></font>
</code></pre></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns ein paar einfache Tests schreiben. </font><font style="vertical-align: inherit;">Erstellen Sie zunächst ein einfaches Modul, das verschiedene Methoden zum Arbeiten mit Kreisen enthält.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/circle.js</span>
<span class="hljs-keyword">const</span> area = <span class="hljs-function">(<span class="hljs-params">radius</span>) =&gt;</span> <span class="hljs-built_in">Math</span>.PI * radius ** <span class="hljs-number">2</span>;
<span class="hljs-keyword">const</span> circumference = <span class="hljs-function">(<span class="hljs-params">radius</span>) =&gt;</span> <span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI * radius;
<span class="hljs-built_in">module</span>.exports = { area, circumference };
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fügen Sie als Nächstes die Tests hinzu:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// tests/circle.test.js</span>
<span class="hljs-keyword">const</span> circle = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../src/circle'</span>);<font></font>
<font></font>
test(<span class="hljs-string">'Circle area'</span>, () =&gt; {<font></font>
    expect(circle.area(<span class="hljs-number">5</span>)).toBeCloseTo(<span class="hljs-number">78.54</span>);<font></font>
    expect(circle.area()).toBeNaN();<font></font>
});<font></font>
<font></font>
test(<span class="hljs-string">'Circumference'</span>, () =&gt; {<font></font>
    expect(circle.circumference(<span class="hljs-number">11</span>)).toBeCloseTo(<span class="hljs-number">69.1</span>, <span class="hljs-number">1</span>);<font></font>
    expect(circle.circumference()).toBeNaN();<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesen Tests haben wir das Ergebnis von 2 Methoden überprüft - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fläche</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Umfang</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Mit der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeCloseTo-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><i><font style="vertical-align: inherit;">haben</font></i><font style="vertical-align: inherit;"> wir das erwartete Ergebnis überprüft. </font><font style="vertical-align: inherit;">Im ersten Fall haben wir geprüft, oder die berechnete Fläche des Kreises mit einem Radius von 5 entspricht ungefähr 78,54, während die Differenz zum erhaltenen Wert (78,53981633974483) nicht groß ist und der Test gezählt wird. </font><font style="vertical-align: inherit;">Im zweiten haben wir angegeben, dass wir daran interessiert sind, auf 1 Dezimalstelle zu prüfen. </font><font style="vertical-align: inherit;">Wir haben unsere Methoden auch ohne Argumente aufgerufen und das Ergebnis mit </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeNaN</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> überprüft </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Da das Ergebnis ihrer Ausführung NaN ist, werden die Tests erfolgreich bestanden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nehmen wir ein anderes Beispiel. </font><font style="vertical-align: inherit;">Erstellen wir eine Funktion, die eine Reihe von Produkten nach Preis filtert:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/productFilter.js</span>
<span class="hljs-keyword">const</span> byPriceRange = <span class="hljs-function">(<span class="hljs-params">products, min, max</span>) =&gt;</span>
         products.filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.price &gt;= min &amp;&amp; item.price &lt;= max);
<span class="hljs-built_in">module</span>.exports = { byPriceRange };
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und fügen Sie einen Test hinzu:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// tests/product.test.js</span>
<span class="hljs-keyword">const</span> productFilter = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../src/producFilter'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> products = [<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'onion'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">12</span> },<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'tomato'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">26</span> },<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'banana'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">29</span> },<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'orange'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">38</span> }<font></font>
];<font></font>
<font></font>
test(<span class="hljs-string">'Test product filter by range'</span>, () =&gt; {
    <span class="hljs-keyword">const</span> FROM = <span class="hljs-number">15</span>;
    <span class="hljs-keyword">const</span> TO = <span class="hljs-number">30</span>;
    <span class="hljs-keyword">const</span> filteredProducts = productFilter.byPriceRange(products, FROM, TO);<font></font>
<font></font>
    expect(filteredProducts).toHaveLength(<span class="hljs-number">2</span>);<font></font>
    expect(filteredProducts).toContainEqual({ <span class="hljs-attr">name</span>: <span class="hljs-string">'tomato'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">26</span> });<font></font>
    expect(filteredProducts).toEqual([{ <span class="hljs-attr">name</span>: <span class="hljs-string">'tomato'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">26</span> }, { <span class="hljs-attr">name</span>: <span class="hljs-string">'banana'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">29</span> }]);<font></font>
    expect(filteredProducts[<span class="hljs-number">0</span>].price).toBeGreaterThanOrEqual(FROM);<font></font>
    expect(filteredProducts[<span class="hljs-number">1</span>].price).toBeLessThanOrEqual(TO);<font></font>
    expect(filteredProducts).not.toContainEqual({ <span class="hljs-attr">name</span>: <span class="hljs-string">'orange'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">38</span> });<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Test überprüfen wir das Ergebnis der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funktion</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> byRangePrice </font><font style="vertical-align: inherit;">. Zuerst haben wir die Entsprechung der Länge des resultierenden Arrays mit dem erwarteten - 2 überprüft. Die nächste Überprüfung erfordert, dass das Element das Element enthält - {Name: 'Tomate', Preis: 26}. Das Objekt im Array und das an </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContainEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> übergebene </font><i><font style="vertical-align: inherit;">Objekt</font></i><font style="vertical-align: inherit;"> sind zwei verschiedene Objekte, keine Verweise auf dasselbe. Aber </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toContainEqual wird</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jede Eigenschaft vergleichen. Da beide Objekte identisch sind, ist die Überprüfung erfolgreich. Als nächstes verwenden wir </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um die Struktur des gesamten Arrays und seiner Elemente zu überprüfen. Mit den </font><i><font style="vertical-align: inherit;">Methoden </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeGreaterThanOrEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeLessThanOrEqual können</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wir den Preis des ersten und zweiten Elements des Arrays überprüfen. Und schließlich </font><i><font style="vertical-align: inherit;">not.toContainEqual</font></i><font style="vertical-align: inherit;"> aufrufen</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prüft, ob das Element im Array enthalten ist - {name: 'orange', price: 38}, das unter bestimmten Bedingungen nicht vorhanden sein sollte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesen Beispielen haben wir einige einfache Tests mit den oben beschriebenen Verifizierungsfunktionen geschrieben. </font><font style="vertical-align: inherit;">In den folgenden Abschnitten werden wir diskutieren, wie man mit asynchronem Code arbeitet, welche Scherzfunktionen in diesem Teil des Tutorials nicht behandelt wurden, wie man ihn konfiguriert und vieles mehr.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de502276/index.html">Kanban-Methode: Beispiel PNZ Nr. 2: Schulungen und Kurse</a></li>
<li><a href="../de502278/index.html">So bearbeiten Sie Python-Tests nicht</a></li>
<li><a href="../de502286/index.html">Feuerroboter</a></li>
<li><a href="../de502292/index.html">Wir schreiben einen Autotest mit Selenium Webdriver, Java 8 und dem Page Object-Muster</a></li>
<li><a href="../de502298/index.html">Kumulatives Flussdiagramm (CFD) als Indikator für den Zustand Ihres Projekts</a></li>
<li><a href="../de502306/index.html">Aus der Geschichte des „nicht standardmäßigen“ Satellitenrundfunks</a></li>
<li><a href="../de502308/index.html">Was hält den Aktienmarkt von einem großen Rückgang ab und was haben Technologieunternehmen damit zu tun?</a></li>
<li><a href="../de502312/index.html">Visuelle und Instrumentenflugregeln</a></li>
<li><a href="../de502314/index.html">Tanezhis Aufgabe: eine neue Stufe in der Entwicklung der Mathematik?</a></li>
<li><a href="../de502316/index.html">FCC eröffnet 6-GHz-Band für drahtlose Netzwerke - warum nicht jeder das für eine gute Idee hält</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>