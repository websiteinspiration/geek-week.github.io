<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöï üçî üí® Hack Age of Empires III para cambiar la configuraci√≥n de calidad del sombreador üõ°Ô∏è üë©üèø‚Äç‚öñÔ∏è üîã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El comienzo de mayo de 2020: si eres como yo, entonces la cuarentena te hizo rehacer juegos que no se han lanzado desde hace muchos a√±os. 
 
 Y si ere...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Hack Age of Empires III para cambiar la configuraci√≥n de calidad del sombreador</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500542/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El comienzo de mayo de 2020: si eres como yo, entonces la cuarentena te hizo rehacer juegos que no se han lanzado desde hace muchos a√±os. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y si eres a√∫n m√°s como yo, entonces en alg√∫n lugar podr√≠as tener un disco de Age of Empires 3. Tal vez est√°s jugando en una Mac, tal vez a√∫n no te has actualizado a Catalina y te gustar√≠a comandar a Morgan Black. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, comienzas el juego, entras en el men√∫ principal e inmediatamente notas que algo est√° mal ... El men√∫ parece </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">asqueroso</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5be/dfa/a66/5bedfaa660037faa86c176d9586f9d1a.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si se pregunta qu√© es exactamente "desagradable", preste atenci√≥n al agua. </font><font style="vertical-align: inherit;">Todo lo dem√°s tambi√©n es terrible, pero es menos obvio.</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/578/2d3/34f/5782d334f3be69385a0b69072ef6b7ed.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, entras en las opciones, elevas todos los par√°metros al m√°ximo ... Pero el juego sigue siendo feo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observa que las opciones de </font><font style="vertical-align: inherit;">" </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calidad del sombreador</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><font style="vertical-align: inherit;">est√°n </font><font style="vertical-align: inherit;">sospechosamente bloqueadas en " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baja</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ".</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intento No. 1 - par√°metros de pirateo</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este punto, comienzas a buscar la carpeta del juego, que supuestamente se cre√≥ en alg√∫n lugar de la carpeta Documentos, porque el juego fue en 2005, y luego todos lo hicieron. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© estamos buscando? Por supuesto, el archivo en el que se almacenan los par√°metros. La interfaz del men√∫ no nos permite cambiar la configuraci√≥n, pero somos complicados, ¬øverdad? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encontramos el XML requerido, porque el juego es 2005 y es, por supuesto, XML, donde encontramos la opci√≥n " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">optiongrfxshaderquality</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", que est√° establecida en 0. Parece que lo est√°bamos buscando, por lo que aumentamos el valor a 100, porque no hay mucha calidad. Aqu√≠ estoy de acuerdo contigo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/61d/de5/d85/61dde5d85e5442f781fe9c4eaeb46a55.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambi√©n puede notar que este es un uso terrible de XML. Afortunadamente, no tiene buenos usos.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Satisfechos con nosotros mismos, lanzamos el juego. Por desgracia, nada ha cambiado. Al mirar nuevamente el archivo XML, vemos que el par√°metro se establece nuevamente en 0. Ensemble Studios (que descanse en paz) mira con desprecio todo su ingenio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">podr√≠amos rendirnos</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Esta es una Mac, por lo tanto, es poco probable que se encuentren los parches escritos por los usuarios (de hecho, lo verifiqu√©, hay todo tipo de soluciones dudosas que pueden funcionar). Se trata de los gr√°ficos. Parece que solucionar el problema ser√° dif√≠cil.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero no nos rendiremos. </font><font style="vertical-align: inherit;">Porque recordamos c√≥mo deber√≠a ser la edad 3. Recordamos c√≥mo admiramos esta hermosa agua ondulada. </font><font style="vertical-align: inherit;">Estos efectos de part√≠culas. </font><font style="vertical-align: inherit;">Estas enormes naves que simplemente no encajan en el marco. </font><font style="vertical-align: inherit;">Y, es solo que la c√°mara fue ampliada, ¬øen qu√© estaba pensando?</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intento No. 1 - pirater√≠a de datos</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al principio de la carpeta en Documentos hay un archivo de registro. El juego escribi√≥ una tarjeta gr√°fica all√≠ e inform√≥ que hab√≠a seleccionado la configuraci√≥n "gen√©rico dx7". Dice que ha instalado Intel GMA 950, que realmente estaba en la computadora anterior. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero en esto tienes Intel Iris Graphics 6100. Algo est√° realmente mal. Supone: el juego determina las capacidades gr√°ficas de la computadora, compar√°ndolas con una base de datos de tarjetas gr√°ficas en lugar de verificar las capacidades de la tarjeta en s√≠. Porque eso es exactamente lo que hacen los desarrolladores de AAA, y si trabajaste en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RTS de c√≥digo abierto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , entonces sabes c√≥mo sucede esto.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b6e/8b3/fb2/b6e8b3fb28030917e8300cdce5653fac.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El contenido del archivo de registro. Si le parece curioso que Intel est√© designado como 0x8086, ha elegido el art√≠culo apropiado.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Por casualidad, encontrar√° </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">notas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> antiguas de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">parches</font></a><font style="vertical-align: inherit;"> que confirman sus inquietudes. Buscas en la carpeta GameData, pero solo </font><em><font style="vertical-align: inherit;">hay archivos </font></em></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.bar</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.xmb</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que en su mayor√≠a son ilegibles. </font><em><font style="vertical-align: inherit;">Est√° buscando</font></em><font style="vertical-align: inherit;"> grep " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " y " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dx7</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". No pasa nada. Eliminar varios archivos ... No pasa nada. Pero sabes que los juegos AAA pueden almacenar algunos recursos en lugares extra√±os, y este es el puerto de los juegos de Windows en Mac, por lo que todo puede ser muy extra√±o aqu√≠.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En √∫ltima instancia, encontrar√° el archivo "render.bar", si lo mueve, el juego se bloquea cuando se inicia. No est√° muy claro, pero no est√° mal. Abrimos el archivo en </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hex Fiend</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , porque este programa generalmente le permite aprender algo sobre archivos binarios. Y as√≠ resulta. Parte de estos datos es texto legible. Algunos de ellos son sombreadores. Pero la mayor√≠a de los datos est√°n extra√±amente divididos por un espacio vac√≠o ...</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9d1/3a2/6f5/9d13a26f5dfff14c2b44f59dbc69b673.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interfaz Hex Fiend Es minimalista, pero funciona. Los primeros bytes son las letras "ESPN", que probablemente sean el encabezado .bar.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Usted exclama: "¬°Obviamente, esto es UTF-16!" El juego fue creado para Windows, por lo que es l√≥gico que almacene texto en UTF-16, desperdiciando casi la mitad de un archivo de datos de 30 megabytes. Despu√©s de todo, a Windows le encantaba UTF-16 (aunque </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no deber√≠a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), as√≠ que ¬øpor qu√© no usar esta codificaci√≥n y sombreadores ASCII en un solo archivo? ¬°Es una idea l√≥gica! </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(En realidad, me tom√≥ alrededor de un d√≠a resolverlo)</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Hex Fiend tiene la opci√≥n de analizar bytes como UTF-16, por lo que nuevamente estamos buscando la cadena grep dx7. Hay varias entradas. Los reemplazamos con la l√≠nea dx9, que tambi√©n se encuentra en los datos, guardamos el archivo y lanzamos el juego.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si Los registros nuevamente no muestran "dx9". Esto probablemente se establece en otro lugar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Probemos algo m√°s. Supongamos que el juego reconoce tarjetas gr√°ficas y sus identificadores hexadecimales se almacenan en los registros (en mi caso, 0x8086 es Intel y tambi√©n 0x2773). Estamos buscando "8086" en Hex Fiend, encontramos algo y parte del texto parece prometedor. La serie Intel 9 es la serie GMA 950, y Age 3 probablemente no funcion√≥ muy bien en ella.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/af6/b22/f44/af6b22f4473691b673cb5dba2fd197f0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algunos n√∫meros son como identificadores de tarjeta (2582, 2592); quiz√°s si los reemplaza, entonces algo cambiar√°. Hicimos una copia del archivo de todos modos, as√≠ que puedes intentarlo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por desgracia, esto tambi√©n es un callej√≥n sin salida. De hecho, estamos estudiando el archivo incorrecto. Afortunadamente, puedo decirte esto porque pas√© mucho tiempo e intent√© </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">demasiado</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Esta maldita cosa tom√≥ alrededor de 20 horas. Y esto no cuenta el tiempo para todas las capturas de pantalla ... El </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
archivo deseado se llama "DataP.bar", y si reemplazamos sabiamente la ID, veremos algo completamente nuevo en los registros:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/445/e79/6a2/445e796a2ca507e1f1a056da1cbd30a3.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No entiendo bien por qu√© este "dx7 gen√©rico" no es el mismo que en la captura de pantalla anterior. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, en el juego todav√≠a estamos limitados por la configuraci√≥n "Baja", es decir, los registros no mienten. </font><font style="vertical-align: inherit;">Esper√°bamos un medio, pero por </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desgracia</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece que no se puede lograr m√°s de la pirater√≠a de datos. </font><font style="vertical-align: inherit;">Es hora de tomar las herramientas en serio.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intento No. 2 - pirater√≠a</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, si nada tiene √©xito, nos queda una √∫ltima cosa: cambiar el archivo ejecutable en s√≠ (es decir, como dijeron en 2005, "descifrarlo"). </font><font style="vertical-align: inherit;">Parece que hoy simplemente se llama pirater√≠a, pero este t√©rmino se ha conservado en el campo de la pirater√≠a de juegos (por supuesto, personalmente </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nunca</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lo </font><em><font style="vertical-align: inherit;">he</font></em><font style="vertical-align: inherit;"> hecho). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pasamos a la parte m√°s interesante del art√≠culo (s√≠, ya has le√≠do mil palabras, pero ¬øno era curioso?).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tolva de desmontaje</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta etapa, nuestra herramienta ser√° un desensamblador: una aplicaci√≥n que recibe el c√≥digo binario del archivo ejecutable y lo convierte en un c√≥digo de ensamblador legible (ja, ja). El m√°s popular de estos es IDA Pro, pero es incre√≠blemente caro y no estoy seguro de si funciona en una Mac, as√≠ que usar√© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hopper</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . No es gratuito (cuesta $ 90), pero se puede usar libremente durante 30 minutos a la vez con casi todas las funciones necesarias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No explicar√© la interfaz en detalle, porque </font><font style="vertical-align: inherit;">todo est√° bien presentado </font><font style="vertical-align: inherit;">en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tutorial de Hopper</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pero le dir√© lo que har√© e intentar√© tomar suficientes capturas de pantalla para que pueda aprender algo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero debe decir: me tom√≥ cinco d√≠as resolverlo, y se hicieron muchos intentos fallidos. B√°sicamente, hablar√© sobre pasos exitosos, por lo que parecer√° m√°gico. Pero fue </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dificil</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . No te preocupes si tienes alg√∫n problema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y una nota m√°s: el "craqueo" suele ser ilegal y / o realizado con fines ilegales. Demuestro un ejemplo bastante raro de un uso bastante leg√≠timo, que al mismo tiempo es completamente "sombrero blanco", por lo que todo est√° en orden aqu√≠. Asumir√© que, estrictamente hablando, esto es ilegal / contrario al acuerdo del usuario final, pero, obviamente, es un caso de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fuerza mayor</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sea como fuere, paga por lo que te gusta, y solo por eso, porque el anti-consumismo es genial.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a04/597/b6a/a04597b6a9ad1979e14216547ecf61d6.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/db3/dfb/1e3/db3dfb1e3ec50890530001d69a22cdd2.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/605/66d/e69/60566de69653b745f83d196f56679263.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arrastre la aplicaci√≥n Age 3 para abrirla. </font><font style="vertical-align: inherit;">Simplemente seleccione "x86" en lugar de powerPC, porque el juego es algo 2005.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etapa 1: busca el fragmento deseado</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sorprendentemente, esto puede ser lo m√°s dif√≠cil. </font><font style="vertical-align: inherit;">Tenemos un c√≥digo desmontado, pero no tenemos idea de d√≥nde buscar. </font><font style="vertical-align: inherit;">S√≠, algunos juegos tienen s√≠mbolos de depuraci√≥n, por lo que puedes leer los nombres de las funciones, pero no en nuestro caso. </font><font style="vertical-align: inherit;">Hopper nos da nombres como "sub_a8cbb6", con los que tenemos que lidiar solos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afortunadamente, tenemos una ventaja: nuestro </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">archivo de registro</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Es muy probable que se usen </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">literales de cadena</font></a><font style="vertical-align: inherit;"> al escribir en el registro</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, es decir, los ASCII se muestran en el archivo ejecutable. </font><font style="vertical-align: inherit;">Podemos buscarlos con grep, porque no los eliminaremos mediante ninguna compilaci√≥n (sin embargo, pueden ocultarse por la ofuscaci√≥n del c√≥digo. Afortunadamente, esto no sucedi√≥). </font><font style="vertical-align: inherit;">Encontrar los literales de cadena grep suele ser lo primero que hacen al desmontar un programa. </font><font style="vertical-align: inherit;">Entonces, ingresemos "proveedor encontrado" en el cuadro de b√∫squeda de Hopper y encontrar√° algo:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/da7/114/b61/da7114b61ecba23df73633ad41ab338f.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oh s√≠, literales de cadena, los adoro. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto en s√≠ mismo no nos hizo avanzar tanto. </font><font style="vertical-align: inherit;">Pero como la direcci√≥n de esta "cadena de literales" est√° codificada, podemos encontrar enlaces a ella. </font><font style="vertical-align: inherit;">Hopper los resalt√≥ en verde a la derecha: "DATA XREF = sub_1d5908 + 1252". </font><font style="vertical-align: inherit;">Al hacer doble clic en la l√≠nea, pasaremos a nuestro h√©roe: procedimiento </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sub_1d5908</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d6d/d6a/e8b/d6dd6ae8bbe346215273e7beb930b0a7.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ encontramos el c√≥digo del ensamblador. </font><font style="vertical-align: inherit;">Se cree que es dif√≠cil de leer, pero no lo es. </font><font style="vertical-align: inherit;">Lo m√°s dif√≠cil es entenderlo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De manera predeterminada, Hopper usa la "sintaxis Intel", es decir, el primer operando es el receptor y el segundo es la fuente. </font><font style="vertical-align: inherit;">En la l√≠nea resaltada que vemos </font></font><code>mov dword [esp+0x1DC8+var_1DC4], aXmlRenderConfi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Vamos a hacerlo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nuestra primera l√≠nea en ensamblador</font></font></h2><br>
<code>mov</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es un equipo MOV conocido por estar en x86 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Turing-complete</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mueve (en realidad copia) los datos de A a B, lo que esencialmente significa leer A y escribirlos en B. De acuerdo con lo anterior, </font></font><code>aXmlRenderConfi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esto es A, y </font></font><code>dword [esp+0x1DC8+var_1DC4]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esto es B, el destinatario. Echemos un vistazo m√°s de cerca a esto. </font></font><br>
<br>
<code>aXmlRenderConfi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Este es el valor que Hopper nos ayuda. Esto es en realidad un alias para la direcci√≥n de memoria del literal de cadena en el que hicimos clic hace unos segundos. Si divide la ventana y mira el c√≥digo en modo hexadecimal (que es el </font><font style="vertical-align: inherit;">modo </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">preferido</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para los piratas inform√°ticos), veremos all√≠ </font></font><code>88 18 83 00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0d3/d74/31d/0d3d7431d27f6a03c2af6142f27c9a9b.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hopper resalta convenientemente los mismos fragmentos seleccionados en ambas ventanas.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si el valor de "voltear" es correcto, obtendremos 0x00831888, la direcci√≥n de memoria del literal de cadena (en una de las capturas de pantalla que se muestran arriba, incluso se resalta en amarillo). Entonces, se resuelve un enigma: el c√≥digo ejecuta MOV, es decir, escribe la direcci√≥n 0x00831888. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPor qu√© se escribe como </font></font><code>88 18 83 00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, no c√≥mo </font></font><code>00 83 18 88</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? Esto sucedi√≥ debido al </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">orden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de los </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">bytes</font></a><font style="vertical-align: inherit;"> , un tema bastante confuso que generalmente tiene poco impacto. Esta es una de esas cosas que hace que la gente diga que "las computadoras no funcionan". Para nosotros, esto significa que este problema ocurrir√° en todos los n√∫meros con los que trabajaremos hoy.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es posible que haya notado que dije "escriba la direcci√≥n", y eso es cierto: realmente no nos importan los contenidos, que resultaron ser una cadena literal con un byte cero al final. Anotamos la direcci√≥n porque el c√≥digo luego se referir√° a esta direcci√≥n. Este es un puntero. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© hay de </font></font><code>dword [esp+0x1DC8+var_1DC4]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? Aqu√≠ todo es m√°s complicado. </font></font><code>dword</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">significa que estamos trabajando con "palabras dobles (palabras dobles)", es decir, con 16 * 2 bits. Es decir, copiamos 32 bits. Recordemos: nuestra direcci√≥n es</font></font><code>0x00831888</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, es decir, 8 caracteres hexadecimales, y cada car√°cter hexadecimal puede tener 16 valores, es decir, 4 bits de datos. Entonces obtenemos 8 * 4 = 32. Por cierto, la notaci√≥n "32 bits" para sistemas inform√°ticos vino de aqu√≠. Si utiliz√°ramos 64 bits, la direcci√≥n de memoria se escribir√≠a como 0x001122334455667788, tendr√≠a el doble de longitud y 2 ^ 32 veces m√°s grande, y tendr√≠amos que copiar 16 bytes. Entonces tendr√≠amos mucha m√°s memoria, pero copiar el puntero requerir√≠a el doble de trabajo y, por lo tanto, 64 bits en realidad no son el doble de r√°pido que 32 bits. Por cierto, una explicaci√≥n m√°s detallada del t√©rmino "palabra" se puede encontrar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Porque, por supuesto, es m√°s complicado que mi explicaci√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, ¬øqu√© pasa con la parte entre corchetes? Los corchetes significan que calculamos lo que hay dentro y lo consideramos un puntero. Por lo tanto, el comando MOV escribir√° en la direcci√≥n de memoria obtenida de los c√°lculos. Echemos un vistazo de nuevo con m√°s detalle (y no se preocupe, cuando haya terminado con esto, esencialmente sabr√° c√≥mo leer el c√≥digo del ensamblador con la sintaxis de Intel). </font></font><br>
<br>
<code>esp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es un </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">registro</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que en ensamblador es el equivalente m√°s cercano a una variable. Hay muchos registros en la arquitectura x86, y los diferentes registros tienen diferentes formas de aplicaci√≥n, pero realmente no nos importar√°. Obtenga m√°s informaci√≥n sobre esto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Solo tenga en cuenta que existen registros especiales para n√∫meros de punto flotante, as√≠ como "banderas" que se utilizan para comparaciones y operaciones similares. Todo lo dem√°s son solo n√∫meros hexadecimales que Hopper modific√≥ un poco para ayudarnos. </font></font><code>var_1DC4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- esto </font></font><code>-0x1DC4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, podemos verlo al comienzo del procedimiento, o en el panel derecho. Esto significa que el resultado del c√°lculo </font></font><code>[esp+0x1DC8+var_1DC4]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ser√° </font></font><code>[esp + 0x1DC8 ‚Äî 0x1DC4]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">igual </font></font><code>[esp + 4]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. En esencia, esto significa "tomar el valor de 32 bits del registro ESP, agregar 4 e interpretar el resultado como una direcci√≥n de memoria". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, repetimos: escribimos la direcci√≥n de la cadena literal en "esp + 4". Esta es informaci√≥n correcta, pero es completamente in√∫til. ¬øQu√© significa esto?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta es la dificultad para leer el c√≥digo de ensamblaje: para analizar lo que debe hacer. </font><font style="vertical-align: inherit;">Aqu√≠ tenemos una ventaja: sabemos que lo m√°s probable es que escriba algo en el registro. </font><font style="vertical-align: inherit;">Por lo tanto, podemos esperar una llamada a una funci√≥n que escribe en el registro. </font><font style="vertical-align: inherit;">Vamos a buscarla.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c57/7f8/827/c577f8827feb59247a7c69ed0467fef2.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la captura de pantalla anterior, hay varias llamadas similares, as√≠ como el comando </font></font><code>call</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que llama al procedimiento. </font><font style="vertical-align: inherit;">Hopper generalmente habla de esto (no s√© por qu√© no lo hizo aqu√≠), pero en esencia, damos argumentos para llamar a la funci√≥n. </font><font style="vertical-align: inherit;">Si hace clic en diferentes llamadas de subrutina, encontramos algo llamado imp___jump_table___Z22StringVPrintfExWorkerAPcmmPS_PmmPKcS_. </font><font style="vertical-align: inherit;">Este es el </font><font style="vertical-align: inherit;">nombre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">decodificado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la funci√≥n, y la parte "Printf" es suficiente para entender que realmente genera algo. </font><font style="vertical-align: inherit;">No nos importa c√≥mo lo hace.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Da un paso atr√°s</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta etapa, nos apartamos completamente de lo que hicimos: tratamos de convencer al juego de que nuestra tarjeta gr√°fica de 2015 era lo suficientemente potente como para lanzar el juego de 2005. Resumamos Encontramos el lugar donde se registra el registro. Si tenemos suerte, entonces aqu√≠ est√° el c√≥digo que verifica los par√°metros y capacidades de las tarjetas gr√°ficas. Afortunadamente, tuvimos mucha suerte (existe una alta probabilidad de que, de lo contrario, este art√≠culo no hubiera sido as√≠). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para obtener una visi√≥n general, utilizaremos la funci√≥n de Gr√°fico de flujo de control de la tolva, que divide el c√≥digo en peque√±os bloques y dibuja flechas que indican diferentes transiciones. Esto es mucho m√°s f√°cil de entender que en un ensamblador ordinario, en el que a menudo todo est√° en un desastre.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e3a/4bd/1b1/e3a4bd1b1528d0344f4f1174b16be79c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La llamada a la entrada del registro est√° en medio de una funci√≥n terriblemente larga, porque esto, nuevamente, generalmente ocurre en los juegos AAA. </font><font style="vertical-align: inherit;">Aqu√≠ deber√≠amos buscar otros literales de cadena Hopper y "pistas", con la esperanza de encontrar algo. </font><font style="vertical-align: inherit;">Al comienzo del procedimiento se encuentra el resto del registro, y debajo hay partes interesantes sobre "forzar dx7" y los par√°metros "Muy altos", as√≠ como un problema con la versi√≥n de sombreadores de p√≠xeles ... </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que tenemos.</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El registro de nuestros datos "pirateados" inform√≥ que ten√≠amos sombreadores de p√≠xeles de la versi√≥n 0.0, y que son incompatibles con los par√°metros "Altos". </font><font style="vertical-align: inherit;">Este c√≥digo se encuentra en la esquina inferior izquierda de nuestra funci√≥n, y si observa de cerca, puede ver algo curioso (resaltado por su humilde servidor): este es el mismo c√≥digo repetido cuatro veces para los par√°metros "Muy alto", "Alto", "Medio" y "Bajo". </font><font style="vertical-align: inherit;">Y s√≠, me llev√≥ varias horas encontrar esto.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/27b/132/603/27b13260328e5da3cbef4323e840563f.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Destaqu√© en azul el bloque en el que se muestra "pixel shader version 0.0 High" en el registro. Destaqu√© partes similares con otros hermosos colores.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Las √∫nicas diferencias son que escribimos "0x0", "0x1", "0x2" y "0x3" en diferentes lugares. Esto es sospechosamente similar al archivo de par√°metros que examinamos anteriormente y al par√°metro </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">optiongrfxshaderquality</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (es posible que a√∫n no lo entienda. Pero lo es, cr√©ame). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta etapa, podemos intentar ir de diferentes maneras, lo cual hice. Pero ser√© breve: haremos lo m√°s necesario: descubrir por qu√© falla la verificaci√≥n del sombreador de p√≠xeles. Busquemos una rama. El bloque de salida al registro es lineal, lo que significa que deber√≠a estar en alg√∫n lugar arriba.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/724/d53/3a7/724d533a7f9af2353f611c6bea4f15b7.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fan√°ticos de SEMVER, vean un formato de versi√≥n m√°s avanzado: n√∫meros de coma flotante.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Y, de hecho, justo encima de √©l hay </font></font><code>jb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un comando de transici√≥n (piense en "goto"). Este es un " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">salto condicional</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", y la condici√≥n es " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si es menor</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". Los "ifs" del ensamblador funcionan a trav√©s de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">banderas de registro</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , de las que habl√© brevemente anteriormente. Es suficiente saber que necesitamos mirar el comando anterior: lo m√°s probable es que establezca la bandera. A menudo es un comando </font></font><code>cmp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o </font></font><code>test</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pero se usa aqu√≠ </font></font><code>ucomiss</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Esto es barbarie. Pero ella f√°cilmente </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">busca en Google</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ucomiss</font></a><font style="vertical-align: inherit;"> . Este es un comando de comparaci√≥n de coma flotante, y esto explica por qu√© el c√≥digo tiene</font></font><code>xmm0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Este es un registro de n√∫meros de coma flotante. Esto es l√≥gico: los registros informan que nuestra versi√≥n de los sombreadores de p√≠xeles es "0.0", que es un valor de punto flotante. Entonces, ¬øqu√© se encuentra en la direcci√≥n de memoria 0x89034c? Los datos hexadecimales tienen un aspecto </font></font><code>00 00 00 40</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y pueden ser confusos. Pero sabemos que debemos esperar n√∫meros de coma flotante, as√≠ que interpretemos los datos as√≠: eso significa </font></font><code>2.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Cu√°l es un valor l√≥gico de coma flotante para la versi√≥n de sombreadores de p√≠xeles que Microsoft realmente us√≥ en su </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lenguaje de sombreado de alto nivel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el que se escriben los sombreadores DirectX. </font><font style="vertical-align: inherit;">Y Age 3 es un juego de DirectX, a pesar de que el puerto en Mac usa OpenGL. </font><font style="vertical-align: inherit;">Tambi√©n es l√≥gico que en 2005 se requieran sombreadores de p√≠xeles de la versi√≥n 2.0 para habilitar el par√°metro Alto, por lo que nos estamos moviendo en la direcci√≥n correcta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo arreglamos esto? </font><font style="vertical-align: inherit;">Esta instrucci√≥n de comparaci√≥n realiza una comparaci√≥n con el valor al </font></font><code>xmm0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que se da en la l√≠nea de arriba: </font></font><code>movss xmm0, dword [eax+0xA2A8]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">MOVSS es un comando especial de "movimiento" para registros de coma flotante, y escribimos 32 bits de la direcci√≥n, que es el resultado de evaluar eax + 0xA2A8. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Presumiblemente, este valor no es 2.0, sino m√°s bien 0.0. </font><font style="vertical-align: inherit;">Vamos a arreglarlo</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hackear de verdad</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, estamos listos para llegar a los par√°metros del juego High. Queremos seguir el camino "rojo" y omitir toda la l√≥gica con la "versi√≥n incorrecta de sombreadores de p√≠xeles". Esto puede hacerse pasando con √©xito la comparaci√≥n, es decir, invirtiendo la condici√≥n de transici√≥n, pero tenemos un truco m√°s: el c√≥digo est√° compuesto de tal manera que, al eliminar la transici√≥n, iremos al camino "rojo". Simplemente reemplacemos la transici√≥n con </font></font><code>nop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">una operaci√≥n que no hace nada (es imposible simplemente eliminar o agregar datos al archivo ejecutable porque se producir√° un desplazamiento y todo se romper√°). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recomiendo salir de CFG para esto, porque de lo contrario Hopper comienza a volverse loco. Si todo se hace correctamente, en la ventana Hex veremos l√≠neas rojas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/903/09d/db2/90309ddb2fecf42031e8bf9d4a6abe88.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/010/d39/b35/010d39b355b0cb7e5b55fc83007e17ae.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El rojo muestra los cambios que hemos realizado. </font><font style="vertical-align: inherit;">En este punto, si pag√≥ por Hopper, simplemente puede guardar el archivo. </font><font style="vertical-align: inherit;">Pero no pagu√©, as√≠ que abrir√© el archivo ejecutable en Hex Fiend, encontrar√© el √°rea deseada (copiando el √°rea de Hopper a la pesta√±a Buscar dentro de Hex Fiend) y la cambiar√© manualmente. </font><font style="vertical-align: inherit;">Tenga cuidado aqu√≠, puede romper todo, por lo que le recomiendo copiar el archivo ejecutable de origen en alguna parte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez hecho esto, inicie el juego, vaya a las opciones ... Y aclamaciones: podemos seleccionar "Alto". </font><font style="vertical-align: inherit;">Pero no podemos elegir "medio". </font><font style="vertical-align: inherit;">Y no podemos usar los altos par√°metros de las sombras. </font><font style="vertical-align: inherit;">¬°Sin embargo, estamos progresando!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3df/3a2/bba/3df3a2bbaa02e57ce2997e53137bdb56.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Solo eche un vistazo a estos magn√≠ficos reflejos en el agua!</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mejoras</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, puedes arreglar esto de la mejor manera. Nuestra soluci√≥n funcion√≥, pero podemos lograr que la condici√≥n se cumpla correctamente: hacer que el juego piense que nuestra tarjeta gr√°fica tiene sombreadores de la versi√≥n 2.0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como recordamos, el juego carga el valor en la direcci√≥n </font></font><code>eax+0xA2A8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Puede usar Hopper para averiguar qu√© se grab√≥ originalmente all√≠. Necesitamos encontrar un comando en el que 0xA2A8 se use como el operando del destinatario (eleg√≠ 0xA2A8 porque es un valor bastante espec√≠fico y no podemos estar seguros de que el mismo registro no se use en otro lugar). Aqu√≠ la luz de fondo de la tolva es muy √∫til para nosotros, porque podemos hacer clic en 0xA2A8 y buscar las partes amarillas en CFG.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bbd/5ed/75b/bbd5ed75b7b712a39861769efc3f63cd.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuestra victoria es un poco m√°s alta: como era de esperar, escribimos el valor de alg√∫n tipo de registro de coma flotante. Admito que realmente no entiendo lo que est√° sucediendo antes de esto (mi mejor suposici√≥n: el juego verifica la posibilidad de compresi√≥n de textura), pero esto no es particularmente importante. Escribamos "2.0" y continuemos el trabajo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para hacer esto, usaremos la "instrucci√≥n de ensamblaje" de la aplicaci√≥n Hopper, y luego haremos las mismas manipulaciones en Hex Fiend.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/92d/3d1/637/92d3d1637e2c46321c9983f68ffda742.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/784/a8f/f5b/784a8ff5bb2755f378143d4740d4201f.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9b6/fed/ff0/9b6fedff0d7cbbeb9713c34513776468.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usamos MOV en lugar de MOVSS porque escribimos el valor habitual, y no el valor especial del registro de coma flotante. Adem√°s, est√° en orden de bytes directo, es decir, invertido.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Notar√°s que algo extra√±o est√° sucediendo: "comimos" al equipo </font></font><code>jb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Sucedi√≥ porque el nuevo comando toma m√°s bytes que el anterior y, como dije, no podemos agregar o eliminar datos del archivo ejecutable para guardar las compensaciones. Por lo tanto, Hopper no tiene m√°s remedio que destruir el equipo </font></font><code>jb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Esto puede convertirse en un problema, y ‚Äã‚Äãpodemos eliminarlo moviendo el comando hacia arriba (despu√©s de todo, ya no necesitamos escribir el valor xmm3). Esto funcionar√° aqu√≠, porque en cualquier caso, estamos haciendo la ramificaci√≥n en el camino correcto. Suerte.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si comienzas el juego ... nada cambiar√° mucho. </font><font style="vertical-align: inherit;">Suger√≠ que la serie Intel 9 no es lo suficientemente r√°pida, por lo que el juego se queja. </font><font style="vertical-align: inherit;">Esto no es un problema, porque en realidad estamos luchando por "Muy Alto". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øCu√°l fue la carta m√°s poderosa alrededor de 2004? </font><font style="vertical-align: inherit;">NVIDIA GeforceFX 6800. Vamos a enga√±arnos para convencer al juego de que lo tenemos instalado.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por la madriguera del conejo</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S√≠, esta es una secci√≥n completamente nueva. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sabemos que el juego usa c√≥digos hexadecimales para referirse a tarjetas gr√°ficas, y que recibe informaci√≥n de archivos de datos. Sabemos que esto deber√≠a suceder en la funci√≥n que estamos estudiando (al menos ser√≠a extra√±o si no fuera as√≠). Entonces podemos encontrar el c√≥digo que hace esto. Pero a√∫n puede ser dif√≠cil, porque no sabemos qu√© buscar exactamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenemos una pista: las opciones se comportan de manera extra√±a; hay Bajo / Alto, pero no Medio. Entonces, tal vez hay otro c√≥digo que maneja todos estos "Muy alto", "Alto", "Medio" y "Bajo". Y en realidad lo est√°, en la misma funci√≥n. √âl es mucho antes en CFG, y parece interesante.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e73/73a/ea1/e7373aea138358b603c609d8704cfed0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podemos suponer que los datos sin procesar se almacenan en alg√∫n tipo de XML, porque es muy probable, porque hay varios otros archivos de datos que son XML. Y XML es esencialmente un grupo de punteros y atributos. Por lo tanto, es probable que el c√≥digo aqu√≠ verifique algunos atributos XML (y de hecho, a continuaci√≥n se muestra "se espera uno de ID, Muy alto ...", que es muy similar a verificar la correcci√≥n del archivo). Podemos imaginar una estructura XML similar en la que los valores booleanos determinan la calidad de los sombreadores:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4e8/bf7/411/4e8bf7411dd677f1415ae71c887cbef5.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vale la pena considerar que esta es una suposici√≥n muy arbitraria. </font><font style="vertical-align: inherit;">Todo puede verse un poco diferente. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se muestra una parte muy interesante en el lado izquierdo del CFG (para usted puede estar a la derecha, pero se muestra a la izquierda en la captura de pantalla): vemos el mismo </font></font><code>var_CC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que se usa en el c√≥digo que escribe la ID del dispositivo en el registro. </font><font style="vertical-align: inherit;">Es decir </font></font><code>ebp+var_CC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, probablemente se refiere a la ID de nuestro dispositivo, 0x2773. </font><font style="vertical-align: inherit;">Lo extra√±o es que no hay una cadena literal en la primera "verificaci√≥n", pero este es un error de Hopper: la direcci√≥n 0x0089da8e contiene datos hexadecimales 69006400, que en UTF-16 significa "id" (de hecho, probablemente Hopper no pudo entender esto debido a UTF16). </font><font style="vertical-align: inherit;">Y solo </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estamos</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> buscando una identificaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øSabes que? </font><font style="vertical-align: inherit;">Ejecutemos el depurador y verifiquemos todo en realidad.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depuraci√≥n de juegos</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abra una ventana de terminal y ejecute lldb (simplemente escriba lldb y presione Intro). Primero tenemos que decirle a LLDB que siga a Age 3, y luego podemos comenzar el juego llamando </font></font><code>run</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. El juego comienza y no obtenemos nada √∫til.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/47b/0f2/279/47b0f227957a0414bc739002abafb432.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora necesitamos agregar un punto de interrupci√≥n: para confirmar nuestras suposiciones, queremos detener la ejecuci√≥n cuando lleguemos al c√≥digo que se muestra arriba. No tenemos c√≥digo fuente, pero no importa: podemos establecer un punto de interrupci√≥n en la direcci√≥n de memoria. Y tenemos la direcci√≥n en el c√≥digo. Agreguemos una parada a una llamada MOV que recibe un "id", su direcci√≥n es 0x001d5e68. Para agregar un punto de interrupci√≥n, solo ingrese </font></font><code>br set -a 001D5E68</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Despu√©s de comenzar, el juego se detiene y LLDB muestra un c√≥digo desmontado (en la sintaxis de AT&amp;T, no Intel, por lo que todos los operandos est√°n invertidos, pero vemos que este es el mismo c√≥digo). Puede notar que LLDB en este caso es realmente m√°s inteligente que Hopper; nos dice que estamos realizando operaciones relacionadas con XML y la salida de printf.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cd0/2fa/07c/cd02fa07c9a2dbd13ed07558f0983595.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/95d/fa6/710/95dfa671088f1c7097b439851f586b24.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øTe sientes como un hacker? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para seguir adelante, tomemos una "instrucci√≥n de pasos". </font><font style="vertical-align: inherit;">Un comando corto para esto </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 es </font></font><code>ni</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Repitiendo varias veces, nos damos cuenta de que estamos de vuelta a donde comenzamos. </font><font style="vertical-align: inherit;">Este es un ciclo! </font><font style="vertical-align: inherit;">Y esto es completamente l√≥gico: probablemente estamos iterando alrededor de alg√∫n tipo de XML. </font><font style="vertical-align: inherit;">De hecho, Hopper nos mostr√≥ esto: si seguimos el CFG, veremos un ciclo (posible).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/70f/63f/fdd/70f63ffddb8c3c073dcc257af70581d8.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto significa:</font></font><code>if (*(ebp+var_CC) == *(ebp+var_28)) { *(ebp+var_1D84)=edi }</code></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
su condici√≥n de salida es que el valor </font></font><code>ebp+var_1D84</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sea ‚Äã‚Äãdistinto de cero. </font><font style="vertical-align: inherit;">Y vemos un par√°metro de c√≥digo interesante en el resaltado por m√≠ </font></font><code>var_CC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agreguemos un punto de interrupci√≥n en este </font></font><code>cmp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y lo resolveremos.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a3/c32/d3a/9a3c32d3a01dd202e192648f5ef6609c.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/593/bc4/34d/593bc434d505cb29799846d61cb177bb.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Izquierda: establezca un punto de interrupci√≥n en el CMP y contin√∫e la ejecuci√≥n. A la derecha, monitoreamos los registros y la memoria.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Observamos los registros con </font></font><code>reg r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y el valor de la memoria con </font></font><code>mem read $ebp-0x28</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><code>eax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y en realidad contiene 0x2773, y el valor en memoria ahora es 0x00A0. Si lo ejecuta varias veces </font></font><code>thread c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, veremos que se produce una iteraci√≥n en diferentes ID en busca de coincidencias. En alg√∫n momento, los valores coincidir√°n, el ciclo saldr√° y comenzar√° el juego. Ahora sabemos c√≥mo gestionarlo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recupere el archivo de registro: identific√≥ tanto el dispositivo como el fabricante. Probablemente en alg√∫n lugar hay un ciclo similar para los nombres de los fabricantes. Y, de hecho, es muy similar y se encuentra en el CFG directamente encima de nuestro ciclo. Este bucle es un poco m√°s simple, y buscamos la cadena "vendedor". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta vez la comparaci√≥n se hace con</font></font><code>var_D0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Esta variable se usa realmente como ID del fabricante. </font><font style="vertical-align: inherit;">Si ponemos un punto de interrupci√≥n aqu√≠ y verificamos todo, veremos el familiar 0x8086 en </font></font><code>eax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y al mismo tiempo, est√° ocurriendo una comparaci√≥n con 0x10DE. </font><font style="vertical-align: inherit;">Escr√≠balo </font></font><code>eax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y veamos qu√© sucede.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e4a/014/fd5/e4a014fd58bcc6408f48de1411db83b8.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/03b/9ce/7d0/03b9ce7d056048ecdf69987c3e8d774a.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guau. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es decir, 0x10DE es NVIDIA. </font><font style="vertical-align: inherit;">De hecho, uno podr√≠a entender esto al estudiar un archivo de datos, pero no es muy interesante. </font><font style="vertical-align: inherit;">Ahora la pregunta es: ¬øcu√°l es el identificador de GeforceFX 6800? </font><font style="vertical-align: inherit;">Podemos usar LLDB y simplemente verificar cada identificador, pero llevar√° tiempo (hay muchos de ellos, intent√© encontrar el correcto). </font><font style="vertical-align: inherit;">As√≠ que echemos un vistazo a render.bar esta vez.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cbc/605/7f4/cbc6057f454e5ee95865324fea40e271.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Supongamos que esto es "XMB", la representaci√≥n binaria de XML utilizada en Age 3.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Este archivo es bastante ca√≥tico. Pero despu√©s de las etiquetas Geforce FX 6800, vemos varios identificadores. Lo m√°s probable es que necesitemos uno de ellos. Probemos con 00F1. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La forma m√°s f√°cil de probar esto es usar LLDB y establecer los puntos de interrupci√≥n deseados. Omitir√© este paso, pero dir√© que surgi√≥ 00F1 (afortunadamente). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta etapa, debemos responder la pregunta: "¬øC√≥mo hacer que este cambio sea permanente?" Parece que ser√° m√°s f√°cil cambiar los valores </font></font><code>var_CC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>var_D0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en 0X00F1 y 0X10DE. Para hacer esto, solo necesitamos obtener espacio para el c√≥digo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una soluci√≥n simple ser√≠a reemplazar una de las llamadas de registro de registro con un NOP, por ejemplo, una llamada al subsistema. </font><font style="vertical-align: inherit;">Esto nos liberar√° varias decenas de bytes, y esto es incluso m√°s de lo necesario. </font><font style="vertical-align: inherit;">Seleccionemos todo esto y reempl√°celo con NOP. </font><font style="vertical-align: inherit;">Entonces solo necesitamos escribir informaci√≥n usando las variables MOV: ensamblador </font></font><code>mov dword [ebp+var_CC], 0xF1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>mov dword [ebp+var_D0], 0x10DE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e6f/eb6/d19/e6feb6d1903ca8305714594fe1911413.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/79c/096/783/79c096783f59920be40a85fdac85f44f.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antes y despu√©s</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Vamos a ejecutar el juego. </font><font style="vertical-align: inherit;">Finalmente, hemos logrado algo: puede elegir entre Bajo, Medio o Alto, as√≠ como habilitar Par√°metros altos para sombras.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/370/8b5/7cb/3708b57cb8d0d5e405e54e4c5ee99eb8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero todav√≠a no podemos habilitar Very High, y esto es triste. </font><font style="vertical-align: inherit;">¬øQu√© esta pasando?</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e16/2e6/732/e162e673279757ba3cac035fa5f9b0f6.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ah, lo tengo.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Al final result√≥ que, la Geforce FX 6800 deber√≠a admitir sombreadores de p√≠xeles de la versi√≥n 3.0, y solo configuramos la versi√≥n 2.0. Ahora es f√°cil para nosotros solucionarlo: solo escriba 3.0 punto flotante </font></font><code>ebp+0xA2A8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Este valor es 0x40400000. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, el juego ya no es caprichoso y podemos disfrutar de configuraciones muy altas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f3c/24e/2c1/f3c24e2c156feb16f1d34bf67aa33d5a.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Extra√±o, pero se ve completamente diferente. Los colores son mucho menos vibrantes y ha aparecido niebla dependiente del alcance. Tambi√©n hay un peque√±o problema de conflicto de sombras (tambi√©n se encuentra en las capturas de pantalla anteriores, esto se debe a los par√°metros de sombra alta, no a la calidad de los sombreadores), que a√∫n no he podido resolver.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Y este es el final de nuestro viaje, gracias por leer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, dar√© ejemplos de c√≥mo se ve cada uno de los par√°metros del juego, porque todas las capturas de pantalla que se encuentran en l√≠nea son terribles o est√°n incompletas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los gr√°ficos en Medium son bastante aceptables, pero adolecen de falta de sombras. Por lo que puedo decir, Very High en su mayor parte agrega una LUT completamente diferente (una buena explicaci√≥n de este t√©rmino se puede encontrar en la secci√≥n Clasificaci√≥n de color de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">este art√≠culo.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), niebla en la distancia, y tal vez incluso un modelo de iluminaci√≥n completamente diferente? </font><font style="vertical-align: inherit;">La imagen es muy diferente y es bastante extra√±a.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b5a/ed3/00d/b5aed300d967d53f67bf3e8798615525.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1c8/0b8/bd7/1c80b8bd77a9cdfb4fdbd1da13146035.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/45a/73b/776/45a73b7760497a9424b4e92984071e2c.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/817/12a/54c/81712a54ca17e71925eea886f628db3f.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De arriba a abajo: muy alto, alto (con opciones de sombra alta), medio (solo con sombra habilitada), bajo (con sombra deshabilitada).</font></font></i><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otros enlaces utiles</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El blog que he vinculado anteriormente contiene un maravilloso an√°lisis de las l√≠neas de renderizaci√≥n modernas: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://www.adriancourreges.com/blog/</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Rate 0 AD es un juego RTS de c√≥digo abierto del mismo g√©nero: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://play0ad.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ella necesita desarrolladores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si desea saber m√°s sobre el formato XMB, puede leer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">su c√≥digo en 0 AD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . No lo comprob√©, pero estoy bastante seguro de que este es el mismo formato, porque la persona que escribi√≥ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el decodificador XMB para Age 3 en Age of Empires Heaven</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tambi√©n implement√≥ estos archivos en el c√≥digo fuente 0 AD en 2004. As√≠ que esta ser√° una lecci√≥n divertida en paleontolog√≠a de c√≥digo. Gracias por todo el trabajo, Ykkrosh.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recuerdo exactamente que le√≠ un excelente tutorial sobre el uso de Hopper, pero ahora no puedo encontrar el enlace. </font><font style="vertical-align: inherit;">Si alguien sabe de lo que estoy hablando, suelte el enlace. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al final, me gustar√≠a mencionar el proyecto Cosmic Frontier: un remake de la serie cl√°sica Escape Velocity (m√°s de Override, pero tambi√©n es compatible con Nova). </font><font style="vertical-align: inherit;">Este es un juego incre√≠ble, y es muy triste que pocas personas lo sepan. </font><font style="vertical-align: inherit;">Ahora los creadores han lanzado una campa√±a en Kickstarter, y el desarrollador principal tiene un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blog de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> desarrollo muy interesante </font><font style="vertical-align: inherit;">, que habla sobre el uso de Hex Fiend para realizar ingenier√≠a inversa de los formatos de datos del juego original. </font><font style="vertical-align: inherit;">Esta es una gran lectura. </font><font style="vertical-align: inherit;">Si crees que </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mi art√≠culo</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fue una locura. </font><font style="vertical-align: inherit;">luego en una de las publicaciones ellos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lanzamos el cl√°sico emulador de Mac para usar las API obsoletas para leer un archivo de datos cifrados.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cifrado de ingenier√≠a inversa del c√≥digo del juego.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilizaron un truco del sistema de archivos para acceder a los mismos datos en una Mac moderna.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S√≠, estas son personas realmente apasionadas, y espero que su proyecto se complete con √©xito, porque EV Nova es mi juego favorito.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es500518/index.html">Iteraciones de introducir scrum en una empresa</a></li>
<li><a href="../es500520/index.html">C√≥mo hacer que sus aplicaciones se utilicen en todo el mundo: 10 consejos del CEO Wachanga</a></li>
<li><a href="../es500528/index.html">Sobre la traducci√≥n de "pr√°ctica" / "practicidad" sin pr√°ctica / pr√°ctica</a></li>
<li><a href="../es500530/index.html">Memo API de Canvas</a></li>
<li><a href="../es500538/index.html">Podcasts Rusbase, Medusa y KinoPoisk</a></li>
<li><a href="../es500546/index.html">Cree un documento de tabla simple con el kit de herramientas ODF</a></li>
<li><a href="../es500552/index.html">C√≥mo acelerar la revisi√≥n de c√≥digo</a></li>
<li><a href="../es500554/index.html">Plantilla de servidor back-end de Golang - parte 2 (API REST)</a></li>
<li><a href="../es500556/index.html">Dos a√±os de transformaci√≥n digital en dos meses.</a></li>
<li><a href="../es500558/index.html">Una selecci√≥n de art√≠culos sobre aprendizaje autom√°tico: estudios de casos, gu√≠as e investigaciones para abril de 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>