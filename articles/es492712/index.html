<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí§ üîû ü§úüèº Dominar el desarrollo a trav√©s de pruebas en Android usando pruebas de IU üèÅ üöå üë©üèø‚Äçü§ù‚Äçüë®üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos. En previsi√≥n del lanzamiento de un nuevo conjunto de cursos b√°sicos y avanzados sobre desarrollo de Android, preparamos una traducci√≥n d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Dominar el desarrollo a trav√©s de pruebas en Android usando pruebas de IU</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/492712/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hola a todos. </font><font style="vertical-align: inherit;">En previsi√≥n del lanzamiento de un nuevo conjunto de </font><font style="vertical-align: inherit;">cursos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b√°sicos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avanzados</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre desarrollo de Android, preparamos una traducci√≥n de material interesante.</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/0i/ef/lj/0iefljfwnqnrpvgj9hizrlqeatg.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante el √∫ltimo a√±o del trabajo del equipo de desarrollo de Android en Buffer, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hablamos mucho sobre la limpieza de nuestro proyecto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y la mejora de su estabilidad. </font><font style="vertical-align: inherit;">Uno de los factores fue la introducci√≥n () de las pruebas, que, como ya hemos descubierto, nos ayudan a evitar regresiones en nuestro c√≥digo y nos dan m√°s confianza en las caracter√≠sticas que ofrecemos. </font><font style="vertical-align: inherit;">Y ahora, cuando lanzamos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nuevos productos en Buffer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , queremos asegurarnos de que se aplique el mismo enfoque cuando se trata de ellos, solo para que no estemos en la misma situaci√≥n que antes.</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antecedentes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al escribir pruebas unitarias para aplicaciones Buffer, siempre nos hemos adherido a la pr√°ctica de desarrollo a trav√©s de las pruebas (Test-Driven-Development - en adelante TDD). </font><font style="vertical-align: inherit;">Hay muchos recursos sobre qu√© es TDD, sobre sus ventajas y de d√≥nde provienen, pero no nos detendremos en este tema, ya que hay mucha informaci√≥n en Internet. </font><font style="vertical-align: inherit;">En un nivel alto, personalmente noto algunos de ellos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tiempo de desarrollo reducido.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo m√°s simple, limpio y m√°s f√°cil de mantener</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo m√°s confiable con m√°s confianza en nuestro trabajo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mayor cobertura de prueba (esto parece algo obvio)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero hasta hace poco, solo segu√≠amos los principios de TDD solo en forma de pruebas unitarias para nuestras implementaciones que no se basaban en la interfaz de usuario ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/c8/df/_w/c8df_wzud2rosic5vw82xx1axyg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo s√©, lo s√© ... Siempre tuvimos la costumbre de escribir pruebas de interfaz de usuario despu√©s de completar lo implementado - Y eso no tiene sentido. Supervisamos TDD para el back-end para que el c√≥digo que escribimos cumpla con los requisitos que definen las pruebas, pero cuando se trata de pruebas de interfaz de usuario, escribimos pruebas que satisfacen la implementaci√≥n de una caracter√≠stica espec√≠fica. Como puede ver, esto es un poco controvertido, y de alguna manera se trata de por qu√© se usa TDD en primer lugar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, aqu√≠ quiero considerar por qu√© esto es as√≠ y c√≥mo estamos experimentando con el cambio. Pero, ¬øpor qu√© prestamos atenci√≥n a esto en primer lugar?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Siempre fue dif√≠cil trabajar con actividades existentes en nuestra aplicaci√≥n debido a c√≥mo est√°n escritas. </font><font style="vertical-align: inherit;">Esta no es una excusa completa, pero sus muchas dependencias, responsabilidades y lazos estrechos los hacen extremadamente dif√≠ciles de probar. </font><font style="vertical-align: inherit;">Para las nuevas actividades que agregamos, por costumbre, yo mismo siempre escrib√≠ pruebas de IU despu√©s de la implementaci√≥n; adem√°s del h√°bito, no hab√≠a otra raz√≥n para esto. </font><font style="vertical-align: inherit;">Sin embargo, al crear nuestro </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo de plantilla</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , listo para nuevos proyectos, pens√© en un cambio. </font><font style="vertical-align: inherit;">Y se alegrar√° de saber que este h√°bito se ha roto, y ahora estamos trabajando en nosotros mismos, explorando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TDD</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para </font><font style="vertical-align: inherit;">pruebas de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IU</font></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primeros pasos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo que vamos a explorar aqu√≠ es un ejemplo bastante simple, para que el concepto sea m√°s f√°cil de seguir y comprender. Espero que esto sea suficiente para ver algunas de las ventajas de este enfoque. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos a comenzar creando una actividad b√°sica. Necesitamos hacer esto para poder ejecutar nuestra prueba de IU; imagine que esta configuraci√≥n es la base de nuestra implementaci√≥n, y no la implementaci√≥n en s√≠ misma. As√≠ es como se ve nuestra actividad b√°sica:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginActivity</span>: <span class="hljs-title">AppCompatActivity</span>(), <span class="hljs-title">LoginContract</span>.<span class="hljs-title">View</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Inject</span> lateinit <span class="hljs-keyword">var</span> loginPresenter: LoginContract.<span class="hljs-function">Presenter

    override fun <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: Bundle?)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)<font></font>
        setContentView(R.layout.activity_login)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">setPresenter</span><span class="hljs-params">(presenter: LoginContract.Presenter)</span> </span>{<font></font>
        loginPresenter = presenter<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showServerErrorMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showGeneralErrorMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showProgress</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">hideProgress</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showInvalidEmailMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">hideInvalidEmailMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showInvalidPasswordMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">hideInvalidPasswordMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede observar que esta actividad no hace m√°s que la configuraci√≥n inicial, que es necesaria para la actividad. En el m√©todo onCreate (), simplemente establecemos un enlace al dise√±o, tambi√©n tenemos un enlace a nuestra interfaz de Vista, que se implementa utilizando la actividad, pero a√∫n no tienen implementaciones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una de las cosas m√°s comunes que encontramos en las pruebas de Espresso son las vistas de referencia y las cadenas por ID de recursos que se encuentran en nuestra aplicaci√≥n. En este sentido, nuevamente necesitamos proporcionar un archivo de dise√±o para usar en nuestra actividad. Esto se debe al hecho de que: a) nuestra actividad necesita un archivo de dise√±o para mostrar el dise√±o durante las pruebas, yb) necesitamos una vista de ID para los enlaces en nuestras pruebas. Avancemos y hagamos un dise√±o muy simple para nuestra actividad de inicio de sesi√≥n:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">EditText</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/input_email"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">EditText</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/input_password"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/button_login"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ puede ver que no est√°bamos preocupados por ning√∫n estilo o posici√≥n, recuerde, mientras creamos la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y no la implementaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y para la √∫ltima parte de la configuraci√≥n, vamos a definir las l√≠neas que se utilizar√°n en este ejercicio. </font><font style="vertical-align: inherit;">Nuevamente, necesitaremos hacer referencia a ellos en las pruebas; hasta que los agregue a su dise√±o XML o clase de actividad, solo def√≠nalos en el archivo </font></font><code>strings.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="java hljs">&lt;string name=<span class="hljs-string">"error_message_invalid_email‚Äù&gt;‚Ä¶&lt;/string&gt;
&lt;string name="</span>error_message_invalid_password‚Äù&gt;‚Ä¶&lt;/string&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede notar que en esta configuraci√≥n escribimos lo menos posible, pero proporcionamos suficientes detalles sobre nuestra actividad y su dise√±o para escribir pruebas para ella. </font><font style="vertical-align: inherit;">Nuestra actividad no funciona actualmente, pero se abre y tiene una vista a la que se puede hacer referencia. </font><font style="vertical-align: inherit;">Ahora que tenemos suficiente m√≠nimo para trabajar, continuemos y agreguemos algunas pruebas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregar pruebas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, tenemos tres situaciones que debemos implementar, por lo que vamos a escribir algunas pruebas para ellos.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuando un usuario ingresa una direcci√≥n de correo electr√≥nico no v√°lida en el campo de entrada de correo electr√≥nico, debemos mostrar un mensaje de error. </font><font style="vertical-align: inherit;">Entonces, vamos a escribir una prueba que verifique si se muestra este mensaje de error.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuando el usuario comienza a ingresar datos en el campo de entrada de correo electr√≥nico nuevamente, el mensaje de error anterior deber√≠a desaparecer, por lo tanto, vamos a escribir una prueba para esto.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finalmente, cuando la API devuelve un mensaje de error, debe mostrarse en un cuadro de di√°logo de advertencia, por lo que tambi√©n agregaremos una prueba para esto.</font></font></li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-meta">@Test</span>
<span class="hljs-function">fun <span class="hljs-title">invalidEmailErrorHidesWhenUserTypes</span><span class="hljs-params">()</span> </span>{<font></font>
    activity.launchActivity(<span class="hljs-keyword">null</span>)<font></font>
<font></font>
    onView(withId(R.id.button_login))<font></font>
            .perform(click())<font></font>
<font></font>
    onView(withId(R.id.input_email))<font></font>
            .perform(typeText(<span class="hljs-string">"j"</span>))<font></font>
<font></font>
    onView(withText(R.string.error_message_invalid_email))<font></font>
            .check(doesNotExist())<font></font>
}<font></font>
<font></font>
<span class="hljs-meta">@Test</span>
<span class="hljs-function">fun <span class="hljs-title">invalidPasswordErrorDisplayed</span><span class="hljs-params">()</span> </span>{<font></font>
    activity.launchActivity(<span class="hljs-keyword">null</span>)<font></font>
<font></font>
    onView(withId(R.id.button_login))<font></font>
            .perform(click())<font></font>
<font></font>
    onView(withText(R.string.error_message_invalid_password))<font></font>
            .check(matches(isDisplayed()))<font></font>
}<font></font>
<font></font>
<span class="hljs-meta">@Test</span>
<span class="hljs-function">fun <span class="hljs-title">serverErrorMessageDisplays</span><span class="hljs-params">()</span> </span>{<font></font>
    val response = ConnectResponseFactory.makeConnectResponseForError()<font></font>
    stubConnectRepositorySignIn(Single.just(response))<font></font>
    activity.launchActivity(<span class="hljs-keyword">null</span>)<font></font>
<font></font>
    onView(withId(R.id.input_email))<font></font>
            .perform(typeText(<span class="hljs-string">"joe@example.com"</span>))<font></font>
<font></font>
    onView(withId(R.id.input_password))<font></font>
            .perform(typeText(DataFactory.randomUuid()))<font></font>
<font></font>
    onView(withId(R.id.button_login))<font></font>
            .perform(click())<font></font>
<font></font>
    onView(withText(response.message))<font></font>
            .check(matches(isDisplayed()))<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ok, ahora tenemos pruebas escritas, continuemos y las ejecutemos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2x/ac/bv/2xacbvdf2rumlv9asggjp9mwsp8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y no es sorprendente que hayan fallado, esto se debe a que todav√≠a no tenemos una implementaci√≥n, por lo que esto es de esperarse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As√≠ que ahora necesitamos agregar implementaciones para nuestra actividad hasta que pasen las pruebas. A medida que escribimos pruebas enfocadas que prueban solo un concepto (¬°o al menos deber√≠a serlo!), Podemos agregar implementaciones una por una y tambi√©n ver c√≥mo nuestras pruebas se vuelven verdes una tras otra. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, veamos una de las pruebas fallidas, comencemos con la prueba </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">invalidPasswordErrorDisplayed ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sabemos algunas cosas:</font></font><br>
<br>
<ul>
<li>     ,    ,       ,          ,       :</li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> fun <span class="hljs-title">setupLoginButtonClickListener</span><span class="hljs-params">()</span> </span>{<font></font>
    button_login.setOnClickListener {<font></font>
        loginPresenter.performSignIn(input_email.text.toString(),<font></font>
                input_password.text.toString()) }<font></font>
}</code></pre><br>
<ul>
<li>       ,          .    TextInputLayout,             ,    :</li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-function">override fun <span class="hljs-title">showInvalidPasswordMessage</span><span class="hljs-params">()</span> </span>{<font></font>
    layout_input_password.error = getString(R.string.error_message_invalid_password)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora que hemos agregado la l√≥gica para esta situaci√≥n, ¬°continuemos y ejecutemos nuestras pruebas nuevamente! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/4-/et/jq4-etd3rfq9tddsy4x0lusrti0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Genial, parece que el cheque </font></font><code>invalidPassworrdErrorDisplays()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fue exitoso. Pero a√∫n no hemos terminado, todav√≠a tenemos dos pruebas que no se han aprobado para aquellas partes de nuestra funci√≥n de inicio de sesi√≥n que debemos implementar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, consideraremos la prueba </font></font><code>serverErrorMessageDisplays()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Esto es bastante simple, sabemos que cuando la API devuelve una respuesta de error (y no un error general de nuestra biblioteca de red), la aplicaci√≥n debe mostrar un mensaje de error al usuario en un cuadro de di√°logo de advertencia. Para hacer esto, solo necesitamos crear una instancia del di√°logo usando nuestro mensaje de error del servidor en el texto del di√°logo:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function">override fun <span class="hljs-title">showServerErrorMessage</span><span class="hljs-params">(message: String)</span> </span>{<font></font>
    DialogFactory.createSimpleInfoDialog(<span class="hljs-keyword">this</span>, R.string.error_message_login_title, message, <font></font>
            R.string.error_message_login_ok).show()<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Continuemos y ejecutemos nuestras pruebas nuevamente: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/td/le/m2/tdlem2qq8vgtq9wcggplu-dra_0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Hurra! </font><font style="vertical-align: inherit;">Estamos avanzando, ahora solo nos queda una prueba, esta es una prueba </font></font><code>invalidEmailErrorHidesWhenUserTypes()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Nuevamente, este es un caso simple, pero ve√°moslo:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuando el usuario hace clic en el bot√≥n de inicio de sesi√≥n y falta la direcci√≥n de correo electr√≥nico o la direcci√≥n de correo electr√≥nico es incorrecta, le mostramos un mensaje de error. </font><font style="vertical-align: inherit;">Ya lo hemos implementado, lo descart√© por simplicidad</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin embargo, cuando el usuario comienza a ingresar datos nuevamente en el campo, el mensaje de error debe eliminarse de la pantalla. </font><font style="vertical-align: inherit;">Para hacer esto, necesitamos escuchar cuando el contenido del texto del campo de entrada cambia:</font></font></li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> fun <span class="hljs-title">setupOnEmailTextChangedListener</span><span class="hljs-params">()</span> </span>{<font></font>
    input_email.addTextChangedListener(object : TextWatcher {<font></font>
<font></font>
        <span class="hljs-function">override fun <span class="hljs-title">afterTextChanged</span><span class="hljs-params">(s: Editable)</span> </span>{}<font></font>
<font></font>
        <span class="hljs-function">override fun <span class="hljs-title">beforeTextChanged</span><span class="hljs-params">(s: CharSequence, start: Int,
                                       count: Int, after: Int)</span> </span>{<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function">override fun <span class="hljs-title">onTextChanged</span><span class="hljs-params">(s: CharSequence, start: Int,
                                   before: Int, count: Int)</span> </span>{<font></font>
            loginPresenter.handleEmailTextChanged(s)<font></font>
        }<font></font>
    })<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora esto deber√≠a ser suficiente para garantizar que nuestro mensaje de error estar√° oculto al cambiar el contenido del campo de entrada. </font><font style="vertical-align: inherit;">Pero tenemos pruebas para confirmar nuestros cambios: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/du/ni/aa/duniaa83g3b84ennz4ljp03uez8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Genial! </font><font style="vertical-align: inherit;">Nuestros requisitos de implementaci√≥n se cumplen cuando pasamos nuestras pruebas; es genial ver la luz verde</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es importante tener en cuenta que el ejemplo al que aplicamos TDD es extremadamente primitivo. Imagine que estamos desarrollando una pantalla compleja, como una fuente de contenido, en la que puede realizar varias acciones con elementos de fuente (por ejemplo, como en la aplicaci√≥n Buffer para Android); en estos casos, utilizaremos muchas funciones diferentes que deber√≠an implementarse en la actividad dada. / fragmento. Estas son situaciones en las que TDD se revelar√° a√∫n m√°s en las pruebas de IU, porque lo que puede conducir a escribir c√≥digo demasiado complejo para estas funciones puede reducirse a implementaciones que satisfagan las pruebas dadas que escribimos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para resumir, compartir√© algunos puntos aprendidos de mi experiencia:</font></font><br>
<br>
<ul>
<li>  ,   ,  TDD  .   ,        .   ,  Espresso     (/,     ),         .       activity,  ,      ,        .                .</li>
<li>  ,   ,     ,   , ,  ,   ,       .  ,        , ,      ,  ,      ( ,      !). -         .           , , ,  - .</li>
<li> ,   Ui-              ,   ,          . ,   , ,   ,       ,      ,    .</li>
<li> ,      .       ,        ‚Äî      ,      ,        ,     - .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parece m√°s natural </font><font style="vertical-align: inherit;">Debido al hecho de que TDD ya se usa para pruebas unitarias, se siente un poco hacia atr√°s cuando escribe pruebas unitarias, seguidas de implementaciones, seguidas de pruebas de IU. </font><font style="vertical-align: inherit;">Te sentir√°s m√°s natural dando un paso completo con TDD, no a la mitad.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øYa est√° utilizando TDD al escribir pruebas de interfaz de usuario y est√° haciendo algo similar o completamente diferente? </font><font style="vertical-align: inherit;">¬øO quieres saber un poco m√°s y hacer algunas preguntas? </font><font style="vertical-align: inherit;">Si√©ntase libre de comentar a continuaci√≥n o twittear en </font></font><code>@bufferdevs</code> <br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eso es todo. </font><font style="vertical-align: inherit;">Te esperamos en los cursos:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avanzado</font></font></a></li>
</ul></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es492702/index.html">Traducci√≥n autom√°tica De la guerra fr√≠a al presente</a></li>
<li><a href="../es492704/index.html">Para aumentar la efectividad de la supervivencia del implante en 5-7 veces, ¬øc√≥mo es esto posible?</a></li>
<li><a href="../es492706/index.html">Archivos de memoria: c√≥mo el cerebro codifica y reproduce recuerdos</a></li>
<li><a href="../es492708/index.html">Internet satelital global: ¬øhay noticias de los campos?</a></li>
<li><a href="../es492710/index.html">Camino espinoso del candidato a trav√©s de varios sistemas de gesti√≥n de recursos humanos</a></li>
<li><a href="../es492714/index.html">Trabajo efectivo desde casa: general y personal</a></li>
<li><a href="../es492718/index.html">Seguridad a trav√©s de la restricci√≥n del usuario o c√≥mo crear una vulnerabilidad</a></li>
<li><a href="../es492720/index.html">diskussion: servicio de archivos de proyecto</a></li>
<li><a href="../es492724/index.html">Bj√∂rn Straustrup responde las 5 preguntas principales de C ++ con desbordamiento de pila</a></li>
<li><a href="../es492726/index.html">OS Sivelkiriya: proceso de desarrollo de software</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>