<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📶 ⛳️ 🖐🏾 Atolのキャッシュデスクを独自のCRM取引と統合した経験 👴🏼 👨🏽‍⚕️ 👩🏾‍⚖️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="最近のオンライン興行を中心に、大興奮の2019年7月1日で、最後の延期が終わりましたので、この問題に対処しなければなりませんでした。 1Cや他のシステムを持っている人は特に緊張することはできませんが、独自の自己記述型システムがある場合は、オンラインキャッシュレジスターとの統合も肩にかかります。
 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Atolのキャッシュデスクを独自のCRM取引と統合した経験</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457684/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最近のオンライン興行を中心に、大興奮の2019年7月1日で、最後の延期が終わりましたので、この問題に対処しなければなりませんでした。 1Cや他のシステムを持っている人は特に緊張することはできませんが、独自の自己記述型システムがある場合は、オンラインキャッシュレジスターとの統合も肩にかかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の経験は、ネットワークデータ交換モードでAtolのキャッシュデスクと統合するのに役立ちます。プログラムは、ローカルホストとローカルネットワークの両方でAtol Webサーバーにデータを送信できます。AJAXブラウザーからでも、CURLを介してサーバーからでも、データを送信できます。企業ソフトウェアがどの言語で記述されていても、すべてがクロスプラットフォームです。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atol 30fチェックアウトボックスを見つけました。これはブラックボックス（FN）を備えたシンプルなタイプライターなので、注文のロジックがすべてレジ係に組み込まれたソフトウェアではなく外部ソフトウェアにある場合に適しています。さらに、このタイプのデバイスは、Androidの対応デバイスと比較して比較的安価です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、一部のサポート会社の「スペシャリスト」は、バージョン10のAtollがJSONジョブを受け入れるドライバーにWebサーバーを組み込んでいることをまったく認識していないことにも注意してください。さらに、このドライバーはLinuxにもインストールできます。ラズベリー上の既製のソリューションの数によって、それはそこにインストールすることもできると推測できます。10番目のバージョンのドライバーの配布では、armのインストーラーが存在します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
計画されたスキームはこのようなものです-ローカルネットワーク上のサーバー上で実行されるCRMがあり、ブラウザーから開かれ、サーバーサイドからチェックがcurl経由でPHPに送信され、レジで印刷されます。キャッシュデスク自体は、同じネットワーク上のWindows上の任意のコンピューターに接続されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キャッシャーをアクティブ化しないと、プリンターモードで動作し、小切手が無効であることを印刷できるが、確認できなかったため、1セントの売り上げと返品をしなければならなかったと言われています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第10版のドライバーは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちらから</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダウンロードでき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インストールする前に</font><font style="vertical-align: inherit;">、ドライバーと同じビット深度の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をインストールする必要があり</font><font style="vertical-align: inherit;">ます。そうでない場合、64ビットKKTドライバーをインストールしてからJava x64をインストールすると、チェックボックスWebサーバーは使用できなくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
論理的には、64ビットシステムに64ビットドライバーをインストールする必要があるようですが、一部の32ビットソフトウェアはそれを使用できません（32ビットの場合、これは1Cにも当てはまります）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nf/fn/uk/nffnukvhkzk3za8vpcrn567wygi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インストールの最後にチェックマークがあります。Webサーバーを構成するために、インストールされていない場合は、ブラウザーの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">127.0.0.1：16732</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> /設定に移動し、[サーバーのアクティブ化]チェックボックスをオンにして保存する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gv/fm/9l/gvfm9lfbrzxyntshlyhn7fmx-pc.png"><br>
<br>
<img src="https://habrastorage.org/webt/dy/so/pq/dysopqgomkepetfvn-de5vgdj3q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、START-&gt; ATOL-&gt; restart ...でサーバーを再起動する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、ウェブサーバーを起動すると、ローカルアプリケーションがCCPにアクセスできなくなり、長時間ドライバーをインストールし、Cctドライバーテストを実行できなくなり、ポートがビジーであるとのことであり、それでローカルセラーのテクニカルサポートに電話したことをすぐに警告します。彼らは私たちが何をすべきかわからないと言った、そして私はコンピューターを10回オーバーロードし、ドライバーを再インストールしました、何も助けにはなりません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、サーバーをアクティブ化して再起動した後、その前にサーバーの電源を切り、付属のユーティリティを介してプレーンテキストの印刷を確認するか、接続を確認しただけで続行できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このWebサービスにはパスワード保護がないため、必要なコンピューターのみがポート16732にアクセスできるように、Windowsファイアウォールまたはその他のソフトウェアをすぐに構成する必要があります。私の状況では、これはCRMが実行されているサーバーです。</font></font><br>
<br>
<b>  -   ,  ...</b><br>
<br>
<ol>
<li>  uuid   </li>
<li>   POST</li>
<li>  -,      UUID,   ,          wait,    error,    -   ...</li>
</ol> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、機能するバージョンを紹介します。これは、支払いが1つの方法にすぎず、現金の一部と非現金の一部ではなく、デフォルトの課税システムを使用し、VATがまだ計算されていないため、コードを追加してアップロードしたかったのですが、この情報が必要な人は、7月1日よりも前のほうがまだいると思います。</font><font style="vertical-align: inherit;">私はすぐにクラスが洗練を必要とすることを言わなければなりません、多くの生の、エラー処理なし、すべてはドキュメントを読むことを考慮に入れずに数時間で行われました、このコードは例のようなものであり、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を非常に詳細に研究</font><font style="vertical-align: inherit;">して特定のプロセスに適合させることをお</font><font style="vertical-align: inherit;">勧めします</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIの使用例のPHPコード（教育目的でのみ使用）</font></font></b><div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-meta">&lt;?php</span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">Class</span> <span class="hljs-title">AtolWebDriver</span>
</span>{
	<span class="hljs-keyword">protected</span> $addr=<span class="hljs-string">"127.0.0.1"</span>,$port=<span class="hljs-string">"16732"</span>;
	<span class="hljs-keyword">public</span> $timeout = <span class="hljs-number">30</span>; <span class="hljs-comment">// </span>
	<span class="hljs-keyword">public</span> $operator;<font></font>
<font></font>
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">$addr=<span class="hljs-literal">false</span>,$port=<span class="hljs-literal">false</span></span>)
	</span>{
		<span class="hljs-keyword">if</span> ($addr!==<span class="hljs-literal">false</span>) <span class="hljs-keyword">$this</span>-&gt;addr=$addr; 
		<span class="hljs-keyword">if</span> ($port!==<span class="hljs-literal">false</span>) <span class="hljs-keyword">$this</span>-&gt;port=$port; <font></font>
	}<font></font>
<font></font>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CallAPI</span>(<span class="hljs-params">$method, $data,$_url=<span class="hljs-string">"/requests"</span></span>) 
	</span>{<font></font>
		$url = <span class="hljs-string">"http://"</span>.<span class="hljs-keyword">$this</span>-&gt;addr.<span class="hljs-string">":"</span>.<span class="hljs-keyword">$this</span>-&gt;port.$_url;<font></font>
		$curl = curl_init($url);<font></font>
		curl_setopt($curl, CURLOPT_RETURNTRANSFER, <span class="hljs-literal">true</span>);<font></font>
		curl_setopt($curl,CURLOPT_TIMEOUT, <span class="hljs-keyword">$this</span>-&gt;timeout);<font></font>
		$headers = [<span class="hljs-string">'Content-Type: application/json'</span>];<font></font>
		curl_setopt($curl,CURLOPT_HTTPHEADER, $headers);<font></font>
		curl_setopt($curl, CURLOPT_CUSTOMREQUEST, $method);<font></font>
		curl_setopt($curl, CURLOPT_POSTFIELDS, json_encode($data));<font></font>
<font></font>
		$resp = curl_exec($curl);<font></font>
		$data = json_decode($resp,<span class="hljs-number">1</span>);<font></font>
		$code = curl_getinfo($curl, CURLINFO_HTTP_CODE);<font></font>
<font></font>
		curl_close($curl);<font></font>
<font></font>
		$res= [$data,$code,$resp];<font></font>
<font></font>
		print_r($res);<font></font>
		<span class="hljs-keyword">return</span> $res;<font></font>
	}<font></font>
<font></font>
	<span class="hljs-comment">//  </span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_res</span>(<span class="hljs-params">$uuid</span>)
	</span>{<font></font>
		$ready = <span class="hljs-literal">false</span>;<font></font>
		$cnt=<span class="hljs-number">0</span>;<font></font>
<font></font>
		$res_url = <span class="hljs-string">'/requests/'</span>.$uuid;<font></font>
<font></font>
		<span class="hljs-keyword">while</span> (!$ready &amp;&amp; ++$cnt&lt;<span class="hljs-number">60</span>) <font></font>
		{<font></font>
			usleep(<span class="hljs-number">500000</span>); <span class="hljs-comment">// ,    </span><font></font>
<font></font>
			<span class="hljs-keyword">list</span>($res,$code,$resp) = <span class="hljs-keyword">$this</span>-&gt;CallAPI(<span class="hljs-string">'GET'</span>,[],$res_url);<font></font>
			$ready = ($res[<span class="hljs-string">'results'</span>][<span class="hljs-number">0</span>][<span class="hljs-string">'status'</span>] == <span class="hljs-string">'ready'</span>);
			<span class="hljs-keyword">if</span> ($ready) <span class="hljs-keyword">return</span> $res;<font></font>
		}<font></font>
<font></font>
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">//   </span><font></font>
	}<font></font>
<font></font>
	<span class="hljs-comment">//  </span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add_req</span>(<span class="hljs-params">$uuid,$req</span>)
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;CallAPI(<span class="hljs-string">'POST'</span>, [<span class="hljs-string">'uuid'</span>=&gt;$uuid,<span class="hljs-string">'request'</span>=&gt;$req]);<font></font>
	}<font></font>
<font></font>
	<span class="hljs-comment">//  id  </span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gen_uuid</span>(<span class="hljs-params"></span>)
	</span>{
		<span class="hljs-keyword">return</span> exec(<span class="hljs-string">'uuidgen -r'</span>);<font></font>
	}<font></font>
<font></font>
	<span class="hljs-comment">//     </span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">atol_task</span>(<span class="hljs-params">$type,$req=[]</span>)
	</span>{<font></font>
		$req[<span class="hljs-string">'type'</span>] = $type;<font></font>
		$uuid =  <span class="hljs-keyword">$this</span>-&gt;gen_uuid();<font></font>
<font></font>
		$req = <span class="hljs-keyword">$this</span>-&gt;add_req($uuid,$req);
		<span class="hljs-keyword">if</span> ($req[<span class="hljs-number">1</span>]!=<span class="hljs-string">'201'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// </span><font></font>
<font></font>
		$res = <span class="hljs-keyword">$this</span>-&gt;get_res($uuid);
		<span class="hljs-comment">// </span>
		<span class="hljs-keyword">if</span> ($res===<span class="hljs-literal">false</span> || !<span class="hljs-keyword">isset</span>($res[<span class="hljs-string">'results'</span>][<span class="hljs-number">0</span>])) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; 
		<span class="hljs-keyword">return</span> $res[<span class="hljs-string">'results'</span>][<span class="hljs-number">0</span>];<font></font>
	}<font></font>
<font></font>
	<span class="hljs-comment">/*    */</span><font></font>
<font></font>
	<span class="hljs-comment">// </span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_shift_status</span>(<span class="hljs-params"></span>)
	</span>{<font></font>
		$res = <span class="hljs-keyword">$this</span>-&gt;atol_task(<span class="hljs-string">'getShiftStatus'</span>);
		<span class="hljs-keyword">if</span> ($res===<span class="hljs-literal">false</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		<span class="hljs-comment">//closed / opened / expired </span>
		<span class="hljs-keyword">return</span> $res[<span class="hljs-string">'result'</span>][<span class="hljs-string">'shiftStatus'</span>][<span class="hljs-string">'state'</span>];<font></font>
	}<font></font>
<font></font>
	<span class="hljs-comment">// </span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">open_shift</span>(<span class="hljs-params"></span>)
	</span>{<font></font>
		$status = <span class="hljs-keyword">$this</span>-&gt;get_shift_status();
		<span class="hljs-comment">//e ,   </span>
		<span class="hljs-keyword">if</span> ($status==<span class="hljs-string">"expired"</span>) <span class="hljs-keyword">$this</span>-&gt;close_shift(); 
		<span class="hljs-keyword">if</span> ($status==<span class="hljs-string">"opened"</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"    "</span>;<font></font>
<font></font>
		$res = <span class="hljs-keyword">$this</span>-&gt;atol_task(<span class="hljs-string">'openShift'</span>,[<span class="hljs-string">'operator'</span>=&gt;<span class="hljs-keyword">$this</span>-&gt;operator]);<font></font>
	}<font></font>
<font></font>
<font></font>
<font></font>
	<span class="hljs-comment">// </span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">close_shift</span>(<span class="hljs-params"></span>)
	</span>{<font></font>
		$status = <span class="hljs-keyword">$this</span>-&gt;get_shift_status();
		<span class="hljs-keyword">if</span> ($status==<span class="hljs-string">"closed"</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"    "</span>;<font></font>
<font></font>
		$res = <span class="hljs-keyword">$this</span>-&gt;atol_task(<span class="hljs-string">'closeShift'</span>,[<span class="hljs-string">'operator'</span>=&gt;<span class="hljs-keyword">$this</span>-&gt;operator]);<font></font>
	}<font></font>
<font></font>
<font></font>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">items_prepare</span>(<span class="hljs-params">$items</span>)
	</span>{<font></font>
		$res_items = [];<font></font>
		$summ = <span class="hljs-number">0</span>;
		<span class="hljs-keyword">while</span> ($item = array_shift($items))<font></font>
		{<font></font>
			$res_item = $item;<font></font>
			<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">isset</span>($item[<span class="hljs-string">'type'</span>])) <font></font>
				$res_item[<span class="hljs-string">'type'</span>]=<span class="hljs-string">"position"</span>;<font></font>
<font></font>
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>($item[<span class="hljs-string">'price'</span>]) &amp;&amp; <span class="hljs-keyword">isset</span>($item[<span class="hljs-string">'quantity'</span>]))<font></font>
			{<font></font>
				$res_item[<span class="hljs-string">'amount'</span>] = $item[<span class="hljs-string">'price'</span>]*$item[<span class="hljs-string">'quantity'</span>];<font></font>
				$res_item[<span class="hljs-string">'tax'</span>] = [<span class="hljs-string">'type'</span>=&gt;<span class="hljs-string">'none'</span>];<font></font>
				$summ+=$res_item[<span class="hljs-string">'amount'</span>];<font></font>
			}<font></font>
<font></font>
<font></font>
			$res_items[] = $res_item;<font></font>
		}<font></font>
<font></font>
		<span class="hljs-keyword">return</span> [$res_items,$summ];<font></font>
	}<font></font>
<font></font>
<font></font>
	<span class="hljs-comment">// sell,  sellReturn</span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fiskal</span>(<span class="hljs-params">$type_op=<span class="hljs-string">"sell"</span>,$items,$pay_type=<span class="hljs-string">"cash"</span></span>)
	</span>{<font></font>
		$data = [];<font></font>
		$data[<span class="hljs-string">'operator'</span>] = <span class="hljs-keyword">$this</span>-&gt;operator;<font></font>
		$data[<span class="hljs-string">'payments'</span>] = [];
		<span class="hljs-keyword">list</span>($data[<span class="hljs-string">'items'</span>],$summ) = <span class="hljs-keyword">$this</span>-&gt;items_prepare($items);<font></font>
<font></font>
		<span class="hljs-comment">//+++      </span>
		$data[<span class="hljs-string">'payments'</span>][] = [<span class="hljs-string">'type'</span>=&gt;$pay_type,<span class="hljs-string">'sum'</span>=&gt;$summ];<font></font>
<font></font>
		$res = <span class="hljs-keyword">$this</span>-&gt;atol_task($type_op,$data);<font></font>
	}<font></font>
<font></font>
<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//  ip   web-  ,     </span>
$atol = <span class="hljs-keyword">new</span> AtolWebDriver(<span class="hljs-string">'192.168.100.10'</span>);<font></font>
<font></font>
<span class="hljs-comment">//   </span>
$atol-&gt;operator = [<span class="hljs-string">'name'</span>=&gt;<span class="hljs-string">'.'</span>];<font></font>
<font></font>
<span class="hljs-comment">//      </span><font></font>
$items = [];<font></font>
$items[] = [<span class="hljs-string">'name'</span>=&gt;<span class="hljs-string">' '</span>,<span class="hljs-string">'price'</span>=&gt;<span class="hljs-number">0.7</span>,<span class="hljs-string">'quantity'</span>=&gt;<span class="hljs-number">1</span>];<font></font>
$items[] = [<span class="hljs-string">'name'</span>=&gt;<span class="hljs-string">' '</span>,<span class="hljs-string">'price'</span>=&gt;<span class="hljs-number">0.4</span>,<span class="hljs-string">'quantity'</span>=&gt;<span class="hljs-number">1</span>];<font></font>
<font></font>
<font></font>
<span class="hljs-comment">// </span><font></font>
$atol-&gt;open_shift();<font></font>
<font></font>
<span class="hljs-comment">// </span>
$atol-&gt;fiskal(<span class="hljs-string">"sell"</span>,$items); <font></font>
<font></font>
sleep(<span class="hljs-number">10</span>); <span class="hljs-comment">// ,    </span>
<span class="hljs-comment">//     , ..    </span>
$atol-&gt;fiskal(<span class="hljs-string">"sellReturn"</span>,$items); <font></font>
<font></font>
<span class="hljs-comment">//    </span>
sleep(<span class="hljs-number">20</span>);<font></font>
<font></font>
<span class="hljs-comment">// ,  </span><font></font>
$atol-&gt;close_shift();<font></font>
<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここに修正するいくつかの欠陥があります</font></font><br>
<br>
<ol>
<li>    ,    ,    1.000000001  0.999999999</li>
<li>         ,         ,     error,    ready</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まあ、実装の過程で、もっと多くのエラーをキャッチすることを恐れています。たとえば、タスクが待機状態で長時間ハングする場合は、キューから削除することをお勧めします。それ以外の場合、後続のタスクは数分間ハングします。このような不具合を1回検出したので、印刷されないことを望みました。そして、ここに座って、先に送信された2つの小切手を続けて飛ばしてすぐに印刷しました... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、オンライン小切手がない場合は、どちらの取得をねじ込むかを決定するまで、サイトから取得を収集することができます。しかし、解決策は、解決策のアイデアとしてより可能性が高く、この興行収入がどのように定着するかは時が経てばわかるでしょう。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、記事を注意深く読んでセキュリティの問題にあまり熟練して</font><b><font style="vertical-align: inherit;">いない人</font></b><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このWebサービスには暗号化（https）がなく、認証がありません</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ローカルネットワークでのみ使用されている場合でも、ポートにアクセスするように保護を構成します。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja457652/index.html">120,000枚の写真を整理して、チームにアクセスレベルの異なる試作紙がないようにする方法</a></li>
<li><a href="../ja457658/index.html">ユニオンMS-11：存在しなかった事故？</a></li>
<li><a href="../ja457666/index.html">Raspberry Piの代替</a></li>
<li><a href="../ja457670/index.html">Tion S3の管理とスマートホームへの接続</a></li>
<li><a href="../ja457680/index.html">CentOS / Fedora / RedHatの最小インストール</a></li>
<li><a href="../ja457686/index.html">Sberbankが生体認証処理の同意を収集する方法</a></li>
<li><a href="../ja457690/index.html">Yandex.Money metapからの妄想ビデオ</a></li>
<li><a href="../ja457692/index.html">全国のNB-Fi標準と請求システムに関する考察</a></li>
<li><a href="../ja457696/index.html">﻿複数文字定数を使用することの危険性</a></li>
<li><a href="../ja457698/index.html">実験：DoS攻撃に対抗するツールとしてプロキシを使用する</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>