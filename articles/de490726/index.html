<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚵 👨🏻‍🔬 🤐 Authentifizierung auf Netzwerkgeräten über SSH mit öffentlichen Schlüsseln 🧖🏽 🚵🏿 👬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Standardmäßig stellen Ingenieure mithilfe eines Benutzernamens und eines Kennworts eine Verbindung zu Netzwerkgeräten her. Mit Telnet werden Benutzera...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Authentifizierung auf Netzwerkgeräten über SSH mit öffentlichen Schlüsseln</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jetinfosystems/blog/490726/"><img src="https://habrastorage.org/webt/ss/yc/-o/ssyc-oz7kbnxgw-o4rmrcit6gsg.jpeg" alt="Schlüsselbund"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Standardmäßig stellen Ingenieure mithilfe eines Benutzernamens und eines Kennworts eine Verbindung zu Netzwerkgeräten her. </font><font style="vertical-align: inherit;">Mit Telnet werden Benutzeranmeldeinformationen im Klartext und über SSH verschlüsselt übertragen. </font><font style="vertical-align: inherit;">Um den geheimen Teil nicht über das Netzwerk zu übertragen, wird die Authentifizierung mit öffentlichem Schlüssel verwendet. </font><font style="vertical-align: inherit;">Bei dieser Authentifizierung wird dem Benutzer auf dem Gerät der öffentliche Schlüssel des Benutzers vorab zugewiesen. </font><font style="vertical-align: inherit;">Der private Schlüssel wird nicht über das Netzwerk übertragen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Handbuch hilft Ihnen dabei, schnell öffentliche Schlüssel für die Authentifizierung zu verwenden, wenn Sie über das SSH-Protokoll eine Verbindung zu Netzwerkgeräten herstellen. </font><font style="vertical-align: inherit;">Das Handbuch gilt sowohl für Windows als auch für Mac OS X. Ich habe versucht, es so einfach und informativ wie möglich zu gestalten. </font><font style="vertical-align: inherit;">Es ist nicht überladen, sondern beantwortet die grundlegenden Fragen:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Woher bekommt man den öffentlichen Schlüssel und wie benutzt man ihn?</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">         ?</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">           ?</a></li>
</ul><br>
<a name="habracut"></a><br>
<h2></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  RSA-</a><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> RSA-  SecureCRT</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> RSA-  PuTTYgen</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> RSA-   Putty Private Key (PuTTY)   OpenSSH (SecureCRT)</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> RSA-   VanDyke Private Key (SecureCRT)   Putty Private Key (PuTTY)</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">    MAC OS X   </a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">    </a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cisco IOS XE, Catalyst (  15.1  ), IOS</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cisco ASA</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   Huawei</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Huawei USG (6000)</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cisco Nexus 9.3</a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">      SSH</a><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SecureCRT</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PuTTY</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MAC OS X</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">    SSH  MAC OS X:</a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe auch die "wunden" Themen untersucht:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schlüsselkonvertierung zwischen OpenSSH &lt;==&gt; SecureCRT &lt;==&gt; PuTTY.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden verschiedener Paare öffentlicher Schlüssel für verschiedene Geräte. </font><font style="vertical-align: inherit;">Ein Schlüssel ist gut, aber in der Realität nicht anwendbar. </font><font style="vertical-align: inherit;">Unterschiedliche Kunden oder Geräte erfordern unterschiedliche Paare öffentlicher Schlüssel (einige mit Passwort, andere ohne).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden des nativen (nativen) MAC OS X zum Arbeiten mit öffentlichen Schlüsseln.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Handbuch sollte auch bei der Verwendung von Ansible mit Netzwerkgeräten hilfreich sein, da Ansible standardmäßig OpenSSH mit Authentifizierung mit öffentlichem Schlüssel verwendet.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
90% des vorgestellten Materials wird an realen Geräten getestet.</font></font><br>
<br>
<a name="Introduction"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einführung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neben der Standardkennwortauthentifizierung (Kennwort / Tastatur) im SSH-Protokoll gibt es auch die Public-Key-Authentifizierung (RSA).</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Als Referenz</font></font></b><div class="spoiler_text">RSA (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://ru.wikipedia.org/wiki/RSA</a>) —     .     (public key)     (private key).        :            .         .         ,       ,        .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Authentifizierung mit RSA-Schlüsseln besteht aus mehreren Schritten: </font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen eines Paares von RSA-Schlüsseln.</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installieren eines öffentlichen Schlüssels auf Geräten.</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verbindung zu Geräten und Authentifizierung mit einem RSA-Schlüssel.</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Warum nur RSA? </font><font style="vertical-align: inherit;">Warum nicht eine DSA? </font><font style="vertical-align: inherit;">Leider habe ich die Antwort auf diese Frage nicht gefunden (und nicht wirklich danach gesucht). </font><font style="vertical-align: inherit;">Offiziell wird jedoch nur RSA auf Cisco-Geräten unterstützt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secure Shell-Konfigurationshandbuch, Cisco IOS Release 15E:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secure Shell-Konfigurationshandbuch, Cisco IOS Release 15E </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einschränkungen für Secure Shell Version 2 Unterstützung Die </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Generierung von Rivest-, Shamir- und Adleman-Schlüsseln (RSA) ist eine serverseitige SSH-Anforderung. </font><font style="vertical-align: inherit;">Geräte, die als SSH-Clients fungieren, müssen keine RSA-Schlüssel generieren.</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versuch, DSA-Schlüsseldaten einzugeben:</font></font><br>
<br>
<pre><code class="plaintext hljs">CSR-1(conf-ssh-pubkey-data)#exit<font></font>
%SSH: Only ssh-rsa type is supported<font></font>
CSR-1(conf-ssh-pubkey-user)#<font></font>
</code></pre><br>
<a name="CreatePublicKey"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen eines öffentlichen RSA-Schlüssels</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Paar RSA-Schlüssel kann mit verschiedenen Dienstprogrammen erstellt werden: SecureCRT, PuTTYgen oder einer anderen Software. </font><font style="vertical-align: inherit;">Beim Erstellen eines Schlüssels können Sie die Passphrase (Passwortschutz mit einem Schlüssel) festlegen.</font></font><br>
<br>
<a name="CreatePublicKeySecureCRT"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSA-Paargenerierung in SecureCRT</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SecureCRT -&gt; Tools -&gt; Öffentlichen Schlüssel erstellen ...:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/2m/xb/eb/2mxbeb3d8sc8thocdojacrzizn4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein bisschen Theorie → die Schaltfläche „Weiter&gt;“:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wv/ii/ze/wviize2n_5dkko4v4kpyxkkwzty.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Typ des RSA / DSA-Zertifikats → Wählen Sie RSA → Schaltfläche „Weiter&gt;“:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/rs/le/ni/rslenitclgxtobzvsz_ulj39q_c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verschlüsselungskennwort für den geheimen Schlüssel (optional, Sie können ihn leer lassen und nicht verschlüsseln) + Kommentar → Schaltfläche „Weiter&gt;“:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/q7/_q/5v/q7_q5vwtmmpbeszmxkizeuznul4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wählen Sie die Schlüssellänge (in SecureCRT Version 6.1.0 beträgt die maximale Schlüssellänge 2048 Bit, in Version 8.5.4 - 16 384 Bit):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/q5/qm/zg/q5qmzgg_hzzlyg_q0qvobcddkd4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tastengenerierung → Schaltfläche „Weiter&gt;“: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um Zufallszahlen zu generieren, müssen Sie die Maus innerhalb des Fensters bewegen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wf/w8/dh/wfw8dhn0tsfuj8nkdfprxdsjpxk.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/aw/yj/cs/awyjcsqvlbd_6tapahm4twq8kj4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Speichern eines Schlüsselpaars → Auswählen eines Speicherorts → Auswählen eines Formats für einen gespeicherten Schlüssel (VanDuke Private-Format, OpenSSH-Legacy, OpenSSH neu) → Schaltfläche „Fertig stellen“: </font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9n/ts/3s/9nts3s5p5bnfiz14nwmlo59eva4.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/kq/pw/dv/kqpwdvana4ytrh1wjrzbdtjegzu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SecureCRT fragt, ob dieser Schlüssel zum Standardschlüssel für SecureCRT gemacht werden soll:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zl/pa/iv/zlpaiv_a3gr6noc5hppfx-1vpoq.png"></div><br>
<a name="CreatePublicKeyPuttygen"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSA-Paargenerierung in PuTTYgen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können PuTTYgen hier herunterladen: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Starten Sie PuTTYgen:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/_l/wi/fo/_lwifoh8tblsbyjqqft_7ooyofu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wählen Sie die Parameter aus (Paartyp: RSA; Schlüsselbitdimension: 2048; optional Passphrase einstellen (Passwortschutz mit Passwort)) → Generieren:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/b3/dw/d0/b3dwd0xoppidkvcjqwzont-kxj0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um Zufallszahlen zu garantieren, bittet er, die Maus innerhalb des Fensters zu bewegen. </font><font style="vertical-align: inherit;">Dies ist ein Schutz gegen Pseudozufallszahlen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ee/0a/vq/ee0avqbadgo1s4r8ir21kchtuoa.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RSA-Schlüssel speichern → Schaltfläche „Privaten Schlüssel speichern“:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fp/l-/qa/fpl-qavfk_rncnkpey7leotfaqe.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bitte beachten Sie: RSA-Schlüssel, die in einer Software in einem privaten Format gespeichert sind, können nicht in Software eines anderen Herstellers verwendet werden. </font><font style="vertical-align: inherit;">Das heißt, ein Paar RSA-Schlüssel, die in PuTTYgen erstellt und im Putty Private Key-Format gespeichert wurden, sind nicht für die Verwendung in SecureCRT geeignet und umgekehrt. </font><font style="vertical-align: inherit;">PuTTY unterstützt nur das Putty Private Key-Format. </font><font style="vertical-align: inherit;">Eine universelle Lösung für die Verteilung von Schlüsseln besteht darin, Schlüssel in das OpenSSH-Format zu konvertieren (siehe Link 2: „Konvertierung von Putty zu SecureCRT mit Authentifizierungsschlüsseln“). </font><font style="vertical-align: inherit;">Da SecureCRT frei mit dem OpenSSH-Format arbeitet. </font><font style="vertical-align: inherit;">Und die PuTTYgen-Software konvertiert das OpenSSH-Format in das Putty Private Key-Format.</font></font><br>
<br>
<a name="ConvertPPKtoOpenSSH"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konvertieren eines RSA-Schlüssels vom Putty Private Key (PuTTY) -Format in das OpenSSH (SecureCRT) -Format</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um RSA-Schlüssel in SecureCRT zu verwenden, die in PuTTYgen generiert und im Putty Private Key-Format (* .ppk) gespeichert werden, exportieren wir sie mit PuTTYgen im OpenSSH-Format:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Starten Sie PuTTYgen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir laden den vorhandenen RSA-Schlüssel im Putty Private Key-Format (* .ppk) → Die Schaltfläche „Laden“.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speichern Sie die Datei mit dem öffentlichen Schlüssel → „Öffentlichen Schlüssel speichern“.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir exportieren den geheimen Schlüssel in das OpenSSH-Format: Menü PuTTYgen → „Konvertierungen“ → „OpenSSH-Schlüssel exportieren“.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir verwenden OpenSSH-Dateien in SecureCRT. </font><font style="vertical-align: inherit;">Die Datei mit dem öffentlichen Schlüssel hat die Erweiterung .pub, die Datei mit dem privaten Schlüssel hat keine Erweiterung.</font></font></li>
</ol><br>
<a name="ConvertVanDykePrivateKeyToPPK"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konvertieren eines RSA-Schlüssels vom SecureCRT-Format (VanDyke Private Key) in das PuTTY-Format (Putty Private Key)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um RSA-Schlüssel in PuTTY zu verwenden, die in SecureCRT generiert und im VanDyke Private Key-Format (öffentliche Schlüsseldatei * .pub, geheime Schlüsseldatei *. (Ohne Erweiterung)) gespeichert wurden, exportieren Sie sie mit SecureCRT im OpenSSH-Format und anschließend Mit PuTTYgen exportieren wir in das Format Putty Private Key (* .ppk):</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Starten Sie SecureCRT.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menü “Extras” → “Privaten Schlüssel in OpenSSH-Format konvertieren ...”</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wählen Sie die Quelldatei mit den VanDyke Private Key-Schlüsseln aus.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir speichern OpenSSH-Schlüssel unter einem neuen Namen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Starten Sie PuTTYgen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir laden den vorhandenen RSA-Schlüssel im OpenSSH-Format (*.): PuTTYgen-Menü → „Konvertierungen“ → „Schlüssel importieren“.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speichern Sie die Datei im Kittformat: "Privaten Schlüssel speichern".</font></font></li>
</ol><br>
<a name="CreatePublicKeyMacOSX"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Generieren öffentlicher Schlüssel unter MAC OS X unter Verwendung des Betriebssystems</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden das eingebaute Dienstprogramm ssh-keygen (man ssh-keygen) verwenden. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir generieren einen RSA-Schlüssel mit einer Länge von 2048 Bit mit dem Schlüsselnamen, dem Pfad zum Ordner mit dem Schlüsselspeicherort:</font></font><br>
<br>
<pre><code class="plaintext hljs">ssh-keygen -b 2048 -t rsa -c "Lab router R4" -f /Users/ArtemiySP/Documents/python/r4</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zur Laufzeit fordert das Programm ein Kennwort zum Schutz des RSA-Schlüssels an:</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:Downloads ArtemiySP$ ssh-keygen -b 2048 -t rsa -C "Lab router R4" -f /Users/ArtemiySP/Documents/python/r4<font></font>
Generating public/private rsa key pair.<font></font>
Enter passphrase (empty for no passphrase): <font></font>
Enter same passphrase again: <font></font>
Your identification has been saved in /Users/ArtemiySP/Documents/python/r4.<font></font>
Your public key has been saved in /Users/ArtemiySP/Documents/python/r4.pub.<font></font>
The key fingerprint is:<font></font>
SHA256:WdT47SFvgGI7danxX94p8/cO3uyU12SB3ipkc7nHxzA Lab router R4<font></font>
The key's randomart image is:<font></font>
+---[RSA 2048]----+<font></font>
|          .o     |<font></font>
|         .. . .  |<font></font>
|          .o + . |<font></font>
|        oo+ B = .|<font></font>
|       .S+ O OEoo|<font></font>
|        o + + B*+|<font></font>
|         . . =.*O|<font></font>
|            .+o**|<font></font>
|              =+O|<font></font>
+----[SHA256]-----+<font></font>
artemiy-2:Downloads ArtemiySP$<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir generieren einen RSA-Schlüssel mit einer Länge von 4096 Bit unter Angabe des Schlüsselnamens, des Pfads zum Ordner mit dem Schlüsselspeicherort. Wir setzen das Kennwort explizit in den Schlüsselgenerierungsparametern (-N "cisco"):</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:Downloads ArtemiySP$ ssh-keygen -b 4096 -t rsa -C "Lab router R5" -N "cisco" -f /Users/ArtemiySP/Documents/python/r5<font></font>
Generating public/private rsa key pair.<font></font>
Your identification has been saved in /Users/ArtemiySP/Documents/python/r5.<font></font>
Your public key has been saved in /Users/ArtemiySP/Documents/python/r5.pub.<font></font>
The key fingerprint is:<font></font>
SHA256:NraLRMqB4qmA8qNjKdpBBt1JBw8Osf/3GfuB2k1R+zY Lab router R5<font></font>
The key's randomart image is:<font></font>
+---[RSA 4096]----+<font></font>
|  o.+..          |<font></font>
| . * =           |<font></font>
|. o + .       .  |<font></font>
| . o         . . |<font></font>
|. + o . S   . .  |<font></font>
|o+.. = o o . . . |<font></font>
|+oo o o o o o  Eo|<font></font>
|*=.. . o = * . ..|<font></font>
|Boo.  . o =.o    |<font></font>
+----[SHA256]-----+<font></font>
artemiy-2:Downloads ArtemiySP$<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nicht generierte Schlüsselgenerierungsparameter: Ein unzuverlässiger Schlüssel mit einer Länge von 1024 Bit, der den Schlüsselnamen und den Pfad zum Ordner mit dem Schlüsselspeicherort angibt. Das Kennwort wird explizit in den Schlüsselgenerierungsparametern festgelegt (-N "" - ohne Kennwort):</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:Downloads ArtemiySP$ ssh-keygen -b 1024 -t rsa -C "Lab router R6" -N "" -f /Users/ArtemiySP/Documents/python/r6<font></font>
Generating public/private rsa key pair.<font></font>
Your identification has been saved in /Users/ArtemiySP/Documents/python/r6.<font></font>
Your public key has been saved in /Users/ArtemiySP/Documents/python/r6.pub.<font></font>
The key fingerprint is:<font></font>
SHA256:LEcfgN+58TYMDv4MpBA2FGCWc2aFiY+SxWBf7pRViWs Lab router R6<font></font>
The key's randomart image is:<font></font>
+---[RSA 1024]----+<font></font>
|.++=o*.o+..      |<font></font>
|.oB % +. o       |<font></font>
| o X * .o...     |<font></font>
|o . =  E+.=.     |<font></font>
| .   oo+So.*     |<font></font>
|      .oo o =    |<font></font>
|         + . .   |<font></font>
|          o      |<font></font>
|                 |<font></font>
+----[SHA256]-----+<font></font>
artemiy-2:Downloads ArtemiySP$<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher haben wir drei Schlüssel mit den Namen der Schlüssel und der Position der Schlüssel erstellt (standardmäßig werden alle Schlüssel in / Users / [Benutzername 022 / .ssh gespeichert). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Standardmäßig werden bei einer Verbindung über SSH mit Authentifizierung durch einen öffentlichen Schlüssel alle öffentlichen Schlüssel nacheinander gespeichert, die im Ordner /Users/[Username†/.ssh gespeichert werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R6-Schlüssel: Benennen Sie den Schlüssel in "id_rsa" um (standardmäßig lautet der Name der generierten Schlüsseldatei "id_rsa") und übertragen Sie ihn mit SSH-Schlüsseln (~ / .ssh /) in den Ordner (d. H. Wir führen alle Schritte aus, sodass der R6-Schlüssel als Hauptschlüssel verwendet wird Standard-SSH-Verbindungsschlüssel): </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konvertieren Sie den öffentlichen OpenSSH-Schlüssel in das RFC4716-Format (Export nach Cisco IOS):</font></font><br>
<br>
<pre><code class="plaintext hljs">https://serverfault.com/questions/706336/how-to-get-a-pem-file-from-ssh-key-pair<font></font>
ssh-keygen -f ~/Documents/python/r4.pub -e -m RFC4716<font></font>
ssh-keygen -f ~/Documents/python/r5.pub -e -m RFC4716<font></font>
ssh-keygen -f ~/.ssh/id_rsa.pub -e -m RFC4716<font></font>
</code></pre><br>
<a name="ConfigureKeyAtHardware"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden eines öffentlichen Schlüssels für Geräte</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie kann man auf verschiedenen Geräten einen öffentlichen Schlüssel an einen Benutzer binden? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Binden eines öffentlichen Schlüssels an einen Benutzer ist kein Standard und variiert von Gerät zu Gerät. Daher werden Beispiele für jeden Gerätetyp angegeben, der im Netzwerk am häufigsten verwendet wird.</font></font><br>
<br>
<a name="ConfigureKeyAtHardwareCiscoIOS"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cisco IOS XE, Catalyst (ab Version 15.1), IOS </font></font></h3><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auf dem Gerät befindet sich bereits ein Benutzer.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geben Sie in den SSH-Einstellungen (ip ssh pubkey-chain) für den Benutzer (Benutzername cisco) den öffentlichen Schlüssel (Schlüsselzeichenfolge) an:</font></font><br>
<pre><code class="plaintext hljs">CSR-1#conf t<font></font>
Enter configuration commands, one per line.  End with CNTL/Z.<font></font>
CSR-1(config)#ip ssh pubkey-chain <font></font>
CSR-1(conf-ssh-pubkey)#username ssh-putty<font></font>
CSR-1(conf-ssh-pubkey-user)#key-string <font></font>
CSR-1(conf-ssh-pubkey-data)#$QAAAQEAnPbynT1+2rjlyqP4viSPdTVDFLSHzWjJnAwy     <font></font>
CSR-1(conf-ssh-pubkey-data)#$NCfaqvMTPruCgG5096q8lO0ntURmNgmfMEQPOgb8weF     <font></font>
CSR-1(conf-ssh-pubkey-data)#$AtMQYk7WFM+5iBnOQ32UAHNavCUA7YFEpAdOQO4W/qB     <font></font>
CSR-1(conf-ssh-pubkey-data)#$SlOLy+PQ47jDUINBnuUeHd8ZXyzXxWglzSvqtwMEXBW     <font></font>
CSR-1(conf-ssh-pubkey-data)#$VoUTBYbJ45DmFa93P50qf494ujaAsTbYyJ/GBzJUTK/     <font></font>
CSR-1(conf-ssh-pubkey-data)#$UADAkNGxQARfOfHZWiIYb3rif6h6hfwwVUZS/Tw==       <font></font>
CSR-1(conf-ssh-pubkey-data)#exit<font></font>
CSR-1(conf-ssh-pubkey-user)#exit<font></font>
CSR-1(conf-ssh-pubkey)#exit<font></font>
CSR-1(config)#exit<font></font>
CSR-1#exit<font></font>
<font></font>
CSR-1#show running-config | inc ssh<font></font>
username ssh-public-key secret 5 $1$ebjc$EYgwMFQXPPiywFVn6rl7t.<font></font>
username ssh-putty privilege 15 secret 5 $1$vIhh$nM8iCeBKmLyVK4hA6./h4.<font></font>
ip ssh pubkey-chain<font></font>
   key-hash ssh-rsa D4E9AD62F7F6265EAAB3FB8778477612<font></font>
  username ssh-public-key<font></font>
   key-hash ssh-rsa C331DEE821A84681A4A7B1862C100D16<font></font>
  username ssh-putty<font></font>
   key-hash ssh-rsa F32BEB60290EA75D151447C0D42D2A99<font></font>
   key-hash ssh-rsa 5432C275B363B646E02D3BA7E8D865B7<font></font>
CSR-1#<font></font>
</code></pre></li>
</ol><br>
<a name="ConfigureKeyAtHardwareCiscoASA"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cisco ASA</font></font></h3><br>
<pre><code class="plaintext hljs">LAB-ASA5516-X-01/pri/act# conf t<font></font>
LAB-ASA5516-X-01/pri/act(config)# username artemiy password artemiy privilege $<font></font>
LAB-ASA5516-X-01/pri/act(config)# username artemiy attributes <font></font>
LAB-ASA5516-X-01/pri/act(config-username)# ssh authentication publickey ?<font></font>
<font></font>
username mode commands/options:<font></font>
  WORD  Raw SSH-RSA public key<font></font>
LAB-ASA5516-X-01/pri/act(config-username)# ssh authentication publickey AAAAB3$<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir fügen den gesamten Schlüssel in einer Zeile ein (OpenSSH-Format).</font></font><br>
<br>
<a name="ConfigureKeyAtHardwareHuaweiRouter"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Huawei Router und Switches</font></font></h3><br>
<pre><code class="plaintext hljs">[R1]rsa peer-public-key test-key1 encoding-type pem <font></font>
Enter "RSA public key" view, return system view with "peer-public-key end".<font></font>
NOTE: The number of the bits of public key must be between 769 and 2048.<font></font>
[R1-rsa-public-key]public-key-code begin <font></font>
Enter "RSA key code" view, return last view with "public-key-code end".<font></font>
[R1-rsa-key-code]---- BEGIN SSH2 PUBLIC KEY ----<font></font>
[R1-rsa-key-code]Subject: Subject<font></font>
[R1-rsa-key-code]Comment: " Subject@Subject.local"<font></font>
[R1-rsa-key-code]ModBitSize: 2048<font></font>
[R1-rsa-key-code]AAAAB3NzaC1yc2EAAAADAQABAAABAQC4YLFhPqfsz4a6PUpZOtvm6zGn5TWOVMnx<font></font>
[R1-rsa-key-code]lTH5hr/u+aYnoM2XnDTu4Ul1iB8MMPLVKXzV4LgYhaFcU1rz2/yYhTKIwbiQTHof<font></font>
[R1-rsa-key-code]63fJjyWwkvyBuVZTSKh4b2pfoF2mXgdJzzRmUaiRrZZUVJWsX+CbgtKQuktG7sTK<font></font>
[R1-rsa-key-code]2eguHwdfhilbOAsUaL0/q39Y0aTAMnLMtn0m5r6MD/UopQPI3Fxm1L9azJ7zYIZa<font></font>
[R1-rsa-key-code]yI43Solg0AOupPl8FHFI9Cxq81/uZRACx5lAyuObaQ4/t1Rdh3CAJj1qwfZjZFTP<font></font>
[R1-rsa-key-code]VdJxwTDxwfkpOzMD193M0ThOSrgfWe336Q9F3jbSWrEYUQDX8ew7<font></font>
[R1-rsa-key-code]---- END SSH2 PUBLIC KEY ----<font></font>
[R1-rsa-key-code]public-key-code end<font></font>
[R1-rsa-public-key]peer-public-key end <font></font>
[R1]display rsa peer-public-key <font></font>
<font></font>
=====================================<font></font>
    Key name: test-key1<font></font>
=====================================<font></font>
Key Code:<font></font>
---- BEGIN SSH2 PUBLIC KEY ----<font></font>
AAAAB3NzaC1yc2EAAAADAQABAAABAQC4YLFhPqfsz4a6PUpZOtvm6zGn5TWOVMnx<font></font>
lTH5hr/u+aYnoM2XnDTu4Ul1iB8MMPLVKXzV4LgYhaFcU1rz2/yYhTKIwbiQTHof<font></font>
63fJjyWwkvyBuVZTSKh4b2pfoF2mXgdJzzRmUaiRrZZUVJWsX+CbgtKQuktG7sTK<font></font>
2eguHwdfhilbOAsUaL0/q39Y0aTAMnLMtn0m5r6MD/UopQPI3Fxm1L9azJ7zYIZa<font></font>
yI43Solg0AOupPl8FHFI9Cxq81/uZRACx5lAyuObaQ4/t1Rdh3CAJj1qwfZjZFTP<font></font>
VdJxwTDxwfkpOzMD193M0ThOSrgfWe336Q9F3jbSWrEYUQDX8ew7<font></font>
---- END SSH2 PUBLIC KEY ----<font></font>
aaa<font></font>
local-user jet privilege level 15<font></font>
 local-user jet service-type telnet terminal ssh http<font></font>
ssh user jet assign rsa-key test-key1<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Huawei importierte Arten von Schlüsselformaten: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"SecureCRT und PuTTY generieren RSA-Schlüssel im PEM-Format."</font></font><br>
<br>
<pre><code class="plaintext hljs">rsa peer-public-key test-key1 encoding-type pem</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Der OpenSSH generiert RSA-Schlüssel im OpenSSH-Format."</font></font><br>
<br>
<pre><code class="plaintext hljs">rsa peer-public-key test-key1 encoding-type openssh</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Die OpenSSL generiert RSA-Schlüssel im DER-Format."</font></font><br>
<br>
<pre><code class="plaintext hljs">rsa peer-public-key test-key1 encoding-type der</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Standardwert ist hexadezimal:</font></font><br>
<br>
<pre><code class="plaintext hljs">rsa peer-public-key test-key1</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hinweis: Huawei-Geräte unterstützen nicht nur Schlüssel im RSA-Format, sondern auch andere Formate:</font></font><br>
<br>
<pre><code class="plaintext hljs">ssh user user-name assign { rsa-key | dsa-key | ecc-key } key-name</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können den Authentifizierungstyp für den Benutzer über SSH fest festlegen:</font></font><br>
<br>
<pre><code class="plaintext hljs">[R1]ssh user jet authentication-type ?<font></font>
  all           All authentication, password,RSA or ECC<font></font>
  ecc           ECC authentication<font></font>
  password      Password authentication<font></font>
  password-ecc  Both password and ECC<font></font>
  password-rsa  Both password and RSA<font></font>
  rsa           RSA authentication<font></font>
[R1]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das heißt, wir erlauben den Zugriff entweder mit einem Passwort oder mit öffentlichen und privaten Schlüsseln oder mit beiden.</font></font><br>
<br>
<a name="ConfigureKeyAtHardwareHuaweiUSG"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Huawei USG (6000)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Konfiguration ist den Einstellungen auf dem Router völlig ähnlich, verfügt jedoch über einige Funktionen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Standardmäßig ist die Berechtigungsstufe nach der Protokollierung mit Zertifikaten 0 und kann nicht erhöht werden. </font><font style="vertical-align: inherit;">Daher wird die Prioritätsstufe mit festgelegt</font></font><br>
<br>
<pre><code class="plaintext hljs">user-interface vty 0 4 <font></font>
user privilege level 15<font></font>
user-interface vty 16 20:<font></font>
user privilege level 15<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beispiel:</font></font><br>
<br>
<pre><code class="plaintext hljs">[USG-a]rsa peer-public-key test-key1 encoding-type pem <font></font>
Enter "RSA public key" view, return system view with "peer-public-key end".<font></font>
[USG-a-rsa-public-key]public-key-code begin<font></font>
Enter "RSA key code" view, return last view with "public-key-code end".<font></font>
[USG-a-rsa-key-code]---- BEGIN SSH2 PUBLIC KEY ----<font></font>
[USG-a-rsa-key-code]Subject: subject<font></font>
[USG-a-rsa-key-code]Comment: " subject@subject.local"<font></font>
[USG-a-rsa-key-code]ModBitSize: 2048<font></font>
[USG-a-rsa-key-code]AAAAB3NzaC1yc2EAAAADAQABAAABAQC4YLFhPqfsz4a6PUpZOtvm6zGn5TWOVMnx<font></font>
[USG-a-rsa-key-code]lTH5hr/u+aYnoM2XnDTu4Ul1iB8MMPLVKXzV4LgYhaFcU1rz2/yYhTKIwbiQTHof<font></font>
[USG-a-rsa-key-code]63fJjyWwkvyBuVZTSKh4b2pfoF2mXgdJzzRmUaiRrZZUVJWsX+CbgtKQuktG7sTK<font></font>
[USG-a-rsa-key-code]2eguHwdfhilbOAsUaL0/q39Y0aTAMnLMtn0m5r6MD/UopQPI3Fxm1L9azJ7zYIZa<font></font>
[USG-a-rsa-key-code]yI43Solg0AOupPl8FHFI9Cxq81/uZRACx5lAyuObaQ4/t1Rdh3CAJj1qwfZjZFTP<font></font>
[USG-a-rsa-key-code]VdJxwTDxwfkpOzMD193M0ThOSrgfWe336Q9F3jbSWrEYUQDX8ew7<font></font>
[USG-a-rsa-key-code]---- END SSH2 PUBLIC KEY ----<font></font>
[USG-a-rsa-key-code]public-key-code end<font></font>
[USG-a-rsa-public-key]peer-public-key end<font></font>
[USG-a]<font></font>
[USG-a]ssh user admin assign rsa-key test-key1<font></font>
! Out-of-band management interface:<font></font>
[USG-a-GigabitEthernet0/0/0]service-manage ssh permit<font></font>
! Grant user level 15 privillege:<font></font>
[USG-a]user-interface vty 0 4<font></font>
[USG-a-ui-vty0-4]user privilege level 15<font></font>
</code></pre><br>
<a name="ConfigureKeyAtHardwareCiscoNexus"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cisco Nexus 9.3</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Option 1: Installieren Sie die öffentliche Schlüsseldatei auf dem Gerät vor und hängen Sie die öffentliche Schlüsseldatei an den Benutzer an.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kopieren Sie die Datei mit dem öffentlichen Schlüssel auf das Gerät.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir weisen den Benutzer an, die öffentliche Schlüsseldatei zu verwenden.</font></font></li>
</ul><br>
<pre><code class="plaintext hljs">switch# copy tftp://10.10.1.1/secsh_file.pub bootflash:secsh_file.pub<font></font>
username User1 sshkey file bootflash:secsh_file.pub<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Option 2: Kopieren Sie den öffentlichen Schlüssel auf den Benutzer:</font></font><br>
<br>
<pre><code class="plaintext hljs">username User1 sshkey<font></font>
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC4YLFhPqfsz4a6PUpZOtvm6zGn5TWOVMnxlTH5hr/u+aYnoM2XnDTu4Ul1iB8MMPLVKXzV4LgYhaFcU1rz2/yYhTKIwbiQTHof63fJjyWwkvyBuVZTSKh4b2pfoF2mXgdJzzRmUaiRrZZUVJWsX+CbgtKQuktG7sTK2eguHwdfhilbOAsUaL0/q39Y0aTAMnLMtn0m5r6MD/UopQPI3Fxm1L9azJ7zYIZayI43Solg0AOupPl8FHFI9Cxq81/uZRACx5lAyuObaQ4/t1Rdh3CAJj1qwfZjZFTPVdJxwTDxwfkpOzMD193M0ThOSrgfWe336Q9F3jbSWrEYUQDX8ew7<font></font>
</code></pre><br>
<a name="ConfigureSoftwareToUsePublicKey"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden eines geheimen Schlüssels für die SSH-Verbindung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Abschnitt befasst sich mit der Konfiguration von SSH-Clients für die Authentifizierung mithilfe von RSA-Schlüsseln auf Netzwerkgeräten (oder anderen Geräten, sofern die Hardware und Software die Authentifizierung mit öffentlichen Schlüsseln unterstützt). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden erwägen, die Verwendung des öffentlichen Schlüssels in den beliebtesten Programmen einzurichten: SecureCRT und PuTTY.</font></font><br>
<br>
<a name="ConfigureSoftwareToUsePublicKeySecureCRT"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SecureCRT</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Fenster mit den SSH-Einstellungen befindet sich eine Authentifizierungsliste. </font><font style="vertical-align: inherit;">Darin müssen Sie die Priorität von PublicKey auf den höchsten Wert erhöhen - machen Sie es ganz oben in der Liste.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/l-/ke/z4/l-kez4rg6qpuyslsuv3nmt_dti4.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xi/jh/ah/xijhahjlx-hq9m52ugqyih0qrwi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gehen Sie dann zu den PublicKey-Optionen und wählen Sie die private Schlüsseldatei aus. </font><font style="vertical-align: inherit;">Mit dem obersten Schalter können Sie die globalen Einstellungen des geheimen Schlüssels oder der Sitzungseinstellungen - einen anderen geheimen Schlüssel (nicht Standardschlüssel) - nur für diese Verbindung verwenden.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ub/js/xd/ubjsxdlmflzod5cfguosfwuqiqi.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/og/pv/ys/ogpvysr3cvrk7aliad5qxeg3jp0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konfigurieren Sie den globalen öffentlichen Schlüssel: im Menü Optionen → Globale Optionen → Kategorie SSH2.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0m/yd/dg/0myddgh9flvk10qrh8pixuphke8.png"></div><br>
<a name="ConfigureSoftwareToUsePublicKeyPutty"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kitt</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geben Sie in den SSH-Einstellungen (Verbindung → SSH → Authentifizierung) im Feld „Private Schlüsseldatei zur Authentifizierung“ die Datei Putty Private Key (* .ppk) an:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xm/wu/tp/xmwutpoyrfibggfiqssajegtyq0.png"></div><br>
<a name="ConfigureSoftwareToUsePublicKeyMacOSX"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAC OS X</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einrichten eines Standardclients für die Verwendung öffentlicher Schlüssel:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verbindung mit einem nicht standardmäßigen Schlüssel, der manuell angegeben wird:</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:~ ArtemiySP$ ssh r4@10.31.73.29 -i ~/Documents/python/r4<font></font>
The authenticity of host '10.31.73.29 (10.31.73.29)' can't be established.<font></font>
RSA key fingerprint is SHA256:fxOLFKU6YGyIqisrIh2P0O52Rr6Wx/wsSAcHsTz8fo0.<font></font>
Are you sure you want to continue connecting (yes/no)? yes<font></font>
Warning: Permanently added '10.31.73.29' (RSA) to the list of known hosts.<font></font>
CSR-4#<font></font>
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verbindung mit einem nicht standardmäßigen Schlüssel, der manuell angegeben wird:</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:~ ArtemiySP$ ssh r5@10.31.73.30 -i ~/Documents/python/r5<font></font>
The authenticity of host '10.31.73.30 (10.31.73.30)' can't be established.<font></font>
RSA key fingerprint is SHA256:4l67C4Il4pTaqYT4vrtWr0aY7rPmNWKsjRv2zlYtQIU.<font></font>
Are you sure you want to continue connecting (yes/no)? yes<font></font>
Warning: Permanently added '10.31.73.30' (RSA) to the list of known hosts.<font></font>
MGTU#exit<font></font>
Connection to 10.31.73.30 closed.<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispielfehler</font></font></b><div class="spoiler_text">        —      .     MAC OS X —     .<br>
</div></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verbindung mit dem Standardschlüssel (Standardschlüssel - das System selbst findet und verwendet den öffentlichen Standardschlüssel):</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:~ ArtemiySP$ ssh r6@10.31.73.31<font></font>
The authenticity of host '10.31.73.31 (10.31.73.31)' can't be established.<font></font>
RSA key fingerprint is SHA256:2/ysACJQw48Q8S45ody4wna+6nJspcsEU558HiUN43Q.<font></font>
Are you sure you want to continue connecting (yes/no)? yes<font></font>
Warning: Permanently added '10.31.73.31' (RSA) to the list of known hosts.<font></font>
PR#exit<font></font>
Connection to 10.31.73.31 closed.<font></font>
artemiy-2:~ ArtemiySP$ <font></font>
</code></pre></li>
</ul><br>
<a name="MacOSXUseSSH"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So vereinfachen Sie die Arbeit mit SSH unter MAC OS X:</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie SSH-Aliase.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In SSH-Aliasen setzen wir die Benutzer sofort.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registrieren Sie sofort die Position der Schlüssel.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Speicherort der Aliase und die vorkonfigurierte SSH-Konfiguration sind in der Datei ~ / .ssh / config (/Users/[Username†/.ssh/config) angegeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf diese Weise gefüllt:</font></font><br>
<br>
<pre><code class="plaintext hljs">host r4<font></font>
   Hostname 10.31.73.29<font></font>
   Port 22<font></font>
   User r4<font></font>
   IdentityFile ~/Documents/python/r4<font></font>
<font></font>
host r5<font></font>
   Hostname 10.31.73.30<font></font>
   Port 22<font></font>
   User r5<font></font>
   IdentityFile ~/Documents/python/r5<font></font>
<font></font>
host r6<font></font>
   Hostname 10.31.73.31<font></font>
   Port 22<font></font>
   User r6<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hinweis: Meine Standardverbindung ist falsch konfiguriert (ich weiß nicht, wie richtig), da die Verbindung zum R6-Host (10.31.73.31) sehr lange dauert. </font><font style="vertical-align: inherit;">Es wird empfohlen, dass Sie sofort den Pfad zum Standardschlüssel angeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Beispiel für eine SSH-Verbindung mit öffentlichen Schlüsseln und einer Konfigurationsdatei:</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:Documents ArtemiySP$ ssh r5<font></font>
MGTU#exit<font></font>
Connection to 10.31.73.30 closed by remote host.<font></font>
Connection to 10.31.73.30 closed.<font></font>
artemiy-2:Documents ArtemiySP$ ssh r4<font></font>
CSR-4#exit<font></font>
Connection to 10.31.73.29 closed by remote host.<font></font>
Connection to 10.31.73.29 closed.<font></font>
artemiy-2:Documents ArtemiySP$ ssh r6<font></font>
PR#exit<font></font>
Connection to 10.31.73.31 closed.<font></font>
artemiy-2:Documents ArtemiySP$ ssh r6<font></font>
PR#<font></font>
</code></pre><br>
<a name="finale"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RSA-Schlüssel können verwendet werden, um die Kennwortauthentifizierung zu ersetzen, jedoch nicht in allen Fällen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Authentifizierung mit öffentlichem Schlüssel ist nicht möglich, wenn die Domänenauthentifizierung konfiguriert ist (da LDAP-Anforderungen (Kerberos) an den Server zur Authentifizierung als Proxy verwendet werden).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Authentifizierung mit öffentlichem Schlüssel auf alten Netzwerkgeräten ist nicht möglich (Beispiel: Konfiguration auf Cisco Catalyst 2960 mit Firmware 12.2 fehlgeschlagen).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passwortgeschützte öffentliche Schlüssel werden bequem in Bankgeräten verwendet. Nachteil: Es ist notwendig, eine Reihe von privaten und öffentlichen Schlüsseln an Kollegen und Partner zu senden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei einigen Geräten können mehrere Paare öffentlicher Schlüssel einem Benutzer entsprechen, bei anderen Geräten entspricht nur ein öffentlicher Schlüssel einem Benutzer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt auch verschiedene Formate, in denen ein Paar öffentlicher und privater Schlüssel gespeichert ist. Diese Anleitung hilft Ihnen jedoch beim Exportieren von Schlüsseln in verschiedenen Formaten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heutzutage ist es optimal, Schlüssel mit einer Länge von 2048 Bit zu verwenden, aber für einige Geräte ist dies die maximal mögliche Schlüssellänge (möglicherweise wird dies in der neuen Firmware behoben). Zum Beispiel:</font></font><br>
<br>
<pre><code class="plaintext hljs">[R1]rsa peer-public-key test-key2 encoding-type pem<font></font>
Enter "RSA public key" view, return system view with "peer-public-key end".<font></font>
NOTE: The number of the bits of public key must be between 769 and 2048.<font></font>
[R1-rsa-public-key]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wird empfohlen, öffentliche Schlüssel zu verwenden, um Kennwörter zu ersetzen, wenn Kennwörter mithilfe von Skripten eingegeben werden (Beispiel: Autologon in SecureCRT). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wird empfohlen, öffentliche Schlüssel zum Schutz vor Kennwortübertragung über das Netzwerk zu verwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einige Softwareprogramme verwenden standardmäßig öffentliche Schlüssel für die SSH-Authentifizierung anstelle eines Kennworts (Beispiel: Ansible).</font></font><br>
<br>
<a name="ListOfSources"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liste der Quellen:</font></font></h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wikipedia RSA</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konvertierung von Putty zu SecureCRT mit auth. </font><font style="vertical-align: inherit;">Schlüssel, SecureCRT Forum</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secure Shell-Konfigurationshandbuch, Cisco IOS Release 15E</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laden Sie PuTTYgen herunter</font></font></a></li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Offizielle Dokumentation von</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Huawei </font><font style="vertical-align: inherit;">- eine Beschreibung der verschiedenen Schlüsselformate für den Import in einen Huawei-Router</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Huawei USG 6000, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren der Authentifizierung mit öffentlichem Schlüssel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (CLI: Beispiel für die Anmeldung bei der CLI mithilfe von STelnet (RSA-Authentifizierung))</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nexus 9000 Configuration guide SSH public key</a></li>
<li>man ssh-keygen —      mac os x.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SSH config file  MAC OS X</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">       SSH</a> </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">       SSH config</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  openssh public key   RFC4716</a></li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de490714/index.html">Wie bekomme ich 100.000 pro Code. Komplette Anleitung für Anfänger</a></li>
<li><a href="../de490716/index.html">Wie kann ein qualitativ hochwertiger Betrieb des lokalen Netzwerks eines kleinen Unternehmens sichergestellt werden?</a></li>
<li><a href="../de490718/index.html">Was ist der "saubere Code" im Jahr 2020?</a></li>
<li><a href="../de490720/index.html">Motor! oder Was ist Spielphysik?</a></li>
<li><a href="../de490722/index.html">Gender Urlaub in der IT. Wie zu beachten</a></li>
<li><a href="../de490728/index.html">Sicherheitswoche 10: RSA-Konferenz und Sensibilisierung für Cybersicherheit</a></li>
<li><a href="../de490730/index.html">Intel x86 Root of Trust: Vertrauensverlust</a></li>
<li><a href="../de490732/index.html">Spracherkennung: Ein sehr kurzer Einführungskurs</a></li>
<li><a href="../de490734/index.html">Ostereier auf topografischen Karten der Schweiz</a></li>
<li><a href="../de490736/index.html">9 klare Werkzeuge zum Lernen und Pumpen des englischen Wortschatzes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>