<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏨 👁‍🗨 👩🏿‍🚒 3D-Spiel-Rendering: Einführung 🕺🏻 🐽 📟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sie spielen den frischen Call of Mario: Deathduty Battleyard auf Ihrem perfekten Gaming-PC. Schauen Sie sich den wunderschönen, super breiten 4K-Monit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>3D-Spiel-Rendering: Einführung</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/500692/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/dq/hw/gw/dqhwgwxgezi8q8erzwy94bjwst0.jpeg" width="500"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie spielen den frischen Call of Mario: Deathduty Battleyard auf Ihrem perfekten Gaming-PC. Schauen Sie sich den wunderschönen, super breiten 4K-Monitor an und bewundern Sie die herrliche Landschaft und die komplizierten Details. Haben Sie sich jemals gefragt, wie Grafiken auf den Bildschirm gelangen? Haben Sie sich jemals gefragt, wie das Spiel den Computer dazu bringt, Ihnen das alles zu zeigen? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Willkommen zu unserer Tour zum Rendern von 3D-Spielen: Eine Reise für Anfänger, auf der Sie lernen, wie Sie einen Grundrahmen auf dem Bildschirm erstellen.</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/getpro/habr/post_images/d50/b40/462/d50b40462a4a18cef3e522b236f52c99.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jedes Jahr werden Hunderte neuer Spiele für Smartphones, Konsolen und PCs veröffentlicht. Die Vielfalt der Formate und Genres ist sehr groß, aber eines davon wird vielleicht am besten gemeistert - dies sind 3D-Spiele. Welches Spiel das erste war - eine umstrittene Frage und ein kurzer Blick auf die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basis des Guinness-Buchs der Rekorde</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lieferten mehrere Ergebnisse. Es kann als das erste Ultimate Knight Lore-Spiel angesehen werden, das 1984 veröffentlicht wurde, aber genau genommen waren die Bilder in diesem Spiel zweidimensional - es wurden keine Informationen in vollen drei Dimensionen verwendet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir also wirklich verstehen wollen, wie moderne 3D-Spiele ein Bild bilden, müssen wir mit einem anderen Beispiel beginnen: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Winning Run</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namco, veröffentlicht 1988. Vielleicht war dies das erste vollständig dreidimensionale Spiel, bei dem Technologien verwendet wurden, die sich nicht allzu sehr von modernen unterscheiden. Natürlich sind Spiele, deren Alter 30 Jahre überschritten hat, keineswegs mit denen von Codemasters F1 identisch, die 2018 veröffentlicht wurden. Die Schaltpläne sind jedoch ähnlich.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/512/06c/a91/51206ca91484780f2fd5c73deffd796b.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Artikel wird der Prozess der Erstellung eines Basisbilds für einen Monitor oder Fernseher mithilfe eines 3D-Spiels beschrieben. </font><font style="vertical-align: inherit;">Beginnen wir mit dem Endergebnis und fragen uns: "Was schaue ich an?" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann analysieren wir jede Phase der Bildbildung, die wir sehen. </font><font style="vertical-align: inherit;">Im Verlauf der Aktion werden Konzepte wie Scheitelpunkte und Pixel, Texturen und Durchgänge, Puffer und Schattierungen, Software und Anweisungen berücksichtigt. </font><font style="vertical-align: inherit;">Wir werden herausfinden, wie die Grafikkarte in den Prozess involviert ist und warum sie überhaupt benötigt wird. </font><font style="vertical-align: inherit;">Danach können Sie Ihre Spiele und PCs in einem neuen Licht betrachten und beginnen, Videografiken mehr zu schätzen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rahmenoptionen: Pixel und Farben</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beginnen wir mit dem 3D-Spiel. Als Beispiel nehmen wir die 2007 veröffentlichte </font><font style="vertical-align: inherit;">Crytek-Firma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crysis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Unten sehen Sie ein Foto der Anzeige, auf der das Spiel angezeigt wird:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/142/b40/5c4/142b405c4f4583d032427b7513391735.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Bild wird normalerweise als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rahmen bezeichnet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Aber was genau sehen wir? </font><font style="vertical-align: inherit;">Wir verwenden ein Makroobjektiv:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/593/f64/712/593f64712c5065a03fcbca1c90649938.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leider verderben die Blendung und die externe Hintergrundbeleuchtung des Monitors das Foto, aber wenn wir es ein wenig verbessern, bekommen wir</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/915/b4f/3df/915b4f3dff7fdfb77917465635d64610.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sehen, dass der Rahmen im Monitor aus einem Raster aus separaten farbigen Elementen besteht, und wenn wir sie noch weiter vergrößern, werden wir feststellen, dass jedes Element ein Block aus drei Teilen ist. Ein solcher Block wird als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pixel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Pixel, kurz für Bildelement) bezeichnet. Bei den meisten Monitoren werden Pixel in drei Farben gemalt: Rot, Grün und Blau (RGB, Rot-Grün-Blau). Um einen neuen Frame anzuzeigen, müssen Sie eine Liste mit Tausenden, wenn nicht Millionen von RGB-Werten verarbeiten und in einem Speicher speichern, auf den der Monitor Zugriff hat. Solche Speicherfragmente werden </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puffer</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> genannt, </font><i><font style="vertical-align: inherit;">dh</font></i><font style="vertical-align: inherit;"> der Monitor empfängt den Inhalt des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bildpuffers</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist der letzte Punkt des gesamten Prozesses. Jetzt bewegen wir uns in die entgegengesetzte Richtung zu seinem Beginn. </font><font style="vertical-align: inherit;">Der Prozess wird oft durch den Begriff </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rendering</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Rendering) beschrieben, aber in Wirklichkeit handelt es sich um eine Folge von miteinander verbundenen getrennten Schritten, die sich im Wesentlichen stark unterscheiden. </font><font style="vertical-align: inherit;">Stellen Sie sich vor, Sie sind Koch in einem mit einem Michelin-Stern ausgezeichneten Restaurant: Das Endergebnis ist ein Teller mit leckerem Essen, aber wie viel muss getan werden, um dies zu erreichen. </font><font style="vertical-align: inherit;">Wie beim Kochen werden Grundzutaten für das Rendern benötigt.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notwendige Bauelemente: Modelle und Texturen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hauptbausteine ​​eines 3D-Spiels sind visuelle Ressourcen, die die zu zeichnende Welt füllen. </font><font style="vertical-align: inherit;">Filme, Fernsehsendungen und Theater brauchen Schauspieler, Kostüme, Requisiten, Kulissen, Beleuchtung - die Liste ist ziemlich lang. </font><font style="vertical-align: inherit;">Das gleiche gilt für 3D-Spiele. </font><font style="vertical-align: inherit;">Alles, was Sie im generierten Rahmen sehen, wurde von Künstlern und Modellierungsexperten entwickelt. </font><font style="vertical-align: inherit;">Um es klarer zu machen, wenden wir uns der alten Schule zu und werfen einen Blick auf das Quake II-Modell des id Software-Unternehmens:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/938/10b/28f/93810b28f68f5e90d272480b2effbf97.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Spiel kam vor mehr als 20 Jahren heraus. </font><font style="vertical-align: inherit;">Zu dieser Zeit war Quake II ein technologisches Meisterwerk, obwohl die Modelle hier wie in jedem Spiel dieser Jahre sehr primitiv aussehen. </font><font style="vertical-align: inherit;">Es ist jedoch einfach zu demonstrieren, woraus sie bestehen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a04/5f2/834/a045f2834673247daedbaaf24b3f33e9.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im vorherigen Bild sehen wir einen eckigen Kerl, der aus miteinander verbundenen Dreiecken besteht. Jede Ecke wird als Scheitelpunkt oder Scheitelpunkt bezeichnet. Jeder Scheitelpunkt fungiert als Punkt im Raum und wird durch mindestens drei Zahlen beschrieben: die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Koordinaten x, y, z</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dies reicht jedoch für ein 3D-Spiel nicht aus. Daher hat jeder Scheitelpunkt zusätzliche Werte: Farbe, Richtung der Vorderseite (ja, ein Punkt kann keine Vorderseite haben ... lesen Sie einfach weiter!), Helligkeit, Transparenzgrad usw.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c42/4ff/db3/c424ffdb3f95d9758bc1a8eeb5c4a870.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Scheitelpunkte haben immer eine Reihe von Werten, die Texturkarten zugeordnet sind. Dies sind Bilder der „Kleidung“, die das Modell trägt. Da das Bild jedoch flach ist, sollte die Karte eine Ansicht aus jeder Richtung enthalten, von der aus wir das Modell betrachten können. Das Quake II-Beispiel zeigt einen einfachen Ansatz: Bilder von vorne, hinten und von den Seiten (Armen). Und moderne 3D-Spiele funktionieren bereits für Modelle mit zahlreichen Texturkarten, von denen jede viele Details enthält, ohne Leerzeichen dazwischen. Einige Karten sehen nicht wie Materialien oder Eigenschaften aus, sondern geben Auskunft darüber, wie Licht von der Oberfläche reflektiert wird. Jeder Scheitelpunkt hat einen Satz von Koordinaten in der Texturkarte, die dem Modell zugeordnet sind, so dass er über den Scheitelpunkt „gestreckt“ werden kann. Dies bedeutet, dass sich die Textur beim Verschieben des Scheitelpunkts mitbewegt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der gerenderten dreidimensionalen Welt beginnt alles, was Sie sehen, mit einer Reihe von Eckpunkten und Texturkarten. Sie werden in miteinander verbundene Speicherpuffer geladen. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Scheitelpunktpuffer</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Scheitelpunktpuffer) enthält Texturen und Teile des Speichers, die für das nachfolgende Rendern zugewiesen sind. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Befehlspuffer enthält eine Liste mit Anweisungen zum Umgang mit diesen Ressourcen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All dies bildet den notwendigen Rahmen, der verwendet wird, um das endgültige Raster aus farbigen Pixeln zu erstellen. </font><font style="vertical-align: inherit;">In einigen Spielen ist dies eine große Datenmenge, da es zu lange dauert, die Puffer für jeden neuen Frame neu zu erstellen. </font><font style="vertical-align: inherit;">Spiele speichern auch in Puffern die Informationen, die erforderlich sind, um eine ganze Welt zu bilden, die ein Spieler sehen kann, oder einen ausreichend großen Teil davon, der bei Bedarf aktualisiert wird. </font><font style="vertical-align: inherit;">In einem Rennspiel wie F1 2018 wird beispielsweise alles in einer großen Sammlung von Puffern gespeichert. </font><font style="vertical-align: inherit;">In einem Open-World-Spiel wie Skyrim werden Daten in Puffer geladen und aus diesen gelöscht, wenn sich die Kamera um die Welt bewegt.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Szeneneinrichtung: Scheitelpunkte</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit allen visuellen Informationen beginnt das Spiel mit der visuellen Anzeige. Die Szene beginnt standardmäßig an einer bestimmten Position mit der Basisanordnung von Modellen, Lichtquellen usw. Dies ist der Bildschirm „Null“ - der Ausgangspunkt für Grafiken. Es wird oft nicht angezeigt, es wird einfach vom System verarbeitet. Um zu veranschaulichen, was in der ersten Phase des Renderns passiert, verwenden wir das Online-Tool </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Echtzeit-Rendering</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Lassen Sie uns das einfachste „Spiel“ erstellen: eine Kiste, die auf dem Boden steht.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6eb/6c2/84a/6eb6c284ac1f6dbfd1d88b80ccce1e7b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Objekt enthält 8 Eckpunkte, von denen jeder durch eine Liste von Zahlen beschrieben wird. </font><font style="vertical-align: inherit;">Die Eckpunkte bilden ein Modell, das aus 12 Dreiecken besteht. </font><font style="vertical-align: inherit;">Jedes Dreieck und sogar das Objekt selbst wird als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primitiv bezeichnet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Während sich die Grundelemente bewegen, drehen und skalieren, durchlaufen die Zahlen Ketten mathematischer Operationen und werden aktualisiert.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/683/dfb/2cf/683dfb2cf7936d1ae5d7150ee5e3691a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beachten Sie, dass sich die Modellpunktnummern nicht ändern. </font><font style="vertical-align: inherit;">Diese Zahlen zeigen genau, wo sich das Modell in der virtuellen Welt befindet. </font><font style="vertical-align: inherit;">Die Berücksichtigung der entsprechenden mathematischen Berechnungen würde den Rahmen des Artikels sprengen. Wir werden nur sagen, dass zuerst alle Objekte dort platziert werden, wo sie sein sollten. </font><font style="vertical-align: inherit;">Und dann beginnt das Färben.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/245/ab4/c10/245ab4c109ab76e81bb20fb9dab7bab4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nehmen Sie ein anderes Modell, das zehnmal mehr Eckpunkte als das vorherige Feld hat. </font><font style="vertical-align: inherit;">Im einfachsten Malprozess wird die Farbe jedes Scheitelpunkts genommen und dann werden Farbänderungen von Oberfläche zu Oberfläche berechnet. </font><font style="vertical-align: inherit;">Dies nennt man </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interpolation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6bb/54f/3b7/6bb54f3b70c60c558dfbe029e3361207.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durch Erhöhen der Anzahl der Scheitelpunkte im Modell können Sie nicht nur realistischere Objekte erstellen, sondern auch das Ergebnis der Farbinterpolation verbessern.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/682/c4e/d4d/682c4ed4d29b1d3e7bd03302783c9057.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In dieser Phase des Renderns kann der Effekt von Lichtquellen in der Szene detailliert berechnet werden. </font><font style="vertical-align: inherit;">Zum Beispiel, wie Modellmaterialien Farbe widerspiegeln. </font><font style="vertical-align: inherit;">Solche Berechnungen sollten die Position und Richtung der Kamera sowie die Position und Richtung der Lichtquellen berücksichtigen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e9/044/b91/0e9044b9132d022e5a19e490cfe36091.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zu diesem Zweck gibt es verschiedene mathematische Methoden, von denen einige einfach und andere sehr komplex sind. In der obigen Abbildung sehen wir, dass das Objekt auf der rechten Seite viel schöner und realistischer aussieht, aber mehr Arbeit erforderlich ist, um es zu zeichnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist wichtig zu beachten, dass wir jetzt Objekte mit einer kleinen Anzahl von Peaks mit den modernsten Spielen vergleichen. Scrollen Sie nach oben und untersuchen Sie das Bild von Crysis sorgfältig: Diese eine Szene zeigt mehr als eine Million Dreiecke. Am Beispiel des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unigine Valley-Benchmarks</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> können Sie nachvollziehen, wie viele Dreiecke in modernen Spielen verwendet werden.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/486/232/4ec/4862324ec5749273f8b64dd9ad463386.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jedes Objekt in diesem Bild besteht aus miteinander verbundenen Eckpunkten, die durch die aus Dreiecken bestehenden Grundelemente gebildet werden. </font><font style="vertical-align: inherit;">Der Benchmark kann im Drahtmodellmodus ausgeführt werden, bei dem die Kanten jedes Dreiecks durch weiße Linien angezeigt werden.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/636/687/f15/636687f15006991fcf278df6af74227e.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen können, besteht jedes Objekt aus Dreiecken, und für jedes Dreieck werden Position, Richtung und Farbe berechnet. </font><font style="vertical-align: inherit;">Dies berücksichtigt den Standort der Lichtquellen sowie den Standort und die Richtung der Kamera. </font><font style="vertical-align: inherit;">Alle mit den Scheitelpunkten verbundenen Änderungen müssen auf das Spiel übertragen werden, damit es alle erforderlichen Informationen zum Zeichnen des nächsten Rahmens enthält. Dies erfolgt durch Aktualisieren des Scheitelpunktpuffers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Überraschenderweise ist dies nicht der schwierigste Teil des Renderns. Mit der richtigen Hardware werden alle Berechnungen in wenigen Tausendstelsekunden durchgeführt! </font><font style="vertical-align: inherit;">Mach weiter.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dimension verlieren: Rasterisierung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem Sie alle Scheitelpunkte verarbeitet und die Platzierung aller Objekte in unserer dreidimensionalen Szene abgeschlossen haben, wird der Rendervorgang in einem sehr wichtigen Stadium fortgesetzt. </font><font style="vertical-align: inherit;">Bis zu diesem Zeitpunkt war das Spiel wirklich dreidimensional, aber das endgültige Bild ist nicht mehr so: Im Verlauf einer Reihe von Änderungen wird die betrachtete Welt vom 3D-Raum, der aus Tausenden verbundener Punkte besteht, in ein zweidimensionales Bild umgewandelt, das aus farbigen Pixeln besteht. </font><font style="vertical-align: inherit;">In den meisten Spielen besteht dieses Verfahren aus mindestens zwei Phasen: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Projektionsfläche</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font><i><font style="vertical-align: inherit;">Projektion der Leinwand</font></i><font style="vertical-align: inherit;"> ) und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rasterung</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/17f/b9b/264/17fb9b264f727fefbc583b0768b0619b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zurück zu unserem webbasierten Rendering-Tool wird gezeigt, wie sich das Volumen der virtuellen Welt in ein flaches Bild verwandelt. Die Kamera wird links angezeigt, die von ihr ausgehenden Linien bilden eine </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abgeschnittene Sichtbarkeitspyramide</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Kegelstumpf), und alles, was in sie eindringt, kann im letzten Bild angezeigt werden. Der senkrechte Abschnitt der Pyramide heißt </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">das</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ansichtsfenster - das ist , </font><font style="vertical-align: inherit;">was auf dem Monitor angezeigt wird. Zahlreiche mathematische Berechnungen werden verwendet, um den gesamten Inhalt der Pyramide unter Berücksichtigung der Perspektive der Kamera in den Betrachtungsbereich zu projizieren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obwohl die Grafiken im Anzeigebereich zweidimensional sind, sind die Daten immer noch wirklich dreidimensional. Später werden diese Informationen verwendet, um zu berechnen, welche Grundelemente für uns sichtbar und welche verborgen sind. Dies kann überraschend schwierig sein, da Primitive Schatten werfen können, die für uns sichtbar sind, selbst wenn die Primitiven selbst vor uns verborgen sind. Entferne uns verborgen die Grundelemente, die als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fallenlassen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Keulen) bezeichnet werden. Dieser Vorgang kann die Rendergeschwindigkeit des gesamten Frames erheblich beeinflussen. Nachdem die Sortierung in sichtbare und verborgene Grundelemente abgeschlossen und Dreiecke außerhalb der Grenzen der Sichtbarkeitspyramide entfernt wurden, ist die letzte Stufe der Dreidimensionalität abgeschlossen und der Rahmen wird durch Rasterisierung vollständig zweidimensional gemacht.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6db/645/fe9/6db645fe9bd2138481a6f502c1ca8eda.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die obige Abbildung zeigt ein sehr einfaches Beispiel eines Rahmens, der ein Grundelement enthält. </font><font style="vertical-align: inherit;">Das Pixelraster wird der geometrischen Form überlagert und die entsprechenden Pixel werden für die nachfolgende Verarbeitung markiert. </font><font style="vertical-align: inherit;">Das Endergebnis ähnelt nicht zu sehr dem ursprünglichen Dreieck, da wir nicht genügend Pixel verwenden. </font><font style="vertical-align: inherit;">In dieser Hinsicht tritt das Problem des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aliasing</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Aliasing, Schrittlinien) auf, das auf verschiedene Arten gelöst wird. </font><font style="vertical-align: inherit;">Eine Änderung der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spielauflösung</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (die Gesamtzahl der Pixel im Frame) wirkt sich daher so stark auf das Endergebnis aus: Mehr Pixel verbessern nicht nur die Anzeige von Formularen, sondern verringern auch den Effekt von unerwünschtem Aliasing.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem Sie diesen Teil des Renderings abgeschlossen haben, fahren Sie mit dem nächsten großen Schritt fort: der endgültigen Färbung aller Pixel im Rahmen. </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tragen Sie das Licht: Pixel Bühne</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sind in der schwierigsten Phase des Renderns angelangt. </font><font style="vertical-align: inherit;">Früher ging es darum, Kleidungsmodelle (Texturen) mithilfe von Pixelinformationen (ursprünglich aus den Eckpunkten erhalten) anzuziehen. </font><font style="vertical-align: inherit;">Tatsache ist jedoch, dass die Texturen und der Rahmen selbst zwar zweidimensional sind, die virtuelle Welt in der Vertex-Verarbeitungsphase jedoch verzerrt, verschoben und geändert wurde. </font><font style="vertical-align: inherit;">Um all dies zu berücksichtigen, werden zusätzliche mathematische Berechnungen verwendet, jedoch können neue Probleme für das Ergebnis charakteristisch sein.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c0f/3f4/f2b/c0f3f4f2b83db10efd3058fec26c27fe.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In dieser Abbildung wird eine Schachbrettstruktur auf die Ebene angewendet. Es gibt eine unangenehme visuelle Welligkeit, die durch Aliasing noch verstärkt wird. Um dieses Problem zu lösen, verwenden Sie kleinere Versionen von Textur-Maps ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mehrere Mappings</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Mipmaps), die Wiederverwendung von Informationen aus diesen Texturen ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filtern</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Filtern) und zusätzliche mathematische Berechnungen. Der Effekt ist spürbar:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e8d/a5b/bcd/e8da5bbcd3bf8fc8e9e75c7a9614d2eb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für jedes Spiel war dies eine wirklich schwierige Phase, aber heute ist dies nicht mehr der Fall, da die Texturverarbeitung aufgrund der weit verbreiteten Verwendung anderer visueller Effekte wie Reflexionen und Schatten zu einer relativ kleinen Phase des Renderprozesses geworden ist. Bei der Wiedergabe mit hohen Auflösungen nimmt die Last in den Phasen der Rasterung und Pixelverarbeitung zu, dies wirkt sich jedoch relativ wenig auf die Verarbeitung von Scheitelpunkten aus. Obwohl die Primärfärbung aufgrund von Lichtquellen im Scheitelpunktstadium durchgeführt wird, können anspruchsvollere Lichteffekte angewendet werden.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a62/0bc/a60/a620bca60aa98557848fd500e30f3d94.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der vorherigen Abbildung sehen wir keine Farbänderungen mehr zwischen verschiedenen Dreiecken, was uns das Gefühl eines glatten, nahtlosen Objekts gibt. Obwohl in diesem Beispiel die Kugel aus der gleichen Anzahl von Dreiecken besteht wie die grüne Kugel in der obigen Abbildung, scheint es uns aufgrund des Pixelfärbeverfahrens viel mehr Dreiecke zu geben.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/321/204/fa2/321204fa222c1a25b1f6197b04c30f52.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In vielen Spielen muss die Pixelphase mehrmals ausgeführt werden. Damit beispielsweise ein Spiegel oder eine Wasseroberfläche die umgebende Welt reflektiert, muss diese Welt zuerst gezeichnet werden. Jeder Lauf wird als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pass</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Pass) bezeichnet, und um das endgültige Bild für jeden Frame zu erhalten, können problemlos vier oder mehr Durchgänge verwendet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Außerdem müssen Sie manchmal die Scheitelpunktphase erneut ausführen, um die Welt von einem anderen Punkt aus neu zu zeichnen und dieses Bild in einer Szene zu verwenden, die dem Spieler angezeigt wird. Verwenden Sie dazu das </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rendern mit einem Puffer</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Renderziele). Verwenden Sie Puffer, die als endgültiger Speicher für den Frame dienen, aber auch als Texturen mit einem anderen Durchgang fungieren können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Komplexität der Pixelstufe zu beurteilen, können Sie lesen</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rahmenanalyse in Doom 2016</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sie werden von der Anzahl der Vorgänge, die zum Erstellen eines Frames erforderlich sind, schockiert sein.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4fc/618/e79/4fc618e791b417e9359ca81948ae187f.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle zum Erstellen des Frames geleisteten Arbeiten müssen im Puffer gespeichert werden, unabhängig davon, ob es sich um das endgültige oder das Zwischenergebnis handelt. </font><font style="vertical-align: inherit;">Im Allgemeinen verwendet das Spiel im laufenden Betrieb mindestens zwei Puffer für die endgültige Anzeige: einen für die "aktuelle Arbeit", und der zweite Puffer wartet entweder auf den Zugriff auf einen Monitor oder wird gerade angezeigt. </font><font style="vertical-align: inherit;">Sie benötigen immer einen Bildschirmpuffer, in dem das Rendering-Ergebnis gespeichert wird. Wenn alle Puffer voll sind, müssen Sie fortfahren und einen neuen Puffer erstellen. </font><font style="vertical-align: inherit;">Nach Abschluss der Arbeit mit dem Frame wird ein einfacher Befehl gegeben, die endgültigen Frame-Puffer werden ausgetauscht, der Monitor empfängt den zuletzt gerenderten Frame und der Prozess des Renderns des nächsten Frames beginnt.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/925/e6e/c4d/925e6ec4d1593ec473c0660ffa555969.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Frame aus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assassins Creed Odyssey sehen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wir den Inhalt des fertigen Frame-Puffers. </font><font style="vertical-align: inherit;">Dieser Inhalt kann in einer Tabelle dargestellt werden, die nur Zahlen enthält. </font><font style="vertical-align: inherit;">Sie werden in Form von elektrischen Signalen an einen Monitor oder Fernseher gesendet, und die Pixel des Bildschirms ändern ihre Werte. </font><font style="vertical-align: inherit;">Unsere Augen sehen ein flaches, festes Bild, aber unser Gehirn interpretiert es als dreidimensional. </font><font style="vertical-align: inherit;">Hinter den Kulissen von nur einem Schuss im Spiel verbirgt sich so viel Arbeit, dass es sich lohnt, einen Blick darauf zu werfen, wie Programmierer damit umgehen können.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prozessmanagement: APIs und Anweisungen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um herauszufinden, wie das Spiel alle Berechnungen, Eckpunkte, Texturen, Beleuchtung, Puffer usw. ausführen und verwalten kann. - Das ist eine große Aufgabe. Glücklicherweise helfen Sie uns bei diesen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmierschnittstellen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Anwendungsprogrammierschnittstelle, API). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rendering-APIs reduzieren die Gesamtkomplexität, indem sie Strukturen, Regeln und Softwarebibliotheken anbieten, die vereinfachte Anweisungen ermöglichen, die hardwareunabhängig sind. Nehmen Sie jedes 3D-Spiel, das in den letzten drei Jahren für den PC veröffentlicht wurde: Es wurde mit einer der drei gängigen APIs erstellt - Direct3D, OpenGL oder Vulkan. Es gibt andere ähnliche Entwicklungen, insbesondere im Mobilsegment, aber in diesem Artikel werden wir über die drei genannten sprechen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/383/aea/228/383aea228f8c09089472da334107b6e2.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trotz der Unterschiede in den Namen von Anweisungen und Operationen (z. B. wird ein Codeblock zum Verarbeiten von Pixeln in DirectX als Pixel-Shader und in Vulkan als Fragment-Shader bezeichnet) unterscheidet sich das Endergebnis nicht, genauer gesagt, es sollte sich nicht unterscheiden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Unterschied zeigt sich darin, welche Geräte zum Rendern verwendet werden. Die von der API generierten Anweisungen müssen in hardwarefreundliche Befehle konvertiert werden, die von den Gerätetreibern verarbeitet werden. Und Gerätehersteller müssen viel Zeit und Ressourcen aufwenden, damit ihre Fahrer diese Konvertierung so schnell und korrekt wie möglich durchführen können.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8df/431/c77/8df431c7781e07219bfaab3829f209df.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beispielsweise unterstützte die frühe Beta von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Talos Principle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (2014) alle drei genannten APIs. </font><font style="vertical-align: inherit;">Um zu demonstrieren, wie sich die Ergebnisse verschiedener Kombinationen von Treibern und Schnittstellen unterscheiden können, haben wir den integrierten Standard-Benchmark ausgeführt, indem wir die Auflösung auf 1080p und die Einstellungen für maximale Qualität eingestellt haben. </font><font style="vertical-align: inherit;">Der Intel Core i7-9700K Prozessor funktionierte ohne Übertakten, die Nvidia Titan X (Pascal) Grafikkarte, RAM - 32 GB DDR4 RAM.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DirectX 9 = durchschnittlich 188,4 Bilder / s.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DirectX 11 = durchschnittlich 202,3 Bilder / s.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL = durchschnittlich 87,9 Bilder / s.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vulkan = durchschnittlich 189,4 Bilder / s.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden die Ergebnisse nicht analysieren und sie sagen sicherlich nicht, dass einige APIs "besser" sind als die anderen (vergessen Sie nicht, dass die Beta-Version des Spiels getestet wurde). Wir werden nur sagen, dass die Programmierung für verschiedene APIs mit verschiedenen Schwierigkeiten verbunden ist und zu jedem Zeitpunkt auch die Leistung unterschiedlich sein wird. Im Allgemeinen wählen Spieleentwickler die API, mit der sie mehr Erfahrung haben, und optimieren ihren Code dafür. Manchmal wird der Begriff </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Engine</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verwendet, um den Code zu beschreiben, der für das Rendern verantwortlich </font><font style="vertical-align: inherit;">ist. Genau genommen handelt es sich bei der Engine jedoch um einen vollständigen Satz von Tools, die alle Aspekte des Spiels verarbeiten, nicht nur Grafiken. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist nicht so einfach, ein Programm von Grund auf neu zu erstellen, das ein 3D-Spiel rendert. Daher werden heute in so vielen Spielen lizenzierte Systeme von Drittanbietern verwendet (z. B. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unreal Engine)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">Um ihre Komplexität zu bewerten, öffnen Sie die Open Source-Engine für </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quake</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und zeigen Sie die Datei gl_draw.c an: Sie enthält Anweisungen für verschiedene Rendervorgänge und spiegelt nur einen kleinen Teil der gesamten Engine wider. </font><font style="vertical-align: inherit;">Aber Quake wurde vor über 20 Jahren veröffentlicht und das </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gesamte Spiel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (einschließlich aller visuellen Ressourcen, Sounds, Musik usw.) benötigt 55 MB. </font><font style="vertical-align: inherit;">Zum Vergleich: In </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Far Cry 5</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> belegen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Shader 62 MB.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeit ist am wichtigsten: mit der richtigen Ausrüstung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All dies kann vom Prozessor eines beliebigen Computersystems berechnet und verarbeitet werden. Moderne Prozessoren der x86-64-Familie unterstützen alle notwendigen mathematischen Operationen und enthalten hierfür sogar separate Subsysteme. Die Aufgabe, einen einzelnen Frame zu rendern, erfordert jedoch zahlreiche wiederholte Berechnungen und eine signifikante Parallelisierung der Arbeit. Zentralprozessoren sind dafür nicht geeignet, da sie für die Lösung eines möglichst breiten Aufgabenspektrums geschaffen wurden. Spezialisierte Prozessoren für das Grafik-Computing werden als </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPUs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Grafikprozessoren) bezeichnet. Sie werden für DirectX, OpenGL und Vulkan erstellt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir verwenden einen Benchmark, mit dem Sie einen Frame mit einem Zentralprozessor oder einem speziellen Gerät rendern können - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V-ray NEXT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unternehmen der Chaos Group. </font><font style="vertical-align: inherit;">Tatsächlich wird eher Raytracing als Rendern durchgeführt, aber die meisten numerischen Operationen hier sind auch hardwareabhängig.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc6/4be/7bd/dc64be7bd6494f79cec1f01c501b7502.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns den Benchmark in drei Modi bestehen: nur den Zentralprozessor, nur den Grafikprozessor und eine Kombination beider Prozessoren:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU allein = 53 Millionen Strahlen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU allein = 251 Millionen Strahlen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Kombination beider Prozessoren = 299 Millionen Strahlen</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Maßeinheit kann ignoriert werden, die Essenz ist das Fünffache der Differenz. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trotzdem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist dieser Test nicht zu sehr mit Spielen verbunden. Wenden wir uns also dem Old-School-Benchmark </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Futuremark 3DMark03 zu</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Lassen Sie uns einen einfachen Wings of Fury-Test mit einer erzwungenen Berechnung aller Vertex-Shader (dh mit einem vollständigen Satz von Operationen zum Verschieben und Färben von Dreiecken) unter Verwendung des Zentralprozessors durchführen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9f3/f30/609/9f3f30609c33987cb25f2e10c4aff602.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ergebnis sollte Sie nicht überraschen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zentralprozessor = durchschnittlich 77 Bilder / s.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU = durchschnittlich 1.580 Bilder / s.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn alle Berechnungen mit den Scheitelpunkten vom Zentralprozessor durchgeführt werden, dauert das Rendern und Anzeigen jedes Frames durchschnittlich 13 ms. Bei Verwendung eines Grafikprozessors sinkt diese Zahl auf 0,6 ms - mehr als 20-mal schneller. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Unterschied erhöht sich noch mehr, wenn Sie den schwierigsten Benchmark-Test durchführen - Mutter Natur. Der Zentralprozessor produzierte unbedeutende 3,1 Frames / s! Und der Grafikprozessor schoss mit 1388 Bildern / s hoch: Fast 450-mal schneller. Bitte beachten Sie: 3DMark03 kam 16 zurück, und im Test auf dem Zentralprozessor werden nur die Scheitelpunkte verarbeitet, der Grafikprozessor übernimmt weiterhin die Raster- und Pixelstufe. Stellen Sie sich vor, der Benchmark wäre modern und die meisten Operationen würden programmgesteuert durchgeführt?</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7ec/85a/87f/7ec85a87fbffad6ef27cf88d08970aea.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versuchen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wir nun noch</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> einmal den </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Unigine Valley-</font></a><font style="vertical-align: inherit;"> Benchmark </font><font style="vertical-align: inherit;">. Die von ihm verarbeiteten Grafiken sind denen in Spielen wie Far Cry 5 sehr ähnlich. Neben dem Standard DirectX 11 gibt es auch eine vollständige Software-Rendering-Engine. Bei Ausführung auf einem Videoprozessor erhalten wir ein durchschnittliches Ergebnis von 196 Bildern / s . Was ist mit der Softwareversion? Nach einigen Abstürzen erzeugte ein leistungsstarker Test-PC durchschnittlich 0,1 Bilder / s. - Fast </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zweitausendmal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> langsamer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Grund für einen so großen Unterschied liegt in den mathematischen Berechnungen und dem beim 3D-Rendering verwendeten Datenformat. Jeder Kern der CPU ist </font><i><font style="vertical-align: inherit;">mit Gleitkommamodulen</font></i><font style="vertical-align: inherit;"> ausgestattet</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Der i7-9700K enthält 8 Kerne mit jeweils zwei solchen Modulen. Obwohl die Architektur der Module in Titan X unterschiedlich ist, können beide Typen dieselben Berechnungen mit Daten desselben Formats durchführen. Diese Grafikkarte verfügt über mehr als 3.500 Module für vergleichbare Berechnungen, und obwohl ihre Taktfrequenz viel niedriger ist als im Zentralprozessor (1,5 GHz und 4,7 GHz), nimmt der Videoprozessor die Anzahl der Module auf. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obwohl der Titan X keine Massengrafikkarte ist, wird selbst ein Budgetmodell jeden Zentralprozessor überholen. Daher sind alle 3D-Spiele und APIs für spezielle Geräte konzipiert. Sie können </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V-ray</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3DMark</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder einen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beliebigen </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Unigine- </font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benchmark </font></font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">herunterladen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und testen Sie Ihr System - überzeugen Sie sich selbst, wie gut die Videoprozessoren für das Rendern von Grafiken in Spielen geeignet sind.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Letzte Worte</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es war ein kurzer Exkurs in den Prozess der Erstellung eines einzelnen Frames in 3D-Spielen, von einem Punkt im Raum bis zu einem farbenfrohen Bild auf einem Monitor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tatsächlich arbeitet der gesamte Prozess nur mit Zahlen. Vieles ist jedoch außerhalb des Geltungsbereichs des Artikels geblieben. Wir haben keine spezifischen mathematischen Berechnungen aus der euklidischen linearen Algebra, Trigonometrie und Differentialrechnung berücksichtigt, die von Vertex- und Pixel-Shadern durchgeführt wurden. Wir haben auch nicht darüber gesprochen, wie Texturen mithilfe statistischer Stichproben verarbeitet werden. Ich habe so coole visuelle Effekte wie das Blockieren des Umgebungslichts im Bildschirmbereich, das Reduzieren von Interferenzen mit der Strahlverfolgung, den erweiterten Dynamikbereich und die zeitliche Glättung weggelassen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und wenn Sie das nächste Mal ein modernes 3D-Spiel starten, hoffen wir, dass Sie die Grafiken nicht nur mit anderen Augen betrachten, sondern auch mehr darüber erfahren möchten.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de500670/index.html">Wie wir unser Produkt herstellen. Erster Teil, Forschung</a></li>
<li><a href="../de500672/index.html">Fortsetzung des Streams für Tester und nicht nur</a></li>
<li><a href="../de500676/index.html">Ankündigung eines Online-Workshops zur Testautomatisierung</a></li>
<li><a href="../de500678/index.html">ClickHouse für fortgeschrittene Benutzer in Fragen und Antworten</a></li>
<li><a href="../de500688/index.html">Arbeiten mit einer Datenbank in Flask: von Juni bis Juni</a></li>
<li><a href="../de500694/index.html">68 unaufgeforderte Tipps</a></li>
<li><a href="../de500696/index.html">Wie Laufschuhe versuchen, sich an den weiblichen Fuß anzupassen</a></li>
<li><a href="../de500698/index.html">Evgeny Katyshev: "OpenStreetMap ist für keine Informationen geeignet"</a></li>
<li><a href="../de500700/index.html">Unterstützung für TLS1.3 und Erweiterung Ihres persönlichen Kontos: Was wurde für das erste Quartal 2020 getan?</a></li>
<li><a href="../de500704/index.html">Einhörner (Airbnb, Uber, Lyft, Careem) entließen Tausende von Mitarbeitern aufgrund von Problemen während der Coronavirus-Pandemie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>