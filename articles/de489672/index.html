<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç® üë¶üèæ üë®üèø‚Äçüç≥ Wir beleben den Hexapod wieder. Zweiter Teil üßë‚Äçü§ù‚Äçüßë üë®üèø‚Äç‚öñÔ∏è üèåÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Video eines sich bewegenden Hexapods
 Im Vergleich zur vorherigen Ver√∂ffentlichung erwies sich ihr Vorg√§nger dank einer gro√üen Anzahl von Fotos als sp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Wir beleben den Hexapod wieder. Zweiter Teil</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489672/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Video eines sich bewegenden Hexapods</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Vergleich zur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vorherigen Ver√∂ffentlichung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erwies sich </font><font style="vertical-align: inherit;">ihr </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vorg√§nger</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dank einer gro√üen Anzahl von Fotos als spektakul√§rer. </font><font style="vertical-align: inherit;">Ich m√∂chte die L√ºcke in dieser Angelegenheit schlie√üen und Ihnen einige Videos pr√§sentieren, die eine kleine Probefahrt des Roboters durch die Wohnung festhalten.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/RmYl7Q_uSaM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe> <a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Roboter wird vom Bediener vom Telefon aus √ºber WLAN gesteuert. </font><font style="vertical-align: inherit;">Wenn Sie sich jedoch die ersten beiden Videos ansehen, haben Sie m√∂glicherweise den falschen Eindruck, dass der Hexapod die Grundlagen der Intelligenz besitzt. </font><font style="vertical-align: inherit;">Leider ist das nicht so ...</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Jczoe6xWhUA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ferner wurde der Roboter vom weichen Teppich zu einem ziemlich rutschigen Linoleum ausgesto√üen, was ein gutes Ergebnis zeigte. </font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/CchINXYR3pw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementierung von Hexapod-Bewegungen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vorherigen Artikel erw√§hnt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sind die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MotionJob-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">und abgeleitete Klassen, die von der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Motion-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">geerbt wurden, </font><font style="vertical-align: inherit;">f√ºr die Implementierung von Roboterbewegungen verantwortlich </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MotionJob-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">verf√ºgt nur √ºber eine √∂ffentliche </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ausf√ºhrungsmethode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mit der eine bestimmte Bewegungsausf√ºhrung </font><i><font style="vertical-align: inherit;">gestartet</font></i><font style="vertical-align: inherit;"> wird </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int MotionJob :: execute (Motion * pMotion)</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">MotionJob::execute</span><span class="hljs-params">(Motion* pMotion)</span> </span>{
  <span class="hljs-keyword">if</span>(m_Status == NONE &amp;&amp; pMotion != <span class="hljs-literal">NULL</span>) {<font></font>
     <font></font>
     m_pMotion = pMotion;<font></font>
     m_MotionTime = <span class="hljs-number">0</span>;<font></font>
     m_TotalTime = m_pMotion-&gt;totalTime();<font></font>
     m_Status = RUNING;<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(pMotion != <span class="hljs-literal">NULL</span>){<font></font>
    <font></font>
    <span class="hljs-keyword">if</span>(m_pMotion-&gt;m_pNext != <span class="hljs-literal">NULL</span>) 
      <span class="hljs-keyword">delete</span> m_pMotion-&gt;m_pNext;<font></font>
      <font></font>
    m_pMotion-&gt;m_pNext = pMotion;<font></font>
     m_Status = STOPING;<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> S_OK;<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Logik ist ziemlich einfach. Als Parameter wird ein Zeiger auf ein Objekt verwendet, das den Bewegungsprozess beschreibt. Wenn zum aktuellen Zeitpunkt keine andere Bewegung in der Ausf√ºhrung war, wird die angegebene Bewegung aktiv und wechselt in den Ausf√ºhrungsstatus ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RUNING</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Falls bei der Ausf√ºhrung bereits eine Bewegung </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stattgefunden hat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , √ºbersetzen wir diese in einen </font><i><font style="vertical-align: inherit;">Stoppzustand</font></i><font style="vertical-align: inherit;"> ( </font><i><font style="vertical-align: inherit;">STOPING</font></i><font style="vertical-align: inherit;"> ), und die neue Bewegung wird als n√§chste im Feld </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m_pNext aufgezeichnet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WICHTIG:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Es wird vereinbart, dass alle von </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Motion</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geerbten Objekte </font><font style="vertical-align: inherit;">eine Erstellung im dynamischen Speicherbereich (√ºber </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">new</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font><font style="vertical-align: inherit;">implizieren </font><font style="vertical-align: inherit;">und von der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MotionJob-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><i><font style="vertical-align: inherit;">freigegeben werden</font></i><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">nachdem die Bewegung abgeschlossen oder abgebrochen wurde.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MotionJob-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">, die von </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AJob</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geerbt wurde </font><font style="vertical-align: inherit;">, implementiert die gesamte Magie der Bewegung in der √ºberlappenden </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onRun-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">, die w√§hrend des Betriebs des Roboters mit einer bestimmten H√§ufigkeit aufgerufen wird.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void MotionJob :: onRun ()</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">MotionJob::onRun</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  Vector3D points[FOOTS_COUNT];<font></font>
  <span class="hljs-keyword">int</span> pose[FOOTS_COUNT][<span class="hljs-number">3</span>];
  <span class="hljs-comment">//    ,  </span>
  <span class="hljs-keyword">if</span>(m_pMotion == <span class="hljs-literal">NULL</span>)
    <span class="hljs-keyword">return</span>;
  <span class="hljs-comment">//           ,</span>
  <span class="hljs-comment">//            .</span>
  <span class="hljs-comment">//      .</span>
  <span class="hljs-keyword">int</span> res;
  <span class="hljs-keyword">if</span>(m_pMotion-&gt;getPose(min(m_MotionTime, m_pMotion-&gt;maxTime()), pose) == S_OK) {<font></font>
     res = m_pGeksapod-&gt;_setPose(pose);<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(m_pMotion-&gt;getPose(min(m_MotionTime, m_pMotion-&gt;maxTime()), points) == S_OK) {<font></font>
     res = m_pGeksapod-&gt;_setPose(points);<font></font>
  }<font></font>
  <span class="hljs-comment">//     </span><font></font>
  m_MotionTime += MOTION_JOB_PERIOD;<font></font>
  <span class="hljs-comment">//     ,    ,</span>
  <span class="hljs-comment">//      :</span>
  <span class="hljs-comment">//   m_TotalTime -     </span>
  <span class="hljs-keyword">if</span>(m_TotalTime &gt; <span class="hljs-number">0</span>) { <font></font>
    m_TotalTime -= MOTION_JOB_PERIOD;<font></font>
    m_TotalTime = max(<span class="hljs-number">0</span>,m_TotalTime); <font></font>
  }<font></font>
  <span class="hljs-comment">//      , </span>
  <span class="hljs-comment">//      </span>
  <span class="hljs-keyword">if</span>(m_TotalTime == <span class="hljs-number">0</span> &amp;&amp; m_pMotion-&gt;isLooped()) {<font></font>
     m_Status = STOPING;<font></font>
  }<font></font>
  <span class="hljs-comment">//         </span>
  <span class="hljs-comment">//          .</span>
  <span class="hljs-keyword">if</span>( (m_MotionTime - m_pMotion-&gt;maxTime() &gt;= MOTION_JOB_PERIOD &amp;&amp; (!m_pMotion-&gt;isLooped() || m_Status == STOPING)) ) { <span class="hljs-comment">//  </span>
    <span class="hljs-comment">//      </span><font></font>
    Motion* pNextMotion = m_pMotion-&gt;m_pNext;<font></font>
    m_pMotion-&gt;m_pNext = <span class="hljs-literal">NULL</span>;
    <span class="hljs-keyword">delete</span> m_pMotion;<font></font>
    m_pMotion = <span class="hljs-literal">NULL</span>;
    <span class="hljs-comment">//   </span><font></font>
    m_Status = NONE;<font></font>
    execute(pNextMotion);<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(m_MotionTime - m_pMotion-&gt;maxTime() &gt;= MOTION_JOB_PERIOD) {
    <span class="hljs-comment">//      </span>
    <span class="hljs-comment">//         </span>
    m_MotionTime = <span class="hljs-number">0</span>; <font></font>
  }<font></font>
}</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der obige Code enth√§lt gen√ºgend Kommentare zu seiner Arbeit, daher stelle ich als Erg√§nzung nur einige wichtige Punkte fest:</font></font><br>
<ul>
<li> <i>Motion</i>              (<i>Vector3D points[FOOTS_COUNT]</i>),         (<i>int pose[FOOTS_COUNT][3]</i>).  ,       .       <i>getPose</i>   ,     <i>getPose</i>.       <i>_setPose</i>,            .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bewegungen k√∂nnen regelm√§√üig oder zyklisch sein. </font><font style="vertical-align: inherit;">Die normale Bewegung nach Erreichen des f√ºr die Ausf√ºhrung eines Bewegungszyklus vorgesehenen Zeitraums (zur√ºckgegeben von der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Motion :: maxTime ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -Methode </font><font style="vertical-align: inherit;">) wird sofort abgeschlossen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zyklische Bewegungen werden erst nach einem erzwungenen Stopp abgeschlossen, der auftritt, wenn die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ausf√ºhrungsmethode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aufgerufen wird (kann mit einem Nullzeiger aufgerufen werden) oder wenn ein positiver Zeitpunkt f√ºr die Ausf√ºhrung der Bewegung </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zugewiesen wird (</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zur√ºckgegeben von der </font><i><font style="vertical-align: inherit;">Motion :: totalTime ()</font></i><font style="vertical-align: inherit;"> -Methode </font><font style="vertical-align: inherit;">).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die folgenden Klassen werden zur Beschreibung verschiedener Bewegungsoptionen definiert:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klasse TransPoseMotion</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TransPoseMotion</span>:</span> <span class="hljs-keyword">public</span> Motion {<font></font>
  Vector3D m_Pose0[FOOTS_COUNT];  <span class="hljs-comment">//  </span>
  Vector3D m_Offset[FOOTS_COUNT];  <span class="hljs-comment">//  </span>
<span class="hljs-keyword">public</span>:  <font></font>
  TransPoseMotion(Vector3D begPose[FOOTS_COUNT], Vector3D endPose[FOOTS_COUNT],<font></font>
        <span class="hljs-keyword">long</span> maxTime, Motion* pNext = <span class="hljs-literal">NULL</span>);
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getPose</span><span class="hljs-params">(<span class="hljs-keyword">long</span> time, Vector3D points[FOOTS_COUNT])</span></span>;<font></font>
};</code></pre></div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klasse TransAnglesMotion</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TransAnglesMotion</span>:</span> <span class="hljs-keyword">public</span> Motion {
  <span class="hljs-keyword">char</span> m_Pose0[FOOTS_COUNT][<span class="hljs-number">3</span>];
  <span class="hljs-keyword">char</span> m_Offset[FOOTS_COUNT][<span class="hljs-number">3</span>];
<span class="hljs-keyword">public</span>:  <font></font>
  TransAnglesMotion(<span class="hljs-keyword">int</span> begPose[FOOTS_COUNT][<span class="hljs-number">3</span>], <span class="hljs-keyword">int</span> endPose[FOOTS_COUNT][<span class="hljs-number">3</span>],
        <span class="hljs-keyword">long</span> maxTime, Motion* pNext = <span class="hljs-literal">NULL</span>);
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getPose</span><span class="hljs-params">(<span class="hljs-keyword">long</span> actionTime, <span class="hljs-keyword">int</span> pose[FOOTS_COUNT][<span class="hljs-number">3</span>])</span></span>;<font></font>
};<font></font>
</code></pre></div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klasse LinearMotion</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LinearMotion</span>:</span> <span class="hljs-keyword">public</span> Motion {
  <span class="hljs-comment">//     ( ) </span><font></font>
  Vector3D m_Pose0[FOOTS_COUNT];<font></font>
  Vector3D m_Offset; <span class="hljs-comment">//     </span>
  <span class="hljs-keyword">int</span> m_Heigth;          <span class="hljs-comment">//   </span>
<span class="hljs-keyword">public</span>:  <font></font>
  LinearMotion(<span class="hljs-keyword">int</span> heigth, Vector3D pose0[FOOTS_COUNT], Vector3D speed, 
        <span class="hljs-keyword">long</span> maxTime, <span class="hljs-keyword">long</span> totalTime = <span class="hljs-number">-1</span>, Motion* pNext = <span class="hljs-literal">NULL</span>);
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getPose</span><span class="hljs-params">(<span class="hljs-keyword">long</span> time, Vector3D points[FOOTS_COUNT])</span></span>;<font></font>
};</code></pre></div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klasse RotateMotion</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RotateMotion</span>:</span> <span class="hljs-keyword">public</span> Motion {
  <span class="hljs-comment">//     ( ) </span><font></font>
  Vector3D m_Pose0[FOOTS_COUNT]; <font></font>
  Vector3D m_Angles; <span class="hljs-comment">//     </span>
  <span class="hljs-keyword">int</span> m_Heigth;           <span class="hljs-comment">//   </span>
<span class="hljs-keyword">public</span>:  <font></font>
  RotateMotion(<span class="hljs-keyword">int</span> heigth, Vector3D pose0[FOOTS_COUNT], Vector3D rotor, 
        <span class="hljs-keyword">long</span> maxTime, <span class="hljs-keyword">long</span> totalTime = <span class="hljs-number">-1</span>, Motion* pNext = <span class="hljs-literal">NULL</span>);
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getPose</span><span class="hljs-params">(<span class="hljs-keyword">long</span> time, Vector3D points[FOOTS_COUNT])</span></span>;<font></font>
};</code></pre></div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TransPoseMotion-Klasse</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TransPoseMotion-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">k√∂nnen Sie Gliedma√üen von einer Position zur anderen bewegen. </font><font style="vertical-align: inherit;">Beim Erstellen eines Objekts werden die Koordinaten der Punkte und der Zeitraum, ab dem die Bewegung ausgef√ºhrt werden soll, an den Klassenkonstruktor √ºbertragen.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TransPoseMotion :: TransPoseMotion (...)</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">TransPoseMotion::TransPoseMotion(Vector3D begPose[FOOTS_COUNT],<font></font>
  Vector3D endPose[FOOTS_COUNT], <span class="hljs-keyword">long</span> maxTime, Motion* pNext) : Motion(maxTime, <span class="hljs-number">-1</span>, pNext) {
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; FOOTS_COUNT; i++) {<font></font>
    m_Pose0[i] = begPose[i];<font></font>
    m_Offset[i] = endPose[i] - begPose[i];<font></font>
  }<font></font>
}</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir die Anfangsposition und den Verschiebungsvektor f√ºr jedes Glied kennen, k√∂nnen wir die einfache </font><font style="vertical-align: inherit;">Position der Pfoten in der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getPose-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">im Zeitintervall von </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bis </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maxTime leicht ermitteln,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indem </font><i><font style="vertical-align: inherit;">wir</font></i><font style="vertical-align: inherit;"> einfache lineare Berechnungen durchf√ºhren.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int TransPoseMotion :: getPose (...)</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">TransPoseMotion::getPose</span><span class="hljs-params">(<span class="hljs-keyword">long</span> time, Vector3D points[FOOTS_COUNT])</span> </span>{
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; FOOTS_COUNT; i++)<font></font>
    linearFunc(<span class="hljs-number">1.0</span>, m_Offset[i], m_Pose0[i], <span class="hljs-number">1.0</span>*time/m_MaxTime, points[i]);<font></font>
}</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lineare Berechnungen werden der Hilfsfunktion linearFunc zugewiesen, einer gew√∂hnlichen linearen Gleichung mit Parametern, die durch die Argumente der Funktion angegeben werden.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void linearFunc (...)</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">linearFunc</span><span class="hljs-params">(<span class="hljs-keyword">float</span> a, Vector3D offset, Vector3D p0, <span class="hljs-keyword">float</span> k,  Vector3D&amp; res)</span> </span>{<font></font>
  res = a*offset*k + p0;<font></font>
}</code></pre><br>
</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TransAnglesMotion-Klasse</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Logik dieser Klasse √§hnelt der vorherigen. </font><font style="vertical-align: inherit;">Der einzige Unterschied besteht darin, dass in der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TransAnglesMotion-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><i><font style="vertical-align: inherit;">die</font></i><font style="vertical-align: inherit;"> Positionen der </font><i><font style="vertical-align: inherit;">Hexapod-</font></i><font style="vertical-align: inherit;"> Gliedma√üen durch den Satz von Winkeln festgelegt werden, in denen die Gelenke gebogen werden sollen, und nicht durch die Raumkoordinaten der Enden der Roboterpfoten.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TransAnglesMotion :: TransAnglesMotion (...)</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">TransAnglesMotion::TransAnglesMotion(<span class="hljs-keyword">int</span> begPose[FOOTS_COUNT][<span class="hljs-number">3</span>],
  <span class="hljs-keyword">int</span> endPose[FOOTS_COUNT][<span class="hljs-number">3</span>], <span class="hljs-keyword">long</span> maxTime, Motion* pNext) : Motion(maxTime, <span class="hljs-number">-1</span>, pNext) {
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; FOOTS_COUNT; i++) {
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j++) {<font></font>
      m_Pose0[i][j] = begPose[i][j];<font></font>
      m_Offset[i][j] = endPose[i][j] - begPose[i][j];<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br>
</div></div><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int TransAnglesMotion :: getPose (...)</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">TransAnglesMotion::getPose</span><span class="hljs-params">(<span class="hljs-keyword">long</span> time, <span class="hljs-keyword">int</span> pose[FOOTS_COUNT][<span class="hljs-number">3</span>])</span> </span>{
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; FOOTS_COUNT; i++) {
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j++) <font></font>
      pose[i][j] = m_Pose0[i][j] + (<span class="hljs-keyword">int</span>)(<span class="hljs-number">1.0</span>*m_Offset[i][j]*time/m_MaxTime);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> S_OK;<font></font>
}</code></pre><br>
</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LinearMotion-Klasse</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Implementieren von unkomplizierten Bewegungen erfordert etwas mehr Code und Ihre Aufmerksamkeit. Das Hexapod-Design verf√ºgt √ºber eine optimale Anzahl von Gliedma√üen, sodass Sie beim Bewegen immer drei St√ºtzpunkte haben, sodass sich die Projektion des Schwerpunkts des Roboters immer innerhalb des von ihnen gebildeten Dreiecks befindet. Dies gew√§hrleistet eine stabile Position des Roboters beim Bewegen. Daher kann die geradlinige Bewegung des Roboters als ein Satz identischer Schritte betrachtet werden. In jedem solchen Schritt k√∂nnen zwei Phasen unterschieden werden. In der ersten Phase ber√ºhrt eine Dreiklang von Beinen die Oberfl√§che und ihre Enden bewegen sich parallel zur Oberfl√§che in die der Bewegungsrichtung entgegengesetzte Richtung. In diesem Fall bewegt sich die zweite Pfoten-Triade, ohne die Oberfl√§che zu ber√ºhren, entlang eines gekr√ºmmten Pfades in Bewegungsrichtung des Roboters.Zu einem bestimmten Zeitpunkt erreichen sie ihre √§u√üerste Position und die zweite Triade beginnt mit der Oberfl√§che in Kontakt zu kommen. In der zweiten Phase wird der Bewegungsvorgang wiederholt, nur diesmal bewegt die zweite Triade den Roboter und die erste kehrt zum Startpunkt zur√ºck.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ut/rv/2k/utrv2kzjrrigx19ickf04bduuqm.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Animation wurde bei der Vorbereitung eines Artikels im Internet auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dieser Seite gefunden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aber nach Durchsicht war ich √ºberzeugt, dass die urspr√ºngliche Quelle </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habr</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> war und der Autor der Ver√∂ffentlichung das angesehene </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conKORD war</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir die Bewegung in einer geraden Linie realisieren, m√ºssen wir die H√∂he der Beine von der Oberfl√§che ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H√∂he</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), die Position der Roboterglieder am Anfang (und am Ende) der Bewegung ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pose0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), den Geschwindigkeitsvektor ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geschwindigkeit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), die Zeit, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die f√ºr</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> einen Schritt ben√∂tigt wird ( </font><i><font style="vertical-align: inherit;">maxTime</font></i><font style="vertical-align: inherit;"> ) und wie lange der Roboter </font><i><font style="vertical-align: inherit;">dauern sollte</font></i><font style="vertical-align: inherit;"> , </font><i><font style="vertical-align: inherit;">einstellen</font></i><font style="vertical-align: inherit;"> Bewegung ausf√ºhren ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">totalTime</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Wenn Sie einen negativen Wert f√ºr </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">totalTime angeben</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird die Bewegung auf unbestimmte Zeit fortgesetzt, bis die Ladung des Roboters aufgebraucht ist oder die Bewegung gewaltsam abgeschlossen ist.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LinearMotion :: LinearMotion (...)</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">LinearMotion::LinearMotion(<span class="hljs-keyword">int</span> heigth, Vector3D pose0[FOOTS_COUNT], Vector3D speed,
  <span class="hljs-keyword">long</span> maxTime, <span class="hljs-keyword">long</span> totalTime, Motion* pNext = <span class="hljs-literal">NULL</span>) <font></font>
    : Motion(maxTime, <span class="hljs-literal">true</span>, totalTime, pNext) {<font></font>
  copyPose(m_Pose0, pose0);<font></font>
  m_Offset = <span class="hljs-number">1.0</span>*speed*maxTime/<span class="hljs-number">1000</span>;<font></font>
  m_Heigth = heigth;<font></font>
}<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trotz der Tatsache, dass die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getPose-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">eine beeindruckende Menge an Code enth√§lt, ist sie recht einfach.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int LinearMotion :: getPose (...)</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">LinearMotion::getPose</span><span class="hljs-params">(<span class="hljs-keyword">long</span> time, Vector3D points[FOOTS_COUNT])</span> </span>{
  <span class="hljs-keyword">double</span> k = <span class="hljs-number">1.0</span>*time/m_MaxTime;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(k &lt; <span class="hljs-number">0.25</span>) {  <span class="hljs-comment">//   </span>
    linearFunc(<span class="hljs-number">2.0</span>, -m_Offset, m_Pose0[LEFT_FRONT_FOOT_IDX], k,<font></font>
      points[LEFT_FRONT_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, -m_Offset, m_Pose0[LEFT_BACK_FOOT_IDX], k,<font></font>
      points[LEFT_BACK_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, -m_Offset, m_Pose0[RIGTH_MIDLE_FOOT_IDX], k,<font></font>
      points[RIGTH_MIDLE_FOOT_IDX]);<font></font>
<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, m_Offset, m_Pose0[LEFT_MIDLE_FOOT_IDX], k,<font></font>
      points[LEFT_MIDLE_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, m_Offset, m_Pose0[RIGTH_FRONT_FOOT_IDX], k,<font></font>
      points[RIGTH_FRONT_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, m_Offset, m_Pose0[RIGTH_BACK_FOOT_IDX], k,<font></font>
      points[RIGTH_BACK_FOOT_IDX]);<font></font>
  <font></font>
    <span class="hljs-keyword">int</span> h = (<span class="hljs-keyword">int</span>)m_Heigth*<span class="hljs-built_in">cos</span>(M_PI*k*<span class="hljs-number">2</span>);<font></font>
    points[LEFT_MIDLE_FOOT_IDX].z += h;<font></font>
    points[RIGTH_FRONT_FOOT_IDX].z += h;<font></font>
    points[RIGTH_BACK_FOOT_IDX].z += h;<font></font>
<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(k &lt; <span class="hljs-number">0.5</span>) { <span class="hljs-comment">//   </span><font></font>
    <font></font>
    linearFunc(<span class="hljs-number">2.0</span>, m_Offset, m_Pose0[LEFT_FRONT_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[LEFT_FRONT_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, m_Offset, m_Pose0[LEFT_BACK_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[LEFT_BACK_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, m_Offset, m_Pose0[RIGTH_MIDLE_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[RIGTH_MIDLE_FOOT_IDX]);<font></font>
<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, -m_Offset, m_Pose0[LEFT_MIDLE_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[LEFT_MIDLE_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, -m_Offset, m_Pose0[RIGTH_FRONT_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[RIGTH_FRONT_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, -m_Offset, m_Pose0[RIGTH_BACK_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[RIGTH_BACK_FOOT_IDX]);<font></font>
<font></font>
    <span class="hljs-keyword">int</span> h = (<span class="hljs-keyword">int</span>)m_Heigth*<span class="hljs-built_in">sin</span>(M_PI*(k - <span class="hljs-number">0.25</span>)*<span class="hljs-number">2</span>);<font></font>
    points[LEFT_FRONT_FOOT_IDX].z += h;<font></font>
    points[LEFT_BACK_FOOT_IDX].z += h;<font></font>
    points[RIGTH_MIDLE_FOOT_IDX].z += h;<font></font>
<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(k &lt; <span class="hljs-number">0.75</span>) { <span class="hljs-comment">//   </span><font></font>
    <font></font>
    linearFunc(<span class="hljs-number">2.0</span>, m_Offset, m_Pose0[LEFT_FRONT_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[LEFT_FRONT_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, m_Offset, m_Pose0[LEFT_BACK_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[LEFT_BACK_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, m_Offset, m_Pose0[RIGTH_MIDLE_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[RIGTH_MIDLE_FOOT_IDX]);<font></font>
<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, -m_Offset, m_Pose0[LEFT_MIDLE_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[LEFT_MIDLE_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, -m_Offset, m_Pose0[RIGTH_FRONT_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[RIGTH_FRONT_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, -m_Offset, m_Pose0[RIGTH_BACK_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[RIGTH_BACK_FOOT_IDX]);<font></font>
    <font></font>
    <span class="hljs-keyword">int</span> h = (<span class="hljs-keyword">int</span>)m_Heigth*<span class="hljs-built_in">cos</span>(M_PI*(k - <span class="hljs-number">0.5</span>)*<span class="hljs-number">2</span>);<font></font>
    points[LEFT_FRONT_FOOT_IDX].z += h;<font></font>
    points[LEFT_BACK_FOOT_IDX].z += h;<font></font>
    points[RIGTH_MIDLE_FOOT_IDX].z += h;<font></font>
    <font></font>
  } <span class="hljs-keyword">else</span> {  <span class="hljs-comment">//   </span><font></font>
    <font></font>
    linearFunc(<span class="hljs-number">2.0</span>, m_Offset, m_Pose0[LEFT_FRONT_FOOT_IDX], <span class="hljs-number">1</span> - k,<font></font>
      points[LEFT_FRONT_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, m_Offset, m_Pose0[LEFT_BACK_FOOT_IDX], <span class="hljs-number">1</span> - k,<font></font>
      points[LEFT_BACK_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, m_Offset, m_Pose0[RIGTH_MIDLE_FOOT_IDX], <span class="hljs-number">1</span> - k,<font></font>
      points[RIGTH_MIDLE_FOOT_IDX]);<font></font>
<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, -m_Offset, m_Pose0[LEFT_MIDLE_FOOT_IDX], <span class="hljs-number">1</span> - k,<font></font>
      points[LEFT_MIDLE_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, -m_Offset, m_Pose0[RIGTH_FRONT_FOOT_IDX], <span class="hljs-number">1</span> - k,<font></font>
      points[RIGTH_FRONT_FOOT_IDX]);<font></font>
    linearFunc(<span class="hljs-number">2.0</span>, -m_Offset, m_Pose0[RIGTH_BACK_FOOT_IDX], <span class="hljs-number">1</span> - k,<font></font>
      points[RIGTH_BACK_FOOT_IDX]);<font></font>
    <font></font>
    <span class="hljs-keyword">int</span> h = (<span class="hljs-keyword">int</span>)m_Heigth*<span class="hljs-built_in">sin</span>(M_PI*(k - <span class="hljs-number">0.75</span>)*<span class="hljs-number">2</span>);<font></font>
    points[LEFT_MIDLE_FOOT_IDX].z += h;<font></font>
    points[RIGTH_FRONT_FOOT_IDX].z += h;<font></font>
    points[RIGTH_BACK_FOOT_IDX].z += h;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">return</span> S_OK;<font></font>
}</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir teilen den ganzen Schritt in vier Viertel:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im ersten Quartal f√ºhrt die erste Dreiklang von Gliedma√üen (links vorne, links hinten und rechts in der Mitte) eine Druckbewegung aus, dh sie bewegt sich entlang der Oberfl√§che in die entgegengesetzte Richtung zur Bewegung. </font><font style="vertical-align: inherit;">Die zweite Dreiklang von Pfoten (rechts vorne, rechts hinten und links in der Mitte) bewegt sich in Bewegungsrichtung, w√§hrend die H√∂he ihres Anstiegs vom Maximalwert der angegebenen H√∂he der Beine (zu Beginn des Quartals) bis Null (am Ende des Quartals) als Funktion des Sinus variiert.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im zweiten Quartal √§ndern sich die Richtungen der Triaden. </font><font style="vertical-align: inherit;">Jetzt bewegt die zweite Pfoten-Triade den Roboter und die erste bewegt sich in die gleiche Richtung wie der Roboter. </font><font style="vertical-align: inherit;">In diesem Fall √§ndert sich die H√∂he der Pfoten der ersten Triade in einer Sinuskurve von Null auf den Maximalwert.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im dritten Quartal wird die Bewegungsrichtung der Pfoten beibehalten, und die Enden der ersten Triade sinken ab und erreichen am Ende des dritten Quartals die Oberfl√§che.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im letzten Quartal wird die erste Triade zur St√ºtze, und die zweite √§ndert ihre Richtung und bewegt sich entlang der Sinuskurve nach oben, wobei sie am Ende des Quartals die maximale H√∂he erreicht.</font></font></li>
</ol><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RotateMotion-Klasse</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem </font><font style="vertical-align: inherit;">wir </font><font style="vertical-align: inherit;">die Logik der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LinearMotion-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse verstanden haben </font><font style="vertical-align: inherit;">, k√∂nnen wir die Implementierung der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RotateMotion-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse leicht herausfinden </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RotateMotion :: RotateMotion (...)</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">RotateMotion::RotateMotion(<span class="hljs-keyword">int</span> heigth, Vector3D pose0[FOOTS_COUNT], Vector3D speed,
  <span class="hljs-keyword">long</span> maxTime, <span class="hljs-keyword">long</span> totalTime = <span class="hljs-number">-1</span>, Motion* pNext = <span class="hljs-literal">NULL</span>) <font></font>
    : Motion(maxTime, <span class="hljs-literal">true</span>, totalTime, pNext) {<font></font>
  copyPose(m_Pose0, pose0);<font></font>
  m_Angles = <span class="hljs-number">0.001</span>*maxTime*speed*M_PI/<span class="hljs-number">180</span>;<font></font>
  m_Heigth = heigth;<font></font>
}</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Konstruktoren beider Klassen sind in der Zusammensetzung der √ºbergebenen Argumente nahezu identisch. </font><font style="vertical-align: inherit;">Nur im Fall einer Umkehrung der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geschwindigkeit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist der Winkelgeschwindigkeitsvektor , </font><font style="vertical-align: inherit;">die die Achse und die </font><font style="vertical-align: inherit;">Geschwindigkeit der Drehung des Roboters definieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getPose-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode der </font><i><font style="vertical-align: inherit;">RotateMotion-</font></i><font style="vertical-align: inherit;"> Klasse </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist die</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Arbeitslogik ebenfalls in vier Stufen unterteilt. </font><font style="vertical-align: inherit;">Zur Berechnung der Position der Pfoten wird jedoch anstelle der linearen Funktion </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linearFunc</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die radiale Funktion </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rotFunc verwendet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int RotateMotion :: getPose (...)</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">RotateMotion::getPose</span><span class="hljs-params">(<span class="hljs-keyword">long</span> time, Vector3D points[FOOTS_COUNT])</span> </span>{
  <span class="hljs-keyword">double</span> k = <span class="hljs-number">1.0</span>*time/m_MaxTime;
  <span class="hljs-keyword">if</span>(k &lt; <span class="hljs-number">0.25</span>) {  <span class="hljs-comment">//   </span><font></font>
<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[LEFT_FRONT_FOOT_IDX], k,<font></font>
      points[LEFT_FRONT_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[LEFT_BACK_FOOT_IDX], k,<font></font>
      points[LEFT_BACK_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[RIGTH_MIDLE_FOOT_IDX], k,<font></font>
      points[RIGTH_MIDLE_FOOT_IDX]);<font></font>
      <font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[LEFT_MIDLE_FOOT_IDX], -k,<font></font>
      points[LEFT_MIDLE_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[RIGTH_FRONT_FOOT_IDX], -k,<font></font>
      points[RIGTH_FRONT_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[RIGTH_BACK_FOOT_IDX], -k,<font></font>
      points[RIGTH_BACK_FOOT_IDX]);<font></font>
<font></font>
    <span class="hljs-keyword">int</span> h = (<span class="hljs-keyword">int</span>)m_Heigth*<span class="hljs-built_in">cos</span>(M_PI*k*<span class="hljs-number">2</span>);<font></font>
    points[LEFT_MIDLE_FOOT_IDX].z += h;<font></font>
    points[RIGTH_FRONT_FOOT_IDX].z += h;<font></font>
    points[RIGTH_BACK_FOOT_IDX].z += h;<font></font>
<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(k &lt; <span class="hljs-number">0.5</span>) {  <span class="hljs-comment">//   </span><font></font>
    <font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[LEFT_FRONT_FOOT_IDX], <span class="hljs-number">0.5</span> - k,<font></font>
      points[LEFT_FRONT_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[LEFT_BACK_FOOT_IDX], <span class="hljs-number">0.5</span> - k,<font></font>
      points[LEFT_BACK_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[RIGTH_MIDLE_FOOT_IDX], <span class="hljs-number">0.5</span> - k,<font></font>
      points[RIGTH_MIDLE_FOOT_IDX]);<font></font>
      <font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[LEFT_MIDLE_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[LEFT_MIDLE_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[RIGTH_FRONT_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[RIGTH_FRONT_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[RIGTH_BACK_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[RIGTH_BACK_FOOT_IDX]);<font></font>
  <font></font>
    <span class="hljs-keyword">int</span> h = (<span class="hljs-keyword">int</span>)m_Heigth*<span class="hljs-built_in">sin</span>(M_PI*(k - <span class="hljs-number">0.25</span>)*<span class="hljs-number">2</span>);<font></font>
    points[LEFT_FRONT_FOOT_IDX].z += h;<font></font>
    points[LEFT_BACK_FOOT_IDX].z += h;<font></font>
    points[RIGTH_MIDLE_FOOT_IDX].z += h;<font></font>
<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(k &lt; <span class="hljs-number">0.75</span>) {  <span class="hljs-comment">//   </span><font></font>
  <font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[LEFT_FRONT_FOOT_IDX], <span class="hljs-number">0.5</span> - k,<font></font>
      points[LEFT_FRONT_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[LEFT_BACK_FOOT_IDX], <span class="hljs-number">0.5</span> - k,<font></font>
      points[LEFT_BACK_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[RIGTH_MIDLE_FOOT_IDX], <span class="hljs-number">0.5</span> - k,<font></font>
      points[RIGTH_MIDLE_FOOT_IDX]);<font></font>
      <font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[LEFT_MIDLE_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[LEFT_MIDLE_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[RIGTH_FRONT_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[RIGTH_FRONT_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[RIGTH_BACK_FOOT_IDX], k - <span class="hljs-number">0.5</span>,<font></font>
      points[RIGTH_BACK_FOOT_IDX]);<font></font>
  <font></font>
    <span class="hljs-keyword">int</span> h = (<span class="hljs-keyword">int</span>)m_Heigth*<span class="hljs-built_in">cos</span>(M_PI*(k - <span class="hljs-number">0.5</span>)*<span class="hljs-number">2</span>);<font></font>
    points[LEFT_FRONT_FOOT_IDX].z += h;<font></font>
    points[LEFT_BACK_FOOT_IDX].z += h;<font></font>
    points[RIGTH_MIDLE_FOOT_IDX].z += h;<font></font>
  } <span class="hljs-keyword">else</span> { <span class="hljs-comment">//   </span>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[LEFT_FRONT_FOOT_IDX], k - <span class="hljs-number">1</span>,<font></font>
      points[LEFT_FRONT_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[LEFT_BACK_FOOT_IDX], k - <span class="hljs-number">1</span>,<font></font>
      points[LEFT_BACK_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[RIGTH_MIDLE_FOOT_IDX], k - <span class="hljs-number">1</span>,<font></font>
      points[RIGTH_MIDLE_FOOT_IDX]);<font></font>
      <font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[LEFT_MIDLE_FOOT_IDX], <span class="hljs-number">1</span> - k,<font></font>
      points[LEFT_MIDLE_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[RIGTH_FRONT_FOOT_IDX], <span class="hljs-number">1</span> - k,<font></font>
      points[RIGTH_FRONT_FOOT_IDX]);<font></font>
    rotFunc(<span class="hljs-number">2.0</span>, m_Angles, m_Pose0[RIGTH_BACK_FOOT_IDX], <span class="hljs-number">1</span> - k,<font></font>
      points[RIGTH_BACK_FOOT_IDX]);<font></font>
<font></font>
    <span class="hljs-keyword">int</span> h = (<span class="hljs-keyword">int</span>)m_Heigth*<span class="hljs-built_in">sin</span>(M_PI*(k - <span class="hljs-number">0.75</span>)*<span class="hljs-number">2</span>);<font></font>
    points[LEFT_MIDLE_FOOT_IDX].z += h;<font></font>
    points[RIGTH_FRONT_FOOT_IDX].z += h;<font></font>
    points[RIGTH_BACK_FOOT_IDX].z += h;<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> S_OK;<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit der Radialfunktion k√∂nnen Sie die Position eines Punktes im Raum nach seiner Drehung um die Mitte des Roboters berechnen, die mit dem Ursprung √ºbereinstimmt.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void rotFunc (...)</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">rotFunc</span><span class="hljs-params">(<span class="hljs-keyword">float</span> a, Vector3D angles, Vector3D p0, <span class="hljs-keyword">float</span> k, Vector3D&amp; res)</span> </span>{<font></font>
  Matrix3D m = rotMatrix2(a*angles*k);<font></font>
  res = m*p0;<font></font>
}<font></font>
</code></pre> <br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Innerhalb der Funktion befindet sich ein mathematischer Apparat, mit dem wir mit Vektor- und Matrixgr√∂√üen arbeiten k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das war es f√ºrs Erste. </font><font style="vertical-align: inherit;">Wir haben einen wesentlichen Teil des Programmcodes analysiert, der f√ºr die Implementierung der Bewegung des Roboters verantwortlich ist. </font><font style="vertical-align: inherit;">Wenn Sie Fragen oder Kommentare haben, beantworte ich diese gerne in den Kommentaren. </font><font style="vertical-align: inherit;">Ich werde versuchen, den folgenden Artikel dem Rest des Codes zu widmen, dessen Quellcode zum Download zur Verf√ºgung steht. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielen Dank f√ºr Ihre Aufmerksamkeit! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fortsetzung folgt‚Ä¶</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de489650/index.html">Automatisierung eines Journalisten. Teil 1: Aufgaben und Kalender</a></li>
<li><a href="../de489662/index.html">PHP Digest Nr. 174 (10. - 24. Februar 2020)</a></li>
<li><a href="../de489664/index.html">NPS, F√∂rderer, automatisches Rechnen und wieder ... Coroutinen</a></li>
<li><a href="../de489666/index.html">√úberladen in C ++. Teil II √úberlastung des Bedieners</a></li>
<li><a href="../de489668/index.html">CPU-Limits und aggressive Drosselung in Kubernetes</a></li>
<li><a href="../de489674/index.html">Angular: eine klare Einf√ºhrung in NGRX</a></li>
<li><a href="../de489676/index.html">Wir erstellen einen Klon des Lebensmittel-Lieferservices mit Nuxt.js, GraphQL, Strapi und Stripe. Teil 1/7</a></li>
<li><a href="../de489678/index.html">Unzerst√∂rbares Ged√§chtnis, unzerst√∂rbare Prozesse</a></li>
<li><a href="../de489682/index.html">Ursprungs√ºbergreifende Leseblockierung (CORB) in Chrome-Erweiterungen</a></li>
<li><a href="../de489684/index.html">Dies ist die Norm - 4: L√∂sen von Problemen mit normalen Karten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>