<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨â€ğŸ“ ğŸ§œ ğŸ›ï¸ ROSãƒˆãƒ©ãƒƒã‚¯ãƒˆãƒ­ãƒªãƒ¼ã€‚ãƒ‘ãƒ¼ãƒˆ6.ãƒ›ã‚¤ãƒ¼ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ãƒ¼ä»˜ãã®ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã€ãƒ«ãƒ¼ãƒ ãƒãƒƒãƒ—ã€ãƒ©ã‚¤ãƒ€ãƒ¼ ğŸ‘©ğŸ½â€ğŸ”§ ğŸ§›ğŸ½ ğŸ–ğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã‚·ãƒªãƒ¼ã‚ºã®æŠ•ç¨¿ï¼š
 8. ROSåˆ¶å¾¡é›»è©±ã€GPSãƒãƒ¼ãƒ‰ã‹ã‚‰åˆ¶å¾¡ã—ã¾ã™
 ã€‚7.ãƒ­ãƒœãƒƒãƒˆã®ä½ç½®ç¢ºèªï¼šãƒãƒƒãƒ”ãƒ³ã‚°ã€AMCLã€ãƒ«ãƒ¼ãƒ ãƒãƒƒãƒ—ä¸Šã®åŸºæº–ç‚¹
 6.ãƒ›ã‚¤ãƒ¼ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ãƒ¼ã‚’å‚™ãˆãŸã‚ªãƒ‰ãƒ¡ãƒˆãƒªã€ãƒ«ãƒ¼ãƒ ãƒãƒƒãƒ—ã€ãƒ©ã‚¤ãƒ€ãƒ¼
 5. rvizã¨ã‚¬ã‚¼ãƒœã§ä½œæ¥­ã—ã¾ã™ï¼šxacroã€æ–°ã—ã„ã‚»ãƒ³ã‚µãƒ¼ã€‚ 
 4. rviz...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ROSãƒˆãƒ©ãƒƒã‚¯ãƒˆãƒ­ãƒªãƒ¼ã€‚ãƒ‘ãƒ¼ãƒˆ6.ãƒ›ã‚¤ãƒ¼ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ãƒ¼ä»˜ãã®ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã€ãƒ«ãƒ¼ãƒ ãƒãƒƒãƒ—ã€ãƒ©ã‚¤ãƒ€ãƒ¼</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471028/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚·ãƒªãƒ¼ã‚ºã®æŠ•ç¨¿ï¼š</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. ROSåˆ¶å¾¡é›»è©±ã€GPSãƒãƒ¼ãƒ‰ã‹ã‚‰åˆ¶å¾¡ã—ã¾ã™</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚7.ãƒ­ãƒœãƒƒãƒˆã®ä½ç½®ç¢ºèªï¼šãƒãƒƒãƒ”ãƒ³ã‚°ã€AMCLã€ãƒ«ãƒ¼ãƒ ãƒãƒƒãƒ—ä¸Šã®åŸºæº–ç‚¹</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.ãƒ›ã‚¤ãƒ¼ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ãƒ¼ã‚’å‚™ãˆãŸã‚ªãƒ‰ãƒ¡ãƒˆãƒªã€ãƒ«ãƒ¼ãƒ ãƒãƒƒãƒ—ã€ãƒ©ã‚¤ãƒ€ãƒ¼</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. rvizã¨ã‚¬ã‚¼ãƒœã§ä½œæ¥­ã—ã¾ã™ï¼šxacroã€æ–°ã—ã„ã‚»ãƒ³ã‚µãƒ¼ã€‚</font></font></a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. rvizãŠã‚ˆã³gazeboã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ãƒ­ãƒœãƒƒãƒˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¾ã™ã€‚</font></font></a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.åŠ é€Ÿã—ã€ã‚«ãƒ¡ãƒ©ã‚’å¤‰æ›´ã—ã€æ­©è¡Œã‚’ä¿®æ­£ã—</font></font></a> <font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¾ã™</font></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚2.ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢</font></font></a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Iron</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å‰å›ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å€‹åˆ¥ã®xacroãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦è¨­è¨ˆã—ã€ä»®æƒ³ãƒ“ãƒ‡ã‚ªã‚«ãƒ¡ãƒ©ã¨imuï¼ˆã‚¸ãƒ£ã‚¤ãƒ­ã‚¹ã‚³ãƒ¼ãƒ—ï¼‰ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®æŠ•ç¨¿ã§ã¯ã€ãƒ›ã‚¤ãƒ¼ãƒ«ã‚·ãƒ£ãƒ•ãƒˆã«å–ã‚Šä»˜ã‘ã‚‰ã‚ŒãŸå…‰å­¦å¼ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ã®ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã‚’æ“ä½œã—ã€ãƒ«ãƒ¼ãƒ ãƒãƒƒãƒ—ã‚’èª­ã¿è¾¼ã‚“ã§ã€å®Ÿéš›ã®ãƒ­ãƒœãƒƒãƒˆã‚«ãƒ¼ãƒˆã«ä¹—ã›ã¾ã™ã€‚</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã¨tf</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã¨tfã¨ã¯ä½•ã‹ã€ãŠã‚ˆã³ROSã§ãã‚Œã‚‰ãŒé€šå¸¸ã©ã®ã‚ˆã†ã«å®Ÿè£…ã•ã‚Œã‚‹ã‹ã«ã¤ã„ã¦ã¯ã€ãƒªã‚½ãƒ¼ã‚¹ã§ã™ã§ã«ååˆ†ã«èª¬æ˜ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãŸã¨ãˆã°ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã“ã§</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç†è«–ã®é–¢é€£è¨˜äº‹ã‚’å‚ç…§ã—</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç†è«–çš„ãªåŸºç¤ã‹ã‚‰å§‹ã‚ã¦ã€ç§ãŸã¡ã¯ç·´ç¿’ã§åƒãã¾ã™ã€‚</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VNCçµŒç”±ã§ãƒˆãƒ­ãƒªãƒ¼ãƒ­ãƒœãƒƒãƒˆã«æ¥ç¶šã—ã¦ä½œæ¥­ã‚’é–‹å§‹ã—ã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
rosbots_driverãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«ç§»å‹•ã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã‚’ç”Ÿæˆã—ã€å…‰å­¦å¼ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ãƒ¼ã‹ã‚‰å—ä¿¡ã—ã€ãã‚Œã‚’arduino unoã«é€ä¿¡ã—ã¦ã‹ã‚‰ã€ãƒ©ã‚ºãƒ™ãƒªãƒ¼piã«é€ä¿¡ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">cd /home/pi/rosbots_catkin_ws/src/rosbots_driver/scripts/rosbots_driver <font></font>
touch diff-tf.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ¼ãƒ‰ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«å…¥ã‚Œã¾ã™ï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diff_tf.py</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#!/usr/bin/env python</span><font></font>
<font></font>
<span class="hljs-string">"""
   diff_tf.py - follows the output of a wheel encoder and
   creates tf and odometry messages.
   some code borrowed from the arbotix diff_controller script
   A good reference: http://rossum.sourceforge.net/papers/DiffSteer/
   
    Copyright (C) 2012 Jon Stephan. 
     

"""</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> rospy
<span class="hljs-comment">#import roslib</span>
<span class="hljs-comment">#roslib.load_manifest('differential_drive')</span>
<span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> sin, cos, pi<font></font>
<font></font>
<span class="hljs-keyword">from</span> geometry_msgs.msg <span class="hljs-keyword">import</span> Quaternion
<span class="hljs-keyword">from</span> geometry_msgs.msg <span class="hljs-keyword">import</span> Twist<font></font>
<font></font>
<span class="hljs-keyword">from</span> geometry_msgs.msg <span class="hljs-keyword">import</span> Vector3<font></font>
<font></font>
<span class="hljs-keyword">from</span> nav_msgs.msg <span class="hljs-keyword">import</span> Odometry
<span class="hljs-keyword">import</span> tf
<span class="hljs-keyword">from</span> tf.broadcaster <span class="hljs-keyword">import</span> TransformBroadcaster
<span class="hljs-keyword">from</span> std_msgs.msg <span class="hljs-keyword">import</span> Int16, Int32, Int64, UInt32<font></font>
<font></font>
<span class="hljs-comment">#############################################################################</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DiffTf</span>:</span>
<span class="hljs-comment">#############################################################################</span><font></font>
<font></font>
    <span class="hljs-comment">#############################################################################</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>
    <span class="hljs-comment">#############################################################################</span>
        rospy.init_node(<span class="hljs-string">"diff_tf"</span>)<font></font>
        self.nodename = rospy.get_name()<font></font>
        rospy.loginfo(<span class="hljs-string">"-I- %s started"</span> % self.nodename)<font></font>
        <font></font>
        <span class="hljs-comment">#### parameters #######</span><font></font>
<font></font>
	<span class="hljs-comment">#Wheel radius : 0.0325 </span>
        <span class="hljs-comment"># wheel circum = 2* 3.14 * 0.0325 = 0.2041</span>
	<span class="hljs-comment"># One rotation encoder ticks : 8 ticks</span>
	<span class="hljs-comment"># For 1 meter: 8 * ( 1 / 0.2041) = 39 ticks</span><font></font>
<font></font>
        self.rate = rospy.get_param(<span class="hljs-string">'~rate'</span>,<span class="hljs-number">10.0</span>)  <span class="hljs-comment"># the rate at which to publish the transform</span>
        self.ticks_meter = float(rospy.get_param(<span class="hljs-string">'ticks_meter'</span>, <span class="hljs-number">190</span>))  <span class="hljs-comment"># The number of wheel encoder ticks per meter of travel</span>
        self.base_width = float(rospy.get_param(<span class="hljs-string">'~base_width'</span>, <span class="hljs-number">0.11</span>)) <span class="hljs-comment"># The wheel base width in meters</span><font></font>
        <font></font>
        self.base_frame_id = rospy.get_param(<span class="hljs-string">'~base_frame_id'</span>,<span class="hljs-string">'base_link'</span>) <span class="hljs-comment"># basefootprint /the name of the base frame of the robot</span>
        self.odom_frame_id = rospy.get_param(<span class="hljs-string">'~odom_frame_id'</span>, <span class="hljs-string">'odom'</span>) <span class="hljs-comment"># the name of the odometry reference frame</span><font></font>
        <font></font>
        self.encoder_min = rospy.get_param(<span class="hljs-string">'encoder_min'</span>, <span class="hljs-number">-2147483648</span>)<font></font>
        self.encoder_max = rospy.get_param(<span class="hljs-string">'encoder_max'</span>, <span class="hljs-number">2147483648</span>)<font></font>
        self.encoder_low_wrap = rospy.get_param(<span class="hljs-string">'wheel_low_wrap'</span>, (self.encoder_max - self.encoder_min) * <span class="hljs-number">0.3</span> + self.encoder_min )<font></font>
        self.encoder_high_wrap = rospy.get_param(<span class="hljs-string">'wheel_high_wrap'</span>, (self.encoder_max - self.encoder_min) * <span class="hljs-number">0.7</span> + self.encoder_min )<font></font>
 <font></font>
        self.t_delta = rospy.Duration(<span class="hljs-number">1.0</span>/self.rate)<font></font>
        self.t_next = rospy.Time.now() + self.t_delta<font></font>
        <font></font>
        <span class="hljs-comment"># internal data</span>
        self.enc_left = <span class="hljs-literal">None</span>        <span class="hljs-comment"># wheel encoder readings</span>
        self.enc_right = <span class="hljs-literal">None</span>
        self.left = <span class="hljs-number">0</span>               <span class="hljs-comment"># actual values coming back from robot</span>
        self.right = <span class="hljs-number">0</span>
        self.lmult = <span class="hljs-number">0</span>
        self.rmult = <span class="hljs-number">0</span>
        self.prev_lencoder = <span class="hljs-number">0</span>
        self.prev_rencoder = <span class="hljs-number">0</span>
        self.x = <span class="hljs-number">0</span>                  <span class="hljs-comment"># position in xy plane </span>
        self.y = <span class="hljs-number">0</span>
        self.th = <span class="hljs-number">0</span>
        self.dx = <span class="hljs-number">0</span>                 <span class="hljs-comment"># speeds in x/rotation</span>
        self.dr = <span class="hljs-number">0</span><font></font>
<font></font>
	self.yaw = <span class="hljs-number">0.01</span>
	self.pitch = <span class="hljs-number">0.01</span>
	self.roll = <span class="hljs-number">0.01</span><font></font>
<font></font>
        self.then = rospy.Time.now()<font></font>
<font></font>
        self.quaternion_1 = Quaternion()<font></font>
        <font></font>
        <span class="hljs-comment"># subscriptions</span>
        rospy.Subscriber(<span class="hljs-string">"wheel_ticks_left"</span>, UInt32, self.lwheelCallback)<font></font>
        rospy.Subscriber(<span class="hljs-string">"wheel_ticks_right"</span>, UInt32, self.rwheelCallback)<font></font>
<font></font>
        <span class="hljs-comment">#rospy.Subscriber("imu_data", Vector3, self.imu_value_update)</span><font></font>
<font></font>
<font></font>
        self.odomPub = rospy.Publisher(<span class="hljs-string">"odom"</span>, Odometry,queue_size=<span class="hljs-number">10</span>)<font></font>
        self.odomBroadcaster = TransformBroadcaster()<font></font>
        <font></font>
    <span class="hljs-comment">#############################################################################</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">spin</span>(<span class="hljs-params">self</span>):</span>
    <span class="hljs-comment">#############################################################################</span><font></font>
        r = rospy.Rate(self.rate)<font></font>
        <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> rospy.is_shutdown():<font></font>
            self.update()<font></font>
            r.sleep()<font></font>
       <font></font>
     <font></font>
    <span class="hljs-comment">#############################################################################</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update</span>(<span class="hljs-params">self</span>):</span>
    <span class="hljs-comment">#############################################################################</span><font></font>
        now = rospy.Time.now()<font></font>
        <span class="hljs-keyword">if</span> now &gt; self.t_next:<font></font>
            elapsed = now - self.then<font></font>
            self.then = now<font></font>
            elapsed = elapsed.to_sec()<font></font>
            <font></font>
<font></font>
            <span class="hljs-comment"># calculate odometry</span>
            <span class="hljs-keyword">if</span> self.enc_left == <span class="hljs-literal">None</span>:<font></font>
                d_left = <span class="hljs-number">0</span>
                d_right = <span class="hljs-number">0</span>
            <span class="hljs-keyword">else</span>:<font></font>
                d_left = (self.left - self.enc_left) / self.ticks_meter<font></font>
                d_right = (self.right - self.enc_right) / self.ticks_meter<font></font>
            self.enc_left = self.left<font></font>
            self.enc_right = self.right<font></font>
           <font></font>
            <span class="hljs-comment"># distance traveled is the average of the two wheels </span>
            d = ( d_left + d_right ) / <span class="hljs-number">2</span>
            <span class="hljs-comment"># this approximation works (in radians) for small angles</span><font></font>
            th = ( d_right - d_left ) / self.base_width<font></font>
            <span class="hljs-comment"># calculate velocities</span><font></font>
            self.dx = d / elapsed<font></font>
            self.dr = th / elapsed<font></font>
           <font></font>
<font></font>
             <font></font>
            <span class="hljs-keyword">if</span> (d != <span class="hljs-number">0</span>):
                <span class="hljs-comment"># calculate distance traveled in x and y</span><font></font>
                x = cos( th ) * d<font></font>
                y = -sin( th ) * d<font></font>
                <span class="hljs-comment"># calculate the final position of the robot</span><font></font>
                self.x = self.x + ( cos( self.th ) * x - sin( self.th ) * y )<font></font>
                self.y = self.y + ( sin( self.th ) * x + cos( self.th ) * y )<font></font>
            <span class="hljs-keyword">if</span>( th != <span class="hljs-number">0</span>):<font></font>
                self.th = self.th + th<font></font>
                <font></font>
            <span class="hljs-comment"># publish the odom information</span><font></font>
            quaternion = Quaternion()<font></font>
<font></font>
<font></font>
            quaternion.x = <span class="hljs-number">0.0</span>
            quaternion.y = <span class="hljs-number">0.0</span><font></font>
<font></font>
            quaternion.z = sin( self.th / <span class="hljs-number">2</span> )<font></font>
            quaternion.w = cos( self.th / <span class="hljs-number">2</span> )<font></font>
<font></font>
	    <span class="hljs-string">'''
            try:		
            	quaternion.z = self.quaternion_1[2]
            	quaternion.w = self.quaternion_1[3]

	    except:
		quaternion.z = sin( self.th / 2 )
		quaternion.w = cos( self.th / 2 )
		pass
            '''</span><font></font>
            self.odomBroadcaster.sendTransform(<font></font>
                (self.x, self.y, <span class="hljs-number">0</span>),<font></font>
                (quaternion.x, quaternion.y, quaternion.z, quaternion.w),<font></font>
                rospy.Time.now(),<font></font>
                self.base_frame_id,<font></font>
                self.odom_frame_id<font></font>
                )<font></font>
            <font></font>
            odom = Odometry()<font></font>
            odom.header.stamp = now<font></font>
            odom.header.frame_id = self.odom_frame_id<font></font>
            odom.pose.pose.position.x = self.x<font></font>
            odom.pose.pose.position.y = self.y<font></font>
            odom.pose.pose.position.z = <span class="hljs-number">0</span><font></font>
            odom.pose.pose.orientation = quaternion<font></font>
            odom.child_frame_id = self.base_frame_id<font></font>
            odom.twist.twist.linear.x = self.dx<font></font>
            odom.twist.twist.linear.y = <span class="hljs-number">0</span><font></font>
            odom.twist.twist.angular.z = self.dr<font></font>
            self.odomPub.publish(odom)<font></font>
            <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">imu_value_update</span>(<span class="hljs-params">self, imu_data</span>):</span><font></font>
	    orient = Vector3()<font></font>
<font></font>
            orient = imu_data<font></font>
<font></font>
	    self.yaw = orient.x<font></font>
 	    self.pitch = orient.y<font></font>
	    self.roll = orient.z<font></font>
<font></font>
	    <span class="hljs-keyword">try</span>:	<font></font>
	    	self.quaternion_1 = tf.transformations.quaternion_from_euler(self.yaw, self.pitch, self.roll)<font></font>
	  	<span class="hljs-comment">#print self.quaternion_1[0]</span>
	  	<span class="hljs-comment">#print self.quaternion_1[1]</span>
	  	<span class="hljs-comment">#print self.quaternion_1[2]</span>
	  	<span class="hljs-comment">#print self.quaternion_1[3]</span><font></font>
<font></font>
 	    <span class="hljs-keyword">except</span>:<font></font>
		rospy.logwarn(<span class="hljs-string">"Unable to get quaternion values"</span>)
	        <span class="hljs-keyword">pass</span><font></font>
<font></font>
<font></font>
    <span class="hljs-comment">#############################################################################</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lwheelCallback</span>(<span class="hljs-params">self, msg</span>):</span>
    <span class="hljs-comment">#############################################################################</span><font></font>
        enc = msg.data<font></font>
        <span class="hljs-keyword">if</span> (enc &lt; self.encoder_low_wrap <span class="hljs-keyword">and</span> self.prev_lencoder &gt; self.encoder_high_wrap):<font></font>
            self.lmult = self.lmult + <span class="hljs-number">1</span><font></font>
            <font></font>
        <span class="hljs-keyword">if</span> (enc &gt; self.encoder_high_wrap <span class="hljs-keyword">and</span> self.prev_lencoder &lt; self.encoder_low_wrap):<font></font>
            self.lmult = self.lmult - <span class="hljs-number">1</span><font></font>
            <font></font>
        self.left = <span class="hljs-number">1.0</span> * (enc + self.lmult * (self.encoder_max - self.encoder_min)) <font></font>
<font></font>
<font></font>
        self.prev_lencoder = enc<font></font>
        <font></font>
    <span class="hljs-comment">#############################################################################</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">rwheelCallback</span>(<span class="hljs-params">self, msg</span>):</span>
    <span class="hljs-comment">#############################################################################</span><font></font>
        enc = msg.data<font></font>
        <span class="hljs-keyword">if</span>(enc &lt; self.encoder_low_wrap <span class="hljs-keyword">and</span> self.prev_rencoder &gt; self.encoder_high_wrap):<font></font>
            self.rmult = self.rmult + <span class="hljs-number">1</span><font></font>
        <font></font>
        <span class="hljs-keyword">if</span>(enc &gt; self.encoder_high_wrap <span class="hljs-keyword">and</span> self.prev_rencoder &lt; self.encoder_low_wrap):<font></font>
            self.rmult = self.rmult - <span class="hljs-number">1</span><font></font>
            <font></font>
        self.right = <span class="hljs-number">1.0</span> * (enc + self.rmult * (self.encoder_max - self.encoder_min))<font></font>
<font></font>
<font></font>
        self.prev_rencoder = enc<font></font>
<font></font>
<span class="hljs-comment">#############################################################################</span>
<span class="hljs-comment">#############################################################################</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    <span class="hljs-string">""" main """</span><font></font>
    diffTf = DiffTf()<font></font>
    diffTf.spin()<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã—ã¦å®Ÿè¡Œå¯èƒ½ã«ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">
ãƒ­ãƒœãƒƒãƒˆã§2ç•ªç›®ã®ãƒãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™-ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã¨diff-tfï¼š</font><font style="vertical-align: inherit;">
1ç•ªç›®ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼š</font></font><br>
<code>CTRL+X<br>
chmod +x diff-tf.py</code><br>
<br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="plaintext hljs">python diff_tf.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2ç•ªç›®ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">rosrun rosbots_driver part2_cmr.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3ç•ªç›®ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã€æ–°ã—ã„odomãŠã‚ˆã³tfãƒˆãƒ”ãƒƒã‚¯ãŒ</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zy/tc/rw/zytcrwcee_4-ygvgiwipil9jyxm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚rostopicecho odomã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ãƒˆãƒ”ãƒƒã‚¯ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹å†…å®¹ï¼ˆãŠã‚ˆã³ãã‚ŒãŒå…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ï¼‰ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çµè«–ã¯ã»ã¼æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/c2/f0/-o/c2f0-onzf3-8gdjtvegw7axrgtw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ­ãƒœãƒƒãƒˆã®å®Ÿè¡Œä¸­ã®ãƒãƒ¼ãƒ‰ã‚’é–‰ã˜ã‚‹ã“ã¨ãªãã€ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«ç’°å¢ƒã®rvizã¨gazeboã‚’ä½¿ç”¨ã—ã¦åˆ¶å¾¡ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã‚’èµ·å‹•ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ç”¨ã«æä¾›ã•ã‚Œã¦ã„ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆUbuntu 16.04ã‚’æ­è¼‰ã—ãŸVMWareä»®æƒ³ãƒã‚·ãƒ³+ ROS Kineticï¼‰ã«ã¯ã€å¿…è¦ãªã‚‚ã®ãŒã™ã¹ã¦å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ¶å¾¡ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ï¼ˆä»¥ä¸‹ã€Œã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã€ã¨å‘¼ã¶ï¼‰ã§ã€rvizã§ãƒ¢ãƒ‡ãƒ«ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch rosbots_description rviz.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥å‰ã®æŠ•ç¨¿ã§ä½¿ç”¨ã—ãŸãƒ­ãƒœãƒƒãƒˆãƒ¢ãƒ‡ãƒ«ãŒ</font></font><br>
<br>
<img src="https://habrastorage.org/webt/e2/xf/kb/e2xfkbeuzqsl8g9vcl_ffiz2caa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚[è¿½åŠ ]ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€rvizã«2ã¤ã®ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’è¿½åŠ ã—ã¾ã™ã€‚ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã‚’ä½¿ç”¨ã—ãŸè¡¨ç¤ºã¨tfã‚’ä½¿ç”¨ã—ãŸè¡¨ç¤ºã§ã¯ã€ãƒœãƒƒã‚¯ã‚¹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦è¦–è¦šåŒ–ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ­ãƒœãƒƒãƒˆãƒ¢ãƒ‡ãƒ«ãŒæã‹ã‚Œã¦ã„ã‚‹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«ã€ç‰¹å¾´çš„ãªã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/i_/p3/r1/i_p3r1fflodksrj2vowmldcmxl0.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*è¦‹ã‚„ã™ãã™ã‚‹ãŸã‚</font><font style="vertical-align: inherit;">ã«ã€ãƒ­ãƒœãƒƒãƒˆãƒ¢ãƒ‡ãƒ«ã®</font><font style="vertical-align: inherit;">è¡¨ç¤ºã‚’ã‚ªãƒ•ã«ã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‹ã‚‰ãƒ­ãƒœãƒƒãƒˆã‚’åˆ¶å¾¡ã—ã€tfã¨ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã®è¦–è¦šåŒ–ãŒã©ã®ã‚ˆã†ã«å¤‰åŒ–ã™ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2ç•ªç›®ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§rvizã‚’é–‰ã˜ãšã«ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‹ã‚‰åˆ¶å¾¡ã‚’é–‹å§‹ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">rosrun teleop_twist_keyboard teleop_twist_keyboard.py /cmd_vel:=/part2_cmr/cmd_vel</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ­ãƒœãƒƒãƒˆã‚’åˆ¶å¾¡ã™ã‚‹ã¨ã€è¦–è¦šåŒ–ã•ã‚ŒãŸã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«èµ¤ã„çŸ¢å°ï¼ˆodomãƒˆãƒ”ãƒƒã‚¯ã®è¦–è¦šåŒ–ï¼‰ã€ãƒ™ã‚¯ãƒˆãƒ«ç·šï¼ˆtfãƒˆãƒ”ãƒƒã‚¯ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
odomãƒˆãƒ”ãƒƒã‚¯ã®èµ¤ã„çŸ¢å°ãŒãƒ­ãƒœãƒƒãƒˆã®ç§»å‹•æ–¹å‘ã‚’ç¤ºã—ã¦ã„ã‚‹å ´åˆã€ãƒ™ã‚¯ãƒˆãƒ«ç·štfã¯ãƒ­ãƒœãƒƒãƒˆã®å€‹ã€…ã®è¦ç´ ãŒç©ºé–“ã«é…ç½®ã•ã‚Œã¦ã„ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ“ãƒ‡ã‚ª</font></font></b><div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/CC6CO5VIDUA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«é€²ã‚€ã«ã¯ã€ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã‚’ã€Œèª¿æ•´ã€ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒ¢ãƒ‡ãƒ«ã‚’è¦–è¦šåŒ–ã›ãšã«ã€rvizã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚’é–‰ã˜ã¦å†èµ·å‹•ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">rosrun rviz rviz</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã¯ã€tfãƒˆãƒ”ãƒƒã‚¯ã®ãƒ™ã‚¯ã‚¿ãƒ¼ã‹ã‚‰base_linkã¨odomã ã‘ãŒæ®‹ã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«å¿…è¦ã§ã™</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x6/qn/fn/x6qnfnbvkzstivryymtyovdnmuw.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€‚rvizã§ã¯ã€1ã¤ã®ã‚»ãƒ«ã¯1ãƒ¡ãƒ¼ãƒˆãƒ«ã«ç›¸å½“ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€å®Ÿéš›ã«ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’æ¯”è¼ƒã™ã‚‹ãŸã‚ã«ãƒ­ãƒœãƒƒãƒˆã‚‚1ãƒ¡ãƒ¼ãƒˆãƒ«é€šéã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ­ãƒœãƒƒãƒˆã‹ã‚‰1ãƒ¡ãƒ¼ãƒˆãƒ«ã‚’æ¸¡ã—ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‹ã‚‰åˆ¶å¾¡ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">rvizã§ã¯ã€ãƒ­ãƒœãƒƒãƒˆã‚‚1ãƒ¡ãƒ¼ãƒˆãƒ«-1ã¤ã®ã‚»ãƒ«ã‚’é§†å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ­ãƒœãƒƒãƒˆãŒrvizã®å ´åˆã‚ˆã‚Šã‚‚é•·ãç§»å‹•ã™ã‚‹å ´åˆã€ã¾ãŸã¯ãã®é€†ã®å ´åˆã€å®Ÿéš›ã‚ˆã‚Šã‚‚çŸ­ã„è·é›¢ã§ç§»å‹•ã™ã‚‹å ´åˆã¯ã€ä»¥å‰ã«ä½œæˆã•ã‚ŒãŸdiff_tf.pyãƒ•ã‚¡ã‚¤ãƒ«ã€ã¤ã¾ã‚Šæ¬¡ã®ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç·¨é›†ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diff_tf.py</font></font></b><div class="spoiler_text"> <pre><code class="plaintext hljs"> #### parameters #######<font></font>
<font></font>
	#Wheel radius : 0.0325 <font></font>
        # wheel circum = 2* 3.14 * 0.0325 = 0.2041<font></font>
	# One rotation encoder ticks : 8 ticks<font></font>
	# For 1 meter: 8 * ( 1 / 0.2041) = 39 ticks<font></font>
<font></font>
        self.rate = rospy.get_param('~rate',10.0)  # the rate at which to publish the transform<font></font>
        self.ticks_meter = float(rospy.get_param('ticks_meter', 190))  # The number of wheel encoder ticks per meter of travel<font></font>
        self.base_width = float(rospy.get_param('~base_width', 0.11)) # The wheel base width in meters</code></pre><br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ°å›³</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 ã©ã“ã‹ã«è¡Œãã«ã¯ã€åœ°å›³ãŒå¿…è¦ã§ã™ã€‚</font><font style="vertical-align: inherit;">ç§ãŸã¡ã®ãƒ­ãƒœãƒƒãƒˆã®ãŸã‚ã«-ç§ãŸã¡ã¯éƒ¨å±‹ã®åœ°å›³ãŒå¿…è¦ã§ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½¼å¥³ã¨ä¸€ç·’ã«åƒãã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒãƒƒãƒ—ã‚’rvizã«ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã«ã¯ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ï¼ˆãƒ­ãƒœãƒƒãƒˆã§ã¯ãªã„ï¼‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆrosbots_descriptionï¼‰ã«ãƒãƒƒãƒ—ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã‚’ä½œæˆã—ã€ãã®ä¸­ã«ãƒãƒƒãƒ—ã‚’æ§‹æˆã™ã‚‹2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆmap.pgmã¨map.yamlï¼‰ã‚’é…ç½®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*å®Ÿéš›ã«ã¯ã€ãƒ•ã‚©ãƒ«ãƒ€å†…ã«è¤‡æ•°ã®ãƒãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ãŒã€ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ã®ã¯1ã¤ã ã‘ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROSã®ãƒãƒƒãƒ—ã¯2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§æ§‹æˆã•ã‚Œã€1ã¤ã¯PGMç”»åƒã§ã€å„ãƒ”ã‚¯ã‚»ãƒ«ã¯æ¬¡ã®ã„ãšã‚Œã‹ã§ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç™½-ã‚¹ãƒšãƒ¼ã‚¹ã¯ç©ºã„ã¦ã„ã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é»’-ã‚¹ãƒšãƒ¼ã‚¹ãŒéšœå®³ç‰©ã§å ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç°è‰²-å®‡å®™ã¯ã¾ã æ¢ç´¢ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2ç•ªç›®ã®.yamlãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒãƒƒãƒ—è¨­å®šã‚’å«ã‚€ãƒ•ã‚¡ã‚¤ãƒ«ã§ã€ãã®å¯¸æ³•ã€ã•ã¾ã–ã¾ãªã‚¿ã‚¤ãƒ—ã®ãƒ”ã‚¯ã‚»ãƒ«å æœ‰ç‡ï¼ˆä¸Šè¨˜ï¼‰ã€ãŠã‚ˆã³ãã®ä»–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚«ãƒ¼ãƒ‰ã‚’ç™ºè¡Œã™ã‚‹ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã§ãƒãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">rosrun map_server map_server /home/pi/catkin_ws/src/rosbots_description/maps/rail_lab.pgm 0.05</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
éš£æ¥ã™ã‚‹ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã€rvizã§ãƒ¢ãƒ‡ãƒ«ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch rosbots_description rviz.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
rvizã§ã€ãƒãƒƒãƒ—è¡¨ç¤ºã‚’è¿½åŠ ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
rvizã§ã¯ã€ãƒ­ãƒœãƒƒãƒˆãŒä¸é‡£ã‚Šåˆã„ã«å¤§ããã€åœ°å›³ã®å¤–ã«ã‚ã‚‹ã“ã¨ãŒåˆ¤æ˜ã—ã¾ã—ãŸã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h6/ob/8g/h6ob8gyq_u11omb3bzneqczgkra.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã‚’ä¿®æ­£ã™ã‚‹ã«ã¯ã€ã‚»ãƒ«ã‚µã‚¤ã‚ºãŒ1ãƒ¡ãƒ¼ãƒˆãƒ«ã«ãªã‚‹åœ°å›³ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">æœ€å¾Œã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿1ã‚’æŒ‡å®šã—ã¦ã‚«ãƒ¼ãƒ‰ã‚’å†èµ·å‹•ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">rosrun map_server map_server /home/pi/catkin_ws/src/rosbots_description/maps/rail_lab.pgm 1</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã§ã€rvizã§ãƒãƒƒãƒ—ã«ä¹—ã£ã¦ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‹ã‚‰ãƒ­ãƒœãƒƒãƒˆã‚’åˆ¶å¾¡ã§ãã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ“ãƒ‡ã‚ª</font></font></b><div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/bbsn97FUNnI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
</div></div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã‚Œã§ã€é”æˆã•ã‚ŒãŸã‚‚ã®</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ­ãƒœãƒƒãƒˆã®å…‰å­¦å¼ãƒ›ã‚¤ãƒ¼ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ãƒ¼ã‹ã‚‰ã‚ªãƒ‰ãƒ¡ãƒˆãƒªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€rvizã«è¡¨ç¤ºã™ã‚‹ãƒˆãƒ”ãƒƒã‚¯ã«é€ä¿¡ã—ã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ­ãƒœãƒƒãƒˆã®èµ°è¡Œè·é›¢ã‚’èª¿æ•´ã—ã¦ã€å®Ÿéš›ã«ç§»å‹•ã—ãŸè·é›¢ã¨å®Ÿéš›ã«ç§»å‹•ã—ãŸè·é›¢ã‚’ä¸€è‡´ã•ã›ã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">éƒ¨å±‹ã®åœ°å›³ã‚’èª­ã¿è¾¼ã‚“ã§è¡¨ç¤ºã—ã¾ã™ã€‚ </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã ã—ã€ãƒãƒƒãƒ—ãŒè¡¨ç¤ºã•ã‚Œã€ãƒ­ãƒœãƒƒãƒˆãŒã€Œèª¿æ•´ã•ã‚ŒãŸã€ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã§ä¹—ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨ã„ã†äº‹å®Ÿã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€å®Ÿéš›ã«ã¯ãƒ­ãƒœãƒƒãƒˆã¯ç›²ç›®ã§ã™ã€‚</font><font style="vertical-align: inherit;">å½¼ã¯éšœå®³ç‰©ã‚’è¦‹ãšã€ãã‚Œã‚‰ã«ã¶ã¤ã‹ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">2ç•ªç›®ã®ãƒã‚¤ãƒŠã‚¹ã¯ã€rvizã«ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸä»®æƒ³ãƒ«ãƒ¼ãƒ ãƒãƒƒãƒ—ã§ã™ã€‚éšœå®³ç‰©ãŒã¯ã£ãã‚Šã¨ç¤ºã•ã‚Œã¦ã„ã‚‹å ´æ‰€ã§ã‚‚ã€è‡ªåˆ†ã§å…¨æ–¹å‘ã«ä¹—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ­ãƒœãƒƒãƒˆã«å®Ÿéš›ã«ãã—ã¦äº‹å®Ÿä¸Šéšœå®³ç‰©ã‚’ã€Œè¦‹ãˆã‚‹ã€ã‚ˆã†ã«ã™ã‚‹æ–¹æ³•ã¯ï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»®æƒ³ç’°å¢ƒã§ã¯ã‚ˆã‚Šç°¡å˜ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã™ã¹ã¦ãŒã‚¬ã‚¼ãƒœã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã«åŸºã¥ã„ã¦æ§‹ç¯‰ã•ã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ä»¥å‰ã®æŠ•ç¨¿ã§ã“ã‚Œã¯è¨€åŠã•ã‚Œã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã‚Œã¯ç¾å®Ÿã«ã‚ˆã‚Šè¤‡é›‘ã§ã™ã€‚</font><font style="vertical-align: inherit;">éšœå®³ã‚’ç¤ºã—ã€ã“ã‚Œã‚’ã‚·ã‚¹ãƒ†ãƒ ã«å ±å‘Šã™ã‚‹è¦ç´ ï¼ˆã‚»ãƒ³ã‚µãƒ¼ï¼‰ãŒå¿…è¦ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1ã¤ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ãƒ­ãƒœãƒƒãƒˆã«LIDARã‚’é…ç½®ã™ã‚‹ã“ã¨ã§ã™ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lidar RPlidar A1</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‰‹é ƒãªäºˆç®—ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ©ã‚¤ãƒ€ãƒ¼ã«ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’å–ã‚Šä»˜ã‘ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŠãã‚‰ãã€ã“ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯åŒã˜Kinectã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã‚Šã‚‚ã‚³ã‚¹ãƒˆãŒé«˜ããªã‚Šã¾ã™ãŒã€å®Ÿéš›ã«ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€é€Ÿåº¦ã€ç²¾åº¦ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å®¹æ˜“ã•ï¼ˆé¢å€’ã•ãŒå°‘ãªã„ï¼‰ã®ç‚¹ã§ã‚ˆã‚ŠåŠ¹æœçš„ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€LIDARã®ä½¿ç”¨ã‚’é–‹å§‹ã™ã‚‹æ–¹ãŒç°¡å˜ã§ã™ã€‚</font><font style="vertical-align: inherit;">é›»åŠ›ã‚’ä¾›çµ¦ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æ¥ç¶šã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã®è€ƒå¯Ÿã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ï¼ˆhttps://habr.com/en/company/tod/blog/210252/ï¼‰ã€‚</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">LIDAR-wiki.ros.org/rplidar</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€rosãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå¿…è¦</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LIDARã‚’ä½¿ç”¨ã—ã¦ã€éƒ¨å±‹ã®åœ°å›³ã‚’ä½œæˆã—ã€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚‚ä½¿ç”¨ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROSã«rplidarã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æ–¹æ³•ã«ã¯ã€ãŸã¨ãˆã°</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã“ã«</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŸãã•ã‚“ã®è¨˜äº‹ãŒã‚ã‚Š</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ãŸã¡ã¯ç™½é«ªã®è€äººã®çŸ¥è­˜ã‚’ä½¿ç”¨</font><u><font style="vertical-align: inherit;">ã—ã€ãƒ­ãƒœãƒƒãƒˆã®</font></u><font style="vertical-align: inherit;">ã‚·ã‚¹ãƒ†ãƒ </font><u><font style="vertical-align: inherit;">ã«</font></u><font style="vertical-align: inherit;">ãƒ©ã‚¤ãƒ€ãƒ¼ä»˜ãã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™</font></font><u><font style="vertical-align: inherit;"></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">cd /home/pi/rosbots_catkin_ws/src<font></font>
git clone https://github.com/robopeak/rplidar_ros.git<font></font>
cd ..<font></font>
catkin_make</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸Šã®</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã€</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚«ãƒ¼ãƒ‰ã‚’æ“ä½œã™ã‚‹ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">cd /home/pi/rosbots_catkin_ws/src<font></font>
git clone https://github.com/tu-darmstadt-ros-pkg/hector_slam &lt;/code&gt;<font></font>
cd ..<font></font>
catkin_make</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ­ãƒœãƒƒãƒˆã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å®Ÿè¡Œã—ã€LIDARãŒæ©Ÿèƒ½ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo chmod a+rw /dev/ttyUSB0<font></font>
roslaunch rplidar_ros rplidar.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*æœ€åˆã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€LIDARãŒæ¥ç¶šã•ã‚Œã¦ã„ã‚‹USBãƒãƒ¼ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã¹ã¦ãŒé †èª¿ã«é€²ã‚“ã ã‚‰ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡Œã‚’å‡ºåŠ›ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">[ INFO] [1570900184.874891236]: RPLIDAR running on ROS package rplidar_ros. SDK Version:1.9.0<font></font>
RPLIDAR S/N: ----------------<font></font>
[ INFO] [1570900187.397858270]: Firmware Ver: 1.24<font></font>
[ INFO] [1570900187.398081809]: Hardware Rev: 5<font></font>
[ INFO] [1570900187.401749476]: RPLidar health status : 0<font></font>
[ INFO] [1570900188.014285166]: current scan mode: Express, max_distance: 12.0 m, Point number: 4.0K , angle_compensate: 1</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§ã¯ã€ã™ãã«å°ã•ãªLIDARã‚’æ§‹æˆã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">å…¬å¼</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ãã‚Œï¼ˆãƒ©ã‚¤ãƒ€ãƒ¼ï¼‰ãŒã‚ˆã‚Šã‚ˆãåƒãã“ã¨ãŒã§ãã‚‹ã¨è¨€ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¹ã‚­ãƒ£ãƒ³ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç™ºè¡Œã•ã‚Œã‚‹4.0Kãƒã‚¤ãƒ³ãƒˆã§ã¯ãªã8.0Kãƒã‚¤ãƒ³ãƒˆã§ã‚ã‚‹å ´åˆã€å‡ºåŠ›ã‚’é”æˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ã‚¹ã‚­ãƒ£ãƒ³ã®å“è³ªã‚’ã‚ãšã‹ã«å‘ä¸Šã•ã›ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãŸã‚ã«ã€rplidarãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚‚ã†1ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’è¨­å®šã—ã¾ã™-ã‚¹ã‚­ãƒ£ãƒ³ãƒ¢ãƒ¼ãƒ‰ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">cd /rosbots_catkin_ws/src/rplidar_ros/launch<font></font>
nano nano rplidar.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥é™ </font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"angle_compensate"</span>    <span class="hljs-attr">type</span>=<span class="hljs-string">"bool"</span>   <span class="hljs-attr">value</span>=<span class="hljs-string">"true"</span>/&gt;</span></code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æ¬¡ã®è¡Œã‚’è¿½åŠ ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"scan_mode"</span>     <span class="hljs-attr">type</span>=<span class="hljs-string">"string"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Boost"</span>/&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚‹2è¡Œç›®ï¼š</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"frame_id"</span>     <span class="hljs-attr">type</span>=<span class="hljs-string">"string"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"laser"</span>/&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¬ãƒ¼ã‚¶ãƒ¼ã®å€¤ã‚’base_linkã«ç½®ãæ›ãˆã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*ã“ã“ã§ã€roslaunch rplidar_ros rplidar.launchã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ãƒãƒ¼ãƒ‰ã‚’å†èµ·å‹•ã™ã‚‹ã¨ã€å‡ºåŠ›ãŒç•°ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">[ INFO] [1570900188.014285166]: current scan mode: Boost, max_distance: 12.0 m, Point number: 8.0K , angle_compensate: 1</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦‹ã¦ãã ã•ã„ã€‚</font><font style="vertical-align: inherit;">rvizã§LIDARã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€ãƒ­ãƒœãƒƒãƒˆã§å®Ÿè¡Œã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch rplidar_ros rplidar.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã§ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch rosbots_description rviz.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
rvizã§ã€LaserScanãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’è¿½åŠ ã—ã€ã‚¹ã‚­ãƒ£ãƒ³ãƒˆãƒ”ãƒƒã‚¯ã‚’é¸æŠã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒãƒˆãƒ”ãƒƒã‚¯ã«å½“ã¦ã¯ã¾ã‚‹</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mg/mo/6p/mgmo6p_pyjzofzrfyxwj5ollnrw.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ãƒ­ãƒœãƒƒãƒˆã®è¦–è¦šåŒ–ã‚’ä¼´ã†ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã€ãƒ­ãƒœãƒƒãƒˆã¯å·¨äººã§ã‚ã‚‹ã“ã¨ãŒåˆ¤æ˜ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ãã®ã‚µã‚¤ã‚ºã§ã€å¾Œã§ã‚ã‹ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ¬¡ã«ã€ãƒ«ãƒ¼ãƒ ãƒãƒƒãƒ—ã‚’ä½œæˆã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€ãƒãƒ¼ãƒ‰ã‚’å«ã‚€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œæˆã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">catkin_create_pkg my_hector_mapping rospy<font></font>
cd  my_hector_mapping<font></font>
mkdir launch<font></font>
cd launch<font></font>
nano hector.launch</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hector.launch</font></font></b><div class="spoiler_text"><pre><code class="python hljs">&lt;?xml version=<span class="hljs-string">"1.0"</span>?&gt;<font></font>
&lt;launch&gt;  <font></font>
<font></font>
  &lt;node pkg=<span class="hljs-string">"tf"</span> type=<span class="hljs-string">"static_transform_publisher"</span> name=<span class="hljs-string">"laser_link"</span> args=<span class="hljs-string">"0.0 0.0 0.0 0.0 0.0 0.0 /base_link /laser 50"</span> /&gt;<font></font>
<font></font>
  &lt;node pkg=<span class="hljs-string">"hector_mapping"</span> type=<span class="hljs-string">"hector_mapping"</span> name=<span class="hljs-string">"hector_mapping"</span> output=<span class="hljs-string">"screen"</span>&gt;<font></font>
    <font></font>
    &lt;!-- Frame names --&gt;<font></font>
    &lt;param name=<span class="hljs-string">"map_frame"</span> value=<span class="hljs-string">"map"</span> /&gt;<font></font>
    &lt;param name=<span class="hljs-string">"odom_frame"</span> value=<span class="hljs-string">"base_link"</span> /&gt;<font></font>
        <font></font>
    &lt;!-- Map size / start point --&gt;<font></font>
    &lt;param name=<span class="hljs-string">"map_resolution"</span> value=<span class="hljs-string">"0.050"</span>/&gt;<font></font>
    &lt;param name=<span class="hljs-string">"map_size"</span> value=<span class="hljs-string">"1024"</span>/&gt;<font></font>
    &lt;param name=<span class="hljs-string">"map_start_x"</span> value=<span class="hljs-string">"0.5"</span>/&gt;     // <font></font>
    &lt;param name=<span class="hljs-string">"map_start_y"</span> value=<span class="hljs-string">"0.5"</span> /&gt;<font></font>
    &lt;param name=<span class="hljs-string">"map_multi_res_levels"</span> value=<span class="hljs-string">"2"</span> /&gt;<font></font>
    <font></font>
    &lt;!-- Map update parameters --&gt;<font></font>
    &lt;param name=<span class="hljs-string">"update_factor_free"</span> value=<span class="hljs-string">"0.4"</span>/&gt;<font></font>
    &lt;param name=<span class="hljs-string">"update_factor_occupied"</span> value=<span class="hljs-string">"0.9"</span> /&gt;    <font></font>
    &lt;param name=<span class="hljs-string">"map_update_distance_thresh"</span> value=<span class="hljs-string">"0.4"</span>/&gt;<font></font>
    &lt;param name=<span class="hljs-string">"map_update_angle_thresh"</span> value=<span class="hljs-string">"0.06"</span> /&gt;<font></font>
    &lt;param name=<span class="hljs-string">"laser_z_min_value"</span> value=<span class="hljs-string">"-1.0"</span> /&gt;<font></font>
    &lt;param name=<span class="hljs-string">"laser_z_max_value"</span> value=<span class="hljs-string">"1.0"</span> /&gt;<font></font>
    <font></font>
    &lt;!-- Advertising config --&gt;<font></font>
    &lt;param name=<span class="hljs-string">"advertise_map_service"</span> value=<span class="hljs-string">"true"</span>/&gt;<font></font>
    &lt;param name=<span class="hljs-string">"scan_subscriber_queue_size"</span> value=<span class="hljs-string">"5"</span>/&gt;<font></font>
    &lt;param name=<span class="hljs-string">"scan_topic"</span> value=<span class="hljs-string">"scan"</span>/&gt;<font></font>
    <font></font>
   &lt;/node&gt;<font></font>
&lt;/launch&gt;<font></font>
</code></pre><br>
</div></div><br>
<pre><code class="plaintext hljs">cd ~/rosbots_catkin_ws<font></font>
catkin_make</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ­ãƒœãƒƒãƒˆï¼š</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1ç•ªç›®ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼š</font></font><code>roslaunch rplidar_ros rplidar.launch</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2ç•ªç›®ï¼š</font></font><code>rosrun rosbots_driver part2_cmr.py</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ï¼š</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1ç•ªç›®ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼š</font></font><code>roslaunch my_hector_mapping hector.launch</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2ç•ªç›®ï¼š</font></font><code>roslaunch rosbots_description rviz.launch</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3ç•ªç›®ï¼š</font></font><code>rosrun teleop_twist_keyboard teleop_twist_keyboard.py /cmd_vel:=/part2_cmr/cmd_vel</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã«ãƒãƒƒãƒ—ã‚’è¿½åŠ ã—ã€å›ºå®šãƒ•ãƒ¬ãƒ¼ãƒ ã®base_linkã‚’é¸æŠã—ã¾ã™ã€‚æ¬¡ã«ã€LIDARãŒå‘¨å›²ã®ã‚¹ãƒšãƒ¼ã‚¹ã‚’ã€Œç…§ã‚‰ã™ã€æ§˜å­ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¦³å¯Ÿã§ãã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-6/gv/gq/-6gvgqgtmggjf7ffvnwlr1w6gwa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¾åœ¨ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€ãƒãƒƒãƒ—ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã«ã€LIDARãŒãƒãƒƒãƒ—ä¸Šã§ãã‚Œã‚‰ã‚’ãƒãƒ¼ã‚¯ã™ã‚‹ã‚ˆã†ã«ã€éƒ¨å±‹ã‚’ã•ã¾ã–ã¾ãªè§’åº¦ã«ã€Œãƒ‰ãƒ­ãƒƒãƒ—ã€ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã ã‹ã‚‰æ•™ç§‘æ›¸ã¯ãŠå‹§ã‚ã—ã¾ã™ã€‚ã—ã‹ã—ã€ç§ãŸã¡ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã¯ã€ãƒ­ãƒœãƒƒãƒˆã‚’æ‰‹ã«å–ã£ã¦æ­©ãã€ã‚ãªãŸã®å‰ã«æŒã£ã¦è¡Œãã“ã¨ã§ã™ã€‚ãã®ãŸã‚ã€è¦–è¦šçš„ãªæ¥è§¦ãŒãªã„å ´åˆã«ã€æ¬¡ã®éƒ¨å±‹ã§ãƒ­ãƒœãƒƒãƒˆãŒé‹è»¢ã—ãŸå ´æ‰€ã‚’è¦‹ã¦æ°—ã‚’æ•£ã‚‰ã™å¿…è¦ãŒãªã„ã¨ã„ã†æ„å‘³ã§ã€ãƒãƒƒãƒ—ã‚’æ§‹ç¯‰ã™ã‚‹é€Ÿåº¦ãŒé€Ÿããªã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã‚‰ã«ã€æ—…è¡Œä¸­ã«ãƒ­ãƒœãƒƒãƒˆã‚’ãã®è»¸ã‚’ä¸­å¿ƒã«å›è»¢ã•ã›ã‚‹ã¨ã€ãƒ©ã‚¤ãƒ€ãƒ¼ã¯å®Ÿéš›ã«ã¯éšœå®³ç‰©ãŒãªã„å ´æ‰€ã«ç‰¹å¾´çš„ãªé»’ã„ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’æ®‹ã—</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wf/tn/0y/wftn0yxvutj6keza4jhqngsasai.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ã™ã€‚ãƒãƒƒãƒ—ã‚’ä½œæˆã—ãŸå¾Œã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒãƒƒãƒ—ã‚’ä¿å­˜ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">rosrun map_server map_saver -f map-1</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
äºˆç®—ã®LIDARã§å®Œç’§ãªãƒãƒƒãƒ—ã‚’ä½œæˆã™ã‚‹ã“ã¨ã¯ç¥è©±ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€Photoshopã®LIDARã‚’æ”¯æ´ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">å®Ÿéš›ã«éšœå®³ç‰©ãŒãªã„ãƒãƒƒãƒ—ã‹ã‚‰é»’ã„ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’å‰Šé™¤ã—ã€å£ã‚’é»’ã„ç·š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-k/xv/fo/-kxvfoxyjflij37fvy_ntw2d-ic.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã«åˆã‚ã›ã¾ã™ã€‚ãƒãƒƒãƒ—ã‚’.pgmå½¢å¼ã§ä¿å­˜ã™ã‚‹ã“ã¨ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã§æŠ•ç¨¿ã®æœ€åˆã«ã‚ã£ãŸã‚³ãƒãƒ³ãƒ‰ã‚’ç¹°ã‚Šè¿”ã—ã¾ã™ãŒã€æ–°ã—ã„ã‚«ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€‚1ç•ªç›®ã®ç«¯æœ«ï¼š</font></font><code>rosrun map_server maserver /home/pi/catkin_ws/src/rosbots_description/maps/map-1.pgm 0.05</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2ç•ªç›®ï¼š</font></font><code>roslaunch rosbots_description rviz.launch</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
rvizã®çµæœï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/g1/g9/mj/g1g9mjpl0nwsgfumdmpmrvvem4q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ­ãƒœãƒƒãƒˆãƒ¢ãƒ‡ãƒ«ã®ã‚ˆã†ã«æ–°ã—ã„ãƒãƒƒãƒ—ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸãŒã€ãƒ­ãƒœãƒƒãƒˆã¯ãƒãƒƒãƒ—ã®å¤–ã«ã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã«ã¤ã„ã¦ã¯å¾Œã§èª¬æ˜ã—ã¾ã™ãŒã€ã¨ã‚Šã‚ãˆãšè¦ç´„ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LIDAR RP-LIDAR A1ã‚’ãƒã‚¹ã‚¿ãƒ¼ã™ã‚‹</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LIDARã‚’ä½¿ç”¨ã—ã¦ãƒ«ãƒ¼ãƒ ãƒãƒƒãƒ—ã‚’ä½œæˆã—ã€èª¿æ•´ã—ã¦ã€rvizãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¨ãƒ‡ã‚£ã‚¿ã«ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ«ãƒ¼ãƒ ãƒãƒƒãƒ—</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja471018/index.html">iPhone 11ã‚’å«ã‚€PCã¨ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æ¯”è¼ƒ</a></li>
<li><a href="../ja471020/index.html">35å¹´å‰ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸãƒã‚¤ã‚¯ãƒ­ãƒ—ãƒ­ã‚»ãƒƒã‚µã®ã‚¨ãƒ©ãƒ¼ã‚’è¦‹ã¤ã‘ã‚‹æ–¹æ³•</a></li>
<li><a href="../ja471022/index.html">ç‰©ç†å­¦ã®140å¹´å‰ã®ç§˜å¯†ã‚’æ˜ã‚‰ã‹ã«ã™ã‚‹</a></li>
<li><a href="../ja471024/index.html">åˆ†æï¼šå…ˆç‰©ã¨ã¯ä½•ã‹ã€ãã—ã¦ãã‚Œã‚’ç‚ºæ›¿æŠ•è³‡ã«ã©ã®ã‚ˆã†ã«ä½¿ç”¨ã™ã‚‹ã‹</a></li>
<li><a href="../ja471026/index.html">TypeScript æ±ºã—ã¦ãƒ‘ãƒ¯ãƒ¼</a></li>
<li><a href="../ja471032/index.html">è¦‹ãˆãªã„å†™çœŸ</a></li>
<li><a href="../ja471034/index.html">Pornhub Webé–‹ç™ºè€…ã¸ã®ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼</a></li>
<li><a href="../ja471036/index.html">ç”Ÿæ´»ã—ã€å­¦ã³ã¾ã™ã€‚ãƒ‘ãƒ¼ãƒˆ5.è‡ªå·±æ•™è‚²ï¼šä¸€ç·’ã«ãªã£ã¦</a></li>
<li><a href="../ja471038/index.html">Linuxè¨˜è¿°å­ãƒ•ã‚¡ã‚¤ãƒ«ã¨ä¾‹</a></li>
<li><a href="../ja471040/index.html">[ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯] Reactãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã®PDFãŠã‚ˆã³ePUBãƒãƒ¼ã‚¸ãƒ§ãƒ³</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>