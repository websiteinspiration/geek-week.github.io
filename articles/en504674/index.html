<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🆒 ↕️ 👫 Basis for a large modular SPA on Laravel + Vue + ElementUI with CRUD generator 🔻 🧝🏽 ♟️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In recent years, I managed to work on several large and not very projects using different back-end and front-end frameworks. Faced with various proble...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Basis for a large modular SPA on Laravel + Vue + ElementUI with CRUD generator</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504674/"><img src="https://habrastorage.org/webt/h7/m7/kt/h7m7kt-cpub7kcte0htso38oqio.jpeg" alt="image" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In recent years, I managed to work on several large and not very projects using different back-end and front-end frameworks. Faced with various problems that arose as the application grew. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now I can conclude from which solutions were successful and which were not very successful. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Using the accumulated experience, I set out to collect all the best solutions, in my opinion, and create my own foundation for SPA.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How to create a site on Laravel or what SPA is, I will not tell. </font><font style="vertical-align: inherit;">There is enough such information on the Internet. </font><font style="vertical-align: inherit;">This article is intended for more or less experienced developers, so I will miss some details. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Who can’t wait, at the end of the article is a link to my github repository. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The main technologies were selected by </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laravel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vue.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vuex</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> as this is my main stack. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For quick development, I took the UI Kit - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ElementUI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
 <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the main objective</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To create a foundation for a medium and large project that:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will help to avoid rigid cohesion of modules</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">understandable for a programmer with little experience</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">help avoid code duplication</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will be easy to expand</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reduce project start time</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reduce the time of project support and code navigation</font></font></li>
<li>     </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To make life as easy as possible, not to be confused in the project, you need to properly structure your ego. Initially, the application should be divided into levels of responsibility, such as user interface, database, business logic. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Further, each layer should be divided first by functionality, and then each functional module should be divided according to the selected pattern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inspired by the DDD philosophy, I decided to split the front-end and back-end into semantic modules. But these are not the classic domains that Evans describes. His model is also not perfect. In any application, over time, relationships between components always appear - the same relationships between models. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
He left the models as a separate layer, because they seemed to duplicate the database, with all its connections. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Created a directory at the front</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resources / js / modules</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , in which different modules will be located. Each will have </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">api</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - methods for working with the back-end, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">components</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - all components and pages, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">store</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - storage, and </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">routes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
 <br>
<pre><code class="bash hljs">{moduleName}/<font></font>
│<font></font>
├── routes.js<font></font>
│<font></font>
├── api/<font></font>
│   └── index.js<font></font>
│<font></font>
├── components/<font></font>
│   ├── {ModuleName}List.vue<font></font>
│   ├── {ModuleName}View.vue<font></font>
│   └── {ModuleName}Form.vue<font></font>
│<font></font>
└── store/<font></font>
    ├── store.js<font></font>
    ├── types.js<font></font>
    └── actions.js<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resources / js</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">core</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> folder is created </font><font style="vertical-align: inherit;">, where the main components of the system are located. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are also bootstrap and </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">includes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> folders </font><font style="vertical-align: inherit;">for configuring additional libraries and utilities, respectively. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The project uses dynamic loading of models. </font><font style="vertical-align: inherit;">Namely, in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">core / routes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">core / states,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> we load the corresponding routing and storage files automatically (nothing needs to be registered). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is an example of how store.js were </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loaded</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> from different modules automatically.</font></font><br>
 <br>
<pre><code class="javascript hljs"><span class="hljs-comment">// Load store modules dynamically.</span>
<span class="hljs-keyword">const</span> requireContext = <span class="hljs-built_in">require</span>.context(<span class="hljs-string">'../../modules'</span>, <span class="hljs-literal">true</span>, /store\.js$/) <font></font>
 <font></font>
<span class="hljs-keyword">let</span> modules = requireContext.keys() <font></font>
    .map(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> 
        [file.replace(<span class="hljs-regexp">/(^.\/)|(\.js$)/g</span>, <span class="hljs-string">''</span>), requireContext(file)] <font></font>
    )<font></font>
    .reduce(<span class="hljs-function">(<span class="hljs-params">modules, [path, <span class="hljs-built_in">module</span>]</span>) =&gt;</span> { 
        <span class="hljs-keyword">let</span> name = path.split(<span class="hljs-string">'/'</span>)[<span class="hljs-number">0</span>] 
        <span class="hljs-keyword">return</span> { ...modules, [name]: <span class="hljs-built_in">module</span>.store } <font></font>
    }, {})<font></font>
 <font></font>
modules = {...modules, core} <font></font>
 <font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Vuex.Store({<font></font>
    modules<font></font>
})<font></font>
 </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the backend in the app directory there will be similar modules. </font><font style="vertical-align: inherit;">Each module will contain folders </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controllers, Requests, Resources</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">The file with routes has also been moved here - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">routes_api.php</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
 <br>
<pre><code class="bash hljs">{ModuleName}/<font></font>
│<font></font>
├── routes_api.php<font></font>
│<font></font>
├── Controllers/<font></font>
│   └──{ModuleName}Controller.php<font></font>
│<font></font>
├── Requests/<font></font>
│   └──{ModuleName}Request.php<font></font>
│<font></font>
└── Resources/<font></font>
    └── {ModuleName}Resource.php<font></font>
 </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Other design patterns like events, jobs, polices, etc. will not be included in the modules, as they are used less often and it’s more logical to keep them in a separate layer. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All manipulations with the dynamic loading of the modules are done so that minimal engagement beats between them. This allows you to add and remove modules without consequences. Now you can make the artisan make command to create such a module. With its help, we can quickly fill the project with the necessary entities along with CRUD functionality. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Having executed the command </font></font><code>php artisan make:module {ModuleName}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, we will have all the necessary files, including the model and migrations, for the full CRUD to work. You just have to complete the migration</font></font><code>php artisan migrate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and everything will work. Most likely you will need to add additional fields, so before migration, do not forget to add them to the model, migration, and also output to vue.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/0qKNlrmhgNg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this template, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JWT-Auth</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> technology was used for authentication </font><font style="vertical-align: inherit;">, but it may be redundant and should be remade for Laravel Sanctum. </font><font style="vertical-align: inherit;">In turn, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vue-auth is</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> used on the front-end </font><font style="vertical-align: inherit;">, it makes it easy to manage user authorization and roles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the future, I would like to improve the system. </font><font style="vertical-align: inherit;">Add a global event bus, connect websockets. </font><font style="vertical-align: inherit;">Add tests. </font><font style="vertical-align: inherit;">It is possible to create a role management option in separate branches or create branches with other UI Kit. </font><font style="vertical-align: inherit;">It would be nice to hear recommendations, comments. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Initially, this template was developed for your needs, but now I hope it will be useful for other users. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All code can be viewed in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">my github repository</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en504664/index.html">Smart adding of musical groups to Google Sheets via VK API, Tampermonkey and Telegram bot</a></li>
<li><a href="../en504666/index.html">DEVOXX UK. Kubernetes in production: Blue / Green deployment, autoscaling, and deployment automation. Part 1</a></li>
<li><a href="../en504668/index.html">The digest of interesting materials for the mobile developer # 346 (May 25 - 31)</a></li>
<li><a href="../en504670/index.html">Unified State Exam in Computer Science or Suffering</a></li>
<li><a href="../en504672/index.html">DEVOXX UK. Kubernetes in production: Blue / Green deployment, autoscaling, and deployment automation. Part 2</a></li>
<li><a href="../en504676/index.html">Add a pinch of randomness to your game</a></li>
<li><a href="../en504678/index.html">ITMO Research_ podcast: how to approach the synchronization of AR-content with the show on the scale of the whole stadium</a></li>
<li><a href="../en504680/index.html">Overview of SpaL's NLP Library</a></li>
<li><a href="../en504682/index.html">Nostalgia Post: j2me, Gravity Defied, 64kb</a></li>
<li><a href="../en504686/index.html">How to draw a cat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>