<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïâÔ∏è üõãÔ∏è ü§∂üèº Cr√©er roguelike dans Unity √† partir de z√©ro üéë ‚ôåÔ∏è üíÇüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il n'y a pas beaucoup de tutoriels sur la cr√©ation de roguelike dans Unity, j'ai donc d√©cid√© de l'√©crire. Non pas pour me vanter, mais pour partager d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Cr√©er roguelike dans Unity √† partir de z√©ro</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490828/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad4/093/6ab/ad40936ab0dff25fd3214571faf9aa61.png" alt="image"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il n'y a pas beaucoup de tutoriels sur la cr√©ation de roguelike dans Unity, j'ai donc d√©cid√© de l'√©crire. Non pas pour me vanter, mais pour partager des connaissances avec ceux qui en sont au stade o√π j'√©tais d√©j√† assez longtemps. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remarque: je ne dis pas que c'est la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seule</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fa√ßon de cr√©er un roguelike dans Unity. Il est juste l' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un des</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Probablement pas le meilleur et le plus efficace, j'ai appris par essais et erreurs. Et j'apprendrai certaines choses dans le processus de cr√©ation d'un tutoriel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons que vous </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">connaissiez au moins les bases de Unity</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, par exemple, comment cr√©er un pr√©fabriqu√© ou un script, etc. </font><font style="vertical-align: inherit;">Ne vous attendez pas √† ce que je vous apprenne √† cr√©er des feuilles de sprites, il existe de nombreux tutoriels √† ce sujet. </font><font style="vertical-align: inherit;">Je ne me concentrerai pas sur l'√©tude du moteur, mais sur la fa√ßon de mettre en ≈ìuvre le jeu que nous allons cr√©er ensemble. </font><font style="vertical-align: inherit;">Si vous rencontrez des difficult√©s, rendez-vous dans l'une des superbes communaut√©s de Discord et demandez de l'aide: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unity Developer Community </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Roguelikes</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Alors, commen√ßons!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtape 0 - planification</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui c'est vrai. La premi√®re chose √† cr√©er est un plan. Ce sera bien pour vous de planifier le jeu, et pour moi - de planifier le tutoriel afin qu'apr√®s un certain temps nous ne soyons pas distraits du sujet. Il est facile de se perdre dans les fonctions du jeu, tout comme dans les donjons roguelike. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous √©crirons roguelike. Nous suivrons principalement les sages conseils du d√©veloppeur de Cogmind Josh Ge </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Suivez le lien, lisez l'article ou regardez la vid√©o, puis revenez.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quel est le but de ce tutoriel? Obtenez un solide roguelike de base simple, avec lequel vous pourrez ensuite exp√©rimenter. Il devrait avoir une g√©n√©ration de donjon, un joueur se d√©pla√ßant sur la carte, un brouillard de visibilit√©, des ennemis et des objets. Seuls les plus n√©cessaires. Ainsi, le joueur devrait pouvoir descendre les escaliers sur plusieurs √©tages. disons, par cinq, augmentez votre niveau, am√©liorez et, √† la fin, combattez le boss et battez-le. Ou mourir. En fait, c'est tout.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suivant les conseils de Josh Ge, nous allons construire les fonctions du jeu pour qu'elles nous conduisent au but. </font><font style="vertical-align: inherit;">Nous obtenons donc le cadre roguelike, qui peut √™tre encore √©tendu, ajoutez vos propres puces, cr√©ant un caract√®re unique. </font><font style="vertical-align: inherit;">Ou jetez tout dans le panier, profitez de l'exp√©rience acquise et recommencez √† z√©ro. </font><font style="vertical-align: inherit;">Ce sera g√©nial de toute fa√ßon. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne vous donnerai aucune ressource graphique. </font><font style="vertical-align: inherit;">Dessinez-les vous-m√™me ou utilisez les ensembles de tuiles gratuits, qui peuvent √™tre t√©l√©charg√©s </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou en effectuant une recherche dans Google. </font><font style="vertical-align: inherit;">N'oubliez pas de mentionner les auteurs des graphismes du jeu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, listons toutes les fonctions qui seront dans notre roguelike dans l'ordre de leur impl√©mentation:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">G√©n√©ration de carte de donjon</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le personnage du joueur et son mouvement</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zone de visibilit√©</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ennemis</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rechercher un moyen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Combat, sant√© et mort</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Niveau sup√©rieur du joueur</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Objets (armes et potions)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cheats de la console (pour les tests)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Planchers de donjon</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sauvegarde et chargement</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boss final</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir impl√©ment√© tout cela, nous aurons un solide roguelike et vous am√©liorerez consid√©rablement vos comp√©tences en d√©veloppement de jeux. </font><font style="vertical-align: inherit;">En fait, c'√©tait </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ma</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fa√ßon d'am√©liorer </font><em><font style="vertical-align: inherit;">mes</font></em><font style="vertical-align: inherit;"> comp√©tences: cr√©er du code et impl√©menter des fonctions. </font><font style="vertical-align: inherit;">Par cons√©quent, je suis s√ªr que vous pouvez √©galement g√©rer cela.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtape 1 - Classe MapManager</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est le premier script que nous allons cr√©er et il deviendra l'√©pine dorsale de notre jeu. </font><font style="vertical-align: inherit;">C'est simple, mais contient la majeure partie des informations importantes pour le jeu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, cr√©ez un script .cs appel√© MapManager et ouvrez-le. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supprimez ": MonoBehaviour" car il n'en h√©ritera pas et ne sera attach√© √† aucun GameObject. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supprimez les fonctions D√©marrer () et Mettre √† jour (). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä la fin de la classe MapManager, cr√©ez une nouvelle classe publique appel√©e Tile.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/431/54e/4c2/43154e4c2708a580bc3838b1fbee573b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La classe Tile contiendra toutes les informations d'une seule tuile. </font><font style="vertical-align: inherit;">Jusqu'√† pr√©sent, nous n'avons pas besoin de beaucoup, seulement des positions x et y, ainsi qu'un objet de jeu situ√© √† cette position de la carte.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/405/21e/cd9/40521ecd9e1292e813391181e523b6dc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons donc des informations de base sur les tuiles. </font><font style="vertical-align: inherit;">Cr√©ons une carte √† partir de cette tuile. </font><font style="vertical-align: inherit;">C'est simple, nous n'avons besoin que d'un tableau bidimensionnel d'objets Tile. </font><font style="vertical-align: inherit;">Cela semble compliqu√©, mais il n'y a rien de sp√©cial √† ce sujet. </font><font style="vertical-align: inherit;">Ajoutez simplement la variable Tile [,] √† la classe MapManager:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f44/2e8/806/f442e88061e77cbbb4c1aa904c73bdfd.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voila! </font><font style="vertical-align: inherit;">Nous avons une carte! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, c'est vide. </font><font style="vertical-align: inherit;">Mais ceci est une carte. </font><font style="vertical-align: inherit;">Chaque fois que quelque chose bouge ou change d'√©tat sur la carte, les informations sur cette carte sont mises √† jour. </font><font style="vertical-align: inherit;">Autrement dit, si, par exemple, un joueur essaie de passer √† une nouvelle tuile, la classe v√©rifiera l'adresse de la tuile de destination sur la carte, la pr√©sence de l'ennemi et sa perm√©abilit√©. </font><font style="vertical-align: inherit;">Gr√¢ce √† cela, nous n'avons pas √† v√©rifier des milliers de collisions √† chaque tour, et nous n'avons pas besoin de collisionneurs pour chaque objet de jeu, ce qui facilitera et simplifiera le travail avec le jeu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code r√©sultant ressemble √† ceci:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> UnityEngine;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MapManager</span> <font></font>
{<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tile[,] map; <span class="hljs-comment">// the 2-dimensional map with the information for all the tiles</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Tile</span> { <span class="hljs-comment">//Holds all the information for each tile on the map</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> xPosition; <span class="hljs-comment">// the position on the x axis</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> yPosition; <span class="hljs-comment">// the position on the y axis</span>
    <span class="hljs-keyword">public</span> GameObject baseObject; <span class="hljs-comment">// the map game object attached to that position: a floor, a wall, etc.</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re √©tape est termin√©e, passons au remplissage de la carte. </font><font style="vertical-align: inherit;">Nous allons maintenant commencer √† cr√©er un g√©n√©rateur de donjon.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtape 2 - quelques mots sur la structure des donn√©es</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais avant de commencer, permettez-moi de partager les conseils qui ont surgi gr√¢ce aux commentaires re√ßus apr√®s la publication de la premi√®re partie. Lors de la cr√©ation d'une structure de donn√©es, vous devez penser d√®s le d√©but √† la mani√®re dont vous maintiendrez l'√©tat du jeu. Sinon, plus tard, ce sera beaucoup plus chaotique. L'utilisateur de Discord st33d, le d√©veloppeur de Star Shaped Bagel (vous pouvez jouer √† ce jeu gratuitement </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), a d√©clar√© qu'au d√©but, il avait cr√©√© le jeu, pensant que cela ne sauverait pas du tout les √âtats. Peu √† peu, le jeu a commenc√© √† s'agrandir, et son fan a demand√© un soutien pour la carte enregistr√©e. Mais en raison de la m√©thode choisie pour cr√©er la structure de donn√©es, il √©tait tr√®s difficile de sauvegarder les donn√©es, il n'a donc pas pu le faire.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/82c/b02/858/82cb02858af686ef409ad8a6c0496135.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous apprenons vraiment de nos erreurs. Malgr√© le fait que je mette la partie sauvegarde / chargement √† la fin du tutoriel, je pense √† travers eux depuis le tout d√©but, et je ne les ai pas encore expliqu√©s. Dans cette partie, je vais en parler un peu, mais pour ne pas surcharger les d√©veloppeurs inexp√©riment√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons enregistrer des choses comme un tableau de variables de la classe Tile dans laquelle la carte est stock√©e. Nous enregistrerons toutes ces donn√©es, √† l'exception des variables de la classe GameObject, qui se trouvent √† l'int√©rieur de la classe Tile. Pourquoi? Tout simplement parce que GameObjects ne peut pas √™tre s√©rialis√© avec Unity en donn√©es stock√©es.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, en fait, nous n'avons pas besoin de sauvegarder les donn√©es stock√©es dans GameObjects. Toutes les donn√©es seront stock√©es dans des classes telles que Tile, et plus tard √©galement Player, Enemy, etc. Ensuite, nous aurons GameObjects pour simplifier le calcul de choses telles que la visibilit√© et le mouvement, ainsi que le dessin de sprites sur l'√©cran. Par cons√©quent, dans les classes, il y aura des variables GameObject, mais la valeur de ces variables ne sera pas enregistr√©e et charg√©e. Lors du chargement, nous forcerons √† g√©n√©rer √† nouveau GameObject √† partir des donn√©es enregistr√©es (position, sprite, etc.). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, que devons-nous faire maintenant? Eh bien, ajoutez simplement deux lignes √† la classe Tile existante et une en haut du script. Nous ajoutons d'abord ¬´using System;¬ª au titre du script, puis [Serializable] devant toute la classe et [NonSerialized] juste devant la variable GameObject. Comme √ßa:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bfd/931/aa3/bfd931aa3a4a1b2b7792650cc25cba07.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a2e/178/9d3/a2e1789d3663b1530d64d3d900c7f047.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vous en dirai plus √† ce sujet lorsque nous arriverons √† la partie du didacticiel sur l'enregistrement / le chargement. </font><font style="vertical-align: inherit;">Pour l'instant, laissons tout et continuons.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtape 3 - un peu plus sur la structure des donn√©es</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai obtenu un autre examen de la structure des donn√©es que je souhaite partager ici.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, il existe de nombreuses fa√ßons d'impl√©menter des donn√©es dans un jeu. La premi√®re que j'utilise et qui sera impl√©ment√©e dans ce tutoriel: toutes les donn√©es de tuile sont dans la classe Tile, et toutes sont stock√©es dans un tableau. Cette approche pr√©sente de nombreux avantages: elle est plus facile √† lire, tout ce dont vous avez besoin est au m√™me endroit, les donn√©es sont plus faciles √† manipuler et √† exporter vers un fichier de sauvegarde. Mais du point de vue de la m√©moire, ce n'est pas si efficace. Vous devrez allouer beaucoup de m√©moire aux variables qui ne seront jamais utilis√©es dans le jeu. Par exemple, plus tard, nous mettrons la variable Enemy GameObject dans la classe Tile afin de pouvoir pointer directement de la carte vers le GameObject de l'ennemi se tenant sur cette tuile afin de simplifier tous les calculs li√©s √† la bataille. Mais cela signifie que chaque tuile du jeu disposera d'un espace en m√©moire pour la variable GameObject,m√™me s'il n'y a pas d'ennemi sur cette tuile. S'il y a 10 ennemis sur une carte de 2500 tuiles, alors il y aura 2490 variables GameObject vides mais allou√©es - vous pouvez voir combien de m√©moire est gaspill√©e.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre m√©thode consisterait √† utiliser des structures pour stocker les donn√©es de base des tuiles (par exemple, la position et le type), et toutes les autres donn√©es seraient stock√©es dans hashmap-s, qui ne seraient g√©n√©r√©es que si n√©cessaire. </font><font style="vertical-align: inherit;">Cela √©conomiserait beaucoup de m√©moire, mais le retour sur investissement serait une impl√©mentation l√©g√®rement plus compliqu√©e. </font><font style="vertical-align: inherit;">En fait, ce serait un peu plus avanc√© que je ne le souhaiterais dans ce tutoriel, mais si vous le souhaitez, √† l'avenir, je pourrai √©crire un article plus d√©taill√© √† ce sujet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, si vous souhaitez lire une discussion sur ce sujet, cela peut √™tre fait </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur Reddit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtape 4 - Algorithme de g√©n√©ration de donjon</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, c'est une autre section dans laquelle je parlerai et nous ne commencerons rien √† programmer. Mais cela est important, une planification minutieuse des algorithmes nous permettra d'√©conomiser beaucoup de temps de travail √† l'avenir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe plusieurs fa√ßons de cr√©er un g√©n√©rateur de donjon. Celui que nous allons mettre en ≈ìuvre ensemble n'est pas le meilleur ni le plus efficace ... c'est juste une mani√®re simple et initiale. C'est tr√®s simple, mais les r√©sultats seront assez bons. Le probl√®me principal sera de nombreux couloirs sans issue. Plus tard, si vous le souhaitez, je pourrai publier un autre tutoriel sur de meilleurs algorithmes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En g√©n√©ral, l'algorithme que nous utilisons fonctionne comme suit: disons que nous avons une carte enti√®re remplie de valeurs nulles - un niveau compos√© d'une pierre. </font><font style="vertical-align: inherit;">Au d√©but, nous avons d√©coup√© une pi√®ce au centre. </font><font style="vertical-align: inherit;">De cette pi√®ce, nous traversons le couloir dans une direction, puis ajoutons d'autres couloirs et pi√®ces, en commen√ßant toujours au hasard √† partir d'une pi√®ce ou d'un couloir existant, jusqu'√† ce que nous atteignions le nombre maximal de couloirs / pi√®ces indiqu√© au tout d√©but. </font><font style="vertical-align: inherit;">Ou jusqu'√† ce que l'algorithme puisse trouver un nouvel endroit pour ajouter une nouvelle pi√®ce / couloir, selon la premi√®re √©ventualit√©. </font><font style="vertical-align: inherit;">Et nous obtenons donc un donjon.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D√©crivons donc cela d'une mani√®re plus proche d'un algorithme, √©tape par √©tape. </font><font style="vertical-align: inherit;">Pour plus de commodit√©, j'appellerai chaque d√©tail de la carte (couloir ou pi√®ce) un √©l√©ment afin de ne pas avoir √† dire ¬´pi√®ce / couloir¬ª √† chaque fois.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coupez la pi√®ce au centre de la carte</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S√©lectionnez au hasard l'un des murs</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous traversons le couloir dans ce mur</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S√©lectionnez au hasard l'un des √©l√©ments existants.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S√©lectionnez au hasard l'un des murs de cet √©l√©ment</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si le dernier √©l√©ment s√©lectionn√© est une pi√®ce, nous g√©n√©rons un couloir. </font><font style="vertical-align: inherit;">Si le couloir, choisissez au hasard si l'√©l√©ment suivant sera une pi√®ce ou un autre couloir</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V√©rifiez s'il y a suffisamment d'espace dans la direction s√©lectionn√©e pour cr√©er l'√©l√©ment souhait√©</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S'il y a un lieu, cr√©ez un √©l√©ment, sinon, revenez √† l'√©tape 4</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©p√©tez √† partir de l'√©tape 4</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout. </font><font style="vertical-align: inherit;">Nous obtiendrons une carte simple du donjon, dans laquelle il n'y a que des salles et des couloirs, sans portes et √©l√©ments sp√©ciaux, mais ce sera notre d√©but. </font><font style="vertical-align: inherit;">Plus tard, nous le remplirons de coffres, d'ennemis et de pi√®ges. </font><font style="vertical-align: inherit;">Et vous pouvez m√™me le personnaliser: nous apprendrons √† ajouter les √©l√©ments int√©ressants dont vous avez besoin.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtape 5 - d√©coupez la pi√®ce</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proc√©dez enfin au codage! </font><font style="vertical-align: inherit;">Coupons notre premi√®re chambre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, cr√©ez un nouveau script et appelez-le DungeonGenerator. </font><font style="vertical-align: inherit;">Il h√©ritera de Monobehaviour, vous devrez donc le rattacher √† GameObject plus tard. </font><font style="vertical-align: inherit;">Ensuite, nous devrons d√©clarer plusieurs variables publiques dans la classe afin de pouvoir d√©finir les param√®tres du donjon √† partir de l'inspecteur. </font><font style="vertical-align: inherit;">Ces variables seront la largeur et la hauteur de la carte, la hauteur et la largeur minimales et maximales des pi√®ces, la longueur maximale des couloirs et le nombre d'√©l√©ments qui devraient figurer sur la carte.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/120/331/04d/12033104d1f3fcf270fdc5fd64ffb6bb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous devons initialiser le g√©n√©rateur de donjon. Nous faisons cela pour initialiser les variables qui seront remplies par la g√©n√©ration. Pour l'instant, ce ne sera qu'une carte. Et, et supprimez √©galement les fonctions Start () et Update () g√©n√©r√©es par Unity pour le nouveau script, nous n'en aurons pas besoin.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f92/a8f/e5d/f92a8fe5dc2ea241284fe95b8758c289.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad7/841/44b/ad784144b6aeea6aee3967caedaa37eb.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, nous avons initialis√© la variable de carte de la classe MapManager (que nous avons cr√©√©e √† l'√©tape pr√©c√©dente), en passant la largeur et la hauteur de la carte, d√©finies par les variables ci-dessus comme param√®tres des deux dimensions du tableau. Gr√¢ce √† cela, nous aurons une carte de taille x horizontale (largeur) et de taille y verticale (hauteur), et nous pouvons acc√©der √† n'importe quelle cellule de la carte en entrant MapManager.map [x, y]. Cela sera tr√®s utile lors de la manipulation de la position des objets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons maintenant cr√©er une fonction pour rendre la premi√®re pi√®ce. Nous l'appellerons FirstRoom (). Nous avons fait d'InitializeDungeon () une fonction publique, car il sera lanc√© par un autre script (Game Manager, que nous allons bient√¥t cr√©er; il centralisera la gestion de l'ensemble du processus de lancement du jeu). Nous n'avons pas besoin de scripts externes pour avoir acc√®s √† FirstRoom (), nous ne le rendons donc pas public.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, pour continuer, nous allons cr√©er trois nouvelles classes dans le script MapManager afin que vous puissiez cr√©er une pi√®ce. Il s'agit des classes d'objets, de murs et de positions. La classe Position contiendra les positions x et y afin que nous puissions suivre o√π tout se trouve. Le mur aura une liste de positions, la direction dans laquelle il "regarde" par rapport au centre de la pi√®ce (nord, sud, est ou ouest), la longueur et la pr√©sence d'un nouvel √©l√©ment cr√©√© √† partir de celui-ci. L'√©l√©ment aura une liste de toutes les positions qui le composent, le type de l'√©l√©ment (pi√®ce ou couloir), un tableau de variables de mur, ainsi que sa largeur et sa hauteur.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3b7/abe/924/3b7abe9241bb1442f3224048384263ff.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/938/8bc/8d7/9388bc8d7dd523b45013fa80d918d8a2.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passons maintenant √† la fonction FirstRoom (). </font><font style="vertical-align: inherit;">Revenons au script DungeonGenerator et cr√©ons une fonction juste en dessous d'InitializeDungeon. </font><font style="vertical-align: inherit;">Elle n'aura pas besoin de recevoir de param√®tres, nous allons donc laisser les choses simples (). </font><font style="vertical-align: inherit;">Ensuite, √† l'int√©rieur de la fonction, nous devons d'abord cr√©er et initialiser la variable Room et sa liste de variables Position. </font><font style="vertical-align: inherit;">Nous le faisons comme ceci:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/164/b81/b5d/164b81b5dde06f8e996e22a75bf0b947.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D√©finissons maintenant la taille de la pi√®ce. </font><font style="vertical-align: inherit;">Il recevra une valeur al√©atoire entre la hauteur et la largeur minimales et maximales d√©clar√©es au d√©but du script. </font><font style="vertical-align: inherit;">Bien qu'ils soient vides, car nous n'avons pas d√©fini de valeur pour eux dans l'inspecteur, mais ne vous inqui√©tez pas, nous le ferons bient√¥t. </font><font style="vertical-align: inherit;">Nous d√©finissons des valeurs al√©atoires comme ceci:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d77/bbd/389/d77bbd3896dc4c60d93a9e6b1c006729.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous devons d√©clarer o√π le point de d√©part de la pi√®ce sera situ√©, c'est-√†-dire o√π le point de la pi√®ce 0.0 sera situ√© dans la grille de la carte. Nous voulons le faire commencer au centre de la carte (mi-largeur et mi-hauteur), mais peut-√™tre pas </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exactement</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> au centre. Il pourrait √™tre utile d'ajouter un petit randomiseur pour qu'il se d√©place l√©g√®rement vers la gauche et vers le bas. Par cons√©quent, nous d√©finissons xStartingPoint comme la moiti√© de la largeur de la carte, et yStartingPoint comme la moiti√© de la hauteur de la carte, puis prenons la roomWidth et roomHeight juste donn√©e, nous obtenons une valeur al√©atoire de 0 √† cette largeur / hauteur, et la soustrayons des x et y initiaux. Comme √ßa:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/50f/3f2/f0e/50f3f2f0ecb267d5283dcd4684019708.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8eb/0e7/f2b/8eb0e7f2bff7d3d08b1b0691885e89cd.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, dans la m√™me fonction, nous ajouterons des murs. Nous devons initialiser le tableau des murs qui se trouvent dans la variable de pi√®ce nouvellement cr√©√©e, puis initialiser chaque variable de mur √† l'int√©rieur de ce tableau. Ensuite, initialisez chaque liste de positions, d√©finissez la longueur du mur √† 0 et entrez la direction dans laquelle chaque mur ¬´se penchera¬ª. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une fois le tableau initialis√©, nous bouclons autour de chaque √©l√©ment du tableau dans la boucle for (), initialisons les variables de chaque mur, puis utilisons le commutateur, qui nomme la direction de chaque mur. Il est choisi arbitrairement, il suffit de se rappeler ce qu'il signifiera.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d3a/f8f/9da/d3af8f9da1ee8f317452d52f9f905536.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons maintenant ex√©cuter deux boucles imbriqu√©es imm√©diatement apr√®s avoir plac√© les murs. </font><font style="vertical-align: inherit;">Dans la boucle externe, nous contournons toutes les valeurs y dans la pi√®ce, et dans la boucle imbriqu√©e, toutes les valeurs x. </font><font style="vertical-align: inherit;">De cette fa√ßon, nous v√©rifierons chaque cellule x de la ligne y afin de pouvoir l'impl√©menter.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ee/cb3/695/3eecb3695c59d199fb32064501ce1009.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, la premi√®re chose √† faire est de trouver la valeur r√©elle de la position de la cellule sur l'√©chelle de la carte √† partir de la position de la pi√®ce. </font><font style="vertical-align: inherit;">C'est assez simple: nous avons les points de d√©part x et y. </font><font style="vertical-align: inherit;">Ils seront positionn√©s 0,0 dans la grille de la pi√®ce. </font><font style="vertical-align: inherit;">Ensuite, si nous devons obtenir la valeur r√©elle de x, y √† partir de n'importe quel x, y local, nous ajoutons les x et y locaux avec les positions initiales x et y. </font><font style="vertical-align: inherit;">Ensuite, nous enregistrons ces valeurs r√©elles x, y dans la variable Position (√† partir d'une classe pr√©c√©demment cr√©√©e), puis les ajoutons √† la liste &lt;&gt; des positions de la pi√®ce.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b2/cc4/4a0/0b2cc44a0ae9953a3d49ac0b3c01a6c9.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'√©tape suivante consiste √† ajouter ces informations √† la carte. </font><font style="vertical-align: inherit;">Avant de modifier les valeurs, n'oubliez pas d'initialiser la variable Tile.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1aa/fe5/a43/1aafe5a43a8c30f2c343472ad7f157ca.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons maintenant modifier la classe Tile. </font><font style="vertical-align: inherit;">Passons au script MapManager et ajoutons une ligne √† la d√©finition de la classe Tile: ¬´type de cha√Æne publique;¬ª. </font><font style="vertical-align: inherit;">Cela nous permettra d'ajouter une classe de tuiles en d√©clarant que la tuile en x, y est un mur, un sol ou autre chose. </font><font style="vertical-align: inherit;">Ensuite, revenons au cycle dans lequel nous avons fait le travail et ajoutons une grande construction if-else, qui nous permettra non seulement de d√©terminer chaque mur, sa longueur et toutes les positions dans ce mur, mais aussi de sp√©cifier sur la carte globale ce qu'est une tuile sp√©cifique - un mur ou le sexe.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7c3/276/28c/7c327628cea73dafe9319a01ac10b72b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et nous avons d√©j√† fait quelque chose. Si la variable y (contr√¥le de la variable dans la boucle externe) est 0, la tuile appartient √† la rang√©e de cellules la plus basse de la pi√®ce, c'est-√†-dire qu'il s'agit du mur sud. Si x (contr√¥le de la variable de boucle int√©rieure) est √©gal √† 0, alors la tuile appartient √† la colonne de cellules la plus √† gauche, c'est-√†-dire qu'il s'agit du mur ouest. Et si c'est sur la ligne la plus haute, alors il appartient au mur nord, et tout √† droite - le mur est. Nous soustrayons 1 des variables roomWidth et roomHeight, car ces valeurs ont √©t√© calcul√©es √† partir de 1 et les variables x et y du cycle ont commenc√© √† 0, nous devons donc tenir compte de cette diff√©rence. Et toutes les cellules qui ne remplissent pas les conditions ne sont pas des murs, c'est-√†-dire qu'elles sont le sol.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/258/4a6/2c9/2584a62c91fc46205f903cb4283bd1ce.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Super, nous avons presque fini avec la premi√®re chambre. </font><font style="vertical-align: inherit;">Il est presque pr√™t, il suffit de mettre les derni√®res valeurs dans la variable Feature que nous avons cr√©√©e. </font><font style="vertical-align: inherit;">Nous quittons la boucle et terminons la fonction comme ceci:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2bd/aaf/a47/2bdaafa47adb2694f360eea850341920.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien! </font><font style="vertical-align: inherit;">Nous avons une chambre! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais comment comprendre que tout fonctionne? </font><font style="vertical-align: inherit;">Besoin de tester. </font><font style="vertical-align: inherit;">Mais comment tester? </font><font style="vertical-align: inherit;">Nous pouvons passer du temps et ajouter des actifs pour cela, mais ce sera une perte de temps et nous distraira √©galement de terminer l'algorithme. </font><font style="vertical-align: inherit;">Hmm, mais cela peut √™tre fait en utilisant ASCII! </font><font style="vertical-align: inherit;">Oui, bonne id√©e! </font><font style="vertical-align: inherit;">ASCII est un moyen simple et peu co√ªteux de dessiner une carte afin qu'elle puisse √™tre test√©e. </font><font style="vertical-align: inherit;">De plus, si vous le souhaitez, vous pouvez ignorer la partie avec des sprites et des effets visuels, que nous √©tudierons plus tard, et cr√©er votre jeu entier en ASCII. </font><font style="vertical-align: inherit;">Voyons donc comment cela se fait.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtape 6 - dessiner la premi√®re salle</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re chose √† consid√©rer lors de la mise en ≈ìuvre d'une carte ASCII est la police √† choisir. Le principal facteur √† consid√©rer lors du choix d'une police pour ASCII est de savoir si elle est proportionnelle (largeur variable) ou monospace (largeur fixe). Nous avons besoin d'une police monospace pour que les cartes aient l'air n√©cessaires (voir l'exemple ci-dessous). Par d√©faut, tout nouveau projet Unity utilise la police Arial, et il n'est pas √† espacement fixe, nous devons donc en trouver un autre. Windows 10 a g√©n√©ralement des polices √† espacement fixe Courier New, Consolas et Lucida Console. Choisissez l'un de ces trois ou t√©l√©chargez-en un autre √† l'endroit dont vous avez besoin et placez-le dans le dossier Polices √† l'int√©rieur du dossier Actifs du projet.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ff4/beb/f23/ff4bebf23a4523f4dd348524ac6b0a9f.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pr√©parons la sc√®ne pour la sortie ASCII. Pour commencer, rendez la couleur d'arri√®re-plan de la cam√©ra principale de la sc√®ne noire. Ensuite, nous ajoutons l'objet Canvas √† la sc√®ne et y ajoutons l'objet Text. D√©finissez la transformation du rectangle de texte au milieu du centre et √† la position 0,0,0. D√©finissez l'objet Texte de sorte qu'il utilise la police que vous avez s√©lectionn√©e et la couleur blanche, d√©bordement horizontal et vertical (d√©bordement horizontal / vertical), s√©lectionnez D√©bordement et centrez l'alignement vertical et horizontal. Renommez ensuite l'objet Text en ¬´ASCIITest¬ª ou quelque chose de similaire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Revenons maintenant au code. Dans le script DungeonGenerator, cr√©ez une nouvelle fonction appel√©e DrawMap. Nous voulons qu'elle obtienne un param√®tre indiquant quelle carte g√©n√©rer - ASCII ou sprite, alors cr√©ez un param√®tre bool√©en et appelez-le isCASII.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/387/67a/957/38767a9575270115821d6be36ce97293.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous v√©rifierons si la carte rendue est ASCII. </font><font style="vertical-align: inherit;">Si oui (pour l'instant, nous ne consid√©rerons que ce cas), alors nous rechercherons un objet texte dans la sc√®ne, passerons le nom qui lui est donn√© en param√®tre et obtiendrons son composant Text. </font><font style="vertical-align: inherit;">Mais d'abord, nous devons dire √† Unity que nous voulons travailler avec l'interface utilisateur. </font><font style="vertical-align: inherit;">Ajoutez la ligne utilisant UnityEngine.UI √† l'en-t√™te de script:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/17c/e18/c24/17ce18c24ec7c286b4390159dc98dab1.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien. </font><font style="vertical-align: inherit;">Nous pouvons maintenant obtenir le composant Text de l'objet. </font><font style="vertical-align: inherit;">La carte sera une √©norme ligne qui se refl√©tera sur l'√©cran sous forme de texte. </font><font style="vertical-align: inherit;">C'est pourquoi il est si facile √† installer. </font><font style="vertical-align: inherit;">Cr√©ons donc une cha√Æne et initialisons-la avec la valeur "".</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6d2/7f2/92c/6d27f292c1f519a7b351d7b8d80a8f84.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien. Ainsi, √† chaque appel de DrawMap, nous devrons indiquer si la carte est un ASCII. Si c'est le cas (et nous l'aurons toujours de cette fa√ßon, nous travaillerons avec d'autres plus tard), alors la fonction cherchera la hi√©rarchie des sc√®nes √† la recherche d'un objet de jeu appel√© "ASCIITest". Si c'est le cas, il recevra son composant Texte et l'enregistrera dans la variable d'√©cran, dans laquelle nous pourrons ensuite facilement √©crire la carte. Il cr√©e ensuite une cha√Æne dont la valeur est initialement vide. Nous remplirons cette ligne avec notre carte marqu√©e de symboles.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Habituellement, nous parcourons la carte en boucle, commen√ßant √† 0 et allant jusqu'√† la fin de sa longueur. </font><font style="vertical-align: inherit;">Mais pour remplir la ligne, nous commen√ßons par la premi√®re ligne de texte, c'est-√†-dire la ligne la plus haute. </font><font style="vertical-align: inherit;">Par cons√©quent, sur l'axe y, nous devons nous d√©placer dans une boucle dans la direction oppos√©e, allant de la fin au d√©but du tableau. </font><font style="vertical-align: inherit;">Mais l'axe des x du tableau va de gauche √† droite, tout comme le texte, donc cela nous convient.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/536/019/f47/536019f479ea1af260d551f342ed46aa.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cycle, nous v√©rifions chaque cellule de la carte pour d√©couvrir ce qu'elle contient. </font><font style="vertical-align: inherit;">Jusqu'√† pr√©sent, nous avons seulement initialis√© les cellules en tant que nouveau Tile (), que nous avons d√©coup√© pour la pi√®ce, donc tout le monde retournera une erreur lors de la tentative d'acc√®s. </font><font style="vertical-align: inherit;">Nous devons donc d'abord v√©rifier </font><font style="vertical-align: inherit;">s'il </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y a</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> quelque chose dans cette cellule, et nous le faisons en v√©rifiant la cellule pour null. </font><font style="vertical-align: inherit;">S'il n'est pas nul, alors nous continuons √† travailler, mais s'il est nul, alors il n'y a rien √† l'int√©rieur, nous pouvons donc ajouter de l'espace vide √† la carte.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3f3/f56/5d9/3f3f565d9e9f7886c3baa600cd1ab99f.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, pour chaque cellule non vide, nous v√©rifions son type, puis ajoutons le symbole correspondant. </font><font style="vertical-align: inherit;">Nous voulons que les murs soient indiqu√©s par le symbole "#" et les sols par le ".". </font><font style="vertical-align: inherit;">Et tandis que nous n'avons que ces deux types. </font><font style="vertical-align: inherit;">Plus tard, lorsque nous ajouterons le joueur, les monstres et les pi√®ges, tout sera un peu plus compliqu√©.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f9f/a24/ef0/f9fa24ef002860f5331479f9ac07a6e8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, nous devons effectuer des sauts de ligne lorsque nous atteignons la fin de la ligne du tableau, de sorte que les cellules ayant la m√™me position x se trouvent directement les unes sous les autres. </font><font style="vertical-align: inherit;">Nous v√©rifierons √† chaque it√©ration de la boucle si la cellule est la derni√®re de la ligne, puis ajouterons un saut de ligne avec le caract√®re sp√©cial "\ n".</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c14/7b8/1eb/c147b81eb1f4efa01bafdfa8a4aa092d.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout. </font><font style="vertical-align: inherit;">Ensuite, nous quittons la boucle pour pouvoir ajouter cette ligne une fois termin√©e √† l'objet texte dans la sc√®ne.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/20f/8bb/f4d/20f8bbf4d1c8e5b59afc3163a97d57bb.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fcb/83f/a7f/fcb83fa7f923ec53e33696bb8962a1d9.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes nos f√©licitations! Vous avez termin√© le script qui cr√©e la salle et l'affiche √† l'√©cran. Il ne nous reste plus qu'√† mettre ces lignes en action. Nous n'utilisons pas Start () dans le script DungeonGenerator, car nous voulons avoir un script s√©par√© pour contr√¥ler tout ce qui est effectu√© au d√©but du jeu, y compris la g√©n√©ration de cartes, mais aussi les param√®tres du joueur, les ennemis, etc. Par cons√©quent, cet autre script contiendra la fonction Start () et, si n√©cessaire, appellera les fonctions de notre script. Le script DungeonGenerator a une fonction Initialize, qui est publique, et FirstRoom et DrawMap ne sont pas publics. Initialiser initialise simplement les variables pour configurer le processus de g√©n√©ration de donjon, nous avons donc besoin d'une autre fonction qui appelle le processus de g√©n√©ration, qui doit √™tre public afin qu'il puisse √™tre appel√© √† partir d'autres scripts.Pour l'instant, elle n'appellera que la fonction FirstRoom (), puis la fonction DrawMap (), en lui passant une valeur vraie pour qu'elle dessine une carte ASCII. Oh, ou pas, c'est encore mieux - cr√©ons une variable publique isASCII, qui peut √™tre incluse dans l'inspecteur, et passons simplement cette variable comme param√®tre √† la fonction. Bien.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c58/288/502/c58288502f107440def4f803d602662b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cr√©ons maintenant un script GameManager. </font><font style="vertical-align: inherit;">Ce sera le script m√™me qui contr√¥lera tous les √©l√©ments de haut niveau du jeu, par exemple, la cr√©ation d'une carte et le d√©roulement des mouvements. </font><font style="vertical-align: inherit;">Supprimons la fonction Update (), ajoutons une variable de type DungeonGenerator appel√©e dungeonGenerator et cr√©ons une instance de cette variable dans la fonction Start ().</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e5b/8da/424/e5b8da4243c91f887c08213b9ec14953.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cela, nous appelons simplement les fonctions InitializeDungeon () et GenerateDungeon () √† partir de dungeonGenerator, </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans cet ordre</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ceci est important - vous devez d'abord initialiser les variables, et seulement apr√®s cela commencer √† construire sur leur base.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/158/7e6/781/1587e6781595d0ee6661aea7898aa6e4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur cette partie avec le code est termin√©. </font><font style="vertical-align: inherit;">Nous devons cr√©er un objet de jeu vide dans le panneau de hi√©rarchie, le renommer en GameManager et y attacher les scripts GameManager et DungeonGenerator. </font><font style="vertical-align: inherit;">Et puis d√©finissez les valeurs du g√©n√©rateur de donjon dans l'inspecteur. </font><font style="vertical-align: inherit;">Vous pouvez essayer diff√©rents sch√©mas pour le g√©n√©rateur, et je me suis install√© sur ceci:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a11/41f/495/a1141f4953a6fdeac32cc978ac4a0b05.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, cliquez simplement sur jouer et regardez la magie! </font><font style="vertical-align: inherit;">Vous devriez voir quelque chose de similaire sur l'√©cran du jeu:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad4/093/6ab/ad40936ab0dff25fd3214571faf9aa61.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√©licitations, nous avons maintenant une chambre! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je voulais que nous y mettions le personnage du joueur et le fassions bouger, mais le message √©tait d√©j√† assez long. </font><font style="vertical-align: inherit;">Par cons√©quent, dans la partie suivante, nous pouvons proc√©der directement √† la mise en ≈ìuvre du reste de l'algorithme du donjon, ou nous pouvons y placer le joueur et lui apprendre √† se d√©placer. </font><font style="vertical-align: inherit;">Votez ce que vous pr√©f√©rez dans les commentaires de l'article original. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MapManager.cs:</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System; <span class="hljs-comment">// So the script can use the serialization commands</span>
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> UnityEngine;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MapManager</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tile[,] map; <span class="hljs-comment">// the 2-dimensional map with the information for all the tiles</span><font></font>
}<font></font>
<font></font>
[<span class="hljs-meta">Serializable</span>] <span class="hljs-comment">// Makes the class serializable so it can be saved out to a file</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Tile</span> { <span class="hljs-comment">// Holds all the information for each tile on the map</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> xPosition; <span class="hljs-comment">// the position on the x axis</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> yPosition; <span class="hljs-comment">// the position on the y axis</span>
    [<span class="hljs-meta">NonSerialized</span>]
    <span class="hljs-keyword">public</span> GameObject baseObject; <span class="hljs-comment">// the map game object attached to that position: a floor, a wall, etc.</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> type; <span class="hljs-comment">// The type of the tile, if it is wall, floor, etc</span><font></font>
}<font></font>
<font></font>
[<span class="hljs-meta">Serializable</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Position</span> { <span class="hljs-comment">//A class that saves the position of any cell</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> x;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> y;<font></font>
}<font></font>
<font></font>
[<span class="hljs-meta">Serializable</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Wall</span> { <span class="hljs-comment">// A class for saving the wall information, for the dungeon generation algorithm</span>
    <span class="hljs-keyword">public</span> List&lt;Position&gt; positions;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> direction;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> length;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> hasFeature = <span class="hljs-literal">false</span>;<font></font>
}<font></font>
<font></font>
[<span class="hljs-meta">Serializable</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Feature</span> { <span class="hljs-comment">// A class for saving the feature (corridor or room) information, for the dungeon generation algorithm</span>
    <span class="hljs-keyword">public</span> List&lt;Position&gt; positions;
    <span class="hljs-keyword">public</span> Wall[] walls;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> type;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> width;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> height;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DungeonGenerator.cs:</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> UnityEngine;
<span class="hljs-keyword">using</span> UnityEngine.UI;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DungeonGenerator</span> : <span class="hljs-title">MonoBehaviour</span><font></font>
{<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> mapWidth;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> mapHeight;<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> widthMinRoom;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> widthMaxRoom;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> heightMinRoom;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> heightMaxRoom;<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> maxCorridorLength;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> maxFeatures;<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> isASCII;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">InitializeDungeon</span>(<span class="hljs-params"></span>)</span> {<font></font>
        MapManager.map = <span class="hljs-keyword">new</span> Tile[mapWidth, mapHeight];<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">GenerateDungeon</span>(<span class="hljs-params"></span>)</span> {<font></font>
        FirstRoom();<font></font>
        DrawMap(isASCII);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FirstRoom</span>(<span class="hljs-params"></span>)</span> {<font></font>
        Feature room = <span class="hljs-keyword">new</span> Feature();<font></font>
        room.positions = <span class="hljs-keyword">new</span> List&lt;Position&gt;();<font></font>
<font></font>
        <span class="hljs-keyword">int</span> roomWidth = Random.Range(widthMinRoom, widthMaxRoom);
        <span class="hljs-keyword">int</span> roomHeight = Random.Range(heightMinRoom, heightMaxRoom);<font></font>
<font></font>
        <span class="hljs-keyword">int</span> xStartingPoint = mapWidth / <span class="hljs-number">2</span>;
        <span class="hljs-keyword">int</span> yStartingPoint = mapHeight / <span class="hljs-number">2</span>;<font></font>
<font></font>
        xStartingPoint -= Random.Range(<span class="hljs-number">0</span>, roomWidth);<font></font>
        yStartingPoint -= Random.Range(<span class="hljs-number">0</span>, roomHeight);<font></font>
<font></font>
        room.walls = <span class="hljs-keyword">new</span> Wall[<span class="hljs-number">4</span>];<font></font>
<font></font>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; room.walls.Length; i++) {<font></font>
            room.walls[i] = <span class="hljs-keyword">new</span> Wall();<font></font>
            room.walls[i].positions = <span class="hljs-keyword">new</span> List&lt;Position&gt;();<font></font>
            room.walls[i].length = <span class="hljs-number">0</span>;<font></font>
<font></font>
            <span class="hljs-keyword">switch</span> (i) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<font></font>
                    room.walls[i].direction = <span class="hljs-string">"South"</span>;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<font></font>
                    room.walls[i].direction = <span class="hljs-string">"North"</span>;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<font></font>
                    room.walls[i].direction = <span class="hljs-string">"West"</span>;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<font></font>
                    room.walls[i].direction = <span class="hljs-string">"East"</span>;
                    <span class="hljs-keyword">break</span>;<font></font>
            }<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> y = <span class="hljs-number">0</span>; y &lt; roomHeight; y++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>; x &lt; roomWidth; x++) {<font></font>
                Position position = <span class="hljs-keyword">new</span> Position();<font></font>
                position.x = xStartingPoint + x;<font></font>
                position.y = yStartingPoint + y;<font></font>
<font></font>
                room.positions.Add(position);<font></font>
<font></font>
                MapManager.map[position.x, position.y] = <span class="hljs-keyword">new</span> Tile();<font></font>
                MapManager.map[position.x, position.y].xPosition = position.x;<font></font>
                MapManager.map[position.x, position.y].yPosition = position.y;<font></font>
<font></font>
                <span class="hljs-keyword">if</span> (y == <span class="hljs-number">0</span>) {<font></font>
                    room.walls[<span class="hljs-number">0</span>].positions.Add(position);<font></font>
                    room.walls[<span class="hljs-number">0</span>].length++;<font></font>
                    MapManager.map[position.x, position.y].type = <span class="hljs-string">"Wall"</span>;<font></font>
                }<font></font>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (y == (roomHeight - <span class="hljs-number">1</span>)) {<font></font>
                    room.walls[<span class="hljs-number">1</span>].positions.Add(position);<font></font>
                    room.walls[<span class="hljs-number">1</span>].length++;<font></font>
                    MapManager.map[position.x, position.y].type = <span class="hljs-string">"Wall"</span>;<font></font>
                }<font></font>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x == <span class="hljs-number">0</span>) {<font></font>
                    room.walls[<span class="hljs-number">2</span>].positions.Add(position);<font></font>
                    room.walls[<span class="hljs-number">2</span>].length++;<font></font>
                    MapManager.map[position.x, position.y].type = <span class="hljs-string">"Wall"</span>;<font></font>
                }<font></font>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x == (roomWidth - <span class="hljs-number">1</span>)) {<font></font>
                    room.walls[<span class="hljs-number">3</span>].positions.Add(position);<font></font>
                    room.walls[<span class="hljs-number">3</span>].length++;<font></font>
                    MapManager.map[position.x, position.y].type = <span class="hljs-string">"Wall"</span>;<font></font>
                }<font></font>
                <span class="hljs-keyword">else</span> {<font></font>
                    MapManager.map[position.x, position.y].type = <span class="hljs-string">"Floor"</span>;<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
<font></font>
        room.width = roomWidth;<font></font>
        room.height = roomHeight;<font></font>
        room.type = <span class="hljs-string">"Room"</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DrawMap</span>(<span class="hljs-params"><span class="hljs-keyword">bool</span> isASCII</span>)</span> {
        <span class="hljs-keyword">if</span> (isASCII) {<font></font>
            Text screen = GameObject.Find(<span class="hljs-string">"ASCIITest"</span>).GetComponent&lt;Text&gt;();<font></font>
<font></font>
            <span class="hljs-keyword">string</span> asciiMap = <span class="hljs-string">""</span>;<font></font>
<font></font>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> y = (mapHeight - <span class="hljs-number">1</span>); y &gt;= <span class="hljs-number">0</span>; y--) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>; x &lt; mapWidth; x++) {
                    <span class="hljs-keyword">if</span> (MapManager.map[x,y] != <span class="hljs-literal">null</span>) {
                        <span class="hljs-keyword">switch</span> (MapManager.map[x, y].type) {
                            <span class="hljs-keyword">case</span> <span class="hljs-string">"Wall"</span>:<font></font>
                                asciiMap += <span class="hljs-string">"#"</span>;
                                <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">case</span> <span class="hljs-string">"Floor"</span>:<font></font>
                                asciiMap += <span class="hljs-string">"."</span>;
                                <span class="hljs-keyword">break</span>;<font></font>
                        }<font></font>
                    } <span class="hljs-keyword">else</span> {<font></font>
                        asciiMap += <span class="hljs-string">" "</span>;<font></font>
                    }<font></font>
<font></font>
                    <span class="hljs-keyword">if</span> (x == (mapWidth - <span class="hljs-number">1</span>)) {<font></font>
                        asciiMap += <span class="hljs-string">"\n"</span>;<font></font>
                    }<font></font>
                }<font></font>
            }<font></font>
<font></font>
            screen.text = asciiMap;<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameManager.cs:</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> UnityEngine;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">GameManager</span> : <span class="hljs-title">MonoBehaviour</span><font></font>
{<font></font>
    DungeonGenerator dungeonGenerator;<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span> {<font></font>
        dungeonGenerator = GetComponent&lt;DungeonGenerator&gt;();<font></font>
<font></font>
        dungeonGenerator.InitializeDungeon();<font></font>
        dungeonGenerator.GenerateDungeon();<font></font>
    }<font></font>
}</code></pre></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr490808/index.html">Math√©matiques en astronautique: moteur de d√©tonation rotationnelle</a></li>
<li><a href="../fr490812/index.html">Exp√©rience de soumission de certification professionnelle de printemps 5</a></li>
<li><a href="../fr490816/index.html">Comment les sites de commerce √©lectronique r√©sistent-ils aux botnets AuthBots?</a></li>
<li><a href="../fr490820/index.html">Tous les Habr dans une seule base</a></li>
<li><a href="../fr490826/index.html">La source de l'efficacit√© de la production</a></li>
<li><a href="../fr490830/index.html">Gestion des mots de passe dans Zimbra Collaboration Suite Open-Source Edition</a></li>
<li><a href="../fr490832/index.html">Marquage des chaussures: en mettant en circulation 2 millions de codes de marquage ¬´1C¬ª + ¬´Honest Sign¬ª</a></li>
<li><a href="../fr490836/index.html">Comment ouvrir des commentaires et ne pas se noyer dans le spam</a></li>
<li><a href="../fr490838/index.html">Le WiFi 6 est l√†: ce que le march√© propose et pourquoi avons-nous besoin de cette technologie</a></li>
<li><a href="../fr490840/index.html">La planification des ressources. Partie 4.1. Avant de faire un plan de ressources</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>