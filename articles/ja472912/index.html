<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ•´ğŸ¼ ğŸ›¸ ğŸ‘©ğŸ¼â€âš–ï¸ äººé–“ç”¨ã®ClickHouseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€ã¾ãŸã¯Alien Technology ğŸ¦ ğŸˆ‚ï¸ ğŸ—</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ICDã®æƒ…å ±æŠ€è¡“ç·å±€ã®ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒ“ã‚¹ãƒãƒ£ãƒãƒ«èƒ½åŠ›ã‚»ãƒ³ã‚¿ãƒ¼ã®è²¬ä»»è€…ã§ã‚ã‚‹ã‚¢ãƒ¬ã‚¯ã‚»ã‚¤ãƒªã‚ºãƒãƒ•
 
 
 
 ELKã‚¹ã‚¿ãƒƒã‚¯ï¼ˆElasticSearchã€Logstashã€Kibanaï¼‰ã®ä»£ã‚ã‚Šã¨ã—ã¦ã€ãƒ­ã‚°ã®ãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã¨ã—ã¦ã®ClickHouseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½¿ç”¨ã«é–¢ã™ã‚‹èª¿æŸ»ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>äººé–“ç”¨ã®ClickHouseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€ã¾ãŸã¯Alien Technology</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mkb/blog/472912/"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ICDã®æƒ…å ±æŠ€è¡“ç·å±€ã®ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒ“ã‚¹ãƒãƒ£ãƒãƒ«èƒ½åŠ›ã‚»ãƒ³ã‚¿ãƒ¼ã®è²¬ä»»è€…ã§ã‚ã‚‹ã‚¢ãƒ¬ã‚¯ã‚»ã‚¤ãƒªã‚ºãƒãƒ•</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/bs/gu/k0/bsguk03an99lspkpmtkoks2bkvg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ELKã‚¹ã‚¿ãƒƒã‚¯ï¼ˆElasticSearchã€Logstashã€Kibanaï¼‰ã®ä»£ã‚ã‚Šã¨ã—ã¦ã€ãƒ­ã‚°ã®ãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã¨ã—ã¦ã®ClickHouseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½¿ç”¨ã«é–¢ã™ã‚‹èª¿æŸ»ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®è¨˜äº‹ã§ã¯ã€ClickHouseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã—ãŸçµŒé¨“ã¨ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆé‹ç”¨ã®äºˆå‚™çš„ãªçµæœã«ã¤ã„ã¦ãŠè©±ã—ã¾ã™ã€‚çµæœãŒå°è±¡çš„ã§ã‚ã£ãŸã“ã¨ã¯ã™ãã«æ³¨ç›®ã•ã‚Œã‚‹ã¹ãã§ã™ã€‚</font></font><br>
<br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/uy/mc/ip/uymcipeis_jm2piqsaqdjmu9_l8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹æˆæ–¹æ³•ã¨ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹æˆè¦ç´ ã«ã¤ã„ã¦è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚ã—ã‹ã—ã€ä»Šç§ã¯ã“ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å…¨ä½“ã«ã¤ã„ã¦ã€ãã—ã¦ãªãœã‚ãªãŸãŒãã‚Œã«æ³¨æ„ã‚’æ‰•ã†ã¹ããªã®ã‹ã«ã¤ã„ã¦å°‘ã—ãŠè©±ã—ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ ClickHouseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯ã€Yandexã®é«˜æ€§èƒ½åˆ†æã‚«ãƒ©ãƒ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã™ã€‚ã“ã‚Œã¯Yandexã‚µãƒ¼ãƒ“ã‚¹ã§ä½¿ç”¨ã•ã‚Œã€æœ€åˆã¯Yandex.Metricaã®ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã§ã™ã€‚ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‚·ã‚¹ãƒ†ãƒ ã¯ç„¡æ–™ã§ã™ã€‚é–‹ç™ºè€…ã®è¦–ç‚¹ã‹ã‚‰è¦‹ã‚‹ã¨ã€è†¨å¤§ãªé‡ã®ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã™ã‚‹ãŸã‚ã€ã©ã®ã‚ˆã†ã«å®Ÿè£…ã—ãŸã®ã‹å¸¸ã«ç–‘å•ã«æ€ã£ã¦ã„ã¾ã—ãŸã€‚ãã—ã¦Metricaã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è‡ªä½“ã¯éå¸¸ã«æŸ”è»Ÿã§é«˜é€Ÿã§ã™ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆã‚ã¦çŸ¥ã£ãŸã¨ãã®å°è±¡ï¼šã€Œã‚„ã£ã¨ã€ã‚„ã£ã¨ï¼ ã€Œäººã®ãŸã‚ã«ã€ä½œã‚‰ã‚ŒãŸï¼ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ã‚»ã‚¹ã‹ã‚‰å§‹ã¾ã‚Šã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®é€ä¿¡ã§çµ‚äº†ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚¨ãƒ³ãƒˆãƒªã—ãã„å€¤ã¯éå¸¸ã«ä½ããªã£ã¦ã„ã¾ã™ã€‚ç†Ÿç·´ã—ãŸå¹³å‡çš„ãªé–‹ç™ºè€…ã§ã•ãˆã€ã“ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ•°åˆ†ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ä½¿ç”¨ã‚’é–‹å§‹ã§ãã¾ã™ã€‚ã™ã¹ã¦ãŒæ˜ç¢ºã«æ©Ÿèƒ½ã—ã¾ã™ã€‚ Linuxã‚’åˆã‚ã¦ä½¿ç”¨ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã‚‚ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ã™ã°ã‚„ãå®Ÿè¡Œã—ã¦ç°¡å˜ãªæ“ä½œã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚ä»¥å‰ã€Big Dataã€Hadoopã€Google BigTableã€HDFSã¨ã„ã†è¨€è‘‰ãŒã‚ã£ãŸã¨ãã€é€šå¸¸ã®é–‹ç™ºè€…ã¯ã€æ•°ãƒ†ãƒ©ãƒã‚¤ãƒˆã€ãƒšã‚¿ãƒã‚¤ãƒˆã«ã¤ã„ã¦è©±ã—ã¦ã„ã¦ã€ä¸€éƒ¨ã®è¶…äººãŒã“ã‚Œã‚‰ã®ã‚·ã‚¹ãƒ†ãƒ ã®è¨­å®šã¨é–‹ç™ºã«é–¢ä¸ã—ã¦ã„ãŸã¨è€ƒãˆã¦ã„ã¾ã—ãŸãŒã€ClickHouseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç™»å ´ã«ã‚ˆã‚Šã€ã“ã‚Œã¾ã§é”æˆã§ããªã‹ã£ãŸã‚¿ã‚¹ã‚¯ã®ç¯„å›²ã‚’è§£æ±ºã§ãã‚‹ã€ã‚·ãƒ³ãƒ—ãƒ«ã§ç†è§£å¯èƒ½ãªãƒ„ãƒ¼ãƒ«ã€‚ã‹ãªã‚Šæ™®é€šã®è»Š1å°ã¨å–ã‚Šä»˜ã‘ã«5åˆ†ã‹ã‹ã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šã€MySqlãªã©ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å–å¾—ã—ã¾ã—ãŸãŒã€ä¿å­˜ã™ã‚‹ã®ã¯æ•°åå„„ä»¶ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã¿ã§ã™ã€‚ãªã‚“ã‚‰ã‹ã®SQLã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒã‚¤ã‚¶ã€‚ãã‚Œã¯ã¾ã‚‹ã§äººã€…ãŒã‚¨ã‚¤ãƒªã‚¢ãƒ³ã®æ­¦å™¨ã‚’ä¸ãˆã‚‰ã‚ŒãŸã‹ã®ã‚ˆã†ã§ã™ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ­ã‚°åé›†ã‚·ã‚¹ãƒ†ãƒ ã«ã¤ã„ã¦</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æƒ…å ±ã‚’åé›†ã™ã‚‹ãŸã‚ã«ã€æ¨™æº–å½¢å¼ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®IISãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½¿ç”¨ã•ã‚Œã¾ã™ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°ã®è§£æã‚‚è¡Œã£ã¦ã„ã¾ã™ãŒã€ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆæ“ä½œã®æ®µéšã§ã®ä¸»ãªç›®çš„ã¯IISãƒ­ã‚°ã‚’åé›†ã™ã‚‹ã“ã¨ã§ã™ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã¾ã–ã¾ãªç†ç”±ã«ã‚ˆã‚Šã€ELKã‚¹ã‚¿ãƒƒã‚¯ã‚’å®Œå…¨ã«ç ´æ£„ã™ã‚‹ã“ã¨ã«å¤±æ•—ã—ã€LogStashãŠã‚ˆã³Filebeatã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å¼•ãç¶šãä½¿ç”¨ã—ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸€èˆ¬çš„ãªãƒ­ã‚°ã‚¹ã‚­ãƒ¼ãƒ ã‚’æ¬¡ã®å›³ã«ç¤ºã—</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ah/kr/qg/ahkrqgjij-tfce_455jhjikjfg8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ã™ã€‚ClickHouseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã‚€æ©Ÿèƒ½ã¯ã€å¤§è¦æ¨¡ãªãƒãƒƒãƒã§ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æŒ¿å…¥ã™ã‚‹é »åº¦ãŒä½ã„ï¼ˆ1ç§’ã«1å›ï¼‰ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯æ˜ã‚‰ã‹ã«ã€ClickHouseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ“ä½œã‚’åˆã‚ã¦çµŒé¨“ã—ãŸã¨ãã«é­é‡ã™ã‚‹æœ€ã‚‚ã€Œå•é¡Œã®å¤šã„ã€éƒ¨åˆ†ã§ã™ã€‚ã‚¹ã‚­ãƒ¼ãƒ ã¯å°‘ã—è¤‡é›‘ã§ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ClickHouseã«ãƒ‡ãƒ¼ã‚¿ã‚’ç›´æ¥æŒ¿å…¥ã™ã‚‹LogStashãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ã€ã“ã“ã§éå¸¸ã«å½¹ç«‹ã¡ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è‡ªä½“ã¨åŒã˜ã‚µãƒ¼ãƒãƒ¼ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ä¸€èˆ¬çš„ã«è¨€ãˆã°ã€åŒã˜ã‚µãƒ¼ãƒãƒ¼ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¦ã„ã‚‹ã¨ãã«åˆ¥ã®ã‚µãƒ¼ãƒãƒ¼ã‚’ä½œæˆã—ãªã„ã‚ˆã†ã«ã€å®Ÿéš›ã«ã¯ãã†ã™ã‚‹ã“ã¨ã¯ãŠå‹§ã‚ã§ãã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®éšœå®³ã‚„ãƒªã‚½ãƒ¼ã‚¹ã®ç«¶åˆã¯ç¢ºèªã•ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã¯å†ãƒˆãƒ¬ã‚¤ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</font><font style="vertical-align: inherit;">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯æŒ¿å…¥ã§ããªã‹ã£ãŸãƒ‡ãƒ¼ã‚¿ã®ãƒ‘ã‚±ãƒƒãƒˆã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«æ›¸ãè¾¼ã¿ã¾ã™ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã¯ä¾¿åˆ©ã§ã™ã€‚ç·¨é›†å¾Œã€ã‚¯ãƒªãƒƒã‚¯ãƒã‚¦ã‚¹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ä¿®æ­£ã—ãŸãƒ‘ã‚±ãƒƒãƒˆã‚’ç°¡å˜ã«æŒ¿å…¥ã§ãã¾ã™ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¹ã‚­ãƒ¼ãƒ ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®å®Œå…¨ãªãƒªã‚¹ãƒˆã‚’è¡¨ã«ç¤ºã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ä¸€è¦§</font></font></b><div class="spoiler_text"><div class="scrollable-table"><table>
<tbody>
<tr>
<td><b></b><br>
 </td>
<td><b></b><br>
 </td>
<td><b>  </b><br>
 </td>
</tr>
<tr>
<td> <p>NGINX</p><br>
 </td>
<td> <p>Reverse-proxy        </p><br>
<br>
<p>      </p><br>
 <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://nginx.org/ru/download.html</a></p><br>
 </td>
<td> <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://nginx.org/download/nginx-1.16.0.tar.gz</a></p><br>
 </td>
</tr>
<tr>
<td> <p>FileBeat</p><br>
 </td>
<td> <p>  .</p><br>
 <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://www.elastic.co/downloads/beats/filebeat</a> (  Windows 64bit).</p><br>
 </td>
<td> <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-7.3.0-windows-x86_64.zip</a></p><br>
 </td>
</tr>
<tr>
<td> <p>LogStash</p><br>
 </td>
<td> <p> .</p><br>
<br>
<p>     FileBeat,        RabbitMQ ( ,    DMZ.)</p><br>
 <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://www.elastic.co/products/logstash</a></p><br>
 </td>
<td> <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://artifacts.elastic.co/downloads/logstash/logstash-7.0.1.rpm</a></p><br>
 </td>
</tr>
<tr>
<td> <p>Logstash- output- clickhouse</p><br>
 </td>
<td> <p> Loagstash      ClickHouse </p><br>
 <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://github.com/mikechris/logstash-output-clickhouse</a></p><br>
 </td>
<td> <p>/usr/share/logstash/bin/logstash-plugin install logstash-output-clickhouse</p><br>
 <p>/usr/share/logstash/bin/logstash-plugin install logstash-filter-prune</p><br>
 <p>/usr/share/logstash/bin/logstash-plugin install logstash-filter-multiline</p><br>
 </td>
</tr>
<tr>
<td> <p>ClickHouse</p><br>
 </td>
<td> <p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://clickhouse.yandex/docs/ru/</a></p><br>
 </td>
<td> <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://packagecloud.io/Altinity/clickhouse/packages/el/7/clickhouse-server-19.5.3.8-1.el7.x86_64.rpm</a></p><br>
 <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://packagecloud.io/Altinity/clickhouse/packages/el/7/clickhouse-client-19.5.3.8-1.el7.x86_64.rpm</a></p><br>
 <p>.    2018     ""  rpm  RHEL,     .      ,  Altinity.</p><br>
 </td>
</tr>
<tr>
<td> <p>Grafana</p><br>
 </td>
<td> <p> .  </p><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://grafana.com/</a></p><br>
 </td>
<td> <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://grafana.com/grafana/download</a></p><br>
<br>
<p>Redhat &amp; Centos(64 Bit) â€“  </p><br>
 </td>
</tr>
<tr>
<td> <p>ClickHouse datasource for Grafana 4.6+</p><br>
 </td>
<td> <p>  Grafana    ClickHouse</p><br>
 <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://grafana.com/plugins/vertamedia-clickhouse-datasource</a></p><br>
 </td>
<td> <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://grafana.com/api/plugins/vertamedia-clickhouse-datasource/versions/1.8.1/download</a></p><br>
 </td>
</tr>
<tr>
<td> <p>LogStash</p><br>
 </td>
<td> <p>   FileBeat   RabbitMQ.</p><br>
 <p>.    FileBeat  output   RabbitMQ,       Logstash</p><br>
 <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://www.elastic.co/products/logstash</a></p><br>
 </td>
<td> <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://artifacts.elastic.co/downloads/logstash/logstash-7.0.1.rpm</a></p><br>
 </td>
</tr>
<tr>
<td> <p>RabbitMQ</p><br>
 </td>
<td> <p> .      DMZ</p><br>
 <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://www.rabbitmq.com/download.html</a></p><br>
 </td>
<td> <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.7.14/rabbitmq-server-3.7.14-1.el7.noarch.rpm</a></p><br>
 </td>
</tr>
<tr>
<td> <p>Erlang Runtime (  RabbitMQ)</p><br>
 </td>
<td> <p>  Erlang.    RabbitMQ</p><br>
 <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">http://www.erlang.org/download.html</a></p><br>
 </td>
<td> <p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://www.rabbitmq.com/install-rpm.html#install-erlang</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">http://www.erlang.org/downloads/21.3</a></p><br>
 </td>
</tr>
</tbody>
</table></div><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ClickHouseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã—ãŸã‚µãƒ¼ãƒãƒ¼æ§‹æˆã‚’æ¬¡ã®è¡¨ã«ç¤ºã—ã¾ã™ã€‚</font></font><br>
<div class="scrollable-table"><table>
<tbody>
<tr>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é¡Œå</font></font></b><br>
 </td>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å€¤</font></font></b><br>
 </td>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³¨æ„</font></font></b><br>
 </td>
</tr>
<tr>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ§‹æˆ</font></font></p><br>
 </td>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HDDï¼š40GB </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RAMï¼š8GB </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ï¼šCore 2 2Ghz</font></font></p><br>
 </td>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClickHouseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ“ä½œã«é–¢ã™ã‚‹ãƒ’ãƒ³ãƒˆã«æ³¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://clickhouse.yandex/docs/ru/operations/tips/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font></font></p><br>
 </td>
</tr>
<tr>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢</font></font></p><br>
 </td>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OSï¼šRed Hat Enterprise Linux Serverï¼ˆMaipoï¼‰</font></font></p><br>
 <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JREï¼ˆJava 8ï¼‰</font></font></p><br>
 </td>
<td> <p>&nbsp;</p><br>
 </td>
</tr>
</tbody>
</table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã”è¦§ã®ã¨ãŠã‚Šã€ã“ã‚Œã¯é€šå¸¸ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ­ã‚°ã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ§‹é€ ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log_web.sql</font></font></b><div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> log_web (<font></font>
  logdate <span class="hljs-built_in">Date</span>,<font></font>
  logdatetime DateTime CODEC(Delta, LZ4HC),<font></font>
   <font></font>
  fld_log_file_name LowCardinality( <span class="hljs-keyword">String</span> ),<font></font>
  fld_server_name LowCardinality( <span class="hljs-keyword">String</span> ),<font></font>
  fld_app_name LowCardinality( <span class="hljs-keyword">String</span> ),<font></font>
  fld_app_module LowCardinality( <span class="hljs-keyword">String</span> ),<font></font>
  fld_website_name LowCardinality( <span class="hljs-keyword">String</span> ),<font></font>
 <font></font>
  serverIP LowCardinality( <span class="hljs-keyword">String</span> ),<font></font>
  method LowCardinality( <span class="hljs-keyword">String</span> ),<font></font>
  uriStem <span class="hljs-keyword">String</span>,<font></font>
  uriQuery <span class="hljs-keyword">String</span>,<font></font>
  port UInt32,<font></font>
  username LowCardinality( <span class="hljs-keyword">String</span> ),<font></font>
  clientIP <span class="hljs-keyword">String</span>,<font></font>
  clientRealIP <span class="hljs-keyword">String</span>,<font></font>
  userAgent <span class="hljs-keyword">String</span>,<font></font>
  referer <span class="hljs-keyword">String</span>,<font></font>
  response <span class="hljs-keyword">String</span>,<font></font>
  subresponse <span class="hljs-keyword">String</span>,<font></font>
  win32response <span class="hljs-keyword">String</span>,<font></font>
  timetaken UInt64<font></font>
   <font></font>
  , uriQuery__utm_medium <span class="hljs-keyword">String</span>
  , uriQuery__utm_source <span class="hljs-keyword">String</span>
  , uriQuery__utm_campaign <span class="hljs-keyword">String</span>
  , uriQuery__utm_term <span class="hljs-keyword">String</span>
  , uriQuery__utm_content <span class="hljs-keyword">String</span>
  , uriQuery__yclid <span class="hljs-keyword">String</span>
  , uriQuery__region <span class="hljs-keyword">String</span><font></font>
 <font></font>
) <span class="hljs-keyword">Engine</span> = MergeTree()
<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> toYYYYMM(logdate)
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> (fld_app_name, fld_app_module, logdatetime)
<span class="hljs-keyword">SETTINGS</span> index_granularity = <span class="hljs-number">8192</span>;</code></pre> <br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ†å‰²ï¼ˆæœˆå˜ä½ï¼‰ã¨ç²’åº¦ã«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã™ã¹ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ã€httpãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç™»éŒ²ã™ã‚‹ãŸã‚ã®IISãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªã«å®Ÿè³ªçš„ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">utmã‚¿ã‚°ã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã®å€‹åˆ¥ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆã“ã‚Œã‚‰ã¯ã€ã‚¯ã‚¨ãƒªæ–‡å­—åˆ—ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‹ã‚‰ãƒ†ãƒ¼ãƒ–ãƒ«ã«æŒ¿å…¥ã™ã‚‹æ®µéšã§è§£æã•ã‚Œã¾ã™ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãŸã€è¡¨ã«ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ã‚µãƒ¼ãƒãƒ¼ã«é–¢ã™ã‚‹æƒ…å ±ã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã®ã„ãã¤ã‹ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®èª¬æ˜ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®è¡¨ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</font><font style="vertical-align: inherit;">1ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã€è¤‡æ•°ã®ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ­ã‚°ã‚’ä¿å­˜ã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody>
<tr>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é¡Œå</font></font></b><br>
 </td>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èª¬æ˜</font></font></b><br>
 </td>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¾‹</font></font></b><br>
 </td>
</tr>
<tr>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fld_app_name</font></font></p><br>
 </td>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³/ã‚·ã‚¹ãƒ†ãƒ åã®</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ‰åŠ¹ãªå€¤ï¼š</font></font></p><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site1.domain.comå¤–éƒ¨ã‚µã‚¤ãƒˆ1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site2.domain.comå¤–éƒ¨ã‚µã‚¤ãƒˆ2</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">internal-site1.domain.localå†…éƒ¨ã‚µã‚¤ãƒˆ1</font></font></li>
</ul><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> site1.domain.com</font></font><br>
 </td>
</tr>
<tr>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fld_app_module</font></font></p><br>
 </td>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ‰åŠ¹ãªå€¤ï¼š</font></font></p><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web-ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">svc-Webã‚µã‚¤ãƒˆã‚µãƒ¼ãƒ“ã‚¹</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intgr-Webçµ±åˆã‚µãƒ¼ãƒ“ã‚¹</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bo-ç®¡ç†è€…ï¼ˆBackOfficeï¼‰</font></font></li>
</ul><br>
 </td>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¦ã‚§ãƒ–</font></font></p><br>
 </td>
</tr>
<tr>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fld_website_name</font></font></p><br>
 </td>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IISã®Webã‚µã‚¤ãƒˆå</font></font></p><br>
 <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¤‡æ•°ã®ã‚·ã‚¹ãƒ†ãƒ ã‚’1å°ã®ã‚µãƒ¼ãƒãƒ¼ã«é…å‚™ã™ã‚‹ã“ã¨ã‚‚ã€1ã¤ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è¤‡æ•°ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’é…å‚™ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</font></font></p><br>
 </td>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¦ã‚§ãƒ–ãƒ¡ã‚¤ãƒ³</font></font></p><br>
 </td>
</tr>
<tr>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fld_server_name</font></font></p><br>
 </td>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚µãƒ¼ãƒãƒ¼ã®åå‰</font></font></p><br>
 </td>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web1.domain.com</font></font></p><br>
 </td>
</tr>
<tr>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fld_log_file_name</font></font></p><br>
 </td>
<td> <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚µãƒ¼ãƒãƒ¼ä¸Šã®ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒ‘ã‚¹</font></font></p><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cï¼š\ inetpub \ logs \ LogFiles </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
\ W3SVC1 \ u_ex190711.log</font></font><br>
 </td>
</tr>
</tbody>
</table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã«ã‚ˆã‚Šã€Grafanaã§ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’åŠ¹æœçš„ã«æ§‹ç¯‰ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã¨ãˆã°ã€ç‰¹å®šã®ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€Yandex.Metricaã®ã‚µã‚¤ãƒˆã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã«ä¼¼ã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2ã‹æœˆé–“ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½¿ç”¨ã«é–¢ã™ã‚‹ã„ãã¤ã‹ã®çµ±è¨ˆã‚’æ¬¡ã«ç¤ºã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚·ã‚¹ãƒ†ãƒ ãŠã‚ˆã³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã”ã¨ã®ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°</font></font></b><div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span><font></font>
    fld_app_name,<font></font>
    fld_app_module,<font></font>
    <span class="hljs-keyword">count</span>(fld_app_name) <span class="hljs-keyword">AS</span> rows_count
<span class="hljs-keyword">FROM</span> log_web
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span><font></font>
    fld_app_name,<font></font>
    fld_app_module<font></font>
    <span class="hljs-keyword">WITH</span> TOTALS
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span>
    fld_app_name <span class="hljs-keyword">ASC</span>,<font></font>
    rows_count <span class="hljs-keyword">DESC</span><font></font>
 <font></font>
â”Œâ”€fld_app_nameâ”€â”€â”€â”€â”€â”¬â”€fld_app_moduleâ”€â”¬â”€rows_countâ”€â”<font></font>
â”‚ site1.domain.ru  â”‚ web            â”‚     <span class="hljs-number">131441</span> â”‚<font></font>
â”‚ site2.domain.ru  â”‚ web            â”‚    <span class="hljs-number">1751081</span> â”‚<font></font>
â”‚ site3.domain.ru  â”‚ web            â”‚  <span class="hljs-number">106887543</span> â”‚<font></font>
â”‚ site3.domain.ru  â”‚ svc            â”‚   <span class="hljs-number">44908603</span> â”‚<font></font>
â”‚ site3.domain.ru  â”‚ intgr          â”‚    <span class="hljs-number">9813911</span> â”‚<font></font>
â”‚ site4.domain.ru  â”‚ web            â”‚     <span class="hljs-number">772095</span> â”‚<font></font>
â”‚ site5.domain.ru  â”‚ web            â”‚   <span class="hljs-number">17037221</span> â”‚<font></font>
â”‚ site5.domain.ru  â”‚ intgr          â”‚     <span class="hljs-number">838559</span> â”‚<font></font>
â”‚ site5.domain.ru  â”‚ bo             â”‚       <span class="hljs-number">7404</span> â”‚<font></font>
â”‚ site6.domain.ru  â”‚ web            â”‚     <span class="hljs-number">595877</span> â”‚<font></font>
â”‚ site7.domain.ru  â”‚ web            â”‚   <span class="hljs-number">27778858</span> â”‚<font></font>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<font></font>
 <font></font>
Totals:<font></font>
â”Œâ”€fld_app_nameâ”€â”¬â”€fld_app_moduleâ”€â”¬â”€rows_countâ”€â”<font></font>
â”‚              â”‚                â”‚  <span class="hljs-number">210522593</span> â”‚<font></font>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<font></font>
 <font></font>
<span class="hljs-number">11</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> set. Elapsed: <span class="hljs-number">4.874</span> sec. Processed <span class="hljs-number">210.52</span> million <span class="hljs-keyword">rows</span>, <span class="hljs-number">421.67</span> MB (<span class="hljs-number">43.19</span> million <span class="hljs-keyword">rows</span>/s., <span class="hljs-number">86.51</span> MB/s.)</code></pre><br>
</div></div><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ã‚£ã‚¹ã‚¯ä¸Šã®ãƒ‡ãƒ¼ã‚¿ã®é‡</font></font></b><div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span>
    formatReadableSize(<span class="hljs-keyword">sum</span>(data_uncompressed_bytes)) <span class="hljs-keyword">AS</span> uncompressed,<font></font>
    formatReadableSize(<span class="hljs-keyword">sum</span>(data_compressed_bytes)) <span class="hljs-keyword">AS</span> compressed,
    <span class="hljs-keyword">sum</span>(<span class="hljs-keyword">rows</span>) <span class="hljs-keyword">AS</span> total_rows
<span class="hljs-keyword">FROM</span> system.parts
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">table</span> = <span class="hljs-string">'log_web'</span><font></font>
 <font></font>
â”Œâ”€uncompressedâ”€â”¬â”€compressedâ”€â”¬â”€total_rowsâ”€â”<font></font>
â”‚ <span class="hljs-number">54.50</span> GiB    â”‚ <span class="hljs-number">4.86</span> GiB   â”‚  <span class="hljs-number">211427094</span> â”‚<font></font>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<font></font>
 <font></font>
<span class="hljs-number">1</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> set. Elapsed: <span class="hljs-number">0.035</span> sec.</code></pre><br>
</div></div><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ—ãƒ‡ãƒ¼ã‚¿åœ§ç¸®ç‡</font></font></b><div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span>
    <span class="hljs-keyword">name</span>,<font></font>
    formatReadableSize(data_uncompressed_bytes) <span class="hljs-keyword">AS</span> uncompressed,<font></font>
    formatReadableSize(data_compressed_bytes) <span class="hljs-keyword">AS</span> compressed,<font></font>
    data_uncompressed_bytes / data_compressed_bytes <span class="hljs-keyword">AS</span> compress_ratio
<span class="hljs-keyword">FROM</span> system.columns
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">table</span> = <span class="hljs-string">'log_web'</span><font></font>
 <font></font>
â”Œâ”€<span class="hljs-keyword">name</span>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€uncompressedâ”€â”¬â”€compressedâ”€â”¬â”€â”€â”€â”€â”€compress_ratioâ”€â”<font></font>
â”‚ logdate                â”‚ <span class="hljs-number">401.53</span> MiB   â”‚ <span class="hljs-number">1.80</span> MiB   â”‚ <span class="hljs-number">223.16665968777315</span> â”‚<font></font>
â”‚ logdatetime            â”‚ <span class="hljs-number">803.06</span> MiB   â”‚ <span class="hljs-number">35.91</span> MiB  â”‚ <span class="hljs-number">22.363966401202305</span> â”‚<font></font>
â”‚ fld_log_file_name      â”‚ <span class="hljs-number">220.66</span> MiB   â”‚ <span class="hljs-number">2.60</span> MiB   â”‚  <span class="hljs-number">84.99905736932571</span> â”‚<font></font>
â”‚ fld_server_name        â”‚ <span class="hljs-number">201.54</span> MiB   â”‚ <span class="hljs-number">50.63</span> MiB  â”‚  <span class="hljs-number">3.980924816977078</span> â”‚<font></font>
â”‚ fld_app_name           â”‚ <span class="hljs-number">201.17</span> MiB   â”‚ <span class="hljs-number">969.17</span> KiB â”‚ <span class="hljs-number">212.55518183686877</span> â”‚<font></font>
â”‚ fld_app_module         â”‚ <span class="hljs-number">201.17</span> MiB   â”‚ <span class="hljs-number">968.60</span> KiB â”‚ <span class="hljs-number">212.67805817411906</span> â”‚<font></font>
â”‚ fld_website_name       â”‚ <span class="hljs-number">201.54</span> MiB   â”‚ <span class="hljs-number">1.24</span> MiB   â”‚  <span class="hljs-number">162.7204926761546</span> â”‚<font></font>
â”‚ serverIP               â”‚ <span class="hljs-number">201.54</span> MiB   â”‚ <span class="hljs-number">50.25</span> MiB  â”‚  <span class="hljs-number">4.010824061219731</span> â”‚<font></font>
â”‚ method                 â”‚ <span class="hljs-number">201.53</span> MiB   â”‚ <span class="hljs-number">43.64</span> MiB  â”‚  <span class="hljs-number">4.617721053304486</span> â”‚<font></font>
â”‚ uriStem                â”‚ <span class="hljs-number">5.13</span> GiB     â”‚ <span class="hljs-number">832.51</span> MiB â”‚  <span class="hljs-number">6.311522291936919</span> â”‚<font></font>
â”‚ uriQuery               â”‚ <span class="hljs-number">2.58</span> GiB     â”‚ <span class="hljs-number">501.06</span> MiB â”‚  <span class="hljs-number">5.269731450124478</span> â”‚<font></font>
â”‚ port                   â”‚ <span class="hljs-number">803.06</span> MiB   â”‚ <span class="hljs-number">3.98</span> MiB   â”‚ <span class="hljs-number">201.91673864241824</span> â”‚<font></font>
â”‚ username               â”‚ <span class="hljs-number">318.08</span> MiB   â”‚ <span class="hljs-number">26.93</span> MiB  â”‚ <span class="hljs-number">11.812513794583598</span> â”‚<font></font>
â”‚ clientIP               â”‚ <span class="hljs-number">2.35</span> GiB     â”‚ <span class="hljs-number">82.59</span> MiB  â”‚ <span class="hljs-number">29.132328640073343</span> â”‚<font></font>
â”‚ clientRealIP           â”‚ <span class="hljs-number">2.49</span> GiB     â”‚ <span class="hljs-number">465.05</span> MiB â”‚  <span class="hljs-number">5.478382297052563</span> â”‚<font></font>
â”‚ userAgent              â”‚ <span class="hljs-number">18.34</span> GiB    â”‚ <span class="hljs-number">764.08</span> MiB â”‚  <span class="hljs-number">24.57905114484208</span> â”‚<font></font>
â”‚ referer                â”‚ <span class="hljs-number">14.71</span> GiB    â”‚ <span class="hljs-number">1.37</span> GiB   â”‚ <span class="hljs-number">10.736792723669906</span> â”‚<font></font>
â”‚ response               â”‚ <span class="hljs-number">803.06</span> MiB   â”‚ <span class="hljs-number">83.81</span> MiB  â”‚  <span class="hljs-number">9.582334090987247</span> â”‚<font></font>
â”‚ subresponse            â”‚ <span class="hljs-number">399.87</span> MiB   â”‚ <span class="hljs-number">1.83</span> MiB   â”‚  <span class="hljs-number">218.4831068635027</span> â”‚<font></font>
â”‚ win32response          â”‚ <span class="hljs-number">407.86</span> MiB   â”‚ <span class="hljs-number">7.41</span> MiB   â”‚ <span class="hljs-number">55.050315514606815</span> â”‚<font></font>
â”‚ timetaken              â”‚ <span class="hljs-number">1.57</span> GiB     â”‚ <span class="hljs-number">402.06</span> MiB â”‚ <span class="hljs-number">3.9947395692010637</span> â”‚<font></font>
â”‚ uriQuery__utm_medium   â”‚ <span class="hljs-number">208.17</span> MiB   â”‚ <span class="hljs-number">12.29</span> MiB  â”‚ <span class="hljs-number">16.936148912472955</span> â”‚<font></font>
â”‚ uriQuery__utm_source   â”‚ <span class="hljs-number">215.18</span> MiB   â”‚ <span class="hljs-number">13.00</span> MiB  â”‚ <span class="hljs-number">16.548367623199912</span> â”‚<font></font>
â”‚ uriQuery__utm_campaign â”‚ <span class="hljs-number">381.46</span> MiB   â”‚ <span class="hljs-number">37.94</span> MiB  â”‚ <span class="hljs-number">10.055156353418509</span> â”‚<font></font>
â”‚ uriQuery__utm_term     â”‚ <span class="hljs-number">231.82</span> MiB   â”‚ <span class="hljs-number">10.78</span> MiB  â”‚ <span class="hljs-number">21.502540454070672</span> â”‚<font></font>
â”‚ uriQuery__utm_content  â”‚ <span class="hljs-number">441.34</span> MiB   â”‚ <span class="hljs-number">87.60</span> MiB  â”‚  <span class="hljs-number">5.038260760449327</span> â”‚<font></font>
â”‚ uriQuery__yclid        â”‚ <span class="hljs-number">216.88</span> MiB   â”‚ <span class="hljs-number">16.58</span> MiB  â”‚  <span class="hljs-number">13.07721335008116</span> â”‚<font></font>
â”‚ uriQuery__region       â”‚ <span class="hljs-number">204.35</span> MiB   â”‚ <span class="hljs-number">9.49</span> MiB   â”‚  <span class="hljs-number">21.52661903446796</span> â”‚<font></font>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<font></font>
 <font></font>
<span class="hljs-number">28</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> set. Elapsed: <span class="hljs-number">0.005</span> sec.</code></pre><br>
</div></div><br>
<h4><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FileBeat </font><font style="vertical-align: inherit;">ã®ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®</font><font style="vertical-align: inherit;">èª¬æ˜ã€‚</font><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«ãƒ­ã‚°è»¢é€</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€ãƒ‡ã‚£ã‚¹ã‚¯ä¸Šã®ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ã‚’ç›£è¦–ã—ã€æƒ…å ±ã‚’LogStashã«è»¢é€ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ›¸ãè¾¼ã¾ã‚Œã‚‹ã™ã¹ã¦ã®ã‚µãƒ¼ãƒãƒ¼ï¼ˆé€šå¸¸ã¯IISï¼‰ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ†ãƒ¼ãƒ«ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã—ã¾ã™ï¼ˆã¤ã¾ã‚Šã€è¿½åŠ ã•ã‚ŒãŸãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã¿ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«è»¢é€ã—ã¾ã™ï¼‰ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€å€‹åˆ¥ã«ã€ãƒ•ã‚¡ã‚¤ãƒ«è»¢é€å…¨ä½“ã‚’æ§‹æˆã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€å‰æœˆã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã«å½¹ç«‹ã¡ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ•ã‚©ãƒ«ãƒ€ã«å…¥ã‚Œã‚‹ã ã‘ã§ã€ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ãŒèª­ã¿å–ã‚‰ã‚Œã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚µãƒ¼ãƒ“ã‚¹ãŒåœæ­¢ã™ã‚‹ã¨ã€ãƒ‡ãƒ¼ã‚¿ã¯ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«è»¢é€ã•ã‚Œãªããªã‚Šã¾ã™ã€‚</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ§‹æˆä¾‹ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">filebeat.yml</font></font></b><div class="spoiler_text"><pre><code class="sql hljs">filebeat.inputs:<font></font>
- type: log<font></font>
  enabled: true<font></font>
  paths:<font></font>
    - C:/inetpub/logs/LogFiles/W3SVC1<span class="hljs-comment">/*.log
  exclude_files: ['.gz$','.zip$']
  tail_files: true
  ignore_older: 24h
  fields:
    fld_server_name: "site1.domain.ru"
    fld_app_name: "site1.domain.ru"
    fld_app_module: "web"
    fld_website_name: "web-main"
 
- type: log
  enabled: true
  paths:
    - C:/inetpub/logs/LogFiles/__Import/access_log-*
  exclude_files: ['.gz$','.zip$']
  tail_files: false
  fields:
    fld_server_name: "site2.domain.ru"
    fld_app_name: "site2.domain.ru"
    fld_app_module: "web"
    fld_website_name: "web-main"
    fld_logformat: "logformat__apache"
 
 
filebeat.config.modules:
  path: ${path.config}/modules.d/*.yml
  reload.enabled: false
  reload.period: 2s
 
output.logstash:
  hosts: ["log.domain.com:5044"]
 
  ssl.enabled: true
  ssl.certificate_authorities: ["C:/filebeat/certs/ca.pem", "C:/filebeat/certs/ca-issuing.pem"]
  ssl.certificate: "C:/filebeat/certs/site1.domain.ru.cer"
  ssl.key: "C:/filebeat/certs/site1.domain.ru.key"
 
#================================ Processors =====================================
 
processors:
  - add_host_metadata: ~
  - add_cloud_metadata: ~</span></code></pre><br>
</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LogStash </font><font style="vertical-align: inherit;">ãƒ­ã‚°ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€FileBeatã‹ã‚‰ï¼ˆã¾ãŸã¯RabbitMQã‚­ãƒ¥ãƒ¼ã‚’ä»‹ã—ã¦ï¼‰ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªã‚’å—ä¿¡ã—ã€ãƒãƒ³ãƒ‰ãƒ«ã‚’è§£æã—ã¦ClickHouseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æŒ¿å…¥ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ClickHouseã«æŒ¿å…¥ã™ã‚‹ã«ã¯ã€Logstash-output-clickhouseãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">Logstashãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å–å¾—ã™ã‚‹ãŸã‚ã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ãŒã‚ã‚Šã¾ã™ãŒã€å®šæœŸçš„ã«ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã™ã‚‹å ´åˆã¯ã€ã‚µãƒ¼ãƒ“ã‚¹è‡ªä½“ã‚’åœæ­¢ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">åœæ­¢ã™ã‚‹ã¨ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯RabbitMQã‚­ãƒ¥ãƒ¼ã«è“„ç©ã•ã‚Œã‚‹ãŸã‚ã€é•·æ™‚é–“åœæ­¢ã™ã‚‹å ´åˆã¯ã€ã‚µãƒ¼ãƒãƒ¼ä¸Šã®Filebeatsã‚’åœæ­¢ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">RabbitMQãŒä½¿ç”¨ã•ã‚Œã¦ã„ãªã„ã‚¹ã‚­ãƒ¼ãƒ ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ã¯ã€Filebeatã¯ãƒ­ã‚°ã‚’ç›´æ¥Logstashã«é€ä¿¡ã—ã¾ã™ï¼‰ã§ã¯ã€Filebeatã¯éå¸¸ã«é©åˆ‡ã§å®‰å…¨ã«æ©Ÿèƒ½ã™ã‚‹ãŸã‚ã€å‡ºåŠ›ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªãã¦ã‚‚å½±éŸ¿ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ§‹æˆä¾‹ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log_web__filebeat_clickhouse.conf</font></font></b><div class="spoiler_text"><pre><code class="sql hljs">input {<font></font>
 <font></font>
    beats {<font></font>
        port =&gt; 5044<font></font>
        type =&gt; 'iis'<font></font>
        ssl =&gt; true<font></font>
        ssl_certificate_authorities =&gt; ["/etc/logstash/certs/ca.cer", "/etc/logstash/certs/ca-issuing.cer"]<font></font>
        ssl_certificate =&gt; "/etc/logstash/certs/server.cer"<font></font>
        ssl_key =&gt; "/etc/logstash/certs/server-pkcs8.key"<font></font>
        ssl_verify_mode =&gt; "peer"<font></font>
 <font></font>
            add_field =&gt; {<font></font>
                "fld_server_name" =&gt; "%{[fields][fld_server_name]}"<font></font>
                "fld_app_name" =&gt; "%{[fields][fld_app_name]}"<font></font>
                "fld_app_module" =&gt; "%{[fields][fld_app_module]}"<font></font>
                "fld_website_name" =&gt; "%{[fields][fld_website_name]}"<font></font>
                "fld_log_file_name" =&gt; "%{source}"<font></font>
                "fld_logformat" =&gt; "%{[fields][fld_logformat]}"<font></font>
            }<font></font>
    }<font></font>
 <font></font>
    rabbitmq {<font></font>
        host =&gt; "queue.domain.com"<font></font>
        port =&gt; 5671<font></font>
        user =&gt; "q-reader"<font></font>
        password =&gt; "password"<font></font>
        queue =&gt; "web_log"<font></font>
        heartbeat =&gt; 30<font></font>
        durable =&gt; true<font></font>
        ssl =&gt; true<font></font>
        <span class="hljs-comment">#ssl_certificate_path =&gt; "/etc/logstash/certs/server.p12"</span>
        <span class="hljs-comment">#ssl_certificate_password =&gt; "password"</span><font></font>
 <font></font>
        add_field =&gt; {<font></font>
            "fld_server_name" =&gt; "%{[fields][fld_server_name]}"<font></font>
            "fld_app_name" =&gt; "%{[fields][fld_app_name]}"<font></font>
            "fld_app_module" =&gt; "%{[fields][fld_app_module]}"<font></font>
            "fld_website_name" =&gt; "%{[fields][fld_website_name]}"<font></font>
            "fld_log_file_name" =&gt; "%{source}"<font></font>
            "fld_logformat" =&gt; "%{[fields][fld_logformat]}"<font></font>
        }<font></font>
    }<font></font>
 <font></font>
}<font></font>
 <font></font>
filter { <font></font>
 <font></font>
      if [message] =~ "^<span class="hljs-comment">#" {</span>
        <span class="hljs-keyword">drop</span> {}<font></font>
      }<font></font>
 <font></font>
      <span class="hljs-keyword">if</span> [fld_logformat] == <span class="hljs-string">"logformat__iis_with_xrealip"</span> {<font></font>
     <font></font>
          grok {<font></font>
            <span class="hljs-keyword">match</span> =&gt; [<span class="hljs-string">"message"</span>, <span class="hljs-string">"%{TIMESTAMP_ISO8601:log_timestamp} %{IP:serverIP} %{WORD:method} %{NOTSPACE:uriStem} %{NOTSPACE:uriQuery} %{NUMBER:port} %{NOTSPACE:username} %{IPORHOST:clientIP} %{NOTSPACE:userAgent} %{NOTSPACE:referer} %{NUMBER:response} %{NUMBER:subresponse} %{NUMBER:win32response} %{NUMBER:timetaken} %{NOTSPACE:xrealIP} %{NOTSPACE:xforwarderfor}"</span>]<font></font>
          }<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
   <font></font>
          grok {<font></font>
             <span class="hljs-keyword">match</span> =&gt; [<span class="hljs-string">"message"</span>, <span class="hljs-string">"%{TIMESTAMP_ISO8601:log_timestamp} %{IP:serverIP} %{WORD:method} %{NOTSPACE:uriStem} %{NOTSPACE:uriQuery} %{NUMBER:port} %{NOTSPACE:username} %{IPORHOST:clientIP} %{NOTSPACE:userAgent} %{NOTSPACE:referer} %{NUMBER:response} %{NUMBER:subresponse} %{NUMBER:win32response} %{NUMBER:timetaken}"</span>]<font></font>
          }<font></font>
 <font></font>
      }<font></font>
 <font></font>
      <span class="hljs-built_in">date</span> {
        <span class="hljs-keyword">match</span> =&gt; [ <span class="hljs-string">"log_timestamp"</span>, <span class="hljs-string">"YYYY-MM-dd HH:mm:ss"</span> ]<font></font>
          timezone =&gt; <span class="hljs-string">"Etc/UTC"</span>
        remove_field =&gt; [ <span class="hljs-string">"log_timestamp"</span>, <span class="hljs-string">"@timestamp"</span> ]<font></font>
        target =&gt; [ <span class="hljs-string">"log_timestamp2"</span> ]<font></font>
      }<font></font>
 <font></font>
        ruby {<font></font>
            code =&gt; <span class="hljs-string">"tstamp = event.get('log_timestamp2').to_i
                        event.set('logdatetime', Time.at(tstamp).strftime('%Y-%m-%d %H:%M:%S'))
                        event.set('logdate', Time.at(tstamp).strftime('%Y-%m-%d'))"</span><font></font>
        }<font></font>
 <font></font>
      <span class="hljs-keyword">if</span> [bytesSent] {<font></font>
        ruby {<font></font>
          code =&gt; <span class="hljs-string">"event['kilobytesSent'] = event['bytesSent'].to_i / 1024.0"</span><font></font>
        }<font></font>
      }<font></font>
 <font></font>
 <font></font>
      <span class="hljs-keyword">if</span> [bytesReceived] {<font></font>
        ruby {<font></font>
          code =&gt; <span class="hljs-string">"event['kilobytesReceived'] = event['bytesReceived'].to_i / 1024.0"</span><font></font>
        }<font></font>
      }<font></font>
 <font></font>
   <font></font>
        ruby {<font></font>
            code =&gt; <span class="hljs-string">"event.set('clientRealIP', event.get('clientIP'))"</span><font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> [xrealIP] {<font></font>
            ruby {<font></font>
                code =&gt; <span class="hljs-string">"event.set('clientRealIP', event.get('xrealIP'))"</span><font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> [xforwarderfor] {<font></font>
            ruby {<font></font>
                code =&gt; <span class="hljs-string">"event.set('clientRealIP', event.get('xforwarderfor'))"</span><font></font>
            }<font></font>
        }<font></font>
 <font></font>
      mutate {<font></font>
        <span class="hljs-keyword">convert</span> =&gt; [<span class="hljs-string">"bytesSent"</span>, <span class="hljs-string">"integer"</span>]
        <span class="hljs-keyword">convert</span> =&gt; [<span class="hljs-string">"bytesReceived"</span>, <span class="hljs-string">"integer"</span>]
        <span class="hljs-keyword">convert</span> =&gt; [<span class="hljs-string">"timetaken"</span>, <span class="hljs-string">"integer"</span>] 
        <span class="hljs-keyword">convert</span> =&gt; [<span class="hljs-string">"port"</span>, <span class="hljs-string">"integer"</span>]<font></font>
 <font></font>
        add_field =&gt; {<font></font>
            <span class="hljs-string">"clientHostname"</span> =&gt; <span class="hljs-string">"%{clientIP}"</span><font></font>
        }<font></font>
      }<font></font>
 <font></font>
        useragent {<font></font>
            <span class="hljs-keyword">source</span>=&gt; <span class="hljs-string">"useragent"</span>
            prefix=&gt; <span class="hljs-string">"browser"</span><font></font>
        }<font></font>
 <font></font>
        kv {<font></font>
            <span class="hljs-keyword">source</span> =&gt; <span class="hljs-string">"uriQuery"</span>
            prefix =&gt; <span class="hljs-string">"uriQuery__"</span>
            allow_duplicate_values =&gt; <span class="hljs-literal">false</span>
            field_split =&gt; <span class="hljs-string">"&amp;"</span>
            include_keys =&gt; [ <span class="hljs-string">"utm_medium"</span>, <span class="hljs-string">"utm_source"</span>, <span class="hljs-string">"utm_campaign"</span>, <span class="hljs-string">"utm_term"</span>, <span class="hljs-string">"utm_content"</span>, <span class="hljs-string">"yclid"</span>, <span class="hljs-string">"region"</span> ]<font></font>
        }<font></font>
 <font></font>
        mutate {<font></font>
            <span class="hljs-keyword">join</span> =&gt; { <span class="hljs-string">"uriQuery__utm_source"</span> =&gt; <span class="hljs-string">","</span> }
            <span class="hljs-keyword">join</span> =&gt; { <span class="hljs-string">"uriQuery__utm_medium"</span> =&gt; <span class="hljs-string">","</span> }
            <span class="hljs-keyword">join</span> =&gt; { <span class="hljs-string">"uriQuery__utm_campaign"</span> =&gt; <span class="hljs-string">","</span> }
            <span class="hljs-keyword">join</span> =&gt; { <span class="hljs-string">"uriQuery__utm_term"</span> =&gt; <span class="hljs-string">","</span> }
            <span class="hljs-keyword">join</span> =&gt; { <span class="hljs-string">"uriQuery__utm_content"</span> =&gt; <span class="hljs-string">","</span> }
            <span class="hljs-keyword">join</span> =&gt; { <span class="hljs-string">"uriQuery__yclid"</span> =&gt; <span class="hljs-string">","</span> }
            <span class="hljs-keyword">join</span> =&gt; { <span class="hljs-string">"uriQuery__region"</span> =&gt; <span class="hljs-string">","</span> }<font></font>
        }<font></font>
 <font></font>
}<font></font>
 <font></font>
<span class="hljs-keyword">output</span> { 
  <span class="hljs-comment">#stdout {codec =&gt; rubydebug}</span><font></font>
    clickhouse {<font></font>
      headers =&gt; [<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Basic abcdsfks..."</span>]<font></font>
      http_hosts =&gt; [<span class="hljs-string">"http://127.0.0.1:8123"</span>]<font></font>
      save_dir =&gt; <span class="hljs-string">"/etc/logstash/tmp"</span>
      <span class="hljs-keyword">table</span> =&gt; <span class="hljs-string">"log_web"</span>
      request_tolerance =&gt; <span class="hljs-number">1</span>
      flush_size =&gt; <span class="hljs-number">10000</span>
      idle_flush_time =&gt; <span class="hljs-number">1</span><font></font>
        mutations =&gt; {<font></font>
            <span class="hljs-string">"fld_log_file_name"</span> =&gt; <span class="hljs-string">"fld_log_file_name"</span>
            <span class="hljs-string">"fld_server_name"</span> =&gt; <span class="hljs-string">"fld_server_name"</span>
            <span class="hljs-string">"fld_app_name"</span> =&gt; <span class="hljs-string">"fld_app_name"</span>
            <span class="hljs-string">"fld_app_module"</span> =&gt; <span class="hljs-string">"fld_app_module"</span>
            <span class="hljs-string">"fld_website_name"</span> =&gt; <span class="hljs-string">"fld_website_name"</span><font></font>
 <font></font>
            <span class="hljs-string">"logdatetime"</span> =&gt; <span class="hljs-string">"logdatetime"</span>
            <span class="hljs-string">"logdate"</span> =&gt; <span class="hljs-string">"logdate"</span>
            <span class="hljs-string">"serverIP"</span> =&gt; <span class="hljs-string">"serverIP"</span>
            <span class="hljs-string">"method"</span> =&gt; <span class="hljs-string">"method"</span>
            <span class="hljs-string">"uriStem"</span> =&gt; <span class="hljs-string">"uriStem"</span>
            <span class="hljs-string">"uriQuery"</span> =&gt; <span class="hljs-string">"uriQuery"</span>
            <span class="hljs-string">"port"</span> =&gt; <span class="hljs-string">"port"</span>
            <span class="hljs-string">"username"</span> =&gt; <span class="hljs-string">"username"</span>
            <span class="hljs-string">"clientIP"</span> =&gt; <span class="hljs-string">"clientIP"</span>
            <span class="hljs-string">"clientRealIP"</span> =&gt; <span class="hljs-string">"clientRealIP"</span>
            <span class="hljs-string">"userAgent"</span> =&gt; <span class="hljs-string">"userAgent"</span>
            <span class="hljs-string">"referer"</span> =&gt; <span class="hljs-string">"referer"</span>
            <span class="hljs-string">"response"</span> =&gt; <span class="hljs-string">"response"</span>
            <span class="hljs-string">"subresponse"</span> =&gt; <span class="hljs-string">"subresponse"</span>
            <span class="hljs-string">"win32response"</span> =&gt; <span class="hljs-string">"win32response"</span>
            <span class="hljs-string">"timetaken"</span> =&gt; <span class="hljs-string">"timetaken"</span><font></font>
             <font></font>
            <span class="hljs-string">"uriQuery__utm_medium"</span> =&gt; <span class="hljs-string">"uriQuery__utm_medium"</span>
            <span class="hljs-string">"uriQuery__utm_source"</span> =&gt; <span class="hljs-string">"uriQuery__utm_source"</span>
            <span class="hljs-string">"uriQuery__utm_campaign"</span> =&gt; <span class="hljs-string">"uriQuery__utm_campaign"</span>
            <span class="hljs-string">"uriQuery__utm_term"</span> =&gt; <span class="hljs-string">"uriQuery__utm_term"</span>
            <span class="hljs-string">"uriQuery__utm_content"</span> =&gt; <span class="hljs-string">"uriQuery__utm_content"</span>
            <span class="hljs-string">"uriQuery__yclid"</span> =&gt; <span class="hljs-string">"uriQuery__yclid"</span>
            <span class="hljs-string">"uriQuery__region"</span> =&gt; <span class="hljs-string">"uriQuery__region"</span><font></font>
        }<font></font>
    }<font></font>
 <font></font>
}</code></pre><br>
</div></div><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pipelines.yml</font></font></b><div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-comment"># This file is where you define your pipelines. You can define multiple.</span>
<span class="hljs-comment"># For more information on multiple pipelines, see the documentation:</span>
<span class="hljs-comment">#   https://www.elastic.co/guide/en/logstash/current/multiple-pipelines.html</span><font></font>
 <font></font>
- pipeline.id: log_web__filebeat_clickhouse<font></font>
  path.config: "/etc/logstash/log_web__filebeat_clickhouse.conf"</code></pre><br>
</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClickHouseã€‚</font><font style="vertical-align: inherit;">ãƒ­ã‚°ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã¹ã¦ã®ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ­ã‚°ã¯1ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ã•ã‚Œã¾ã™ï¼ˆè¨˜äº‹ã®å†’é ­ã‚’å‚ç…§ï¼‰ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«é–¢ã™ã‚‹æƒ…å ±ã‚’ä¿å­˜ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚ãŸã¨ãˆã°ã€IISãƒ­ã‚°ã€Apacheã€nginxãƒ­ã‚°ãªã©ã€ã™ã¹ã¦ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã•ã¾ã–ã¾ãªå½¢å¼ã§é¡ä¼¼ã—ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¨ãƒ©ãƒ¼ã€æƒ…å ±ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€è­¦å‘Šãªã©ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°ã®å ´åˆã€å¯¾å¿œã™ã‚‹æ§‹é€ ã‚’å‚™ãˆãŸå€‹åˆ¥ã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒæä¾›ã•ã‚Œã¾ã™ï¼ˆç¾åœ¨ã¯è¨­è¨ˆæ®µéšï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¨­è¨ˆã™ã‚‹ã¨ãã¯ã€ä¸»ã‚­ãƒ¼ã‚’æ±ºå®šã™ã‚‹ã“ã¨ãŒéå¸¸ã«é‡è¦ã§ã™ï¼ˆã“ã‚Œã«ã‚ˆã‚Šã€æ ¼ç´ä¸­ã«ãƒ‡ãƒ¼ã‚¿ãŒã‚½ãƒ¼ãƒˆã•ã‚Œã¾ã™ï¼‰ã€‚</font><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿åœ§ç¸®ã®ç¨‹åº¦ã¨ã‚¯ã‚¨ãƒªé€Ÿåº¦ã¯ã“ã‚Œã«ä¾å­˜ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ä¾‹ã§ã¯ã€ã‚­ãƒ¼ã¯</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ORDER BYï¼ˆfld_app_nameã€fld_app_moduleã€logdatetimeï¼‰ã§ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¤ã¾ã‚Šã€ã‚·ã‚¹ãƒ†ãƒ ã®åå‰ã€ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åå‰ã€ãŠã‚ˆã³ã‚¤ãƒ™ãƒ³ãƒˆã®æ—¥ä»˜ã§ã™ã€‚ã‚¤ãƒ™ãƒ³ãƒˆã®æœ€åˆã®æ—¥ä»˜ã¯æœ€åˆã®å ´æ‰€ã§ã—ãŸã€‚æœ€å¾Œã®å ´æ‰€ã«ç§»å‹•ã—ãŸå¾Œã€ã‚¯ã‚¨ãƒªã¯ç´„2å€ã®é€Ÿã•ã§æ©Ÿèƒ½ã—å§‹ã‚ã¾ã—ãŸã€‚ä¸»ã‚­ãƒ¼ã‚’å¤‰æ›´ã™ã‚‹ã«ã¯ã€ClickHouseãŒãƒ‡ã‚£ã‚¹ã‚¯ä¸Šã®ãƒ‡ãƒ¼ã‚¿ã‚’å†ã‚½ãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å†ä½œæˆã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å†ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯é›£ã—ã„æ“ä½œãªã®ã§ã€äº‹å‰ã«ã‚½ãƒ¼ãƒˆã‚­ãƒ¼ã«ä½•ã‚’å«ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚’è€ƒãˆã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãŸã€æ¯”è¼ƒçš„æœ€è¿‘ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯ã€LowCardinalityãƒ‡ãƒ¼ã‚¿å‹ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«ã‚‚æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ã“ã‚Œã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã‚«ãƒ¼ãƒ‡ã‚£ãƒŠãƒªãƒ†ã‚£ãŒä½ã„ï¼ˆã„ãã¤ã‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®åœ§ç¸®ãƒ‡ãƒ¼ã‚¿ã®ã‚µã‚¤ã‚ºãŒå¤§å¹…ã«å‰Šæ¸›ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¾åœ¨ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³19.6ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æ›´æ–°ã™ã‚‹äºˆå®šã§ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã¨ãˆã°ã€ã‚¢ãƒ€ãƒ—ãƒ†ã‚£ãƒ–ã‚°ãƒ©ãƒ‹ãƒ¥ãƒ©ãƒªãƒ†ã‚£ã€ã‚¹ã‚­ãƒƒãƒ—ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã€DoubleDeltaã‚³ãƒ¼ãƒ‡ãƒƒã‚¯ãªã©ã®ã™ã°ã‚‰ã—ã„æ©Ÿèƒ½ãŒå«ã¾ã‚Œã¦ã„ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã«æ§‹æˆãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ãŒãƒˆãƒ¬ãƒ¼ã‚¹ã«è¨­å®šã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ­ã‚°ã¯ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã•ã‚Œã¦ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã•ã‚Œã¾ã™ãŒã€ã‚®ã‚¬ãƒã‚¤ãƒˆã¾ã§æ‹¡å¼µã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">å¿…è¦ãŒãªã„å ´åˆã¯ã€è­¦å‘Šãƒ¬ãƒ™ãƒ«ã‚’è¨­å®šã™ã‚‹ã¨ã€ãƒ­ã‚°ã®ã‚µã‚¤ã‚ºãŒæ€¥æ¿€ã«æ¸›å°‘ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ­ã‚°è¨­å®šã¯config.xmlãƒ•ã‚¡ã‚¤ãƒ«ã§è¨­å®šã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-comment">&lt;!-- Possible levels: https://github.com/pocoproject/poco/blob/develop/Foundation/include/Poco/Logger. h#L105 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">level</span>&gt;</span>warning<span class="hljs-tag">&lt;/<span class="hljs-name">level</span>&gt;</span></code></pre><br>
 <div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã„ãã¤ã‹ã®ä¾¿åˆ©ãªã‚³ãƒãƒ³ãƒ‰</font></font></b><div class="spoiler_text"><pre><code class="sql hljs">      Debian,     Linux      Altinity.<font></font>
 <font></font>
          : https://www.altinity.com/blog/2017/12/18/logstash-<span class="hljs-keyword">with</span>-clickhouse<font></font>
sudo yum <span class="hljs-keyword">search</span> clickhouse-<span class="hljs-keyword">server</span>
sudo yum <span class="hljs-keyword">install</span> clickhouse-server.noarch<font></font>
  <font></font>
<span class="hljs-number">1.</span>  <font></font>
sudo systemctl <span class="hljs-keyword">status</span> clickhouse-<span class="hljs-keyword">server</span><font></font>
 <font></font>
<span class="hljs-number">2.</span>  <font></font>
sudo systemctl <span class="hljs-keyword">stop</span> clickhouse-<span class="hljs-keyword">server</span><font></font>
 <font></font>
<span class="hljs-number">3.</span>  <font></font>
sudo systemctl <span class="hljs-keyword">start</span> clickhouse-<span class="hljs-keyword">server</span><font></font>
 <font></font>
       (   <span class="hljs-string">";"</span>)<font></font>
clickhouse-<span class="hljs-keyword">client</span> <span class="hljs-comment">--multiline</span>
clickhouse-<span class="hljs-keyword">client</span> <span class="hljs-comment">--multiline --host 127.0.0.1 --password pa55w0rd</span>
clickhouse-<span class="hljs-keyword">client</span> <span class="hljs-comment">--multiline --host 127.0.0.1 --port 9440 --secure --user default --password pa55w0rd</span><font></font>
 <font></font>
               /tmp/log_web_failed.json<font></font>
           :<font></font>
clickhouse-<span class="hljs-keyword">client</span> <span class="hljs-comment">--host 127.0.0.1 --password password --query="INSERT INTO log_web FORMAT JSONEachRow" &lt; /tmp/log_web_failed__fixed.json</span><font></font>
 <font></font>
sudo mv /etc/logstash/tmp/log_web_failed.json /etc/logstash/tmp/log_web_failed__fixed.json<font></font>
sudo chown user_dev /etc/logstash/tmp/log_web_failed__fixed.json<font></font>
sudo clickhouse-<span class="hljs-keyword">client</span> <span class="hljs-comment">--host 127.0.0.1 --password password --query="INSERT INTO log_web FORMAT JSONEachRow" &lt; /etc/logstash/tmp/log_web_failed__fixed.json</span><font></font>
sudo mv /etc/logstash/tmp/log_web_failed__fixed.json /etc/logstash/tmp/log_web_failed__fixed_.json<font></font>
 <font></font>
   <font></font>
quit;<font></font>
<span class="hljs-comment">##  TLS</span><font></font>
https://www.altinity.com/blog/2019/3/5/clickhouse-networking-part-2<font></font>
 <font></font>
openssl s_client -connect log.domain.com:9440 &lt; /dev/null</code></pre><br>
</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LogStash </font><font style="vertical-align: inherit;">RabbitMQã‚­ãƒ¥ãƒ¼ã¸ã®FileBeatãƒ­ã‚°ãƒ«ãƒ¼ã‚¿ãƒ¼</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€FileBeatã‹ã‚‰ã®ãƒ­ã‚°ã‚’RabbitMQã‚­ãƒ¥ãƒ¼ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">2ã¤ã®ãƒã‚¤ãƒ³ãƒˆãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ®‹å¿µãªãŒã‚‰ã€FileBeatã«ã¯RabbitMQã«ç›´æ¥æ›¸ãè¾¼ã‚€ãŸã‚ã®å‡ºåŠ›ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ãã®æ©Ÿèƒ½ã¯ã€Githubã®ishã§åˆ¤æ–­ã™ã‚‹ã¨ã€å®Ÿè£…ã®äºˆå®šã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">Kafkaç”¨ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚ã‚Šã¾ã™ãŒã€ä½•ã‚‰ã‹ã®ç†ç”±ã§è‡ªå®…ã§ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DMZã§ãƒ­ã‚°ã‚’åé›†ã™ã‚‹ãŸã‚ã®è¦ä»¶ãŒâ€‹â€‹ã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã‚Œã‚‰ã«åŸºã¥ã„ã¦ã€ã¾ãšãƒ­ã‚°ã‚’ã‚­ãƒ¥ãƒ¼ã«è¿½åŠ ã—ã¦ã‹ã‚‰ã€å¤–éƒ¨ã®LogStashãŒã‚­ãƒ¥ãƒ¼ã‹ã‚‰ã‚¨ãƒ³ãƒˆãƒªã‚’èª­ã¿å–ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ãŸãŒã£ã¦ã€DMZå†…ã®ã‚µãƒ¼ãƒãƒ¼ã®å ´æ‰€ã®å ´åˆã¯ã€ã“ã®ã‚ˆã†ãªå°‘ã—è¤‡é›‘ãªã‚¹ã‚­ãƒ¼ãƒ ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ§‹æˆä¾‹ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iis_w3c_logs__filebeat_rabbitmq.conf</font></font></b><div class="spoiler_text"><pre><code class="sql hljs">input {<font></font>
 <font></font>
    beats {<font></font>
        port =&gt; 5044<font></font>
        type =&gt; 'iis'<font></font>
        ssl =&gt; true<font></font>
        ssl_certificate_authorities =&gt; ["/etc/pki/tls/certs/app/ca.pem", "/etc/pki/tls/certs/app/ca-issuing.pem"]<font></font>
        ssl_certificate =&gt; "/etc/pki/tls/certs/app/queue.domain.com.cer"<font></font>
        ssl_key =&gt; "/etc/pki/tls/certs/app/queue.domain.com-pkcs8.key"<font></font>
        ssl_verify_mode =&gt; "peer"<font></font>
    }<font></font>
 <font></font>
}<font></font>
 <font></font>
output { <font></font>
  <span class="hljs-comment">#stdout {codec =&gt; rubydebug}</span><font></font>
 <font></font>
    rabbitmq {<font></font>
        host =&gt; "127.0.0.1"<font></font>
        port =&gt; 5672<font></font>
        exchange =&gt; "monitor.direct"<font></font>
        exchange_type =&gt; "direct"<font></font>
        key =&gt; "%{[fields][fld_app_name]}"<font></font>
        user =&gt; "q-writer"<font></font>
        password =&gt; "password"<font></font>
        ssl =&gt; false<font></font>
    }<font></font>
}</code></pre><br>
</div></div> <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RabbitMQã€‚</font><font style="vertical-align: inherit;">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¥ãƒ¼</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€DMZã®ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªã‚’ãƒãƒƒãƒ•ã‚¡ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">è¨˜éŒ²ã¯ã€ä¸€é€£ã®Filebeatâ†’LogStashã‚’ä»‹ã—ã¦è¡Œã‚ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">èª­ã¿å–ã‚Šã¯ã€LogStashã‚’ä»‹ã—ã¦DMZã®å¤–éƒ¨ã‹ã‚‰è¡Œã‚ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">RabboitMQã‚’ä»‹ã—ã¦æ“ä½œã™ã‚‹å ´åˆã€1ç§’ã‚ãŸã‚Šç´„4000ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡¦ç†ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã®åå‰ã«å¾“ã£ã¦ã€ã¤ã¾ã‚ŠFileBeatæ§‹æˆãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦æ§‹æˆã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã™ã¹ã¦ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯1ã¤ã®ã‚­ãƒ¥ãƒ¼ã«åˆ†é¡ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ä½•ã‚‰ã‹ã®ç†ç”±ã§ã‚­ãƒ¥ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹ãŒåœæ­¢ã—ã¦ã‚‚ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå¤±ã‚ã‚Œã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚FileBeatsã¯æ¥ç¶šã‚¨ãƒ©ãƒ¼ã‚’å—ã‘å–ã‚Šã€ä¸€æ™‚çš„ãªé€ä¿¡ã‚’ä¸€æ™‚åœæ­¢ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€ã‚­ãƒ¥ãƒ¼ã‹ã‚‰èª­ã¿å–ã‚‹LogStashã‚‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã‚’å—ã‘å–ã‚Šã€æ¥ç¶šãŒå†é–‹ã™ã‚‹ã®ã‚’å¾…ã¡ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚‚ã¡ã‚ã‚“ã€ãƒ‡ãƒ¼ã‚¿ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ›¸ãè¾¼ã¾ã‚Œãªããªã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚­ãƒ¥ãƒ¼ã‚’ä½œæˆãŠã‚ˆã³æ§‹æˆã™ã‚‹ã«ã¯ã€æ¬¡ã®æ‰‹é †ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="sql hljs">sudo /usr/local/bin/rabbitmqadmin/rabbitmqadmin <span class="hljs-keyword">declare</span> <span class="hljs-keyword">exchange</span> <span class="hljs-comment">--vhost=/ name=monitor.direct type=direct sudo /usr/local/bin/rabbitmqadmin/rabbitmqadmin declare queue --vhost=/ name=web_log durable=true</span>
sudo /usr/<span class="hljs-keyword">local</span>/<span class="hljs-keyword">bin</span>/rabbitmqadmin/rabbitmqadmin <span class="hljs-comment">--vhost="/" declare binding source="monitor.direct" destination_type="queue" destination="web_log" routing_key="site1.domain.ru"</span>
sudo /usr/<span class="hljs-keyword">local</span>/<span class="hljs-keyword">bin</span>/rabbitmqadmin/rabbitmqadmin <span class="hljs-comment">--vhost="/" declare binding source="monitor.direct" destination_type="queue" destination="web_log" routing_key="site2.domain.ru"</span></code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚°ãƒ©ãƒ•ã‚¡ãƒŠ </font><font style="vertical-align: inherit;">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€ç›£è¦–ãƒ‡ãƒ¼ã‚¿ã‚’è¦–è¦šåŒ–ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã“ã®å ´åˆã€Grafana 4.6+ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç”¨ã®ClickHouseãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§SQLãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’å‡¦ç†ã™ã‚‹åŠ¹ç‡ã‚’ä¸Šã’ã‚‹ã«ã¯ã€å°‘ã—èª¿æ•´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã¨ãˆã°ã€å¤‰æ•°ã‚’ä½¿ç”¨ã—ã¦ã„ã¦ã€ãã‚Œã‚‰ãŒãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«è¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã€WHEREãƒ•ã‚©ãƒ¼ãƒ ã§æ¡ä»¶ã‚’ç”Ÿæˆã—ãªã„ã‚ˆã†ã«ã—ã¾ã™ï¼ˆuriStem = `` AND uriStemï¼= ''ï¼‰ã€‚ã“ã®å ´åˆã€ClickHouseã¯uriStemåˆ—ã‚’èª­ã¿å–ã‚Šã¾ã™ã€‚ä¸€èˆ¬ã«ã€ã•ã¾ã–ã¾ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è©¦ã—ã€æœ€å¾Œã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ï¼ˆãƒã‚¯ãƒ­$ valueIfEmptyï¼‰ã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ç©ºã®å€¤ã®å ´åˆã€åˆ—è‡ªä½“ã«è¨€åŠã›ãšã«1ã‚’è¿”ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ä»Šã€ã‚ãªãŸã¯ã“ã®ã‚¯ã‚¨ãƒªã‚’ã‚°ãƒ©ãƒ•ã«ä½¿ã†ã“ã¨ãŒã§ãã¾ã™</font></font><br>
<br>
<pre><code class="sql hljs">$columns(response, count(*) c) from $table where $adhoc<font></font>
and $valueIfEmpty($fld_app_name, 1, fld_app_name = '$fld_app_name')<font></font>
and $valueIfEmpty($fld_app_module, 1, fld_app_module = '$fld_app_module') and $valueIfEmpty($fld_server_name, 1, fld_server_name = '$fld_server_name') and $valueIfEmpty($uriStem, 1, uriStem like '%$uriStem%')<font></font>
and $valueIfEmpty($clientRealIP, 1, clientRealIP = '$clientRealIP')</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã¯ãã®ã‚ˆã†ãªSQLã«å¤‰æ›ã•ã‚Œã¾ã™ï¼ˆç©ºã®uriStemãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯1ã«å¤‰æ›ã•ã‚ŒãŸã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼‰</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span><font></font>
t,<font></font>
groupArray((response, c)) <span class="hljs-keyword">AS</span> groupArr
<span class="hljs-keyword">FROM</span> (
<span class="hljs-keyword">SELECT</span>
(intDiv(toUInt32(logdatetime), <span class="hljs-number">60</span>) * <span class="hljs-number">60</span>) * <span class="hljs-number">1000</span> <span class="hljs-keyword">AS</span> t, response,
<span class="hljs-keyword">count</span>(*) <span class="hljs-keyword">AS</span> c <span class="hljs-keyword">FROM</span> default.log_web
<span class="hljs-keyword">WHERE</span> (logdate &gt;= toDate(<span class="hljs-number">1565061982</span>)) <span class="hljs-keyword">AND</span> (logdatetime &gt;= toDateTime(<span class="hljs-number">1565061982</span>)) <span class="hljs-keyword">AND</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> (fld_app_name = <span class="hljs-string">'site1.domain.ru'</span>) <span class="hljs-keyword">AND</span> (fld_app_module = <span class="hljs-string">'web'</span>) <span class="hljs-keyword">AND</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span><font></font>
t, response<font></font>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span>
t <span class="hljs-keyword">ASC</span>,<font></font>
response <span class="hljs-keyword">ASC</span><font></font>
)<font></font>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> t <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> t <span class="hljs-keyword">ASC</span></code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµè«–</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ClickHouseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç™»å ´ã¯ã€å¸‚å ´ã«ãŠã‘ã‚‹ç”»æœŸçš„ãªã‚¤ãƒ™ãƒ³ãƒˆã«ãªã‚Šã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã™ãã«ç„¡æ–™ã§ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ã‚’æ“ä½œã™ã‚‹ãŸã‚ã®å¼·åŠ›ã§å®Ÿç”¨çš„ãªãƒ„ãƒ¼ãƒ«ã‚’æ‰‹ã«å…¥ã‚ŒãŸã“ã¨ã‚’æƒ³åƒã™ã‚‹ã®ã¯å›°é›£ã§ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã‚‚ã¡ã‚ã‚“ã€ãƒ‹ãƒ¼ã‚ºã®å¢—åŠ ï¼ˆãŸã¨ãˆã°ã€è¤‡æ•°ã®ã‚µãƒ¼ãƒãƒ¼ã¸ã®ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã«ä¼´ã„ã€ã‚¹ã‚­ãƒ¼ãƒ ã¯ã‚ˆã‚Šè¤‡é›‘ã«ãªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€ç¬¬ä¸€å°è±¡ã«ã‚ˆã‚‹ã¨ã€ã“ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã®ä½œæ¥­ã¯éå¸¸ã«ä¾¿åˆ©ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã€Œäººã®ãŸã‚ã«ã€ä½œã‚‰ã‚Œã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ElasticSearchã¨æ¯”è¼ƒã—ã¦ã€äº‹å‰ã®è¦‹ç©ã‚‚ã‚Šã«ã‚ˆã‚‹ã¨ã€ãƒ­ã‚°ã®ä¿å­˜ã¨å‡¦ç†ã®ã‚³ã‚¹ãƒˆã¯5å€ã‹ã‚‰10å€ã«å‰Šæ¸›ã•ã‚Œã¾ã™ã€‚è¨€ã„æ›ãˆã‚Œã°ã€ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿é‡ã§è¤‡æ•°ã®ãƒã‚·ãƒ³ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’æ§‹æˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã€ClickHouseã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€å¿…è¦ãªã®ã¯1å°ã®ä½é›»åŠ›ãƒã‚·ãƒ³ã ã‘ã§ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€ElasticSearchã«ã¯ã€ãƒ‡ã‚£ã‚¹ã‚¯ä¸Šã®ãƒ‡ãƒ¼ã‚¿ã‚’åœ§ç¸®ã™ã‚‹ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚„ã€ãƒªã‚½ãƒ¼ã‚¹ã®æ¶ˆè²»ã‚’å¤§å¹…ã«å‰Šæ¸›ã§ãã‚‹ãã®ä»–ã®æ©Ÿèƒ½ã‚‚ã‚ã‚Šã¾ã™ãŒã€ClickHouseã¨æ¯”è¼ƒã™ã‚‹ã¨ã€éå¸¸ã«ã‚³ã‚¹ãƒˆãŒã‹ã‹ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã®éƒ¨åˆ†ã«ç‰¹åˆ¥ãªæœ€é©åŒ–ã‚’è¡Œã‚ãªãã¦ã‚‚ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§ã¯ã€ãƒ‡ãƒ¼ã‚¿ã®ãƒ­ãƒ¼ãƒ‰ã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã¯é©šãã¹ãé€Ÿåº¦ã§æ©Ÿèƒ½ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¾ã§ã®ã¨ã“ã‚ã€ãƒ‡ãƒ¼ã‚¿ã¯ã‚ãšã‹ã§ã™ãŒï¼ˆç´„2å„„ãƒ¬ã‚³ãƒ¼ãƒ‰ï¼‰ã€ã‚µãƒ¼ãƒãƒ¼è‡ªä½“ã¯è„†å¼±ã§ã™ã€‚</font><font style="vertical-align: inherit;">å°†æ¥çš„ã«ã¯ã€ã“ã®ãƒ„ãƒ¼ãƒ«ã‚’ãƒ­ã‚°ã®ä¿å­˜ã¨ã¯é–¢ä¿‚ã®ãªã„ä»–ã®ç›®çš„ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã¨ãˆã°ã€ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®åˆ†æã®å ´åˆã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®åˆ†é‡ã§ã¯æ©Ÿæ¢°å­¦ç¿’ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¾Œã«ã€é•·æ‰€ã¨çŸ­æ‰€ã«ã¤ã„ã¦å°‘ã—ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒã‚¤ãƒŠã‚¹</font></font></h4><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤§ããªãƒãƒ³ãƒ‰ãƒ«ã§ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ä¸€æ–¹ã§ã¯æ©Ÿèƒ½ã§ã™ãŒã€ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ã™ã‚‹ã«ã¯è¿½åŠ ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚¿ã‚¹ã‚¯ã¯å¸¸ã«å˜ç´”ã§ã‚ã‚‹ã¨ã¯é™ã‚Šã¾ã›ã‚“ãŒã€è§£æ±ºå¯èƒ½ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ã‚¹ã‚­ãƒ¼ãƒ ã‚’ç°¡ç´ åŒ–ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</font></font></li>
<li>          .   ,      . ,   Kafka â€“   ,       ,   .     Issue  ,        . ,           ,    .</li>
</ol><br>
<h4></h4><br>
<ol>
<li> .</li>
<li>  .</li>
<li>Open-source.</li>
<li>.</li>
<li>  (/ Â« Â»)</li>
<li>    ,  .</li>
<li>    .</li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja472896/index.html">ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã‹ã‚‰ã®ãƒ˜ãƒªã‚³ãƒ—ã‚¿ãƒ¼ï¼šç§‘å­¦è€…ãŒåˆã‚ã¦ã€ãƒ˜ãƒªã‚³ãƒ—ã‚¿ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³ã®å¤§å‹ã‚±ãƒ¼ã‚¹ã‚’ã€Œå°åˆ·ã€ã—ã¾ã—ãŸ</a></li>
<li><a href="../ja472902/index.html">Windows for IoTï¼šå¼·åŒ–ã•ã‚ŒãŸãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚µãƒãƒ¼ãƒˆã¨æ–°ã—ã„ã‚¹ãƒãƒ¼ãƒˆãƒ‡ãƒã‚¤ã‚¹æ©Ÿèƒ½</a></li>
<li><a href="../ja472904/index.html">AmazonãŒæ ªã‚’ã‚²ãƒ¼ãƒ ã«å¤‰ãˆã‚‹æ–¹æ³•</a></li>
<li><a href="../ja472908/index.html">ãƒ€ã‚¬ã‚ºï¼šã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ï¼ˆãƒ‘ãƒ¼ãƒˆ2ï¼‰</a></li>
<li><a href="../ja472910/index.html">ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã‚’ä½¿ç”¨ã—ã¦çœ‹æ¿ã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’æ¤œç´¢ã™ã‚‹</a></li>
<li><a href="../ja472914/index.html">Wolframé–¢æ•°ãƒªãƒã‚¸ãƒˆãƒªï¼šWolframè¨€èªæ‹¡å¼µã®ãŸã‚ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚¢ã‚¯ã‚»ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </a></li>
<li><a href="../ja472916/index.html">7æœˆã®Habrã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã§æœ€ã‚‚èˆˆå‘³æ·±ã„ã®ã¯ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã€æ©Ÿæ¢°å­¦ç¿’ã€ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã§ã™ã€‚</a></li>
<li><a href="../ja472918/index.html">ãƒ­ã‚·ã‚¢ã¨CISã®ZXã‚¹ãƒšã‚¯ãƒˆãƒ©ãƒ ï¼šã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã®è¿½æ±‚ãŒã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã©ã®ã‚ˆã†ã«å¤‰åŒ–ã—ãŸã‹</a></li>
<li><a href="../ja472922/index.html">ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ã‚ˆã‚Šã‚‚å¼·åŠ›ãªãƒ‡ã‚£ãƒ•ã‚§ãƒ³ãƒ€ãƒ¼ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼</a></li>
<li><a href="../ja472926/index.html">è¿”å“ã‚’åŠ é€Ÿã™ã‚‹æ³•å‰‡ï¼ˆãƒ‘ãƒ¼ãƒˆ1ï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>