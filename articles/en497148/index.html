<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚öôÔ∏è ü§û üêü Creating a desktop application using Golang and Fyne üñçÔ∏è üíÜüèº ‚å®Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we will develop a desktop application on Golang
 Developing a golang desktop application is not a typical task for a golang programmer. There ar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Creating a desktop application using Golang and Fyne</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497148/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Today we will develop a desktop application on Golang</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Developing a golang desktop application is not a typical task for a golang programmer. </font></font><a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There are not so many ready-made open source libraries for Google to solve it at the request of golang desktop, examples of what were found:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gotk</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fyne</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gxui</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fyne was chosen because the github repository of this project contains the largest number of stars, and it also supports the notorious Material design. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's see what options for displaying the interface it provides us. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The following widgets are available from the box:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Button.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A container (for grouping child widgets and directing them horizontally or vertically).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Checkbox, fields for entering text or password.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Forms and groups.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hyperlink.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The icon.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The label.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Progress Bar.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A scrollable container.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Switch.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Select</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabs.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toolbar.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the event that among the interface elements the necessary was not found, it is possible to implement custom widgets using a simple API. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's try to write a golang gui application for displaying weather forecasts for the next few days using Fyne. </font><font style="vertical-align: inherit;">The full application code can be found on the link on github. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First of all, create an empty project on Golang and install Fyne.</font></font><br>
<br>
<pre><code class="bash hljs">go get fyne.io/fyne</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since the application will display weather information, you need to get this information. </font><font style="vertical-align: inherit;">To do this, turn to the Open Weather Map API.</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getWeatherForecast</span><span class="hljs-params">(result <span class="hljs-keyword">interface</span>{})</span> <span class="hljs-title">error</span></span> {
  <span class="hljs-keyword">var</span> url = fmt.Sprintf(<span class="hljs-string">"https://api.openweathermap.org/data/2.5/forecast?q=Voronezh&amp;cnt=4&amp;units=metric&amp;appid=%s"</span>, openWeatherMapApiKey) <span class="hljs-comment">//    </span><font></font>
  response, err := http.Get(url)<font></font>
  <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {<font></font>
     fmt.Print(err)<font></font>
  }<font></font>
  <span class="hljs-keyword">defer</span> response.Body.Close()
  <span class="hljs-keyword">return</span> json.NewDecoder(response.Body).Decode(result)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To store data, you can use the following structure (in it I left only some of the fields that the API returns), it is worth paying attention to the fact that all fields of the structure are capitalized, but in the API response they are described with a small one.</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">type</span> WeatherInfo <span class="hljs-keyword">struct</span> {<font></font>
  List []WeatherListItem <span class="hljs-string">`json:list`</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">type</span> WeatherListItem <span class="hljs-keyword">struct</span> {<font></font>
  Dt      <span class="hljs-keyword">int</span>           <span class="hljs-string">`json:dt`</span>
  Main    WeatherMain   <span class="hljs-string">`json:main`</span>
  Weather []WeatherType <span class="hljs-string">`json:weather`</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">type</span> WeatherMain <span class="hljs-keyword">struct</span> {<font></font>
  Temp      <span class="hljs-keyword">float32</span> <span class="hljs-string">`json:temp`</span>
  FeelsLike <span class="hljs-keyword">float32</span> <span class="hljs-string">`json:feels_like`</span>
  Humidity  <span class="hljs-keyword">int</span>     <span class="hljs-string">`json:humidity`</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">type</span> WeatherType <span class="hljs-keyword">struct</span> {<font></font>
  Icon <span class="hljs-keyword">string</span> <span class="hljs-string">`json:icon`</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we can receive weather data in the form of a structure. It remains to implement the golang desktop application interface.</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">setupUi</span><span class="hljs-params">(weatherInfo WeatherInfo)</span></span> {<font></font>
  app := app.New()<font></font>
<font></font>
  w := app.NewWindow(<span class="hljs-string">"   "</span>)<font></font>
<font></font>
  <span class="hljs-keyword">var</span> vBox = widget.NewVBox() <span class="hljs-comment">//        </span><font></font>
<font></font>
  <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(weatherInfo.List); i++ {
     <span class="hljs-keyword">var</span> weatherForDay = weatherInfo.List[i] <span class="hljs-comment">//     </span>
     <span class="hljs-keyword">var</span> weatherMainGroup = widget.NewVBox(<font></font>
        widget.NewLabel(fmt.Sprintf(<span class="hljs-string">": %.2f ¬∞C"</span>, weatherForDay.Main.Temp)),<font></font>
        widget.NewLabel(fmt.Sprintf(<span class="hljs-string">" : %.2f ¬∞C"</span>, weatherForDay.Main.FeelsLike)),<font></font>
        widget.NewLabel(fmt.Sprintf(<span class="hljs-string">": %d%%"</span>, weatherForDay.Main.Humidity)),<font></font>
     ) <span class="hljs-comment">//  3    </span><font></font>
<font></font>
     <span class="hljs-keyword">var</span> weatherTypeGroup = widget.NewVBox()
     <span class="hljs-keyword">for</span> weatherTypeI := <span class="hljs-number">0</span>; weatherTypeI &lt; <span class="hljs-built_in">len</span>(weatherForDay.Weather); weatherTypeI++ {
        <span class="hljs-keyword">var</span> resource, _ = fyne.LoadResourceFromURLString(fmt.Sprintf(<span class="hljs-string">"http://openweathermap.org/img/wn/%s.png"</span>, weatherForDay.Weather[weatherTypeI].Icon)) <span class="hljs-comment">//   ,   </span>
        <span class="hljs-keyword">var</span> icon = widget.NewIcon(resource)<font></font>
        weatherTypeGroup.Append(icon)<font></font>
     }<font></font>
<font></font>
     <span class="hljs-keyword">var</span> time = time2.Unix(<span class="hljs-keyword">int64</span>(weatherInfo.List[i].Dt), <span class="hljs-number">0</span>).String()<font></font>
     vBox.Append(widget.NewGroup(time)) <font></font>
     vBox.Append(widget.NewHBox(weatherMainGroup, weatherTypeGroup))<font></font>
  }<font></font>
  vBox.Append(widget.NewButton(<span class="hljs-string">""</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {<font></font>
     app.Quit()<font></font>
  }))<font></font>
<font></font>
  w.SetContent(vBox) <span class="hljs-comment">//    </span><font></font>
<font></font>
  w.ShowAndRun() <span class="hljs-comment">//   </span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here we create our widgets, fill them with data and collect them into groups to organize the order in which they are displayed. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Done. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It remains only to run the application and see how it looks. </font><font style="vertical-align: inherit;">Since the framework is cross-platform, you can run it on both Windows and macOS and Linux. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d36/269/9d6/d362699d6e617cfdd88314cff903ffc2.png" alt="image"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Launched golang mac os application </font></font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6af/19d/18b/6af19d18b2c51392eba592f3c55264fb.png" alt="image"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And it looks like a golang windows application</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
As a result, it turned out to create a simple cross-platform golang desktop application, and try Fyne in action. </font><font style="vertical-align: inherit;">Unfortunately, go is hardly worth considering as a suitable language for developing modern desktop applications, however, it is always interesting to touch something new and unusual in practice. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thank you all for your attention.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en497136/index.html">‚ÄúSave Concord‚Äù or a report from the tests of the Russian radar system for searching for foreign objects on the runway</a></li>
<li><a href="../en497140/index.html">Decryption of data in the CAN bus VW Polo sedan</a></li>
<li><a href="../en497142/index.html">How we added Harmony OS support to the inDriver Android application</a></li>
<li><a href="../en497144/index.html">Wedge by wedge: use of the PIV5 virus to create a vaccine against MERS-CoV and possibly against SARS-CoV-2</a></li>
<li><a href="../en497146/index.html">Applied cryptography. How we restored bitcoins for 300 thousand dollars</a></li>
<li><a href="../en497152/index.html">Where Product Heart Lives: Metrics for Measuring Happiness</a></li>
<li><a href="../en497154/index.html">Videos of all reports from eight Ontico conferences</a></li>
<li><a href="../en497156/index.html">Webinar "Artificial Intelligence in Questions and Answers"</a></li>
<li><a href="../en497158/index.html">The Way to Programmers (C ++)</a></li>
<li><a href="../en497160/index.html">X.509 with your forces in .Net Core</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>