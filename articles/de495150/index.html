<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍🎓 ◼️ 👧🏽 Docker und VMWare Workstation auf demselben Windows-Computer 🛎️ 👩🏼‍🎓 📟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Aufgabe war einfach: Setzen Sie Docker mit Windows auf Ihren funktionierenden Laptop, der bereits über einen Zoo verfügt. Ausgeliefert von Docker ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Docker und VMWare Workstation auf demselben Windows-Computer</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495150/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Aufgabe war einfach: Setzen Sie Docker mit Windows auf Ihren funktionierenden Laptop, der bereits über einen Zoo verfügt. </font><font style="vertical-align: inherit;">Ausgeliefert von Docker Desktop erstellte Container, alles ist in Ordnung, aber nur schnell festgestellt, dass VMWare Workstation die Ausführung virtueller Maschinen mit einem Fehler beendet hat:</font></font><br>
<br>
<pre><code class="plaintext hljs">VMware Workstation and Device/Credential Guard are not compatible. VMware Workstation can be run after disabling Device/Credential Guard.</code></pre><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Arbeit stand auf, dringend muss repariert werden</font></font></h3><br>
<img src="https://habrastorage.org/webt/b1/t1/zb/b1t1zbtgf0ryh6x4bfeocywnkig.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei Verwendung von Google wurde festgestellt, dass dieser Fehler aufgrund der Inkompatibilität von VMWare Workstation und Hyper-V auf demselben Computer auftritt. </font><font style="vertical-align: inherit;">Das Problem ist bekannt und es gibt eine offizielle VMWare-Lösung zur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Behebung des</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Problems unter </font><font style="vertical-align: inherit;">Bezugnahme auf die Wissensdatenbank von Microsoft </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manage Windows Defender Credential Guard</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Die Lösung besteht darin, den Defender Credential Guard zu deaktivieren (Abschnitt 4 des Abschnitts zum Deaktivieren des Windows Defender Credential Guard hat mir geholfen):</font></font><br>
<br>
<pre><code class="plaintext hljs">mountvol X: /s<font></font>
copy %WINDIR%\System32\SecConfig.efi X:\EFI\Microsoft\Boot\SecConfig.efi /Y<font></font>
bcdedit /create {0cb3b571-2f2e-4343-a879-d86a476d7215} /d "DebugTool" /application osloader<font></font>
bcdedit /set {0cb3b571-2f2e-4343-a879-d86a476d7215} path "\EFI\Microsoft\Boot\SecConfig.efi"<font></font>
bcdedit /set {bootmgr} bootsequence {0cb3b571-2f2e-4343-a879-d86a476d7215}<font></font>
bcdedit /set {0cb3b571-2f2e-4343-a879-d86a476d7215} loadoptions DISABLE-LSA-ISO<font></font>
bcdedit /set {0cb3b571-2f2e-4343-a879-d86a476d7215} device partition=X:<font></font>
mountvol X: /d</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Neustart fragt Windows, ob es wirklich möglich ist, den Defender Credential Guard zu deaktivieren. </font><font style="vertical-align: inherit;">Ja! </font><font style="vertical-align: inherit;">Auf diese Weise kehrt VMWare Workstation zum normalen Betrieb zurück und wir befinden uns an derselben Stelle wie vor der Installation des Dockers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe nie Lösungen gefunden, um Hyper-V und VMWare Workstation miteinander in Einklang zu bringen. Ich hoffe, sie werden in neuen Versionen Freunde finden.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein anderer Weg</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich war schon lange für verschiedene Zwecke von VMWare Workstation begeistert und habe versucht, mich auf Hyper-V und VirtualBox zu beschränken, aber die Funktionalität hat meine Aufgaben nicht erfüllt, sodass ich immer noch sitze. </font><font style="vertical-align: inherit;">Es stellte sich heraus, dass es eine Lösung gibt, wie VMWare, Docker und VSCode in einer Arbeitsumgebung zusammengeführt werden können. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker Machine</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ermöglicht es Ihnen, die Docker Engine auf einem virtuellen Host auszuführen und eine Remote- und lokale Verbindung herzustellen. </font><font style="vertical-align: inherit;">Und für ihn gibt es einen Kompatibilitätstreiber mit VMWare Workstation, einen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link zu GitHub.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ich werde die Installationsanweisungen nicht besonders nacherzählen, sondern nur eine Liste der Zutaten:</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker Toolbox</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker Machine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> enthalten)</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker Machine VMware Workstation-Treiber</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker-Desktop</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ja, Docker Desktop wird leider auch benötigt. </font><font style="vertical-align: inherit;">Wenn Sie es abgerissen haben, installieren Sie es erneut. Entfernen Sie diesmal jedoch das Kontrollkästchen, um Änderungen am Betriebssystem vorzunehmen, damit VMWare Workstation nicht erneut beschädigt wird. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich möchte sofort darauf hinweisen, dass bei einem einfachen Benutzer alles einwandfrei funktioniert. Die Installationsprogramme fordern bei Bedarf eine Eskalation der Rechte an, aber alle Befehle in der Befehlszeile und die Skripte werden vom aktuellen Benutzer ausgeführt. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Ergebnis hat das Team:</font></font><br>
<pre><code class="powershell hljs"><span class="hljs-variable">$</span> docker<span class="hljs-literal">-machine</span> create -<span class="hljs-literal">-driver</span>=vmwareworkstation dev</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aus Boot2Docker wird ein virtueller Entwickler erstellt, in dem sich ein Docker befindet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können diese virtuelle Maschine an die grafische Oberfläche der VMWare Workstation anhängen, indem Sie die entsprechende VMX-Datei öffnen. </font><font style="vertical-align: inherit;">Dies ist jedoch nicht erforderlich, da VSCode jetzt von PowerShell mit einem Skript ausgeführt werden muss (aus irgendeinem Grund befanden sich Docker-Maschine und Docker-Maschine-Treiber-VMwareworkstation im Ordner bin):</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-built_in">cd</span> ~/bin<font></font>
./docker<span class="hljs-literal">-machine</span> env dev | <span class="hljs-built_in">Invoke-Expression</span>
code</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VSCode wird geöffnet, um mit Code auf dem lokalen Computer und dem Docker in der virtuellen Maschine zu arbeiten. Mit dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker für Visual Studio-Code-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Plugin </font><font style="vertical-align: inherit;">können Sie Container in einer virtuellen Maschine bequem verwalten, ohne in die Konsole zu klettern. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schwierigkeiten:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Beim Erstellen der Docker-Maschine friert mein Prozess ein:</font></font><br>
<br>
<pre><code class="powershell hljs">Waiting <span class="hljs-keyword">for</span> SSH to be available...</code></pre><br>
<img src="https://habrastorage.org/webt/sf/4a/a7/sf4aa7bnmnh4zwmtccicwm4yong.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und nach einiger Zeit endete es mit übermäßigen Versuchen, eine Verbindung mit der virtuellen Maschine herzustellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es geht um die Politik der Zertifikate. Beim Erstellen einer virtuellen Maschine wird das Verzeichnis ~ \ .docker \ machine \ machine \ dev angezeigt. In diesem Verzeichnis befinden sich Zertifikatdateien für die Verbindung über SSH: id_rsa, id_rsa.pub. OpenSSH kann die Verwendung verweigern, da es glaubt, dass sie Probleme mit Zugriffsrechten haben. Nur hier sagt Ihnen die Docker-Maschine nichts darüber, sondern verbindet sich einfach wieder, bis es langweilig wird. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lösung:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sobald die Erstellung einer neuen virtuellen Maschine beginnt, wechseln Sie in das Verzeichnis ~ \ .docker \ machine \ machine \ dev und ändern Sie die Rechte für die angegebenen Dateien nacheinander.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Eigentümer der Datei sollte der aktuelle Benutzer sein, vollständiger Zugriff nur auf den aktuellen Benutzer und SYSTEM. Alle anderen Benutzer, einschließlich der Gruppe der Administratoren und der Administratoren selbst, müssen gelöscht werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es kann auch Probleme beim Konvertieren absoluter Pfade vom Windows-Format in Posix und beim Binden von Volumes mit symbolischer Verknüpfung geben. </font><font style="vertical-align: inherit;">Aber das ist eine andere Geschichte.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de495130/index.html">Sortieren in Scala - ein Beispiel für Katzen</a></li>
<li><a href="../de495138/index.html">Wie werden sich Gesellschaft und Technologie nach dem Coronavirus verändern? Expertenmeinungen</a></li>
<li><a href="../de495140/index.html">Top 10 Memes des letzten Jahrzehnts</a></li>
<li><a href="../de495146/index.html">Unterbrechungsfreie Stromversorgung von Einkaufszentren oder Shopping Must On On</a></li>
<li><a href="../de495148/index.html">Dell XPS 13 7390 "2 in 1": ein leichter Metalltransformator mit hellem Bildschirm und Intel Ice Lake</a></li>
<li><a href="../de495154/index.html">Ewiger Server - wie man monatliche Hosting-Zahlungen loswird</a></li>
<li><a href="../de495156/index.html">Erstaunlich, dass Ihr Produkt immer noch funktioniert</a></li>
<li><a href="../de495158/index.html">Entwickler Perekrestok.ru. Was wir tun und wen wir in Teams suchen</a></li>
<li><a href="../de495160/index.html">Vom Monolithen zum verteilten System</a></li>
<li><a href="../de495162/index.html">Was Sie über die Auswirkungen von Nachrichten auf die Aktienkurse wissen müssen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>