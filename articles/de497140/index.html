<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè• üèúÔ∏è üë®‚Äçüöí Entschl√ºsselung von Daten in der CAN-Bus VW Polo Limousine üïê üç∞ ü§ü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Heute werden wir am Beispiel eines VW Polo Limousine von 2019 √ºber Methoden zum Entschl√ºsseln von CAN-Bus-Daten sprechen. Im Internet werden solche Ar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Entschl√ºsselung von Daten in der CAN-Bus VW Polo Limousine</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497140/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heute werden wir am Beispiel eines VW Polo Limousine von 2019 √ºber Methoden zum Entschl√ºsseln von CAN-Bus-Daten sprechen. </font><font style="vertical-align: inherit;">Im Internet werden solche Artikel oft als CAN-Bus-Hacks bezeichnet, aber dieser Name gef√§llt mir nicht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Artikel beschreibt die Methoden zum Auffinden der notwendigen Daten im CAN-Bus des Autos, Beispiele f√ºr die Anwendung dieser Techniken auf die VW Polo Limousine. </font><font style="vertical-align: inherit;">Vega MTX wird als Ausr√ºstung f√ºr den Anschluss an einen CAN-Bus verwendet. </font><font style="vertical-align: inherit;">Lassen Sie uns etwas mehr √ºber Telematik sprechen. </font><font style="vertical-align: inherit;">Unter dem Schnitt viele Bilder zum Thema, mehrere Gifs und Videos.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein paar Worte √ºber dich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mein Name ist Alexey Fokin, im Moment arbeite ich f√ºr Vega Absolute</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vega_absolute</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Die Zentrale in Nowosibirsk, aber ich arbeite in Moskau. Eine unserer Richtungen ist die Telematik. Wir stellen Ger√§te zur Verfolgung von Nutzfahrzeugen, Carsharing, Taxis usw. her. Meine Aufgabe ist es, Daten von Autos zu sammeln und sie in Einstellungen f√ºr unsere Ausr√ºstung umzuwandeln. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun zum Auto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Verbindung zum CAN-Bus wurde an zwei Stellen hergestellt: hinter dem Armaturenbrett (500-Kbit / s-Bus) und hinter dem Radio (100-Kbit / s). Es gibt auch eine redundante Verbindung - die Verbindung zum OBDII-Anschluss direkt am Anschluss (500 Kbit / s). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aus den verwendeten Werkzeugen: Vega MTX Fahrzeug√ºberwachungseinheit mit CAN-Scanner. Um es auf einem PC zu konfigurieren, verwenden Sie das Programm Configurator 1.27.14.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weitere Informationen zum Anschlie√üen an ein Auto und MTX finden Sie im Video am Ende des Artikels. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei Verbindung mit allen CAN-Bussen sehen wir das folgende Bild: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z4/j3/ad/z4j3ad0zxuso-cm1kzaa1omjpp8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Datenstrom m√ºssen Sie die Bits und Bytes finden, die f√ºr die von uns ben√∂tigten Parameter verantwortlich sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der folgende Screenshot zeigt, wie viele Sensoren derzeit im Telematikblock registriert sind. Dies ist keine vollst√§ndige Liste. Sie k√∂nnen noch tiefer gehen und nach noch mehr Sensoren suchen. Einige dieser Sensoren senden in Echtzeit Messwerte an den Server, sodass Sie jederzeit den Status Ihres Autos anzeigen k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Telematik ist ein Thema f√ºr einen separaten Artikel, daher werden wir hier nicht im Detail darauf eingehen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kz/qr/_p/kzqr_pzavnxnqpai7jt42tsvrwa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellt sich sofort die Frage: Warum muss ich in einem Stream nach Daten suchen, wenn ich sie √ºber ELM327 oder andere Diagnoseger√§te sehen kann? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Frage hier ist, warum wir diese Daten brauchen. In unserem Fall ben√∂tigen wir die Daten f√ºr die Telematik. Um den CAN-Bus nicht zu st√∂ren und keine Daten an ihn zu senden, suchen wir sie im Stream. Vega MTX verf√ºgt √ºber einen speziellen Modus f√ºr die Arbeit mit dem CAN-Bus - den ‚ÄûListening‚Äú -Modus. Der Modus spricht f√ºr sich selbst, die Ausr√ºstung h√∂rt nur auf den Bus und sendet nichts an ihn, wodurch die Auswirkungen auf das normale Fahrzeugsystem minimiert werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Beispiel ein Sensor zum √ñffnen einer T√ºr. Wenn wir ihn um eine Anfrage bitten, k√∂nnen wir dies nur bei eingeschalteter Z√ºndung tun. Nach dem Ausschalten der Z√ºndung und dem Einschlafen des CAN-Busses steht uns dieser Sensor nicht mehr zur Verf√ºgung. Wenn wir diesen Sensor im CAN-Stream finden, sehen wir ihn die ganze Zeit, wenn der CAN-Bus funktioniert. Und wenn Sie die T√ºr √∂ffnen, wird CAN automatisch aktiviert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es versteht sich auch, dass alle folgenden Beispiele nur f√ºr die Polo Sedan Connect relevant sind. In anderen F√§llen sind in der Ausr√ºstung m√∂glicherweise keine der Sensoren aufgef√ºhrt, bei anderen Automarken und Automodellen sind die Daten jedoch in v√∂llig anderen IDs angegeben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich mache Sie darauf aufmerksam, dass im Konfigurator standardm√§√üig Werte im HEX-Format angezeigt werden. </font><font style="vertical-align: inherit;">In Zukunft m√ºssen wir Daten aus dem HEX-Format mehrmals in Dezimalwerte √ºbersetzen. </font><font style="vertical-align: inherit;">Der einfachste Weg, dies zu tun, ist die Verwendung der in Windows 10 integrierten Calculator-Anwendung. </font><font style="vertical-align: inherit;">Wir √ºbersetzen es in den "Programmier" -Modus und haben die Wahl, in welches Zahlensystem Daten eingegeben werden sollen, und sie werden in anderen Zahlensystemen dupliziert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durch die Suchmethode teile ich alle Sensoren im Auto in verschiedene Typen ein:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bin√§re Sensoren. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schnell wechselnde Sensoren. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temperatursensoren. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kilometerstand.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºllstandsensoren. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anzeigesensoren</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sensoren mit Anfragen. </font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kommen wir nun zu den Methoden, mit denen Sie jeden Sensortyp finden k√∂nnen. </font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Bin√§re Sensoren</font></font></b></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beginnen wir mit den einfachsten bin√§ren Sensoren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Sensoren umfassen T√ºrsensoren, Sicherheitsgurte, Bremse (unabh√§ngig davon, ob die Bremslichter leuchten), Handbremse, gedr√ºckte Tasten usw. </font><font style="vertical-align: inherit;">Ihr Wert wird in 1 Bit gesetzt, dh er kann 0 (die T√ºr ist geschlossen) oder 1 (die T√ºr ist offen) sein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie zu finden ist einfach, erfordert aber Sorgfalt. </font><font style="vertical-align: inherit;">Um nach einer Fahrert√ºr zu suchen, √∂ffnen / schlie√üen Sie die T√ºr und beobachten Sie, was sich im CAN-Bus √§ndert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Konfigurator markiert die Daten, bei denen in den letzten Sekunden √Ñnderungen vorgenommen wurden, rot. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zf/8x/jp/zf8xjpvzhahuxhbdadj6tsmmtum.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserem Fall ist die Fahrert√ºr f√ºr das Nullbit des ersten Bytes der Nachricht mit der ID 470 verantwortlich. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im selben Byte befinden sich die Sensoren aller anderen T√ºren + Kofferraumsensor.</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Schnell wechselnde Sensoren</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schnell wechselnde Sensoren √§hneln bin√§ren Sensoren, nur dass ihr Wert mehr als 1 Bit betr√§gt. Wir k√∂nnen auf diese Sensoren einwirken und sofort √Ñnderungen im CAN-Bus erkennen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Sensoren umfassen die meisten Positionssensoren: Gaspedalposition, Glasposition, Automatikgetriebeposition, Z√ºndschl√ºsselposition. Dar√ºber hinaus sind dies Sensoren f√ºr Geschwindigkeit, Umdrehungen, Sensoren f√ºr die Beschleunigung des Lenkrads, die Beschleunigung des Gaspedals usw. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zun√§chst werden Positionssensoren am Beispiel des Gaspedal-Positionssensors behandelt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dazu schalten wir das Auto aus, schalten die Z√ºndung ein und dr√ºcken, ohne den Motor zu starten, das Gaspedal und √ºberwachen die √Ñnderung im CAN-Bus.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn das Gaspedal losgelassen wird, ist der Wert dieses Sensors in der Regel 0, und wenn Sie das Gaspedal dr√ºcken, steigt er auf einen bestimmten Wert an. Wir sehen einen solchen Parameter im ersten CAN in ID 280. Das f√ºnfte Byte wechselt von 0 (das Pedal wird losgelassen) zu FA (das Pedal wird ‚Äûauf den Boden‚Äú gedr√ºckt). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dx/k2/x9/dxk2x98zuq3b7bsbuv70t9yzzow.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir FA von HEX nach DEC √ºbertragen, erhalten wir die Zahl 250. Um das Gaspedal in Prozent (von 0 auf 100) zu dr√ºcken, m√ºssen wir unseren Wert mit 0,4 multiplizieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kommen wir nun zu Sensoren, die nicht in ein Byte passen, z. B. zur Motordrehzahl. Wir erh√∂hen und verringern die Motordrehzahl schrittweise, w√§hrend wir beobachten, was sich im CAN-Bus √§ndert. Die Motordrehzahl hat dieselbe ID wie das Gaspedal.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dx/k2/x9/dxk2x98zuq3b7bsbuv70t9yzzow.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem Sie mit dem Gaspedal gearbeitet haben, k√∂nnen Sie verstehen, dass die Daten hier in umgekehrter Reihenfolge sind. Das hei√üt, der √§lteste Teil befindet sich im 3. Byte (Anzahl Bytes von Null) und der j√ºngste im zweiten Byte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes m√ºssen Sie die Daten von HEX nach DEC √ºbertragen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oh/ev/zh/ohevzhgaspocuc3h3mp1o3z8ciw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes m√ºssen wir die tats√§chlichen Umdrehungen mit dem Drehzahlmesser oder mit diagnostischen Instrumenten bewerten. In meinem Fall hatte die Nadel am Drehzahlmesser eine Drehzahl von ca. 1600 U / min. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes teilen wir die Daten von CAN im Dezimalformat (6508) durch die Motordrehzahl vom Drehzahlmesser (1600), wir erhalten 4,0675. Runden Sie den Teiler angesichts des Fehlers bei der Bestimmung der Umdrehungen mit dem Auge auf 4 ab. Danach m√ºssen Sie die Messwerte an mehreren Stellen √ºberpr√ºfen. Stellen Sie dazu die Motordrehzahl auf unterschiedliche Drehzahlen ein und √ºberpr√ºfen Sie diese mit Daten vom CAN-Bus.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Konfigurator k√∂nnen Sie alle Koeffizienten in den Sensoreinstellungen ersetzen und die Geschwindigkeits√§nderungen in Echtzeit beobachten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher wird eine gro√üe Anzahl von Sensoren gesucht: Bremskr√§fte, Lenkradposition, Lenkradbeschleunigung, Fahrzeuggeschwindigkeit usw.</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Temperatursensoren</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es war sehr schwierig, die Temperatur in der Polo-Limousine zu finden. Zun√§chst wurde ein Byte gefunden, das sich beim Aufheizen des Autos langsam nach oben √§nderte. Danach begann die Suche nach den notwendigen Koeffizienten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir schlie√üen die Diagnose an, w√§hlen die Motortemperatur aus und vergleichen die Messwerte des CAN-Busses und die Daten aus der Diagnose. Wir erstellen eine Entsprechungstabelle und w√§hlen die Koeffizienten aus. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Ergebnis der Auswahl der Koeffizienten erschien eine Formel zur Berechnung der Temperatur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
XX * 0,75 - 48 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
wobei XX der Wert von 1 Byte von ID 288 im DEC ist. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hy/vj/nf/hyvjnf90gsz8naskw2ep1q7ifsa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach der Formel kann berechnet werden, dass der Screenshot eine Temperatur von </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
179 * 0,75 - 48 = 86,25 ¬∞ C hatte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dabei ist 179 die Dezimalzahl B3 aus dem ersten Byte von ID 288.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist jedoch ein schwieriger Fall. In vielen Autos ist die Temperatur viel leichter zu ermitteln. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da es schwierig ist, eine negative Zahl im Bus zu √ºbertragen, akzeptieren die Hersteller den Wert -40 ¬∞ C, -48 ¬∞ C oder -58 ¬∞ C als 0-Messungen. Daher schlie√üen wir die Diagnose an und sehen, wie hoch die Temperatur jetzt ist. F√ºgen Sie 40 (48 oder 58) hinzu und √ºbersetzen Sie es in HEX. Wir suchen nach der resultierenden Nummer im Stream. Wir warten darauf, dass sich die Temperatur der Maschine um ein Grad √§ndert, und √ºberpr√ºfen den gefundenen Wert. Wenn sich sein Wert ebenfalls um 1 erh√∂ht, ist dies der Sensor, den wir brauchen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist wichtig, die Werte vom CAN-Bus nicht mit den Werten der Diagnoseabfragen zu verwechseln. Wenn Sie gleichzeitig auf dem Bus nach Messwerten suchen und das Diagnosetool angeschlossen ist, werden auch Antworten auf Diagnoseanfragen im Bus angezeigt. Sie k√∂nnen anhand der ID identifiziert werden. Normalerweise sind mehr als 700 IDs Diagnoseanfragen und -antworten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auch die Temperatur des K√ºhlmittels kann jederzeit angefragt werden, √ºber diese Methode wird weiter unten im Abschnitt √ºber Sensoren mit Anfragen beschrieben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen eine andere Methode verwenden, um nach der Temperatur zu suchen: Physisch finden wir den K√ºhlmitteltemperatursensor (DTOZH) am Motor, schalten ihn aus und schlie√üen einen variablen Widerstand an die Fahrzeugverkabelung an. Wenn Sie dann den Widerstand drehen und dem CAN-Bus gem√§√ü der Methode zum Suchen nach sich schnell √§ndernden Daten folgen, k√∂nnen Sie die Motortemperaturwerte ermitteln.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Praxis habe ich diese Methode nicht verwendet, da ALT immer entweder im Stream war oder die Maschine um eine Anfrage gebeten hat. </font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Kilometerstand</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einer der wichtigsten Parameter f√ºr die Telematik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst m√ºssen Sie bewerten, welche Gr√∂√üe wir f√ºr eine Zahl suchen. </font><font style="vertical-align: inherit;">Wenn Sie 2 Bytes (16 Bit) Daten aufnehmen, passt die maximale Anzahl FF FF = 65.535 in diese. Das Auto kann eindeutig mehr als 65.000 fahren, was bedeutet, dass das Fahrzeug mindestens 24 Bit lang sein muss. </font><font style="vertical-align: inherit;">Es werden bereits 16 Millionen km passen, was eindeutig f√ºr einen Lauf ausreicht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber andererseits in verschiedenen Autos auf unterschiedliche Weise. </font><font style="vertical-align: inherit;">In der Polo-Limousine wird der Kilometerstand in km angegeben, in einigen franz√∂sischen mit einer Genauigkeit von 100 Metern. </font><font style="vertical-align: inherit;">dann kann die Zahl 32 und mehr Bits belegen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr die Suche sollten Sie den Kilometerstand vom Armaturenbrett des Autos nehmen und an HEX √ºbertragen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_g/y1/s6/_gy1s64ytgtjtxrkpxqccunxe2w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserem Fall sind es 5732 km. Wir √ºbersetzen es in HEX und erhalten 16 64. Als n√§chstes suchen Sie, um die Zeile zu finden, in der diese Kombination auftreten wird. Sie m√ºssen nach einem Byte suchen, dh zuerst nach 16 suchen und dann in den gefundenen Optionen pr√ºfen, ob sich neben der Nummer 16 auch die Nummer 64 befindet. Die Nummer 64 kann entweder links oder rechts von der Nummer 16 stehen. Da der Kilometerstand in diesem Auto nicht ist gro√ü, dann wird es h√∂chstwahrscheinlich neben der Zahl 64 auch 00 sein. Im Konfigurator gibt es eine bequeme Suche (STRG + F). Wenn Sie ein anderes Werkzeug verwenden, m√ºssen Sie manuell nach diesen Daten suchen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserem Fall wurde der Kilometerstand in 520 ID </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kt/qs/0l/ktqs0lxxwbl7frstr8vjz9qvc54.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
00 16 64 = 5732 km gefunden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zur √úberpr√ºfung ist es ratsam, noch einige Kilometer zu fahren und den Wert des gefundenen Sensors zu √ºberpr√ºfen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf die gleiche Weise wird der Kilometerstand vor dem Auftanken gesucht. </font><font style="vertical-align: inherit;">In diesem Auto √ºbertr√§gt das Armaturenbrett den Kilometerstand nicht zur Tankstelle auf den Reifen, daher erfolgt dies auf Anfrage.</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. F√ºllstandsensoren</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der zweitwichtigste Sensor f√ºr die Telematik ist der Kraftstoffstandsensor. Sie finden es entweder im Stream, der vorzuziehen ist, oder auf Anfrage (weniger vorzuziehen, aber in einigen Autos funktioniert es nicht anders). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst m√ºssen Sie die Kraftstoffstandwerte im Diagnosetool ermitteln. Mein Kraftstoffstand wurde im Kombiinstrument (17 Block) gefunden. Im Kombiinstrument sind die Messwerte vom F√ºllstandsensor in Litern angegeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt hat das Auto 21 Liter Kraftstoff. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/t6/r-/rq/t6r-rq-pcbo-urm-pmfurhg7iwk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir √ºbersetzen 21 von DEC nach HEX und erhalten die Nummer 15. Durch die Suche versuchen wir, sie zu finden. Der Stream enth√§lt die angegebene Nummer in ID 320. Wenn die Nummer nicht gefunden wird, sollten Sie versuchen, nach einem oder mehreren Werten zu suchen. In einigen Autos hat der Kraftstoff eine Genauigkeit von einem halben Liter. Sie m√ºssen also nach einem Wert suchen, der doppelt so gro√ü ist.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/l-/mn/tw/l-mntw35tvcsswdhb_kh8sicrb4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobald der Kraftstoffstand gefunden ist, m√ºssen einige Liter Kraftstoff in das Auto gegossen und das Ergebnis √ºberpr√ºft werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen den Gastank auch zerlegen, den FLS aus dem Tank ziehen und gem√§√ü den CAN-Bus-Werten bewegen. Oder ziehen Sie den Stecker vom FLS ab und schlie√üen Sie dort einen variablen Widerstand an. Wenn Sie ihn drehen und den √Ñnderungen folgen, finden Sie den Kraftstoffstandsensor. Wenn Sie sich f√ºr eine Demontage entscheiden, sollte der Kraftstoffstand anhand der Methode zur Suche nach sich schnell √§ndernden Sensoren ermittelt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Suche sollten auch Daten mit IDs √ºber 700 nicht ber√ºcksichtigt werden. Dies sind Diagnoseabfragen. Nach dem Trennen des Diagnoseger√§ts verschwinden diese Daten. Wir werden uns im Folgenden ausf√ºhrlicher mit den Anfragen befassen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So sieht beispielsweise die Antwort auf die Fragen der Diagnoseger√§te zum Kraftstoffstand vom Armaturenbrett aus aus.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/il/mj/pn/ilmjpn6qr8tru39qmxufwwwnpso.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Kraftstoffstand (in Prozent) ist auch in Standard-OBDII-Abfragen enthalten, in der VAG-Gruppe werden jedoch nicht immer die richtigen Daten angezeigt. </font><font style="vertical-align: inherit;">Beim Skoda Rapid und Skoda Oktavia mit vollem Tank zeigt die Diagnose einen Kraftstoffstand von 85%.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cp/bc/hg/cpbchg8ntk3n1qjolnygoq5zr_c.png"><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. Anzeigesensoren</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anzeigesensoren sind bin√§ren Sensoren sehr √§hnlich und sollten mit derselben Methode durchsucht werden. Diese Sensoren enthalten eine Vielzahl von Symbolen im Dashboard. Beispielsweise befindet sich der Status des Check Engine-Symbols im ersten Byte von ID 480. Wenn die Z√ºndung in diesem Sensor 2C eingeschaltet ist. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8r/sx/de/8rsxdelhyjgtedcykc0f4utt71s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Start, wenn sich das Check Engine (CE) -Symbol ausschaltet, befindet sich 00 in diesem Sensor. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8r/uq/su/8ruqsurccmkip9yhssm-8flrp00.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun bleibt die Frage, welches Bit f√ºr das CE-Symbol verantwortlich ist. Wir √ºbersetzen 2C in BIN und erhalten die Nummer 0010 1100. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kopieren Sie anschlie√üend die gesamte 480-ID, √§ndern Sie das erste Byte in 2C (0010 1100) und versuchen Sie, dieses Paket an das Auto zu senden. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beachtung!</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie Daten an das Auto senden, ist dies nicht immer sicher. Sie k√∂nnen etwas besch√§digen oder den Kilometerstand erh√∂hen. </font><font style="vertical-align: inherit;">Es lohnt sich nur, auf diese Methode zur√ºckzugreifen, wenn der Sensor nicht durch die Suche nach bin√§ren Sensoren gefunden werden konnte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In meinem Fall habe ich an ein abgewickeltes Auto gesendet (was nicht empfohlen wird) und mein CE- und EPC-Symbol blinkt auf meiner Aufr√§umaktion. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fj/ci/gb/fjcigbvg8hop-hhliayqzsz81fy.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann senden wir anstelle von 2C (0010 1100) 08 (0000 1000). </font><font style="vertical-align: inherit;">Bei ordentlichem CE blinkt. </font><font style="vertical-align: inherit;">Daher sind 3 Bits f√ºr dieses Symbol verantwortlich. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kl/tl/up/kltlupgvkuuktk8bxujsft2shb8.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie 04 (0000 0100) senden, blinkt das EPC-Symbol.</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. Sensoren mit Anfragen</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nicht alle Daten k√∂nnen im Stream gefunden werden. In einem Diesel-VW-Transporter T4 befindet sich beispielsweise keine Motortemperatur im Strom. Sie ist nicht aufger√§umt. Daher m√ºssen Sie das Auto nach diesen Parametern fragen. Gleiches gilt f√ºr den Kraftstoffstand des Rio \ Solaris. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Beispiel versuchen wir, den Kraftstoffstand der Polo-Limousine zu erfragen. Wir gehen zu Block 17, wie wir es im Absatz √ºber die Suche nach dem Kraftstoffstand getan haben, und fragen das Armaturenbrett. Nach der Analyse der Anfragen sehen wir, dass die Diagnose mit dem folgenden Befehl nach dem Kraftstoffstand fragt: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/p4/xo/qg/p4xoqgno99-xktykwtl5gagpo1y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und als Antwort kommt sie zu ihr: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/il/mj/pn/ilmjpn6qr8tru39qmxufwwwnpso.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kopieren Sie als n√§chstes die ID 714, schalten Sie das Diagnosetool aus und versuchen Sie, eine Anfrage an das Auto zu senden. Wenn die ID 77E dieselbe Antwort erh√§lt wie beim Anschlie√üen der Diagnose, haben wir ein Paket mit einem Kraftstoffstand (4 Byte. HEX 15 = DEC 21) von 21 Litern erhalten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vega MTX verf√ºgt √ºber integrierte Tools f√ºr die Arbeit mit Sensoren bei Abfragen. Dort k√∂nnen Sie konfigurieren, dass Anforderungen gesendet werden, nachdem die Z√ºndung in einem bestimmten Intervall oder unter bestimmten Bedingungen eingeschaltet wurde. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies schlie√üt mit der Methode zum Suchen von Daten im CAN-Bus. Wenn jemand wei√ü, mit welchen Methoden er die erforderlichen Daten auf dem CAN-Bus findet oder seine Erfahrungen teilt, werde ich ihnen gerne zuh√∂ren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bevor ich diesen Artikel schrieb, habe ich ein Video zu diesem Thema gemacht. Das Video enth√§lt weitere Informationen zum Herstellen einer Verbindung zum CAN-Bus des Fahrzeugs in Verbindung mit dem Konfigurator und dem Dateiserver</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/DkdOdCKI9HQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link zum Konfigurator</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Der Server verf√ºgt √ºber Einstellungen f√ºr einige Autos, Lastwagen und landwirtschaftliche Maschinen. </font><font style="vertical-align: inherit;">Alle Dateien sind verschl√ºsselt. Sie k√∂nnen sehen, welche Sensoren im CAN des Fahrzeugs sichtbar sind. </font><font style="vertical-align: inherit;">Wenn eine Verbindung hergestellt ist, werden die Sensorwerte angezeigt, die Adressen werden jedoch nicht angezeigt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fortsetzung folgt.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de497116/index.html">Die unbemannten Lastwagen von Starsky Robotics gehen zu Ende</a></li>
<li><a href="../de497118/index.html">[Prognose] Werden alle unbemannten Lastwagen ein Ende haben oder nur Starsky Robotics?</a></li>
<li><a href="../de497126/index.html">Backlog-Scoring- und Priorisierungstechniken</a></li>
<li><a href="../de497132/index.html"># SaveFirst-Initiative zur Unterst√ºtzung sozial wichtiger Projekte</a></li>
<li><a href="../de497136/index.html">"Save Concord" oder ein Bericht aus den Tests des russischen Radarsystems zur Suche nach Fremdk√∂rpern auf der Landebahn</a></li>
<li><a href="../de497142/index.html">Wie wir der inDriver Android-Anwendung Harmony OS-Unterst√ºtzung hinzugef√ºgt haben</a></li>
<li><a href="../de497144/index.html">Keil f√ºr Keil: Verwendung des PIV5-Virus zur Herstellung eines Impfstoffs gegen MERS-CoV und m√∂glicherweise gegen SARS-CoV-2</a></li>
<li><a href="../de497146/index.html">Angewandte Kryptographie. Wie wir Bitcoins f√ºr 300.000 Dollar restaurierten</a></li>
<li><a href="../de497148/index.html">Erstellen einer Desktop-Anwendung mit Golang und Fyne</a></li>
<li><a href="../de497152/index.html">Wo das Produktherz lebt: Metriken zur Messung des Gl√ºcks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>