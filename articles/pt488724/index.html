<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéóÔ∏è üë∏üèæ üë©üèΩ‚Äçüíª 6 Melhores Pr√°ticas de Seguran√ßa para Go üëáüèΩ üçÑ üßîüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Uma tradu√ß√£o do artigo foi preparada especificamente para os alunos do curso Golang Developer .
 
 
 
 
 A popularidade de Golang aumentou significati...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>6 Melhores Pr√°ticas de Seguran√ßa para Go</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/488724/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma tradu√ß√£o do artigo foi preparada especificamente para os alunos do curso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Golang Developer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/g3/jd/s7/g3jds7zwidxpwd-ubopyb-bjhle.png"><br>
<hr><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A popularidade de Golang aumentou significativamente nos √∫ltimos anos. Projetos bem-sucedidos como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e Terraform fizeram uma grande aposta nessa linguagem de programa√ß√£o. O Go tornou-se recentemente o padr√£o de fato para a cria√ß√£o de ferramentas de linha de comando. Em termos de seguran√ßa, o Go foi gerenciado com sucesso de acordo com seus relat√≥rios de vulnerabilidade, possuindo apenas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um registro CVE desde 2002</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, a aus√™ncia de vulnerabilidades n√£o significa que a linguagem de programa√ß√£o seja altamente segura. N√≥s, humanos, podemos criar aplicativos inseguros se n√£o seguirmos certas regras. Por exemplo, conhecendo as </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">regras para escrever c√≥digo seguro do OWASP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, podemos pensar em como aplicar esses m√©todos ao usar o Go. </font><font style="vertical-align: inherit;">E √© exatamente isso que farei desta vez. </font><font style="vertical-align: inherit;">Neste post, mostrarei seis pr√°ticas a serem consideradas ao desenvolver com o Go.</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Verifique a entrada</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A verifica√ß√£o da entrada do usu√°rio √© necess√°ria n√£o apenas para fins funcionais, mas tamb√©m ajuda a evitar ataques de criminosos cibern√©ticos que nos enviam dados intrusivos que podem danificar o sistema. Al√©m disso, voc√™ ajuda os usu√°rios a usar essa ferramenta com mais confian√ßa, impedindo-os de cometer erros tolos e comuns. Por exemplo, voc√™ pode impedir que um usu√°rio tente excluir v√°rias entradas de uma s√≥ vez. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para testar a entrada do usu√°rio, voc√™ pode usar pacotes Go nativos, como strconv, para manipular a convers√£o de cadeias para outros tipos de dados. O Go tamb√©m suporta express√µes regulares com </font></font><code>regexp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para verifica√ß√µes complexas. Embora o Go prefira usar bibliotecas nativas, existem pacotes de terceiros, como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">validador</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Com o validador, voc√™ pode habilitar a valida√ß√£o para estruturas ou campos individuais com muito mais facilidade. </font><font style="vertical-align: inherit;">Por exemplo, o c√≥digo a seguir verifica se a estrutura </font></font><code>User</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cont√©m um endere√ßo de email v√°lido:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"fmt"</span><font></font>
<font></font>
	<span class="hljs-string">"gopkg.in/go-playground/validator.v9"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {<font></font>
	Email <span class="hljs-keyword">string</span> <span class="hljs-string">`json:"email" validate:"required,email"`</span>
	Name  <span class="hljs-keyword">string</span> <span class="hljs-string">`json:"name" validate:"required"`</span><font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
	v := validator.New()<font></font>
	a := User{<font></font>
		Email: <span class="hljs-string">"a"</span>,<font></font>
	}<font></font>
<font></font>
	err := v.Struct(a)<font></font>
<font></font>
	<span class="hljs-keyword">for</span> _, e := <span class="hljs-keyword">range</span> err.(validator.ValidationErrors) {<font></font>
		fmt.Println(e)<font></font>
	}<font></font>
}</code></pre><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Use modelos HTML</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma vulnerabilidade cr√≠tica comum √© o script entre sites ou XSS. A principal explora√ß√£o √© que um invasor pode injetar c√≥digo malicioso no aplicativo para modificar a sa√≠da. Por exemplo, algu√©m pode enviar c√≥digo JavaScript como parte de uma string de consulta em um URL. Quando o aplicativo retorna o valor do usu√°rio, o c√≥digo JavaScript pode ser executado. Portanto, como desenvolvedor, voc√™ deve estar ciente dessa possibilidade e limpar os dados inseridos pelo usu√°rio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Go possui um pacote </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">html / template</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para codificar o que o aplicativo retorna ao usu√°rio. Assim, em vez do navegador fazer entradas como</font></font><code><code>&lt;</code>script<code>&gt;</code>alert(‚Äò !‚Äô);<code>&lt;</code>/script<code>&gt;</code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ele dar√° um aviso; </font><font style="vertical-align: inherit;">Voc√™ pode codificar a entrada e o aplicativo processar√° a entrada como c√≥digo HTML t√≠pico impresso em um navegador. </font><font style="vertical-align: inherit;">Um servidor HTTP que retorna um modelo HTML ter√° a seguinte apar√™ncia:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"html/template"</span>
	<span class="hljs-string">"net/http"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">handler</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {<font></font>
	param1 := r.URL.Query().Get(<span class="hljs-string">"param1"</span>)<font></font>
	tmpl := template.New(<span class="hljs-string">"hello"</span>)<font></font>
	tmpl, _ = tmpl.Parse(<span class="hljs-string">`{{define "T"}}{{.}}{{end}}`</span>)<font></font>
	tmpl.ExecuteTemplate(w, <span class="hljs-string">"T"</span>, param1)<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
	http.HandleFunc(<span class="hljs-string">"/"</span>, handler)<font></font>
	http.ListenAndServe(<span class="hljs-string">":8080"</span>, <span class="hljs-literal">nil</span>)<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas existem bibliotecas de terceiros que voc√™ pode usar ao desenvolver aplicativos da Web no Go. </font><font style="vertical-align: inherit;">Por exemplo, o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kit de ferramentas da web Gorilla</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que inclui bibliotecas para ajudar os desenvolvedores a codificar valores de autentica√ß√£o de cookies. </font><font style="vertical-align: inherit;">H√° tamb√©m o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nosurf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que √© um pacote HTTP que ajuda a impedir a falsifica√ß√£o de solicita√ß√µes entre sites ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSRF</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Proteja-se da inje√ß√£o de SQL </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ est√° desenvolvendo h√° algum tempo, pode conhecer as inje√ß√µes de SQL, que ainda ocupam a primeira posi√ß√£o no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">topo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">OWASP</font></a><font style="vertical-align: inherit;"> . No entanto, existem alguns pontos espec√≠ficos que voc√™ deve considerar ao usar o Go. A primeira coisa que voc√™ precisa fazer √© garantir que o usu√°rio que se conecta ao banco de dados tenha direitos limitados. Tamb√©m √© uma boa pr√°tica desinfetar a entrada do usu√°rio, conforme descrito na se√ß√£o anterior, ou escapar de caracteres especiais e usar a fun√ß√£o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTMLEscapeString</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> do pacote de modelos HTML. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas o trecho de c√≥digo mais importante que voc√™ precisa incluir √© o uso de consultas parametrizadas. No Go, voc√™ n√£o prepara uma express√£o (esta √© uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Declara√ß√£o Preparada</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) em conex√£o; Voc√™ o prepara no banco de dados. Aqui est√° um exemplo de como usar consultas parametrizadas:</font></font><br>
<br>
<pre><code class="go hljs">customerName := r.URL.Query().Get(<span class="hljs-string">"name"</span>)<font></font>
db.Exec(<span class="hljs-string">"UPDATE creditcards SET name=? WHERE customerId=?"</span>, customerName, <span class="hljs-number">233</span>, <span class="hljs-number">90</span>)</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, e se o mecanismo de banco de dados n√£o suportar o uso de express√µes preparadas? </font><font style="vertical-align: inherit;">Ou, se isso afeta o desempenho da consulta? </font><font style="vertical-align: inherit;">Bem, voc√™ pode usar a fun√ß√£o db.Query (), mas primeiro certifique-se de limpar a entrada do usu√°rio, conforme mostrado nas se√ß√µes anteriores. </font><font style="vertical-align: inherit;">Tamb√©m existem bibliotecas de terceiros, como o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sqlmap</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , para impedir a inje√ß√£o de SQL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apesar de todos os nossos esfor√ßos, algumas vezes as vulnerabilidades deslizam ou entram em nossos aplicativos por meio de terceiros. </font><font style="vertical-align: inherit;">Para proteger seus aplicativos da Web contra ataques cr√≠ticos, como a inje√ß√£o de SQL, considere o uso de uma plataforma de gerenciamento de seguran√ßa de aplicativos, como o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sqreen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Criptografar informa√ß√µes confidenciais</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O fato de ser dif√≠cil ler a string, por exemplo, no formato base 64, n√£o significa que o valor oculto seja secreto. Voc√™ precisa de uma maneira de criptografar informa√ß√µes que os invasores n√£o podem decodificar facilmente. As informa√ß√µes t√≠picas que voc√™ deseja criptografar s√£o senhas de bancos de dados, senhas de usu√°rios ou at√© n√∫meros de seguran√ßa social. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A OWASP tem v√°rias </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recomenda√ß√µes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre o que algoritmos de criptografia usado, por exemplo, </font></font><code>bcrypt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>PDKDF2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Argon2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code>scrypt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Felizmente, existe um pacote Go que inclui implementa√ß√µes confi√°veis ‚Äã‚Äãpara criptografar informa√ß√µes - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">criptografia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . O c√≥digo a seguir √© um exemplo de uso </font></font><code>bcrypt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"database/sql"</span>
	<span class="hljs-string">"context"</span>
	<span class="hljs-string">"fmt"</span><font></font>
<font></font>
	<span class="hljs-string">"golang.org/x/crypto/bcrypt"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
	ctx := context.Background()<font></font>
	email := []<span class="hljs-keyword">byte</span>(<span class="hljs-string">"john.doe@somedomain.com"</span>)<font></font>
	password := []<span class="hljs-keyword">byte</span>(<span class="hljs-string">"47;u5:B(95m72;Xq"</span>)<font></font>
<font></font>
	hashedPassword, err := bcrypt.GenerateFromPassword(password, bcrypt.DefaultCost)<font></font>
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-built_in">panic</span>(err)<font></font>
	}<font></font>
<font></font>
	stmt, err := db.PrepareContext(ctx, <span class="hljs-string">"INSERT INTO accounts SET hash=?, email=?"</span>)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-built_in">panic</span>(err)<font></font>
	}<font></font>
	result, err := stmt.ExecContext(ctx, hashedPassword, email)<font></font>
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-built_in">panic</span>(err)<font></font>
	}<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observe que voc√™ ainda precisa ter cuidado ao transferir informa√ß√µes entre servi√ßos. </font><font style="vertical-align: inherit;">Voc√™ n√£o gostaria de enviar dados do usu√°rio em texto sem formata√ß√£o. </font><font style="vertical-align: inherit;">N√£o importa se o aplicativo criptografa os dados do usu√°rio antes de salvar. </font><font style="vertical-align: inherit;">Suponha que algu√©m na Internet possa ouvir seu tr√°fego e manter registros das solicita√ß√µes do seu sistema. </font><font style="vertical-align: inherit;">Um invasor pode usar essas informa√ß√µes para combin√°-las com outros dados de outros sistemas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Forne√ßa conectividade HTTPS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atualmente, a maioria dos navegadores exige que o HTTPS funcione em todos os sites. </font><font style="vertical-align: inherit;">O Chrome, por exemplo, exibir√° um aviso se o site n√£o usar HTTPS. </font><font style="vertical-align: inherit;">O departamento de seguran√ßa da informa√ß√£o pode usar a criptografia de tr√¢nsito para comunica√ß√£o entre servi√ßos como uma pol√≠tica. </font><font style="vertical-align: inherit;">Ou seja, para garantir a seguran√ßa da conex√£o de tr√¢nsito no sistema, n√£o se trata apenas de ouvir o aplicativo na porta 443. Voc√™ tamb√©m precisa usar os certificados apropriados e o HTTPS para impedir que os invasores fa√ßam o downgrade do protocolo para HTTP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° um trecho de c√≥digo para um aplicativo Web que fornece e usa o protocolo HTTPS:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"crypto/tls"</span>
    <span class="hljs-string">"log"</span>
    <span class="hljs-string">"net/http"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
    mux := http.NewServeMux()<font></font>
    mux.HandleFunc(<span class="hljs-string">"/"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(w http.ResponseWriter, req *http.Request)</span></span> {<font></font>
        w.Header().Add(<span class="hljs-string">"Strict-Transport-Security"</span>, <span class="hljs-string">"max-age=63072000; includeSubDomains"</span>)<font></font>
        w.Write([]<span class="hljs-keyword">byte</span>(<span class="hljs-string">"This is an example server.\n"</span>))<font></font>
    })<font></font>
    cfg := &amp;tls.Config{<font></font>
        MinVersion:               tls.VersionTLS12,<font></font>
        CurvePreferences:         []tls.CurveID{tls.CurveP521, tls.CurveP384, tls.CurveP256},<font></font>
        PreferServerCipherSuites: <span class="hljs-literal">true</span>,<font></font>
        CipherSuites: []<span class="hljs-keyword">uint16</span>{<font></font>
            tls.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,<font></font>
            tls.TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA,<font></font>
            tls.TLS_RSA_WITH_AES_256_GCM_SHA384,<font></font>
            tls.TLS_RSA_WITH_AES_256_CBC_SHA,<font></font>
        },<font></font>
    }<font></font>
    srv := &amp;http.Server{<font></font>
        Addr:         <span class="hljs-string">":443"</span>,<font></font>
        Handler:      mux,<font></font>
        TLSConfig:    cfg,<font></font>
        TLSNextProto: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(*http.Server, *tls.Conn, http.Handler)</span>, 0),</span><font></font>
    }<font></font>
    log.Fatal(srv.ListenAndServeTLS(<span class="hljs-string">"tls.crt"</span>, <span class="hljs-string">"tls.key"</span>))<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observe que o aplicativo escutar√° na porta 443. A pr√≥xima linha √© a linha que fornece a configura√ß√£o HTTPS:</font></font><br>
<br>
<pre><code class="go hljs">w.Header().Add(<span class="hljs-string">"Strict-Transport-Security"</span>, <span class="hljs-string">"max-age=63072000; includeSubDomains"</span>)</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ tamb√©m pode especificar o nome do servidor na configura√ß√£o do TLS desta maneira:</font></font><br>
<pre><code class="go hljs">config := &amp;tls.Config{ServerName: <span class="hljs-string">"yourSiteOrServiceName"</span>}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â sempre recomend√°vel que voc√™ use criptografia de backend, mesmo que seu aplicativo da Web seja apenas para comunica√ß√£o interna. </font><font style="vertical-align: inherit;">Imagine se, por algum motivo, um invasor pudesse ouvir seu tr√°fego interno. </font><font style="vertical-align: inherit;">Sempre que poss√≠vel, √© sempre melhor elevar a fasquia para poss√≠veis futuros atacantes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. Preste aten√ß√£o aos erros e logs.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por √∫ltimo, mas n√£o menos importante, tratamento de erros e login em seus aplicativos Go. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para solucionar problemas de produ√ß√£o com sucesso, voc√™ precisa configurar corretamente seus aplicativos. </font><font style="vertical-align: inherit;">Voc√™ deve levar em considera√ß√£o os erros que voc√™ mostra aos usu√°rios. </font><font style="vertical-align: inherit;">Voc√™ n√£o gostaria que os usu√°rios soubessem o que exatamente deu errado. </font><font style="vertical-align: inherit;">Os invasores podem usar essas informa√ß√µes para determinar quais servi√ßos e tecnologias voc√™ usa. </font><font style="vertical-align: inherit;">Al√©m disso, lembre-se de que, embora os logs sejam maravilhosos, eles s√£o armazenados em algum lugar. </font><font style="vertical-align: inherit;">E se os logs ca√≠rem nas m√£os erradas, eles poder√£o ser usados ‚Äã‚Äãpara incorporar o pr√≥ximo ataque no sistema.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, a primeira coisa que voc√™ precisa aprender ou lembrar √© que n√£o h√° exce√ß√µes no Go. </font><font style="vertical-align: inherit;">Isso significa que voc√™ precisa lidar com os erros de maneira diferente do que em outros idiomas. </font><font style="vertical-align: inherit;">O padr√£o √© assim:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
    <span class="hljs-comment">//  </span>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Go tamb√©m oferece uma biblioteca interna para trabalhar com logs. </font><font style="vertical-align: inherit;">O c√≥digo mais simples √© assim:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"log"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
	log.Print(<span class="hljs-string">"Logging in Go!"</span>)<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas existem bibliotecas de terceiros para manter logs. </font><font style="vertical-align: inherit;">Alguns destes s√£o </font></font><code>logrus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>glog</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>loggo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Aqui est√° um pequeno trecho de c√≥digo usando </font></font><code>logrus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"os"</span><font></font>
<font></font>
	log <span class="hljs-string">"github.com/sirupsen/logrus"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
	file, err := os.OpenFile(<span class="hljs-string">"info.log"</span>, os.O_CREATE|os.O_APPEND, <span class="hljs-number">0644</span>)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {<font></font>
		log.Fatal(err)<font></font>
	}<font></font>
<font></font>
	<span class="hljs-keyword">defer</span> file.Close()<font></font>
<font></font>
	log.SetOutput(file)<font></font>
	log.SetFormatter(&amp;log.JSONFormatter{})<font></font>
	log.SetLevel(log.WarnLevel)<font></font>
<font></font>
	log.WithFields(log.Fields{<font></font>
		<span class="hljs-string">"animal"</span>: <span class="hljs-string">"walrus"</span>,
		<span class="hljs-string">"size"</span>:   <span class="hljs-number">10</span>,<font></font>
	}).Info(<span class="hljs-string">"A group of walrus emerges from the ocean"</span>)<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por fim, certifique-se de aplicar todas as recomenda√ß√µes anteriores, como criptografia e limpeza dos dados que voc√™ coloca nos logs.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sempre h√° espa√ßo para crescer</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essas diretrizes s√£o o m√≠nimo que deve ser espec√≠fico para seus aplicativos Go. </font><font style="vertical-align: inherit;">No entanto, se o seu aplicativo for uma ferramenta de linha de comando, voc√™ n√£o precisar√° de m√©todos de criptografia para o tr√¢nsito. </font><font style="vertical-align: inherit;">Mas o restante das dicas de seguran√ßa se aplica a quase todos os tipos de aplicativos. </font><font style="vertical-align: inherit;">Se voc√™ quiser saber mais, h√° um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">livro da OWASP especificamente para Go</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que aborda alguns t√≥picos. </font><font style="vertical-align: inherit;">H√° tamb√©m um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reposit√≥rio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contendo links para estruturas, bibliotecas e outras ferramentas de seguran√ßa no Go.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o importa o que voc√™ acaba fazendo, lembre-se de que voc√™ sempre pode aumentar a seguran√ßa do seu aplicativo. </font><font style="vertical-align: inherit;">Os invasores sempre encontrar√£o novas maneiras de explorar vulnerabilidades; portanto, tente trabalhar constantemente com a seguran√ßa do seu aplicativo.</font></font><br>
<hr><br>
<i>     . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> ‚Äî ,            ,           ,  .NET, Node.js  Java,     Docker.</i><br>
<br>
<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   .</a></b></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt488708/index.html">Salvando a l√≥gica de filtragem no Swift Combine. Parte 2</a></li>
<li><a href="../pt488712/index.html">Check Point WatchTower - gerencie o NGFW a partir de um smartphone</a></li>
<li><a href="../pt488716/index.html">Materiais da mitap de Kazan no frontend: Phoenix LiveView, frontops, JSON: API</a></li>
<li><a href="../pt488720/index.html">Raspagem da web Parte 1</a></li>
<li><a href="../pt488722/index.html">Semana 08 de seguran√ßa: retorno de v√≠rus</a></li>
<li><a href="../pt488726/index.html">Entrevista com o engenheiro da NIPTB Onega - vencedor da WorldSkills Hi-Tech sobre trabalho, campeonato e CAD</a></li>
<li><a href="../pt488728/index.html">Duas maneiras de aumentar o pre√ßo do petr√≥leo, ou ataques de petr√≥leo e g√°s como forma de influenciar os √≠ndices de a√ß√µes</a></li>
<li><a href="../pt488730/index.html">Novos padr√µes russos para a Internet das coisas, fabrica√ß√£o inteligente e cidade inteligente</a></li>
<li><a href="../pt488732/index.html">Talented Mr. Simon: Como habilidades √∫nicas e impress√£o 3D podem mudar o processo de produ√ß√£o</a></li>
<li><a href="../pt488736/index.html">O trabalho remoto est√° ganhando for√ßa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>