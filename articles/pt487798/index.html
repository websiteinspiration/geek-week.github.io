<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö° ‚ùï üíáüèº Como migramos do Oracle JDK e Java Web Start para AdoptOpenJDK e OpenWebStart ü§õ üíÖüèΩ üêê</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dia bom. 
 
 Neste artigo, falarei sobre a "moderniza√ß√£o" na empresa em que trabalho, de uma ferramenta como Java Web Start, ou melhor, sobre substitu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Como migramos do Oracle JDK e Java Web Start para AdoptOpenJDK e OpenWebStart</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487798/"><img src="https://habrastorage.org/webt/wy/dl/dd/wydlddv9m1-mxrvnfor6vxdifra.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dia bom. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo, falarei sobre a "moderniza√ß√£o" na empresa em que trabalho, de uma ferramenta como Java Web Start, ou melhor, sobre substitu√≠-la por uma solu√ß√£o alternativa de c√≥digo-fonte.</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre mim</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meu nome √© Ildar e trabalho para uma empresa alem√£ que, como muitas empresas alem√£s, usa a pilha de tecnologia antiga e tenta migrar para uma pilha mais nova. </font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problema</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou come√ßar com uma descri√ß√£o do problema. Nossa empresa possui a parte mais importante do sistema, que √© um aplicativo herdado escrito em java 6 e parcialmente em java 8. Foi lan√ßado em java 8. Para usar esse aplicativo para produ√ß√£o, os usu√°rios baixam o arquivo jnlp do site e o executam em casa em computadores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, a empresa </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">feliz</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> existido por um </font><font style="vertical-align: inherit;">longo tempo </font><font style="vertical-align: inherit;">at√© que a Oracle anunciou o fim das ajudas para a vers√£o 8 de java, n√£o marcou tecnologia Java Web Start como obsoleto, e decidiu cort√°-la para fora de java 11. Isso significava que ainda existem aplica√ß√µes mais JWS, dos quais h√° muitos n√£o receber√°, incluindo atualiza√ß√µes de seguran√ßa. Obviamente, poucos podem aceitar isso. Entusiastas de Karakun tamb√©m decidiram escrever seu substituto para o JWS.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em nossa empresa, h√° algum tempo, eles come√ßaram a reescrever o aplicativo usando a inicializa√ß√£o do Spring para o back-end e o React para o front-end, mas o processo n√£o √© r√°pido e n√£o h√° atualiza√ß√µes agora.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Procure uma solu√ß√£o</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, a equipe de desenvolvimento enfrentou a quest√£o de encontrar solu√ß√µes alternativas. Em geral, vale a pena reconhecer que h√° mais de uma solu√ß√£o para o problema. Inicialmente, os arquitetos selecionaram duas solu√ß√µes </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetDown</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e o mesmo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWebStart</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . No momento da decis√£o inicial, a escolha caiu na primeira op√ß√£o, pois o OpenWebStart nem sequer foi lan√ßado na primeira vers√£o (havia apenas alguns desenvolvimentos e planos). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada uma das solu√ß√µes tinha seus pr√≥s e contras, mas a empresa decidiu n√£o esperar pelo lan√ßamento do OpenWebStart e come√ßar a implementar a prova de conceito com base no GetDown. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de passar algumas semanas, um dos desenvolvedores lidou com a tarefa e percebemos que, em princ√≠pio, podemos implementar uma solu√ß√£o completa que atenda aos nossos requisitos, gastando um pouco mais de tempo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enquanto isso, outras tarefas urgentes chegaram e a equipe de desenvolvimento se distraiu da transi√ß√£o do est√°gio PoC para a implementa√ß√£o completa da substitui√ß√£o do Java Web Start.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prazos</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos viveram felizes at√© que a ger√™ncia percebeu que j√° era hora de terminar e com a substitui√ß√£o do Java Web Start. </font><font style="vertical-align: inherit;">At√© o momento, eu n√£o estava envolvido nesse projeto, mas aqui eles me conectaram tamb√©m. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, decidi procurar informa√ß√µes sobre solu√ß√µes para o nosso problema novamente. </font><font style="vertical-align: inherit;">Ent√£o, digamos, entre na solu√ß√£o do zero. </font><font style="vertical-align: inherit;">Assim, descobri a exist√™ncia do OpenWebStart. </font><font style="vertical-align: inherit;">Eu testei localmente, tive alguns problemas (depois tamb√©m encontramos outros) e os resolvi. </font><font style="vertical-align: inherit;">Como resultado, todos gostaram da solu√ß√£o. </font><font style="vertical-align: inherit;">Desnecess√°rio dizer que a ger√™ncia gostou especialmente porque n√£o precisaria gastar tempo em desenvolvimento, como √© o caso do GetDown. </font><font style="vertical-align: inherit;">Mas, no final, gastamos tempo fazendo nosso sistema funcionar com o OpenWebStart.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informa√ß√µes r√°pidas sobre o OpenWebStart</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O OpenWebStart √© baseado em outra implementa√ß√£o do Java Web Start - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IcedTea-Web</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e na especifica√ß√£o JNLP </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSR-56</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">No momento da reda√ß√£o deste artigo, o projeto existe na vers√£o 1.1.4 e planeja implementar os principais recursos do Java Web Start (o progresso pode ser observado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o vejo o ponto de listar todas as configura√ß√µes poss√≠veis; pode levar muito tempo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√£o apenas alguns deles:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gerenciamento de cache (tamanho, localiza√ß√£o ...),</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configura√ß√µes de seguran√ßa (permitindo que os usu√°rios executem um aplicativo n√£o assinado por certificados, exibindo ou n√£o pop-ups de aviso ...),</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adicione endere√ßos de servidor √† lista branca,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configura√ß√µes de depura√ß√£o remota,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gerenciamento de certificado de seguran√ßa</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controle de vers√£o JRE / JDK,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de outros</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recursos do uso do OpenWebStart e os problemas que encontramos</font></font></h4><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instale o OpenWebStart</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instalar o OpenWebStart √© bastante simples. </font><font style="vertical-align: inherit;">Basta </font><font style="vertical-align: inherit;">baixar o arquivo de instala√ß√£o da sua plataforma </font><font style="vertical-align: inherit;">no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e seguir as instru√ß√µes do instalador. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas isso √© m√° sorte. </font><font style="vertical-align: inherit;">No nosso caso, os usu√°rios s√£o cerca de 10.000 clientes, para cada um dos quais o servi√ßo de suporte de nossa empresa deve instalar essa ferramenta. </font><font style="vertical-align: inherit;">A solu√ß√£o foi encontrada rapidamente: a chamada instala√ß√£o em segundo plano est√° dispon√≠vel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ precisa fazer o upload do arquivo de instala√ß√£o em cada um dos computadores e executar um comando especial (e para isso a empresa j√° possui uma ferramenta):</font></font><br>
<br>
<pre><code class="bash hljs">OpenWebStart_windows_Setup.exe -q -varfile response.varfile
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
, em que response.varfile √© um arquivo com algumas configura√ß√µes que podem ser definidas com anteced√™ncia pelo instalador. Por exemplo, a pasta na qual instalar o OpenWebStart e algumas outras. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, n√≥s lidamos com este problema. Al√©m disso, seria necess√°rio que todos os clientes instalassem, de alguma forma, uma vers√£o espec√≠fica do AdoptOpenJDK e os vinculassem ao OpenWebStart, o que √© feito facilmente atrav√©s da interface do usu√°rio, mas esse n√£o √© o nosso caso. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0w/w4/3l/0ww43l5ljpbdwqa766ywant6yac.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encontramos nas configura√ß√µes que voc√™ pode especificar o URL do qual o OpenWebStart utilizar√° o arquivo de configura√ß√µes, no qual voc√™ pode especificar o URL para o JRE de que precisamos. E a pr√≥pria URL com o arquivo de configura√ß√µes pode ser especificada no arquivo response.varf mencionado acima (√© assim que √© complicado). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O arquivo de configura√ß√µes JSON em si com diferentes vers√µes do JRE √© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o seguinte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nas configura√ß√µes, voc√™ tamb√©m pode especificar a vers√£o e o fornecedor do JRE, caso v√°rios JREs sejam especificados no arquivo JSON. </font><font style="vertical-align: inherit;">Indicamos apenas um e carregamos o arquivo JSON e o archive com o JRE necess√°rio no bucket do Amazon S3. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s o teste, descobrimos que, com a vers√£o do JRE que baixamos, o aplicativo n√£o inicia ... Acontece que nosso Java possui uma estrutura ligeiramente diferente no arquivo morto. </font><font style="vertical-align: inherit;">Criamos um script em lote que reconstruiu a estrutura do arquivo JRE. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Bem, agora tudo vai funcionar bem", pensamos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando voc√™ inicia o aplicativo, o JRE √© carregado automaticamente, o que √© usado no futuro. </font><font style="vertical-align: inherit;">Mas est√°vamos esperando a pr√≥xima surpresa.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O infort√∫nio nunca vem sozinho</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas, como geralmente acontece, n√£o est√°vamos limitados a um problema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nossa aplica√ß√£o possui, digamos, um recurso. Na verdade, existem dois deles. Um aplicativo (um arquivo jnlp) inicia um segundo aplicativo (segundo jnlp). E, neste caso, o segundo aplicativo n√£o foi iniciado. Nos logs, voc√™ pode ver que os aplicativos est√£o presos no impasse. A partir do rastreamento furtivo, ficou claro que o motivo √© o mecanismo de log interno do OpenWebStart. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O problema foi resolvido desativando o log interno do OpenWebStart. Os logs de nossos aplicativos, √© claro, permaneceram ativos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0t/1n/yi/0t1nyitsnxpltecpcwbrpjavjw0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essas configura√ß√µes tamb√©m foram desativadas no arquivo response.varfile, usado durante a instala√ß√£o em segundo plano.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E agora, depois de superar esses e alguns outros obst√°culos (n√£o preciso mencionar todos j√°), conseguimos lan√ßar nosso aplicativo, que est√° atualmente em teste antes de ser liberado para o prod. </font><font style="vertical-align: inherit;">Como testamos, a vers√£o do OpenWebStart foi atualizada de 1.1.1 para 1.1.4. </font><font style="vertical-align: inherit;">Das mudan√ßas not√°veis ‚Äã‚Äãfoi adicionada a capacidade de estrear remotamente. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/da/lg/sf/dalgsf4r0owjtavojy00fc7fgwk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez meu artigo seja √∫til para algu√©m em um trabalho t√£o dif√≠cil como suporte para aplicativos herdados. </font><font style="vertical-align: inherit;">Se voc√™ tiver perguntas - pergunte, tentarei responder. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS todas as imagens s√£o tiradas do site oficial do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWebStart</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt487788/index.html">Design de produto sem designer</a></li>
<li><a href="../pt487790/index.html">"Sim, eles existem!" O que os especialistas em ci√™ncia de dados no Cazaquist√£o fazem e quanto ganham?</a></li>
<li><a href="../pt487792/index.html">Gerando o Mercurial em um servidor Windows (com Nginx)</a></li>
<li><a href="../pt487794/index.html">Classifica√ß√£o dos frameworks da web de alta velocidade 2020</a></li>
<li><a href="../pt487796/index.html">Os 10 principais plug-ins essenciais do Eclipse para desenvolvedores Java</a></li>
<li><a href="../pt487800/index.html">Por que √© importante dizer ao solicitante o que deu errado durante a entrevista (e como faz√™-lo corretamente)</a></li>
<li><a href="../pt487802/index.html">APC Smart UPS ininterrupta e como cozinh√°-los</a></li>
<li><a href="../pt487804/index.html">Meetups de Crescimento de equipes em Raiffeisenbank</a></li>
<li><a href="../pt487806/index.html">Criando uma pequena API Deno</a></li>
<li><a href="../pt487808/index.html">Redes Neurais Recorrentes (RNN) com Keras</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>