<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßòüèæ üíñ üë®‚Äçüéì Monitoring in the data center: how we changed the old BMS to a new one. Part 1 üë®üèø‚Äçüî¨ üö¶ üëáüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What is a BMS
 The monitoring system of engineering systems in the data center is a key element of the infrastructure that directly affects such an im...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Monitoring in the data center: how we changed the old BMS to a new one. Part 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/linxdatacenter/blog/492120/"><img src="https://habrastorage.org/getpro/habr/post_images/664/c21/53f/664c2153f646d342beb54c99478d0d8d.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is a BMS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The monitoring system of engineering systems in the data center is a key element of the infrastructure that directly affects such an important indicator for the data center as the speed of personnel response to emergencies and, therefore, the duration of uninterrupted operation.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BMS (Building Monitoring System) monitoring systems are offered by many global data center equipment vendors. </font><font style="vertical-align: inherit;">During the work of Linxdatacenter in Russia, we had the opportunity to get acquainted with different systems and encounter diametrically opposed approaches of vendors to operate these systems.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We tell you how we completely updated our BMS system over the past year and why.&nbsp;&nbsp;</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The root of the problem</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It all started 10 years ago with the launch of the Linxdatacenter data center in St. Petersburg. The BMS system, according to the industry standards of those years, was a physical server with installed software, access to which was through a client program (the so-called ‚Äúthick‚Äù client).&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There were few companies offering such solutions at the time. Their products were the standard, the only answer to an existing request. And we must give them their due: both then and today, market leaders as a whole cope with their basic task - the delivery of functional solutions for the operation of data centers.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The logical choice for us was the BMS solution from one of the world's largest manufacturers. The selected system at that time met all the requirements for monitoring an integrated engineering facility, which is a data center.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, over time, the requirements and expectations of users (that is, us, data center operators) from IT solutions have changed. And large vendors, as shown by analysis of the market for proposed solutions, were not ready for this. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The corporate IT market has been heavily influenced by the B2C industry. Digital solutions today should ensure the convenience of the end user - this is the goal developers have set themselves. This is evident in the improvement of user interfaces (UI) and the quality of user experience (UX) of many enterprise applications.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A person gets used to comfort in everything that relates to digital tools in everyday life, and makes the same demands on the tools that he uses for work tasks. People expect from corporate applications the same visibility, intuitiveness, simplicity and transparency that are available to them in financial services, taxi calls or online shopping. IT professionals who implement solutions in the corporate environment, also strive to get all the modern "goodies": simple deployment and scaling, fault tolerance and unlimited customization options.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Major international vendors often overlook these trends. </font><font style="vertical-align: inherit;">Based on their many years of authority in the industry, corporations in working with customers are often categorical and inflexible. </font><font style="vertical-align: inherit;">The illusion of their own indispensability does not allow them to see how young technology companies appear literally under their nose, offering alternative solutions tailored to a specific customer, and without overpaying for the brand.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disadvantages of the old BMS system&nbsp;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The main disadvantage of the existing obsolete BMS-solution for us was its slow work. Investigation of several events related to the insufficiently quick reaction of the personnel on duty helped us to understand that sometimes events were displayed in the BMS system with a long delay. At the same time, the system was not overloaded or faulty, just the versions of its components (for example, JAVA) were outdated and could not work correctly with new versions of operating systems without updates. It was possible to update them only together with the BMS system, while the vendor did not ensure automatic version continuity, that is, for us the process would be almost as laborious as the transition to a new system, and the new solution would retain some of the shortcomings of the old one.&nbsp;&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We add here some more unpleasant "little things":</font></font><br>
<br>
<ol>
<li>       ¬´ IP- ‚Äì   ¬ª;&nbsp;<br>
</li>
<li>       (            BMS);<br>
</li>
<li>  ;&nbsp;<br>
</li>
<li>  ¬´¬ª ,          ;<br>
</li>
<li>¬´¬ª     ,    .           ‚Äì            ;<br>
</li>
<li>¬´¬ª  ,  ,         ;<br>
</li>
<li> -      ,  ,      -  ;<br>
</li>
<li>    ‚Äì      -¬´¬ª   .   ‚Äì    ;<br>
<br>
    :<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6f0/c64/710/6f0c647101177fb535d396699097d7cc.png"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/44a/302/656/44a3026565568d4b1fbf1f679ffecd6f.png"></li>
<li>     ‚Äì    ,              ,   ;&nbsp;<br>
</li>
<li>          -  (,      );<br>
</li>
<li>     -   BMS    .&nbsp;<br>
</li>
</ol><br>
<br>
<h2>    BMS</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Given the above, our main requirements are as follows:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Two independent mutually reserving machines with automatic synchronization, running on two different cloud platforms in different data centers (in our case, Linxdatacenter data centers St. Petersburg and Moscow);</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add new devices for free;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Free update of software and its components (with the exception of functional improvements);</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open source code that allows us to independently support the system in case of problems on the developer's side;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The ability to receive and use data from BMS, for example on the website or in your personal account;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Access via a WEB browser without a "thick" client;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Using domain user accounts to access the BMS;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The presence of animation and many more small and not very wishes that materialized in a detailed statement of work.</font></font><br>
</li>
</ol><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Last straw</font></font></h2><br>
<img src="https://habrastorage.org/getpro/habr/post_images/d31/ad0/8f8/d31ad08f84082858ebe1d8ec8a20f207.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At that moment, when we realized that the data center had outgrown its BMS, the most obvious solution was updating the existing system. ‚ÄúThey don‚Äôt change horses at the crossing,‚Äù right?&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, large corporations, as a rule, do not offer a custom modification of their decades of ‚Äúpolished‚Äù solutions sold in dozens of countries. While young companies are testing the idea or prototype of a future product for potential consumers and relying on user reviews in product development, corporations continue to sell licenses for a once really cool, but, alas, outdated and not flexible product.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And we felt the difference in approach on ourselves. In the course of the correspondence with the manufacturer of the old BMS, it quickly became clear that the vendor‚Äôs updating of the existing system would in fact result in us buying a new system with a semi-automatic transfer of the base, high cost and pitfalls during the transfer, which even the manufacturer itself could not predict. Of course, in this case, the cost of technical support of the updated solution grew, and there remained the need to buy licenses for expansion.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And the worst part is that the new system could not fully satisfy our reservation requirements. The updated BMS system could be implemented, as we wanted, on a cloud platform, which would allow us to abandon the hardware, but the reservation option was not included in the price. To back up data, we would have to buy a second virtual BMS server and an additional set of licenses. At a cost of one license of about $ 76 and the number of IP addresses of 1,000 units, $ 76,000 of additional expenses are accumulated only for licenses for the backup machine.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The "cherry" in the new version of BMS was the need to purchase additional licenses "for all devices" - even for the main server. </font><font style="vertical-align: inherit;">Here it is necessary to clarify that there are devices connected to the BMS through gateways. </font><font style="vertical-align: inherit;">The gateway has one IP address, but controls several devices (on average 10). </font><font style="vertical-align: inherit;">In the old BMS, this required one license per gateway IP address, the statistics looked something like this: ‚ÄúIP addresses / licenses 1000, devices 1200‚Äù. </font><font style="vertical-align: inherit;">The updated BMS worked on a different principle and the statistics would look like ‚ÄúIP addresses 1000, devices / licenses 1200‚Äù. </font><font style="vertical-align: inherit;">That is, the vendor in the new version changed the principle of assigning licenses, and we had to buy an additional approximately 200 licenses.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The budget of the ‚Äúupdate‚Äù as a result consisted of four points:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the cost of the cloud version and its migration services;&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">additional licenses to the existing package for devices connected through gateways;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cost of backup cloud version;&nbsp;&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set of licenses for the backup machine.&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The total project cost was more than $ 100,000! </font><font style="vertical-align: inherit;">And this is not to mention the need to purchase licenses for new devices in the future. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the end, we realized that it would be easier for us - and maybe cheaper - to order a system created from scratch, taking into account all our requirements and providing for the possibility of modernization in the future. </font><font style="vertical-align: inherit;">But those who wanted to develop such a complex system had to find, compare proposals, choose and go with the finalist the way from TK to implementation ... Read about this in the second part of the material very soon.&nbsp;</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en492108/index.html">How to get to Silicon Valley: 7 ways for it-startup</a></li>
<li><a href="../en492110/index.html">Using a cloud token with support for Russian cryptography on the Android platform</a></li>
<li><a href="../en492112/index.html">Alexander Plyushchev about the politicization of the Internet, the digitalization of power and robots that will replace journalists (but this is not accurate)</a></li>
<li><a href="../en492116/index.html">Trying to deal with striking differences in coronavirus mortality in Italy and South Korea</a></li>
<li><a href="../en492118/index.html">5 myths about UPS, their refutation and the real situation</a></li>
<li><a href="../en492122/index.html">Migrating from Gitolite to GitLab with a Shell Script</a></li>
<li><a href="../en492128/index.html">Interface Tales of Toxic Grandfather ‚ÄúGet a Rag!‚Äù (s1 e4)</a></li>
<li><a href="../en492130/index.html">Fuzzy math. Relationships and wolf tails</a></li>
<li><a href="../en492134/index.html">Pros and cons of doing business in the USA: impressions after three years of development of two companies</a></li>
<li><a href="../en492138/index.html">Why do we (possibly) overestimate the lethality of COVID-19</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>