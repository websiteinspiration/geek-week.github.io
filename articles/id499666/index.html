<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧒 👶🏽 ☢️ PEP 572 (Ekspresi Penugasan dalam python 3.8) ⤵️ 👉🏼 🏁</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo Habr. Kali ini kita akan melihat PEP 572, yang berbicara tentang ekspresi penugasan. Jika Anda masih ragu dengan operator ": =" atau tidak sepenu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>PEP 572 (Ekspresi Penugasan dalam python 3.8)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499666/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Halo Habr. </font><font style="vertical-align: inherit;">Kali ini kita akan melihat PEP 572, yang berbicara tentang ekspresi penugasan. </font><font style="vertical-align: inherit;">Jika Anda masih ragu dengan operator ": =" atau tidak sepenuhnya memahami aturan penggunaannya, maka artikel ini cocok untuk Anda. </font><font style="vertical-align: inherit;">Di sini Anda akan menemukan banyak contoh dan jawaban untuk pertanyaan: "Mengapa demikian?" </font><font style="vertical-align: inherit;">Artikel ini ternyata selengkap mungkin, dan jika Anda punya sedikit waktu, maka lihatlah bagian yang saya tulis. </font><font style="vertical-align: inherit;">Pada awalnya, "tesis" utama dikumpulkan untuk pekerjaan yang nyaman dengan ekspresi penugasan. </font><font style="vertical-align: inherit;">Maafkan saya sebelumnya jika Anda menemukan kesalahan (tulis tentang itu kepada saya, saya akan memperbaikinya). </font><font style="vertical-align: inherit;">Ayo mulai:</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PEP 572 - Ekspresi Penugasan</font></font></h2><div class="scrollable-table"><table>
<tbody><tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semangat</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">572</font></font></td>
</tr>
<tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Judul:</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ekspresi Penugasan</font></font></td>
</tr>
<tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penulis:</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chris Angelico &lt;rosuav at gmail.com&gt;, Tim Peters &lt;tim.peters di gmail.com&gt;, Guido van Rossum &lt;guido di python.org&gt;</font></font></td>
</tr>
<tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diskusi:</font></font></b></td>
<td><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">doc-sig di python.org</font></font></a></td>
</tr>
<tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Status:</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diterima</font></font></td>
</tr>
<tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebuah tipe:</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standar</font></font></td>
</tr>
<tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dibuat:</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28-Feb-2018</font></font></td>
</tr>
<tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versi python:</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.8</font></font></td>
</tr>
<tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Posting cerita:</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28-Feb-2018, 02-Mar-2018, 23-Mar-2018, 04-Apr-2018, 17-Apr-2018, 25-Apr-2018, 09-Jul-2018, 05-Agu-2019</font></font></td>
</tr>
<tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Izin untuk mengadopsi standar:</font></font></b></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mail.python.org/pipermail/python-dev/2018-Juli/154601.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (dengan VPN untuk waktu yang lama, tetapi dimuat)</font></font></td>
</tr>
</tbody></table></div><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kandungan</font></font></b><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anotasi</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pembenaran</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sintaks dan semantik</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perubahan spesifikasi selama implementasi</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contohnya</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alternatif yang Ditolak</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keberatan yang sering</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rekomendasi Gaya</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terima kasih</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lampiran A: Kesimpulan Tim Peters</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lampiran B: Juru Bahasa Kode Kasar untuk Generator</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lampiran C: Tidak Ada Perubahan Semantik Lingkup</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Referensi</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hak cipta</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagianku</font></font></a></li>
</ul><br>
<a name="ann"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anotasi</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konvensi ini akan berbicara tentang kemungkinan penugasan di dalam ekspresi, menggunakan notasi baru NAME: = expr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai bagian dari inovasi, prosedur untuk menghitung generator kamus (pemahaman kamus) telah diperbarui. Ini memastikan bahwa ekspresi kunci dievaluasi sebelum ekspresi nilai (ini memungkinkan Anda untuk mengikat kunci ke variabel dan kemudian menggunakan kembali variabel yang dibuat dalam perhitungan nilai yang sesuai dengan kunci). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selama diskusi tentang PEP ini, operator ini secara tidak resmi dikenal sebagai operator walrus. Nama formal konstruk adalah "Ekspresi Penugasan" (menurut PEP: Penugasan Ekspresi Penugasan), tetapi dapat disebut sebagai "Ekspresi Bernama". Sebagai contoh, implementasi referensi di CPython menggunakan nama ini.</font></font><br>
<br>
<a name="oboc"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pembenaran</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penamaan adalah bagian penting dari pemrograman yang memungkinkan Anda untuk menggunakan nama "deskriptif" alih-alih ekspresi yang lebih panjang, dan juga membuatnya mudah untuk menggunakan kembali nilai. </font><font style="vertical-align: inherit;">Saat ini, ini hanya dapat dilakukan dalam bentuk instruksi, yang membuat operasi ini tidak tersedia saat membuat daftar (pemahaman daftar), serta dalam ekspresi lainnya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, penamaan bagian dari ekspresi besar dapat membantu dengan debugging interaktif dengan menyediakan alat untuk menampilkan prompt dan hasil antara. </font><font style="vertical-align: inherit;">Tanpa kemampuan untuk menangkap hasil dari ekspresi bersarang, Anda perlu mengubah kode sumber, tetapi menggunakan ekspresi penetapan Anda hanya perlu memasukkan beberapa "penanda" dari bentuk "nama: = ekspresi". </font><font style="vertical-align: inherit;">Ini menghilangkan refactoring yang tidak perlu, dan karena itu mengurangi kemungkinan perubahan kode yang tidak disengaja selama debugging (penyebab umum Heisenbugs adalah kesalahan yang mengubah sifat-sifat kode selama debugging dan mungkin secara tak terduga muncul dalam produksi]), dan kode ini akan lebih dimengerti oleh yang lain ke programmer.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pentingnya Kode Nyata</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selama pengembangan PEP ini, banyak orang (baik pendukung dan kritik) terlalu fokus pada contoh mainan di satu sisi, dan contoh-contoh yang terlalu rumit di sisi lain. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bahaya contoh mainan ada dua: mereka sering terlalu abstrak untuk membuat seseorang berkata "oh, ini tidak bisa ditolak", dan mereka juga mudah ditolak dengan kata-kata "Saya tidak akan pernah menulis itu." Bahaya dari contoh yang terlalu rumit adalah bahwa mereka menyediakan lingkungan yang nyaman bagi kritikus yang menyarankan bahwa fungsi ini dihapus ("Ini terlalu membingungkan," kata orang-orang semacam itu). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, ada baiknya digunakan untuk contoh-contoh seperti: mereka membantu memperjelas semantik yang dimaksud. Oleh karena itu, kami akan memberikan beberapa di antaranya di bawah ini. Namun, untuk </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meyakinkan</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , contoh harus didasarkan pada</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kode </font><b><font style="vertical-align: inherit;">nyata</font></b><font style="vertical-align: inherit;"> yang ditulis tanpa memikirkan PEP ini. Yaitu, kode yang merupakan bagian dari aplikasi yang sangat berguna (tidak ada perbedaan: apakah itu besar atau kecil). Tim Peters banyak membantu kami dengan melihat repositori pribadinya dan memilih contoh kode yang ditulisnya, yang (menurut pendapatnya) akan lebih dimengerti jika ditulis ulang (tanpa fanatisme) menggunakan ungkapan penugasan. Kesimpulannya adalah ini: perubahan saat ini akan membawa perbaikan sederhana tapi jelas dalam beberapa bit dari kodenya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh lain dari kode nyata adalah pengamatan tidak langsung tentang bagaimana programmer menilai kekompakan. Guido van Rossum memeriksa basis kode Dropbox dan menemukan beberapa bukti bahwa programmer lebih suka menulis lebih sedikit baris kode daripada menggunakan beberapa ekspresi kecil.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh kasus: Guido menemukan beberapa poin ilustratif ketika seorang programmer mengulangi subekspresi (dengan demikian memperlambat program), tetapi menyimpan satu baris kode tambahan. </font><font style="vertical-align: inherit;">Misalnya, alih-alih menulis:</font></font><br>
<br>
<pre><code class="python hljs">match = re.match(data)<font></font>
group = match.group(<span class="hljs-number">1</span>) <span class="hljs-keyword">if</span> match <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Programmer menyukai opsi ini:</font></font><br>
<br>
<pre><code class="python hljs">group = re.match(data).group(<span class="hljs-number">1</span>) <span class="hljs-keyword">if</span> re.match(data) <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut adalah contoh lain yang menunjukkan bahwa programmer kadang-kadang bersedia melakukan lebih banyak pekerjaan untuk mempertahankan "tingkat sebelumnya" dari lekukan:</font></font><br>
<br>
<pre><code class="python hljs">match1 = pattern1.match(data)<font></font>
match2 = pattern2.match(data)<font></font>
<span class="hljs-keyword">if</span> match1:<font></font>
    result = match1.group(<span class="hljs-number">1</span>)
<span class="hljs-keyword">elif</span> match2:<font></font>
    result = match2.group(<span class="hljs-number">2</span>)
<span class="hljs-keyword">else</span>:<font></font>
    result = <span class="hljs-literal">None</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode ini menghitung pattern2, bahkan jika pattern1 sudah cocok (dalam hal ini, sub-kondisi kedua tidak akan pernah terpenuhi). </font><font style="vertical-align: inherit;">Oleh karena itu, solusi berikut ini lebih efektif, tetapi kurang menarik:</font></font><br>
<br>
<pre><code class="python hljs">match1 = pattern1.match(data)
<span class="hljs-keyword">if</span> match1:<font></font>
    result = match1.group(<span class="hljs-number">1</span>)
<span class="hljs-keyword">else</span>:<font></font>
    match2 = pattern2.match(data)<font></font>
    <span class="hljs-keyword">if</span> match2:<font></font>
        result = match2.group(<span class="hljs-number">2</span>)
    <span class="hljs-keyword">else</span>:<font></font>
        result = <span class="hljs-literal">None</span></code></pre><br>
<a name="sint"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sintaks dan semantik</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kebanyakan kasus di mana Python menggunakan ekspresi sewenang-wenang, Anda sekarang dapat menggunakan ekspresi penetapan. </font><font style="vertical-align: inherit;">Mereka memiliki bentuk NAME: = expr, di mana expr adalah ekspresi Python apa pun yang valid, kecuali untuk tuple yang tidak di-un-petak, dan NAME adalah pengenalnya. </font><font style="vertical-align: inherit;">Nilai ekspresi seperti itu bertepatan dengan aslinya, tetapi efek tambahan adalah penugasan nilai ke objek target:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment"># Handle a matched regex</span>
<span class="hljs-keyword">if</span> (match := pattern.search(data)) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
    <span class="hljs-comment"># Do something with match</span><font></font>
<font></font>
<span class="hljs-comment"># A loop that can't be trivially rewritten using 2-arg iter()</span>
<span class="hljs-keyword">while</span> chunk := file.read(<span class="hljs-number">8192</span>):<font></font>
   process(chunk)<font></font>
<font></font>
<span class="hljs-comment"># Reuse a value that's expensive to compute</span>
[y := f(x), y**<span class="hljs-number">2</span>, y**<span class="hljs-number">3</span>]<font></font>
<font></font>
<span class="hljs-comment"># Share a subexpression between a comprehension filter clause and its output</span>
filtered_data = [y <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> data <span class="hljs-keyword">if</span> (y := f(x)) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>]</code></pre><br>
<a name="iskluch"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kasus Luar Biasa</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada beberapa tempat di mana ekspresi penugasan tidak diizinkan untuk menghindari ambiguitas atau kebingungan di antara pengguna:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ekspresi penugasan yang tidak dimasukkan dalam tanda kurung dilarang di tingkat "atas":</font></font><br>
<br>
<pre><code class="python hljs">y := f(x)  <span class="hljs-comment"># </span>
(y := f(x))  <span class="hljs-comment"># ,   </span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aturan ini akan memudahkan programmer untuk memilih antara operator penugasan dan ekspresi penugasan - tidak akan ada situasi sintaksis di mana kedua opsi tersebut setara.</font></font></li>
<li>           . :<br>
<br>
<pre><code class="python hljs">y0 = y1 := f(x)  <span class="hljs-comment"># </span>
y0 = (y1 := f(x))  <span class="hljs-comment"># ,   </span></code></pre><br>
             . :<br>
<br>
<pre><code class="python hljs">foo(x = y := f(x))  <span class="hljs-comment"># </span>
foo(x=(y := f(x)))  <span class="hljs-comment"># ,     </span></code></pre><br>
 ,               .</li>
<li>           . :<br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>(<span class="hljs-params">answer = p := <span class="hljs-number">42</span></span>):</span>  <span class="hljs-comment"># </span><font></font>
    ...<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>(<span class="hljs-params">answer=(<span class="hljs-params">p := <span class="hljs-number">42</span></span>)</span>):</span>  <span class="hljs-comment"># Valid, though not great style</span>
    ...</code></pre><br>
        ,           (.    ,     «»     ).</li>
<li>           ,    . :<br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>(<span class="hljs-params">answer: p := <span class="hljs-number">42</span> = <span class="hljs-number">5</span></span>):</span>  <span class="hljs-comment"># </span><font></font>
    ...<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>(<span class="hljs-params">answer: (<span class="hljs-params">p := <span class="hljs-number">42</span></span>) = <span class="hljs-number">5</span></span>):</span>  <span class="hljs-comment"># ,  </span>
    ...</code></pre><br>
       : ,     "="  ":="   .</li>
<li>        -. :<br>
<br>
<pre><code class="python hljs">(<span class="hljs-keyword">lambda</span>: x := <span class="hljs-number">1</span>) <span class="hljs-comment"># </span>
<span class="hljs-keyword">lambda</span>: (x := <span class="hljs-number">1</span>) <span class="hljs-comment"># ,  </span>
(x := <span class="hljs-keyword">lambda</span>: <span class="hljs-number">1</span>) <span class="hljs-comment"># </span>
<span class="hljs-keyword">lambda</span> line: (m := re.match(pattern, line)) <span class="hljs-keyword">and</span> m.group(<span class="hljs-number">1</span>) <span class="hljs-comment"># Valid</span></code></pre><br>
-    ,  ":=".       .  ,     ,    ()  ,         .</li>
<li>   f-  . :<br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">f'<span class="hljs-subst">{(x:=<span class="hljs-number">10</span>)}</span>'</span>  <span class="hljs-comment"># ,  </span>
<span class="hljs-string">'10'</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>x = <span class="hljs-number">10</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">f'<span class="hljs-subst">{x:=<span class="hljs-number">10</span>}</span>'</span>    <span class="hljs-comment"># ,  ,  '=10'</span>
<span class="hljs-string">'        10'</span></code></pre><br>
 ,    ,     f-,  .  f-   ":"    .    ,      f-      .     ,      .</li>
</ul><br>
<h3> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ekspresi penugasan tidak memperkenalkan cakupan baru. Dalam kebanyakan kasus, ruang lingkup di mana variabel akan dibuat tidak memerlukan penjelasan: itu akan menjadi saat ini. Jika variabel menggunakan kata kunci nonlokal atau global sebelumnya, maka ekspresi penugasan akan mempertimbangkan hal ini. Hanya lambda (menjadi definisi anonim dari suatu fungsi) dianggap sebagai ruang lingkup terpisah untuk tujuan ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada satu kasus khusus: ekspresi penugasan yang terjadi dalam generator daftar, set, kamus, atau dalam "ekspresi generator" sendiri (selanjutnya secara kolektif disebut sebagai "generator" (pemahaman)) mengikat variabel ke ruang lingkup yang dikandung generator, mengamati pengubah globab atau nonglobal, jika ada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alasan untuk kasus khusus ini ada dua. </font><font style="vertical-align: inherit;">Pertama, ini memungkinkan kita untuk dengan mudah menangkap "anggota" dalam ekspresi any () dan all (), misalnya:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> any((comment := line).startswith(<span class="hljs-string">'#'</span>) <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines):<font></font>
    print(<span class="hljs-string">"First comment:"</span>, comment)
<span class="hljs-keyword">else</span>:<font></font>
    print(<span class="hljs-string">"There are no comments"</span>)<font></font>
<font></font>
<span class="hljs-keyword">if</span> all((nonblank := line).strip() == <span class="hljs-string">''</span> <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines):<font></font>
    print(<span class="hljs-string">"All lines are blank"</span>)
<span class="hljs-keyword">else</span>:<font></font>
    print(<span class="hljs-string">"First non-blank line:"</span>, nonblank)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kedua, ini menyediakan cara yang ringkas untuk memperbarui variabel dari generator, misalnya:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment"># Compute partial sums in a list comprehension</span>
total = <span class="hljs-number">0</span>
partial_sums = [total := total + v <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> values]<font></font>
print(<span class="hljs-string">"Total:"</span>, total)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, nama variabel dari ekspresi penugasan tidak bisa cocok dengan nama yang sudah digunakan dalam generator oleh for loop untuk beralih. </font><font style="vertical-align: inherit;">Nama-nama terakhir adalah lokal untuk generator di mana mereka muncul. </font><font style="vertical-align: inherit;">Akan menjadi tidak konsisten jika ekspresi penugasan juga merujuk pada ruang lingkup di dalam generator. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalnya, [i: = i +1 untuk i dalam rentang (5)] tidak valid: untuk loop menentukan bahwa saya lokal untuk generator, tetapi bagian "i: = i + 1" menegaskan bahwa saya adalah variabel dari eksternal cakupan </font><font style="vertical-align: inherit;">Untuk alasan yang sama, contoh-contoh berikut tidak akan berfungsi:</font></font><br>
<br>
<pre><code class="python hljs">
[[(j := j) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>)] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>)] <span class="hljs-comment"># </span>
[i := <span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i, j <span class="hljs-keyword">in</span> stuff]                       <span class="hljs-comment"># </span>
[i+<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> (i := stuff)]                      <span class="hljs-comment"># </span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meskipun secara teknis dimungkinkan untuk menetapkan semantik yang konsisten untuk kasus-kasus seperti itu, sulit untuk menentukan apakah cara kami memahami semantik ini akan bekerja dalam kode asli Anda. Itulah sebabnya implementasi referensi memastikan bahwa kasus seperti itu meningkatkan SyntaxError, daripada dieksekusi dengan perilaku yang tidak ditentukan, tergantung pada implementasi perangkat keras tertentu. Pembatasan ini berlaku bahkan jika ekspresi penugasan tidak pernah dieksekusi:</font></font><br>
<br>
<pre><code class="python hljs">[<span class="hljs-literal">False</span> <span class="hljs-keyword">and</span> (i := <span class="hljs-number">0</span>) <span class="hljs-keyword">for</span> i, j <span class="hljs-keyword">in</span> stuff]     <span class="hljs-comment"># </span>
[i <span class="hljs-keyword">for</span> i, j <span class="hljs-keyword">in</span> stuff <span class="hljs-keyword">if</span> <span class="hljs-literal">True</span> <span class="hljs-keyword">or</span> (j := <span class="hljs-number">1</span>)]  <span class="hljs-comment"># </span><font></font>
<font></font>
<span class="hljs-comment"># [.  . - ""   </span>
<span class="hljs-comment"># ,       </span>
<span class="hljs-comment"># ,    ,   ]</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk badan generator (bagian sebelum kata kunci pertama "untuk") dan ekspresi filter (bagian setelah "jika" dan sebelum setiap "untuk" yang bersarang) pembatasan ini berlaku khusus untuk nama variabel yang secara bersamaan digunakan sebagai variabel berulang. Seperti yang telah kami katakan, ekspresi Lambda memperkenalkan ruang lingkup fungsi eksplisit baru dan oleh karena itu dapat digunakan dalam ekspresi generator tanpa batasan tambahan. [sekitar lagi, kecuali dalam kasus seperti itu: [i untuk i dalam kisaran (2, (lambda: (s: = 2) ()))]]</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena keterbatasan desain dalam implementasi referensi (penganalisa tabel simbol tidak dapat mengenali apakah nama-nama dari bagian kiri generator digunakan di bagian yang tersisa di mana ekspresi iterable berada), oleh karena itu ekspresi penugasan sepenuhnya dilarang sebagai bagian dari iterable (di bagian setelah setiap "in" dan sebelum kata kunci berikutnya "jika" atau "untuk"). </font><font style="vertical-align: inherit;">Artinya, semua kasus ini tidak dapat diterima:</font></font><br>
<br>
<pre><code class="python hljs">[i+<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> (j := stuff)]                    <span class="hljs-comment"># </span>
[i+<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">2</span>) <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> (k := stuff)]  <span class="hljs-comment"># </span>
[i+<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [j <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> (k := stuff)]]       <span class="hljs-comment"># </span>
[i+<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> (<span class="hljs-keyword">lambda</span>: (j := stuff))()]        <span class="hljs-comment"># </span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pengecualian lain terjadi ketika ekspresi penugasan digunakan dalam generator yang berada dalam ruang lingkup kelas. </font><font style="vertical-align: inherit;">Jika, ketika menggunakan aturan di atas, kelas harus dibuat yang diukur dalam ruang lingkup, maka ekspresi penugasan seperti itu tidak valid dan akan menghasilkan SyntaxError:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span>:</span>
    [(j := i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>)]  <span class="hljs-comment"># </span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(Alasan pengecualian terakhir adalah ruang lingkup implisit dari fungsi yang dibuat oleh generator - saat ini tidak ada mekanisme runtime untuk fungsi untuk merujuk ke variabel yang terletak di lingkup kelas, dan kami tidak ingin menambahkan mekanisme seperti itu. Jika masalah ini pernah dipecahkan, maka kasus khusus ini (mungkin) akan dihapus dari spesifikasi ekspresi penugasan. Harap dicatat bahwa masalah ini akan terjadi bahkan jika Anda membuat variabel lebih awal di dalam ruang kelas dan mencoba mengubahnya dengan ekspresi penugasan dari generator.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lihat Lampiran B untuk contoh bagaimana ekspresi penugasan yang ditemukan di generator dikonversi ke kode yang setara.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prioritas Relatif: =</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Operator: = dikelompokkan lebih kuat daripada koma di semua posisi sintaksis jika memungkinkan, tetapi lebih lemah dari semua operator lain, termasuk atau, dan, tidak, dan ekspresi kondisional (A jika C selain B). Sebagai berikut dari bagian "Kasus Luar Biasa" di atas, ekspresi penugasan tidak pernah bekerja pada "level" yang sama dengan penugasan klasik =. Jika diperlukan urutan operasi yang berbeda, gunakan tanda kurung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Operator: = dapat digunakan secara langsung saat memanggil argumen posisi dari suatu fungsi. Namun, ini tidak akan berfungsi secara langsung dalam argumen. Beberapa contoh mengklarifikasi apa yang diizinkan secara teknis dan apa yang tidak mungkin:</font></font><br>
<br>
<pre><code class="python hljs">x := <span class="hljs-number">0</span> <span class="hljs-comment"># </span><font></font>
<font></font>
(x := <span class="hljs-number">0</span>) <span class="hljs-comment">#  </span><font></font>
<font></font>
x = y := <span class="hljs-number">0</span> <span class="hljs-comment"># </span><font></font>
<font></font>
x = (y := <span class="hljs-number">0</span>) <span class="hljs-comment">#  </span><font></font>
<font></font>
len(lines := f.readlines()) <span class="hljs-comment"># </span><font></font>
<font></font>
foo(x := <span class="hljs-number">3</span>, cat=<span class="hljs-string">'vector'</span>) <span class="hljs-comment"># </span><font></font>
<font></font>
foo(cat=category := <span class="hljs-string">'vector'</span>) <span class="hljs-comment"># </span><font></font>
<font></font>
foo(cat=(category := <span class="hljs-string">'vector'</span>)) <span class="hljs-comment">#  </span></code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagian besar contoh "valid" di atas tidak direkomendasikan untuk digunakan dalam praktik, karena orang yang dengan cepat memindai kode sumber Anda mungkin tidak memahami artinya dengan benar. </font><font style="vertical-align: inherit;">Tetapi dalam kasus sederhana ini diizinkan:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment"># Valid</span>
<span class="hljs-keyword">if</span> any(len(longline := line) &gt;= <span class="hljs-number">100</span> <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines):<font></font>
    print(<span class="hljs-string">"Extremely long line:"</span>, longline)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PEP ini merekomendasikan agar Anda </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selalu selalu</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memberikan ruang: =, mirip dengan rekomendasi PEP 8 untuk = untuk tugas klasik. </font><font style="vertical-align: inherit;">(Perbedaan dari rekomendasi terakhir adalah bahwa ia melarang spasi di sekitar =, yang digunakan untuk meneruskan argumen kunci ke fungsi.)</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubah urutan perhitungan.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memiliki semantik yang terdefinisi dengan baik, perjanjian ini mensyaratkan bahwa prosedur evaluasi harus didefinisikan dengan jelas. </font><font style="vertical-align: inherit;">Secara teknis, ini bukan persyaratan baru. </font><font style="vertical-align: inherit;">Python sudah memiliki aturan bahwa subekspresi biasanya dievaluasi dari kiri ke kanan. </font><font style="vertical-align: inherit;">Namun, ekspresi penugasan membuat "efek samping" ini lebih terlihat, dan kami mengusulkan satu perubahan dalam urutan perhitungan saat ini:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam kamus generator {X: Y untuk ...}, Y saat ini dievaluasi sebelum X. Kami menyarankan untuk mengubah ini sehingga X dihitung sebelum Y. (Dalam diktik klasik seperti {X: Y}, serta dalam dikt ((X, Y) untuk ...) ini telah diterapkan. Oleh karena itu, pembuat kamus harus mematuhi mekanisme ini)</font></font></li>
</ul><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perbedaan antara ekspresi penugasan dan instruksi penugasan.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yang paling penting, ": =" adalah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ekspresi</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang artinya dapat digunakan dalam kasus di mana </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instruksi</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak valid, termasuk fungsi lambda dan generator. </font><font style="vertical-align: inherit;">Sebaliknya, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ekspresi</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> penugasan tidak mendukung fungsionalitas diperluas yang dapat digunakan dalam </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instruksi</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> penugasan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tugas Cascading tidak didukung secara langsung</font></font><br>
<br>
<pre><code class="python hljs">x = y = z = <span class="hljs-number">0</span>  <span class="hljs-comment"># Equivalent: (z := (y := (x := 0)))</span></code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Target" yang terpisah, kecuali untuk nama variabel sederhana NAME, tidak didukung:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment"># No equivalent</span><font></font>
a[i] = x<font></font>
self.rest = []</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fungsi dan prioritas "di sekitar" koma berbeda:</font></font><br>
<br>
<pre><code class="python hljs">x = <span class="hljs-number">1</span>, <span class="hljs-number">2</span>  <span class="hljs-comment"># Sets x to (1, 2)</span>
(x := <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># Sets x to 1</span></code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nilai pembongkaran dan pengemasan tidak memiliki kesetaraan "murni" atau tidak didukung sama sekali</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment"># Equivalent needs extra parentheses</span>
loc = x, y  <span class="hljs-comment"># Use (loc := (x, y))</span>
info = name, phone, *rest  <span class="hljs-comment"># Use (info := (name, phone, *rest))</span><font></font>
<font></font>
<span class="hljs-comment"># No equivalent</span><font></font>
px, py, pz = position<font></font>
name, phone, email, *other_info = contact</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anotasi jenis sebaris tidak didukung:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment"># Closest equivalent is "p: Optional[int]" as a separate declaration</span>
p: Optional[int] = <span class="hljs-literal">None</span></code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak ada bentuk operasi yang dipersingkat:</font></font><br>
<br>
<pre><code class="python hljs">total += tax  <span class="hljs-comment"># Equivalent: (total := total + tax)</span></code></pre></li>
</ul><br>
<a name="cpec"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perubahan spesifikasi selama implementasi</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perubahan berikut dibuat berdasarkan pengalaman kami dan analisis tambahan setelah penulisan pertama PEP ini dan sebelum rilis Python 3.8:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk memastikan konsistensi dengan pengecualian serupa lainnya, dan untuk tidak memperkenalkan nama baru yang mungkin tidak nyaman bagi pengguna akhir, subkelas yang awalnya diusulkan dari TargetScopeError untuk SyntaxError telah dihapus dan dikurangi menjadi SyntaxError biasa. </font><font style="vertical-align: inherit;">[3]</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karena keterbatasan dalam mem-parsing tabel karakter CPython, implementasi referensi ekspresi penugasan memunculkan SyntaxError untuk semua penggunaan di dalam iterator. </font><font style="vertical-align: inherit;">Sebelumnya, pengecualian ini hanya terjadi jika nama variabel yang dibuat bersamaan dengan yang sudah digunakan dalam ekspresi iteratif. </font><font style="vertical-align: inherit;">Ini dapat direvisi jika ada contoh yang cukup meyakinkan, tetapi kompleksitas tambahan tampaknya tidak sesuai untuk kasus penggunaan yang murni "hipotetis".</font></font></li>
</ul><br>
<a name="prim"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contohnya</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh Pustaka Standar Python</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site.py</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
env_base hanya digunakan dalam suatu kondisi, sehingga penugasan dapat ditempatkan di if, sebagai "header" dari blok logis.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode Saat Ini:</font></font><br>
<pre><code class="python hljs">env_base = os.environ.get(<span class="hljs-string">"PYTHONUSERBASE"</span>, <span class="hljs-literal">None</span>)
<span class="hljs-keyword">if</span> env_base:
    <span class="hljs-keyword">return</span> env_base</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode yang ditingkatkan:</font></font><br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> env_base := os.environ.get(<span class="hljs-string">"PYTHONUSERBASE"</span>, <span class="hljs-literal">None</span>):
    <span class="hljs-keyword">return</span> env_base</code></pre></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_pydecimal.py</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat menghindari ifs bersarang, sehingga menghilangkan satu tingkat lekukan.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode Saat Ini:</font></font><br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> self._is_special:<font></font>
    ans = self._check_nans(context=context)<font></font>
    <span class="hljs-keyword">if</span> ans:
        <span class="hljs-keyword">return</span> ans</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode yang ditingkatkan:</font></font><br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> self._is_special <span class="hljs-keyword">and</span> (ans := self._check_nans(context=context)):
    <span class="hljs-keyword">return</span> ans</code></pre></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copy.py</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode terlihat lebih klasik, dan juga menghindari beberapa pernyataan bersyarat bersarang. </font><font style="vertical-align: inherit;">(Lihat Lampiran A untuk mempelajari lebih lanjut tentang asal dari contoh ini.)</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode Saat Ini:</font></font><br>
<pre><code class="python hljs">reductor = dispatch_table.get(cls)
<span class="hljs-keyword">if</span> reductor:<font></font>
    rv = reductor(x)<font></font>
<span class="hljs-keyword">else</span>:<font></font>
    reductor = getattr(x, <span class="hljs-string">"__reduce_ex__"</span>, <span class="hljs-literal">None</span>)
    <span class="hljs-keyword">if</span> reductor:<font></font>
        rv = reductor(<span class="hljs-number">4</span>)
    <span class="hljs-keyword">else</span>:<font></font>
        reductor = getattr(x, <span class="hljs-string">"__reduce__"</span>, <span class="hljs-literal">None</span>)
        <span class="hljs-keyword">if</span> reductor:<font></font>
            rv = reductor()<font></font>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">raise</span> Error(
                <span class="hljs-string">"un(deep)copyable object of type %s"</span> % cls)</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode yang ditingkatkan:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> reductor := dispatch_table.get(cls):<font></font>
    rv = reductor(x)<font></font>
<span class="hljs-keyword">elif</span> reductor := getattr(x, <span class="hljs-string">"__reduce_ex__"</span>, <span class="hljs-literal">None</span>):<font></font>
    rv = reductor(<span class="hljs-number">4</span>)
<span class="hljs-keyword">elif</span> reductor := getattr(x, <span class="hljs-string">"__reduce__"</span>, <span class="hljs-literal">None</span>):<font></font>
    rv = reductor()<font></font>
<span class="hljs-keyword">else</span>:
    <span class="hljs-keyword">raise</span> Error(<span class="hljs-string">"un(deep)copyable object of type %s"</span> % cls)</code></pre></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datetime.py</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tz hanya digunakan untuk s + = tz. </font><font style="vertical-align: inherit;">Memindahkannya ke dalam jika membantu menunjukkan area penggunaannya yang logis.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode Saat Ini:</font></font><br>
<br>
<pre><code class="python hljs">s = _format_time(self._hour, self._minute,<font></font>
                 self._second, self._microsecond,<font></font>
                 timespec)<font></font>
tz = self._tzstr()<font></font>
<span class="hljs-keyword">if</span> tz:<font></font>
    s += tz<font></font>
<span class="hljs-keyword">return</span> s</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode yang ditingkatkan:</font></font><br>
<br>
<pre><code class="python hljs">s = _format_time(self._hour, self._minute,<font></font>
                 self._second, self._microsecond,<font></font>
                 timespec)<font></font>
<span class="hljs-keyword">if</span> tz := self._tzstr():<font></font>
    s += tz<font></font>
<span class="hljs-keyword">return</span> s</code></pre></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sysconfig.py</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memanggil fp.readline () sebagai "kondisi" di loop while (serta memanggil metode .match ()) dalam kondisi if membuat kode lebih kompak tanpa menyulitkan pemahamannya.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode Saat Ini:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<font></font>
    line = fp.readline()<font></font>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> line:
        <span class="hljs-keyword">break</span><font></font>
    m = define_rx.match(line)<font></font>
    <span class="hljs-keyword">if</span> m:<font></font>
        n, v = m.group(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
        <span class="hljs-keyword">try</span>:<font></font>
            v = int(v)<font></font>
        <span class="hljs-keyword">except</span> ValueError:
            <span class="hljs-keyword">pass</span><font></font>
        vars[n] = v<font></font>
    <span class="hljs-keyword">else</span>:<font></font>
        m = undef_rx.match(line)<font></font>
        <span class="hljs-keyword">if</span> m:<font></font>
            vars[m.group(<span class="hljs-number">1</span>)] = <span class="hljs-number">0</span></code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode yang ditingkatkan:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">while</span> line := fp.readline():
    <span class="hljs-keyword">if</span> m := define_rx.match(line):<font></font>
        n, v = m.group(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
        <span class="hljs-keyword">try</span>:<font></font>
            v = int(v)<font></font>
        <span class="hljs-keyword">except</span> ValueError:
            <span class="hljs-keyword">pass</span><font></font>
        vars[n] = v<font></font>
    <span class="hljs-keyword">elif</span> m := undef_rx.match(line):<font></font>
        vars[m.group(<span class="hljs-number">1</span>)] = <span class="hljs-number">0</span></code></pre></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sederhanakan Generator Daftar</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang generator daftar dapat disaring secara efektif dengan "menangkap" kondisinya:</font></font><br>
<br>
<pre><code class="python hljs">results = [(x, y, x/y) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> input_data <span class="hljs-keyword">if</span> (y := f(x)) &gt; <span class="hljs-number">0</span>]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, variabel dapat digunakan kembali dalam ekspresi lain:</font></font><br>
<br>
<pre><code class="python hljs">stuff = [[y := f(x), x/y] <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>)]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Harap dicatat lagi bahwa dalam kedua kasus variabel </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> berada dalam cakupan yang sama dengan hasil variabel dan barang-barang.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nilai Tangkap dalam Kondisi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ekspresi penugasan dapat digunakan secara efektif dalam kondisi pernyataan if atau while:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment"># Loop-and-a-half</span>
<span class="hljs-keyword">while</span> (command := input(<span class="hljs-string">"&gt; "</span>)) != <span class="hljs-string">"quit"</span>:<font></font>
    print(<span class="hljs-string">"You entered:"</span>, command)<font></font>
<font></font>
<span class="hljs-comment"># Capturing regular expression match objects</span>
<span class="hljs-comment"># See, for instance, Lib/pydoc.py, which uses a multiline spelling</span>
<span class="hljs-comment"># of this effect</span>
<span class="hljs-keyword">if</span> match := re.search(pat, text):<font></font>
    print(<span class="hljs-string">"Found:"</span>, match.group(<span class="hljs-number">0</span>))
<span class="hljs-comment"># The same syntax chains nicely into 'elif' statements, unlike the</span>
<span class="hljs-comment"># equivalent using assignment statements.</span>
<span class="hljs-keyword">elif</span> match := re.search(otherpat, text):<font></font>
    print(<span class="hljs-string">"Alternate found:"</span>, match.group(<span class="hljs-number">0</span>))
<span class="hljs-keyword">elif</span> match := re.search(third, text):<font></font>
    print(<span class="hljs-string">"Fallback found:"</span>, match.group(<span class="hljs-number">0</span>))<font></font>
<font></font>
<span class="hljs-comment"># Reading socket data until an empty string is returned</span>
<span class="hljs-keyword">while</span> data := sock.recv(<span class="hljs-number">8192</span>):<font></font>
    print(<span class="hljs-string">"Received data:"</span>, data)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara khusus, pendekatan ini dapat menghilangkan kebutuhan untuk membuat loop tak terbatas, tugas, dan pengecekan kondisi. </font><font style="vertical-align: inherit;">Ini juga memungkinkan Anda untuk menggambar paralel yang mulus antara siklus yang menggunakan pemanggilan fungsi sebagai kondisinya, serta siklus yang tidak hanya memeriksa kondisi, tetapi juga menggunakan nilai aktual yang dikembalikan oleh fungsi di masa mendatang.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Garpu</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh dari dunia UNIX tingkat rendah: [kira-kira. </font><font style="vertical-align: inherit;">Fork () adalah panggilan sistem pada sistem operasi mirip Unix yang membuat sub-proses baru relatif terhadap induknya.]</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> pid := os.fork():
    <span class="hljs-comment"># Parent code</span>
<span class="hljs-keyword">else</span>:
    <span class="hljs-comment"># Child code</span></code></pre><br>
<a name="otklon"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alternatif yang Ditolak</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara umum, saran serupa cukup umum di komunitas python. </font><font style="vertical-align: inherit;">Di bawah ini adalah sejumlah sintaks alternatif untuk ekspresi penugasan yang terlalu spesifik untuk dipahami dan telah ditolak untuk mendukung hal di atas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengubah ruang lingkup untuk generator</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam versi PEP sebelumnya, diusulkan untuk membuat perubahan halus pada aturan ruang lingkup untuk generator agar lebih cocok untuk digunakan dalam ruang lingkup kelas. </font><font style="vertical-align: inherit;">Namun, proposal ini akan mengarah ke ketidakcocokan mundur dan karenanya ditolak. </font><font style="vertical-align: inherit;">Oleh karena itu, PEP ini hanya dapat sepenuhnya fokus pada ekspresi penugasan.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejaan alternatif</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara umum, ekspresi penugasan yang diusulkan memiliki semantik yang sama, tetapi ditulis berbeda.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EXPR sebagai NAME:</font></font><br>
<br>
<pre><code class="python hljs">stuff = [[f(x) <span class="hljs-keyword">as</span> y, x/y] <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>)]</code></pre><br>
   EXPR as NAME       import, except  with,         (,       ).<br>
<br>
( ,  «with EXPR as VAR»     EXPR  VAR,   EXPR.__enter__()        VAR.)<br>
<br>
 ,   ":="   :<br>
<ul>
<li>  ,  <b>if f(x) as y</b>     ,    ​​   <b>if f x blah-blah</b>,        <b>if f(x) and y</b>.</li>
<li>   ,  <b>as</b> ,           ,     : <ul>
<li>import foo as bar</li>
<li>except Exc as var</li>
<li>with ctxmgr() as var</li>
</ul><br>
 , <b>as</b>     if  while     ,   <b>as</b>  « »   .</li>
<li>  «»  <ul>
<li>NAME = EXPR</li>
<li>if NAME := EXPR</li>
</ul><br>
     .</li>
</ul></li>
<li>EXPR -&gt; NAME<br>
<br>
<pre><code class="python hljs">stuff = [[f(x) -&gt; y, x/y] <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>)]</code></pre><br>
     ,  R  Haskell,     . ( ,    - <b>y &lt; — f (x) </b>   Python,      -   .)       «as»   ,      import, except  with,      .             Python (    ),      ":=" (   Algol-58)     .</li>
<li>  «»    <br>
<br>
<pre><code class="python hljs">stuff = [[(f(x) <span class="hljs-keyword">as</span> .y), x/.y] <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>)] <span class="hljs-comment"># with "as"</span>
stuff = [[(.y := f(x)), x/.y] <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>)] <span class="hljs-comment"># with ":="</span></code></pre><br>
         .         Python,        ,   .</li>
<li> where:       :<br>
<br>
<pre><code class="python hljs">value = x**<span class="hljs-number">2</span> + <span class="hljs-number">2</span>*x where:<font></font>
    x = spam(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>, q)</code></pre><br>
   (    ,     «»).      ,   «»  (  with:). . PEP 3150,      (    <i>given:</i> ).</li>
<li>TARGET from EXPR:<br>
<br>
<pre><code class="python hljs">stuff = [[y <span class="hljs-keyword">from</span> f(x), x/y] <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>)]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sintaks ini lebih kecil kemungkinannya untuk konflik dengan orang lain daripada </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebagai</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (kecuali jika Anda menghitung kenaikan Exc dari konstruksi Exc), tetapi sebaliknya dapat dibandingkan dengan mereka. </font><font style="vertical-align: inherit;">Alih-alih sejajar dengan expr sebagai target: (yang mungkin berguna, tetapi juga bisa membingungkan), opsi ini tidak memiliki paralel dengan apa pun, tetapi secara mengejutkan lebih baik diingat.</font></font></li>
</ol><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kasus khusus dalam pernyataan bersyarat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salah satu kasus penggunaan yang paling umum untuk ekspresi penugasan adalah pernyataan if dan while. </font><font style="vertical-align: inherit;">Alih-alih solusi yang lebih umum, menggunakan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebagai</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> meningkatkan sintaksis dua pernyataan ini dengan menambahkan cara menangkap nilai yang akan dibandingkan:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> re.search(pat, text) <span class="hljs-keyword">as</span> match:<font></font>
    print(<span class="hljs-string">"Found:"</span>, match.group(<span class="hljs-number">0</span>))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini berfungsi dengan baik, tetapi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HANYA</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ketika kondisi yang diinginkan didasarkan pada "kebenaran" dari nilai pengembalian. </font><font style="vertical-align: inherit;">Dengan demikian, metode ini efektif untuk kasus tertentu (memeriksa ekspresi reguler, membaca soket, mengembalikan string kosong ketika eksekusi berakhir), dan sama sekali tidak berguna dalam kasus yang lebih kompleks (misalnya, ketika kondisinya adalah f (x) &lt;0, dan Anda ingin simpan nilai f (x)). </font><font style="vertical-align: inherit;">Juga, ini tidak masuk akal dalam daftar generator. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keuntungan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Tidak ada ambiguitas sintaksis. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kekurangan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : bahkan jika Anda menggunakannya hanya dalam pernyataan if / while, itu hanya berfungsi dengan baik dalam beberapa kasus.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kasus khusus dalam generator</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kasus penggunaan umum lainnya untuk ekspresi penugasan adalah generator (daftar / set / dict dan genexps). </font><font style="vertical-align: inherit;">Seperti di atas, saran dibuat untuk solusi spesifik.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di mana, biarkan, atau diberikan:</font></font><br>
<br>
<pre><code class="python hljs">stuff = [(y, x/y) where y = f(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>)]<font></font>
stuff = [(y, x/y) let y = f(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>)]<font></font>
stuff = [(y, x/y) given y = f(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>)]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metode ini menghasilkan subekspresi antara for for dan ekspresi utama. </font><font style="vertical-align: inherit;">Itu juga memperkenalkan kata kunci bahasa tambahan, yang dapat menciptakan konflik. </font><font style="vertical-align: inherit;">Dari tiga opsi, di </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah yang terbersih dan paling mudah dibaca, tetapi potensi konflik masih ada (misalnya, SQLAlchemy dan numpy memiliki metode di mana mereka, serta tkinter.dnd.Icon di perpustakaan standar).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan NAME = EXPR:</font></font><br>
<br>
<pre><code class="python hljs">stuff = [(y, x/y) <span class="hljs-keyword">with</span> y = f(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>)]</code></pre><br>
  ,     ,     <b>with</b>.         .   ,           «»  for.    C,         ,    .   : «  «with NAME = EXPR:»       ,   ?»</li>
<li>with EXPR as NAME:<br>
<br>
<pre><code class="python hljs">stuff = [(y, x/y) <span class="hljs-keyword">with</span> f(x) <span class="hljs-keyword">as</span> y <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>)]</code></pre><br>
   ,    <b>as</b>,    .       ,        for.      with          </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terlepas dari metode yang dipilih, perbedaan semantik yang tajam akan diperkenalkan antara generator dan versi yang digunakan melalui for for loop. </font><font style="vertical-align: inherit;">Menjadi tidak mungkin untuk membungkus siklus dalam generator tanpa memproses tahap pembuatan variabel. </font><font style="vertical-align: inherit;">Satu-satunya kata kunci yang dapat diorientasikan untuk tugas ini adalah kata </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Tetapi ini akan memberinya semantik berbeda di bagian kode yang berbeda, yang berarti Anda perlu membuat kata kunci baru, tetapi ini melibatkan banyak biaya.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prioritas operator lebih rendah</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Operator: = memiliki dua prioritas logis. Atau harus memiliki prioritas serendah mungkin (setara dengan operator penugasan). Atau harus diutamakan lebih besar daripada operator perbandingan. Menempatkan prioritasnya antara operator pembanding dan operasi aritmatika (lebih tepatnya: sedikit lebih rendah dari bitwise OR) akan memungkinkan Anda melakukannya tanpa tanda kurung dalam kebanyakan kasus kapan dan saat menggunakan, karena lebih mungkin Anda ingin menyimpan nilai sesuatu sebelum bagaimana perbandingan akan dilakukan di atasnya:</font></font><br>
<br>
<pre><code class="python hljs">pos = <span class="hljs-number">-1</span>
<span class="hljs-keyword">while</span> pos := buffer.find(search_term, pos + <span class="hljs-number">1</span>) &gt;= <span class="hljs-number">0</span>:<font></font>
    ...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Segera setelah find () mengembalikan -1, loop berakhir. </font><font style="vertical-align: inherit;">Jika: = mengikat operan dengan bebas seperti =, maka hasil find () pertama-tama akan "ditangkap" ke dalam operator perbandingan dan biasanya akan mengembalikan Benar atau Salah, yang kurang bermanfaat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meskipun perilaku ini praktis dalam banyak situasi, akan lebih sulit untuk dijelaskan. </font><font style="vertical-align: inherit;">Jadi kita dapat mengatakan bahwa "operator: = berperilaku sama dengan operator penugasan biasa." </font><font style="vertical-align: inherit;">Artinya, prioritas untuk: = dipilih sedekat mungkin dengan operator = (kecuali bahwa: = memiliki prioritas lebih tinggi daripada koma).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda memberi koma di sebelah kanan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beberapa kritikus berpendapat bahwa ekspresi penugasan harus mengenali tupel tanpa tambahan tanda kurung sehingga kedua entri tersebut setara:</font></font><br>
<br>
<pre><code class="python hljs">(point := (x, y))<font></font>
(point := x, y)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(Dalam versi standar saat ini, catatan terakhir akan setara dengan ekspresi ((titik: = x), y).) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi logis bahwa dalam skenario ini, ketika menggunakan ekspresi penugasan dalam panggilan fungsi, itu juga akan memiliki prioritas lebih rendah daripada koma, jadi kami mendapat akan menjadi kesetaraan membingungkan berikut:</font></font><br>
<br>
<pre><code class="python hljs">foo (x: = <span class="hljs-number">1</span>, y)<font></font>
foo (x: = (<span class="hljs-number">1</span>, y))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan kita mendapatkan satu-satunya jalan keluar yang kurang membingungkan: menjadikan: = operator prioritas yang lebih rendah daripada koma.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selalu membutuhkan tanda kurung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu selalu diusulkan untuk menandai ekspresi penugasan. </font><font style="vertical-align: inherit;">Ini akan menyelamatkan kita dari banyak ambiguitas. </font><font style="vertical-align: inherit;">Memang, tanda kurung sering dibutuhkan untuk mengekstraksi nilai yang diinginkan. </font><font style="vertical-align: inherit;">Tetapi dalam kasus-kasus berikut, kehadiran kurung jelas tampak berlebihan bagi kami:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment"># Top level in if</span>
<span class="hljs-keyword">if</span> match := pattern.match(line):
    <span class="hljs-keyword">return</span> match.group(<span class="hljs-number">1</span>)<font></font>
<font></font>
<span class="hljs-comment"># Short call</span>
len(lines := f.readlines())</code></pre><br>
<a name="chast"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keberatan yang sering</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengapa tidak mengubah pernyataan penugasan menjadi ekspresi?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bahasa C dan yang serupa mendefinisikan operator </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sebagai ekspresi, bukan instruksi, seperti yang dilakukan oleh Python. </font><font style="vertical-align: inherit;">Ini memungkinkan penugasan dalam banyak situasi, termasuk tempat di mana variabel dibandingkan. </font><font style="vertical-align: inherit;">Kesamaan sintaksis antara if (x == y) dan if (x = y) bertentangan dengan semantik mereka yang sangat berbeda. </font><font style="vertical-align: inherit;">Dengan demikian, PEP ini memperkenalkan operator: = untuk mengklarifikasi perbedaan mereka.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengapa repot dengan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ekspresi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> penugasan </font><font style="vertical-align: inherit;">jika ada </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instruksi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> penugasan?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kedua bentuk ini memiliki fleksibilitas yang berbeda. </font><font style="vertical-align: inherit;">Operator: = dapat digunakan di dalam ekspresi yang lebih besar, dan di operator = dapat digunakan oleh "keluarga operator mini" dari jenis "+ =". </font><font style="vertical-align: inherit;">Juga = memungkinkan Anda untuk menetapkan nilai berdasarkan atribut dan indeks.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengapa tidak menggunakan cakupan lokal dan mencegah polusi namespace?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versi sebelumnya dari standar ini mencakup ruang lingkup lokal nyata (terbatas pada satu pernyataan) untuk ekspresi penugasan, mencegah kebocoran nama dan polusi namespace. </font><font style="vertical-align: inherit;">Terlepas dari kenyataan bahwa dalam beberapa situasi ini memberikan keuntungan tertentu, dalam banyak situasi lain ini menyulitkan tugas, dan manfaatnya tidak dibenarkan oleh keunggulan dari pendekatan yang ada. </font><font style="vertical-align: inherit;">Ini dilakukan demi kepentingan kesederhanaan bahasa. </font><font style="vertical-align: inherit;">Anda tidak lagi membutuhkan variabel ini? </font><font style="vertical-align: inherit;">Ada solusinya: hapus variabel menggunakan kata kunci del atau tambahkan garis bawah yang lebih rendah ke namanya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(Penulis ingin mengucapkan terima kasih kepada Guido van Rossum dan Christophe Groth atas saran mereka untuk memajukan standar PEP ke arah ini. [2])</font></font><br>
<br>
<a name="rekom"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rekomendasi Gaya</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena ekspresi penugasan kadang-kadang dapat digunakan setara dengan operator penugasan, timbul pertanyaan, apa yang masih disukai? .. Sesuai dengan konvensi gaya lainnya (seperti PEP 8), ada dua rekomendasi:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda dapat menggunakan kedua opsi penugasan, maka berikan preferensi kepada operator. </font><font style="vertical-align: inherit;">Mereka paling jelas menyatakan niat Anda.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika penggunaan ekspresi penugasan mengarah ke ambiguitas dalam urutan eksekusi, maka tulis ulang kode menggunakan operator klasik.</font></font></li>
</ol><br>
<a name="blag"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terima kasih</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para penulis standar ini ingin mengucapkan terima kasih kepada Nick Coghlan dan Steven D'Aprano atas kontribusi mereka yang signifikan terhadap PEP ini, serta anggota-anggota Pendampingan Python Core atas bantuan mereka dalam mengimplementasikan ini.</font></font><br>
<br>
<a name="prilA"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lampiran A: Kesimpulan Tim Peters</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut adalah esai pendek yang ditulis Tim Peters tentang topik ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak suka kode "bingung", dan juga tidak suka menempatkan logika yang tidak berhubungan secara konsep pada satu baris. </font><font style="vertical-align: inherit;">Jadi, misalnya, alih-alih:</font></font><br>
<br>
<pre><code class="python hljs">i = j = count = nerrors = <span class="hljs-number">0</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya lebih suka menulis:</font></font><br>
<br>
<pre><code class="python hljs">i = j = <span class="hljs-number">0</span>
count = <span class="hljs-number">0</span>
nerrors = <span class="hljs-number">0</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oleh karena itu, saya pikir saya akan menemukan beberapa tempat di mana saya ingin menggunakan ekspresi penugasan. </font><font style="vertical-align: inherit;">Saya bahkan tidak ingin berbicara tentang penggunaannya dalam ekspresi yang sudah memanjang hingga setengah layar. </font><font style="vertical-align: inherit;">Dalam kasus lain, perilaku seperti:</font></font><br>
<br>
<pre><code class="python hljs">mylast = mylast[<span class="hljs-number">1</span>]
<span class="hljs-keyword">yield</span> mylast[<span class="hljs-number">0</span>]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara signifikan lebih baik daripada ini:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">yield</span> (mylast := mylast[<span class="hljs-number">1</span>])[<span class="hljs-number">0</span>]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kedua kode ini memiliki konsep yang sangat berbeda dan menggabungkannya akan menjadi gila. </font><font style="vertical-align: inherit;">Dalam kasus lain, menggabungkan ekspresi logis mempersulit pemahaman kode. </font><font style="vertical-align: inherit;">Misalnya, menulis ulang:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<font></font>
    old = total<font></font>
    total += term<font></font>
    <span class="hljs-keyword">if</span> old == total:
        <span class="hljs-keyword">return</span> total<font></font>
    term *= mx2 / (i*(i+<span class="hljs-number">1</span>))<font></font>
    i += <span class="hljs-number">2</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam bentuk yang lebih pendek, kita telah kehilangan "logika." </font><font style="vertical-align: inherit;">Anda perlu memahami cara kerja kode ini. </font><font style="vertical-align: inherit;">Otak saya tidak ingin melakukan ini:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">while</span> total != (total := total + term):<font></font>
    term *= mx2 / (i*(i+<span class="hljs-number">1</span>))<font></font>
    i += <span class="hljs-number">2</span>
<span class="hljs-keyword">return</span> total</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi kasus seperti itu jarang terjadi. </font><font style="vertical-align: inherit;">Tugas mempertahankan hasilnya sangat umum, dan "jarang lebih baik daripada padat" tidak berarti bahwa "hampir kosong lebih baik daripada jarang" [kira-kira. </font><font style="vertical-align: inherit;">referensi ke Zen Python]. </font><font style="vertical-align: inherit;">Misalnya, saya memiliki banyak fungsi yang mengembalikan Tidak Ada atau 0 untuk mengatakan "Saya tidak memiliki hal yang berguna, tetapi karena ini sering terjadi, saya tidak ingin mengganggu Anda dengan pengecualian." </font><font style="vertical-align: inherit;">Bahkan, mekanisme ini juga digunakan dalam ekspresi reguler yang mengembalikan Tidak ada ketika tidak ada kecocokan. </font><font style="vertical-align: inherit;">Karena itu, dalam contoh ini, banyak kode:</font></font><br>
<br>
<pre><code class="python hljs">result = solution(xs, n)
<span class="hljs-keyword">if</span> result:
    <span class="hljs-comment"># use result</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menemukan opsi berikut ini lebih mudah dimengerti, dan tentu saja lebih mudah dibaca:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> result := solution(xs, n):
    <span class="hljs-comment"># use result</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada awalnya saya tidak terlalu mementingkan hal ini, tetapi konstruksi sesingkat itu muncul begitu sering sehingga segera mulai mengganggu saya sehingga saya tidak dapat menggunakannya. </font><font style="vertical-align: inherit;">Itu mengejutkan saya! </font><font style="vertical-align: inherit;">[sekitar </font><font style="vertical-align: inherit;">rupanya ini ditulis sebelum Python 3.8 secara resmi dirilis.] </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada kasus-kasus lain di mana ekspresi penugasan benar-benar "menembak". </font><font style="vertical-align: inherit;">Alih-alih mencari-cari dalam kode saya lagi, Kirill Balunov memberikan contoh yang baik dari fungsi copy () dari perpustakaan copy.py standar:</font></font><br>
<br>
<pre><code class="python hljs">reductor = dispatch_table.get(cls)
<span class="hljs-keyword">if</span> reductor:<font></font>
    rv = reductor(x)<font></font>
<span class="hljs-keyword">else</span>:<font></font>
    reductor = getattr(x, <span class="hljs-string">"__reduce_ex__"</span>, <span class="hljs-literal">None</span>)
    <span class="hljs-keyword">if</span> reductor:<font></font>
        rv = reductor(<span class="hljs-number">4</span>)
    <span class="hljs-keyword">else</span>:<font></font>
        reductor = getattr(x, <span class="hljs-string">"__reduce__"</span>, <span class="hljs-literal">None</span>)
        <span class="hljs-keyword">if</span> reductor:<font></font>
            rv = reductor()<font></font>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">raise</span> Error(<span class="hljs-string">"un(shallow)copyable object of type %s"</span> % cls)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lekukan yang terus meningkat menyesatkan: lagipula, logikanya datar: tes sukses pertama "menang":</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> reductor := dispatch_table.get(cls):<font></font>
    rv = reductor(x)<font></font>
<span class="hljs-keyword">elif</span> reductor := getattr(x, <span class="hljs-string">"__reduce_ex__"</span>, <span class="hljs-literal">None</span>):<font></font>
    rv = reductor(<span class="hljs-number">4</span>)
<span class="hljs-keyword">elif</span> reductor := getattr(x, <span class="hljs-string">"__reduce__"</span>, <span class="hljs-literal">None</span>):<font></font>
    rv = reductor()<font></font>
<span class="hljs-keyword">else</span>:
    <span class="hljs-keyword">raise</span> Error(<span class="hljs-string">"un(shallow)copyable object of type %s"</span> % cls)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penggunaan ekspresi penugasan yang sederhana memungkinkan struktur visual kode untuk menekankan "bidang" logika. </font><font style="vertical-align: inherit;">Tapi lekukan yang terus meningkat membuatnya tersirat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut ini adalah contoh kecil lain dari kode saya, yang membuat saya sangat senang karena memungkinkan saya untuk menempatkan logika terkait secara internal pada satu baris dan menghapus tingkat indentasi "buatan" yang mengganggu. </font><font style="vertical-align: inherit;">Inilah yang saya inginkan dari pernyataan if dan itu membuat membaca lebih mudah. </font><font style="vertical-align: inherit;">Kode berikut:</font></font><br>
<br>
<pre><code class="python hljs">diff = x - x_base
<span class="hljs-keyword">if</span> diff:<font></font>
    g = gcd(diff, n)<font></font>
    <span class="hljs-keyword">if</span> g &gt; <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> g</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berubah menjadi:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> (diff := x - x_base) <span class="hljs-keyword">and</span> (g := gcd(diff, n)) &gt; <span class="hljs-number">1</span>:
    <span class="hljs-keyword">return</span> g</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, di sebagian besar baris di mana penugasan variabel terjadi, saya tidak akan menggunakan ekspresi penugasan. </font><font style="vertical-align: inherit;">Tetapi desain ini sangat sering sehingga masih banyak tempat di mana saya akan mengambil kesempatan ini. </font><font style="vertical-align: inherit;">Dalam kebanyakan kasus terakhir, saya menang sedikit, karena sering muncul. </font><font style="vertical-align: inherit;">Di sub-bagian yang tersisa, ini menyebabkan peningkatan sedang atau besar. </font><font style="vertical-align: inherit;">Jadi, saya akan menggunakan ekspresi penugasan jauh lebih sering daripada triple jika, tetapi jauh lebih jarang daripada penugasan augmented [kira-kira. </font><font style="vertical-align: inherit;">opsi pendek: * =, / =, + =, dll].</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh numerik</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya punya contoh lain yang mengejutkan saya sebelumnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika semua variabel adalah bilangan bulat positif, dan variabel </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lebih besar dari akar ke-x, maka algoritma ini mengembalikan pembulatan "ke bawah" dari akar ke-x (dan kira-kira menggandakan jumlah bit tepat per iterasi):</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">while</span> a &gt; (d := x // a**(n<span class="hljs-number">-1</span>)):<font></font>
    a = ((n<span class="hljs-number">-1</span>)*a + d) // n
<span class="hljs-keyword">return</span> a</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak jelas mengapa, tetapi varian dari algoritma seperti itu kurang jelas daripada loop tak terbatas dengan istirahat cabang bersyarat (loop setengah). Juga sulit untuk membuktikan kebenaran dari implementasi ini tanpa bergantung pada pernyataan matematis (“mean aritmatika - geometri ketidaksetaraan rata-rata”) dan tidak mengetahui beberapa hal non-sepele tentang bagaimana fungsi pembulatan bersarang berperilaku ke bawah. Tapi di sini masalahnya sudah ada di matematika, dan bukan di pemrograman. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan jika Anda mengetahui semua ini, maka opsi menggunakan ekspresi penugasan dibaca dengan sangat mudah, seperti kalimat sederhana: "Periksa" tebak "saat ini dan jika terlalu besar, kurangi itu" dan kondisi ini memungkinkan Anda untuk segera menyimpan nilai perantara dari kondisi loop. Menurut pendapat saya, bentuk klasik lebih sulit untuk dipahami:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<font></font>
    d = x // a**(n<span class="hljs-number">-1</span>)
    <span class="hljs-keyword">if</span> a &lt;= d:
        <span class="hljs-keyword">break</span>
    a = ((n<span class="hljs-number">-1</span>)*a + d) // n
<span class="hljs-keyword">return</span> a</code></pre><br>
<a name="prilB"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lampiran B: Juru Bahasa Kode Kasar untuk Generator</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apendiks ini berupaya mengklarifikasi (walaupun tidak menentukan) aturan yang dengannya suatu variabel harus dibuat dalam ekspresi generator. </font><font style="vertical-align: inherit;">Untuk sejumlah contoh ilustratif, kami menunjukkan kode sumber tempat generator diganti dengan fungsi yang setara dalam kombinasi dengan beberapa "perancah". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena [x untuk ...] sama dengan daftar (x untuk ...), contohnya tidak kehilangan sifat umumnya. </font><font style="vertical-align: inherit;">Dan karena contoh-contoh ini hanya dimaksudkan untuk memperjelas aturan umum, mereka tidak mengaku realistis.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Catatan: generator sekarang diimplementasikan melalui pembuatan fungsi generator bersarang (mirip dengan yang diberikan dalam lampiran ini). </font><font style="vertical-align: inherit;">Contoh menunjukkan bagian baru, yang menambahkan fungsionalitas yang sesuai untuk bekerja dengan lingkup ekspresi penugasan (ruang lingkup seolah-olah penugasan itu dilakukan dalam blok yang berisi generator paling eksternal). </font><font style="vertical-align: inherit;">Untuk menyederhanakan "inferensi tipe", contoh ilustratif ini tidak memperhitungkan bahwa penetapan ekspresi adalah opsional (tetapi memperhitungkan ruang lingkup variabel yang dibuat di dalam generator). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama-tama mari kita ingat kode apa yang dihasilkan "di bawah kap" untuk generator tanpa ekspresi penugasan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode sumber (EXPR paling sering menggunakan variabel VAR):</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>():</span>
    a = [EXPR <span class="hljs-keyword">for</span> VAR <span class="hljs-keyword">in</span> ITERABLE]</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode yang dikonversi (jangan khawatir tentang konflik nama):</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>():</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">genexpr</span>(<span class="hljs-params">iterator</span>):</span>
        <span class="hljs-keyword">for</span> VAR <span class="hljs-keyword">in</span> iterator:
            <span class="hljs-keyword">yield</span> EXPR<font></font>
    a = list(genexpr(iter(ITERABLE)))</code></pre></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari menambahkan ekspresi tugas sederhana.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sumber:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>():</span>
    a = [TARGET := EXPR <span class="hljs-keyword">for</span> VAR <span class="hljs-keyword">in</span> ITERABLE]
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode yang Dikonversi:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>():</span>
    <span class="hljs-keyword">if</span> <span class="hljs-literal">False</span>:<font></font>
        TARGET = <span class="hljs-literal">None</span>  <span class="hljs-comment"># Dead code to ensure TARGET is a local variable</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">genexpr</span>(<span class="hljs-params">iterator</span>):</span>
        <span class="hljs-keyword">nonlocal</span> TARGET
        <span class="hljs-keyword">for</span> VAR <span class="hljs-keyword">in</span> iterator:<font></font>
            TARGET = EXPR<font></font>
            <span class="hljs-keyword">yield</span> TARGET<font></font>
    a = list(genexpr(iter(ITERABLE)))</code></pre></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang mari kita tambahkan pernyataan TARGET global ke deklarasi fungsi f ().</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sumber:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>():</span>
    <span class="hljs-keyword">global</span> TARGET<font></font>
    a = [TARGET := EXPR <span class="hljs-keyword">for</span> VAR <span class="hljs-keyword">in</span> ITERABLE]
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode yang Dikonversi:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>():</span>
    <span class="hljs-keyword">global</span> TARGET
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">genexpr</span>(<span class="hljs-params">iterator</span>):</span>
        <span class="hljs-keyword">global</span> TARGET
        <span class="hljs-keyword">for</span> VAR <span class="hljs-keyword">in</span> iterator:<font></font>
            TARGET = EXPR<font></font>
            <span class="hljs-keyword">yield</span> TARGET<font></font>
    a = list(genexpr(iter(ITERABLE)))</code></pre></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atau sebaliknya, mari kita tambahkan TARGET nonlokal ke deklarasi fungsi f ().</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sumber:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">g</span>():</span><font></font>
    TARGET = ...<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>():</span>
        <span class="hljs-keyword">nonlocal</span> TARGET<font></font>
        a = [TARGET := EXPR <span class="hljs-keyword">for</span> VAR <span class="hljs-keyword">in</span> ITERABLE]
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode yang Dikonversi:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">g</span>():</span><font></font>
    TARGET = ...<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>():</span>
        <span class="hljs-keyword">nonlocal</span> TARGET
        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">genexpr</span>(<span class="hljs-params">iterator</span>):</span>
            <span class="hljs-keyword">nonlocal</span> TARGET
            <span class="hljs-keyword">for</span> VAR <span class="hljs-keyword">in</span> iterator:<font></font>
                TARGET = EXPR<font></font>
                <span class="hljs-keyword">yield</span> TARGET<font></font>
        a = list(genexpr(iter(ITERABLE)))</code></pre></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akhirnya, mari kita masukkan dua generator.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sumber:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>():</span>
    a = [[TARGET := i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>)] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(<span class="hljs-number">2</span>)]
    <span class="hljs-comment"># I.e., a = [[0, 1, 2], [0, 1, 2]]</span>
    print(TARGET)  <span class="hljs-comment"># prints 2</span>
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode yang Dikonversi:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>():</span>
    <span class="hljs-keyword">if</span> <span class="hljs-literal">False</span>:<font></font>
        TARGET = <span class="hljs-literal">None</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">outer_genexpr</span>(<span class="hljs-params">outer_iterator</span>):</span>
        <span class="hljs-keyword">nonlocal</span> TARGET
        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">inner_generator</span>(<span class="hljs-params">inner_iterator</span>):</span>
            <span class="hljs-keyword">nonlocal</span> TARGET
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> inner_iterator:<font></font>
                TARGET = i<font></font>
                <span class="hljs-keyword">yield</span> i
        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> outer_iterator:
            <span class="hljs-keyword">yield</span> list(inner_generator(range(<span class="hljs-number">3</span>)))<font></font>
    a = list(outer_genexpr(range(<span class="hljs-number">2</span>)))<font></font>
    print(TARGET)</code></pre></li>
</ul><br>
<a name="prilC"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lampiran C: Tidak Ada Perubahan Semantik Lingkup</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perhatikan bahwa dalam Python semantik lingkup tidak berubah. </font><font style="vertical-align: inherit;">Cakupan fungsi lokal masih ditentukan pada waktu kompilasi dan memiliki batas waktu tidak terbatas saat runtime (penutupan). </font><font style="vertical-align: inherit;">Contoh:</font></font><br>
<br>
<pre><code class="python hljs">a = <span class="hljs-number">42</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>():</span>
    <span class="hljs-comment"># `a` is local to `f`, but remains unbound</span>
    <span class="hljs-comment"># until the caller executes this genexp:</span>
    <span class="hljs-keyword">yield</span> ((a := i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>))
    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">lambda</span>: a + <span class="hljs-number">100</span>
    print(<span class="hljs-string">"done"</span>)
    <span class="hljs-keyword">try</span>:<font></font>
        print(<span class="hljs-string">f"`a` is bound to <span class="hljs-subst">{a}</span>"</span>)
        <span class="hljs-keyword">assert</span> <span class="hljs-literal">False</span>
    <span class="hljs-keyword">except</span> UnboundLocalError:<font></font>
        print(<span class="hljs-string">"`a` is not yet bound"</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>results = list(f()) <span class="hljs-comment"># [genexp, lambda]</span><font></font>
done<font></font>
`a` <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> yet bound
<span class="hljs-comment"># The execution frame for f no longer exists in CPython,</span>
<span class="hljs-comment"># but f's locals live so long as they can still be referenced.</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>list(map(type, results))<font></font>
[&lt;<span class="hljs-class"><span class="hljs-keyword">class</span> '<span class="hljs-title">generator</span>'&gt;, &lt;<span class="hljs-title">class</span> '<span class="hljs-title">function</span>'&gt;]
&gt;&gt;&gt; <span class="hljs-title">list</span>(<span class="hljs-params">results[<span class="hljs-number">0</span>]</span>)
[0, 1, 2]
&gt;&gt;&gt; <span class="hljs-title">results</span>[1]()
102
&gt;&gt;&gt; <span class="hljs-title">a</span>
42</span></code></pre><br>
<a name="ssilki"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Referensi</font></font></h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bukti implementasi konsep</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diskusi semantik ekspresi penugasan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (VPN ketat tapi dimuat)</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diskusi TargetScopeError di PEP 572</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (dimuat serupa dengan yang sebelumnya)</font></font></li>
</ol><br>
<a name="avtori"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hak cipta</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dokumen ini telah tersedia untuk umum. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sumber: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/python/peps/blob/master/pep-0572.rst</font></font></a><br>
<br>
<a name="my"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagianku</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memulai, mari kita simpulkan:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sehingga </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">orang tidak mencoba</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk menghilangkan dualitas semantik, di banyak tempat "klasik" di mana orang dapat menggunakan "=" dan ": =" ada batasan, oleh karena itu operator :: = harus sering ditutup dalam tanda kurung. </font><font style="vertical-align: inherit;">Kasus-kasus ini harus ditinjau dalam bagian yang </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menjelaskan penggunaan dasar.</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prioritas ekspresi penugasan sedikit lebih tinggi daripada koma. </font><font style="vertical-align: inherit;">Karena itu, tupel tidak terbentuk selama penugasan. </font><font style="vertical-align: inherit;">Itu juga memungkinkan untuk menggunakan: = operator ketika meneruskan argumen ke suatu fungsi.</font></font></li>
<li> ,   ,    ,    .       .    lambda    ,    «»  .</li>
<li>        :   ,     </li>
<li>      ,   .</li>
<li>          /  .</li>
<li>   ,      .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada akhirnya, saya ingin mengatakan bahwa saya menyukai operator baru. </font><font style="vertical-align: inherit;">Ini memungkinkan Anda untuk menulis kode yang lebih baik dalam kondisi, "filter" daftar, dan juga (akhirnya) menghapus "sama", baris kesepian sebelumnya jika. </font><font style="vertical-align: inherit;">Jika orang menggunakan ekspresi penugasan untuk tujuan yang dimaksudkan, maka ini akan menjadi alat yang sangat nyaman yang akan meningkatkan keterbacaan dan keindahan kode (Meskipun, ini dapat dikatakan tentang bahasa fungsional apa pun ....)</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id499654/index.html">Bagaimana menerapkan CRM di situs jarak jauh dan menang?</a></li>
<li><a href="../id499656/index.html">Simulasi pengontrol suhu PID</a></li>
<li><a href="../id499658/index.html">Seorang pekerja laki-laki, bukannya penguji? Apakah layak untuk mempelajari Selenium pada tahun 2020?</a></li>
<li><a href="../id499662/index.html">Root-of-Trust untuk IoT dan Tren Keamanan IoT lainnya</a></li>
<li><a href="../id499664/index.html">Porting APIs ke TypeScript sebagai Pemecah Masalah</a></li>
<li><a href="../id499668/index.html">Ketergantungan JavaScript Road to Hell</a></li>
<li><a href="../id499670/index.html">Я перехожу на JavaScript</a></li>
<li><a href="../id499674/index.html">Langkah lain ke komputer optik</a></li>
<li><a href="../id499676/index.html">90+ alat yang berguna untuk Kubernet: penyebaran, manajemen, pemantauan, keamanan, dan lainnya</a></li>
<li><a href="../id499680/index.html">Belajar Kubernetes: Dasar 14-16 Mei, Lanjutan 18-20 Mei</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>