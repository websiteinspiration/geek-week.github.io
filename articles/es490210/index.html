<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòï üëãüèΩ üë©‚Äç‚öñÔ∏è Acelerando la interfaz. Cuando muchas solicitudes de servidor son buenas üéΩ üë©‚Äçüîß üê¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este art√≠culo describe algunos m√©todos para acelerar la carga de aplicaciones front-end para implementar una interfaz de usuario r√°pida y receptiva. 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Acelerando la interfaz. Cuando muchas solicitudes de servidor son buenas</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/490210/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este art√≠culo describe algunos m√©todos para acelerar la carga de aplicaciones front-end para implementar una interfaz de usuario r√°pida y receptiva. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Discutiremos la arquitectura general de la interfaz, c√≥mo precargar los recursos necesarios y aumentar la probabilidad de que est√©n en la memoria cach√©. </font><font style="vertical-align: inherit;">Discutiremos un poco c√≥mo dar recursos desde el backend y cu√°ndo es posible limitarnos a p√°ginas est√°ticas en lugar de una aplicaci√≥n cliente interactiva. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proceso de descarga se divide en tres etapas. </font><font style="vertical-align: inherit;">Para cada etapa, formulamos estrategias generales para aumentar la productividad:</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Representaci√≥n inicial</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : cu√°nto tiempo le lleva al usuario ver al menos algo</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduce las solicitudes de bloqueo de representaci√≥n</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Evitar cadenas secuenciales</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reutilice las conexiones del servidor</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabajadores de servicio para renderizado instant√°neo</font></font></li>
</ul></li>
<li><b> </b>:   ,     <br>
<ul>
<li>    .    .    <br>
</li>
<li>,        <br>
</li>
<li>       <br>
</li>
<li>     <br>
</li>
<li>    </li>
</ul></li>
<li><b> </b>:        <br>
<ul>
<li>    ,   <br>
</li>
<li>      </li>
</ul></li>
</ol><a name="habracut"></a><br>
<h1> </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasta la representaci√≥n inicial, el usuario no ve nada en la pantalla. ¬øQu√© necesitamos para esta representaci√≥n? Como m√≠nimo, cargue un documento HTML y, en la mayor√≠a de los casos, recursos adicionales, como archivos CSS y JavaScript. Una vez que est√°n disponibles, el navegador puede comenzar alg√∫n tipo de representaci√≥n. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">Los</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
cuadros de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebPageTest</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se proporcionan a lo largo de este art√≠culo </font><font style="vertical-align: inherit;">. La secuencia de consulta para su sitio probablemente se ver√° as√≠. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/36a/970/f6e/36a970f6e3069679776958e6e0ef10d8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El documento HTML carga un mont√≥n de archivos adicionales, y la p√°gina se representa despu√©s de que se descargan. Tenga en cuenta que los archivos CSS se cargan en paralelo entre s√≠, por lo que cada solicitud adicional no agrega un retraso significativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(Nota: en la captura de pantalla, gov.uk es un ejemplo donde </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">HTTP / 2</font></a><font style="vertical-align: inherit;"> ahora </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est√° habilitado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para que el dominio de recursos pueda reutilizar una conexi√≥n existente. </font><font style="vertical-align: inherit;">Consulte a continuaci√≥n las conexiones del servidor).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduce las solicitudes de bloqueo de representaci√≥n</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las hojas de estilo y (por defecto) los scripts bloquean la representaci√≥n de cualquier contenido debajo de ellos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay varias opciones para solucionar esto:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mover etiquetas de script a la parte inferior del cuerpo </font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descargar scripts en modo asincr√≥nico usando </font></font><code>async</code><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si JS o CSS deben cargarse secuencialmente, es mejor incrustarlos con peque√±os fragmentos</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Evite conversaciones con solicitudes secuenciales que bloqueen la representaci√≥n</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El retraso en la representaci√≥n del sitio no est√° necesariamente asociado con una gran cantidad de solicitudes que bloquean la representaci√≥n. </font><font style="vertical-align: inherit;">M√°s importante es el tama√±o de cada recurso, as√≠ como el tiempo de inicio de su descarga. </font><font style="vertical-align: inherit;">Es decir, el momento en que el navegador de repente se da cuenta de que este recurso necesita ser descargado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el navegador detecta la necesidad de descargar el archivo solo despu√©s de completar otra solicitud, entonces hay una cadena de solicitudes. </font><font style="vertical-align: inherit;">Se puede formar por varias razones:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reglas </font></font><code>@import</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSS</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fuentes web a las que hace referencia el archivo CSS</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript descargable o etiquetas de script</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eche un vistazo a este ejemplo: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ebe/a1b/e44/ebea1be44487e800d63034b7fb2e9b79.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
uno de los archivos CSS en este sitio carga la fuente de Google a trav√©s de la regla </font></font><code>@import</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Esto significa que el navegador tiene que turnarse para ejecutar las siguientes solicitudes:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documento HTML</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aplicaciones CSS</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSS para fuentes de Google</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Archivo de fuente de Google Woff (no se muestra en el diagrama)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para solucionar esto, primero mueva la solicitud CSS de Google Fonts de la etiqueta </font></font><code>@import</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">al enlace en el documento HTML. </font><font style="vertical-align: inherit;">Entonces acortamos la cadena por un enlace. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para acelerar a√∫n m√°s las cosas, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">incrusta CSS de Google Fonts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> directamente en tu archivo HTML o CSS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(Tenga en cuenta que la respuesta CSS del servidor de Google Fonts depende de la l√≠nea del agente de usuario. Si realiza una solicitud con IE8, el CSS se referir√° al archivo EOT, IE11 recibir√° el archivo woff y los navegadores modernos recibir√°n el archivo woff2. Si acepta que los navegadores antiguos se limitar√°n a las fuentes del sistema, simplemente puede copiar y pegar el contenido del archivo CSS para usted).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Incluso despu√©s del inicio de la representaci√≥n, es poco probable que el usuario pueda interactuar con la p√°gina, ya que la fuente debe cargarse para mostrar el texto. </font><font style="vertical-align: inherit;">Este es un retraso de red adicional que me gustar√≠a evitar. </font><font style="vertical-align: inherit;">El </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">par√°metro de intercambio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es √∫til aqu√≠ </font><font style="vertical-align: inherit;">, le permite usarlo </font></font><code>font-display</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con Google Fonts y almacenar fuentes localmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A veces, la cadena de consulta no se puede resolver. </font><font style="vertical-align: inherit;">En tales casos, es posible que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desee</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> considerar </font><b><font style="vertical-align: inherit;">la etiqueta de precarga o preconexi√≥n</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Por ejemplo, el sitio web en el ejemplo anterior puede conectarse </font></font><code>fonts.googleapis.com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">antes de que llegue la solicitud CSS real.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reutilizando las conexiones del servidor para acelerar las solicitudes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para establecer una nueva conexi√≥n con el servidor, generalmente se requieren tres intercambios de paquetes entre el navegador y el servidor:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B√∫squeda de DNS</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Establecer una conexi√≥n TCP</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Establecer una conexi√≥n SSL</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez establecida la conexi√≥n, se requiere al menos un intercambio de paquetes m√°s para enviar una solicitud y recibir una respuesta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La tabla a continuaci√≥n muestra que iniciar una conexi√≥n con cuatro servidores diferentes: </font></font><code>hostgator.com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>optimizely.com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>googletagmanager.com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y </font></font><code>googelapis.com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">las solicitudes posteriores del servidor pueden reutilizar una conexi√≥n existente</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La descarga </font></font><code>base.css</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o bien </font></font><code>index1.css</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ocurre m√°s r√°pido ya que se encuentran en el mismo servidor </font></font><code>hostgator.com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con el que ya se ha establecido una conexi√≥n.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/78d/f76/03c/78df7603c84c54788fbec82a7d0622c7.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduzca el tama√±o del archivo y use CDN</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usted controla dos factores que afectan el tiempo de ejecuci√≥n de la consulta: el tama√±o de los archivos de recursos y la ubicaci√≥n de los servidores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Env√≠e la menor cantidad de datos posible al usuario y aseg√∫rese de que est√©n comprimidos (por ejemplo, usando brotli o gzip). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las redes de entrega de contenido (CDN) tienen servidores en todo el mundo. </font><font style="vertical-align: inherit;">En lugar de conectarse a un servidor central, un usuario puede conectarse a un servidor CDN m√°s cercano. </font><font style="vertical-align: inherit;">Por lo tanto, el intercambio de paquetes ser√° mucho m√°s r√°pido. </font><font style="vertical-align: inherit;">Esto es especialmente adecuado para recursos est√°ticos como CSS, JavaScript e im√°genes, ya que son f√°ciles de distribuir a trav√©s de CDN.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elimine la latencia de la red con los trabajadores del servicio.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los trabajadores de servicio le permiten interceptar solicitudes antes de enviarlas a la red. </font><font style="vertical-align: inherit;">¬°Esto significa que la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">respuesta llega casi al instante</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ! </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c0c/5b2/7bd/c0c5b27bd4df5e42b3b8e57b2dfb02f2.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, esto solo funciona si realmente no necesita recibir datos de la red. </font><font style="vertical-align: inherit;">La respuesta ya debe estar almacenada en cach√©, por lo que el beneficio aparecer√° solo de la segunda descarga de la aplicaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El trabajador de servicio a continuaci√≥n almacena en cach√© el HTML y CSS necesarios para representar la p√°gina. </font><font style="vertical-align: inherit;">Cuando la aplicaci√≥n se carga nuevamente, intenta emitir recursos en cach√© por s√≠ misma, y ‚Äã‚Äãaccede a la red solo si no est√°n disponibles.</font></font><br>
<br>
<pre><code class="javascript hljs">self.addEventListener(<span class="hljs-string">"install"</span>, <span class="hljs-keyword">async</span> e =&gt; {<font></font>
 caches.open(<span class="hljs-string">"v1"</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">cache</span>) </span>{
   <span class="hljs-keyword">return</span> cache.addAll([<span class="hljs-string">"/app"</span>, <span class="hljs-string">"/app.css"</span>]);<font></font>
 });<font></font>
});<font></font>
<font></font>
self.addEventListener(<span class="hljs-string">"fetch"</span>, event =&gt; {<font></font>
 event.respondWith(<font></font>
   caches.match(event.request).then(<span class="hljs-function"><span class="hljs-params">cachedResponse</span> =&gt;</span> {
     <span class="hljs-keyword">return</span> cachedResponse || fetch(event.request);<font></font>
   })<font></font>
 );<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esta gu√≠a, se</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> explica en detalle el uso de los trabajadores del servicio para precargar y almacenar en cach√© los recursos.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descargar aplicaci√≥n</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, el usuario ve algo en la pantalla. </font><font style="vertical-align: inherit;">¬øQu√© pasos adicionales son necesarios para que use la aplicaci√≥n?</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descargar el c√≥digo de la aplicaci√≥n (JS y CSS)</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descargue los datos requeridos para la p√°gina</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descargar datos e im√°genes adicionales</font></font></li>
</ol><br>
<img src="https://habrastorage.org/getpro/habr/post_images/175/e7f/810/175e7f810d7e33f9647203ad609b402f.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenga en cuenta que no solo descargar datos de la red puede retrasar el procesamiento. </font><font style="vertical-align: inherit;">Una vez que se carga el c√≥digo, el navegador debe analizarlo, compilarlo y ejecutarlo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descargue solo el c√≥digo necesario y maximice la cantidad de visitas en el cach√©</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Romper un paquete" significa descargar solo el c√≥digo necesario para la p√°gina actual, no la aplicaci√≥n completa. </font><font style="vertical-align: inherit;">Tambi√©n significa que algunas partes del paquete pueden almacenarse en cach√©, incluso si otras partes han cambiado y deben volver a cargarse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como regla general, el c√≥digo se divide en las siguientes partes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo para una p√°gina espec√≠fica (espec√≠fica de la p√°gina)</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo de aplicaci√≥n com√∫n</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√≥dulos de terceros que rara vez cambian (¬°excelente para el almacenamiento en cach√©!)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webpack puede hacer esta optimizaci√≥n autom√°ticamente, romper el c√≥digo y reducir el peso total de la carga. </font><font style="vertical-align: inherit;">El c√≥digo se divide en pedazos usando el objeto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">optimization.splitChunks</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Separe el tiempo de ejecuci√≥n (tiempo de ejecuci√≥n) en un archivo separado: de esta manera puede beneficiarse del almacenamiento en cach√© a largo plazo. </font><font style="vertical-align: inherit;">Ivan Akulov escribi√≥ una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gu√≠a detallada sobre</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> c√≥mo </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">dividir un paquete en archivos separados y el almacenamiento en cach√© en Webpack</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No es posible asignar c√≥digo autom√°ticamente para una p√°gina espec√≠fica. </font><font style="vertical-align: inherit;">Debe identificar manualmente las partes que se pueden descargar por separado. </font><font style="vertical-align: inherit;">A menudo, esta es una ruta espec√≠fica o un conjunto de p√°ginas. </font><font style="vertical-align: inherit;">Utilice </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">las importaciones din√°micas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para cargar este c√≥digo de forma perezosa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dividir el paquete general en partes aumentar√° el n√∫mero de solicitudes para descargar su aplicaci√≥n. Pero este no es un gran problema si las solicitudes se ejecutan en paralelo, especialmente si el sitio se carga utilizando el protocolo HTTP / 2. Puede ver esto para las primeras tres consultas en el siguiente diagrama: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/995/816/714/9958167144c54dc634d1b7daa03077e3.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, dos consultas consecutivas tambi√©n son visibles en el diagrama. Estos fragmentos son necesarios solo para esta p√°gina en particular y se cargan din√°micamente </font></font><code>import()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede intentar solucionar el problema insertando una etiqueta preload </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">preload</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/955/2cf/efc/9552cfefcbb751b50e378a0834320b73.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero vemos que el tiempo total de carga de la p√°gina ha aumentado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La precarga de recursos a veces es contraproducente ya que retrasa la carga de archivos m√°s importantes. Leer</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El art√≠culo de Andy Davis sobre la precarga de fuentes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y c√≥mo este procedimiento bloquea el inicio de la representaci√≥n de la p√°gina.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cargando datos para una p√°gina</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Su aplicaci√≥n probablemente deber√≠a mostrar algunos datos. </font><font style="vertical-align: inherit;">Aqu√≠ hay algunos consejos que puede usar para descargar esta informaci√≥n antes de tiempo sin demoras innecesarias.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No espere la descarga completa del paquete antes de comenzar a descargar los datos.</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ hay un caso especial de una cadena de solicitudes secuenciales: descarga el paquete completo de la aplicaci√≥n y luego este c√≥digo solicita los datos necesarios para la p√°gina. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay dos formas de evitar esto:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Incrustar datos en un documento HTML</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejecute una solicitud de datos utilizando el script incorporado dentro del documento</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Incrustar los datos en HTML garantiza que la aplicaci√≥n no espere a que se cargue. Tambi√©n reduce la complejidad del sistema, ya que no necesita manejar el estado de arranque. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, esta no es una buena idea si dicha t√©cnica retrasa el renderizado inicial. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este caso, as√≠ como si est√° enviando un documento HTML en cach√© a trav√©s de un trabajador de servicios, puede usar el script incorporado para descargar estos datos como alternativa. Puede hacerlo disponible como un objeto global, aqu√≠ hay una promesa:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">window</span>.userDataPromise = fetch(<span class="hljs-string">"/me"</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si los datos est√°n listos, y en tal situaci√≥n, la aplicaci√≥n puede comenzar a procesar de inmediato o esperar hasta que est√© lista. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando utilice ambos m√©todos, debe saber de antemano qu√© datos cargar√° la p√°gina antes de que la aplicaci√≥n comience a representarse. </font><font style="vertical-align: inherit;">Esto suele ser obvio para los datos relacionados con el usuario (nombre de usuario, notificaciones, etc.), pero es m√°s dif√≠cil con el contenido espec√≠fico de una p√°gina en particular. </font><font style="vertical-align: inherit;">Quiz√°s tenga sentido resaltar las p√°ginas m√°s importantes y escribir su propia l√≥gica para ellas.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No bloquee el renderizado mientras espera datos irrelevantes</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A veces, para generar datos, debe ejecutar una l√≥gica compleja lenta en el back-end. </font><font style="vertical-align: inherit;">En tales casos, puede intentar descargar primero una versi√≥n m√°s simple de los datos, si es suficiente para que la aplicaci√≥n sea funcional e interactiva. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, una herramienta de an√°lisis puede descargar primero una lista de todos los gr√°ficos antes de cargar los datos. </font><font style="vertical-align: inherit;">Esto permite al usuario buscar de inmediato el diagrama que le interesa y tambi√©n ayuda a distribuir las solicitudes de backend a diferentes servidores.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/996/ab6/613/996ab66136976b0b22d95e7778fb4664.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Evitar consultas de datos consecutivas</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto puede contradecir el p√°rrafo anterior de que es mejor publicar datos no esenciales en una solicitud por separado. </font><font style="vertical-align: inherit;">Por lo tanto, debe aclararse: evite las cadenas con solicitudes de datos secuenciales, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si cada solicitud completada no conduce al hecho de que se muestra m√°s informaci√≥n al usuario</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En lugar de consultar primero qu√© usuario ha iniciado sesi√≥n y luego solicitar una lista de sus grupos, devuelva inmediatamente la lista de grupos junto con la informaci√≥n del usuario en la primera consulta. </font><font style="vertical-align: inherit;">Puede usar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GraphQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para esto </font><font style="vertical-align: inherit;">, pero el punto final </font></font><code>user?includeTeams=true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tambi√©n funciona bien.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Representaci√≥n del lado del servidor</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La representaci√≥n del lado del servidor significa la representaci√≥n previa de la aplicaci√≥n, por lo que se devuelve un HTML de p√°gina completa a solicitud del cliente. ¬°El cliente ve la p√°gina completamente renderizada, sin esperar a que se carguen c√≥digos o datos adicionales! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como el servidor env√≠a al cliente solo HTML est√°tico, la aplicaci√≥n no es interactiva en este momento. Debe descargar la aplicaci√≥n en s√≠, iniciar la l√≥gica de representaci√≥n y luego conectar los oyentes de eventos necesarios al DOM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Utilice la representaci√≥n del lado del servidor si ver contenido no interactivo es valioso en s√≠ mismo. Tambi√©n es bueno almacenar HTML en cach√© en el servidor e inmediatamente devolverlo a todos los usuarios sin demora. Por ejemplo, la representaci√≥n del lado del servidor es excelente cuando se usa React para mostrar publicaciones de blog. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este art√≠culo de Mikhail Yanashek</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> describe c√≥mo combinar los trabajadores de servicios y la representaci√≥n del lado del servidor.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siguiente p√°gina</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En alg√∫n momento, el usuario est√° a punto de presionar un bot√≥n e ir a la p√°gina siguiente. </font><font style="vertical-align: inherit;">Desde el momento en que abre la p√°gina de inicio, controla lo que sucede en el navegador, por lo que puede prepararse para la pr√≥xima interacci√≥n.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Precarga de recursos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si precarga el c√≥digo necesario para la p√°gina siguiente, el retraso desaparece cuando el usuario inicia la navegaci√≥n. </font><font style="vertical-align: inherit;">Utilice </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">etiquetas de captaci√≥n previa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o </font></font><code>webpackPrefetch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para importaci√≥n din√°mica:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>(
    <span class="hljs-comment">/* webpackPrefetch: true, webpackChunkName: "todo-list" */</span> <span class="hljs-string">"./TodoList"</span>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere qu√© tipo de carga coloca en el usuario en t√©rminos de tr√°fico y ancho de banda, especialmente si est√° conectado a trav√©s de una conexi√≥n m√≥vil. </font><font style="vertical-align: inherit;">Si una persona descarg√≥ la versi√≥n m√≥vil del sitio y el modo de almacenamiento de datos est√° activo, entonces es razonable precargar de manera menos agresiva. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere estrat√©gicamente qu√© partes de la aplicaci√≥n necesitar√° el usuario antes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reutilizaci√≥n de datos ya descargados</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cach√© los datos localmente en su aplicaci√≥n y √∫selos para evitar futuras solicitudes. </font><font style="vertical-align: inherit;">Si el usuario va de la lista de sus grupos a la p√°gina "Editar grupo", puede hacer la transici√≥n al instante, reutilizando los datos descargados previamente sobre el grupo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenga en cuenta que esto no funcionar√° si el objeto es editado a menudo por otros usuarios y los datos descargados pueden quedar desactualizados. </font><font style="vertical-align: inherit;">En estos casos, hay una opci√≥n para mostrar primero los datos existentes de solo lectura mientras se ejecuta simult√°neamente una solicitud de datos actualizados.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este art√≠culo enumera una serie de factores que pueden ralentizar su p√°gina en diferentes etapas del proceso de carga. Herramientas como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chrome DevTools</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebPageTest</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lighthouse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lo ayudar√°n a determinar cu√°les de estos factores afectan su aplicaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la pr√°ctica, rara vez la optimizaci√≥n se dirige inmediatamente en todas las direcciones. Necesitamos descubrir qu√© tiene el mayor impacto en los usuarios y centrarnos en ello.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mientras escrib√≠a el art√≠culo, me di cuenta de una cosa importante: cre√≠a firmemente que muchas solicitudes de servidores individuales eran malas para el rendimiento. </font><font style="vertical-align: inherit;">Este era el caso en el pasado, cuando cada solicitud requer√≠a una conexi√≥n separada, y los navegadores permit√≠an solo unas pocas conexiones por dominio. </font><font style="vertical-align: inherit;">Pero con HTTP / 2 y los navegadores modernos, este ya no es el caso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay buenos argumentos a favor de dividir la aplicaci√≥n en partes (con consultas multiplicadas). </font><font style="vertical-align: inherit;">Esto le permite descargar solo los recursos necesarios y es mejor usar el cach√©, ya que solo los archivos modificados tendr√°n que volver a cargarse.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es490196/index.html">[Flipper Zero] rechaza Raspberry Pi, crea nuestra propia placa desde cero. Encontrar el chip WiFi correcto</a></li>
<li><a href="../es490198/index.html">¬°Confiar pero verificar! Zona de demostraci√≥n con proyectores Epson para cine en casa en la sala de demostraci√≥n Pult.ru</a></li>
<li><a href="../es490202/index.html">Recuento de consultas: pruebas de rendimiento b√°sicas de Django</a></li>
<li><a href="../es490204/index.html">El resumen de eventos para reclutadores de recursos humanos y TI en marzo de 2020</a></li>
<li><a href="../es490208/index.html">Secci√≥n de back-end en DUMP2020: bromas, ventilador, falla</a></li>
<li><a href="../es490222/index.html">Biblioteca est√°ndar del d√≠a de la muerte</a></li>
<li><a href="../es490224/index.html">Sigilo de moda</a></li>
<li><a href="../es490226/index.html">Blending y Unity Terrain: c√≥mo deshacerse de las intersecciones y dejar de hacer que te duelan los ojos</a></li>
<li><a href="../es490242/index.html">Servicio de localizaci√≥n GSM de m√≥dulos SIM800x y su trabajo con Yandex.Locator API</a></li>
<li><a href="../es490244/index.html">Optimizaci√≥n de c√≥digo Python con ctypes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>