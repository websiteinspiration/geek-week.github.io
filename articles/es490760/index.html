<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤚🏿 🤷🏽 🏂🏼 Ray Casting Visual Search (RCVS). Algoritmo simple y rápido para encontrar modelos 3D similares en geometría 💥 🙎🏿 🥈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Para mí, estos dos modelos son muy similares, pero no tienen características obvias por las cuales se pueda medir su similitud. Estos modelos tienen d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Ray Casting Visual Search (RCVS). Algoritmo simple y rápido para encontrar modelos 3D similares en geometría</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490760/"><img src="https://habrastorage.org/webt/u2/8i/fw/u28ifwuqbqnlhhiwwldggmtayp4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para mí, estos dos modelos son muy similares, pero no tienen características obvias por las cuales se pueda medir su similitud. Estos modelos tienen diferentes números de vértices, aristas y polígonos, son de diferentes tamaños, además están rotados de manera diferente en el espacio, y ambos tienen las mismas transformaciones (Posición = [0,0,0], Rotación en radianes = [0,0, 0], Escala = [1,1,1]). ¿Cómo determinar su similitud?</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si estos modelos estuvieran igualmente orientados en el espacio, podrían reducirse al tamaño total de la Caja de límites, mover el origen de las coordenadas locales a su centro, conducir a una vista de vóxel y comparar las listas de vóxeles. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/hk/m7/hxhkm7cupsn8fts2jgjmpmqmg3o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monos y sus vóxeles.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si estos modelos estuvieran orientados arbitrariamente a lo largo de los ejes de coordenadas, también podrían reducirse al tamaño total de la Caja de límites, mover el origen de las coordenadas locales a su centro, y luego representarlos en seis lados y comparar conjuntos de imágenes entre ellos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1o/t1/g0/1ot1g00gyan9sroahuclx20bbo0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renders de curvatura superficial.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Para lograr la invariancia de rotación, decidí recurrir a un sistema de coordenadas esféricas.</font></font><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>r</mi><mo>=</mo><msqrt><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup></msqrt></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.895ex" height="4.634ex" viewBox="0 -1347.5 8135.3 1995.3" role="img" focusable="false" style="vertical-align: -1.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJMATHI-72" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJMAIN-3D" x="729" y="0"></use><g transform="translate(1785,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJSZ2-221A" x="0" y="65"></use><rect stroke="none" width="5349" height="60" x="1000" y="1156"></rect><g transform="translate(1000,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJMAIN-32" x="809" y="583"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJMAIN-2B" x="1248" y="0"></use><g transform="translate(2249,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJMAIN-32" x="706" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJMAIN-2B" x="3425" y="0"></use><g transform="translate(4425,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJMATHI-7A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJMAIN-32" x="663" y="583"></use></g></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>r</mi><mo>=</mo><msqrt><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup></msqrt></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1">r = \sqrt{x^2+y^2+z^2}</script></p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al principio conté las distancias a los vóxeles desde el origen, recogí las distancias en listas ordenadas y comparé estas listas. </font><font style="vertical-align: inherit;">Esto arrojó buenos resultados, pero llevó mucho tiempo convertir la forma de vóxel a una resolución suficiente y comparar grandes listas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Breve descripción de RCVS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En lugar de voxelización y renderizado, mi método usa Ray Casting. </font><font style="vertical-align: inherit;">El modelo se coloca dentro del poliedro esférico icosaédrico, desde los polígonos cuyos rayos se arrojan y se registra su longitud (trayectoria) hasta la superficie del modelo. </font><font style="vertical-align: inherit;">Las listas de estos caminos se ordenan y comparan entre sí. </font><font style="vertical-align: inherit;">La ordenación elimina los giros, ya que para los modelos de geometría iguales o cercanos, la trayectoria de los rayos coincidirá dentro del error, pero diferirá en orden. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2e/in/it/2einitowujo6sygimeu5qcsh6ss.gif"><img src="https://habrastorage.org/webt/p3/nn/gs/p3nngs1qtrc92rch2wbfylqgkeu.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">80 y 1280 rayos respectivamente. </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los resultados de comparar los modelos de monos de Suzanne de diferentes maneras.</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/bd/2x/0m/bd2x0mkajcvvj3qlzjeexr1xu6e.png"><br>
<pre><code class="python hljs">Suzanne_lo<font></font>
                          Suzanne_lo | <span class="hljs-number">1</span>             
                 Suzanne_lo_rot_rand | <span class="hljs-number">0.9878376875939173</span>
                   Suzanne_lo_rot_90 | <span class="hljs-number">0.9800766750109137</span>
                 Suzanne_hi_rot_rand | <span class="hljs-number">0.9761078629585936</span>
                          Suzanne_hi | <span class="hljs-number">0.9730722945028376</span>
                   Suzanne_hi_rot_90 | <span class="hljs-number">0.9680325422930756</span>
                               Skull | <span class="hljs-number">0.7697333228143514</span>
             Ceramic_Teapot_rot_rand | <span class="hljs-number">0.6634783235048608</span>
                      Ceramic_Teapot | <span class="hljs-number">0.6496529954470333</span>
                         Grenade_MK2 | <span class="hljs-number">0.5275616759076022</span>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descripción detallada de RCVS</font></font></h3><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pasos Ilustraciones</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/o2/tj/3o/o2tj3owsz0_jne4p0nbecptu8zs.png"><br>
<br>
<img src="https://habrastorage.org/webt/p9/lj/ty/p9ljty3f0fmfempfowlegvkiari.png"><br>
<br>
<img src="https://habrastorage.org/webt/wf/mi/ws/wfmiwskrxwqgc4vtuakleiqztg8.png"><br>
<br>
<img src="https://habrastorage.org/webt/yt/5j/a8/yt5ja8yymaxp_1imonuuewwac7u.png"><br>
<br>
<img src="https://habrastorage.org/webt/b8/yf/af/b8yfafbvbo9xtqldngm-b_rgisg.png"><br>
<br>
<img src="https://habrastorage.org/webt/hq/z9/te/hqz9tekclzhlx6xo2_8fneklf-o.png"><br>
<br>
<img src="https://habrastorage.org/webt/wl/em/_8/wlem_8ibovdfz3pxcydkl_jyrbk.png"><br>
<br>
<img src="https://habrastorage.org/webt/yc/yp/im/ycypimotysn1k1lb5ocqn4zs9mu.png"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de comparar modelos 3D (en adelante denominados objetos), cada uno pasa por la fase de preparación (implementé esta parte en Python en Blender):</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El origen de las coordenadas locales de los componentes del objeto se establece en el centro de masa del volumen.</font></font></li>
<li>             .</li>
<li>  .</li>
<li>      ( )    ,  .   ,    : 80, 320, 1280, 5120, 22480.             1280.</li>
<li>                ,      .</li>
<li>     .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los rayos se envían nuevamente desde cada polígono de la icosfera y su camino se guarda hasta que se encuentran con la superficie del objeto, cuyas normales se dirigen dentro del objeto. </font><font style="vertical-align: inherit;">(Esto corrige la geometría interna y / o llena los puntos ciegos de los rayos anteriores)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las rutas de los rayos enviados desde polígonos opuestos se ordenan en listas, donde las dos primeras rutas del paso 5 y las segundas dos del paso 7. Cada lista se ordena por el valor de ruta más pequeño del paso 5 para que las rutas de los pasos 5 y 7 coincidan entre sí en pares.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La lista de listas de todas las rutas se ordena por el primer valor. </font><font style="vertical-align: inherit;">Esta lista tiene 4 columnas y el número de filas es igual a la mitad del número de polígonos en la icosfera.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La lista de rutas de rayos se escribe en un archivo.</font></font></li>
</ol><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La lista de rutas de rayos se ve así:</font></font></i><br>
<br>
<pre><code class="python hljs"><span class="hljs-number">0.00271218840585662</span>  <span class="hljs-number">0.2112752957162676</span> <span class="hljs-number">0.00271218840585662</span>  <span class="hljs-number">0.2112752957162676</span>
<span class="hljs-number">0.004740002405006037</span> <span class="hljs-number">0.210980921765861</span>  <span class="hljs-number">0.004740002405006037</span> <span class="hljs-number">0.2109809188911709</span>
<span class="hljs-number">0.00660892842734402</span>  <span class="hljs-number">0.2066613370130234</span> <span class="hljs-number">0.00660892842734402</span>  <span class="hljs-number">0.2066613370130234</span><font></font>
…<font></font>
<span class="hljs-number">0.2692299271137439</span>   <span class="hljs-number">0.2725085782639611</span> <span class="hljs-number">0.2692299271137439</span>   <span class="hljs-number">0.2725085782639611</span>
<span class="hljs-number">0.2705489991382905</span>   <span class="hljs-number">0.2707842753523402</span> <span class="hljs-number">0.270548999138295</span>    <span class="hljs-number">0.2707843056356914</span>
<span class="hljs-number">0.2709498404192674</span>   <span class="hljs-number">0.271036677664217</span>  <span class="hljs-number">0.2709498404192674</span>   <span class="hljs-number">0.271036642944409</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando todos los objetos prepararon listas de rutas de rayos, se pueden comparar (escribí esta parte en Rust):</font></font><br>
<br>
<ol>
<li>    .       0.01,    1%.</li>
<li>  .</li>
<li>          ,       ,    .    ,      .            ,       .</li>
<li>     ,      .     .</li>
<li>     (     ),    .</li>
</ol><br>
<h3>,     RCVS</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El algoritmo funciona muy bien para buscar objetos que tienen una geometría cercana, por ejemplo, variantes poligonales altas y bajas del mismo modelo, y a veces se adapta bien a objetos similares, por ejemplo, teteras o guitarras de diferentes formas. </font><font style="vertical-align: inherit;">Sin embargo, dado que el número de modelos que corresponderá a la misma lista de trayectorias de rayos puede estimarse aproximadamente en</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mfrac><mrow><mi>n</mi><mo>!</mo></mrow><mrow><mrow><mo>(</mo><mfrac><mi>n</mi><mn>2</mn></mfrac><mo>)</mo></mrow><mo>!</mo></mrow></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.79ex" height="5.384ex" viewBox="0 -1024.6 2062.2 2318.2" role="img" focusable="false" style="vertical-align: -3.005ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(120,0)"><rect stroke="none" width="1822" height="60" x="0" y="220"></rect><g transform="translate(600,419)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJMATHI-6E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJMAIN-21" x="600" y="0"></use></g><g transform="translate(60,-725)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJSZ2-28"></use><g transform="translate(422,0)"><g transform="translate(120,0)"><rect stroke="none" width="420" height="60" x="0" y="146"></rect><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJMATHI-6E" x="119" y="687"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJMAIN-32" x="169" y="-636"></use></g></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJSZ2-29" x="1531" y="-1"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhjr23wzzBaJ_EPwZi12Vd-occmgRA#MJMAIN-21" x="2128" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mrow><mi>n</mi><mo>!</mo></mrow><mrow><mrow><mo>(</mo><mfrac><mi>n</mi><mn>2</mn></mfrac><mo>)</mo></mrow><mo>!</mo></mrow></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-2">\frac{n!}{\left(\frac{n}{2}\right)!}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, hay una probabilidad significativa de que los objetos visualmente diferentes en geometría tengan una cuenta de coincidencia en el rango 0.5 - 0.9. </font><font style="vertical-align: inherit;">Durante las pruebas, sucedió con los plátanos, que en 0.7 coinciden con los aviones y las personas en diferentes poses, que a su vez por 0.85 "impresionantes" coinciden con los tigres y los perros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para una búsqueda más precisa, considere el tamaño y / o rotación de los objetos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fuentes.</font></font></h3><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Código de Python para crear un diccionario de polígonos de icosfera opuestos en Blender</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> bpy
<span class="hljs-keyword">import</span> os<font></font>
<font></font>
name = bpy.context.active_object.data.name<font></font>
<font></font>
polys = bpy.data.meshes[name].polygons<font></font>
print(<span class="hljs-string">"-----"</span>)<font></font>
length = len(polys)<font></font>
<font></font>
x = <span class="hljs-number">0</span>
p = <span class="hljs-number">0</span><font></font>
dict = []<font></font>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, length):<font></font>
    print(i, <span class="hljs-string">"/"</span>, length)
    <span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> range(i, length):<font></font>
        norm1 = polys[i].normal<font></font>
        norm2 = polys[l].normal<font></font>
        <span class="hljs-keyword">if</span> norm1 == -norm2:<font></font>
            dict.append(str(i)+<span class="hljs-string">", "</span>+str(l)) <font></font>
            p += <span class="hljs-number">1</span>  <font></font>
<font></font>
<font></font>
print(<span class="hljs-string">"Polys"</span>, p)<font></font>
basedir = os.path.dirname(bpy.data.filepath) + <span class="hljs-string">"/ico_dicts/"</span>  
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(basedir):<font></font>
    os.makedirs(basedir)<font></font>
file = open(basedir + <span class="hljs-string">"/"</span> + str(length) + <span class="hljs-string">".csv"</span>,<span class="hljs-string">"w"</span>)
<span class="hljs-keyword">for</span> poly <span class="hljs-keyword">in</span> dict:      <font></font>
    file.write(poly + <span class="hljs-string">"\n"</span>)<font></font>
file.close()<font></font>
print(<span class="hljs-string">"----ok----"</span>)
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Código de Python para preparar objetos y crear una lista de rutas de rayos en Blender.</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> bpy
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> sqrt
<span class="hljs-keyword">import</span> csv<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#Icosphere properties</span>
<span class="hljs-comment">#icosubd:</span>
<span class="hljs-comment">#5 -&gt; 5120 X 2 rays</span>
<span class="hljs-comment">#4 -&gt; 1280 X 2 rays</span>
<span class="hljs-comment">#3 -&gt;  320 X 2 rays</span>
<span class="hljs-comment">#2 -&gt;   80 X 2 rays</span>
icosubd = <span class="hljs-number">4</span>
size = <span class="hljs-number">1280</span> <span class="hljs-comment">#name of directory</span>
radius = <span class="hljs-number">1</span><font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">icoRC</span>(<span class="hljs-params">icosubd, rad, raydist, normals, target</span>):</span><font></font>
    icorad = rad<font></font>
    bpy.ops.mesh.primitive_ico_sphere_add(radius=icorad, subdivisions=icosubd, enter_editmode=<span class="hljs-literal">True</span>, location=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>))<font></font>
    bpy.ops.mesh.normals_make_consistent(inside=normals)<font></font>
    bpy.ops.object.editmode_toggle()<font></font>
    <font></font>
<font></font>
    ico = bpy.context.active_object<font></font>
    mesh = bpy.data.meshes[ico.data.name]<font></font>
    rays = []<font></font>
    size = len(mesh.polygons)<font></font>
    <span class="hljs-keyword">for</span> poly <span class="hljs-keyword">in</span> mesh.polygons:<font></font>
        normal = poly.normal<font></font>
        start = poly.center<font></font>
        <font></font>
        ray = target.ray_cast(start, normal, distance=raydist)<font></font>
      <font></font>
        <span class="hljs-keyword">if</span> ray[<span class="hljs-number">0</span>] == <span class="hljs-literal">True</span>:<font></font>
            length = sqrt((start[<span class="hljs-number">0</span>]-ray[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]) ** <span class="hljs-number">2</span> + (start[<span class="hljs-number">1</span>]-ray[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]) ** <span class="hljs-number">2</span> + (start[<span class="hljs-number">2</span>]-ray[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>]) ** <span class="hljs-number">2</span>)<font></font>
            rays.append(length / (radius *<span class="hljs-number">2</span>))
        <span class="hljs-keyword">else</span>:<font></font>
            rays.append(<span class="hljs-number">-1</span>)<font></font>
            <font></font>
        <font></font>
    result = []<font></font>
    <span class="hljs-comment">#Combine opposite rays using CSV dicts</span>
    dictdir = os.path.dirname(bpy.data.filepath) + <span class="hljs-string">"/ico_dicts/"</span>
    <span class="hljs-keyword">with</span> open(dictdir+str(size)+<span class="hljs-string">'.csv'</span>, newline=<span class="hljs-string">''</span>) <span class="hljs-keyword">as</span> csvfile:<font></font>
        ico_dict_file = csv.reader(csvfile, delimiter=<span class="hljs-string">','</span>)
        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> ico_dict_file:<font></font>
            result.append([rays[int(row[<span class="hljs-number">0</span>])], rays[int(row[<span class="hljs-number">1</span>])]])<font></font>
            <font></font>
            <font></font>
    bpy.ops.object.select_all(action=<span class="hljs-string">'DESELECT'</span>)<font></font>
    bpy.data.objects[ico.name].select_set(<span class="hljs-literal">True</span>) <font></font>
    bpy.ops.object.delete() <font></font>
    <font></font>
    <span class="hljs-keyword">return</span> result<font></font>
   <font></font>
   <font></font>
    <font></font>
    <font></font>
<span class="hljs-comment">#Batch preparation of objects by scale and origin </span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">batch_prepare</span>():</span>   
    <span class="hljs-keyword">for</span> obj <span class="hljs-keyword">in</span> bpy.context.selected_objects:<font></font>
        bpy.ops.object.origin_set(type=<span class="hljs-string">'ORIGIN_CENTER_OF_VOLUME'</span>, center=<span class="hljs-string">'MEDIAN'</span>)<font></font>
        max_dist = <span class="hljs-number">0</span><font></font>
        bb = bpy.data.objects[obj.name].bound_box<font></font>
        <font></font>
        <span class="hljs-keyword">for</span> vert <span class="hljs-keyword">in</span> obj.data.vertices:<font></font>
            dist = vert.co[<span class="hljs-number">0</span>]**<span class="hljs-number">2</span> + vert.co[<span class="hljs-number">1</span>]**<span class="hljs-number">2</span> + vert.co[<span class="hljs-number">2</span>]**<span class="hljs-number">2</span>
            <span class="hljs-keyword">if</span> dist &gt; max_dist:<font></font>
                max_dist = dist<font></font>
        <font></font>
        obj.scale *= (<span class="hljs-number">1</span> / sqrt(max_dist))<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">write_rays</span>(<span class="hljs-params">dir</span>):</span>  
    <span class="hljs-keyword">for</span> obj <span class="hljs-keyword">in</span> bpy.context.selected_objects:<font></font>
        bpy.ops.object.transform_apply(location=<span class="hljs-literal">False</span>, rotation=<span class="hljs-literal">False</span>, scale=<span class="hljs-literal">True</span>)<font></font>
        <font></font>
        <span class="hljs-comment">#Cast rays on object with normals turned inside   </span><font></font>
        bpy.context.view_layer.objects.active  = obj<font></font>
        bpy.ops.object.editmode_toggle()<font></font>
        bpy.ops.mesh.normals_make_consistent(inside=<span class="hljs-literal">True</span>)<font></font>
        bpy.ops.object.editmode_toggle()<font></font>
        result1 = icoRC(icosubd, radius, radius*<span class="hljs-number">2</span>, <span class="hljs-literal">True</span>, obj)<font></font>
        <font></font>
        <span class="hljs-comment">#Cast rays on object with normals turned outside </span><font></font>
        bpy.context.view_layer.objects.active  = obj<font></font>
        bpy.ops.object.editmode_toggle()<font></font>
        bpy.ops.mesh.normals_make_consistent(inside=<span class="hljs-literal">False</span>)<font></font>
        bpy.ops.object.editmode_toggle()<font></font>
        result2 = icoRC(icosubd, radius, radius*<span class="hljs-number">2</span>, <span class="hljs-literal">True</span>, obj)<font></font>
        <font></font>
        final = []<font></font>
        <span class="hljs-comment">#Sort sub-lists and append them to main list</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, len(result1)):
            <span class="hljs-keyword">if</span> result2[i][<span class="hljs-number">0</span>] &lt; result2[i][<span class="hljs-number">1</span>]:<font></font>
                final.append([result2[i][<span class="hljs-number">0</span>], result2[i][<span class="hljs-number">1</span>], result1[i][<span class="hljs-number">0</span>], result1[i][<span class="hljs-number">1</span>]])
            <span class="hljs-keyword">else</span>:<font></font>
                final.append([result2[i][<span class="hljs-number">1</span>], result2[i][<span class="hljs-number">0</span>], result1[i][<span class="hljs-number">1</span>], result1[i][<span class="hljs-number">0</span>]])<font></font>
        <font></font>
        <font></font>
        <font></font>
     <font></font>
        basedir = os.path.dirname(bpy.data.filepath) + <span class="hljs-string">"/rays/"</span> + str(size) + <span class="hljs-string">"/"</span> 
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(basedir):<font></font>
            os.makedirs(basedir)<font></font>
        file = open(basedir + <span class="hljs-string">"/"</span> + obj.name,<span class="hljs-string">"w"</span>)<font></font>
        <font></font>
        final.sort(key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>]) <span class="hljs-comment">#Sort list by first values in sub-lists</span><font></font>
     <font></font>
        <span class="hljs-comment">#Writing to file   </span>
        <span class="hljs-keyword">for</span> ray <span class="hljs-keyword">in</span> final:<font></font>
            ray_str = <span class="hljs-string">""</span>
            <span class="hljs-keyword">for</span> dist <span class="hljs-keyword">in</span> ray:   <font></font>
                ray_str += str(dist) + <span class="hljs-string">" "</span>
            file.write(ray_str + <span class="hljs-string">"\n"</span>)<font></font>
<font></font>
        file.close()<font></font>
        <font></font>
    <font></font>
    <font></font>
batch_prepare()<font></font>
write_rays(size)<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Código de óxido para comparar listas.</font></font></b><div class="spoiler_text"><pre><code class="rust hljs"><span class="hljs-keyword">use</span> rayon::prelude::*;
<span class="hljs-keyword">use</span> std::collections::HashSet;
<span class="hljs-keyword">use</span> std::fs;
<span class="hljs-keyword">use</span> std::io::{BufRead, BufReader, Error, Read};<font></font>
<font></font>
<span class="hljs-comment">//Creates Vector from file</span>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">read</span></span>&lt;R: Read&gt;(io: R) -&gt; <span class="hljs-built_in">Result</span>&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">f64</span>&gt;&gt;, Error&gt; {
    <span class="hljs-keyword">let</span> br = BufReader::new(io);<font></font>
    br.lines()<font></font>
        .map(|line| {<font></font>
            line.and_then(|v| {<font></font>
                <span class="hljs-literal">Ok</span>(v.split_whitespace()<font></font>
                    .map(|x| <span class="hljs-keyword">match</span> x.trim().parse::&lt;<span class="hljs-built_in">f64</span>&gt;() {
                        <span class="hljs-literal">Ok</span>(value) =&gt; value,
                        <span class="hljs-literal">Err</span>(_) =&gt; -<span class="hljs-number">1.0</span>,<font></font>
                    })<font></font>
                    .collect::&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">f64</span>&gt;&gt;())<font></font>
            })<font></font>
        })<font></font>
        .collect()<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//Compares two objects</span>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">compare</span></span>(one: &amp;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">f64</span>&gt;&gt;, two: &amp;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">f64</span>&gt;&gt;, error: <span class="hljs-built_in">f64</span>) -&gt; <span class="hljs-built_in">f64</span> {
    <span class="hljs-keyword">let</span> length = one.len();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> count: <span class="hljs-built_in">f64</span> = <span class="hljs-number">0.0</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> seen: HashSet&lt;<span class="hljs-built_in">usize</span>&gt; = HashSet::new();<font></font>
<font></font>
    <span class="hljs-keyword">for</span> orig <span class="hljs-keyword">in</span> one {
        <span class="hljs-keyword">let</span> size = orig.len();<font></font>
<font></font>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..length {
            <span class="hljs-keyword">if</span> seen.contains(&amp;i) {
                <span class="hljs-keyword">continue</span>;<font></font>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">let</span> targ = &amp;two[i];<font></font>
<font></font>
                <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span>..size).map(|x| (orig[x] - targ[x]).abs()).sum::&lt;<span class="hljs-built_in">f64</span>&gt;() &gt; error * size <span class="hljs-keyword">as</span> <span class="hljs-built_in">f64</span> {
                    <span class="hljs-keyword">continue</span>;<font></font>
                }<font></font>
<font></font>
                <span class="hljs-keyword">let</span> err_sum = (<span class="hljs-number">0</span>..size)<font></font>
                    .map(|x| <span class="hljs-number">1.0</span> - (orig[x] - targ[x]).abs())<font></font>
                    .sum::&lt;<span class="hljs-built_in">f64</span>&gt;();<font></font>
<font></font>
                count += err_sum / size <span class="hljs-keyword">as</span> <span class="hljs-built_in">f64</span>;<font></font>
                seen.insert(i);<font></font>
                <span class="hljs-keyword">break</span>;<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
    count / length <span class="hljs-keyword">as</span> <span class="hljs-built_in">f64</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//Compares one object with others on different threads</span>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">one_with_others</span></span>(<font></font>
    obj: &amp;(<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">f64</span>&gt;&gt;),<font></font>
    dict: &amp;<span class="hljs-built_in">Vec</span>&lt;(<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">f64</span>&gt;&gt;)&gt;,<font></font>
) -&gt; <span class="hljs-built_in">Vec</span>&lt;(<span class="hljs-built_in">usize</span>, <span class="hljs-built_in">f64</span>)&gt; {
    <span class="hljs-keyword">let</span> length = dict.len();<font></font>
<font></font>
    (<span class="hljs-number">0</span>..length)<font></font>
        .into_par_iter()<font></font>
        .map(|x| {<font></font>
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Puny human is instructed to wait.. {:}/{:}"</span>, x + <span class="hljs-number">1</span>, length);<font></font>
            (x, compare(&amp;obj.<span class="hljs-number">1</span>, &amp;dict[x].<span class="hljs-number">1</span>, <span class="hljs-number">0.01</span>))<font></font>
        })<font></font>
        .collect()<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() {
    <span class="hljs-keyword">let</span> ray = <span class="hljs-number">1280</span>; <span class="hljs-comment">//name of directory</span>
    <span class="hljs-keyword">let</span> obj_cur = <span class="hljs-string">"Suzanne_lo"</span>; <span class="hljs-comment">//name of object</span><font></font>
<font></font>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> objects = <span class="hljs-built_in">Vec</span>::&lt;(<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">f64</span>&gt;&gt;)&gt;::new();
    <span class="hljs-keyword">let</span> path_rays = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"./rays/{:}/"</span>, ray);
    <span class="hljs-keyword">let</span> paths = fs::read_dir(path_rays).unwrap();<font></font>
<font></font>
    <span class="hljs-keyword">let</span> obj_path = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"./rays/{:}/{:}"</span>, ray, obj_cur);
    <span class="hljs-keyword">let</span> obj = (<font></font>
        obj_cur.to_string(),<font></font>
        read(fs::File::open(obj_path).unwrap()).unwrap(),<font></font>
    );<font></font>
<font></font>
    <span class="hljs-keyword">for</span> path <span class="hljs-keyword">in</span> paths {
        <span class="hljs-keyword">let</span> dir = &amp;path.unwrap().path();
        <span class="hljs-keyword">let</span> name = dir.to_str().unwrap().split(<span class="hljs-string">"/"</span>).last().unwrap();<font></font>
<font></font>
        objects.push((<font></font>
            name.to_string(),<font></font>
            read(fs::File::open(dir).unwrap()).unwrap(),<font></font>
        ));<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> result = one_with_others(&amp;obj, &amp;objects);<font></font>
    result.sort_by(|a, b| b.<span class="hljs-number">1</span>.partial_cmp(&amp;a.<span class="hljs-number">1</span>).unwrap());
    <span class="hljs-built_in">print!</span>(<span class="hljs-string">"{}\n"</span>, <span class="hljs-string">"_"</span>.repeat(<span class="hljs-number">150</span>));
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{:}"</span>, obj.<span class="hljs-number">0</span>);
    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> result {
        <span class="hljs-built_in">println!</span>(
            <span class="hljs-string">"{:&gt;36} |{:&lt;100}| {:&lt;14}"</span>,<font></font>
            objects[line.<span class="hljs-number">0</span>].<span class="hljs-number">0</span>,
            <span class="hljs-string">"▮"</span>.repeat((line.<span class="hljs-number">1</span> * <span class="hljs-number">100.0</span>).round() <span class="hljs-keyword">as</span> <span class="hljs-built_in">usize</span>),<font></font>
            line.<span class="hljs-number">1</span><font></font>
        );<font></font>
    }<font></font>
}<font></font>
<font></font>
</code></pre><br>
</div></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enlace a la fuente y al proyecto Blender con una escena de prueba. </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enlace a GitHub.</font></font></a><br>
<br>
<img src="https://habrastorage.org/webt/oh/4p/7s/oh4p7sqgz6j9ti6xi8pjmg73li4.png"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es490748/index.html">La tarea para el desarrollador, o cómo escaneamos escáneres manuales sin un proveedor</a></li>
<li><a href="../es490750/index.html">Mikhail Salosin. Golang Meetup. Usando Go en el backend de la aplicación Watch +</a></li>
<li><a href="../es490754/index.html">Visual Studio Code Code Editor. La guía más detallada para configurar e instalar complementos para principiantes</a></li>
<li><a href="../es490756/index.html">Implementar Jenkins como código</a></li>
<li><a href="../es490758/index.html">Los matemáticos han demostrado la ley universal de la turbulencia.</a></li>
<li><a href="../es490762/index.html">¿Cómo pronosticar el pasaje aéreo?</a></li>
<li><a href="../es490764/index.html">Grafana, InfluxDB, dos etiquetas y una cantidad. ¿O cómo calcular la suma de subgrupos?</a></li>
<li><a href="../es490766/index.html">¿Cómo entender a un principiante, qué idioma elegir para la profesión deseada?</a></li>
<li><a href="../es490768/index.html">Cuando los juegos de computadora son su trabajo: el dispositivo interno de los juegos en la nube</a></li>
<li><a href="../es490770/index.html">¡Abajo la deuda técnica! En TechLead Conf 2020, le mostraremos cómo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>