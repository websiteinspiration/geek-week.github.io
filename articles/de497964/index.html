<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🈲 👨🏻‍🎨 🍲 Telemedizin. Reverse Engineering Elektronisches Stethoskop 👳🏿 🎠 👋🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich beschäftige mich seit mehr als 10 Jahren mit der Entwicklung von Elektronik, aber es kam irgendwie vor, dass mein erstes Projekt auf dem Gebiet de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Telemedizin. Reverse Engineering Elektronisches Stethoskop</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497964/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ia/e-/xv/iae-xv2nrkl_avl3oitfn0omrmc.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ich beschäftige mich seit mehr als 10 Jahren mit der Entwicklung von Elektronik, aber es kam irgendwie vor, dass mein erstes Projekt auf dem Gebiet der Medizin erst letztes Jahr erschien </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und ich danach nicht mehr von diesem Thema abkam</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wie in solchen Fällen üblich, wurde bei der Entwicklung beschlossen, mit der Untersuchung von Prototypen zu beginnen. </font><font style="vertical-align: inherit;">In diesem Artikel möchte ich die Nebenergebnisse des Reverse Engineering des Fötus eines Telemedizin-Startups mit chinesischen Wurzeln - einem elektronischen Stethoskop - vorstellen. </font><font style="vertical-align: inherit;">Wenn Sie daran interessiert sind, was die Innenseiten eines typischen Vertreters von Startups auf dem Gebiet der Telemetrie, die Anfang der 2010er Jahre eingeführt wurden, verbergen und warum eine solche Schaltungsdesignlösung gewählt wurde, sind Sie bei cat willkommen.</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/wz/sf/8h/wzsf8hu2ps5h83v6zqjekrlitkm.jpeg"><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klicken Sie, wenn Sie es nicht wissen, aber was für ein Tier ist das - ein Stethoskop?</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/tg/zm/o_/tgzmo_gbiuhuxupdue9oczu2rna.jpeg" align="left">C    ,           .       ,    , , , .         :  (   ),  ( )   (   ).   «»         <i></i>.     «» ,      ,    .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Trotz der Tatsache, dass die Jungs mit ihrem Projekt in Australien begonnen haben, ist es ihnen gelungen, die erste Investitionsrunde nur in China zu starten. </font><font style="vertical-align: inherit;">Angesichts der Tatsache, dass das Rückgrat des Teams aus dem Ewigen Reich stammte und China ein ernsthaftes Regierungsprogramm hat, um Startups zu helfen, ist dies keineswegs überraschend. </font><font style="vertical-align: inherit;">Wir waren jedoch abgelenkt. Das Thema dieses Artikels ist die interne Struktur des Geräts und nicht die Entwicklungsgeschichte des Startups. </font><font style="vertical-align: inherit;">Darüber vielleicht beim nächsten Mal.</font></font><br>
<br>
<h3><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schauen wir uns das Paket an</font></font></font></h3><br>
<img src="https://habrastorage.org/webt/4s/jh/4d/4sjh4d1l79ym65zknzg2ucr7fqe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir nach innen schauen, eine äußerst hochwertige Kartonverpackung, finden wir eine angenehm anzufassende Hülle mit zwei Geräten. Dasjenige, das größer und verlängert wie ein Krokodil ist, ist ein berührungsloses Thermometer. Rund ist unser heutiger Patient, ein Stethoskop. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Jungs haben mit dem Thermometer viel vermisst - nicht nur die Stabilität der Messungen war extrem niedrig, auch die Zuverlässigkeit der Arbeit hat uns im Stich gelassen. Für das Reverse Engineering haben wir ein gebrauchtes Gerät gekauft und das berührungslose Thermometer darin hat sich als fehlerhaft herausgestellt. Konzentrieren wir uns also auf das Stethoskop. Schauen wir uns zunächst das Verbindungskabel genauer an.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/on/vu/ed/onvued1yqhfjrdrzkwvvfrmjd-0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie sehen, dass es einerseits mit einer Audio-Buchse und andererseits mit einem Micro-USB-Anschluss endet. </font><font style="vertical-align: inherit;">Warum ist es einfacher zu verstehen, wenn Sie mental auf 2012 zurückreisen - das Jahr, in dem das Startup geboren wurde? </font><font style="vertical-align: inherit;">In jenen Tagen gab es bei Kickstarter eine große Anzahl von Geräten, die auf solch exotische Weise mit dem Gadget verbunden waren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle wurden in erster Linie für die damalige iPhone-Generation entwickelt. </font><font style="vertical-align: inherit;">Er hatte keinen USB-Anschluss und die Organisation der Signalübertragung über drahtlose Kanäle mit ihm war äußerst schwierig. </font><font style="vertical-align: inherit;">Daher wurden die Geräte über ein Audiokabel über die Headset-Buchse verbunden, und der Befehlsaustausch wurde unter Verwendung von Audiosignalen durchgeführt, die durch die Frequenz und Dauer der Pakete codiert wurden. </font><font style="vertical-align: inherit;">Dieses Kommunikationsprinzip wird auch in unserem Versuchsthema verwendet. </font><font style="vertical-align: inherit;">Es ist jedoch Zeit, unter seine Haube zu schauen!</font></font><br>
<br>
<h3><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist Zeit, auf die Details einzugehen</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Metallgussgehäuse besteht aus zwei Hälften, die durch ein Gewinde verbunden sind. Im Inneren des Gehäuses befinden sich zwei Schals. Einer von ihnen verdient unsere Aufmerksamkeit nicht - nur der Halter einer Drei-Volt-Batterie befindet sich nicht darin, aber der zweite ist es wert, genauer und sogar auf beiden Seiten betrachtet zu werden. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tu/z-/ry/tuz-ryxmpnm7o9dn3k_vxs8mxtk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf der linken Seite der Platinen sehen wir einen Micro-USB-Anschluss. Die Wahl fiel auf ihn, weil es viel kleiner ist als eine Standard-Audiobuchse mit einem Durchmesser von 3,5 mm. Der obere Teil der Tafel ist rechts dargestellt. Es beherbergt zahlreiche Sperrkapazitäten und Schutzelemente in SOT23-Gehäusen mit drei Anschlüssen, die Transistoren ähneln. Denken Sie daran, dass es sich um ein Medizinprodukt handelt und dass selbst die einfachste Zertifizierungsstufe dies erfordert.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mn/m5/2k/mnm52kdjcnt5ivaegxqujoegyo8.jpeg" align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Herz, die Teilzeit und das Ohr dieses Geräts sind sicherlich ein Mikrofon. Ein billiges Elektret, das ähnlich wie ein Headset-Mikrofon über ein Telefon mit Strom versorgt werden kann, kann hier nicht verwendet werden. Nützliche Informationen zu Tonsignalen, die am Headset eines Stethoskops / Phonendoskops ankommen, liegen im Bereich von 20 Hz bis Hz 600. Der untere Bereich wird durch die Frequenzeigenschaften des Ohrs begrenzt, die obere maximale Frequenz, in der sich das Rauschen des Herzens und der inneren Organe befindet. Es ist nicht einfach, ein kompaktes Mikrofon mit einem solchen Frequenzgang zu finden. Dieses Gerät verwendete ein analoges Mikrofon, das mit MEMS-Technologie hergestellt wurde. Das Signal von ihm wurde ohne zusätzliche Verstärkung in den Audiobereich des Smartphones eingegeben. Das Mikrofon wurde sorgfältig mit einem Gummipolster abgedeckt, das ich zur besseren Sicht abnahm.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Einfachheit halber habe ich den Schlüsselkomponenten Nummern zugewiesen und unten ein stark vereinfachtes Funktionsdiagramm des Geräts dargestellt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2s/ba/9g/2sba9gvzfwhncjwhthrjx27aols.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es scheint, dass es ausreicht, ein Mikrofon mit einer Batterie zu versehen und nicht alles mit zusätzlichen Chips zu komplizieren. Selbst wenn kein Eingangssignal vorhanden ist, reicht der Stromverbrauch des Mikrofons aus, um den Akku in wenigen Tagen zu entladen. Natürlich wäre es möglich, einen kleinen mechanischen Schalter am Gehäuse des Geräts anzubringen, aber dies ist nicht der Weg des Jedi, vor allem, weil man leicht vergisst, ihn auszuschalten oder im Gegenteil versehentlich einzuschalten. Infolgedessen ist das Gerät zu einem Zeitpunkt, an dem Sie dringend auf die Lunge des Patienten hören müssen, außer Betrieb. Für medizinische Anwendungen ist dies überhaupt kein Summen, man kann sogar noch mehr sagen - es ist inakzeptabel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere Chinesen mussten widerwillig weitermachen, um das Programm zu komplizieren. </font><font style="vertical-align: inherit;">Zunächst fügten sie einen Mikrocontroller aus der STM32L-Serie mit extrem geringem Stromverbrauch </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 hinzu.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Für Mikrocontroller </font><font style="vertical-align: inherit;">mit geringem Stromverbrauch </font><font style="vertical-align: inherit;">siehe </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einen meiner vorherigen Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) Dann installierten sie einen Spannungsregler im Stromversorgungskreis von Mikrofon </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und gingen schließlich auf einem analogen Schaltchip bankrott. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dem Steuerungsmikrocontroller sind folgende Funktionen zugeordnet:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikrofon-Netzteil</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bestimmung des Spannungspegels der Batterie und gegebenenfalls Bildung eines Signals über ihre bevorstehende Entladung</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erkennung eines sinusförmigen Steuersignals von einem Smartphone</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erzeugung eines analogen sinusförmigen Signals für den Datenaustausch mit einem Smartphone</font></font></li>
<li>   ,      </li>
</ul><br>
<h3><font color="#66a3be">    </font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem der Benutzer ein Stethoskop auf den Körper einer Person angewendet hat, drückt er die Taste auf dem Bildschirm des Smartphones. Das Smartphone sendet eine Steuer-Audiosequenz, in der die Hörzeit codiert ist. Sie geht zum Komparator-Mikrocontroller. Nachdem der Mikrocontroller den Spannungsabfall an seinem Eingang erfasst hat, unterbricht er den Tiefschlafzustand, entschlüsselt das Eingangssignal und sendet eine Antworttonsequenz mit Informationen zum Batteriestand an den Mikrofoneingang des Telefons. Danach versorgt der Mikrocontroller das Mikrofon für eine bestimmte Zeit mit Strom und schaltet den Audioschalter in den Modus zum Übertragen des Signals vom Mikrofon zum Mikrofoneingang des Telefons. Am Ende eines vorgegebenen Zeitraums kehrt alles in seinen ursprünglichen Zustand zurück und der Mikrocontroller taucht in tiefen Schlaf ein.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Smartphone verwendet die Firmware, um das Audiosignal als Datei in seinem eigenen Speicher aufzuzeichnen. </font><font style="vertical-align: inherit;">In Zukunft können Sie es anhören, auf dem Smartphone-Bildschirm anzeigen und sogar zur Analyse und detaillierten Verarbeitung in die Cloud übertragen.</font></font><br>
<br>
<h3><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geräte Nachteile</font></font></font></h3><br>
<img src="https://habrastorage.org/webt/ti/rp/pp/tirpppgemguddhyduwpotcp4r0u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie viele medizinische Startups der ersten Welle, auf die ich mich beziehe, die Anfang der 2010er Jahre gestartet wurden, stürzte dieses letztendlich ab. </font><font style="vertical-align: inherit;">Es gibt jedoch die Idee, meinen nächsten Artikel einer detaillierten Analyse der Gründe für das Auf und Ab von medizinischen Startups dieser Generation zu widmen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dabei stelle ich nur die offensichtlichen Fehleinschätzungen fest, die mit der technischen Leistung verbunden sind. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als kleine Gebühr für den Verstand schlage ich vor, offensichtliche Fehler selbst zu finden und dann den Spoiler zu öffnen und mit diesen zu vergleichen</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">was mir aufgefallen ist</font></font></b>
                        <div class="spoiler_text">         .  ,            .  ,              .<br>
<br>
<img src="https://habrastorage.org/webt/42/oq/qn/42oqqnjcar6ehfxecf_2wleltto.jpeg" align="left">  ,          ,     ,      .  ,      ,        ,        ,             . <br>
<br>
        —  .         .   ,          .             ,                   .       ,    . ,             .<br>
</div>
                    </div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abschließend eine große Bitte, mir bei einer kleinen, aber wichtigen Umfrage ein paar Sekunden Zeit zu nehmen. </font><font style="vertical-align: inherit;">Danke.</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de497950/index.html">21 Lektionen in 21 Jahren Programmierung</a></li>
<li><a href="../de497952/index.html">Englische Abkürzungen und IT-Titel, die wir falsch aussprechen</a></li>
<li><a href="../de497956/index.html">Sars wunderbar? Genealogie von Wuhan Coronavirus</a></li>
<li><a href="../de497958/index.html">Sie gehören zu uns: Erkundung von Schwachstellen und bösartigem Code in Zoom für Windows</a></li>
<li><a href="../de497960/index.html">Linux-Netzwerkinstallation</a></li>
<li><a href="../de497968/index.html">Ressourcen für Webentwickler: APIs und UI-Elemente</a></li>
<li><a href="../de497980/index.html">Wie viel Wasser ist ausgetreten? Wir lösen das Problem durch einen Mondspaziergang auf Haskell</a></li>
<li><a href="../de497982/index.html">Funktions- und Prozessansatz für das Management. Wie und was ist zu verwalten?</a></li>
<li><a href="../de497984/index.html">Migration von reCAPTCHA zu hCaptcha in Cloudflare</a></li>
<li><a href="../de497986/index.html">Überwachen des gesamten von einer Webseite verwendeten Speichers: performance.measureMemory ()</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>