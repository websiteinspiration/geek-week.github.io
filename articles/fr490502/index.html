<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👈🏻 🛌🏾 🏬 Ansible vs Puppet 🌘 😂 🚴</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ansible et Puppet sont les systèmes de gestion de configuration (SCM) nécessaires pour construire des infrastructures répétitives. 
 
 Ansible est fac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Ansible vs Puppet</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/490502/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible et Puppet sont les systèmes de gestion de configuration (SCM) nécessaires pour construire des infrastructures répétitives. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ansible est facile à utiliser, possède une architecture sans agent (ne nécessite pas l'installation d'un agent / client sur le système cible) et une DSL de type YAML, écrite en Python et facilement étendue par modules. Gère généralement les configurations Linux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puppet a une architecture client-serveur (interroge périodiquement le serveur pour apporter des modifications à la configuration effectuée par l'administrateur réseau), est écrit en Ruby et possède une DSL de type Ruby. Cette application vous permet de gérer de manière centralisée la configuration des logiciels installés sur plusieurs ordinateurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'article compare les avantages et les inconvénients de ces SCM.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x1/ic/q3/x1icq3wsfkfmjfv3iqhkfc9nqh8.jpeg"><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par rapport aux années 90, les administrateurs système et les développeurs doivent aujourd'hui gérer un nombre beaucoup plus important de serveurs qui hébergent beaucoup plus d'applications. La raison en est la croissance exponentielle de l'informatique pour les organisations et les entreprises associée à l'avènement de nouvelles technologies telles que la virtualisation et le cloud computing.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, des outils tels que Puppet et Ansible deviennent rapidement des composants nécessaires à la gestion d'un grand nombre de serveurs, par exemple dans les centres de données. </font><font style="vertical-align: inherit;">Ils s'appellent Configuration Management Tools (CM) et Remote Execution (RE) et sont souvent utilisés avec des outils de mise à jour logicielle. </font><font style="vertical-align: inherit;">Ces applications utiles permettent, par exemple, à un administrateur réseau d'effectuer simultanément des actions sur plusieurs serveurs, de déployer plusieurs applications en un seul clic, ce qui simplifie considérablement la configuration et la maintenance de dizaines, centaines voire milliers de serveurs.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: un bref examen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puppet est l'une des marques les plus connues du marché CM. Il existe depuis 2005, ce qui pour les outils CM équivaut à l'existence depuis la création de l'humanité. De nombreux grands noms tels que Google, Reddit, Dell, PayPal, Oracle, Los Alamos Labs et Stanford University gèrent leurs centres de données avec Puppet. Avoir de tels clients à bord donne toujours au produit un certain niveau de confiance. Puppet possède également l'interface la plus mature et fonctionne sur tous les principaux systèmes d'exploitation - Linux, Windows, Unix et même Mac OS X. Suivant le modèle créé par différentes versions de Linux, cette application open source est développée en Ruby. Cependant, il existe une société de support et de parrainage PuppetLabs solide et bien établie,offrant un support professionnel et une version commerciale commerciale du logiciel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puppet propose également une procédure d'installation simple et plusieurs outils pour des tâches telles que le déploiement rapide sur des serveurs clients. En plus de l'interface graphique, il existe une CLI basée sur Ruby. En fait, pour les tâches les plus avancées, vous devrez probablement dépendre de la CLI, et l'interface graphique est l'interface de visualisation, de gestion et de surveillance. Cela signifie qu'en plus de travailler en tant qu'administrateur système, vous devrez apprendre Ruby.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/9v/wc/hu9vwcjf6nwscjrgdyfpxfgtfjq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pourriez penser: «Tout cela sonne bien! Y a-t-il des inconvénients, ou vaut-il la peine d'acheter Puppet en ce moment? ». Le débat sur l'utilisation de ce SCM sur les forums spécialisés CM est que Puppet, comme de nombreux autres géants du logiciel, a été victime de son succès et de sa taille. «Agile» et «agile» ne sont pas des mots qui peuvent être utilisés pour décrire le travail de Puppet. Les utilisateurs signalent des bogues qui prennent trop de temps pour corriger et ignorer les nouvelles demandes. Il y a aussi une certaine insatisfaction face au fait que PuppetLabs pousse constamment ses clients à accepter la version commerciale. Enfin, bien que Puppet prenne en charge à la fois Ruby pur et son DSL configuré sur la CLI, la prise en charge de Ruby seul est déconseillée. Ce sont de mauvaises nouvelles pour ceux qui n'ont étudié que Ruby, pas DSL.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ansible a contourné Puppet, capturant la plus grande </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">part de marché</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de l'industrie de la gestion de configuration - 26,5%. Il est suivi par Microsoft System Center CM (21,8%) et Puppet (12%). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/b2/tm/cmb2tmfw7wmtdruecpelzl7snkc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est également un produit open source qui a été lancé en 2012 et a depuis été pris en charge par AnsibleWorks. Il a été développé en Python plutôt qu'en Ruby, ce qui le rend spirituellement plus proche de Salt (un autre nouvel outil CM) que Puppet. Un autre avantage de Python est qu'il est intégré à la plupart des applications Unix et Linux, donc SCM écrit dans ce langage s'installe et fonctionne plus rapidement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le stratagème marketing unique d'Ansible réside dans son déploiement facile et rapide. En fait, ce système n'utilise même pas d'agents déployés pour communiquer avec le client maître; à la place, toutes les fonctions sont exécutées via SSH. Pour les configurations qui ne prennent pas en charge SSH root, Ansible peut exécuter «sudo» en tant que root. Ansible peut être lancé à partir de la CLI sans utiliser de fichiers de configuration pour des tâches simples, telles que la vérification du fonctionnement du service ou le démarrage de mises à jour et de redémarrages. Pour les tâches plus complexes, la configuration Ansible est gérée à l'aide de la syntaxe YAML dans les fichiers de configuration appelés «playbooks». Les commandes ansible peuvent être écrites dans presque n'importe quel langage de programmation et distribuées sous forme de modules JSON universels, ce qui est clairement un avantage par rapport au choix d'un langage spécifique.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ansible est devenu plus populaire avec une nouvelle approche des tâches de configuration traditionnelles, et de nombreuses entreprises l'utilisent pour déployer de grands centres de données. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La communauté des passionnés d'Ansible travaille dur pour tirer parti de son succès en augmentant le nombre d'appareils pris en charge, en intégrant une meilleure prise en charge de Windows, en améliorant l'écosystème, etc.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: différence d'installation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les différences entre Ansible ou Puppet deviennent apparentes à partir du moment où les systèmes sont installés. </font><font style="vertical-align: inherit;">Puisqu'ils suivent différents paradigmes architecturaux, leur cadre est sensiblement différent. </font><font style="vertical-align: inherit;">Ainsi, Ansible a pour objectif explicite de rendre le processus de configuration aussi simple que possible, ce qui se reflète dans l'expérience utilisateur.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gq/hr/me/gqhrmedn8unjfxxq3tcdsjfzrtw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour configurer Ansible, vous devez d'abord désigner un nœud comme nœud de contrôle. En fait, n'importe lequel de vos nœuds peut être un nœud de gestion. Vous pouvez installer Ansible sur ce nœud en utilisant le dernier package Ansible à partir des référentiels de packages de votre distribution, sans avoir besoin de configurer le logiciel client sur d'autres nœuds. Créez simplement une paire de clés SSH sur votre nœud de gestion, puis copiez-les sur les autres nœuds. Ensuite, créez un fichier d'inventaire pour les nœuds Ansible - généralement sur les systèmes d'exploitation Linux comme Red Hat Linux, Ubuntu et Debian, cela se produit dans / etc / ansible / hosts. Vous êtes maintenant prêt à utiliser Ansible pour lancer le PlayBook sur votre hôte et le reste de l'infrastructure réseau.Ansible utilisera les connexions SSH avec votre nœud de contrôle pour déclencher la gestion de la configuration basée sur PlayBook.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La configuration de Puppet semble un peu plus compliquée, mais il y a beaucoup de documentation sur Internet qui vous aidera dans un cas difficile. Tout d'abord, vous devrez configurer les nœuds maître et agent afin qu'ils aient le même fuseau horaire et le même fuseau horaire. Ensuite, vous devez vous rendre sur le serveur maître avec les privilèges root et installer le logiciel serveur Puppet. Ensuite, vous devez configurer le fichier / etc / hosts de l'assistant Puppet pour connecter tous les clients gérés, démarrer le service PuppetServer et le mettre en mode «enable» pour recevoir les connexions client sur le port 8140. Comme Puppet s'appuie sur le logiciel client, vous devrez installer les agents logiciels Puppet sur chacun d'eux.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, vous devrez ajouter l'adresse IP du serveur maître dans / etc / hosts pour que le client puisse s'y connecter. </font><font style="vertical-align: inherit;">Pour ce faire, vous devez démarrer et activer le service d'agent Puppet sur chaque client, puis générer des certificats SSL, car ce système CM utilise HTTPS pour la communication client maître. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les deux cas, il sera nécessaire de renforcer la sécurité du serveur pour exclure la possibilité de connexions non autorisées.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: évolutivité et mécanisme de transport de configuration</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les deux SCM évoluent bien, mais utilisent des mécanismes de transport de configuration différents pour y parvenir. En fait, que vous ayez besoin de gérer plusieurs centaines ou dizaines de milliers de nœuds, il existe des astuces et des stratégies que vous pouvez utiliser sur chaque plate-forme pour évoluer facilement au niveau souhaité.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3y/pe/u6/3ypeu6xorodq8eixu9xnnqbvtvc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ansible utilise le mécanisme de transport intelligent par défaut, qui est basé sur des certificats SSH approuvés. Ansible analysera d'abord les PlayBooks et identifiera les éléments d'infrastructure affectés. Elle ouvrira ensuite une connexion SSH et créera un répertoire temporaire. Après avoir fermé cette connexion, Ansible ouvre une deuxième connexion pour copier le code du module Ansible et le code du modèle Ansible. Ansible fermera cette connexion avant d'ouvrir la troisième connexion finale pour exécuter le code. Ce paramètre répond à la plupart des besoins, mais il peut être modifié à mesure que l'infrastructure évolue.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La première fonction qu'Ansible peut utiliser est appelée ControlPersist, et elle s'appuie sur des sockets persistants et persistants pour réduire le temps nécessaire pour échanger des poignées de main qui sont nécessaires pour plusieurs connexions. Ansible prend également en charge le pipelining, une configuration qui réduit le nombre de connexions requises de trois à un. Enfin, Ansible peut être configuré pour gérer plus de nœuds d'inventaire en même temps en configurant la variable forks dans la configuration de ce système. Par défaut, cette valeur est 5, mais vous pouvez définir une valeur plus élevée pour accélérer le traitement.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kw/du/wz/kwduwz2vqawecyp_530h99vo-o0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le mécanisme de transport Puppet est HTTPS, qui est géré à l'aide de certificats SSL. Un serveur Puppet gère les demandes de configuration pour une liste complète de clients Puppet. Chaque client envoie des faits Puppet au serveur maître avec une demande au répertoire Puppet, après quoi le serveur maître envoie ce répertoire en réponse. Le client traite ensuite l'annuaire, vérifiant chaque ressource logicielle avec l'état de configuration requis spécifié dans l'annuaire. Si la ressource n'est pas dans l'état souhaité, le client Puppet mettra à jour la ressource sur cet ordinateur et, une fois la mise à jour terminée, enverra un rapport sur la modification de configuration terminée au serveur Puppet.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kx/_7/nz/kx_7nzpnuvxgislidrtlelkp1s4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notamment, le modèle de traitement Puppet alloue un thread JRuby du pool de threads pour gérer chaque connexion cliente entrante. À mesure que le nombre de nœuds augmente, la mise à l'échelle de Puppet peut être optimisée en augmentant le nombre de threads JRuby disponibles dans le pool. Cela peut être fait en définissant le paramètre de configuration Puppet «max-active-instances» plus haut que la valeur par défaut, qui est 1. En règle générale, cette valeur est supposée être égale au nombre de cœurs de processeur de votre ordinateur, mais gardez à l'esprit que cela nécessitera plus Mémoire CPU utilisée RAM RAM. En règle générale, vous devrez également définir une «taille de segment de mémoire maximale» supérieure pour la machine virtuelle Java de votre serveur Puppet pour garantirque vos threads JRuby supplémentaires peuvent être alloués sans erreur Java de mémoire insuffisante. La prudence est requise lors de ce réglage, car cela peut entraîner une perte de performances.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple de code CM Ansible</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le travail de configuration de tous les jours, l'écriture de code Ansible est étonnamment simple en raison de la combinaison de deux facteurs: l'utilisation du format YAML pour PlayBooks et le style déclaratif de gestion de configuration qui coupe les «coins vifs». </font><font style="vertical-align: inherit;">Ceci est important pour améliorer rapidement les performances des commandes DevOps et garantir que votre code est gérable même pour des tâches de configuration complexes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code ansible est idempotent. Cela signifie que vous pouvez exécuter PlayBook pour les composants du système en toute sécurité sans interruption et sans gâcher vos serveurs. Ansible ne modifiera que la configuration des ressources logicielles sur les serveurs où elle se trouve en dehors de l'état souhaité. Par exemple, si votre PlayBook doit installer un package et créer un fichier de configuration spécifique sur le disque, Ansible n'installera que ce package et créera le fichier de configuration spécifié lors du premier lancement du PlayBook sur l'hôte. Les lancements ultérieurs du PlayBook laissent automatiquement le package intact jusqu'à ce qu'il y ait un changement qui supprime ou modifie la configuration de fichier ou de package spécifiée. Cela maintient vos nœuds dans un état déterministe prévisible avec très peu ou pas de chance de dérive de configuration.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un exemple de code Ansible PlayBook qui installe le serveur Web Tomcat sur vos sites. </font><font style="vertical-align: inherit;">Cet exemple est tiré du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">référentiel d'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> exemples Ansible </font><font style="vertical-align: inherit;">officiel </font><font style="vertical-align: inherit;">, que vous devriez parcourir pour mieux vous familiariser avec le style idiomatique Ansible:</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
- name: Install Java 1.7<font></font>
yum: name=java-1.7.0-openjdk state=present<font></font>
<font></font>
- name: add group "tomcat"<font></font>
group: name=tomcat<font></font>
<font></font>
- name: add user "tomcat"<font></font>
user: name=tomcat group=tomcat home=/usr/share/tomcat createhome=no<font></font>
become: True<font></font>
become_method: sudo<font></font>
<font></font>
- name: Download Tomcat<font></font>
get_url: url=http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.61/bin/apache-tomcat-7.0.61.tar.gz dest=/opt/apache-tomcat-7.0.61.tar.gz<font></font>
<font></font>
- name: Extract archive<font></font>
command: chdir=/usr/share /bin/tar xvf /opt/apache-tomcat-7.0.61.tar.gz -C /opt/ creates=/opt/apache-tomcat-7.0.61<font></font>
<font></font>
- name: Symlink install directory<font></font>
file: src=/opt/apache-tomcat-7.0.61 path=/usr/share/tomcat state=link<font></font>
<font></font>
- name: Change ownership of Tomcat installation<font></font>
file: path=/usr/share/tomcat/ owner=tomcat group=tomcat state=directory recurse=yes<font></font>
<font></font>
- name: Configure Tomcat server<font></font>
template: src=server.xml dest=/usr/share/tomcat/conf/<font></font>
notify: restart tomcat<font></font>
<font></font>
- name: Configure Tomcat users<font></font>
template: src=tomcat-users.xml dest=/usr/share/tomcat/conf/<font></font>
notify: restart tomcat<font></font>
<font></font>
- name: Install Tomcat init script<font></font>
copy: src=tomcat-initscript.sh dest=/etc/init.d/tomcat mode=0755<font></font>
<font></font>
- name: Start Tomcat<font></font>
service: name=tomcat state=started enabled=yes<font></font>
<font></font>
- name: deploy iptables rules<font></font>
template: src=iptables-save dest=/etc/sysconfig/iptables<font></font>
when: "ansible_os_family == 'RedHat' and ansible_distribution_major_version == '6'"<font></font>
notify: restart iptables<font></font>
<font></font>
- name: insert firewalld rule for tomcat http port<font></font>
firewalld: port=/tcp permanent=true state=enabled immediate=yes<font></font>
when: "ansible_os_family == 'RedHat' and ansible_distribution_major_version == '7'"<font></font>
<font></font>
- name: insert firewalld rule for tomcat https port<font></font>
firewalld: port=/tcp permanent=true state=enabled immediate=yes<font></font>
when: "ansible_os_family == 'RedHat' and ansible_distribution_major_version == '7'"<font></font>
<font></font>
- name: wait for tomcat to start<font></font>
wait_for: port=</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette tâche Ansible spécifique télécharge et installe Apache Tomcat avec le Java JDK 1.7 dépendant, puis configure, démarre et installe Tomcat. </font><font style="vertical-align: inherit;">Comme vous pouvez le voir dans cet exemple, les fichiers pilotés par Ansible peuvent contenir des modèles Jinja, ce qui simplifie le calcul des valeurs et rend votre configuration plus flexible. </font><font style="vertical-align: inherit;">Le code YAML est facile à lire et à écrire pour les administrateurs système et les développeurs. </font><font style="vertical-align: inherit;">Cela conduit au fait qu'Ansible devient un système de gestion de configuration abordable pour les utilisateurs avancés et novices.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple de code CM Puppet</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le Puppet de langage orienté sujet est basé sur Ruby, mais sa syntaxe est beaucoup plus proche des langages impératifs de style C comme Perl, Java et C ++. </font><font style="vertical-align: inherit;">Cette approche est un intermédiaire entre les développeurs familiers avec Ruby et ceux qui ne connaissent peut-être pas ce langage. </font><font style="vertical-align: inherit;">Par conséquent, vous n'aurez peut-être pas besoin de connaître Ruby pour apprendre et utiliser Puppet DSL de manière productive. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un exemple de manifeste Puppet du référentiel PuppetLabs MySQL Puppet Module qui installe et configure le package client MySQL:</font></font><br>
<br>
<pre><code class="plaintext hljs"># @summary<font></font>
#     Installs and configures the MySQL client.<font></font>
#<font></font>
# @example Install the MySQL client<font></font>
#     class {'::mysql::client':<font></font>
#         package_name =&gt; 'mysql-client',<font></font>
#         package_ensure =&gt; 'present',<font></font>
#         bindings_enable =&gt; true,<font></font>
#     }<font></font>
#<font></font>
# @param bindings_enable<font></font>
#     Whether to automatically install all bindings. Valid values are `true`, `false`. Default to `false`.<font></font>
# @param install_options<font></font>
#     Array of install options for managed package resources. You must pass the appropriate options for the package manager.<font></font>
# @param package_ensure<font></font>
#     Whether the MySQL package should be present, absent, or a specific version. Valid values are 'present', 'absent', or 'x.y.z'.<font></font>
# @param package_manage<font></font>
#     Whether to manage the MySQL client package. Defaults to `true`.<font></font>
# @param package_name<font></font>
#     The name of the MySQL client package to install.<font></font>
#<font></font>
class mysql::client (<font></font>
    $bindings_enable = $mysql::params::bindings_enable,<font></font>
    $install_options = undef,<font></font>
    $package_ensure = $mysql::params::client_package_ensure,<font></font>
    $package_manage = $mysql::params::client_package_manage,<font></font>
    $package_name = $mysql::params::client_package_name,<font></font>
)  inherits mysql::params {<font></font>
    <font></font>
    include '::mysql::client::install'<font></font>
<font></font>
    if $bindings_enable {<font></font>
        class { 'mysql::bindings':<font></font>
            java_enable =&gt; true,<font></font>
            perl_enable =&gt; true,<font></font>
            php_enable =&gt; true,<font></font>
            python_enable =&gt; true,<font></font>
            ruby_enable =&gt; true,<font></font>
        }<font></font>
    }<font></font>
<font></font>
# Anchor pattern workaround to avoid resources of mysql::client::install to<font></font>
# "float off" outside mysql::client<font></font>
anchor { 'mysql::client::start': }<font></font>
-&gt; Class['mysql::client::install']<font></font>
-&gt; anchor { 'mysql::client::end': }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un avantage important de Puppet est que, contrairement aux langages de programmation impératifs répertoriés ci-dessus, Puppet DSL est déclaratif, à certains égards similaire à XML, ainsi que le code YAML de l'exemple de code Ansible ci-dessus. </font><font style="vertical-align: inherit;">L'approche déclarative de Puppet et d'Ansible est vraiment tracée dans les deux exemples de code. </font><font style="vertical-align: inherit;">En termes de codage, ils sont similaires et plus proches les uns des autres que des outils comme Chef. </font><font style="vertical-align: inherit;">Cependant, le langage déclaratif Puppet fournit également des constructions de type Ruby telles que des expressions conditionnelles et des itérations, ce qui constitue à nouveau un compromis pour les utilisateurs de Ruby et ceux qui ne parlent pas le langage.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: Facilité d'utilisation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour l'équipe de développement, la facilité d'utilisation devrait être un élément important de l'évaluation de SCM. Étant donné que les développeurs d'Ansible se concentrent beaucoup sur la facilité d'utilisation du système, il n'y a pas de concurrents dans ce domaine. La configuration, la programmation et la gestion des nœuds fournissent une interface très simple aux ingénieurs de développement et aux administrateurs système. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela ne signifie pas que Puppet est difficile à utiliser, c'est juste que ce système se comporte en toute confiance pendant que vous suivez la méthode proposée d'automatisation de son infrastructure. Dans ce domaine, Puppet est assez puissant, modélisant explicitement chaque ressource et fournissant aux utilisateurs des modules avec un comportement standard qui sont efficacement utilisés dans vos manifestes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En termes d'apprentissage utilisateur, les deux plates-formes sont faciles à utiliser, mais Ansible a un léger avantage. </font><font style="vertical-align: inherit;">Il est facile d'obtenir un style YAML déclaratif, donc le code Ansible n'est jamais trop compliqué. </font><font style="vertical-align: inherit;">Pendant ce temps, Puppet a fini par reconnaître certains des problèmes associés à la combinaison de données et de code dans les mêmes fichiers source. </font><font style="vertical-align: inherit;">Cela a conduit à l'avènement de Puppet Hiera, une solution de stockage qui utilise le format YAML pour stocker des paires clé-valeur de données de configuration. </font><font style="vertical-align: inherit;">Hiera va un long chemin vers la simplification et l'optimisation de l'expérience Puppet DevOps. </font><font style="vertical-align: inherit;">Le format YAML s'est avéré très populaire pour la gestion de la configuration, Salt de SaltStack utilisant également ce format.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les deux SCM ont la capacité de valider et de tester votre CM, de la vérification de la syntaxe à l'intégration de l'infrastructure en tant que code.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: coûts de licence et d'implémentation</font></font></h3><br>
<br>
<img src="https://habrastorage.org/webt/hc/dr/ex/hcdrexeefe8ias0zzyh2f7lqngu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tant qu'outils open source, Ansible et Puppet ont beaucoup en commun dans leurs politiques de licence. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La version open source d'Ansible est entièrement gratuite. </font><font style="vertical-align: inherit;">Les entreprises qui ont besoin de plus de garanties de sécurité, de stabilité et de fiabilité sont encouragées à passer à Ansible Engine, le produit de classe entreprise fourni avec Red Hat Linux. </font><font style="vertical-align: inherit;">Les coûts de licence Ansible Engine varient généralement de 47,50 $ à 70 $ par an et par nœud et dépendent de votre configuration préférée.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez besoin d'une assistance technique avec un dépannage rapide, vous devez utiliser la version entreprise. </font><font style="vertical-align: inherit;">L'outil de gestion pour grandes entreprises Ansible Tower est disponible sous forme de package de services et offre à votre entreprise davantage de capacités de formation, de gestion et de planification des tâches via un panneau de commande graphique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme Ansible, la version open source Puppet est disponible gratuitement. </font><font style="vertical-align: inherit;">Pour des fonctionnalités d'entreprise et un support technique supplémentaires, les organisations peuvent passer à Puppet Enterprise, qui coûte de 112 $ à 199 $ par an et par nœud. </font><font style="vertical-align: inherit;">Puppet Enterprise propose un ensemble de plusieurs outils, notamment la génération de rapports et la surveillance de l'état de l'infrastructure d'entreprise.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: Communauté</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puppet, sorti en 2005, est un ancien outil DevOps, il a donc eu plus de temps pour créer sa propre communauté et sa propre base d'utilisateurs. Néanmoins, Ansible, lancé en 2012, grâce à sa nouvelle approche, a réussi à attirer un public encore plus large et à créer une communauté très dynamique de développeurs passionnés et d'utilisateurs. Les utilisateurs de marionnettes incluent des sociétés telles que Uber, Salesforce et Paypal, tandis que la communauté Ansible comprend des sociétés telles que Digital Ocean, 9GAG et TypeForm.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous comparons un indicateur aussi important du développement de produits open source que le nombre de contributeurs participant au développement sur GitHub, Ansible avec plus de 4800 contributeurs est de loin supérieur à Puppet avec ses 527 contributeurs au développement de produits. Le développement d'Ansible au cours des dernières années a été si rapide qu'il a donné lieu à la création d'un référentiel "galactique" séparé d' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible Galaxy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Cela signifie que la communauté Ansible s'efforce de partager son code, contribuant ainsi au développement ultérieur du produit.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant ce temps, la communauté Puppet, qui se développe plus lentement et régulièrement, a créé une infrastructure pour faciliter la recherche de solutions répondant à vos besoins SCM. </font><font style="vertical-align: inherit;">Puppet Forge fournit des modules pour les tâches de gestion de configuration courantes pour la communauté Puppet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les deux systèmes disposent d'outils de premier ordre pour surveiller le cycle de vie d'un projet de gestion de configuration via la ligne de commande. </font><font style="vertical-align: inherit;">Puppet et Ansible s'intègrent bien avec d'autres systèmes DevOps largement utilisés tels que Docker, Kubernetes et Jenkins, et les plateformes de cloud computing AWS et Azure.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: quel est le meilleur?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce domaine, le choix vous appartient. Le style déclaratif d'Ansible et de Puppet signifie que ces outils ont beaucoup plus en commun que les autres systèmes de gestion de configuration. Cependant, pour faire le meilleur choix, vous devez accorder une attention particulière à la façon dont les besoins de votre équipe sont combinés avec la conception et les avantages d'un SCM particulier. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ansible est mieux adapté pour ceux qui sont intéressés par une configuration de type YAML et partagent la philosophie Ansible d'être aussi simple que possible tout en gérant rapidement et simultanément un large pool de machines. De plus, cette philosophie se concentre sur l'utilisation des fonctions SSH existantes au lieu de créer des agents utilisateurs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puppet convient mieux aux équipes qui préfèrent DSL, qui modélise les ressources système de manière cohérente et répétitive. </font><font style="vertical-align: inherit;">C'est exactement ce que fait Puppet DSL, avec tout un écosystème d'outils pour rendre les grandes équipes prévisibles et faciles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous savez exactement quels principes de gestion de configuration répondent le mieux à vos besoins, choisir entre Puppet et Ansible ne vous posera pas de problème.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">résultats</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour faciliter votre choix, nous vous suggérons de vous familiariser avec les principaux avantages et inconvénients des deux systèmes.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bx/i8/j6/bxi8j6fcayvlx5bn80fdevkr8hy.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un peu de publicité :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci de rester avec nous. Aimez-vous nos articles? Vous voulez voir des matériaux plus intéressants? Soutenez-nous en passant une commande ou en recommandant à vos amis </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des VPS basés sur le cloud pour les développeurs à partir de 4,99 $</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analogue unique de serveurs d'entrée de gamme que nous avons inventés pour vous: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toute la vérité sur les VPS (KVM) E5-2697 v3 (6 cœurs) 10 Go DDR4 480 Go SSD 1 Gbit / s à partir de 19 $ ou comment diviser le serveur?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (les options sont disponibles avec RAID1 et RAID10, jusqu'à 24 cœurs et jusqu'à 40 Go de DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 fois moins cher au centre de données Equinix Tier IV à Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nous avons seulement </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV à partir de 199 $</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aux Pays-Bas!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - à partir de 99 $! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En savoir plus sur la</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> création d'un bâtiment d'infrastructure. </font><font style="vertical-align: inherit;">classe c utilisant des serveurs Dell R730xd E5-2650 v4 coûtant 9 000 euros pour un sou?</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr490490/index.html">Week-end de lecture: 10 documents sur les effets du son sur la santé - de «l'hygiène du bruit» au bon sommeil et au GTD</a></li>
<li><a href="../fr490492/index.html">Un robot d'entrepôt apprend à trier les choses non standard</a></li>
<li><a href="../fr490494/index.html">Shop rats, Widiots et gamers: propagande des dangers des jeux vidéo dans les années 80</a></li>
<li><a href="../fr490496/index.html">Création d'une boutique en ligne sur Nuxt.js 2 Procédure pas à pas, partie 1</a></li>
<li><a href="../fr490498/index.html">Comme j'ai écrit une crypto-monnaie semi-décentralisée en PHP. (Partie 2 - Développement)</a></li>
<li><a href="../fr490510/index.html">Les entreprises dépensent 16 milliards de dollars en drones pour conquérir 8000 milliards de marchés</a></li>
<li><a href="../fr490512/index.html">(Presque) Couleurs générées automatiquement</a></li>
<li><a href="../fr490516/index.html">L'IA existe, mais n'est-ce pas ce que nous pensions?</a></li>
<li><a href="../fr490518/index.html">Une introduction au cadre architectural d'analyse de données Lena</a></li>
<li><a href="../fr490520/index.html">Les origines des mathématiques: les idées logiques</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>