<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëàüèª üõåüèæ üè¨ Ansible vs Puppet üåò üòÇ üö¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ansible et Puppet sont les syst√®mes de gestion de configuration (SCM) n√©cessaires pour construire des infrastructures r√©p√©titives. 
 
 Ansible est fac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Ansible vs Puppet</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/490502/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible et Puppet sont les syst√®mes de gestion de configuration (SCM) n√©cessaires pour construire des infrastructures r√©p√©titives. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ansible est facile √† utiliser, poss√®de une architecture sans agent (ne n√©cessite pas l'installation d'un agent / client sur le syst√®me cible) et une DSL de type YAML, √©crite en Python et facilement √©tendue par modules. G√®re g√©n√©ralement les configurations Linux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puppet a une architecture client-serveur (interroge p√©riodiquement le serveur pour apporter des modifications √† la configuration effectu√©e par l'administrateur r√©seau), est √©crit en Ruby et poss√®de une DSL de type Ruby. Cette application vous permet de g√©rer de mani√®re centralis√©e la configuration des logiciels install√©s sur plusieurs ordinateurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'article compare les avantages et les inconv√©nients de ces SCM.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x1/ic/q3/x1icq3wsfkfmjfv3iqhkfc9nqh8.jpeg"><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par rapport aux ann√©es 90, les administrateurs syst√®me et les d√©veloppeurs doivent aujourd'hui g√©rer un nombre beaucoup plus important de serveurs qui h√©bergent beaucoup plus d'applications. La raison en est la croissance exponentielle de l'informatique pour les organisations et les entreprises associ√©e √† l'av√®nement de nouvelles technologies telles que la virtualisation et le cloud computing.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, des outils tels que Puppet et Ansible deviennent rapidement des composants n√©cessaires √† la gestion d'un grand nombre de serveurs, par exemple dans les centres de donn√©es. </font><font style="vertical-align: inherit;">Ils s'appellent Configuration Management Tools (CM) et Remote Execution (RE) et sont souvent utilis√©s avec des outils de mise √† jour logicielle. </font><font style="vertical-align: inherit;">Ces applications utiles permettent, par exemple, √† un administrateur r√©seau d'effectuer simultan√©ment des actions sur plusieurs serveurs, de d√©ployer plusieurs applications en un seul clic, ce qui simplifie consid√©rablement la configuration et la maintenance de dizaines, centaines voire milliers de serveurs.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: un bref examen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puppet est l'une des marques les plus connues du march√© CM. Il existe depuis 2005, ce qui pour les outils CM √©quivaut √† l'existence depuis la cr√©ation de l'humanit√©. De nombreux grands noms tels que Google, Reddit, Dell, PayPal, Oracle, Los Alamos Labs et Stanford University g√®rent leurs centres de donn√©es avec Puppet. Avoir de tels clients √† bord donne toujours au produit un certain niveau de confiance. Puppet poss√®de √©galement l'interface la plus mature et fonctionne sur tous les principaux syst√®mes d'exploitation - Linux, Windows, Unix et m√™me Mac OS X. Suivant le mod√®le cr√©√© par diff√©rentes versions de Linux, cette application open source est d√©velopp√©e en Ruby. Cependant, il existe une soci√©t√© de support et de parrainage PuppetLabs solide et bien √©tablie,offrant un support professionnel et une version commerciale commerciale du logiciel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puppet propose √©galement une proc√©dure d'installation simple et plusieurs outils pour des t√¢ches telles que le d√©ploiement rapide sur des serveurs clients. En plus de l'interface graphique, il existe une CLI bas√©e sur Ruby. En fait, pour les t√¢ches les plus avanc√©es, vous devrez probablement d√©pendre de la CLI, et l'interface graphique est l'interface de visualisation, de gestion et de surveillance. Cela signifie qu'en plus de travailler en tant qu'administrateur syst√®me, vous devrez apprendre Ruby.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/9v/wc/hu9vwcjf6nwscjrgdyfpxfgtfjq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pourriez penser: ¬´Tout cela sonne bien! Y a-t-il des inconv√©nients, ou vaut-il la peine d'acheter Puppet en ce moment? ¬ª. Le d√©bat sur l'utilisation de ce SCM sur les forums sp√©cialis√©s CM est que Puppet, comme de nombreux autres g√©ants du logiciel, a √©t√© victime de son succ√®s et de sa taille. ¬´Agile¬ª et ¬´agile¬ª ne sont pas des mots qui peuvent √™tre utilis√©s pour d√©crire le travail de Puppet. Les utilisateurs signalent des bogues qui prennent trop de temps pour corriger et ignorer les nouvelles demandes. Il y a aussi une certaine insatisfaction face au fait que PuppetLabs pousse constamment ses clients √† accepter la version commerciale. Enfin, bien que Puppet prenne en charge √† la fois Ruby pur et son DSL configur√© sur la CLI, la prise en charge de Ruby seul est d√©conseill√©e. Ce sont de mauvaises nouvelles pour ceux qui n'ont √©tudi√© que Ruby, pas DSL.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ansible a contourn√© Puppet, capturant la plus grande </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">part de march√©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de l'industrie de la gestion de configuration - 26,5%. Il est suivi par Microsoft System Center CM (21,8%) et Puppet (12%). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/b2/tm/cmb2tmfw7wmtdruecpelzl7snkc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est √©galement un produit open source qui a √©t√© lanc√© en 2012 et a depuis √©t√© pris en charge par AnsibleWorks. Il a √©t√© d√©velopp√© en Python plut√¥t qu'en Ruby, ce qui le rend spirituellement plus proche de Salt (un autre nouvel outil CM) que Puppet. Un autre avantage de Python est qu'il est int√©gr√© √† la plupart des applications Unix et Linux, donc SCM √©crit dans ce langage s'installe et fonctionne plus rapidement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le stratag√®me marketing unique d'Ansible r√©side dans son d√©ploiement facile et rapide. En fait, ce syst√®me n'utilise m√™me pas d'agents d√©ploy√©s pour communiquer avec le client ma√Ætre; √† la place, toutes les fonctions sont ex√©cut√©es via SSH. Pour les configurations qui ne prennent pas en charge SSH root, Ansible peut ex√©cuter ¬´sudo¬ª en tant que root. Ansible peut √™tre lanc√© √† partir de la CLI sans utiliser de fichiers de configuration pour des t√¢ches simples, telles que la v√©rification du fonctionnement du service ou le d√©marrage de mises √† jour et de red√©marrages. Pour les t√¢ches plus complexes, la configuration Ansible est g√©r√©e √† l'aide de la syntaxe YAML dans les fichiers de configuration appel√©s ¬´playbooks¬ª. Les commandes ansible peuvent √™tre √©crites dans presque n'importe quel langage de programmation et distribu√©es sous forme de modules JSON universels, ce qui est clairement un avantage par rapport au choix d'un langage sp√©cifique.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ansible est devenu plus populaire avec une nouvelle approche des t√¢ches de configuration traditionnelles, et de nombreuses entreprises l'utilisent pour d√©ployer de grands centres de donn√©es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La communaut√© des passionn√©s d'Ansible travaille dur pour tirer parti de son succ√®s en augmentant le nombre d'appareils pris en charge, en int√©grant une meilleure prise en charge de Windows, en am√©liorant l'√©cosyst√®me, etc.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: diff√©rence d'installation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les diff√©rences entre Ansible ou Puppet deviennent apparentes √† partir du moment o√π les syst√®mes sont install√©s. </font><font style="vertical-align: inherit;">Puisqu'ils suivent diff√©rents paradigmes architecturaux, leur cadre est sensiblement diff√©rent. </font><font style="vertical-align: inherit;">Ainsi, Ansible a pour objectif explicite de rendre le processus de configuration aussi simple que possible, ce qui se refl√®te dans l'exp√©rience utilisateur.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gq/hr/me/gqhrmedn8unjfxxq3tcdsjfzrtw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour configurer Ansible, vous devez d'abord d√©signer un n≈ìud comme n≈ìud de contr√¥le. En fait, n'importe lequel de vos n≈ìuds peut √™tre un n≈ìud de gestion. Vous pouvez installer Ansible sur ce n≈ìud en utilisant le dernier package Ansible √† partir des r√©f√©rentiels de packages de votre distribution, sans avoir besoin de configurer le logiciel client sur d'autres n≈ìuds. Cr√©ez simplement une paire de cl√©s SSH sur votre n≈ìud de gestion, puis copiez-les sur les autres n≈ìuds. Ensuite, cr√©ez un fichier d'inventaire pour les n≈ìuds Ansible - g√©n√©ralement sur les syst√®mes d'exploitation Linux comme Red Hat Linux, Ubuntu et Debian, cela se produit dans / etc / ansible / hosts. Vous √™tes maintenant pr√™t √† utiliser Ansible pour lancer le PlayBook sur votre h√¥te et le reste de l'infrastructure r√©seau.Ansible utilisera les connexions SSH avec votre n≈ìud de contr√¥le pour d√©clencher la gestion de la configuration bas√©e sur PlayBook.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La configuration de Puppet semble un peu plus compliqu√©e, mais il y a beaucoup de documentation sur Internet qui vous aidera dans un cas difficile. Tout d'abord, vous devrez configurer les n≈ìuds ma√Ætre et agent afin qu'ils aient le m√™me fuseau horaire et le m√™me fuseau horaire. Ensuite, vous devez vous rendre sur le serveur ma√Ætre avec les privil√®ges root et installer le logiciel serveur Puppet. Ensuite, vous devez configurer le fichier / etc / hosts de l'assistant Puppet pour connecter tous les clients g√©r√©s, d√©marrer le service PuppetServer et le mettre en mode ¬´enable¬ª pour recevoir les connexions client sur le port 8140. Comme Puppet s'appuie sur le logiciel client, vous devrez installer les agents logiciels Puppet sur chacun d'eux.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, vous devrez ajouter l'adresse IP du serveur ma√Ætre dans / etc / hosts pour que le client puisse s'y connecter. </font><font style="vertical-align: inherit;">Pour ce faire, vous devez d√©marrer et activer le service d'agent Puppet sur chaque client, puis g√©n√©rer des certificats SSL, car ce syst√®me CM utilise HTTPS pour la communication client ma√Ætre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les deux cas, il sera n√©cessaire de renforcer la s√©curit√© du serveur pour exclure la possibilit√© de connexions non autoris√©es.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: √©volutivit√© et m√©canisme de transport de configuration</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les deux SCM √©voluent bien, mais utilisent des m√©canismes de transport de configuration diff√©rents pour y parvenir. En fait, que vous ayez besoin de g√©rer plusieurs centaines ou dizaines de milliers de n≈ìuds, il existe des astuces et des strat√©gies que vous pouvez utiliser sur chaque plate-forme pour √©voluer facilement au niveau souhait√©.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3y/pe/u6/3ypeu6xorodq8eixu9xnnqbvtvc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ansible utilise le m√©canisme de transport intelligent par d√©faut, qui est bas√© sur des certificats SSH approuv√©s. Ansible analysera d'abord les PlayBooks et identifiera les √©l√©ments d'infrastructure affect√©s. Elle ouvrira ensuite une connexion SSH et cr√©era un r√©pertoire temporaire. Apr√®s avoir ferm√© cette connexion, Ansible ouvre une deuxi√®me connexion pour copier le code du module Ansible et le code du mod√®le Ansible. Ansible fermera cette connexion avant d'ouvrir la troisi√®me connexion finale pour ex√©cuter le code. Ce param√®tre r√©pond √† la plupart des besoins, mais il peut √™tre modifi√© √† mesure que l'infrastructure √©volue.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re fonction qu'Ansible peut utiliser est appel√©e ControlPersist, et elle s'appuie sur des sockets persistants et persistants pour r√©duire le temps n√©cessaire pour √©changer des poign√©es de main qui sont n√©cessaires pour plusieurs connexions. Ansible prend √©galement en charge le pipelining, une configuration qui r√©duit le nombre de connexions requises de trois √† un. Enfin, Ansible peut √™tre configur√© pour g√©rer plus de n≈ìuds d'inventaire en m√™me temps en configurant la variable forks dans la configuration de ce syst√®me. Par d√©faut, cette valeur est 5, mais vous pouvez d√©finir une valeur plus √©lev√©e pour acc√©l√©rer le traitement.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kw/du/wz/kwduwz2vqawecyp_530h99vo-o0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le m√©canisme de transport Puppet est HTTPS, qui est g√©r√© √† l'aide de certificats SSL. Un serveur Puppet g√®re les demandes de configuration pour une liste compl√®te de clients Puppet. Chaque client envoie des faits Puppet au serveur ma√Ætre avec une demande au r√©pertoire Puppet, apr√®s quoi le serveur ma√Ætre envoie ce r√©pertoire en r√©ponse. Le client traite ensuite l'annuaire, v√©rifiant chaque ressource logicielle avec l'√©tat de configuration requis sp√©cifi√© dans l'annuaire. Si la ressource n'est pas dans l'√©tat souhait√©, le client Puppet mettra √† jour la ressource sur cet ordinateur et, une fois la mise √† jour termin√©e, enverra un rapport sur la modification de configuration termin√©e au serveur Puppet.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kx/_7/nz/kx_7nzpnuvxgislidrtlelkp1s4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notamment, le mod√®le de traitement Puppet alloue un thread JRuby du pool de threads pour g√©rer chaque connexion cliente entrante. √Ä mesure que le nombre de n≈ìuds augmente, la mise √† l'√©chelle de Puppet peut √™tre optimis√©e en augmentant le nombre de threads JRuby disponibles dans le pool. Cela peut √™tre fait en d√©finissant le param√®tre de configuration Puppet ¬´max-active-instances¬ª plus haut que la valeur par d√©faut, qui est 1. En r√®gle g√©n√©rale, cette valeur est suppos√©e √™tre √©gale au nombre de c≈ìurs de processeur de votre ordinateur, mais gardez √† l'esprit que cela n√©cessitera plus M√©moire CPU utilis√©e RAM RAM. En r√®gle g√©n√©rale, vous devrez √©galement d√©finir une ¬´taille de segment de m√©moire maximale¬ª sup√©rieure pour la machine virtuelle Java de votre serveur Puppet pour garantirque vos threads JRuby suppl√©mentaires peuvent √™tre allou√©s sans erreur Java de m√©moire insuffisante. La prudence est requise lors de ce r√©glage, car cela peut entra√Æner une perte de performances.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple de code CM Ansible</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le travail de configuration de tous les jours, l'√©criture de code Ansible est √©tonnamment simple en raison de la combinaison de deux facteurs: l'utilisation du format YAML pour PlayBooks et le style d√©claratif de gestion de configuration qui coupe les ¬´coins vifs¬ª. </font><font style="vertical-align: inherit;">Ceci est important pour am√©liorer rapidement les performances des commandes DevOps et garantir que votre code est g√©rable m√™me pour des t√¢ches de configuration complexes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code ansible est idempotent. Cela signifie que vous pouvez ex√©cuter PlayBook pour les composants du syst√®me en toute s√©curit√© sans interruption et sans g√¢cher vos serveurs. Ansible ne modifiera que la configuration des ressources logicielles sur les serveurs o√π elle se trouve en dehors de l'√©tat souhait√©. Par exemple, si votre PlayBook doit installer un package et cr√©er un fichier de configuration sp√©cifique sur le disque, Ansible n'installera que ce package et cr√©era le fichier de configuration sp√©cifi√© lors du premier lancement du PlayBook sur l'h√¥te. Les lancements ult√©rieurs du PlayBook laissent automatiquement le package intact jusqu'√† ce qu'il y ait un changement qui supprime ou modifie la configuration de fichier ou de package sp√©cifi√©e. Cela maintient vos n≈ìuds dans un √©tat d√©terministe pr√©visible avec tr√®s peu ou pas de chance de d√©rive de configuration.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un exemple de code Ansible PlayBook qui installe le serveur Web Tomcat sur vos sites. </font><font style="vertical-align: inherit;">Cet exemple est tir√© du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©f√©rentiel d'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> exemples Ansible </font><font style="vertical-align: inherit;">officiel </font><font style="vertical-align: inherit;">, que vous devriez parcourir pour mieux vous familiariser avec le style idiomatique Ansible:</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
- name: Install Java 1.7<font></font>
yum: name=java-1.7.0-openjdk state=present<font></font>
<font></font>
- name: add group "tomcat"<font></font>
group: name=tomcat<font></font>
<font></font>
- name: add user "tomcat"<font></font>
user: name=tomcat group=tomcat home=/usr/share/tomcat createhome=no<font></font>
become: True<font></font>
become_method: sudo<font></font>
<font></font>
- name: Download Tomcat<font></font>
get_url: url=http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.61/bin/apache-tomcat-7.0.61.tar.gz dest=/opt/apache-tomcat-7.0.61.tar.gz<font></font>
<font></font>
- name: Extract archive<font></font>
command: chdir=/usr/share /bin/tar xvf /opt/apache-tomcat-7.0.61.tar.gz -C /opt/ creates=/opt/apache-tomcat-7.0.61<font></font>
<font></font>
- name: Symlink install directory<font></font>
file: src=/opt/apache-tomcat-7.0.61 path=/usr/share/tomcat state=link<font></font>
<font></font>
- name: Change ownership of Tomcat installation<font></font>
file: path=/usr/share/tomcat/ owner=tomcat group=tomcat state=directory recurse=yes<font></font>
<font></font>
- name: Configure Tomcat server<font></font>
template: src=server.xml dest=/usr/share/tomcat/conf/<font></font>
notify: restart tomcat<font></font>
<font></font>
- name: Configure Tomcat users<font></font>
template: src=tomcat-users.xml dest=/usr/share/tomcat/conf/<font></font>
notify: restart tomcat<font></font>
<font></font>
- name: Install Tomcat init script<font></font>
copy: src=tomcat-initscript.sh dest=/etc/init.d/tomcat mode=0755<font></font>
<font></font>
- name: Start Tomcat<font></font>
service: name=tomcat state=started enabled=yes<font></font>
<font></font>
- name: deploy iptables rules<font></font>
template: src=iptables-save dest=/etc/sysconfig/iptables<font></font>
when: "ansible_os_family == 'RedHat' and ansible_distribution_major_version == '6'"<font></font>
notify: restart iptables<font></font>
<font></font>
- name: insert firewalld rule for tomcat http port<font></font>
firewalld: port=/tcp permanent=true state=enabled immediate=yes<font></font>
when: "ansible_os_family == 'RedHat' and ansible_distribution_major_version == '7'"<font></font>
<font></font>
- name: insert firewalld rule for tomcat https port<font></font>
firewalld: port=/tcp permanent=true state=enabled immediate=yes<font></font>
when: "ansible_os_family == 'RedHat' and ansible_distribution_major_version == '7'"<font></font>
<font></font>
- name: wait for tomcat to start<font></font>
wait_for: port=</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette t√¢che Ansible sp√©cifique t√©l√©charge et installe Apache Tomcat avec le Java JDK 1.7 d√©pendant, puis configure, d√©marre et installe Tomcat. </font><font style="vertical-align: inherit;">Comme vous pouvez le voir dans cet exemple, les fichiers pilot√©s par Ansible peuvent contenir des mod√®les Jinja, ce qui simplifie le calcul des valeurs et rend votre configuration plus flexible. </font><font style="vertical-align: inherit;">Le code YAML est facile √† lire et √† √©crire pour les administrateurs syst√®me et les d√©veloppeurs. </font><font style="vertical-align: inherit;">Cela conduit au fait qu'Ansible devient un syst√®me de gestion de configuration abordable pour les utilisateurs avanc√©s et novices.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple de code CM Puppet</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le Puppet de langage orient√© sujet est bas√© sur Ruby, mais sa syntaxe est beaucoup plus proche des langages imp√©ratifs de style C comme Perl, Java et C ++. </font><font style="vertical-align: inherit;">Cette approche est un interm√©diaire entre les d√©veloppeurs familiers avec Ruby et ceux qui ne connaissent peut-√™tre pas ce langage. </font><font style="vertical-align: inherit;">Par cons√©quent, vous n'aurez peut-√™tre pas besoin de conna√Ætre Ruby pour apprendre et utiliser Puppet DSL de mani√®re productive. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un exemple de manifeste Puppet du r√©f√©rentiel PuppetLabs MySQL Puppet Module qui installe et configure le package client MySQL:</font></font><br>
<br>
<pre><code class="plaintext hljs"># @summary<font></font>
#     Installs and configures the MySQL client.<font></font>
#<font></font>
# @example Install the MySQL client<font></font>
#     class {'::mysql::client':<font></font>
#         package_name =&gt; 'mysql-client',<font></font>
#         package_ensure =&gt; 'present',<font></font>
#         bindings_enable =&gt; true,<font></font>
#     }<font></font>
#<font></font>
# @param bindings_enable<font></font>
#     Whether to automatically install all bindings. Valid values are `true`, `false`. Default to `false`.<font></font>
# @param install_options<font></font>
#     Array of install options for managed package resources. You must pass the appropriate options for the package manager.<font></font>
# @param package_ensure<font></font>
#     Whether the MySQL package should be present, absent, or a specific version. Valid values are 'present', 'absent', or 'x.y.z'.<font></font>
# @param package_manage<font></font>
#     Whether to manage the MySQL client package. Defaults to `true`.<font></font>
# @param package_name<font></font>
#     The name of the MySQL client package to install.<font></font>
#<font></font>
class mysql::client (<font></font>
    $bindings_enable = $mysql::params::bindings_enable,<font></font>
    $install_options = undef,<font></font>
    $package_ensure = $mysql::params::client_package_ensure,<font></font>
    $package_manage = $mysql::params::client_package_manage,<font></font>
    $package_name = $mysql::params::client_package_name,<font></font>
)  inherits mysql::params {<font></font>
    <font></font>
    include '::mysql::client::install'<font></font>
<font></font>
    if $bindings_enable {<font></font>
        class { 'mysql::bindings':<font></font>
            java_enable =&gt; true,<font></font>
            perl_enable =&gt; true,<font></font>
            php_enable =&gt; true,<font></font>
            python_enable =&gt; true,<font></font>
            ruby_enable =&gt; true,<font></font>
        }<font></font>
    }<font></font>
<font></font>
# Anchor pattern workaround to avoid resources of mysql::client::install to<font></font>
# "float off" outside mysql::client<font></font>
anchor { 'mysql::client::start': }<font></font>
-&gt; Class['mysql::client::install']<font></font>
-&gt; anchor { 'mysql::client::end': }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un avantage important de Puppet est que, contrairement aux langages de programmation imp√©ratifs r√©pertori√©s ci-dessus, Puppet DSL est d√©claratif, √† certains √©gards similaire √† XML, ainsi que le code YAML de l'exemple de code Ansible ci-dessus. </font><font style="vertical-align: inherit;">L'approche d√©clarative de Puppet et d'Ansible est vraiment trac√©e dans les deux exemples de code. </font><font style="vertical-align: inherit;">En termes de codage, ils sont similaires et plus proches les uns des autres que des outils comme Chef. </font><font style="vertical-align: inherit;">Cependant, le langage d√©claratif Puppet fournit √©galement des constructions de type Ruby telles que des expressions conditionnelles et des it√©rations, ce qui constitue √† nouveau un compromis pour les utilisateurs de Ruby et ceux qui ne parlent pas le langage.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: Facilit√© d'utilisation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour l'√©quipe de d√©veloppement, la facilit√© d'utilisation devrait √™tre un √©l√©ment important de l'√©valuation de SCM. √âtant donn√© que les d√©veloppeurs d'Ansible se concentrent beaucoup sur la facilit√© d'utilisation du syst√®me, il n'y a pas de concurrents dans ce domaine. La configuration, la programmation et la gestion des n≈ìuds fournissent une interface tr√®s simple aux ing√©nieurs de d√©veloppement et aux administrateurs syst√®me. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela ne signifie pas que Puppet est difficile √† utiliser, c'est juste que ce syst√®me se comporte en toute confiance pendant que vous suivez la m√©thode propos√©e d'automatisation de son infrastructure. Dans ce domaine, Puppet est assez puissant, mod√©lisant explicitement chaque ressource et fournissant aux utilisateurs des modules avec un comportement standard qui sont efficacement utilis√©s dans vos manifestes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En termes d'apprentissage utilisateur, les deux plates-formes sont faciles √† utiliser, mais Ansible a un l√©ger avantage. </font><font style="vertical-align: inherit;">Il est facile d'obtenir un style YAML d√©claratif, donc le code Ansible n'est jamais trop compliqu√©. </font><font style="vertical-align: inherit;">Pendant ce temps, Puppet a fini par reconna√Ætre certains des probl√®mes associ√©s √† la combinaison de donn√©es et de code dans les m√™mes fichiers source. </font><font style="vertical-align: inherit;">Cela a conduit √† l'av√®nement de Puppet Hiera, une solution de stockage qui utilise le format YAML pour stocker des paires cl√©-valeur de donn√©es de configuration. </font><font style="vertical-align: inherit;">Hiera va un long chemin vers la simplification et l'optimisation de l'exp√©rience Puppet DevOps. </font><font style="vertical-align: inherit;">Le format YAML s'est av√©r√© tr√®s populaire pour la gestion de la configuration, Salt de SaltStack utilisant √©galement ce format.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les deux SCM ont la capacit√© de valider et de tester votre CM, de la v√©rification de la syntaxe √† l'int√©gration de l'infrastructure en tant que code.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: co√ªts de licence et d'impl√©mentation</font></font></h3><br>
<br>
<img src="https://habrastorage.org/webt/hc/dr/ex/hcdrexeefe8ias0zzyh2f7lqngu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tant qu'outils open source, Ansible et Puppet ont beaucoup en commun dans leurs politiques de licence. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La version open source d'Ansible est enti√®rement gratuite. </font><font style="vertical-align: inherit;">Les entreprises qui ont besoin de plus de garanties de s√©curit√©, de stabilit√© et de fiabilit√© sont encourag√©es √† passer √† Ansible Engine, le produit de classe entreprise fourni avec Red Hat Linux. </font><font style="vertical-align: inherit;">Les co√ªts de licence Ansible Engine varient g√©n√©ralement de 47,50 $ √† 70 $ par an et par n≈ìud et d√©pendent de votre configuration pr√©f√©r√©e.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez besoin d'une assistance technique avec un d√©pannage rapide, vous devez utiliser la version entreprise. </font><font style="vertical-align: inherit;">L'outil de gestion pour grandes entreprises Ansible Tower est disponible sous forme de package de services et offre √† votre entreprise davantage de capacit√©s de formation, de gestion et de planification des t√¢ches via un panneau de commande graphique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme Ansible, la version open source Puppet est disponible gratuitement. </font><font style="vertical-align: inherit;">Pour des fonctionnalit√©s d'entreprise et un support technique suppl√©mentaires, les organisations peuvent passer √† Puppet Enterprise, qui co√ªte de 112 $ √† 199 $ par an et par n≈ìud. </font><font style="vertical-align: inherit;">Puppet Enterprise propose un ensemble de plusieurs outils, notamment la g√©n√©ration de rapports et la surveillance de l'√©tat de l'infrastructure d'entreprise.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: Communaut√©</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puppet, sorti en 2005, est un ancien outil DevOps, il a donc eu plus de temps pour cr√©er sa propre communaut√© et sa propre base d'utilisateurs. N√©anmoins, Ansible, lanc√© en 2012, gr√¢ce √† sa nouvelle approche, a r√©ussi √† attirer un public encore plus large et √† cr√©er une communaut√© tr√®s dynamique de d√©veloppeurs passionn√©s et d'utilisateurs. Les utilisateurs de marionnettes incluent des soci√©t√©s telles que Uber, Salesforce et Paypal, tandis que la communaut√© Ansible comprend des soci√©t√©s telles que Digital Ocean, 9GAG et TypeForm.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous comparons un indicateur aussi important du d√©veloppement de produits open source que le nombre de contributeurs participant au d√©veloppement sur GitHub, Ansible avec plus de 4800 contributeurs est de loin sup√©rieur √† Puppet avec ses 527 contributeurs au d√©veloppement de produits. Le d√©veloppement d'Ansible au cours des derni√®res ann√©es a √©t√© si rapide qu'il a donn√© lieu √† la cr√©ation d'un r√©f√©rentiel "galactique" s√©par√© d' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible Galaxy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Cela signifie que la communaut√© Ansible s'efforce de partager son code, contribuant ainsi au d√©veloppement ult√©rieur du produit.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant ce temps, la communaut√© Puppet, qui se d√©veloppe plus lentement et r√©guli√®rement, a cr√©√© une infrastructure pour faciliter la recherche de solutions r√©pondant √† vos besoins SCM. </font><font style="vertical-align: inherit;">Puppet Forge fournit des modules pour les t√¢ches de gestion de configuration courantes pour la communaut√© Puppet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les deux syst√®mes disposent d'outils de premier ordre pour surveiller le cycle de vie d'un projet de gestion de configuration via la ligne de commande. </font><font style="vertical-align: inherit;">Puppet et Ansible s'int√®grent bien avec d'autres syst√®mes DevOps largement utilis√©s tels que Docker, Kubernetes et Jenkins, et les plateformes de cloud computing AWS et Azure.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: quel est le meilleur?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce domaine, le choix vous appartient. Le style d√©claratif d'Ansible et de Puppet signifie que ces outils ont beaucoup plus en commun que les autres syst√®mes de gestion de configuration. Cependant, pour faire le meilleur choix, vous devez accorder une attention particuli√®re √† la fa√ßon dont les besoins de votre √©quipe sont combin√©s avec la conception et les avantages d'un SCM particulier. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ansible est mieux adapt√© pour ceux qui sont int√©ress√©s par une configuration de type YAML et partagent la philosophie Ansible d'√™tre aussi simple que possible tout en g√©rant rapidement et simultan√©ment un large pool de machines. De plus, cette philosophie se concentre sur l'utilisation des fonctions SSH existantes au lieu de cr√©er des agents utilisateurs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puppet convient mieux aux √©quipes qui pr√©f√®rent DSL, qui mod√©lise les ressources syst√®me de mani√®re coh√©rente et r√©p√©titive. </font><font style="vertical-align: inherit;">C'est exactement ce que fait Puppet DSL, avec tout un √©cosyst√®me d'outils pour rendre les grandes √©quipes pr√©visibles et faciles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous savez exactement quels principes de gestion de configuration r√©pondent le mieux √† vos besoins, choisir entre Puppet et Ansible ne vous posera pas de probl√®me.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©sultats</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour faciliter votre choix, nous vous sugg√©rons de vous familiariser avec les principaux avantages et inconv√©nients des deux syst√®mes.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bx/i8/j6/bxi8j6fcayvlx5bn80fdevkr8hy.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un peu de publicit√© :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci de rester avec nous. Aimez-vous nos articles? Vous voulez voir des mat√©riaux plus int√©ressants? Soutenez-nous en passant une commande ou en recommandant √† vos amis </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des VPS bas√©s sur le cloud pour les d√©veloppeurs √† partir de 4,99 $</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analogue unique de serveurs d'entr√©e de gamme que nous avons invent√©s pour vous: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toute la v√©rit√© sur les VPS (KVM) E5-2697 v3 (6 c≈ìurs) 10 Go DDR4 480 Go SSD 1 Gbit / s √† partir de 19 $ ou comment diviser le serveur?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (les options sont disponibles avec RAID1 et RAID10, jusqu'√† 24 c≈ìurs et jusqu'√† 40 Go de DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 fois moins cher au centre de donn√©es Equinix Tier IV √† Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nous avons seulement </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV √† partir de 199 $</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aux Pays-Bas!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - √† partir de 99 $! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En savoir plus sur la</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cr√©ation d'un b√¢timent d'infrastructure. </font><font style="vertical-align: inherit;">classe c utilisant des serveurs Dell R730xd E5-2650 v4 co√ªtant 9 000 euros pour un sou?</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr490490/index.html">Week-end de lecture: 10 documents sur les effets du son sur la sant√© - de ¬´l'hygi√®ne du bruit¬ª au bon sommeil et au GTD</a></li>
<li><a href="../fr490492/index.html">Un robot d'entrep√¥t apprend √† trier les choses non standard</a></li>
<li><a href="../fr490494/index.html">Shop rats, Widiots et gamers: propagande des dangers des jeux vid√©o dans les ann√©es 80</a></li>
<li><a href="../fr490496/index.html">Cr√©ation d'une boutique en ligne sur Nuxt.js 2 Proc√©dure pas √† pas, partie 1</a></li>
<li><a href="../fr490498/index.html">Comme j'ai √©crit une crypto-monnaie semi-d√©centralis√©e en PHP. (Partie 2 - D√©veloppement)</a></li>
<li><a href="../fr490510/index.html">Les entreprises d√©pensent 16 milliards de dollars en drones pour conqu√©rir 8000 milliards de march√©s</a></li>
<li><a href="../fr490512/index.html">(Presque) Couleurs g√©n√©r√©es automatiquement</a></li>
<li><a href="../fr490516/index.html">L'IA existe, mais n'est-ce pas ce que nous pensions?</a></li>
<li><a href="../fr490518/index.html">Une introduction au cadre architectural d'analyse de donn√©es Lena</a></li>
<li><a href="../fr490520/index.html">Les origines des math√©matiques: les id√©es logiques</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>