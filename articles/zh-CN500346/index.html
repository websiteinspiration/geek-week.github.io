<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©â€â¤ï¸â€ğŸ‘¨ ğŸ•µğŸ¼ ğŸ—‚ï¸ Kubernetesä¸­çš„DNSé—®é¢˜ã€‚å…¬å¼€éªŒå°¸ ğŸ¤Ÿ ğŸ”‰ ğŸ‘¨ğŸ¾â€ğŸ¤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ³¨æ„ perevã€‚ï¼šå®ƒæ˜¯Preplyçš„å·¥ç¨‹åšå®¢ä¸­å…¬å…±äº‹åéªŒå°¸çš„ç¿»è¯‘ã€‚å®ƒæè¿°äº†Kubernetesé›†ç¾¤ä¸­çš„conntracké—®é¢˜ï¼Œè¯¥é—®é¢˜å¯¼è‡´æŸäº›ç”Ÿäº§æœåŠ¡çš„åœæœºã€‚
 
 å¯¹äºé‚£äº›æƒ³äº†è§£æ›´å¤šäº‹åäº†è§£ä¿¡æ¯æˆ–å¸Œæœ›å°†æ¥é¿å…DNSæ½œåœ¨é—®é¢˜çš„äººå£«ï¼Œæœ¬æ–‡å¯èƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚
 
 
 è¿™ä¸æ˜¯DNS 
 ï¼Œå¯èƒ½ä¸æ˜¯DNSï¼Œ
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kubernetesä¸­çš„DNSé—®é¢˜ã€‚å…¬å¼€éªŒå°¸</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500346/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³¨æ„ </font><font style="vertical-align: inherit;">perevã€‚ï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ƒæ˜¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preply</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„å·¥ç¨‹åšå®¢ä¸­å…¬å…±äº‹åéªŒå°¸çš„</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ç¿»è¯‘</font></a><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å®ƒæè¿°äº†Kubernetesé›†ç¾¤ä¸­çš„conntracké—®é¢˜ï¼Œè¯¥é—®é¢˜å¯¼è‡´æŸäº›ç”Ÿäº§æœåŠ¡çš„åœæœºã€‚</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºé‚£äº›æƒ³äº†è§£æ›´å¤šäº‹åäº†è§£ä¿¡æ¯æˆ–å¸Œæœ›å°†æ¥é¿å…DNSæ½œåœ¨é—®é¢˜çš„äººå£«ï¼Œæœ¬æ–‡å¯èƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/i0/_h/in/i0_hinn-vas9mgybmw8jyokalgo.jpeg" alt="å›¾ç‰‡"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™ä¸æ˜¯DNS </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼Œå¯èƒ½ä¸æ˜¯DNSï¼Œ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è€Œæ˜¯DNS</font></font></i><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…³äºPreplyä¸­çš„éªŒå°¸å’Œæµç¨‹çš„ä¸€äº›ä¿¡æ¯</font></font></h2><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">éªŒåæè¿°äº†é”€å”®åŠå…¬å®¤çš„æ•…éšœæˆ–äº‹ä»¶ã€‚</font><font style="vertical-align: inherit;">äº‹ååˆ†æåŒ…æ‹¬äº‹ä»¶çš„æ—¶é—´é¡ºåºï¼Œå¯¹ç”¨æˆ·çš„å½±å“çš„æè¿°ï¼Œæ ¹æœ¬åŸå› ï¼Œè¡ŒåŠ¨å’Œç»éªŒæ•™è®­ã€‚</font></font><br>
<br>
<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯»æ±‚SRE</font></font></a></i></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æ¯å‘¨ä¸€æ¬¡çš„ä¸æŠ«è¨çš„ä¼šè®®ä¸Šï¼Œåœ¨æŠ€æœ¯å›¢é˜Ÿçš„åœˆå­é‡Œï¼Œæˆ‘ä»¬å…±äº«å„ç§ä¿¡æ¯ã€‚æ­¤ç±»ä¼šè®®ä¸­æœ€é‡è¦çš„éƒ¨åˆ†ä¹‹ä¸€æ˜¯éªŒå°¸ï¼ŒéªŒå°¸é€šå¸¸ä¼´éšç€å¹»ç¯ç‰‡çš„æ¼”ç¤ºå’Œå¯¹äº‹ä»¶çš„æ›´æ·±å…¥åˆ†æã€‚å°½ç®¡æˆ‘ä»¬åœ¨éªŒå°¸åä¸â€œé¼“æŒâ€ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯å°è¯•å»ºç«‹ä¸€ç§â€œ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ— æ€ª</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> â€çš„æ–‡åŒ–ï¼ˆ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">æ— æ€ª</font></a><font style="vertical-align: inherit;">çš„æ–‡åŒ–</font><font style="vertical-align: inherit;">ï¼‰ã€‚æˆ‘ä»¬ç›¸ä¿¡ï¼Œæ’°å†™å’Œå±•ç¤ºéªŒå°¸æŠ¥å‘Šå¯ä»¥ï¼ˆä¸ä»…ï¼‰å¸®åŠ©æˆ‘ä»¬é˜²æ­¢å°†æ¥å‘ç”Ÿç±»ä¼¼äº‹ä»¶ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬åˆ†äº«è¿™äº›äº‹ä»¶çš„åŸå› ã€‚</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‚ä¸è¯¥äº‹ä»¶çš„äººå‘˜åº”è¯¥æ„Ÿåˆ°å¯ä»¥è¯¦ç»†è°ˆè®ºè¯¥äº‹ä»¶ï¼Œè€Œä¸å¿…æ‹…å¿ƒå—åˆ°æƒ©ç½šæˆ–æŠ¥å¤ã€‚</font><font style="vertical-align: inherit;">ä¸ç”¨è°´è´£ï¼</font><font style="vertical-align: inherit;">æ’°å†™éªŒå°¸æŠ¥å‘Šä¸æ˜¯ä¸€ç§æƒ©ç½šï¼Œè€Œæ˜¯æ•´ä¸ªå…¬å¸å­¦ä¹ çš„æœºä¼šã€‚</font></font><br>
<br>
<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¿æŒCALMSå’ŒDevOpsï¼šSç”¨äºå…±äº«</font></font></a></i></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesä¸­çš„DNSé—®é¢˜ã€‚</font><font style="vertical-align: inherit;">éªŒå°¸</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ—¥æœŸï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2020å¹´2æœˆ28æ—¥</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½œè€…ï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Amet U.ï¼ŒAndrey S.ï¼ŒIgor K.ï¼ŒAleksey P. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çŠ¶æ€ï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å·²å®Œæˆ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç®€ä»‹ï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kubernetesé›†ç¾¤ä¸­æŸäº›æœåŠ¡çš„DNSéƒ¨åˆ†ä¸å¯ç”¨ï¼ˆ26åˆ†é’Ÿï¼‰</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½±å“ï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœåŠ¡Aä¸¢å¤±äº†15,000ä¸ªäº‹ä»¶ï¼Œ Bå’ŒC </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ ¹æœ¬åŸå› ï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kube-proxyæ— æ³•ä»conntrackè¡¨ä¸­æ­£ç¡®åˆ é™¤æ—§æ¡ç›®ï¼Œå› æ­¤æŸäº›æœåŠ¡ä»å°è¯•è¿æ¥åˆ°ä¸å­˜åœ¨çš„æäº¤</font></font><br>
<pre><code class="bash hljs">E0228 20:13:53.795782       1 proxier.go:610] Failed to delete kube-system/kube-dns:dns endpoint connections, error: error deleting conntrack entries <span class="hljs-keyword">for</span> UDP peer {100.64.0.10, 100.110.33.231}, error: conntrack <span class="hljs-built_in">command</span> returned: ...</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è§¦å‘ï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”±äºKubernetesé›†ç¾¤å†…çš„ä½è´Ÿè·æ—¶ï¼ŒCoreDNSï¼Œè‡ªåŠ¨é…ç½®å™¨é™ä½deploymentaè±†èšæ•°é‡ä»ä¸‰ä¸ªå‡ä¸ºä¸¤ä¸ª</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å†³å®šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦ä¸€ä¸ªéƒ¨ç½²åº”ç”¨ç¨‹åºå¯åŠ¨çš„æ–°èŠ‚ç‚¹çš„åˆ›å»ºï¼ŒCoreDNS-è‡ªåŠ¨é…ç½®å™¨å¢åŠ äº†æ›´å¤šçš„ç”²æ¿ç¾¤é›†æœåŠ¡ï¼Œè¿™å¼•èµ·è¦†ç›–è¿æ¥è·Ÿè¸ªè¡¨</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ£€æµ‹ï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Prometheusç›‘è§†æ£€æµ‹åˆ°æœåŠ¡Aï¼ŒBå’ŒCçš„å¤§é‡</font><i><font style="vertical-align: inherit;">5xxé”™è¯¯ï¼Œå¹¶å‘Kibanaä¸­</font></i><font style="vertical-align: inherit;">çš„å€¼ç­å·¥ç¨‹å¸ˆ</font></font><br>
<br>
<img src="https://habrastorage.org/webt/p3/dg/w5/p3dgw5pbkd6ckro2p2sia5-p3ry.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘å‡ºäº†5xxé”™è¯¯çš„ç”µè¯</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŠ¨ä½œ</font></font></h3><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³•æ¡ˆ</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€ç§</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è´Ÿè´£ä»»çš„</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»»åŠ¡</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹CoreDNSç¦ç”¨è‡ªåŠ¨ç¼©æ”¾</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é¢„é˜²</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amet U.</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DEVOPS-695</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®‰è£…ç¼“å­˜DNSæœåŠ¡å™¨</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡å°‘</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€å¤§Vã€‚</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DEVOPS-665</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é…ç½®conntrackç›‘è§†</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é¢„é˜²</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amet U.</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘å±•674</font></font></td>
</tr>
</tbody></table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¾—åˆ°æ•™è®­</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€åˆ‡é¡ºåˆ©ï¼š</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç›‘æ§å·¥ä½œå¾ˆæ¸…æ¥šã€‚</font><font style="vertical-align: inherit;">ååº”è¿…é€Ÿè€Œæœ‰æ¡ç†ã€‚</font></font></li>
<li>        </li>
</ul><br>
<br>
<b>   :</b><br>
<br>
<ul>
<li>    ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a>  conntrack</li>
<li>    ,   ()</li>
<li> ,           DNS,    </li>
</ul><br>
<b>  :</b><br>
<br>
<ul>
<li>   CoreDNS-autoscaler,    conntrack</li>
<li>     </li>
</ul><br>
<h3> (EET)</h3><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th></th>
<th></th>
</tr>
<tr>
<td>22:13</td>
<td>CoreDNS-autoscaler       </td>
</tr>
<tr>
<td>22:18</td>
<td>       </td>
</tr>
<tr>
<td>22:21</td>
<td>     </td>
</tr>
<tr>
<td>22:39</td>
<td>          </td>
</tr>
<tr>
<td>22:40</td>
<td>5xx   ,  </td>
</tr>
</tbody></table></div><br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ£€æµ‹æ—¶é—´ï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4åˆ†é’Ÿã€‚</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ŒæˆåŠ¨ä½œçš„æ—¶é—´ï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 21åˆ†é’Ÿã€‚</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¿®å¤æ—¶é—´ï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1åˆ†é’Ÿ</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é™„åŠ ä¿¡æ¯</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CoreDNSæ—¥å¿—ï¼š</font></font><br>
<pre><code class="bash hljs">I0228 20:13:53.507780       1 event.go:221] Event(v1.ObjectReference{Kind:<span class="hljs-string">"Deployment"</span>, Namespace:<span class="hljs-string">"kube-system"</span>, Name:<span class="hljs-string">"coredns"</span>, UID:<span class="hljs-string">"2493eb55-3dc0-11ea-b3a2-02bb48f8c230"</span>, APIVersion:<span class="hljs-string">"apps/v1"</span>, ResourceVersion:<span class="hljs-string">"132690686"</span>, FieldPath:<span class="hljs-string">""</span>}): <span class="hljs-built_in">type</span>: <span class="hljs-string">'Normal'</span> reason: <span class="hljs-string">'ScalingReplicaSet'</span> Scaled down replica <span class="hljs-built_in">set</span> coredns-6cbb6646c9 to 2</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é“¾æ¥åˆ°Kibanaï¼ˆåˆ‡å‡ºï¼‰ï¼ŒGrafanaï¼ˆåˆ‡å‡ºï¼‰</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux conntrackä¸å†æ˜¯æ‚¨çš„æœ‹å‹</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kube-proxyçš„ç²¾å¦™ä¹‹å¤„ï¼šè°ƒè¯•é—´æ­‡æ€§è¿æ¥é‡ç½®</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Racy conntrackå’ŒDNSæŸ¥æ‰¾è¶…æ—¶</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†æœ€å¤§ç¨‹åº¦åœ°å‡å°‘å¤„ç†å™¨åˆ©ç”¨ç‡ï¼ŒLinuxå†…æ ¸ä½¿ç”¨è¯¸å¦‚conntrackä¹‹ç±»çš„ä¸œè¥¿ã€‚</font><font style="vertical-align: inherit;">ç®€è€Œè¨€ä¹‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå®ç”¨ç¨‹åºï¼Œå…¶ä¸­åŒ…å«å­˜å‚¨åœ¨ç‰¹æ®Šè¡¨ä¸­çš„NATæ¡ç›®åˆ—è¡¨ã€‚</font><font style="vertical-align: inherit;">å½“ä¸‹ä¸€ä¸ªæ•°æ®åŒ…ä¸ä»¥å‰ä¸€æ ·ä»åŒä¸€å®¹å™¨å‘é€åˆ°åŒä¸€å®¹å™¨æ—¶ï¼Œæœ€ç»ˆIPåœ°å€å°†ä¸ä¼šé‡æ–°è®¡ç®—ï¼Œè€Œæ˜¯ä»conntrackè¡¨ä¸­è·å–ã€‚</font></font><br>
<img src="https://habrastorage.org/webt/vm/mz/ug/vmmzugcurlqw3wi36m-tafzog0q.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conntrackå¦‚ä½•å·¥ä½œ</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‘˜è¦</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ˜¯æˆ‘ä»¬éªŒå°¸ä¹‹ä¸€çš„ç¤ºä¾‹ï¼Œå…¶ä¸­åŒ…å«ä¸€äº›æœ‰ç”¨çš„é“¾æ¥ã€‚</font><font style="vertical-align: inherit;">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ç‰¹åˆ«åˆ†äº«äº†å¯èƒ½å¯¹å…¶ä»–å…¬å¸æœ‰ç”¨çš„ä¿¡æ¯ã€‚</font><font style="vertical-align: inherit;">è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸æ€•çŠ¯é”™è¯¯ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å°†éªŒå°¸æŠ¥å‘Šä¹‹ä¸€å…¬å¼€ã€‚</font><font style="vertical-align: inherit;">ä»¥ä¸‹æ˜¯ä¸€äº›æ›´æœ‰è¶£çš„å…¬å…±éªŒå°¸ä¸»é¢˜ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitLabï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1æœˆ31æ—¥æ•°æ®åº“ä¸­æ–­çš„äº‹åè°ƒæŸ¥</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŠ•å¯„ç®±ï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">äº‹åä¸­æ–­</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spotifyï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spotifyä¸DNSçš„çˆ±ä¸æ¨å…³ç³»</font></font></a></li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯¥ç›´æ–¹å›¾</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Kubernetes Failure Stories</font></a><font style="vertical-align: inherit;">å­˜å‚¨åº“ä¸­çš„</font><font style="vertical-align: inherit;">è®¸å¤šå…¶ä»–</font><font style="vertical-align: inherit;">ä¿¡æ¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¹Ÿæ˜¯</font><font style="vertical-align: inherit;">ä½¿ç”¨SRE Book </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿›è¡Œ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¬å¼€éªŒå°¸</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">çš„ç¤ºä¾‹</font></a></font></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN500334/index.html">é£è¡Œå‘˜å…„å¼Ÿä¸­çš„æ‰­è½¬è€…æˆ–å†°ç®±</a></li>
<li><a href="../zh-CN500336/index.html">ç¬¬2éƒ¨åˆ†ï¼šæ¨¡å—å’ŒAppStoreã€‚ESPboy-ç”¨äºå¤å¤æ¸¸æˆå’Œç‰©è”ç½‘å®éªŒçš„å°å·¥å…·</a></li>
<li><a href="../zh-CN500338/index.html">[ç¿»è¯‘]å†²æ´—æ‰</a></li>
<li><a href="../zh-CN500342/index.html">â€œå§”å‘˜ä¼šâ€ï¼Œâ€œ Habrâ€å’ŒSports.ruå…·æœ‰å“ªäº›æ’­å®¢</a></li>
<li><a href="../zh-CN500344/index.html">å¸¦è½®å­çš„æ™ºèƒ½å®¶å±…...çˆ±ä¸½ä¸ã€‚ç¬¬2éƒ¨åˆ†ã€‚</a></li>
<li><a href="../zh-CN500348/index.html">æ•°å­¦å®¶è®¤ä¸ºCOVID-19å¤§æµè¡Œï¼Œæˆ–è€…ç»å…¸SEIRDæ¨¡å‹ä¸èµ·ä½œç”¨çš„åŸå› </a></li>
<li><a href="../zh-CN500352/index.html">å¦‚ä½•åœ¨Facebookä¸Šå®ä¹ å¹¶åœ¨ä¼¦æ•¦è·å¾—æŠ¥ä»·ï¼Ÿå‘Facebookå·¥ç¨‹å¸ˆæé—®</a></li>
<li><a href="../zh-CN500354/index.html">åœ¨Googleè·Ÿè¸ªä»£ç ç®¡ç†å™¨ä¸­è·Ÿè¸ªæ•°æ®çš„æ–°æ–¹æ³•-æœåŠ¡å™¨ç«¯æ ‡è®°</a></li>
<li><a href="../zh-CN500356/index.html">é€šè¿‡WebRTCåœ¨è®¾å¤‡ä¹‹é—´ç›´æ¥æ–‡ä»¶ä¼ è¾“</a></li>
<li><a href="../zh-CN500360/index.html">æœ€ä½³SQLä¸­éš¾åº¦é¢è¯•é—®é¢˜</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>