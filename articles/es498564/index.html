<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëï ‚ÜïÔ∏è üï∫üèø Optimizaci√≥n de la representaci√≥n para dispositivos m√≥viles, parte 2. Las principales familias de GPU m√≥viles modernas üìª üîö üö¥üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬°Saludos, queridos amantes y profesionales, programadores gr√°ficos! Comencemos la segunda parte de nuestra serie de art√≠culos sobre la optimizaci√≥n de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Optimizaci√≥n de la representaci√≥n para dispositivos m√≥viles, parte 2. Las principales familias de GPU m√≥viles modernas</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/playrix/blog/498564/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Saludos, queridos amantes y profesionales, programadores gr√°ficos! </font><font style="vertical-align: inherit;">Comencemos la segunda parte de nuestra serie de art√≠culos sobre la optimizaci√≥n de renderizado para dispositivos m√≥viles. </font><font style="vertical-align: inherit;">En esta parte, consideraremos las principales familias de GPU presentadas por los jugadores en dispositivos m√≥viles.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/36d/cf7/711/36dcf7711d7ce68544c97bb8dc69ee32.png"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comenzar, considere una serie de criterios por los cuales se pueden clasificar las GPU m√≥viles. </font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√∫cleos sombreados unificados o especializados</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la era de las primeras tarjetas de video m√≥viles, antes de la propagaci√≥n de efectos complejos, hab√≠a un punto de vista de que para los sombreadores de fragmentos, el soporte para c√°lculos con precisi√≥n reducida es suficiente. De hecho, en un modo de visualizaci√≥n t√≠pico, se utilizan 8 o incluso menos bits para cada canal de color. Esta vista ha llevado al uso de n√∫cleos de sombreador especializados. Para los v√©rtices, utilizamos n√∫cleos optimizados para transformaciones matriciales con mayor precisi√≥n FP24 / FP32 ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">highp</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Para p√≠xeles, n√∫cleos que funcionan de manera m√°s eficiente con una precisi√≥n reducida FP16 ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mediump</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Con este </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">highp</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No fueron apoyados. </font><font style="vertical-align: inherit;">A primera vista, esta especializaci√≥n nos permite lograr una distribuci√≥n m√°s racional de los transistores en el chip. </font><font style="vertical-align: inherit;">Sin embargo, en la pr√°ctica, esto conduce a dificultades en el desarrollo de efectos complejos, as√≠ como al usar texturas de alta resoluci√≥n. </font><font style="vertical-align: inherit;">Adem√°s, la especializaci√≥n central puede conducir a un </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuello de botella de v√©rtices / fragmentos</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Este t√©rmino se refiere a la situaci√≥n en la que, debido a la carga asim√©trica en los n√∫cleos de v√©rtices y p√≠xeles, algunos de los n√∫cleos estaban "inactivos".&nbsp;</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/307/144/547/30714454751e34703835ce904cf5f40a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, las arquitecturas modernas usan n√∫cleos unificados. </font><font style="vertical-align: inherit;">Dichos n√∫cleos pueden asumir v√©rtices, p√≠xeles y otras tareas computacionales dependiendo de la carga.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ffe/d7c/363/ffed7c363ebecf0d390a0271c1a8b014.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vector (SIMD) o conjunto de instrucciones escalares</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el esp√≠ritu del deseo de ahorrar en los transistores descritos anteriormente, especializados en n√∫cleos, se realiz√≥ el dise√±o de un conjunto de instrucciones de sombreado. Las transformaciones m√°s t√≠picas para gr√°ficos tridimensionales operan con vectores de 4 componentes. Por lo tanto, las primeras GPU trabajaron espec√≠ficamente con tales operandos. Si el c√≥digo de sombreador conten√≠a operaciones escalares heterog√©neas que el optimizador no pod√≠a empaquetar en operaciones vectoriales, no se utiliz√≥ parte de la potencia inform√°tica. Este fen√≥meno puede ilustrarse de la siguiente manera:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b7/3dd/34a/6b73dd34a79eb4376ed816a37de4a4ae.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay un sombreador que implementa la operaci√≥n com√∫n Multiply Add: multiplica 2 operandos y luego agrega el tercero. Al compilar en una arquitectura vectorial condicional (Vector ISA = Arquitectura de conjunto de instrucciones vectoriales) obtenemos una instrucci√≥n vectorial </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vMADD</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que se ejecuta durante 1 reloj. En la arquitectura escalar condicional, obtenemos 4 instrucciones escalares que, gracias a una tuber√≠a mejorada, tambi√©n se ejecutan en 1 ciclo de reloj. Ahora considere un sombreador sofisticado que realiza 2 operaciones, pero en operandos de 2 componentes.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/333/539/b2f/333539b2fb573f8f93ff518ca25f6e5c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el caso de la arquitectura vectorial, ya obtenemos 2 instrucciones que requieren 2 ciclos de reloj para ejecutarse. Sin embargo, no </font><font style="vertical-align: inherit;">se realiza </font><font style="vertical-align: inherit;">ninguna </font><font style="vertical-align: inherit;">acci√≥n </font><font style="vertical-align: inherit;">en los componentes </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.zw</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y la potencia de procesamiento est√° inactiva. En el caso de la arquitectura escalar, estas mismas operaciones se pueden empaquetar en 4 </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sMADD</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> escalares </font><font style="vertical-align: inherit;">que se ejecutan en el mismo ciclo de 1 reloj. Por lo tanto, en la arquitectura escalar debido a la mejora de la tuber√≠a, se logra una mayor densidad de c√°lculos. Sin embargo, como se mostrar√° a continuaci√≥n, el vector </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISA</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sigue siendo relevante. Por lo tanto, tiene sentido aplicar t√©cnicas de vectorizaci√≥n para el c√≥digo de sombreador. Le permiten lograr un mayor rendimiento en tarjetas de video con vector </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISA</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Al mismo tiempo, como regla, esto no da√±a el rendimiento en escalares m√°s modernos.</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El ISA</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seg√∫n las caracter√≠sticas anteriores, consideraremos las familias de GPU m√≥viles que son comunes en nuestro tiempo. </font><font style="vertical-align: inherit;">Comencemos con la familia m√°s com√∫n. </font><font style="vertical-align: inherit;">Mucha gente sabe que estamos hablando de tarjetas gr√°ficas </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la compa√±√≠a brit√°nica </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ARM</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ARM no participa directamente en la producci√≥n de chips, sino que ofrece propiedad intelectual. </font><font style="vertical-align: inherit;">Al igual que otras tarjetas de video m√≥viles, Mali es parte de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">System on Chip (SoC)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , es decir </font><font style="vertical-align: inherit;">funciona con </font><font style="vertical-align: inherit;">memoria </font><font style="vertical-align: inherit;">compartida para la </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y la </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y el bus.&nbsp;</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali utgard</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En 2008, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nacieron</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> los primeros representantes de la arquitectura </font><strong><font style="vertical-align: inherit;">Mali Utgard</font></strong><font style="vertical-align: inherit;"> , relevantes hasta nuestros d√≠as. </font><font style="vertical-align: inherit;">Estas tarjetas de video se nombran de acuerdo con el esquema Mali-4 </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xx</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MP </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , donde </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xx</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es el n√∫mero de modelo </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yn</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es el n√∫mero de n√∫cleos de fragmentos. </font><font style="vertical-align: inherit;">En </font><font style="vertical-align: inherit;">la especialidad del n√∫cleo del sombreador </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Malt Utgard</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y todos los modelos vienen con un v√©rtice de solo 1 n√∫cleo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otras caracter√≠sticas de la arquitectura Mali Utgard:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL ES 2.0&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Falta de soporte </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">highp</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en n√∫cleos fragmentados</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conjunto de instrucciones vectoriales (tiene sentido vectorizar c√°lculos)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A pesar de la especificaci√≥n </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL ES</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , los </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controladores de la</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tarjeta de video </font><strong><font style="vertical-align: inherit;">Mali Utgard</font></strong><font style="vertical-align: inherit;"> compilan con √©xito los sombreadores de fragmentos que usan </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">una</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> precisi√≥n de </font><strong><font style="vertical-align: inherit;">alta</font></strong><font style="vertical-align: inherit;"> precisi√≥n </font><font style="vertical-align: inherit;">(por ejemplo, la precisi√≥n se establece de manera predeterminada utilizando la </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flotaci√≥n de precisi√≥n alta</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Pero la precisi√≥n de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mediump se</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usa realmente </font><font style="vertical-align: inherit;">. Por lo tanto, es aconsejable probar adicionalmente todos los sombreadores para juegos m√≥viles en dichas tarjetas de video. Seg√∫n los datos recopilados por </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unity</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a fines de 2019, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali Utgard</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> trabaj√≥ en dispositivos para aproximadamente el 10% de los jugadores. Y si configura los filtros apropiados en </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">market.yandex.ru</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puede ver que en 2019 se anunciaron m√°s de 10 tel√©fonos nuevos con tarjetas de video de esta arquitectura.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/779/5a9/8ae/7795a98ae2da31ecf49131939087c21e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si est√° listo para abandonar esta audiencia, es suficiente establecer el requisito de compatibilidad con OpenGL ES 3.0 en AndroidManifest.xml: </font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">uses-feature</span> <span class="hljs-attr">android:glEsVersion</span>=<span class="hljs-string">"0x00030000"</span> <span class="hljs-attr">android:required</span>=<span class="hljs-string">"true"</span>‚ÅÑ&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali Utgard</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , actualmente no hay GPU m√≥viles generalizadas sin soporte para OpenGL ES 3.0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De particular inter√©s es el uso de texturas de alta resoluci√≥n en el </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali Utgard</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Diez partes de la mantisa con </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">una</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> precisi√≥n </font><strong><font style="vertical-align: inherit;">media</font></strong><font style="vertical-align: inherit;"> no </font><strong><font style="vertical-align: inherit;">son</font></strong><font style="vertical-align: inherit;"> suficientes para texturizar de alta calidad con una resoluci√≥n de textura de m√°s de 1024 en un lado. </font><font style="vertical-align: inherit;">Sin embargo, a pesar de admitir solo la </font><font style="vertical-align: inherit;">precisi√≥n de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mediump</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en los n√∫cleos de fragmentos </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali Utgard</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puede obtener </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">una</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> precisi√≥n de coordenadas de textura </font><strong><font style="vertical-align: inherit;">fp24</font></strong><font style="vertical-align: inherit;"> cuando se usa la </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variaci√≥n</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> directa.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">// vertex shader</span><font></font>
varying highp vec2 v_texc;<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
    v_texc = ‚Ä¶;<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//  fragment shader</span><font></font>
...<font></font>
varying highp vec2 v_texc;<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
    gl_FragColor = texture2D(u_sampler, v_texc); <span class="hljs-comment">//  v_texc </span>
                                                 <span class="hljs-comment">//  </span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como beneficio adicional en algunas arquitecturas, este enfoque le permite </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">captar</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> previamente el contenido de textura antes de ejecutar un </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sombreador de fragmentos</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , lo que minimiza los </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bloqueos</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mientras espera resultados de muestreo de textura.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali Midgard</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali Utgard ha sido</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> reemplazado por la arquitectura </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali Midgard</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Hay varias generaciones de esta arquitectura con los nombres de las especies </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali-6xx</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali-7xx</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali-8xx</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">A pesar de la edad de 8 a√±os, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali Midgard</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> puede llamarse arquitectura moderna que brinda soporte para la mayor√≠a de las nuevas caracter√≠sticas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√∫cleos de sombreadores unificados</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL ES 3.2 (sombreadores de computaci√≥n y geometr√≠a, teselaci√≥n ...)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, el Mali Midgard retiene el vector </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISA</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dado el uso generalizado de Mali Midgard (aproximadamente el 25% de nuestra audiencia), la vectorizaci√≥n de la inform√°tica se vuelve apropiada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otra caracter√≠stica de Mali Midgard es la tecnolog√≠a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Forward Pixel Kill</font></font></strong></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Cada p√≠xel se calcula en una secuencia separada del n√∫cleo del fragmento. </font><font style="vertical-align: inherit;">Si durante la ejecuci√≥n de la secuencia se sabe que el p√≠xel resultante ser√° bloqueado por un p√≠xel opaco de otra primitiva, la secuencia termina prematuramente y los recursos liberados se utilizan para otros c√°lculos.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali bifrost</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Junto a </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Midgard, la</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> arquitectura </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bifrost destaca</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por su transici√≥n al </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISA</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> escalar </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En comparaci√≥n con la arquitectura anterior, se ha aumentado el n√∫mero m√°ximo de n√∫cleos (de 16 a 32), y se admite una interfaz mejorada con una CPU, que permite un acceso coherente a la memoria compartida: los cambios en el contenido de la memoria de la CPU / GPU se vuelven "visibles" entre s√≠ a pesar de los cach√©s, que le permite simplificar la sincronizaci√≥n.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De extraoficial</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se han hecho muchos intentos para aplicar ingenier√≠a inversa a las tarjetas de video de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para crear </font><font style="vertical-align: inherit;">controladores de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> abierto para </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Los trabajos de las personas dedicadas que intentan hacer esto nos permiten echar un vistazo a las caracter√≠sticas indocumentadas de las tarjetas de video </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Por lo tanto, en el proyecto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PanFrost hay</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> un desensamblador para </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali Midgard / Bifrost</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , con el que puede familiarizarse con un conjunto de instrucciones de sombreado (no hay informaci√≥n oficial abierta sobre este tema).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bbd/f31/751/bbdf3175137a886431a23de54239900e.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adreno</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La segunda familia m√°s com√∫n de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> m√≥viles </font><font style="vertical-align: inherit;">es </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adreno</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Esta tarjeta de video est√° instalada en el </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SoC</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , conocido bajo la marca </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Snapdragon</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , de la compa√±√≠a estadounidense </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qualcomm</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Snapdragon se instala en los tel√©fonos inteligentes de gama alta de nuestro tiempo de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Samsung</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sony</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font><strong><font style="vertical-align: inherit;">otros.Las</font></strong></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
tarjetas de video </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adreno</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> actuales </font><font style="vertical-align: inherit;">son las familias de las series 3xx - 6xx. </font><font style="vertical-align: inherit;">Todas estas series combinan las siguientes caracter√≠sticas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√∫cleos de sombreadores unificados</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pseudo TBR (grandes tama√±os de mosaico ubicados en una memoria GPU dedicada tradicional)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cambio autom√°tico en modo inmediato Renderizado seg√∫n la naturaleza de la escena ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FlexRender</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conjunto de instrucciones escalares</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comenzando con </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adreno 4xx</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , se presenta el soporte para </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL ES 3.1</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y con </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adreno 5xx - Vulkan</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL ES 3.2</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renderizado basado en mosaico Adreno</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las tarjetas de video Adreno tienen una GPU "tradicional" llamada </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GMEM</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Se aplican vol√∫menes de 128 kb a 1536 kb. Esto le permite usar un tama√±o de mosaico mayor en comparaci√≥n con las arquitecturas de otros desarrolladores de GPU m√≥viles. En Adreno, el tama√±o de los mosaicos es din√°mico y depende del formato de color utilizado, el b√∫fer de profundidad y la plantilla. Cuando se trabaja en </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modo inmediato, la</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> representaci√≥n se produce en la memoria del sistema. Existe una extensi√≥n GL ES que le permite especificar el modo preferido: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QCOM_binning_control</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sin embargo, las √∫ltimas recomendaciones de Qualcomm sugieren confiar completamente en los controladores de GPU, que determinan el modo m√°s preferido para el b√∫fer de comandos generado por la aplicaci√≥n.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando trabaje en modo </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TBR</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Adreno realiza 2 pases de v√©rtice:</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pase binning</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : distribuci√≥n de primitivas por bin ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bins</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sin√≥nimo de mosaico)</font></font></li>
<li><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paso de v√©rtice</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> completo </font><font style="vertical-align: inherit;">para representar solo aquellas primitivas que caen en el contenedor actual</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante el </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pase Binning,</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Adreno solo calcula las posiciones de v√©rtice. </font><font style="vertical-align: inherit;">No se calculan otros atributos y el optimizador elimina el c√≥digo innecesario. </font><font style="vertical-align: inherit;">En la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentaci√≥n oficial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (9.2 Optimizar el procesamiento de v√©rtices), se recomienda almacenar la informaci√≥n de v√©rtices necesaria para calcular las posiciones por separado del resto de los datos. </font><font style="vertical-align: inherit;">Esto hace que el almacenamiento en cach√© de datos de v√©rtices sea m√°s eficiente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Freedreno</font></font></h2><br>
<img src="https://habrastorage.org/getpro/habr/post_images/83e/c3d/15d/83ec3d15dc03e81e81e7d867cae2b3a3.png" align="left" width="120"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A diferencia de las tecnolog√≠as ARM e Imagination, Qualcomm es reacio a compartir los detalles de la estructura interna de sus GPU. </font><font style="vertical-align: inherit;">Sin embargo, gracias a los esfuerzos del ingeniero inverso Rob Clark, se puede aprender </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mucho del</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> proyecto </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">Freedreno</font></a><font style="vertical-align: inherit;"> , el controlador </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adreno de</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> c√≥digo abierto </font><font style="vertical-align: inherit;">para Linux. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rob Clark de Freedreno</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerVR de Imagination Technologies</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imagination Technologies</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es una compa√±√≠a brit√°nica de f√°bulas famosa por desarrollar GPU para productos de Apple. </font><font style="vertical-align: inherit;">La compa√±√≠a desempe√±√≥ este papel hasta la llegada del iPhone 8 / X, que utiliza el desarrollo interno de Apple. </font><font style="vertical-align: inherit;">Aunque las recomendaciones sobre optimizaciones para estos chips que no han cambiado, as√≠ como las reclamaciones de patentes contra Apple de Imagination sugieren que Apple continu√≥ desarrollando la arquitectura PowerVR, un desarrollo original de Imagination. </font><font style="vertical-align: inherit;">A principios de 2020, Apple </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">volvi√≥</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a las pr√°cticas de licencia con Imagination Technologies. </font><font style="vertical-align: inherit;">Adem√°s de los dispositivos con iOS / iPadOS, las tarjetas de video PowerVR se instalan en una gran cantidad de tel√©fonos inteligentes y tabletas con Android.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a9d/86d/b66/a9d86db66b2293beaf3b01d3d809573f.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere la familia de tarjetas gr√°ficas PowerVR que todav√≠a se pueden encontrar entre los usuarios.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerVR SGX</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las primeras tarjetas gr√°ficas PowerVR SGX aparecieron en 2009. </font><font style="vertical-align: inherit;">Hay varias generaciones de esta arquitectura: Series5, Series5XT y Series5XE. </font><font style="vertical-align: inherit;">Apple us√≥ estas GPU hasta el iPAD 4 / iPhone 5 / iPOD Touch 5. Se pueden citar las siguientes caracter√≠sticas de SGX:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√∫cleos de sombreadores unificados</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL ES 2.0</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conjunto de instrucciones de vector</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soporte para precisi√≥n de lowp de 10 bits en sombreadores</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bajo rendimiento de lecturas de textura dependientes</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deteng√°monos en algunos de ellos con m√°s detalle.&nbsp;</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Precisi√≥n baja</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PowerVR SGX son las √∫nicas GPU m√≥viles actualizadas con </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soporte de</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hardware </font><strong><font style="vertical-align: inherit;">lowp</font></strong><font style="vertical-align: inherit;"> . Los modelos m√°s nuevos de PowerVR, as√≠ como todas las GPU modernas de otros proveedores, en realidad usan precisi√≥n de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mediump</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . El uso de </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lowp</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el PowerVR SXG le permite lograr una mayor densidad de c√≥mputo (m√°s operaciones por ciclo). Al mismo tiempo, la operaci√≥n de swizzle (permutaci√≥n de los componentes del vector) para </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lowp</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a diferencia de otra precisi√≥n, no es gratuita. Esta caracter√≠stica, as√≠ como el rango estrecho de valores que lowp proporciona ([-2,2]), limita su alcance. Al mismo tiempo, el </font><strong><font style="vertical-align: inherit;">lowp</font></strong><font style="vertical-align: inherit;"> mal configurado</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El resultado de los artefactos en la familia SGX no se ver√° en todas las otras tarjetas gr√°ficas donde realmente se utilizar√° la precisi√≥n de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">medici√≥n</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Por esta raz√≥n, debe considerar negarse a usar </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lowp</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en sombreadores.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lecturas de textura dependientes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como sabe, las operaciones de muestreo de textura son las m√°s lentas debido a la necesidad de esperar los resultados de lectura de memoria. En el caso de SoC m√≥vil, estamos hablando de memoria compartida del sistema con una CPU. Para reducir el n√∫mero de accesos a la memoria lenta, se utilizan cach√©s de textura. Para evitar el tiempo de inactividad al comienzo de la rasterizaci√≥n utilizando una textura, tiene sentido almacenar en cach√© las √°reas utilizadas de antemano. Si el sombreador de fragmentos usa la coordenada de textura pasada desde el sombreador de v√©rtices sin cambios, entonces la secci√≥n de textura necesaria para el almacenamiento en cach√© se puede determinar antes de ejecutar el sombreador de fragmentos. Si el sombreador de fragmentos cambia la coordenada de textura o la calcula utilizando datos de otra textura, esto no siempre es posible. Como resultado, la ejecuci√≥n del sombreador de fragmentos puede ralentizarse.Las tarjetas gr√°ficas PowerVR SGX son particularmente dolorosas en este escenario. Adem√°s, incluso el uso de una permutaci√≥n de los componentes de la coordenada de textura (swizzle) conduce a</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">textura dependiente le√≠da</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Aqu√≠ hay un ejemplo de programa de sombreado sin </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lectura de textura dependiente</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">programa de v√©rtice</font></font></strong><br>
<br>
<pre><code class="cpp hljs">attribute highp vec2 a_texc;<font></font>
varying highp vec2 v_texc;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
	gl_Position = ‚Ä¶<font></font>
	v_texc = a_texc;<font></font>
}<font></font>
<font></font>
</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">programa de fragmentos</font></font></strong><br>
<br>
<pre><code class="cpp hljs">precision mediump <span class="hljs-keyword">float</span>;<font></font>
uniform sampler u_sampler;<font></font>
varying highp vec2 v_texc;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
	gl_FragColor = texture2D( u_sampler, v_texc ); <span class="hljs-comment">//  dependent texture read</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este caso: </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fragmento de programa</font></font></strong><br>
<br>
<pre><code class="cpp hljs">precision mediump <span class="hljs-keyword">float</span>;<font></font>
uniform sampler u_sampler;<font></font>
varying highp vec2 v_texc;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
	gl_FragColor = texture2D( u_sampler, v_texc.yx ); <span class="hljs-comment">// dependent texture read!</span><font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerVR Rogue</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las tarjetas de video PowerVR se desarrollaron a√∫n m√°s en la arquitectura </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rogue</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Hay varias generaciones de esta arquitectura: de Series6 a Series9. </font><font style="vertical-align: inherit;">Todos los </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerVR Rogue</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tienen estas caracter√≠sticas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√∫cleos de sombreadores unificados</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arquitectura de instrucci√≥n escalar</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soporte para OpenGL ES 3.0+ (hasta 3.2, as√≠ como la API de Vulkan para reglas nuevas)&nbsp;</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerVR TBDR</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al igual que todas las GPU m√≥viles comunes, PowerVR usa una tuber√≠a en mosaico. Pero a diferencia de sus competidores, Imagination fue m√°s all√° e implement√≥ la </font><font style="vertical-align: inherit;">rasterizaci√≥n </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diferida</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de primitivas, lo que permite omitir el sombreado de p√≠xeles invisibles independientemente del orden de representaci√≥n. Este enfoque se llama </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renderizado diferido basado en mosaico</font></font></strong></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y el proceso de eliminaci√≥n de p√≠xeles invisibles se </font><font style="vertical-align: inherit;">llama </font><font style="vertical-align: inherit;">Eliminaci√≥n de superficie oculta (HSR).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ff2/2db/1dd/ff22db1dd631bb54e964aa24c96b437f.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eliminaci√≥n de superficies ocultas</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Se recomienda dibujar la geometr√≠a opaca en transparente y no usar Z Prepass, que en el caso de las tarjetas de video PowerVR en la mayor√≠a de los escenarios conducir√° a un trabajo innecesario. </font><font style="vertical-align: inherit;">Sin embargo, varios p√≠xeles transparentes consecutivos que se superponen entre s√≠ est√°n completamente sombreados para obtener el color correcto, teniendo en cuenta la mezcla. </font><font style="vertical-align: inherit;">El √∫ltimo p√≠xel transparente puede descartarse si es seguido por un p√≠xel opaco.&nbsp;</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tecnolog√≠as de imaginaci√≥n abierta</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los creadores de PowerVR han proporcionado acceso abierto a m√°s documentaci√≥n que otros desarrolladores de GPU. </font><font style="vertical-align: inherit;">La arquitectura de la tuber√≠a gr√°fica se describe en detalle, as√≠ como un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conjunto de instrucciones para la arquitectura Rogue</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Hay una herramienta conveniente </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVRShaderEditor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que le permite recibir </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">instant√°neamente</font></a><font style="vertical-align: inherit;"> informaci√≥n de perfil en el sombreador, as√≠ como su listado desmontado para Rogue.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aba/b9a/19e/abab9a19e78e6ff40638d5cdf971615a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A pesar de la presencia limitada de las tarjetas de video PowerVR en el entorno de dispositivos basados ‚Äã‚Äãen Android, tiene sentido estudiar su arquitectura para la programaci√≥n competente de gr√°ficos para iOS.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU m√≥viles en modo inmediato</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinamos las familias m√°s comunes de tarjetas de video m√≥viles. </font><font style="vertical-align: inherit;">Todas estas familias utilizaron la arquitectura de representaci√≥n en mosaico. </font><font style="vertical-align: inherit;">Sin embargo, hay tarjetas de video m√≥viles que utilizan el </font><font style="vertical-align: inherit;">enfoque </font><font style="vertical-align: inherit;">tradicional de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modo inmediato</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">√âstos son algunos de ellos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nVIdia (Tegra SoC)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toda la familia Intel excepto la reciente Gen 11</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vivante GCxxxx (+ Arcturus GC8000)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una caracter√≠stica de las tarjetas de video m√≥viles que funcionan en </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modo inmediato</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es la costosa operaci√≥n de limpieza de FBO. </font><font style="vertical-align: inherit;">Recuerde que en la arquitectura de mosaico, la limpieza de pantalla completa acelera el renderizado, permitiendo que el controlador no agregue la operaci√≥n de carga de los contenidos antiguos a la memoria del mosaico. </font><font style="vertical-align: inherit;">En las </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU de modo inmediato</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> m√≥vil </font><strong><font style="vertical-align: inherit;">,</font></strong><font style="vertical-align: inherit;"> la limpieza de pantalla completa es una operaci√≥n que requiere mucho tiempo y permite, entre otras cosas, que estas GPU se "calculen". </font><font style="vertical-align: inherit;">Si agregar limpieza no acelera, pero ralentiza el renderizado, lo m√°s probable es que estemos trabajando con </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU en modo inmediato</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Bueno, por supuesto, no olvidemos mencionar que en las </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU en modo inmediato,</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cambiar un objetivo es un procedimiento "condicionalmente libre".</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Distribuci√≥n de diferentes familias de GPU m√≥viles entre nuestros jugadores.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estas son las estad√≠sticas sobre las GPU m√≥viles recopiladas de nuestros jugadores a finales de 2019:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e7f/184/634/e7f1846345e5e8bf798bbf207a11885d.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n abrimos el segmento "Otros"</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8a3/f61/604/8a3f61604361a8c8e426ae0ae8920f05.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En base a estos datos, observamos la distribuci√≥n de la GPU en t√©rminos de sus caracter√≠sticas principales.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b41/b97/3d5/b41b973d5d8d01e817a558d838396d63.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las ALU de vector (unidad de l√≥gica aritm√©tica) se vuelven obsoletas y se reemplazan por otras escalares. Hoy, la mayor parte de las GPU m√≥viles con un conjunto de instrucciones vectoriales es </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali Midgard</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que puede considerarse promedio en rendimiento. Porque La vectorizaci√≥n, como regla, no ralentiza la ejecuci√≥n en ALU escalares; vale la pena considerar la vectorizaci√≥n como una t√©cnica real para optimizar los sombreadores para dispositivos m√≥viles.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los n√∫cleos de sombreadores especializados est√°n en desuso y son reemplazados por otros unificados. El cuello de botella del v√©rtice en la malla esquel√©tica ya no da miedo. Los n√∫cleos especializados se utilizan solo en la </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">familia Mali-4xx (Utgard)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Recuerde que estas GPU solo son compatibles con </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL ES 2.0</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nuestra audiencia tiene alrededor del 3.5% de ellos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, la gran mayor√≠a de las GPU m√≥viles utilizan el enfoque de mosaico. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El modo inmediato se ha</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> marginado y se est√° exprimiendo r√°pidamente junto con las tarjetas de video que lo usan. </font><font style="vertical-align: inherit;">La proporci√≥n de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en </font><strong><font style="vertical-align: inherit;">modo inmediato</font></strong><font style="vertical-align: inherit;"> en nuestros jugadores es de aproximadamente 0.7%. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enlaces √∫tiles:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">developer.arm.com/solutions/graphics</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">developer.qualcomm.com/software/adreno-gpu-sdk/tools</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.imgtec.com/developers/powervr-sdk-tools/documentation/</font></font></a></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Gracias por la atenci√≥n! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el pr√≥ximo art√≠culo de la serie, consideraremos t√©cnicas para optimizar sombreadores para dispositivos m√≥viles.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es498548/index.html">Creando su propio paquete para Laravel Nova: OptimalImage</a></li>
<li><a href="../es498552/index.html">¬øQu√© errores cometen los gerentes en un sitio remoto?</a></li>
<li><a href="../es498556/index.html">Hans Peter Lun y el nacimiento del algoritmo hash</a></li>
<li><a href="../es498560/index.html">Componentes web en un proyecto real</a></li>
<li><a href="../es498562/index.html">Contrariamente a la cuarentena: c√≥mo transferimos nuestras pasant√≠as a un formato remoto</a></li>
<li><a href="../es498566/index.html">Ingenier√≠a de resiliencia: notas de la conferencia REDeploy</a></li>
<li><a href="../es498568/index.html">Dentro del microprocesador seccional de m√∫ltiples chips Am2901 de los a√±os 70 de AMD</a></li>
<li><a href="../es498572/index.html">¬øDescuentos extra√±os? Acciones de proveedores de CRM con motivo de la transici√≥n a udalenka</a></li>
<li><a href="../es498574/index.html">¬øPor qu√© decid√≠ desarrollar juegos o un viaje nost√°lgico por cero?</a></li>
<li><a href="../es498576/index.html">C√≥mo desarrollamos el campo para ingresar nuevos mensajes en nuestro messenger (Gem4me)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>