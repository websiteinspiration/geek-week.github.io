<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§≥ üë®‚Äçüîß üé¥ Incorpore seu dispositivo Smart Home ao ecossistema SmartThings üå¶Ô∏è üßúüèΩ üì†</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As plataformas Smart Home permitem integrar dispositivos e criar novos cen√°rios para a intera√ß√£o deles. O efeito da plataforma √© conhecido: √© mais pro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Incorpore seu dispositivo Smart Home ao ecossistema SmartThings</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/samsung/blog/489834/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As plataformas Smart Home permitem integrar dispositivos e criar novos cen√°rios para a intera√ß√£o deles. </font><font style="vertical-align: inherit;">O efeito da plataforma √© conhecido: √© mais prov√°vel que os usu√°rios escolham aquele com o qual seus dispositivos existentes s√£o compat√≠veis, em vez de mudar para um novo. </font><font style="vertical-align: inherit;">Portanto, para desenvolvedores de novos dispositivos engenhosos, pode ser mais lucrativo integrar-se a uma plataforma j√° conclu√≠da, com foco no produto "ferro", em vez de desenvolver suas pr√≥prias "bicicletas" na forma de ecossistemas em nuvem e contas pessoais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos ver como integrar seu pr√≥prio dispositivo √† plataforma Samsung SmartThings Smart Home. </font><font style="vertical-align: inherit;">Estamos implementando uma op√ß√£o de conex√£o direta para controlar o dispositivo Smart Home usando o exemplo de um comutador de bot√£o e uma l√¢mpada de tr√™s cores.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cx/se/xy/cxsexydnzipoeqmkj3n7jq9x4iu.gif"><br>
<a name="habracut"></a><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que precisamos das plataformas Smart Home?</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, gadgets e dispositivos inteligentes est√£o √† venda - o quanto voc√™ quiser. N√£o h√° problema em comprar uma chaleira com controle Bluetooth ou uma l√¢mpada com WiFi. Mas isso torna sua casa "inteligente"? Uma situa√ß√£o n√£o √© incomum: uma l√¢mpada √© controlada apenas por um aplicativo m√≥vel do fabricante. Isso cria inconveni√™ncia se voc√™ estiver tentando combinar pelo menos v√°rias marcas diferentes. Portanto, a plataforma ideal √© aquela que permite gerenciar dispositivos de diferentes fabricantes da mesma maneira.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, eu gostaria de ver um ‚Äúcomputador dissolvido na vida cotidiana‚Äù, como Mark Weiser, da Xerox PARC, sonhava com isso: n√£o controle atrav√©s de um aplicativo especial, n√£o aplique seu foco de aten√ß√£o. Eu gostaria de uma intera√ß√£o natural com um ambiente inteligente que n√£o mude nossos h√°bitos. Como implementar isso tecnicamente? Por exemplo, podem ser cen√°rios em que dispositivos heterog√™neos da casa estejam envolvidos: voc√™ acordou - o dispositivo vest√≠vel detectou isso e a chaleira foi ligada; voc√™ chegou em casa - o sensor na porta o consertou, levando em considera√ß√£o a hora do dia, as cortinas fechadas, a l√¢mpada acesa e o ar condicionado ligado, levando em considera√ß√£o a temperatura.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os cen√°rios se tornam ainda mais √∫teis se usarmos a Internet: por exemplo, para verificar remotamente se a tomada com o ferro est√° desligada. </font><font style="vertical-align: inherit;">Ou um exemplo banal: sua casa inteligente examinou a previs√£o do tempo e deu conselhos sobre como se vestir melhor. </font><font style="vertical-align: inherit;">Ou voc√™ pode adicionar controle de voz atrav√©s de um alto-falante inteligente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A plataforma Smart Home foi projetada para tudo isso. </font><font style="vertical-align: inherit;">Considere o que a plataforma Samsung SmartThings pode fazer.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hist√≥rico - O que s√£o SmartThings?</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O SmartThings come√ßou como uma startup. No momento em que ele apareceu, em 2012, nos EUA, o t√≥pico ‚ÄúSmart Home‚Äù ainda n√£o estava no topo do hype, ainda n√£o havia alto-falantes inteligentes e uma variedade de gadgets nas lojas. A id√©ia veio ao fundador da startup, Alex Hawkinson, ap√≥s um incidente: sua casa de fam√≠lia no Colorado sofreu com o fato de que, ap√≥s uma interrup√ß√£o tempor√°ria de eletricidade, os canos de √°gua congelaram, eles estouraram e todo o piso foi inundado. Ent√£o ele pensou que poderia ter evitado o problema se soubesse o que estava acontecendo na casa.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de procurar, sem sucesso, uma solu√ß√£o pronta para uso, Hawkinson e seus colegas fizeram um prot√≥tipo do dispositivo e lan√ßaram uma campanha no Kickstarter. A campanha teve sucesso, arrecadando US $ 1.200.000 em vez dos US $ 250.000 planejados em 30 dias. A venda de um hub com um pequeno conjunto de dispositivos no kit j√° come√ßou: tomada inteligente, sensor de porta aberta, sensor de movimento, sensor de presen√ßa. E em 2019, j√° com a marca Samsung SmartThings, a terceira vers√£o do hub foi lan√ßada. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/xk/vi/hexkviuwr8rq2bf7z84ft-akdnm.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A chave do sucesso no Kickstarter foi a disponibilidade de prot√≥tipos funcionais de ferro e software e a simpatia da comunidade de criadores</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os criadores da startup deixaram o ambiente de bricolage, ent√£o est√£o constantemente desenvolvendo o conceito de uma API aberta para criadores de nerds que podem atuar como adotantes precoces em um est√°gio inicial. Na campanha do Kickstarter, havia um escudo para o Arduino e v√°rios m√≥dulos na nuvem para conectar perfeitamente seu dispositivo de terceiros. Na Internet, voc√™ encontra muitos exemplos de dispositivos caseiros compat√≠veis com o SmartThings, seja uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">porta de capoeira</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> controlada </font><font style="vertical-align: inherit;">(com a solu√ß√£o de uma tarefa s√©ria da vida - salvar galinhas de um vison predat√≥rio) ou a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instala√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> remota </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">de</font></a><font style="vertical-align: inherit;"> um c√≥digo de bloqueio eletr√¥nico para os h√≥spedes do Airbnb. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ct/fd/tl/ctfdtl25yhvhmrnz2yufm_qwhfw.jpeg" width="500"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fonte da foto: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.hackster.io/aaronpk/auto-airbnb-entry-745799</font></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em 2012-2013, a SmartThings passou por v√°rias rodadas de investimento e recebeu US $ 12,5 milh√µes. </font><font style="vertical-align: inherit;">E, finalmente, em 2014, ela se interessou pela Samsung e foi adquirida por US $ 200 milh√µes como parte de uma estrat√©gia para entrar no mercado da Internet das Coisas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os recursos de nuvem da plataforma permaneceram livres: os autores, agora funcion√°rios da Samsung, sem excluir a possibilidade te√≥rica de cobrar por grandes volumes de tr√°fego, enfatizam: sempre haver√° uma op√ß√£o gratuita para desenvolvedores de dispositivos. </font><font style="vertical-align: inherit;">Isso √© bom, porque agora quase todos os servi√ßos em nuvem fornecem monetiza√ß√£o e, muitas vezes, mesmo durante um per√≠odo de teste, voc√™ precisa anexar um cart√£o banc√°rio. </font><font style="vertical-align: inherit;">SmartThings √© uma plataforma totalmente gratuita.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitetura do SmartThings</font></font></h1><br>
<img src="https://habrastorage.org/webt/dm/gw/ir/dmgwirddjoqbh-1caazcx5kg-sc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos mover o padr√£o da esquerda para a direita.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aparelhos</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dispositivos SmartThings - podem ser n√£o apenas dispositivos do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conjunto SmartThings</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mas tamb√©m muitos parceiros de terceiros da lista de parceiros. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ut/j6/oq/utj6oqymmwwnqazkm_jekxgymwq.jpeg" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o dispositivo n√£o estiver na lista de oficialmente suportados, voc√™ pode procurar o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manipulador de dispositivos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nele </font><font style="vertical-align: inherit;">- ele pode ser fornecido pela </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comunidade de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> desenvolvedores - ou escrever o seu pr√≥prio.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todos de conex√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode conectar dispositivos √† plataforma das seguintes maneiras:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conectado ao hub - por meio de um hub, relevante para dispositivos que n√£o possuem conex√£o √† Internet, mas est√£o conectados atrav√©s de redes sem fio tradicionais, como o ZigBee, para esses sistemas.&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conex√£o direta - via Internet diretamente para a nuvem. </font><font style="vertical-align: inherit;">A SmartThings </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lan√ßou</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> recentemente </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">uma</font></a><font style="vertical-align: inherit;"> c√¢mera de v√≠deo, uma l√¢mpada e uma tomada inteligente, e elas funcionam sem um hub - via WiFi. </font><font style="vertical-align: inherit;">Essa √© a op√ß√£o que implementaremos neste guia.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conectado √† nuvem - por meio de uma nuvem de terceiros para os dispositivos que j√° possuem seu pr√≥prio ecossistema de nuvem. </font><font style="vertical-align: inherit;">Isso √© mais complicado, portanto, n√£o consideraremos essa op√ß√£o.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cubo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normalmente, para conectar uma variedade de equipamentos em sua casa, deve haver um pequeno servidor especial "Smart Home" que suporta v√°rios protocolos. </font><font style="vertical-align: inherit;">Ele - um hub, hub, gateway - os nomes s√£o diferentes. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gx/yy/_b/gxyy_bk9o6kvzdfzldagqw4lbb0.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hub e um conjunto de dispositivos para ele. </font><font style="vertical-align: inherit;">Fonte da foto: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IXBT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inscri√ß√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O SmartThings App √© um aplicativo que pode ser instalado no sistema operacional m√≥vel principal e com sua ajuda: adicionar novos dispositivos ao sistema, controlar os j√° adicionados, definir regras de automa√ß√£o, receber notifica√ß√µes via push e SMS e muito mais.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ua/tu/-q/uatu-qhi_oijgiuumtopuqsjedk.png" width="400"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abstra√ß√£o</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No SmartThings, como em muitas outras plataformas dom√©sticas inteligentes, existem as seguintes abstra√ß√µes: salas, cenas, cen√°rios.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os dispositivos s√£o agrupados em salas. </font><font style="vertical-align: inherit;">Voc√™ simplesmente anexa esse ou aquele gadget a um c√¥modo do aplicativo e denomina ‚ÄúCozinha‚Äù, ‚ÄúBanheiro‚Äù, ‚ÄúCorredor‚Äù. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainda existem cenas (cenas) - s√£o situa√ß√µes: ‚Äúdormir‚Äù, ‚Äúdescansar‚Äù, ‚Äútrabalhar‚Äù, ‚Äúassistir a um filme‚Äù - cada uma das situa√ß√µes √© caracterizada por seu pr√≥prio conjunto de estados de dispositivo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qt/vo/5o/qtvo5o8yo8thwuwhptupdthayjc.png" width="300"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cenas e salas na tela do aplicativo</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, finalmente, scripts (Rotinas): regras de automa√ß√£o if-then. Por padr√£o, o programa possui quatro cen√°rios: "Estou de volta", "Boa noite", "Tchau", "Bom dia". Voc√™ pode configurar a ativa√ß√£o do script de acordo com a condi√ß√£o da manh√£, ou no caso de movimento, ou no caso de abrir a porta e assim por diante. Um exemplo n√£o trivial: quando entro em casa - bloqueio o tr√°fego de rede na minha c√¢mera de vigil√¢ncia dom√©stica para evitar o vazamento de meus v√≠deos pessoais. Ou um exemplo educacional cruel: desconecte √† for√ßa o tablet da rede √†s 11 horas da noite para evitar que voc√™ fique preso na Internet em vez de ter um sono saud√°vel.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7j/gp/qg/7jgpqgdehbjdzjtpmfnf7a2supc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, no programa SmartThings no telefone, h√° uma oportunidade interessante - memorizando a√ß√µes t√≠picas. Quando voc√™ usa o telefone com frequ√™ncia, com o tempo, ele come√ßa a mostrar a melhor maneira de configurar cenas com base nos aplicativos iniciados com mais freq√º√™ncia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para adicionar novos dispositivos ao sistema, √© fornecido um sistema de plug-in. O desenvolvedor pode programar o plug-in para seu pr√≥prio dispositivo - a interface do usu√°rio dentro do aplicativo SmartThings e a l√≥gica do dispositivo. Esta √© essencialmente uma aplica√ß√£o web. Do ponto de vista do desenvolvedor, o plug-in pode se inscrever em eventos ou notifica√ß√µes do dispositivo, enviar uma mensagem a ele, monitorar o status da conex√£o com o dispositivo. H√° uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documenta√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> clara </font><font style="vertical-align: inherit;">sobre o ciclo de vida do plug-in.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eles s√£o baixados pelo usu√°rio na "loja de plug-ins", conforme necess√°rio, para n√£o inflar o aplicativo no telefone. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2t/i7/6p/2ti76pkvardmqwv2efyxjh5nec4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas agora n√£o faremos nenhum plug-in, mas o tornaremos mais simples: adicionaremos um dispositivo caseiro usando apenas ferramentas de plataforma padr√£o.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tornando seu dispositivo compat√≠vel com SmartThings</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode ter uma pergunta: por que? </font><font style="vertical-align: inherit;">Qual o sentido de torn√°-lo compat√≠vel se voc√™ √© um desenvolvedor de dispositivos?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A principal vantagem √© o aumento do valor do produto devido √† integra√ß√£o autom√°tica com todo o ecossistema.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sob a condi√ß√£o de passar nos testes funcionais, voc√™ pode colar o logotipo: ‚ÄúCompat√≠vel com SmartThings‚Äù na caixa do produto, garantindo instala√ß√£o e configura√ß√£o sem problemas do dispositivo no ecossistema SmartThings.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como em qualquer plataforma, sua tarefa √© facilitada: voc√™ n√£o precisa mais tentar desenvolver, por exemplo, uma interface de usu√°rio - √© poss√≠vel usar os bot√µes padr√£o e outros elementos da interface do SmartThings.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ obt√©m rela√ß√µes p√∫blicas e p√∫blico de usu√°rios gra√ßas √† comunidade SmartThings (√© animada e ativa).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No manual abaixo, conectaremos nosso pr√≥prio dispositivo totalmente personalizado.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que se prop√µe fazer</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O SmartThings Device SDK (STDK) foi apresentado recentemente na Samsung Developer Conference em outubro de 2019. Abaixo, oferecemos uma tradu√ß√£o do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manual</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para este SDK. E n√£o apenas uma tradu√ß√£o: fizemos a mesma coisa e repetimos com nossas pr√≥prias m√£os, para que haja alguns coment√°rios pr√°ticos que v√£o al√©m do manual original. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o resultado final ser√° exibido no v√≠deo:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Rvo6pbI2-0U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A l√¢mpada RGB est√° conectada √† plataforma SmartThings via Wi-Fi e voc√™ a controla atrav√©s do telefone. A l√¢mpada em si √© implementada da maneira mais barata e f√°cil - no super popular chip ESP8266. O ferro n√£o √© importante: pode ser feito em qualquer microcontrolador, porque o SDK √© escrito em C, organizado em dom√≠nio p√∫blico e pode ser portado, se desejado. √â improv√°vel que o ESP entre em produ√ß√£o (para iniciantes, √© mais conveniente usar outras interfaces na Smart Home do que o WiFi), mas √© bastante adequado para o modelo e ilustra√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A funcionalidade da "l√¢mpada inteligente" resultante ser√° a seguinte: Controle de LED RGB usando a roda de cores do telefone. Al√©m de desligar e ligar usando o bot√£o </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O processo de desenvolvimento √© mostrado no diagrama:</font></font><br>
<img src="https://habrastorage.org/webt/ba/kb/_h/bakb_hunqhwmmaovm0jk2xrbqgk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O processo mostrado n√£o √© dif√≠cil, algumas das etapas podem ser revertidas, o que mostraremos no manual.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ferro</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O manual original mostra tudo no exemplo da placa WeMos D1 Mini; esta √© uma placa de depura√ß√£o baseada no ESP8266 que pode ser inserida na placa de ensaio. </font><font style="vertical-align: inherit;">Em geral, n√£o h√° nada de complicado nisso, √© apenas um m√≥dulo do chip ESP chin√™s que √© super popular entre os f√£s, soldado por conveni√™ncia a uma placa mais larga do tamanho da placa de ensaio. </font><font style="vertical-align: inherit;">Portanto, voc√™ pode fazer tudo em qualquer outra placa. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rs/lo/8t/rslo8ts8_gfmrhvrrnh-jb87yry.jpeg" width="200"> <img src="https://habrastorage.org/webt/bl/sg/mw/blsgmwf3onhbr9x9y4s9dxialiw.jpeg" width="200"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esquerda: WeMos D1, direita - Troyka WiFi Shield</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suave</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que voc√™ precisa para construir o exemplo:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vers√£o do Ubuntu Linux n√£o inferior a 18.04 (voc√™ pode criar um exemplo para Windows e MacOS, mas, definitivamente, escolhemos o Linux)</font></font><br>
</li>
<li>  Android    1.7.39,  iOS    1.6.41-343.   Play Market  SmartThings,     Samsung Account.       Samsung,    .<br>
</li>
<li>ESP8266 SDK.  , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>  ,   ,   :<br>
<br>
<pre><code class="bash hljs">git <span class="hljs-built_in">clone</span> https://github.com/espressif/ESP8266_RTOS_SDK.git</code></pre><br>
     SDK   IDF_PATH:<br>
<br>
<pre><code class="bash hljs">nano ~/.bashrc
<span class="hljs-built_in">export</span> IDF_PATH=<span class="hljs-string">"~/git/ESP8266_RTOS_SDK:<span class="hljs-variable">$IDF_PATH</span>"</span></code></pre></li>
<li>   :<br>
<br>
<pre><code class="bash hljs">sudo apt-get install gcc git wget make libncurses-dev flex bison gperf python python-pip python-setuptools python-serial python-cryptography python-future python-pyparsing python-pyelftools</code></pre><br>
   ():<br>
<br>
<pre><code class="bash hljs">sudo mkdir /opt/Espressif<font></font>
sudo chown username /opt/Espressif/<font></font>
<span class="hljs-built_in">cd</span> /opt/Espressif<font></font>
wget https://dl.espressif.com/dl/xtensa-lx106-elf-linux64-1.22.0-100-ge567ec7-5.2.0.tar.gz<font></font>
tar -xzf ./xtensa-lx106-elf-linux64-1.22.0-100-ge567ec7-5.2.0.tar.gz<font></font>
<span class="hljs-built_in">cd</span> xtensa-lx106-elf
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">"/opt/Espressif/xtensa-lx106-elf/bin:<span class="hljs-variable">$PATH</span>"</span></code></pre><br>
</li>
<li>Smart Things Device SDK C ‚Äì   .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>  github,         ,     ,       .<br>
<br>
<pre><code class="bash hljs">git <span class="hljs-built_in">clone</span> https://github.com/SmartThingsCommunity/st-device-sdk-c-ref.git
<span class="hljs-built_in">cd</span> st-device-sdk-c-ref<font></font>
./setup.sh esp8266</code></pre><br>
</li>
</ul><br>
<h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os seguintes dispositivos ser√£o considerados como exemplos: interruptor inteligente e l√¢mpada inteligente. </font><font style="vertical-align: inherit;">Come√ßaremos com um switch inteligente, mais simples e sem exigir perif√©ricos externos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etapa 1. Registre seu dispositivo.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O trabalho come√ßa no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espa√ßo de trabalho do desenvolvedor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> do </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">SmartThings</font></a><font style="vertical-align: inherit;"> , onde voc√™ precisa fazer login usando sua conta Samsung. </font><font style="vertical-align: inherit;">Essa conta √© criada gratuitamente e, para criar, n√£o √© necess√°rio ter um telefone Samsung.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rz/vc/tb/rzvctbgclnb7ug6rcxccoqsfe88.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No Developer Workspace, voc√™ √© imediatamente oferecido para criar o primeiro projeto. </font><font style="vertical-align: inherit;">Concordamos que ap√≥s as duas op√ß√µes do projeto voc√™ precisar√° selecionar a Integra√ß√£o de dispositivos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mh/7z/0f/mh7z0fghp37p2_kfmlj4p3bjkvg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A escolha ter√° tr√™s op√ß√µes para integrar o dispositivo:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SmartThings Cloud Connector - para conectar dispositivos que possuem sua pr√≥pria nuvem e que ser√£o conectados √† nuvem SmartThings</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O SmartThings Hub n√£o est√° dispon√≠vel para dispositivos ZigBee, Z-Wave, Bluetooth e no momento da reda√ß√£o deste artigo, pois o hub ainda n√£o foi vendido oficialmente na R√∫ssia</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conex√£o Direta √© a op√ß√£o mais f√°cil de conectar-se diretamente, sem intermedi√°rios.&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Escolha a terceira op√ß√£o. </font><font style="vertical-align: inherit;">Pense no nome de um projeto, por exemplo, para simplificar - SmartSwitch. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/or/dg/5w/ordg5wpiqskc-9kyau_hjlquhaq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicione um perfil de dispositivo. </font><font style="vertical-align: inherit;">Falando em termos de POO, um perfil de dispositivo √© uma "classe" e um dispositivo espec√≠fico √© uma "inst√¢ncia de classe". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Precisamos determinar as caracter√≠sticas funcionais do dispositivo em termos de capacidade do SmartThings. </font><font style="vertical-align: inherit;">Voc√™ pode </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre os ‚Äúrecursos‚Äù gerais do dispositivo </font><font style="vertical-align: inherit;">no manual.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gk/sx/wl/gksxwlnkswip3cxd21fngup5jc0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≥s preenchemos os campos com nossos valores. </font><font style="vertical-align: inherit;">Por exemplo, o nome do perfil pode ser digitado Test Switch Profile, descri√ß√£o - qualquer texto, tipo de dispositivo - Switch, ID do fornecedor - qualquer texto. </font><font style="vertical-align: inherit;">"Tipo de dispositivo" afeta o √≠cone do seu dispositivo e a interface do usu√°rio. </font><font style="vertical-align: inherit;">N√£o h√° muitos tipos poss√≠veis de dispositivos na lista (embora existam dispositivos ex√≥ticos, por exemplo, WineCellar - um arm√°rio de vinhos), portanto, se voc√™ n√£o encontrar o seu, n√£o desanime e apenas escolha o mais pr√≥ximo e o mais pr√≥ximo. </font><font style="vertical-align: inherit;">Na √∫ltima tela (Controle do painel), voc√™ n√£o pode alterar nada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s criar o perfil, n√£o se esque√ßa de clicar no bot√£o "Adicionar perfil de dispositivo ao projeto" no canto superior direito.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/py/_m/ou/py_mouuxfu6aqpzsuhypzlwxhau.png"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importante: a verifica√ß√£o de integridade √© necess√°ria para todos os dispositivos conectados diretamente. </font><font style="vertical-align: inherit;">Adicione-o ao perfil do dispositivo.&nbsp;</font></font><br>
</li>
<li>  ¬´ ¬ª   : Switch, Health Check.<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora adicione o perfil de autentica√ß√£o (perfil de integra√ß√£o). Em resumo, neste perfil, voc√™ pode personalizar as telas que aparecem quando voc√™ se conecta e faz login pela primeira vez. Digite qualquer nome e qualquer n√∫mero de tr√™s d√≠gitos. Voc√™ pode pular as outras duas telas por enquanto. Na √∫ltima tela, selecione a op√ß√£o de confirma√ß√£o - Confirma√ß√£o do bot√£o - pressionando o bot√£o no dispositivo. Neste manual, presumimos que voc√™ tenha uma placa com um bot√£o embutido. Se de repente n√£o houver um bot√£o (por exemplo, voc√™ estiver usando outro m√≥dulo ESP), poder√° escolher a op√ß√£o sem autentica√ß√£o - ela se chama Just Works, ou seja, ‚Äúsimplesmente funciona‚Äù sem nenhuma pergunta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E novamente, por analogia com o exemplo anterior, n√£o se esque√ßa de clicar no bot√£o "Adicionar dispositivo integrado ao projeto".</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_4/8w/k1/_48wk1mewseukstfc4rbvdjx8qw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo o que resta √© clicar no bot√£o Implementar. </font><font style="vertical-align: inherit;">Depois disso, voc√™ poder√° ver seu dispositivo no aplicativo SmartThings - mas apenas no Modo Desenvolvedor. </font><font style="vertical-align: inherit;">Se Deploy n√£o for pressionado, e eles disserem "Por favor, adicione um nome de modelo" - isso significa que voc√™ n√£o especificou um ID de integra√ß√£o do dispositivo, role a p√°gina abaixo e fa√ßa - insira qualquer nome de sua escolha. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l1/cc/pr/l1ccprru9d4xx-2onzisikmuhlk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora voc√™ pode come√ßar a testar seu dispositivo virtual no seu telefone. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo o primeiro passo √© mostrado em detalhes no v√≠deo:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/0KLJNC2nj5M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registrar um dispositivo na nuvem</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de come√ßar a trabalhar com o hardware real, voc√™ precisa fazer outra coisa. Depois de pressionar o bot√£o Implementar, a tela parecer√° diferente: um novo campo Identidade do dispositivo aparecer√° l√°.&nbsp; </font></font><br>
<img src="https://habrastorage.org/webt/ow/hj/tk/owhjtkpdu8stli8nbv5hykchulo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para autenticar seu dispositivo na nuvem SmartThings, √© necess√°rio inserir o n√∫mero de s√©rie e a chave p√∫blica (com o esquema de assinatura ED25519). Isso √© f√°cil o suficiente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este exemplo mostra como criar um par de chaves ED25519 usando uma ferramenta no SDK. Voc√™ obter√° o arquivo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">device_info.json</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como resultado do programa na </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pasta tools / keygen / linux / output_ {serialNumber}</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A vers√£o Linux do keygen est√° localizada em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st-iot-device-sdk-c-reference / iot-core / tools / keygen / linux</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st-device-sdk-c / tools / keygen / linux</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O n√∫mero de s√©rie do dispositivo de teste ser√° gerado aleatoriamente no formato STDK + [MNID] + formato alfanum√©rico (8 caracteres). </font><font style="vertical-align: inherit;">Voc√™ pode encontrar seu MNID no perfil de desenvolvedor na se√ß√£o Gerenciar conta.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f6/6b/tq/f66btqfqggupzu83olz6lbaru6c.png" width="300"><br>
<br>
<img src="https://habrastorage.org/webt/qv/1k/p0/qv1kp0xha-it8b8xnyaa4hj2fe8.png" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, para gerar a parte alfanum√©rica, √© necess√°rio inserir seu MNID (4 caracteres) como um par√¢metro keygen. </font><font style="vertical-align: inherit;">No exemplo abaixo, o MNID √© fJ * c.</font></font><br>
<br>
<pre><code class="bash hljs">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">cd</span> ~/Workspace/st-iot-device-sdk-c-ref/iot-core/tools/keygen<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;./stdk-keygen -m fJ*c<font></font>
&nbsp;&nbsp;&nbsp; Go Device Identity of Developer Workspace.<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Serial Number:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ STDKfJ*c&nbsp; &nbsp; ‚îÇ abed**5c   ‚îÇ<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Public Key:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;waGgyjWIvHhF1LU***FG2hx/4u***ADFHr/ry0j5jbk=<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Copie ‚Äúabed ** 5c‚Äù da emiss√£o do keygen e cole nos campos XXXXXXXX na se√ß√£o Registro de identidade do dispositivo. </font><font style="vertical-align: inherit;">Uma janela aparecer√° solicitando que voc√™ insira a chave p√∫blica. </font></font><br>
<img src="https://habrastorage.org/webt/wv/bd/ft/wvbdftti3tqz7qug9us-jphddq8.png" width="500"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Copie a chave p√∫blica da emiss√£o do keygen ("waGgyjWIvHhF1LU *** FG2hx / 4u *** ADFHr / ry0j5jbk =" neste exemplo) e cole no campo "Chave p√∫blica do dispositivo".</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gx/wn/60/gxwn602ru15zwlvouhg68zo8918.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etapa 2. Firmware do dispositivo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fale sobre o c√≥digo que voc√™ far√° o download no dispositivo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exemplos de firmware est√£o localizados na </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pasta st-device-sdk-c-ref / apps / esp8266 /</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Estaremos interessados ‚Äã‚Äãno exemplo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st_switch</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baixe </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onboarding_profile.json</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na janela de vis√£o geral do seu dispositivo no escrit√≥rio do desenvolvedor.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/o5/he/mn/o5hemnlglw1ak1cu134aqeka4sm.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copie o arquivo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onboarding_profile.json</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baixado </font><font style="vertical-align: inherit;">para o diret√≥rio do seu aplicativo - no nosso caso </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apps / esp8266 / st_switch / main</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref/apps/esp8266/st_switch/main/<font></font>
cp ~/Downloads/onboarding_profile.json .<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J√° existe um exemplo desse arquivo - basta substitu√≠-lo pelo seu.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Da mesma forma, copiar o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">device_info.json</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> arquivo </font><font style="vertical-align: inherit;">da </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pasta de ferramentas / keygen / linux / output_ {serialNumber}</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , em que as informa√ß√µes espec√≠ficas do dispositivo est√° localizado, para a mesma pasta, substituindo o arquivo existente.</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref/iot-core/tools/keygen/linux/<font></font>
cp output_{serialNumber}/device_info.json ~/Workspace/st-device-sdk-c-ref/apps/esp8266/st_switch/main/</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste arquivo, al√©m das chaves e do n√∫mero de s√©rie, existe a linha "firmwareVersion" - ela pode ser substitu√≠da pela vers√£o do seu programa.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora monte e atualize o programa.</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref<font></font>
./build.sh esp8266 st_switch<font></font>
./build.sh esp8266 st_switch flash<font></font>
./build.sh esp8266 st_switch monitor</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou o mesmo, mas mais curto:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref<font></font>
./build.sh esp8266 st_switch flash monitor</code></pre><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
! </font><font style="vertical-align: inherit;">Se voc√™ n√£o pode exibir o programa de forma alguma - provavelmente, esqueceu de colocar a placa ESP8266 no modo de programa√ß√£o. </font><font style="vertical-align: inherit;">Isso geralmente √© feito pressionando um bot√£o no pr√≥prio quadro. </font><font style="vertical-align: inherit;">Por exemplo, o m√≥dulo Wi-Fi Troyka pode ser traduzido mantendo pressionado o bot√£o PROG e, em seguida, pressionando e soltando o bot√£o RESET. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s o download do firmware, n√£o se esque√ßa de reiniciar a placa.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etapa 3. Conex√£o e controle do telefone</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ative o modo de desenvolvedor no aplicativo SmartThings no seu telefone. Como fazer isso est√° </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escrito</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no site oficial, mas √© mais f√°cil explicar com palavras: insira as configura√ß√µes na "engrenagem" e pressione o bot√£o "Detalhes do SmartThings" por 20 segundos. O menu "Modo de desenvolvedor" aparece abaixo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/di/vs/hs/divshsyn6jnwbmaox3t_mkpaebe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nosso dispositivo deve estar vis√≠vel na lista do aplicativo SmartThings: inicie o aplicativo, clique no bot√£o mais e em Adicionar dispositivo. Role at√© o final da lista de fornecedores e veja o √≠cone "Meus dispositivos de teste". Clique nele e selecione seu dispositivo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_o/ks/pa/_okspakmd1pndm_lh-xpbeehyw8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso: se voc√™ j√° ativou o modo de desenvolvedor e ligou o dispositivo, ter√° um menu pop-up oferecendo a adi√ß√£o deste dispositivo em particular! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A conex√£o </font><i><font style="vertical-align: inherit;">inicia</font></i><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8n/by/pd/8nbypdf-00xmksrlukpvetjlv2m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gerenciar o dispositivo a partir do aplicativo SmartThings.&nbsp;</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, o dispositivo aparece como um ponto de acesso, porque ainda n√£o sabe a senha do seu WiFi. </font><font style="vertical-align: inherit;">Durante o processo de conex√£o, voc√™ especifica a rede com a qual o dispositivo deve se conectar. </font><font style="vertical-align: inherit;">Se voc√™ tiver um ponto de acesso oculto, o ESP n√£o poder√° se conectar a ele; portanto, escolha um ponto aberto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O resultado ser√° o seguinte: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/--/pw/ne/--pwnex-v3o9iewlsmw7xk-lps8.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste exemplo ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comutador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), voc√™ controla o LED embutido na placa pressionando o bot√£o na pr√≥pria placa. </font><font style="vertical-align: inherit;">Como voc√™ pode ver, neste exemplo, voc√™ nem precisa de perif√©ricos adicionais, apenas a placa ESP8266. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ tamb√©m pode ligar / desligar o dispositivo com o bot√£o no painel de controle do aplicativo para dispositivos m√≥veis. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nz/ze/-7/nzze-7ywppruvlqiafqpz4-xgew.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, √© claro, se voc√™ pressionar o bot√£o f√≠sico, o status da l√¢mpada no aplicativo tamb√©m ser√° atualizado.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemplo de luz inteligente</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de fazer o exemplo do Smart Switch, vamos tentar complicar um pouco as coisas. </font><font style="vertical-align: inherit;">Haver√° um LED RGB e ligar / desligar um bot√£o externo, al√©m de selecionar uma cor no aplicativo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ferro</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O esquema de conex√£o ser√° simples: </font></font><br>
<img src="https://habrastorage.org/webt/sv/xh/cf/svxhcfrv9zn7brswyuebeh_jd9o.png" width="500"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E o diagrama do circuito tamb√©m n√£o d√≥i: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1z/gu/8v/1zgu8vamare3efr_qqtqt_s6bqa.png" width="500"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ olhar para a fonte (localizada em: st-device-sdk-c-ref / apps / esp8266 / st_lamp), a conex√£o √© a seguinte: </font><font style="vertical-align: inherit;">
Voc√™ pode reatribuir as conclus√µes segundo as quais √© o modelo do quadro que voc√™ tem. </font><font style="vertical-align: inherit;">Observe que existe um sistema de nota√ß√£o (D1, D2 ...) na placa e outro no c√≥digo, mas isso √© f√°cil de entender apenas olhando a documenta√ß√£o da sua placa.</font></font><br>
<br>
<code>#define GPIO_OUTPUT_NOTIFICATION_LED 2<br>
#define GPIO_INPUT_BUTTON 5<br>
#define GPIO_OUTPUT_COLORLED_R 16<br>
#define GPIO_OUTPUT_COLORLED_G 14<br>
#define GPIO_OUTPUT_COLORLED_B 12<br>
#define GPIO_OUTPUT_COLORLED_0 13&nbsp;</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte do software</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De acordo com a parte do software, alteraremos v√°rias etapas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao adicionar Recursos, voc√™ deve especificar o seguinte: Switch, Switch Level, Color Control, Health Check. </font><font style="vertical-align: inherit;">O tipo de dispositivo que haver√° - Luz.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tomamos um exemplo de firmware da mesma pasta com exemplos, √© chamado </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st_lamp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .&nbsp;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A interface no aplicativo ter√° a seguinte </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r9/qh/d_/r9qhd_lnaxlrnd5qcxonqzu2k70.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
apar√™ncia </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">Como fica em a√ß√£o - mais uma vez GIF:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cx/se/xy/cxsexydnzipoeqmkj3n7jq9x4iu.gif"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, voc√™ tem um exemplo de trabalho pronto. </font><font style="vertical-align: inherit;">Voc√™ v√™ que a maior parte do c√≥digo j√° foi feita para voc√™ - tudo relacionado √† conex√£o, autentica√ß√£o, interface do dispositivo. </font><font style="vertical-align: inherit;">O exemplo do SmartThings √© valioso, pois n√£o est√° vinculado a nenhum dispositivo de hardware e voc√™ pode assistir e avaliar qual funcionalidade da plataforma √© necess√°ria no 2k20 se estiver desenvolvendo uma Casa Inteligente. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g8/kt/h0/g8kth04siprq-9s2uwlli2fp6ae.jpeg" align="left"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tatyana Volkova - autora do Internet of Things da Samsung IT Academy acompanha o curr√≠culo, especialista em programas de responsabilidade social corporativa no Samsung Research Center</font></font><br>
</i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt489822/index.html">Gerando n√∫meros pseudo-aleat√≥rios usando um aut√¥mato celular: Regra 30</a></li>
<li><a href="../pt489824/index.html">7 ferramentas de monitoramento de seguran√ßa em nuvem de c√≥digo aberto que vale a pena conhecer</a></li>
<li><a href="../pt489826/index.html">Sobre m√©todos mut√°veis ‚Äã‚Äãde um objeto Math em JavaScript</a></li>
<li><a href="../pt489828/index.html">Trabalhando com GeoJSON no Node.js: uma introdu√ß√£o pr√°tica</a></li>
<li><a href="../pt489832/index.html">Contas at√¥micas artificiais: manipula√ß√µes com macrociclos</a></li>
<li><a href="../pt489836/index.html">Lidares do futuro: 11.000 lasers em vez de 128</a></li>
<li><a href="../pt489838/index.html">Vazamento de mem√≥ria no lado do servidor Nuxt usando SSR (renderiza√ß√£o no servidor)</a></li>
<li><a href="../pt489840/index.html">Anatomia da unidade: discos r√≠gidos</a></li>
<li><a href="../pt489844/index.html">An√°lise comparativa de alguns descompiladores Java</a></li>
<li><a href="../pt489848/index.html">Por que meus colegas / funcion√°rios se comportam como @% ¬ß?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>