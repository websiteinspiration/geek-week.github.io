<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äç‚öïÔ∏è üîä üåì Como fizemos uma bola de dan√ßa online üïØÔ∏è üÜë ‚ùÑÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O Baile Oficial de Bolshoi Sevastopol √© tradicionalmente realizado em junho, mas desta vez a prepara√ß√£o n√£o deu certo. Os organizadores decidiram lan√ß...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Como fizemos uma bola de dan√ßa online</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/506362/"><img src="https://habrastorage.org/webt/r5/ac/7i/r5ac7iy_cxktzepbq9f02bdsweq.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Baile Oficial de Bolshoi Sevastopol √© tradicionalmente realizado em junho, mas desta vez a prepara√ß√£o n√£o deu certo. </font><font style="vertical-align: inherit;">Os organizadores decidiram lan√ßar o Sevastopol Ball Online. </font><font style="vertical-align: inherit;">Como transmitimos o evento por v√°rios anos seguidos, n√£o havia para onde recuar. </font><font style="vertical-align: inherit;">Espectadores no facebook, vkontakte e no YouTube, 35 casais dan√ßam em casa.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, enquanto participamos de transmiss√µes on-line por algum tempo, percebemos uma tend√™ncia que quase todo projeto requer (ou exigimos de n√≥s mesmos) algum tipo de inova√ß√£o. </font><font style="vertical-align: inherit;">Primeiro usamos SDI, depois um remetente de v√≠deo, depois transmitimos um sinal usando v√°rios modems 4G do mar, um novo controle remoto, uma matriz de sinal, captamos o v√≠deo de um helic√≥ptero, restringimos a 25 grupos de VC e similares. </font><font style="vertical-align: inherit;">Cada novo projeto faz com que voc√™ mergulhe no mundo dos fluxos ainda mais fundo. </font><font style="vertical-align: inherit;">Conversamos sobre isso no VidMK YouTube, decidimos escrever no Habr.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ent√£o a tarefa ...</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma bola de dan√ßa epid√™mica √© realizada online. H√° um casal que lidera, o resto dos participantes dan√ßa, repetindo depois deles, ou seja, eles devem ver e ouvir o casal principal junto com a m√∫sica. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zi/le/m7/zilem75qo6iakbpyybhq8dqumg8.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No come√ßo, o governador de Sebastopol est√° conectado para abrir a bola. A transmiss√£o direcionada pronta vai para o YouTube, Facebook e VK. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/td/e-/ks/tde-ksp-4qv10sdzlgyxnoqnsfo.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A maneira mais √≥bvia era telefonar para todos no chat por v√≠deo. O primeiro que me veio √† mente foi o Zoom, mas eu geralmente tento n√£o captar de uma s√≥ vez o que estou ouvindo, mas procurar alternativas. Talvez eles tenham um √≥timo marketing e, mesmo que a ferramenta seja boa, provavelmente h√° algo mais. No chat, o AVstream falou v√°rias vezes sobre o TrueConf, decidi tentar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â importante dizer aqui que estamos na Crimeia e muitos servi√ßos populares n√£o funcionam aqui. Voc√™ precisa procurar, e muitas vezes as alternativas s√£o melhores. Por exemplo, em vez do Trello bloqueado, come√ßamos a usar o poderoso Planfix. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O TrueConf subornou imediatamente a capacidade de aumentar seu servidor. Em teoria, isso significaria que n√£o dependemos do aumento geral da carga nos datacenters durante o per√≠odo de auto-isolamento, sentamos silenciosamente em Sebastopol, conectamos principalmente usu√°rios locais e v√°rios de outras cidades, e tudo funciona de maneira est√°vel. Al√©m disso, o uso do servidor era mais lucrativo por dinheiro. E no caso de nossos clientes, tamb√©m foi dado de gra√ßa, uma vez que os organizadores da bola tinham NPOs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, testamos o produto e percebemos que ele nos conv√©m. </font><font style="vertical-align: inherit;">Embora eles n√£o tenham realizado a carga total de 35 pessoas nos testes, foi um pouco assustador como o computador antigo se comportaria como servidor. </font><font style="vertical-align: inherit;">Os requisitos do sistema s√£o bastante altos com essa carga; portanto, eles arrastaram um computador baseado no AMD Ryzen 7 2700, tornando-o mais silencioso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O servidor estava fisicamente localizado onde a bola foi transmitida. </font><font style="vertical-align: inherit;">O aplicativo principal para comunica√ß√£o por v√≠deo estava conectado na mesma rede que o servidor. </font><font style="vertical-align: inherit;">Isso aumentou a confian√ßa de que a imagem certamente chegaria ao servidor e, somente ent√£o, ficaria on-line para os outros participantes. </font><font style="vertical-align: inherit;">A prop√≥sito, a internet deve ser boa. </font><font style="vertical-align: inherit;">Para nossos 35 participantes, a velocidade de retorno atingiu 120 Mbit, ou seja, a Internet usual a 100 Mbit n√£o ser√° suficiente. </font><font style="vertical-align: inherit;">Em geral, o servidor est√° funcionando, vamos ao ar ...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sinal da c√¢mera</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qualquer bate-papo por v√≠deo oferece a escolha de uma webcam como fonte de imagem e um microfone para som. E se precisarmos obter uma c√¢mera de v√≠deo profissional e som de dois microfones com um fonograma? Em resumo, usamos o NDI. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tivemos que direcionar toda a transmiss√£o e transmiss√£o nas redes sociais. Para fazer isso, t√≠nhamos um computador principal no papel de um mini-TCP (est√∫dio de televis√£o m√≥vel). Todo o trabalho foi realizado usando o programa vMix. Este √© um software bastante poderoso para organizar transmiss√µes de v√°rios tipos e n√≠veis de complexidade.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kn/tt/rw/knttrwjaoeoay65nbb0nvwa2yac.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nosso casal de dan√ßa foi filmado por uma c√¢mera, simplesmente n√£o era mais necess√°rio. Capturamos o sinal da c√¢mera usando o cart√£o BlackMagic Intensity Pro interno. Na minha opini√£o, esta √© uma placa atual para capturar um sinal HDMI. Este sinal tamb√©m teve que ser enviado como uma webcam para o TrueConf. Voc√™ pode converter imediatamente o fluxo em uma webcam usando o vMix, mas n√£o deseja empilhar tudo em um computador. Portanto, um laptop separado foi usado para a liga√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como obter um sinal de uma c√¢mera em um laptop? Voc√™ pode criar um sinal de v√≠deo virtual em um computador e captur√°-lo em qualquer outro computador na rede local quantas vezes quiser. Esta √© a NDI (interface de dispositivo de rede). De fato, um tipo de cabo virtual que n√£o precisa ser administrado astuciosamente de nenhuma maneira especial. A largura de um fluxo para 1080p25 √© quase 100 Mbit, portanto, para opera√ß√£o est√°vel, voc√™ definitivamente precisa de uma rede de 1 Gbit ou Wi-Fi acima de 150 Mbit. Mas o cabo √© melhor. Pode haver muitos desses sinais NDI em uma rede local, se apenas a largura do canal for suficiente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, no computador principal do vMix, vemos o sinal da c√¢mera e o enviamos para a rede como um sinal NDI. </font><font style="vertical-align: inherit;">Em um discador de laptop, captamos esse sinal usando o programa NDI Virtual Input do pacote NDI Tools (√© gratuito). </font><font style="vertical-align: inherit;">Este miniprograma cria uma webcam virtual na qual voc√™ inclui o sinal NDI desejado. </font><font style="vertical-align: inherit;">De fato, tudo, nossa c√¢mera HDMI via NDI apareceu no TrueConf.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qual √© o som?</font></font></h2><br>
<img src="https://habrastorage.org/webt/5v/lc/ei/5vlceisfjup8w_keruygyoulnoy.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Coletamos o som de dois microfones de r√°dio e um fonograma usando um bom controle remoto de √°udio e inicializamos uma placa de √°udio externa no vMix. </font><font style="vertical-align: inherit;">√â essa soma de √°udio que enviamos ao ar e ao nosso fluxo NDI para o Trukonf. </font><font style="vertical-align: inherit;">L√°, em vez do microfone do laptop, selecionamos NewTek NDI Audio. </font><font style="vertical-align: inherit;">Agora, todos os nossos dan√ßarinos v√™em e ouvem em uma chamada nossa bela imagem e som de alta qualidade.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imagem et√©rea</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O TrueConf escolheu o modo usual de telefonar quando todos v√™em todos. </font><font style="vertical-align: inherit;">Havia outra op√ß√£o quando vemos todos, e todos v√™em apenas os l√≠deres. </font><font style="vertical-align: inherit;">Isso √© mais eficaz, mas n√£o haveria efeito de massa. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bh/gw/yt/bhgwyt231u4btanw1-gt4w7agza.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No formato de chamada "todo mundo v√™ todo mundo", voc√™ pode selecionar qualquer janela que precise ser ampliada. </font><font style="vertical-align: inherit;">Ent√£o, os participantes viram o casal principal e criamos outro usu√°rio de cuja conta a imagem foi transmitida e alternada entre os pares. </font><font style="vertical-align: inherit;">Clicamos no par desejado e ampliamos sua tela, os pares restantes eram pequenos abaixo. </font><font style="vertical-align: inherit;">√Äs vezes, todas as telas eram exibidas para mostrar quantas pessoas estavam dan√ßando em sincronia.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora sobre sincroniza√ß√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ provavelmente se perguntou sobre o atraso. Sim, ela tinha cerca de 1-2 segundos nas duas dire√ß√µes. Aqui tocamos m√∫sica, o som chega aos participantes depois, eles dan√ßam nesse ritmo e sua imagem retorna para n√≥s ainda mais tarde. Decidimos negligenciar isso dentro da estrutura do formato, e ainda assim parecia em grande escala e interessante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode resolver o problema de sincroniza√ß√£o para os espectadores adiando artificialmente o som em nosso ar para as redes sociais. Em seguida, o visualizador do stream v√™ os participantes dan√ßando ao ritmo da m√∫sica. Mas n√£o o fato de que a imagem vem de todos com o mesmo atraso. Esta √© outra complica√ß√£o do esquema √©ter, n√≥s definitivamente o faremos da pr√≥xima vez.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A prop√≥sito, no pacote NDI Tools, h√° outro miniprograma - Scan Converter. </font><font style="vertical-align: inherit;">Ele cria um sinal NDI, capturando sua tela ou webcam. </font><font style="vertical-align: inherit;">√â f√°cil organizar um √©ter, por exemplo, competi√ß√£o cibern√©tica dentro da rede local, possuindo apenas essa rede e webcams. </font><font style="vertical-align: inherit;">N√£o s√£o necess√°rios mais dispositivos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j_/qo/tk/j_qotkmfhackaibgynkxlzruylc.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para n√≥s, esse foi outro projeto em que foi necess√°rio experimentar novas solu√ß√µes em neg√≥cios que ainda n√£o foram encontradas em fluxos de batalha. </font><font style="vertical-align: inherit;">Ficarei feliz em responder a todos os seus coment√°rios, com cuidado e com interesse. Estudarei os desejos e recomenda√ß√µes, se voc√™ souber fazer melhor. </font><font style="vertical-align: inherit;">O mundo dos fluxos √© intermin√°vel, muitas tecnologias aparecem diante de nossos olhos e voc√™ pode aprender juntos mais rapidamente. </font><font style="vertical-align: inherit;">Abaixo voc√™ pode ver o v√≠deo de vis√£o geral do site.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/RemrkGwDP2g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt506338/index.html">Ouro contra o c√¢ncer: nanopart√≠culas de ouro biocompat√≠veis para oncoterapia individual recebida</a></li>
<li><a href="../pt506340/index.html">Como s√£o as novas salvaguardas da Amazon</a></li>
<li><a href="../pt506342/index.html">Como um sistema de automa√ß√£o resolve os problemas de um clube esportivo</a></li>
<li><a href="../pt506346/index.html">Milh√µes em um m√™s: como iniciar uma startup na Europa por conta pr√≥pria</a></li>
<li><a href="../pt506358/index.html">3 op√ß√µes de comportamento no tribunal quando recebem casos de bloqueios do Minist√©rio P√∫blico</a></li>
<li><a href="../pt506370/index.html">Compare o desempenho da verifica√ß√£o de restri√ß√£o e chave estrangeira no SQL Server</a></li>
<li><a href="../pt506372/index.html">O instinto de reprodu√ß√£o √© encontrado na intelig√™ncia artificial</a></li>
<li><a href="../pt506380/index.html">Software gratuito ou dom√©stico. Aulas padr√£o ou gratuitas</a></li>
<li><a href="../pt506384/index.html">Rede neural - treinamento sem professor. M√©todo do Gradiente de Pol√≠tica</a></li>
<li><a href="../pt506386/index.html">Como abandonar a escola e transferir uma crian√ßa para um local remoto</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>