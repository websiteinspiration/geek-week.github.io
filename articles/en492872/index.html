<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äçü§ù‚Äçüë®üèª üóÉÔ∏è üëåüèΩ How to organize remote access and not suffer from hackers üôá üö≥ üé§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When company management urgently requires all employees to be remotely accessed, security issues often recede into the background. As a result, attack...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How to organize remote access and not suffer from hackers</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jetinfosystems/blog/492872/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When company management urgently requires all employees to be remotely accessed, security issues often recede into the background. </font><font style="vertical-align: inherit;">As a result, attackers get an excellent field for activity.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/1y/an/da/1yanda56fvx-jkzcmxf6aa-sroa.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So what is needed and what cannot be done when organizing secure remote access to corporate resources? </font><font style="vertical-align: inherit;">We will talk about this in detail under the cut.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secure Resource Publishing</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Publish web resources through Web Application Firewall (in common people - WAF). </font><font style="vertical-align: inherit;">For quick deployment and basic protection, using standard </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OWASP Top 10</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> security profiles is sufficient </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">At first, you will have to tighten a lot of nuts in terms of catching false positive events. </font><font style="vertical-align: inherit;">If right now you do not have WAF - do not despair! </font><font style="vertical-align: inherit;">If you are testing some kind of trial version of WAF, try using it to solve this problem, or install the open-source solution Nginx + ModSecurity.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If WAF could not be used, then hurriedly (whenever possible) transfer the application to HTTPS, check all passwords (user, admin) for the published application for compliance with the password policy established by the company. Do not forget to check the operating systems and CMS for freshness, as well as the presence of all the necessary patches, in a word - sanitize all areas of the future public service. Expand Kali Linux and use the built-in set of utilities for scanning vulnerabilities, if there is no time for this, use one of the public vulnerability scanners (Detectify, ImmuniWeb, etc.).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What do not do? </font><font style="vertical-align: inherit;">Do not put on display on the Internet your wonderful self-made butt on HTTP, in which there may be thousands of vulnerabilities. </font><font style="vertical-align: inherit;">You do not need to set SSH access to the server or network equipment, if you do not want bruteforce to pour on you, and you do not need to directly publish RDP to the target stations (hello, esteemaudit). </font><font style="vertical-align: inherit;">If you have doubts about a specific application to which you need to provide access, place it behind a VPN.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPN</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We‚Äôve figured out the publication of resources, let's move on to services whose access to which we couldn‚Äôt publish. To do this, we need to organize a VPN. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What should be considered when organizing a VPN? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First of all, evaluate whether you can quickly deploy VPN client software in the workplace, or better use the Clientless approach. Do you have a VPN gateway or firewall with the ability to organize remote access? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If, for example, you have a Fortinet or Check Point firewall with any bundle (NGFW / NGTP / NGTX) on your network, congratulations, IPsec VPN functionality support is out of the box and you do not need to buy or install anything additional. All that remains is to put clients at workplaces and configure a firewall.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If right now you don‚Äôt have a VPN gateway or firewall, look towards open-source solutions (OpenVPN, SoftEther VPN, etc.) that can be deployed quite quickly on any server, fortunately, step-by-step guides in There is plenty of Internet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition, it is desirable that your VPN gateway integrates with AD / RADIUS for centralized account management. Also, do not forget to check the password policy and configure protection against brute force.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you decide to follow the path of installing the remote access client to users' workstations, you will need to decide which VPN mode to use: Full Tunnel or Split Tunnel. </font><font style="vertical-align: inherit;">If access for a particular group of users involves working with confidential or highly critical information, then I would recommend using Full Tunnel mode. </font><font style="vertical-align: inherit;">Thus, all traffic will be driven into the tunnel, Internet access for users can be arranged through a proxy, if desired, traffic can also be listened through DLP. </font><font style="vertical-align: inherit;">In other cases, you can restrict yourself to the usual Split Tunnel mode, in which traffic is routed into the tunnel only to the company's internal networks.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After successful user authentication, you should decide on the authorization: where to give users access, how and where to do it. </font><font style="vertical-align: inherit;">There are several options.</font></font><br>
<br>
<ol>
<li><b> .</b>   IP-   VPN-        ( ‚Äì   ).   ,       L4  ,        (  !),        IP-   .      NGFW       , -  AD    (           ),      .         VPN-   RADIUS            - .</li>
<li><b> .</b>     NGFW       ,    .     (,   MS RDS) ,   ,    .          (, FSSO TS).       IP-  ,              ,        NGFW.</li>
</ol><br>
<h3>   ‚Äì ?</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's move on to workplace safety. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Evaluate the security of remote users' workstations: do you give them workstations with a gold image installed with all the necessary security features (antivirus, host-based IPS / Sandbox, etc.), or do they sit from their home laptops with unknown software? If the answer to this question is home devices, then it would be better to drive traffic to NGFW with IDS / IPS after providing remote access, and ideally also to a network sandbox. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the good options is also to publish on VDI a specific application for work (browser, email client, etc.). This will allow access only to specific applications used.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If your company does not allow the connection of removable media, then in the case of remote access, you should not forget about this, limiting this option to freshly issued corporate laptops. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As usual, make sure that unsafe protocols and services are disabled, it will be useful to turn on disk encryption (what if your user goes to work in coworking and his corporate laptop is stolen?), Do not forget to select privileged access rights (if the laptop is corporate).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Authentication</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Use centralized account management with remote access (AD / RADIUS), and also remember to consider scenarios in which your Identity Store will be unavailable (for example, create additional local accounts). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is good practice to use client certificates, self-signed certificates can also be issued on Microsoft CA.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assume that due to unforeseen circumstances, your remote users are still stolen credentials. </font><font style="vertical-align: inherit;">Two-factor authentication will help to cope with this scourge (OTP push on mobile devices, SMS). </font><font style="vertical-align: inherit;">But I would not recommend two-factor authentication via corporate email (often for authentication with remote access the same accounts are used as in email, and, therefore, your second factor will be easy to pull out). </font><font style="vertical-align: inherit;">If you need to quickly organize two-factor authentication, you can look in the direction of public services - for example, Google Authenticator.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exploitation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consider how your IT department will operate remote workstations and help users solve everyday problems. Explicitly, remote support staff will need remote access to user workstations. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is advisable that the workstations ‚Äúspill over‚Äù from the golden image, and you do not have to try to restore the working computers of the employees due to the fact that they installed something wrong, or, what‚Äôs good, they caught some ransomware. It is better to give out corporate laptops with pre-known capacities and the composition of the installed software so as not to get a headache with home PCs of employees, because they can be used by children, the system may wildly slow them down or there may not be necessary protective equipment.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It will be useful to remind users before switching to remote work that the company has existing security policies: you never know how an ordinary user would like to relax during the lunch break at home.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Checklist: make sure you haven‚Äôt forgotten anything to make remote access secure </font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Publish the necessary web resources safely and wisely (use WAF, check passwords, check the freshness of the OS, CMS).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scan for vulnerabilities (using your own vulnerability scanners or public scanners).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Provide access to internal resources via VPN (do not expose RDP / SSH or applications with which data exchange within the network is not protected).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Publish specific applications through VDI (Citrix, VMware).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Set up two-factor authentication (OTP push on mobile devices, SMS).</font></font></li>
<li>          (          NGFW  ID FW    ).</li>
<li>         (,        ,    ,   ,    ).</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en492856/index.html">Covid19, Your society and you are from the point of view of Data Science. Translated article by Jeremy Howard and Rachel Thomas (fast.ai)</a></li>
<li><a href="../en492862/index.html">15 best Oracle APEX performance tuning tips for developers</a></li>
<li><a href="../en492864/index.html">Can I hack a ship?</a></li>
<li><a href="../en492866/index.html">The book "Machine Learning without words"</a></li>
<li><a href="../en492868/index.html">String optimization in ClickHouse. Yandex Report</a></li>
<li><a href="../en492874/index.html">Rendering optimization for Mobile</a></li>
<li><a href="../en492878/index.html">Geek slippers: looking for positive in temporary office closures</a></li>
<li><a href="../en492880/index.html">What should we build a smart home?</a></li>
<li><a href="../en492884/index.html">Receiving messages from youtube broadcasts + google authorization in PHP</a></li>
<li><a href="../en492886/index.html">Mass recruitment testers recipe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>