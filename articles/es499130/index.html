<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚óºÔ∏è üôáüèΩ üë©üèΩ‚Äçüöí BlockAdBlock Publicidad Ingenier√≠a inversa antibloqueo üôÄ üë®üèæ‚Äç‚öñÔ∏è üè™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Si usa bloqueadores de anuncios, puede encontrar BlockAdBlock . Este script detecta su bloqueador y no lo permite en el sitio hasta que lo desactive. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>BlockAdBlock Publicidad Ingenier√≠a inversa antibloqueo</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499130/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si usa bloqueadores de anuncios, puede encontrar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlockAdBlock</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Este script detecta su bloqueador y no lo permite en el sitio hasta que lo desactive. </font><font style="vertical-align: inherit;">Pero me preguntaba c√≥mo funciona. </font><font style="vertical-align: inherit;">¬øC√≥mo detecta los bloqueadores los anti-bloqueadores? </font><font style="vertical-align: inherit;">¬øY c√≥mo reaccionan los bloqueadores a esto y c√≥mo bloquean los anti-bloqueadores?</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Historia de la ingenier√≠a inversa.</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo primero que hice fue mirar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">su sitio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">BlockAdBlock ofrece un configurador con configuraciones: el intervalo de espera y c√≥mo se ver√° la advertencia, generando diferentes </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">versiones del</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> script. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto me hizo pensar en versiones. </font><font style="vertical-align: inherit;">¬øQu√© pasar√≠a si no pudiera ver una versi√≥n, y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">todas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a la vez? </font><font style="vertical-align: inherit;">As√≠ que lo hice. </font><font style="vertical-align: inherit;">Regres√© en el tiempo usando la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√°quina Wayback</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Despu√©s de eso, descargu√© todas las versiones de BlockAdBlock y las proces√©.</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lista de todas las versiones de BlockAdBlock, con sha1sum</font></font></h4><br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6d5eafab2ca816ccd049ad8f796358c0a7a43cf3 20151007203811.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
065b4aa813b219abbce76ad20a3216b3481b11bb 20151113115955.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d5dec97a775b2e563f3e4359e4f8f1c3645ba0e5 20160121132336.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8add06cbb79bc25114bd7a2083067ceea9fbb354 20160318193101.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8add06cbb79bc25114bd7a2083067ceea9fbb354 20160319042810.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8add06cbb79bc25114bd7a2083067ceea9fbb354 20160331051645.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8add06cbb79bc25114bd7a2083067ceea9fbb354 20160406061855.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8add06cbb79bc25114bd7a2083067ceea9fbb354 20160408025028.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
555637904dc9e4bfc6f08bdcae92f0ba0f443ebf 20160415083215.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20161120215354.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20170525201720.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20170606090847.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20170703211338.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20170707211652.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20170813090718.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20170915094808.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20171005180631.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20171019162109.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20171109101135.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20171127113945.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20171211042454.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20171227031408.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20180202000800.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20180412213253.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20180419060636.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20180530223228.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20180815042610.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20181029233809.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20181122190948.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20181122205748.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20190324081812.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20190420155244.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20190424200651.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20190903121933.js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d8986247cad3bbc2dd92c3a2a06ac1540da6b286 20200112084838.js</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seis</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> versiones difieren entre s√≠, y la √∫ltima de ellas se refiere a 2016, aunque algunos sitios todav√≠a usan BlockAdBlock. </font><font style="vertical-align: inherit;">Esto es genial, porque ser√° suficiente para nosotros aplicar ingenier√≠a inversa a la √∫nica versi√≥n, y luego invertir las diferencias. </font><font style="vertical-align: inherit;">Spoiler: veremos el desarrollo de ideas e incluso los restos del c√≥digo de depuraci√≥n. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Publiqu√©</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
todas las versiones </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Si desea ver diffs, en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">este repositorio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cada confirmaci√≥n es una nueva versi√≥n.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desempacando</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo del script no est√° minimizado, sino que est√° empaquetado por un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JS-packer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Dean Edwards con cambios cosm√©ticos y sin ninguna modificaci√≥n de la l√≥gica </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sup></a><a name="1_1"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">eval</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">p, a, c, k, e, d</span>) </span>{<font></font>
    e = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>) </span>{
        <span class="hljs-keyword">return</span> (c &lt; a ? <span class="hljs-string">''</span> : e(<span class="hljs-built_in">parseInt</span>(c / a))) + ((c = c % a) &gt; <span class="hljs-number">35</span> ? <span class="hljs-built_in">String</span>.fromCharCode(c + <span class="hljs-number">29</span>) : c.toString(<span class="hljs-number">36</span>))<font></font>
    };<font></font>
    <span class="hljs-keyword">if</span> (!<span class="hljs-string">''</span>.replace(<span class="hljs-regexp">/^/</span>, <span class="hljs-built_in">String</span>)) {
        <span class="hljs-keyword">while</span> (c--) {<font></font>
            d[e(c)] = k[c] || e(c)<font></font>
        }<font></font>
        k = [<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            <span class="hljs-keyword">return</span> d[e]<font></font>
        }];<font></font>
        e = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'\\w+'</span><font></font>
        };<font></font>
        c = <span class="hljs-number">1</span><font></font>
    };<font></font>
    <span class="hljs-keyword">while</span> (c--) {
        <span class="hljs-keyword">if</span> (k[c]) {<font></font>
            p = p.replace(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'\\b'</span> + e(c) + <span class="hljs-string">'\\b'</span>, <span class="hljs-string">'g'</span>), k[c])<font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> p<font></font>
}(<span class="hljs-string">'0.1("2 3 4 5 6 7 8\'d. 9, h? a b c d e f g");i j=\'a\'+\'k\'+\'e\'+\'l\'+\'n\'+\'m\'+\'e\';'</span>,<span class="hljs-number">24</span>,<span class="hljs-number">24</span>,
<span class="hljs-string">'console|log|This|code|will|get|unpacked|then|eval|Cool||||||||huh|let|you|w|s||o'</span>.split(<span class="hljs-string">'|'</span>),<span class="hljs-number">0</span>,{}))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afortunadamente, esto no es un problema para nosotros. </font><font style="vertical-align: inherit;">La debilidad del empacador es que todo el c√≥digo durante el desempaquetado se pasa a </font></font><code>eval()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Si reemplazamos </font></font><code>eval()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con algo as√≠ </font></font><code>console.log()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, de repente obtenemos todo el c√≥digo fuente, y el empacador es derrotado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sup></a><a name="2_2"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez hecho esto para cada versi√≥n, podemos examinar cada una de ellas y ver qu√© funciones se agregaron all√≠ con el tiempo.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1 :? </font><font style="vertical-align: inherit;">- Noviembre de 2015: gui√≥n inicial</font></font></h1><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo fuente</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Comencemos con un estudio </font></font><code>20151007203811.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">publicado alrededor de noviembre de 2015 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></sup></a><a name="3_3"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Aunque esta primera versi√≥n no bloquea muy bien los bloqueadores, le permite evaluar la arquitectura BlockAdBlock sin la basura que se ha acumulado a lo largo de los a√±os.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitectura</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tres oraciones:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlockAdBlock es un cierre que devuelve un objeto con tres funciones:</font></font><br>
<ul>
<li><code>bab()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pone el cebo y llama un cheque </font></font><code>check</code> <br>
</li>
<li><code>check()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> comprueba si el bloqueador ha bloqueado el cebo, causando </font></font><code>arm</code><br>
</li>
<li><code>arm()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cubrir</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El punto de entrada </font></font><code>bab()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comienza luego de un per√≠odo de tiempo especificado.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se generan tres funciones con argumentos que se establecen en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el configurador BlockAdBlock</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo se construye alrededor de un cierre asignado a un objeto global con un nombre aleatorio.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> randomID = <span class="hljs-string">''</span>,<font></font>
    e = <span class="hljs-string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">12</span>; i++) randomID += <font></font>
    e.charAt(<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * e.length));
<span class="hljs-keyword">var</span> setTimeoutDelay = <span class="hljs-number">7</span>; <span class="hljs-comment">// Delay after which to call BlockAdBlock</span>
<span class="hljs-built_in">window</span>[<span class="hljs-string">''</span> + randomID + <span class="hljs-string">''</span>] = ...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El autor proporcion√≥ una aleatorizaci√≥n exhaustiva para evitar el bloqueo est√°tico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, devuelve un objeto con tres funciones: </font></font><code>bab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>check</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>arm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">window</span>[<span class="hljs-string">''</span> + randomID + <span class="hljs-string">''</span>] = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> eid = ...<font></font>
    return {<font></font>
        <span class="hljs-attr">bab</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">check, passed_eid</span>) </span>{},
        <span class="hljs-attr">check</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">checkPredicate, unused</span>) </span>{},
        <span class="hljs-attr">arm</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{}<font></font>
    }<font></font>
})();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estos son mis propios nombres. </font><font style="vertical-align: inherit;">Todas las variables est√°n minimizadas, y algunas est√°n especialmente ofuscadas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se </font></font><code>bab()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">llama al </font><font style="vertical-align: inherit;">punto de entrada </font></font><code>setTimeout()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="javascript hljs">setTimeout(<span class="hljs-string">'window[\'\' + randomID + \'\'] \
.bab(window[\'\' + randomID + \'\'].check, \
     window[\'\' + randomID + \'\'].bab_elementid)'</span>, setTimeoutDelay * <span class="hljs-number">1000</span>)</code></pre><br>
<code>bab_elementid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No se utiliza en ninguna versi√≥n del c√≥digo. </font></font><code>setTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pasado como una cuerda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un cierre tiene variables externas. </font><font style="vertical-align: inherit;">Dos de ellos se usan para guardar el estado en un script:</font></font><br>
<br>
<ul>
<li><code>adblockDetected</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> igual a 1 si se detecta un bloqueador de anuncios.</font></font><br>
</li>
<li><code>nagMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Esta es una opci√≥n de configuraci√≥n. </font><font style="vertical-align: inherit;">Si est√° instalado, el script no bloquea el acceso a la p√°gina, sino que solo se enciende una vez.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otras variables para controlar la apariencia y el comportamiento se establecen en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configurador</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> eid = <span class="hljs-string">' ad_box'</span>, <span class="hljs-comment">// Name of the bait.</span>
    __u1 = <span class="hljs-number">1</span>, <span class="hljs-comment">// Unused.</span><font></font>
<font></font>
    <span class="hljs-comment">// Colors for the blockadblock prompt.</span>
    overlayColor = <span class="hljs-string">'#EEEEEE'</span>,<font></font>
    textColor = <span class="hljs-string">'#777777'</span>,<font></font>
    buttonBackgroundColor = <span class="hljs-string">'#adb8ff'</span>,<font></font>
    buttonColor = <span class="hljs-string">'#FFFFFF'</span>,<font></font>
<font></font>
    __u2 = <span class="hljs-string">''</span>, <span class="hljs-comment">// Unused.</span><font></font>
<font></font>
    <span class="hljs-comment">// Text to display when the blockadblock prompt is shown.</span>
    welcomeText = <span class="hljs-string">'Sorry for the interruption...'</span>,<font></font>
    primaryText = <span class="hljs-string">'It looks like you\'re using an ad blocker. That\'s okay.  Who doesn\'t?'</span>,<font></font>
    subtextText = <span class="hljs-string">'But without advertising-income, we can\'t keep making this site awesome.'</span>,<font></font>
    buttonText = <span class="hljs-string">'I understand, I have disabled my ad blocker.  Let me in!'</span>,<font></font>
<font></font>
    <span class="hljs-comment">// If 1, adblock was detected.</span>
    adblockDetected = <span class="hljs-number">0</span>,
    <span class="hljs-comment">// If 1, BlockAdBlock will only nag the visitor once, rather than block access.</span>
    nagMode = <span class="hljs-number">0</span>,<font></font>
<font></font>
    <span class="hljs-comment">// The blockadblock domain, reversed.</span>
    bab_domain = <span class="hljs-string">'moc.kcolbdakcolb'</span>;</code></pre><br>
<code>bab_domain</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> establecido aqu√≠ en un intento de ofuscar el dominio BlockAdBlock.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bab: crea un banner de se√±uelo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El m√©todo principal de trabajar con BlockAdBlock es crear "cebo" o "cebo" a partir de elementos publicitarios que parecen pancartas reales. </font><font style="vertical-align: inherit;">Luego verifica si su bloqueador ha bloqueado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto crea un se√±uelo: un div falso que finge ser un anuncio pero est√° oculto a la vista.</font></font><br>
<br>
<pre><code class="javascript hljs">bab: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">check, passed_eid</span>) </span>{
    <span class="hljs-comment">// Wait for the document to be ready.</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">document</span>.body == <span class="hljs-string">'undefined'</span>) {
        <span class="hljs-keyword">return</span><font></font>
    };<font></font>
<font></font>
    <span class="hljs-keyword">var</span> delay = <span class="hljs-string">'0.1'</span>, <font></font>
        passed_eid = eid ? eid : <span class="hljs-string">'banner_ad'</span>,<font></font>
        bait = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'DIV'</span>);<font></font>
        <font></font>
    bait.id = passed_eid;<font></font>
    bait.style.position = <span class="hljs-string">'absolute'</span>;<font></font>
    bait.style.left = <span class="hljs-string">'-999px'</span>;<font></font>
    bait.appendChild(<span class="hljs-built_in">document</span>.createTextNode(<span class="hljs-string">' '</span>));
    <span class="hljs-built_in">document</span>.body.appendChild(bait);<font></font>
    ...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aparentemente, est√° </font></font><code>passed_eid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destinado a configurar el identificador del cebo, pero no se utiliza. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, se verifica si el cebo ha sido eliminado por el bloque de anuncios.</font></font><br>
<br>
<pre><code class="javascript hljs">    ...<font></font>
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (bait) {<font></font>
            check((bait.clientHeight == <span class="hljs-number">0</span>), delay);<font></font>
            check((bait.clientWidth == <span class="hljs-number">0</span>), delay);<font></font>
            check((bait.display == <span class="hljs-string">'hidden'</span>), delay);<font></font>
            check((bait.visibility == <span class="hljs-string">'none'</span>), delay);<font></font>
            check((bait.opacity == <span class="hljs-number">0</span>), delay);<font></font>
            check((bait.left &lt; <span class="hljs-number">1000</span>), delay);<font></font>
            check((bait.top &lt; <span class="hljs-number">1000</span>), delay)<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
            check(<span class="hljs-literal">true</span>, delay)<font></font>
        }<font></font>
    }, <span class="hljs-number">125</span>)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el cebo ya no existe, el elemento se elimina (y comenzamos la superposici√≥n). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La funci√≥n </font></font><code>check</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">funcionar√° si </font></font><code>Predicate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">devuelve un valor </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y comienza </font></font><code>arm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="javascript hljs">check: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">checkPredicate, unused</span>) </span>{
    <span class="hljs-keyword">if</span> ((checkPredicate) &amp;&amp; (adblockDetected == <span class="hljs-number">0</span>)) {<font></font>
        adblockDetected = <span class="hljs-number">1</span>;
        <span class="hljs-built_in">window</span>[<span class="hljs-string">''</span> + randomID + <span class="hljs-string">''</span>].arm()<font></font>
    } <span class="hljs-keyword">else</span> {}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como la prueba se </font></font><code>check</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dispara varias veces, como se muestra arriba, se </font></font><code>adblockDetected</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">establece en la primera prueba correcta para evitar disparos repetidos </font></font><code>arm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modo gru√±ido</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El script tiene una funci√≥n llamada "modo molesto": en este modo, BlockAdBlock solo dir√° una vez para deshabilitar el bloqueador de anuncios, pero no lo bloquear√° cada vez que lo visite. </font><font style="vertical-align: inherit;">Esto se hace configurando el elemento </font></font><code>localStorage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en la primera visita. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si pudi√©ramos instalar este elemento nosotros mismos, ¬øpodr√≠amos desactivar el bloqueo para siempre? </font><font style="vertical-align: inherit;">Desafortunadamente, BlockAdBlock verifica de antemano si la secuencia de comandos se configur√≥ para modo molesto, por lo que este m√©todo no funcionar√° cuando funcione en modo predeterminado, es decir, con bloqueo de acceso.</font></font><br>
<br>
<pre><code class="javascript hljs">arm: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (nagMode == <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">var</span> babNag = sessionStorage.getItem(<span class="hljs-string">'babn'</span>);
        <span class="hljs-keyword">if</span> (babNag &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> <span class="hljs-comment">// Stop the script.</span>
        } <span class="hljs-keyword">else</span> {<font></font>
            sessionStorage.setItem(<span class="hljs-string">'babn'</span>, (<span class="hljs-built_in">Math</span>.random() + <span class="hljs-number">1</span>) * <span class="hljs-number">1000</span>)<font></font>
        }<font></font>
    };<font></font>
    ...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desafortunadamente, est√° </font></font><code>nagMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instalado en el configurador, y por defecto es igual </font></font><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlockAdBlock versi√≥n 1</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los bloqueadores de anuncios usan los llamados filtros: l√≠neas de c√≥digo que pueden bloquear solicitudes de red y ocultar elementos en la p√°gina. Al crear elementos de cebo, BlockAdBlock lanza espec√≠ficamente estos filtros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con esta defensa simple, BlockAdBlock es efectivo contra todos los principales bloqueadores de anuncios como uBlock Origin, AdBlock Plus y Ghostery. Para contrarrestar esto, debemos escribir nuestro propio filtro, que se activa solo en los sitios que ejecutan BlockAdBlock. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escribir filtros para un bloqueador es un</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> poco complicado. Necesitamos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un filtro de contenido</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que bloquee los elementos de la p√°gina generados despu√©s de la carga. Como el cebo tiene un identificador </font></font><code>banner_ad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, creamos una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">excepci√≥n para ocultar elementos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">marcado </font></font><code>#@#</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para todos los elementos </font></font><code>#</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con un identificador </font></font><code>banner_ad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y ponerlo en la lista de filtros de usuario de nuestro bloqueador. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El resultado es el siguiente:</font></font><br>
<br>
<pre><code class="javascript hljs">localhost#@# #banner_ad</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tengo localhost aqu√≠ para demostraci√≥n, puede reemplazarlo con su URL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto desactiva correctamente BlockAdBlock. </font><font style="vertical-align: inherit;">La soluci√≥n puede parecer simple, pero lleva mucho tiempo funcionando con √©xito en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la lista de filtros Anti-AdBlock-Killer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versi√≥n 2 (noviembre de 2015 - enero de 2016): varias mejoras</font></font></h1><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Diferencia de </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">c√≥digo fuente </font></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1 / v2</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Creaci√≥n de cebo: menos errores</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay un error sutil en la primera versi√≥n de crear el cebo: el div creado no tiene contenido, por lo que se genera un div con una altura de 0 y un ancho de 0. M√°s tarde, el c√≥digo verifica si el div se elimina al verificar su altura y ancho. </font><font style="vertical-align: inherit;">Pero como ten√≠a una altura cero, BlockAdBlock siempre funcion√≥ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></sup></a><a name="4_4"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se corrigi√≥ el error de un div vac√≠o.</font></font><br>
<br>
<pre><code class="javascript hljs">bab: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">...</span>) </span>{<font></font>
    bait = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'DIV'</span>);<font></font>
    ...<font></font>
    bait.appendChild(<span class="hljs-built_in">document</span>.createTextNode(<span class="hljs-string">'√Ç '</span>));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se crea un div hijo con alg√∫n contenido.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Detecci√≥n de bloqueadores a trav√©s de pancartas gr√°ficas falsas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este m√©todo, creamos una imagen falsa con un nombre aleatorio </font></font><code>doubleclick.net</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Los bloqueadores de anuncios bloquear√°n la imagen, pensando que es un banner publicitario. </font><font style="vertical-align: inherit;">Pero esto no requiere ning√∫n cambio en nuestro filtro.</font></font><br>
<br>
<pre><code class="javascript hljs">bab: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">...</span>) </span>{<font></font>
    bait = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'DIV'</span>);<font></font>
    bait.innerHTML = <span class="hljs-string">'&lt;img src="http://doubleclick.net/'</span> + randomStr() + <span class="hljs-string">'.jpg"&gt;'</span>;<font></font>
    ...</code></pre><br>
<code>randomStr()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">genera una cadena de longitud arbitraria. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otra diferencia notable fue el uso de un temporizador en </font></font><code>setInterval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lugar de una simple verificaci√≥n √∫nica para ver si hay un disparador instalado. </font><font style="vertical-align: inherit;">Vuelve a verificar si se muestra el banner gr√°fico y si no se cambia su atributo </font></font><code>src</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, verificando el contenido del cebo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuevo </font></font><code>setInterval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y verifique la disponibilidad de la imagen:</font></font><br>
<br>
<pre><code class="javascript hljs">    ...<font></font>
    checkCallback = setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (bait) {<font></font>
            check((bait.clientHeight == <span class="hljs-number">0</span>), delay);<font></font>
            check((bait.clientWidth == <span class="hljs-number">0</span>), delay);<font></font>
            check((bait.display == <span class="hljs-string">'hidden'</span>), delay);<font></font>
            check((bait.visibility == <span class="hljs-string">'none'</span>), delay);<font></font>
            check((bait.opacity == <span class="hljs-number">0</span>), delay);
            <span class="hljs-keyword">try</span> {<font></font>
                check((<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'banner_ad'</span>).innerHTML.indexOf(<span class="hljs-string">'click'</span>) == <span class="hljs-number">-1</span>), delay)<font></font>
            } <span class="hljs-keyword">catch</span> (e) {}<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
            check(<span class="hljs-literal">true</span>, delay)<font></font>
        }<font></font>
    }, <span class="hljs-number">1000</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPor qu√© </font></font><code>indexof ('click')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">Debido a la fuente de la imagen </font></font><code>src="doubleclick.net/abcdefg.jpg"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y verificamos si se conserva el fragmento de la cadena </font></font><code>click</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versi√≥n 3 (noviembre de 2015 - marzo de 2016): cebo generalizado</font></font></h1><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Diferencia de </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">c√≥digo fuente </font></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v2 / v3</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Creaci√≥n de cebo: identificadores aleatorios</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El √∫nico cambio en esta versi√≥n, aunque significativo, es la aparici√≥n de identificadores aleatorios para el cebo. </font><font style="vertical-align: inherit;">El nuevo identificador se toma de la lista de identificadores al cargar la p√°gina y se usa para el cebo, que ahora se coloca en el medio de la p√°gina. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una larga lista de identificadores aleatorios demuestra un buen conocimiento del √°rea tem√°tica.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> baitIDs = [
  <span class="hljs-string">"ad-left"</span>,
  <span class="hljs-string">"adBannerWrap"</span>,
  <span class="hljs-string">"ad-frame"</span>,
  <span class="hljs-string">"ad-header"</span>,
  <span class="hljs-string">"ad-img"</span>,
  <span class="hljs-string">"ad-inner"</span>,
  <span class="hljs-string">"ad-label"</span>,
  <span class="hljs-string">"ad-lb"</span>,
  <span class="hljs-string">"ad-footer"</span>,
  <span class="hljs-string">"ad-container"</span>,
  <span class="hljs-string">"ad-container-1"</span>,
  <span class="hljs-string">"ad-container-2"</span>,
  <span class="hljs-string">"Ad300x145"</span>,
  <span class="hljs-string">"Ad300x250"</span>,
  <span class="hljs-string">"Ad728x90"</span>,
  <span class="hljs-string">"AdArea"</span>,
  <span class="hljs-string">"AdFrame1"</span>,
  <span class="hljs-string">"AdFrame2"</span>,
  <span class="hljs-string">"AdFrame3"</span>,
  <span class="hljs-string">"AdFrame4"</span>,
  <span class="hljs-string">"AdLayer1"</span>,
  <span class="hljs-string">"AdLayer2"</span>,
  <span class="hljs-string">"Ads_google_01"</span>,
  <span class="hljs-string">"Ads_google_02"</span>,
  <span class="hljs-string">"Ads_google_03"</span>,
  <span class="hljs-string">"Ads_google_04"</span>,
  <span class="hljs-string">"DivAd"</span>,
  <span class="hljs-string">"DivAd1"</span>,
  <span class="hljs-string">"DivAd2"</span>,
  <span class="hljs-string">"DivAd3"</span>,
  <span class="hljs-string">"DivAdA"</span>,
  <span class="hljs-string">"DivAdB"</span>,
  <span class="hljs-string">"DivAdC"</span>,
  <span class="hljs-string">"AdImage"</span>,
  <span class="hljs-string">"AdDiv"</span>,
  <span class="hljs-string">"AdBox160"</span>,
  <span class="hljs-string">"AdContainer"</span>,
  <span class="hljs-string">"glinkswrapper"</span>,
  <span class="hljs-string">"adTeaser"</span>,
  <span class="hljs-string">"banner_ad"</span>,
  <span class="hljs-string">"adBanner"</span>,
  <span class="hljs-string">"adbanner"</span>,
  <span class="hljs-string">"adAd"</span>,
  <span class="hljs-string">"bannerad"</span>,
  <span class="hljs-string">" ad_box"</span>,
  <span class="hljs-string">" ad_channel"</span>,
  <span class="hljs-string">" adserver"</span>,
  <span class="hljs-string">" bannerid"</span>,
  <span class="hljs-string">"adslot"</span>,
  <span class="hljs-string">"popupad"</span>,
  <span class="hljs-string">"adsense"</span>,
  <span class="hljs-string">"google_ad"</span>,
  <span class="hljs-string">"outbrain-paid"</span>,
  <span class="hljs-string">"sponsored_link"</span>
];</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Generaci√≥n de identificaci√≥n aleatoria</font></font></h4><br>
<pre><code class="javascript hljs">    randomBaitID = baitIDs[ <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * baitIDs.length) ],<font></font>
    ...<font></font>
    var passed_eid = randomBaitID;<font></font>
    bait = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'DIV'</span>);    <font></font>
    bait.id = passed_eid;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como esto funciona en cada arranque, el identificador ser√° diferente cada vez.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlockAdBlock, pen√∫ltima versi√≥n</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BlockAdBlock explota el punto ciego de los bloqueadores de anuncios: si un filtro omite todos los identificadores anteriores, tambi√©n omitir√° los anuncios reales. Por lo tanto, BlockAdBlock </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obliga al bloqueador de anuncios a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> volverse </font><b><font style="vertical-align: inherit;">in√∫til</font></b><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En los bloqueadores, podemos ejecutar scripts arbitrarios antes de cargar la p√°gina. Puede intentar eliminar el objeto BlockAdBlock de antemano. Pero para esto necesitamos el nombre del objeto BlockAdBlock, que se aleatoriza cada vez que se inicia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
uBlock Origin tom√≥ un enfoque diferente. Dado que el c√≥digo es ejecutado por una funci√≥n </font></font><code>eval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, podemos definir nuestra propia funci√≥n </font></font><code>eval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que bloquear√° la ejecuci√≥n si encontramos BlockAdBlock. En JS, un objeto es capaz de esto </font></font><code>Proxy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: puede reemplazar cualquier propiedad y m√©todo en cualquier objeto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto se puede evitar al no pasar la carga √∫til inicial de BlockAdBlock </font></font><code>eval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sino al usarla directamente, por lo que tambi√©n representamos el punto de entrada: la llamada </font></font><code>setTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Como lo </font></font><code>setTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pasa una cadena, no una funci√≥n, verificamos esta cadena. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Implementaci√≥n en uBlock Origin ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fuente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> signatures = [<font></font>
    [ <span class="hljs-string">'blockadblock'</span> ],<font></font>
    [ <span class="hljs-string">'babasbm'</span> ],<font></font>
    [ <span class="hljs-regexp">/getItem\('babn'\)/</span> ],<font></font>
    [<font></font>
        <span class="hljs-string">'getElementById'</span>,
        <span class="hljs-string">'String.fromCharCode'</span>,
        <span class="hljs-string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'</span>,
        <span class="hljs-string">'charAt'</span>,
        <span class="hljs-string">'DOMContentLoaded'</span>,
        <span class="hljs-string">'AdBlock'</span>,
        <span class="hljs-string">'addEventListener'</span>,
        <span class="hljs-string">'doScroll'</span>,
        <span class="hljs-string">'fromCharCode'</span>,
        <span class="hljs-string">'&lt;&lt;2|r&gt;&gt;4'</span>,
        <span class="hljs-string">'sessionStorage'</span>,
        <span class="hljs-string">'clientWidth'</span>,
        <span class="hljs-string">'localStorage'</span>,
        <span class="hljs-string">'Math'</span>,
        <span class="hljs-string">'random'</span><font></font>
    ],<font></font>
];<font></font>
<span class="hljs-keyword">const</span> check = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) </span>{
    <span class="hljs-comment">// check for signature </span>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lista de firmas: definici√≥n de plantillas de c√≥digo. </font><font style="vertical-align: inherit;">La funci√≥n </font></font><code>check</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verifica la cadena despu√©s </font></font><code>eval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para el cumplimiento de estos patrones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delegue las</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> funciones </font></font><code>eval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>setTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">window</span>.eval = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Proxy</span>(<span class="hljs-built_in">window</span>.eval, {
    <span class="hljs-attr">apply</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">target, thisArg, args</span>) </span>{
        <span class="hljs-keyword">const</span> a = args[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> a !== <span class="hljs-string">'string'</span> || !check(a) ) {
            <span class="hljs-keyword">return</span> target.apply(thisArg, args);<font></font>
        } <font></font>
        <span class="hljs-comment">// BAB detected: clean up.</span>
        <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">document</span>.body ) {
            <span class="hljs-built_in">document</span>.body.style.removeProperty(<span class="hljs-string">'visibility'</span>);<font></font>
        }<font></font>
        <span class="hljs-keyword">let</span> el = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'babasbmsgx'</span>);
        <span class="hljs-keyword">if</span> ( el ) {<font></font>
            el.parentNode.removeChild(el);<font></font>
        }<font></font>
    }<font></font>
});<font></font>
<span class="hljs-built_in">window</span>.setTimeout = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Proxy</span>(<span class="hljs-built_in">window</span>.setTimeout, {
    <span class="hljs-attr">apply</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">target, thisArg, args</span>) </span>{
        <span class="hljs-keyword">const</span> a = args[<span class="hljs-number">0</span>];
        <span class="hljs-comment">// Check that the passed string is not the BAB entrypoint.</span>
        <span class="hljs-keyword">if</span> (
            <span class="hljs-keyword">typeof</span> a !== <span class="hljs-string">'string'</span> ||
            <span class="hljs-regexp">/\.bab_elementid.$/</span>.test(a) === <span class="hljs-literal">false</span><font></font>
        ) {<font></font>
            <span class="hljs-keyword">return</span> target.apply(thisArg, args);<font></font>
        }<font></font>
    }<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como ahora estamos usando un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scriptlet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un fragmento de c√≥digo personalizado especial ejecutado por el bloqueador, el filtro cambia un poco:</font></font><br>
<br>
<pre><code class="javascript hljs">localhost## +js(nobab)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No se inicia de manera predeterminada en todos los sitios por razones de rendimiento, por lo que debe asignarlo a cada sitio mediante un script.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versi√≥n 4 (enero de 2016 - abril de 2016): funciones experimentales</font></font></h1><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diferencia de </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">c√≥digo fuente </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">v3 / v4</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
El m√©todo descrito para bloquear los anti-bloqueadores se desarroll√≥ en enero de 2016, de acuerdo con la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">historia de los compromisos de uBlock Origin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y no ha cambiado conceptualmente desde su inicio. </font><font style="vertical-align: inherit;">BlockAdBlock nunca intent√≥ evitar este filtro cambiando su arquitectura. </font><font style="vertical-align: inherit;">En cambio, continu√≥ desarrollando nuevas caracter√≠sticas. </font><font style="vertical-align: inherit;">Y cuando vamos a la p√°gina BlockAdBlock, vemos una pesta√±a interesante: "¬øNecesita m√°s poder antibloqueo?" </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rs/0m/ea/rs0meawjau7ljt0-m6viiwoo4cq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aunque estos m√©todos de protecci√≥n est√°n disponibles solo a trav√©s de una pesta√±a especial, se incluyen en todos los scripts y se ejecutan a trav√©s de variables con los nombres correspondientes. </font><font style="vertical-align: inherit;">La cuarta versi√≥n implementa dos m√©todos:</font></font><br>
<br>
<ul>
<li><code>aDefOne</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, "Protecci√≥n espec√≠fica para sitios adsense"</font></font><br>
</li>
<li><code>aDefTwo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, "Caracter√≠stica de seguridad especial"</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comentarios de depuraci√≥n aleatorios</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de despedirme, debo mencionar una cosa m√°s. </font><font style="vertical-align: inherit;">En el proceso de ingenier√≠a inversa, una funci√≥n me llam√≥ la atenci√≥n: ¬° </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depuraci√≥n </font></font><code>console.log()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">directamente en el c√≥digo!</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">consolelog</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-comment">// "Dev mode" check: developpers of BAB must set window.consolelog to 1.</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.consolelog == <span class="hljs-number">1</span>) {
        <span class="hljs-built_in">console</span>.log(e)<font></font>
    }<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto solo se hace si se establece global </font></font><code>consolelog</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, por ejemplo </font></font><code>window.consolelog = 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los comentarios de depuraci√≥n solo est√°n disponibles en esta versi√≥n. </font><font style="vertical-align: inherit;">Si no hubiera revertido todas las versiones, nunca las habr√≠a notado. </font><font style="vertical-align: inherit;">Proporcionan informaci√≥n valiosa sobre c√≥mo funciona el c√≥digo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seguridad avanzada: AdSense</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos estos m√©todos de protecci√≥n especiales est√°n codificados en </font></font><code>check</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, no en </font></font><code>arm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, como sugiere la arquitectura. </font><font style="vertical-align: inherit;">Quiz√°s un nuevo desarrollador que no est√© familiarizado con el c√≥digo base haya comenzado a trabajar en el producto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si AdSense est√° activo en la p√°gina, buscamos anuncios. </font><font style="vertical-align: inherit;">Si desaparecieron debido a un bloqueador, BlockAdBlock se activa.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">check</span>(<span class="hljs-params"></span>) </span>{<font></font>
    ...<font></font>
    var q = <span class="hljs-string">'ins.adsbygoogle'</span>,
        <span class="hljs-comment">// Selects all Google ads in the document.</span>
        adsbygoogleQuery = <span class="hljs-built_in">document</span>.querySelector(q);<font></font>
<font></font>
    <span class="hljs-keyword">if</span> ((adsbygoogleQuery) &amp;&amp; (adblockDetected == <span class="hljs-number">0</span>)) {
        <span class="hljs-comment">// Ads are not blocked, since the bait ad is still there,</span>
        <span class="hljs-comment">// and adblockDetected hasn't been set</span>
        <span class="hljs-keyword">if</span> (aDefOne == <span class="hljs-string">'yes'</span>) {<font></font>
            consolelog(<span class="hljs-string">'case2: standard bait says ads are NOT blocked.'</span>);
            <span class="hljs-keyword">var</span> adsbygoogle = <span class="hljs-string">'//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js'</span>;
            <span class="hljs-keyword">if</span> (scriptExists(adsbygoogle)) {<font></font>
                consolelog(<span class="hljs-string">'case2: And Adsense pre-exists.'</span>);
                <span class="hljs-keyword">if</span> (adsbygoogleQuery.innerHTML.replace(<span class="hljs-regexp">/\s/g</span>, <span class="hljs-string">''</span>).length == <span class="hljs-number">0</span>) {
                    <span class="hljs-comment">// The ad's content was cleared, so...</span>
                    consolelog(<span class="hljs-string">'case2: Ads are blocked.'</span>);
                    <span class="hljs-built_in">window</span>[<span class="hljs-string">''</span> + randomID + <span class="hljs-string">''</span>].arm()<font></font>
                }<font></font>
            }<font></font>
        };<font></font>
        adblockDetected = <span class="hljs-number">1</span><font></font>
    }<font></font>
    ...</code></pre><br>
<code>scriptExists</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">busca en la p√°gina completa un script con una URL dada. </font><font style="vertical-align: inherit;">En este caso, el script de AdSense </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></sup></a><a name="5_5"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La URL de la secuencia de comandos se compara con todas las secuencias de comandos de la p√°gina. </font><font style="vertical-align: inherit;">Por alguna raz√≥n, la URL se trunca a 15 caracteres.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scriptExists</span>(<span class="hljs-params">href</span>) </span>{
    <span class="hljs-keyword">if</span> (href) href = href.substr(href.length - <span class="hljs-number">15</span>);
    <span class="hljs-keyword">var</span> scripts = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'script'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = scripts.length; i--;) {
        <span class="hljs-keyword">var</span> src = <span class="hljs-built_in">String</span>(scripts[i].src);
        <span class="hljs-keyword">if</span> (src) src = src.substr(src.length - <span class="hljs-number">15</span>);
        <span class="hljs-keyword">if</span> (src === href) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><font></font>
    };<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
};</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protecci√≥n avanzada: elemento especial</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A diferencia del primero, este m√©todo va acompa√±ado de un descargo de responsabilidad: "Realice una prueba despu√©s de la instalaci√≥n para garantizar la compatibilidad con su sitio". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta protecci√≥n especial solo funciona si no se encuentra un bloqueador y no hay un script de AdSense en la p√°gina. </font><font style="vertical-align: inherit;">Aqu√≠ est√° el fragmento de c√≥digo relevante </font></font><code>check</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs">check: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">checkPredicate, unused</span>) </span>{
    <span class="hljs-keyword">if</span> ((checkPredicate) &amp;&amp; (adblockDetected == <span class="hljs-number">0</span>)) {
        <span class="hljs-comment">// Adblocker detected, arm</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">var</span> q = <span class="hljs-string">'ins.adsbygoogle'</span>,<font></font>
            adsbygoogleQuery = <span class="hljs-built_in">document</span>.querySelector(q);<font></font>
<font></font>
        <span class="hljs-keyword">if</span> ((adsbygoogleQuery) &amp;&amp; (adblockDetected == <span class="hljs-number">0</span>)) {
            <span class="hljs-keyword">if</span> (aDefOne == <span class="hljs-string">'yes'</span>) {
                <span class="hljs-comment">// Special defense one: AdSense defense (see above)</span><font></font>
            };<font></font>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (adblockDetected == <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">if</span> (aDefTwo == <span class="hljs-string">'yes'</span>) {
                    <span class="hljs-comment">// Special defense two: Special element defense</span><font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El m√©todo supone que los propietarios de sitios usan solo AdSense: si no existe un script de AdSense, entonces algo est√° mal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPor qu√© hubo una advertencia? </font><font style="vertical-align: inherit;">Este m√©todo intenta habilitar el script de AdSense. </font><font style="vertical-align: inherit;">Si no se carga, lo m√°s probable es que el bloqueador haya bloqueado la solicitud de red, por lo tanto, se activa BlockAdBlock. </font><font style="vertical-align: inherit;">Pero esto puede arruinar algunos sitios, de ah√≠ la advertencia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si AdSense no se ha cargado, se inicia la superposici√≥n.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (aDefTwo == <span class="hljs-string">'yes'</span>) {
    <span class="hljs-comment">/* Add Google ad code to head.
        If it errors, the adblocker must have blocked the connection. */</span>
    <span class="hljs-keyword">var</span> googleAdCode = <span class="hljs-string">'//static.doubleclick.net/instream/ad_status.js'</span>;<font></font>
    consolelog(<span class="hljs-string">'case3: standard bait says ads are NOT blocked. Maybe ???\
      No Adsense is found. Attempting to add Google ad code to head...'</span>);
    <span class="hljs-keyword">var</span> script = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'script'</span>);<font></font>
    script.setAttribute(<span class="hljs-string">'type'</span>, <span class="hljs-string">'text/javascript'</span>);<font></font>
    script.setAttribute(<span class="hljs-string">'src'</span>, googleAdCode);<font></font>
    script.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">window</span>[<span class="hljs-string">''</span> + randomID + <span class="hljs-string">''</span>].arm()<font></font>
    };<font></font>
    adblockDetected = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (!scriptExists(googleAdCode)) {
        <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'head'</span>)[<span class="hljs-number">0</span>].appendChild(script)<font></font>
    };<font></font>
    adsbygoogleQuery = <span class="hljs-number">0</span>;
    <span class="hljs-built_in">window</span>[<span class="hljs-string">''</span> + randomID + <span class="hljs-string">''</span>].check = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span><font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando ocurre una falla a nivel de red, funciona </font></font><code>onerror</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, como con un bloqueador de anuncios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, la mayor√≠a de los bloqueadores de anuncios responden a esto y bloquean la solicitud. </font><font style="vertical-align: inherit;">Pero hay un bloqueador que a√∫n no he mencionado. </font><font style="vertical-align: inherit;">Habla sobre el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">navegador Brave</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Respuesta valiente del navegador</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasta ahora, hemos estado estudiando c√≥mo se detecta el antibloqueo en uBlock Origin. </font><font style="vertical-align: inherit;">Y funciona, solo se requiere un filtro espec√≠fico para cada sitio donde est√° instalado BlockAdBlock. </font><font style="vertical-align: inherit;">El navegador Brave es impresionante porque detecta y omite BlockAdBlock de todas las versiones sin ninguna acci√≥n necesaria por parte del usuario. </font><font style="vertical-align: inherit;">Para hacer esto, falsifica la solicitud directamente en la capa de red </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></sup></a><a name="6_6"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En lugar de bloquear la solicitud, </font></font><code>ad_status.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la omite, pero </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">carga Google Ads falsos de 0 bytes de tama√±o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Este truco enga√±oso enga√±a a BlockAdBlock, porque </font></font><code>onerror</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solo funciona si la solicitud de red falla.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/2e/45/s7/2e45s7wv2nv9licuzwesiao2tkm.png"></div><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versi√≥n 5 (marzo de 2016 - noviembre de 2016)</font></font></h1><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Diferencia de </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">c√≥digo fuente </font></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v4 / v5</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protecci√≥n avanzada: favicons de spam</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El √∫nico cambio en esta versi√≥n es que la segunda protecci√≥n extendida se reescribi√≥, aunque todav√≠a se adhiere al mismo principio b√°sico: verificar las solicitudes de red que ser√°n bloqueadas por el bloqueador. </font><font style="vertical-align: inherit;">Pero ahora se est√°n cargando favicons en lugar de AdSense. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Valiente evade este ataque de la misma manera. </font><font style="vertical-align: inherit;">No bloquea las solicitudes, pero crea im√°genes falsas 1 √ó 1.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (aDefTwo == <span class="hljs-string">'yes'</span>) {
    <span class="hljs-keyword">if</span> (! <span class="hljs-built_in">window</span>[<span class="hljs-string">''</span> + randomID + <span class="hljs-string">''</span>].ranAlready) {/
        <span class="hljs-keyword">var</span> favicons = [
            <span class="hljs-string">"//www.google.com/adsense/start/images/favicon.ico"</span>,
            <span class="hljs-string">"//www.gstatic.com/adx/doubleclick.ico"</span>,
            <span class="hljs-string">"//advertising.yahoo.com/favicon.ico"</span>,
            <span class="hljs-string">"//ads.twitter.com/favicon.ico"</span>,
            <span class="hljs-string">"//www.doubleclickbygoogle.com/favicon.ico"</span><font></font>
            ],<font></font>
            len = favicons.length,<font></font>
            img = favicons[<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * len)],<font></font>
        ...<font></font>
        baitImages(<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">2</span>) + <span class="hljs-number">1</span>); <span class="hljs-comment">// creates bait images</span>
        <span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Image();<font></font>
        m.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
            baitImages(<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">2</span>) + <span class="hljs-number">1</span>);<font></font>
            c.src = imgCopy;<font></font>
            baitImages(<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">2</span>) + <span class="hljs-number">1</span>)<font></font>
        };<font></font>
        c.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
            adblockDetected = <span class="hljs-number">1</span>;<font></font>
            baitImages(<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">3</span>) + <span class="hljs-number">1</span>);
            <span class="hljs-built_in">window</span>[<span class="hljs-string">''</span> + randomID + <span class="hljs-string">''</span>].arm()<font></font>
        };<font></font>
        m.src = img;<font></font>
        baitImages(<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">3</span>) + <span class="hljs-number">1</span>);
        <span class="hljs-built_in">window</span>[<span class="hljs-string">''</span> + randomID + <span class="hljs-string">''</span>].ranAlready = <span class="hljs-literal">true</span><font></font>
    };<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La funci√≥n </font></font><code>baitImages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se puede llamar con frecuencia, con un n√∫mero aleatorio de im√°genes, para evitar bloqueadores est√°ticos.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versi√≥n 6 (abril de 2016 - noviembre de 2016): Brave lock</font></font></h1><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diferencia de </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">c√≥digo fuente </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">v5 / v6</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Los m√©todos BlockAdBlock, aunque simples a primera vista, gradualmente se volvieron m√°s complejos y m√°s eficientes. </font><font style="vertical-align: inherit;">Pero el √∫ltimo enemigo invicto permaneci√≥: el navegador Brave.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protecci√≥n avanzada: definici√≥n de un falso icono</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPor qu√© BlockAdBlock cambi√≥ de intentar cargar un script para cargar im√°genes (favicons)? </font><font style="vertical-align: inherit;">La respuesta est√° en el c√≥digo que se agrega a la protecci√≥n a trav√©s de favicons de spam y que se activa contra la protecci√≥n de Brave. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verificando la respuesta para una imagen falsa:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (aDefTwo == <span class="hljs-string">'yes'</span>) {<font></font>
    baitImages(<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">3</span>) + <span class="hljs-number">1</span>);
    <span class="hljs-comment">// earlier favicon code...</span>
    <span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Image();
    <span class="hljs-keyword">if</span> ((aDefThree % <span class="hljs-number">3</span>) == <span class="hljs-number">0</span>) {<font></font>
        m.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> ((m.width &lt; <span class="hljs-number">8</span>) &amp;&amp; (m.width &gt; <span class="hljs-number">0</span>)) {
                <span class="hljs-built_in">window</span>[<span class="hljs-string">''</span> + randomID + <span class="hljs-string">''</span>].arm()<font></font>
            }<font></font>
        }<font></font>
    };<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el tama√±o del favicon es inferior a 8 √ó 8, entonces esto es probablemente falso del navegador Brave. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con este truco, BlockAdBlock evita el disfraz de Brave y otros bloqueadores que ejecutan este c√≥digo (la mayor√≠a, como uBlock Origin, lo bloquea primero). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de esta actualizaci√≥n, a fines de noviembre de 2016, BlockAdBlock desapareci√≥ de Internet. </font><font style="vertical-align: inherit;">Aunque sus "m√©todos de seguridad avanzados" funcionan, nunca se han activado para la mayor√≠a de los usuarios. </font><font style="vertical-align: inherit;">Esta fue la √∫ltima actualizaci√≥n. </font><font style="vertical-align: inherit;">La √∫ltima publicaci√≥n en Twitter y en el sitio se public√≥ en alg√∫n lugar a fines de 2017. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, el legado de BlockAdBlock sigue vivo. </font><font style="vertical-align: inherit;">Aunque es trivial bloquearlo en estos d√≠as, algunos sitios modernos todav√≠a usan este script.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQui√©n ganar√° la carrera armamentista entre los bloqueadores de anuncios y los antibloqueadores que bloquean los bloqueadores de anuncios? S√≥lo el tiempo dir√°. A medida que se desarrolle la carrera armamentista, los antibloqueadores tendr√°n que usar m√©todos m√°s sofisticados y c√≥digos especiales, como lo demuestra la evoluci√≥n de BlockAdBlock. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por otro lado, los bloqueadores tienen la ventaja de sistemas estables y potentes herramientas de filtrado a trav√©s de listas de filtros, as√≠ como acceso a JavaScript. Con dicho sistema, es suficiente que una persona entienda c√≥mo vencer al enemigo y actualice la lista de filtros con nuevos sitios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al analizar la evoluci√≥n de BlockAdBlock, as√≠ como las diversas respuestas de los bloqueadores de anuncios, pudimos pintar una imagen de una peque√±a guerra entre BlockAdBlock y los bloqueadores. En el proceso, aprendimos qu√© m√©todos se usan en las hostilidades.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mi c√≥digo de ingenier√≠a inversa se </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">publica en GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Gracias por leer.</font></font><br>
<br>
<hr><br>
<a name="1"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Si desea tener una idea de c√≥mo funciona esto, intente pegar el siguiente ejemplo en la consola JS y luego mire el c√≥digo. </font><font style="vertical-align: inherit;">Si est√° interesado en su funcionamiento interno, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠ est√° el c√≥digo fuente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ô∏é </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[volver]</font></font></a><br>
<br>
<a name="2"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. ¬øNo lo crees? </font><font style="vertical-align: inherit;">Intenta cambiar </font></font><code>eval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font><code>console.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en la primera l√≠nea. </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[regresar]</font></font></a><br>
<br>
<a name="3"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. La marca de tiempo dice </font></font><code>201510</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, entonces quiz√°s octubre. </font><font style="vertical-align: inherit;">Pero no sabemos cu√°ndo cambi√≥ el gui√≥n. </font><font style="vertical-align: inherit;">Todo lo que sabemos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015-10, se guard√≥ una versi√≥n: </font></font><code>20151007203811.js</code><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015-11 hay una nueva versi√≥n: </font></font><code>20151113115955.js</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasta donde sabemos, el script podr√≠a cambiarse el d√≠a anterior a la segunda marca de tiempo. </font><font style="vertical-align: inherit;">Por lo tanto, me acerco conservadoramente a las citas. </font><font style="vertical-align: inherit;">Ô∏é </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[volver]</font></font></a><br>
<br>
<a name="4"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Durante la correcci√≥n de este error se desarrollaron pruebas para v1. </font><font style="vertical-align: inherit;">Ô∏é </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[volver]</font></font></a><br>
<br>
<a name="5"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Gracias a McStroyer en Reddit, que llam√≥ la atenci√≥n sobre esto. </font><font style="vertical-align: inherit;">Ô∏é </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[volver]</font></font></a><br>
<br>
<a name="6"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. El componente bloqueador de anuncios Brave est√° abierto, por lo que podemos ver el c√≥digo fuente para tener una idea de c√≥mo funciona.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El m√©todo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ResourceTypeToString</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eval√∫a qu√© recurso se est√° interceptando.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El valiente bloqueador de anuncios en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DoesStartRequest</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verifica </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si el recurso capturado coincide con la regla de bloqueo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si es apropiado, devuelve un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recurso falso</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> basado en un tipo de recurso anterior e informa una solicitud "exitosa".</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gracias a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fran√ßois Marie</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por se√±alar el c√≥digo fuente de Brave. </font><font style="vertical-align: inherit;">Ô∏é </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[volver]</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es499118/index.html">C√≥mo crear un video viral</a></li>
<li><a href="../es499120/index.html">[Marcador] CSS: uso de sangr√≠a y sangr√≠a</a></li>
<li><a href="../es499122/index.html">C√≥mo organizar el trabajo en condiciones siempre cambiantes: los cursos gratuitos contra la crisis de Aktion</a></li>
<li><a href="../es499126/index.html">Coraz√≥n del desarrollador: Devkits de Sony PlayStation 1</a></li>
<li><a href="../es499128/index.html">Presentamos la √∫ltima versi√≥n preliminar de Windows Terminal - 0.11</a></li>
<li><a href="../es499134/index.html">4 pasos para aumentar el producto LTV a trav√©s de la comunicaci√≥n del usuario</a></li>
<li><a href="../es499136/index.html">#BeeFree, o ... Beeline - ¬øno pudiste resistirte?</a></li>
<li><a href="../es499138/index.html">Clasificaci√≥n topol√≥gica</a></li>
<li><a href="../es499140/index.html">Generaci√≥n bajo control: c√≥mo frenar modelos de lenguaje potentes</a></li>
<li><a href="../es499146/index.html">Una manera f√°cil de proteger tu Mikrotik de los ataques</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>