<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¾â€ğŸ’» ğŸ‘©ğŸ¿â€ğŸ”¬ ğŸš´ğŸ¾ å°„çº¿æŠ•å°„è§†è§‰æœç´¢ï¼ˆRCVSï¼‰ã€‚æŸ¥æ‰¾å‡ ä½•å½¢çŠ¶ç›¸ä¼¼çš„3Dæ¨¡å‹çš„ç®€å•å¿«é€Ÿç®—æ³• ğŸ‰ ğŸ•¤ ğŸ§‘ğŸ¾â€ğŸ¤â€ğŸ§‘ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¯¹æˆ‘æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªæ¨¡å‹éå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯å®ƒä»¬æ²¡æœ‰æ˜æ˜¾çš„ç‰¹å¾å¯ç”¨æ¥è¡¡é‡å®ƒä»¬çš„ç›¸ä¼¼æ€§ã€‚è¿™äº›æ¨¡å‹å…·æœ‰ä¸åŒæ•°é‡çš„é¡¶ç‚¹ï¼Œè¾¹å’Œå¤šè¾¹å½¢ï¼Œå®ƒä»¬çš„å¤§å°ä¸åŒï¼Œé™¤äº†å®ƒä»¬åœ¨ç©ºé—´ä¸Šçš„æ—‹è½¬ä¸åŒä¹‹å¤–ï¼Œè€Œä¸”å®ƒä»¬å…·æœ‰ç›¸åŒçš„å˜æ¢ï¼ˆä½ç½®= [0,0,0]ï¼Œå¼§åº¦çš„æ—‹è½¬= [0,0ï¼Œ 0]ï¼Œæ¯”ä¾‹= [1,1,1]ï¼‰ã€‚å¦‚ä½•ç¡®å®šå®ƒä»¬çš„ç›¸ä¼¼æ€§ï¼Ÿ
 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>å°„çº¿æŠ•å°„è§†è§‰æœç´¢ï¼ˆRCVSï¼‰ã€‚æŸ¥æ‰¾å‡ ä½•å½¢çŠ¶ç›¸ä¼¼çš„3Dæ¨¡å‹çš„ç®€å•å¿«é€Ÿç®—æ³•</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490760/"><img src="https://habrastorage.org/webt/u2/8i/fw/u28ifwuqbqnlhhiwwldggmtayp4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹æˆ‘æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªæ¨¡å‹éå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯å®ƒä»¬æ²¡æœ‰æ˜æ˜¾çš„ç‰¹å¾å¯ç”¨æ¥è¡¡é‡å®ƒä»¬çš„ç›¸ä¼¼æ€§ã€‚è¿™äº›æ¨¡å‹å…·æœ‰ä¸åŒæ•°é‡çš„é¡¶ç‚¹ï¼Œè¾¹å’Œå¤šè¾¹å½¢ï¼Œå®ƒä»¬çš„å¤§å°ä¸åŒï¼Œé™¤äº†å®ƒä»¬åœ¨ç©ºé—´ä¸Šçš„æ—‹è½¬ä¸åŒä¹‹å¤–ï¼Œè€Œä¸”å®ƒä»¬å…·æœ‰ç›¸åŒçš„å˜æ¢ï¼ˆä½ç½®= [0,0,0]ï¼Œå¼§åº¦çš„æ—‹è½¬= [0,0ï¼Œ 0]ï¼Œæ¯”ä¾‹= [1,1,1]ï¼‰ã€‚å¦‚ä½•ç¡®å®šå®ƒä»¬çš„ç›¸ä¼¼æ€§ï¼Ÿ</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœè¿™äº›æ¨¡å‹åœ¨ç©ºé—´ä¸Šå‡ç­‰åœ°å®šä½ï¼Œåˆ™å¯ä»¥å°†å®ƒä»¬ç¼©å°ä¸ºè¾¹ç•Œæ¡†çš„æ•´ä½“å¤§å°ï¼Œå°†å±€éƒ¨åæ ‡çš„åŸç‚¹ç§»åŠ¨åˆ°å…¶ä¸­å¿ƒï¼Œç”Ÿæˆä½“ç´ è§†å›¾å¹¶æ¯”è¾ƒä½“ç´ åˆ—è¡¨ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/hk/m7/hxhkm7cupsn8fts2jgjmpmqmg3o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çŒ´å­åŠå…¶ä½“ç´ ã€‚</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å¦‚æœè¿™äº›æ¨¡å‹æ²¿åæ ‡è½´ä»»æ„å®šå‘ï¼Œåˆ™ä¹Ÿå¯ä»¥å°†å®ƒä»¬ç¼©å°ä¸ºè¾¹ç•Œæ¡†çš„æ•´ä½“å¤§å°ï¼Œå°†å±€éƒ¨åæ ‡çš„åŸç‚¹ç§»åŠ¨åˆ°å…¶ä¸­å¿ƒï¼Œç„¶ååœ¨å…­ä¸ªä¾§é¢è¿›è¡Œæ¸²æŸ“ï¼Œå¹¶æ¯”è¾ƒå®ƒä»¬ä¹‹é—´çš„å›¾åƒé›†ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1o/t1/g0/1ot1g00gyan9sroahuclx20bbo0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¡¨é¢æ›²ç‡çš„æ¸²æŸ“ã€‚</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä¸ºäº†å®ç°æ—‹è½¬ä¸å˜æ€§ï¼Œæˆ‘å†³å®šè½¬å‘çƒåæ ‡ç³»ã€‚</font></font><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>r</mi><mo>=</mo><msqrt><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup></msqrt></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.895ex" height="4.634ex" viewBox="0 -1347.5 8135.3 1995.3" role="img" focusable="false" style="vertical-align: -1.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJMATHI-72" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJMAIN-3D" x="729" y="0"></use><g transform="translate(1785,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJSZ2-221A" x="0" y="65"></use><rect stroke="none" width="5349" height="60" x="1000" y="1156"></rect><g transform="translate(1000,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJMAIN-32" x="809" y="583"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJMAIN-2B" x="1248" y="0"></use><g transform="translate(2249,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJMAIN-32" x="706" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJMAIN-2B" x="3425" y="0"></use><g transform="translate(4425,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJMATHI-7A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJMAIN-32" x="663" y="583"></use></g></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>r</mi><mo>=</mo><msqrt><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup></msqrt></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1">r = \sqrt{x^2+y^2+z^2}</script></p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é¦–å…ˆï¼Œæˆ‘è®¡ç®—äº†ä»åŸç‚¹åˆ°ä½“ç´ çš„è·ç¦»ï¼Œåœ¨æœ‰åºåˆ—è¡¨ä¸­æ”¶é›†äº†è¿™äº›è·ç¦»ï¼Œå¹¶æ¯”è¾ƒäº†è¿™äº›åˆ—è¡¨ã€‚</font><font style="vertical-align: inherit;">è¿™äº§ç”Ÿäº†è‰¯å¥½çš„ç»“æœï¼Œä½†æ˜¯èŠ±äº†å¾ˆé•¿æ—¶é—´æ‰èƒ½å°†ä½“ç´ å½¢å¼è½¬æ¢ä¸ºè¶³å¤Ÿçš„åˆ†è¾¨ç‡å¹¶æ¯”è¾ƒå¤§åˆ—è¡¨ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RCVSçš„ç®€çŸ­è¯´æ˜</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»£æ›¿ä½“ç´ åŒ–å’Œæ¸²æŸ“ï¼Œæˆ‘çš„æ–¹æ³•ä½¿ç”¨Ray Castingã€‚</font><font style="vertical-align: inherit;">å°†æ¨¡å‹æ”¾ç½®åœ¨äºŒåé¢ä½“çƒå½¢å¤šé¢ä½“å†…éƒ¨ï¼Œä»å¤šè¾¹å½¢çš„å¤šé¢ä½“ä¸­æŠ•å°„å‡ºå°„çº¿ï¼Œå¹¶è®°å½•å®ƒä»¬åˆ°æ¨¡å‹è¡¨é¢çš„é•¿åº¦ï¼ˆè·¯å¾„ï¼‰ã€‚</font><font style="vertical-align: inherit;">è¿™äº›è·¯å¾„çš„åˆ—è¡¨è¢«æ’åºå¹¶ç›¸äº’æ¯”è¾ƒã€‚</font><font style="vertical-align: inherit;">æ’åºæ¶ˆé™¤äº†è½¬å¼¯ï¼Œå› ä¸ºå¯¹äºç›¸åŒæˆ–æ¥è¿‘çš„å‡ ä½•æ¨¡å‹ï¼Œå…‰çº¿è·¯å¾„åœ¨è¯¯å·®èŒƒå›´å†…å°†é‡åˆï¼Œä½†é¡ºåºä¸åŒã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2e/in/it/2einitowujo6sygimeu5qcsh6ss.gif"><img src="https://habrastorage.org/webt/p3/nn/gs/p3nngs1qtrc92rch2wbfylqgkeu.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ†åˆ«ä¸º80å’Œ1280å°„çº¿ã€‚</font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥ä¸åŒæ–¹å¼æ¯”è¾ƒSuzanneçš„çŒ´å­æ¨¡å‹çš„ç»“æœã€‚</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/bd/2x/0m/bd2x0mkajcvvj3qlzjeexr1xu6e.png"><br>
<pre><code class="python hljs">Suzanne_lo<font></font>
                          Suzanne_lo | <span class="hljs-number">1</span>             
                 Suzanne_lo_rot_rand | <span class="hljs-number">0.9878376875939173</span>
                   Suzanne_lo_rot_90 | <span class="hljs-number">0.9800766750109137</span>
                 Suzanne_hi_rot_rand | <span class="hljs-number">0.9761078629585936</span>
                          Suzanne_hi | <span class="hljs-number">0.9730722945028376</span>
                   Suzanne_hi_rot_90 | <span class="hljs-number">0.9680325422930756</span>
                               Skull | <span class="hljs-number">0.7697333228143514</span>
             Ceramic_Teapot_rot_rand | <span class="hljs-number">0.6634783235048608</span>
                      Ceramic_Teapot | <span class="hljs-number">0.6496529954470333</span>
                         Grenade_MK2 | <span class="hljs-number">0.5275616759076022</span>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RCVSçš„è¯¦ç»†è¯´æ˜</font></font></h3><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­¥éª¤æ’å›¾</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/o2/tj/3o/o2tj3owsz0_jne4p0nbecptu8zs.png"><br>
<br>
<img src="https://habrastorage.org/webt/p9/lj/ty/p9ljty3f0fmfempfowlegvkiari.png"><br>
<br>
<img src="https://habrastorage.org/webt/wf/mi/ws/wfmiwskrxwqgc4vtuakleiqztg8.png"><br>
<br>
<img src="https://habrastorage.org/webt/yt/5j/a8/yt5ja8yymaxp_1imonuuewwac7u.png"><br>
<br>
<img src="https://habrastorage.org/webt/b8/yf/af/b8yfafbvbo9xtqldngm-b_rgisg.png"><br>
<br>
<img src="https://habrastorage.org/webt/hq/z9/te/hqz9tekclzhlx6xo2_8fneklf-o.png"><br>
<br>
<img src="https://habrastorage.org/webt/wl/em/_8/wlem_8ibovdfz3pxcydkl_jyrbk.png"><br>
<br>
<img src="https://habrastorage.org/webt/yc/yp/im/ycypimotysn1k1lb5ocqn4zs9mu.png"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æ¯”è¾ƒ3Dæ¨¡å‹ï¼ˆä»¥ä¸‹ç§°ä¸ºå¯¹è±¡ï¼‰ä¹‹å‰ï¼Œæ¯ä¸ªæ¨¡å‹éƒ½è¦ç»å†å‡†å¤‡é˜¶æ®µï¼ˆæˆ‘åœ¨Blenderä¸­ç”¨Pythonå®ç°äº†è¿™ä¸€éƒ¨åˆ†ï¼‰ï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹è±¡ç»„ä»¶å±€éƒ¨åæ ‡çš„åŸç‚¹è®¾ç½®åœ¨ä½“ç§¯çš„è´¨å¿ƒä¸Šã€‚</font></font></li>
<li>             .</li>
<li>  .</li>
<li>      ( )    ,  .   ,    : 80, 320, 1280, 5120, 22480.             1280.</li>
<li>                ,      .</li>
<li>     .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…‰çº¿å†æ¬¡ä»ç¬”åœˆçš„æ¯ä¸ªå¤šè¾¹å½¢å‘å‡ºï¼Œå¹¶ä¿å­˜å®ƒä»¬çš„è·¯å¾„ï¼Œç›´åˆ°å®ƒä»¬ä¸å¯¹è±¡çš„è¡¨é¢ç›¸é‡ä¸ºæ­¢ï¼Œè¯¥å¯¹è±¡çš„æ³•çº¿æŒ‡å‘å¯¹è±¡å†…éƒ¨ã€‚</font><font style="vertical-align: inherit;">ï¼ˆè¿™å°†ä¿®å¤å†…éƒ¨å‡ ä½•å½¢çŠ¶å’Œ/æˆ–å¡«å……ä»¥å‰çš„å°„çº¿çš„ç›²ç‚¹ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»ç›¸å¯¹å¤šè¾¹å½¢å‘å‡ºçš„å…‰çº¿è·¯å¾„æŒ‰åˆ—è¡¨æ’åˆ—ï¼Œå…¶ä¸­æ­¥éª¤5çš„å‰ä¸¤ä¸ªè·¯å¾„å’Œæ­¥éª¤7çš„ç¬¬äºŒè·¯å¾„ã€‚æ¯ä¸ªåˆ—è¡¨æŒ‰æ­¥éª¤5çš„æœ€å°è·¯å¾„å€¼æ’åºï¼Œä»¥ä¾¿æ­¥éª¤5å’Œ7çš„è·¯å¾„æˆå¯¹åŒ¹é…ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰€æœ‰è·¯å¾„çš„åˆ—è¡¨åˆ—è¡¨æŒ‰ç¬¬ä¸€ä¸ªå€¼æ’åºã€‚</font><font style="vertical-align: inherit;">è¯¥åˆ—è¡¨æœ‰4åˆ—ï¼Œè¡Œæ•°ç­‰äºicosphereä¸­å¤šè¾¹å½¢æ•°çš„ä¸€åŠã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…‰çº¿è·¯å¾„åˆ—è¡¨è¢«å†™å…¥æ–‡ä»¶ã€‚</font></font></li>
</ol><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…‰çº¿è·¯å¾„åˆ—è¡¨å¦‚ä¸‹æ‰€ç¤ºï¼š</font></font></i><br>
<br>
<pre><code class="python hljs"><span class="hljs-number">0.00271218840585662</span>  <span class="hljs-number">0.2112752957162676</span> <span class="hljs-number">0.00271218840585662</span>  <span class="hljs-number">0.2112752957162676</span>
<span class="hljs-number">0.004740002405006037</span> <span class="hljs-number">0.210980921765861</span>  <span class="hljs-number">0.004740002405006037</span> <span class="hljs-number">0.2109809188911709</span>
<span class="hljs-number">0.00660892842734402</span>  <span class="hljs-number">0.2066613370130234</span> <span class="hljs-number">0.00660892842734402</span>  <span class="hljs-number">0.2066613370130234</span><font></font>
â€¦<font></font>
<span class="hljs-number">0.2692299271137439</span>   <span class="hljs-number">0.2725085782639611</span> <span class="hljs-number">0.2692299271137439</span>   <span class="hljs-number">0.2725085782639611</span>
<span class="hljs-number">0.2705489991382905</span>   <span class="hljs-number">0.2707842753523402</span> <span class="hljs-number">0.270548999138295</span>    <span class="hljs-number">0.2707843056356914</span>
<span class="hljs-number">0.2709498404192674</span>   <span class="hljs-number">0.271036677664217</span>  <span class="hljs-number">0.2709498404192674</span>   <span class="hljs-number">0.271036642944409</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“æ‰€æœ‰å¯¹è±¡éƒ½å‡†å¤‡å¥½å…‰çº¿è·¯å¾„åˆ—è¡¨æ—¶ï¼Œå¯ä»¥å°†å®ƒä»¬è¿›è¡Œæ¯”è¾ƒï¼ˆæˆ‘åœ¨Rustä¸­ç¼–å†™äº†è¿™ä¸€éƒ¨åˆ†ï¼‰ï¼š</font></font><br>
<br>
<ol>
<li>    .       0.01,    1%.</li>
<li>  .</li>
<li>          ,       ,    .    ,      .            ,       .</li>
<li>     ,      .     .</li>
<li>     (     ),    .</li>
</ol><br>
<h3>,     RCVS</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥ç®—æ³•éå¸¸é€‚åˆæœç´¢å‡ ä½•å½¢çŠ¶è¾ƒè¿‘çš„å¯¹è±¡ï¼Œä¾‹å¦‚åŒä¸€æ¨¡å‹çš„é«˜å¤šè¾¹å½¢å’Œä½å¤šè¾¹å½¢å˜é‡ï¼Œæœ‰æ—¶è¿˜å¯ä»¥å¾ˆå¥½åœ°å¤„ç†ç›¸ä¼¼çš„å¯¹è±¡ï¼Œä¾‹å¦‚ä½¿ç”¨ä¸åŒå½¢çŠ¶çš„èŒ¶å£¶æˆ–å‰ä»–ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œç”±äºå¯¹åº”äºç›¸åŒå…‰çº¿è·¯å¾„åˆ—è¡¨çš„æ¨¡å‹æ•°é‡å¯ä»¥è¿‘ä¼¼ä¼°ç®—</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mfrac><mrow><mi>n</mi><mo>!</mo></mrow><mrow><mrow><mo>(</mo><mfrac><mi>n</mi><mn>2</mn></mfrac><mo>)</mo></mrow><mo>!</mo></mrow></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.79ex" height="5.384ex" viewBox="0 -1024.6 2062.2 2318.2" role="img" focusable="false" style="vertical-align: -3.005ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(120,0)"><rect stroke="none" width="1822" height="60" x="0" y="220"></rect><g transform="translate(600,419)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJMATHI-6E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJMAIN-21" x="600" y="0"></use></g><g transform="translate(60,-725)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJSZ2-28"></use><g transform="translate(422,0)"><g transform="translate(120,0)"><rect stroke="none" width="420" height="60" x="0" y="146"></rect><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJMATHI-6E" x="119" y="687"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJMAIN-32" x="169" y="-636"></use></g></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJSZ2-29" x="1531" y="-1"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/490760/&amp;usg=ALkJrhis9x-LyTtX30085mwNo2MYx8wEDg#MJMAIN-21" x="2128" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mrow><mi>n</mi><mo>!</mo></mrow><mrow><mrow><mo>(</mo><mfrac><mi>n</mi><mn>2</mn></mfrac><mo>)</mo></mrow><mo>!</mo></mrow></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-2">\frac{n!}{\left(\frac{n}{2}\right)!}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåˆ™å‡ ä½•ä¸Šè§†è§‰ä¸Šä¸åŒçš„å¯¹è±¡å¾ˆæœ‰å¯èƒ½ä¼šåœ¨0.5-0.9çš„èŒƒå›´å†…å‘ç”Ÿé‡åˆã€‚</font><font style="vertical-align: inherit;">åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œé¦™è•‰å‘ç”Ÿäº†è¿™ç§æƒ…å†µï¼Œé¦™è•‰ä¸é£æœºå’Œä¸åŒå§¿åŠ¿çš„äººç›¸å»åˆçš„æ¯”ç‡ä¸º0.7ï¼Œåä¹‹ï¼Œè€è™å’Œç‹—åˆ™ä¸ºâ€œä»¤äººå°è±¡æ·±åˆ»â€çš„0.85ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†æ›´ç²¾ç¡®åœ°æœç´¢ï¼Œè¯·è€ƒè™‘å¯¹è±¡çš„å¤§å°å’Œ/æˆ–æ—‹è½¬ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èµ„æ–™æ¥æºã€‚</font></font></h3><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”¨äºåœ¨Blenderä¸­åˆ›å»ºç›¸å¯¹çš„icosphereå¤šè¾¹å½¢çš„å­—å…¸çš„Pythonä»£ç </font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> bpy
<span class="hljs-keyword">import</span> os<font></font>
<font></font>
name = bpy.context.active_object.data.name<font></font>
<font></font>
polys = bpy.data.meshes[name].polygons<font></font>
print(<span class="hljs-string">"-----"</span>)<font></font>
length = len(polys)<font></font>
<font></font>
x = <span class="hljs-number">0</span>
p = <span class="hljs-number">0</span><font></font>
dict = []<font></font>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, length):<font></font>
    print(i, <span class="hljs-string">"/"</span>, length)
    <span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> range(i, length):<font></font>
        norm1 = polys[i].normal<font></font>
        norm2 = polys[l].normal<font></font>
        <span class="hljs-keyword">if</span> norm1 == -norm2:<font></font>
            dict.append(str(i)+<span class="hljs-string">", "</span>+str(l)) <font></font>
            p += <span class="hljs-number">1</span>  <font></font>
<font></font>
<font></font>
print(<span class="hljs-string">"Polys"</span>, p)<font></font>
basedir = os.path.dirname(bpy.data.filepath) + <span class="hljs-string">"/ico_dicts/"</span>  
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(basedir):<font></font>
    os.makedirs(basedir)<font></font>
file = open(basedir + <span class="hljs-string">"/"</span> + str(length) + <span class="hljs-string">".csv"</span>,<span class="hljs-string">"w"</span>)
<span class="hljs-keyword">for</span> poly <span class="hljs-keyword">in</span> dict:      <font></font>
    file.write(poly + <span class="hljs-string">"\n"</span>)<font></font>
file.close()<font></font>
print(<span class="hljs-string">"----ok----"</span>)
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”¨äºåœ¨Blenderä¸­å‡†å¤‡å¯¹è±¡å’Œåˆ›å»ºå°„çº¿è·¯å¾„åˆ—è¡¨çš„Pythonä»£ç ã€‚</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> bpy
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> sqrt
<span class="hljs-keyword">import</span> csv<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#Icosphere properties</span>
<span class="hljs-comment">#icosubd:</span>
<span class="hljs-comment">#5 -&gt; 5120 X 2 rays</span>
<span class="hljs-comment">#4 -&gt; 1280 X 2 rays</span>
<span class="hljs-comment">#3 -&gt;  320 X 2 rays</span>
<span class="hljs-comment">#2 -&gt;   80 X 2 rays</span>
icosubd = <span class="hljs-number">4</span>
size = <span class="hljs-number">1280</span> <span class="hljs-comment">#name of directory</span>
radius = <span class="hljs-number">1</span><font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">icoRC</span>(<span class="hljs-params">icosubd, rad, raydist, normals, target</span>):</span><font></font>
    icorad = rad<font></font>
    bpy.ops.mesh.primitive_ico_sphere_add(radius=icorad, subdivisions=icosubd, enter_editmode=<span class="hljs-literal">True</span>, location=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>))<font></font>
    bpy.ops.mesh.normals_make_consistent(inside=normals)<font></font>
    bpy.ops.object.editmode_toggle()<font></font>
    <font></font>
<font></font>
    ico = bpy.context.active_object<font></font>
    mesh = bpy.data.meshes[ico.data.name]<font></font>
    rays = []<font></font>
    size = len(mesh.polygons)<font></font>
    <span class="hljs-keyword">for</span> poly <span class="hljs-keyword">in</span> mesh.polygons:<font></font>
        normal = poly.normal<font></font>
        start = poly.center<font></font>
        <font></font>
        ray = target.ray_cast(start, normal, distance=raydist)<font></font>
      <font></font>
        <span class="hljs-keyword">if</span> ray[<span class="hljs-number">0</span>] == <span class="hljs-literal">True</span>:<font></font>
            length = sqrt((start[<span class="hljs-number">0</span>]-ray[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]) ** <span class="hljs-number">2</span> + (start[<span class="hljs-number">1</span>]-ray[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]) ** <span class="hljs-number">2</span> + (start[<span class="hljs-number">2</span>]-ray[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>]) ** <span class="hljs-number">2</span>)<font></font>
            rays.append(length / (radius *<span class="hljs-number">2</span>))
        <span class="hljs-keyword">else</span>:<font></font>
            rays.append(<span class="hljs-number">-1</span>)<font></font>
            <font></font>
        <font></font>
    result = []<font></font>
    <span class="hljs-comment">#Combine opposite rays using CSV dicts</span>
    dictdir = os.path.dirname(bpy.data.filepath) + <span class="hljs-string">"/ico_dicts/"</span>
    <span class="hljs-keyword">with</span> open(dictdir+str(size)+<span class="hljs-string">'.csv'</span>, newline=<span class="hljs-string">''</span>) <span class="hljs-keyword">as</span> csvfile:<font></font>
        ico_dict_file = csv.reader(csvfile, delimiter=<span class="hljs-string">','</span>)
        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> ico_dict_file:<font></font>
            result.append([rays[int(row[<span class="hljs-number">0</span>])], rays[int(row[<span class="hljs-number">1</span>])]])<font></font>
            <font></font>
            <font></font>
    bpy.ops.object.select_all(action=<span class="hljs-string">'DESELECT'</span>)<font></font>
    bpy.data.objects[ico.name].select_set(<span class="hljs-literal">True</span>) <font></font>
    bpy.ops.object.delete() <font></font>
    <font></font>
    <span class="hljs-keyword">return</span> result<font></font>
   <font></font>
   <font></font>
    <font></font>
    <font></font>
<span class="hljs-comment">#Batch preparation of objects by scale and origin </span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">batch_prepare</span>():</span>   
    <span class="hljs-keyword">for</span> obj <span class="hljs-keyword">in</span> bpy.context.selected_objects:<font></font>
        bpy.ops.object.origin_set(type=<span class="hljs-string">'ORIGIN_CENTER_OF_VOLUME'</span>, center=<span class="hljs-string">'MEDIAN'</span>)<font></font>
        max_dist = <span class="hljs-number">0</span><font></font>
        bb = bpy.data.objects[obj.name].bound_box<font></font>
        <font></font>
        <span class="hljs-keyword">for</span> vert <span class="hljs-keyword">in</span> obj.data.vertices:<font></font>
            dist = vert.co[<span class="hljs-number">0</span>]**<span class="hljs-number">2</span> + vert.co[<span class="hljs-number">1</span>]**<span class="hljs-number">2</span> + vert.co[<span class="hljs-number">2</span>]**<span class="hljs-number">2</span>
            <span class="hljs-keyword">if</span> dist &gt; max_dist:<font></font>
                max_dist = dist<font></font>
        <font></font>
        obj.scale *= (<span class="hljs-number">1</span> / sqrt(max_dist))<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">write_rays</span>(<span class="hljs-params">dir</span>):</span>  
    <span class="hljs-keyword">for</span> obj <span class="hljs-keyword">in</span> bpy.context.selected_objects:<font></font>
        bpy.ops.object.transform_apply(location=<span class="hljs-literal">False</span>, rotation=<span class="hljs-literal">False</span>, scale=<span class="hljs-literal">True</span>)<font></font>
        <font></font>
        <span class="hljs-comment">#Cast rays on object with normals turned inside   </span><font></font>
        bpy.context.view_layer.objects.active  = obj<font></font>
        bpy.ops.object.editmode_toggle()<font></font>
        bpy.ops.mesh.normals_make_consistent(inside=<span class="hljs-literal">True</span>)<font></font>
        bpy.ops.object.editmode_toggle()<font></font>
        result1 = icoRC(icosubd, radius, radius*<span class="hljs-number">2</span>, <span class="hljs-literal">True</span>, obj)<font></font>
        <font></font>
        <span class="hljs-comment">#Cast rays on object with normals turned outside </span><font></font>
        bpy.context.view_layer.objects.active  = obj<font></font>
        bpy.ops.object.editmode_toggle()<font></font>
        bpy.ops.mesh.normals_make_consistent(inside=<span class="hljs-literal">False</span>)<font></font>
        bpy.ops.object.editmode_toggle()<font></font>
        result2 = icoRC(icosubd, radius, radius*<span class="hljs-number">2</span>, <span class="hljs-literal">True</span>, obj)<font></font>
        <font></font>
        final = []<font></font>
        <span class="hljs-comment">#Sort sub-lists and append them to main list</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, len(result1)):
            <span class="hljs-keyword">if</span> result2[i][<span class="hljs-number">0</span>] &lt; result2[i][<span class="hljs-number">1</span>]:<font></font>
                final.append([result2[i][<span class="hljs-number">0</span>], result2[i][<span class="hljs-number">1</span>], result1[i][<span class="hljs-number">0</span>], result1[i][<span class="hljs-number">1</span>]])
            <span class="hljs-keyword">else</span>:<font></font>
                final.append([result2[i][<span class="hljs-number">1</span>], result2[i][<span class="hljs-number">0</span>], result1[i][<span class="hljs-number">1</span>], result1[i][<span class="hljs-number">0</span>]])<font></font>
        <font></font>
        <font></font>
        <font></font>
     <font></font>
        basedir = os.path.dirname(bpy.data.filepath) + <span class="hljs-string">"/rays/"</span> + str(size) + <span class="hljs-string">"/"</span> 
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(basedir):<font></font>
            os.makedirs(basedir)<font></font>
        file = open(basedir + <span class="hljs-string">"/"</span> + obj.name,<span class="hljs-string">"w"</span>)<font></font>
        <font></font>
        final.sort(key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>]) <span class="hljs-comment">#Sort list by first values in sub-lists</span><font></font>
     <font></font>
        <span class="hljs-comment">#Writing to file   </span>
        <span class="hljs-keyword">for</span> ray <span class="hljs-keyword">in</span> final:<font></font>
            ray_str = <span class="hljs-string">""</span>
            <span class="hljs-keyword">for</span> dist <span class="hljs-keyword">in</span> ray:   <font></font>
                ray_str += str(dist) + <span class="hljs-string">" "</span>
            file.write(ray_str + <span class="hljs-string">"\n"</span>)<font></font>
<font></font>
        file.close()<font></font>
        <font></font>
    <font></font>
    <font></font>
batch_prepare()<font></font>
write_rays(size)<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”¨äºæ¯”è¾ƒåˆ—è¡¨çš„Rustä»£ç ã€‚</font></font></b><div class="spoiler_text"><pre><code class="rust hljs"><span class="hljs-keyword">use</span> rayon::prelude::*;
<span class="hljs-keyword">use</span> std::collections::HashSet;
<span class="hljs-keyword">use</span> std::fs;
<span class="hljs-keyword">use</span> std::io::{BufRead, BufReader, Error, Read};<font></font>
<font></font>
<span class="hljs-comment">//Creates Vector from file</span>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">read</span></span>&lt;R: Read&gt;(io: R) -&gt; <span class="hljs-built_in">Result</span>&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">f64</span>&gt;&gt;, Error&gt; {
    <span class="hljs-keyword">let</span> br = BufReader::new(io);<font></font>
    br.lines()<font></font>
        .map(|line| {<font></font>
            line.and_then(|v| {<font></font>
                <span class="hljs-literal">Ok</span>(v.split_whitespace()<font></font>
                    .map(|x| <span class="hljs-keyword">match</span> x.trim().parse::&lt;<span class="hljs-built_in">f64</span>&gt;() {
                        <span class="hljs-literal">Ok</span>(value) =&gt; value,
                        <span class="hljs-literal">Err</span>(_) =&gt; -<span class="hljs-number">1.0</span>,<font></font>
                    })<font></font>
                    .collect::&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">f64</span>&gt;&gt;())<font></font>
            })<font></font>
        })<font></font>
        .collect()<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//Compares two objects</span>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">compare</span></span>(one: &amp;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">f64</span>&gt;&gt;, two: &amp;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">f64</span>&gt;&gt;, error: <span class="hljs-built_in">f64</span>) -&gt; <span class="hljs-built_in">f64</span> {
    <span class="hljs-keyword">let</span> length = one.len();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> count: <span class="hljs-built_in">f64</span> = <span class="hljs-number">0.0</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> seen: HashSet&lt;<span class="hljs-built_in">usize</span>&gt; = HashSet::new();<font></font>
<font></font>
    <span class="hljs-keyword">for</span> orig <span class="hljs-keyword">in</span> one {
        <span class="hljs-keyword">let</span> size = orig.len();<font></font>
<font></font>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..length {
            <span class="hljs-keyword">if</span> seen.contains(&amp;i) {
                <span class="hljs-keyword">continue</span>;<font></font>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">let</span> targ = &amp;two[i];<font></font>
<font></font>
                <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span>..size).map(|x| (orig[x] - targ[x]).abs()).sum::&lt;<span class="hljs-built_in">f64</span>&gt;() &gt; error * size <span class="hljs-keyword">as</span> <span class="hljs-built_in">f64</span> {
                    <span class="hljs-keyword">continue</span>;<font></font>
                }<font></font>
<font></font>
                <span class="hljs-keyword">let</span> err_sum = (<span class="hljs-number">0</span>..size)<font></font>
                    .map(|x| <span class="hljs-number">1.0</span> - (orig[x] - targ[x]).abs())<font></font>
                    .sum::&lt;<span class="hljs-built_in">f64</span>&gt;();<font></font>
<font></font>
                count += err_sum / size <span class="hljs-keyword">as</span> <span class="hljs-built_in">f64</span>;<font></font>
                seen.insert(i);<font></font>
                <span class="hljs-keyword">break</span>;<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
    count / length <span class="hljs-keyword">as</span> <span class="hljs-built_in">f64</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//Compares one object with others on different threads</span>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">one_with_others</span></span>(<font></font>
    obj: &amp;(<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">f64</span>&gt;&gt;),<font></font>
    dict: &amp;<span class="hljs-built_in">Vec</span>&lt;(<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">f64</span>&gt;&gt;)&gt;,<font></font>
) -&gt; <span class="hljs-built_in">Vec</span>&lt;(<span class="hljs-built_in">usize</span>, <span class="hljs-built_in">f64</span>)&gt; {
    <span class="hljs-keyword">let</span> length = dict.len();<font></font>
<font></font>
    (<span class="hljs-number">0</span>..length)<font></font>
        .into_par_iter()<font></font>
        .map(|x| {<font></font>
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Puny human is instructed to wait.. {:}/{:}"</span>, x + <span class="hljs-number">1</span>, length);<font></font>
            (x, compare(&amp;obj.<span class="hljs-number">1</span>, &amp;dict[x].<span class="hljs-number">1</span>, <span class="hljs-number">0.01</span>))<font></font>
        })<font></font>
        .collect()<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() {
    <span class="hljs-keyword">let</span> ray = <span class="hljs-number">1280</span>; <span class="hljs-comment">//name of directory</span>
    <span class="hljs-keyword">let</span> obj_cur = <span class="hljs-string">"Suzanne_lo"</span>; <span class="hljs-comment">//name of object</span><font></font>
<font></font>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> objects = <span class="hljs-built_in">Vec</span>::&lt;(<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-built_in">f64</span>&gt;&gt;)&gt;::new();
    <span class="hljs-keyword">let</span> path_rays = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"./rays/{:}/"</span>, ray);
    <span class="hljs-keyword">let</span> paths = fs::read_dir(path_rays).unwrap();<font></font>
<font></font>
    <span class="hljs-keyword">let</span> obj_path = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"./rays/{:}/{:}"</span>, ray, obj_cur);
    <span class="hljs-keyword">let</span> obj = (<font></font>
        obj_cur.to_string(),<font></font>
        read(fs::File::open(obj_path).unwrap()).unwrap(),<font></font>
    );<font></font>
<font></font>
    <span class="hljs-keyword">for</span> path <span class="hljs-keyword">in</span> paths {
        <span class="hljs-keyword">let</span> dir = &amp;path.unwrap().path();
        <span class="hljs-keyword">let</span> name = dir.to_str().unwrap().split(<span class="hljs-string">"/"</span>).last().unwrap();<font></font>
<font></font>
        objects.push((<font></font>
            name.to_string(),<font></font>
            read(fs::File::open(dir).unwrap()).unwrap(),<font></font>
        ));<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> result = one_with_others(&amp;obj, &amp;objects);<font></font>
    result.sort_by(|a, b| b.<span class="hljs-number">1</span>.partial_cmp(&amp;a.<span class="hljs-number">1</span>).unwrap());
    <span class="hljs-built_in">print!</span>(<span class="hljs-string">"{}\n"</span>, <span class="hljs-string">"_"</span>.repeat(<span class="hljs-number">150</span>));
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{:}"</span>, obj.<span class="hljs-number">0</span>);
    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> result {
        <span class="hljs-built_in">println!</span>(
            <span class="hljs-string">"{:&gt;36} |{:&lt;100}| {:&lt;14}"</span>,<font></font>
            objects[line.<span class="hljs-number">0</span>].<span class="hljs-number">0</span>,
            <span class="hljs-string">"â–®"</span>.repeat((line.<span class="hljs-number">1</span> * <span class="hljs-number">100.0</span>).round() <span class="hljs-keyword">as</span> <span class="hljs-built_in">usize</span>),<font></font>
            line.<span class="hljs-number">1</span><font></font>
        );<font></font>
    }<font></font>
}<font></font>
<font></font>
</code></pre><br>
</div></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é“¾æ¥åˆ°æºå’Œå¸¦æœ‰æµ‹è¯•åœºæ™¯çš„Blenderé¡¹ç›®ã€‚</font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é“¾æ¥åˆ°GitHubã€‚</font></font></a><br>
<br>
<img src="https://habrastorage.org/webt/oh/4p/7s/oh4p7sqgz6j9ti6xi8pjmg73li4.png"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN490748/index.html">å¼€å‘äººå‘˜çš„ä»»åŠ¡ï¼Œæˆ–è€…æˆ‘ä»¬å¦‚ä½•åœ¨æ²¡æœ‰ä¾›åº”å•†çš„æƒ…å†µä¸‹æ‰«ææ‰‹æŒå¼æ‰«æä»ª</a></li>
<li><a href="../zh-CN490750/index.html">ç±³å“ˆä¼Šå°”ï¼ˆMikhail Salosinï¼‰ã€‚Golangèšä¼šã€‚åœ¨Watch +åº”ç”¨ç¨‹åºçš„åç«¯ä¸­ä½¿ç”¨Go</a></li>
<li><a href="../zh-CN490754/index.html">Visual Studioä»£ç ä»£ç ç¼–è¾‘å™¨ã€‚ä¸ºåˆå­¦è€…è®¾ç½®å’Œå®‰è£…æ’ä»¶çš„æœ€è¯¦ç»†æŒ‡å—</a></li>
<li><a href="../zh-CN490756/index.html">å°†Jenkinséƒ¨ç½²ä¸ºä»£ç </a></li>
<li><a href="../zh-CN490758/index.html">æ•°å­¦å®¶è¯æ˜äº†æ¹æµçš„æ™®éå®šå¾‹</a></li>
<li><a href="../zh-CN490762/index.html">å¦‚ä½•é¢„æµ‹æœºç¥¨ä»·æ ¼ï¼Ÿ</a></li>
<li><a href="../zh-CN490764/index.html">Grafanaï¼ŒInfluxDBï¼Œä¸¤ä¸ªæ ‡ç­¾å’Œä¸€ä¸ªé‡ã€‚æˆ–å¦‚ä½•è®¡ç®—å­ç»„çš„æ€»å’Œï¼Ÿ</a></li>
<li><a href="../zh-CN490766/index.html">å¦‚ä½•ç†è§£åˆå­¦è€…ï¼Œä¸ºæœŸæœ›çš„èŒä¸šé€‰æ‹©å“ªç§è¯­è¨€ï¼Ÿ</a></li>
<li><a href="../zh-CN490768/index.html">å½“æ‚¨ä»äº‹è®¡ç®—æœºæ¸¸æˆæ—¶ï¼šäº‘æ¸¸æˆçš„å†…éƒ¨è®¾å¤‡</a></li>
<li><a href="../zh-CN490770/index.html">è´Ÿæœ‰æŠ€æœ¯å€ºåŠ¡ï¼åœ¨2020å¹´TechLeadå¤§ä¼šä¸Šï¼Œæˆ‘ä»¬å°†å‘æ‚¨å±•ç¤º</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>