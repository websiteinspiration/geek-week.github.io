<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👙 👩🏽‍🤝‍👩🏼 🤐 Das AddTrust-Stammzertifikat von Sectigo lief am 30. Mai 2020 ab, was zu Problemen bei OpenSSL 1.0.x- und GnuTLS-Clients führte 👩🏾‍💻 ❓ 🛤️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Sectigo Certificate Authority (Comodo) warnte Benutzer im Voraus vor dem Ablauf des AddTrust-Stammzertifikats , das für das Cross-Signing verwende...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Das AddTrust-Stammzertifikat von Sectigo lief am 30. Mai 2020 ab, was zu Problemen bei OpenSSL 1.0.x- und GnuTLS-Clients führte</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/globalsign/blog/504784/"><img src="https://habrastorage.org/webt/51/ho/h3/51hoh3ysljid2g1ipicbdxa4tey.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Sectigo Certificate Authority (Comodo) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">warnte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Benutzer </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">im Voraus</font></a><font style="vertical-align: inherit;"> vor dem Ablauf des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddTrust-Stammzertifikats</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , das für das Cross-Signing verwendet wurde, um die Kompatibilität mit älteren Geräten sicherzustellen, die kein neues USERTrust-Stammzertifikat in ihrem Geschäft haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AddTrust ist am 20. Mai 2020 um 10:48:38 UTC abgelaufen. </font><font style="vertical-align: inherit;">Leider traten Probleme nicht nur in veralteten Browsern auf, sondern auch in Nicht-Browser-Clients, die auf OpenSSL 1.0.x, LibreSSL und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GnuTLS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> basieren </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Zum Beispiel in Roku-Set-Top-Boxen (siehe die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antwort im technischen Support</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vom 30.05.2020), </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heroku</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in Fortinet, Chargify-Anwendungen, auf der .NET Core 2.0-Plattform unter Linux und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vielen anderen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wurde angenommen, dass das Problem nur ältere Systeme (Android 2.3, Windows XP, Mac OS X 10.11, iOS 9 usw.) betrifft, da moderne Browser das zweite USERTRust-Stammzertifikat verwenden können, wie in der Abbildung dargestellt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sz/d6/a_/szd6a_yqycmxj1p1qzoyt27p1rc.png"><br>
<i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zertifikatskette</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Am 30. Mai 2020 kam es jedoch tatsächlich zu Abstürzen in Hunderten von Webdiensten, die die kostenlosen Bibliotheken OpenSSL 1.0.x und GnuTLS verwendeten. </font><font style="vertical-align: inherit;">Eine sichere Verbindung mit einem Zertifikat-Veralterungsfehler wurde nicht mehr hergestellt. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das entsprechende Ticket</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im OpenSSL-Bug-Tracker (Benutzername und Passwort: Gast) wurde am 25. Februar 2020 nur für die Version OpenSSL 1.1.0 geschlossen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum ein Fehler auftritt</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn ein Client eine Verbindung herstellt, sendet ihm der TLS-Server sein Zertifikat. </font><font style="vertical-align: inherit;">Der Client muss eine Kette von Zertifikaten vom Serverzertifikat bis zum Stammzertifikat erstellen, dem der Client vertraut. </font><font style="vertical-align: inherit;">Um dem Client beim Aufbau dieser Kette zu helfen, sendet der Server ein oder mehrere zusätzliche Zwischenzertifikate zusammen mit seinen eigenen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tl/gi/_s/tlgi_sx2-vmibmkqwwdtpzlmp9q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Website sendet beispielsweise die folgenden zwei Zertifikate:</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betreff = * .habr.com</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Publisher = Sectigo ECC Domain Validation Secure Server-Zertifizierungsstelle</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aktionsbeginn = Samstag, 30. Mai 2020 </font><font style="vertical-align: inherit;">3:00:00</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ablaufdatum = Freitag, 3. Dezember 2021 </font><font style="vertical-align: inherit;">2:59:59</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betreff = Sectigo ECC Domain Validation Secure Server-Zertifizierungsstelle</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Herausgeber = USERTrust ECC Certification Authority</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aktionsbeginn = Freitag, 2. November 2018 </font><font style="vertical-align: inherit;">3:00:00</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ende der Aktion = Mittwoch, 1. Januar 2031 </font><font style="vertical-align: inherit;">2:59:59</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das erste Zertifikat gehört dem Server und wird von der Sectigo-Zertifizierungsstelle ausgestellt. Das zweite wird von der USERTrust ECC-Zertifizierungsstelle ausgestellt und ist das Stammzertifikat. Diese beiden Zertifikate bilden eine vollständige Kette zu einem vertrauenswürdigen Stamm. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die USERTrust-Zertifizierungsstelle ist jedoch eine relativ neue Wurzel. Es wurde 2010 gegründet und es dauerte viele Jahre, bis alle Kunden ihm vertrauten. Im vergangenen Jahr gab es Berichte, dass einzelne Kunden dieser Wurzel nicht vertrauen. Daher senden einige Server ein zusätzliches Zwischenzertifikat der USERTrust ECC Certification Authority, das von AddTrust External CA Root ausgestellt wurde, an den Client. Dieses Zertifikat wurde im Jahr 2000 erstellt und war sein Zertifikat, das am 30. Mai 2020 abgelaufen ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für kompetente Zertifikatsprüfer, einschließlich moderner Browser, verursachte dies keine Probleme, da sie selbst vor USERTrust eine Vertrauenskette aufbauen können. Bei Clients, die OpenSSL 1.0.x oder GnuTLS verwenden, gab es jedoch ein Problem. </font><font style="vertical-align: inherit;">Selbst wenn diese Clients der USERTrust-Stammzertifizierungsstelle vertrauen und eine Kette zu dieser erstellen möchten, erhalten sie dennoch eine Kette zu AddTrust External CA Root, wodurch die Zertifikatüberprüfung fehlschlägt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sectigo hat ein alternatives Cross-Signed Intermediate Certificate </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AAA Certificate Services</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bereitgestellt </font><font style="vertical-align: inherit;">, das bis 2028 gültig sein wird.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überprüfen Sie Ihre Dienste</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Server-Handler und Client-Anwendungsbetreiber werden aufgefordert, ihre Zertifikatkette auf ein veraltetes AddTrust-Stammzertifikat zu überprüfen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Wesentlichen müssen Sie nur AddTrust External CA Root aus der Vertrauenskette entfernen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für Serverbetreiber gibt es einen Dienst </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What's My Chain Cert?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , der diese Prüfung durchführt und dabei hilft, eine neue Vertrauenskette mit allen erforderlichen Zwischenzertifikaten zu generieren. Es ist nicht erforderlich, ein Stammzertifikat in diese Kette aufzunehmen, da alle Clients es bereits im Geschäft haben. Darüber hinaus ist die Aufnahme in die Kette aufgrund der Vergrößerung des SSL-Handshakes einfach ineffizient.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betreibern von Clientanwendungen wird empfohlen, ein Upgrade auf die neueste TLS-Bibliothek durchzuführen. </font><font style="vertical-align: inherit;">Wenn dies nicht möglich ist, müssen Sie das externe CA-Stammzertifikat AddTrust aus Ihrem Speicher entfernen. </font><font style="vertical-align: inherit;">Wenn es sich nicht im Repository befindet, wird die richtige Vertrauenskette für das neue Stammzertifikat USERTrust RSA Certification Authority erstellt, sodass die TLS-Prüfung korrekt bestanden wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um AddTrust External CA Root zu entfernen, müssen Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">folgende</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Schritte ausführen </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bearbeiten </font></font><code>/etc/ca-certificates.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und kommentieren</font></font><code>mozilla/AddTrust_External_Root.crt</code><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lauf </font></font><code>update-ca-certificates</code></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um das Problem zu beheben, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">schlagen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fedora und RHEL </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">vor</font></a><font style="vertical-align: inherit;"> , das AddTrust-Zertifikat zur Blacklist hinzuzufügen:</font></font><br>
<br>
<pre><code class="plaintext hljs"> trust dump --filter "pkcs11:id=%AD%BD%98%7A%34%B4%26%F7%FA%C4%26%54%EF%03%BD%E0%24%CB%54%1A;type=cert" \<font></font>
&gt; /etc/pki/ca-trust/source/blacklist/addtrust-external-root.p11-kit<font></font>
update-ca-trust extract</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Methode funktioniert jedoch nicht für GnuTLS.</font></font><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siehe auch:</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
„ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Problem mit Sectigo-Zertifikaten nach dem 30. Mai 2020 und die Lösungsmethode</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> “ im Habr-Unternehmensblog</font></font></blockquote><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/9q/wb/zs/9qwbzsfapeaakd_obyftagefhny.jpeg"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PKI-Lösungen für Ihr Unternehmen. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kontaktieren Sie uns unter +7 (499) 678 2210, sales-ru@globalsign.com.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de504770/index.html">Linux-Gaming-Distributionen</a></li>
<li><a href="../de504772/index.html">Digitale Veranstaltungen in Moskau vom 1. bis 7. Juni</a></li>
<li><a href="../de504774/index.html">Befragung von IT-Führungskräften zu sich ändernden Anforderungen an IT-Services</a></li>
<li><a href="../de504776/index.html">Schreiben Sie eine Spiel-Engine in Ihrem ersten Jahr: einfach! (Fast)</a></li>
<li><a href="../de504780/index.html">NSA, Ghidra und Einhörner</a></li>
<li><a href="../de504786/index.html">Alles, was Sie über Caching wissen müssen</a></li>
<li><a href="../de504790/index.html">Eine Auswahl von Artikeln zum maschinellen Lernen: Fälle, Leitfäden und Studien für Mai 2020</a></li>
<li><a href="../de504792/index.html">Dienstpension. Wie NSPK seinen Dienstraum vor einem Coronavirus rettete</a></li>
<li><a href="../de504796/index.html">Udalenka ist cool. Vielleicht für immer bleiben?</a></li>
<li><a href="../de504798/index.html">Künstliche Intelligenz beobachten Beschwerden</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>