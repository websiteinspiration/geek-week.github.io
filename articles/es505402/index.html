<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚙 👨🏼‍🚀 🌒 Superposición de una textura 2D en un objeto 3D usando p5.js (parte 2 - aplicando un patrón a un cubo) 🚁 🌰 👧🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Esta es la segunda parte del proyecto en la que imponemos un patrón 2D dinámico en un objeto 3d. Puede comenzar desde la primera parte ( Parte 1 ) o s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Superposición de una textura 2D en un objeto 3D usando p5.js (parte 2 - aplicando un patrón a un cubo)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505402/"><img src="https://habrastorage.org/webt/4s/4t/rf/4s4trfjd_x_iewiw8ectzn3cqva.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta es la segunda parte del proyecto en la que imponemos un patrón 2D dinámico en un objeto 3d. </font><font style="vertical-align: inherit;">Puede comenzar desde la primera parte ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte 1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) o simplemente copiar el código resultante algunos párrafos a continuación. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hace algún tiempo, creé un patrón que se generó utilizando varias líneas de código en la biblioteca p5.js.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p5.js es una biblioteca Javascript creada en 2014. </font><font style="vertical-align: inherit;">Su objetivo principal es convertirse en una ventana al mundo de la programación para diseñadores, artistas, maestros y otros representantes de profesiones creativas. </font><font style="vertical-align: inherit;">Admite tanto animación como diagramas, se traduce fácilmente al formato web.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora te diré cómo hacer la parte final: aplica un patrón a un objeto 3D (en este caso, un cubo).</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comenzar a trabajar desde cero, debe crear un proyecto en el editor en línea </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">editor.p5js.org.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Continuamos cambiando el siguiente código:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> r=<span class="hljs-number">10</span>
<span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>
<span class="hljs-keyword">let</span> =<span class="hljs-number">20</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>) </span>{<font></font>
  background(<span class="hljs-number">220</span>);<font></font>
  createCanvas(<span class="hljs-number">400</span>, <span class="hljs-number">400</span>);<font></font>
  <font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>) </span>{<font></font>
translate(<span class="hljs-number">200</span>,<span class="hljs-number">200</span>)
  <span class="hljs-keyword">let</span> x = r+*cos(a);
  <span class="hljs-keyword">let</span> y = r+*sin(a);<font></font>
  fill(<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<font></font>
  ellipse (x,y,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);<font></font>
   =  + <span class="hljs-number">0.06</span>
  a = a + <span class="hljs-number">0.3</span><font></font>
    <font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que nuestro lienzo sea voluminoso, necesitamos agregar el parámetro WEBGL a la función que crea nuestro lienzo: createCanvas (400,400, WEBGL). Dado que el punto de referencia para dicho objeto ya está en el centro, podemos (¡y necesitamos!) Quitar la traducción (200,200), que realizó la corrección en una imagen plana. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para diversificar la gama de colores y hacer una imagen más espectacular, reemplacemos los parámetros fill () con nuestras variables r, a, c; ahora con cada nueva iteración del bucle infinito draw (), el color de las elipses cambiará ligeramente. Además, agreguemos cierta distancia entre los círculos y los ángulos de inclinación cambiando la tasa de cambio de las variables c y a.</font></font><br>
<br>
<pre><code class="javascript hljs">   =  + <span class="hljs-number">0.06</span>
  a = a + <span class="hljs-number">0.3</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como mejora final, agreguemos push () antes de nuestro código de patrón y pop () después. </font><font style="vertical-align: inherit;">El encuadre de esta manera hace que el código esté aislado: no se verá afectado por otros objetos que crearemos.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> r=<span class="hljs-number">10</span>
<span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>
<span class="hljs-keyword">let</span> c=<span class="hljs-number">20</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>) </span>{<font></font>
  background(<span class="hljs-number">220</span>);<font></font>
  createCanvas(<span class="hljs-number">400</span>, <span class="hljs-number">400</span>, WEBGL);<font></font>
  <font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>) </span>{<font></font>
  push()<font></font>
  <span class="hljs-keyword">let</span> x = r+c*cos(a);
  <span class="hljs-keyword">let</span> y = r+c*sin(a);<font></font>
  fill(r,a,c);<font></font>
  ellipse (x,y,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);<font></font>
  c = c + <span class="hljs-number">0.09</span>
  a = a + <span class="hljs-number">0.8</span><font></font>
  pop()<font></font>
}<font></font>
</code></pre><br>
<img src="https://habrastorage.org/webt/fo/di/7n/fodi7nd_wup_avsim2xk4yqcugy.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al final, obtenemos algo como esto. </font><font style="vertical-align: inherit;">Es hora de crear un cubo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la misma función draw (), después de pop () agregamos el código del cuadro:</font></font><br>
<br>
<pre><code class="javascript hljs">  push()<font></font>
  box(<span class="hljs-number">200</span>)<font></font>
  pop()<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora la caja con un tamaño de 200 se vuelve hacia nosotros solo por un lado y parece solo un cuadrado. Para estimar el volumen, necesitamos implementarlo. Para hacer esto, agregue la cuarta variable, top, a las r, a, c que ya están allí, ángulo con el valor predeterminado 0. Para que este parámetro afecte a nuestro cubo, después del segundo empuje (), pero antes de crear el cuadro. agregue tres funciones: rotateX (), rotateY (), rotateZ () con el parámetro de ángulo para cada una. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es lógico que un objeto con un ángulo de rotación de 0 grados no gire, por lo tanto, agregamos un cambio en el valor del ángulo variable a 0.003 (para empezar será suficiente). Como resultado, obtenemos el siguiente código:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> r=<span class="hljs-number">10</span>
<span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>
<span class="hljs-keyword">let</span> c=<span class="hljs-number">20</span>
<span class="hljs-keyword">let</span> angle = <span class="hljs-number">0</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>) </span>{<font></font>
  background(<span class="hljs-number">220</span>);<font></font>
  createCanvas(<span class="hljs-number">400</span>, <span class="hljs-number">400</span>, WEBGL);<font></font>
  <font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>) </span>{<font></font>
  push()<font></font>
  <span class="hljs-keyword">let</span> x = r+c*cos(a);
  <span class="hljs-keyword">let</span> y = r+c*sin(a);<font></font>
  fill(r,a,c);<font></font>
  ellipse (x,y,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);<font></font>
  c = c + <span class="hljs-number">0.09</span>
  a = a + <span class="hljs-number">0.8</span><font></font>
  pop()<font></font>
  <font></font>
  push()<font></font>
  rotateX(angle), <font></font>
  rotateY(angle), <font></font>
  rotateZ(angle)<font></font>
  box(<span class="hljs-number">200</span>)<font></font>
  angle = angle + <span class="hljs-number">0.003</span><font></font>
  pop()<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que nuestro fondo se crea solo una vez (está en configuración), detectamos el primer error que nuestro cubo borra el fondo cuando se gira. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w5/cx/dt/w5cxdthj4s6tyqx3jea88dnt9ng.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para solucionarlo, simplemente puede transferir el fondo (200) dentro de la función dibujar (). Sin embargo, ahora estamos detectando otro problema: nuestros círculos comienzan a desaparecer, como lo hicieron al principio, porque ahora se sobrescriben con cada nuevo ciclo y aparecen solo por una fracción de segundo desde nada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para resolver este problema, necesitamos crear una nueva variable (por ejemplo, arte) sin un valor predeterminado al principio al lado de otras variables de nivel superior. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dentro de la función setup (), la equiparamos a la función createGraphics (400,400) y luego la usamos en otros lugares.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asegúrese de establecer los mismos parámetros que al crear el lienzo para mantener la dimensionalidad.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora dentro del código del patrón, agregamos la variable de arte a través del punto a la elipse y sus propiedades (como fill () y otros, si los creó). </font></font><br>
<br>
<pre><code class="javascript hljs">art.fill(r,a,c);<font></font>
  art.ellipse (x,y,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de eso, queda por imponer el patrón en el cubo como una textura. </font><font style="vertical-align: inherit;">Para hacer esto, agregue la propiedad de textura (arte) dentro del código del cubo. </font><font style="vertical-align: inherit;">La lógica es la siguiente: creamos la esencia de un objeto gráfico aislado de arte, que llama a las funciones para crear un patrón con las propiedades especificadas, y luego le damos al arte como parámetro de propiedad una textura para el cubo.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> r=<span class="hljs-number">10</span>
<span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>
<span class="hljs-keyword">let</span> c=<span class="hljs-number">20</span>
<span class="hljs-keyword">let</span> angle = <span class="hljs-number">0</span>
<span class="hljs-keyword">let</span> art<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>) </span>{<font></font>
  createCanvas(<span class="hljs-number">400</span>, <span class="hljs-number">400</span>, WEBGL);<font></font>
  art = createGraphics(<span class="hljs-number">400</span>,<span class="hljs-number">400</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>) </span>{<font></font>
  background(<span class="hljs-number">220</span>);<font></font>
  push()<font></font>
  <span class="hljs-keyword">let</span> x = r+c*cos(a);
  <span class="hljs-keyword">let</span> y = r+c*sin(a);<font></font>
  art.fill(r,a,c);<font></font>
  art.ellipse (x,y,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);<font></font>
  c = c + <span class="hljs-number">0.09</span>
  a = a + <span class="hljs-number">0.8</span><font></font>
  pop()<font></font>
  <font></font>
  push()<font></font>
  texture(art)<font></font>
  rotateX(angle), <font></font>
  rotateY(angle), <font></font>
  rotateZ(angle)<font></font>
  box(<span class="hljs-number">200</span>)<font></font>
  angle = angle + <span class="hljs-number">0.003</span><font></font>
  pop()<font></font>
}</code></pre><br>
<img src="https://habrastorage.org/webt/en/ya/ds/enyads2ckbcarldnouacdfmsz8m.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Queda por resolver el último problema: nuestro patrón comienza a aparecer desde las esquinas del cubo. </font><font style="vertical-align: inherit;">Para comenzar desde el centro, simplemente podemos agregar la mitad del ancho y la longitud del cubo al parámetro xey para desplazar el centro del inicio del dibujo del patrón.</font></font><br>
<br>
<pre><code class="javascript hljs">art.ellipse (x+<span class="hljs-number">200</span>,y+<span class="hljs-number">200</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);</code></pre><br>
<img src="https://habrastorage.org/webt/gw/cf/uy/gwcfuybz_4rc4eb7xclxv0b7x74.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si desea diversificar el patrón, puede intentar simplemente cambiar los parámetros o incluso agregar varios patrones de intersección, por ejemplo, de otro proyecto. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cómo recrear el efecto del patrón de muaré en la biblioteca p5.js para un principiante (guía rápida)</font></font></a><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">→ La idea y parte del código fuente se toma del artículo de Nazia Fakhruddin: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear textura 2D en una forma 3D en p5.js</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enlace a los resultados del proyecto</font></font></a></blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es505388/index.html">Treezor - Líder en servicios bancarios en Société Générale</a></li>
<li><a href="../es505390/index.html">Fundador de la comunidad F #: "La POO y la FA del cerebro deben morir" // Estamos condenados # 7</a></li>
<li><a href="../es505394/index.html">Antigüedades: Nokia E90, el último comunicador</a></li>
<li><a href="../es505398/index.html">Los lados oscuros y claros del trabajo en Yandex</a></li>
<li><a href="../es505400/index.html">¿Cómo deberían ser las modelos?</a></li>
<li><a href="../es505404/index.html">La forma más fácil de aprender inglés con videos TED</a></li>
<li><a href="../es505412/index.html">Acceso seguro a una casa inteligente en ausencia de una IP pública (parte 2)</a></li>
<li><a href="../es505416/index.html">MikroTik en modo repetidor, como One-Two-Three</a></li>
<li><a href="../es505418/index.html">[Pregunta] ¿Has visto personas que usan suscripciones de contenido móvil?</a></li>
<li><a href="../fr486176/index.html">Mémo de correspondance par e-mail d'entreprise</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>