<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⁉️ 🎨 🌴 Grafana、InfluxDB、2つのタグと1つの金額。または、サブグループの合計を計算する方法は？ 🤶🏼 🦗 👨🏾‍🎤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="みなさん、こんにちは！
 
 パフォーマンステストに従事。そして、私はモニタリングをセットアップしてGrafanaのメトリックを楽しむことが本当に好きです。また、ロードツールにメトリックを格納するための標準はInfluxDBです。でInfluxDB、 ：あなたはこのような人気のあるツールからのメトリ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Grafana、InfluxDB、2つのタグと1つの金額。または、サブグループの合計を計算する方法は？</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/raiffeisenbank/blog/490764/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/ol/b6/9a/olb69a8cdqhqtmjf-ic8x8qjevi.png"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
みなさん、こんにちは！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パフォーマンステストに従事。</font><font style="vertical-align: inherit;">そして、私はモニタリングをセットアップして</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のメトリックを楽しむことが本当に好き</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">です</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">また、ロードツールにメトリックを格納するための標準は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">で</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB、 </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">あなたはこのような人気のあるツールからのメトリックを保存することができます</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="  Apache.JMeter
Real-time results

In this document we will present the configuration setup to graph and historize the data in different backends:

 • InfluxDB setup for InfluxDBBackendListenerClient
 • InfluxDB setup for GraphiteBackendListenerClient
 • Grafana
 • Graphite"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache.JMeter</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="  Gatling
Realtime monitoring

The sections below describe how to configure Gatling with InfluxDB and Graphite, and use Grafana as a graphing library"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ガトリング</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="  LoadRunner Enterprise
Manage analysis servers

This section describes how to configure external analysis database servers to be used with LoadRunner Enterprise"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Loadrunner Enterprise</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="  Yandex.Tank
Modules / Artifact uploaders / InfluxDB

      Yandex.Tank  InfluxDB"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex.Tank</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パフォーマンステストツールとそれらのメトリックを使用して、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDBの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バンドル用の</font><b><font style="vertical-align: inherit;">一連</font></b><font style="vertical-align: inherit;">のプログラミングレシピを蓄積しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">2つ以上のタグを持つメトリックがある場合に発生する興味深い問題を検討することを提案します。</font><font style="vertical-align: inherit;">これは珍しいことではないと思います。</font><font style="vertical-align: inherit;">そして、一般的なケースでは、タスクは次のように聞こえ</font><font style="vertical-align: inherit;">ます。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サブグループに分割されたグループの合計メトリックを計算し</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3つのオプションがあります。 </font></font></h3><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Typeタグでグループ化された金額</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グラファナウェイ。</font><font style="vertical-align: inherit;">値のスタックを使用します</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サブクエリを使用した高値の合計</font></font></a></li>
</ol> <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての始まり</font></font></h2><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jolokia</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegraf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を使用して構成されたJVM MBean監視</font><font style="vertical-align: inherit;">。そして、彼はメモリプールのメトリックを視覚化しました-HEAP以降の各メモリプールによって割り当てられるメモリの量。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前日の13:00から当日の夜の01:00（期間12時間）までのJVMメモリプールとガベージコレクターアクティビティのグラフ。ここで、メモリプールが</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAPの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2つのグループに分割されていることがわかります</font><font style="vertical-align: inherit;">。そして17:00頃にガベージコレクションが行われ、その後メモリプールのサイズが減少しました。</font><font style="vertical-align: inherit;">
メモリプールのメトリックを収集するために、</font><b><font style="vertical-align: inherit;">telegraf</font></b><font style="vertical-align: inherit;">構成ファイルで</font><font style="vertical-align: inherit;">次の設定</font><font style="vertical-align: inherit;">を指定しました</font><font style="vertical-align: inherit;">：</font><b><font style="vertical-align: inherit;">telegraf.conf</font></b></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/ow/ow/os/owowosl0e-neglcsbew-0u7bjjq.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><br>
<pre><code class="apache hljs">[<span class="hljs-attribute">outputs</span>.influxdb]
  <span class="hljs-attribute">urls</span> =<span class="hljs-meta"> ["http://influxdb_server:8086"]</span>
  <span class="hljs-attribute">database</span> = <span class="hljs-string">"telegraf"</span>
  <span class="hljs-attribute">username</span> = <span class="hljs-string">"login-InfluxDb"</span>
  <span class="hljs-attribute">password</span> = <span class="hljs-string">"*****"</span>
  <span class="hljs-attribute">retention_policy</span> = <span class="hljs-string">"month"</span>
  <span class="hljs-attribute">influx_uint_support</span> = false<font></font>
<font></font>
[<span class="hljs-attribute">agent</span>]
  <span class="hljs-attribute">collection_jitter</span> = <span class="hljs-string">"2s"</span>
  <span class="hljs-attribute">interval</span> = <span class="hljs-string">"2s"</span>
  <span class="hljs-attribute">precision</span> = <span class="hljs-string">"s"</span><font></font>
<font></font>
[[<span class="hljs-attribute">inputs</span>.jolokia<span class="hljs-number">2</span>_agent]]
  <span class="hljs-attribute">username</span> = <span class="hljs-string">"login-Jolokia"</span>
  <span class="hljs-attribute">password</span> = <span class="hljs-string">"*****"</span>
  <span class="hljs-attribute">urls</span> =<span class="hljs-meta"> ["http://127.0.0.1:7777/jvm-service"]</span><font></font>
<font></font>
[[<span class="hljs-attribute">inputs</span>.jolokia<span class="hljs-number">2</span>_agent.metric]]
  <span class="hljs-attribute">paths</span> =<span class="hljs-meta"> ["Usage","PeakUsage","CollectionUsage","Type"]</span>
  <span class="hljs-attribute">name</span> = <span class="hljs-string">"java_memory_pool"</span>
  <span class="hljs-attribute">mbean</span> = <span class="hljs-string">"java.lang:name=*,type=MemoryPool"</span>
  <span class="hljs-attribute">tag_keys</span> =<span class="hljs-meta"> ["name"]</span><font></font>
<font></font>
[[<span class="hljs-attribute">processors</span>.converter]]<font></font>
  [<span class="hljs-attribute">processors</span>.converter.fields]
    <span class="hljs-attribute">integer</span> =<span class="hljs-meta"> ["CollectionUsage.*", "PeakUsage.*", "Usage.*"]</span>
    <span class="hljs-attribute">tag</span> =<span class="hljs-meta"> ["Type"]</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafanaで、</font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">への</font><font style="vertical-align: inherit;">クエリを</font><b><font style="vertical-align: inherit;">作成</font></b><font style="vertical-align: inherit;">し</font></font><b><code>Usage.Committed</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て、ステップ</font></font><b><code>$granularity</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（1m）の</font><font style="vertical-align: inherit;">ある期間の</font><font style="vertical-align: inherit;">最大メトリック値</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">グラフに表示し</font><font style="vertical-align: inherit;">、2つのタグ</font></font><b><code>Type</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（HEAPまたはNON_HEAP）と</font></font><b><code>name</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Metaspace、G1 Old Gen、...）</font><font style="vertical-align: inherit;">でグループ化しました</font><font style="vertical-align: inherit;">
。同じクエリテキスト形式で、すべての</font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;">変数を考慮に入れます</font><font style="vertical-align: inherit;">（変数値のエスケープに注意してください</font><font style="vertical-align: inherit;">-これはクエリが正しく機能するために重要です）：</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/qx/2z/-2/qx2z-2mblgxyi-u6g4mrbyvybf8.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><code>:regex</code></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">max</span>(<span class="hljs-string">"Usage.committed"</span>)
<span class="hljs-keyword">FROM</span> <span class="hljs-string">"telegraf"</span>.<span class="hljs-string">"month"</span>.<span class="hljs-string">"java_memory_pool"</span>
<span class="hljs-keyword">WHERE</span>
    host =~ /^${host:regex}$/ <span class="hljs-keyword">AND</span>
    jolokia_agent_url =~ /^${jolokia:regex}$/ <span class="hljs-keyword">AND</span><font></font>
    $timeFilter<font></font>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span>
    <span class="hljs-string">"Type"</span>, <span class="hljs-string">"name"</span>, <span class="hljs-built_in">time</span>($granularity)
</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
変数の特定の値を考慮に入れた、テキスト形式の同じクエリ</font><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">max</span>(<span class="hljs-string">"Usage.committed"</span>)
<span class="hljs-keyword">FROM</span> <span class="hljs-string">"telegraf"</span>.<span class="hljs-string">"month"</span>.<span class="hljs-string">"java_memory_pool"</span>
<span class="hljs-keyword">WHERE</span>
    host =~ /^serverName$/ <span class="hljs-keyword">AND</span>
    jolokia_agent_url =~ /^<span class="hljs-keyword">http</span>:\/\/<span class="hljs-number">127</span>\<span class="hljs-number">.0</span>\<span class="hljs-number">.0</span>\<span class="hljs-number">.1</span>:<span class="hljs-number">7777</span>\/jvm-service$/ <span class="hljs-keyword">AND</span>
    <span class="hljs-built_in">time</span> &gt;= <span class="hljs-number">1583834400000</span>ms <span class="hljs-keyword">and</span> <span class="hljs-built_in">time</span> &lt;= <span class="hljs-number">1583877600000</span>ms
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span>
    <span class="hljs-string">"Type"</span>, <span class="hljs-string">"name"</span>, <span class="hljs-built_in">time</span>(<span class="hljs-number">1</span>m)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
時間によるグループ化、</font></font><b><code>GROUP BY time($granularity)</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><b><code>GROUP BY time(1m)</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グラフ上のポイントの数を減らすために使用されます。</font><font style="vertical-align: inherit;">12時間の期間と1分のグループ化ステップの場合、12 x 60 = 720回または721ポイント（値がnullの最後のポイント）になります。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">721</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font><font style="vertical-align: inherit;">時間間隔（12時間）とグループ化ステップ（1分）の現在の設定で</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">への要求に応答して予想されるポイント数で</font><font style="vertical-align: inherit;">あることを覚えておいてください</font><font style="vertical-align: inherit;">。</font></font></blockquote> <br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
メモリ</font><b><font style="vertical-align: inherit;">プール：</font></b><font style="vertical-align: inherit;"> 20:00にメモリ消費量で</font><b><font style="vertical-align: inherit;">メタスペース</font></b><font style="vertical-align: inherit;">（青）が先行しています。</font><font style="vertical-align: inherit;">そして</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HEAPに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">よると</font><b><font style="vertical-align: inherit;">：G1 Old Gen</font></b><font style="vertical-align: inherit;">（黄色）は17:03に小さな局所的な急増がありました。</font><font style="vertical-align: inherit;">また、20：00の時点で、すべての</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プールは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.5 MiB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（113.2 + 45.9 + 13.4）を</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">残し</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><b><font style="vertical-align: inherit;">HEAP</font></b><font style="vertical-align: inherit;">プールは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">128 MiB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（67 + 57 + 4）</font><font style="vertical-align: inherit;">を</font><b><font style="vertical-align: inherit;">残しました</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/ku/mo/wf/kumowfdo6gkw3wx_b8mugtsp8l4.png"></a><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20:00の値を覚えておいてください：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プールは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.5 MiB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プールは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">128 MiB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">今後はこれらの価値観に注目していきます。</font></font></blockquote><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Type</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nameの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
コンテキストでは</font><font style="vertical-align: inherit;">、メトリック値を簡単に取得しました。</font><b><font style="vertical-align: inherit;">名前</font></b></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
タグのみのコンテキストで</font><font style="vertical-align: inherit;">は、メモリプールのすべての名前が一意であり、</font><b><font style="vertical-align: inherit;">名前</font></b><font style="vertical-align: inherit;">のみで結果のグループ化を残すだけで十分なので、メトリック値も簡単に取得でき</font><font style="vertical-align: inherit;">ます。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題は残ります：すべてのHEAPプールとすべてのNON_HEAPプールに合計でどのサイズが割り当てられるか？</font></font></blockquote><br>
<a name="1"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Typeタグでグループ化された金額</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1。</font><font style="vertical-align: inherit;">タグでグループ化された合計</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
頭に浮かぶ最初の解決策は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Type</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タグ</font><font style="vertical-align: inherit;">で値をグループ化し、各グループの値の合計を計算することです。</font><font style="vertical-align: inherit;">このようなクエリは次のように</font><b><font style="vertical-align: inherit;">なり</font></b><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">すべての</font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;">変数を使用</font><font style="vertical-align: inherit;">
して</font><b><font style="vertical-align: inherit;">Type</font></b><font style="vertical-align: inherit;">タグ</font><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">グループ化された合計計算リクエストのテキスト表現</font><font style="vertical-align: inherit;">：</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/xz/w_/4a/xzw_4aonrgekrw4onxv9fwcctlg.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">sum</span>(<span class="hljs-string">"Usage.committed"</span>)
<span class="hljs-keyword">FROM</span> <span class="hljs-string">"telegraf"</span>.<span class="hljs-string">"month"</span>.<span class="hljs-string">"java_memory_pool"</span>
<span class="hljs-keyword">WHERE</span>
    host =~ /^${host:regex}$/ <span class="hljs-keyword">AND</span>
    jolokia_agent_url =~ /^${jolokia:regex}$/ <span class="hljs-keyword">AND</span><font></font>
    $timeFilter<font></font>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span>
    <span class="hljs-string">"Type"</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは有効なクエリですが、2つのポイントのみを返します。合計は</font><font style="vertical-align: inherit;">、2つの値（HEAPとNON_HEAP）を持つ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Type</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タグによってのみグループ化されて計算されます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">スケジュールさえわかりません。</font><font style="vertical-align: inherit;">値の合計が大きい（3 TiBを超える）独立した点が2つあります：</font><font style="vertical-align: inherit;">
そのような合計は適切ではなく、時間間隔への分解が必要です。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/sz/lx/bo/szlxboh0o4r3-jsq7jg9d49wnic.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2。</font><font style="vertical-align: inherit;">1分あたりのタグでグループ化された量</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
元のクエリでは、カスタム</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$粒度</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">間隔でメトリックをグループ化しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ここで、カスタム間隔でグループ化を行います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このクエリが判明し、追加されました</font></font><b><code>GROUP BY time($granularity)</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><b><font style="vertical-align: inherit;">NON_HEAP</font></b><font style="vertical-align: inherit;"> 
によって172.5 MiBの代わりに膨らんだ値を取得します</font><b><font style="vertical-align: inherit;">。4.88GiB</font></b><font style="vertical-align: inherit;">が表示</font><font style="vertical-align: inherit;">され</font><font style="vertical-align: inherit;">
ます。メトリックは2秒ごとに1回（</font><font style="vertical-align: inherit;">上記の</font><b><font style="vertical-align: inherit;">telegraf.confを</font></b><font style="vertical-align: inherit;">参照）</font><font style="vertical-align: inherit;">InfluxDBに送信されるため</font><font style="vertical-align: inherit;">、1分間の測定値の合計では量が</font><font style="vertical-align: inherit;">わかり</font><font style="vertical-align: inherit;">ません現時点では、そのような30の金額の合計です。</font><font style="vertical-align: inherit;">
結果を定数</font><b><font style="vertical-align: inherit;">30で</font></b><font style="vertical-align: inherit;">割る</font><font style="vertical-align: inherit;">こともできません。</font><font style="vertical-align: inherit;">以来</font><b><font style="vertical-align: inherit;">$粒度は</font></b><font style="vertical-align: inherit;">パラメータであり、それは1分〜10分の両方に設定することができます。</font><font style="vertical-align: inherit;">そして金額の値が変わります。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/yb/xp/tw/ybxptwbmibq2xlujuuwbkwb83nq.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/9l/lo/hn/9llohn9ncpoztbtcsrfqzfzoqya.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3。</font><font style="vertical-align: inherit;">1秒あたりにグループ化されたタグ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在のメトリックコレクション強度（2秒）のメトリック値を正しく取得するには、メトリックコレクション強度を超えない固定間隔の量を計算する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
秒単位でグループ化した統計を表示してみましょう。</font></font><b><code>GROUP BY</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グループに</font><font style="vertical-align: inherit;">追加</font></font><b><code>time(1s)</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">
このような細かい粒度で、12時間の時間間隔（12時間* 60分* 60秒= 43,200間隔、1行あたり43,201ポイント、最後はnull）に対して膨大な数のポイントを取得します：</font><font style="vertical-align: inherit;">
43,201ポイントグラフの各行。</font><b><font style="vertical-align: inherit;">InfluxDB</font></b><font style="vertical-align: inherit;">が長い間応答を形成する</font><font style="vertical-align: inherit;">ほど多くの</font><b><font style="vertical-align: inherit;">ポイント</font></b><font style="vertical-align: inherit;">があり</font><font style="vertical-align: inherit;">、</font><b><font style="vertical-align: inherit;">Grfana</font></b><font style="vertical-align: inherit;">は応答に時間がかかり、ブラウザーはそのような膨大な数のポイントを長時間描画します。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/vn/sl/q_/vnslq_lq48mzzh9hgmjwiuvcy2i.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/_2/mw/4k/_2mw4ki9rcnf140m2doyqsn-zxy.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、毎秒ではなくポイントがあります。メトリックは2秒ごとに収集され、毎秒グループ化されます。つまり、毎秒のポイントはnullになります。滑らかな線を表示するには、空でない値の接続を構成します。それ以外の場合、グラフは表示されません。</font><font style="vertical-align: inherit;">
以前は、</font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;">は、多数のポイントの描画中にブラウザーがハングしていたようなものでした。現在、</font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;">のバージョンには</font><font style="vertical-align: inherit;">数万点を描画する機能があります。ブラウザはそれらのいくつかをスキップし、間引かれたデータを使用してグラフを描画します。しかし、グラフは滑らかになります。高値は平均高値として表示されます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/xx/ya/hf/xxyahfkl3xzk6ezsakvgsbi8lp4.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、グラフがあり、正確に表示され、20：00のメトリックが正しく計算され、グラフの凡例のメトリックが正しく計算されます。</font><font style="vertical-align: inherit;">しかし、グラフは平滑化されています。バーストは1秒の精度では表示されません。</font><font style="vertical-align: inherit;">特に、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 03 </font><font style="vertical-align: inherit;">の</font><b><font style="vertical-align: inherit;">HEAP</font></b><font style="vertical-align: inherit;">サージ</font><font style="vertical-align: inherit;">はチャートから消え、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チャートは</font><font style="vertical-align: inherit;">非常にスムーズです。</font><font style="vertical-align: inherit;">
パフォーマンス</font><font style="vertical-align: inherit;">の</font><font style="vertical-align: inherit;">マイナスは、より長い時間間隔で明らかに現れます。</font><font style="vertical-align: inherit;">12時間ではなく1か月（720時間）でグラフを作成しようとすると、すべてがこのような小さな粒度（1秒）でフリーズし、ポイントが多すぎます。</font><font style="vertical-align: inherit;">そして、ピークがない場合にはマイナスがあります。パラドックス- </font><b><font style="vertical-align: inherit;">メトリックを取得する精度が高いため、それらの表示の精度は低くなります</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/1g/vs/m8/1gvsm8owfg-ifjjcqwf-w1q2lbk.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a name="2"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Grafanaウェイ。</font><font style="vertical-align: inherit;">値のスタックを使用します</font></font></h2><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クエリ</font><b><font style="vertical-align: inherit;">デザイナー</font></b><font style="vertical-align: inherit;"> 
を</font><b><font style="vertical-align: inherit;">使用して、</font></b><font style="vertical-align: inherit;">シンプルで生産的なソリューションを</font><b><font style="vertical-align: inherit;">作成する</font></b><b><font style="vertical-align: inherit;">ことは</font></b><font style="vertical-align: inherit;">できませんでした。</font><font style="vertical-align: inherit;">元のグラフに</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示さ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">れたメトリック</font><b><font style="vertical-align: inherit;">を</font></b><font style="vertical-align: inherit;">要約するために、</font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;">ツールの使用のみを試み</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">そして、はい、これは可能です！</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1。</font><font style="vertical-align: inherit;">ホバーツールチップ/スタック値を作成するだけ：累積</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「すべての始まり」のセクションと同じように、メトリックを選択するリクエストは変更しません。</font><font style="vertical-align: inherit;">
メトリックは</font><b><font style="vertical-align: inherit;">タイプ</font></b><font style="vertical-align: inherit;">と</font><b><font style="vertical-align: inherit;">名前で</font></b><font style="vertical-align: inherit;">グループ化され</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">ただし、グラフの名前には</font><b><font style="vertical-align: inherit;">Type</font></b><font style="vertical-align: inherit;">タグのみを表示します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
視覚化設定では、メトリックを</font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;">スタック</font><b><font style="vertical-align: inherit;">ごとに</font></b><font style="vertical-align: inherit;">グループ化します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
最初に、2つのタグの分離を2つの異なるスタックAとBに追加して、それらの値が交差しないようにします。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/s5/an/3e/s5an3errkt29lgc8byme6tnowz4.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/ls/vg/to/lsvgtohynssezzeiy04px0qwq3c.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/no/py/5g/nopy5ggb9ittxbz2phdei1egphg.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シリーズのオーバーライド</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / HEAP / </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタック</font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">を追加</font></b><font style="vertical-align: inherit;">：A</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シリーズオーバーライド</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / NON_HEAP / </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタック</font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">を追加</font></b><font style="vertical-align: inherit;">：B</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、メトリックの視覚化を構成して、合計値をグラフ付きのツールチップに表示します。</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタッキングとヌル値</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタック</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：オン</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ホバーツールチップ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタック値</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：累積</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ホバーツールチップ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モード</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：シングル</font></font></li>
</ol><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
にはさまざまな機能が</font><font style="vertical-align: inherit;">あるため、この順序でアクションを実行する必要があります。</font><font style="vertical-align: inherit;">アクションの順序を変更したり、一部のフィールドをデフォルト設定のままにしたりすると、何かが機能しなくなります。</font></font><br>
<br>
<ul>
<li>    Stack <b>A</b>  <b>B</b>    <b>Stacking &amp; Null value</b> / <b>Stack</b>: On,    ;</li>
<li>  <b>Hover tooltip / Mode</b>    ,    <b>Single</b>,  <b>Hover tooltip</b>    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして今、私たちは自分自身のような多くの線を見ています。</font><font style="vertical-align: inherit;">だが！</font><font style="vertical-align: inherit;">一番上の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAPにカーソルを合わせる</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と、ツールチップにすべての</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAPの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値の合計が表示されます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">量はすでにによって、真とみなされ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafanaの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手段</font><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">
あなたはホバー名前を持つ最上位チャート上であれば</font><b><font style="vertical-align: inherit;">HEAP</font></b><font style="vertical-align: inherit;">、我々はによって金額が表示されます</font><b><font style="vertical-align: inherit;">HEAP</font></b><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">グラフは正しく表示されます。</font><font style="vertical-align: inherit;">17:03 </font><font style="vertical-align: inherit;">の</font><b><font style="vertical-align: inherit;">HEAP</font></b><font style="vertical-align: inherit;">サージ</font><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">さえも</font><font style="vertical-align: inherit;">見えます。</font><font style="vertical-align: inherit;">
正式には、タスクは完了しています。</font><font style="vertical-align: inherit;">
しかし、短所もあります。追加のグラフがたくさん表示されます。</font><font style="vertical-align: inherit;">カーソルをそれらの最上部に移動する必要があります。</font><font style="vertical-align: inherit;">そして、グラフの凡例には累積ではなく、個々の値が表示されるため、凡例は役に立たなくなっています。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/p9/tx/tw/p9txtwio9i4uozvliutk5_dg13o.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/g5/78/bo/g578boco1u0sncwf0jmh8ejsyow.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2。</font><font style="vertical-align: inherit;">積み上げ値：中間行を非表示にした累積</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前のソリューションの最初のマイナスを修正しましょう。余分なグラフが表示されていないことを確認してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このため：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">別の名前と値0の新しいメトリックを結果に追加します。</font></font></li>
<li><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">スタック</font></b><font style="vertical-align: inherit;">の一番上にある</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stack A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stack B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に新しいメトリックを追加</font><font style="vertical-align: inherit;">します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディスプレイから隠す</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAPの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元の行</font><font style="vertical-align: inherit;">。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リクエスト：私たちは、メインの要求の後に二つの新しいものを追加</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値が0と名前のシリーズを受信するための</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[NON_HEAP]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と要求</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値が0と名前のシリーズを受信するための</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[HEAP] </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">0を取得するには、各タイムグループの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「Usage.committed」</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィールドの最初の値を取得し、それを</font><font style="vertical-align: inherit;">差し引きます。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初（「Usage.committed」）-最初（「Usage.committed」）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -安定した0を取得します。グラフの名前は、意味を失うことなく変更されます角括弧のため：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[NON_HEAP]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[HEAP]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><b><font style="vertical-align: inherit;">[HEAP]</font></b><font style="vertical-align: inherit;">と</font><b><font style="vertical-align: inherit;">HEAPは</font></b><b><font style="vertical-align: inherit;">スタックA</font></b><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">結合され</font><font style="vertical-align: inherit;">、すべての</font><b><font style="vertical-align: inherit;">HEAP</font></b><font style="vertical-align: inherit;">も非表示になり</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">[NON_HEAP]</font></b></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/no/kh/0f/nokh0fb2fp1t_ictdthli2etylg.png"></a><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして、</font><font style="vertical-align: inherit;">組み合わせる</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAPの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中で</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタックB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非表示NON_HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><b><font style="vertical-align: inherit;">ゲット</font></b><font style="vertical-align: inherit;"> 
によって正しい金額を</font><b><font style="vertical-align: inherit;">[NON_HEAP] </font></b><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">ツールチップのチャート上にマウスを移動するとき</font><font style="vertical-align: inherit;">
、正しい金額を取得</font><b><font style="vertical-align: inherit;">[HEAP]</font></b><font style="vertical-align: inherit;">チャート上にマウスを移動するときツールチップに。</font><font style="vertical-align: inherit;">そして、すべてのバーストも表示されます。</font><font style="vertical-align: inherit;">
そして、スケジュールは迅速に形成されます。</font><font style="vertical-align: inherit;">しかし、凡例には常に0が表示され、凡例は役に立たなくなりました。</font><font style="vertical-align: inherit;">
すべてがうまくいきました！</font><font style="vertical-align: inherit;">真のバイパスは</font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;">スタックによるものです</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このため、この記事は「</font><b><font style="vertical-align: inherit;">異常なプログラミング」</font></b><font style="vertical-align: inherit;">カテゴリに追加されました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/uf/zw/7s/ufzw7sw-oxjflnzkglbilrdgmw4.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/ga/mh/nz/gamhnzyw1thhnbi5mflkwrlvr_i.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/p_/tp/ev/p_tpevfzm7rwkc1534vyhe92ozg.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a name="3"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.サブクエリを使用した高値の合計</font></font></h2><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDBの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
束を使って異常なプログラミングの道に</font><b><font style="vertical-align: inherit;">進ん</font></b><font style="vertical-align: inherit;">でいる</font><b><font style="vertical-align: inherit;">ので</font></b><font style="vertical-align: inherit;">、続けましょう。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDBに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">少数のポイントを返させ、凡例を表示さ</font><font style="vertical-align: inherit;">せましょう</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1最大値の累積合計の増分の合計</font></font></h3><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の可能性について</font><b><font style="vertical-align: inherit;">詳しく見ていき</font></b><font style="vertical-align: inherit;">ましょう</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以前は、累積量の導関数を使用することで手助けすることが多かったので、ここでこのアプローチを適用してみます。</font><font style="vertical-align: inherit;">リクエストの手動編集モードに切り替えましょう：</font><font style="vertical-align: inherit;">
そのようなリクエストを作成しましょう：</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/om/-b/yt/om-bytkvhp5zisny6gw5io_g2ba.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">sum</span>(<span class="hljs-string">"U"</span>) <span class="hljs-keyword">FROM</span> (
        <span class="hljs-keyword">SELECT</span> non_negative_difference(cumulative_sum(<span class="hljs-keyword">max</span>(<span class="hljs-string">"Usage.committed"</span>))) <span class="hljs-keyword">AS</span> <span class="hljs-string">"U"</span> 
        <span class="hljs-keyword">FROM</span> <span class="hljs-string">"month"</span>.<span class="hljs-string">"java_memory_pool"</span> 
        <span class="hljs-keyword">WHERE</span> <font></font>
            (<font></font>
                <span class="hljs-string">"host"</span> =~ /^${host:regex}$/ <span class="hljs-keyword">AND</span> 
                <span class="hljs-string">"jolokia_agent_url"</span> =~ /^${jolokia:regex}$/<font></font>
            ) <span class="hljs-keyword">AND</span> <font></font>
            $timeFilter <font></font>
        <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-built_in">time</span>($granularity), <span class="hljs-string">"Type"</span>, <span class="hljs-string">"name"</span><font></font>
)<font></font>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">"Type"</span>, <span class="hljs-built_in">time</span>($granularity)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、時間によるグループ内のメトリックの最大値が取得され、参照が開始した瞬間からのそのような値の合計が、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タグ</font><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タグでグループ化されています</font><font style="vertical-align: inherit;">。その結果、各瞬間にタイプ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ごとの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての表示（</font><b><font style="vertical-align: inherit;">HEAP</font></b><font style="vertical-align: inherit;">または</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）の合計がプール名で区切られますが、バージョン1.2の場合のように30の値は合計されませんが、最大値は1つだけです。</font><font style="vertical-align: inherit;">最後のステップ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
で</font><font style="vertical-align: inherit;">このような累積合計</font><font style="vertical-align: inherit;">の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non_negative_difference</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">増分を</font><font style="vertical-align: inherit;">取得する</font><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">、時間間隔の開始時に、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タグ</font><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タグ</font><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">グループ化されたすべてのデータプールの合計値が取得され</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今、タグのみで金額を取得するには</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプは</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、によってグループ化することなく、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タグを</font><font style="vertical-align: inherit;">、あなたは、しかしによってグループ化することなく、同様のグループ化パラメータを持つトップレベルの要求を作成する必要があります</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような複雑なクエリの結果、すべてのタイプの合計が得られます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完璧なスケジュール。</font><font style="vertical-align: inherit;">最大値の合計が正しく計算されます。</font><font style="vertical-align: inherit;">ゼロ以外の正しい値の凡例があります。</font><font style="vertical-align: inherit;">ツールチップでは、単一だけでなく、すべてのメトリックを表示できます。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バーストも表示され</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">
。1つだけですが、要求は困難であることが判明しました。グループ化レベルの変更による最大値の累積合計の増分の合計。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/an/yv/1t/anyv1t7m69cwrl6cnwgl-dwd7xy.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2グループ化レベルの変更による高値の合計</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バージョン3.1よりも簡単なことはできますか？ Pandoraのボックスはすでに開いています。手動クエリ編集モードに切り替えました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
累積量から増分を受け取ると、効果がゼロになり、一方が他方を消滅させるという疑いがあります。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non_negative_difference（cumulative_sum（...））</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を取り除き</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リクエストを簡略化します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グループ化レベルを下げて、最大値の合計をそのままにします。</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">sum</span>(<span class="hljs-string">"A"</span>)
<span class="hljs-keyword">FROM</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">max</span>(<span class="hljs-string">"Usage.committed"</span>) <span class="hljs-keyword">as</span> <span class="hljs-string">"A"</span>
    <span class="hljs-keyword">FROM</span> <span class="hljs-string">"month"</span>.<span class="hljs-string">"java_memory_pool"</span> 
    <span class="hljs-keyword">WHERE</span><font></font>
            (<font></font>
                <span class="hljs-string">"host"</span> =~ /^${host:regex}$/ <span class="hljs-keyword">AND</span> 
                <span class="hljs-string">"jolokia_agent_url"</span> =~ /^${jolokia:regex}$/<font></font>
            ) <span class="hljs-keyword">AND</span> <font></font>
            $timeFilter<font></font>
    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-built_in">time</span>($granularity), <span class="hljs-string">"Type"</span>, <span class="hljs-string">"name"</span><font></font>
)<font></font>
<span class="hljs-keyword">WHERE</span> $timeFilter
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-built_in">time</span>($granularity), <span class="hljs-string">"Type"</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、分でグループ化した場合、12時間でシリーズごとに721ポイントのみを返す簡単なクエリです。12（時間）* 60（分）= 720間隔、721ポイント（最後の空）。時間フィルターが重複していることに注意してください。これは、サブクエリでグループ化の要求にあります</font><font style="vertical-align: inherit;">
がなければ</font><b><font style="vertical-align: inherit;">$のTimeFilter、</font></b><font style="vertical-align: inherit;">外部結成要求で、返されたポイント数は、12時間で721であってもよいが、より多くのではないでしょう。サブクエリは、間隔のグループ化されているので</font><b><font style="vertical-align: inherit;">から</font></b><font style="vertical-align: inherit;"> ... </font><b><font style="vertical-align: inherit;">まで</font></b><font style="vertical-align: inherit;">フィルタなし、および外部リクエストのグルーピング間隔であろう</font><b><font style="vertical-align: inherit;">から</font></b><font style="vertical-align: inherit;"> ... </font><b><font style="vertical-align: inherit;">今</font></b><font style="vertical-align: inherit;">。そして、であれば</font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;">時間間隔が最後のX-時間が選択されていない（ようにではないこと</font><b><font style="vertical-align: inherit;">に</font></b><font style="vertical-align: inherit;"> = </font><b><font style="vertical-align: inherit;">今</font></b></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/8s/ab/tg/8sabtg9rebcu-tonmirjck2jdmk.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、ただし過去（</font><b><font style="vertical-align: inherit;">現在</font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">現在まで</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">の間隔</font><font style="vertical-align: inherit;">では、選択の最後にnull値を持つ空のポイントが表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果のグラフは、単純、高速、正確であることがわかりました。</font><font style="vertical-align: inherit;">要約メトリックを表示する凡例付き。</font><font style="vertical-align: inherit;">一度に複数行のツールチップ付き。</font><font style="vertical-align: inherit;">また、値のバーストをすべて表示することで、</font><font style="vertical-align: inherit;">
結果が得られます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/an/yv/1t/anyv1t7m69cwrl6cnwgl-dwd7xy.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照（参照の代わり）</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事で使用されているツールの分布：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グラファナ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（6.5.0）</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">influxdb</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（1.7.9）</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テレグラフ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（1.13.3）</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jolokia-jvm-1.6.2-agent.jar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（1.6.2）</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事で使用されているツールの機能に関するドキュメント：</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エッセンス</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明</font></font></th>
</tr>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保持ポリシー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDBデータ保持</font></font></a></td>
<td>Retention policy <b>montn</b>   30  ,     JVM    .       <b>auto</b>,     .   «  »   <b>telegraf.conf</b>      <b>InfluxDB</b>  ,      <b>Grafana</b></td>
</tr>
<tr>
<td>Telegraf / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">InfluxDB v1.x Output Plugin</a></td>
<td>    <b>Telegraf</b>  <b>InfluxDB</b>.     <b>telegraf.conf</b></td>
</tr>
<tr>
<td>Telegraf / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">agent / interval</a></td>
<td>   ,     2 .   «  »   <b>telegraf.conf</b>.   «1.2.       »  «1.3.       »</td>
</tr>
<tr>
<td>Java 8 / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Interface MemoryPoolMXBean</a></td>
<td>  MemoryPool,  ,     bool,  long.     <b>telegraf.conf</b>    int</td>
</tr>
<tr>
<td>Telegraf / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Jolokia2 Input Plugins</a></td>
<td>  <b>telegraf.conf</b>   MBean-,     <b>InfluxDB</b></td>
</tr>
<tr>
<td>Telegraf / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Converter Processor</a></td>
<td>  <b>telegraf.conf</b>,      <b>float</b>   <b>int</b>    <b>InfluxDB</b>.      <b>Type</b>   <b>Type</b>,        </td>
</tr>
<tr>
<td>Grafana / Variables / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Advanced Formatting Options / Regex</a></td>
<td> Grafana,    Multiselect    ,    ,     ,    <b><code>~ /^<u>${}</u>$/</code></b> — ,  <b><code>~ /^${<u>:regex</u>}$/</code></b></td>
</tr>
<tr>
<td>Grafana / Variables / Global Built-in Variables / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">The $timeFilter or $__timeFilter Variable</a></td>
<td> Grafana- <b>$timeFilter</b>,     </td>
</tr>
<tr>
<td>InfluxDB / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">MAX()</a></td>
<td>  <b>MAX()</b>  <b>InfluxDB</b> 1.7,       </td>
</tr>
<tr>
<td>InfluxDB / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">SUM()</a></td>
<td>    <b>SUM()</b>  <b>InfluxDB</b> 1.7</td>
</tr>
<tr>
<td>InfluxDB / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Subqueries</a></td>
<td>    <b>InfluxDB</b> 1.7,     3 </td>
</tr>
<tr>
<td>InfluxDB / Transformation / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">CUMULATIVE_SUM()</a></td>
<td>  <b>CUMULATIVE_SUM()</b>,        <b>InfluxDB</b>,    <b>NON_NEGATIVE_DERIVATIVE()</b></td>
</tr>
<tr>
<td>InfluxDB / Transformation / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">NON_NEGATIVE_DERIVATIVE()</a></td>
<td>  <b>NON_NEGATIVE_DERIVATIVE()</b>,     3 .     <b>CUMULATIVE_SUM()</b> —          3</td>
</tr>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Using Grafana’s Query Inspector to troubleshoot issues</a></td>
<td> <b>Query Inspector</b>,         ,        Grafana-</td>
</tr>
<tr>
<td>Grafana / Graph / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Draw Options</a></td>
<td>  Stack, Tooltip,…              «2. Grafana-way.   » </td>
</tr>
<tr>
<td>Grafana / Graph / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Series overrides</a></td>
<td>       (     )  <b>Grafana</b></td>
</tr>
</tbody></table></div><br>
<h2></h2><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の</font><b><font style="vertical-align: inherit;">組み合わせは</font></b><font style="vertical-align: inherit;">、パフォーマンステストエンジニアによく知られている必要があります。そして、このバンドルでは、多くの単純なタスクが非常に興味深いものであり、通常のプログラミング方法で常に解決できるとは限りません。</font><b><font style="vertical-align: inherit;">Grafanaの</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
機能</font><font style="vertical-align: inherit;">と</font><b><font style="vertical-align: inherit;">InfluxDB</font></b><font style="vertical-align: inherit;">クエリ</font><b><font style="vertical-align: inherit;">言語の</font></b><font style="vertical-align: inherit;">微妙な</font><font style="vertical-align: inherit;">機能</font><font style="vertical-align: inherit;">を使用</font><font style="vertical-align: inherit;">すると、異常なプログラミングスキルが必要になる場合があり</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
この記事では、1つのタグでグループ化されたメトリックを要約する実装を考慮して4つのステップが考慮されましたが、タグには複数のタグがあります。タスクは面白かった。そして、そのようなタスクはたくさんあります。</font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;">と</font><b><font style="vertical-align: inherit;">InfluxDB</font></b><font style="vertical-align: inherit;"> 
を</font><b><font style="vertical-align: inherit;">使用</font></b><font style="vertical-align: inherit;">した</font><font style="vertical-align: inherit;">プログラミングの機微に関するレポートを準備してい</font><b><font style="vertical-align: inherit;">ます</font></b></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このトピックに関する資料を定期的に公開します。</font><font style="vertical-align: inherit;">それまでの間、現在の記事についてのご質問をお待ちしております。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja490754/index.html">Visual Studioコードコードエディター。初心者向けプラグインのセットアップとインストールに関する最も詳細なガイド</a></li>
<li><a href="../ja490756/index.html">Jenkinsをコードとしてデプロイする</a></li>
<li><a href="../ja490758/index.html">数学者は乱流の普遍的な法則を証明しました</a></li>
<li><a href="../ja490760/index.html">レイキャスティングビジュアルサーチ（RCVS）。ジオメトリが似ている3Dモデルを見つけるためのシンプルで高速なアルゴリズム</a></li>
<li><a href="../ja490762/index.html">航空運賃を予測するには？</a></li>
<li><a href="../ja490766/index.html">初心者を理解する方法、希望する職業のために選択する言語は？</a></li>
<li><a href="../ja490768/index.html">コンピュータゲームが仕事の場合：クラウドゲームの内部デバイス</a></li>
<li><a href="../ja490770/index.html">技術的負債でダウン！TechLead Conf 2020では、その方法を紹介します</a></li>
<li><a href="../ja490772/index.html">Telegram Open Network（TON）でスマートコントラクトを作成して公開する方法</a></li>
<li><a href="../ja490774/index.html">レスポンシブ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>