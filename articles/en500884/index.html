<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😢 🧝🏾 🍋 Using VueJS with Django 👞 👈🏿 🤷🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A translation of the article was prepared ahead of the start of the Python Web Developer course .
 
 
 
 Introduction
 Now I am working on a very inte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Using VueJS with Django</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/500884/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A translation of the article was prepared ahead of the start of the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python Web Developer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> course </font><font style="vertical-align: inherit;">.</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/nl/l8/j3/nll8j3yukrxa2szuf4bjfx9dleu.png"><br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introduction</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Now I am working on a very interesting project. And everything is complicated in it, because the project itself is very large-scale, and I deal with it alone in my free time, while working full time. Therefore, I must be effective. Fortunately, I use Django with its </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“battery included”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> approach </font><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I use all the functionality of Django, which speeds up development, and I would not want to lose sight of its template engine. Therefore, the backend for Django and the frontend for JavaScript SPA are not an option for me. However, even the most avid backend developer must admit that some things need to be implemented on the client side. Minor user actions should not require a page reload. In addition, some parts of the web application that I create require a rather complicated user interaction. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By tradition, one could mix Django and jQuery to get the desired behavior. But now there are newer JavaScript technologies like </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">React</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vue</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Since our goal is to find a framework that we can use with Django without rewriting everything from scratch, we will use Vue as an easier alternative. </font><font style="vertical-align: inherit;">In this article, I will show you how to start using Vue with Django with minimal effort.</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation and setup</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 One of the reasons to use Vue is its excellent </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">It has many examples, a decent search and a clear table of contents. </font><font style="vertical-align: inherit;">The purpose of this article is to show that you can start using Vue in your Django projects right away without the complicated hours-long setup. </font><font style="vertical-align: inherit;">Therefore, we will use the simplest connection method </font></font><code>Vue.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, adding it with via the tag </font></font><code>&lt;</code><code>script&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;!-- development version, includes helpful <span class="hljs-built_in">console</span> warnings --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Now we are ready to create our first instance </font></font><code> Vue.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;div id=<span class="hljs-string">"app"</span>&gt;<font></font>
  {{ message }}<font></font>
&lt;/div&gt;</code></pre><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> Vue({
  <span class="hljs-attr">delimiters</span>: [<span class="hljs-string">"[["</span>, <span class="hljs-string">"]]"</span>],
  <span class="hljs-attr">el</span>: <span class="hljs-string">'#app'</span>,
  <span class="hljs-attr">data</span>: {
    <span class="hljs-attr">message</span>: <span class="hljs-string">'Hello Vue!'</span><font></font>
  }<font></font>
})</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 I took this example from the official getting started guide. </font><font style="vertical-align: inherit;">However, there is something else. </font><font style="vertical-align: inherit;">By default, Django and Vue use the same template tags. </font><font style="vertical-align: inherit;">Therefore, we need to explicitly separate Vue from Django to avoid conflicts with the Django template engine.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Access Django Data from Vue</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 The easiest way to get data is to use the built-in filter </font></font><code>jscon_script</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">This way, you can immediately start using your Django models as data for Vue instances. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In HTML:</font></font><br>
<br>
<pre><code class="xml hljs">{{ django_template_variable|json_script:"djangoData" }}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 And then in JavaScript we load the data into a variable:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> jsVariable = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'djangoData'</span>).textContent);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And she is ready for use with Vue:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">new</span> Vue({
  <span class="hljs-attr">delimiters</span>: [<span class="hljs-string">"[["</span>, <span class="hljs-string">"]]"</span>],
  <span class="hljs-attr">el</span>: <span class="hljs-string">'#app'</span>,
  <span class="hljs-attr">data</span>: jsVariable<font></font>
})</code></pre><br>
 <h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Running asynchronous requests on the backend</font></font></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 One of the most common tasks at the front end on Vue is to query the server application on the backend. With a full Django app, we don’t need to do this with every user action. In some cases, a full page reload is great, and the Django template system will provide all the benefits. But to improve the user experience and take full advantage of Vue, we may still need to make backend requests in some cases. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vue itself does not know how to handle requests. In this article I will use </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">axios</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as it is also recommended by official Vue documentation. </font><font style="vertical-align: inherit;">You can choose other alternatives. </font><font style="vertical-align: inherit;">To pass Django's CSRF protection mechanism, axios must include the appropriate cookie in its requests. </font><font style="vertical-align: inherit;">The easiest way is to set global axios values ​​by default:</font></font><br>
<br>
<pre><code class="javascript hljs">axios.defaults.xsrfCookieName = <span class="hljs-string">'csrftoken'</span>;<font></font>
axios.defaults.xsrfHeaderName = <span class="hljs-string">"X-CSRFTOKEN"</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 In addition, we can create an axios instance with the necessary settings:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> instance = axios.create({
    <span class="hljs-attr">xsrfCookieName</span>: <span class="hljs-string">'csrftoken'</span>,
    <span class="hljs-attr">xsrfHeaderName</span>: <span class="hljs-string">"X-CSRFTOKEN"</span>,<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Your Django template should contain a tag </font></font><code>{% csrf_token %}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or, alternatively, the corresponding view should use a decorator </font></font><code>ensure_csrf_cookie()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The rest of the default backend for a Django session for authentication will work out of the box, which means that you can annotate your services on the backend with things like </font></font><code>loginRequired</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this and it will just work. </font><font style="vertical-align: inherit;">To make a request, you can use axios:</font></font><br>
<br>
<pre><code class="django hljs"><span class="xml">axios.post('/django/backend/endpoint', {
    data: jsVariable 
})
    .then(function (response) {
        // handle response
    })
    .catch(function (error) {
        // handle error
    });</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 This call can be made from the </font></font><code>mounted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hook of the Vue instance or from any other place where you can put JavaScript code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you activated </font></font><code>CSRF_USE_SESSIONS  CSRF_COOKIE_HTTPONLY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django in the settings, you will need to read the CSRF token from the DOM. </font><font style="vertical-align: inherit;">To learn more about this, check out the official </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://docs.djangoproject.com/en/3.0/ref/csrf/&amp;usg=ALkJrhiU42Yn_Km8j0geJ7zQzs-rHG04xg#acquiring-the-token-if-csrf-use-sessions-or-csrf-cookie-"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> documentation </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 When you google about Django + Vue, most of the search results will be about how to use Django on the backend, and Vue for a separate project on the frontend. </font><font style="vertical-align: inherit;">Having two independent projects complicates the work, and you lose access to the Django template system, which in turn is a very effective way to save time. </font><font style="vertical-align: inherit;">On the other hand, access to a framework like Vue can do wonders in the world of web applications that go beyond CRUD functionality. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fortunately, we do not need to choose between them. </font><font style="vertical-align: inherit;">This guide shows that you can well keep up with two rabbits!</font></font><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Expanding Django</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (free webinar).</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en500866/index.html">Cloud Infrastructure Vulnerabilities</a></li>
<li><a href="../en500870/index.html">Adequate MVC for beginners and more</a></li>
<li><a href="../en500872/index.html">Cheap dirty trick that gave color graphics to the first home computers</a></li>
<li><a href="../en500874/index.html">Translation of Andrew Un's book, Passion for Machine Learning, Chapters 44 - 46</a></li>
<li><a href="../en500882/index.html">As I wrote the Japanese crossword puzzle in 4 hours</a></li>
<li><a href="../en500886/index.html">Book Python: Artificial Intelligence, Big Data, and Cloud Computing</a></li>
<li><a href="../en500888/index.html">Control cash transactions: how to avoid fraud</a></li>
<li><a href="../en500890/index.html">Top 100 fastest growing and falling quarantined items</a></li>
<li><a href="../en500892/index.html">py-to-js</a></li>
<li><a href="../en500896/index.html">What to see in quarantine? A selection of materials from Technostream (part 3)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>