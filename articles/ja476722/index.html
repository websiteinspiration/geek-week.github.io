<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👊🏼 🧔 😚 Apache NiFiでのフロー配信の自動化 🏂🏿 🌾 😾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="みなさん、こんにちは！
 
 
 
 タスクは次のとおりです。上の図に示すように、Apache NiFiを使用してNサーバーに展開する必要のあるフローがあります。フローテスト-ファイルが生成され、別のNiFiインスタンスに送信されています。データは、NiFiサイト間プロトコルを使用して送信されます。...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Apache NiFiでのフロー配信の自動化</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476722/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">みなさん、こんにちは！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jv/w6/ho/jvw6hodwifbfkov69ezswvjbx_k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクは次のとおりです。上の図に示すように、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache NiFiを使用</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">してNサーバーに展開する必要のあるフローがあります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">フローテスト-ファイルが生成され、別のNiFiインスタンスに送信されています。</font><font style="vertical-align: inherit;">データは、NiFiサイト間プロトコルを使用して送信されます。</font></font><br>
<a name="habracut"></a><br>
<hr><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NiFi Site to Site（S2S）は、安全で簡単にカスタマイズできる方法で、NiFiインスタンス間でデータを転送します。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> S2Sがどのように機能するかを</font><font style="vertical-align: inherit;">確認し、NiFiインスタンスを設定してS2Sを有効にすることを忘れないようにすることが重要</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">こちらを</font></a><font style="vertical-align: inherit;">参照して</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ください</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S2Sを使用したデータ転送の場合、1つのインスタンスはクライアント、2番目のサーバーと呼ばれます。</font><font style="vertical-align: inherit;">クライアントがデータを送信し、サーバーが送信します。</font><font style="vertical-align: inherit;">それらの間のデータ転送を構成する2つの方法：</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プッシュ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">クライアントインスタンスから、リモートプロセスグループ（RPG）を使用してデータが送信されます。</font><font style="vertical-align: inherit;">サーバーインスタンスでは、データは入力ポートを使用して受信されます。</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引き</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">サーバーはRPGを使用してデータを受信し、クライアントは出力ポートを使用して送信します。</font></font></li>
</ol></em><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ローリングのフローはApacheレジストリに格納されます。</font></font><br>
<br>
<hr><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache NiFiレジストリは、フローストレージとバージョン管理のためのツールを提供するApache NiFiのサブプロジェクトです。</font><font style="vertical-align: inherit;">一種のgit。</font><font style="vertical-align: inherit;">レジストリのインストール、構成、および操作に関する情報は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公式ドキュメントに記載</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">されてい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ストレージのフローはプロセスグループにまとめられ、レジストリにそのように格納されます。</font><font style="vertical-align: inherit;">さらに記事の中でこれに戻ります。</font></font><br>
</em><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初は、Nが小さい数である場合、フローは許容時間内に手動で配信および更新されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、Nの増加に伴い、さらに問題があります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フローの更新には時間がかかります。</font><font style="vertical-align: inherit;">すべてのサーバーに行く必要があります</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テンプレートの更新中にエラーが発生しました。</font><font style="vertical-align: inherit;">ここで更新しましたが、ここでは忘れました</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じタイプの操作を多数実行するときの人的エラー</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらすべてが、プロセスを自動化する必要があるという事実につながります。</font><font style="vertical-align: inherit;">この問題を解決するために次の方法を試しました。</font></font><br>
<br>
<ol>
<li> MiNiFi  NiFi</li>
<li>NiFi CLI</li>
<li>NiPyAPI</li>
</ol><br>
<h1> MiNiFi</h1><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache MiNiFy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Apache NiFi</font></a><font style="vertical-align: inherit;">のサブプロジェクトです。 MiNiFyは、NiFiと同じプロセッサを使用するコンパクトエージェントで、NiFiと同じフローを作成できます。とりわけ、MiNiFyにはフロー構成用のグラフィカルインターフェイスがないため、エージェントの軽さは実現されます。 MiNiFyにはグラフィカルインターフェイスがないため、フロー配信の問題をminifiで解決する必要があります。 MiNiFyはIOTで積極的に使用されているため、多くのコンポーネントがあり、最終的なminifiインスタンスにフローを配信するプロセスは自動化する必要があります。おなじみの仕事ですよね？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別のサブプロジェクトがこの問題の解決に役立ちます-MiNiFi C2サーバー。この製品は、ローリング構成のアーキテクチャーの中心となるように設計されています。環境の構成方法- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事で説明</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハブレと問題を解決するのに十分な情報。</font><font style="vertical-align: inherit;">MiNiFiはC2サーバーと連動して、自宅で構成を自動的に更新します。</font><font style="vertical-align: inherit;">このアプローチの唯一の欠点は、C2サーバーでテンプレートを作成する必要があることです。単純なレジストリコミットでは不十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の記事で説明したオプションは機能しており、実装するのは難しくありませんが、次のことを忘れないでください。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">minifiではnifiのすべてのプロセッサがあるわけではありません</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minifiのプロセッサバージョンは、NiFiのプロセッサバージョンよりも遅れています。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
執筆時点では、NiFiの最新バージョンは1.9.2です。</font><font style="vertical-align: inherit;">最新バージョンのMiNiFiのプロセッサバージョンは1.7.0です。</font><font style="vertical-align: inherit;">プロセッサーはMiNiFiに追加できますが、NiFiとMiNiFiプロセッサー間のバージョンの違いにより、これは機能しない場合があります。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NiFi CLI</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公式Webサイトのツール</font><font style="vertical-align: inherit;">
の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明から</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">判断すると</font><font style="vertical-align: inherit;">、これは、フロー配信またはプロセス制御の分野でNiFIとNiFiレジストリの相互作用を自動化するためのツールです。</font><font style="vertical-align: inherit;">開始するには、このツール</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をここから</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダウンロードする必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーティリティを実行する</font></font><br>
<br>
<pre><code class="plaintext hljs">./bin/cli.sh<font></font>
           _     ___  _<font></font>
 Apache   (_)  .' ..](_)   ,<font></font>
 _ .--.   __  _| |_  __    )\<font></font>
[ `.-. | [  |'-| |-'[  |  /  \<font></font>
|  | | |  | |  | |   | | '    '<font></font>
[___||__][___][___] [___]',  ,'<font></font>
                           `'<font></font>
          CLI v1.9.2<font></font>
<font></font>
Type 'help' to see a list of available commands, use tab to auto-complete.<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レジストリから必要なフローを読み込むために、バスケットの識別子（バケット識別子）とフロー（フロー識別子）自体を知る必要があります。</font><font style="vertical-align: inherit;">このデータは、cliまたはNiFiレジストリのWebインターフェイスで取得できます。</font><font style="vertical-align: inherit;">Webインターフェースでは、次のように</font></font><br>
<br>
<img src="https://habrastorage.org/webt/32/zw/e-/32zwe-t2p220zehsvlpy_1se6py.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なります。CLIを使用すると、</font><font style="vertical-align: inherit;">次のように</font><font style="vertical-align: inherit;">なります。</font></font><br>
<br>
<pre><code class="plaintext hljs">#&gt; registry list-buckets -u http://nifi-registry:18080<font></font>
<font></font>
#   Name             Id                                     Description<font></font>
-   --------------   ------------------------------------   -----------<font></font>
1   test_bucket   709d387a-9ce9-4535-8546-3621efe38e96   (empty)<font></font>
<font></font>
#&gt; registry list-flows -b 709d387a-9ce9-4535-8546-3621efe38e96 -u http://nifi-registry:18080<font></font>
<font></font>
#   Name           Id                                     Description<font></font>
-   ------------   ------------------------------------   -----------<font></font>
1   test_flow   d27af00a-5b47-4910-89cd-9c664cd91e85<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レジストリからプロセスグループのインポートを開始します。</font></font><br>
<br>
<pre><code class="plaintext hljs">#&gt; nifi pg-import -b 709d387a-9ce9-4535-8546-3621efe38e96 -f d27af00a-5b47-4910-89cd-9c664cd91e85 -fv 1 -u http://nifi:8080<font></font>
<font></font>
7f522a13-016e-1000-e504-d5b15587f2f3<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要な点は、プロセスグループをロールするホストとして任意のnifiインスタンスを指定できることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
停止したプロセッサーで追加されたプロセスグループ、開始する必要があります</font></font><br>
<br>
<pre><code class="plaintext hljs">#&gt; nifi pg-start -pgid 7f522a13-016e-1000-e504-d5b15587f2f3 -u http://nifi:8080
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すばらしい、プロセッサが起動しました。ただし、問題の状況によっては、他のインスタンスにデータを送信するためにNiFiインスタンスが必要です。サーバーにデータを転送するためにPushメソッドを選択したとします。データ転送を整理するには、フローに既に含まれている追加のリモートプロセスグループ（RPG）でデータ送信を有効にする（送信を有効にする）必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bh/7w/_m/bh7w_m1qbd_5pbookh6hex9nkqs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CLIおよびその他のソースのドキュメントでは、データ転送を有効にする方法が見つかりませんでした。これを行う方法を知っている場合は、コメントに書き込んでください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
bashがあり、最後に行く準備ができているので、出口を見つけるでしょう！この問題を解決するには、NiFi APIを使用できます。次の方法を使用して、上記の例からIDを取得します（この場合は7f522a13-016e-1000-e504-d5b15587f2f3です）。 NiFi APIメソッドの説明は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちら</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ii/nx/9c/iinx9ckcphh4vdld6_8vwjra8mc.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本文では、次の形式のJSONを渡す必要があります。</font></font><br>
<br>
<pre><code class="plaintext hljs">{<font></font>
    "revision": {<font></font>
	    "clientId": "value",<font></font>
	    "version": 0,<font></font>
	    "lastModifier": "value"<font></font>
	},<font></font>
    "state": "value",<font></font>
    "disconnectedNodeAcknowledged": true<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
機能するために入力する必要があるパラメータ：</font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -データ転送ステータス。</font><font style="vertical-align: inherit;">送信がオフで停止し、データ転送、有効に利用できる</font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バージョンを</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -バージョンバージョンプロセッサが</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作成したときに0にデフォルト設定されますが、これらのパラメータはメソッドを使用して取得することができる</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5x/ul/nv/5xulnvdp0w9a-jtf3oqapfbdghs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
のbashスクリプトの愛好家には、この方法では、適切なように見えるかもしれないが、それは私のために難しい-のbashスクリプトは私のお気に入りではありません。</font><font style="vertical-align: inherit;">私の意見では、次の方法がより興味深く、快適です。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NiPyAPI</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NiPyAPIは、NiFiインスタンスとやり取りするためのPythonライブラリです。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントページ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">には、ライブラリの操作に必要な情報が含まれています。</font><font style="vertical-align: inherit;">クイックスタートは</font><font style="vertical-align: inherit;">github </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明され</font><font style="vertical-align: inherit;">てい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
構成をロールアウトするためのスクリプトはPythonプログラムです。</font><font style="vertical-align: inherit;">コーディングに移ります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今後の作業のために構成を構成します。</font><font style="vertical-align: inherit;">次のパラメータが必要です。</font></font><br>
<br>
<pre><code class="plaintext hljs">nipyapi.config.nifi_config.host = 'http://nifi:8080/nifi-api' #  nifi-api ,    process group<font></font>
nipyapi.config.registry_config.host = 'http://nifi-registry:18080/nifi-registry-api' #  nifi-registry-api registry<font></font>
nipyapi.config.registry_name = 'MyBeutifulRegistry' # registry,      nifi<font></font>
nipyapi.config.bucket_name = 'BucketName' # bucket,    flow<font></font>
nipyapi.config.flow_name = 'FlowName' # flow,  <font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、このライブラリのメソッドの名前を挿入し</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ここで</font></a><font style="vertical-align: inherit;">説明し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レジストリをnifiインスタンスに接続します</font></font><br>
<br>
<pre><code class="plaintext hljs">nipyapi.versioning.create_registry_client</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このステップでは、レジストリがインスタンスにすでに追加されているかどうかのチェックを追加することもできます。これには、メソッドを使用できます。 </font></font><br>
<br>
<pre><code class="plaintext hljs">nipyapi.versioning.list_registry_clients</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バスケットを見つけて、バスケット内の流れをさらに検索します。</font></font><br>
<br>
<pre><code class="plaintext hljs">nipyapi.versioning.get_registry_bucket</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フローの検索バケット</font></font><br>
<br>
<pre><code class="plaintext hljs">nipyapi.versioning.get_flow_in_bucket</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、このプロセスグループがすでに追加されているかどうかを理解することが重要です。プロセスグループは座標に配置され、2つ目のコンポーネントが1つのコンポーネントの上に重ねられると、状況が発生する可能性があります。私はチェックしました、これは次のようになります:)すべてのプロセスグループを追加するには、メソッドを使用します</font></font><br>
<br>
<pre><code class="plaintext hljs">nipyapi.canvas.list_all_process_groups</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、たとえば名前で検索できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テンプレートを更新するプロセスについては説明しません。新しいバージョンのテンプレートにプロセッサが追加された場合、キュー内のメッセージの存在に問題はないというだけです。</font><font style="vertical-align: inherit;">ただし、プロセッサが削除されると、問題が発生する可能性があります（メッセージキューがプロセッサの前に蓄積されている場合、nifiではプロセッサを削除できません）。</font><font style="vertical-align: inherit;">私がこの問題をどのように解決したかに興味があるなら、私に書いてください、この点について話し合います。</font><font style="vertical-align: inherit;">記事の最後に連絡してください。</font><font style="vertical-align: inherit;">プロセスグループを追加する手順に進みましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スクリプトをデバッグしているときに、最新バージョンのフローが常にプルアップされるわけではない機能に出くわしたので、このバージョンを最初に明確にすることをお勧めします。</font></font><br>
<br>
<pre><code class="plaintext hljs">nipyapi.versioning.get_latest_flow_ver</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
展開プロセスグループ：</font></font><br>
<br>
<pre><code class="plaintext hljs">nipyapi.versioning.deploy_flow_version</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロセッサーを開始します。</font></font><br>
<br>
<pre><code class="plaintext hljs">nipyapi.canvas.schedule_process_group</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CLIブロックでは、リモートプロセスグループでデータ転送が自動的にオンにならないと書かれていますか？スクリプトを実装するときに、この問題にも遭遇しました。当時、私はAPIを使用してデータ転送を開始することに成功していなかったため、NiPyAPIライブラリの開発者に連絡してアドバイス/ヘルプを求めることにしました。開発者が私に答えて、問題について話し合い、「何かをチェックする」ために時間が必要だと彼は書いた。そして今、数日後、私の起動問題を解決するPython関数が書かれた手紙が届きます!!!当時、NiPyAPIのバージョンは0.13.3でしたが、もちろんそのようなものはありませんでした。しかし、最近リリースされたバージョン0.14.0では、この関数はすでにライブラリに含まれています。会う</font></font><br>
<br>
<pre><code class="plaintext hljs">nipyapi.canvas.set_remote_process_group_transmission</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこで、NiPyAPIライブラリを使用して、レジストリを接続し、フローをローリングし、さらにプロセッサとデータ転送を開始しました。次に、コードを組み合わせて、あらゆる種類のチェック、ロギングを追加できます。これですべてです。しかし、これはまったく別の話です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私が検討した自動化オプションのうち、後者が最も効率的であるように思えました。最初に、それはまだ補助的なプログラムコードを埋め込んでプログラミング言語を最大限に活用できるpythonコードです。第2に、NiPyAPIプロジェクトは積極的に開発中であり、問​​題が発生した場合は開発者に連絡することができます。第三に、NiPyAPIは、複雑な問題を解決するためにNiFiと対話するためのより柔軟なツールです。たとえば、メッセージキューが現在フロー内で空であるかどうか、およびプロセスグループを更新できるかどうかを判断します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで全部です。</font><font style="vertical-align: inherit;">NiFiでフロー配信を自動化する3つのアプローチ、開発者が遭遇する可能性のある落とし穴について説明し、配信を自動化するための実用的なコードを提供しました。</font><font style="vertical-align: inherit;">あなたがこのトピックと同じくらい興味があるなら- </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">書いてください！</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja476710/index.html">登録受付中：火星でのITの詳細</a></li>
<li><a href="../ja476712/index.html">見知らぬ人とのランダムなミーティングのためのサービスですが、デートはしません。ランダムコーヒーのスタートアップ履歴</a></li>
<li><a href="../ja476714/index.html">Mail.ru Mailでの機械学習の操作</a></li>
<li><a href="../ja476718/index.html">全国ラジオの歴史：地方ラジオのムッソリーニとジョセフ・ゲッベルスの暖かいランプ</a></li>
<li><a href="../ja476720/index.html">履歴書段階で潜在的な従業員を識別する方法</a></li>
<li><a href="../ja476724/index.html">Mac Pro 1.1にVMware ESXiをインストールする</a></li>
<li><a href="../ja476726/index.html">イノポリス大学の卒業生、グルノーブル大学での勉強、AI、英語とフランス語、ナンキンムシとチーズ</a></li>
<li><a href="../ja476728/index.html">B2B企業のコンテンツ戦略：ケースとチェックリスト</a></li>
<li><a href="../ja476734/index.html">ハードドライブの自己診断とデータ復旧</a></li>
<li><a href="../ja476736/index.html">脅威ハンターの狩猟：有能な専門家を見つけて訓練する方法？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>