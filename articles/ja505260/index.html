<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧗🏾 🙍🏽 😤 光学センサーを使用してキーボードからフォトンまでの遅延を測定する ↗️ 🧑🏼 🧒🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="コンピューターとインターフェイスの応答時間または遅延を測定するために、Is It Snappyアプリを高速iPhoneカメラで使用して、キーを押してから画面が変化するまでのフレームをカウントしました。ただし、問題は目でタイミングの正確なフレームを決定することであり、これは多くのテストを実行するときに...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>光学センサーを使用してキーボードからフォトンまでの遅延を測定する</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505260/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンピューターとインターフェイスの応答時間または遅延を測定するために、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is It Snappy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリ</font><font style="vertical-align: inherit;">を高速iPhoneカメラで使用して、キーを押してから画面が変化するまでのフレームをカウントしました。ただし、問題は目でタイミングの正確なフレームを決定することであり、これは多くのテストを実行するときに厄介です。また、結果のばらつきを測定することも困難になります。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USB経由でイベントを送信した後にLEDの色を変更するモードをキーボードファームウェアに追加することで、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらのテストを既に簡略化してい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">が、これにより速度と精度がわずかに向上します。もっと良いものが欲しいです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だから友達の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ラファの</font></a><font style="vertical-align: inherit;">足跡をたどって</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キーボードイベントを送信するハードウェア遅延テスターを作成し、光学センサーを使用して画面の変更にかかる時間を測定しました。</font><font style="vertical-align: inherit;">それは非常に簡単でした。この記事では、結果の一部と、高品質の遅延テストの難しさ、および独自のテスターを作成する方法について説明します。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私のテスターは、Amazonの光センサーに基づいています。</font><font style="vertical-align: inherit;">それは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teensy LC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マイクロコントローラーに接続された調整可能な三脚に取り付けられており、</font><font style="vertical-align: inherit;">'a'を押して光レベルが変化するのを待ち、文字を削除してから、ボタンを押しながらサンプルを収集し続けます。</font><font style="vertical-align: inherit;">ボタンを短く押すと、次のような美しい遅延のヒストグラムが表示されます。</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">緯度i = 60.3 +/- 9.3、a = 60、d = 59（n = 65、q = 41）| </font><font style="vertical-align: inherit;">239_ |</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この線は、挿入の平均遅延（</font></font><code>i=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、削除（</font></font><code>d=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）とそれらを組み合わせた（</font></font><code>a=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、挿入時間の標準偏差（</font></font><code>+/-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、測定数（</font></font><code>n=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）と品質（</font></font><code>q=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、</font><font style="vertical-align: inherit;">および</font><font style="vertical-align: inherit;">小さなASCIIヒストグラムを示します。各シンボルはフラグメント（バケット）を表します）10ミリ秒で、1から9までの数字は、このバケットがどの程度いっぱいであるかを比例的に表します。シンボル</font></font><code>_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、少なくとも1つのサンプルを持つバケットを意味しますが、9番目のバケットを満たすのに十分ではないため、これは、ランダムなサンプルの数が少ない遅延テールです。これは次のようなものです（写真モニターでは縦向きモードでしたが、すべてのテストは横向きモードで行われました）。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/415/1f5/016/4151f5016c68014682c8e09eac08b240.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、ボタンをもう一度押すとすべての測定結果が表示されるようにしました。</font></font><code>[35, 35, 33, 44]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グラフを生成できるように：</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/326/7b9/7ef/3267b97ef54e907c5d656dd0b7ae75d2.png"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">応答時間を監視する</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私のお気に入りの結果セットから始めます。</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つの4kモニターでの崇高なテキスト、macOS、注意散漫のないフルスクリーンモード：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緯度i = 35.3 +/- 4.7、a = 36、d = 36（n = 67、q = 99）| </font><font style="vertical-align: inherit;">193 | </font><font style="vertical-align: inherit;">デルP2415Qトップ</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緯度i = 52.9 +/- 5.0、a = 53、d = 54（n = 66、q = 45）| </font><font style="vertical-align: inherit;">_391 | </font><font style="vertical-align: inherit;">Dell P2415Qボトム</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緯度i = 65.1 +/- 5.0、a = 64、d = 63（n = 109、q = 111）| </font><font style="vertical-align: inherit;">_292 | </font><font style="vertical-align: inherit;">HP Z27トップ</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緯度i = 79.7 +/- 5.0、a = 80、d = 80（n = 98、q = 114）| </font><font style="vertical-align: inherit;">89_ | </font><font style="vertical-align: inherit;">HP Z27ボトム</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここに見るものがあります：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まず、固定幅ヒストグラムの単一行フォーマットでは、すべての結果をテキストファイルに並べて配置し、比較のためにフラグを付けることができます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">60 Hzのフレームのラインのスキャン時間により、画面の上部と下部の応答時間の間に予想される16 msの差が見られます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準偏差は</font><font style="vertical-align: inherit;">、画面の更新時間が16ミリ秒である結果の均一な分布</font><font style="vertical-align: inherit;">からの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.6ミリ秒</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と大差ありません</font><font style="vertical-align: inherit;">。</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HP Z27の応答時間は、Dell P2415Qよりも約30ミリ秒長くなっています。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして、この測定は、シンボルの表示の最初までです。</font><font style="vertical-align: inherit;">Z27ではフルディスプレイにも時間がかかると思います。</font><font style="vertical-align: inherit;">つまり、SublimeエディターのZ27では、全体の遅延のほぼ半分がモニターからの追加の遅延です！</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事の残りの部分にあるすべての測定は、Dell P2415Qで行われました。</font><font style="vertical-align: inherit;">両方のモニターの応答時間は「高速」で、Z27の応答時間設定はさらに高速ですが、最初から最後までの遷移時間（遷移時間）にのみ影響し、醜いゴーストトラックが発生しますが、初期遅延を減らすことはできません。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">測定の難しさ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
よく知られているほとんどの方法では、遅延の品質を測定することは実際にはあなたが考えるよりも困難です。</font><font style="vertical-align: inherit;">現実的な結果を得るために、ほとんどの実験者よりも多くの努力をしましたが、最初の数回はすべてが失敗したため、エラーを修正する必要がありました。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実際のエンドツーエンドの遅延測定</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ハードウェアテスターを使用する主な理由は、エンドツーエンドの遅延を測定するための多くの不完全で誤った方法があるためです。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">「私たちは喜んで印刷します」</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
という有名で本当に素晴らしい記事があります</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">優れた分析と美しいグラフ。異なるオペレーティングシステムでのさまざまなテキストエディターの遅延を比較します。しかし、著者は、システムAPIを使用して入力イベントとスクリーンスクレイピングをシミュレートすることで測定を実装しました。私自身は繰り返し測定を行わなかったので、特に問題はありませんが、このアプローチには多くの潜在的な問題があります。たとえば、CPUで画面バッファをチェックすると、キャプチャが機能する場合があるウィンドウバッファのコピーが原因で、GPUでレンダリングするアプリケーションを不当に不利にする可能性があります。入力のシミュレーションは、実際のキーストロークとは異なる方法で実行できます。それにもかかわらず、本当に高品質の測定と客観的な結果の場合でも（そして、スルーテストで確認しないと、これを本当に確信することはできません）、これらの結果では、最初から最後までの完全な応答時間がわかりません。これは、実際の経験にとって重要です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1000 Hz USBポーリング</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーが経験する遅延の原因の1つですが、テスターでは測定しませんが、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キーボードの遅延</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">多くのキーボードは、</font><font style="vertical-align: inherit;">8ミリ秒のUSBポーリング間隔、低いキーボードグリッドスキャン速度、遅いファームウェア、そして物議を醸す機械設計により</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、以前のキーボードと同様に、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">測定した応答時間を2倍にすることができ</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キーボードをエミュレートするための低分散の遅延テスターを構築するには、マイクロコントローラーだけを使用することはできません。通常、125 Hzの周波数を持つデフォルトのポーリングがあります。</font><font style="vertical-align: inherit;">私の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teensy LC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マイクロコントローラー</font><font style="vertical-align: inherit;">は、デフォルトで1000 Hzを使用する数少ないものの1つです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">良好な信号レベルを確保する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初、テスターを応答時間用に設計したとき、信号強度をまったく測定していませんでした。最後に、私は混乱しました。同じアプリケーションで、同じ画面のわずかに異なるシナリオでは、まったく異なる結果が得られました。私はいくつかのテストを行いましたが、センサーの配置が不十分な小さなフォントでは信号が非常に弱いことがあり、センサーはシンボルの出力の最後でのみ機能しますが、最初は機能するはずです（これは独自の難しい主観的な選択です）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファームウェアを書き込む前であっても、Arduinoプロッターを使用して結果を出力し、ミリ秒ごとに光センサーの簡単なポーリングを実行したため、理由はディスプレイの最初から最後まで完全に移行するときであることを知っていました。文字を入力して削除するだけで、信号を確認できます。光学センサーとモニターの組み合わせによっては、完全な移行にほぼ100ミリ秒かかることがわかります。しかし、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is It Snappy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用</font><font style="vertical-align: inherit;">したビデオ録画で</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">は</font></a><font style="vertical-align: inherit;">、Z27モニターでの完全な移行にかかる時間がわずか20ミリ秒であるという印象を与えます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d32/500/02b/d3250002bac009103ed40a5c47cb56bc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
補正のために、完全な遷移の後にピークからピークまでの信号強度の測定を追加して、遷移の開始までの5つのステップでしきい値に対して適切な測定分解能が得られることを確認しました。これはあなたが後に見る数です</font></font><code>q=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">結局のところ、大きなフォントサイズと高い画面輝度を設定することは非常に重要です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小さな違いからの強いばらつき</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
測定オブジェクトのわずかな違いが重大な遅延の違いにつながる可能性があります。たとえば、複雑な選択文法とオートコンプリートポップアップを含む大きなファイルと比較して、小さなファイルでテキストを選択するときのSublimeとVSCodeの応答時間に大きな違いがあるかどうかを確認したいと思いました。もちろん違いがあります。しかし、値の変動に気づいたとき、さらにいくつかのテストを行ったところ、空行に「a」を入力する場合と、前の「a」の後に「a」を入力する場合（「aa」）とでは、応答時間が大きく異なります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、</font><font style="vertical-align: inherit;">6199行の</font><font style="vertical-align: inherit;">大きな</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parser.rs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">3469</font></a><font style="vertical-align: inherit;">行目の後に新しい行を作成した結果です</font><font style="vertical-align: inherit;">。すべての結果は、Dellモニターの下部に近いセンサーを同様に配置した後に取得されます。</font></font><br>
<br>
<pre>lat i= 40.2 +/-   4.1, a= 40, d= 39 (n= 38,q= 90) |  _89           | sublime small .txt<font></font>
<font></font>
lat i= 41.2 +/-   6.9, a= 41, d= 42 (n= 54,q= 92) |   992          | sublime aa parser.rs<font></font>
lat i= 43.6 +/-   6.1, a= 43, d= 42 (n= 48,q=100) |   492          |<font></font>
lat i= 52.2 +/-   6.0, a= 52, d= 52 (n= 26,q=100) |    49          |<font></font>
lat i= 44.3 +/-   5.6, a= 43, d= 42 (n= 45,q=100) |   391          |<font></font>
lat i= 42.7 +/-   7.6, a= 42, d= 42 (n= 46,q=100) |  _491          |<font></font>
<font></font>
lat i= 48.1 +/-   6.8, a= 49, d= 50 (n= 43,q= 89) |   269          | sublime a parser.rs<font></font>
lat i= 43.9 +/-   5.4, a= 48, d= 52 (n= 32,q= 97) |   197          |<font></font>
lat i= 47.8 +/-   8.4, a= 49, d= 49 (n= 29,q= 97) |   197_         |<font></font>
lat i= 46.1 +/-   6.8, a= 47, d= 49 (n= 42,q= 97) |   196_         |<font></font>
<font></font>
lat i= 63.3 +/-   9.3, a= 63, d= 62 (n= 68,q=118) |    _963__      | vscode aa parser.rs<font></font>
lat i= 63.6 +/-   7.6, a= 64, d= 65 (n= 71,q=139) |    _49__     _ |<font></font>
lat i= 62.3 +/-   6.3, a= 61, d= 59 (n= 52,q=132) |    _791        |<font></font>
lat i= 62.0 +/-   5.8, a= 61, d= 60 (n= 40,q=111) |    _49_        |<font></font>
lat i= 61.9 +/-   9.7, a= 62, d= 61 (n= 35,q=111) |     981_       |<font></font>
<font></font>
lat i= 53.1 +/-   7.7, a= 51, d= 49 (n= 54,q=116) |   _79__        | vscode a parser.rs<font></font>
lat i= 52.2 +/-   6.3, a= 52, d= 51 (n= 41,q=133) |    692         |<font></font>
lat i= 53.2 +/-   7.8, a= 52, d= 52 (n= 57,q=134) |    591_        |<font></font>
lat i= 52.1 +/-   7.1, a= 52, d= 52 (n= 55,q=134) |    591_        |</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
効果を確認するために、さまざまな時間にわずかな変動を加えて多くの測定を行いました。ご覧のとおり、同じシナリオでも次元間にいくつかの違いがありますが、単に「a」を入力することと、既存の「a」の後に「a」を追加することの間には、はるかに多くのバリエーションがあります。</font></font><code>a=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">挿入と削除の両方の結果を含む</font><font style="vertical-align: inherit;">列を見て、</font><font style="vertical-align: inherit;">ノイズが最も少ないようにします。 Sublimeは、シーケンスの2番目の文字を最初の文字よりも速く「aa」に入力し、VSCodeは逆に入力します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どちらのエディターでも、「aa」を使用すると、オートコンプリートポップアップウィンドウが表示され、2つのリストと文字「a」の間のオプションを選択するために非表示になります。</font><font style="vertical-align: inherit;">ポップアップオートフィルウィンドウの開閉には時間がかかるため、Sublimeは「a」の場合は遅いと考えられますが、「aa」の場合と挿入時と削除時の両方でVSCodeが遅い理由の明確なバージョンはありません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">画面更新との同期</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、標準偏差が疑わしいほど低いことに気付きました。画面の更新間隔が16ミリ秒であるため、論理的には4.6ミリ秒を超えるはずですが、標準偏差が1ミリ秒になることもあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードを確認したところ、測定値が画面の更新と誤って同期していることがわかりました。各測定の後、ファームウェアは正確に300ミリ秒待ってから、「a」を再度入力するか、記号を削除して次の測定を行います。これは、画面が更新されてから約300 ms後に入力データが常に送信され、同じ更新間隔にかなり確実に落ち込んだことを意味します。この問題は、測定間に50 msのランダムな遅延を追加することで修正されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基本的に、このエラーにより偏差が小さすぎますが、入力イベントがフレームの最後に到着したときにアプリケーションがレンダリングの期限をスキップした場合、平均値が不正確になる可能性があります。</font><font style="vertical-align: inherit;">この記事のテスト中にこれを発見し、以前のすべてのテストを繰り返すことができなくなったため、場所によっては偏差値が低いことに気付く場合があります。</font><font style="vertical-align: inherit;">しかし、SublimeやVSCodeなどの重要なテストの平均を再確認しました。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テキストエディター</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じプレーンテキストファイルで複数のテキストエディタの応答時間をテストしました。</font><font style="vertical-align: inherit;">しかし、上で述べたように、テストはrassinhronを実装する前に行われ、ジッターによって画面を更新しました。</font><font style="vertical-align: inherit;">SublimeとVSCodeについてのみ、繰り返しテストが行​​われました。</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">緯度i = 32.5 +/- 4.0、a = 34、d = 35（n = 38、q = 78）| </font><font style="vertical-align: inherit;">9_ | </font><font style="vertical-align: inherit;">崇高なテキスト</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緯度i = 33.4 +/- 1.4、a = 33、d = 33（n = 68、q = 23）| </font><font style="vertical-align: inherit;">_9 | </font><font style="vertical-align: inherit;">テキスト編集</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緯度i = 47.6 +/- 7.0、a = 47、d = 47（n = 71、q = 130）| </font><font style="vertical-align: inherit;">219 | </font><font style="vertical-align: inherit;">vscode</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緯度i = 34.2 +/- 3.5、a = 34、d = 33（n = 57、q = 37）| </font><font style="vertical-align: inherit;">9 _ | </font><font style="vertical-align: inherit;">Chrome HTML入力</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緯度i = 33.2 +/- 1.1、a = 33、d = 33（n = 55、q = 30）| </font><font style="vertical-align: inherit;">9 | </font><font style="vertical-align: inherit;">在庫mac emacs</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緯度i = 45.6 +/- 7.0、a = 43、d = 41（n = 35、q = 56）| </font><font style="vertical-align: inherit;">992_ | </font><font style="vertical-align: inherit;">原子</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緯度i = 35.0 +/- 4.7、a = 35、d = 35（n = 66、q = 11）| </font><font style="vertical-align: inherit;">9__ | </font><font style="vertical-align: inherit;">xi</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの結果に基づくと、ジッターの欠如を考えると、VSCodeとAtomを除くすべてのエディターは同等にうまく機能すると言えます。</font><font style="vertical-align: inherit;">また、これらの2つでも、通常のタイピングでは、モニターやキーボードの通常よりも応答時間のペナルティが小さくなります。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ターミナル</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
異なる端末での遅延も測定しました。</font><font style="vertical-align: inherit;">Apple端末と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キティ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">最適な応答時間</font><font style="vertical-align: inherit;">を持っているようですが</font><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iTerm2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alacritty</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は少し悪く見えます。</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">緯度i = 53.1 +/- 6.6、a = 54、d = 55（n = 53、q = 59）| </font><font style="vertical-align: inherit;">291 _ | </font><font style="vertical-align: inherit;">iterm2 gpuレンダー</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緯度i = 50.5 +/- 2.5、a = 50、d = 50（n = 56、q = 59）| </font><font style="vertical-align: inherit;">19_ | </font><font style="vertical-align: inherit;">iterm2 gpuなし</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緯度i = 35.8 +/- 7.0、a = 34、d = 33（n = 73、q = 48）| </font><font style="vertical-align: inherit;">9___ | </font><font style="vertical-align: inherit;">アップルターミナル</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緯度i = 35.1 +/- 2.5、a = 34、d = 32（n = 35、q = 52）| </font><font style="vertical-align: inherit;">9_ | </font><font style="vertical-align: inherit;">アップルターミナルvim</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緯度i = 50.4 +/- 3.9、a = 50、d = 49（n = 60、q = 269）| </font><font style="vertical-align: inherit;">_59 | </font><font style="vertical-align: inherit;">有能</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緯度i = 36.1 +/- 5.6、a = 35、d = 34（n = 78、q = 199）| </font><font style="vertical-align: inherit;">9__ | </font><font style="vertical-align: inherit;">キティ</font></font></pre><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作り方</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここに私が使用した部品のリストがあります：</font></font><br>
<br>
<ul>
<li><b>$12</b>: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">Teensy LC</a>     Teensy&nbsp;3+.   Arduino,  USB- Teensy     1000&nbsp; ( 1 ),      USB-      125&nbsp; ( 8&nbsp;     ). ,      1000&nbsp;.     ,     ,  Teensy&nbsp;3  .<br>
</li>
<li><b>$12</b>: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">  </a> (Amazon     ,    ).    ,           .<br>
</li>
<li><b>$13</b>: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>         .<br>
</li>
<li>- /   <br>
</li>
<li>    , Teensy  <br>
</li>
<li>    ,     <br>
</li>
<li> USB micro-B   Teensy  </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバイスは、さまざまな方法で組み立てることができます。つまり、光センサーモジュールからの3本のワイヤー（3V、グラウンド、アナログ出力）を対応するTeensyピン（3V、グラウンド、およびアナログピン）に何らかの方法で接続する必要があるだけです。はんだ付けさえ必要ない、これを行う最も簡単な方法は、ピンが事前にはんだ付けされたTeensyを購入した場合</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ジャンパーmom-momで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3 </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">本のワイヤー</font></a><font style="vertical-align: inherit;">を接続すること</font><font style="vertical-align: inherit;">です。次に、テストを実行するための何らかのスイッチが必要です。ここで、Teensyの1つのピンはグラウンドに接続し、もう1つのピンはデジタルI / Oピンに接続します。あなたが本当に怠惰な人なら、2本のワイヤーのタッチで十分です！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
光センサーモジュールが画面の限られた領域しか見えないことを確認するために、それを電気テープの小さなシリンダーで包み、ハサミで慎重に端を切り取りました。それは小さな丸い窓であることがわかり、三脚で画面に押し付けて、外部ノイズを最小限に抑え、最もクリーンな信号を取得できます。</font><font style="vertical-align: inherit;">Teensy LCと小さなボードを内部に組み込ん</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ペダルケース</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をすでに作成して</font><font style="vertical-align: inherit;">おり、側面に追加の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TRRSコネクタ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があり</font><font style="vertical-align: inherit;">、これを特別に取り付けて、将来同様のプロジェクトが必要になるのを待っています。そのため、光センサーをTRRSケーブルにはんだ付けする必要がありました。その後、私のペダルの1つを使用してテストを制御できます！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私ははんだ付けに幸運でした。1つのプロジェクトで、はんだ付けプロセスでも使用できる磁気ペンを購入したからです。残念ながら、実際にはそれらを取り付けることができる大きな金属片は多くないことが判明したので、結局、はんだ付けには鋳鉄製のフライパンを使用し、テーブルの操作には</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タングステンキューブ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用しました</font><font style="vertical-align: inherit;">（わずかに磁化された）。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ccf/ae5/836/ccfae58364a964a71628451dcb1e9feb.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接続線をぶら下げるだけではなく、想像力を発揮して面白いことをすることをお勧めします。私のペダルには、地元の電気店でプラスチックの箱を購入し、側面にいくつかの穴を開け、オーディオジャックを挿入し、小さなブレッドボードを取り付けて接続を再構成しました。アマゾンには、1/4インチフォンジャック付きのタトゥーマシンやエレクトリックピアノ用のペダルがたくさんあります。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここにある</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">沈黙と触覚のための私のお気に入りは。しかし、信頼性が低く、プッシュするのが難しいか、ノイズを発生させるのが不快な、より安価なオプションがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の例では、センサーモジュールにTRRSソケットを使用することはお勧めしません。</font><font style="vertical-align: inherit;">それは良くコンパクトであり、それに利用できるケーブルがたくさんありますが、後でそれが原因で、電源を接続したり切断したりするときにあまりにも多くの接続が短絡されていることがわかりました。</font><font style="vertical-align: inherit;">ボードの反対側の端で電源と接地を分離することでこれを最小限に抑えようとしましたが、より良いタイプのケーブル、おそらく</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">電話用のもの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用することをお勧めします</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/3d5/fce/cfd/3d5fcecfdc63a4901b487091142a09c1.jpg"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファームウェア</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
画面上のキャラクターの出力の始まりと終わりを判断するために、私は最も洗練されたファームウェアを持っていませんが、うまく機能するようにセットアップしてさまざまな機能を追加するのに少し時間を費やしたので、それから始めることをお勧めします。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teensyduino</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をインストール</font><font style="vertical-align: inherit;">すると、ペダルで機能する</font><font style="vertical-align: inherit;">私の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduinoスケッチを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダウンロードできますが、</font><font style="vertical-align: inherit;">不要なフラグメントをコメント化して、正しい連絡先を使用するように構成できます。</font><font style="vertical-align: inherit;">次に、すべてが簡単です。ボタンを長押しすると測定が開始され、短押しすると結果が表示されます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja505246/index.html">Upworkで最初のトランシェを印刷する</a></li>
<li><a href="../ja505252/index.html">Avokadoプロジェクト</a></li>
<li><a href="../ja505254/index.html">スネークシュガーまたはJavaScriptで範囲を記述</a></li>
<li><a href="../ja505256/index.html">打ち上げ成功。年初から39日。アメリカから14日。Starlink SpaceX Satellites</a></li>
<li><a href="../ja505258/index.html">歯科：期待と現実</a></li>
<li><a href="../ja505264/index.html">私がhtmlパーサーをphpで書いたとき、そしてそれから何が起こったのか。パート1</a></li>
<li><a href="../ja505268/index.html">個人的な経験：フロントエンド開発者からリーダーまで</a></li>
<li><a href="../ja505274/index.html">サイトセキュリティの致命的な罪：年間の脆弱性スキャナーの統計から学んだこと</a></li>
<li><a href="../ja505276/index.html">段落全体を編集するためにABBYY FineReader PDFをどのように教えたか</a></li>
<li><a href="../ja505278/index.html">初心者マーケッターとソシニコフのための39の英語の略語</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>