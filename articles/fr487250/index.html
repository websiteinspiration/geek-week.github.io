<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍⚖️ 🔵 🙎🏼 Mélange Alpha retardé 👩🏿‍⚕️ 🦐 🍨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, je veux parler des méthodes de mélange de la géométrie tramée. Les modèles classiques de mélange d'objets translucides - Alpha, addi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mélange Alpha retardé</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/playrix/blog/487250/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans cet article, je veux parler des méthodes de mélange de la géométrie tramée. Les modèles classiques de mélange d'objets translucides - Alpha, additif, multiplicatif - sont unis par le même principe de dessin: dessinez séquentiellement une primitive après l'autre, en mélangeant les pixels reçus à la sortie du fragment shader avec ce qui se trouve dans le tampon actuel. Chaque nouvelle primitive met à jour la zone du tampon dans laquelle elle est dessinée; dans le cas du mélange alpha, les objets qui sont plus élevés que ceux précédemment dessinés. Mais que faire si vous voulez faire quelque chose avec un groupe d'objets dessinés au-dessus de la scène - par exemple, les recadrer par masque ou les mettre en surbrillance? Ici, deux décisions viennent immédiatement à l'esprit: soit apporter des modifications à leur matériau (c'est-à-dire changer le shader, étendre l'ensemble de textures), par exemple, ajouter une projection d'une autre texture,qui sera responsable du masque de transparence. Cependant, si nous avons beaucoup d'objets marbrés, changer chaque matériau unique est gênant et semé d'erreurs. La deuxième option consiste à dessiner tous les objets qui nous intéressent dans une cible plein écran distincte et à la dessiner déjà sur la scène finale. Ici, nous pouvons faire tout ce que nous voulons avec son contenu, mais cela nécessite l'allocation de mémoire supplémentaire et, plus désagréablement, la commutation du rendu cible. Ce n'est pas l'opération «la moins chère» sur les appareils mobiles, qui devra être effectuée deux fois. Et si vous souhaitez travailler avec plusieurs calques comme celui-ci?Ici, nous pouvons faire tout ce que nous voulons avec son contenu, mais cela nécessite l'allocation de mémoire supplémentaire et, plus désagréablement, la commutation du rendu cible. Ce n'est pas l'opération «la moins chère» sur les appareils mobiles, qui devra être effectuée deux fois. Et si vous souhaitez travailler avec plusieurs calques comme celui-ci?Ici, nous pouvons faire tout ce que nous voulons avec son contenu, mais cela nécessite l'allocation de mémoire supplémentaire et, plus désagréablement, la commutation du rendu cible. Ce n'est pas l'opération «la moins chère» sur les appareils mobiles, qui devra être effectuée deux fois. Et si vous souhaitez travailler avec plusieurs calques comme celui-ci?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/d50/e92/9b9/d50e929b993fd07bbae87c16bef3e65c.png"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe une autre façon, plus simple et plus élégante, de résoudre ces problèmes. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous pouvons peindre la scène à l'envers!</font></font></b><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une petite digression pour vous rappeler le fonctionnement de la méthode de rendu classique</font></font></b><div class="spoiler_text">    -  Alpha Blending   ,   ,   ,       .      4  RGBA,  RGB —   A(Alpha) —  (       ).             .     :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c57/cd7/ea9/c57cd7ea905d4fc58a9e65c1e604b0e2.png"></div><br>
 ColorSrc — RGB ,     (  ,    ), ColorDst —    ,   , Color_Result — ,    ,  ,     .    <b>Variable1</b>  <b>Variable2</b>,          ?   ,    (    ,      ).     ,       :     ,   ...&nbsp;<br>
<br>
     :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aa6/d2d/0b1/aa6d2d0b1a1f02685551030ddf1db356.png"></div><br>
 AlphaSrc — -   (), OneMinusAlphaSrc,   ,  1.0 — AlphaSrc.    : 1 *  + 2 * (1 — ).            alpha ().     = 1,     ,    = 0,    .        OpenGL  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>.<br>
<br>
     OpenGL ES 2.0  —          .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment l'image est formée par étapes: nous dessinons d'abord un arrière-plan, puis nous dessinons tous les objets en couches les uns après les autres. </font><font style="vertical-align: inherit;">Le dernier rendu remplace les pixels précédents:&nbsp;</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ec5/87f/f0c/ec587ff0c9f1111e43aa75d7352ee72e.png"></div><br>
<br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelle est l'astuce?&nbsp;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'essence de la technologie du rendu inversé ou, comme on peut aussi l'appeler, du mixage retardé est la suivante. </font><font style="vertical-align: inherit;">Nous dessinons la scène à l'envers en utilisant une formule de mélange différente. </font><font style="vertical-align: inherit;">De plus, l'image finale restera exactement la même qu'avec l'approche classique.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment ça fonctionne?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La méthode de mélange à travers le canal de transparence de l'image que nous dessinons a été décrite ci-dessus. Maintenant, nous allons l'inverser: nous allons utiliser la transparence des pixels déjà dessinés (ou plutôt, mélanger la transparence dessinée avec celle déjà dessinée). Autrement dit, au lieu d'AlphaSrc, nous utiliserons AlphaSaturate et au lieu de OneMinusAlphaSrc - One. Il s'avère que s'il y a déjà quelque chose avec transparence = 1 dans le tampon, alors la contribution sera nulle et la couleur d'un tel pixel ne changera pas. S'il n'y avait aucune transparence, ajoutons les deux couleurs ensemble (pour cela, nous devrons effacer le tampon de trame avec des zéros ou du noir avec zéro transparence). Avec cet ajout, la couleur résultante sera égale au dessin. La formule finale ressemble à ceci:</font></font><br>
&nbsp;<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/14b/5cc/537/14b5cc53798ec10be6a67901a4740fb3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(environ AlphaSaturate = min (AlphaSrc, 1 - AlphaDst)) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les valeurs de transparence doivent être ajoutées: il doit accumuler couche par couche, c'est-à-dire que nous aurons un et un dans les variables de mélange pour le canal alpha. </font><font style="vertical-align: inherit;">Pourquoi ne modifions-nous pas ColorDst et n'effaçons-nous pas le tampon avec des zéros? </font><font style="vertical-align: inherit;">Ceci est nécessaire pour le mélange additif, AdditiveBlending ne différera que par le fait qu'il aura zéro dans la variable AlphaSrc. </font><font style="vertical-align: inherit;">Il ne doit pas modifier la transparence, seulement la couleur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour plus de clarté, le schéma de rendu inverse ressemble à ceci:&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, nous effaçons le tampon de trame. </font><font style="vertical-align: inherit;">Ensuite, nous définissons la fonction de mélange indiquée ci-dessus et commençons à dessiner à partir des objets les plus hauts (dans l'approche classique, ils seraient dessinés en dernier), en descendant vers les objets inférieurs. </font><font style="vertical-align: inherit;">L'image d'arrière-plan sera dessinée en dernier.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d21/bad/2c5/d21bad2c56508107c644860dff8b9aff.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment cela peut-il être utilisé?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je décrirai plusieurs tâches résolues par cette méthode, en utilisant notre projet comme exemple:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Détourage d'objets par masque avec transparence. </font><font style="vertical-align: inherit;">Détourage en douceur de la salle de jeux:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d82/97d/ce0/d8297dce08eac582b70d49b2f28acbdf.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir tracé le terrain de jeu, il suffit d'effacer la transparence aux endroits de l'image que nous voulons masquer. </font><font style="vertical-align: inherit;">Cela se fait à l'aide de la formule de mélange, dans laquelle l'objet masque dessiné écrase la couleur et la transparence inversement avec sa propre transparence, et le degré de nettoyage peut être ajusté en continu. </font><font style="vertical-align: inherit;">Dans ce cas, la géométrie suivante est utilisée pour l'écrêtage:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b7/09d/aa3/2b709daa3b9e142938838d4386aaf7cb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il change de forme lorsque la caméra se déplace entre les pièces. </font><font style="vertical-align: inherit;">La formule de mélange pour le nettoyage est la suivante:</font></font><br>
<br>
<pre><code class="plaintext hljs">ColorSrc = GL_ZERO,<font></font>
ColorDst = GL_ONE_MINUS_SRC_ALPHA,<font></font>
AlphaSrc = GL_ZERO,<font></font>
AlphaDst = GL_ONE_MINUS_SRC_ALPHA</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez utiliser n'importe quelle géométrie avec n'importe quelle texture, en commençant le nettoyage à partir de la couche dont vous aurez besoin: </font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b4/538/994/0b453899413a5208fe9e90c8c9813f3f.gif"></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La disparition en douceur du champ se fait de façon similaire. </font><font style="vertical-align: inherit;">Le prix d'émission est d'un DrawCall.</font></font></li>
<li>    : <br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/653/96c/ccd/65396cccdc9f687f4156a2115520e50b.gif"></div><br>
 ,             UI,    .   , «» ,   ,  « »,     .  ,    :   ,       .   :<br>
<br>
<pre><code class="plaintext hljs">ColorSrc = GL_SRC_ALPHA,<font></font>
ColorDst = GL_ONE_MINUS_SRC_ALPHA,<font></font>
AlphaSrc = GL_ZERO,<font></font>
AlphaDst = GL_ONE</code></pre></li>
<li>,         :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d28/c3e/59a/d28c3e59add17227f8b03de8d41d2540.gif"></div><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ffc/82a/f61/ffc82af61e49886eb73c1fd5ff20cbbb.gif"></div></div></div></li>
<li>  «»:<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ic/ml/tr/icmltrnyjda_u3jmvtadpbmu2eo.gif"></div><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/08b/68e/852/08b68e852abda76a41ba0b6559ff6509.gif"></div></div></div><br>
            .      ,        .   — 2 DrawCalls.</li>
</ol><br>
<hr><br>
<div class="spoiler"><b class="spoiler_title">     Ambient occlusion</b><div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/00e/c3e/611/00ec3e611e8a55efe7b2a8494235c62c.gif"></div><br>
</div></div><br>
<hr><br>
<h2>   </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a un inconvénient, ou plutôt des restrictions: tous les mélanges ne peuvent pas être répétés pour une telle technique. Le mélange alpha et l'additif sont certainement possibles, mais vous devez adapter ou ne pas utiliser vos propres mélanges spéciaux. Mais il existe une issue: vous pouvez séparer les étapes du rendu de la scène. Une partie devrait être faite par la méthode inverse, une partie est la méthode habituelle, et c'est ce que nous avons fait pour les effets spéciaux sur le terrain et après le processus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un point important avec les techniques de rendu additif et mixte: s'il est dessiné AVANT le passage de rendu inverse, et s'il n'y a aucune information de transparence dans la texture (texture comme "tache blanche sur fond noir"), alors un tel objet écrasera la transparence. Dans le passage «retour», les informations sur cette zone seront perdues et visuellement, elles ressembleront à un «carré sombre» ou à une bordure noire autour d'un point additif léger:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6e/4d0/fd8/c6e4d0fd8db8d8477efe064b04683fe7.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela peut être surmonté en modifiant le mélange additif en termes de mélange du canal alpha:</font></font><br>
<br>
<pre><code class="plaintext hljs">AlphaSrc = GL_ONE_MINUS_DST_ALPHA<font></font>
AlphaDst = GL_ONE</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais cela ne convient pas à tous les types de mélange, et il sera plus fiable de modifier la texture elle-même. </font><font style="vertical-align: inherit;">Signification: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
s'il existe des textures du formulaire:&nbsp;</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f34/946/611/f34946611f5ef341f383f9620291ca75.png"></div><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/299/678/432/2996784325943157b8494d98a2181cc4.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, vous devez faire l'un d'eux:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7d2/2d3/602/7d22d36020fdc1f5cb4f38267ae19a2f.png"></div><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/be2/ecb/0b7/be2ecb0b79fbc39b74d698d2337e60d8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est-à-dire que la luminosité des canaux de couleur doit être convertie en transparence et étirer les couleurs inversement avec la transparence. </font><font style="vertical-align: inherit;">La texture résultante et ancienne doit être identique sur un fond noir. </font><font style="vertical-align: inherit;">Manuellement, il est peu probable que cela réussisse, il est logique de faire un convertisseur automatique. </font><font style="vertical-align: inherit;">Dans ce cas, le pseudo-code de conversion de canal ressemblera à ceci:</font></font><br>
<br>
<pre><code class="plaintext hljs">RGB_old = Texel_in.rgb<font></font>
A_old = Texel_in.a<font></font>
A_middle = 1.0 / ((RGB_old) / 3.0) * A_old // linear color space<font></font>
RGB_new = RGB_old * A_middle;<font></font>
A_shift = minimum( 1.0 / RGB_new.r, 1.0)<font></font>
A_shift = minimum( 1.0 / RGB_new.g, A_shift)<font></font>
A_shift = minimum( 1.0 / RGB_new.b, A_shift)<font></font>
RGB_result = RGB_new * A_shift;&nbsp;<font></font>
A_result = (RGB_result) / 3.0)<font></font>
Texel_out = Vector4(RGB_result, A_result)</code></pre><br>
<hr><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ici, je vais passer par les étapes de rendu de la scène de notre projet</font></font></b><div class="spoiler_text">&nbsp;<br>
<ol>
<li>   .     ,         -.<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/74a/d07/24a/74ad0724a6d4de1c97189dea953ed9a2.png"></div></li>
<li> ,   ,  ,    «» :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea2/98b/a4a/ea298ba4a7aaba36c9bb1a381a4da7b7.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/807/66c/c91/80766cc91fd98c7d37c2f0107f4e9338.png"></div></li>
<li>       UI:<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/785/4c9/ccf/7854c9ccfd059b715ea79ea88ae04626.png"></div></li>
<li>  ,     , ,   :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/caa/958/a24/caa958a242d5bbae946879b0ac437659.png"></div></li>
<li>   :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/efd/d3a/fa4/efdd3afa40fb1e03c92e8ff6b89b21ff.png"></div></li>
<li>   :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df8/ec4/c46/df8ec4c465f3f353fdbbd2bab93e1e91.png"></div></li>
<li>  ,         .</li>
</ol><br>
<hr><br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La méthode permet de travailler assez simplement et à moindre coût avec des couches de la scène en cours de dessin, en utilisant le canal alpha comme masque. </font><font style="vertical-align: inherit;">Il est relativement simple de l'implémenter dans un projet déjà en marche: il ne nécessite pas de modification profonde du code du sous-système graphique, il suffit de changer l'ordre de rendu et la formule de mixage. </font><font style="vertical-align: inherit;">Par endroits, il peut considérablement réduire les performances. </font><font style="vertical-align: inherit;">Il y a des limites, mais dans la plupart des cas, vous pouvez les accepter.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr487250/">https://habr.com/ru/post/fr487250/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr487234/index.html">Fer ou optimisation? Badoo, Avito et Mamba - à propos des performances PHP</a></li>
<li><a href="../fr487238/index.html">Comment concevoir un équipement de protection de réseau électrique</a></li>
<li><a href="../fr487242/index.html">Résumé des événements informatiques de février</a></li>
<li><a href="../fr487246/index.html">L'autorité de certification Tensor peut compromettre les clés privées des clients</a></li>
<li><a href="../fr487248/index.html">Un peu plus sur les tests incorrects</a></li>
<li><a href="../fr487254/index.html">Comment utiliser les caméras de vidéosurveillance non seulement pour surveiller les intrus</a></li>
<li><a href="../fr487256/index.html">Brûlez et revenez des cendres ou des Phoenix</a></li>
<li><a href="../fr487258/index.html">PHP asynchrone</a></li>
<li><a href="../fr487260/index.html">NoVerify: un linter PHP qui fonctionne rapidement</a></li>
<li><a href="../fr487262/index.html">Conférence ouverte PHP Russia Online</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>