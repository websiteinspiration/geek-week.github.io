<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§±üèΩ ‚õ™Ô∏è ‚öíÔ∏è Uso de formatos gr√°ficos modernos em projetos web ‚òÅÔ∏è üöü üß°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Eddie Osmani, no artigo ‚ÄúO pre√ßo do JavaScript em 2018 ‚Äù, deu uma ideia valiosa: o tempo necess√°rio para processar um script de 200 KB de tamanho e pa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Uso de formatos gr√°ficos modernos em projetos web</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/494710/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eddie Osmani, no artigo ‚ÄúO </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pre√ßo do JavaScript em 2018</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù, deu uma ideia valiosa: o tempo necess√°rio para processar um script de 200 KB de tamanho e para processar uma imagem com o mesmo tamanho varia significativamente. O fato √© que, ao processar o c√≥digo, o navegador precisa realizar um trabalho mais extenso do que na prepara√ß√£o para o uso de imagens. Aqui est√° o que o artigo diz sobre isso:</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma imagem JPEG precisa ser decodificada, rasterizada e exibida. E o pacote JS √© necess√°rio, se o considerarmos de maneira simplista, carregar, analisar, compilar, executar. De fato, o mecanismo precisa resolver outros problemas no processo de processamento do c√≥digo JS. Em geral, deve-se ter em mente que muito mais recursos do sistema s√£o gastos no processamento de c√≥digo JavaScript, cujo tamanho, em bytes, √© compar√°vel ao tamanho de outros materiais.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Essas palavras foram escritas em 2018, mas ainda s√£o mais do que justas. √â verdade que, dada a situa√ß√£o atual, a id√©ia aqui expressa √© percebida hoje de maneira um pouco diferente.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/8f/9m/t0/8f9mt0mjuf4ivefgknhgl8ykpge.png"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considerando que uma pandemia entrou em erup√ß√£o no mundo agora, notei que minha conex√£o com a Internet se tornou inst√°vel. Felizmente, devido ao fato de a Internet ser protegida por excelentes especialistas que n√£o conhecem a fadiga, a maior parte da Internet ainda funciona bem. Mas na Internet, algo est√° definitivamente acontecendo. Eu uso uma conex√£o de 100 Mbps, mas sinto que estou sentado em um modem 3G.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso faz algumas altera√ß√µes no racioc√≠nio acima. O fato √© que nossos dispositivos podem analisar e compilar JavaScript na mesma velocidade que eles poderiam fazer isso algumas semanas atr√°s. Mas agora os dados trafegam pelas redes mais lentamente. Como resultado, no momento √© extremamente importante a quantidade de dados que representam um determinado recurso √© transmitida pela rede quando esse recurso √© carregado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E os sites geralmente t√™m muito mais que 200 KB de imagens. Uma p√°gina com v√°rios megabytes de fotos geralmente √© o caso. Muitos desenvolvedores (e eu tamb√©m!), Via de regra, n√£o pensam no tamanho dos materiais de m√≠dia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas, o que √© muito bom, otimizar as imagens usadas nas p√°ginas da web n√£o √© t√£o dif√≠cil. </font><font style="vertical-align: inherit;">Neste artigo, falaremos sobre como usar formatos gr√°ficos modernos, como o WebP. </font><font style="vertical-align: inherit;">As imagens salvas nesses formatos geralmente s√£o 2-3 vezes menores do que aquelas em que os formatos antigos e conhecidos (como JPG e PNG) s√£o usados ‚Äã‚Äãpor todos. </font><font style="vertical-align: inherit;">O uso de novos formatos pode mudar seriamente a situa√ß√£o para melhor.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vis√£o geral dos formatos gr√°ficos modernos</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para melhorar o trabalho com gr√°ficos da Web, podemos usar os tr√™s formatos a seguir:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JPEG 2000 √© um formato que √© uma vers√£o aprimorada do JPG comum. </font><font style="vertical-align: inherit;">Este formato foi desenvolvido em 1997, principalmente para uso no cinema e na medicina. </font><font style="vertical-align: inherit;">Permite compactar imagens mais fortes que o JPEG, mas com menos artefatos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JPEG XR √© um formato relacionado ao JPEG 2000. Foi desenvolvido pela Microsoft em 2009.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebP √© um formato criado pelo Google em 2010 para a web. </font><font style="vertical-align: inherit;">O principal objetivo de seu desenvolvimento era usar m√©todos avan√ßados para otimizar imagens, a fim de reduzir o tamanho dos arquivos. </font><font style="vertical-align: inherit;">WebP suporta transpar√™ncia e at√© anima√ß√£o.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui vamos falar principalmente sobre WebP. </font><font style="vertical-align: inherit;">Nos formatos relacionados ao JPEG, discutiremos onde ser√° levantada a quest√£o da compatibilidade do navegador.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quanto voc√™ pode ganhar usando formatos gr√°ficos alternativos?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alguns meses atr√°s, usei a seguinte imagem em um material.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ebb/257/a61/ebb257a61229023d8aee7651708966c8.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A imagem usada em um material</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
conduzi alguns experimentos, considerando o uso dos formatos JPG e PNG para armazenar a imagem original. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otimizei as</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> op√ß√µes de imagem usando a</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"> imagemin</font></a><font style="vertical-align: inherit;"> para descobrir o que o WebP pode me dar em vez desses formatos "retro". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os resultados foram incr√≠veis.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recursos de imagem</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Original</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webp</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquivo .Png (do Photoshop)</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">742 Kb</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">61 Kb! </font><font style="vertical-align: inherit;">(92% menos)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquivo .png otimizado (ap√≥s Imagemin)</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">178 Kb</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">58 Kb! </font><font style="vertical-align: inherit;">(67% menos)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquivo no formato .jpg (do Photoshop)</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">242 Kb</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50 Kb! </font><font style="vertical-align: inherit;">(79% menos)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquivo otimizado no formato .jpg (ap√≥s imagemin)</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">151 Kb</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50 Kb! </font><font style="vertical-align: inherit;">(67% menos)</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conduzi experimentos semelhantes com muitas imagens. </font><font style="vertical-align: inherit;">Quase sempre acontecia que os arquivos WebP eram 30 a 70% menores do que as vers√µes otimizadas de arquivos gr√°ficos de outros formatos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso pode levantar a quest√£o de como a convers√£o para WebP pode afetar imagens SVG. </font><font style="vertical-align: inherit;">Eu n√£o conduzi tais experimentos com SVG. </font><font style="vertical-align: inherit;">SVG √© um formato vetorial. </font><font style="vertical-align: inherit;">Isso significa que as imagens nele s√£o constru√≠das com base em instru√ß√µes matem√°ticas, e n√£o com base em informa√ß√µes sobre a cor de pixels individuais. </font><font style="vertical-align: inherit;">Converter uma imagem SVG em WebP significa abrir m√£o da capacidade de dimensionar imagens SVG, o que, acredito, √© inaceit√°vel. </font><font style="vertical-align: inherit;">Al√©m disso, suspeito que essa convers√£o, na maioria dos casos, leve a um aumento no tamanho dos arquivos.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compatibilidade do navegador</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para saber como certos formatos gr√°ficos s√£o suportados pelos navegadores, consulte </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caniuse.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O formato WebP √© suportado pela maioria dos navegadores.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b8d/e47/094/b8de470941379e70ba194f35566deb05.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suporte ao formato WebP pelos navegadores</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Embora o n√≠vel de suporte para esse formato seja muito alto, √© muito ruim que o Safari e o Internet Explorer n√£o o suportem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E aqui est√£o as informa√ß√µes sobre o suporte ao JPEG 2000.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f50/5b6/1e3/f505b61e34cd89c8e5ae6c336396f5ee.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suporte ao formato JPEG 2000 pelos navegadores</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ent√£o, agora o Safari est√° do nosso lado, mas o Internet Explorer est√° novamente sem trabalho. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E o JPEG XR?</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c39/c5c/ba1/c39c5cba1bb76927dee034cd17a893e6.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suporte ao formato JPEG XR pelos navegadores</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
E aqui o Internet Explorer se destacou. </font><font style="vertical-align: inherit;">Como resultado, usando esses tr√™s formatos, substitu√≠mos todos os navegadores existentes (o KaiOS Browser n√£o suporta nenhum desses formatos e pe√ßo desculpas por ignor√°-lo, mas eu nem sei qual √© o navegador. ) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos falar sobre como escolher diferentes formatos de imagem projetados para diferentes navegadores.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O elemento de imagem para o resgate</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O HTML possui dois elementos para gerar imagens. O primeiro pode ser comparado a uma estrela pop internacional como Madonna. √â </font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. E a segunda √© como uma nova banda, conhecida apenas em c√≠rculos estreitos de amantes da m√∫sica. Este √© um elemento </font></font><code>picture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O elemento </font></font><code>picture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apareceu em HTML muito mais tarde que </font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. O principal objetivo desse novo elemento √© permitir que os desenvolvedores baixem v√°rios recursos gr√°ficos, dependendo da resolu√ß√£o da tela ou se o navegador suporta um determinado formato gr√°fico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° a apar√™ncia do c√≥digo HTML que usa o elemento </font></font><code>picture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">picture</span>&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">srcset</span>=<span class="hljs-string">"/images/cereal-box.webp"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"image/webp"</span> /&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">srcset</span>=<span class="hljs-string">"/images/cereal-box.jp2"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"image/jp2"</span> /&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/images/cereal-box.jxr"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"image/vnd.ms-photo"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">picture</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um elemento </font></font><code>picture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pode incluir muitos elementos filho </font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e um elemento </font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. O navegador analisa sequencialmente esses elementos, selecionando, com base no </font></font><code>type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(s </font></font><code>media</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">atributo </font><font style="vertical-align: inherit;">(s </font><font style="vertical-align: inherit;">), um deles que pode us√°-lo. Quando esse elemento √© encontrado, o navegador descobre o endere√ßo da imagem usando o atributo </font></font><code>srcset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e exibe essa imagem usando o elemento </font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O atributo </font></font><code>srcset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tem capacidades muito maiores do que o usual </font></font><code>src</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mas, felizmente, podemos consider√°-lo como um an√°logo </font></font><code>src</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Em geral, os elementos </font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s√£o algo como configura√ß√µes que correspondem a imagens diferentes. A </font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagem que melhor corresponde ao ambiente em que a p√°gina √© exibida est√° inclu√≠da.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No Chrome, por exemplo, ap√≥s o processamento da marca√ß√£o acima, o navegador chegar√° a algo mais ou menos equivalente ao seguinte c√≥digo:</font></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">picture</span>&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/images/cereal-box.webp"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">picture</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usar um conjunto de elementos consecutivos </font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">significa que pelo menos um deles ser√° adequado em cada navegador. </font><font style="vertical-align: inherit;">Portanto, a maioria dos navegadores usa uma imagem webp, o Safari carrega uma imagem jp2, ou seja, uma imagem jxr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â apropriado lembrar que o Internet Explorer n√£o suporta o elemento </font></font><code>picture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Este item √© muito novo para este navegador. </font><font style="vertical-align: inherit;">Mas, apesar disso, o fragmento de marca√ß√£o acima no IE funcionar√° conforme o esperado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O fato √© que, quando o navegador se depara com um elemento desconhecido, ele o considera como um elemento </font></font><code>div</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Como resultado, ao analisar nosso c√≥digo, o IE v√™ muitos elementos </font></font><code>div</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, al√©m de uma tag</font></font><code>&lt;img&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que cont√©m o caminho para a imagem jxr. </font><font style="vertical-align: inherit;">E esse √© o formato que o Internet Explorer suporta.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alternativa simplificada</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O fragmento de c√≥digo acima √© extremamente bom, pois permite o uso de formatos gr√°ficos modernos em todos os navegadores atuais. </font><font style="vertical-align: inherit;">Mas o uso desse c√≥digo √© baseado na suposi√ß√£o da exist√™ncia daquelas imagens √†s quais ele possui links. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ mesmo criar essas imagens - precisar√° investir muito trabalho manual. </font><font style="vertical-align: inherit;">Se voc√™ os gerar automaticamente, isso poder√° aumentar significativamente o tempo de constru√ß√£o do projeto. </font><font style="vertical-align: inherit;">O processamento gr√°fico, como voc√™ sabe, torna-se um processo muito lento quando se trata de muitas imagens.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apenas muito poucos visitantes do meu blog usam o Internet Explorer (nos √∫ltimos 7 dias, apenas 3 pessoas com o IE tentaram visualiz√°-lo, o que representou 0,02% do tr√°fego). </font><font style="vertical-align: inherit;">Portanto, decidi usar uma vers√£o simplificada da solu√ß√£o acima:</font></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">picture</span>&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">srcset</span>=<span class="hljs-string">"/images/cereal-box.webp"</span> /&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/images/cereal-box.jpg"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">picture</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dou uma imagem compacta do webp para os navegadores que suportam esse formato (Chrome, Firefox, Edge) e para os navegadores que n√£o suportam esse formato (IE, Safari), ofere√ßo um legado do passado - uma imagem jpeg. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Do meu ponto de vista, este √© um exemplo de melhoria progressiva. </font><font style="vertical-align: inherit;">O projeto permanece operacional em navegadores mais antigos, embora o carregamento de imagens demore mais. </font><font style="vertical-align: inherit;">Este √© um compromisso que me conv√©m. </font><font style="vertical-align: inherit;">(√â verdade, espero que o suporte √† WebP apare√ßa em breve tamb√©m nos navegadores da Apple).</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verificando a integridade da solu√ß√£o</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As ferramentas do desenvolvedor sempre assumem que a imagem cont√©m o que foi originalmente gravado no atributo </font></font><code>src</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tag </font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Se voc√™ verificar o item usando a guia </font></font><code>Elements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, poder√° ver que a p√°gina est√° usando uma imagem jpg. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para verificar a operacionalidade de tudo isso, √© melhor, como me parece, clicar com o bot√£o direito do mouse na imagem e selecionar o item </font></font><code>  ‚Ä¶</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No Chrome quando o comando √© executado, o sistema deve oferecer o salvamento do arquivo com a extens√£o </font></font><code>.webp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mas no Safari ser√° um arquivo jpeg. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para descobrir exatamente qual arquivo gr√°fico foi recebido do servidor quando a p√°gina foi carregada, voc√™ pode consultar a barra de ferramentas do desenvolvedor </font></font><code>Network</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Converta arquivos de imagem para o formato WebP</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Google criou um conjunto de ferramentas destinadas a trabalhar com arquivos webp. </font><font style="vertical-align: inherit;">Uma dessas ferramentas √© chamada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cwebp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Permite converter arquivos gr√°ficos de outros formatos em WebP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ estiver usando o MacOS, poder√° instalar este kit de ferramentas usando o Homebrew:</font></font><br>
<br>
<pre><code class="plaintext hljs">brew install webp
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em outras plataformas, acredito que ser√° necess√°rio fazer o download do </font><font style="vertical-align: inherit;">pacote </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">libwebp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> apropriado </font><font style="vertical-align: inherit;">do reposit√≥rio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de instalar as ferramentas, voc√™ pode us√°-las assim:</font></font><br>
<br>
<pre><code class="plaintext hljs">cwebp -q 80 cereal.png -o cereal.webp
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere este comando:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O sinalizador </font></font><code>-q 80</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permite definir a qualidade da imagem. </font><font style="vertical-align: inherit;">Seu valor varia de 1 (pior qualidade) a 100 (melhor). </font><font style="vertical-align: inherit;">Voc√™ pode experimentar com valores diferentes. </font><font style="vertical-align: inherit;">Descobri que √© melhor perguntar algo na regi√£o de 70 a 80.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O nome do arquivo </font></font><code>cereal.jpg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© a imagem original que precisa ser convertida em webp.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A constru√ß√£o </font></font><code>-o cereal.webp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">define o caminho para o arquivo de sa√≠da.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ningu√©m quer perder tempo digitando esses comandos manualmente. </font><font style="vertical-align: inherit;">Felizmente, esta tarefa pode ser automatizada.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usando formatos de imagem modernos em aplicativos React</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um componente √© uma √≥tima maneira de ignorar algumas das esquisitices do elemento </font></font><code>&lt;picture&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Eu uso componentes React para isso. </font><font style="vertical-align: inherit;">Na minha opini√£o, √© muito conveniente. </font><font style="vertical-align: inherit;">Aqui est√° o que parece:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> ImgWithFallback = ({<font></font>
&nbsp;&nbsp;src,<font></font>
&nbsp;&nbsp;fallback,<font></font>
&nbsp;&nbsp;type = <span class="hljs-string">'image/webp'</span>,<font></font>
&nbsp;&nbsp;...delegated<font></font>
}) =&gt; {<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">picture</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">srcSet</span>=<span class="hljs-string">{src}</span> <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span> /&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{fallback}</span> {<span class="hljs-attr">...delegated</span>} /&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">picture</span>&gt;</span></span><font></font>
&nbsp;&nbsp;);<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O uso do componente √© </font></font><code>ImgWithFallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muito semelhante ao trabalho com uma tag comum </font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;ImgWithFallback<font></font>
&nbsp;&nbsp;src=<span class="hljs-string">"/images/cereal.webp"</span>
&nbsp;&nbsp;fallback=<span class="hljs-string">"/images/cereal.png"</span>
&nbsp;&nbsp;alt=<span class="hljs-string">"A photo showing the expiration date on a box of Lucky Charms"</span><font></font>
/&gt;<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O uso de formatos gr√°ficos modernos com componentes estilizados</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ usa bibliotecas </font></font><code>styled-components</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code>emotion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pode ser usado para design de imagem especial:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> FancyImg = styled.img<span class="hljs-string">`
&nbsp;&nbsp;whatever: stuff;
`</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O bom √© que ele funciona com o nosso componente </font></font><code>ImgWithFallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Voc√™ pode envolv√™-lo no inv√≥lucro apropriado, como qualquer outro componente:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> FancyImg = styled(ImgWithFallback)<span class="hljs-string">`
&nbsp;&nbsp;whatever: stuff;
`</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A raz√£o para a operacionalidade desse projeto √© como a estrutura auxiliar funciona exatamente </font></font><code>styled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ele gera uma classe e a incorpora na folha de estilo do documento. </font><font style="vertical-align: inherit;">Em seguida, o nome da classe gerada √© passado para o componente como uma propriedade:</font></font><br>
<br>
<pre><code class="css hljs">&lt;<span class="hljs-selector-tag">ImgWithFallback</span> <span class="hljs-selector-tag">className</span>="<span class="hljs-selector-tag">sc-some-generated-thing</span>" /&gt;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Delegamos todas as propriedades √† tag filho </font></font><code>&lt;img&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, como resultado, os estilos corretos s√£o aplicados √† imagem, como geralmente acontece. </font><font style="vertical-align: inherit;">Tudo funciona exatamente como voc√™ poderia esperar.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usando o pacote gatsby-image</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ estiver usando o Gatsby, saiba que o pacote </font></font><code>gatsby-image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, quando usado normalmente, j√° usa muitas otimiza√ß√µes de imagem. </font><font style="vertical-align: inherit;">Isso inclui a convers√£o de imagens para o formato webp (embora, para isso, voc√™ precise ativar a op√ß√£o apropriada). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O pacote </font></font><code>gatsby-image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o afirma ser um substituto </font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Seu uso pode n√£o ser t√£o simples, seus mecanismos internos podem levar a surpresas que dificultam a vida do desenvolvedor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ est√° interessado neste pacote, consulte a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documenta√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contras de WebP</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A √∫nica desvantagem real do webp que eu consegui encontrar √© que √© muito inconveniente trabalhar com arquivos desse formato. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A maioria dos pacotes de imagens da √°rea de trabalho ainda n√£o √© compat√≠vel. </font><font style="vertical-align: inherit;">Por exemplo, n√£o consigo abrir arquivos webp na visualiza√ß√£o no MacOS. </font><font style="vertical-align: inherit;">Isso significa, digamos que, se eu salvar uma imagem webp de uma p√°gina da web, n√£o poderei visualiz√°-la no meu computador! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Converter arquivos webp em arquivos jpeg √© um processo bastante simples. </font><font style="vertical-align: inherit;">Na Internet, voc√™ pode encontrar muitos servi√ßos gratuitos que realizam essa convers√£o. </font><font style="vertical-align: inherit;">Mas, novamente, isso n√£o √© t√£o conveniente quanto trabalhar com formatos gr√°ficos tradicionais. </font><font style="vertical-align: inherit;">Se o seu site oferecer aos usu√°rios o download de arquivos gr√°ficos, voc√™ pode decidir que n√£o precisa mudar para o webp.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sum√°rio</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu realmente gosto do fato de que usando o webp fui capaz de reduzir o tamanho das imagens no meu blog em cerca de 50%. Al√©m do fato de que, em nossos tempos dif√≠ceis, isso melhora a experi√™ncia do usu√°rio em trabalhar com ele, tamb√©m espero que isso me permita economizar um pouco em pagar pelo tr√°fego. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, a id√©ia de converter manualmente arquivos de imagem para o formato webp parece bastante impratic√°vel. J√° estou estudando a quest√£o de como converter automaticamente arquivos jpg e png para esse formato. Idealmente, esse processo deve ocorrer completamente despercebido pelo desenvolvedor, durante a montagem do site.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os criadores de projetos da web geralmente n√£o est√£o particularmente interessados ‚Äã‚Äãnos recursos do uso de novos formatos de imagem. </font><font style="vertical-align: inherit;">Mas acredito que entender esse problema √© muito √∫til. </font><font style="vertical-align: inherit;">Afinal, o uso do WebP √© provavelmente a maneira mais f√°cil de reduzir o tamanho do seu projeto da web em centenas de kilobytes. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Queridos leitores! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ usa o formato WebP?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt494690/index.html">Intelig√™ncia Artificial vs. Coronav√≠rus</a></li>
<li><a href="../pt494692/index.html">Inje√ß√µes indolores com agulhas 4D</a></li>
<li><a href="../pt494700/index.html">Cen√°rios de infec√ß√£o em cidades espec√≠ficas com base no conjunto de dados de movimenta√ß√£o de pessoas na R√∫ssia</a></li>
<li><a href="../pt494702/index.html">O resumo de materiais frescos do mundo do front-end da √∫ltima semana n ¬∞ 408 (23 a 29 de mar√ßo de 2020)</a></li>
<li><a href="../pt494704/index.html">CMI5, ou Vida ap√≥s SCORM</a></li>
<li><a href="../pt494712/index.html">5 pr√°ticas recomendadas para usar ganchos React na produ√ß√£o</a></li>
<li><a href="../pt494714/index.html">Sobre o impacto positivo de fontes vari√°veis ‚Äã‚Äãno desempenho de projetos da web</a></li>
<li><a href="../pt494716/index.html">Tudo sobre a palavra-chave autom√°tica em CSS</a></li>
<li><a href="../pt494718/index.html">Not√≠cias do mundo do OpenStreetMap n¬∫ 504 (10.03.2020-16.03.2020)</a></li>
<li><a href="../pt494720/index.html">Minha c√°bula por pandas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>