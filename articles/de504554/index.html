<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçü§ù‚Äçüë®üèæ üñïüèª üßòüèª Einheit Terrane und Mesh Blending üçä ü•Ö üë∂üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits, im Juni startet OTUS erneut den Unity Games Developer- Kurs . Im Vorfeld des Kursbeginns haben wir eine √úbersetzung von interessante...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Einheit Terrane und Mesh Blending</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/504554/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo allerseits, im Juni startet OTUS erneut den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unity Games Developer-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kurs </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Im Vorfeld des Kursbeginns haben wir eine √úbersetzung von interessantem Material zum Thema vorbereitet.</font></font></b></i><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heute werden wir dar√ºber sprechen, wie ein terranes Netz (oder ein anderes Netz) in Unity gemischt wird. </font><font style="vertical-align: inherit;">Diese Anleitung ist ziemlich fortgeschritten, aber ich habe versucht, sie in separate Schritte aufzuteilen. </font><font style="vertical-align: inherit;">Es wird davon ausgegangen, dass Sie √ºber allgemeine Unity-Kenntnisse und C # -Grundkenntnisse verf√ºgen. </font><font style="vertical-align: inherit;">Die Anleitung ist f√ºr die Verst√§rkung konzipiert, aber ich denke, sie kann auch auf das Shader-Diagramm angewendet werden. </font><font style="vertical-align: inherit;">Dies ist mein erster Leitfaden, daher hoffe ich, dass er klar genug ist. </font><font style="vertical-align: inherit;">Wenn Sie etwas hinzuf√ºgen m√∂chten, lassen Sie es mich wissen. </font><font style="vertical-align: inherit;">Ich habe hier ein Starter-Kit mit einigen zus√§tzlichen Shadern f√ºr dieses Projekt sowie ein Basis-Kit f√ºr den Einstieg beigef√ºgt. </font><font style="vertical-align: inherit;">Alle Projektdateien aus dem heutigen Handbuch stehen meinen Kunden f√ºr 5 US-Dollar zur Verf√ºgung, aber in naher Zukunft werden sie allen zur Verf√ºgung stehen.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Üí </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Starter Kit</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
‚Üí </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das gesamte Projekt</font></font></a><br>
<br>
<blockquote><i><b>:</b>    ,    ,         .       .      ,        ,  ,      .                (      )     unity    .       ,       ,      .</i> </blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also fangen wir an. </font><font style="vertical-align: inherit;">Zun√§chst werde ich das Problem herausgreifen und mich mit der Theorie befassen, auf der die L√∂sung basieren wird. </font><font style="vertical-align: inherit;">Um eine Mischung zwischen dem Terran und anderen Maschen herzustellen, m√ºssen Sie dem Shader irgendwie mitteilen, wo der Schnittpunkt mit dem Terran auftritt. </font><font style="vertical-align: inherit;">Sprechen ist einfacher als tun, aber es gibt einen Weg. </font><font style="vertical-align: inherit;">Und woraus besteht es? </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Render Texture</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hilft uns </font><font style="vertical-align: inherit;">!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist eine Rendertextur?</font></font></h3><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Rendertextur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist in der Tat die Position der Kamera, die in der Asset-Datei gespeichert wird. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rendertextur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in Spielen wird am h√§ufigsten zum Erstellen von Video√ºberwachungsbildschirmen verwendet. </font><font style="vertical-align: inherit;">Wir k√∂nnen die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Render-Textur verwenden</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um die Kameraansicht im Editor zu speichern, damit diese Textur dann als Shader verwendet werden kann. </font><font style="vertical-align: inherit;">Dies ist n√ºtzlich, da wir Informationen √ºber unser Gel√§nde wie H√∂he, Normalen und Farben in eine Textur backen k√∂nnen, die dann zur Laufzeit zum Mischen zwischen Maschen und Terran verwendet werden kann.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hv/iw/e8/hviwe8looo3tctln-egumqcolwu.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Textur-Rendering zum Anzeigen von G√§nsebildern auf Fernsehger√§ten in Untitled Goose Game</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anpassung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns zun√§chst eine neue Szene und einen neuen Terran erstellen. Stellen Sie eine geeignete Gr√∂√üe f√ºr die Arbeit ein, z. B. 200 x 200. Jetzt k√∂nnen Sie den Terraner so arrangieren, wie Sie m√∂chten. Erstellen Sie dann eine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neue Ebene,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nennen Sie sie "Terrain" und weisen Sie dieser Ebene ein Terrain zu. Dies ist erforderlich, damit die Kameramaske Terrane in der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Render-Textur aufnehmen kann</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/2u/h9/gt/2uh9gtaovl48lp8cvi2sswsnvc8.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mein Meisterwerk Terrane</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Die Projektquelldateien haben ein Fertighaus namens </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄûBlendBakingCamera‚Äú</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ziehen Sie es auf die B√ºhne. </font><font style="vertical-align: inherit;">Sie erhalten eine einfache orthografische Kamera. </font><font style="vertical-align: inherit;">Vor der Kamera m√ºssen Sie eine </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keulungsmaske</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf eine neue Terranebene </font><font style="vertical-align: inherit;">legen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Positionieren Sie die Kamera in der Mitte des Terrans etwas √ºber dem h√∂chsten Punkt des Gel√§ndes. </font><font style="vertical-align: inherit;">Stellen Sie dann die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entfernte Clip-Ebene</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> so ein, dass die Kamera den terranen Boden sieht. </font><font style="vertical-align: inherit;">Am Ende sollte die Szene ungef√§hr so ‚Äã‚Äãaussehen:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/5b/u_/kr/5bu_krp8iertv5bgpzy0vtsuki4.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ersatz-Shader</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Nachdem die Kamera eingerichtet ist, m√ºssen Sie einen Weg finden, um terrane Daten aufzuzeichnen. Daf√ºr ben√∂tigen wir </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ersatz-Shader. Der Ersatz-Shader</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> scheint eine zweifelhafte Aussicht zu sein, ich selbst habe lange nicht verstanden, wie er funktioniert. Tats√§chlich ist jedoch alles sehr einfach und effektiv. Die Verwendung des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ersatz-Shaders</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bedeutet im Wesentlichen, dass jedes Objekt im Sichtfeld der Kamera mit einem einzigen Shader gerendert wird, unabh√§ngig davon, welcher Shader den Objekten √ºberlagert ist. Infolgedessen werden alle Objekte mit dem ausgew√§hlten </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ersatz-Shader</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gerendert </font><font style="vertical-align: inherit;">, der eigentlich nur ein normaler Shader ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Shader, den wir zum Mischen ben√∂tigen, ist der Tiefen-Shader. </font><font style="vertical-align: inherit;">Es rendert die Tiefe der Szene und ist eine Schl√ºsselkomponente bei der Erzeugung unseres √úberblendungseffekts, da es die Tiefenwerte unserer Kamera in die Textur schreibt, damit wir sie sp√§ter lesen k√∂nnen. </font><font style="vertical-align: inherit;">Um mehr √ºber diesen Shader und den </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ersatz-Shader</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im Allgemeinen </font><font style="vertical-align: inherit;">zu erfahren </font><font style="vertical-align: inherit;">, empfehle ich Ihnen, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dieses Handbuch unter Making Stuff Look Good in Unity zu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lesen </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/rc/71/5e/rc715exr4enoh7vf-lmhx3b9oei.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel f√ºr einen Tiefen-Shader</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lass uns anfangen zu backen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Erstellen wir eine neue Klasse und nennen sie </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"TerrainBlendingBaker"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Beginnen wir mit der Implementierung einer Tiefenmaske f√ºr den Basis-Terraner. </font><font style="vertical-align: inherit;">Sp√§ter werden wir zu diesem Skript zur√ºckkehren, um Farben und Normalen hinzuzuf√ºgen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Definieren Sie mehrere Variablen.</font></font><br>
 <br>
<pre><code class="cs hljs"><span class="hljs-comment">//Shader that renders object based on distance to camera</span>
<span class="hljs-keyword">public</span> Shader depthShader;
<span class="hljs-comment">//The render texture which will store the depth of our terrain</span>
<span class="hljs-keyword">public</span> RenderTexture depthTexture;
<span class="hljs-comment">//The camera this script is attached to</span>
<span class="hljs-keyword">private</span> Camera cam;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Erstellen wir nun eine neue Methode und nennen sie </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"UpdateBakingCamera"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Bei dieser Methode ermitteln wir die Kameradaten, die der Shader m√∂glicherweise zum Rendern von √úberblendungen in globalen Variablen ben√∂tigt.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">UpdateBakingCamera</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        <span class="hljs-comment">//if the camera hasn't been assigned then assign it</span>
        <span class="hljs-keyword">if</span> (cam == <span class="hljs-literal">null</span>)<font></font>
        {<font></font>
            cam = GetComponent&lt;Camera&gt;();<font></font>
        }<font></font>
 <font></font>
        <span class="hljs-comment">//the total width of the bounding box of our cameras view</span>
        Shader.SetGlobalFloat(<span class="hljs-string">"TB_SCALE"</span>, GetComponent&lt;Camera&gt;().orthographicSize * <span class="hljs-number">2</span>);
        <span class="hljs-comment">//find the bottom corner of the texture in world scale by subtracting the size of the camera from its x and z position</span>
        Shader.SetGlobalFloat(<span class="hljs-string">"TB_OFFSET_X"</span>, cam.transform.position.x - cam.orthographicSize);<font></font>
        Shader.SetGlobalFloat(<span class="hljs-string">"TB_OFFSET_Z"</span>, cam.transform.position.z - cam.orthographicSize);
        <span class="hljs-comment">//we'll also need the relative y position of the camera, lets get this by subtracting the far clip plane from the camera y position</span>
        Shader.SetGlobalFloat(<span class="hljs-string">"TB_OFFSET_Y"</span>, cam.transform.position.y - cam.farClipPlane);
        <span class="hljs-comment">//we'll also need the far clip plane itself to know the range of y values in the depth texture</span>
        Shader.SetGlobalFloat(<span class="hljs-string">"TB_FARCLIP"</span>, cam.farClipPlane);<font></font>
 <font></font>
        <span class="hljs-comment">//<span class="hljs-doctag">NOTE:</span> some of the arithmatic here could be moved to the shader but keeping it here makes the shader cleaner so ¬Ø\_(„ÉÑ)_/¬Ø</span>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Nun backen wir die Tiefe des Terrans in die Textur.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-comment">// The context menu tag allows us to run methods from the inspector (https://docs.unity3d.com/ScriptReference/ContextMenu.html)</span>
[<span class="hljs-meta">ContextMenu(<span class="hljs-meta-string">"Bake Depth Texture"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BakeTerrainDepth</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    <span class="hljs-comment">//call our update camera method </span><font></font>
    UpdateBakingCamera();<font></font>
 <font></font>
    <span class="hljs-comment">//Make sure the shader and texture are assigned in the inspector</span>
    <span class="hljs-keyword">if</span> (depthShader != <span class="hljs-literal">null</span> &amp;&amp; depthTexture != <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
        <span class="hljs-comment">//Set the camera replacment shader to the depth shader that we will assign in the inspector </span>
        cam.SetReplacementShader(depthShader, <span class="hljs-string">"RenderType"</span>);
        <span class="hljs-comment">//set the target render texture of the camera to the depth texture </span><font></font>
        cam.targetTexture = depthTexture;<font></font>
        <span class="hljs-comment">//set the render texture we just created as a global shader texture variable</span>
        Shader.SetGlobalTexture(<span class="hljs-string">"TB_DEPTH"</span>, depthTexture);<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
        Debug.Log(<span class="hljs-string">"You need to assign the depth shader and depth texture in the inspector"</span>);<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Die Werte werden klarer, wenn wir mit dem Shader arbeiten. </font><font style="vertical-align: inherit;">Hier ist ein kleines Bild, das etwas Licht ins Dunkel bringen k√∂nnte:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/pm/hj/i2/pmhji2hicayyxh7plycoopbx1x4.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir werden das Terran in die Tiefenstruktur √ºbertragen, um es sp√§ter zu lesen und zu verstehen, wo das Mischen durchgef√ºhrt werden muss.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Jetzt haben wir alles, was wir brauchen, um den grundlegenden Mischungseffekt im Shader zu erzeugen. Zu diesem Zeitpunkt sieht das Skript ungef√§hr so ‚Äã‚Äãaus: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pastebin.com/xNusLJfh</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Okay, jetzt, da wir das Skript haben, k√∂nnen wir es der Backkamera hinzuf√ºgen, die wir zuvor hinzugef√ºgt haben. Die Anfangsverm√∂gen haben einen Shader namens </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'DepthShader' (Inresin / Shaders / DepthShader)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und eine </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Render - </font><font style="vertical-align: inherit;">Textur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> namens </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'DepthTerrainRT' (Inresin / RenderTextures / DepthTextureRT)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , m√ºssen Sie sie in die entsprechenden Felder in den Inspektor setzen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºhren Sie danach die Methode einfach √ºber das Kontextmen√º aus, um unsere Gel√§ndetiefe in der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rendertextur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu backen </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qh/dl/tm/qhdltmjap9-flgdtvl0twazylyi.gif"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shader</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Lassen Sie uns endlich einen Shader zum Mischen erstellen. Erstellen Sie einen neuen Standard </font><i><font style="vertical-align: inherit;">-Amplify- </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shader</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und √∂ffnen Sie ihn. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nennen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sie ihn </font><i><font style="vertical-align: inherit;">"TerrainBlending"</font></i><font style="vertical-align: inherit;"> oder so. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt m√ºssen wir eine UV-Strahlung f√ºr die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rendertextur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erstellen </font><font style="vertical-align: inherit;">. Dadurch wird die Differenz zwischen dem Punkt sein, der </font><font style="vertical-align: inherit;">wiedergegeben wird, und die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Backkameraposition</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> </font><font style="vertical-align: inherit;">zur Gesamtfl√§che relativ skaliert. Die drei globalen Variablen hier sind diejenigen, die wir gerade im Code deklariert haben. Wir setzen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">worldY auch</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> als lokale Variable, wir werden es sp√§ter brauchen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ei/ml/lm/eimllmdyi94c2_9tdwv_8orv9u8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nehmen wir die Tiefenstruktur, die wir als globale Variable zugewiesen haben (f√ºr diesen Beispielknoten zum Hinzuf√ºgen von </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Texturen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> machen Sie sie global und nennen sie </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'TB_DEPTH'.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), wenn wir die Ausgabe in das Feld </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug amplify shader</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'a setzen, k√∂nnen wir sehen, was passiert. Erstellen Sie eine Ebene mit dem Material, auf das unser neuer Shader angewendet wird.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/pz/hu/_i/pzhu_i59oxdberrgviej7cvbvci.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Im Shader haben wir also Informationen √ºber die Tiefe. Jetzt m√ºssen wir einen Versatz in y hinzuf√ºgen, um eine √úberblendung zu erhalten. </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/ly/jy/lf/lyjylfsocd6cjfm46nu0z1xmjvg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Block skaliert die y-Position der Maske der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fernclip-Ebene</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , subtrahiert diesen Wert von der Weltposition entlang der y-Achse des gerenderten Punkts und verschiebt ihn schlie√ülich auf die Unterseite des Begrenzungsrahmens der Kamera (y-Position der Kamera abz√ºglich der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Farclip-Ebene</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schon was! Wir sehen, wie die Kanten des Flugzeugs mit dem Terran verschmelzen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rb/fv/zu/rbfvzuc3sccy_dtknu6uitu-wns.gif"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ok, lassen Sie uns das Mischen kontrollierter machen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uq/0o/1p/uq0o1prljhkkeiuxii5xmsnk5hm.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Jetzt k√∂nnen wir die Dicke und Fl√§che des Mischterrans steuern. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zc/tv/_b/zctv_bwpjihiwxpehsdokdbidry.gif"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ich denke, wir k√∂nnen sogar ein wenig L√§rm hinzuf√ºgen. Verwenden wir die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Weltposition</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um Rauschen aus der Textur zu erzeugen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xk/cv/po/xkcvpov6owwyfc7nxehrcmtyhiq.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Rauschtexturen befinden sich im Texturordner des Startprojekts. Sie k√∂nnen im Inspektor oder als Konstante im Shader selbst zugewiesen werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Endlich ist es Zeit, einige Texturen hinzuzuf√ºgen! Um zu beginnen, verwenden wir einige einfache einfarbige Texturen. Ich habe dem Ordner zwei Texturen mit Textur-Assets hinzugef√ºgt. Machen Sie die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'SingleColorGrass'-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Textur zu einer terranen Textur. Dann m√ºssen Sie im Shader eine terrane Textur und einen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Objekttexturknoten</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erstellen </font><font style="vertical-align: inherit;">. Wir werden zwischen ihnen auf dem roten Kanal der Maske wechseln, die wir gerade erstellt haben. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4f/ny/8d/4fny8dg2v4godrj_khbragcc62s.png"><br>
<img src="https://habrastorage.org/webt/mw/6a/_v/mw6a_vyko0crhqvwgmqodlk46xa.png"><br>
 <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und hier ist der komplette Shader:</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/cf/lr/ut/cflrutnc9-qxa2e9v3kpxnidta0.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 Das Hinzuf√ºgen von benutzerdefinierten </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toon-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Beleuchtungs- </font><font style="vertical-align: inherit;">oder </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unbeleuchteten Beleuchtungsmodellen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> liefert die besten Ergebnisse f√ºr diesen Shader. Ich schaltete mich </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unbeleuchtet ein</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terrane Shader und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unbeleuchtete</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Version des Shaders im Gesamtpaket f√ºr Sponsoren.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/vn/to/17/vnto17ss8bwcmfk3o_e0iguuxh8.png"></div> <br>
 <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unbeleuchtete Terrane und Meshes</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ich empfehle au√üerdem, dem Terrane und m√∂glicherweise anderen Meshes einen triplanaren Shader hinzuzuf√ºgen. </font><font style="vertical-align: inherit;">Ich kann dieses Problem im n√§chsten Handbuch behandeln. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun, wir sind fast fertig mit dem Hauptthema des heutigen Leitfadens. </font><font style="vertical-align: inherit;">Ich habe einige Abschnitte hinzugef√ºgt, die bei der Shader-Erweiterung helfen k√∂nnen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shader-Erweiterung - Normal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ich habe den Dateien einen regul√§ren Shader hinzugef√ºgt. Sie k√∂nnen damit Normalen auf die terrane Oberfl√§che schreiben und auch Blending verwenden. F√ºr mein Spiel brauche ich kein normales Mischen, also habe ich nur ein bisschen experimentiert und es sieht so aus, als ob das Experiment ein Erfolg war. Meine Idee eignet sich gut f√ºr Gel√§nde ohne gro√üen H√∂henunterschied. Ich habe den normalen Mapping-Shader in das Verzeichnis mit den Startsatz-Shadern aufgenommen. Hier sehen Sie meine grundlegende Implementierung der normalen Karte: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vw/lt/l1/vwltl1vedanxqwo5w0ofn4puf7k.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Der Code ist fast der gleiche wie bei der Tiefenkarte, aber dieses Mal verwenden wir die normale Karte als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ersatz-Shader</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ich habe auch eine Reihe von Rendertexturen f√ºr die normale Aufnahme hinzugef√ºgt (hier ben√∂tigen Sie m√∂glicherweise eine zus√§tzliche Konfiguration).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit die Normalen gut funktionieren, ist m√∂glicherweise ein wenig mehr Aufwand im Zusammenhang mit der Abstimmung erforderlich, und es kann auch eine Einschr√§nkung bei Terranen mit niedrigem Pegel geben (aber ich habe nicht gen√ºgend Tests durchgef√ºhrt, um dies zu best√§tigen).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shader-Erweiterung - Alle Farben</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ich werde nicht n√§her auf die Details dieses Themas eingehen, da es √ºber das hinausgeht, was f√ºr mein Spiel erforderlich ist, aber ich habe beim Schreiben dieses Handbuchs daran gedacht. Um das Mischen vieler Farben hinzuzuf√ºgen, k√∂nnen wir </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unbeleuchtete</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terrane Farben </font><font style="vertical-align: inherit;">ausw√§hlen </font><font style="vertical-align: inherit;">und sie als Texturen speichern. In diesem Fall sind wir durch eine relativ niedrige Aufl√∂sung eingeschr√§nkt, aber diese Methode funktioniert gut, wenn Sie einfarbige Gel√§ndetexturen und Texturen mit niedriger Aufl√∂sung verwenden oder wenn Sie </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">schwach bluten</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mit geringf√ºgigen Anpassungen k√∂nnen sie auch auf terrane Netze angewendet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist der Code f√ºr die Mehrfarbenoption:</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">Header(<span class="hljs-meta-string">"The following settings are only if using the multi-color terrain shader"</span>)</span>]
<span class="hljs-comment">//Shader that renders the unlit terraom of an object</span>
<span class="hljs-keyword">public</span> Shader unlitTerrainShader;
<span class="hljs-comment">//The render texture which will store the normals of our terrain</span>
<span class="hljs-keyword">public</span> RenderTexture surfaceTexture;
<span class="hljs-comment">//An unlit terrain material used to capture the texture of our terrain without any lighting</span>
<span class="hljs-keyword">public</span> Material unlitTerrainMaterial;
<span class="hljs-comment">//The terrain you want to capture the textures of</span>
<span class="hljs-keyword">public</span> Terrain yourTerrain;<font></font>
 <font></font>
[<span class="hljs-meta">ContextMenu(<span class="hljs-meta-string">"Bake Surface Texture"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BakeTerrainSurface</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    UpdateBakingCamera();<font></font>
 <font></font>
    <span class="hljs-comment">//return if there is no terrain assigned</span>
    <span class="hljs-keyword">if</span> (yourTerrain == <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
        Debug.Log(<span class="hljs-string">"You need to assign a terrain to capture surface texture"</span>);
        <span class="hljs-keyword">return</span>;<font></font>
    }<font></font>
 <font></font>
    StartCoroutine(BakeColors());<font></font>
}<font></font>
 <font></font>
<span class="hljs-function">IEnumerator <span class="hljs-title">BakeColors</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    Material tempTerrainMaterial = yourTerrain.materialTemplate;<font></font>
 <font></font>
    yourTerrain.materialTemplate = unlitTerrainMaterial;<font></font>
 <font></font>
    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
 <font></font>
    cam.SetReplacementShader(unlitTerrainShader, <span class="hljs-string">"RenderType"</span>);<font></font>
    cam.targetTexture = surfaceTexture;<font></font>
    Shader.SetGlobalTexture(<span class="hljs-string">"TB_SURFACE"</span>, surfaceTexture);<font></font>
 <font></font>
    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
 <font></font>
    cam.targetTexture = <span class="hljs-literal">null</span>;<font></font>
    yourTerrain.materialTemplate = tempTerrainMaterial;<font></font>
 <font></font>
    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
 <font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Die einzige √Ñnderung im Shader besteht darin, dass anstelle einer vordefinierten Textur eine global definierte Gel√§ndeoberfl√§chentextur verwendet wird, bei der die relative Position als UV verwendet wird. </font><font style="vertical-align: inherit;">Eine zus√§tzliche Erweiterung erm√∂glicht es Ihnen, Texturen angenehmer zu mischen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wl/ts/xe/wltsxewq-f-2ymxewxjfuew5wk4.png"> <br>
 <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mischen mehrerer Texturen </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist ein vollst√§ndiges mehrfarbiges Diagramm mit einem normalen Misch-Shader:</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/jw/bx/vp/jwbxvprh_o3wt9iaw7mmh6vjufa.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Herzlichen Gl√ºckwunsch, wenn Sie bis zu diesem Punkt gelesen haben! </font><font style="vertical-align: inherit;">Wie gesagt, dies ist mein erster Leitfaden, daher w√ºrde ich mich √ºber Feedback sehr freuen. </font><font style="vertical-align: inherit;">Wenn Sie mich beim Erstellen von Spielen und Tutorials unterst√ºtzen m√∂chten, schauen Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder abonnieren Sie mein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Twitter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erfahren Sie mehr √ºber den Kurs</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de504510/index.html">Programmieren Sie sich. So finden Sie einen Job in der IT</a></li>
<li><a href="../de504516/index.html">Lieblings-Hacker-Taktik</a></li>
<li><a href="../de504520/index.html">So erstellen Sie in einer Woche 70 kostenlose Ver√∂ffentlichungen zu einem unbekannten Projekt</a></li>
<li><a href="../de504522/index.html">Was gibt es in Quarant√§ne zu sehen? Eine Auswahl von Materialien aus Technostream (Teil 6)</a></li>
<li><a href="../de504524/index.html">Typisches COVID-19-Epidemie-Entwicklungsmodell</a></li>
<li><a href="../en486014/index.html">SLAC Tour: US Department of Energy National Accelerator Laboratory at Stanford</a></li>
<li><a href="../en486018/index.html">Session Survey Results</a></li>
<li><a href="../en486024/index.html">Really simple graphics in R for science and journalism</a></li>
<li><a href="../en486028/index.html">Neural networks in the production of dentures</a></li>
<li><a href="../en486030/index.html">TL-SREET 55 5K LED Street Light Review</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>