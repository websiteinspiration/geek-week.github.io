<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😬 👩🏾‍🚒 👶🏼 統合情報システムのEnd-2-Endテストの自動化。パート2.技術 🕺🏻 👏🏽 🎅🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="この記事では、大規模プロジェクトの1つであるLANITが、大規模な情報システム（以下、システム）の手動テスト（以下、自動テスト）の自動プロセスを自動化した方法とその結果について、一連の出版物を続けます。
 
 本書の第2部は、主に自動化グループのUIエンドツーエンドテストと主要なテスト自動化のリーダ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>統合情報システムのEnd-2-Endテストの自動化。パート2.技術</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lanit/blog/477044/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事では、大規模プロジェクトの1つであるLANITが、大規模な情報システム（以下、システム）の手動テスト（以下、自動テスト）の自動プロセスを自動化した方法とその結果について、一連の出版物を続けます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本書の第2部は、主に自動化グループのUIエンドツーエンドテストと主要なテスト自動化のリーダーに焦点を当てています。ここでは、テスト仕様の一定の変動に直面して、大規模なテストグループの大規模並列開発をサポートする、コードと展開のアーキテクチャ構成のための特定のレシピを見つけます。この部分には、UIテストに必要な関数の完全なリストと、実装の詳細、および発生する可能性のある驚きのリストが含まれています。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここで</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここにあり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート1.（なぜ自動化が必要なのか。開発および管理プロセスの組織。使用の組織）</font></font></b></a></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e47/985/776/e4798577680ae78fcb67f4c6c8976800.jpg"></div><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソース</font></font></a></i><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アーキテクチャとテクノロジースタック</font></font></h1><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムとその環境の一般的な構造-高レベル設計</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトで使用される主なテクノロジーとライブラリ：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaSE8＆maven＆JUnit-開発スタック;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenium</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -Webブラウザーのアクションを自動化するためのライブラリー。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenide-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザーとページ要素とのやり取りを大幅に簡素化するエレガントなAPIを持つSeleniumのアドオン。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenoid＆GGR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -Selenium Gridの実装と、CIサーバーでテストを実行するためのロードバランサー+ブラウザーで事前設定されたコンテナー。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex Allure</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -CIサーバーのレポート用。&nbsp;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自動テストとSelenoidインフラストラクチャコンポーネントの一般的な図は、説明コメントを含めて以下の図に示されてい</font><font style="vertical-align: inherit;">
ます。ユーザーインターフェイスの回帰を自動化するための自動</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストフレームワーク</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーション。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソースコードで提供されます。 JUnit4 </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">run.properties</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
構成ファイルを</font><font style="vertical-align: inherit;">使用して自動</font><b><font style="vertical-align: inherit;">テスト</font></b><font style="vertical-align: inherit;">を実行します。使用するスタンドの条件名と実行のタイプを定義します-ローカルまたは外部コンテナーと他の変数を介して。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アリュールプラグイン</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Bambooサーバーにインストールする特別な実行可能ファイル。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BambooサーバーからアクセスできるテストHTMLレポートを生成します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストレポート</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Bambooサーバーを通じて利用可能なテストHTMLレポート。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プランのBambooサーバーに保存され、別のタブに表示されます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bamboo</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
は、自動モードと手動モードの両方で統合テストを開始できます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストレポートをAllure形式で保存します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ggr-server Selenoidサーバー</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
バランサーサーバー。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自動テスト（RemoteWebDriver）からセレンサーバーの複数のインスタンスへのリクエストのバランスを提供します。</font><font style="vertical-align: inherit;">
Selenoidサーバーコンテナーおよびブラウザーを実行するための</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dockerサーバー。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenoid-server</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Remote Testing Server </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「ヘッドレス」ブラウザを使用して、専用のDockerコンテナでテストを起動できます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
指定された同時スレッド数に従って、並列モードでテストを実行します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenoid</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
サーバーへの</font><b><font style="vertical-align: inherit;">Selenoid-ui</font></b><font style="vertical-align: inherit;">サーバーユーザーインターフェイス。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VNCを通じてテストの進行状況をオンザフライで監視できます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenoid-webdriver</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
リモートテストを実行するためのヘッドレスブラウザーを備えた特殊なコンテナー。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selenoidリポジトリから提供されます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitLab</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Stores Autotestsアプリケーションのソースコード。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c5d/cac/f81/c5dcacf817e4aa1529d7cc4d64be740d.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仕事のスキーム</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の図は、高レベル設計レベルでのAutoTestsサービスの一般的なスキームを示しています。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/ye/e8/ue/yee8uexl8oqy5spoqirropxglha.png"></div></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インストールと展開</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自動テストは4つのサーバーに基づいており、そのうちの1つは実行サーバーで、他の3つはコンテナー内のヘッドレスブラウザーの起動を提供します。自動テストの現在の能力は60の同時ストリームを提供し、必要に応じて拡張できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在の配置図を次の図に示します。一般に、20を超える同時ブラウザー（テストスレッド）が必要ない場合は、すべてを1つのサーバーに配置することが可能です。12カーネル+ 24 RAMです。私たちはこの構成から始めましたが、自動テストの能力に対する要件が高まるにつれ、最も安定的で費用効果の高い構成が「典型的な」12カーネル+ 24 RAMサーバーであることが経験的にわかりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの経験では、AngularのWebインターフェースを備えたシステムをテストする場合、ブラウザーでのコンテナーの許容可能な構成は、カーネルフロア+ GBのメモリでなければなりません。</font><font style="vertical-align: inherit;">構成を小さくすると、ブラウザの速度が低下し、識別できないクラッシュが発生する可能性さえあります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/152/65f/095/15265f09560a8abd9a744e5c06da1f61.png"></div><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コードの構造と構成</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードの構造と編成に移る前に、アーキテクチャの開発の方向性を最終的に決定するポリシーと制限をもう一度リストします。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多数の複雑なエンドツーエンドのテストシナリオ。</font><font style="vertical-align: inherit;">高強度の開発;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストシナリオの変動性が高い（それらの変動性）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクリプト配信の高速で継続的な（開発と改良）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自動テストの開発者の初期資格。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発者の高い計画回転率。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記を考慮すると、主なアーキテクチャドライバーは次のとおりです。</font></font><br>
<br>
<ul>
<li>        ;</li>
<li>           cross-cutting   ;</li>
<li>       ;</li>
<li>     cross-cutting          - ( )     -   ;</li>
<li>     spring, aspectJ    «»    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、このアーキテクチャアプローチにより、新しいテストを本番環境に提供する実質的に継続的なプロセスにより、シナリオの変動性が高い条件下で独立した迅速な開発を実装することが可能になりました。</font><font style="vertical-align: inherit;">システムはすでに1,500を超えるビジネスシナリオを実装しているという事実にも関わらず、アーキテクチャは「負荷と改良」に耐えることに成功しています。&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的なコード構造と主要な特定のソリューションの説明を以下に示します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般的なコード構造と開発パターン</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コード編成の一般的な構造は、「階層化された」アーキテクチャー（図を参照）に基づいています。これは、通常、Selenium開発者が推奨するページパターンを継承しています。</font><font style="vertical-align: inherit;">ベースにWeb要素のレベルを追加し、テストシナリオのレベルを強調することにより、このパターンを拡張しました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストクラスレベル</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストシナリオレベル</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ウェブページレベル</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web要素レベル</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストフレームワーク（図では淡色表示されています）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このスキームの各レベルには、特定の一連の責任と機能があります。</font><font style="vertical-align: inherit;">レイヤー間の機能的な交差またはレイヤー間の不正な依存関係は許可されておらず、マージリクエストの前のコードレビューの一部としてリビジョンのコミットが返された主な理由でした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、コードをパッケージに分割する際に、「階層化された」構造が修正されました（下の図を参照）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようなスキームにより、すべてのサブシステム（スキームよりも大幅に多い）を開発者間で分割することが可能になり、その結果、実質的に消えるマージ競合を伴う独立した開発が可能になりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下の図は、テストクラス実装の一般的な構造とプロジェクトパッケージの配布配布スキームを示しています。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c26/582/00e/c2658200ed322c07b65492aef2479074.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/caf/528/329/caf52832908c9f9d739b891d1aafb29d.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストレベル</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストクラスレベルには、特定の個々のテスト用に1つの単一クラスが含まれます（テストは、テスト管理システムでは、テストスクリプトの線形シーケンスとして記述されます）。</font><font style="vertical-align: inherit;">テストクラスは、対応するメソッドの@ Testアノテーションが付いたJunitクラスです。</font><font style="vertical-align: inherit;">通常、テストクラスは1つのテストメソッドのみを実装します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各テストクラスは、RuleChainのすべてのTestRulesを初期化する、つまり、Webドライバーの初期化、一時ディレクトリの設定、その他の汎用ユーティリティハンドラーなどのテストインフラストラクチャを初期化するタスクを持つ基本クラスから継承します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストクラスは、テストスクリプトの実行を次のように編成する責任があります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストビジネスデータ（テストシーン）の初期化、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ2から初期化されたテストデータをスクリプトに転送し、必要なシナリオに従って個々のテストスクリプト（アクション）を順次呼び出します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、ステップ2では、分岐や決定点のない線形シーケンスが存在する必要があります。</font><font style="vertical-align: inherit;">クラス実装テンプレートを以下に示します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストケースレベル</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
説明されているように、テストケースレベルは特定のテストケースの実装を担当します。</font><font style="vertical-align: inherit;">このコンテキストのテストケースは、アプリケーションのWebページの要素との対話を通じてシステムのユーザーが実行する一連の操作です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストケースクラスの主な目的：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
oテストシーンの送信データ、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
o（ページクラスから）Webページから受信したデータを</font><font style="vertical-align: inherit;">使用して、ページの下位クラスのメソッドにアクセスすることにより、テストスクリプトの特定のシーケンスを実行し</font><font style="vertical-align: inherit;">ます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビジネスモデルとテストシーンのコンテキストで、テストの成功に必要なビジネステストを実行します。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">つまり、テストケースクラスは要素のマークアップ、可用性、アクセス可能性をチェックせず、テストシーンのビジネスモデルで動作し、実際にビジネステストを実施します。</font></font></b></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストケースクラスは、「機能インターフェイス」として構成されています。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「apply」（@ステップ）の1つのパブリックメソッドのみが含まれます。これ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
は、「アクション」（Pageクラスによって提供されるメソッド）のシーケンスへの呼び出しとしてスクリプトの実装を提供します</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。oすべての必要なビジネスオブジェクトを入力として受け入れ、ビジネス自体を作成しません。オブジェクトであり、Pageクラス以外のものと直接対話しません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xプライベートメソッド（@ステップ）が含まれ、それぞれがテストスクリプトの特定の個別のステップを実装します（TMS-テスト管理システムで説明）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">類似のサブシステムのアクティビティでさえ、他のアクティビティと相互作用しません（メソッドを呼び出しません）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入力を受け付けず、ログインデータを操作しません。</font><font style="vertical-align: inherit;">つまり、起動元の役割については何も知りません。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このクラス編成により、次のことが可能になります。</font></font><br>
<br>
<ul>
<li>  .             @ Step;</li>
<li>  -   ,   - 1)   -  2)      ( -    -) 3),      -.</li>
</ul><br>
<h3> -</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webページレベルは、Seleniumでテストするための古典的なページパターンです。ページクラスには、特定のWeb要素の定義と、テストシナリオのステップのコンテキストで特定のグループアクションを実行するためのパブリックメソッドのセットが含まれています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ページクラスは、特定のインターフェイス要素へのビジネスデータの入力、Webドライバーの操作（JSの起動など）を直接担当し、それに応じてフォーマットをテストし、Webページのレイアウトと構造をチェックして、次のような基本的なチェックを行います。見つかりました/利用できません。アイテムには必要な値が含まれていません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、ページクラスには他のページとそのメソッドが含まれておらず、それらにアクセスできません。</font><font style="vertical-align: inherit;">また、ページクラスはビジネスチェックを実行せず、一般的な場合のWeb要素のレベルでの構造チェックのみに限定して、ページから受信した「テストスクリプト」データのレベルまで「提供」します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web要素レベル</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Web要素レイヤーには、Webページ上にある可能性のある有限要素のライブラリが含まれます。</font><font style="vertical-align: inherit;">これには、特定のプリミティブと、ウィジェットと呼ばれるいくつかの要素で構成されるより複雑な複合体の両方が含まれます。</font><font style="vertical-align: inherit;">ウィジェットの例としては、「ページ編集」、グローバルメニュー、さまざまなフレーム、モーダルウィンドウ、YandexMapやYoutubeプレーヤーなどの複雑な要素などがあります。</font><font style="vertical-align: inherit;">Web要素は特定のページクラスで構成を編成し、他の要素についても何も知りません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、プロジェクトにIDを持つすべてのインターフェース要素のある種のグローバルな一意の識別がある場合、IDによって特定の要素を要求するグローバルライブラリとしてWeb要素のレベルを、factoryまたはSpringライブラリの\ xml構成クラスを介して編成することは理にかなっています。</font><font style="vertical-align: inherit;">しかし、すべてのプロジェクトでこれが可能であるわけではありません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストフレームワーク</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上の図に示すように、自動テストの開発の概念は、すべての自動テストに一連のシステム機能が提供されているフレームワークの概念に基づいています-それらはシームレスに統合されており、自動テスト開発者はテストクラスのビジネス実装の特定の問題に集中できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フレームワークには、次の機能ブロックが含まれています。</font></font><br>
<br>
<ul>
<li>Rules –         WebDriver    (   );</li>
<li>WebDriverHandlers –      -   Java Script     .     state-less ;</li>
<li>WebElements –   -   ,   cross-function    .               -.    -   Selenium  Selenide.</li>
</ul><br>
<h3>  . Rules</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのテストクラスのキークラスはBaseTestであり、そこからすべてのテストクラスが継承されます。</font><font style="vertical-align: inherit;">BaseTestクラスは、以下に示すように、テストのJunit「ランナー」と使用されるRuleChainを定義します。</font><font style="vertical-align: inherit;">適用されたテストクラスからルールクラスによって提供される関数へのアクセスは、キーとしてスレッド識別子「スレッド」を使用して、ルールクラスの静的メソッドを通じて実行されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自動テストフレームワークの基本クラスの実装の詳細は、記事の次のパートで説明します。パート2-1を参照してください。</font><font style="vertical-align: inherit;">すべてのテストおよびJUnitチェーンルールの基本クラス実装。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アリュールレポートによる結果の文書化。</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実行されたテストの詳細なレポートには、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allureプラグインを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介してBambooと統合されたAllure Frameworkが使用され</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これにより、特定のテストユーザー（機能テストチーム）は、特定のテストがクラッシュしたという事実に関するデータを受け取るだけでなく、手動モードでフォールテストを簡単に復元し、必要に応じて繰り返すことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストレポートを文書化するには、次の機能を使用します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストスクリプトのステップでのレポートのレイアウトの魅力とJunitの注釈、およびテストのメタデータの静的な説明。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビデオテスト、スクリーンショット、クラッシュの原因の追加診断の結果、ファイルブラウザーとの間でダウンロードされたWebブラウザーのログなどの追加情報をレポートに添付するための魅力的な添付ファイル。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のAllureおよびJunitアノテーションは、レポートのマークアップに使用されます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストクラスのレベル：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
o @ Feature-テストが属する機能サブシステムの名前。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
o @ Story-特定のテストケースの名前。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
o @所有者-テストに最後に変更を加えた開発者の名前。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
o @ TmsLink-使用される「テスト管理システム」のテストの説明へのリンク。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストクラスのテストメソッドレベル（@ Test）：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
o @ DisplayName-テストスクリプトの完全な名前。</font><font style="vertical-align: inherit;">@ Storyとは異なり、テストシーンの構成のみが異なる同じスクリプトを共有できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストシナリオの特定のステップに対応するメソッドのレベル：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
o @ステップ-何が起こっているかのビジネスエッセンスを反映するテストステップの意味のある名前。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
@ステップからテストステップに名前を付けると、テストシナリオで説明されているすべてのステップと項目を完全に繰り返す詳細レポートを作成できます。</font><font style="vertical-align: inherit;">これにより、自動テストのユーザーはテストシナリオの経過を簡単に追跡でき、発生ポイントの特定に役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、Allure Frameworkの使用は非常に便利で簡単であることが判明しました。ただし、多数の長く複雑なテストスクリプト（後で紹介するセクションで説明）の場合に生成される大量のデータに関連するいくつかの機能は例外です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すぐに別の方法で何ができたでしょうか？</font><font style="vertical-align: inherit;">Spring Frameworkを使用する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自動テストを実装するときに、意図的にSpring Coreの使用を拒否したという事実にもかかわらず、私は一般に、その使用を正当化して機能していると考えています。</font><font style="vertical-align: inherit;">実装されたプロトタイプは、Spring Coreの使用が次のタスクで機能することを示しました（もちろん、完全にはテストしていません）。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストシーンの初期化。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webページと要素の初期化。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
唯一の機能は、プロトタイプレベルの「デフォルト」スコープコンテキストを使用する必要があることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストシーンの初期化。自動テストでは、テストシーンは、単純な新規またはオブジェクトファクトリを介してテストクラスに直接クラスインスタンスを作成する従来の方法で初期化されます。ここでは、構成クラスを介して、または外部のxmlファイルまたはファイルファイルを介して初期化を使用するのが非常に合理的です。利点は次のとおりです。1）テストシーンへの変更が主要なクラスに関連しなくなったため、レビューコードが簡素化されます。2）異なるスタンドやその他の条件に応じて異なるテストシーンを接続できます。現在、ポイント2は使用されません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webページと要素の初期化。</font><font style="vertical-align: inherit;">WebページクラスとWeb要素の注入は、セレン化Web要素の遅延遅延初期化により機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、ユーザーインターフェイスの特定のグローバル仕様に従ってWeb要素とページのライブラリを作成し、絶対パスやIDではなく、仕様に従ってプロジェクトIDによってこれらの要素へのリンクをコードで受け取ることが可能になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はこれを非常に注意深くテストしなかったとすぐに言っておく必要があります。実際、私はこの原則に基づいて、ログインの「ページ」とユーザーの「情報」ページのテスト実装に限定しました。</font></font><br>
&nbsp;<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回顧。</font><font style="vertical-align: inherit;">びっくり</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、プロジェクトの開発中に生じた予期せぬ驚きに加えて、「そうでない」としたら何がより良い結果が得られるかについての考慮事項について説明しました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セレン対応のフロントエンドマークアップ（角度）</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちが遭遇した最も深刻な驚きの1つは、「フローティング」ページレイアウトでした。その結果、Angularアプリケーションを更新した後、SeleniumがID（id、クラス、またはng-model）またはパス（XPathの場合）。</font><font style="vertical-align: inherit;">これにより、テストが不安定になり、落下の理由が曖昧になりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながら、この問題は一般に解決できないことが判明しました。</font><font style="vertical-align: inherit;">私たちは組織的な対策でそれを回避しました：1）リリースの新しい候補のテストの開始時に、自動テストのすべての開発者は、Web要素ロケーターの値の編集という点での迅速な排除と改良に焦点を当てます。</font><font style="vertical-align: inherit;">2）結局、相対的なXPathを使用するようになりましたが、残念ながらパフォーマンスはまったく向上しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理想的には、そのような驚きとの戦いは、ビジネスデータのグローバルドメイン構造とプロジェクト全体のレベルでのユーザーインターフェイス設計に関連付けることができるディクショナリに従って、すべてのインターフェイス要素に一意の名前を付けるという最初から組み込まれている慣習にあります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「ダウンロード」ファイルのファイル名がありません</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストしたシステムからファイルを「アップロード」するには、次のソリューションを使用します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「ローカル」起動モード（作業PCで直接起動）-「ローカル」ブラウザが初期化されると、一時ローカルフォルダの名前がパラメータとして渡されます。</font><font style="vertical-align: inherit;">次に、後続の分析のためにファイルがローカルフォルダーから直接読み取られます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「リモート」モード（Bamboo経由）の場合、ファイルは、ソレノイドサーバーの機能を介して、ブラウザーからコンテナーから「取得」されました：</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">selenoid-host.example.com</font></a><font style="vertical-align: inherit;"> : </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">4444</font></a><font style="vertical-align: inherit;"> / </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">download/{SESSION_ID►/{FILE_NAME}</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
詳細は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記載されてい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どちらのモードでも、ファイルにアクセスするには、ファイル名を知っておく必要がありました。</font><font style="vertical-align: inherit;">コンテナのディスクにファイルがロードされる名前を知ることができなかったので、これは驚きでした。</font><font style="vertical-align: inherit;">ブラウザーを使用してコンテナーからファイルをダウンロードして自動テストする方法については、記事の次の部分で説明します。&nbsp;</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースの目詰まりをテストする</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非常に迅速に遭遇したテストデータベースの詰まり。まず、これは、合格したテストシナリオの「クリーンさ」のために、テスト環境がスタンド自体で動的に生成されたためです。たとえば、ユーザーオブジェクトAを自分の個人アカウントに追加する機能を確認するには、新しいユーザー、偽の契約、オブジェクトAを順番に作成し、特定のアドレスに配置し、すべての予備テストスクリプト（テストシーンが作成されたもの）が完了した後にのみ、オブジェクトAをユーザーにリンクするためのテストスクリプト。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しばらくすると、オブジェクトの配置に使用される特定のアドレスに、これらのオブジェクトの数千および数万が表示されたことがわかります。</font><font style="vertical-align: inherit;">これにより、アドレスのオブジェクトで検索操作を実行するときにパフォーマンスの問題が発生し始めました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、私たちが遭遇した中で最も印象的な例です。</font><font style="vertical-align: inherit;">この場合、定期的に「新しい」アドレスに移動するだけです。通常、デフォルトのシーンを回転させる手順は定期的に実行する必要があります。そうしないと、不快な驚きが発生する可能性があります。</font></font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">長いテスト期間</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に実行されるテストの数が増加しているときに、この問題が非常に予期せず発生しました。私たちはそれについて考えていなかったと思います。フルセットのテスト（約1000回のフルテスト）を完了するのにかかる時間は、6時間の臨界点に近づき始めました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に実行するテストの数を増やすために、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenoid-ggrに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切り替えました&nbsp;  </font><font style="vertical-align: inherit;">。これにより、同時junitスレッドの数を20（Selenoidサーバー）から60（3サーバー）に増やすことができ、その後、テストベンチのパフォーマンスにぶつかりました。 「突然」、60を超える同時セッションでテストベンチが安定して動作しないことがわかりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、生産性はリソースによって向上させることができますが、問題は、これらのすべてのリソースが、3から4時間だけ排他的に必要であり、フルナイトテストまたは定期的なpreQAテストが実行される場合です。リソースがアイドル状態の残りの時間。もちろん、ここではもちろん、特にSelenoidソリューションがこのアプローチに完全に適合しているため、AWSは1時間ごとのサーバーレンタルをすぐに提供しますが、スタンドがSelenoidと同じAWSゾーンに配置されていない場合は、トラフィックの侵入/侵入を行うことができます。&nbsp;&nbsp;&nbsp; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いずれの場合も、多数のE2Eテストを備えたセルフテストシステムを構築する際のテストサーバーとテストベンチ自体のスケーリングとパフォーマンスの問題は、プロジェクトの最初から検討する必要があります。このため、完全回帰とpreQAの最大通過時間の要件に依存する価値があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多数のテストを同時に実行して「ストーム」を開始する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作業テストの不可解な大規模なクラッシュは、60のブラウザで最大60の同時テストストリームをスケーリングした後に遭遇した次の驚きでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「タイムライン」レポートでは、「赤いバー」のように見えました（下図）。</font><font style="vertical-align: inherit;">これは、テストスタンド内の個々のサービスのパフォーマンスの制限が原因であることがわかりました。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/580/84e/60b/58084e60b239a6157b54db4e8b9c496c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つの理由がありました。</font><font style="vertical-align: inherit;">最初の「プラグ」は、認可サービスと個人アカウントに対する大衆の訴えによって引き起こされました。</font><font style="vertical-align: inherit;">すべてのブラウザが同時にログインを開始し、テストベンチ側でサービスをオーバーロードします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
後続の「列」は、テストクラスがサブシステムごとにフォルダーに配置され、junitがそれらをほぼ同時に実行して、スタンドの特定の機能サブシステムをロードし、スタンド構成のパフォーマンス制限を超えているという事実に関連していることが判明しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ログインスクリプトメソッドをバランサーでラップすることで最初の問題を解決し、ログイン操作の最大数を特定の定数に制限しました。</font></font><br>
<br>
<pre><code class="java hljs"> &nbsp; <span class="hljs-meta">@Step(":    ")</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">apply</span><span class="hljs-params">(User user)</span> </span>{
&nbsp;&nbsp;&nbsp;&nbsp;	<span class="hljs-keyword">try</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	LoadCounter.get(); <span class="hljs-comment">//   .     </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	<span class="hljs-keyword">try</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;applyLogin(user); <span class="hljs-comment">// </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	} <span class="hljs-keyword">catch</span> (Throwable t) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	<span class="hljs-keyword">throw</span> t; <span class="hljs-comment">//          </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	} <span class="hljs-keyword">finally</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	LoadCounter.release(); <span class="hljs-comment">//   </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="hljs-keyword">catch</span> (LoadCounterException e) { <span class="hljs-comment">//         </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> StandRuntimeException(<span class="hljs-string">"Can not get loadcounter for Login action."</span>, e);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;	}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目の問題は、junit mavenプラグインにあるランダムテスト実行オプションをオンにすることで解決されました。</font></font><br>
<br>
<pre><code class="java hljs"> &nbsp; &nbsp; 	&lt;plugin&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	 &nbsp; &nbsp; &lt;version&gt;….&lt;/version&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&lt;configuration&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&lt;!-- Defines the order the tests will be run in. Supported values are <span class="hljs-string">"alphabetical"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"reversealphabetical"</span>, <span class="hljs-string">"random"</span>,<span class="hljs-string">"hourly"</span>, <span class="hljs-string">"failedfirst"</span>, <span class="hljs-string">"balanced"</span> and <span class="hljs-string">"filesystem"</span>. --&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&lt;runOrder&gt;random&lt;/runOrder&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	…<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの問題は、リソースが限られているためにテストベンチのパフォーマンスを向上させる機会がなかったという事実、およびこれらのリソースがほとんどの時間アイドルであるという事実に関連していることに注意する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、組み込みのE2E Web-UIセルフテストシステムは、代理負荷テストや、テストされたシステム全体のパフォーマンスと安定性のスクリーニングに使用できることがわかりました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bambooサーバーとそのストレージの負荷が高い</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多数の操作（たとえば、ログに記録された </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オペレーション数は200から2000で、テストの数は約1300です）。その場合、Allureレポートの量は非常に多くなります。スクリーンショットやアップロード/アップロードされたファイルなどのさまざまな添付ファイルもここに追加すると、ボリュームはすでに数百メガバイトになります。たとえば、900テストの夜間回帰の場合、Bamboo Allureだけにアップロードされるデータ量は約600 MBです。&nbsp;&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DevOpsエンジニアは、特に1年以上データを保存する必要性に関して、ディスクスペースのこのような集中的な消費に熱心でなく、積極的に不満を表明していることは明らかです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、Allure Enterpriseなどのレポートを保存および処理するための外部サーバーを使用することで、これを回避する方法がわかります。</font><font style="vertical-align: inherit;">このサーバーはすでに支払われていますが、この問題を解決することができます。</font><font style="vertical-align: inherit;">現在、Allure Enterpriseのテストとプロジェクトへの統合に取り組んでいます。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">つづく</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の記事では、私の同僚が話を続け、Smartbear SoapUI Proを使用したWebサービスのテストの魅力的な歴史について説明します。</font><font style="vertical-align: inherit;">2人の自動化エンジニアの力で約500のテストスクリプトを自動化することができました。このために、標準のSOAP UI関数の機能を大幅に拡張する追加のフレームワークを実装する必要がありましたが、その詳細については後で説明します。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事は、プロジェクトマネージャーおよびプロダクトオーナーと共同で作成されました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コタレスク</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート1.組織的および管理的。</font><font style="vertical-align: inherit;">なぜ自動化が必要だったのですか。</font><font style="vertical-align: inherit;">開発および管理プロセスの組織。</font><font style="vertical-align: inherit;">使用の</font></font></a>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パート2。技術。</font><font style="vertical-align: inherit;">アーキテクチャと技術スタック。</font><font style="vertical-align: inherit;">実装の詳細と技術的な驚き&nbsp;</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2-1。</font><font style="vertical-align: inherit;">すべてのテストの基本クラス実装とJUnitチェーンルール&nbsp;</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パート2-2。</font><font style="vertical-align: inherit;">ブラウザを使用してコンテナからテストフレームワークにファイルをアップロードするプロセスを実装します。</font><font style="vertical-align: inherit;">ブラウザによってダウンロードされたファイルの名前を検索します</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空室があります。お越しください！</font></font></b><div class="spoiler_text"><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  « »</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  « »</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  -</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    </a></li>
</ul></div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja477026/index.html">第7回年次JetBrainsハッカソン</a></li>
<li><a href="../ja477032/index.html">ブロックチェーンからDAGへ：仲介者を取り除く</a></li>
<li><a href="../ja477038/index.html">初心者に最適なプログラミング言語</a></li>
<li><a href="../ja477040/index.html">Gartner Chart 2019：これらすべての流行語は何ですか？</a></li>
<li><a href="../ja477042/index.html">モンテカルロブラックジャック戦略の最適化</a></li>
<li><a href="../ja477046/index.html">Raiffeisenbank 28/11 + Broadcastでの.Meetup</a></li>
<li><a href="../ja477048/index.html">資本金550億ドルの会社が取引所を離れることを考えた理由</a></li>
<li><a href="../ja477050/index.html">ビデオ監視とクラウドのためのブラックフライデー2019。</a></li>
<li><a href="../ja477052/index.html">Reactor、WebFlux、Kotlinコルーチン、または簡単な例による非同期</a></li>
<li><a href="../ja477054/index.html">Webastoがモジュール式自動車用バッテリーシステムを発表</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>