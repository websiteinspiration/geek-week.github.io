<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧜🏻 🏣 🏂 Zap Baseline Scanを使用して、サイトの脆弱性を継続的にスキャンします 😐 🚔 🧗🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="少し前、Wordpressブログを転生したいという要望がありました。並行して、ECSA試験に合格するために蓄積された知識を合理化および体系化することへの要望が生まれました。これにより、ブログをスタンドアロンサーバーに展開することにしました。一定期間の後、最も人気のある（したがって常に脆弱な）エンジン...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Zap Baseline Scanを使用して、サイトの脆弱性を継続的にスキャンします</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493778/"><img src="https://habrastorage.org/webt/is/l4/a9/isl4a90ryvz7xin-keckrq4u9dg.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少し前、Wordpressブログを転生したいという要望がありました。並行して、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ECSA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">試験に合格するために蓄積された知識を合理化および体系化することへの要望が生まれました</font><font style="vertical-align: inherit;">。これにより、ブログをスタンドアロンサーバーに展開することにしました。一定期間の後、最も人気のある（したがって常に脆弱な）エンジンの1つを使用しているサイトのセキュリティ問題が予想どおりに発生しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
調査の結果、このガイドは、私があなたと共有したいと思っている脆弱性について、サイトの継続的なスキャンの組織に登場しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどの素材は、パイプラインをCI / CDに埋め込むためにも使用できます。</font></font><br>
<br>
<a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まず、プロジェクトの境界と、それに費やす準備ができているリソースを評価する必要があります。</font><font style="vertical-align: inherit;">この特定のケースでは、莫大なものを採用するタスクはありません。さらに、プロジェクトの予算はほぼゼロです。</font><font style="vertical-align: inherit;">計画された定期的なクロールは、サイトが悪意のある配偶者を通過する側からどのように見えるかを理解する助けとして、大まかな目安として機能する必要があります。</font><font style="vertical-align: inherit;">これらのチェックを毎日手動で実行しないようにするためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のものが必要です。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スケジュールされたタスク用のLinux OSベースのサードパーティサーバー。</font></font></li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZAP the</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> image </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">of the Baselineの</font></a><font style="vertical-align: inherit;">画像</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bashスクリプトを記述し、Linuxコマンドラインを使用するスキル。</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OWASP ZAPスキャナーによる自動サイトスキャンの構成</font></font></h2><br>
<img src="https://habrastorage.org/webt/rj/rk/nk/rjrknkqzknoijnbkspkdhypdecw.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題の説明に照らして、フル機能のZAPではなく、軽量の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZAPベースラインスキャン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクリプトを使用します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Dockerイメージから起動します。便利でスタイリッシュ、ファッショナブルな若者です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
画像にはいくつかのオプションがあります。</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">owasp / zap2docker-bare-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要な依存関係のみを含む最小のイメージ（OWASPによれば、CIとの統合に最適です）。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">owasp / zap2docker-weekly-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">毎週のビルド（何らかの理由で常に「1か月前に更新」されます）。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">owasp / zap2docker-stable-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最新の安定したイメージ。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">owasp / zap2docker-live-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最新の、おそらく不安定なイメージ。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私には実験の選択の自由度と運用範囲があるため、owasp / zap2docker-liveを選択しました（運が良ければ、何らかのバグを修正します）。</font><font style="vertical-align: inherit;">もちろん、より深刻で金銭的なプロジェクトについては、安定版を選択する価値があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
経験的に、最適な起動パラメーターが選択されました（詳細は、プロジェクトのWikiの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<pre><code class="bash hljs">docker run -v /tmp/zap/:/zap/wrk/:rw -t owasp/zap2docker-live zap-baseline.py -t https://blog.tyutin.net/ru/ -j -a -m 5 -r blog_tyutin_net-$(date <span class="hljs-string">"+%Y-%m-%d"</span>).html -J blog_tyutin_net-$(date <span class="hljs-string">"+%Y-%m-%d"</span>).json</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのオプションを注意深く分析します：</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docker run-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スキャンはDockerから始まります-便利で、ファッショナブルで、スタイリッシュで、若者です。</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-v / tmp / zap /：/ zap / wrk /：rw-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レポートファイルを保存するディレクトリをマウントします。</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-t-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">画面に情報を表示するためのターミナルをスキャナーに提供します。</font></font></li>
<li><b>owasp/zap2docker-live</b> — ,     , live    ;</li>
<li><b>zap-baseline.py</b> —   ;</li>
<li><b>-t <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">blog.tyutin.net/ru</a></b> —  ;</li>
<li><b>-j</b> —  ajax-:  ,   ;</li>
<li><b>-a</b> —  ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>;</li>
<li><b>-m 5</b> —   5   ,    (     1);</li>
<li><b>-r blog_tyutin_net-$(date «+%Y-%m-%d»).html</b> —    html-,          (     Telegram     );</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-J blog_tyutin_net-$（日付“ +％Y-％m-％d”）。Json-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル名にサイト名とスキャン日付を含めて、レポートをhtmlファイルに保存します（このファイルは、統合情報をTelegramに転送するために解析するのに便利です） 。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコマンドの結果として、OWASP ZAPによると、サイトで利用できるセキュリティの問題を示すかなり興味深いレポートが得られます。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これがコンソールのレポートです...</font></font></b><div class="spoiler_text"><code>Total of 272 URLs<br>
PASS: Cookie Without Secure Flag [10011]<br>
PASS: Cross-Domain JavaScript Source File Inclusion [10017]<br>
PASS: Content-Type Header Missing [10019]<br>
PASS: X-Frame-Options Header Scanner [10020]<br>
PASS: Information Disclosure - Debug Error Messages [10023]<br>
PASS: Information Disclosure - Sensitive Information in URL [10024]<br>
PASS: Information Disclosure - Sensitive Information in HTTP Referrer Header [10025]<br>
PASS: HTTP Parameter Override [10026]<br>
PASS: Information Disclosure - Suspicious Comments [10027]<br>
PASS: Open Redirect [10028]<br>
PASS: Cookie Poisoning [10029]<br>
PASS: User Controllable Charset [10030]<br>
PASS: User Controllable HTML Element Attribute (Potential XSS) [10031]<br>
PASS: Viewstate Scanner [10032]<br>
PASS: Directory Browsing [10033]<br>
PASS: Heartbleed OpenSSL Vulnerability (Indicative) [10034]<br>
PASS: Strict-Transport-Security Header Scanner [10035]<br>
PASS: Server Leaks Information via "X-Powered-By" HTTP Response Header Field(s) [10037]<br>
PASS: X-Backend-Server Header Information Leak [10039]<br>
PASS: Secure Pages Include Mixed Content [10040]<br>
PASS: HTTP to HTTPS Insecure Transition in Form Post [10041]<br>
PASS: HTTPS to HTTP Insecure Transition in Form Post [10042]<br>
PASS: User Controllable JavaScript Event (XSS) [10043]<br>
PASS: Big Redirect Detected (Potential Sensitive Information Leak) [10044]<br>
PASS: Insecure Component [10046]<br>
PASS: Content Cacheability [10049]<br>
PASS: Retrieved from Cache [10050]<br>
PASS: X-ChromeLogger-Data (XCOLD) Header Information Leak [10052]<br>
PASS: CSP Scanner [10055]<br>
PASS: X-Debug-Token Information Leak [10056]<br>
PASS: Username Hash Found [10057]<br>
PASS: X-AspNet-Version Response Header Scanner [10061]<br>
PASS: PII Disclosure [10062]<br>
PASS: Base64 Disclosure [10094]<br>
PASS: Timestamp Disclosure [10096]<br>
PASS: Hash Disclosure [10097]<br>
PASS: Cross-Domain Misconfiguration [10098]<br>
PASS: Weak Authentication Method [10105]<br>
PASS: Reverse Tabnabbing [10108]<br>
PASS: Modern Web Application [10109]<br>
PASS: Private IP Disclosure [2]<br>
PASS: Session ID in URL Rewrite [3]<br>
PASS: Script Passive Scan Rules [50001]<br>
PASS: Insecure JSF ViewState [90001]<br>
PASS: Java Serialization Object [90002]<br>
PASS: Charset Mismatch [90011]<br>
PASS: Application Error Disclosure [90022]<br>
PASS: Loosely Scoped Cookie [90033]<br>
WARN-NEW: In Page Banner Information Leak [10009] x 1 <br>
 https://blog.tyutin.net/favicon.ico (404 Not Found)<br>
WARN-NEW: Cookie No HttpOnly Flag [10010] x 5 <br>
 https://blog.tyutin.net/wp-login.php (200 OK)<br>
 https://blog.tyutin.net/wp-login.php?reauth=1&amp;redirect_to=https%3A%2F%2Fblog.tyutin.net%2Fwp-admin%2F (200 OK)<br>
 https://blog.tyutin.net/wp-login.php?action=lostpassword (200 OK)<br>
 https://blog.tyutin.net/wp-login.php (200 OK)<br>
 https://blog.tyutin.net/wp-login.php?action=lostpassword (200 OK)<br>
WARN-NEW: Incomplete or No Cache-control and Pragma HTTP Header Set [10015] x 114 <br>
 https://blog.tyutin.net/ru/ (200 OK)<br>
 https://blog.tyutin.net/robots.txt (200 OK)<br>
 https://blog.tyutin.net/ (200 OK)<br>
 https://blog.tyutin.net/blog/category/uncategorized/ (200 OK)<br>
 https://blog.tyutin.net/blog/2020/03/03/hello-world/ (200 OK)<br>
WARN-NEW: X-Content-Type-Options Header Missing [10021] x 161 <br>
 https://blog.tyutin.net/ru/ (200 OK)<br>
 https://blog.tyutin.net/robots.txt (200 OK)<br>
 https://blog.tyutin.net/ (200 OK)<br>
 https://blog.tyutin.net/blog/category/uncategorized/ (200 OK)<br>
 https://blog.tyutin.net/blog/2020/03/03/hello-world/ (200 OK)<br>
WARN-NEW: Server Leaks Version Information via "Server" HTTP Response Header Field [10036] x 188 <br>
 https://blog.tyutin.net/ru/ (200 OK)<br>
 https://blog.tyutin.net/robots.txt (200 OK)<br>
 https://blog.tyutin.net/sitemap.xml (404 Not Found)<br>
 https://blog.tyutin.net/ (200 OK)<br>
 https://blog.tyutin.net/wp-admin/ (302 Found)<br>
WARN-NEW: Content Security Policy (CSP) Header Not Set [10038] x 47 <br>
 https://blog.tyutin.net/ru/ (200 OK)<br>
 https://blog.tyutin.net/sitemap.xml (404 Not Found)<br>
 https://blog.tyutin.net/ (200 OK)<br>
 https://blog.tyutin.net/wp-admin/admin-ajax.php (400 Bad Request)<br>
 https://blog.tyutin.net/blog/category/uncategorized/ (200 OK)<br>
WARN-NEW: Cookie Without SameSite Attribute [10054] x 5 <br>
 https://blog.tyutin.net/wp-login.php (200 OK)<br>
 https://blog.tyutin.net/wp-login.php?reauth=1&amp;redirect_to=https%3A%2F%2Fblog.tyutin.net%2Fwp-admin%2F (200 OK)<br>
 https://blog.tyutin.net/wp-login.php?action=lostpassword (200 OK)<br>
 https://blog.tyutin.net/wp-login.php (200 OK)<br>
 https://blog.tyutin.net/wp-login.php?action=lostpassword (200 OK)<br>
WARN-NEW: Feature Policy Header Not Set [10063] x 76 <br>
 https://blog.tyutin.net/ru/ (200 OK)<br>
 https://blog.tyutin.net/sitemap.xml (404 Not Found)<br>
 https://blog.tyutin.net/ (200 OK)<br>
 https://blog.tyutin.net/wp-admin/admin-ajax.php (400 Bad Request)<br>
 https://blog.tyutin.net/blog/category/uncategorized/ (200 OK)<br>
WARN-NEW: Source Code Disclosure - PHP [10099] x 11 <br>
 https://blog.tyutin.net/ru/%d0%b7%d0%b0%d0%bf%d0%b8%d1%81%d0%ba%d0%b8-devsecopsa-sast-%d0%b8%d0%bb%d0%b8-%d0%bf%d0%be%d0%b3%d1%80%d1%83%d0%b6%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b2-%d0%b8%d1%81%d1%85%d0%be%d0%b4%d0%bd%d1%8b%d0%b9/ (200 OK)<br>
 https://blog.tyutin.net/ru/feed/ (200 OK)<br>
 https://blog.tyutin.net/ru/category/devsecops/feed/ (200 OK)<br>
 https://blog.tyutin.net/ru/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPhp.js?ver=3.0.9b (200 OK)<br>
 https://blog.tyutin.net/ru/wp-content/uploads/sites/2/2020/03/SSLLabs_blog_03_Aplus.png (200 OK)<br>
WARN-NEW: Absence of Anti-CSRF Tokens [10202] x 22 <br>
 https://blog.tyutin.net/sitemap.xml (404 Not Found)<br>
 https://blog.tyutin.net/sitemap.xml (404 Not Found)<br>
 https://blog.tyutin.net/ (200 OK)<br>
 https://blog.tyutin.net/blog/category/uncategorized/ (200 OK)<br>
 https://blog.tyutin.net/blog/2020/03/03/hello-world/ (200 OK)<br>
WARN-NEW: Sub Resource Integrity Attribute Missing [90003] x 37 <br>
 https://blog.tyutin.net/ru/ (200 OK)<br>
 https://blog.tyutin.net/sitemap.xml (404 Not Found)<br>
 https://blog.tyutin.net/ (200 OK)<br>
 https://blog.tyutin.net/blog/category/uncategorized/ (200 OK)<br>
 https://blog.tyutin.net/blog/2020/03/03/hello-world/ (200 OK)<br>
FAIL-NEW: 0 FAIL-INPROG: 0 WARN-NEW: 11 WARN-INPROG: 0 INFO: 0 IGNORE: 0 PASS: 48</code><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このレポートの問題は、レポートが大きいことです。</font><font style="vertical-align: inherit;">それを毎日読む必要性はそれをするすべての欲求を殺します。</font><font style="vertical-align: inherit;">したがって、次のセクションに進みます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OWASP ZAPレポートのデータを統合する</font></font></h2><br>
<img src="https://habrastorage.org/webt/1d/-d/df/1d-ddf3k98teyhzeoxfetjibz6u.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前述のとおり、スキャン結果はhtmlおよびjsonとして保存されます。</font><font style="vertical-align: inherit;">json形式は統合データを取得するのに適しています。優れた</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jq</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーティリティの助けを借りて、</font><font style="vertical-align: inherit;">jsonオブジェクトを考えられるあらゆる方法で操作できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特定の場合のサイトのセキュリティ状況を定期的に確認および理解するには、重要度の降順で並べ替えられた、フォーマットされた問題のリストで十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この一連のコマンドを使用して、jsonをオプションに圧縮し、一目で本質を理解できるようにします。</font></font><br>
<br>
<pre><code class="bash hljs">cat blog_tyutin_net--<span class="hljs-variable">$SCANDATE</span>.json | \<font></font>
     jq -c <span class="hljs-string">'.site[].alerts[]'</span> | \<font></font>
     jq -r -s -c <span class="hljs-string">'sort_by(.riskcode, .confidence)| reverse | .[] | "(.riskdesc)\t|\t(.alert)"'</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンソールのコマンド出力は次のとおりです。</font></font><br>
<br>
<pre><code class="plaintext hljs">Medium (High)   |   Sub Resource Integrity Attribute Missing<font></font>
Medium (Medium) |   Source Code Disclosure - ActiveVFP<font></font>
Medium (Medium) |   Source Code Disclosure - PHP<font></font>
Low (High)  |   In Page Banner Information Leak<font></font>
Low (High)  |   Server Leaks Version Information via "Server" HTTP Response Header Field<font></font>
Low (High)  |   Server Leaks Version Information via "Server" HTTP Response Header Field<font></font>
Low (Medium)    |   Cookie No HttpOnly Flag<font></font>
Low (Medium)    |   Cookie Without SameSite Attribute<font></font>
Low (Medium)    |   Content Security Policy (CSP) Header Not Set<font></font>
Low (Medium)    |   X-Content-Type-Options Header Missing<font></font>
Low (Medium)    |   Feature Policy Header Not Set<font></font>
Low (Medium)    |   Incomplete or No Cache-control and Pragma HTTP Header Set<font></font>
Low (Medium)    |   Absence of Anti-CSRF Tokens<font></font>
Informational (Medium)  |   Modern Web Application<font></font>
Informational (Medium)  |   Storable but Non-Cacheable Content<font></font>
Informational (Medium)  |   Base64 Disclosure<font></font>
Informational (Medium)  |   Storable and Cacheable Content<font></font>
Informational (Medium)  |   Storable and Cacheable Content<font></font>
Informational (Low) |   Charset Mismatch <font></font>
Informational (Low) |   User Controllable HTML Element Attribute (Potential XSS)<font></font>
Informational (Low) |   Timestamp Disclosure - Unix<font></font>
Informational (Low) |   Information Disclosure - Suspicious Comments</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OWASP ZAPスキャンレポートをTelegramに送信します</font></font></h2><br>
<img src="https://habrastorage.org/webt/vw/0r/cr/vw0rcrth9wlfjerwlcn7w5i7hlc.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの実験的なウサギは企業リソースではなく、スタートアッププロジェクトでもありませんが、シンプルな個人ブログなので、Jiraとは統合しません（ここに記載されているマニュアルを使用してこれを行うことは可能ですが）、テスト結果をTelegramに送信します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テレグラムボットをインターネット上に作成する問題は長い間議論されてきたので、それを迂回してビジネスに取り掛かります。</font><font style="vertical-align: inherit;">このプロジェクトでは、統合された情報を毎日受け取り、興味深い瞬間に追加情報をすぐに見る機会が得られるかどうかに関心があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、各スキャンの後に、2つのメッセージを送信します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">発見の概要;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">詳細なHTMLレポートをファイルとして。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Telegramにテキストメッセージを送信するスクリプト：</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash</span>
TGCHATID=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
TGMESSAGE=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>
TGTOKEN=<span class="hljs-string">"<span class="hljs-variable">$3</span>"</span><font></font>
 <font></font>
<span class="hljs-comment"># Send message to TG chat</span><font></font>
curl -m 20 -s \<font></font>
        --header <span class="hljs-string">'Content-Type: application/json'</span> \<font></font>
        --request <span class="hljs-string">'POST'</span> \<font></font>
        --data <span class="hljs-string">"{\"disable_web_page_preview\":true,\"parse_mode\":\"Markdown\",\"chat_id\":\"<span class="hljs-variable">${TGCHATID}</span>\",\"text\":\"<span class="hljs-variable">${TGMESSAGE}</span>\"}"</span> <span class="hljs-string">"https://api.telegram.org/bot<span class="hljs-variable">${TGTOKEN}</span>/sendMessage"</span> \<font></font>
        1 &gt; /dev/null</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OWASP ZAPレポートファイルをTelegramに送信するスクリプト：</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash</span>
TGCHATID=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
FILETOSEND=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>
TGTOKEN=<span class="hljs-string">"<span class="hljs-variable">$3</span>"</span><font></font>
 <font></font>
<span class="hljs-comment"># Send file to TG chat</span><font></font>
curl -m 20 \<font></font>
    -F <span class="hljs-string">"chat_id=<span class="hljs-variable">${TGCHATID}</span>"</span> \<font></font>
    -F document=@<span class="hljs-variable">${FILETOSEND}</span> \<font></font>
    https://api.telegram.org/bot<span class="hljs-variable">${TGTOKEN}</span>/sendDocument</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実は、ここでレンガを作りました。</font><font style="vertical-align: inherit;">それらから壁を置く時が来ました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイトの継続的なセキュリティスキャンを開始します</font></font></h2><br>
<img src="https://habrastorage.org/webt/rn/wk/qw/rnwkqw1xgtgy_ivqcxmnxuyz1os.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リストは、cronで使用できるようになっている最終的なスクリプトを示しています。</font><font style="vertical-align: inherit;">スクリプト起動オプション：</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-target</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -OWASP ZAPクロールの開始URL。</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-resdir-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スキャンレポートを格納するディレクトリ。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スクリプトロジックは、1日1回のサイトスキャンを想定しています。</font><font style="vertical-align: inherit;">「今日」のスキャンレポートで再起動すると、これらのレポートからデータが送信されます。</font><font style="vertical-align: inherit;">そして、それがどのように見えるかは次のとおりです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5w/pn/aa/5wpnaaehd--x65zzfaaiyixuobi.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モバイルデバイスの画面上のHTMLレポートはかなりまともです：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fx/0s/wm/fx0swmq8mv8rwc6vk3j2_urqjf8.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、ここが機会のヒーローです-脆弱性についてサイトの自動パッシブスキャン用のスクリプト：</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash
 </span>
<span class="hljs-comment"># -----------------------------------------</span>
<span class="hljs-comment"># ------    Get input parameters  ---------</span>
<span class="hljs-comment"># -----------------------------------------</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
<span class="hljs-keyword">do</span>
    <span class="hljs-keyword">case</span> <span class="hljs-variable">$i</span> <span class="hljs-keyword">in</span><font></font>
                -target=*)<font></font>
                TARGET=<span class="hljs-string">"<span class="hljs-variable">${i#*=}</span>"</span>
                <span class="hljs-built_in">shift</span><font></font>
                ;;<font></font>
        -resdir=*)<font></font>
                RESDIR=<span class="hljs-string">"<span class="hljs-variable">${i#*=}</span>"</span>
                <span class="hljs-built_in">shift</span><font></font>
                ;;<font></font>
 <font></font>
        <span class="hljs-keyword">esac</span>
<span class="hljs-keyword">done</span>
<span class="hljs-comment"># -----------------------------------------</span><font></font>
 <font></font>
<span class="hljs-comment"># -----------------------------------------</span>
<span class="hljs-comment"># ------  Check input parameters  ---------</span>
<span class="hljs-comment"># -----------------------------------------</span>
<span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$TARGET</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"-target parameter is not set. Exiting."</span> &amp;&amp; <span class="hljs-built_in">exit</span>
<span class="hljs-keyword">fi</span>
<span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$RESDIR</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"-resdir parameter is not set. Exiting."</span> &amp;&amp; <span class="hljs-built_in">exit</span>
<span class="hljs-keyword">fi</span>
<span class="hljs-keyword">if</span> [[ ! -d <span class="hljs-variable">${RESDIR}</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Path <span class="hljs-variable">${RESDIR}</span> does not exist. Creating..."</span>
    mkdir -p <span class="hljs-variable">$RESDIR</span>
    chown 1000:1000 <span class="hljs-variable">$RESDIR</span>
    <span class="hljs-keyword">if</span> [ $? -ne 0 ]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Error creating <span class="hljs-variable">${RESDIR}</span> directory. Exiting."</span>
        <span class="hljs-built_in">exit</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">fi</span>
<span class="hljs-comment"># -----------------------------------------</span><font></font>
 <font></font>
TGTOKEN=```PUT_YOUR_TOKEN_HERE```<font></font>
TGCHATID=```PUT_YOUR_ID_HERE```<font></font>
 <font></font>
 <font></font>
SCANDATE=$(date <span class="hljs-string">"+%Y-%m-%d"</span>)<font></font>
SCANFILE=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$TARGET</span> | sed -e <span class="hljs-string">'s|/|_|g'</span> | sed -e <span class="hljs-string">'s|:|_|g'</span> | sed -e <span class="hljs-string">'s|\.|_|g'</span>)<font></font>
 <font></font>
<span class="hljs-comment"># -----------------------------------------</span>
<span class="hljs-comment"># ------        Perform scan      ---------</span>
<span class="hljs-comment"># -----------------------------------------</span>
<span class="hljs-keyword">if</span> [[ ! -f <span class="hljs-variable">$RESDIR</span>/<span class="hljs-variable">${SCANFILE}</span>-<span class="hljs-variable">${SCANDATE}</span>.json ]]; <span class="hljs-keyword">then</span><font></font>
    docker run \<font></font>
        -v <span class="hljs-variable">$RESDIR</span>/:/zap/wrk/:rw \<font></font>
        -t owasp/zap2docker-live \<font></font>
        zap-baseline.py \<font></font>
            -t <span class="hljs-variable">$TARGET</span> \<font></font>
            -j -a -m 5 \<font></font>
            -r <span class="hljs-variable">$SCANFILE</span>-<span class="hljs-variable">$SCANDATE</span>.html \<font></font>
            -J <span class="hljs-variable">$SCANFILE</span>-<span class="hljs-variable">$SCANDATE</span>.json
<span class="hljs-keyword">fi</span>
<span class="hljs-comment"># -----------------------------------------</span><font></font>
 <font></font>
<span class="hljs-comment"># -----------------------------------------</span>
<span class="hljs-comment"># ------    Interpret results     ---------</span>
<span class="hljs-comment"># -----------------------------------------</span>
RESULT=$(cat <span class="hljs-variable">$RESDIR</span>/<span class="hljs-variable">$SCANFILE</span>-<span class="hljs-variable">$SCANDATE</span>.json | \<font></font>
    jq -c <span class="hljs-string">'.site[].alerts[]'</span> | \<font></font>
    jq -r -s -c <span class="hljs-string">'sort_by(.riskcode, .confidence)| reverse | .[] | "\(.riskdesc)\t|\t\(.alert)_NEWLINE_"'</span>)<font></font>
 <font></font>
MESSAGE=<span class="hljs-string">"*SECURITY REPORT FOR "</span><span class="hljs-variable">$TARGET</span><span class="hljs-string">"*\n\n"</span><font></font>
 <font></font>
MESSAGE=<span class="hljs-variable">$MESSAGE</span>$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$RESULT</span> | sed -e <span class="hljs-string">'s|"|\\"|g'</span> | sed -e <span class="hljs-string">'s/|/\\t|\\t/g'</span> | sed -e <span class="hljs-string">'s|_NEWLINE_|\\n|g'</span> | sed -e <span class="hljs-string">'s|\\n |\\n|g'</span> )<font></font>
 <font></font>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$MESSAGE</span>
<span class="hljs-comment"># -----------------------------------------</span><font></font>
 <font></font>
<span class="hljs-comment"># -----------------------------------------</span>
<span class="hljs-comment"># ------     Send text report     ---------</span>
<span class="hljs-comment"># -----------------------------------------</span><font></font>
curl -m 20 -s \<font></font>
        --header <span class="hljs-string">'Content-Type: application/json'</span> \<font></font>
        --request <span class="hljs-string">'POST'</span> \<font></font>
        --data <span class="hljs-string">"{\"disable_web_page_preview\":true,\"parse_mode\":\"Markdown\",\"chat_id\":\"<span class="hljs-variable">${TGCHATID}</span>\",\"text\":\"<span class="hljs-variable">${MESSAGE}</span>\"}"</span> <span class="hljs-string">"https://api.telegram.org/bot<span class="hljs-variable">${TGTOKEN}</span>/sendMessage"</span> \<font></font>
        1 &gt; /dev/null<font></font>
<span class="hljs-comment"># -----------------------------------------</span><font></font>
 <font></font>
<span class="hljs-comment"># -----------------------------------------</span>
<span class="hljs-comment"># ------     Send html report     ---------</span>
<span class="hljs-comment"># -----------------------------------------</span><font></font>
curl -m 20 \<font></font>
    -F <span class="hljs-string">"chat_id=<span class="hljs-variable">${TGCHATID}</span>"</span> \<font></font>
    -F document=@<span class="hljs-variable">${RESDIR}</span>/<span class="hljs-variable">${SCANFILE}</span>-<span class="hljs-variable">${SCANDATE}</span>.html \<font></font>
    https://api.telegram.org/bot<span class="hljs-variable">${TGTOKEN}</span>/sendDocument
<span class="hljs-comment"># -----------------------------------------</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このため、さようならを言い、この膨大な作品を読んでいただきありがとうございます。</font><font style="vertical-align: inherit;">質問、希望、批判はコメントと首相に受け入れられます。</font><font style="vertical-align: inherit;">すべてに良い！</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja493762/index.html">モバイルアプリケーションのバックエンドを整理する方法は？</a></li>
<li><a href="../ja493768/index.html">React Nativeリスト</a></li>
<li><a href="../ja493772/index.html">Kubernetesのヒントとテクニックのトップ10</a></li>
<li><a href="../ja493774/index.html">Cisco ASAのAnyConnect VPNトンネルでのクラウドサービスの最適化</a></li>
<li><a href="../ja493776/index.html">電子登録書簡-ロシアの郵便がどのように、そしてなぜデジタル化された通信</a></li>
<li><a href="../ja493780/index.html">FOSSニュースNo. 8-2020年3月16〜22日の無料およびオープンソースニュースのレビュー</a></li>
<li><a href="../ja493782/index.html">複雑さの模倣-シンプルなものと複雑なもののアンチノミー</a></li>
<li><a href="../ja493784/index.html">Deep Skyオブジェクトの分類とその観測</a></li>
<li><a href="../ja493786/index.html">ネットワーク異常分析ツールのケーススタディ：リモートアクセス制御</a></li>
<li><a href="../ja493788/index.html">インターネットプロバイダーネットワークでのIPTVサービスの開始</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>