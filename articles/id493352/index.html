<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘‰ğŸ¼ ğŸ›‘ ğŸ‘ŠğŸ¾ Siarkan video Anda di YouTube sepanjang waktu ğŸ‘¨ğŸ½ ğŸ‘ŠğŸ¾ ğŸ‘°ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Baru-baru ini, sebagai hobi, saya merekam ceramah seorang psikolog yang sudah dikenal di video. Saya memasang dan menerbitkan rekaman di situs web say...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Siarkan video Anda di YouTube sepanjang waktu</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493352/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baru-baru ini, sebagai hobi, saya merekam ceramah seorang psikolog yang sudah dikenal di video. Saya memasang dan menerbitkan rekaman di situs web saya. Sebulan yang lalu, saya mendapat ide untuk mengorganisir siaran sepanjang waktu dari ceramah ini di YouTube 24/7. Semacam "saluran" tematik yang didedikasikan untuk pertumbuhan pribadi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana membuat siaran normal, saya tahu. Tapi bagaimana cara membuatnya menjadi siaran file video? Bahwa dia berjalan 24/7, fleksibel, otonom, dan pada saat yang sama tidak bergantung pada komputer di rumah saya. Inilah yang harus saya cari tahu. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ti/vn/5u/tivn5utlpr-vmldtf9dh5hh7fku.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Butuh beberapa hari untuk menemukan solusi. Saya mempelajari banyak forum dan berbagai manual yang tanpanya siaran saya tidak akan muncul. Dan sekarang, ketika lelucon itu sukses, saya merasa perlu membagikan keputusan saya. Jadi artikel ini muncul.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Singkatnya, solusi terakhir adalah sebagai berikut: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS + ffmeg + bash script</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Di bawah potongan, saya menggambarkan langkah-langkah yang diambil dan berbicara tentang "jebakan" yang ditemukan selama siaran.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langkah 1 - dari mana siaran akan pergi?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada awalnya, perlu untuk menentukan di mana siaran akan dilakukan, di mana sumbernya berada. Hal pertama yang terlintas dalam pikiran adalah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dari komputer di rumah</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Kumpulkan video ke dalam daftar main dan mainkan dalam pemutar video apa pun. Kemudian ambil gambar layar dan disiarkan ke YouTube. Tapi saya segera menolak opsi ini. untuk menerapkannya, Anda harus terus menyalakan komputer di rumah, dan ini adalah suara bising dari pendingin bahkan di malam hari dan peningkatan konsumsi energi (+ 100-150 kWh setiap bulan). Dan ternyata Anda tidak akan dapat menggunakan komputer di rumah selama siaran. setiap gerakan mouse akan terlihat di siaran. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian saya mulai melihat ke arah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">layanan cloud</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Saya sedang mencari layanan yang sudah jadi di mana Anda dapat mengunggah video Anda atau, misalnya, memasukkan tautan ke video dari YouTube dan semuanya akan dikemas menjadi satu siaran tanpa henti. Tetapi saya tidak menemukan sesuatu yang cocok. Mungkin aku terlihat buruk. Satu-satunya hal yang cocok untuk fungsionalitas adalah restream.io, layanan yang membantu menyiarkan secara bersamaan di berbagai platform. Mereka tampaknya dapat mengunggah video mereka. Tetapi layanan ini dibuat untuk tujuan yang sama sekali berbeda dan mereka berharap bahwa siaran hanya akan berlangsung beberapa jam. Saya pikir jika melalui layanan ini dimungkinkan untuk menyelenggarakan siaran sepanjang waktu, maka ini akan mencapai puluhan, atau bahkan ratusan dolar per bulan. Tetapi saya masih ingin mengatur siaran baik secara gratis atau dengan investasi keuangan minimal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menjadi jelas bahwa Anda perlu menyiarkan</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perangkat terpisah</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> atau bahkan komputer terpisah. Berpikir ke arah sesuatu seperti Raspberri Pi. Dan apa? Dia tidak punya pendingin. Saya merekam video pada USB flash drive, memasang kabel Ethernet dan membiarkannya berada di suatu tempat di tempat terpencil, itu siaran. Pilihan. Tetapi saya tidak memiliki papan itu sendiri maupun pengalaman dengannya, jadi saya juga menolak opsi ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada akhirnya, saya menemukan sebuah diskusi di mana mereka membahas membuat </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">server Anda sendiri</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">siaran. Ini bukan apa yang saya cari, tapi saya menangkap ide utama - Anda dapat menggunakan server! Dalam diskusi itu, mereka menyarankan menggunakan sekelompok VPS + nginx + OBS. Menjadi jelas bahwa kelompok ini cocok untuk saya. Satu-satunya hal yang membingungkan saya adalah bahwa saya tidak pernah mengelola server dan menurut saya server khusus saya bingung dan mahal. Saya memutuskan untuk mencari tahu berapa biaya untuk menyewa server dalam konfigurasi minimum dan terkejut.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mu/v8/ms/muv8msmvpgnhzj9z04nuhv_y0-s.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Harga dalam rubel Belarusia dan mereka hanya remah-remah. Untuk memahami, 8 rubel Belarusia sekitar 3,5 dolar atau 240 rubel Rusia. Selama sebulan menggunakan komputer lengkap yang dinyalakan 24/7 dan memiliki akses Internet cepat. Untuk beberapa alasan, penemuan ini sangat menggembirakan bagi saya, dan selama beberapa hari saya berjalan sangat senang seperti anak kecil yang menemukan roket ruang angkasa :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ngomong-ngomong, saya mengambil keuntungan dari tawaran situs pertama yang Google berikan kepada saya atas permintaan â€œsewa VPSâ€. Mungkin ada lebih banyak solusi anggaran, tetapi harga ini cocok untuk saya dan saya tidak melihat lebih jauh.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat membuat server, Anda dapat memilih sistem operasi yang akan digunakannya. </font><font style="vertical-align: inherit;">Pada salah satu sistem yang terdaftar, Anda dapat mengatur siaran dan membuat pilihan berdasarkan preferensi dan kemampuan keuangan Anda (mereka meminta biaya tambahan untuk server dengan Windows). </font><font style="vertical-align: inherit;">Saya memilih CentOS. </font><font style="vertical-align: inherit;">Hanya karena saya dulu punya sedikit pengalaman dengannya.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cv/0a/wh/cv0awhhxim1w2fgglkrlupl5hgc.jpeg" alt="gambar"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langkah 2 - pengaturan server</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hal pertama yang Anda butuhkan setelah membuat server adalah menghubungkannya melalui SSH. </font><font style="vertical-align: inherit;">Awalnya saya menggunakan Putty, tetapi kemudian saya mulai menggunakan Aplikasi Secure Shell, yang berjalan di Google Chrome. </font><font style="vertical-align: inherit;">Jadi ternyata lebih nyaman bagi saya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian saya mengubah nama host, mengatur sinkronisasi waktu di server, memperbarui sistem, bermain-main dengan iptables ... dan melakukan banyak hal, tetapi bukan karena itu perlu. </font><font style="vertical-align: inherit;">Itu hanya menarik bagi saya untuk mengatur server dan itu berhasil untuk saya. </font><font style="vertical-align: inherit;">Saya suka ketika ternyata :) </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapi langkah-langkah yang perlu dilakukan:</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hubungkan repositori EPEL.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Naikkan server FTP (saya memilih vsftp).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instal ffmpeg.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak akan memberikan rincian tim, instruksi ini agak konseptual untuk menyampaikan rencana aksi umum. Jika Anda mengalami kesulitan dengan salah satu langkah, langkah-langkah tersebut cepat diselesaikan dengan permintaan di mesin pencari seperti "CentOS connect EPEL" atau "Instalasi server CentOS FTP". Dan pada tautan pertama Anda dapat menemukan petunjuk langkah demi langkah yang terperinci. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, seperti yang saya tulis sebelumnya, saya membutuhkan banyak VPS + nginx + OBS. VPS - siap. Tetapi di sini, pada poin-poin yang tersisa, pertanyaan mulai muncul. OBS adalah program siaran, Open Broadcaster Software. Dan itu hanya bekerja dengan utas yaitu. misalnya, mengambil gambar dari webcam dan menyiarkannya. Atau rekaman layar. Atau siaran yang sudah berlangsung dialihkan ke situs lain. Dan saya tidak punya streaming, saya hanya punya satu set file video yang saya butuhkan untuk membuat streaming.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dia mulai menggali ke arah ini dan menemukan ffmpeg. </font><font style="vertical-align: inherit;">FFmpeg adalah seperangkat pustaka sumber terbuka gratis yang memungkinkan Anda untuk merekam, mengonversi, dan mentransfer rekaman audio dan video digital dalam berbagai format. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan saya sangat terkejut betapa banyak yang bisa dilakukan ffmpeg. </font><font style="vertical-align: inherit;">Jika Anda mau, itu akan mengeluarkan suara dari video. </font><font style="vertical-align: inherit;">Jika Anda mau, itu akan memotong sebagian video tanpa transcoding. </font><font style="vertical-align: inherit;">Jika Anda mau, itu akan dikonversi dari satu format ke yang lain. </font><font style="vertical-align: inherit;">Dan masih banyak lagi. </font><font style="vertical-align: inherit;">Hingga Anda dapat menentukan file untuknya, ia akan mengonversinya menjadi streaming dan mentransfernya sendiri ke YouTube. </font><font style="vertical-align: inherit;">Semuanya, rantai dirakit. </font><font style="vertical-align: inherit;">Tetap hanya untuk memperbaiki nuansa.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langkah 3 - pengaturan siaran</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami membuat siaran di YouTube. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada tahap ini, kita hanya perlu tautan dan kunci terjemahan. </font><font style="vertical-align: inherit;">Pada tangkapan layar di bawah, mereka disorot dengan warna merah. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gr/a3/oo/gra3oogooafzdfjzhlqdqjjxr8o.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unggah file video ke server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang kami rencanakan untuk disiarkan. </font><font style="vertical-align: inherit;">Sebenarnya, FTP hanya diperlukan untuk tahap ini. </font><font style="vertical-align: inherit;">Jika Anda memiliki cara mudah lain untuk mengunggah file ke server, maka server FTP dapat ditinggalkan. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami streaming ke YouTube. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk memulai penyiaran, Anda harus menjalankan ffmpeg dengan beberapa atribut. </font><font style="vertical-align: inherit;">Inilah perintah terpendek yang saya dapat:</font></font><br>
<br>
<pre><code class="bash hljs">ffmpeg -re -i lecture1.mp4 -f flv rtmp://a.rtmp.youtube.com/live2/%_%</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dekripsi Atribut</font></font></b><div class="spoiler_text"><code>-re</code> â€“ ,      .<br>
<br>
<code>-i</code> â€“ ,    . ,       ,    -.       ,  <code>/usr/media/lecture1.mp4</code>.<br>
<br>
<code>-f</code> â€“    .    ,  ffmpeg Â« Â»     mp4  flv.<br>
<br>
    ,     YouTube     .. ,     ,   ,       .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda melakukan semuanya dengan benar, maka setelah menjalankan perintah ini, YouTube akan melihat aliran yang ditransmisikan. </font><font style="vertical-align: inherit;">Untuk memulai siaran, Anda hanya perlu mengklik tombol "Mulai Siaran" di YouTube itu sendiri.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langkah 4 - tambahkan otonomi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selamat! Sekarang Anda tahu cara memulai penyiaran dari file video. Tetapi ini tidak cukup untuk siaran sepanjang waktu. Adalah penting bahwa setelah video pertama selesai diputar, yang berikutnya akan segera dimulai, dan ketika semua video ditampilkan, pemutaran dimulai dari awal lagi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya datang dengan opsi berikut: membuat file .sh di mana saya mendaftarkan perintah untuk setiap file video dan pada akhirnya menunjukkan perintah untuk memulai kembali skrip yang sama. Ternyata semacam rekursi:</font></font><br>
<br>
<pre><code class="bash hljs"> 1... (   lecture1.mp4)<font></font>
 2... (   lecture2.mp4)<font></font>
 3... (   lecture3.mp4)<font></font>
bash start.sh</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan ya, itu berhasil. Saya, senang dengan diri saya sendiri, memulai siaran tes dan pergi tidur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kejutan yang tidak menyenangkan menunggu saya di pagi hari. Ternyata siaran itu berlangsung hanya beberapa menit dan berakhir segera setelah saya mematikan komputer saya. Investigasi menunjukkan bahwa perintah yang diluncurkan dengan cara ini dijalankan ketika pengguna diotorisasi di server. Segera setelah saya terputus, eksekusi perintah yang saya mulai terganggu. Untuk mencegah hal ini terjadi, cukup </font></font><code>bash</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menambahkan tim </font><font style="vertical-align: inherit;">sebelum </font><font style="vertical-align: inherit;">tim </font></font><code>nohup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Ini akan memungkinkan proses yang berjalan berjalan terlepas dari keberadaan Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versi minimum akhir skrip terlihat seperti ini:</font></font><br>
<br>
<pre><code class="bash hljs">ffmpeg -re -i lecture1.mp4 -f flv rtmp://a.rtmp.youtube.com/live2/%_%<font></font>
ffmpeg -re -i lecture2.mp4 -f flv rtmp://a.rtmp.youtube.com/live2/%_%<font></font>
ffmpeg -re -i lecture3.mp4 -f flv rtmp://a.rtmp.youtube.com/live2/%_%<font></font>
nohup bash start.sh $</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di mana start.sh adalah file di mana skrip ini ditulis. </font><font style="vertical-align: inherit;">Dan file ini harus berada di direktori yang sama dengan file video. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menambahkan tanda dolar di bagian akhir memungkinkan Anda untuk memulai proses di latar belakang sehingga Anda dapat terus menggunakan konsol tanpa mengganggu siaran. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dari bonus, roti berikut ternyata:</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda dapat mengubah pemutaran file secara manual. </font><font style="vertical-align: inherit;">Untuk melakukan ini, Anda perlu "membunuh" proses ffmpeg yang sedang berjalan. </font><font style="vertical-align: inherit;">Setelah itu, pemutaran file selanjutnya dari daftar akan secara otomatis dimulai.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Video baru dapat ditambahkan ke siaran tanpa menghentikan siaran. </font><font style="vertical-align: inherit;">Cukup unggah video ke server, tambahkan perintah untuk menjalankan file ini di skrip, simpan. </font><font style="vertical-align: inherit;">Dan itu dia. </font><font style="vertical-align: inherit;">Di babak pemutaran berikutnya, file baru akan disiarkan bersama dengan file-file lama.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langkah 5 - konfigurasikan ffmpeg</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam hal ini, pada prinsipnya, orang bisa berhenti. Tapi saya ingin membuat siaran itu sedikit lebih ramah bagi penonton. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalkan seseorang pergi ke siaran, mulai menonton, dia menyukainya dan ingin menonton ceramah ini dari awal, dan siaran tidak termasuk rewinding. Untuk melihat kuliah dari awal, seseorang harus pergi ke situs web saya dan mendapatkan catatan kuliah yang menarik. Dan bagaimana memahami kuliah apa yang menarik baginya? Situs ini memiliki 16 kuliah dan setiap minggu hanya ada lebih banyak. Saya pikir bahkan saya, yang memotret dan mengedit semua kuliah ini, tidak akan dapat menentukan kuliah mana yang berasal dari fragmen acak. Oleh karena itu, setiap kuliah harus ditunjuk.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pilihan untuk menambahkan teks ke file video sumber dalam program pengeditan tidak cocok untuk saya. </font><font style="vertical-align: inherit;">Itu perlu untuk memastikan bahwa file asli digunakan. </font><font style="vertical-align: inherit;">Untuk mendukung siaran diperlukan dari saya gerakan tubuh sesedikit mungkin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata ffmpeg dapat membantu saya dengan ini juga. </font><font style="vertical-align: inherit;">Ini memiliki atribut khusus </font></font><code>-vf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang memungkinkan Anda untuk meletakkan teks di atas video. </font><font style="vertical-align: inherit;">Untuk menambahkan teks ke video, Anda perlu menambahkan fragmen berikut ke perintah:</font></font><br>
<br>
<pre><code class="bash hljs">-vf drawtext=<span class="hljs-string">"fontfile=OpenSans.ttf:text=' 13\:  .   ?':fontsize=26:fontcolor=white:borderw=1:bordercolor=black:x=40:y=670"</span></code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decoding parameter</font></font></b><div class="spoiler_text"><code>fontfile=</code> â€“    .       .          .        .<br>
<br>
<code>text=</code> â€“ ,  ,     .<br>
<br>
<code>fontsize=</code> â€“    .<br>
<br>
<code>fontcolor=</code> â€“  .<br>
<br>
<code>borderw=</code> â€“       (         1 ).<br>
<br>
<code>bordercolor=</code> â€“  .<br>
<br>
<code>x=</code>  <code>y=</code> â€“  .  <code>0;0</code>     .      ,           1280720 .<br>
</div></div><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini terlihat seperti ini:</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/jf/1n/sh/jf1nshia1hbk30-pjd5y6mztga0.jpeg" alt="gambar"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langkah 6 - menentukan kualitas siaran</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semuanya, siaran siap. Siaran FFmpeg, file diputar, keberadaan saya tidak diperlukan untuk siaran. Bahkan setiap kuliah ditandatangani. Terlihat seperti itu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi nuansa lain muncul - saya memilih konfigurasi server minimum dan itu tidak menarik siaran. Konfigurasi server: 1 inti (seperti 2.2 GHz), 1 gigabyte RAM, 25 GB SSD. Ada cukup RAM, tetapi prosesor hampir sepenuhnya masuk memuat 100% (dan kadang-kadang bahkan pada 102-103% :) Ini menyebabkan fakta bahwa siaran membeku sekali setiap beberapa detik. Jelek.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda bisa saja mengambil konfigurasi yang lebih mahal dengan dua inti, manfaatnya adalah bahwa dengan teknologi cloud, konfigurasi server diubah dengan menekan beberapa tombol. </font><font style="vertical-align: inherit;">Tetapi saya ingin menyesuaikan dengan kekuatan konfigurasi minimum. </font><font style="vertical-align: inherit;">Saya mulai mempelajari dokumentasi ffmpeg dan ya, ada juga pengaturan di sana yang memungkinkan Anda untuk menyesuaikan beban pada sistem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kualitas gambar yang tinggi dapat dicapai dengan dua cara: baik beban prosesor yang tinggi, atau lalu lintas keluar yang besar. </font><font style="vertical-align: inherit;">Ternyata semakin banyak prosesor dapat mengambil beban, semakin sedikit bandwidth yang dibutuhkan saluran. </font><font style="vertical-align: inherit;">Atau Anda tidak dapat memuat prosesor dengan berat, tetapi Anda membutuhkan saluran lebar dengan margin lalu lintas yang besar. </font><font style="vertical-align: inherit;">Jika ada batasan pada prosesor dan pada ukuran saluran keluar / lalu lintas, maka Anda harus mengurangi kualitas gambar agar siaran berjalan dengan lancar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Server saya memiliki saluran 10 Mbps. Lebar ini lurus dengan margin. Tetapi ada batas lalu lintas - 1 TB per bulan. Oleh karena itu, untuk memenuhi batasan lalu lintas, arus keluar saya tidak boleh melebihi ~ 300 Kb per detik yaitu bitrate dari aliran keluar tidak boleh lebih dari 2,5 Mbps. YouTube, omong-omong, hanya merekomendasikan penyiaran dalam bitrate seperti itu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ffmpeg menggunakan pendekatan berbeda untuk mengatur beban pada sistem. Ditulis dengan baik di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Saya akhirnya menggunakan dua atribut: </font></font><code>-crf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>-preset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Constant Rate Factor (CRF)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ini adalah koefisien yang dengannya Anda dapat menyesuaikan kualitas gambar. </font><font style="vertical-align: inherit;">CRF dapat berkisar dari 0 hingga 51, di mana 0 adalah kualitas file sumber, 51 adalah kualitas terburuk. </font><font style="vertical-align: inherit;">Disarankan untuk menggunakan nilai dari 17 hingga 28, standarnya adalah 23. Dengan rasio 17, video secara visual akan identik dengan aslinya, tetapi secara teknis tidak. </font><font style="vertical-align: inherit;">Dokumentasi juga menyatakan bahwa ukuran video akhir, tergantung pada CRF yang ditentukan, berubah secara eksponensial yaitu. </font><font style="vertical-align: inherit;">meningkatkan koefisien sebesar 6 poin akan menggandakan bitrate dari video keluar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika menggunakan CRF Anda dapat memilih "bobot" dari gambar yang keluar, kemudian menggunakan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">preset (-preset)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anda dapat menentukan berapa banyak prosesor akan dimuat. </font><font style="vertical-align: inherit;">Parameter untuk atribut ini memiliki yang berikut:</font></font><br>
<br>
<ul>
<li><code>ultrafast</code></li>
<li><code>superfast</code></li>
<li><code>veryfast</code></li>
<li><code>faster</code></li>
<li><code>fast</code></li>
<li><code>medium</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nilai default</font></font></li>
<li><code>slow</code></li>
<li><code>slower</code></li>
<li><code>veryslow</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semakin cepat parameter ditentukan, semakin tinggi beban pada prosesor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya pertama kali mengambil preset, yang pada dasarnya "tangguh" untuk prosesor saya, dan kemudian lebih baik menyesuaikan beban menggunakan CRF. </font><font style="vertical-align: inherit;">Dalam kasus saya, preset muncul </font></font><code>fast</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan untuk crf saya menetapkan nilai 24.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu saja. </font><font style="vertical-align: inherit;">Perintah terakhir untuk memulai siaran saya dapat ini:</font></font><br>
<br>
<pre><code class="bash hljs">ffmpeg -re -i lecture1.mp4 -vf drawtext=<span class="hljs-string">"fontfile=OpenSans.ttf:text=' 1\:   ':fontsize=26:fontcolor=white:borderw=1:bordercolor=black:x=40:y=670"</span> -c:v libx264 -preset fast -crf 24 -g 3 -f flv rtmp://a.rtmp.youtube.com/live2/%_%</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini hanya ada dua momen yang tidak ditentukan: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) </font></font><code>-c:v libx264</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- indikasi codec tertentu untuk bekerja dengan file sumber. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2) </font></font><code>-g 3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- indikasi eksplisit jumlah bingkai kunci. Dalam hal ini, diindikasikan bahwa setiap frame ketiga harus menjadi kunci. Nilai standar adalah 5 atau 8, tetapi YouTube bersumpah, meminta setidaknya 3. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kualitas siaran apa yang bisa dilihat di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beban server adalah sebagai berikut:</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/b5/3s/za/b53szauaywx3bdwoic-yebil1es.jpeg" alt="gambar"><br>
<br>
<img src="https://habrastorage.org/webt/cq/jc/t4/cqjct4xhbz3zabriimgydbxvjaq.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Berdasarkan data pemantauan, jelas bahwa beban prosesor bervariasi dari 70% hingga 95% dan siaran tidak pernah mencapai 100% dalam seminggu. Jadi, dengan pengaturan ini, prosesor sudah cukup.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat memuat disk, saya dapat mengatakan bahwa hampir tidak dimuat dan HDD biasa harus cukup untuk penyiaran. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi jumlah lalu lintas keluar mengganggu saya. Ternyata aliran keluar saya berkisar 450 hingga 650 KB per detik. Selama sebulan akan sekitar 1,8 terabyte. Anda mungkin harus membeli lalu lintas atau masih beralih ke konfigurasi dual-core karena Saya tidak ingin mengurangi kualitas gambar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*** </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai hasilnya, saya akan mengatakan bahwa pengaturan siaran seperti itu dari awal membutuhkan waktu sekitar 1-2 jam. Selain itu, sebagian besar waktu yang diperlukan untuk mengunggah video ke server.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai alat pemasaran, peluncuran siaran semacam itu tidak membuahkan hasil. Mungkin jika Anda memutar tampilan sehingga algoritma YouTube mengambil siaran ini dan secara aktif menunjukkannya dalam rekomendasi, maka sesuatu akan berhasil. Dalam kasus saya, selama 16 hari siaran terus-menerus, ditonton 58 kali. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu tidak apa-apa. Siaran secara harmonis pas di halaman utama situs saya. Ternyata semacam peluang untuk dengan cepat memutuskan tentang dosen dan dosen itu sendiri. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan satu saat. Adalah penting bahwa siaran tidak melanggar hak cipta orang lain, jika tidak maka akan diblokir. Saya tenang untuk siaran saya. Saya secara khusus memilih sisipan musik dengan penggunaan gratis, dan penulis konten duduk di komputer tetangga dan sama sekali tidak menentang saya menggunakan kontennya :)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi jika Anda memiliki radio yang diputar di latar belakang di suatu tempat di latar belakang, atau Anda menggunakan trek favorit Anda saat mengedit, atau Anda mengambil video dari video musik populer, seri atau film, maka siaran Anda berisiko. </font><font style="vertical-align: inherit;">Penting juga bahwa siaran membawa setidaknya beban semantik minimal, jika tidak dapat diblokir sebagai spam. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*** </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu saja untuk saya. </font><font style="vertical-align: inherit;">Saya harap manual ini akan melayani seseorang dengan baik. </font><font style="vertical-align: inherit;">Nah, jika Anda memiliki sesuatu untuk ditambahkan - tulis, saya akan dengan senang hati membaca tambahan dan klarifikasi untuk artikel tersebut.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id493336/index.html">Bagaimana Pusat Ilmu Komputer Diterjemahkan Pembelajaran Online</a></li>
<li><a href="../id493340/index.html">Membuat fungsi SIL portabel antar versi di Jira</a></li>
<li><a href="../id493342/index.html">Bagaimana NSPK menyiapkan infrastruktur untuk transisi ke udalenka</a></li>
<li><a href="../id493346/index.html">Kami berhasil memindahkan kantor ke udalenka, dan Anda?</a></li>
<li><a href="../id493348/index.html">Buat "udalenka" hebat lagi: cara mentransfer seluruh perusahaan ke pekerjaan jarak jauh dalam 4 tahap</a></li>
<li><a href="../id493356/index.html">Video @ Rapat Data: Keamanan DBMS, Tarantool di IoT, Greenplum untuk Big Data Analytics</a></li>
<li><a href="../id493360/index.html">Dua jari dari Algol</a></li>
<li><a href="../id493362/index.html">Dukungan teknis "pada koper." Bagaimana kami bekerja dari jarak jauh tanpa rasa takut yang tidak perlu dan mendapatkan layanan yang kami butuhkan dari jarak jauh</a></li>
<li><a href="../id493366/index.html">Apa itu Windows PowerShell dan apa yang dimakannya? Bagian 3: meneruskan parameter ke skrip dan fungsi, membuat cmdlet</a></li>
<li><a href="../id493374/index.html">Coronavirus - tips praktis dan sedikit teori</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>