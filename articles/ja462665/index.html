<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐖 🙌🏾 🖖🏽 ヘルムセキュリティ 🥣 🙍 🗽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kubernetesの最も人気のあるパッケージマネージャーに関するストーリーの本質は、絵文字を使用して表現できます。
 
 

- ボックスはHelmです（これはEmojiの最新リリースに含まれる最も適切なものです）。
- ロック-セキュリティ;
- 男は問題の解決策です。
 
 
 実際、すべてが...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ヘルムセキュリティ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/462665/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesの最も人気のあるパッケージマネージャーに関するストーリーの本質は、絵文字を使用して表現できます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ボックスはHelmです（これはEmojiの最新リリースに含まれる最も適切なものです）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロック-セキュリティ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">男は問題の解決策です。</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/7f/e6/f2/7fe6f2dsslbuogltyajqyhcm3x4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、すべてが少し複雑になり、ストーリーには</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Helmを安全にする方法</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に関する技術的な詳細が満載です</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡単に言うと、あなたが知らなかったり忘れたりした場合のHelmとは何ですか。</font><font style="vertical-align: inherit;">それはどのような問題を解決し、生態系のどこに位置していますか。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Helmのアーキテクチャーを検討してください。</font><font style="vertical-align: inherit;">コンポーネントのアーキテクチャを理解せずに、セキュリティやツールまたはソリューションをより安全にする方法についての会話は1つではありません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Helmコンポーネントについて説明します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最も燃える問題は未来です-Helm 3の新しいバージョン。&nbsp;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事のすべてはHelm 2に関連しています。このバージョンは現在稼働中であり、おそらく現在使用しているのはあなたであり、セキュリティ上のリスクがあるのはそのためです。</font></font><br>
<a name="habracut"></a><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_8zNTJ1_R5I" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スピーカーについて：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アレクサンダーカヨロフ（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">allexx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）10年間開発を続けており、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モスクワPython会議++の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテンツの改善を支援</font><font style="vertical-align: inherit;">し、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Helm Summit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">委員会に参加しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">現在、Chainstackで開発リーダーとして働いています。これは、開発マネージャーと最終リリースの配信を担当する人とのハイブリッドです。</font><font style="vertical-align: inherit;">つまり、製品の作成から運用までのすべてが行われる戦場にあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チェーンスタックは、活発に成長している小規模な新興企業であり、そのタスクは、インフラストラクチャと分散アプリケーションの運用の難しさを忘れる機会を顧客に提供することであり、開発チームはシンガポールにいます。</font><font style="vertical-align: inherit;">暗号通貨の販売または購入をチェーンスタックに依頼しないでください。エンタープライズブロックチェーンフレームワークについて話すことを申し出れば、喜んで回答されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">兜</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、Kubernetesのパッケージマネージャー（チャート）です。</font><font style="vertical-align: inherit;">アプリケーションをKubernetesクラスターにもたらす最も直感的で用途の広い方法。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0h/4j/np/0h4jnpvzc7hlncvlzprx9hfkz9s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、これは独自のYAMLマニフェストを作成して小さなユーティリティを作成するよりも構造的で産業的なアプローチに関するものです。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Helmは現在入手可能で人気のある最高のものです。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜヘルム？これは主に、CNCFでサポートされているためです。クラウドネイティブ-大規模な組織は、Kubernetes、etcd、Fluentdなどのプロジェクトの親会社です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう1つの重要な事実として、Helmは非常に人気のあるプロジェクトです。 2019年1月に、Helmを安全にする方法について話し合うことを計画していたとき、プロジェクトにはGitHubに数千のスターがありました。 5月までに12,000人がいた。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの人がHelmに興味を持っているため、まだ使用していない場合でも、Helmの安全性に関する知識が必要になります。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全は重要です。</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HelmのコアチームはMicrosoft Azureによってサポートされているため、これは他の多くのプロジェクトとは異なり、かなり安定したプロジェクトです。</font><font style="vertical-align: inherit;">7月中旬にHelm 3 Alpha 2がリリースされたことは、非常に多くの人々がプロジェクトに取り組んでいることを示しており、Helmを開発および改善する意欲と強みを持っています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/c8/m1/ex/c8m1exaajnjbhme9yh_gjqw_y00.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Helmは、Kubernetesのいくつかのルートアプリケーション管理問題を解決します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションのパッケージ化。</font><font style="vertical-align: inherit;">WordPressの「Hello、World」のようなアプリケーションもすでにいくつかのサービスで構成されているので、それらを一緒にパックしたいと考えています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらのアプリケーションの管理で発生する複雑さの管理。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションのインストールまたはデプロイ後に終了しないライフサイクル。</font><font style="vertical-align: inherit;">それは存続し続け、更新する必要があり、Helmはこれに役立ち、適切な対策とポリシーを提供しようとしています。</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッキング</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は理解しやすい方法で編成されています。Linux、Windows、またはMacOSの通常のパッケージマネージャーの作業に完全に一致するメタデータがあります。つまり、リポジトリは、さまざまなパッケージ、アプリケーションのメタ情報、設定、構成機能、情報のインデックス作成などに応じて異なります。Helmでは、アプリケーションにそれを取得して使用できます。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複雑さの管理</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。同様のアプリケーションが多数ある場合は、パラメータ化が必要です。テンプレートはこれに従いますが、独自のテンプレート作成方法を思い付かないようにするために、Helmが提供する機能をそのまま使用できます。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションのライフサイクル管理</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-私の意見では、これは最も興味深い未解決の問題です。</font><font style="vertical-align: inherit;">だから私はやがてヘルムに来ました。</font><font style="vertical-align: inherit;">アプリケーションのライフサイクルを監視する必要があり、CI / CDとアプリケーションのサイクルをこのパラダイムに移行したいと考えました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Helmでは次のことができます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">展開の管理、構成とリビジョンの概念の導入、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正常にロールバック。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さまざまなイベントにフックを使用します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加のアプリケーションチェックを追加し、その結果に応答します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Helmには「バッテリー」</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があります。これは、プラグインの形で含めることができる膨大な数のおいしいもので、あなたの人生を簡素化します。</font><font style="vertical-align: inherit;">プラグインは独立して書くことができ、それらは完全に分離されており、細いアーキテクチャを必要としません。</font><font style="vertical-align: inherit;">何かを実装したい場合は、プラグインとして実装することをお勧めします。その後、アップストリームに組み込むことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Helmは3つの主要な概念に基づいています。</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チャートレポ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -マニフェストで可能なパラメーター化の説明と配列。&nbsp;</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構成—つまり</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、適用される値（テキスト、数値など）。</font></font></li>
<li><strong>Release</strong>      ,      Release.   ,      :         upgrade, downgrade  rollback.</li>
</ul><br>
<h2> Helm</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この図は、Helmの高レベルのアーキテクチャーを概念的に反映しています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ih/dk/fs/ihdkfsbvonqupbrs-tvbmspdnpm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HelmはKubernetesに関連するものであることを思い出させてください。</font><font style="vertical-align: inherit;">したがって、Kubernetes-cluster（長方形）なしでは実現できません。</font><font style="vertical-align: inherit;">kube-apiserverコンポーネントはウィザードにあります。</font><font style="vertical-align: inherit;">Helmがなければ、Kubeconfigがあります。</font><font style="vertical-align: inherit;">Helmは、1つの小さなバイナリ、いわばHelm CLIユーティリティをもたらします。これは、コンピューター、ラップトップ、メインフレームにインストールされ、あらゆる用途に使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、これでは十分ではありません。</font><font style="vertical-align: inherit;">HelmにはTillerサーバーコンポーネントがあります。</font><font style="vertical-align: inherit;">彼はクラスター内のHelmを表しています。これは、Kubernetesクラスター内の他のアプリケーションと同じです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chart Repoの次のコンポーネントは、チャートリポジトリです。</font><font style="vertical-align: inherit;">公式リポジトリがあり、会社またはプロジェクトのプライベートリポジトリがある場合があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インタラクション</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Helmを使用してアプリケーションをインストールするときに、アーキテクチャコンポーネントがどのように相互作用するかを見てみましょう。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と言い</font></font><code>Helm install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、リポジトリ（Chart Repo）に移動して、Helm-chartを取得します。</font></font></li>
</ul><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Helmユーティリティ（Helm CLI）はKubeconfigと対話して、どのクラスターに接続するかを決定します。&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この情報を受け取ったユーティリティは、すでにアプリケーションとして、クラスターにあるTillerに切り替えます。&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TillerはKubenetapiでアクションを実行し、いくつかのオブジェクト（サービス、ポッド、レプリカ、シークレットなど）を作成するためにKube-apiserverを使用します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、Helmアーキテクチャ全体が全体として受ける可能性がある攻撃のベクトルを確認するために、スキームを複雑にします。</font><font style="vertical-align: inherit;">そして、私たちは彼女を守ろうとします。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">攻撃ベクトル</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第一の電位弱点- </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API好ましい</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。スキームの一部として、これはHelm CLIへの管理アクセス権を取得したハッカーです。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">権限のないAPIユーザー</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">も、近くにいると危険な場合があります。そのようなユーザーは異なるコンテキストを持ちます。たとえば、Kubeconfigの設定でクラスターの1つの名前空間に固定できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も興味深い攻撃ベクトルは、Tillerの近くのクラスター内にあり、それにアクセスできるプロセスである可能性があります。これは、クラスターのネットワーク環境を認識するWebサーバーまたはマイクロサービスにすることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エキゾチックですが人気が高まっている攻撃オプションは、Chart Repoに関連付けられています。</font><font style="vertical-align: inherit;">悪質な作者が作成したチャートには、安全でないリソースが含まれている可能性があります。あなたはそれを信念を持って実行します。</font><font style="vertical-align: inherit;">または、公式リポジトリからダウンロードしたチャートを置き換えて、たとえば、ポリシーの形式でリソースを作成し、アクセスをエスカレートすることもできます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jv/mc/86/jvmc86oowz_haxtc6jwb3gac9me.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの4つの側面すべてから攻撃を撃退し、Helmアーキテクチャに問題がある場所と、おそらく問題がない場所を見つけてみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スキームを拡大し、要素を追加しますが、すべての基本コンポーネントは保持します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j3/1d/ci/j31dciie_cbem-dvnilww29iksc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Helm CLIはChart Repoと通信し、Kubeconfigと対話し、作業はTillerコンポーネントのクラスターに転送されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tillerは2つのオブジェクトで表されます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定のサービスを公開するTiller-deploy svc。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスターにアクセスする負荷全体を実行するTiller-deployポッド（図では、1つのレプリカの単一のコピー）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
対話にはさまざまなプロトコルとスキームが使用されます。</font><font style="vertical-align: inherit;">セキュリティの観点から、私たちは最も関心があります：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Helm CLIがチャートレポを参照するメカニズム：どのプロトコル、認証があるかどうか、それに対して何ができるか。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Helm CLIがkubectlを使用してTillerと通信するためのプロトコル。</font><font style="vertical-align: inherit;">これは、クラスター内にインストールされたRPCサーバーです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tiller自体は、クラスター内にあり、Kube-apiserverと対話するマイクロサービスで使用できます。</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/qm/49/cw/qm49cwtid16t8lz5lrn7ngzjahi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらすべての方向性について順に説明します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RBAC</font></font></h2><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RBACが有効になっていない場合、Helmまたはクラスター内の別のサービスのセキュリティについて話すのは無意味です。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これ自体は新鮮な推奨事項ではないようですが、本番環境でもRBACを有効にしていない人は多いと思います。これは大騒ぎであり、多くの設定が必要になるためです。それにもかかわらず、私はこれが行われることをお勧めします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h-/6q/j6/h-6qj6oj9otudmbpt_qdx3rzfcs.jpeg"><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://rbac.dev/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、RBACの弁護士サイトです。 RBACの設定に役立つ膨大な量の興味深い資料を収集し、なぜそれが優れているのか、そして原則として本番環境でそれと共存する方法を示しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TillerとRBACがどのように機能するかを説明します。 Tillerは特定のサービスアカウントでクラスタ内で動作します。通常、RBACが構成されていない場合、これはスーパーユーザーになります。基本構成では、Tillerが管理者になります。そのため、ティラーはクラスターへのSSHトンネルであるとよく言われます。実際、これはそうなので、上の図のデフォルトのサービスアカウントの代わりに、個別の専用サービスアカウントを使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Helmを初期化するときは、最初にサーバーにインストールし、でサービスアカウントを設定できます</font></font><code>--service-account</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これにより、最低限必要な一連の権限を持つユーザーを使用できるようになります。確かに、そのような「ガーランド」を作成する必要があります：RoleとRoleBinding。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wh/rv/-6/whrv-6tklftmsb0_fw3h0uumk5g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながら、Helmはこれを行いません。ユーザーまたはKubernetesクラスター管理者は、Helmを転送するために、サービスアカウントの一連のRole、RoleBindingを事前に準備する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題は-RoleとClusterRoleの違いは何ですか？違いは、ClusterRoleがすべての名前空間で有効であることです。これは、特殊な名前空間でのみ機能する通常のRoleおよびRoleBindingとは異なります。クラスター全体とすべての名前空間のポリシーを構成でき、各名前空間を個別にパーソナライズできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RBACが別の大きな問題を解決することは言及する価値があります。 Helmは残念ながらマルチテナンシーではない（マルチテナンシーをサポートしていない）と多くの人が不満を述べています。複数のチームがクラスターを使用してHelmを使用する場合、ポリシーを構成し、このクラスター内でのアクセスを区別することは原則として不可能です。これは、Helmが機能するサービスアカウントがあり、それからクラスター内のすべてのリソースを作成するためです。時には非常に不快です。これは本当です。バイナリ自体として、プロセスとして、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Helm Tillerはマルチテナンシーについての手掛かりを持ちません</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、クラスター内でTillerを複数回実行できる優れた方法があります。</font><font style="vertical-align: inherit;">これには問題はありません; Tillerはすべての名前空間で実行できます。</font><font style="vertical-align: inherit;">したがって、RBAC、Kubeconfigをコンテキストとして使用し、特別なHelmへのアクセスを制限できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rr/hh/kv/rrhhkvmholhz5monyp3o7vxc9nk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、異なるチーム（2つの名前空間）のコンテキストを持つ2つのKubeconfigがあります。開発チームと管理クラスターのXチームです。</font><font style="vertical-align: inherit;">管理クラスターには独自のワイドTillerがあり、それはKube-system名前空間にそれぞれ配置され、それぞれ高度なサービスアカウントです。</font><font style="vertical-align: inherit;">そして、開発チームのための別個の名前空間は、彼らは彼らのサービスを特別な名前空間に配備することができるでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは実用的なアプローチです。Tillerは大食いではないため、予算に大きな影響を与える可能性があります。</font><font style="vertical-align: inherit;">これは、迅速な修正の1つです。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tillerを個別に構成し、Kubeconfigにチーム、特定の開発者、または環境向けのコンテキスト（開発、ステージング、本番）を提供してください（すべてが1つのクラスター上にあることは疑わしいですが、実行できます）。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
話を続けて、RBACから切り替えて、ConfigMapについて話します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構成マップ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HelmはConfigMapsをデータウェアハウスとして使用します。アーキテクチャについて説明したとき、リリース、構成、ロールバックなどに関する情報が格納されているデータベースはありませんでした。このために、ConfigMapsが使用されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ConfigMapの主な問題は既知です。それらは原則として安全ではなく、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機密データを格納する</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ことは</font><strong><font style="vertical-align: inherit;">不可能</font></strong><font style="vertical-align: inherit;">です。私たちは、パスワードなど、サービスを超えてはならないすべてのことについて話しています。 Helmの最もネイティブな方法は、ConfigMapの使用からシークレットへの移行です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは非常に簡単です。 Tiller設定を再定義し、ストレージがシークレットになるように指定します。その後、デプロイごとにConfigMapではなくシークレットを受け取ります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/da/a2/e-/daa2e-a00de_nuo_crbeqtaz6qu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
秘密自体は奇妙な概念であり、それは非常に安全ではないと主張するかもしれません。</font><font style="vertical-align: inherit;">ただし、Kubernetesの開発者がこれを行っていることを理解する価値があります。</font><font style="vertical-align: inherit;">バージョン1.10以降、つまり </font><font style="vertical-align: inherit;">長い間、少なくともパブリッククラウドでは、正しいストレージを接続してシークレットを格納する可能性があります。</font><font style="vertical-align: inherit;">現在、チームはシークレット、個々のポッド、またはその他のエンティティへのアクセスをより適切に配布することに取り組んでいます。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Storage Helmはシークレットに変換する方が優れており、ひいては一元的に保護されます。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データを1 MBに保存するのに</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><strong><font style="vertical-align: inherit;">制限</font></strong><font style="vertical-align: inherit;">があります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ここのHelmは、ConfigMapの分散リポジトリとしてetcdを使用します。</font><font style="vertical-align: inherit;">そして、レプリケーションなどに適したデータチャンクであると考えました。</font><font style="vertical-align: inherit;">これについてはRedditに関する興味深い議論があり</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">週末にこの楽しい読書の問題を見つけるか、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ここで</font></a><font style="vertical-align: inherit;">スクイーズを読むことをお勧めし</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チャート担当者</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チャートは最も社会的に脆弱であり、特にストックソリューションを使用する場合、「中間者」の原因になる可能性があります。</font><font style="vertical-align: inherit;">まず、HTTP経由で公開されるリポジトリについて話します。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">間違いなく、HTTPSを介してHelmリポジトリを公開する必要があります-これは最良のオプションであり、安価です。</font></font></blockquote><br><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チャート署名</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の</font><strong><font style="vertical-align: inherit;">メカニズムに</font></strong><font style="vertical-align: inherit;">注意してください</font><font style="vertical-align: inherit;">。テクノロジーは恥ずかしいほど簡単です。これは、公開鍵と秘密鍵を備えた通常のPGPマシンであるGitHubで使用するものと同じです。必要なキーを用意し、すべてに署名してセットアップしてください。これは本当にあなたのチャートです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HelmクライアントはTLSをサポートします</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（サーバー側からのHTTPの意味ではなく、相互TLS）。通信するには、サーバーキーとクライアントキーを使用できます。率直に言って、私は相互の証明書が嫌いなため、このようなメカニズムを使用しません。原則として、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chartmuseum（</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Helm 2の主要なHelm Repo公開ツール）も基本認証をサポートしています。より便利で落ち着いている場合は、基本認証を使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まだプラグインがあります</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">helm-gcs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用すると、Google Cloud StorageでChart </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Repos</font></a><font style="vertical-align: inherit;">をホストできます。</font><font style="vertical-align: inherit;">説明されているすべてのメカニズムが利用されているため、非常に便利で、非常に機能し、非常に安全です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zo/e9/io/zoe9iooiuwjc6ccwy3lcghxlsyo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTTPSまたはTLSを有効にし、mTLSを使用し、基本認証を接続してリスクをさらに軽減すると、安全な通信チャネルHelm CLIとChart Repoが得られます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gRPC API</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のステップは非常に責任があります-クラスター内にあり、一方でサーバーであるTillerを保護する一方で、他のコンポーネントにアクセスし、自分自身を誰かとして紹介しようとします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
先ほど述べたように、TillerはgRPCを公開するサービスであり、HelmクライアントはgRPCを介してアクセスします。</font><font style="vertical-align: inherit;">もちろん、デフォルトではTLSはオフになっています。</font><font style="vertical-align: inherit;">なぜこれが行われるのかは議論の余地のある質問ですが、最初はセットアップを単純化するように思えます。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本番環境およびステージングの場合でも、gRPCでTLSを有効にすることをお勧めします。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の意見では、チャートのmTLSとは異なり、ここでは適切であり、非常に簡単に実行されます。PQIインフラストラクチャを生成し、証明書を作成し、Tillerを起動し、初期化中に証明書を転送します。</font><font style="vertical-align: inherit;">その後、生成された証明書と秘密鍵のように見えるすべてのHelmコマンドを実行できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tg/rp/lt/tgrpltlna0hqfdviwfffe4is9ym.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、クラスターの外部からTillerへのすべてのリクエストから身を守ることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこで、Tillerへの接続チャネルを保護し、RBACについてすでに説明し、Kubernetes apiserverの権限を調整して、相互作用できるドメインを減らしました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保護された兜</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最終的な図を見てみましょう。</font><font style="vertical-align: inherit;">これは、同じ矢印が付いた同じアーキテクチャです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4h/j2/_7/4hj2_7hltplw1nsfktdw11dly4i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての接続を安全に緑色でペイントできるようになりました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chart Repoでは、TLSまたはmTLSと基本認証を使用します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TillerのmTLS、およびTLSを使用したgRPCサービスとして公開されているため、証明書を使用します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスタは、RoleとRoleBindingを持つ特別なサービスアカウントを使用します。&nbsp;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはクラスターを著しく保護しましたが、賢い誰かが言った：</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「絶対に安全な解決策は1つしかありません。コンピューターの電源がオフになっていて、コンクリートの箱の中にあり、兵士によって守られています。」</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データを操作して新しい攻撃ベクトルを見つける方法はいくつかあります。</font><font style="vertical-align: inherit;">ただし、これらの推奨事項により、基本的な業界安全基準を実装できると確信しています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ボーナス</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この部分はセキュリティに直接関係していませんが、役に立つ場合もあります。あまり知られていない面白いことを紹介します。たとえば、チャートの検索方法-公式および非公式。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">github.com/helm/charts</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
リポジトリ</font><font style="vertical-align: inherit;">に、約300のチャートと2つのストリーム（安定版とインキュベーター）が</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加されました</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。寄稿者は、インキュベーターから安定状態に移行するのがどれほど難しいか、また、安定状態から飛び出すのがどれほど簡単かを知っています。ただし、これはPrometheusのチャートを検索するのに最適なツールではありません。1つの単純な理由で気に入っているのは、パッケージを検索するのに便利なポータルではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">hub.helm.sh</font></a><font style="vertical-align: inherit;">サービスがあります</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用すると、グラフを検索するのにはるかに便利です。最も重要なことは、より多くの外部リポジトリがあり、約800の文字が利用できることです。さらに、何らかの理由でチャートを安定版に送信したくない場合は、リポジトリを接続できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
hub.helm.shを試して、一緒に開発しましょう。このサービスはHelmプロジェクトの下にあり、フロントエンドベンダーであり、外観を単純に改善したい場合は、UIで貢献することもできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open Service Broker APIの統合</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">にも注目したいと思います</font><font style="vertical-align: inherit;">。面倒で理解しにくいように聞こえますが、誰もが直面している問題を解決します。簡単な例で説明します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sv/ry/gq/svrygqjzgdcxc_sf5rrrdc2b70g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラシックアプリケーションであるWordPressを実行するKubernetes-clusterがあります。原則として、全機能を使用するにはデータベースが必要です。多くの異なるソリューションがあります。たとえば、ステートフルサービスを開始できます。これはあまり便利ではありませんが、多くの場合は便利です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chainstackのような他のサーバーは、MySQLやPostgreSQLなどの管理されたデータベースをサーバーに使用します。したがって、データベースはクラウドのどこかにあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、問題が発生します。私たちのサービスをデータベースに接続し、フレーバーデータベースを作成し、認証情報を渡して、どういうわけかそれを管理する必要があります。これは通常、システム管理者または開発者が手動で行います。また、アプリケーションが少ない場合でも問題ありません。たくさんあるときは、コンバインが必要です。そのような組み合わせがあります-これはService Brokerです。 APIのように、パブリッククラウドクラスターに特別なプラグインを使用して、ブローカーを通じてプロバイダーからリソースを注文できます。これを行うには、ネイティブのKubernetesツールを使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
とてもシンプルです。</font><font style="vertical-align: inherit;">たとえば、基本階層を使用してAzureのManaged MySQLをクエリできます（これは構成可能です）。</font><font style="vertical-align: inherit;">Azure APIを使用して、ベースが作成され、使用できるように準備されます。</font><font style="vertical-align: inherit;">これを妨害する必要はありません。プラグインがこれを担当します。</font><font style="vertical-align: inherit;">たとえば、OSBA（Azureプラグイン）は資格情報をサービスに返し、これをHelmに渡します。</font><font style="vertical-align: inherit;">曇りのMySQLでWordPressを使用でき、管理されたデータベースをまったく扱わず、内部のステートフルサービスについて心配する必要はありません。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Helmは、一方ではサービスのデプロイを可能にする接着剤として機能し、他方ではクラウドプロバイダーのリソースを消費すると言えます。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
独自のプラグインを作成して、このオンプレミスのストーリー全体を使用できます。</font><font style="vertical-align: inherit;">次に、企業のクラウドプロバイダー用の独自のプラグインを用意します。</font><font style="vertical-align: inherit;">特に大規模で、機能の開発、ステージング、またはインフラストラクチャ全体をすばやく展開する場合は、このアプローチを試すことをお勧めします。</font><font style="vertical-align: inherit;">これにより、運用やDevOpsの作業が楽になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私がすでに述べたもう1つの発見は、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">helm-gcsプラグインです</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これにより、Googleバケット（オブジェクトストレージ）を使用してHelmチャートを保存できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gp/id/ln/gpidlnzmqfrnh4kswxi9obliphk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用を開始するのに必要なコマンドは4つだけです。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プラグインをインストールします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それを開始します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パスをgcpにあるバケットに設定します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準的な方法でグラフを公開します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
美しさは、認証にネイティブのgcpメソッドが使用されることです。</font><font style="vertical-align: inherit;">サービスアカウント、開発者アカウントを使用できます-何でも。</font><font style="vertical-align: inherit;">それは非常に便利であり、操作に費用はかかりません。</font><font style="vertical-align: inherit;">私のようにopsless哲学を提唱している場合、これは特に小さなチームにとって非常に便利です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代替案</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Helmは唯一のサービス管理ソリューションではありません。</font><font style="vertical-align: inherit;">彼には多くの質問があります。おそらくこれが、3番目のバージョンがすぐに登場した理由です。</font><font style="vertical-align: inherit;">もちろん代替案があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、KsonnetやMetaparticleなどの特殊なソリューションとして使用できます。</font><font style="vertical-align: inherit;">クラシックインフラストラクチャ管理ツール（Ansible、Terraform、Chefなど）は、先ほど説明したのと同じ目的で使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、</font><font style="vertical-align: inherit;">人気が高まっている</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オペレーターフレームワーク</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソリューション</font><font style="vertical-align: inherit;">があります。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オペレーターフレームワークは、注意を払うべきHelmの主要な代替手段です。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CNCFとKubernetesの方がネイティブです</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が、エントリのしきい値ははるかに高く</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、プログラムを増やしてマニフェストの記述を減らす必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Draft、Scaffoldなど、さまざまなアドオンがあります。</font><font style="vertical-align: inherit;">たとえば、開発者はテスト環境をデプロイするためのHelm送信および起動サイクルを簡素化します。</font><font style="vertical-align: inherit;">私は彼らを機会の延長者と呼びます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、何が配置されているかを示す視覚的なグラフです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x8/jl/f3/x8jlf3pejoqjp5b-lj9y2l9r6q0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
X軸では、何が起こっているかに対する個人的な制御のレベル、Y軸では、Kubernetesのネイティブ性のレベル。 Helmバージョン2は途中にあります。バージョン3では、これは大きな問題ではありませんが、コントロールとネイティブレベルの両方が改善されています。 Ksonnetソリューションは、Helm 2よりも劣っています。しかし、これらのソリューションは、この世界の他に何があるかを知るために一見の価値があります。もちろん、構成マネージャーはあなたの管理下にありますが、Kubernetesのネイティブではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オペレーターフレームワークはKubernetesに完全にネイティブであり、はるかにエレガントで細心の注意を払って管理できます（ただし、エントリのレベルを覚えておいてください）。むしろ、Helmを使用して膨大な数のアプリケーションをパッキングするマスハーベスターではなく、特殊なアプリケーションとその管理の作成に適しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エクステンダーは、制御を少し改善したり、ワークフローを補完したり、CI / CDパイプラインの端を切り取ったりするだけです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヘルムの未来</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Helm 3が表示されているのは良いニュースですが、Helm 3.0.0-alpha.2のアルファバージョンは既にリリースされています。</font><font style="vertical-align: inherit;">非常に安定していますが、機能はまだ制限されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Helm 3が必要なのはなぜですか？</font><font style="vertical-align: inherit;">まず第一に、これは</font><font style="vertical-align: inherit;">構成要素として</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のティラー</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><strong><font style="vertical-align: inherit;">消失の</font></strong><font style="vertical-align: inherit;">物語</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">すでに理解しているように、これはすべてがアーキテクチャのセキュリティの観点から単純化されているため、大きな前進です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Helm 2が作成されたとき（Kubernetes 1.8またはそれ以前）、多くの概念は未熟でした。</font><font style="vertical-align: inherit;">たとえば、CRDの概念は積極的に実装されており、Helmは</font><strong><font style="vertical-align: inherit;">CRD</font></strong><font style="vertical-align: inherit;">を</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用します</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構造を保存します。クライアントのみを使用し、サーバー側を維持することはできません。したがって、ネイティブのKubernetesコマンドを使用して、構造とリソースを操作します。これは大きな前進です。</font><strong><font style="vertical-align: inherit;">ネイティブOCIリポジトリ</font></strong><font style="vertical-align: inherit;">（Open Container Initiative）の</font><strong><font style="vertical-align: inherit;">サポート</font></strong></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
が表示され</font><font style="vertical-align: inherit;">ます。これは大きなイニシアチブであり、Helmは主にそのチャートを投稿するために興味深いものです。たとえば、Docker Hubが多くのOCI標準をサポートするようになります。私はそうは思いませんが、おそらくDockerリポジトリの古典的なプロバイダーは、Helmチャートを配置する機会をあなたに提供し始めるでしょう。</font><font style="vertical-align: inherit;">
私にとって物議を醸しているのは</font><strong><font style="vertical-align: inherit;">Luaのサポートです</font></strong></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクリプトを記述するためのテンプレートエンジンとして。私はLuaの大ファンではありませんが、完全にオプションの機能になります。 3回確認しました。Luaを使用する必要はありません。したがって、Luaを使用できるようにしたい人、Goが好きな人は、私たちの巨大なキャンプに参加して、go-tmplを使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、私が明らかに欠けていたの</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、スキーマ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><strong><font style="vertical-align: inherit;">外観とデータ型の検証でした</font></strong><font style="vertical-align: inherit;">。 intやstringで問題が発生しなくなり、二重引用符でゼロを囲む必要がなくなります。これを値に対して明示的に説明できるJSONSスキーマが表示されます。</font><strong><font style="vertical-align: inherit;">イベント駆動型モデル</font></strong></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
が大幅に再設計されます</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。それはすでに概念的に説明されています。 Helm 3ブランチを見て、追加されたイベントとフックなどの数を確認します。これにより大幅に簡素化され、一方で展開プロセスとそれらに対する反応を制御できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Helm 3は、Helm 2が気に入らないためではなく、Kubernetesがより高度になったため、より簡単、安全、そして興味深いものになります。したがって、HelmはKubernetesの成果を利用して、Kubernetesの優れたマネージャーを作成できます。</font></font><br>
<br>
<blockquote>     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">DevOpsConf</a>   , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    ?</a> ,     ,       <strong>30   1 </strong>.  20    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>  DevOps-.<br>
<br>
       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">telegram-</a>.</blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja462653/index.html">独立の象徴としてのLTE</a></li>
<li><a href="../ja462655/index.html">最後にコードを入力してください</a></li>
<li><a href="../ja462657/index.html">SkyRC B6 Nano充電器のレビューとテスト</a></li>
<li><a href="../ja462661/index.html">LinuxでC ++プログラムを開発する際のPVS-Studio静的アナライザーの知識</a></li>
<li><a href="../ja462663/index.html">水泳、ダンス（！）、ロッキング</a></li>
<li><a href="../ja462667/index.html">GalaxyガイドDevOpsConf 2019</a></li>
<li><a href="../ja462671/index.html">製品としての企業インフラ</a></li>
<li><a href="../ja462673/index.html">石、はさみ、紙、就職の面接、スポック</a></li>
<li><a href="../ja462675/index.html">情報の失望</a></li>
<li><a href="../ja462677/index.html">Vepp-ISPsystemの新しいサーバーとサイトコントロールパネル</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>