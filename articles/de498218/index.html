<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>™️ 🤦🏼 👨🏾‍✈️ Als ich Musik aus kosmischen Strahlen schrieb 💇🏻 🖐🏻 🆑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Guten Tag, Genossen! Ich bin nur ein Anfänger Musiker, aber ich habe Erfahrung in der Programmierung. Und warum nicht ein paar Daten nehmen und versuc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Als ich Musik aus kosmischen Strahlen schrieb</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498218/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guten Tag, Genossen! </font><font style="vertical-align: inherit;">Ich bin nur ein Anfänger Musiker, aber ich habe Erfahrung in der Programmierung. </font><font style="vertical-align: inherit;">Und warum nicht ein paar Daten nehmen und versuchen, Audio auszugeben (es ist wie Visualisieren, nur ... Kappe)?</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Taschemta, der Plan ist folgender:</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daten finden</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überlegen Sie, wie Sie sie in Sound umwandeln können</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passen Sie die Konverterparameter so an, dass sie schöner sind</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Immer noch Kraft? </font><font style="vertical-align: inherit;">gehe zu 1</font></font></li>
</ul><a name="habracut"></a><br>
<h4 id="lovim-kosmicheskie-luchi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kosmische Strahlung einfangen</font></font></h4><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich habe die Daten von der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Website genommen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Insbesondere habe ich die Daten von „Variationsmessungen“ kosmischer Strahlung für den Standardzeitraum - 31.03.10 - 04 - Tien-Shan und Tien-Shan Underground verwendet (damit Sie immer noch einige Korrelationen oder Harmonien verfolgen können). </font><font style="vertical-align: inherit;">Und zur Änderung der Daten habe ich die Messungen der "Gammastrahlung" heruntergeladen, auch für den Standardzeitraum - diesmal am 5.04-10.04.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tien-Shan-Daten sehen folgendermaßen aus:</font></font></p><br>
<pre><code class="plaintext hljs">31.03.2020  00:00:00    3813    5504    5187    5251    4637    4071    4568    4998    4922    4858    4956    4271    3997    4358    4715    4077    4160    3980<font></font>
31.03.2020  00:01:00    3653    5308    5413    5371    4691    4090    4617    5139    5009    4762    5172    4309    4208    4387    4923    4248    4092    4108<font></font>
31.03.2020  00:02:00    3763    5309    5292    5298    4588    4105    4608    5072    5070    4745    4834    4158    3918    4284    5115    4233    4011    3972<font></font>
…<font></font>
09.04.2020  23:57:00    3855    5308    5239    5190    4531    4063    4537    5035    5084    4863    5089    4261    4122    4395    5394    4186    4167    4078<font></font>
09.04.2020  23:58:00    3955    5492    5416    5406    4458    4037    4474    5122    4942    4733    5168    4330    4026    4357    5283    4059    4174    3857<font></font>
09.04.2020  23:59:00    3811    5378    5334    5121    4472    3955    4334    4992    4940    4646    4822    4378    4137    4195    4880    4049    4002    3817</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tien-Shan-Diagramm:</font></font></p><br>
<p><img src="https://habrastorage.org/webt/u6/ks/uq/u6ksuqvsrkicyctmqushnt3jfcq.png"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Datenstruktur von Tien-Shan Underground ist identisch mit der obigen Struktur, aber die Werte selbst sind viel niedriger:</font></font></p><br>
<pre><code class="plaintext hljs">31.03.2020  00:00:00    20  32  29  26  20  20  17  14  16<font></font>
31.03.2020  00:01:00    14  16  17  27  20  27  9   15  7<font></font>
31.03.2020  00:02:00    13  22  16  22  15  18  12  15  11<font></font>
…<font></font>
09.04.2020  23:57:00    17  19  20  27  20  17  11  18  16<font></font>
09.04.2020  23:58:00    14  33  19  19  18  16  15  16  9<font></font>
09.04.2020  23:59:00    16  31  23  25  21  22  16  10  14</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tien-Shan Underground Chart:</font></font></p><br>
<p><img src="https://habrastorage.org/webt/vr/jl/4z/vrjl4ztxzvlaqgal81ick74hxzi.png"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und die Gammastrahlungsdaten sehen folgendermaßen aus:</font></font></p><br>
<pre><code class="plaintext hljs">05.04.2020  00:00:02    20640   5345    4726    3532    2365    2118    1261    891 655 334 252 194<font></font>
05.04.2020  00:00:12    21160   5295    4666    3526    2365    2138    1250    852 627 309 235 190<font></font>
05.04.2020  00:00:22    19581   5189    4562    3536    2401    2130    1229    820 618 324 243 172<font></font>
…<font></font>
09.04.2020  23:59:37    22381   5134    4505    3429    2274    2044    1223    823 569 275 205 154<font></font>
09.04.2020  23:59:47    21917   5186    4577    3448    2273    2044    1166    803 563 293 214 165<font></font>
09.04.2020  23:59:58    20930   5275    4644    3561    2382    2148    1248    868 609 289 232 176</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Radiopunkt Mu1 Grafik:</font></font></p><br>
<p><img src="https://habrastorage.org/webt/83/pv/tc/83pvtcipiwimprfy2gfetfsitaw.png"></p><br>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn ich andere Daten verwende, aktualisiere ich die Deklaration der konstanten Quellen (Absatz oben).</font></font></strong></p><br>
<h3 id="pervaya-popytka"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erster Versuch</font></font></h3><br>
<p>    .    . , , Audacity      . !   ,         -  .</p><br>
<p>  , Audacity  float    -1.00000  1.00000,  -1/1 = 0dB —  ,         .</p><br>
<p>    ,   csv,   ,    <code>(\s\t\n)+</code>,        ,     .</p><br>
<h4 id="nemnogo-o-importe-dannyh-v-audacity">     Audacity</h4><br>
<p>  raw   Audacity   :</p><br>
<p>     1:</p><br>
<pre><code class="plaintext hljs">;This is a comment and will be ignored.<font></font>
0.07100 0.14056 0.20727 0.26978 0.32682 0.37724 0.42001 0.45428 0.47933 0.49468 0.50000 0.49518 0.48034 0.45575 0.42193 0.37957 0.32951 0.27277 0.21050 0.14397 0.07452 0.00356 -0.06747 -0.13713 -0.20402 -0.26677 -0.32411 -0.37489 -0.41807 -0.45278 -0.47831 -0.49415 -0.49997 -0.49566 -0.48131 -0.45721 -0.42384 -0.38188 -0.33218 -0.27575 -0.21373 -0.14738 -0.07804 -0.00712 0.06394 0.13370 0.20076 0.26375 0.32139 0.37252 0.41611 0.45125 0.47726 0.49359 0.49992 0.49612 0.48226 0.45864 0.42571 0.38416 0.33483 0.27871 0.21694 0.15078 0.08156 0.01068 -0.06040 -0.13027 -0.19749 -0.26072 -0.31866 -0.37014 -0.41412 -0.44971 -0.47618 -0.49301 -0.49984 -0.49655 -0.48319 -0.46004 -0.42757 -0.38643 -0.33747 -0.28166 -0.22015 -0.15417 -0.08507 -0.01425</code></pre><br>
<p>        :</p><br>
<pre><code class="plaintext hljs">0.00000 -0.00000<font></font>
0.10000 -0.10000<font></font>
0.20000 -0.20000<font></font>
0.30000 -0.30000<font></font>
0.40000 -0.40000<font></font>
0.50000 -0.50000<font></font>
0.60000 -0.60000<font></font>
0.70000 -0.70000<font></font>
0.80000 -0.80000<font></font>
0.90000 -0.90000<font></font>
1.00000 -1.00000</code></pre><br>
<p>        ,        (     ,   —  ).</p><br>
<p>**        ,     .          ,   — ,   ,  — 0dB.</p><br>
<h4 id="poc---proof-of-concept-chchr---chto-to-chto-rabotaet">PoC — Proof of Concept.  — -,  .</h4><br>
<p>      .     .</p><br>
<p> ,  Audacity      ,       float [-1.00000-1.00000].       : , , ,   .</p><br>
<p>     (   F12),    ,        .</p><br>
<p>  .           Find &amp; Replace  : (.+?\t){x}(.+?)\t.+?\n<code>-&gt;</code>\2,`,   —     + 1 (   ).</p><br>
<p> csv :</p><br>
<pre><code class="plaintext hljs">3813,3790,3801,3833,3674,3822,3639,3848,3866,3794,3747,3938,3823,3989,3963,3852,3836,3694,3883,3748,3802,3884,3790,3684,3895,3872,3885,4011,3844,3901,3713,3870,3868,3772,3866,3939,3856,3720,3640,3929,3905,...</code></pre><br>
<p>  ,      :</p><br>
<pre><code class="javascript hljs">a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parse_array</span>(<span class="hljs-params">arr</span>) </span>{
    <span class="hljs-built_in">console</span>.log(“Min: “ + <span class="hljs-built_in">Math</span>.min(...arr));
    <span class="hljs-built_in">console</span>.log(“Max: “ + <span class="hljs-built_in">Math</span>.max(...arr));
    <span class="hljs-built_in">console</span>.log(“Avg: “ + arr.reduce(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b) / arr.length);
<span class="hljs-comment">// console.log("Min: " + Math.min(...arr) + "; Max: " + Math.max(...arr) + "; Avg: " + arr.reduce((a, b) =&gt; a + b) / arr.length);</span><font></font>
}<font></font>
<font></font>
&gt; parse_array(a)<font></font>
    <span class="hljs-number">1</span>
    <span class="hljs-number">5</span>
    <span class="hljs-number">3</span></code></pre><br>
<p>,     ,          Tien-Shan:</p><br>
<pre><code class="javascript hljs"><span class="hljs-number">1</span>: Min: <span class="hljs-number">3514</span>; Max: <span class="hljs-number">4192</span>; Avg: <span class="hljs-number">3844.4135528815705</span>
<span class="hljs-number">2</span>: Min: <span class="hljs-number">4934</span>; Max: <span class="hljs-number">5741</span>; Avg: <span class="hljs-number">5358.663125307817</span>
<span class="hljs-number">3</span>: Min: <span class="hljs-number">4945</span>; Max: <span class="hljs-number">5703</span>; Avg: <span class="hljs-number">5313.77323577007</span>
<span class="hljs-number">4</span>: Min: <span class="hljs-number">4882</span>; Max: <span class="hljs-number">5725</span>; Avg: <span class="hljs-number">5281.23640329276</span>
<span class="hljs-number">5</span>: Min: <span class="hljs-number">4219</span>; Max: <span class="hljs-number">4953</span>; Avg: <span class="hljs-number">4598.3294167311615</span>
<span class="hljs-number">6</span>: Min: <span class="hljs-number">3712</span>; Max: <span class="hljs-number">4426</span>; Avg: <span class="hljs-number">4075.323506648843</span>
<span class="hljs-number">7</span>: Min: <span class="hljs-number">4168</span>; Max: <span class="hljs-number">4966</span>; Avg: <span class="hljs-number">4530.841131358616</span>
<span class="hljs-number">8</span>: Min: <span class="hljs-number">4576</span>; Max: <span class="hljs-number">5344</span>; Avg: <span class="hljs-number">4973.967775979737</span>
<span class="hljs-number">9</span>: Min: <span class="hljs-number">4608</span>; Max: <span class="hljs-number">5478</span>; Avg: <span class="hljs-number">4976.573559417435</span>
<span class="hljs-number">10</span>: Min: <span class="hljs-number">4459</span>; Max: <span class="hljs-number">5261</span>; Avg: <span class="hljs-number">4795.212692605362</span>
<span class="hljs-number">11</span>: Min: <span class="hljs-number">4574</span>; Max: <span class="hljs-number">5380</span>; Avg: <span class="hljs-number">4989.718215718005</span>
<span class="hljs-number">12</span>: Min: <span class="hljs-number">3944</span>; Max: <span class="hljs-number">4757</span>; Avg: <span class="hljs-number">4331.33553788785</span>
<span class="hljs-number">13</span>: Min: <span class="hljs-number">0</span> (<span class="hljs-number">3771</span>); Max: <span class="hljs-number">4428</span>; Avg: <span class="hljs-number">4095.4295363399706</span>
<span class="hljs-number">14</span>: Min: <span class="hljs-number">0</span> (<span class="hljs-number">4084</span>); Max: <span class="hljs-number">4865</span>; Avg: <span class="hljs-number">4407.586716386407</span>
<span class="hljs-number">15</span>: Min: <span class="hljs-number">0</span> (<span class="hljs-number">4384</span>); Max: <span class="hljs-number">5394</span>; Avg: <span class="hljs-number">4866.680292689791</span>
<span class="hljs-number">16</span>: Min: <span class="hljs-number">0</span> (<span class="hljs-number">3837</span>); Max: <span class="hljs-number">4703</span>; Avg: <span class="hljs-number">4238.36325898825</span>
<span class="hljs-number">17</span>: Min: <span class="hljs-number">0</span> (<span class="hljs-number">3786</span>); Max: <span class="hljs-number">4661</span>; Avg: <span class="hljs-number">4204.146837402378</span>
<span class="hljs-number">18</span>: Min: <span class="hljs-number">0</span> (<span class="hljs-number">3753</span>); Max: <span class="hljs-number">4596</span>; Avg: <span class="hljs-number">4152.545697600788</span></code></pre><br>
<p>*      , duh.</p><br>
<p>    ,        float [-1.00000-1.00000] :</p><br>
<pre><code class="javascript hljs">a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parse_array</span>(<span class="hljs-params">arr</span>) </span>{<font></font>
    arr = arr.filter(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a != <span class="hljs-number">0</span>); <span class="hljs-comment">// to remove zeros</span>
    min = <span class="hljs-built_in">Math</span>.min(...arr);<font></font>
    max = <span class="hljs-built_in">Math</span>.max(...arr);<font></font>
    avg = arr.reduce(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b) / arr.length;
   <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Min: "</span> + min + <span class="hljs-string">"; Max: "</span> + max + <span class="hljs-string">"; Avg: "</span> + avg);<font></font>
<font></font>
   floatify = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a</span>) </span>{
      <span class="hljs-keyword">if</span> (a == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
      <span class="hljs-keyword">if</span> (a &gt; avg) {
         <span class="hljs-keyword">return</span> (a - avg) / (max - avg);<font></font>
      } <span class="hljs-keyword">else</span> {
         <span class="hljs-keyword">return</span> (a - min) / (avg - min) - <span class="hljs-number">1</span>;<font></font>
   }<font></font>
   <span class="hljs-built_in">console</span>.log(arr.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> floatify(a)));<font></font>
}<font></font>
<font></font>
&gt; parse_array(a)<font></font>
   <span class="hljs-attr">Min</span>: <span class="hljs-number">1</span>; Max: <span class="hljs-number">5</span>; Avg: <span class="hljs-number">3</span>
   [<span class="hljs-number">-1</span>, <span class="hljs-number">-0.5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>]</code></pre><br>
<p>  :</p><br>
<pre><code class="plaintext hljs">-0.09502086396735898<font></font>
-0.579290635757401<font></font>
-0.24635516765174703<font></font>
-0.1646346436621775<font></font>
-0.1313410968516121<font></font>
-0.03448714249360363</code></pre><br>
<p>   Audacity  Tools → Sample Data Import…</p><br>
<p>  -  (  Tien-Shan):</p><br>
<p><img src="https://habrastorage.org/webt/jd/ag/l_/jdagl_qqaxkbvipb58cr-zkaehu.png"></p><br>
<p>  .  ,        .</p><br>
<p>.</p><br>
<h3 id="vtoraya-popytka-neudachnaya">  ()</h3><br>
<p>   .      ,      .     ,     :</p><br>
<pre><code class="plaintext hljs">Timestamp    FractionalDate    UncorrectedCountRate[cts/min]    CorrectedCountRate[cts/min]    Pressure[mbar]<font></font>
2020-03-11T00:00:00Z    71.0000000  7150    6702    991.00<font></font>
2020-03-11T00:30:00Z    71.0208333  7205    6749    990.91<font></font>
2020-03-11T01:00:00Z    71.0416667  7214    6750    990.75<font></font>
2020-03-11T01:30:00Z    71.0625000  7250    6776    990.61<font></font>
2020-03-11T02:00:00Z    71.0833333  7275    6792    990.45</code></pre><br>
<p>   ,         .</p><br>
<p> :<br>
         ( → )<br>
      : detune,  </p><br>
<h4 id="overtone">Overtone</h4><br>
<p>,      ,  - .         ,     .       Overtone (   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"></a>).</p><br>
<p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"></a>:</p><br>
<p><em>  -         Ovetone.  : Java, Clojure, Supercollider, Leiningen, JackD      jackd, pulseaudio  alsa.   !<br>
<strong>       Clojure  Leiningen.<br>
</strong></em>   ,     ,    .</p><br>
<h4 id="clojure">Clojure</h4><br>
<p>,      . ,         ,     .</p><br>
<p>   Clojure,  .  .  ,     <code>lein repl</code> (     ),     tone.clj,      ,      repl-.</p><br>
<p>    :</p><br>
<pre><code class="lisp hljs">(<span class="hljs-name">demo</span> <span class="hljs-number">0.5</span> (<span class="hljs-name">sin-osc</span> <span class="hljs-number">440</span>))</code></pre><br>
<p> ,      .    ,       .</p><br>
<p> </p><br>
<p><code>lein repl</code></p><br>
<p> ovetone</p><br>
<p><code>user=&gt; (use ‘overtone.live)</code></p><br>
<p>   </p><br>
<p><code>user=&gt; (load-file “tone.clj”)</code></p><br>
<p> ? !  ? -     . ,      …</p><br>
<h4 id="dannye"></h4><br>
<p> ,        “”.    /    ,       .</p><br>
<p>    :</p><br>
<pre><code class="lisp hljs">user=&gt; (<span class="hljs-name">def</span> a [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>])<font></font>
#'user/a<font></font>
user=&gt; (<span class="hljs-name">prn-str</span> a)
<span class="hljs-string">"[1 2 3]\n"</span>
user=&gt; (<span class="hljs-name">spit</span> <span class="hljs-string">"stored-array.dat"</span> (<span class="hljs-name">prn-str</span> a))
<span class="hljs-literal">nil</span>
user=&gt; (<span class="hljs-name">slurp</span> <span class="hljs-string">"stored-array.dat"</span>)
<span class="hljs-string">"[1 2 3]\n"</span></code></pre><br>
<p>*   ,  Clojure,    overtone.live —  </p><br>
<p>  ,       Clojure.         ,    , , ,      —   .</p><br>
<p><strong>UPD: ,    \n ,         :</strong></p><br>
<pre><code class="lisp hljs">user=&gt; (<span class="hljs-name">defn</span> trim [input] (<span class="hljs-name">clojure</span>.string/replace input #<span class="hljs-string">"\n"</span> <span class="hljs-string">""</span>))<font></font>
#'user/trim</code></pre><br>
<p>,        ,     (\n,   …):</p><br>
<pre><code class="lisp hljs">user=&gt; (<span class="hljs-name">trim</span> (<span class="hljs-name">slurp</span> “stored-array.dat”))<font></font>
“[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>]”</code></pre><br>
<p>      ,     ,       overtone.       ,        .</p><br>
<h3 id="tretya-popytka"> </h3><br>
<p>  ,      ,    overtone,               .</p><br>
<p>   — <strong>Shadertoy.com</strong></p><br>
<p>?    .       ,   !<br>
    :</p><br>
<pre><code class="cpp hljs"><span class="hljs-comment">//  vec2()     </span>
<span class="hljs-function">vec2 <span class="hljs-title">mainSound</span><span class="hljs-params">(<span class="hljs-keyword">float</span> time)</span> </span>{
    <span class="hljs-comment">// 6.2831 ~ 2pi</span>
    <span class="hljs-comment">// exp()  ,   </span>
    <span class="hljs-comment">//       </span>
    <span class="hljs-keyword">return</span> vec2(<span class="hljs-built_in">sin</span>(<span class="hljs-number">6.2831</span> * <span class="hljs-number">440.0</span> * time) * <span class="hljs-built_in">exp</span>(<span class="hljs-number">-2.0</span> * time));<font></font>
}</code></pre><br>
<p>**(…  …    — )</p><br>
<p>     — <del>shadertoy  </del>,     :</p><br>
<div class="oembed"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.shadertoy.com/view/tdSyWV</a></div><br>
<p>    :</p><br>
<pre><code class="cpp hljs"><span class="hljs-comment">//  vec2()     </span>
<span class="hljs-function">vec2 <span class="hljs-title">mainSound</span><span class="hljs-params">(<span class="hljs-keyword">float</span> time)</span> </span>{<font></font>
    vec2 result = vec2(<span class="hljs-built_in">sin</span>(<span class="hljs-number">6.2831</span> * <span class="hljs-number">440.0</span> * time) * <span class="hljs-built_in">exp</span>(<span class="hljs-number">-2.0</span> * time));<font></font>
<font></font>
    <span class="hljs-comment">// One second later</span>
    <span class="hljs-keyword">if</span> (time &gt; <span class="hljs-number">1.0</span>) {
        <span class="hljs-comment">// (time - x) ,     </span>
        <span class="hljs-comment">//    exp() ,  </span>
        <span class="hljs-comment">// exp()        </span>
        result = vec2(<span class="hljs-built_in">sin</span>(<span class="hljs-number">6.2831</span> * <span class="hljs-number">262.0</span> * time) * <span class="hljs-built_in">exp</span>(<span class="hljs-number">-2.0</span> * (time - <span class="hljs-number">1.0</span>)));<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> result;<font></font>
}</code></pre><br>
<p>   Shadertoy   ,    !</p><br>
<div class="oembed"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.shadertoy.com/view/tsByWV</a></div><br>
<p>  ,     — :</p><br>
<ul>
<li>    ,     .<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Note</span> {</span>
<span class="hljs-comment">//  </span>
<span class="hljs-keyword">float</span> frequency;
<span class="hljs-comment">//  -     </span>
<span class="hljs-keyword">float</span> offset;
<span class="hljs-comment">//   (1, 2, 0.25, 1/16…)</span>
<span class="hljs-keyword">float</span> duration;<font></font>
};</code></pre></li>
<li>   (   <code>return</code>)  :<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">noteFreq</span><span class="hljs-params">(Note note, <span class="hljs-keyword">float</span> time)</span> </span>{
<span class="hljs-comment">// 6.2831 = 2pi</span>
<span class="hljs-comment">// exp()  ,   </span>
<span class="hljs-comment">//       </span>
<span class="hljs-keyword">return</span> <span class="hljs-built_in">cos</span>(<span class="hljs-number">6.2831</span> * note.frequency * time) * <span class="hljs-built_in">exp</span>(<span class="hljs-number">-1.0</span>/note.duration * (time - note.offset));<font></font>
}</code></pre></li>
<li><p>  ,   “ ”,      (  ;   12    ).</p><br>
<pre><code class="cpp hljs"><span class="hljs-comment">// Maps frequency to the nearest note from [scale]</span>
<span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">nearestNote</span><span class="hljs-params">(<span class="hljs-keyword">float</span> value)</span> </span>{
<span class="hljs-comment">//     ,    </span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; scale.length(); i++) {
    <span class="hljs-keyword">if</span> (scale[i] &gt; value) {
        <span class="hljs-keyword">return</span> scale[i - <span class="hljs-number">1</span>];<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//    </span>
<span class="hljs-keyword">return</span> scale[<span class="hljs-number">0</span>];<font></font>
}</code></pre><br>
</li>
</ul><br>
<p>     <code>vec2 mainSound(float time) {...}</code> .</p><br>
<p>. ,  ,    boilerplate   .</p><br>
<h4 id="kosmicheskie-luchi"> </h4><br>
<p>       .       -,   ,   .</p><br>
<p> ,     ,        (       ). ,      “” ,     : 2:1 (4:1)       3:1   .     ,         ,  .  :</p><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> leadTempoRatio = <span class="hljs-number">2.0</span>; <span class="hljs-comment">// 2 ticks per second</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> midTempoRatio = <span class="hljs-number">2.0</span>/<span class="hljs-number">3.0</span>; <span class="hljs-comment">// 1.5 ticks/second</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> bassTempoRatio = <span class="hljs-number">1.0</span>; <span class="hljs-comment">// 1 tick per second</span><font></font>
<font></font>
<span class="hljs-comment">// 200 items, see above</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>[] dataLead = <span class="hljs-keyword">float</span>[] (<span class="hljs-number">5504.0</span>, <span class="hljs-number">5308.0</span>, <span class="hljs-number">5309.0</span>, <span class="hljs-number">5289.0</span>, <span class="hljs-number">5225.0</span>, <span class="hljs-number">5208.0</span>, <span class="hljs-number">5190.0</span>, <span class="hljs-number">5250.0</span>, <span class="hljs-number">5362.0</span>, <span class="hljs-number">5486.0</span>, <span class="hljs-number">5314.0</span>, <span class="hljs-number">5467.0</span>, <span class="hljs-number">5292.0</span>, <span class="hljs-number">5305.0</span>, <span class="hljs-number">5167.0</span>, <span class="hljs-number">5423.0</span>, <span class="hljs-number">5402.0</span>, <span class="hljs-number">5280.0</span>, <span class="hljs-number">5420.0</span>, <span class="hljs-number">5428.0</span>, <span class="hljs-number">5260.0</span>, <span class="hljs-number">5306.0</span>, <span class="hljs-number">5379.0</span>, <span class="hljs-number">5283.0</span>, <span class="hljs-number">5234.0</span>, <span class="hljs-number">5340.0</span>, <span class="hljs-number">5252.0</span>, <span class="hljs-number">5568.0</span>, <span class="hljs-number">5476.0</span>, <span class="hljs-number">5248.0</span>, <span class="hljs-number">5494.0</span>, <span class="hljs-number">5480.0</span>, <span class="hljs-number">5230.0</span>, <span class="hljs-number">5609.0</span>, <span class="hljs-number">5323.0</span>, <span class="hljs-number">5392.0</span>, <span class="hljs-number">5304.0</span>, <span class="hljs-number">5478.0</span>, <span class="hljs-number">5321.0</span>, <span class="hljs-number">5435.0</span>, <span class="hljs-number">5179.0</span>, <span class="hljs-number">5444.0</span>, <span class="hljs-number">5289.0</span>, <span class="hljs-number">5413.0</span>, <span class="hljs-number">5275.0</span>, <span class="hljs-number">5389.0</span>, <span class="hljs-number">5500.0</span>, <span class="hljs-number">5221.0</span>, <span class="hljs-number">5276.0</span>, <span class="hljs-number">5356.0</span>, <span class="hljs-number">5250.0</span>, <span class="hljs-number">5414.0</span>, <span class="hljs-number">5269.0</span>, <span class="hljs-number">5269.0</span>, <span class="hljs-number">5216.0</span>, <span class="hljs-number">5512.0</span>, <span class="hljs-number">5410.0</span>, <span class="hljs-number">5300.0</span>, <span class="hljs-number">5426.0</span>, <span class="hljs-number">5433.0</span>, <span class="hljs-number">5156.0</span>, <span class="hljs-number">5482.0</span>, <span class="hljs-number">5281.0</span>, <span class="hljs-number">5377.0</span>, <span class="hljs-number">5279.0</span>, <span class="hljs-number">5317.0</span>, <span class="hljs-number">5111.0</span>, <span class="hljs-number">5455.0</span>, <span class="hljs-number">5435.0</span>, <span class="hljs-number">5239.0</span>, <span class="hljs-number">5353.0</span>, <span class="hljs-number">5342.0</span>, <span class="hljs-number">5519.0</span>, <span class="hljs-number">5242.0</span>, <span class="hljs-number">5281.0</span>, <span class="hljs-number">5226.0</span>, <span class="hljs-number">5374.0</span>, <span class="hljs-number">5190.0</span>, <span class="hljs-number">5232.0</span>, <span class="hljs-number">5292.0</span>, <span class="hljs-number">5466.0</span>, <span class="hljs-number">5298.0</span>, <span class="hljs-number">5265.0</span>, <span class="hljs-number">5521.0</span>, <span class="hljs-number">5435.0</span>, <span class="hljs-number">5252.0</span>, <span class="hljs-number">5245.0</span>, <span class="hljs-number">5506.0</span>, <span class="hljs-number">5491.0</span>, <span class="hljs-number">5343.0</span>, <span class="hljs-number">5390.0</span>, <span class="hljs-number">5287.0</span>, <span class="hljs-number">5349.0</span>, <span class="hljs-number">5332.0</span>, <span class="hljs-number">5515.0</span>, <span class="hljs-number">5358.0</span>, <span class="hljs-number">5369.0</span>, <span class="hljs-number">5396.0</span>, <span class="hljs-number">5187.0</span>, <span class="hljs-number">5308.0</span>, <span class="hljs-number">5322.0</span>, <span class="hljs-number">5207.0</span>, <span class="hljs-number">5355.0</span>, <span class="hljs-number">5388.0</span>, <span class="hljs-number">5265.0</span>, <span class="hljs-number">5217.0</span>, <span class="hljs-number">5254.0</span>, <span class="hljs-number">5494.0</span>, <span class="hljs-number">5306.0</span>, <span class="hljs-number">5380.0</span>, <span class="hljs-number">5352.0</span>, <span class="hljs-number">5297.0</span>, <span class="hljs-number">5395.0</span>, <span class="hljs-number">5387.0</span>, <span class="hljs-number">5410.0</span>, <span class="hljs-number">5448.0</span>, <span class="hljs-number">5301.0</span>, <span class="hljs-number">5182.0</span>, <span class="hljs-number">5465.0</span>, <span class="hljs-number">5327.0</span>, <span class="hljs-number">5617.0</span>, <span class="hljs-number">5362.0</span>, <span class="hljs-number">5417.0</span>, <span class="hljs-number">5470.0</span>, <span class="hljs-number">5549.0</span>, <span class="hljs-number">5283.0</span>, <span class="hljs-number">5425.0</span>, <span class="hljs-number">5419.0</span>, <span class="hljs-number">5307.0</span>, <span class="hljs-number">5405.0</span>, <span class="hljs-number">5286.0</span>, <span class="hljs-number">5228.0</span>, <span class="hljs-number">5400.0</span>, <span class="hljs-number">5426.0</span>, <span class="hljs-number">5378.0</span>, <span class="hljs-number">5396.0</span>, <span class="hljs-number">5514.0</span>, <span class="hljs-number">5393.0</span>, <span class="hljs-number">5314.0</span>, <span class="hljs-number">5318.0</span>, <span class="hljs-number">5431.0</span>, <span class="hljs-number">5236.0</span>, <span class="hljs-number">5257.0</span>, <span class="hljs-number">5239.0</span>, <span class="hljs-number">5447.0</span>, <span class="hljs-number">5439.0</span>, <span class="hljs-number">5399.0</span>, <span class="hljs-number">5484.0</span>, <span class="hljs-number">5455.0</span>, <span class="hljs-number">5226.0</span>, <span class="hljs-number">5586.0</span>, <span class="hljs-number">5491.0</span>, <span class="hljs-number">5338.0</span>, <span class="hljs-number">5390.0</span>, <span class="hljs-number">5275.0</span>, <span class="hljs-number">5278.0</span>, <span class="hljs-number">5474.0</span>, <span class="hljs-number">5332.0</span>, <span class="hljs-number">5320.0</span>, <span class="hljs-number">5355.0</span>, <span class="hljs-number">5387.0</span>, <span class="hljs-number">5435.0</span>, <span class="hljs-number">5406.0</span>, <span class="hljs-number">5196.0</span>, <span class="hljs-number">5363.0</span>, <span class="hljs-number">5500.0</span>, <span class="hljs-number">5466.0</span>, <span class="hljs-number">5443.0</span>, <span class="hljs-number">5248.0</span>, <span class="hljs-number">5510.0</span>, <span class="hljs-number">5342.0</span>, <span class="hljs-number">5270.0</span>, <span class="hljs-number">5123.0</span>, <span class="hljs-number">5485.0</span>, <span class="hljs-number">5318.0</span>, <span class="hljs-number">5469.0</span>, <span class="hljs-number">5249.0</span>, <span class="hljs-number">5330.0</span>, <span class="hljs-number">5406.0</span>, <span class="hljs-number">5543.0</span>, <span class="hljs-number">5203.0</span>, <span class="hljs-number">5281.0</span>, <span class="hljs-number">5395.0</span>, <span class="hljs-number">5416.0</span>, <span class="hljs-number">5249.0</span>, <span class="hljs-number">5252.0</span>, <span class="hljs-number">5372.0</span>, <span class="hljs-number">5397.0</span>, <span class="hljs-number">5327.0</span>, <span class="hljs-number">5260.0</span>, <span class="hljs-number">5430.0</span>, <span class="hljs-number">5334.0</span>, <span class="hljs-number">5309.0</span>, <span class="hljs-number">5435.0</span>, <span class="hljs-number">5381.0</span>, <span class="hljs-number">5324.0</span>, <span class="hljs-number">5399.0</span>, <span class="hljs-number">5504.0</span>, <span class="hljs-number">5320.0</span>, <span class="hljs-number">5458.0</span>);<font></font>
<font></font>
<span class="hljs-comment">// 150 items</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>[] dataMid = <span class="hljs-keyword">float</span>[] (<span class="hljs-number">3813.0</span>, <span class="hljs-number">3653.0</span>, <span class="hljs-number">3763.0</span>, <span class="hljs-number">3790.0</span>, <span class="hljs-number">3801.0</span>, <span class="hljs-number">3833.0</span>, <span class="hljs-number">3674.0</span>, <span class="hljs-number">3822.0</span>, <span class="hljs-number">3639.0</span>, <span class="hljs-number">3848.0</span>, <span class="hljs-number">3866.0</span>, <span class="hljs-number">3794.0</span>, <span class="hljs-number">3747.0</span>, <span class="hljs-number">3938.0</span>, <span class="hljs-number">3823.0</span>, <span class="hljs-number">3989.0</span>, <span class="hljs-number">3963.0</span>, <span class="hljs-number">3852.0</span>, <span class="hljs-number">3836.0</span>, <span class="hljs-number">3694.0</span>, <span class="hljs-number">3883.0</span>, <span class="hljs-number">3748.0</span>, <span class="hljs-number">3802.0</span>, <span class="hljs-number">3884.0</span>, <span class="hljs-number">3790.0</span>, <span class="hljs-number">3684.0</span>, <span class="hljs-number">3895.0</span>, <span class="hljs-number">3872.0</span>, <span class="hljs-number">3885.0</span>, <span class="hljs-number">4011.0</span>, <span class="hljs-number">3844.0</span>, <span class="hljs-number">3901.0</span>, <span class="hljs-number">3713.0</span>, <span class="hljs-number">3870.0</span>, <span class="hljs-number">3868.0</span>, <span class="hljs-number">3772.0</span>, <span class="hljs-number">3866.0</span>, <span class="hljs-number">3939.0</span>, <span class="hljs-number">3856.0</span>, <span class="hljs-number">3720.0</span>, <span class="hljs-number">3640.0</span>, <span class="hljs-number">3929.0</span>, <span class="hljs-number">3905.0</span>, <span class="hljs-number">3811.0</span>, <span class="hljs-number">3811.0</span>, <span class="hljs-number">3899.0</span>, <span class="hljs-number">3699.0</span>, <span class="hljs-number">3868.0</span>, <span class="hljs-number">3892.0</span>, <span class="hljs-number">3746.0</span>, <span class="hljs-number">3878.0</span>, <span class="hljs-number">3778.0</span>, <span class="hljs-number">3894.0</span>, <span class="hljs-number">3740.0</span>, <span class="hljs-number">3709.0</span>, <span class="hljs-number">3710.0</span>, <span class="hljs-number">3812.0</span>, <span class="hljs-number">3856.0</span>, <span class="hljs-number">3811.0</span>, <span class="hljs-number">3935.0</span>, <span class="hljs-number">3850.0</span>, <span class="hljs-number">3859.0</span>, <span class="hljs-number">3800.0</span>, <span class="hljs-number">3748.0</span>, <span class="hljs-number">3725.0</span>, <span class="hljs-number">3814.0</span>, <span class="hljs-number">3897.0</span>, <span class="hljs-number">3745.0</span>, <span class="hljs-number">3763.0</span>, <span class="hljs-number">3833.0</span>, <span class="hljs-number">3964.0</span>, <span class="hljs-number">3770.0</span>, <span class="hljs-number">3846.0</span>, <span class="hljs-number">3776.0</span>, <span class="hljs-number">3945.0</span>, <span class="hljs-number">3791.0</span>, <span class="hljs-number">3799.0</span>, <span class="hljs-number">3709.0</span>, <span class="hljs-number">3922.0</span>, <span class="hljs-number">3825.0</span>, <span class="hljs-number">3804.0</span>, <span class="hljs-number">3869.0</span>, <span class="hljs-number">3829.0</span>, <span class="hljs-number">3770.0</span>, <span class="hljs-number">3838.0</span>, <span class="hljs-number">3820.0</span>, <span class="hljs-number">3734.0</span>, <span class="hljs-number">3979.0</span>, <span class="hljs-number">3765.0</span>, <span class="hljs-number">3764.0</span>, <span class="hljs-number">3857.0</span>, <span class="hljs-number">3861.0</span>, <span class="hljs-number">3869.0</span>, <span class="hljs-number">3787.0</span>, <span class="hljs-number">3963.0</span>, <span class="hljs-number">3780.0</span>, <span class="hljs-number">3847.0</span>, <span class="hljs-number">3759.0</span>, <span class="hljs-number">3857.0</span>, <span class="hljs-number">3782.0</span>, <span class="hljs-number">3711.0</span>, <span class="hljs-number">3843.0</span>, <span class="hljs-number">3909.0</span>, <span class="hljs-number">3839.0</span>, <span class="hljs-number">3811.0</span>, <span class="hljs-number">3874.0</span>, <span class="hljs-number">3849.0</span>, <span class="hljs-number">3883.0</span>, <span class="hljs-number">3925.0</span>, <span class="hljs-number">3752.0</span>, <span class="hljs-number">3847.0</span>, <span class="hljs-number">3731.0</span>, <span class="hljs-number">3824.0</span>, <span class="hljs-number">3905.0</span>, <span class="hljs-number">3901.0</span>, <span class="hljs-number">3926.0</span>, <span class="hljs-number">3897.0</span>, <span class="hljs-number">3751.0</span>, <span class="hljs-number">3896.0</span>, <span class="hljs-number">3752.0</span>, <span class="hljs-number">3854.0</span>, <span class="hljs-number">3936.0</span>, <span class="hljs-number">3767.0</span>, <span class="hljs-number">3812.0</span>, <span class="hljs-number">3933.0</span>, <span class="hljs-number">3889.0</span>, <span class="hljs-number">3808.0</span>, <span class="hljs-number">3703.0</span>, <span class="hljs-number">3948.0</span>, <span class="hljs-number">3883.0</span>, <span class="hljs-number">3872.0</span>, <span class="hljs-number">3762.0</span>, <span class="hljs-number">3870.0</span>, <span class="hljs-number">3899.0</span>, <span class="hljs-number">3818.0</span>, <span class="hljs-number">3900.0</span>, <span class="hljs-number">3774.0</span>, <span class="hljs-number">3951.0</span>, <span class="hljs-number">3818.0</span>, <span class="hljs-number">3893.0</span>, <span class="hljs-number">3821.0</span>, <span class="hljs-number">3823.0</span>, <span class="hljs-number">3801.0</span>, <span class="hljs-number">3833.0</span>, <span class="hljs-number">3744.0</span>, <span class="hljs-number">3769.0</span>, <span class="hljs-number">3864.0</span>, <span class="hljs-number">3923.0</span>, <span class="hljs-number">3974.0</span>, <span class="hljs-number">3810.0</span>);<font></font>
<font></font>
<span class="hljs-comment">// 100 items</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>[] dataBass = <span class="hljs-keyword">float</span>[] (<span class="hljs-number">20.0</span>, <span class="hljs-number">14.0</span>, <span class="hljs-number">13.0</span>, <span class="hljs-number">14.0</span>, <span class="hljs-number">10.0</span>, <span class="hljs-number">23.0</span>, <span class="hljs-number">16.0</span>, <span class="hljs-number">18.0</span>, <span class="hljs-number">6.0</span>, <span class="hljs-number">16.0</span>, <span class="hljs-number">18.0</span>, <span class="hljs-number">7.0</span>, <span class="hljs-number">15.0</span>, <span class="hljs-number">13.0</span>, <span class="hljs-number">14.0</span>, <span class="hljs-number">22.0</span>, <span class="hljs-number">12.0</span>, <span class="hljs-number">14.0</span>, <span class="hljs-number">12.0</span>, <span class="hljs-number">14.0</span>, <span class="hljs-number">19.0</span>, <span class="hljs-number">18.0</span>, <span class="hljs-number">8.0</span>, <span class="hljs-number">16.0</span>, <span class="hljs-number">13.0</span>, <span class="hljs-number">12.0</span>, <span class="hljs-number">21.0</span>, <span class="hljs-number">17.0</span>, <span class="hljs-number">22.0</span>, <span class="hljs-number">19.0</span>, <span class="hljs-number">11.0</span>, <span class="hljs-number">16.0</span>, <span class="hljs-number">16.0</span>, <span class="hljs-number">24.0</span>, <span class="hljs-number">16.0</span>, <span class="hljs-number">20.0</span>, <span class="hljs-number">18.0</span>, <span class="hljs-number">20.0</span>, <span class="hljs-number">17.0</span>, <span class="hljs-number">22.0</span>, <span class="hljs-number">23.0</span>, <span class="hljs-number">14.0</span>, <span class="hljs-number">17.0</span>, <span class="hljs-number">16.0</span>, <span class="hljs-number">23.0</span>, <span class="hljs-number">14.0</span>, <span class="hljs-number">15.0</span>, <span class="hljs-number">10.0</span>, <span class="hljs-number">12.0</span>, <span class="hljs-number">14.0</span>, <span class="hljs-number">20.0</span>, <span class="hljs-number">22.0</span>, <span class="hljs-number">14.0</span>, <span class="hljs-number">14.0</span>, <span class="hljs-number">20.0</span>, <span class="hljs-number">24.0</span>, <span class="hljs-number">14.0</span>, <span class="hljs-number">23.0</span>, <span class="hljs-number">20.0</span>, <span class="hljs-number">25.0</span>, <span class="hljs-number">14.0</span>, <span class="hljs-number">17.0</span>, <span class="hljs-number">21.0</span>, <span class="hljs-number">21.0</span>, <span class="hljs-number">18.0</span>, <span class="hljs-number">18.0</span>, <span class="hljs-number">13.0</span>, <span class="hljs-number">11.0</span>, <span class="hljs-number">21.0</span>, <span class="hljs-number">22.0</span>, <span class="hljs-number">16.0</span>, <span class="hljs-number">13.0</span>, <span class="hljs-number">24.0</span>, <span class="hljs-number">26.0</span>, <span class="hljs-number">29.0</span>, <span class="hljs-number">27.0</span>, <span class="hljs-number">18.0</span>, <span class="hljs-number">23.0</span>, <span class="hljs-number">15.0</span>, <span class="hljs-number">18.0</span>, <span class="hljs-number">8.0</span>, <span class="hljs-number">17.0</span>, <span class="hljs-number">24.0</span>, <span class="hljs-number">14.0</span>, <span class="hljs-number">12.0</span>, <span class="hljs-number">18.0</span>, <span class="hljs-number">16.0</span>, <span class="hljs-number">15.0</span>, <span class="hljs-number">25.0</span>, <span class="hljs-number">12.0</span>, <span class="hljs-number">19.0</span>, <span class="hljs-number">11.0</span>, <span class="hljs-number">18.0</span>, <span class="hljs-number">25.0</span>, <span class="hljs-number">21.0</span>, <span class="hljs-number">16.0</span>, <span class="hljs-number">19.0</span>, <span class="hljs-number">24.0</span>, <span class="hljs-number">19.0</span>, <span class="hljs-number">14.0</span>);</code></pre><br>
<p>   .    —         (    ,     ).        (  ):</p><br>
<pre><code class="cpp hljs"><span class="hljs-comment">//      “”  </span>
<span class="hljs-comment">//   ,   nearestNote()</span>
<span class="hljs-comment">//     “” </span>
<span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">fixLead</span><span class="hljs-params">(<span class="hljs-keyword">float</span> value)</span> </span>{
    <span class="hljs-keyword">return</span> nearestNote(value / <span class="hljs-number">8.0</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//      “”  </span>
<span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">fixMid</span><span class="hljs-params">(<span class="hljs-keyword">float</span> value)</span> </span>{
    <span class="hljs-keyword">return</span> nearestNote(value / <span class="hljs-number">10.0</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//      “”  </span>
<span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">fixBass</span><span class="hljs-params">(<span class="hljs-keyword">float</span> value)</span> </span>{
    <span class="hljs-keyword">return</span> nearestNote(value * <span class="hljs-number">7.0</span>);<font></font>
}</code></pre><br>
<p>   —     —   ,   .<br>
     —    (      ),     —    .</p><br>
<p>      . , . ,  copy-paste,       :)</p><br>
<pre><code class="cpp hljs"><span class="hljs-comment">//"" .  - C Major   C0  B8</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>[] scale = <span class="hljs-keyword">float</span>[] (<span class="hljs-number">16.35</span>, <span class="hljs-number">18.35</span>, <span class="hljs-number">20.60</span>, <span class="hljs-number">21.83</span>, <span class="hljs-number">24.50</span>, <span class="hljs-number">27.50</span>, <span class="hljs-number">30.87</span>, <span class="hljs-number">32.70</span>, <span class="hljs-number">36.71</span>, <span class="hljs-number">41.20</span>, <span class="hljs-number">43.65</span>, <span class="hljs-number">49.00</span>, <span class="hljs-number">55.00</span>, <span class="hljs-number">61.74</span>, <span class="hljs-number">65.41</span>, <span class="hljs-number">73.42</span>, <span class="hljs-number">82.41</span>, <span class="hljs-number">87.31</span>, <span class="hljs-number">98.00</span>, <span class="hljs-number">110.00</span>, <span class="hljs-number">123.47</span>, <span class="hljs-number">130.81</span>, <span class="hljs-number">146.83</span>, <span class="hljs-number">164.81</span>, <span class="hljs-number">174.61</span>, <span class="hljs-number">196.00</span>, <span class="hljs-number">220.00</span>, <span class="hljs-number">246.94</span>, <span class="hljs-number">261.63</span>, <span class="hljs-number">293.66</span>, <span class="hljs-number">329.63</span>, <span class="hljs-number">349.23</span>, <span class="hljs-number">392.00</span>, <span class="hljs-number">440.00</span>, <span class="hljs-number">493.88</span>, <span class="hljs-number">523.25</span>, <span class="hljs-number">587.33</span>, <span class="hljs-number">659.25</span>, <span class="hljs-number">698.46</span>, <span class="hljs-number">783.99</span>, <span class="hljs-number">880.00</span>, <span class="hljs-number">987.77</span>, <span class="hljs-number">1046.50</span>, <span class="hljs-number">1174.66</span>, <span class="hljs-number">1318.51</span>, <span class="hljs-number">1396.91</span>, <span class="hljs-number">1567.98</span>, <span class="hljs-number">1760.00</span>, <span class="hljs-number">1975.53</span>, <span class="hljs-number">2093.00</span>, <span class="hljs-number">2349.32</span>, <span class="hljs-number">2637.02</span>, <span class="hljs-number">2793.83</span>, <span class="hljs-number">3135.96</span>, <span class="hljs-number">3520.00</span>, <span class="hljs-number">3951.07</span>, <span class="hljs-number">4186.01</span>, <span class="hljs-number">4698.63</span>, <span class="hljs-number">5274.04</span>, <span class="hljs-number">5587.65</span>, <span class="hljs-number">6271.93</span>, <span class="hljs-number">7040.00</span>, <span class="hljs-number">7902.13</span>);</code></pre><br>
<p>      C0  B8,  ,       8   7 .          (  , ).</p><br>
<p>     “”           <code>fix*()</code> .</p><br>
<p>:  ,       ,         .</p><br>
<p> ,  <code>mainSound(float time) {...}</code>          ,              <code>noteFreq()</code>.</p><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">float</span> result = <span class="hljs-number">0.0</span>;<font></font>
<font></font>
<span class="hljs-comment">//  </span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; dataLead.length(); i++) {
    <span class="hljs-comment">//  ;  - 2.0x,   -  (1/4),   2 </span>
    Note noteLead = Note(fixLead(dataLead[i]), <span class="hljs-keyword">float</span>(i) + <span class="hljs-number">2.0</span>, <span class="hljs-number">1.0</span>/<span class="hljs-number">4.0</span>);<font></font>
<font></font>
    <span class="hljs-comment">// result = </span>
    <span class="hljs-comment">// +=          </span>
    <span class="hljs-keyword">if</span> (time &gt; noteLead.offset) {
        <span class="hljs-keyword">float</span> amplitude = noteFreq(noteLead, time);<font></font>
        result += amplitude;<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//  vec2()     </span>
<span class="hljs-keyword">return</span> vec2(result);</code></pre><br>
<p>      .      .  .</p><br>
<h4 id="bonus"></h4><br>
<p> Shadertoy   —    ,      -  .      .         .    .</p><br>
<p>          <code>Sound</code>.        .    .      <code>DRY</code>,         ,   .  ,      .</p><br>
<p> ,      <code>Sound</code>   <code>Common</code>,    :</p><br>
<pre><code class="cpp hljs"><span class="hljs-comment">//     </span>
<span class="hljs-comment">//      </span>
<span class="hljs-comment">//     </span>
<span class="hljs-function">vec2 <span class="hljs-title">mainSound</span><span class="hljs-params">(<span class="hljs-keyword">float</span> time)</span> </span>{
    <span class="hljs-comment">//    </span>
    <span class="hljs-keyword">return</span> _mainSound(time);<font></font>
}</code></pre><br>
<p>       ( <code>Buf A</code>):</p><br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">mainImage</span><span class="hljs-params">( out vec4 fragColor, in vec2 fragCoord )</span> </span>{
    <span class="hljs-comment">//    </span><font></font>
    _mainSound(iTime);<font></font>
<font></font>
    <span class="hljs-comment">//     </span><font></font>
    fragColor = vec4(FRAG_COLOR);<font></font>
}</code></pre><br>
<p>          —    ,      .</p><br>
<p>          (<code>iTime</code>  <code>time</code>).      “ ”.     ,       “”     (  — ;   — ;   — ):</p><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">float</span> result = <span class="hljs-number">0.0</span>;<font></font>
vec4 frag_color = vec4(<span class="hljs-number">0.0</span>);<font></font>
frag_color.a = <span class="hljs-number">1.0</span>;<font></font>
<font></font>
<span class="hljs-comment">// High voice</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; dataLead.length(); i++) {
    <span class="hljs-comment">//  ;  - 2.0x,   -  (1/4),   2 </span>
    Note noteLead = Note(fixLead(dataLead[i]), <span class="hljs-keyword">float</span>(i) + <span class="hljs-number">2.0</span>, <span class="hljs-number">1.0</span>/<span class="hljs-number">4.0</span>);<font></font>
<font></font>
    <span class="hljs-comment">// result = </span>
    <span class="hljs-comment">// frag_color =  </span>
    <span class="hljs-comment">// +=          </span>
    <span class="hljs-keyword">if</span> (time &gt; noteLead.offset) {
        <span class="hljs-keyword">float</span> amplitude = noteFreq(noteLead, time);<font></font>
        result += amplitude;<font></font>
        frag_color.b += amplitude;<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-comment">//     Buf A</span><font></font>
FRAG_COLOR = frag_color;<font></font>
<font></font>
<span class="hljs-comment">//  vec2()     </span>
<span class="hljs-keyword">return</span> vec2(result);</code></pre><br>
<p>    ,     .  ,     ,    ,    .</p><br>
<h4 id="uborka"></h4><br>
<p>,  ,    ,   -    ,       .</p><br>
<p>**         Shadertoy  .         ,     .</p><br>
<p>          (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"></a>)     .  !</p><br>
<p>      (   ):</p><br>
<div class="oembed"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.shadertoy.com/view/wsjyWK</a></div><br>
<p>           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"></a>. </p><br>
<p>   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">wav-</a>.<br>
** ...</p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vielen Dank für Ihr Interesse! </font><font style="vertical-align: inherit;">Ich kann nicht garantieren, dass der Text klar geschrieben ist, aber ich kann versprechen, alle unverständlichen Momente (die ich selbst verstehe) in den Kommentaren zu kauen.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jeder ️</font></font></p><br>
<p><strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD:</font></font></em></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In Shadertoy Sound kann eine Registerkarte direkt</font></font><code>mainSound()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von einer</font></font><code>Common</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registerkarte</font><font style="vertical-align: inherit;">aus</font><font style="vertical-align: inherit;">aufgerufen werden</font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Daher</font></font><code>Sound</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kann es leer sein, aber</font></font><code>Common</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umbenannt</font></font><code>_mainSound()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in</font></font><code>mainSound()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir brauchen es auch nicht </font></font><code>bufA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, da es eine zusätzliche Ebene ist und wir es </font></font><code>mainSound()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direkt von der </font></font><code>Image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registerkarte </font><font style="vertical-align: inherit;">aus </font><font style="vertical-align: inherit;">aufrufen können. </font><font style="vertical-align: inherit;">Darin können </font><font style="vertical-align: inherit;">wir </font><font style="vertical-align: inherit;">bereits mit dem empfangenen Pixel arbeiten, ohne die Mediator-Textur zu rendern. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles ist auf dem gleichen Link.</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de498202/index.html">Landing Digest. Spezialist für Informationssicherheit</a></li>
<li><a href="../de498206/index.html">Erstellen Sie ein Graphql-Backend auf Golang</a></li>
<li><a href="../de498208/index.html">Sicherheitswoche 17: Auswirkungen des Linux Server-Angriffs</a></li>
<li><a href="../de498214/index.html">Maria Popova: „Einige haben OpenStreetMap zum ersten Mal kennengelernt, weil sie Hogweed auf der Karte markiert haben.“</a></li>
<li><a href="../de498216/index.html">Färben von Texten in HTML und Reagieren</a></li>
<li><a href="../de498220/index.html">Как коронавирус (COVID-XX) может помочь 1С захватить мир?</a></li>
<li><a href="../de498222/index.html">ZX Spectrum von Coronavirus und Sticks (eigentlich nicht wirklich)</a></li>
<li><a href="../de498224/index.html">Erstellen Sie eine interaktive Ausstellung mit .NET, Azure-Funktionen und der Magie kognitiver Dienste</a></li>
<li><a href="../de498226/index.html">Zersetzung. So zerlegen Sie ein großes Projekt für eine vorläufige Bewertung in verständliche Segmente</a></li>
<li><a href="../de498234/index.html">Echte Management-Mythen über DevOps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>