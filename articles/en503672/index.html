<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛬 👩🏼‍🤝‍👨🏻 🙏🏽 Which side are you on: Push and Pull in Desired State Configuration 🥒 🤶🏿 💾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We already described how to describe the configuration in Desired State Configuration (DSC) and disassembled the built-in Local Configuration Manager ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Which side are you on: Push and Pull in Desired State Configuration</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/raiffeisenbank/blog/503672/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We already described how to describe the configuration in Desired State Configuration (DSC) and disassembled the built-in Local Configuration Manager (LCM) agent to apply the configuration on the server. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the first part of the article, we</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> walked step by step on the main features of the tool along with </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Evgeny Parfenov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> from </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DataLine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here we dive into the settings and features in the Push and Pull modes.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/ri/1q/uv/ri1quvznkudmbtrsw1djyw1tjpc.jpeg"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What we will tell:</font></font></h4> <br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Differences between Push and Pull modes</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Push mode in detail</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pull mode in detail</font></font></a></li>
</ol> <a name="habracut"></a><br>
<a name="1"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Differences between Push and Pull modes</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Push mode, we manually or by script start the process of applying changes to the server (locally or remotely). </font><font style="vertical-align: inherit;">Local Configuration Manager (LCM) applies the configuration interactively. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Pull mode, the scheduled LCM agent on the server compares its configuration with the configuration published in the shared configuration repository. </font><font style="vertical-align: inherit;">If there are changes, the configuration is copied locally and applied. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The pros and cons of both modes of operation are quite obvious.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Push</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pull</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></th>
<td><ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cost. </font><font style="vertical-align: inherit;">It does not require the installation of additional servers.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simple architecture. </font><font style="vertical-align: inherit;">All configurations are stored locally in the form that is convenient for the administrator.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suitable for testing. </font><font style="vertical-align: inherit;">Dsc</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DevOps Way. </font><font style="vertical-align: inherit;">When deploying servers, it is very easy to automate and fits into the philosophy of Infrastructure as a Code.</font></font></li>
<li>  run-once     .</li>
</ol></td>
<td><ol>
<li>  .      .</li>
<li>    .      DSC   .</li>
<li>     Azure Automation State Configuration,        Windows Server 2012R2+</li>
</ol></td>
</tr>
<tr>
<th>–</th>
<td><ol>
<li> On-Premise   c   .         ,    .</li>
</ol></td>
<td><ol>
<li>   ,       .</li>
<li> On-Premise        GPO,          .</li>
<li>  —    ,           .</li>
</ol></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setting resources is also slightly different for different modes. </font><font style="vertical-align: inherit;">As we remember, to use a resource, you need to install it locally and on the server. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the case of using the Push mode, the administrator must first install all the necessary resources on the managed server and on the PC, from where the configuration will be submitted. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Pull mode, the DSC agent on the managed server can independently install all the necessary resources from the Pull server; the administrator's task is to place them on the Pull server. </font><font style="vertical-align: inherit;">However, we keep in mind that it is impossible to predict the application of the configuration in Pull mode, since the GPO is not a guaranteed delivery of settings.</font></font><br>
<br>
<a name="2"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Push mode in detail</font></font></h2><br><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/xb/4v/td/xb4vtdh2aro8hh5-en6fqymutkm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The top- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">level</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
process of writing and applying DSC configurations can be represented as follows: </font><font style="vertical-align: inherit;">At the first stage ( </font><b><font style="vertical-align: inherit;">Authoring</font></b><font style="vertical-align: inherit;"> ) we describe the configuration using any IDE that is convenient for us (Notepad, PowerShell ISE, Visual Studio Code and others). </font><font style="vertical-align: inherit;">Upon completion, we compile the mof configuration files (the compilation process is described </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in our previous article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the second stage ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Staging / Compilation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), we start applying the configuration from the compiled mof file using the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Start-DSCConfiguration cmdlet</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">In the process, the management server transmits the LCM server .mof file, which must apply the configuration. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this case, it is better to use the </font><b><font style="vertical-align: inherit;">-Verbose</font></b><font style="vertical-align: inherit;"> switch </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> For complete control of the configuration process:</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-built_in">PS</span> C:\windows\system32&gt; <span class="hljs-built_in">Start-DscConfiguration</span> <span class="hljs-literal">-Path</span> C:\EnvironmentVariable_Path\ <span class="hljs-literal">-Wait</span> <span class="hljs-literal">-Verbose</span><font></font>
<font></font>
<span class="hljs-comment"># C </span>
VERBOSE: Perform operation <span class="hljs-string">'Invoke CimMethod'</span> with following parameters, <span class="hljs-string">''</span>methodName<span class="hljs-string">' =
SendConfigurationApply,'</span>className<span class="hljs-string">' = MSFT_DSCLocalConfigurationManager,'</span>namespaceName<span class="hljs-string">' =
root/Microsoft/Windows/DesiredStateConfiguration'</span>.<font></font>
VERBOSE: An LCM method call arrived from computer COMPUTER with user sid<font></font>
S<span class="hljs-literal">-1</span><span class="hljs-literal">-5</span><span class="hljs-literal">-21</span><span class="hljs-literal">-SID</span>.<font></font>
<font></font>
<span class="hljs-comment">#  </span>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">Start</span>  <span class="hljs-type">Set</span>      ]<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">Start</span>  <span class="hljs-type">Resource</span> ]  [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>]<font></font>
<font></font>
<span class="hljs-comment">#       (test)</span>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">Start</span>  <span class="hljs-type">Test</span>     ]  [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>]<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]:                            [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>] Environment variable
<span class="hljs-string">'TestPathEnvironmentVariable'</span> does not exist.<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">End</span>    <span class="hljs-type">Test</span>     ]  [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>]  <span class="hljs-keyword">in</span> <span class="hljs-number">0.1320</span> seconds.
<span class="hljs-comment">#      “Environment variable 'TestPathEnvironmentVariable' does not exist”</span><font></font>
<font></font>
<span class="hljs-comment">#       </span>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">Start</span>  <span class="hljs-type">Set</span>      ]  [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>]<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]:                            [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>] Environment variable
<span class="hljs-string">'TestPathEnvironmentVariable'</span> created with value <span class="hljs-string">'TestValue'</span>.<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">End</span>    <span class="hljs-type">Set</span>      ]  [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>]  <span class="hljs-keyword">in</span> <span class="hljs-number">0.0690</span> seconds.<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">End</span>    <span class="hljs-type">Resource</span> ]  [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>]<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">End</span>    <span class="hljs-type">Set</span>      ]<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">End</span>    <span class="hljs-type">Set</span>      ]    <span class="hljs-keyword">in</span>  <span class="hljs-number">2.1900</span> seconds.
<span class="hljs-comment">#  </span><font></font>
<font></font>
<span class="hljs-comment">#  </span>
VERBOSE: Operation <span class="hljs-string">'Invoke CimMethod'</span> complete.<font></font>
VERBOSE: Time taken <span class="hljs-keyword">for</span> configuration job to complete is <span class="hljs-number">2.749</span> seconds
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It can be seen that the engine checked the presence of the variable, did not find it and created a new one, according to the specified configuration: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dk/by/o3/dkbyo3keloynhfzvrbc8cjkfp-c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the third stage ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Execution</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), the DSC agent LCM enters the game. </font><font style="vertical-align: inherit;">It receives a mof file, checks it, places it in a folder </font></font><code>$env:systemRoot/system32/configuration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and launches a workflow of applying the configuration file:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LCM receives, applies the configuration file. </font><font style="vertical-align: inherit;">The file is renamed to pending.mof and placed in</font></font><code>$env:systemRoot/system32/configuration</code><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the application of the configuration file fails, the pending.mof file remains, and LCM will try to apply it in the next cycle.</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the current.mof file is already in the folder, then it is renamed to previous.mof</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the application of the configuration file completes successfully, then LCM renames it to current.mof</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The current.mof file is copied to the backup.mof file</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Graphically, the workflow can be represented as follows: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lj/eh/p-/ljehp-7jyylqlyudn9b8vg1wcfi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To manage different configuration files, there is the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remove-DSCConfigurationDocument cmdlet,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> which allows you to delete specific documents if this is necessary for some reason. </font><font style="vertical-align: inherit;">However, nothing prevents us from removing them manually.</font></font><br>
 <br>
<a name="3"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pull mode in detail</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pull mode is more difficult to deploy and configure, but it greatly simplifies the process of managing servers that are connected to it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The general scheme will look something like this: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ca/sf/ak/casfakkvmnriykgrpve7tl-z-k0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pull mode requires the deployment of a Pull server. In fact, it is a regular web server, which can give clients mof files and resources that may be required when applying configurations from mof files. The latter greatly simplifies the process of managing and configuring servers, since the task of delivering the necessary resources lies with the client. The Pull server at the same time acts as a repository \ resource repository. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pull-server can provide access to resources and configuration files through two protocols:</font></font><br>
<br>
<ol>
<li><b>SMB.</b>        .     DFS-R.  ,      ,          .  SMB     ,                 Kerberos.</li>
<li><b>Http\https.</b>          .   IIS.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pull server installation can be done through the regular resources that the DSC development team offers. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">More details can be found here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Or use community-driven solutions: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The workflow for further work with the pull server is as follows:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We configure clients (LCM) to work with a pull-server.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We upload resource files to the pull server.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We prepare client configuration files (writing and compilation) and files with checksums.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enjoy the result.</font></font></li>
</ol><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuring clients (LCM) to work with a pull server</font></font></h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To do this, use the following </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LocalConfigurationManager (v5) settings</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><b><font style="vertical-align: inherit;">Settings</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
block </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font></b><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CertificateID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - indicates the fingerprint of the certificate to protect logins / passwords transmitted in the configuration.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigurationID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - contains the client GUID. </font><font style="vertical-align: inherit;">Only those configurations that contain its GUID in the configuration file name will be applied to the client. </font><font style="vertical-align: inherit;">The setting is left for compatibility with older versions of the pull server. </font><font style="vertical-align: inherit;">It is better to use the RegistrationKey setting.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RefreshMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - to work with Pull servers, specify Pull in this setting.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Block </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigurationRepositoryWeb:</font></font></b><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AllowUnsecureConnection</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - allow \ not allow connection without authentication.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CertificateID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - indicates the fingerprint of the certificate on the client, which will be used in the process of mutual authentication with the server.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigurationNames</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - an array of configuration names that will be applied to the client.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RegistrationKey</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - a secret generated on the server, which is used by the client to register on the server.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ServerURL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - URL of the Pull server with configurations.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">ResourceRepositoryWeb</font></b><font style="vertical-align: inherit;"> 
block </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font></b><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AllowUnsecureConnection</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - allow \ not allow connection without authentication.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CertificateID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - indicates the fingerprint of the certificate on the client, which will be used in the process of mutual authentication with the server.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RegistrationKey</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - a secret generated on the server, which is used by the client to register on the server.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ServerURL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - URL of the Pull server with resources.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">ReportServerWeb</font></b><font style="vertical-align: inherit;"> 
block </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font></b><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AllowUnsecureConnection</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - allow \ not allow connection without authentication.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CertificateID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - indicates the fingerprint of the certificate on the client, which will be used in the process of mutual authentication with the server.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RegistrationKey</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - a secret generated on the server, which is used by the client to register on the server.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ServerURL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - URL of the Pull server with reports.</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uploading resource files to the Pull server </font></font></h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After applying the new settings on LCM, which will teach him how to use the Pull server, you can </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">upload resource files to the server</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Resources are uploaded to the server in the form of zip files (the folder with the resource is packaged in zip). </font><font style="vertical-align: inherit;">Rule for naming such a file:</font></font><br>
<br>
<pre><code class="powershell hljs">{ModuleName}_{Version}.zip</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The default file location </font></font><code>$env:PROGRAMFILES\WindowsPowerShell\DscService\Modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">When installing the Pull server, this folder can be overridden. </font><font style="vertical-align: inherit;">In addition to the file with the resource folder packed in zip, you must also place the file with the checksum of this packed resource in the same place. </font><font style="vertical-align: inherit;">For example, like this:</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-built_in">New-DscChecksum</span> <span class="hljs-literal">-Path</span> .\xPSDesiredStateConfiguration_8.<span class="hljs-number">4.4</span>.<span class="hljs-number">0</span>.zip</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Placing client configuration files on the Pull server</font></font></h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is important to note here that we can use two client operation modes in this case (actually two and a half): the client from the server will receive the configuration using </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigurationID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , or the client will use the configuration name - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigurationName</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . If it is necessary to apply several configurations, then all of them can be specified in the ConfigurationName, but you will have to configure LCM to work with partial configurations.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When using ConfigurationID, it must be emphasized that the mof configuration file that will be applied to the client will contain a GUID (it is contained in the ConfigurationID). </font><font style="vertical-align: inherit;">In the case of using ConfigurationName, the mof-file will contain the configuration name, which we will specify in ConfigurationName. </font><font style="vertical-align: inherit;">In both cases, in addition to the mof file, the configuration checksum file will also be placed there:</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-built_in">New-DscChecksum</span> <span class="hljs-literal">-Path</span> <span class="hljs-string">'.\'</span> <span class="hljs-literal">-Force</span></code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In conclusion </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We looked at two ways to apply changes to the server in Push and Pull modes. </font><font style="vertical-align: inherit;">We went over the features of use and tried to explain all the nuances that may arise when working with these modes in DSC. </font><font style="vertical-align: inherit;">If you still have questions - let's discuss in the comments. </font><font style="vertical-align: inherit;">And if you didn’t have enough visibility, come to our online meeting on May 28: we’ll analyze the systems of unified communications and communication facilities (setting up uploading Exchange logs in Elastic, Microsoft Endpoint Manager for managing iOS, Android and Windows 10) and talk in more detail about the limits of applicability PowerShell Desired State Configuration. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You only need to register</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en503660/index.html">Test projects without pain. Yandex Report</a></li>
<li><a href="../en503662/index.html">NEW - VoIP Phone Snom D335</a></li>
<li><a href="../en503666/index.html">Startup and Business Course Translation from Stanford University. Lecture number 1. How to start a startup</a></li>
<li><a href="../en503668/index.html">Circle Squared: Visual Evidence</a></li>
<li><a href="../en503670/index.html">Does Mac OS slow down? - Catalina checks any unsigned code over the Internet at startup</a></li>
<li><a href="../en503676/index.html">Three geek projects for Geek Pride Day</a></li>
<li><a href="../en503678/index.html">Vuex breaks encapsulation</a></li>
<li><a href="../en503680/index.html">DBA: in pursuit of flying locks</a></li>
<li><a href="../en503682/index.html">Snom Exchange A to Z</a></li>
<li><a href="../en503688/index.html">Joel Spolsky: What Does It Mean to Be a Software Developer (Preface to Coder to Developer)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>