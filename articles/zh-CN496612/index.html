<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘² ğŸ›€ğŸ¿ ğŸ¤¹ æ˜¯çš„ï¼Œæˆ‘çš„æ—§ç¬”è®°æœ¬ç”µè„‘çš„åŠŸèƒ½æ˜¯ç”Ÿäº§æœåŠ¡å™¨çš„å‡ å€ ğŸ¦ ğŸ”· ğŸ </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="è¿™äº›æ˜¯æˆ‘ä»å¼€å‘äººå‘˜é‚£é‡Œå¬åˆ°çš„ä¸»å¼ ã€‚æœ€æœ‰è¶£çš„æ˜¯ï¼Œäº‹å®è¯æ˜è¿™æ˜¯äº‹å®ï¼Œè¿™å¯¼è‡´äº†å†—é•¿çš„è°ƒæŸ¥ã€‚è¿™å°†ä¸åœ¨æˆ‘ä»¬çš„VMwareä¸Šæ—‹è½¬çš„SQLæœåŠ¡å™¨æœ‰å…³ã€‚
 
 
 
 å®é™…ä¸Šï¼Œç¡®ä¿ç”Ÿäº§æœåŠ¡å™¨æ¯«æ— å¸Œæœ›åœ°è½åäºç¬”è®°æœ¬ç”µè„‘å¾ˆå®¹æ˜“ã€‚è¿è¡Œä»£ç ï¼ˆä¸æ˜¯åœ¨tempdbä¸Šï¼Œä¹Ÿä¸åœ¨å¯ç”¨äº†Delayed Durabilityçš„åŸºç¡€ä¸Šï¼‰è¿...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>æ˜¯çš„ï¼Œæˆ‘çš„æ—§ç¬”è®°æœ¬ç”µè„‘çš„åŠŸèƒ½æ˜¯ç”Ÿäº§æœåŠ¡å™¨çš„å‡ å€</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496612/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™äº›æ˜¯æˆ‘ä»å¼€å‘äººå‘˜é‚£é‡Œå¬åˆ°çš„ä¸»å¼ ã€‚</font><font style="vertical-align: inherit;">æœ€æœ‰è¶£çš„æ˜¯ï¼Œäº‹å®è¯æ˜è¿™æ˜¯äº‹å®ï¼Œè¿™å¯¼è‡´äº†å†—é•¿çš„è°ƒæŸ¥ã€‚</font><font style="vertical-align: inherit;">è¿™å°†ä¸åœ¨æˆ‘ä»¬çš„VMwareä¸Šæ—‹è½¬çš„SQLæœåŠ¡å™¨æœ‰å…³ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ja/cl/8y/jacl8ygi2_fl1yve83fuy1k6vyq.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®é™…ä¸Šï¼Œç¡®ä¿ç”Ÿäº§æœåŠ¡å™¨æ¯«æ— å¸Œæœ›åœ°è½åäºç¬”è®°æœ¬ç”µè„‘å¾ˆå®¹æ˜“ã€‚</font><font style="vertical-align: inherit;">è¿è¡Œä»£ç ï¼ˆä¸æ˜¯åœ¨tempdbä¸Šï¼Œä¹Ÿä¸åœ¨å¯ç”¨äº†Delayed Durabilityçš„åŸºç¡€ä¸Šï¼‰è¿è¡Œä»£ç ï¼š</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">set</span> nocount <span class="hljs-keyword">on</span>
<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> _t (v <span class="hljs-built_in">varchar</span>(<span class="hljs-number">100</span>))
<span class="hljs-keyword">declare</span> @n <span class="hljs-built_in">int</span>=<span class="hljs-number">300000</span>
<span class="hljs-keyword">while</span> @n&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">begin</span> 
  <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> _t <span class="hljs-keyword">select</span> <span class="hljs-string">'What a slowpoke!'</span>
  <span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> _t
  <span class="hljs-keyword">set</span> @n=@n<span class="hljs-number">-1</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> _t
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æˆ‘çš„æ¡Œé¢ä¸Šï¼Œå®ƒè¿è¡Œ5ç§’é’Ÿï¼Œåœ¨ç”Ÿäº§æœåŠ¡å™¨ä¸Š-28ç§’ã€‚</font><font style="vertical-align: inherit;">å› ä¸ºSQLå¿…é¡»ç­‰å¾…äº‹åŠ¡æ—¥å¿—æ¡ç›®çš„ç‰©ç†ç»“æŸï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬æ­£åœ¨åšéå¸¸çŸ­çš„äº‹åŠ¡ã€‚</font><font style="vertical-align: inherit;">ç²—ç•¥åœ°è®²ï¼Œæˆ‘ä»¬å°†ä¸€è¾†å¼ºå¤§çš„å¤§å¡è½¦é©¶å…¥åŸå¸‚äº¤é€šï¼Œæˆ‘ä»¬çœ‹åˆ°è¸æ¿è½¦ä¸Šçš„æŠ«è¨é€è´§å‘˜å¦‚ä½•è¶…è¶Šäº†å¡è½¦-ååé‡åœ¨è¿™é‡Œå¹¶ä¸é‡è¦ï¼Œåªæœ‰å»¶è¿Ÿå¾ˆé‡è¦ã€‚</font><font style="vertical-align: inherit;">è€Œä¸”ï¼Œæ— è®ºä»·æ ¼æ˜¯å¤šå°‘é›¶ï¼Œéƒ½æ²¡æœ‰ä¸€ä¸ªç½‘ç»œå­˜å‚¨èƒ½å¤Ÿèµ¢å¾—æœ¬åœ°SSDçš„å»¶è¿Ÿã€‚</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆåœ¨è¯„è®ºä¸­ï¼Œæˆ‘æ’’è°äº†-æˆ‘åœ¨ä¸¤ä¸ªåœ°æ–¹éƒ½å»¶è¿Ÿäº†è€ä¹…æ€§ã€‚äº‹å®è¯æ˜ï¼Œå¦‚æœæ²¡æœ‰å»¶è¿Ÿè€ä¹…æ€§ï¼Œåˆ™æ˜¯ï¼š</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å°å¼æœº-39ç§’ï¼Œ15K tr /ç§’ï¼Œ0.065ms / ioå¾€è¿”</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PROD-360ç§’ï¼Œ1600 tr /ç§’ï¼Œ0.6ms </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘åº”è¯¥æ—©ç‚¹æ³¨æ„äº†ï¼‰</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬</font><font style="vertical-align: inherit;">ç”¨ä¸€ä¸ªå¹³å‡¡çš„ä¾‹å­</font><font style="vertical-align: inherit;">æ¥å¤„ç†</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zeta Riemannå‡½æ•°</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„</font><s><font style="vertical-align: inherit;">å¹³å‡¡é›¶</font></s><font style="vertical-align: inherit;">ã€‚åœ¨å¼€å‘äººå‘˜å¸¦ç»™æˆ‘çš„ç¤ºä¾‹ä¸­ï¼Œè¿˜æœ‰å¦ä¸€ä¸ªã€‚æˆ‘ç¡®ä¿¡å®ƒä»¬æ˜¯æ­£ç¡®çš„ï¼Œå¹¶ä»ç¤ºä¾‹ä¸­æ¸…é™¤äº†æ‰€æœ‰ä¸ä¸šåŠ¡é€»è¾‘æœ‰å…³çš„ç»†èŠ‚ã€‚åœ¨æŸä¸ªæ—¶å€™ï¼Œæˆ‘æ„è¯†åˆ°æˆ‘å¯ä»¥å®Œå…¨æ‰”æ‰ä»–ä»¬çš„ä»£ç ï¼Œå¹¶ç¼–å†™è‡ªå·±çš„ä»£ç -è¯æ˜äº†åŒæ ·çš„é—®é¢˜-å®ƒåœ¨ç”Ÿäº§ä¸Šçš„è¿è¡Œé€Ÿåº¦æ…¢äº†3-4å€ï¼š</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">create</span> <span class="hljs-keyword">function</span> dbo.isPrime (@n <span class="hljs-built_in">bigint</span>)
<span class="hljs-keyword">returns</span> <span class="hljs-built_in">int</span>
<span class="hljs-keyword">as</span>
  <span class="hljs-keyword">begin</span>
  <span class="hljs-keyword">if</span> @n = <span class="hljs-number">1</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> @n = <span class="hljs-number">2</span> <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
  <span class="hljs-keyword">if</span> @n = <span class="hljs-number">3</span> <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
  <span class="hljs-keyword">if</span> @n % <span class="hljs-number">2</span> = <span class="hljs-number">0</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  <span class="hljs-keyword">declare</span> @sq <span class="hljs-built_in">int</span>
  <span class="hljs-keyword">set</span> @sq = <span class="hljs-keyword">sqrt</span>(@n)+<span class="hljs-number">1</span> <span class="hljs-comment">-- check odds up to sqrt</span>
  <span class="hljs-keyword">declare</span> @dv <span class="hljs-built_in">int</span> = <span class="hljs-number">1</span>
  <span class="hljs-keyword">while</span> @dv &lt; @sq 
    <span class="hljs-keyword">begin</span>
	<span class="hljs-keyword">set</span> @dv=@dv+<span class="hljs-number">2</span>
	<span class="hljs-keyword">if</span> @n % @dv = <span class="hljs-number">0</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
	<span class="hljs-keyword">end</span>
  <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">declare</span> @dt datetime <span class="hljs-keyword">set</span> @dt=<span class="hljs-keyword">getdate</span>()
<span class="hljs-keyword">select</span> dbo.isPrime(<span class="hljs-number">1000000000000037</span>)
<span class="hljs-keyword">select</span> <span class="hljs-keyword">datediff</span>(ms,@dt,<span class="hljs-keyword">getdate</span>()) <span class="hljs-keyword">as</span> ms
<span class="hljs-keyword">GO</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œé‚£ä¹ˆå°†åœ¨6-7-8ç§’å†…è¿›è¡Œæ•°å­—ç®€å•æ€§çš„éªŒè¯ã€‚å› æ­¤å®ƒåœ¨è®¸å¤šæœåŠ¡å™¨ä¸Šã€‚ä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ£€æŸ¥éœ€è¦25-40ç§’ã€‚æœ‰è¶£çš„æ˜¯ï¼Œæ²¡æœ‰æœåŠ¡å™¨æ‰§è¡Œéœ€è¦èŠ±è´¹14ç§’çš„æ—¶é—´-ä»£ç è¿è¡Œå¾—éå¸¸å¿«æˆ–éå¸¸æ…¢ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé—®é¢˜æ˜¯é»‘ç™½çš„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘åšäº†ä»€ä¹ˆï¼Ÿåœ¨VMwareæŒ‡æ ‡ä¸­æœ‰ç”¨ã€‚é‚£é‡Œä¸€åˆ‡éƒ½å¾ˆå¥½-èµ„æºå……è¶³ï¼Œå°±ç»ªæ—¶é—´= 0ï¼Œåœ¨ä¸€ä¸ªvCPUä¸Šå¿«é€Ÿå’Œæ…¢é€ŸæœåŠ¡å™¨ä¸Šçš„CPU = 100çš„æµ‹è¯•æœŸé—´ï¼Œä¸€åˆ‡éƒ½è¶³å¤Ÿã€‚æˆ‘è¿›è¡Œäº†ä¸€æ¬¡æµ‹è¯•ä»¥è®¡ç®—Piçš„æ•°é‡-è¯¥æµ‹è¯•åœ¨ä»»ä½•æœåŠ¡å™¨ä¸Šéƒ½æ˜¾ç¤ºäº†ç›¸åŒçš„ç»“æœã€‚è¶Šæ¥è¶Šé—»åˆ°é»‘é­”æ³•äº†ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
èµ°å‡ºDEVå†œåœºåï¼Œæˆ‘å¼€å§‹æ‰®æ¼”æœåŠ¡å™¨çš„è§’è‰²ã€‚äº‹å®è¯æ˜ï¼Œä¸»æœºä¹‹é—´çš„vMotionå¯ä»¥â€œæ²»æ„ˆâ€æœåŠ¡å™¨ï¼Œä½†åä¹‹äº¦ç„¶ï¼Œå¯ä»¥å°†â€œå¿«é€Ÿâ€æœåŠ¡å™¨è½¬å˜ä¸ºâ€œæ…¢é€Ÿâ€æœåŠ¡å™¨ã€‚çœ‹èµ·æ¥åƒè¿™æ ·-ä¸€äº›ä¸»æœºæœ‰é—®é¢˜...ä½†æ˜¯...ä¸ã€‚æŸä¸ªè™šæ‹Ÿæœºåœ¨ä¸»æœºä¸Šè¿è¡Œç¼“æ…¢ï¼Œä¾‹å¦‚Aï¼Œä½†æ˜¯åœ¨ä¸»æœºBä¸Šè¿è¡Œå¾ˆå¿«ã€‚ç›¸åï¼Œå¦ä¸€å°è™šæ‹Ÿæœºåœ¨Aä¸Šè¿è¡Œå¾ˆå¿«ï¼Œåœ¨Bä¸Šè¿è¡Œæ…¢ï¼ â€œå¿«â€å’Œâ€œæ…¢â€çš„æ±½è½¦ç»å¸¸åœ¨ä¸»äººèº«ä¸Šæ—‹è½¬ï¼</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»é‚£ä¸€åˆ»èµ·ï¼Œç©ºæ°”ä¸­æ˜æ˜¾æ•£å‘å‡ºç¡«ç£ºå‘³ã€‚æ¯•ç«Ÿï¼Œè¯¥é—®é¢˜ä¸èƒ½å½’å› äºä»»ä½•è™šæ‹Ÿæœºï¼ˆä¾‹å¦‚Windowsè¡¥ä¸ç¨‹åºï¼‰-å› ä¸ºé€šè¿‡vMotionå®ƒå˜æˆäº†â€œå¿«é€Ÿâ€è™šæ‹Ÿæœºã€‚ä½†æ˜¯é—®é¢˜ä¹Ÿä¸èƒ½å½’å› äºä¸»æœº-å› ä¸ºå®ƒå¯èƒ½åŒæ—¶å…·æœ‰â€œå¿«é€Ÿâ€å’Œâ€œæ…¢é€Ÿâ€è®¡ç®—æœºã€‚å®ƒä¹Ÿæ²¡æœ‰ä¸è´Ÿè½½è¿æ¥-æˆ‘è®¾æ³•åœ¨ä¸»æœºä¸Šè·å¾—ä¸€å°â€œæ…¢é€Ÿâ€è®¡ç®—æœºï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå®ƒä»€ä¹ˆä¹Ÿæ²¡æœ‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç»æœ›çš„æ˜¯ï¼Œæˆ‘ä»Sysinternalså¯åŠ¨äº†Process Explorerï¼Œå¹¶æŸ¥çœ‹äº†SQLå †æ ˆã€‚åœ¨é€Ÿåº¦è¾ƒæ…¢çš„è®¡ç®—æœºä¸Šï¼Œè¿™æ¡çº¿ç«‹å³å¼•èµ·äº†æˆ‘çš„æ³¨æ„ï¼š</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ntoskrnl.exeï¼KeSynchronizeExecution + 0x5bf6 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ntoskrnl.exeï¼KeWaitForMultipleObjects + 0x109d </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ntoskrnl.exeï¼KeWaitForMultipleObjects + 0xb3f </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ntosKrnx3 0ï¼</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ntoskrnl.exeï¼KeQuerySystemTimePrecise + 0x881 &lt;-!!!</font></font><br>
</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ntoskrnl.exeä¸­ï¼ObDereferenceObjectDeferDelete + 0x28a </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ntoskrnl.exeä¸­ï¼KeSynchronizeExecutionå‡½æ•°+ 0x2de2 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sqllang.dllï¼CDiagThreadSafe :: PxlvlReplace + 0x1a20 </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...è·³è¿‡</font></font><br>
</i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sqldk.dllï¼SystemThread :: MakeMiniSOSThread + 0xa54 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KERNEL32.DLLï¼BaseThreadInitThunk + 0Ã—14 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ntdll.dllä¸­ï¼RtlUserThreadStart + 0Ã—21</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å·²ç»æ˜¯ä¸œè¥¿äº†ã€‚è¯¥ç¨‹åºæ˜¯è¿™æ ·å†™çš„ï¼š</font></font><br>
<br>
<pre><code class="cs hljs">    <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><font></font>
    {<font></font>
        [<span class="hljs-meta">DllImport(<span class="hljs-meta-string">"kernel32.dll"</span>)</span>]
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">extern</span> <span class="hljs-keyword">void</span> <span class="hljs-title">GetSystemTimePreciseAsFileTime</span>(<span class="hljs-params"><span class="hljs-keyword">out</span> FILE_TIME lpSystemTimeAsFileTime</span>)</span>;<font></font>
<font></font>
        [<span class="hljs-meta">StructLayout(LayoutKind.Sequential)</span>]
        <span class="hljs-keyword">struct</span> FILE_TIME<font></font>
        {<font></font>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> ftTimeLow;
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> ftTimeHigh;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-keyword">string</span>[] args</span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">16</span>; i++)<font></font>
            {<font></font>
                <span class="hljs-keyword">int</span> counter = <span class="hljs-number">0</span>;<font></font>
<font></font>
                <span class="hljs-keyword">var</span> stopwatch = Stopwatch.StartNew();<font></font>
<font></font>
                <span class="hljs-keyword">while</span> (stopwatch.ElapsedMilliseconds &lt; <span class="hljs-number">1000</span>)<font></font>
                {<font></font>
                    GetSystemTimePreciseAsFileTime(<span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> fileTime);<font></font>
                    counter++;<font></font>
                }<font></font>
<font></font>
                <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>)<font></font>
                {<font></font>
                    Console.WriteLine(<span class="hljs-string">"{0}"</span>, counter);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥ç¨‹åºæ˜¾ç¤ºå‡ºæ›´å¿«çš„å‡é€Ÿæ•ˆæœ-åœ¨â€œå¿«é€Ÿâ€æœºå™¨ä¸Šï¼Œæ¯ç§’æ˜¾ç¤º16-18ç™¾ä¸‡ä¸ªå‘¨æœŸï¼Œè€Œåœ¨æ…¢é€Ÿæœºå™¨ä¸Šï¼Œæ¯ç§’æ˜¾ç¤º50ä¸‡ä¸ªï¼Œç”šè‡³70ä¸‡ä¸ªã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç›¸å·®æ˜¯10åˆ°20å€ï¼ˆ!!!ï¼‰ã€‚è¿™å·²ç»æ˜¯ä¸€ä¸ªå°å°çš„èƒœåˆ©ï¼šåœ¨ä»»ä½•æƒ…å†µä¸‹ï¼ŒMicrosoftå’ŒVMwareæ”¯æŒä¹‹é—´éƒ½ä¸ä¼šå¡ä½ï¼Œè¿™æ ·ä»–ä»¬å°±å¯ä»¥ç›¸äº’è½¬ç§»ç®­å¤´ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤å¤–ï¼Œè¿›å±•åœæ­¢äº†-ä¼‘å‡ï¼Œé‡è¦äº‹é¡¹ï¼Œç—…æ¯’æ€§æ­‡æ–¯åº•é‡Œå’Œå·¥ä½œé‡æ€¥å‰§å¢åŠ ã€‚æˆ‘ç»å¸¸å‘åŒäº‹æä¸€ä¸ªé­”æœ¯é—®é¢˜ï¼Œä½†æœ‰æ—¶ä¼¼ä¹ä»–ä»¬å¹¶ä¸æ€»æ˜¯ä¿¡ä»»æˆ‘-VMwareå°†ä»£ç é€Ÿåº¦é™ä½10åˆ°20å€çš„è¯´æ³•å¤ªå¯æ€•äº†ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘è¯•å›¾å‘æ˜å‡ºæ­£åœ¨å‡é€Ÿçš„ä¸œè¥¿ã€‚</font><font style="vertical-align: inherit;">åœ¨æˆ‘çœ‹æ¥ï¼Œæœ‰æ—¶æˆ‘å‘ç°äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ-æ‰“å¼€å’Œå…³é—­çƒ­æ’æ‹”ï¼Œæ›´æ”¹å†…å­˜å¤§å°æˆ–å¤„ç†å™¨æ•°é‡é€šå¸¸ä½¿è®¡ç®—æœºæˆä¸ºâ€œå¿«é€Ÿâ€å¤„ç†å™¨ã€‚</font><font style="vertical-align: inherit;">ä½†ä¸æ˜¯æ°¸è¿œã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯äº‹å®è¯æ˜æ˜¯æ­£ç¡®çš„ï¼Œé‚£å°±æ˜¯å¤–å‡ºæ•²é—¨ï¼Œå°±æ˜¯æ”¹å˜</font><font style="vertical-align: inherit;">è™šæ‹Ÿæœºçš„</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»»ä½•</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‚æ•°ï¼Œ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åï¼Œæˆ‘çš„ç¾å›½åŒäº‹çªç„¶å‘ç°äº†æ ¹æœ¬åŸå› ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ms/qd/5b/msqd5bixfzwfkbmd1fuiptjnwvq.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸»æŒäººçš„é¢‘ç‡æœ‰æ‰€ä¸åŒï¼</font></font></i><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™é€šå¸¸å¹¶ä¸å¯æ€•ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼šä»â€œæœ¬åœ°â€ä¸»æœºè¿ç§»åˆ°â€œä¸åŒâ€é¢‘ç‡çš„ä¸»æœºæ—¶ï¼ŒVMwareåº”è¯¥è°ƒæ•´GetTimePreciseçš„ç»“æœã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šå¸¸ï¼Œè¿™å¹¶ä¸å¯æ€•ï¼Œé™¤éæœ‰åƒSQL Serverè¿™æ ·çš„åº”ç”¨ç¨‹åºæ¯ç§’è¯·æ±‚ç¡®åˆ‡çš„æ—¶é—´æ•°ç™¾ä¸‡æ¬¡ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½†è¿™å¹¶ä¸å¯æ€•ï¼Œå› ä¸ºSQL Serverå¹¶ä¸æ€»æ˜¯è¿™æ ·åšï¼ˆè¯·å‚è§ç»“è®ºï¼‰ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ç§è€™å­å¾ˆéš¾å‡»ä¸­ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œæ˜¯çš„ï¼Œé€šè¿‡è½»æŒ‰æ–¹å‘é”®ï¼ˆåœ¨VMè®¾ç½®ä¸­è¿›è¡Œäº†æ›´æ”¹ï¼‰ï¼Œæˆ‘è¿«ä½¿VMwareâ€œé‡æ–°è®¡ç®—â€é…ç½®ï¼Œå½“å‰ä¸»æœºçš„é¢‘ç‡å˜ä¸ºè®¡ç®—æœºçš„â€œæœ¬æœºâ€é¢‘ç‡ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å†³æ–­</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.vmware.com/files/pdf/techpaper/Timekeeping-In-VirtualMachines.pdf</font></font></a><br>
<br>
<blockquote>When you disable virtualization of the TSC, reading the TSC from within the virtual machine returns the physical machineâ€™s TSC value, and writing the TSC from within the virtual machine has no effect. Migrating the virtual machine to another host, resuming it from suspended state, or reverting to a snapshot causes the TSC to jump discontinuously. Some guest operating systems fail to boot, or exhibit other timekeeping problems, when TSC virtualization is disabled. <b>In the past, this feature has sometimes been recommended to improve performance of applications that read the TSC frequently</b>, but performance of the virtual TSC has been improved substantially in current products. The feature has also been recommended for use when performing measurements that require a precise source of real time in the virtual machine.</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç®€è€Œè¨€ä¹‹ï¼Œæ·»åŠ å‚æ•°</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">monitor_control.virtual_rdtsc = FALSE</font></font></b><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»“è®º</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨å¯èƒ½æœ‰ä¸€ä¸ªé—®é¢˜ï¼šSQLç»å¸¸è°ƒç”¨GetTimePreciseå—ï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘æ²¡æœ‰SQL Serveræºï¼Œä½†æ˜¯é€»è¾‘å¦‚æ­¤ã€‚ SQLå‡ ä¹æ˜¯å…·æœ‰ååŒå¹¶å‘æ€§çš„OSï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½å¿…é¡»ä¸æ—¶åœ°è®©ä½ã€‚åœ¨å“ªé‡Œæ›´å¥½å‘¢ï¼Ÿè‡ªç„¶è€Œç„¶çš„æœŸæœ›-é”å®šæˆ–IOã€‚å¥½å§ï¼Œå¦‚æœæˆ‘ä»¬æ—‹è½¬è®¡ç®—å‘¨æœŸè¯¥æ€ä¹ˆåŠï¼Ÿç„¶åï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ªè¿ç®—ç¬¦ä¹‹åï¼Œæ˜¾è€Œæ˜“è§çš„å‡ ä¹æ˜¯å”¯ä¸€çš„ä½ç½®æ˜¯è§£é‡Šå™¨ï¼ˆè¿™ä¸æ˜¯å®Œå…¨çš„è§£é‡Šå™¨ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½œä¸ºä¸€é¡¹è§„åˆ™ï¼ŒSQLæœåŠ¡å™¨ä¸ç”¨äº</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰“é’‰</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹²å‡€çš„è®¡ç®—ï¼Œè¿™æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨å„ç§ä¸´æ—¶å¹³æ¿ç”µè„‘ï¼ˆç«‹å³è¢«ç¼“å­˜ï¼‰çš„å¾ªç¯ä¼šå°†ä»£ç è½¬æ¢æˆä¸€ç³»åˆ—éå¸¸å¿«é€Ÿæ‰§è¡Œçš„è¯­å¥ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœå°†å‡½æ•°åŒ…è£…ä¸ºNATIVELY COMPILEDï¼Œåˆ™å®ƒä¸å†è¦æ±‚æ—¶é—´ï¼Œå¹¶ä¸”å…¶é€Ÿåº¦å¢åŠ äº†10å€ã€‚ä½†æ˜¯ï¼Œåä½œå¤šä»»åŠ¡å¤„ç†åˆå¦‚ä½•å‘¢ï¼Ÿ</font><font style="vertical-align: inherit;">ä½†æ˜¯å¯¹äºæœ¬åœ°ç¼–è¯‘çš„ä»£ç ï¼Œæˆ‘ä¸å¾—ä¸åœ¨SQLä¸­è¿›è¡ŒPREEMPTIVE MULTITASKINGã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN496596/index.html">ä»€ä¹ˆæ˜¯ä»˜æ¬¾ç½‘å…³ï¼Ÿäº”ä¸ªæ”¯ä»˜ç½‘å…³2020çš„æ¯”è¾ƒ</a></li>
<li><a href="../zh-CN496598/index.html">48kè‡³10è¡Œä»£ç -GitHub JavaScript SDK Story</a></li>
<li><a href="../zh-CN496600/index.html">ä½œä¸ºè¿›å£æ›¿ä»£äº§å“çš„ä¸€éƒ¨åˆ†ï¼Œè«æ–¯ç§‘ä»¥9000ä¸‡å¢å¸ƒçš„ä»·æ ¼è´­ä¹°äº†Microsoftè½¯ä»¶</a></li>
<li><a href="../zh-CN496608/index.html">é£Ÿå“è®¾è®¡æ–‡æ‘˜ï¼Œ2020å¹´3æœˆ</a></li>
<li><a href="../zh-CN496610/index.html">è·¯ç”±å™¨Banana Pi R64-Debianï¼ŒWireguardï¼ŒILV</a></li>
<li><a href="../zh-CN496614/index.html">å“ˆå¸ƒæ‹‰å¥‘äººåœ¨äº”å¹´å†…å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–ï¼Ÿæˆ–â€œ 280å‘¨åâ€</a></li>
<li><a href="../zh-CN496616/index.html">æˆ‘ä»¬å¦‚ä½•è®¡ç®—ä½¿ç”¨è®¡ç®—æœºè§†è§‰çš„äººæ•°</a></li>
<li><a href="../zh-CN496620/index.html">ITä¸“ä¸šäººå‘˜ä¸­å¸¸è§çš„è‹±è¯­é”™è¯¯</a></li>
<li><a href="../zh-CN496626/index.html">æ¸¸ä¾ ä¸é¾™ï¼šå¦‚ä½•å¸®åŠ©å®ä¹ ç”Ÿé€‚åº”å›¢é˜Ÿ</a></li>
<li><a href="../zh-CN496630/index.html">æ¥å£è‡ªè¡Œè½¦æœ‰æ¯’çš„ç¥–çˆ¶ã€‚â€œä¼ªé€ æˆ‘çš„å±è‚¡ï¼â€ ï¼ˆs1 e5ï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>