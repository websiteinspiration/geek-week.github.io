<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✈️ 🔺 🎍 Kubernetes：开源与供应商 🐳 🔫 🐽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="嗨，我叫Dmitry Krasnov。五年多来，我一直在管理Kubernetes集群并构建复杂的微服务架构。今年早些时候，我们推出了基于Containerum的Kubernetes集群管理服务。借此机会，我将告诉您Kubernetes是什么，以及与供应商的集成与开源有何不同。
 
 首先，什么是Ku...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kubernetes：开源与供应商</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ru_mts/blog/500728/"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">嗨，我叫Dmitry Krasnov。</font><font style="vertical-align: inherit;">五年多来，我一直在管理Kubernetes集群并构建复杂的微服务架构。</font><font style="vertical-align: inherit;">今年早些时候，我们推出了基于Containerum的Kubernetes集群管理服务。</font><font style="vertical-align: inherit;">借此机会，我将告诉您Kubernetes是什么，以及与供应商的集成与开源有何不同。</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，什么是</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这是一个用于管理大量主机上的容器的系统。</font><font style="vertical-align: inherit;">顺便说一句，从希腊语翻译为“飞行员”或“舵手”。</font><font style="vertical-align: inherit;">最初由Google开发，然后由Cloud Native Computing Foundation（一家国际非营利组织）召集了全球领先的开发人员，最终用户和容器技术提供商，作为技术贡献而转让。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jj/lu/gn/jjlugngazzbnhu-fyxvlpchazjw.jpeg"><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操纵大量容器 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在让我们看看它们是哪种容器。</font><font style="vertical-align: inherit;">此应用程序及其所有周围环境-主要是程序所依赖的库。</font><font style="vertical-align: inherit;">所有这些都打包在归档文件中，并以映像的形式呈现，可以在不考虑操作系统，经过测试且不仅限于此的情况下运行。</font><font style="vertical-align: inherit;">但是存在一个问题-在大量主机上管理容器非常困难。</font><font style="vertical-align: inherit;">因此，创建了Kubernetes。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
容器映像是一个应用程序及其依赖项。应用程序，其依赖项和OS文件系统的映像位于映像的不同部分，即所谓的层。可以将层重新用于不同的容器。例如，Ubuntu基本层可用于公司中的所有应用程序。启动容器时，无需在主机上存储一个基础层的多个副本。这使您可以优化图像的存储和传送。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当我们想从容器启动应用程序时，必要的层相互叠加，并形成一个覆盖文件系统。用于记录的层叠加在顶部，当容器停止时，将其删除。这样可以确保在启动容器时，应用程序始终具有相同的环境，无法更改。这样可确保环境在不同主机操作系统上的可重现性。无论是Ubuntu还是CentOS，环境都将始终相同。此外，使用Linux内核内置的机制将容器与主机隔离。容器中的应用程序看不到文件，主机和相邻容器的进程。应用程序与主机OS的这种隔离提供了额外的安全层。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有许多工具可用于管理主机上的容器。</font><font style="vertical-align: inherit;">其中最受欢迎的是Docker。</font><font style="vertical-align: inherit;">它使您可以确保容器的整个生命周期。</font><font style="vertical-align: inherit;">但是，它仅在一台主机上工作。</font><font style="vertical-align: inherit;">如果您需要管理多个主机上的容器，则Docker可以将工程师的生活变成地狱。</font><font style="vertical-align: inherit;">这就是创建Kubernetes的原因。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对Kubernetes的需求正是由于能够将多个主机上的容器组作为某些单个实体进行引导。</font><font style="vertical-align: inherit;">该系统的普及提供了构建DevOps或开发操作的能力，其中Kubernetes用于启动此DevOps本身的过程。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/l1/4k/fm/l14kfmzc4n0ohovryr9sb0m1pbc.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图1. Kubernetes的工作原理图</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全自动化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原则上，DevOps是开发过程的自动化。粗略地说，开发人员编写的代码会注入存储库中。然后，可以将该代码立即自动收集到具有所有库的容器中，进行测试并将其推广到下一个阶段-登台，然后立即进行生产。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过与Kubernetes一起使用，DevOps可以使该过程自动化，从而使开发人员很少或没有参与就可以进行。因此，由于开发人员不必在他的计算机上执行此操作，因此组装得到了显着加速-他只需要编写一段代码，将代码推送到存储库中，然后管道就会启动，其中可能包括组装，测试和展开过程。每次提交都会发生这种情况，因此测试正在进行中。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同时，使用容器可以确保该程序的整个环境完全按照其测试的形式投入生产。</font><font style="vertical-align: inherit;">就是说，“在测试中，有一些版本在生产中-其他，但是在设置时-一切都下降了”这一类别将没有问题。</font><font style="vertical-align: inherit;">从今天起，我们就趋向于微服务体系结构，当不是一个大型应用程序而是数百个小型应用程序时，为了手动管理它们，您将需要大量人员。</font><font style="vertical-align: inherit;">这就是为什么我们使用Kubernetes。</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优点，优点，优点</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果我们谈论Kubernetes作为平台的优势，那么它在管理微服务架构方面具有显着的优势。 </font></font><br>
<br>
<ul>
<li> <b>  .</b>   —      .    , —         .          .     ,  Kubernetes      . </li>
<li> <b> .</b>   Kubernetes         .       .       ,     .     Kubernetes  ,        Service Discovery.       IP-       Kubernetes.   health check`         .</li>
<li> <b> . </b>         .    Kubernetes    ConfigMap`.             .         ,     . </li>
<li> <b>Persistent Volumes. </b>          ,    ,  .        .      Kubernetes      — Persistent Volumes.       ,      ,   .        ,        .</li>
<li> <b>Load Balancer.</b>   ,   Kubernetes      Deployment, StatefulSet  ..,            .         . Kubernetes         .     ,   ?        ,        .      Kubernetes    Load Balancer.             .              .       ,     .        Kubernetes.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetes最适合启动微服务架构。</font><font style="vertical-align: inherit;">在古典架构中实现系统是可能的，但毫无意义。</font><font style="vertical-align: inherit;">如果应用程序无法在多个副本中运行，那么区别在Kubernetes中还是没有？</font></font><br>
 <br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开源Kubernetes</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
开源Kubernetes是一件好事：它已经安装并且可以工作。</font><font style="vertical-align: inherit;">您可以在铁服务器上，基础结构上部署向导和工作程序，以便在其中运行所有应用程序。</font><font style="vertical-align: inherit;">最重要的是-所有这些都是免费的。</font><font style="vertical-align: inherit;">但是，有细微差别。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先是管理员和工程师的知识和经验的正确性，他们将部署和伴随所有这些。</font><font style="vertical-align: inherit;">由于客户在群集中拥有完全的行动自由，因此他对群集的可操作性承担责任。</font><font style="vertical-align: inherit;">打破这里的一切非常简单。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二是缺乏整合。</font><font style="vertical-align: inherit;">如果在没有流行的虚拟化平台的情况下运行Kubernetes，您将无法获得该程序的所有好处。</font><font style="vertical-align: inherit;">例如使用持久卷和负载平衡器服务。</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/yl/qy/s-/ylqys-vszsb7e9t4pmjylyhhh0u.png"> <br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图2. k8s架构</font></font></i><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">供应商的Kubernetes</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与云提供商的集成提供了两种选择： </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 首先，一个人可以简单地单击“创建集群”按钮，并获得一个已经配置并准备工作的集群。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 其次，供应商本身会建立集群并配置与云的集成。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们这是怎么回事。启动集群的工程师会指示他需要多少工作人员以及具有哪些参数（例如，5个工作人员，每个工作人员具有10个CPU，16 GB的RAM和100 GB的磁盘）。然后，它可以访问已经形成的群集。同时，将启动负载的工作人员完全交给客户端，但是整个管理平面仍保留在供应商的责任范围内（如果根据托管服务模型提供服务）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然而，这种方案具有其缺点。</font><font style="vertical-align: inherit;">由于管理平面仍留在卖方手中，因此卖方无法完全访问客户端，这降低了使用Kubernetes的灵活性。</font><font style="vertical-align: inherit;">有时会发生客户想要将某些特定功能附加到Kubernetes的情况，例如通过LDAP进行身份验证，并且管理平面配置不允许这样做。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/me/xi/lp/mexilpixodhnuve_i3i2kop5rko.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图3.来自云提供商的Kubernetes集群示例</font></font></i><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择什么：开源或供应商</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
那么，开源的Kubernetes还是供应商？</font><font style="vertical-align: inherit;">如果我们采用开源的Kubernetes，那么用户想做自己想做的事情。</font><font style="vertical-align: inherit;">但是，这是一个向腿开枪的好机会。</font><font style="vertical-align: inherit;">对于供应商，这会变得更加复杂，因为所有事情都需要为公司考虑和配置。</font><font style="vertical-align: inherit;">开源Kubernetes的最大缺点是需要专家。</font><font style="vertical-align: inherit;">对于供应商而言，公司可以免于此头疼，但它必须决定是否向专家或供应商付款。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/te/g1/uu/teg1uu2nmmwdork-m0khn56_3ru.png"><br>
<br>
<img src="https://habrastorage.org/webt/-2/fi/vf/-2fivf91q1hgvh5j515dccobviy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好吧，优点很明显，缺点也很清楚。</font><font style="vertical-align: inherit;">总是一回事：Kubernetes通过自动管理多个容器解决了许多问题。</font><font style="vertical-align: inherit;">谁选择，开源还是供应商-每个人都可以自己决定。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本文由提供商#CloudMTS的Containerum服务的首席架构师Dmitry Krasnov编写。</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN500712/index.html">数字冠状病毒-勒索软件和Infostealer的组合</a></li>
<li><a href="../zh-CN500718/index.html">远程模式下的EPAM：如何工作</a></li>
<li><a href="../zh-CN500720/index.html">新的信息安全标准：使攻击者的生活更加艰难</a></li>
<li><a href="../zh-CN500722/index.html">“烘烤直到准备就绪”：谁以不寻常的方式保存了稀有的录音带</a></li>
<li><a href="../zh-CN500724/index.html">美国金融当局如何限制游戏对下滑的负面影响</a></li>
<li><a href="../zh-CN500732/index.html">人工智能与意识理论的危机</a></li>
<li><a href="../zh-CN500734/index.html">＃GitLab 12.10已发布，具有需求管理和AWS Fargate的自动CI扩展</a></li>
<li><a href="../zh-CN500744/index.html">“比您说的更好，我的扬声器”：如何在家中更好地播放</a></li>
<li><a href="../zh-CN500746/index.html">用于SMD和其他小物件的拳击架</a></li>
<li><a href="../zh-CN500752/index.html">MASK-RCNN用于从无人机图像中查找屋顶</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>