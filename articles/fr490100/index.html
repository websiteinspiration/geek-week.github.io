<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôà üßíüèæ üôãüèª D√©velopper un logiciel de location d√©centralis√©e de scooters. Qui a dit que ce serait facile? üòß üëÇüèæ ‚Ü™Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, je parlerai de la fa√ßon dont nous avons essay√© de construire une location de scooter d√©centralis√©e sur des contrats intelligents et ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>D√©velopper un logiciel de location d√©centralis√©e de scooters. Qui a dit que ce serait facile?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tsystems/blog/490100/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans cet article, je parlerai de la fa√ßon dont nous avons essay√© de construire une location de scooter d√©centralis√©e sur des contrats intelligents et pourquoi nous avions encore besoin d'un service centralis√©.</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/ry/kh/z5/rykhz5ioko9sidydvizts5ytasu.jpeg"><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment tout a commenc√©</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En novembre 2018, nous avons particip√© √† un hackathon d√©di√© √† l'Internet des objets et √† la blockchain. </font><font style="vertical-align: inherit;">Notre √©quipe a choisi le partage de scooter comme id√©e, car nous avions un scooter du sponsor de ce hackathon. </font><font style="vertical-align: inherit;">Le prototype ressemblait √† une application mobile qui vous permet de faire fonctionner un scooter via NFC. </font><font style="vertical-align: inherit;">D'un point de vue marketing, l'id√©e a √©t√© renforc√©e par une histoire d'un ¬´avenir radieux¬ª avec un √©cosyst√®me ouvert o√π chacun peut devenir locataire ou propri√©taire, le tout bas√© sur des contrats intelligents.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos parties prenantes ont beaucoup aim√© cette id√©e et ont d√©cid√© de la transformer en prototype de d√©monstration lors d'expositions. </font><font style="vertical-align: inherit;">Apr√®s plusieurs expositions r√©ussies au Mobile World Congress et √† Bosch Connected World en 2019, il a √©t√© d√©cid√© de tester la location de scooters sur de vrais utilisateurs, employ√©s de Deutsche Telekom. </font><font style="vertical-align: inherit;">Nous avons donc commenc√© √† d√©velopper un MVP √† part enti√®re.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cha√Æne Blockchain</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je pense que cela ne vaut pas la peine d'expliquer quelle est la diff√©rence entre un projet √† montrer sur sc√®ne et celui que de vraies personnes utiliseront. </font><font style="vertical-align: inherit;">Pendant six mois, nous avons d√ª transformer le prototype brut en quelque chose de convenable pour le pilote. </font><font style="vertical-align: inherit;">Et puis nous avons r√©alis√© ce que signifie ¬´douleur¬ª. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de rendre notre syst√®me d√©centralis√© et ouvert, nous avons d√©cid√© d'utiliser les contrats intelligents Ethereum. </font><font style="vertical-align: inherit;">Le choix s'est port√© sur cette plateforme de services en ligne d√©centralis√©s en raison de sa popularit√© et de sa capacit√© √† construire une application sans serveur. </font><font style="vertical-align: inherit;">Nous avions pr√©vu de mettre en ≈ìuvre notre projet comme suit.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/b6/yx/wl/b6yxwlzn-ajira5tnsiepupfwgk.png" width="300"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais, malheureusement, un contrat intelligent est un code ex√©cut√© par une machine virtuelle au moment d'une transaction, et il ne peut pas remplacer un serveur √† part enti√®re. Par exemple, un contrat intelligent ne peut pas ex√©cuter des activit√©s en attente ou planifi√©es. Dans notre projet, cela ne nous a pas permis de mettre en place le service de location √† la minute, comme le font la plupart des voitures modernes. Par cons√©quent, nous avons d√©duit la crypto-monnaie de l'utilisateur apr√®s la fin de l'op√©ration sans la certitude qu'il a suffisamment d'argent. Cette approche n'est acceptable que pour le pilote interne et, bien s√ªr, ajoute aux probl√®mes lors de la conception d'un projet de production √† part enti√®re.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä tout ce qui pr√©c√®de, l'humidit√© de la plate-forme elle-m√™me est ajout√©e. Par exemple, en √©crivant un contrat intelligent avec une logique autre que des jetons ERC-20, vous rencontrerez le probl√®me de la gestion des erreurs. Habituellement, avec une entr√©e incorrecte ou un fonctionnement incorrect de nos m√©thodes, nous obtenons un code d'erreur en r√©ponse. Dans le cas d'Ethereum, nous ne pouvons obtenir que la quantit√© de gaz d√©pens√©e pour remplir cette fonction. Le gaz est la devise dont vous avez besoin pour payer les transactions et les calculs: plus il y a de transactions dans votre code, plus vous payez. Par cons√©quent, pour comprendre pourquoi le code ne fonctionne pas, vous devez d'abord le tester, simuler toutes les erreurs possibles et coder en dur le gaz us√© comme code d'erreur. Mais si vous modifiez votre code, cette gestion des erreurs sera interrompue.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, il est presque impossible de cr√©er une application mobile qui fonctionne honn√™tement avec la blockchain, sans utiliser une cl√© stock√©e quelque part dans le cloud. Bien que les portefeuilles honn√™tes existent, ils ne fournissent pas d'interfaces pour signer des transactions externes. Cela signifie que vous ne verrez pas l'application native si elle n'a pas de portefeuille crypt√© int√©gr√©, auquel les utilisateurs auront peu confiance (je ne ferais pas confiance). En cons√©quence, ici, nous avons √©galement d√ª couper un coin. Des contrats intelligents ont √©t√© livr√©s au r√©seau priv√© Ethereum et le portefeuille √©tait nuageux. Mais malgr√© cela, nos utilisateurs ont ressenti tous les ¬´charmes¬ª des services d√©centralis√©s sous la forme d'une longue attente de transactions plusieurs fois par session de location. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout cela nous am√®ne √† cette architecture. D'accord, c'est tr√®s diff√©rent de ce que nous avions pr√©vu.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/eh/e0/eg/ehe0egtt1jpdk8siidr7ykabelm.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ace dans votre manche: identit√© auto-souveraine </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous ne pouvez pas construire un syst√®me enti√®rement d√©centralis√© sans identification d√©centralis√©e. </font><font style="vertical-align: inherit;">L'identit√© auto-souveraine (SSI) est responsable de cette partie, dont l'essence est que vous jetez un fournisseur d'identit√© centralis√© (IDP) et distribuez aux gens toutes les donn√©es et leur responsabilit√©. </font><font style="vertical-align: inherit;">L'utilisateur d√©cide maintenant des donn√©es dont il a besoin et avec qui il les partagera. </font><font style="vertical-align: inherit;">Toutes ces informations se trouvent sur l'appareil de l'utilisateur. </font><font style="vertical-align: inherit;">Mais pour le partage, nous avons besoin d'un syst√®me de stockage d√©centralis√© des preuves cryptographiques. </font><font style="vertical-align: inherit;">Toutes les impl√©mentations modernes du concept SSI utilisent la blockchain comme stockage.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Qu'est-ce que l'as dans ma manche?" - tu demandes. Nous avons lanc√© le service pour un test interne sur nos propres employ√©s √† Berlin et Bonn, et nous avons rencontr√© des difficult√©s face aux syndicats allemands. En Allemagne, il est interdit aux entreprises de surveiller les mouvements des employ√©s, et les syndicats contr√¥lent cela. Ces restrictions ont mis fin au stockage centralis√© des donn√©es d'identit√© des utilisateurs, car dans ce cas, nous aurions connu l'emplacement des employ√©s. Dans le m√™me temps, nous n'avons pas pu les v√©rifier en raison de la possibilit√© de d√©tourner des scooters. Mais gr√¢ce √† l'auto-identit√© souveraine, nos utilisateurs ont utilis√© le syst√®me de mani√®re anonyme, et le scooter lui-m√™me a v√©rifi√© la disponibilit√© d'un permis de conduire avant de commencer la location. En cons√©quence, nous avons conserv√© des statistiques d'utilisateurs anonymes, nous n'avions aucun document ni aucune donn√©e personnelle: elles √©taient toutes stock√©es sur les appareils des conducteurs eux-m√™mes.Ainsi, gr√¢ce √† SSI, la solution au probl√®me de notre projet √©tait pr√™te avant m√™me son apparition.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'appareil a provoqu√© des probl√®mes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous n'avons pas impl√©ment√© l'auto-identit√© souveraine, car cela n√©cessite une expertise en cryptographie et beaucoup de temps. </font><font style="vertical-align: inherit;">Au lieu de cela, nous avons profit√© du produit de nos partenaires Jolocom et int√©gr√© leur portefeuille mobile et leurs services dans notre plateforme. </font><font style="vertical-align: inherit;">Malheureusement, ce produit pr√©sente un inconv√©nient majeur: le principal langage de d√©veloppement est Node.js. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une telle pile technologique nous limite beaucoup dans le choix du fer int√©gr√© dans un scooter. </font><font style="vertical-align: inherit;">Heureusement, au tout d√©but du projet, notre choix s'est port√© sur le Raspberry Pi Zero, et nous avons profit√© du micro-ordinateur √† part enti√®re. </font><font style="vertical-align: inherit;">Cela nous a permis d'ex√©cuter le Node.js encombrant sur un scooter. </font><font style="vertical-align: inherit;">De plus, nous avons obtenu la surveillance et l'acc√®s √† distance via vpn en utilisant des outils pr√™ts √† l'emploi.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">finalement</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malgr√© toute la ¬´douleur¬ª et les probl√®mes, le projet a √©t√© lanc√©. </font><font style="vertical-align: inherit;">Tout n'a pas fonctionn√© comme pr√©vu, mais il √©tait vraiment possible de monter des scooters en les louant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, nous avons commis un certain nombre d'erreurs dans la conception de l'architecture, ce qui ne nous a pas permis de d√©centraliser compl√®tement le service, mais m√™me sans ces erreurs, nous n'aurions gu√®re r√©ussi √† cr√©er une plateforme sans serveur. </font><font style="vertical-align: inherit;">C'est une chose d'√©crire une autre crypto-pyramide et une autre est un service √† part enti√®re dans lequel vous devez g√©rer les erreurs, r√©soudre les cas de fronti√®re et effectuer des t√¢ches en attente. </font><font style="vertical-align: inherit;">Esp√©rons que les nouvelles plates-formes r√©cemment apparues seront plus flexibles et fonctionnelles.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr490086/index.html">Guide de surf d√©butant ou vie de programmeur au Portugal</a></li>
<li><a href="../fr490088/index.html">Comment continuer √† cr√©er une carte dans UE4</a></li>
<li><a href="../fr490092/index.html">Andrei Zaretsky, Alexander Trukhanov: ¬´Le prix √©tait suffisant pour boire du caf√©¬ª</a></li>
<li><a href="../fr490094/index.html">Retour aux sources: nous pilotons un ordinateur directement depuis le MBR</a></li>
<li><a href="../fr490096/index.html">Un moyen facile de cr√©er un petit concentrateur USB pour Raspberry Pi</a></li>
<li><a href="../fr490102/index.html">wc √† D: 712 caract√®res sans une seule branche</a></li>
<li><a href="../fr490104/index.html">Pare-soleil intelligent de Bosch. Test de prototype</a></li>
<li><a href="../fr490110/index.html">Du d√©veloppeur au manager et inversement</a></li>
<li><a href="../fr490112/index.html">–ú–æ–Ω–∞–¥—ã –∫–∞–∫ –ø–∞—Ç—Ç–µ—Ä–Ω –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞</a></li>
<li><a href="../fr490114/index.html">Yandex.Practicum - Analyste de donn√©es. L'obtention du dipl√¥me</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>