<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙈 🧒🏾 🙋🏻 Développer un logiciel de location décentralisée de scooters. Qui a dit que ce serait facile? 😧 👂🏾 ↪️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, je parlerai de la façon dont nous avons essayé de construire une location de scooter décentralisée sur des contrats intelligents et ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Développer un logiciel de location décentralisée de scooters. Qui a dit que ce serait facile?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tsystems/blog/490100/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans cet article, je parlerai de la façon dont nous avons essayé de construire une location de scooter décentralisée sur des contrats intelligents et pourquoi nous avions encore besoin d'un service centralisé.</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/ry/kh/z5/rykhz5ioko9sidydvizts5ytasu.jpeg"><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment tout a commencé</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En novembre 2018, nous avons participé à un hackathon dédié à l'Internet des objets et à la blockchain. </font><font style="vertical-align: inherit;">Notre équipe a choisi le partage de scooter comme idée, car nous avions un scooter du sponsor de ce hackathon. </font><font style="vertical-align: inherit;">Le prototype ressemblait à une application mobile qui vous permet de faire fonctionner un scooter via NFC. </font><font style="vertical-align: inherit;">D'un point de vue marketing, l'idée a été renforcée par une histoire d'un «avenir radieux» avec un écosystème ouvert où chacun peut devenir locataire ou propriétaire, le tout basé sur des contrats intelligents.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos parties prenantes ont beaucoup aimé cette idée et ont décidé de la transformer en prototype de démonstration lors d'expositions. </font><font style="vertical-align: inherit;">Après plusieurs expositions réussies au Mobile World Congress et à Bosch Connected World en 2019, il a été décidé de tester la location de scooters sur de vrais utilisateurs, employés de Deutsche Telekom. </font><font style="vertical-align: inherit;">Nous avons donc commencé à développer un MVP à part entière.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaîne Blockchain</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je pense que cela ne vaut pas la peine d'expliquer quelle est la différence entre un projet à montrer sur scène et celui que de vraies personnes utiliseront. </font><font style="vertical-align: inherit;">Pendant six mois, nous avons dû transformer le prototype brut en quelque chose de convenable pour le pilote. </font><font style="vertical-align: inherit;">Et puis nous avons réalisé ce que signifie «douleur». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de rendre notre système décentralisé et ouvert, nous avons décidé d'utiliser les contrats intelligents Ethereum. </font><font style="vertical-align: inherit;">Le choix s'est porté sur cette plateforme de services en ligne décentralisés en raison de sa popularité et de sa capacité à construire une application sans serveur. </font><font style="vertical-align: inherit;">Nous avions prévu de mettre en œuvre notre projet comme suit.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/b6/yx/wl/b6yxwlzn-ajira5tnsiepupfwgk.png" width="300"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais, malheureusement, un contrat intelligent est un code exécuté par une machine virtuelle au moment d'une transaction, et il ne peut pas remplacer un serveur à part entière. Par exemple, un contrat intelligent ne peut pas exécuter des activités en attente ou planifiées. Dans notre projet, cela ne nous a pas permis de mettre en place le service de location à la minute, comme le font la plupart des voitures modernes. Par conséquent, nous avons déduit la crypto-monnaie de l'utilisateur après la fin de l'opération sans la certitude qu'il a suffisamment d'argent. Cette approche n'est acceptable que pour le pilote interne et, bien sûr, ajoute aux problèmes lors de la conception d'un projet de production à part entière.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À tout ce qui précède, l'humidité de la plate-forme elle-même est ajoutée. Par exemple, en écrivant un contrat intelligent avec une logique autre que des jetons ERC-20, vous rencontrerez le problème de la gestion des erreurs. Habituellement, avec une entrée incorrecte ou un fonctionnement incorrect de nos méthodes, nous obtenons un code d'erreur en réponse. Dans le cas d'Ethereum, nous ne pouvons obtenir que la quantité de gaz dépensée pour remplir cette fonction. Le gaz est la devise dont vous avez besoin pour payer les transactions et les calculs: plus il y a de transactions dans votre code, plus vous payez. Par conséquent, pour comprendre pourquoi le code ne fonctionne pas, vous devez d'abord le tester, simuler toutes les erreurs possibles et coder en dur le gaz usé comme code d'erreur. Mais si vous modifiez votre code, cette gestion des erreurs sera interrompue.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, il est presque impossible de créer une application mobile qui fonctionne honnêtement avec la blockchain, sans utiliser une clé stockée quelque part dans le cloud. Bien que les portefeuilles honnêtes existent, ils ne fournissent pas d'interfaces pour signer des transactions externes. Cela signifie que vous ne verrez pas l'application native si elle n'a pas de portefeuille crypté intégré, auquel les utilisateurs auront peu confiance (je ne ferais pas confiance). En conséquence, ici, nous avons également dû couper un coin. Des contrats intelligents ont été livrés au réseau privé Ethereum et le portefeuille était nuageux. Mais malgré cela, nos utilisateurs ont ressenti tous les «charmes» des services décentralisés sous la forme d'une longue attente de transactions plusieurs fois par session de location. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout cela nous amène à cette architecture. D'accord, c'est très différent de ce que nous avions prévu.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/eh/e0/eg/ehe0egtt1jpdk8siidr7ykabelm.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ace dans votre manche: identité auto-souveraine </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous ne pouvez pas construire un système entièrement décentralisé sans identification décentralisée. </font><font style="vertical-align: inherit;">L'identité auto-souveraine (SSI) est responsable de cette partie, dont l'essence est que vous jetez un fournisseur d'identité centralisé (IDP) et distribuez aux gens toutes les données et leur responsabilité. </font><font style="vertical-align: inherit;">L'utilisateur décide maintenant des données dont il a besoin et avec qui il les partagera. </font><font style="vertical-align: inherit;">Toutes ces informations se trouvent sur l'appareil de l'utilisateur. </font><font style="vertical-align: inherit;">Mais pour le partage, nous avons besoin d'un système de stockage décentralisé des preuves cryptographiques. </font><font style="vertical-align: inherit;">Toutes les implémentations modernes du concept SSI utilisent la blockchain comme stockage.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Qu'est-ce que l'as dans ma manche?" - tu demandes. Nous avons lancé le service pour un test interne sur nos propres employés à Berlin et Bonn, et nous avons rencontré des difficultés face aux syndicats allemands. En Allemagne, il est interdit aux entreprises de surveiller les mouvements des employés, et les syndicats contrôlent cela. Ces restrictions ont mis fin au stockage centralisé des données d'identité des utilisateurs, car dans ce cas, nous aurions connu l'emplacement des employés. Dans le même temps, nous n'avons pas pu les vérifier en raison de la possibilité de détourner des scooters. Mais grâce à l'auto-identité souveraine, nos utilisateurs ont utilisé le système de manière anonyme, et le scooter lui-même a vérifié la disponibilité d'un permis de conduire avant de commencer la location. En conséquence, nous avons conservé des statistiques d'utilisateurs anonymes, nous n'avions aucun document ni aucune donnée personnelle: elles étaient toutes stockées sur les appareils des conducteurs eux-mêmes.Ainsi, grâce à SSI, la solution au problème de notre projet était prête avant même son apparition.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'appareil a provoqué des problèmes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous n'avons pas implémenté l'auto-identité souveraine, car cela nécessite une expertise en cryptographie et beaucoup de temps. </font><font style="vertical-align: inherit;">Au lieu de cela, nous avons profité du produit de nos partenaires Jolocom et intégré leur portefeuille mobile et leurs services dans notre plateforme. </font><font style="vertical-align: inherit;">Malheureusement, ce produit présente un inconvénient majeur: le principal langage de développement est Node.js. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une telle pile technologique nous limite beaucoup dans le choix du fer intégré dans un scooter. </font><font style="vertical-align: inherit;">Heureusement, au tout début du projet, notre choix s'est porté sur le Raspberry Pi Zero, et nous avons profité du micro-ordinateur à part entière. </font><font style="vertical-align: inherit;">Cela nous a permis d'exécuter le Node.js encombrant sur un scooter. </font><font style="vertical-align: inherit;">De plus, nous avons obtenu la surveillance et l'accès à distance via vpn en utilisant des outils prêts à l'emploi.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">finalement</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malgré toute la «douleur» et les problèmes, le projet a été lancé. </font><font style="vertical-align: inherit;">Tout n'a pas fonctionné comme prévu, mais il était vraiment possible de monter des scooters en les louant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, nous avons commis un certain nombre d'erreurs dans la conception de l'architecture, ce qui ne nous a pas permis de décentraliser complètement le service, mais même sans ces erreurs, nous n'aurions guère réussi à créer une plateforme sans serveur. </font><font style="vertical-align: inherit;">C'est une chose d'écrire une autre crypto-pyramide et une autre est un service à part entière dans lequel vous devez gérer les erreurs, résoudre les cas de frontière et effectuer des tâches en attente. </font><font style="vertical-align: inherit;">Espérons que les nouvelles plates-formes récemment apparues seront plus flexibles et fonctionnelles.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr490086/index.html">Guide de surf débutant ou vie de programmeur au Portugal</a></li>
<li><a href="../fr490088/index.html">Comment continuer à créer une carte dans UE4</a></li>
<li><a href="../fr490092/index.html">Andrei Zaretsky, Alexander Trukhanov: «Le prix était suffisant pour boire du café»</a></li>
<li><a href="../fr490094/index.html">Retour aux sources: nous pilotons un ordinateur directement depuis le MBR</a></li>
<li><a href="../fr490096/index.html">Un moyen facile de créer un petit concentrateur USB pour Raspberry Pi</a></li>
<li><a href="../fr490102/index.html">wc à D: 712 caractères sans une seule branche</a></li>
<li><a href="../fr490104/index.html">Pare-soleil intelligent de Bosch. Test de prototype</a></li>
<li><a href="../fr490110/index.html">Du développeur au manager et inversement</a></li>
<li><a href="../fr490112/index.html">Монады как паттерн переиспользования кода</a></li>
<li><a href="../fr490114/index.html">Yandex.Practicum - Analyste de données. L'obtention du diplôme</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>