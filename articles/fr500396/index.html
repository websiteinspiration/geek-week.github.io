<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👊🏽 👨‍👦‍👦 👩‍👩‍👦‍👦 Problèmes des systèmes de contrôle d'accès autonomes - Où ils ne s'attendaient pas 💅🏾 👮 📥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonne journée à tous. Je vais commencer par le contexte sur ce qui m'a incité à mener cette étude, mais je vais d'abord vous avertir: toutes les actio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Problèmes des systèmes de contrôle d'accès autonomes - Où ils ne s'attendaient pas</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500396/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonne journée à tous. Je vais commencer par le contexte sur ce qui m'a incité à mener cette étude, mais je vais d'abord vous avertir: toutes les actions pratiques ont été réalisées avec le consentement des structures dirigeantes. Toute tentative d'utiliser ce matériel pour entrer dans un territoire fermé sans le droit d'y être constitue une infraction pénale. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout a commencé avec le fait que lorsque je nettoyais la table, j'ai accidentellement mis la clé RFID à l'entrée du lecteur NFC ACR122 - quelle a été ma surprise lorsque Windows a émis le son de la détection d'un nouvel appareil et que la LED est devenue verte. Jusqu'à présent, je pensais que ces clés fonctionnaient exclusivement dans le standard de proximité.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ly/7t/yr/ly7tyrpzkzrzju1c25dwlmxyhts.jpeg" alt="image"></div><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Mais une fois que le lecteur l'a vu, cela signifie que la clé répond à l'un des protocoles en plus de la norme ISO 14443 (c'est la communication en champ proche, 13,56 MHz). Le nettoyage a été immédiatement oublié, car j'ai vu l'opportunité de me débarrasser complètement du porte-clés, et de garder la clé à l'entrée du téléphone (l'appartement est depuis longtemps équipé d'une serrure électronique). En semant l'étude, j'ai découvert que sous le plastique se trouve le tag NFC Mifare 1k - le même modèle que dans les badges, badges d'entreprises, cartes de transport, etc. Les tentatives d'entrer dans le contenu des secteurs au début n'ont pas porté leurs fruits, mais lorsque la clé a encore pu être craquée, il s'est avéré que seul le 3e secteur était utilisé et l'UID de la puce elle-même y était dupliqué. Cela avait l'air trop simple, et il s'est avéré qu'il n'y aurait pas d'article si tout se déroulait exactement comme prévu. J'ai donc obtenu les abats clés, et il n'y a pas de problème,si vous devez copier la clé sur une autre. Mais la tâche consistait à transférer la clé sur un appareil mobile, ce que j'ai fait. C'est là que le plaisir a commencé - nous avons un téléphone -</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iPhone SE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iOS 13.4.5 Beta build 17F5044d installé</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et certains composants personnalisés pour le travail sans NFC - je ne m'y attarderai pas pour des raisons objectives. </font><font style="vertical-align: inherit;">Si vous le souhaitez, toutes les conditions suivantes s'appliquent au système Android, mais avec quelques simplifications. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La liste des tâches à résoudre:</font></font></b><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Accédez au contenu de la clé.</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implémentez la possibilité d'émuler un périphérique clé.</font></font></b></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Si le premier était relativement simple, alors le second avait des problèmes. La première version de l'émulateur n'a pas fonctionné. Le problème a été rapidement détecté - pour les appareils mobiles (iOS, Android) en mode émulation - l'UID est dynamique et indépendamment de ce qui est câblé dans l'image, il flotte. La deuxième version (exécutée en tant que superutilisateur) a fixé de manière rigide le numéro de série sur celui sélectionné - la porte s'est ouverte. Cependant, je voulais tout faire parfaitement, et au final j'ai mis au point une version complète de l'émulateur qui pourrait ouvrir les vidages Mifare et les émuler. Cédant à une impulsion soudaine, j'ai changé les clés des secteurs en arbitraire, et j'ai essayé d'ouvrir la porte. Et elle ... </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OUVERTE!</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Après un certain temps, j'ai réalisé que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tout</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">portes avec cette serrure, même celles auxquelles la clé d'origine ne correspondait pas. </font><font style="vertical-align: inherit;">À cet égard, j'ai formé une nouvelle liste de tâches à effectuer:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Découvrez quel contrôleur est responsable du travail avec les clés</font></font></b> </li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comprendre s'il existe une connexion réseau et une base commune</font></font></b> </li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Découvrez pourquoi une clé pratiquement illisible devient universelle</font></font></b> </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir parlé avec l'ingénieur de la société de gestion, j'ai découvert que de simples contrôleurs Iron Logic z5r sont utilisés sans se connecter à un réseau externe.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lecteur CP-Z2 MF et contrôleur IronLogic z5r</font></font></b>
                        <div class="spoiler_text">      :<br>
<br>
<img src="https://habrastorage.org/webt/tu/-t/c9/tu-tc9uc7txys8sxcyrwxgy0niu.jpeg" alt="image"><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme il est clair d'ici - le système est complètement autonome et extrêmement primitif. </font><font style="vertical-align: inherit;">Au début, je pensais que le contrôleur était en mode d'apprentissage - ce qui signifie qu'il lit la clé, la stocke dans la mémoire et ouvre la porte - ce mode est utilisé lorsque vous devez enregistrer toutes les clés, par exemple lors du remplacement de la serrure dans un immeuble. </font><font style="vertical-align: inherit;">Mais cette théorie n'a pas été confirmée - ce mode est désactivé par le logiciel, le cavalier est en position de travail - et néanmoins, lorsque nous montons l'appareil, nous voyons ce qui suit:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capture d'écran du processus d'émulation sur l'appareil</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/fr/sw/fn/frswfn3yvw-xmuv9qr2qdnlml5y.jpeg" alt="image"><br>
…        .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le problème réside donc dans le logiciel du contrôleur ou du lecteur. </font><font style="vertical-align: inherit;">Vérifions le lecteur - cela fonctionne en mode iButton, nous allons donc connecter la carte de sécurité Bolid - nous aurons l'occasion de voir la sortie du lecteur.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La carte sera ensuite connectée via RS232</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/15/_m/xk/15_mxkazcejs0gbucc_zjofmpsy.jpeg" alt="image"><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En utilisant la méthode de plusieurs tests, nous constatons que le lecteur diffuse le même code avec en cas d'échec d'autorisation: 1219191919 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La situation commence à s'éclaircir, mais pour le moment je ne comprends pas pourquoi le contrôleur répond positivement à ce code. Il y a une hypothèse - que lorsqu'ils ont rempli la base de données - accidentellement ou spécialement apporté une carte avec d'autres clés de secteur - le lecteur a envoyé ce code et le contrôleur l'a enregistré. Malheureusement, je n'ai pas de programmeur propriétaire d'IronLogic pour examiner la base de données des clés du contrôleur, mais j'espère avoir réussi à attirer l'attention sur le fait que le problème existe. Une vidéo de démonstration de l'utilisation de cette vulnérabilité est disponible </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS Contre la théorie avec un ajout aléatoire est le fait que dans le même centre d'affaires à Krasnoyarsk, j'ai également réussi à ouvrir la porte par la même méthode.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr500380/index.html">Traitement à distance des données personnelles: risques et conséquences possibles</a></li>
<li><a href="../fr500382/index.html">Intégration d'API Aviasales avec Amazon Kinesis et simplicité sans serveur</a></li>
<li><a href="../fr500384/index.html">Pixar Studio Pioneers a reçu le prix Turing et 1 million de dollars</a></li>
<li><a href="../fr500386/index.html">Adapter votre solution commerciale existante pour SwiftUI. Partie 2</a></li>
<li><a href="../fr500390/index.html">Modèles réels de localisation linguistique dans le domaine de l'informatique et des communications numériques. Partie 1</a></li>
<li><a href="../fr500398/index.html">Remote Marathon Week 3: Processus inopérants</a></li>
<li><a href="../fr500400/index.html">Fil de coupe: migration de Puppet Enterprise vers Ansible Tower. Partie 1</a></li>
<li><a href="../fr500402/index.html">[Partie 1/2] Guide de FFmpeg et SDL ou Comment écrire un lecteur vidéo en moins de 1000 lignes</a></li>
<li><a href="../fr500404/index.html">Comment se faire des amis Electron et Webix. Partie 2. Créez une application avec votre vue</a></li>
<li><a href="../fr500406/index.html">L'histoire de la première paralysie d'Internet: la malédiction du signal occupé</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>