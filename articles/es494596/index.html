<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ß üòü ‚úãüèº C√≥mo crear un modelo de transporte multiagente ‚≠êÔ∏è üë©üèΩ‚Äçüî¨ ü§ß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! 
 
 Imagine que tenemos la tarea de construir un nuevo camino. Puede construir una carretera con dos carriles en cada direcci√≥n, pero ¬øqu√© ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>C√≥mo crear un modelo de transporte multiagente</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494596/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hola Habr! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine que tenemos la tarea de construir un nuevo camino. Puede construir una carretera con dos carriles en cada direcci√≥n, pero ¬øqu√© pasa si esto no es suficiente? O, por el contrario, resulta que una franja ser√≠a suficiente, pero para la implementaci√≥n del proyecto fue necesario comprar muchas parcelas. En ambos casos, la decisi√≥n ser√° ineficaz. Para minimizar tales riesgos, los planificadores de transporte recurren al modelado por computadora en busca de ayuda. Este art√≠culo es una breve digresi√≥n al mundo del modelado multiagente.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bq/k0/kj/bqk0kjbb814y7q7twu1uvqk3yf4.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando el modelo, que es una copia del sistema de transporte real, puede estimar el rendimiento necesario en cada secci√≥n de la carretera proyectada, probar diferentes opciones de rastreo o, por ejemplo, estimar el per√≠odo de recuperaci√≥n de un proyecto si se trata de una carretera de peaje en el marco de una asociaci√≥n p√∫blico-privada. Pero se pueden resolver otras tareas importantes: c√≥mo organizar rutas de transporte p√∫blico √≥ptimas y calcular los ingresos potenciales de los operadores, c√≥mo evaluar la presencia de escasez de espacios de estacionamiento en un √°rea en particular y muchos otros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Lo m√°s interesante es que cualquiera puede construir un modelo similar en la era del software libre! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una de las herramientas de modelado multiagente m√°s comunes es el c√≥digo abierto.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MATSim (Simulaci√≥n de transporte multiagente)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MATSim simula el comportamiento de agentes individuales. Un agente es una representaci√≥n inform√°tica de un individuo en el mundo real. Cada uno de estos agentes tiene un plan diario, en base al cual se mueve de una actividad a otra (por ejemplo, hogar-trabajo-hogar, hogar-instituto-trabajo-hogar, hogar-tienda-trabajo1-trabajo2-hogar, etc.), creando De ah√≠ la demanda de infraestructura vial. Una representaci√≥n esquem√°tica del plan diario se ve as√≠:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n6/xt/m_/n6xtm_ps8u0stk6f8doybvsxzq8.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para crear planes realistas para los agentes que reflejen el comportamiento real de las personas durante el d√≠a, se tiene en cuenta el n√∫mero total de agentes residentes, su reasentamiento, lugares de trabajo, estudio, ubicaci√≥n de tiendas, centros comerciales, estaciones de tren y otros lugares de actividad. Para validar la demanda, el modelo tambi√©n se calibra en base a encuestas de campo: reconocimiento y c√°lculo de los flujos de c√°maras de vigilancia y drones utilizando una red neuronal o, por ejemplo, mediciones manuales de intensidad en carreteras.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0x/t-/ke/0xt-kelsnwf39k3mmu2saye2zky.gif" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante la simulaci√≥n, los agentes se distribuyen a trav√©s de la red, imitando el comportamiento realista de las personas: implementando su plan, los autom√≥viles ocupan un lugar en la carretera y espacios de estacionamiento, los usuarios del transporte p√∫blico toman lugar en el autob√∫s y tambi√©n interact√∫an entre s√≠ y, si muchos agentes seleccionan una carretera a la vez, se crean embotellamientos y congesti√≥n. ¬°Todo es como en el mundo real! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez que se completa la simulaci√≥n, se realiza una evaluaci√≥n del cumplimiento de los planes diarios de los agentes, llamado puntaje. El agente adquiere unidades de utilidad en el proceso de actividad y las pierde durante el movimiento. En consecuencia, los agentes atrapados en un embotellamiento pierden m√°s unidades de servicios p√∫blicos que los agentes que se mueven por las carreteras libres.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de cada iteraci√≥n, algunos agentes reconstruyen su plan en funci√≥n de la informaci√≥n sobre la carga de la red de carreteras para mejorar su rendimiento: los agentes pueden cambiar la hora de salida, cambiar el modo de transporte o cambiar la ruta. </font><font style="vertical-align: inherit;">Los agentes restantes se adhieren a sus planes anteriores, que se almacenan en la memoria del programa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Idealmente, despu√©s de la simulaci√≥n, se debe lograr un equilibrio de Nash, es decir, una situaci√≥n en la que ning√∫n agente pueda mejorar su posici√≥n sin empeorar la posici√≥n de otros agentes. </font><font style="vertical-align: inherit;">Por lo general, esta es la situaci√≥n que se desarrolla con el tiempo en las carreteras de la ciudad, dado el replanteamiento diario de la experiencia del d√≠a anterior por parte de sus residentes. </font><font style="vertical-align: inherit;">Para esto, se realizan al menos 200 iteraciones en el marco de un escenario. </font><font style="vertical-align: inherit;">Todo el ciclo de trabajo de MATSim se ve as√≠:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mr/zv/ds/mrzvds3njmsli5hbkiqvzhnuoju.png" alt="imagen"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°De la teor√≠a a la pr√°ctica! </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para ejecutar el primer escenario, necesitamos Intellij IDEA (o Eclipse) con Java 1.8 a bordo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Abrimos el IDE, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clonamos el repositorio MATSim</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> del github y nuestro primer escenario est√° listo para ejecutarse! </font><font style="vertical-align: inherit;">Tan sencillo. </font><font style="vertical-align: inherit;">Pero primero veamos qu√© archivos de entrada usamos. </font><font style="vertical-align: inherit;">Para la simulaci√≥n m√°s simple, hay tres de ellos: red, planes, configuraci√≥n.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Red</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El archivo de red es la red en la que se mueven los agentes. </font><font style="vertical-align: inherit;">Se compone de nodos y nodos / enlaces. </font><font style="vertical-align: inherit;">Cada enlace tiene diferentes atributos: tipo, longitud del segmento, ancho de banda, velocidad m√°xima, n√∫mero de carriles, tr√°fico unidireccional, modos de transporte permitidos, etc. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_n/5p/rx/_n5prxnenyiuei82fndy2uekigy.jpeg" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Crear una cuadr√≠cula de ciudad manualmente es dif√≠cil, poco pr√°ctico e ineficiente. </font><font style="vertical-align: inherit;">Por ejemplo, nuestra red de San Petersburgo consta de 26 mil nodos y 46 mil enlaces. </font><font style="vertical-align: inherit;">Pero hay buenas noticias. </font><font style="vertical-align: inherit;">La cuadr√≠cula se puede convertir de OpenStreetMap y luego editar con JOSM, que tambi√©n es de c√≥digo abierto.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Planes</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El archivo de planes es una representaci√≥n estructurada de los planes diarios de los agentes. </font><font style="vertical-align: inherit;">En el escenario inicial, tenemos 100 agentes que salen en autom√≥vil (modo = "autom√≥vil") por la ma√±ana (end_time = "05:59") desde su casa (tipo = "h", enlace = "1") para trabajar (tipo = "W", enlace = "20"), despu√©s de lo cual despu√©s de un tiempo (dur = "02:30") regresan a casa.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8g/vh/sp/8gvhsph0hfmjwzpfspy0liqv7xo.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Config</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, en el archivo de configuraci√≥n, todas las configuraciones necesarias se configuran para ejecutar el script. </font><font style="vertical-align: inherit;">MATSim consta de m√≥dulos que puede personalizar, agregar o eliminar seg√∫n sea necesario. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muchas de las configuraciones en el archivo de configuraci√≥n son intuitivas, pero tambi√©n siempre puede examinar el llamado. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MATSim Book</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ahora consideraremos solo dos m√≥dulos.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el m√≥dulo planCalcScore, se establecen par√°metros de puntuaci√≥n: por ejemplo, para llegadas tard√≠as, el agente recibe una multa de 18 unidades. </font><font style="vertical-align: inherit;">utilidad por hora (respectivamente, llegar tarde 10 minutos equivale a perder 3 unidades de utilidad); </font><font style="vertical-align: inherit;">realizar alguna actividad (por ejemplo, realizar) aporta 6 unidades de utilidad por hora, y conducir un autom√≥vil cuesta las mismas 6 unidades de utilidad por hora. Para buscar par√°metros de puntaje realistas, las encuestas de opini√≥n se utilizan con mayor frecuencia para analizar el "costo tiempo ". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el m√≥dulo de estrategia, los par√°metros de re-planificaci√≥n se configuran, por ejemplo, qu√© porcentaje de los agentes (ModuleProbability) probar√° la nueva ruta (ReRoute) durante la pr√≥xima iteraci√≥n. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dc/jf/yo/dcjfyoldbtrsg_zgrydyrrkc6ce.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, el objetivo de la simulaci√≥n es ayudar al agente a llegar del punto A al punto B al menor costo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Script ejecutado</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Es hora de abrir RunMatsim runner y ejecutar nuestro primer script! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los resultados de la simulaci√≥n estar√°n en la carpeta de salida en la ra√≠z del proyecto. Los archivos principales para la visualizaci√≥n son redes y eventos. El archivo de eventos contiene informaci√≥n por segundo sobre todas las acciones de cada agente, por lo tanto, en funci√≥n de este archivo, puede restaurar la imagen completa del movimiento de todos los agentes. Puede visualizar los resultados usando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para obtener resultados m√°s representativos, aumentar√© el n√∫mero de agentes a 500. As√≠ es como se ve la distribuci√≥n de 500 agentes despu√©s de la primera iteraci√≥n ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/by/o3/zk/byo3zk14bt0yj1y7od2sth35nok.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al comienzo de la iteraci√≥n, los agentes calcularon la forma m√°s corta usando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dijkstra</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado, la intensidad del tr√°fico en una secci√≥n de la red excedi√≥ su rendimiento, se form√≥ una congesti√≥n. </font><font style="vertical-align: inherit;">Pero, ¬øqu√© pasa si les das la oportunidad de probar diferentes rutas? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7l/_j/5_/7l_j5_q_n2g3roivtbnht8iwqfq.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de 200 iteraciones (~ 5 minutos), los agentes se redistribuyeron a trav√©s de la red, el nivel de carga del enlace ahora no supera 0.5, y el tiempo de viaje promedio para todos los agentes disminuy√≥ en un 14% (5 minutos). </font><font style="vertical-align: inherit;">¬°Hurra, hemos superado el corcho! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Oh, si fuera as√≠ de simple! </font><font style="vertical-align: inherit;">En realidad, los sistemas de transporte son mucho m√°s complicados. </font><font style="vertical-align: inherit;">En los siguientes art√≠culos les contar√© c√≥mo particip√© en el desarrollo de modelos de San Petersburgo y otras ciudades y c√≥mo resolvimos problemas pr√°cticos en casos reales. </font><font style="vertical-align: inherit;">Scientia potentia est! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cj/v-/t0/cjv-t0plurhha0_szf4vhthcubo.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Publicado por Andrey Kolomatsky, analista de transporte de OTSLab.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es494580/index.html">Fractales en la arena, o m√°s de tres no se juntan</a></li>
<li><a href="../es494582/index.html">Microsoft ya no emitir√° certificados MCSE / MCSD / MCSA</a></li>
<li><a href="../es494586/index.html">Programaci√≥n funcional como ejemplo de trabajo con matrices desde la teor√≠a del √°lgebra lineal.</a></li>
<li><a href="../es494590/index.html">Coronavirus: la apoteosis del p√°nico</a></li>
<li><a href="../es494592/index.html">L√°ser de vapor de manganeso casero</a></li>
<li><a href="../es494598/index.html">Investigadores de Stanford han desarrollado un exoesqueleto para correr</a></li>
<li><a href="../es494600/index.html">Crear un bot de Discord simple usando la biblioteca discord.py</a></li>
<li><a href="../es494604/index.html">Caja de esterilizaci√≥n UV para reutilizar m√°scaras desechables</a></li>
<li><a href="../es494606/index.html">C√≥mo observar la luna y los planetas.</a></li>
<li><a href="../es494608/index.html">Prepar√°ndose para Ludum Dare</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>