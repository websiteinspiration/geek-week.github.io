<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëèüèª üé∫ üëêüèº Microservices ou syst√®mes modulaires? Comment un client peut-il choisir une approche de l'architecture informatique d'un produit üëßüèø üôçüèæ ‚§µÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les microservices et les syst√®mes modulaires sont des types d'architecture de solutions informatiques.
 Lorsque nous travaillons avec des modules, nou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Microservices ou syst√®mes modulaires? Comment un client peut-il choisir une approche de l'architecture informatique d'un produit</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497248/"><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les microservices et les syst√®mes modulaires sont des types d'architecture de solutions informatiques.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque nous travaillons avec des modules, nous finalisons une version bo√Æte d'un produit informatique existant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par version en bo√Æte, nous entendons un monolithe, un syst√®me pr√™t √† l'emploi avec un noyau qui est livr√© √† tous les clients de la m√™me mani√®re, "tel quel". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le raffinement consiste √† cr√©er des modules avec des fonctionnalit√©s manquantes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous obtenons de nouveaux modules en r√©utilisant des parties du monolithe (noyau ou autres modules). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La logique m√©tier est √©crite √† l'int√©rieur du monolithe: pour un programme (application, site, portail) il y a un point d'entr√©e et un point de sortie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque nous travaillons avec des microservices, nous cr√©ons un produit informatique √† partir de z√©ro, en le composant √† partir de ¬´briques¬ª - des microservices atomiques qui sont responsables d'un petit processus distinct (envoyer une lettre, recevoir des informations sur la commande, modifier le statut de la commande, cr√©er un client, etc.).</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un ensemble de ces blocs est combin√© par la logique m√©tier dans un syst√®me commun (par exemple, en utilisant BPMS). </font><font style="vertical-align: inherit;">Malgr√© la pr√©sence de connexions, chaque bloc est autonome et poss√®de ses propres points d'entr√©e et de sortie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La plupart des produits informatiques pour nos clients commencent par un d√©veloppement modulaire. </font><font style="vertical-align: inherit;">Certains d'entre eux √©voluent avec le temps vers des microservices. </font><font style="vertical-align: inherit;">Pour l'autre partie, les microservices ne sont pas n√©cessaires. </font><font style="vertical-align: inherit;">Dans cet article, nous examinerons pourquoi il en est exactement ainsi et quels crit√®res aident √† d√©terminer s'il est n√©cessaire d'impl√©menter des microservices ou si vous devez vous limiter √† travailler avec des modules.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e49/d21/b9e/e49d21b9e7d70c040a3d7ce537b94c19.jpg" alt="image"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avantages de l'architecture modulaire</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous les syst√®mes CMS (Bitrix, Magento, Drupal, Hybris, etc.), CRM, ERP, WMS et bien d'autres ont des versions en bo√Æte. </font><font style="vertical-align: inherit;">Ils se vendent bien et sont tr√®s demand√©s. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons ces raisons objectives pour lesquelles les clients choisissent le plus souvent de travailler avec une architecture modulaire et d'acheter volontiers des solutions en bo√Æte.</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rapidit√© de mise en ≈ìuvre L'</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
installation, la configuration et le remplissage des r√©pertoires de ces logiciels prennent un peu de temps. </font><font style="vertical-align: inherit;">Il est r√©aliste pour une entreprise de taille moyenne de commencer √† travailler avec une bo√Æte trois √† quatre mois apr√®s le d√©but, parfois m√™me un peu plus t√¥t. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour les petites entreprises, cette p√©riode ne peut √™tre que de quelques jours.</font></font></li>
<li><b> </b><br>
<br>
     . ,       enterprise-   .</li>
<li><b>     </b><br>
<br>
       .            . ,       ,                  ,     .</li>
<li><b> ,  </b><br>
<br>
             .    ,        .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe d'autres facteurs subjectifs qui peuvent √™tre trompeurs et influencer la d√©cision d'utiliser des bo√Ætes et des modules. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Course des fabricants</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Les vendeurs de logiciels convainquent chaleureusement les clients que leur solution pr√™te √† l'emploi est la bonne: elle a √©t√© test√©e pendant des ann√©es, et √† la mode, et en entreprise, et populaire, et marketing ... Tout fournisseur: Bitrix, Magento, SAP, Oracle, OpenCart, Django et tout le monde travaille dur sur les techniques de marketing et de vente. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Id√©e fausse sur la complexit√© des am√©liorations</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Les clients sont souvent pleins d'optimisme. Ils choisissent un logiciel en bo√Æte et pensent: ¬´Oui, des am√©liorations seront n√©cessaires. Mais c'est facile: vous n'avez pas √† inventer quelque chose de nouveau. Nous avons une version populaire, mais des millions d'utilisateurs ne peuvent pas faire d'erreurs et acheter un mauvais produit. ¬ª</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä leur avis, le processus de raffinement ressemble √† ceci: il existe une fonctionnalit√© principale (encadr√©e). Pour "terminer" quelque chose, les d√©veloppeurs devront "simplement" red√©finir le module ou √©crire rapidement le leur. Dans ce cas, il n'est pas n√©cessaire d'utiliser des m√©thodes r√©p√©t√©es, car tout est cens√© √™tre pens√© dans le monolithe: des m√©thodes communes de calcul des taxes sont prescrites, il existe des r√®gles claires pour l'√©criture des modes de livraison et de paiement, un flux de travail clair des commandes, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la vraie vie, les choses sont diff√©rentes. Et apr√®s des √©motions agr√©ables depuis le d√©but facile de travailler avec la bo√Æte, les clients sont toujours confront√©s √† une dure r√©alit√©. Le plus souvent, cela se produit avec des entreprises de moyennes et grandes entreprises, dont les projets ont une logique commerciale unique, et des am√©liorations √† grande √©chelle sont n√©cessaires.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si votre entreprise est une petite entreprise et que le logiciel n'est pas votre principal atout, une solution en bo√Æte populaire (ou mieux - un cloud) vous conviendra tr√®s probablement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons les probl√®mes que vous pouvez rencontrer lorsque vous travaillez avec une architecture modulaire et comment les microservices aident √† √©viter cela.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probl√®mes des syst√®mes modulaires</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le principal probl√®me est que tous les syst√®mes modulaires ne sont pas con√ßus pour red√©finir s√©rieusement la fonctionnalit√©. </font><font style="vertical-align: inherit;">Ils ont une bo√Æte, des modules pr√™ts √† l'emploi - il vaut mieux les utiliser. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plus la taille du projet et la complexit√© de leurs personnalisations seront proches du niveau de l'entreprise, plus la r√©alisation des modules posera de probl√®mes. </font><font style="vertical-align: inherit;">Parlons des principaux.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probl√®me n ¬∞ 1. Le c≈ìur du syst√®me devient un point de d√©c√©l√©ration et la modularit√© devient une complication inutile.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons que votre projet soit associ√© √† une logique d'entrep√¥t complexe. Si vous choisissez une architecture modulaire, les d√©veloppeurs n'ont pas seulement besoin de cr√©er des fonctionnalit√©s pour g√©rer ces entrep√¥ts - ils doivent red√©finir ou √©tendre le module multic≈ìur, qui, √† son tour, utilise des m√©thodes de noyau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, il est n√©cessaire de prendre en compte la logique complexe des retours aux entrep√¥ts: d√©pendance vis-√†-vis des √©v√©nements du syst√®me CRM, circulation des marchandises entre les catalogues, etc. Il convient √©galement de consid√©rer la logique cach√©e associ√©e au retour des fonds, aux points bonus, etc.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque tant de red√©finitions se produisent, le monolithe change consid√©rablement. </font><font style="vertical-align: inherit;">Il est important de se rappeler que la relation entre le volume de nouvelles fonctionnalit√©s et le nombre de modules est non lin√©aire: pour ajouter une fonction, vous devez soit apporter des modifications √† plusieurs modules, chacun changeant le fonctionnement de l'autre, soit red√©finir un grand nombre de m√©thodes d'autres modules dans le nouveau module, ce qui ne change pas l'essence. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s toutes les modifications, le syst√®me devient si compliqu√© qu'un nombre ind√©cemment important d'heures sera n√©cessaire pour ajouter les personnalisations suivantes.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/2d3/82f/0de/2d382f0de298b267b9e3ce6ca8f2fd58.webp" alt="image"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probl√®me n ¬∞ 2. Le principe de l'auto-documentation n'est pas pris en charge dans les syst√®mes modulaires.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La documentation des syst√®mes modulaires est difficile √† maintenir √† jour. </font><font style="vertical-align: inherit;">C'est beaucoup et cela devient obsol√®te √† chaque changement. </font><font style="vertical-align: inherit;">L'affinement d'un module implique des modifications dans plusieurs autres documents (utilisateur, documentation technique), et tous doivent √™tre r√©√©crits. </font></font><br>
Ôªø<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En r√®gle g√©n√©rale, il n'y a personne pour faire un tel travail: passer du temps de pr√©cieux informaticiens √† ce sujet signifie simplement √©puiser le budget. </font><font style="vertical-align: inherit;">M√™me l'utilisation du stockage de documentation en code (PHPDoc) ne garantit pas sa fiabilit√©. </font><font style="vertical-align: inherit;">Au final, si la documentation peut diff√©rer de l'impl√©mentation, elle sera forc√©ment diff√©rente.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probl√®me n ¬∞ 3. Plus grande coh√©rence du code - le chemin de la r√©gression: "ils l'ont chang√© ici, il est tomb√©"</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les probl√®mes classiques des syst√®mes modulaires sont dans la lutte contre la r√©gression. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le d√©veloppement TDD est difficile √† utiliser pour les monolithes en raison de la grande coh√©rence des diff√©rentes m√©thodes (vous pouvez facilement passer 30 lignes de tests sur cinq lignes de code, plus les appareils). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, dans la lutte contre la r√©gression, il est n√©cessaire de couvrir le fonctionnel avec des tests d'int√©gration. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais compte tenu du d√©veloppement d√©j√† lent (apr√®s tout, vous devez le d√©velopper soigneusement pour permettre de nombreux remplacements), les clients ne veulent pas payer pour des tests d'int√©gration complexes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les tests fonctionnels deviennent aussi gros que vides de sens. Ils courent pendant des heures, m√™me en parall√®le.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, un front moderne comme PWA peut √™tre test√© de mani√®re API. Mais les tests d√©pendent souvent de la r√©ception de donn√©es du circuit externe - et commencent donc √† √©chouer si, par exemple, le test SAP est en retard sur l'√©picerie de N mois, et le test ¬´1C¬ª envoie des donn√©es incorrectes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous devez t√©l√©charger une petite modification pour un module, les d√©veloppeurs doivent choisir entre deux maux: lancer une ex√©cution compl√®te de CI et passer beaucoup de temps sur un d√©ploiement ou mettre en place un correctif sans ex√©cuter de test, risquant de casser quelque chose. C'est tr√®s dramatique lorsque de telles modifications arrivent du service marketing le Black Friday. Bien s√ªr, t√¥t ou tard, une r√©gression et une erreur humaine se produiront. Est-ce familier?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fin de compte, pour atteindre les objectifs commerciaux, l'√©quipe passe en mode de fonctionnement d'urgence, jongle habilement avec les tests et examine attentivement les tableaux de bord des journaux - Kibana, Grafana, Zabbix ... Et qu'obtenons-nous finalement? </font><font style="vertical-align: inherit;">Burnout. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez admettre qu'une telle situation de r√©gression n'est pas comme ¬´l'entreprise stable¬ª comme elle devrait l'√™tre dans les r√™ves et les r√™ves du client.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probl√®me n ¬∞ 4: Connectivit√© du code et mise √† jour de la plateforme</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre probl√®me avec la connectivit√© du code est la difficult√© de mettre √† jour la plateforme. </font></font><br>
Ôªø<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, Magento contient deux millions de lignes de code. Partout o√π nous regardons, il y a beaucoup de code partout (Akeneo, Pimcore, Bitrix). Lors de l'ajout de fonctionnalit√©s au noyau, il serait pr√©f√©rable de prendre en compte les changements dans vos modules personnalis√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un exemple en direct pour Magento. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fin 2018, une nouvelle version de la plateforme Magento 2.3 est sortie. Multistores et Elasticsearch ont √©t√© ajout√©s √† l'√©dition Open Source. De plus, des milliers de bugs ont √©t√© corrig√©s dans le noyau et quelques goodies dans OMS ont √©t√© ajout√©s.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä quels probl√®mes les projets de commerce √©lectronique ont-ils d√©j√† √©crit plusieurs magasins dans Magento 2.2? Ils avaient besoin de r√©√©crire un tas de logique dans le traitement des commandes, le paiement, les cartes de produits afin d'utiliser la fonctionnalit√© en bo√Æte. En effet, ¬´si bien¬ª - pourquoi dupliquer la fonctionnalit√© de la version en bo√Æte dans les modules? La r√©duction du volume de code personnalis√© dans un grand projet est toujours utile - apr√®s tout, toutes les m√©thodes de bo√Æte prennent en compte ces multi-entrep√¥ts, et la mise √† jour de la bo√Æte sans une telle refactorisation peut √™tre inutile (notez les probl√®mes de s√©curit√© pour plus de simplicit√©, d'autant plus qu'ils peuvent √™tre cumul√©s sans mise √† jour). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez maintenant: combien de temps sera consacr√© √† une telle mise √† jour et comment peut-elle √™tre test√©e sans tests d'int√©gration, qui sont difficiles √† √©crire?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il n'est pas surprenant que pour beaucoup, la mise √† niveau de la plateforme se fasse soit sans refactoring, mais avec une augmentation de la duplication, ou (si l'√©quipe veut tout faire par le feng shui) avec un ¬´d√©part¬ª de longue date en refactoring et restauration de l'ordre.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probl√®me n ¬∞ 5. Opacit√© des processus op√©rationnels</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'un des probl√®mes les plus importants de la gestion de projet est que le client ne voit pas toute la logique et tous les processus m√©tier du projet. </font><font style="vertical-align: inherit;">Ils ne peuvent √™tre restaur√©s qu'√† partir de code ou de documentation (dont la pertinence, comme nous l'avons dit plus haut, est probl√©matique √† maintenir dans les syst√®mes modulaires).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, Bitrix a une partie BPM, tandis que Pimcore a une visualisation de flux de travail. </font><font style="vertical-align: inherit;">Mais cette tentative de g√©rer des modules via des processus m√©tier est toujours en conflit avec la pr√©sence d'un noyau. </font><font style="vertical-align: inherit;">En outre, les √©v√©nements, les temporisations complexes, les op√©rations transactionnelles - tout cela ne se produit pas dans les monolithes BPM. </font><font style="vertical-align: inherit;">Je le r√©p√®te: cela s'applique aux moyennes et grandes entreprises. </font><font style="vertical-align: inherit;">Pour une petite entreprise, les capacit√©s des syst√®mes modulaires sont suffisantes. </font><font style="vertical-align: inherit;">Mais si nous parlons du segment des entreprises, il manque encore √† cette solution un centre de contr√¥le unique o√π vous pouvez aller voir le diagramme de tout processus, de tout √©tat, comment exactement quelque chose se passe, quelles sont les exceptions, les minuteurs, les √©v√©nements et les couronnes . </font><font style="vertical-align: inherit;">Il n'y a pas suffisamment d'opportunit√©s pour changer les processus m√©tier, mais pas les modules. </font><font style="vertical-align: inherit;">La gestion des processus du projet se noie dans la vitesse du changement et la coh√©rence de la logique.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probl√®me 6. Complexit√© de la mise √† l'√©chelle du syst√®me</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous d√©ployez un monolithe, il sera d√©ploy√© dans son int√©gralit√© avec tous les modules sur chaque serveur d'applications. </font><font style="vertical-align: inherit;">Ceux. </font><font style="vertical-align: inherit;">vous ne pouvez pas augmenter s√©par√©ment le service de traitement des commandes et des bonus dans une saison, s√©par√©ment du reste du code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Besoin de plus de m√©moire et de processeurs, ce qui augmente consid√©rablement le co√ªt du cluster.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment les microservices sauvent les clients des d√©fauts typiques du d√©veloppement modulaire. </font><font style="vertical-align: inherit;">Microservices Orchestration dans Camunda et jBPM</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spoiler: La solution aux probl√®mes r√©pertori√©s dans le dernier paragraphe est possible en utilisant BPMS et en orchestrant des syst√®mes de microservices. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BPMS (English Business Process Management System) est un logiciel de gestion des processus m√©tier dans une entreprise. Les BPMS populaires avec lesquels nous travaillons sont Camunda et jBPM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Orchestration d√©crit comment les services doivent interagir les uns avec les autres √† l'aide de la messagerie, y compris la logique m√©tier et une s√©quence d'actions. En utilisant BPMS, nous ne dessinons pas seulement des sch√©mas abstraits - notre processus m√©tier sera ex√©cut√© en fonction du dessin. Ce que nous voyons dans le diagramme est garanti en corr√©lation avec le fonctionnement du processus, quels microservices sont utilis√©s, quels param√®tres, selon quelles tables de d√©cision, une logique particuli√®re est s√©lectionn√©e.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ct/ik/ul/ctikula_txivfnw4laxpscmckiq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, nous prenons un processus fr√©quemment rencontr√© - l'envoi d'une commande pour livraison. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par tout message ou appel direct, nous commen√ßons le traitement des commandes avec le processus de choix d'un mode de livraison. </font><font style="vertical-align: inherit;">La logique de s√©lection est d√©finie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cons√©quence, les processus, les services et le d√©veloppement:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">devenir rapidement lisible;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auto-documentation (ils fonctionnent exactement comme ils sont dessin√©s, et il n'y a pas de rassynchronisation entre la documentation et le travail r√©el du code);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vient d'√™tre d√©bogu√© (il est facile de voir comment se d√©roule tel ou tel processus et de comprendre l'erreur).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous nous familiariserons avec les principes de fonctionnement des syst√®mes de gestion des processus m√©tier.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principe n ¬∞ 1 du BPMS. Le d√©veloppement devient visuel et processus</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BPMS vous permet de cr√©er un processus m√©tier dans lequel l'√©quipe projet (d√©veloppeur ou utilisateur m√©tier) d√©termine la s√©quence de lancement des microservices, ainsi que les conditions et les branches le long desquelles elle se d√©place. </font><font style="vertical-align: inherit;">Dans ce cas, un processus m√©tier (s√©quence d'actions) peut √™tre inclus dans un autre processus m√©tier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout cela est clairement pr√©sent√© dans BPMS: en temps r√©el, vous pouvez regarder ces sch√©mas, les √©diter, les mettre de mani√®re productive. </font><font style="vertical-align: inherit;">Ici, le principe d'un environnement auto-document√© est pleinement respect√© - le processus fonctionne exactement comme il est visualis√©.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous les microservices deviennent des cubes de processus qui peuvent √™tre ajout√©s √† partir d'un composant logiciel enfichable √† un utilisateur professionnel. </font><font style="vertical-align: inherit;">L'entreprise g√®re le processus et le d√©veloppeur est responsable de la disponibilit√© et du bon fonctionnement d'un microservice particulier. </font><font style="vertical-align: inherit;">De plus, toutes les parties comprennent la logique g√©n√©rale et le but du processus.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principe n ¬∞ 2 du BPMS. Chaque service a des entr√©es et des sorties claires.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le principe semble tr√®s simple, et il peut sembler √† un d√©veloppeur ou utilisateur professionnel inexp√©riment√© que BPMS n'am√©liore en rien la strat√©gie d'√©criture de microservices. </font><font style="vertical-align: inherit;">Comme, les microservices normaux peuvent √™tre √©crits sans BPMS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, c'est possible, mais difficile. </font><font style="vertical-align: inherit;">Lorsqu'un d√©veloppeur √©crit un microservice sans BPMS, il souhaite in√©vitablement √©conomiser sur l'abstrait. </font><font style="vertical-align: inherit;">Les microservices deviennent franchement grands, et parfois ils commencent m√™me √† en r√©utiliser d'autres. </font><font style="vertical-align: inherit;">Il y a une volont√© d'√©conomiser sur la transparence du transfert du r√©sultat d'un microservice √† un autre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BPMS vous encourage √† √©crire de mani√®re plus abstraite. </font><font style="vertical-align: inherit;">Le d√©veloppement est effectu√© avec pr√©cision le processus, avec la d√©finition de l'entr√©e et de la sortie.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BPMS Principe No. 3. Concurrence du traitement de la file d'attente</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez le processus de traitement des commandes: nous devons aller sur un march√©, ramasser toutes les bonnes commandes et commencer √† les traiter. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7b5/a9d/d5a/7b5a9dd5a1bc98e6a13215e99bece0fd.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardez le diagramme (une partie du diagramme). </font><font style="vertical-align: inherit;">Ici, il est d√©termin√© que toutes les 10 minutes, nous v√©rifions tous les ordres du march√©, puis ex√©cutons en parall√®le (comme indiqu√© par le ¬´hamburger¬ª vertical dans l'ordre de traitement) le traitement de chaque ordre. </font><font style="vertical-align: inherit;">En cas de succ√®s, transf√©rez toutes les donn√©es vers ERP et terminez le traitement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous devons soudainement augmenter les journaux pour traiter une commande sp√©cifique, dans Camunda, JBoss ou tout autre BPMS, nous serons en mesure de restaurer compl√®tement toutes les donn√©es et de voir dans quelle file d'attente elles se trouvaient et avec quels param√®tres d'entr√©e / sortie.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principe BPMS n ¬∞ 4. </font><font style="vertical-align: inherit;">Erreur et escalade</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez qu'une erreur s'est produite lors du processus de livraison. </font><font style="vertical-align: inherit;">Par exemple (en passant, c'est un cas r√©el), la soci√©t√© de transport a pris la commande, puis l'entrep√¥t a br√ªl√©. </font><font style="vertical-align: inherit;">Une autre histoire vraie: le r√©veillon du Nouvel An, le produit a d'abord √©t√© retard√©, puis peut-√™tre perdu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, les √©v√©nements sont d√©clench√©s par la souris dans BPMS, par exemple, la notification d'un client en cas de d√©passement du d√©lai de livraison. </font><font style="vertical-align: inherit;">Si vous avez re√ßu une erreur de la soci√©t√© de transport √† l'int√©rieur, vous pouvez d√©marrer le processus dans votre propre agence et tout interrompre: notifiez, accordez une remise sur la prochaine commande, retournez l'argent. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes ces exceptions sont difficiles non seulement √† programmer en dehors de BPMS (par exemple, une minuterie dans une minuterie), mais aussi √† comprendre dans le contexte de l'ensemble du processus.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principe n ¬∞ 5 du BPMS. </font><font style="vertical-align: inherit;">Le choix des actions pour l'un des √©v√©nements et les options interprocessus</font></font><br>
</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soumettez la m√™me commande lors de la livraison. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au total, nous avons trois sc√©narios:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les marchandises ont √©t√© livr√©es comme pr√©vu;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les marchandises n'ont pas √©t√© livr√©es comme pr√©vu;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'article a √©t√© perdu.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Directement dans BPMS, nous pouvons d√©terminer la proc√©dure pour l'exp√©dition des marchandises √† l'entreprise de transport et attendre l'un des √©v√©nements par commande:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">livraison r√©ussie (messages du processus de livraison du produit indiquant que tout a √©t√© livr√©);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou le d√©but d'un certain temps.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si le temps ne s'est pas √©coul√©, vous devez d√©marrer un autre service: analyser cette commande sp√©cifique avec l'op√©rateur (vous devez d√©finir une t√¢che pour lui dans le syst√®me OMS / CRM pour savoir o√π se trouve la commande) avec une nouvelle notification du client. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais si, au cours de l'enqu√™te, la commande a n√©anmoins √©t√© rendue, il est n√©cessaire d'interrompre l'enqu√™te et d'achever le traitement de la commande. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans BPMS, toutes les interruptions et exceptions sont du c√¥t√© BPMS. </font><font style="vertical-align: inherit;">Vous ne surchargez pas le code avec cette logique (et la pr√©sence m√™me d'une telle logique dans le code rendrait les microservices volumineux et mal r√©utilis√©s dans d'autres processus).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principe BPMS n ¬∞ 6. </font><font style="vertical-align: inherit;">Dans votre Camunda, vous verrez tous les journaux</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En utilisant les √©v√©nements et l'option interprocessus, vous:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous voyez toute la s√©quence des √©v√©nements dans une fen√™tre (ce qui se passe avec la commande, quelle branche des exceptions elle a travers√©e, etc. - c'est facile √† voir);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez collecter toutes les analyses pour BI sur la base des journaux BPMS seuls (sans avoir besoin de surcharger les microservices avec les √©v√©nements de journalisation).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pourrez ainsi collecter des statistiques sp√©cifiques sur les probl√®mes de traitement, les taux de transition, tous les processus de l'entreprise. </font><font style="vertical-align: inherit;">Il y a une unification des informations de journalisation - il est facile de lier l'√©v√©nement dans la livraison avec l'action de l'op√©rateur ou l'√©v√©nement de tout autre syst√®me d'information. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Faites attention √† la diff√©rence avec le syst√®me modulaire: des journaux universels peuvent √©galement y √™tre cr√©√©s, mais lorsque vous interagissez avec d'autres syst√®mes, vous devrez √©galement faire quelque chose avec l'unification de la connexion, et ce n'est pas toujours possible.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusions: une comparaison du microservice et de l'architecture modulaire</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque type d'architecture a ses avantages et ses inconv√©nients. Il n'y a pas de solution universelle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous ne pr√©conisons pas un passage massif aux microservices. Au contraire, pour une petite entreprise ou lors de l'utilisation d'un tr√®s petit nombre de personnalisations, une approche modulaire sera plus adapt√©e. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, nous ne sommes oppos√©s √† aucune solution informatique (Bitrix, Magento, frameworks comme Symfony ou Django, etc.), car nous d√©veloppons plus de six mille heures de code chaque mois sur ces seuls frameworks, et la m√™me quantit√© de front'a et microservices. Par cons√©quent, nous sommes convaincus qu'il est important de rechercher une solution technique adapt√©e, et de ne pas promouvoir l'utilisation d'une plate-forme sp√©cifique (vers laquelle, h√©las, une part importante des ventes en informatique est en baisse).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les sections pr√©c√©dentes de l'article, vous avez d√©couvert les inconv√©nients et les avantages de l'architecture modulaire. </font><font style="vertical-align: inherit;">Nous esp√©rons que cela a d√©j√† aid√© √† √©valuer si le raffinement de la version en bo√Æte ou la cr√©ation de microservices √† partir de z√©ro serait plus appropri√©. </font><font style="vertical-align: inherit;">S'il n'a pas √©t√© possible de d√©cider, voyons comment les diff√©rents types d'architecture changent en fonction de la dur√©e de vie du projet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au d√©but du projet:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec les microservices - vous n'avez aucune fonctionnalit√© et vous devez tout √©crire pour vous mettre au travail;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec un syst√®me modulaire - √† partir de la version en bo√Æte, une grande quantit√© de fonctionnalit√©s est imm√©diatement disponible, et vous pouvez commencer √† utiliser le produit peu de temps apr√®s l'achat.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s les 3 √† 4 premiers mois de d√©veloppement (il s'agit de la date de sortie moyenne du premier MVP) et au-del√†:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec microservices - le volume de fonctionnalit√©s est progressivement align√© par rapport √† la version en bo√Æte. </font><font style="vertical-align: inherit;">Pour les entreprises de taille moyenne, l'architecture de microservices rattrapera assez rapidement la modularit√©, mais pour les grandes - g√©n√©ralement instantan√©ment. </font><font style="vertical-align: inherit;">Et √† l'avenir, la maintenance et le d√©veloppement d'un syst√®me modulaire en termes d'unit√© fonctionnelle vont augmenter;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec un syst√®me modulaire - la vitesse de d√©veloppement des fonctionnalit√©s sera nettement inf√©rieure √† celle des microservices.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/getpro/habr/post_images/8e3/771/cc5/8e3771cc589bd9e28a8344e2ea2a1b37.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conclusion, regardons √† quoi ressemble l'orchestration des microservices avec des exemples sp√©cifiques.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemples de visualisation d'orchestration des services</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consid√©rez l'orchestration des services √† l'aide de Camunda. </font><font style="vertical-align: inherit;">√Ä partir des images suivantes, vous pouvez √©valuer √† quel point il est pratique de g√©rer les microservices √† l'aide de BPMS avec un orchestrateur. </font><font style="vertical-align: inherit;">Tous les processus sont visuels, la logique est √©vidente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les processus m√©tier ressemblent √† ceci: </font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/ad3/5b5/cd6/ad35b5cd690d2ca590c703ab3ed8d3e4.webp" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exemple (commande, service de disponibilit√©): </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/56b/f55/d9e/56bf55d9e2fb275a477601628430d2c6.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On peut voir que dans cette commande il y avait une branche ¬´Pas de marchandise¬ª. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre copie de la commande (est all√©e √† l'assemblage): La </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/470/5d8/4c1/4705d84c19cebb0ad9c5fca58f41d2fd.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
commande est all√©e plus loin et selon la table de d√©cision (DMN) est all√©e √† la branche de traitement par un certain op√©rateur de service de livraison (Boxberry): </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/af8/d54/486/af8d5448653f276387c54492a93fece2.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entretien du processus imbriqu√©: Le </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/14c/b45/693/14cb45693eca190e592e3d2357c92d6b.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
processus imbriqu√© a fonctionn√©: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/14c/b45/693/14cb45693eca190e592e3d2357c92d6b.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Historique des processus m√©tier: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d78/88b/be8/d7888bbe8dbbb036df2425c2a5d115f0.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Propri√©t√©s de cette visualisation:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les processus m√©tier sont faciles √† lire m√™me par un utilisateur non pr√©par√©;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ils sont ex√©cutables, c'est-√†-dire qu'ils fonctionnent exactement comme ils sont dessin√©s, il n'y a pas de rassynchronisation entre la "documentation" et le travail r√©el du code;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les processus sont transparents: il est facile de voir comment s'est d√©roul√©e une importation, une commande ou un traitement particulier, il est facile de voir o√π l'erreur a √©t√© commise.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rappelons que chez kt.team, nous utilisons √† la fois le d√©veloppement modulaire et le d√©veloppement de microservices, en choisissant la bonne option pour chaque produit individuellement. </font><font style="vertical-align: inherit;">Mais si le choix a d√©j√† √©t√© fait en faveur d'une architecture de microservices, alors nous sommes fermement convaincus qu'il est impossible de se passer de syst√®mes BPM comme Camunda ou jBPM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voir aussi: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vid√©o sur le th√®me ¬´Microservice ou architecture monolithique: que choisir?¬ª</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr497232/index.html">Nikolay Petrov: ¬´OpenStreetMap est un projet o√π il n'est pas n√©cessaire de communiquer avec les gens¬ª</a></li>
<li><a href="../fr497234/index.html">Modification du proxy MQTT</a></li>
<li><a href="../fr497238/index.html">Se faire des amis SQL Server et PerfMon</a></li>
<li><a href="../fr497240/index.html">Analyse du rapport de Baruch Sadogursky ¬´DevOps pour les d√©veloppeurs (ou contre eux?!)¬ª</a></li>
<li><a href="../fr497242/index.html">Respirateur demi-masque fait maison √† partir de mat√©riaux improvis√©s en 10 minutes</a></li>
<li><a href="../fr497254/index.html">Cisco HyperFlex: lancement, configuration, int√©gration cloud - 21-22 avril</a></li>
<li><a href="../fr497258/index.html">Tcl / Tk. Explorateur de fichiers alternatif pour les plates-formes Linux et Android</a></li>
<li><a href="../fr497260/index.html">Comment les d√©veloppeurs de Myst ont r√©ussi √† int√©grer tout l'univers sur un seul CD-ROM</a></li>
<li><a href="../fr497264/index.html">Interface personnalis√©e. Partie 2. Param√®tres de navigation automatique</a></li>
<li><a href="../fr497268/index.html">La rubrique ¬´Lisez des articles pour vous¬ª. Mars 2020. Partie 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>