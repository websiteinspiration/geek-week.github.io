<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👏🏻 🎺 👐🏼 Microservices ou systèmes modulaires? Comment un client peut-il choisir une approche de l'architecture informatique d'un produit 👧🏿 🙍🏾 ⤵️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les microservices et les systèmes modulaires sont des types d'architecture de solutions informatiques.
 Lorsque nous travaillons avec des modules, nou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Microservices ou systèmes modulaires? Comment un client peut-il choisir une approche de l'architecture informatique d'un produit</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497248/"><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les microservices et les systèmes modulaires sont des types d'architecture de solutions informatiques.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque nous travaillons avec des modules, nous finalisons une version boîte d'un produit informatique existant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par version en boîte, nous entendons un monolithe, un système prêt à l'emploi avec un noyau qui est livré à tous les clients de la même manière, "tel quel". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le raffinement consiste à créer des modules avec des fonctionnalités manquantes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous obtenons de nouveaux modules en réutilisant des parties du monolithe (noyau ou autres modules). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La logique métier est écrite à l'intérieur du monolithe: pour un programme (application, site, portail) il y a un point d'entrée et un point de sortie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque nous travaillons avec des microservices, nous créons un produit informatique à partir de zéro, en le composant à partir de «briques» - des microservices atomiques qui sont responsables d'un petit processus distinct (envoyer une lettre, recevoir des informations sur la commande, modifier le statut de la commande, créer un client, etc.).</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un ensemble de ces blocs est combiné par la logique métier dans un système commun (par exemple, en utilisant BPMS). </font><font style="vertical-align: inherit;">Malgré la présence de connexions, chaque bloc est autonome et possède ses propres points d'entrée et de sortie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La plupart des produits informatiques pour nos clients commencent par un développement modulaire. </font><font style="vertical-align: inherit;">Certains d'entre eux évoluent avec le temps vers des microservices. </font><font style="vertical-align: inherit;">Pour l'autre partie, les microservices ne sont pas nécessaires. </font><font style="vertical-align: inherit;">Dans cet article, nous examinerons pourquoi il en est exactement ainsi et quels critères aident à déterminer s'il est nécessaire d'implémenter des microservices ou si vous devez vous limiter à travailler avec des modules.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e49/d21/b9e/e49d21b9e7d70c040a3d7ce537b94c19.jpg" alt="image"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avantages de l'architecture modulaire</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous les systèmes CMS (Bitrix, Magento, Drupal, Hybris, etc.), CRM, ERP, WMS et bien d'autres ont des versions en boîte. </font><font style="vertical-align: inherit;">Ils se vendent bien et sont très demandés. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons ces raisons objectives pour lesquelles les clients choisissent le plus souvent de travailler avec une architecture modulaire et d'acheter volontiers des solutions en boîte.</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rapidité de mise en œuvre L'</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
installation, la configuration et le remplissage des répertoires de ces logiciels prennent un peu de temps. </font><font style="vertical-align: inherit;">Il est réaliste pour une entreprise de taille moyenne de commencer à travailler avec une boîte trois à quatre mois après le début, parfois même un peu plus tôt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour les petites entreprises, cette période ne peut être que de quelques jours.</font></font></li>
<li><b> </b><br>
<br>
     . ,       enterprise-   .</li>
<li><b>     </b><br>
<br>
       .            . ,       ,                  ,     .</li>
<li><b> ,  </b><br>
<br>
             .    ,        .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe d'autres facteurs subjectifs qui peuvent être trompeurs et influencer la décision d'utiliser des boîtes et des modules. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Course des fabricants</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Les vendeurs de logiciels convainquent chaleureusement les clients que leur solution prête à l'emploi est la bonne: elle a été testée pendant des années, et à la mode, et en entreprise, et populaire, et marketing ... Tout fournisseur: Bitrix, Magento, SAP, Oracle, OpenCart, Django et tout le monde travaille dur sur les techniques de marketing et de vente. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Idée fausse sur la complexité des améliorations</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Les clients sont souvent pleins d'optimisme. Ils choisissent un logiciel en boîte et pensent: «Oui, des améliorations seront nécessaires. Mais c'est facile: vous n'avez pas à inventer quelque chose de nouveau. Nous avons une version populaire, mais des millions d'utilisateurs ne peuvent pas faire d'erreurs et acheter un mauvais produit. »</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À leur avis, le processus de raffinement ressemble à ceci: il existe une fonctionnalité principale (encadrée). Pour "terminer" quelque chose, les développeurs devront "simplement" redéfinir le module ou écrire rapidement le leur. Dans ce cas, il n'est pas nécessaire d'utiliser des méthodes répétées, car tout est censé être pensé dans le monolithe: des méthodes communes de calcul des taxes sont prescrites, il existe des règles claires pour l'écriture des modes de livraison et de paiement, un flux de travail clair des commandes, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la vraie vie, les choses sont différentes. Et après des émotions agréables depuis le début facile de travailler avec la boîte, les clients sont toujours confrontés à une dure réalité. Le plus souvent, cela se produit avec des entreprises de moyennes et grandes entreprises, dont les projets ont une logique commerciale unique, et des améliorations à grande échelle sont nécessaires.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si votre entreprise est une petite entreprise et que le logiciel n'est pas votre principal atout, une solution en boîte populaire (ou mieux - un cloud) vous conviendra très probablement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons les problèmes que vous pouvez rencontrer lorsque vous travaillez avec une architecture modulaire et comment les microservices aident à éviter cela.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problèmes des systèmes modulaires</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le principal problème est que tous les systèmes modulaires ne sont pas conçus pour redéfinir sérieusement la fonctionnalité. </font><font style="vertical-align: inherit;">Ils ont une boîte, des modules prêts à l'emploi - il vaut mieux les utiliser. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plus la taille du projet et la complexité de leurs personnalisations seront proches du niveau de l'entreprise, plus la réalisation des modules posera de problèmes. </font><font style="vertical-align: inherit;">Parlons des principaux.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problème n ° 1. Le cœur du système devient un point de décélération et la modularité devient une complication inutile.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons que votre projet soit associé à une logique d'entrepôt complexe. Si vous choisissez une architecture modulaire, les développeurs n'ont pas seulement besoin de créer des fonctionnalités pour gérer ces entrepôts - ils doivent redéfinir ou étendre le module multicœur, qui, à son tour, utilise des méthodes de noyau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, il est nécessaire de prendre en compte la logique complexe des retours aux entrepôts: dépendance vis-à-vis des événements du système CRM, circulation des marchandises entre les catalogues, etc. Il convient également de considérer la logique cachée associée au retour des fonds, aux points bonus, etc.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque tant de redéfinitions se produisent, le monolithe change considérablement. </font><font style="vertical-align: inherit;">Il est important de se rappeler que la relation entre le volume de nouvelles fonctionnalités et le nombre de modules est non linéaire: pour ajouter une fonction, vous devez soit apporter des modifications à plusieurs modules, chacun changeant le fonctionnement de l'autre, soit redéfinir un grand nombre de méthodes d'autres modules dans le nouveau module, ce qui ne change pas l'essence. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après toutes les modifications, le système devient si compliqué qu'un nombre indécemment important d'heures sera nécessaire pour ajouter les personnalisations suivantes.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/2d3/82f/0de/2d382f0de298b267b9e3ce6ca8f2fd58.webp" alt="image"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problème n ° 2. Le principe de l'auto-documentation n'est pas pris en charge dans les systèmes modulaires.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La documentation des systèmes modulaires est difficile à maintenir à jour. </font><font style="vertical-align: inherit;">C'est beaucoup et cela devient obsolète à chaque changement. </font><font style="vertical-align: inherit;">L'affinement d'un module implique des modifications dans plusieurs autres documents (utilisateur, documentation technique), et tous doivent être réécrits. </font></font><br>
﻿<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En règle générale, il n'y a personne pour faire un tel travail: passer du temps de précieux informaticiens à ce sujet signifie simplement épuiser le budget. </font><font style="vertical-align: inherit;">Même l'utilisation du stockage de documentation en code (PHPDoc) ne garantit pas sa fiabilité. </font><font style="vertical-align: inherit;">Au final, si la documentation peut différer de l'implémentation, elle sera forcément différente.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problème n ° 3. Plus grande cohérence du code - le chemin de la régression: "ils l'ont changé ici, il est tombé"</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les problèmes classiques des systèmes modulaires sont dans la lutte contre la régression. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le développement TDD est difficile à utiliser pour les monolithes en raison de la grande cohérence des différentes méthodes (vous pouvez facilement passer 30 lignes de tests sur cinq lignes de code, plus les appareils). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par conséquent, dans la lutte contre la régression, il est nécessaire de couvrir le fonctionnel avec des tests d'intégration. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais compte tenu du développement déjà lent (après tout, vous devez le développer soigneusement pour permettre de nombreux remplacements), les clients ne veulent pas payer pour des tests d'intégration complexes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les tests fonctionnels deviennent aussi gros que vides de sens. Ils courent pendant des heures, même en parallèle.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, un front moderne comme PWA peut être testé de manière API. Mais les tests dépendent souvent de la réception de données du circuit externe - et commencent donc à échouer si, par exemple, le test SAP est en retard sur l'épicerie de N mois, et le test «1C» envoie des données incorrectes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous devez télécharger une petite modification pour un module, les développeurs doivent choisir entre deux maux: lancer une exécution complète de CI et passer beaucoup de temps sur un déploiement ou mettre en place un correctif sans exécuter de test, risquant de casser quelque chose. C'est très dramatique lorsque de telles modifications arrivent du service marketing le Black Friday. Bien sûr, tôt ou tard, une régression et une erreur humaine se produiront. Est-ce familier?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fin de compte, pour atteindre les objectifs commerciaux, l'équipe passe en mode de fonctionnement d'urgence, jongle habilement avec les tests et examine attentivement les tableaux de bord des journaux - Kibana, Grafana, Zabbix ... Et qu'obtenons-nous finalement? </font><font style="vertical-align: inherit;">Burnout. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez admettre qu'une telle situation de régression n'est pas comme «l'entreprise stable» comme elle devrait l'être dans les rêves et les rêves du client.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problème n ° 4: Connectivité du code et mise à jour de la plateforme</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre problème avec la connectivité du code est la difficulté de mettre à jour la plateforme. </font></font><br>
﻿<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, Magento contient deux millions de lignes de code. Partout où nous regardons, il y a beaucoup de code partout (Akeneo, Pimcore, Bitrix). Lors de l'ajout de fonctionnalités au noyau, il serait préférable de prendre en compte les changements dans vos modules personnalisés. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un exemple en direct pour Magento. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fin 2018, une nouvelle version de la plateforme Magento 2.3 est sortie. Multistores et Elasticsearch ont été ajoutés à l'édition Open Source. De plus, des milliers de bugs ont été corrigés dans le noyau et quelques goodies dans OMS ont été ajoutés.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À quels problèmes les projets de commerce électronique ont-ils déjà écrit plusieurs magasins dans Magento 2.2? Ils avaient besoin de réécrire un tas de logique dans le traitement des commandes, le paiement, les cartes de produits afin d'utiliser la fonctionnalité en boîte. En effet, «si bien» - pourquoi dupliquer la fonctionnalité de la version en boîte dans les modules? La réduction du volume de code personnalisé dans un grand projet est toujours utile - après tout, toutes les méthodes de boîte prennent en compte ces multi-entrepôts, et la mise à jour de la boîte sans une telle refactorisation peut être inutile (notez les problèmes de sécurité pour plus de simplicité, d'autant plus qu'ils peuvent être cumulés sans mise à jour). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez maintenant: combien de temps sera consacré à une telle mise à jour et comment peut-elle être testée sans tests d'intégration, qui sont difficiles à écrire?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il n'est pas surprenant que pour beaucoup, la mise à niveau de la plateforme se fasse soit sans refactoring, mais avec une augmentation de la duplication, ou (si l'équipe veut tout faire par le feng shui) avec un «départ» de longue date en refactoring et restauration de l'ordre.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problème n ° 5. Opacité des processus opérationnels</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'un des problèmes les plus importants de la gestion de projet est que le client ne voit pas toute la logique et tous les processus métier du projet. </font><font style="vertical-align: inherit;">Ils ne peuvent être restaurés qu'à partir de code ou de documentation (dont la pertinence, comme nous l'avons dit plus haut, est problématique à maintenir dans les systèmes modulaires).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, Bitrix a une partie BPM, tandis que Pimcore a une visualisation de flux de travail. </font><font style="vertical-align: inherit;">Mais cette tentative de gérer des modules via des processus métier est toujours en conflit avec la présence d'un noyau. </font><font style="vertical-align: inherit;">En outre, les événements, les temporisations complexes, les opérations transactionnelles - tout cela ne se produit pas dans les monolithes BPM. </font><font style="vertical-align: inherit;">Je le répète: cela s'applique aux moyennes et grandes entreprises. </font><font style="vertical-align: inherit;">Pour une petite entreprise, les capacités des systèmes modulaires sont suffisantes. </font><font style="vertical-align: inherit;">Mais si nous parlons du segment des entreprises, il manque encore à cette solution un centre de contrôle unique où vous pouvez aller voir le diagramme de tout processus, de tout état, comment exactement quelque chose se passe, quelles sont les exceptions, les minuteurs, les événements et les couronnes . </font><font style="vertical-align: inherit;">Il n'y a pas suffisamment d'opportunités pour changer les processus métier, mais pas les modules. </font><font style="vertical-align: inherit;">La gestion des processus du projet se noie dans la vitesse du changement et la cohérence de la logique.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problème 6. Complexité de la mise à l'échelle du système</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous déployez un monolithe, il sera déployé dans son intégralité avec tous les modules sur chaque serveur d'applications. </font><font style="vertical-align: inherit;">Ceux. </font><font style="vertical-align: inherit;">vous ne pouvez pas augmenter séparément le service de traitement des commandes et des bonus dans une saison, séparément du reste du code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Besoin de plus de mémoire et de processeurs, ce qui augmente considérablement le coût du cluster.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment les microservices sauvent les clients des défauts typiques du développement modulaire. </font><font style="vertical-align: inherit;">Microservices Orchestration dans Camunda et jBPM</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spoiler: La solution aux problèmes répertoriés dans le dernier paragraphe est possible en utilisant BPMS et en orchestrant des systèmes de microservices. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BPMS (English Business Process Management System) est un logiciel de gestion des processus métier dans une entreprise. Les BPMS populaires avec lesquels nous travaillons sont Camunda et jBPM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Orchestration décrit comment les services doivent interagir les uns avec les autres à l'aide de la messagerie, y compris la logique métier et une séquence d'actions. En utilisant BPMS, nous ne dessinons pas seulement des schémas abstraits - notre processus métier sera exécuté en fonction du dessin. Ce que nous voyons dans le diagramme est garanti en corrélation avec le fonctionnement du processus, quels microservices sont utilisés, quels paramètres, selon quelles tables de décision, une logique particulière est sélectionnée.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ct/ik/ul/ctikula_txivfnw4laxpscmckiq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, nous prenons un processus fréquemment rencontré - l'envoi d'une commande pour livraison. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par tout message ou appel direct, nous commençons le traitement des commandes avec le processus de choix d'un mode de livraison. </font><font style="vertical-align: inherit;">La logique de sélection est définie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conséquence, les processus, les services et le développement:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">devenir rapidement lisible;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auto-documentation (ils fonctionnent exactement comme ils sont dessinés, et il n'y a pas de rassynchronisation entre la documentation et le travail réel du code);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vient d'être débogué (il est facile de voir comment se déroule tel ou tel processus et de comprendre l'erreur).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous nous familiariserons avec les principes de fonctionnement des systèmes de gestion des processus métier.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principe n ° 1 du BPMS. Le développement devient visuel et processus</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BPMS vous permet de créer un processus métier dans lequel l'équipe projet (développeur ou utilisateur métier) détermine la séquence de lancement des microservices, ainsi que les conditions et les branches le long desquelles elle se déplace. </font><font style="vertical-align: inherit;">Dans ce cas, un processus métier (séquence d'actions) peut être inclus dans un autre processus métier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout cela est clairement présenté dans BPMS: en temps réel, vous pouvez regarder ces schémas, les éditer, les mettre de manière productive. </font><font style="vertical-align: inherit;">Ici, le principe d'un environnement auto-documenté est pleinement respecté - le processus fonctionne exactement comme il est visualisé.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous les microservices deviennent des cubes de processus qui peuvent être ajoutés à partir d'un composant logiciel enfichable à un utilisateur professionnel. </font><font style="vertical-align: inherit;">L'entreprise gère le processus et le développeur est responsable de la disponibilité et du bon fonctionnement d'un microservice particulier. </font><font style="vertical-align: inherit;">De plus, toutes les parties comprennent la logique générale et le but du processus.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principe n ° 2 du BPMS. Chaque service a des entrées et des sorties claires.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le principe semble très simple, et il peut sembler à un développeur ou utilisateur professionnel inexpérimenté que BPMS n'améliore en rien la stratégie d'écriture de microservices. </font><font style="vertical-align: inherit;">Comme, les microservices normaux peuvent être écrits sans BPMS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, c'est possible, mais difficile. </font><font style="vertical-align: inherit;">Lorsqu'un développeur écrit un microservice sans BPMS, il souhaite inévitablement économiser sur l'abstrait. </font><font style="vertical-align: inherit;">Les microservices deviennent franchement grands, et parfois ils commencent même à en réutiliser d'autres. </font><font style="vertical-align: inherit;">Il y a une volonté d'économiser sur la transparence du transfert du résultat d'un microservice à un autre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BPMS vous encourage à écrire de manière plus abstraite. </font><font style="vertical-align: inherit;">Le développement est effectué avec précision le processus, avec la définition de l'entrée et de la sortie.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BPMS Principe No. 3. Concurrence du traitement de la file d'attente</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez le processus de traitement des commandes: nous devons aller sur un marché, ramasser toutes les bonnes commandes et commencer à les traiter. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7b5/a9d/d5a/7b5a9dd5a1bc98e6a13215e99bece0fd.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardez le diagramme (une partie du diagramme). </font><font style="vertical-align: inherit;">Ici, il est déterminé que toutes les 10 minutes, nous vérifions tous les ordres du marché, puis exécutons en parallèle (comme indiqué par le «hamburger» vertical dans l'ordre de traitement) le traitement de chaque ordre. </font><font style="vertical-align: inherit;">En cas de succès, transférez toutes les données vers ERP et terminez le traitement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous devons soudainement augmenter les journaux pour traiter une commande spécifique, dans Camunda, JBoss ou tout autre BPMS, nous serons en mesure de restaurer complètement toutes les données et de voir dans quelle file d'attente elles se trouvaient et avec quels paramètres d'entrée / sortie.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principe BPMS n ° 4. </font><font style="vertical-align: inherit;">Erreur et escalade</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez qu'une erreur s'est produite lors du processus de livraison. </font><font style="vertical-align: inherit;">Par exemple (en passant, c'est un cas réel), la société de transport a pris la commande, puis l'entrepôt a brûlé. </font><font style="vertical-align: inherit;">Une autre histoire vraie: le réveillon du Nouvel An, le produit a d'abord été retardé, puis peut-être perdu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, les événements sont déclenchés par la souris dans BPMS, par exemple, la notification d'un client en cas de dépassement du délai de livraison. </font><font style="vertical-align: inherit;">Si vous avez reçu une erreur de la société de transport à l'intérieur, vous pouvez démarrer le processus dans votre propre agence et tout interrompre: notifiez, accordez une remise sur la prochaine commande, retournez l'argent. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes ces exceptions sont difficiles non seulement à programmer en dehors de BPMS (par exemple, une minuterie dans une minuterie), mais aussi à comprendre dans le contexte de l'ensemble du processus.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principe n ° 5 du BPMS. </font><font style="vertical-align: inherit;">Le choix des actions pour l'un des événements et les options interprocessus</font></font><br>
</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soumettez la même commande lors de la livraison. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au total, nous avons trois scénarios:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les marchandises ont été livrées comme prévu;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les marchandises n'ont pas été livrées comme prévu;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'article a été perdu.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Directement dans BPMS, nous pouvons déterminer la procédure pour l'expédition des marchandises à l'entreprise de transport et attendre l'un des événements par commande:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">livraison réussie (messages du processus de livraison du produit indiquant que tout a été livré);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou le début d'un certain temps.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si le temps ne s'est pas écoulé, vous devez démarrer un autre service: analyser cette commande spécifique avec l'opérateur (vous devez définir une tâche pour lui dans le système OMS / CRM pour savoir où se trouve la commande) avec une nouvelle notification du client. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais si, au cours de l'enquête, la commande a néanmoins été rendue, il est nécessaire d'interrompre l'enquête et d'achever le traitement de la commande. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans BPMS, toutes les interruptions et exceptions sont du côté BPMS. </font><font style="vertical-align: inherit;">Vous ne surchargez pas le code avec cette logique (et la présence même d'une telle logique dans le code rendrait les microservices volumineux et mal réutilisés dans d'autres processus).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principe BPMS n ° 6. </font><font style="vertical-align: inherit;">Dans votre Camunda, vous verrez tous les journaux</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En utilisant les événements et l'option interprocessus, vous:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous voyez toute la séquence des événements dans une fenêtre (ce qui se passe avec la commande, quelle branche des exceptions elle a traversée, etc. - c'est facile à voir);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez collecter toutes les analyses pour BI sur la base des journaux BPMS seuls (sans avoir besoin de surcharger les microservices avec les événements de journalisation).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pourrez ainsi collecter des statistiques spécifiques sur les problèmes de traitement, les taux de transition, tous les processus de l'entreprise. </font><font style="vertical-align: inherit;">Il y a une unification des informations de journalisation - il est facile de lier l'événement dans la livraison avec l'action de l'opérateur ou l'événement de tout autre système d'information. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Faites attention à la différence avec le système modulaire: des journaux universels peuvent également y être créés, mais lorsque vous interagissez avec d'autres systèmes, vous devrez également faire quelque chose avec l'unification de la connexion, et ce n'est pas toujours possible.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusions: une comparaison du microservice et de l'architecture modulaire</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque type d'architecture a ses avantages et ses inconvénients. Il n'y a pas de solution universelle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous ne préconisons pas un passage massif aux microservices. Au contraire, pour une petite entreprise ou lors de l'utilisation d'un très petit nombre de personnalisations, une approche modulaire sera plus adaptée. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, nous ne sommes opposés à aucune solution informatique (Bitrix, Magento, frameworks comme Symfony ou Django, etc.), car nous développons plus de six mille heures de code chaque mois sur ces seuls frameworks, et la même quantité de front'a et microservices. Par conséquent, nous sommes convaincus qu'il est important de rechercher une solution technique adaptée, et de ne pas promouvoir l'utilisation d'une plate-forme spécifique (vers laquelle, hélas, une part importante des ventes en informatique est en baisse).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les sections précédentes de l'article, vous avez découvert les inconvénients et les avantages de l'architecture modulaire. </font><font style="vertical-align: inherit;">Nous espérons que cela a déjà aidé à évaluer si le raffinement de la version en boîte ou la création de microservices à partir de zéro serait plus approprié. </font><font style="vertical-align: inherit;">S'il n'a pas été possible de décider, voyons comment les différents types d'architecture changent en fonction de la durée de vie du projet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au début du projet:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec les microservices - vous n'avez aucune fonctionnalité et vous devez tout écrire pour vous mettre au travail;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec un système modulaire - à partir de la version en boîte, une grande quantité de fonctionnalités est immédiatement disponible, et vous pouvez commencer à utiliser le produit peu de temps après l'achat.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après les 3 à 4 premiers mois de développement (il s'agit de la date de sortie moyenne du premier MVP) et au-delà:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec microservices - le volume de fonctionnalités est progressivement aligné par rapport à la version en boîte. </font><font style="vertical-align: inherit;">Pour les entreprises de taille moyenne, l'architecture de microservices rattrapera assez rapidement la modularité, mais pour les grandes - généralement instantanément. </font><font style="vertical-align: inherit;">Et à l'avenir, la maintenance et le développement d'un système modulaire en termes d'unité fonctionnelle vont augmenter;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec un système modulaire - la vitesse de développement des fonctionnalités sera nettement inférieure à celle des microservices.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/getpro/habr/post_images/8e3/771/cc5/8e3771cc589bd9e28a8344e2ea2a1b37.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conclusion, regardons à quoi ressemble l'orchestration des microservices avec des exemples spécifiques.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemples de visualisation d'orchestration des services</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considérez l'orchestration des services à l'aide de Camunda. </font><font style="vertical-align: inherit;">À partir des images suivantes, vous pouvez évaluer à quel point il est pratique de gérer les microservices à l'aide de BPMS avec un orchestrateur. </font><font style="vertical-align: inherit;">Tous les processus sont visuels, la logique est évidente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les processus métier ressemblent à ceci: </font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/ad3/5b5/cd6/ad35b5cd690d2ca590c703ab3ed8d3e4.webp" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exemple (commande, service de disponibilité): </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/56b/f55/d9e/56bf55d9e2fb275a477601628430d2c6.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On peut voir que dans cette commande il y avait une branche «Pas de marchandise». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre copie de la commande (est allée à l'assemblage): La </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/470/5d8/4c1/4705d84c19cebb0ad9c5fca58f41d2fd.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
commande est allée plus loin et selon la table de décision (DMN) est allée à la branche de traitement par un certain opérateur de service de livraison (Boxberry): </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/af8/d54/486/af8d5448653f276387c54492a93fece2.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entretien du processus imbriqué: Le </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/14c/b45/693/14cb45693eca190e592e3d2357c92d6b.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
processus imbriqué a fonctionné: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/14c/b45/693/14cb45693eca190e592e3d2357c92d6b.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Historique des processus métier: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d78/88b/be8/d7888bbe8dbbb036df2425c2a5d115f0.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Propriétés de cette visualisation:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les processus métier sont faciles à lire même par un utilisateur non préparé;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ils sont exécutables, c'est-à-dire qu'ils fonctionnent exactement comme ils sont dessinés, il n'y a pas de rassynchronisation entre la "documentation" et le travail réel du code;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les processus sont transparents: il est facile de voir comment s'est déroulée une importation, une commande ou un traitement particulier, il est facile de voir où l'erreur a été commise.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rappelons que chez kt.team, nous utilisons à la fois le développement modulaire et le développement de microservices, en choisissant la bonne option pour chaque produit individuellement. </font><font style="vertical-align: inherit;">Mais si le choix a déjà été fait en faveur d'une architecture de microservices, alors nous sommes fermement convaincus qu'il est impossible de se passer de systèmes BPM comme Camunda ou jBPM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voir aussi: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vidéo sur le thème «Microservice ou architecture monolithique: que choisir?»</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr497232/index.html">Nikolay Petrov: «OpenStreetMap est un projet où il n'est pas nécessaire de communiquer avec les gens»</a></li>
<li><a href="../fr497234/index.html">Modification du proxy MQTT</a></li>
<li><a href="../fr497238/index.html">Se faire des amis SQL Server et PerfMon</a></li>
<li><a href="../fr497240/index.html">Analyse du rapport de Baruch Sadogursky «DevOps pour les développeurs (ou contre eux?!)»</a></li>
<li><a href="../fr497242/index.html">Respirateur demi-masque fait maison à partir de matériaux improvisés en 10 minutes</a></li>
<li><a href="../fr497254/index.html">Cisco HyperFlex: lancement, configuration, intégration cloud - 21-22 avril</a></li>
<li><a href="../fr497258/index.html">Tcl / Tk. Explorateur de fichiers alternatif pour les plates-formes Linux et Android</a></li>
<li><a href="../fr497260/index.html">Comment les développeurs de Myst ont réussi à intégrer tout l'univers sur un seul CD-ROM</a></li>
<li><a href="../fr497264/index.html">Interface personnalisée. Partie 2. Paramètres de navigation automatique</a></li>
<li><a href="../fr497268/index.html">La rubrique «Lisez des articles pour vous». Mars 2020. Partie 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>