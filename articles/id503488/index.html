<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ–Œï¸ ğŸ‘¨ğŸ»â€ğŸ’» ğŸ¤›ğŸ¼ Praktik terbaik Kubernetes. Nonaktifkan Akhiri Nonaktif ğŸ• ğŸš¤ ğŸ‡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Praktik terbaik Kubernetes. Membuat Kontainer Kecil 
 Kubernetes Praktik Terbaik. Organisasi Kubernetes dengan Kubernetes 
 Best Practices Namespace. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Praktik terbaik Kubernetes. Nonaktifkan Akhiri Nonaktif</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/503488/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Praktik terbaik Kubernetes. Membuat Kontainer Kecil </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes Praktik Terbaik. Organisasi Kubernetes dengan Kubernetes </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Best Practices Namespace. Uji Kelayakan Kubernetes dengan Tes Kesiapan dan Uji Kekuatan </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Praktik Terbaik </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">Kubernetes </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">. Mengkonfigurasi permintaan dan batasan sumber daya</font></a></font><br>
<br>
<img src="https://habrastorage.org/webt/tm/pw/un/tmpwunqsjdjy_abzbl8c0t-exzo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Poin penting dalam pengoperasian sistem terdistribusi adalah menangani kegagalan. Kubernet membantu dengan ini dengan menggunakan pengontrol yang memantau keadaan sistem Anda dan memulai kembali layanan yang telah berhenti berfungsi. Namun, Kubernetes secara paksa dapat mematikan aplikasi Anda untuk memastikan kelangsungan sistem secara keseluruhan. Dalam seri ini, kami akan melihat bagaimana Anda dapat membantu Kubernetes melakukan tugasnya dengan lebih efisien dan mengurangi waktu henti aplikasi.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebelum menggunakan wadah, sebagian besar aplikasi berjalan pada mesin virtual atau fisik. Jika aplikasi macet atau macet, butuh waktu lama untuk menghapus tugas yang sedang berlangsung dan mengunduh ulang program. Dalam kasus terburuk, seseorang harus menyelesaikan masalah ini secara manual di malam hari, pada waktu yang paling tidak tepat. Jika hanya 1-2 mesin yang bekerja melakukan tugas penting, kerusakan seperti itu benar-benar tidak dapat diterima. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oleh karena itu, alih-alih memulai ulang secara manual, mereka mulai menggunakan pemantauan pada tingkat proses untuk secara otomatis memulai ulang aplikasi jika terjadi pemutusan yang tidak normal. Jika program macet, proses pemantauan menangkap kode keluar dan mem-boot ulang server. Dengan munculnya sistem seperti Kubernetes, jenis respons kegagalan sistem ini telah diintegrasikan ke dalam infrastruktur.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetes menggunakan loop acara "mengamati - melakukan perbedaan - melakukan tindakan" untuk memastikan bahwa sumber daya tetap beroperasi sepanjang jalan dari wadah ke node itu sendiri. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6n/rw/f9/6nrwf9r4k54zb99ghrykicqtc78.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini berarti Anda tidak perlu lagi memulai pemantauan proses secara manual. Jika sumber daya gagal dalam Pemeriksaan Kesehatan, Kubernetes akan secara otomatis memberikan pengganti. Kubernetes tidak hanya memonitor crash aplikasi Anda. Ini dapat membuat lebih banyak salinan aplikasi untuk bekerja pada beberapa mesin, memperbarui aplikasi, atau secara bersamaan menjalankan beberapa versi aplikasi Anda.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oleh karena itu, ada banyak alasan mengapa Kubernetes dapat mengganggu wadah yang sangat sehat. Misalnya, jika Anda meningkatkan penyebaran Anda, Kubernetes perlahan akan menghentikan pod lama saat meluncurkan yang baru. Jika Anda memutuskan suatu simpul, Kubernetes akan menghentikan semua perapian di simpul itu. Akhirnya, jika node kehabisan sumber daya, Kubernetes akan menonaktifkan semua pod untuk membebaskan sumber daya ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena itu, sangat penting bahwa aplikasi Anda berhenti bekerja dengan dampak minimal pada pengguna akhir dan waktu pemulihan minimum. Ini berarti bahwa sebelum memutuskan sambungan harus menyimpan semua data yang perlu disimpan, tutup semua koneksi jaringan, selesaikan pekerjaan yang tersisa dan punya waktu untuk menyelesaikan tugas mendesak lainnya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam praktiknya, ini berarti bahwa aplikasi Anda harus dapat memproses pesan SIGTERM - sinyal penghentian proses, yang merupakan sinyal default untuk utilitas mematikan di OS Unix family. Setelah menerima pesan ini, aplikasi harus terputus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah Kubernetes memutuskan untuk menyelesaikan pod, serangkaian acara berlangsung. Mari kita lihat setiap langkah yang diambil Kubernetes saat sebuah wadah atau perapian selesai. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalkan kita ingin menyelesaikan salah satu perapian. Pada titik ini, itu akan berhenti menerima lalu lintas baru - kontainer yang bekerja di perapian tidak akan terpengaruh, tetapi semua lalu lintas baru akan diblokir.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sw/go/iq/swgoiqnkzgrbf1g9ikbyc7kq6ym.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat kait preStop - ini adalah perintah khusus atau permintaan HTTP yang dikirim ke kontainer di perapian. Jika aplikasi Anda tidak mati dengan benar ketika SIGTERM diterima, Anda dapat menggunakan preStop untuk keluar dengan benar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rc/rk/a-/rcrka-cajxoq76gtcdaopdabeak.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagian besar program ketika mereka menerima sinyal SIGTERM selesai dengan benar, tetapi jika Anda menggunakan kode pihak ketiga atau beberapa sistem yang tidak dapat Anda kontrol sepenuhnya, kait preStop adalah cara yang bagus untuk menyebabkan shutdown yang anggun tanpa mengubah aplikasi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah mengeksekusi kait ini, Kubernetes akan mengirimkan sinyal SIGTERM ke kontainer di perapian, yang akan membuat mereka tahu bahwa mereka akan segera terputus. Setelah menerima sinyal ini, kode Anda akan melanjutkan ke proses mematikan. Proses ini dapat termasuk menghentikan koneksi yang berumur panjang, seperti menghubungkan ke database atau aliran WebSocket, menyimpan keadaan saat ini, dan sejenisnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bahkan jika Anda menggunakan kait preStop, sangat penting untuk memeriksa apa yang sebenarnya terjadi dengan aplikasi Anda ketika Anda mengirimnya sinyal SIGTERM, bagaimana ia berperilaku sedemikian rupa sehingga peristiwa atau perubahan dalam operasi sistem yang disebabkan oleh penutupan perapian bukan kejutan bagi Anda.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada titik ini, sebelum mengambil tindakan lebih lanjut, Kubernetes akan menunggu waktu yang ditentukan, yang disebut terminationGracePeriodSecond, atau periode untuk dimatikan dengan benar ketika menerima sinyal SIGTERM. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_9/uq/gj/_9uqgjt61tblfxn6kgbrjnh3zs8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara default, periode ini adalah 30 detik. Penting untuk dicatat bahwa itu berlangsung paralel dengan kait preStop dan sinyal SIGTERM. Kubernetes tidak akan menunggu kait preStop dan SIGTERM berakhir - jika aplikasi Anda keluar sebelum TerminationGracePeriod berakhir, Kubernetes akan segera melanjutkan ke langkah berikutnya. Oleh karena itu, periksa bahwa nilai periode ini dalam detik tidak kurang dari waktu yang diperlukan untuk perapian mati dengan benar, dan jika melebihi 30 detik, tambah periode ke nilai yang diinginkan dalam YAML. Dalam contoh di atas, ini adalah 60-an.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan akhirnya, langkah terakhir - jika kontainer masih terus bekerja setelah terminationGracePeriod berakhir, mereka akan mengirim sinyal SIGKILL dan akan dihapus secara paksa. </font><font style="vertical-align: inherit;">Pada titik ini, Kubernetes juga akan membersihkan semua objek pod lainnya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pt/zp/t9/ptzpt92xzjuszc3tw0mwhgbp80m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernet mematikan perapian karena berbagai alasan, jadi pastikan bahwa dalam hal apa pun aplikasi Anda akan diselesaikan dengan benar untuk memastikan operasi layanan yang stabil. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Praktik terbaik Kubernetes. </font><font style="vertical-align: inherit;">Memetakan layanan eksternal</font></font></a><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Z_l_kE1MDTc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sedikit iklan :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terima kasih untuk tetap bersama kami. Apakah Anda suka artikel kami? Ingin melihat materi yang lebih menarik? Dukung kami dengan melakukan pemesanan atau merekomendasikan kepada teman Anda </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS berbasis cloud untuk pengembang mulai $ 4,99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analog unik dari server entry-level yang diciptakan oleh kami untuk Anda: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seluruh kebenaran tentang VPS (KVM) E5-2697 v3 (6 Cores) 10GB DDR4 480GB SSD 1Gbps mulai dari $ 19 atau cara membagi server?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (opsi tersedia dengan RAID1 dan RAID10, hingga 24 core dan hingga 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 kali lebih murah di pusat data Equinix Tier IV di Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hanya kami yang memiliki </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV dari $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di Belanda!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - mulai dari $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baca tentang</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cara Membangun Infrastruktur Bldg. </font><font style="vertical-align: inherit;">kelas c menggunakan server Dell R730xd E5-2650 v4 seharga 9.000 euro untuk satu sen?</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id503472/index.html">Pembayaran tanpa uang tunai, podcast, dan daging buatan: apa yang dilakukan perusahaan lain dengan baik menghadapi krisis coronavirus</a></li>
<li><a href="../id503474/index.html">Pengalaman pengembangan aplikasi saya sebagai PM</a></li>
<li><a href="../id503476/index.html">Rekam video autotest UI yang bekerja di Chrome tanpa kepala</a></li>
<li><a href="../id503480/index.html">Hingga 40 Ribu: Lebih dari 10 Ulasan Pemain Vinyl</a></li>
<li><a href="../id503486/index.html">Berapa banyak instruksi di x86?</a></li>
<li><a href="../id503490/index.html">Perbandingan adegan rap Rusia menggunakan teknik R dan Text Mining. Noize Mc, Oxxxymiron, Paman Zhenya. Episode 2</a></li>
<li><a href="../id503494/index.html">Merakit gateway DIY untuk perangkat Zigbee</a></li>
<li><a href="../id503504/index.html">Proyek Ilmu Data yang paling sukses dan paling memalukan: Cambridge Analytica</a></li>
<li><a href="../id503508/index.html">Sekolah, guru, siswa, nilai dan peringkat mereka</a></li>
<li><a href="../id503518/index.html">Neomorfisme menggunakan SwiftUI. Bagian 2: Apa yang dapat dilakukan dengan aksesibilitas?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>