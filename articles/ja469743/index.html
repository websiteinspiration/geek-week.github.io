<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌧️ 🐐 👨🏿 セレスティア：スペースバグアドベンチャー 👩🏽‍🏫 👦🏾 🚠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Celestiaは3次元空間シミュレーターです。宇宙シミュレーションでは、宇宙を3次元で探索できます。Celestiaは、Windows、Linux、およびmacOSで使用できます。プロジェクトは非常に小さく、PVS-Studioを使用すると、非常に少数の欠陥が検出されます。ただし、これは改善に役立...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>セレスティア：スペースバグアドベンチャー</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/469743/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/230/63e/3b7/23063e3b758a73fe27fc09ff16f33c1b.png" alt="写真1"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Celestiaは3次元空間シミュレーターです。</font><font style="vertical-align: inherit;">宇宙シミュレーションでは、宇宙を3次元で探索できます。</font><font style="vertical-align: inherit;">Celestiaは、Windows、Linux、およびmacOSで使用できます。</font><font style="vertical-align: inherit;">プロジェクトは非常に小さく、PVS-Studioを使用すると、非常に少数の欠陥が検出されます。</font><font style="vertical-align: inherit;">ただし、これは改善に役立つ人気のある教育プロジェクトであるため、本当に彼に注意を払いたいと思います。</font><font style="vertical-align: inherit;">ちなみに、このプログラムは人気のある映画、シリーズ、空間を表現するプログラムで使用されています。</font><font style="vertical-align: inherit;">これは、コードの品質要件も引き上げます。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h2><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Celestia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
プロジェクトの公式ウェブサイトで、</font><font style="vertical-align: inherit;">その詳細な説明を見つけることができます。</font><font style="vertical-align: inherit;">プロジェクトのソースコードは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でホストされ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ています</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ライブラリとテストを除いて、アナライザーは166個の.cppファイルをチェックしました。</font><font style="vertical-align: inherit;">プロジェクトは小規模ですが、見つかった欠陥は非常に興味深いものです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードを分析するために、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">静的コードアナライザーを使用しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">CelestiaとPVS-Studioはどちらもクロスプラットフォームです。</font><font style="vertical-align: inherit;">分析には、Windowsプラットフォームを選択しました。</font><font style="vertical-align: inherit;">このプロジェクトは</font><font style="vertical-align: inherit;">、Microsoftライブラリマネージャーである</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vcpkg</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して依存関係を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">取得</font></a><font style="vertical-align: inherit;">することで、簡単に構築できました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">レビューによると</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コナン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">劣ります</font><font style="vertical-align: inherit;">が、このプログラムも使い勝手が良かったです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析結果</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告1 </font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V501</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「&lt;」演算子の左側と右側に同じサブ式があります：b.nAttributes &lt;b.nAttributes cmodfix.cpp 378</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-keyword">const</span> Mesh::VertexDescription&amp; a,
               <span class="hljs-keyword">const</span> Mesh::VertexDescription&amp; b)<font></font>
{<font></font>
  <span class="hljs-keyword">if</span> (a.stride &lt; b.stride)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">if</span> (b.stride &lt; a.stride)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (a.nAttributes &lt; b.nAttributes)  <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">if</span> (b.nAttributes &lt; b.nAttributes)  <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
<font></font>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint32_t</span> i = <span class="hljs-number">0</span>; i &lt; a.nAttributes; i++)<font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (a.attributes[i] &lt; b.attributes[i])
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (b.attributes[i] &lt; a.attributes[i])
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードをコピーするときに間違いを犯すのはどれほど簡単か。</font><font style="vertical-align: inherit;">すべてのレビューでこれについて書いています。</font><font style="vertical-align: inherit;">どうやら、静的なコード分析だけがこの状況で役立つことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プログラマーが条件式をコピーし、完全には編集しませんでした。</font><font style="vertical-align: inherit;">正しいオプションはおそらくこれです：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span> (a.nAttributes &lt; b.nAttributes)
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
<span class="hljs-keyword">if</span> (b.nAttributes &lt; a.nAttributes)
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このトピックに関する興味深い研究：「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">悪は比較機能に住んで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いる」</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告2 </font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V575</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「memset」関数は「0」要素を処理します。</font><font style="vertical-align: inherit;">3番目の引数を調べます。</font><font style="vertical-align: inherit;">winmain.cpp 2235</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BuildScriptsMenu</span><span class="hljs-params">(HMENU menuBar, <span class="hljs-keyword">const</span> fs::path&amp; scriptsDir)</span>
</span>{<font></font>
  ....<font></font>
  MENUITEMINFO info;<font></font>
  <span class="hljs-built_in">memset</span>(&amp;info, <span class="hljs-keyword">sizeof</span>(info), <span class="hljs-number">0</span>);<font></font>
  info.cbSize = <span class="hljs-keyword">sizeof</span>(info);<font></font>
  info.fMask = MIIM_SUBMENU;<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードの作成者は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memset</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数の2番目と3番目の引数を混同しています</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">構造体をゼロで埋める代わりに、0バイトのメモリを埋めることが示されています。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告3 </font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V595</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nullptrに対して検証される前に、「宛先」ポインターが使用されました。</font><font style="vertical-align: inherit;">チェック行：48、50。wintourguide.cpp 48</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">BOOL APIENTRY <span class="hljs-title">TourGuideProc</span><span class="hljs-params">(....)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">const</span> DestinationList* destinations = guide-&gt;appCore-&gt;getDestinations();<font></font>
  Destination* dest = (*destinations)[<span class="hljs-number">0</span>];<font></font>
  guide-&gt;selectedDest = dest;<font></font>
  <span class="hljs-keyword">if</span> (hwnd != <span class="hljs-literal">NULL</span> &amp;&amp; destinations != <span class="hljs-literal">NULL</span>)<font></font>
  {<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">宛先</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ポインタは</font><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NULL</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と比較されるよりも2行高く逆参照され</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このようなコードは、エラーを引き起こす可能性があります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告4 </font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V702</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスは常にstd ::例外（および同様のもの）から「public」として派生する必要があります（キーワードが指定されなかったため、コンパイラーはデフォルトで「private」に設定しています）</font><font style="vertical-align: inherit;">fs.h 21</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">filesystem_error</span> :</span> <span class="hljs-built_in">std</span>::system_error<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:<font></font>
  filesystem_error(<span class="hljs-built_in">std</span>::error_code ec, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* msg) :
    <span class="hljs-built_in">std</span>::system_error(ec, msg)<font></font>
  {<font></font>
  }<font></font>
}; <span class="hljs-comment">// filesystem_error</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザー</font><font style="vertical-align: inherit;">は、</font><i><font style="vertical-align: inherit;">プライベート</font></i><font style="vertical-align: inherit;">修飾子</font><font style="vertical-align: inherit;">（デフォルトで指定）を</font><font style="vertical-align: inherit;">介して</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">std ::例外</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスから継承されたクラスを検出しました</font><font style="vertical-align: inherit;">。非パブリック継承では、</font><i><font style="vertical-align: inherit;">std ::例外例外</font></i><font style="vertical-align: inherit;">をキャッチしよう</font><font style="vertical-align: inherit;">とするとスキップされる</font><font style="vertical-align: inherit;">ため、この継承は危険</font><font style="vertical-align: inherit;">です。その結果、例外ハンドラーは意図したとおりに動作しません。</font><b><font style="vertical-align: inherit;">警告5 </font></b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">V713</font></a><font style="vertical-align: inherit;">ポインター 's'は、同じ論理式のnullptrに対して検証される前に、論理式で使用されました。 winmain.cpp 3031</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">char</span>* <span class="hljs-title">skipUntilQuote</span><span class="hljs-params">(<span class="hljs-keyword">char</span>* s)</span>
</span>{
  <span class="hljs-keyword">while</span> (*s != <span class="hljs-string">'"'</span> &amp;&amp; s != <span class="hljs-string">'\0'</span>)<font></font>
    s++;<font></font>
  <span class="hljs-keyword">return</span> s;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
条件式のある場所で、ポインタ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を逆参照するのを忘れていました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">結果は、ポインターの比較ではなく、ポインターの比較でした。</font><font style="vertical-align: inherit;">そして、これはこの状況では意味がありません。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告6 </font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V773</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数は、「vertexShader」ポインターを解放せずに終了しました。</font><font style="vertical-align: inherit;">メモリリークの可能性があります。</font><font style="vertical-align: inherit;">modelviewwidget.cpp 1517</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">GLShaderProgram*
<span class="hljs-title">ModelViewWidget::createShader</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ShaderKey&amp; shaderKey)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">auto</span>* glShader = <span class="hljs-keyword">new</span> GLShaderProgram();
  <span class="hljs-keyword">auto</span>* vertexShader = <span class="hljs-keyword">new</span> GLVertexShader();
  <span class="hljs-keyword">if</span> (!vertexShader-&gt;compile(vertexShaderSource.toStdString()))<font></font>
  {<font></font>
      qWarning(<span class="hljs-string">"Vertex shader error: %s"</span>, vertexShader-&gt;<span class="hljs-built_in">log</span>().c_str());
      <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; vertexShaderSource.toStdString() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
      <span class="hljs-keyword">delete</span> glShader;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数を終了すると、メモリは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">glShader</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポインターによって解放されます</font><font style="vertical-align: inherit;">が、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vertexShader</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポインターによってクリアされません</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下のコードの同じ場所：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V773「fragmentShader」ポインタを解放せずに関数が終了しました。</font><font style="vertical-align: inherit;">メモリリークの可能性があります。</font><font style="vertical-align: inherit;">modelviewwidget.cpp 1526</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告7 </font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V547</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">式 '！InputFilename.empty（）'は常にtrueです。</font><font style="vertical-align: inherit;">makexindex.cpp 128</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>* argv[])</span>
</span>{
  <span class="hljs-keyword">if</span> (!parseCommandLine(argc, argv) || inputFilename.empty())<font></font>
  {<font></font>
    Usage();<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<font></font>
  }<font></font>
<font></font>
  istream* inputFile = &amp;<span class="hljs-built_in">cin</span>;
  <span class="hljs-keyword">if</span> (!inputFilename.empty())<font></font>
  {<font></font>
    inputFile = <span class="hljs-keyword">new</span> ifstream(inputFilename, ios::in);
    <span class="hljs-keyword">if</span> (!inputFile-&gt;good())<font></font>
    {<font></font>
      <span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"Error opening input file "</span> &lt;&lt; inputFilename &lt;&lt; <span class="hljs-string">'\n'</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<font></font>
    }<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイル名を再確認してください。</font><font style="vertical-align: inherit;">これはエラーではありません</font><font style="vertical-align: inherit;">が、関数の最初で</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inputFilename</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数</font><i><font style="vertical-align: inherit;">が</font></i><font style="vertical-align: inherit;">既に</font><i><font style="vertical-align: inherit;">チェックさ</font></i><font style="vertical-align: inherit;">れているため、以下で検証を削除できるため、コードがよりコンパクトになります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告8 </font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V556</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">異なる列挙型の値が比較されます：スイッチ（ENUM_TYPE_A）{ケースENUM_TYPE_B：...}。</font><font style="vertical-align: inherit;">render.cpp 7457</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">enum</span> LabelAlignment<font></font>
{<font></font>
  AlignCenter,<font></font>
  AlignLeft,<font></font>
  AlignRight<font></font>
};<font></font>
<font></font>
<span class="hljs-keyword">enum</span> LabelVerticalAlignment<font></font>
{<font></font>
  VerticalAlignCenter,<font></font>
  VerticalAlignBottom,<font></font>
  VerticalAlignTop,<font></font>
};<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Annotation</span>
{</span><font></font>
  ....<font></font>
  LabelVerticalAlignment valign : <span class="hljs-number">3</span>;<font></font>
  ....<font></font>
};<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Renderer::renderAnnotations</span><span class="hljs-params">(....)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">switch</span> (annotations[i].valign)<font></font>
  {<font></font>
  <span class="hljs-keyword">case</span> AlignCenter:<font></font>
    vOffset = -font[fs]-&gt;getHeight() / <span class="hljs-number">2</span>;
    <span class="hljs-keyword">break</span>;
  <span class="hljs-keyword">case</span> VerticalAlignTop:<font></font>
    vOffset = -font[fs]-&gt;getHeight();<font></font>
    <span class="hljs-keyword">break</span>;
  <span class="hljs-keyword">case</span> VerticalAlignBottom:<font></font>
    vOffset = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">break</span>;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
では</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">switch文</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、列挙値が混乱しています。</font><font style="vertical-align: inherit;">このため、異なるタイプの列挙は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LabelVerticalAlignment</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AlignCenterの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1か所で比較され</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告9 </font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V581</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">互いに並んで配置された「if」ステートメントの条件式は同じです。</font><font style="vertical-align: inherit;">チェック行：2844、2850。shadermanager.cpp 2850</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">GLVertexShader*
<span class="hljs-title">ShaderManager::buildParticleVertexShader</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ShaderProperties&amp; props)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (props.texUsage &amp; ShaderProperties::PointSprite)<font></font>
  {<font></font>
    source &lt;&lt; <span class="hljs-string">"uniform float pointScale;\n"</span>;<font></font>
    source &lt;&lt; <span class="hljs-string">"attribute float pointSize;\n"</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (props.texUsage &amp; ShaderProperties::PointSprite)<font></font>
  {<font></font>
    source &lt;&lt; DeclareVarying(<span class="hljs-string">"pointFade"</span>, Shader_Float);<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーが2つの同一の条件式を連続して検出しました。</font><font style="vertical-align: inherit;">誤りがあるか、2つの条件を1つに組み合わせることができるため、コードが簡略化されます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告10 </font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V668</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「new」演算子を使用してメモリが割り当てられたため、「dp」ポインタをnullに対してテストしても意味がありません。</font><font style="vertical-align: inherit;">メモリ割り当てエラーの場合、例外が生成されます。</font><font style="vertical-align: inherit;">windatepicker.cpp 625</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> LRESULT
<span class="hljs-title">DatePickerCreate</span><span class="hljs-params">(HWND hwnd, CREATESTRUCT&amp; cs)</span>
</span>{<font></font>
  DatePicker* dp = <span class="hljs-keyword">new</span> DatePicker(hwnd, cs);
  <span class="hljs-keyword">if</span> (dp == <span class="hljs-literal">NULL</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">new</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
演算子によって返されるポインターの値は</font><font style="vertical-align: inherit;">ゼロと比較されます。</font><font style="vertical-align: inherit;">オペレーターがメモリを割り当てることができなかった場合、C ++言語標準に従って、例外</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">std :: bad_alloc（）がスローされ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">したがって、ゼロへのポインタをチェックしても意味がありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに3つの同様のチェック：</font></font><br>
<br>
<ul>
<li>V668 There is no sense in testing the 'modes' pointer against null, as the memory was allocated using the 'new' operator. The exception will be generated in the case of memory allocation error. winmain.cpp 2967</li>
<li>V668 There is no sense in testing the 'dropTarget' pointer against null, as the memory was allocated using the 'new' operator. The exception will be generated in the case of memory allocation error. winmain.cpp 3272</li>
<li>V668 There is no sense in testing the 'appCore' pointer against null, as the memory was allocated using the 'new' operator. The exception will be generated in the case of memory allocation error. winmain.cpp 3352</li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告11 </font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V624</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定数3.14159265が使用されています。</font><font style="vertical-align: inherit;">結果の値は不正確になる可能性があります。</font><font style="vertical-align: inherit;">&lt;math.h&gt;のM_PI定数の使用を検討してください。</font><font style="vertical-align: inherit;">3dstocmod.cpp 62</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>* argv[])</span>
</span>{<font></font>
  ....<font></font>
  Model* newModel = GenerateModelNormals(*model,<font></font>
    <span class="hljs-keyword">float</span>(smoothAngle * <span class="hljs-number">3.14159265</span> / <span class="hljs-number">180.0</span>), weldVertices, weldTolerance);<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
診断をお勧めしますが、標準ライブラリのPi番号には既製の定数を使用することをお勧めします。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最近、このプロジェクトは愛好家によって開発されましたが、まだ人気があり、トレーニングプログラムで需要があります。インターネット上には、さまざまなスペースオブジェクトを持つ数千のアドオンがあります。セレスティアは、映画「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">明後の日</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」とドキュメンタリーシリーズ「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モーガンフリーマンとのワームホールを抜けて</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」で使用されました</font><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">多くの</font></a><font style="vertical-align: inherit;">オープンソースプロジェクトを</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チェックすることで</font><font style="vertical-align: inherit;">、静的コード分析の方法論を普及させるだけでなく、オープンプロジェクトの世界の発展にも貢献しています。ちなみに、PVS-Studioアナライザーを使用して、独自のテストだけでなく、熱狂的なサードパーティプロジェクトをテストすることもできます。これを行うには、</font><font style="vertical-align: inherit;">無料ライセンスの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">オプションの</font></a><font style="vertical-align: inherit;"> 1つを使用できます</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
静的コードアナライザーを使用して、プロジェクトの信頼性を向上させます。</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事を英語を話す視聴者と共有したい場合は、翻訳へのリンクを使用してください：Svyatoslav Razmyslov。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Celestia：Bugs 'Adventures in Space</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja469731/index.html">IRO.Mvc.MvcExceptionHandlerを使用したASP.NET例外の処理</a></li>
<li><a href="../ja469733/index.html">ラジコンカー：初めての購入-シャーシとパワートレイン</a></li>
<li><a href="../ja469735/index.html">任意の正の数からn次の根を計算するアルゴリズム</a></li>
<li><a href="../ja469737/index.html">木製おもちゃ、パート5-1991</a></li>
<li><a href="../ja469739/index.html">木製おもちゃ、パート6-1992</a></li>
<li><a href="../ja469745/index.html">10月14〜15日：モスクワで初めて、グローバルブロックチェーンプロジェクトHyperledgerのブートキャンプ</a></li>
<li><a href="../ja469747/index.html">10月のITイベントダイジェスト（パート1）</a></li>
<li><a href="../ja469749/index.html">TabキーでUXを改善する</a></li>
<li><a href="../ja469753/index.html">2019年9月の9つの最高のオープンソース検索</a></li>
<li><a href="../ja469755/index.html">良いプログラマーになる方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>