<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¥ ğŸ“¯ ğŸ’® Colocando o jogo "Cobra" na tÃ¡bua de pÃ£o. Parte 1: mÃ¡quinas de estado ğŸ‘ƒğŸ¾ ğŸ™†ğŸ¿ ğŸ”˜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No lazer, meu filho e eu estudamos eletrÃ´nica digital. Recentemente, chegamos ao capÃ­tulo sobre mÃ¡quinas de estados finitos. Este tÃ³pico estÃ¡ repleto ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Colocando o jogo "Cobra" na tÃ¡bua de pÃ£o. Parte 1: mÃ¡quinas de estado</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502370/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No lazer, meu filho e eu estudamos eletrÃ´nica digital. Recentemente, chegamos ao capÃ­tulo sobre mÃ¡quinas de estados finitos. Este tÃ³pico estÃ¡ repleto de tarefas tÃ­picas, como um semÃ¡foro ou uma mÃ¡quina de venda automÃ¡tica. Mas todos eles sÃ£o monÃ³tonos e simples demais, e alguns sÃ£o geralmente francos. Depois de estudar exemplos simples, eu queria fazer algo mais interessante e complexo. O jogo clÃ¡ssico â€œcobraâ€ chamou minha atenÃ§Ã£o (meu filho jogou no telefone), e eu sugeri fazÃª-lo em mÃ¡quinas de estado. Afinal, o estado do jogo Ã© bastante final (especialmente se vocÃª se limitar a um campo pequeno) e, a partir das entradas, existem apenas 4 botÃµes. E Ã© isso que conseguimos.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wq/9e/m3/wq9em3hfdynwkdketucwhzg6x38.gif"></div><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O jogo Snake (ela Ã© uma cobra, python, jibÃ³ia, etc.) Ã© amplamente conhecido por todos. Ela vem dos distantes anos 70, mas nÃ£o vou repetir a histÃ³ria dela, que vocÃª pode ler </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na Wikipedia</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muitos </font></font></u></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artigos</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre HabrÃ©. O jogo tem regras bastante simples e, ao mesmo tempo, jogabilidade viciante)) GraÃ§as a isso, Ã© frequentemente </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usado</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tutoriais</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exemplos de </font></font></u></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cÃ³digo</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nas linguagens de programaÃ§Ã£o de alto nÃ­vel, fazer um jogo desses Ã© bastante fÃ¡cil. PorÃ©m, em condiÃ§Ãµes mais limitadas, o mais interessante comeÃ§a, por exemplo, uma implementaÃ§Ã£o no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LabVIEW</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Existem tambÃ©m muitas opÃ§Ãµes no FPGA: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">link 1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">link 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">link 3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mas nÃ£o houve uma Ãºnica opÃ§Ã£o em chips TTL separados das sÃ©ries padrÃ£o. EntÃ£o Ã© isso que faremos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece que as soluÃ§Ãµes FPGA sÃ£o as mais prÃ³ximas de nÃ³s, e vocÃª pode pedir muito emprestado a partir daÃ­? Mas em todas as opÃ§Ãµes que eu observei, elas sÃ£o facilmente espalhadas nos registros esquerdo e direito. Por exemplo, muitas vezes um bit ou nÃºmero separado Ã© alocado para cada cÃ©lula de campo. NÃ£o podemos fazer isso com pÃ³ solto, porque cada novo registro Ã© um microcircuito separado que precisa ser colocado em algum lugar e depois conectado. Portanto, cruzamos toda a experiÃªncia acumulada por outros desenvolvedores e faremos tudo do zero. Como bÃ´nus, coletaremos tudo sobre os chips domÃ©sticos (e melhores - soviÃ©ticos) da sÃ©rie k555 / kr1533, com exceÃ§Ã£o das ROMs, que deverÃ£o ser atualizadas.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FormulaÃ§Ã£o do problema</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Teremos essas restriÃ§Ãµes: um campo de tamanho 8 Ã— 8 cÃ©lulas ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matriz</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> chinesa de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">LED</font></a><font style="vertical-align: inherit;"> ), um comprimento de cauda de 8 cÃ©lulas. </font><font style="vertical-align: inherit;">Uma cobra pode atravessar paredes, mas nÃ£o processaremos a interseÃ§Ã£o com a cauda no inÃ­cio (para nÃ£o complicar o design, vocÃª pode adicionÃ¡-lo mais tarde). </font><font style="vertical-align: inherit;">Para descrever todo o estado do jogo, precisamos:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PosiÃ§Ã£o da cabeÃ§a (X = 0..7, Y = 0..7, 6 bits)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DireÃ§Ã£o do movimento (â†‘ â†“ â† â†’, 2 bits)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PosiÃ§Ã£o da Apple (X, Y, 6 bits)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comprimento da cauda (0..7, 3 bits)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A posiÃ§Ã£o das cÃ©lulas da cauda (de 0 a 7 pedaÃ§os de 6 bits cada)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No total, sÃ£o obtidos 65 bits, mesmo que registremos 8 bits cada, apenas 8 microcircuitos (e mais um gatilho) sÃ£o necessÃ¡rios para armazenar o estado, isso Ã© bastante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas a cauda nÃ£o pode ser localizada onde quer que ela "cresÃ§a" da cabeÃ§a. </font><font style="vertical-align: inherit;">Portanto, podemos armazenar nÃ£o as coordenadas completas de cada seÃ§Ã£o da cauda, â€‹â€‹mas apenas a direÃ§Ã£o em que direÃ§Ã£o da cÃ©lula anterior (ou cabeÃ§a) ela precisa ser desenhada. </font><font style="vertical-align: inherit;">EntÃ£o, em vez de 6 Ã— 8 = 48 bits, precisamos de 4 Ã— 8 = 16 bits, e isso economiza atÃ© quatro casos de registro!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MÃ¡quinas automÃ¡ticas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos tentar fazer tudo em mÃ¡quinas semelhantes a Moore ou Miles. </font><font style="vertical-align: inherit;">Para implementar esse autÃ´mato, basta ter um pouco de memÃ³ria de estado (registro) e lÃ³gica combinacional para alternar entre eles. </font><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Wikipedia</font></a></i></font><br>
<br>
<img src="https://habrastorage.org/webt/f4/o-/oq/f4o-oqkcsvqo5ohkwugmxc7vwb4.png"><br clear="all">
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> picture</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Geralmente, uma mÃ¡quina de estados Ã© descrita como um grÃ¡fico de estados e transiÃ§Ãµes entre eles. </font><font style="vertical-align: inherit;">Ã€s vezes, Ã© mais conveniente criar uma tabela de transiÃ§Ãµes para um novo estado, o exemplo mais simples (da Wikipedia): </font></font><br>
<img src="https://habrastorage.org/webt/dm/e6/3i/dme63iuq9yaq1jelbizwkcxyi-y.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vocÃª pode encontrar mais informaÃ§Ãµes e imagens bonitas, por exemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neste artigo em HabrÃ©</font></font></a></i><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pequena digressÃ£o</font></font></b>
                        <div class="spoiler_text">  , ,        .     ,  ROM       ,        ROM. <i>(  ,      )</i>.<br>
<br>
      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">, , </a>. <br>
<br>
<img src="https://habrastorage.org/webt/ni/sb/99/nisb99zh_hwtazsponzz_ksr_ua.png"><br>
        ,      Â« Â»       .<br>
<br clear="all">
<hr></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma cobra de vÃ¡rios estados (se vocÃª nÃ£o levar em consideraÃ§Ã£o a posiÃ§Ã£o da maÃ§Ã£) pode ter 2 ^ 8 + 2 ^ 10 + ... + 2 ^ 24 â‰ˆ 32 milhÃµes. </font><font style="vertical-align: inherit;">NÃ£o Ã© possÃ­vel escrevÃª-los na tabela e ainda mais desenhar um grÃ¡fico de transiÃ§Ã£o. </font><font style="vertical-align: inherit;">Mas a maioria das transiÃ§Ãµes Ã© a mesma (a cabeÃ§a move apenas uma cÃ©lula adjacente e a cauda move uma seÃ§Ã£o por turno). </font><font style="vertical-align: inherit;">Nesse caso, nÃ£o podemos descrever cada estado individual, mas formular um novo estado em funÃ§Ã£o do estado anterior. </font><font style="vertical-align: inherit;">AlÃ©m disso, podemos dividir o jogo inteiro em vÃ¡rios autÃ´matos paralelos: 1) uma mÃ¡quina automÃ¡tica de direÃ§Ã£o, 2) uma mÃ¡quina automÃ¡tica de posiÃ§Ã£o da cabeÃ§a, 3) uma mÃ¡quina automÃ¡tica para a cauda. </font><font style="vertical-align: inherit;">E para definir cada um deles como serÃ¡ mais conveniente:</font></font><br>
<br>
<pre><code class="plaintext hljs">1) ,  â”‚  <font></font>
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<font></font>
   â†        â†/â†“/â†‘     â”‚ â†<font></font>
   â†          â†’       â”‚ â†’<font></font>
   â†‘        â†‘/â†/â†’     â”‚ â†‘<font></font>
   â†‘          â†“       â”‚ â†“<font></font>
   ......          â”‚<font></font>
</code></pre><br>
<pre><code class="plaintext hljs">2) ,  â”‚  <font></font>
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<font></font>
   â†             (x,y) â”‚ (x-1, y)<font></font>
   â†’             (x,y) â”‚ (x+1, y)<font></font>
   â†‘             (x,y) â”‚ (x, y-1)<font></font>
   â†“             (x,y) â”‚ (x, y+1)<font></font>
</code></pre><br>
<pre><code class="plaintext hljs">3) ,                       â”‚  <font></font>
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<font></font>
   â†            (t1,t2,t3,t4,t5,t6,t7,t8)  â”‚ (â†,t1,t2,t3,t4,t5,t6,t7)<font></font>
   ......                               â”‚<font></font>
</code></pre><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DireÃ§Ã£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos comeÃ§ar com a mÃ¡quina direcional. </font><font style="vertical-align: inherit;">Se vocÃª pensar com cuidado, poderÃ¡ montÃ¡-lo em uma lÃ³gica separada. </font><font style="vertical-align: inherit;">Mas, como a tarefa como um todo jÃ¡ Ã© bastante grande, decidi que seria mais fÃ¡cil criar uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tabela de pesquisa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da EEPROM e escrever a tabela de transiÃ§Ã£o manualmente. </font><font style="vertical-align: inherit;">Ele terÃ¡ 6 entradas, o que significa apenas 64 valores, que podemos simplesmente inserir no editor hexadecimal.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vb/08/hw/vb08hwgm-lxgjmqawc6zkeigrmm.jpeg"><br>
<a name="snake_head"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CabeÃ§a</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para uma mÃ¡quina de posiÃ§Ã£o da cabeÃ§a, escrever uma mesa assim serÃ¡ muito mais difÃ­cil. Mas contÃ©m essencialmente apenas 2 operaÃ§Ãµes: +1 e -1. Eles podem ser implementados em um somador K155IM6 de 4 bits. Para +1, adicionaremos nossa coordenada com b'0001 e para -1 com b'1111 (que na verdade Ã© -1 no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cÃ³digo adicional</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Vamos precisar de dois somadores (para xey), um pouco de lÃ³gica, e armazenaremos o estado no registro de 8 bits IR27 (ainda precisamos de muitos):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gy/d_/zb/gyd_zbcbp4jntzurp2_-zjo2jbk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos montÃ¡-lo na placa e, para verificaÃ§Ã£o, conectaremos imediatamente a matriz de LEDs com dois decodificadores. O decodificador com saÃ­das inversas Ã© ID7 e, para o direto, seria possÃ­vel usar o K561ID1 (CD4028), mas eu nÃ£o o tinha Ã  mÃ£o. Outra opÃ§Ã£o Ã© levar 8 transistores como chaves, mas eu nÃ£o queria fazer isso, entÃ£o tive que gastar estupidamente outra EEPROM (escrevendo apenas 8 cÃ©lulas lÃ¡). </font><i><font style="vertical-align: inherit;">A lÃ³gica da nova posiÃ§Ã£o da cabeÃ§a em uma placa separada no topo </font></i><b><font style="vertical-align: inherit;">Outra digressÃ£o</font></b></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/ur/bi/oz/urbiozx7zqk7bi33vx3k7oxkglo.jpeg"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos fazer uma pequena pausa e salvar a tÃ¡bua de pÃ£o (e alguns estojos de chips). </font><font style="vertical-align: inherit;">Voltaremos a aproveitar o fato de que qualquer circuito combinado pode ser substituÃ­do por um LUT, escrevendo a tabela na ROM. </font><font style="vertical-align: inherit;">Mas como fazer isso para uma mesa tÃ£o grande? </font><font style="vertical-align: inherit;">Vamos usar outro truque - faremos o oposto: substitua a EEPROM pelo nosso circuito lÃ³gico e coloque-o no programador. </font><sub><i><font style="vertical-align: inherit;">As pernas nÃ£o utilizadas sÃ£o conectadas ao solo atravÃ©s de resistores. </font></i></sub><sub><i><font style="vertical-align: inherit;">(Isso nÃ£o poderia ser feito se vocÃª se aprofundar nas configuraÃ§Ãµes do programador)</font></i></sub><font style="vertical-align: inherit;"> 
Agora, leremos nosso diagrama lÃ³gico como ROM e obteremos uma tabela. </font><font style="vertical-align: inherit;">NÃ³s o escrevemos com o mesmo programador em uma EEPROM real, que colocamos em vez de um circuito de elementos separados.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/fr/0d/ve/fr0dve-4fubq-v6y-8ilwnqomfs.jpeg"></a><br>
<sub><i><font style="vertical-align: inherit;"></font></i></sub><br>
<br><font style="vertical-align: inherit;"></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/u0/bm/5u/u0bm5uhoa8tbq9_k79djxlhcnfc.jpeg"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rabo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A cauda tem um comprimento (em nossas limitaÃ§Ãµes) de 2 a 8 cÃ©lulas. </font><font style="vertical-align: inherit;">Para armazenar esse comprimento, vocÃª pode usar um contador convencional com uma entrada de resoluÃ§Ã£o de conta. </font><font style="vertical-align: inherit;">De fato, serÃ¡ a mesma mÃ¡quina de estados finitos, na qual o novo estado S 'serÃ¡ igual a S + 1 ou apenas S (se a conta for proibida). </font><font style="vertical-align: inherit;">A prÃ³pria cauda (ou melhor, a direÃ§Ã£o em que cresce), armazenaremos em dois registros de 8 bits. </font><font style="vertical-align: inherit;">Teoricamente, era possÃ­vel fazer registros de turno prontos (por exemplo, IR8), mas eles nÃ£o estavam disponÃ­veis, entÃ£o o mesmo IR27 foi usado. </font><font style="vertical-align: inherit;">A cada passo, a direÃ§Ã£o atual do movimento da cabeÃ§a Ã© escrita no primeiro bit do registro e o valor do anterior no segundo e no prÃ³ximo. </font><font style="vertical-align: inherit;">Para obter a direÃ§Ã£o do crescimento da cauda, â€‹â€‹basta inverter um pouco. </font><font style="vertical-align: inherit;">VocÃª pode fazer isso imediatamente ao gravar, mas decidi que era melhor deixar o inverso para o circuito restante.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esquema</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No total, nossa mÃ¡quina do prÃ³ximo passo assume esta forma: </font><i><font style="vertical-align: inherit;">Esta imagem (como todos os outros) Ã© clicÃ¡vel. </font></i><font style="vertical-align: inherit;">
Essa Ã© uma parte bastante "pura" (do ponto de vista teÃ³rico) do esquema. </font><font style="vertical-align: inherit;">Exemplo quase perfeito para </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">mÃ¡quinas Moore codificadas de saÃ­da</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">U1 Ã© responsÃ¡vel pela nova direÃ§Ã£o, U2 pela posiÃ§Ã£o da cabeÃ§a, que Ã© armazenada em U5. </font><font style="vertical-align: inherit;">U3 e U4 sÃ£o usados â€‹â€‹para a cauda e seu comprimento Ã© armazenado (e aumentado) em U6. </font><font style="vertical-align: inherit;">
Em seguida, precisaremos exibir tudo o que temos na tela e tambÃ©m haverÃ¡ uma espaÃ§onave, apenas de forma mais suja. </font><font style="vertical-align: inherit;">AlÃ©m de um gerador de nÃºmeros aleatÃ³rios primitivo, uma transiÃ§Ã£o entre circuitos com um sinal de relÃ³gio diferente e outros hacks.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/vs/ou/yl/vsouyl-r2rmfrwnnniwue9hojuq.png"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subtotal</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espero que este artigo tenha lhe interessado e tentarei terminar rapidamente a segunda parte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E se vocÃª jÃ¡ estÃ¡ envolvido na batalha, abastecido com placas de ensaio, microcircuitos e telas de pontos, um arquivo com o circuito ROM e o firmware Ã© anexado a este artigo. </font><font style="vertical-align: inherit;">Mini-spoiler: para repetir o design, serÃ£o necessÃ¡rios cerca de 6 protÃ³tipos, 4 EEPROM 28C16 e um pouco mais de duas dÃºzias de outros chips. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, como deve ser: curtir, compartilhar, retwittar, inscrever-se, pressionar a campainha, etc. ...)) E por hoje tudo, obrigado pela atenÃ§Ã£o! </font><font style="vertical-align: inherit;">Continuaâ€¦</font></font><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquive com firmware ROM e o esquema</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
UPD </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">geral</font></a><font style="vertical-align: inherit;"> : a segunda parte estÃ¡ disponÃ­vel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt502358/index.html">ImplementaÃ§Ã£o do MVP com base em ApplicationController e IoC em um aplicativo WinForms</a></li>
<li><a href="../pt502360/index.html">Descargas pardas ou Super Drill</a></li>
<li><a href="../pt502362/index.html">Rastreamento de eventos de aprendizagem para Windows: teoria e prÃ¡tica</a></li>
<li><a href="../pt502366/index.html">Compare o trabalho do Python de cÃ³digo aberto - bibliotecas para o reconhecimento de entidades nomeadas</a></li>
<li><a href="../pt502368/index.html">NÃ³s bombeamos a esteira</a></li>
<li><a href="../pt502372/index.html">Problemas e princÃ­pios de personalizaÃ§Ã£o da versÃ£o em caixa do Bitrix24</a></li>
<li><a href="../pt502374/index.html">Protocolo de ComunicaÃ§Ã£o FT8 - Como funciona</a></li>
<li><a href="../pt502380/index.html">Aipo + asyncio</a></li>
<li><a href="../pt502382/index.html">Interface Bikes Toxic Grandfather. "Mentiras, ameaÃ§as e chantagem." (s1 e6)</a></li>
<li><a href="../pt502384/index.html">Teoria dos Jogos e sua AplicaÃ§Ã£o na Vida</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>