<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¦… ğŸ§œ ğŸ‘¨ğŸ»â€ğŸ“ ç”¨äºåœ¨Swift 5ä¸­ä½¿ç”¨Combineå¹¶åœ¨SwiftUIä¸­ä½¿ç”¨HTTPè¯·æ±‚çš„ç°ä»£ä»£ç ã€‚ç¬¬1éƒ¨åˆ† ğŸ„ ğŸŒ ğŸ©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æŸ¥è¯¢HTTPæ˜¯å¼€å‘iOSåº”ç”¨ç¨‹åºæ—¶éœ€è¦è·å¾—çš„æœ€é‡è¦çš„æŠ€èƒ½ä¹‹ä¸€ã€‚åœ¨æ—©æœŸç‰ˆæœ¬Swiftï¼ˆç‰ˆæœ¬5ä¹‹å‰ï¼‰ä¸­ï¼Œæ— è®ºæ‚¨æ˜¯ä»å¤´å¼€å§‹ç”Ÿæˆè¿™äº›è¯·æ±‚è¿˜æ˜¯ä½¿ç”¨çŸ¥åçš„Alamofireæ¡†æ¶ï¼Œæœ€ç»ˆéƒ½ä¼šäº§ç”Ÿæ¥è‡ªè¯¥callback ç±»å‹çš„Â  å¤æ‚ä»£ç completionHandler: @escaping(Result<T, A...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ç”¨äºåœ¨Swift 5ä¸­ä½¿ç”¨Combineå¹¶åœ¨SwiftUIä¸­ä½¿ç”¨HTTPè¯·æ±‚çš„ç°ä»£ä»£ç ã€‚ç¬¬1éƒ¨åˆ†</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488442/"><img src="https://habrastorage.org/webt/uk/tq/y4/uktqy4xvl1cqefjbmvzdzydqj-g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æŸ¥è¯¢</font></font><code>HTTP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯å¼€å‘</font></font><code>iOS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åº”ç”¨ç¨‹åº</font><font style="vertical-align: inherit;">æ—¶éœ€è¦è·å¾—çš„æœ€é‡è¦çš„æŠ€èƒ½ä¹‹ä¸€</font><font style="vertical-align: inherit;">ã€‚åœ¨æ—©æœŸç‰ˆæœ¬</font></font><code>Swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆç‰ˆæœ¬5ä¹‹å‰ï¼‰ä¸­ï¼Œæ— è®ºæ‚¨æ˜¯ä»å¤´å¼€å§‹ç”Ÿæˆè¿™äº›è¯·æ±‚è¿˜æ˜¯ä½¿ç”¨çŸ¥åçš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alamofire</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¡†æ¶</font><font style="vertical-align: inherit;">ï¼Œæœ€ç»ˆéƒ½ä¼šäº§ç”Ÿæ¥è‡ªè¯¥</font></font><code>callback </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»å‹çš„&nbsp; </font><font style="vertical-align: inherit;">å¤æ‚ä»£ç </font></font><code>completionHandler: @escaping(Result&lt;T, APIError&gt;) -&gt; Void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">åŠŸèƒ½ååº”å¼ç¼–ç¨‹</font><font style="vertical-align: inherit;">åœ¨</font><font style="vertical-align: inherit;">æ–°æ¡†æ¶ä¸­çš„</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¤–è§‚</font><font style="vertical-align: inherit;">ä¸ç°æœ‰ç»“åˆåœ¨ä¸€èµ·</font><font style="vertical-align: inherit;">ï¼Œ</font><font style="vertical-align: inherit;">ä¸ºæ‚¨æä¾›äº†ç‹¬ç«‹ç¼–å†™éå¸¸ç´§å‡‘çš„ä»£ç ä»¥ä»Internetæå–æ•°æ®æ‰€éœ€çš„æ‰€æœ‰å·¥å…·ã€‚</font><font style="vertical-align: inherit;">
åœ¨æœ¬æ–‡ä¸­ï¼ŒæŒ‰ç…§æ¦‚å¿µï¼Œ</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†åˆ›å»ºâ€œå‘å¸ƒè€…â€</font></font><code>Swift 5</code><font style="vertical-align: inherit;"></font><code>Combine</code><font style="vertical-align: inherit;"></font><code>URLSession</code><font style="vertical-align: inherit;"></font><code>Codable</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>Combine</code><font style="vertical-align: inherit;"></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ä»¥ä»Internetä¸­é€‰æ‹©æ•°æ®ï¼Œå°†æ¥æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°â€œè®¢é˜…â€ </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™äº›æ•°æ®ï¼Œ&nbsp; </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶åœ¨æœ‰å¸®åŠ©çš„æƒ…å†µä¸‹è¿›è¡Œ&nbsp; </font><font style="vertical-align: inherit;">è®¾è®¡æ—¶ä½¿ç”¨</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç”±äº&nbsp; </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ƒçœ‹èµ·æ¥æ›´ç®€æ´ï¼Œæ›´æœ‰æ•ˆï¼Œå› ä¸ºâ€œå‡ºç‰ˆå•†â€çš„ä½œç”¨&nbsp; </font></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶ä¸é™äºæ ·æœ¬æ•°æ®ï¼Œå¹¶è¿›ä¸€æ­¥å»¶ä¼¸åˆ°ç”¨æˆ·ç•Œé¢æ§ä»¶ï¼ˆ</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€‚äº‹å®æ˜¯ï¼Œ</font><font style="vertical-align: inherit;">ä½¿ç”¨</font><font style="vertical-align: inherit;">å…·æœ‰</font><font style="vertical-align: inherit;">å±æ€§çš„</font><font style="vertical-align: inherit;">ç±»</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥</font></font><code>View </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰§è¡Œ</font><font style="vertical-align: inherit;">æ•°æ®åˆ†ç¦»&nbsp; </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯¥ç±»çš„æ›´æ”¹ä¼š&nbsp; </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è‡ªåŠ¨ç›‘æ§å¹¶å®Œå…¨é‡ç»˜</font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™äº›&nbsp; </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»ä¸­ï¼Œæ‚¨å¯ä»¥éå¸¸ç®€å•åœ°æ”¾ç½®åº”ç”¨ç¨‹åºçš„æŸäº›ä¸šåŠ¡é€»è¾‘ï¼Œå¦‚æœå…¶ä¸­ä¸€äº›</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å±æ€§æ˜¯åŒæ­¥å’Œ/æˆ–å¼‚æ­¥å˜æ¢å…¶ä»–çš„ç»“æœ</font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å¯ä»¥ç›´æ¥æ”¹å˜æ‰€è¿°ç”¨æˆ·æ¥å£çš„è¿™æ ·çš„â€œæ´»æ€§â€çš„å…ƒç´ ï¼ˆå±æ€§</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ï¼Œä¸ºæ–‡æœ¬æ¡†</font></font><code>TextField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><code>Picker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><code>Stepper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><code>Toggle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç­‰ã€‚</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†æ¸…æ¥šè¯´æ˜é—®é¢˜æ‰€åœ¨ï¼Œæˆ‘å°†ä¸¾ä¸€äº›å…·ä½“ä¾‹å­ã€‚ç°åœ¨ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;å’Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacker Newsä¹‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»çš„è®¸å¤šæœåŠ¡éƒ½</font><font style="vertical-align: inherit;">æä¾›</font><font style="vertical-align: inherit;">æ–°é—»èšåˆå™¨ï¼Œä»¥&nbsp; </font><font style="vertical-align: inherit;">ä½¿ç”¨æˆ·å¯ä»¥æ ¹æ®ä»–ä»¬çš„å…´è¶£é€‰æ‹©ä¸åŒçš„æ–‡ç« é›†ã€‚å¯¹äº</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–°é—»&nbsp; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">èšåˆå™¨ï¼Œ</font></a><font style="vertical-align: inherit;">å®ƒå¯ä»¥æ˜¯æœ€æ–°æ–°é—»</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">ï¼Œ</font></a><font style="vertical-align: inherit;">ä¹Ÿå¯ä»¥æ˜¯æŸäº›ç±»åˆ«çš„æ–°é—»-â€œä½“è‚²â€ï¼Œâ€œå¥åº·â€ï¼Œâ€œç§‘å­¦â€ï¼Œâ€œæŠ€æœ¯â€ï¼Œâ€œå•†ä¸šâ€æˆ–ç‰¹å®šä¿¡æ¯æºâ€œ CNNâ€çš„æ–°é—»ï¼ŒABCæ–°é—»ï¼Œå½­åšç¤¾ç­‰ç”¨æˆ·é€šå¸¸ä»¥</font></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½¢æˆå¯¹ä»–å¿…è¦</font><font style="vertical-align: inherit;">çš„å½¢å¼çš„</font><font style="vertical-align: inherit;">å½¢å¼</font><font style="vertical-align: inherit;">æ¥â€œè¡¨è¾¾â€ä»–å¯¹æœåŠ¡çš„æœŸæœ›</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œä½¿ç”¨è¯¥æ¡†æ¶&nbsp; </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæ‚¨å¯ä»¥</font></font><code>ObservableObject </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»ä½¿ç”¨éå¸¸ç´§å‡‘çš„ä»£ç ï¼ˆåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸è¶…è¿‡10-12è¡Œï¼‰ä¸€æ¬¡ä»¥</font></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œè¢«åŠ¨â€ </font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å±æ€§åˆ°â€œä¸»åŠ¨â€ </font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å±æ€§</font><font style="vertical-align: inherit;">çš„â€œè®¢é˜…â€å½¢å¼å½¢æˆå¯¹</font><font style="vertical-align: inherit;">å•†å“åˆ—è¡¨çš„åŒæ­¥å’Œ/æˆ–å¼‚æ­¥ä¾èµ–&nbsp; </font><font style="vertical-align: inherit;">ã€‚è¯¥â€œè®¢é˜…â€å°†åœ¨</font></font><code>ObservableObject </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»</font><font style="vertical-align: inherit;">å®ä¾‹çš„æ•´ä¸ªâ€œç”Ÿå‘½å‘¨æœŸâ€å†…æœ‰æ•ˆ&nbsp; </font><font style="vertical-align: inherit;">ã€‚ç„¶åï¼Œ</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æ‚¨å°†ä½¿ç”¨æˆ·æœ‰æœºä¼šä»…ç®¡ç†</font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¡¨å•ä¸­</font><font style="vertical-align: inherit;">çš„â€œæ´»åŠ¨â€ </font><font style="vertical-align: inherit;">å±æ€§</font></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå³ä»–å¸Œæœ›çœ‹åˆ°çš„å†…å®¹ï¼šæ˜¯æœ€æ–°æ¶ˆæ¯çš„æ–‡ç« è¿˜æ˜¯â€œå¥åº·â€éƒ¨åˆ†çš„æ–‡ç« ã€‚</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;è¿™äº›</font></font><code>ObservableObject </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»åŠå…¶â€œè¢«åŠ¨â€ @Publishedå±æ€§</font><font style="vertical-align: inherit;">å°†è‡ªåŠ¨æä¾›&nbsp; </font><font style="vertical-align: inherit;">æ–‡ç« æœ¬èº«çš„å¤–è§‚ä»¥åŠâ€œå¥åº·â€éƒ¨åˆ†ä¸­çš„æœ€æ–°æ–°é—»æˆ–æ–‡ç« </font><font style="vertical-align: inherit;">ã€‚åœ¨ä»£ç ä¸­</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æ‚¨å°†ä¸éœ€è¦æ˜¾å¼è¯·æ±‚é€‰æ‹©æ–‡ç« ï¼Œå› ä¸º</font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘æŒ¥ä½œç”¨çš„ç±»</font><font style="vertical-align: inherit;">è´Ÿè´£å®ƒä»¬åœ¨å±å¹•ä¸Šçš„æ­£ç¡®å’ŒåŒæ­¥æ˜¾ç¤º&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">åœ¨ä¸€ç³»åˆ—æ–‡ç« ä¸­ï¼Œ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä¸&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;å’Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacker News</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥åŠ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TMDb</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”µå½±</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">æ•°æ®åº“</font></a><font style="vertical-align: inherit;">ä¸€èµ·ä½¿ç”¨ã€‚åœ¨è¿™ä¸‰ç§æƒ…å†µä¸‹ï¼Œå¤§çº¦éƒ½å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ä½¿ç”¨æ¨¡å¼&nbsp; </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå› ä¸ºåœ¨è¿™ç§åº”ç”¨ç¨‹åºä¸­ï¼Œæ‚¨å§‹ç»ˆå¿…é¡»åˆ›å»ºç”µå½±æˆ–æ–‡ç« çš„æ¸…å•ï¼Œé€‰æ‹©å®ƒä»¬éšé™„çš„â€œç…§ç‰‡â€ï¼ˆå›¾åƒï¼‰ï¼Œç„¶åä½¿ç”¨æœç´¢æ æœç´¢æ‰€éœ€ç”µå½±æˆ–æ–‡ç« çš„æ•°æ®åº“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®¿é—®æ­¤ç±»æœåŠ¡æ—¶ï¼Œä¾‹å¦‚ç”±äºæ‚¨æŒ‡å®šäº†é”™è¯¯çš„å¯†é’¥</font></font><code>API-key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–è¶…å‡ºäº†å…è®¸çš„è¯·æ±‚æ•°é‡æˆ–å…¶ä»–</font><font style="vertical-align: inherit;">åŸå› ï¼Œå¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯</font><font style="vertical-align: inherit;">ã€‚æ‚¨éœ€è¦å¤„ç†æ­¤ç±»é”™è¯¯ï¼Œå¦åˆ™æ‚¨å°†å†’ç€ä½¿ç”¨æˆ·å®Œå…¨é™·å…¥ç©ºç™½å±å¹•çš„é£é™©ã€‚å› æ­¤ï¼Œæ‚¨ä¸ä»…éœ€è¦èƒ½å¤Ÿä½¿ç”¨</font></font><code>&nbsp;Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ä»Internetä¸­</font><font style="vertical-align: inherit;">é€‰æ‹©</font><font style="vertical-align: inherit;">æ•°æ®ï¼Œè€Œä¸”è¿˜éœ€è¦æŠ¥å‘Šé‡‡æ ·æœŸé—´å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ï¼Œå¹¶æ§åˆ¶å®ƒä»¬åœ¨å±å¹•ä¸Šçš„æ˜¾ç¤ºã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šè¿‡å¼€å‘ä¸</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;">æ–°é—»</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">èšåˆå™¨</font></a><font style="vertical-align: inherit;">äº¤äº’çš„åº”ç”¨ç¨‹åºæ¥å¼€å§‹åˆ¶å®šç­–ç•¥&nbsp; </font><font style="vertical-align: inherit;">ã€‚æˆ‘å¿…é¡»è¯´ï¼Œåœ¨æ­¤åº”ç”¨ç¨‹åºä¸­ï¼Œ</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ƒå°†æœ€å°ç¨‹åº¦åœ°ä½¿ç”¨</font><font style="vertical-align: inherit;">å®ƒï¼Œ</font><font style="vertical-align: inherit;">è€Œæ²¡æœ‰ä»»ä½•å¤šä½™çš„è£…é¥°ï¼Œä»…ä»…æ˜¯ä¸ºäº†è¯´æ˜å¦‚ä½•</font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸â€œå‘å¸ƒè€…â€ä¸€èµ·ä½¿ç”¨</font></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œâ€œè®¢é˜…â€ </font></font><code>Subscription</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å—åˆ°å½±å“</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å»ºè®®æ‚¨åœ¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç½‘ç«™ä¸Šæ³¨å†Œ</font><font style="vertical-align: inherit;">å¹¶æ¥æ”¶</font></font><code>API</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®Œæˆå¯¹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœåŠ¡çš„æ‰€æœ‰è¯·æ±‚æ‰€éœ€</font><font style="vertical-align: inherit;">çš„å¯†é’¥</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ‚¨å¿…é¡»å°†å…¶æ”¾ç½®</font><font style="vertical-align: inherit;">åœ¨ç»“æ„</font><font style="vertical-align: inherit;">ä¸­çš„</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–‡ä»¶</font><font style="vertical-align: inherit;">ä¸­</font></font><code>APIConstants</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ¬æ–‡çš„åº”ç”¨ç¨‹åºä»£ç åœ¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Githubä¸Š</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;">æœåŠ¡æ•°æ®æ¨¡å‹å’ŒAPI</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a></h2><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æœåŠ¡&nbsp; </font><font style="vertical-align: inherit;">ä½¿</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">æ‚¨</font></a><font style="vertical-align: inherit;">å¯ä»¥é€‰æ‹©æœ‰å…³å½“å‰æ–°é—»æ–‡ç« </font></font><code> [Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŠå…¶æ¥æºçš„ä¿¡æ¯&nbsp; </font></font><code>[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬çš„æ•°æ®æ¨¡å‹å°†éå¸¸ç®€å•ï¼Œå®ƒä½äº</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Articles.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–‡ä»¶ä¸­&nbsp; </font><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> Foundation<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NewsResponse</span>: <span class="hljs-title">Codable</span> </span>{
    <span class="hljs-keyword">let</span> status: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> totalResults: <span class="hljs-type">Int?</span>
    <span class="hljs-keyword">let</span> articles: [<span class="hljs-type">Article</span>]<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Article</span>: <span class="hljs-title">Codable</span>, <span class="hljs-title">Identifiable</span> </span>{
    <span class="hljs-keyword">let</span> id = <span class="hljs-type">UUID</span>()
    <span class="hljs-keyword">let</span> title: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> description: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> author: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> urlToImage: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> publishedAt: <span class="hljs-type">Date?</span>
    <span class="hljs-keyword">let</span> source: <span class="hljs-type">Source</span><font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SourcesResponse</span>: <span class="hljs-title">Codable</span> </span>{
    <span class="hljs-keyword">let</span> status: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> sources: [<span class="hljs-type">Source</span>]<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Source</span>: <span class="hljs-title">Codable</span>,<span class="hljs-title">Identifiable</span> </span>{
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> description: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> country: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> category: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> url: <span class="hljs-type">String?</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥æ–‡ç« </font></font><code>Article</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†åŒ…å«æ ‡è¯†ç¬¦</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæ ‡é¢˜</font></font><code> title</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæè¿°</font></font><code>&nbsp;description</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½œè€…</font></font><code>author</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œâ€œå›¾ç‰‡â€çš„URL </font></font><code>urlToImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå‡ºç‰ˆæ—¥æœŸå’Œå‡ºç‰ˆç‰©</font></font><code>publishedAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥æº</font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚åœ¨æ–‡ç« ä¸Šæ–¹</font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯ä¸€ä¸ªåŠ è½½é¡¹ï¼Œ</font></font><code>NewsResponse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨è¯¥</font><font style="vertical-align: inherit;">åŠ è½½é¡¹</font><font style="vertical-align: inherit;">ä¸­ï¼Œæˆ‘ä»¬ä»…å¯¹propertyå±æ€§æ„Ÿå…´è¶£ï¼Œè¯¥å±æ€§</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯ä¸€ç³»åˆ—æ–‡ç« ã€‚æ ¹ç»“æ„</font></font><code>NewsResponse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œç»“æ„</font></font><code>&nbsp;Article</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯</font></font><code>Codable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè¿™å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿä»å­—é¢ä¸Šçœ‹ä¸¤è¡Œä»£ç ï¼Œå°†</font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ•°æ®</font><font style="vertical-align: inherit;">è§£ç </font><font style="vertical-align: inherit;">ä¸ºæ¨¡å‹ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæˆ‘ä»¬æƒ³ä½¿è‡ªå·±æ›´è½»æ¾åœ°å°†ä¸€ç»„æ–‡ç« æ˜¾ç¤º</font><font style="vertical-align: inherit;">ä¸ºåˆ—è¡¨</font><font style="vertical-align: inherit;">&nbsp;ä¸­</font><font style="vertical-align: inherit;">çš„åˆ—è¡¨&nbsp; </font><font style="vertical-align: inherit;">ï¼Œåˆ™</font><font style="vertical-align: inherit;">ç»“æ„&nbsp; </font></font><code>Article</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ä¹Ÿåº”è¯¥æ˜¯</font></font><code>Identifiable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™æ ·</font><font style="vertical-align: inherit;">ã€‚åè®®</font><font style="vertical-align: inherit;">è¦æ±‚å­˜åœ¨ä¸€ä¸ªå±æ€§</font></font><code>[Article]</code><font style="vertical-align: inherit;"></font><code>List</code><font style="vertical-align: inherit;"></font><code>SwiftUI</code><font style="vertical-align: inherit;"></font><code>Identifiable </code><font style="vertical-align: inherit;"></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å°†æä¾›ä¸€ä¸ªäººå·¥çš„å”¯ä¸€æ ‡è¯†ç¬¦</font></font><code>UUID()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¿¡æ¯æ¥æº&nbsp; </font></font><code>Source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†åŒ…å«æ ‡è¯†ç¬¦</font></font><code> id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåç§°</font></font><code> name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæè¿°&nbsp; </font></font><code>description</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå›½å®¶</font></font><code> country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå‡ºç‰ˆç‰©æ¥æºç±»åˆ«</font></font><code>category</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œç«™ç‚¹URL </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚åœ¨ä¿¡æ¯æºä¸Šæ–¹&nbsp; </font></font><code>[Source] </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ‰ä¸€ä¸ªåŠ è½½é¡¹ï¼Œ</font></font><code>SourcesResponse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨è¯¥</font><font style="vertical-align: inherit;">åŠ è½½é¡¹&nbsp; </font><font style="vertical-align: inherit;">ä¸­ï¼Œæˆ‘ä»¬ä»…å¯¹ä¸€ä¸ªå±æ€§æ„Ÿå…´è¶£ï¼Œè¯¥å±æ€§</font></font><code>sources</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯ä¸€ç»„ä¿¡æ¯æºã€‚æ ¹ç»“æ„</font></font><code>SourcesResponse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œç»“æ„&nbsp; </font></font><code>Source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯</font></font><code>Codable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè¿™å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿéå¸¸è½»æ¾åœ°å°†</font></font><code> JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ•°æ®</font><font style="vertical-align: inherit;">è§£ç </font><font style="vertical-align: inherit;">ä¸ºæ¨¡å‹ã€‚è¯¥ç»“æ„&nbsp; </font></font><code>Source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ä¹Ÿåº”è¯¥æ˜¯</font></font><code>Identifiable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¦‚æœæˆ‘ä»¬è¦ä¿ƒè¿›ä¿¡æ¯æºé˜µåˆ—çš„æ˜¾ç¤º</font></font><code>&nbsp;[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨åˆ—è¡¨çš„å½¢å¼</font></font><code>&nbsp;List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;åœ¨</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">è¯¥åè®®</font></font><code>Identifiable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¦æ±‚å­˜åœ¨</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å·²ç»æ‹¥æœ‰</font><font style="vertical-align: inherit;">çš„å±æ€§</font><font style="vertical-align: inherit;">ï¼Œå› æ­¤ä¸éœ€è¦æˆ‘ä»¬ä»˜å‡ºé¢å¤–çš„åŠªåŠ›ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨è€ƒè™‘æˆ‘ä»¬&nbsp; </font></font><code>API</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœåŠ¡çš„éœ€æ±‚&nbsp; </font><font style="vertical-align: inherit;">ï¼Œå¹¶å°†å…¶æ”¾ç½®åœ¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–‡ä»¶ä¸­&nbsp; </font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬çš„ä¸­å¿ƒéƒ¨åˆ†</font></font><code>API</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æ˜¯ä¸€ä¸ªç±»</font></font><code>NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæä¾›äº†ä¸¤ç§ä»</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–°é—»</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">èšåˆå™¨ä¸­</font></a><font style="vertical-align: inherit;">é€‰æ‹©æ•°æ®çš„æ–¹æ³•&nbsp;&nbsp; </font><font style="vertical-align: inherit;">-æ–‡ç« &nbsp; </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œä¿¡æ¯æ¥æº</font></font><code>&nbsp;[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<ul>
<li><code>fetchArticles (from endpoint: Endpoint) -&gt; AnyPublisher&lt;[Article], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp; - </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ ¹æ®å‚æ•°</font><font style="vertical-align: inherit;">é€‰æ‹©æ–‡ç« &nbsp; </font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font></li>
<li><code>fetchSources (for country: String)&nbsp;-&gt; AnyPublisher&lt;[Source], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><code>[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºç‰¹å®šå›½å®¶/åœ°åŒº</font><font style="vertical-align: inherit;">é€‰æ‹©ä¿¡æ¯æ¥æº</font></font><code> country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™äº›æ–¹æ³•ä¸ä»…è¿”å›æ–‡ç« æ•°ç»„&nbsp; </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æˆ–ä¿¡æ¯æºæ•°ç»„</font></font><code>&nbsp;[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè€Œä¸”è¿˜è¿”å›</font></font><code>Publisher </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–°æ¡†æ¶</font><font style="vertical-align: inherit;">çš„ç›¸åº”â€œå‘å¸ƒè€…â€&nbsp; </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä¸¤å®¶å‡ºç‰ˆå•†å‡æœªè¿”å›ä»»ä½•é”™è¯¯- </font></font><code>Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶ä¸”å¦‚æœä»ç„¶å‘ç”ŸæŠ½æ ·æˆ–ç¼–ç â€‹â€‹é”™è¯¯ï¼Œåˆ™å°†è¿”å›ç©ºçš„æ–‡ç« </font></font><code>[Article]()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æˆ–ä¿¡æ¯æº&nbsp; </font><font style="vertical-align: inherit;">æ•°ç»„ï¼Œ&nbsp; </font></font><code>[Source]()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è€Œæ²¡æœ‰ä»»ä½•æ¶ˆæ¯è¯´æ˜è¿™äº›æ•°ç»„ä¸ºç©ºã€‚&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å¸Œæœ›ä»</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœåŠ¡å™¨ä¸­é€‰æ‹©å“ªäº›æ–‡ç« æˆ–ä¿¡æ¯æº</font><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æšä¸¾è¿›è¡ŒæŒ‡ç¤º</font></font><code>enum Endpoint:</code><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Endpoint</span> </span>{
    <span class="hljs-keyword">case</span> topHeadLines
    <span class="hljs-keyword">case</span> articlesFromCategory(<span class="hljs-number">_</span> category: <span class="hljs-type">String</span>)
    <span class="hljs-keyword">case</span> articlesFromSource(<span class="hljs-number">_</span> source: <span class="hljs-type">String</span>)
    <span class="hljs-keyword">case</span> search (searchFilter: <span class="hljs-type">String</span>)
    <span class="hljs-keyword">case</span> sources (country: <span class="hljs-type">String</span>)<font></font>
    <font></font>
    <span class="hljs-keyword">var</span> baseURL:<span class="hljs-type">URL</span> {<span class="hljs-type">URL</span>(string: <span class="hljs-string">"https://newsapi.org/v2/"</span>)!}<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">path</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">String</span> {
        <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> {
        <span class="hljs-keyword">case</span> .topHeadLines, .articlesFromCategory:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"top-headlines"</span>
        <span class="hljs-keyword">case</span> .search,.articlesFromSource:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"everything"</span>
        <span class="hljs-keyword">case</span> .sources:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"sources"</span><font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®ƒï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€æ–°æ¶ˆæ¯&nbsp; </font></font><code>.topHeadLines</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŸä¸€ç±»åˆ«çš„æ–°é—»ï¼ˆä½“è‚²ï¼Œå¥åº·ï¼Œç§‘å­¦ï¼Œå•†ä¸šï¼ŒæŠ€æœ¯ï¼‰&nbsp; </font></font><code>.articlesFromCategory(_ category: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥è‡ªç‰¹å®šä¿¡æ¯æ¥æºçš„æ–°é—»ï¼ˆCNNï¼ŒABCæ–°é—»ï¼ŒFoxæ–°é—»ç­‰ï¼‰</font></font><code>&nbsp;.articlesFromSource(_ source: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»»ä½•</font></font><code>.search (searchFilter: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¬¦åˆç‰¹å®šæ¡ä»¶çš„</font><font style="vertical-align: inherit;">æ–°é—»&nbsp; </font></font><code>searchFilter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>.sources (country:String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç‰¹å®šå›½å®¶</font><font style="vertical-align: inherit;">çš„ä¿¡æ¯æ¥æº</font></font><code>country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬éœ€è¦çš„é€‰é¡¹çš„åˆå§‹åŒ–ï¼Œæˆ‘ä»¬</font><font style="vertical-align: inherit;">æ ¹æ®ç´¢å¼•</font><font style="vertical-align: inherit;">å’Œå­—ç¬¦ä¸²</font><font style="vertical-align: inherit;">å¯¹å„ç§æ–‡ç« å’Œä¿¡æ¯æºåˆ—è¡¨çš„</font><font style="vertical-align: inherit;">æšä¸¾æ·»åŠ äº†ä¸€ä¸ª</font></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆå§‹åŒ–å™¨</font><font style="vertical-align: inherit;">ï¼Œè¿™å¯¹äºä¸åŒçš„æšä¸¾é€‰é¡¹å…·æœ‰ä¸åŒçš„å«ä¹‰ï¼š</font></font><code>init?</code><font style="vertical-align: inherit;"></font><code>index&nbsp;</code><font style="vertical-align: inherit;"></font><code> text</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">init</span>? (index: <span class="hljs-type">Int</span>, text: <span class="hljs-type">String</span> = <span class="hljs-string">"sports"</span>) {
        <span class="hljs-keyword">switch</span> index {
        <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-keyword">self</span> = .topHeadLines
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-keyword">self</span> = .search(searchFilter: text)
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: <span class="hljs-keyword">self</span> = .articlesFromCategory(text)
        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: <span class="hljs-keyword">self</span> = .articlesFromSource(text)
        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>: <span class="hljs-keyword">self</span> = .sources (country: text)
        <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬å›åˆ°è¯¥ç±»</font></font><code> NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å¹¶æ›´è¯¦ç»†åœ°è€ƒè™‘ç¬¬ä¸€ç§æ–¹æ³•</font></font><code>fetchArticles (from endpoint: Endpoint)-&gt; AnyPublisher&lt;[Article], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè¯¥</font><font style="vertical-align: inherit;">æ–¹æ³•&nbsp; </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ ¹æ®å‚æ•°</font><font style="vertical-align: inherit;">é€‰æ‹©æ–‡ç« </font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¹¶ä¸”ä¸è¿”å›ä»»ä½•é”™è¯¯- </font></font><code>Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetchArticles</span><span class="hljs-params">(from endpoint: Endpoint)</span></span> -&gt; <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">Article</span>], <span class="hljs-type">Never</span>&gt; {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url = endpoint.absoluteURL <span class="hljs-keyword">else</span> {              <span class="hljs-comment">// 0</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-type">Just</span>([<span class="hljs-type">Article</span>]()).eraseToAnyPublisher()<font></font>
        }<font></font>
           <span class="hljs-keyword">return</span>
            <span class="hljs-type">URLSession</span>.shared.dataTaskPublisher(<span class="hljs-keyword">for</span>:url)        <span class="hljs-comment">// 1</span>
            .<span class="hljs-built_in">map</span>{$<span class="hljs-number">0</span>.data}                                       <span class="hljs-comment">// 2</span>
            .decode(type: <span class="hljs-type">NewsResponse</span>.<span class="hljs-keyword">self</span>,                    <span class="hljs-comment">// 3</span>
                    decoder: <span class="hljs-type">APIConstants</span> .jsonDecoder)<font></font>
            .<span class="hljs-built_in">map</span>{$<span class="hljs-number">0</span>.articles}                                   <span class="hljs-comment">// 4</span>
            .replaceError(with: [])                             <span class="hljs-comment">// 5</span>
            .receive(on: <span class="hljs-type">RunLoop</span>.main)                          <span class="hljs-comment">// 6</span>
            .eraseToAnyPublisher()                              <span class="hljs-comment">// 7</span>
    }</code></pre><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ ¹æ®</font><font style="vertical-align: inherit;">è¯·æ±‚</font><font style="vertical-align: inherit;">çš„</font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å½¢å¼</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è·å¾—æ‰€éœ€çš„æ–‡ç« åˆ—è¡¨</font></font><code>endpoint.absoluteURL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¦‚æœæ— æ³•å®Œæˆï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºçš„æ–‡ç« æ•°ç»„</font></font><code>[Article]()</code></li>
<li> Â«Â» <code>dataTaskPublisher(for:)</code>,     <code>Output </code>  <code>(data: Data, response: URLResponse)</code>, &nbsp; <code>Failure</code>&nbsp;-&nbsp;<code>URLError</code>,</li>
<li>  <code>map { }</code>       <code>(data: Data, response: URLResponse)</code>  &nbsp;<code>data</code>,&nbsp;</li>
<li> <code>JSON </code>&nbsp;<code>data</code>   ,   &nbsp;<code>NewsResponse</code>,    <code>articles:&nbsp;[Atricle]</code></li>
<li>  <code>map { }&nbsp;</code>        -&nbsp;<code>articles</code>,&nbsp;</li>
<li>  -        <code>[ ]</code>,</li>
<li>   <code>main </code>,          <code>UI</code>,</li>
<li>Â«Â»  Â«Â»   <code>eraseToAnyPublisher()</code>    <code>AnyPublisher</code>.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€‰æ‹©ä¿¡æ¯æºçš„ä»»åŠ¡å·²åˆ†é…ç»™ç¬¬äºŒç§æ–¹æ³•- </font></font><code>fetchSources (for country: String)&nbsp;-&gt; AnyPublisher&lt;[Source], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™æ˜¯</font><font style="vertical-align: inherit;">ç¬¬ä¸€ç§æ–¹æ³•</font><font style="vertical-align: inherit;">çš„ç²¾ç¡®è¯­ä¹‰å‰¯æœ¬ï¼Œåªæ˜¯è¿™æ¬¡</font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å°†é€‰æ‹©ä¿¡æ¯æº</font><font style="vertical-align: inherit;">è€Œä¸æ˜¯æ–‡ç« </font></font><code>[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetchSources</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">Source</span>], <span class="hljs-type">Never</span>&gt; {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url = <span class="hljs-type">Endpoint</span>.sources.absoluteURL <span class="hljs-keyword">else</span> {      <span class="hljs-comment">// 0</span>
                       <span class="hljs-keyword">return</span> <span class="hljs-type">Just</span>([<span class="hljs-type">Source</span>]()).eraseToAnyPublisher()<font></font>
           }<font></font>
              <span class="hljs-keyword">return</span>
               <span class="hljs-type">URLSession</span>.shared.dataTaskPublisher(<span class="hljs-keyword">for</span>:url)      <span class="hljs-comment">// 1</span>
               .<span class="hljs-built_in">map</span>{$<span class="hljs-number">0</span>.data}                                     <span class="hljs-comment">// 2</span>
               .decode(type: <span class="hljs-type">SourcesResponse</span>.<span class="hljs-keyword">self</span>,               <span class="hljs-comment">// 3</span>
                       decoder: <span class="hljs-type">APIConstants</span> .jsonDecoder)<font></font>
               .<span class="hljs-built_in">map</span>{$<span class="hljs-number">0</span>.sources}                                  <span class="hljs-comment">// 4</span>
               .replaceError(with: [])                           <span class="hljs-comment">// 5</span>
               .receive(on: <span class="hljs-type">RunLoop</span>.main)                        <span class="hljs-comment">// 6</span>
               .eraseToAnyPublisher()                            <span class="hljs-comment">// 7</span>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®ƒä»¥</font></font><code>AnyPublisher &lt;[Source], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€ä¸ªä¿¡æ¯æºæ•°ç»„çš„å½¢å¼</font><font style="vertical-align: inherit;">è¿”å›</font><font style="vertical-align: inherit;">å€¼</font><font style="vertical-align: inherit;">çš„â€œå‘å¸ƒè€…â€ </font><font style="vertical-align: inherit;">ï¼Œ</font></font><code>[Source] </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶ä¸”æ²¡æœ‰é”™è¯¯</font></font><code>&nbsp;Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ï¼ˆå¦‚æœæœ‰é”™è¯¯ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºçš„æºæ•°ç»„&nbsp; </font></font><code>[ ]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†æŒ‘é€‰å‡ºè¿™ä¸¤ç§æ–¹æ³•çš„å…±åŒéƒ¨åˆ†ï¼Œå®‰æ’å®ƒä½œä¸ºä¸€ä¸ª</font></font><code>Generic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡½æ•°</font></font><code>fetch(_ url: URL) -&gt; AnyPublisher&lt;T, Error&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿”å›çš„&nbsp; </font></font><code>Generic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œå‘è¡Œâ€ </font></font><code>AnyPublisher&lt;T, Error&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŸºç¡€ä¸Š</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-comment">//     URL</span>
     <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetch</span>&lt;T: Decodable&gt;<span class="hljs-params">(<span class="hljs-number">_</span> url: URL)</span></span> -&gt; <span class="hljs-type">AnyPublisher</span>&lt;<span class="hljs-type">T</span>, <span class="hljs-type">Error</span>&gt; {
                   <span class="hljs-type">URLSession</span>.shared.dataTaskPublisher(<span class="hljs-keyword">for</span>: url)             <span class="hljs-comment">// 1</span>
                    .<span class="hljs-built_in">map</span> { $<span class="hljs-number">0</span>.data}                                          <span class="hljs-comment">// 2</span>
                    .decode(type: <span class="hljs-type">T</span>.<span class="hljs-keyword">self</span>, decoder: <span class="hljs-type">APIConstants</span>.jsonDecoder) <span class="hljs-comment">// 3</span>
                    .receive(on: <span class="hljs-type">RunLoop</span>.main)                               <span class="hljs-comment">// 4</span>
                    .eraseToAnyPublisher()                                   <span class="hljs-comment">// 5</span>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™å°†ç®€åŒ–å‰ä¸¤ç§æ–¹æ³•ï¼š</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-comment">//   </span>
     <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetchArticles</span><span class="hljs-params">(from endpoint: Endpoint)</span></span>
                                     -&gt; <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">Article</span>], <span class="hljs-type">Never</span>&gt; {
         <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url = endpoint.absoluteURL <span class="hljs-keyword">else</span> {
                     <span class="hljs-keyword">return</span> <span class="hljs-type">Just</span>([<span class="hljs-type">Article</span>]()).eraseToAnyPublisher() <span class="hljs-comment">// 0</span><font></font>
         }<font></font>
         <span class="hljs-keyword">return</span> fetch(url)                                          <span class="hljs-comment">// 1</span>
             .<span class="hljs-built_in">map</span> { (response: <span class="hljs-type">NewsResponse</span>) -&gt; [<span class="hljs-type">Article</span>] <span class="hljs-keyword">in</span>        <span class="hljs-comment">// 2</span>
                             <span class="hljs-keyword">return</span> response.articles }<font></font>
                .replaceError(with: [<span class="hljs-type">Article</span>]())                    <span class="hljs-comment">// 3</span>
                .eraseToAnyPublisher()                              <span class="hljs-comment">// 4</span><font></font>
     }<font></font>
    <font></font>
    <span class="hljs-comment">//    </span>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetchSources</span><span class="hljs-params">(<span class="hljs-keyword">for</span> country: String)</span></span>
                                       -&gt; <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">Source</span>], <span class="hljs-type">Never</span>&gt; {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url = <span class="hljs-type">Endpoint</span>.sources(country: country).absoluteURL
            <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> <span class="hljs-type">Just</span>([<span class="hljs-type">Source</span>]()).eraseToAnyPublisher() <span class="hljs-comment">// 0</span><font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> fetch(url)                                         <span class="hljs-comment">// 1</span>
            .<span class="hljs-built_in">map</span> { (response: <span class="hljs-type">SourcesResponse</span>) -&gt; [<span class="hljs-type">Source</span>] <span class="hljs-keyword">in</span>     <span class="hljs-comment">// 2</span><font></font>
                            response.sources }<font></font>
               .replaceError(with: [<span class="hljs-type">Source</span>]())                    <span class="hljs-comment">// 3</span>
               .eraseToAnyPublisher()                             <span class="hljs-comment">// 4</span>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ ·è·å¾—çš„â€œå‘å¸ƒè€…â€åœ¨æœ‰äººâ€œè®¢é˜…â€ä¹‹å‰ä¸ä¼šäº¤ä»˜ä»»ä½•ä¸œè¥¿ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å¯ä»¥åœ¨è®¾è®¡æ—¶åšåˆ°è¿™ä¸€ç‚¹</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œå‡ºç‰ˆå•†â€ </font></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½œä¸º</font></font><code>View Model </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨</font></font><code> SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ–‡ç« æ¸…å•ã€‚</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ä»‹ç»ä¸€ä¸‹è¿ä½œçš„é€»è¾‘</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">&nbsp;ä»–ä»¬æ‰€å“åº”çš„â€œå¤–éƒ¨å˜åŒ–â€ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çš„</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å”¯ä¸€æŠ½è±¡</font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯â€œå‘å¸ƒè€…â€ </font></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ â€œå¤–éƒ¨æ›´æ”¹â€å¯ä»¥ç†è§£ä¸ºè®¡æ—¶å™¨</font></font><code> Timer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><code>NotificationCenter </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–</font><font style="vertical-align: inherit;">å¸¦æœ‰</font><font style="vertical-align: inherit;">Modelå¯¹è±¡çš„</font><font style="vertical-align: inherit;">é€šçŸ¥</font><font style="vertical-align: inherit;">ï¼Œä½¿ç”¨åè®®</font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ä»¥å°†å…¶è½¬æ¢ä¸ºå¤–éƒ¨å•ä¸ªâ€œçœŸç†æ¥æºâ€ï¼ˆçœŸç†æ¥æºï¼‰ã€‚&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºæ™®é€šçš„â€œå‘å¸ƒè€…â€ç±»å‹</font></font><code>Timer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–</font></font><code>NotificationCenter</code> <code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨æ–¹æ³•è¿›è¡Œååº”</font></font><code>onReceive (_: perform:)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><code>Timer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬ç¨åå°†åœ¨å…³äº</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacker News</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„åº”ç”¨ç¨‹åºçš„ç¬¬ä¸‰ç¯‡æ–‡ç« ä¸­ä»‹ç»</font><font style="vertical-align: inherit;">ä½¿ç”¨â€œå‘å¸ƒè€…â€çš„ç¤ºä¾‹</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹ä»‹ç»å¦‚ä½•ä¸º&nbsp;</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤–éƒ¨â€œçœŸç†ä¹‹æºâ€ï¼ˆçœŸç†ä¹‹æºï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹åœ¨</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¾ç¤ºå„ç§ç±»å‹æ–‡ç« çš„ç‰¹å®šç¤ºä¾‹ä¸­ï¼Œæœ€ç»ˆçš„â€œå‘å¸ƒè€…â€åº”</font><font style="vertical-align: inherit;">å¦‚ä½•</font><font style="vertical-align: inherit;">å‘æŒ¥ä½œç”¨ï¼š</font></font><br>
<br>
<code>.topHeadLines</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-æœ€æ–°æ–°é—»ï¼Œ&nbsp; </font></font><code>.articlesFromCategory(_ category: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;-ç‰¹å®šç±»åˆ«çš„</font></font><code>&nbsp;.articlesFromSource(_ source: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æ–°é—»</font><font style="vertical-align: inherit;">ï¼Œ</font><font style="vertical-align: inherit;">-ç‰¹å®šä¿¡æ¯æºçš„æ–°é—»ï¼Œ</font></font><code>.search (searchFilter: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;-æ ¹æ®ç‰¹å®šæ¡ä»¶é€‰æ‹©çš„æ–°é—»ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zr/ua/uv/zruauv9msu2nulm2ksuflhtxusi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ ¹æ®</font></font><code> Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€‰æ‹©çš„ç”¨æˆ·ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€‰æ‹©</font><font style="vertical-align: inherit;">çš„æ–‡ç« åˆ—è¡¨</font><font style="vertical-align: inherit;">ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªéå¸¸ç®€å•çš„ç±»</font></font><code>&nbsp;ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font><font style="vertical-align: inherit;">è¯¥ç±»</font><font style="vertical-align: inherit;">å®ç°</font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å…·æœ‰ä¸‰ä¸ª&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å±æ€§</font><font style="vertical-align: inherit;">çš„åè®®</font><font style="vertical-align: inherit;">ï¼š</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/webt/ty/xj/cs/tyxjcsfctbxerl9oiyr6ljvda8c.png"><br>
<br>
<ul>
<li><code>@Published var indexEndpoint: Int</code> â€”   <code>Endpoint</code> (    Â«Â»,        <code>View</code>),&nbsp;&nbsp;</li>
<li><code>@Published var searchString: String</code> â€”  ,             &nbsp;&nbsp;(     Â«Â»,        <code>View</code>&nbsp;    <code>TextField</code>),</li>
<li><code>@Published var articles: [Article]</code>&nbsp;-    ( Â«Â»,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NewsAPI.org</a>,  Â«Â»).</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸€æ—¦è®¾ç½®äº†&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å±æ€§</font></font><code>indexEndpoint&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–</font></font><code> searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å®ƒä»¬åŒæ—¶ç”¨ä½œç®€å•å±æ€§&nbsp; </font></font><code>indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å’Œ&nbsp; </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä»¥åŠä½œä¸ºâ€œå‘å¸ƒè€…â€&nbsp; </font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨ä¸€ä¸ªç±»ä¸­&nbsp; </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæ‚¨ä¸ä»…å¯ä»¥å£°æ˜æˆ‘ä»¬æ„Ÿå…´è¶£çš„å±æ€§ï¼Œè¿˜å¯ä»¥è§„å®šå®ƒä»¬äº¤äº’çš„ä¸šåŠ¡é€»è¾‘ã€‚ä¸ºæ­¤ï¼Œåœ¨åˆå§‹åŒ–ç±»çš„å®ä¾‹æ—¶&nbsp; </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ï¼Œ</font></font><code>init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªâ€œè®¢é˜…â€ï¼Œè¯¥â€œè®¢é˜…â€å°†åœ¨è¯¥ç±»å®ä¾‹çš„æ•´ä¸ªâ€œç”Ÿå‘½å‘¨æœŸâ€ä¸­èµ·ä½œç”¨ï¼Œ&nbsp; </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶é‡ç°æ–‡ç« åˆ—è¡¨</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹ç´¢å¼•&nbsp; </font></font><code>indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å’Œæœç´¢å­—ç¬¦ä¸²</font><font style="vertical-align: inherit;">çš„ä¾èµ–æ€§</font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºæ­¤ï¼Œ</font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬æ‰©å±•äº†â€œå‘å¸ƒè€…â€é“¾</font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å¹¶</font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¾“å‡ºâ€œå‘å¸ƒè€…â€</font></font><code>AnyPublisher&lt;[Article], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¶å€¼æ˜¯æ–‡ç« åˆ—è¡¨&nbsp; </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨è¿ç®—ç¬¦â€œè®¢é˜…â€å®ƒï¼Œ</font></font><code>assign&nbsp;(to: \.articles, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶è·å¾—æ‰€éœ€çš„æ–‡ç« åˆ—è¡¨</font></font><code>articles </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½œä¸º</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å®šä¹‰</font><font style="vertical-align: inherit;">çš„â€œè¾“å‡ºâ€&nbsp; </font><font style="vertical-align: inherit;">å±æ€§</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å¿…é¡»ä»æ€§è´¨æ‹‰åŠ¨é“¾æ¡ä¸è¦ç›´æ¥&nbsp; </font></font><code>indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå³ä»â€œå‡ºç‰ˆå•†â€ </font></font><code> $indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è°å‚ä¸åˆ›ä½œ</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„å¸®åŠ©ä¸‹</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬å°†æœ‰ä½¿ç”¨ç”¨æˆ·ç•Œé¢å…ƒç´ æ›´æ”¹å®ƒä»¬&nbsp; </font></font><code>Picker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><code>TextField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†å¦‚ä½•åšï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬</font></font><code>fetchArticles (from: Endpoint)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„ç±»åº“ä¸­&nbsp; </font><font style="vertical-align: inherit;">å·²ç»æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°</font><font style="vertical-align: inherit;">æ ¹æ®å€¼</font></font><code>NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿”å›â€œå‘å¸ƒè€…â€</font></font><code>AnyPublisher&lt;[Article], Never&gt;</code><font style="vertical-align: inherit;"></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè€Œæˆ‘ä»¬åªèƒ½ä»¥æŸç§æ–¹å¼ä½¿ç”¨â€œå‘å¸ƒè€…â€çš„å€¼&nbsp; </font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶å°†&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¶è½¬æ¢</font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºè¯¥å‡½æ•°</font><font style="vertical-align: inherit;">çš„å‚æ•°</font><font style="vertical-align: inherit;">ã€‚&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œå°†â€œå‘å¸ƒè€…â€ </font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å’Œ&nbsp; </font><font style="vertical-align: inherit;">ç»“åˆåœ¨ä¸€èµ·&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ä¸ºæ­¤ï¼Œè¯¥</font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ“ä½œå‘˜å­˜åœ¨</font></font><code>Publishers.CombineLatest </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ci/pg/wd/cipgwdfx2fxmlevrmkf8nnkc6u4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦åŸºäºä»å…ˆå‰â€œå‘å¸ƒè€…â€æ¥æ”¶åˆ°çš„æ•°æ®åˆ›å»ºä¸€ä¸ªæ–°çš„â€œå‘å¸ƒ</font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;è€…</font><font style="vertical-align: inherit;">â€ </font><font style="vertical-align: inherit;">ï¼Œè¯·ä½¿ç”¨è¯¥æ“ä½œç¬¦&nbsp; </font></font><code>flatMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ln/s7/ur/lns7urzc9l64o8mswhliuggsyp4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨éå¸¸ç®€å•çš„â€œè®¢é˜…è€…â€â€œè®¢é˜…â€è¯¥æ–°æ¥æ”¶çš„â€œå‘å¸ƒè€…â€ï¼Œ&nbsp; </font></font><code>assign (to: \.articles, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶ä»â€œç”±äº</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æ•°ç»„çš„&nbsp; </font><font style="vertical-align: inherit;">å€¼æ˜¯å‘å¸ƒè€…â€œçš„å€¼&nbsp; </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/su/io/xi/suioxibgc3t31oewzgkbfaljina.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬åˆšåˆšåˆ›å»ºäº†ä¸€ä¸ª</font></font><code>init( )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¼‚æ­¥çš„å‘å¸ƒè€…â€ï¼Œå¹¶â€œè®¢é˜…äº†â€</font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œè®¢é˜…â€ï¼Œè¿™å¾ˆå®¹æ˜“éªŒè¯æˆ‘ä»¬æ˜¯å¦å°†æˆ‘ä»¬çš„â€œè®¢é˜…â€ä¿æŒä¸ºå¸¸æ•°</font></font><code>let subscription</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font><font style="vertical-align: inherit;">â€œè®¢é˜…â€ </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/ig/ml/gwigml-zqpprclh76lzfnjhvzda.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çš„ä¸»è¦å±æ€§</font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯ï¼Œä¸€æ—¦å®ƒç¦»å¼€èŒƒå›´ï¼Œå®ƒæ‰€å ç”¨çš„å†…å­˜å°±ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚å› æ­¤ï¼Œä¸€æ—¦</font></font><code>init( ) </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®Œæˆï¼Œè¯¥â€œé¢„è®¢â€å°†è¢«åˆ é™¤</font></font><code>ARC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè€Œæ²¡æœ‰æ—¶é—´å°†æ¥æ”¶åˆ°çš„å…·æœ‰æ—¶å»¶çš„å¼‚æ­¥ä¿¡æ¯åˆ†é…ç»™é˜µåˆ—</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ä»å­—é¢ä¸Šçœ‹ï¼Œå¼‚æ­¥ä¿¡æ¯æ ¹æœ¬å°±æ— å¤„â€œç€é™†â€ï¼Œâ€œåœ°çƒå·²ç»ä»å®ƒçš„è„šä¸‹æ‰ä¸‹æ¥äº†â€ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†ä¿å­˜è¿™æ ·çš„â€œè®¢é˜…â€ï¼Œæœ‰å¿…è¦åˆ›å»ºä¸€ä¸ªè¶…å‡ºåˆå§‹åŒ–ç¨‹åºçš„</font></font><code> init() </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å˜é‡</font><font style="vertical-align: inherit;">ï¼Œè¯¥å˜é‡å°†åœ¨ç±»å®ä¾‹çš„æ•´ä¸ªâ€œç”Ÿå‘½å‘¨æœŸâ€ </font></font><code>var&nbsp;cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸­å°†æˆ‘ä»¬çš„</font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œè®¢é˜…â€ </font><font style="vertical-align: inherit;">ä¿å­˜&nbsp; </font><font style="vertical-align: inherit;">åœ¨è¯¥å˜é‡ä¸­&nbsp;  </font></font><code>ArticlesViewMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œæˆ‘ä»¬åˆ é™¤äº†å¸¸æ•°</font></font><code>let subscription</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¹¶è®°ä½æˆ‘ä»¬çš„</font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œè®¢é˜…â€ä¸­çš„å˜é‡&nbsp; </font></font><code>cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨æ“ä½œ</font></font><code>.store ( in: &amp;self.cancellableSet)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/gt/xw/mygtxwz7uhcurfyfnblva9irfku.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â€œè®¢é˜…â€å¼‚æ­¥â€œå‘è¡Œäººâ€ï¼Œæˆ‘ä»¬åˆ›é€ äº†</font></font><code>init( )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ•´ä¸ªç±»å®ä¾‹çš„æ•´ä¸ªâ€œç”Ÿå‘½å‘¨æœŸâ€å°†è¢«ä¿ç•™&nbsp; </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å¯ä»¥ä»»æ„æ›´æ”¹``å‘å¸ƒè€…'' </font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ/æˆ–&nbsp; </font><font style="vertical-align: inherit;">çš„å«ä¹‰&nbsp; </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¹¶ä¸”å§‹ç»ˆè¦æ„Ÿè°¢åˆ›å»ºçš„``è®¢é˜…''ï¼Œæˆ‘ä»¬å°†</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ— éœ€èŠ±è´¹é¢å¤–çš„ç²¾åŠ›</font><font style="vertical-align: inherit;">å°±å¯ä»¥æ‹¥æœ‰ä¸è¿™ä¸¤ä¸ªå‘å¸ƒè€…çš„ä»·å€¼ç›¸å¯¹åº”çš„ä¸€ç³»åˆ—æ–‡ç« &nbsp; </font><font style="vertical-align: inherit;">ã€‚è¿™ä¸ª&nbsp; </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»é€šå¸¸è¢«ç§°ä¸º&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†å‡å°‘é”®å…¥æœç´¢å­—ç¬¦ä¸²æ—¶æœåŠ¡å™¨çš„è°ƒç”¨æ¬¡æ•°</font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬ä¸åº”è¯¥ä½¿ç”¨æœç´¢å­—ç¬¦ä¸²æœ¬èº«çš„â€œå‘å¸ƒè€…â€&nbsp;</font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä»¥åŠå®ƒçš„ä¿®æ”¹ç‰ˆæœ¬</font></font><code>validString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kh/ir/2z/khir2z1rrmou-hks2rtfuq31bnm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»</font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡†å¤‡å¥½æ’°å†™æ–‡ç« ï¼Œ</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬</font><font style="vertical-align: inherit;">å¼€å§‹åˆ›å»ºç”¨æˆ·ç•Œé¢ï¼ˆ</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€‚ä¸ºäº†</font><font style="vertical-align: inherit;">ä¸</font><font style="vertical-align: inherit;">&nbsp;æ¨¡å‹</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŒæ­¥ï¼Œ</font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨äº†</font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€ä¸ª</font></font><code>@ObservedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å˜é‡</font><font style="vertical-align: inherit;">ï¼Œè¯¥</font><font style="vertical-align: inherit;">å˜é‡å¼•ç”¨æ­¤æ¨¡å‹çš„ç±»çš„å®ä¾‹ã€‚è¿™æ˜¯å¯¹-&nbsp; </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ç±»å’Œ</font></font><code>@ObservedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¼•ç”¨è¯¥ç±»å®ä¾‹</font><font style="vertical-align: inherit;">çš„&nbsp; </font><font style="vertical-align: inherit;">å˜é‡-æ§åˆ¶inä¸­ç”¨æˆ·ç•Œé¢ï¼ˆ</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰&nbsp; </font><font style="vertical-align: inherit;">çš„æ›´æ”¹</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬ä»¥</font><font style="vertical-align: inherit;">å˜é‡çš„å½¢å¼</font><font style="vertical-align: inherit;">å°†ç»“æ„çš„</font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å®ä¾‹</font><font style="vertical-align: inherit;">æ·»åŠ åˆ°ç»“æ„</font></font><code>ArticleViewModel </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸­ï¼Œ</font></font><code>var articleViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶æ›¿æ¢</font></font><code>Text ("Hello, World!")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºæ–‡ç« åˆ—è¡¨ï¼Œ</font></font><code>ArticlesList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨å…¶ä¸­æ”¾ç½®</font></font><code>articlesViewModel.articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»æˆ‘ä»¬</font><font style="vertical-align: inherit;">çš„æ–‡ç« ä¸­</font><font style="vertical-align: inherit;">è·å¾—&nbsp; </font><font style="vertical-align: inherit;">çš„æ–‡ç« &nbsp;</font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ç»“æœï¼Œæˆ‘ä»¬è·å¾—äº†å›ºå®šç´¢å¼•å’Œé»˜è®¤ç´¢å¼•çš„æ–‡ç« åˆ—è¡¨&nbsp; </font></font><code>indexEndpoint = 0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå³</font></font><code>.topHeadLines</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æœ€æ–°æ–°é—»ï¼š</font><font style="vertical-align: inherit;">åœ¨</font></font><br>
<br>
<img src="https://habrastorage.org/webt/je/_f/j-/je_fj-0m2xews-ih7vptprkdpoy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å±å¹•ä¸Šæ·»åŠ ä¸€ä¸ª&nbsp; </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…ƒç´ ï¼Œä»¥æ§åˆ¶è¦æ˜¾ç¤ºçš„æ–‡ç« é›†ã€‚æˆ‘ä»¬å°†ä½¿ç”¨&nbsp; </font></font><code>Picker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç´¢å¼•æ›´æ”¹</font></font><code>$articlesViewModel.indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ç¬¦å·çš„å­˜åœ¨æ˜¯&nbsp; </font></font><code>$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¼ºåˆ¶æ€§çš„ï¼Œå› ä¸ºè¿™æ„å‘³ç€</font></font><code>@Published&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œå‘å¸ƒè€…â€ </font><font style="vertical-align: inherit;">æä¾›çš„å€¼å°†å‘ç”Ÿæ›´æ”¹&nbsp; </font><font style="vertical-align: inherit;">ã€‚è¯¥â€œå‘å¸ƒè€…â€çš„â€œè®¢é˜…â€ä¼šç«‹å³è§¦å‘ï¼Œæˆ‘ä»¬åœ¨æ­¤å¯åŠ¨</font></font><code>init ()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œâ€œè¾“å‡ºâ€&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œå‘å¸ƒè€…â€ </font></font><code>&nbsp;articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å°†æ›´æ”¹ï¼Œå¹¶ä¸”æˆ‘ä»¬å°†åœ¨å±å¹•ä¸Šçœ‹åˆ°ä¸åŒçš„æ–‡ç« åˆ—è¡¨ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zx/sd/pp/zxsdppfkp5y0nuk-j99uhovvmu8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æ¥æ”¶æ‰€æœ‰ä¸‰ä¸ªé€‰é¡¹çš„æ–‡ç« æ•°ç»„-â€œ topHeadLinesâ€ï¼Œâ€œæœç´¢â€ â€œå’Œâ€æ¥è‡ªç±»åˆ«â€œï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jm/yc/a_/jmyca_mvm0n2___cswvcamuuqqm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...ï¼Œä½†ä½¿ç”¨å›ºå®šå’Œé»˜è®¤çš„æœç´¢å­—ç¬¦ä¸²</font></font><code>searchString = "sports"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆéœ€è¦æ—¶ï¼‰ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zq/pi/tw/zqpitwdhh3fsnciz9p2scvn1sas.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ï¼Œå¯¹äºæ­¤é€‰é¡¹ï¼Œ&nbsp; </font></font><code>"search"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æ‚¨å¿…é¡»ä¸ºç”¨æˆ·æä¾›</font></font><code>SearchView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”¨äºè¾“å…¥æœç´¢å­—ç¬¦ä¸²</font><font style="vertical-align: inherit;">çš„æ–‡æœ¬å­—æ®µ</font><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xk/d1/uu/xkd1uu0tmepthmsjlkzu--wlwse.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç»“æœï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡é”®å…¥çš„æœç´¢å­—ç¬¦ä¸²æ¥æœç´¢ä»»ä½•æ–°é—»ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x4/ch/5a/x4ch5apliuwesqxjzeds58ab1t8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºè¯¥é€‰é¡¹ï¼Œ&nbsp; </font></font><code>"from category"&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ‰å¿…è¦å‘ç”¨æˆ·æä¾›æœ‰æœºä¼šé€‰æ‹©ä¸€ä¸ªç±»åˆ«ï¼Œæˆ‘ä»¬å¼€å§‹ä¸ç±»åˆ«</font></font><code>science</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2i/8e/3v/2i8e3vvly1r_ipfuflxwbtepglq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½œä¸ºä¸€ä¸ªç»“æœï¼Œç”¨æˆ·å¯ä»¥æœç´¢ä»»ä½•æ–°é—»å¯¹æ–°é—»é€‰æ‹©çš„ç±»åˆ«- ï¼Œ</font></font><code>science</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><code> health</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ&nbsp; </font><font style="vertical-align: inherit;">ï¼š</font></font><code>business</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> </font><font style="vertical-align: inherit;">
æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªéå¸¸ç®€å•çš„&nbsp; </font><font style="vertical-align: inherit;">&nbsp;æ¨¡å‹ï¼Œæœ‰ä¸¤ä¸ªç”¨æˆ·æ§åˆ¶</font><font style="vertical-align: inherit;">åŠŸèƒ½- </font><font style="vertical-align: inherit;">&nbsp;å’Œ</font></font><code>technology</code><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/p_/pn/li/p_pnli0chxenoalmms3ltch-iwo.png"><br>
<br><font style="vertical-align: inherit;"></font><code>ObservableObject</code><font style="vertical-align: inherit;"></font><code>@Published </code><font style="vertical-align: inherit;"></font><code>indexEndpoint</code><font style="vertical-align: inherit;"></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ä½¿æ‚¨å¯ä»¥ä»</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç½‘ç«™ä¸­é€‰æ‹©å„ç§ä¿¡æ¯&nbsp; </font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¿¡æ¯æ¥æºæ¸…å•</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;NewsAPIç±»ä¸­æ¥æ”¶åˆ°çš„ä¿¡æ¯æº</font><font style="vertical-align: inherit;">çš„</font><font style="vertical-align: inherit;">â€œå‘å¸ƒè€…â€å°†å¦‚ä½•è¿è¡Œ</font></font><code>fetchSources (for country: String)&nbsp;-&gt; AnyPublisher&lt;[Source], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†è·å¾—ä¸åŒå›½å®¶/åœ°åŒºçš„ä¿¡æ¯èµ„æºåˆ—è¡¨ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hr/oh/le/hrohle3hq8pkyhnjf6frali7yao.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...ä»¥åŠæŒ‰åç§°æœç´¢</font><font style="vertical-align: inherit;">ä¿¡æ¯</font><font style="vertical-align: inherit;">çš„èƒ½åŠ›ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kg/ea/ll/kgeallzwaxnkvekct18th7knkyo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...ä»¥åŠæœ‰å…³é€‰å®šæ¥æºçš„è¯¦ç»†ä¿¡æ¯ï¼šå…¶åç§°ï¼Œç±»åˆ«ï¼Œå›½å®¶/åœ°åŒºï¼Œç®€çŸ­è¯´æ˜å’Œç½‘ç«™é“¾æ¥ï¼š&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k_/b7/9w/k_b79wirynz07feigtlhgdeyik4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœå•å‡»é“¾æ¥ï¼Œæˆ‘ä»¬å°†è½¬åˆ°æ­¤ç½‘ç«™ä¿¡æ¯æ¥æºã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†ä½¿æ‰€æœ‰è¿™äº›éƒ½èƒ½èµ·ä½œç”¨ï¼Œæ‚¨éœ€è¦ä¸€ä¸ªéå¸¸ç®€å•çš„&nbsp; </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelï¼Œè¯¥Modelä»…å…·æœ‰ä¸¤ä¸ªç”¨æˆ·æ§åˆ¶çš„</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å±æ€§- </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å’Œ&nbsp; </font></font><code>country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rs/id/4b/rsid4bb5xmkjdkwuptkmwvhi-yc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒæ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨ç›¸åŒçš„æ–¹æ¡ˆï¼šåœ¨åˆå§‹åŒ–ç±»çš„</font></font><code>SourcesViewModel </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»</font><font style="vertical-align: inherit;">å®ä¾‹æ—¶</font><font style="vertical-align: inherit;">ï¼Œ</font></font><code> init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªâ€œè®¢é˜…â€ï¼Œè¯¥è®¢é˜…å°†åœ¨ç±»å®ä¾‹çš„æ•´ä¸ªâ€œç”Ÿå‘½å‘¨æœŸâ€ä¸­è¿è¡Œï¼Œ</font></font><code>&nbsp;SourcesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶ç¡®ä¿ä¿¡æ¯æºåˆ—è¡¨å–å†³äº&nbsp; </font></font><code>sources</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å›½å®¶&nbsp; </font></font><code>country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œæœç´¢å­—ç¬¦ä¸²</font></font><code>&nbsp;searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨å¸®åŠ©ä¸‹ï¼Œ&nbsp; </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å°†é“¾ä»â€œå‘å¸ƒè€…â€ä¸­æ‹‰å‡ºï¼Œ</font></font><code>$searchString </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶</font></font><code>$country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¾“å‡ºâ€œå‘å¸ƒè€…â€ </font></font><code>AnyPublisher&lt;[Source], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå…¶å€¼æ˜¯ä¿¡æ¯æºåˆ—è¡¨ã€‚æˆ‘ä»¬ä½¿ç”¨è¿ç®—ç¬¦â€œè®¢é˜…â€å®ƒ</font></font><code>assign&nbsp;(to: \.sources, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¾—åˆ°æ‰€éœ€ä¿¡æ¯æºçš„åˆ—è¡¨&nbsp; </font></font><code>sources</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚å¹¶</font><font style="vertical-align: inherit;">ä½¿ç”¨è¿ç®—ç¬¦</font><font style="vertical-align: inherit;">å°†æ”¶åˆ°çš„</font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œè®¢é˜…â€ </font><font style="vertical-align: inherit;">è®°ä½&nbsp; </font><font style="vertical-align: inherit;">åœ¨å˜é‡ä¸­&nbsp; </font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">
ç°åœ¨æˆ‘ä»¬æœ‰äº†</font><font style="vertical-align: inherit;">ä¿¡æ¯æºï¼Œ</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬</font><font style="vertical-align: inherit;">å¼€å§‹åˆ›å»º</font><font style="vertical-align: inherit;">ã€‚ B </font><font style="vertical-align: inherit;">åŒæ­¥</font><font style="vertical-align: inherit;">c</font></font><code>cancellableSet</code><font style="vertical-align: inherit;"></font><code>.store ( in: &amp;self.cancellableSet)</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>View Model</code><font style="vertical-align: inherit;"></font><code> UI</code><font style="vertical-align: inherit;"></font><code>SwiftUI</code><font style="vertical-align: inherit;"></font><code> View</code><font style="vertical-align: inherit;"></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;è¯¥æ¨¡å‹ä½¿ç”¨ä¸€ä¸ª</font></font><code>@ObservedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å˜é‡ï¼Œ</font><font style="vertical-align: inherit;">è¯¥</font><font style="vertical-align: inherit;">å˜é‡å¼•ç”¨æ­¤Modelç±»çš„å®ä¾‹ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å°†</font></font><code>ContentViewSources</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ç±»å®ä¾‹</font><font style="vertical-align: inherit;">ä»¥</font></font><code>SourcesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å˜é‡çš„å½¢å¼</font><font style="vertical-align: inherit;">æ·»åŠ åˆ°ç»“æ„&nbsp; </font><font style="vertical-align: inherit;">ä¸­</font></font><code>var sourcesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåˆ é™¤&nbsp; </font></font><code>Text ("Hello, World!")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å¹¶æ”¾ç½®</font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3ä¸ª</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å±æ€§ä¸­çš„</font><font style="vertical-align: inherit;">æ¯ä¸ª&nbsp; </font><font style="vertical-align: inherit;">å±æ€§</font></font><code>&nbsp;sourcesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ï¼š</font></font><br>
<br>
&nbsp;<ul>
<li><font style="vertical-align: inherit;"></font><code>SearchView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœç´¢æ çš„&nbsp; </font><font style="vertical-align: inherit;">æ–‡æœ¬æ¡†&nbsp; </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font></li>
<li>&nbsp;<code>Picker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ä¸ºäº†å›½å®¶</font></font><code>country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>SourcesList&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¿¡æ¯æ¥æº</font><font style="vertical-align: inherit;">æ¸…å•&nbsp;</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/td/tk/kn/tdtkknev57l3b5avb8y0uheu7fa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç»“æœï¼Œæˆ‘ä»¬å¾—åˆ°äº†æ‰€éœ€çš„ä¿¡æ¯</font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jw/gg/ly/jwgglycniqr2e-jhpifypfzx4m8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æ­¤å±å¹•ä¸Šï¼Œæˆ‘ä»¬ä»…ä½¿ç”¨æ–‡æœ¬æ¡†ç®¡ç†æœç´¢å­—ç¬¦ä¸²ï¼Œå¹¶ä½¿ç”¨æ¥ç®¡ç†</font></font><code>SearchView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œå›½å®¶/åœ°åŒºâ€&nbsp; </font></font><code>Picker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå…¶ä½™çš„å°†è‡ªåŠ¨è¿›è¡Œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¿¡æ¯æºåˆ—è¡¨ä»…</font></font><code>SourcesList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŒ…å«æœ‰å…³æ¯ä¸ªæºçš„æœ€å°‘ä¿¡æ¯-åç§°</font></font><code>source.name </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œç®€çŸ­è¯´æ˜</font></font><code>source.description</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sj/zi/1z/sjzi1zh-7leadeujwarkuka_ii8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... ...ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é“¾æ¥è·å¾—æœ‰å…³æ‰€é€‰æºçš„æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼šåœ¨è¯¥é“¾æ¥</font></font><code>NavigationLink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸­ï¼Œ</font></font><code>destination</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬æŒ‡ç¤º&nbsp; </font></font><code>DetailSourceView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å“ªäº›æºæ•°æ®æ˜¯ä¿¡æ¯æº&nbsp; </font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥åŠæ‰€éœ€çš„ç±»å®ä¾‹</font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¾—åˆ°ä»–çš„æ–‡ç« æ¸…å•</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ix/j_/uh/ixj_uheqhclwopwidsihztunn5e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çœ‹çœ‹æˆ‘ä»¬å¦‚ä½•åœ¨ä¿¡æ¯æ¥æºåˆ—è¡¨ä¸­è·å¾—é€‰å®šä¿¡æ¯æ¥æºçš„æ–‡ç« åˆ—è¡¨&nbsp; </font></font><code>SourcesList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬çš„è€æœ‹å‹å¯¹æˆ‘ä»¬æœ‰å¸®åŠ©- </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å¿…é¡»ä¸ºè¿™ä¸¤ä¸ª</font><font style="vertical-align: inherit;">ç±»&nbsp; </font><font style="vertical-align: inherit;">è®¾ç½®â€œè¾“å…¥â€&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å±æ€§ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">index&nbsp; </font></font><code>indexEndpoint = 3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå³</font></font><code>.articlesFromSource (_source:String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹åº”äºå›ºå®šæ¥æºæ–‡ç« é€‰æ‹©</font><font style="vertical-align: inherit;">çš„é€‰é¡¹&nbsp; </font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å­—ç¬¦ä¸²&nbsp; </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ä½œä¸ºæºæœ¬èº«ï¼ˆæˆ–æ›´ç¡®åˆ‡åœ°è¯´æ˜¯å…¶æ ‡è¯†ç¬¦ï¼‰</font></font><code>source.id&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/ia/xi/lr/iaxilr4rlcyippxuvkbd46kequ4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šå¸¸ï¼Œå¦‚æœæ‚¨æŸ¥çœ‹æ•´ä¸ª</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsApp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åº”ç”¨ç¨‹åº</font><font style="vertical-align: inherit;">ï¼Œåˆ™ä¸ä¼šçœ‹åˆ°æˆ‘ä»¬æ˜ç¡®è¦æ±‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsNews.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç½‘ç«™ä¸Šæä¾›æ–‡ç« æˆ–ä¿¡æ¯æ¥æºçš„ä»»ä½•åœ°æ–¹&nbsp; </font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬ä»…ç®¡ç†&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æ•°æ®ï¼Œä½†ä¼š</font></font><code>View Model </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åšæˆ‘ä»¬çš„å·¥ä½œï¼šé€‰æ‹©æ‰€éœ€çš„æ–‡ç« å’Œä¿¡æ¯æ¥æºã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹è½½</font></font><code>UIImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–‡ç« </font><font style="vertical-align: inherit;">å›¾ç‰‡</font></font><code>Article</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ¬æ–‡çš„æ¨¡å‹&nbsp; </font></font><code>Article&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŒ…å«ä¸€ä¸ª</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é™„å¸¦</font><font style="vertical-align: inherit;">çš„</font><font style="vertical-align: inherit;">å›¾åƒ&nbsp; </font></font><code>urlToImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/om/ny/fv/omnyfvhlcegrhltunqvjvyaq6l4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŸºäºæ­¤ï¼Œ&nbsp; </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†æ¥æˆ‘ä»¬å¿…é¡»</font></font><code>UIImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ä»</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç½‘ç«™ä¸Š&nbsp; </font><font style="vertical-align: inherit;">è·å–å›¾åƒæœ¬èº«</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å·²ç»ç†Ÿæ‚‰æ­¤ä»»åŠ¡ã€‚</font><font style="vertical-align: inherit;">åœ¨è¯¥ç±»ä¸­</font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½¿ç”¨å‡½æ•°</font></font><code>fetchImage(for url: URL?) -&gt; AnyPublisher&lt;UIImage?, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»ºä¸€ä¸ª</font></font><code>AnyPublisher&lt;UIImage?, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…·æœ‰å›¾åƒå€¼&nbsp; </font></font><code>UIImage?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ä¸”æ²¡æœ‰é”™è¯¯&nbsp; </font><font style="vertical-align: inherit;">çš„â€œå‘å¸ƒè€…â€&nbsp;  </font></font><code>Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆå®é™…ä¸Šï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œåˆ™è¿”å›å›¾åƒ</font></font><code> nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€‚</font></font><code>UIImage?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;åœ¨è®¾è®¡ç”¨æˆ·ç•Œé¢ï¼ˆ</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font><font style="vertical-align: inherit;">æ—¶ï¼Œ</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥â€œè®¢é˜…â€è¯¥â€œå‘å¸ƒè€…â€ä»¥æ¥æ”¶å›¾åƒ&nbsp; </font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">è¯¥å‡½æ•°çš„æºæ•°æ®</font></font><code>fetchImage(for url: URL?)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯&nbsp; </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬æœ‰ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/do/a-/hg/doa-hg5idk0ukdghj0snu0-nubm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚æœæˆ‘ä»¬çŸ¥é“ï¼Œ</font><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬è¯¦ç»†è€ƒè™‘åœ¨</font></font><code> Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œå‘å¸ƒè€…â€ </font><font style="vertical-align: inherit;">çš„å¸®åŠ©ä¸‹å¦‚ä½•è¿›è¡Œ</font><font style="vertical-align: inherit;">ï¼š</font></font><code>AnyPublisher &lt;UIImage?, Never&gt;</code><font style="vertical-align: inherit;"></font><code>url</code><font style="vertical-align: inherit;"></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚æœ</font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç›¸ç­‰</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè¿”å›</font></font><code>Just(nil)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŸºäº</font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œå‘å¸ƒè€…â€ </font><font style="vertical-align: inherit;">çš„</font><font style="vertical-align: inherit;">å½¢å¼</font></font><code>dataTaskPublisher(for:)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå…¶è¾“å‡ºå€¼ä¸º</font></font><code>Output</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…ƒç»„</font></font><code>(data: Data, response: URLResponse)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œé”™è¯¯</font></font><code>&nbsp;Failure</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&nbsp; </font></font><code>URLError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬é‡‡å–</font><font style="vertical-align: inherit;">ä»…æ•°æ®</font></font><code>map {}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»å…ƒç»„</font></font><code>(data: Data, response: URLResponse)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥ä¾›è¿›ä¸€æ­¥å¤„ç†&nbsp; </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå’Œå½¢å¼</font></font><code>UIImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚æœå‰é¢çš„æ­¥éª¤è¿”å›é”™è¯¯</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å°†ç»“æœä¼ é€’åˆ°</font></font><code>main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æµä¸­ï¼Œå› ä¸ºæˆ‘ä»¬å‡å®šåœ¨è®¾è®¡ä¸­è¿›ä¸€æ­¥ä½¿ç”¨å®ƒ</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œæ“¦é™¤â€â€œå‘å¸ƒè€…â€çš„ç±»å‹å¹¶è¿”å›å‰¯æœ¬</font></font><code>AnyPublisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨ä¼šçœ‹åˆ°ä»£ç éå¸¸ç´§å‡‘ä¸”å¯è¯»æ€§å¼ºï¼Œæ²¡æœ‰ä»»ä½•ä»£ç </font></font><code>callbacks</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬å¼€å§‹</font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ä¸ºå›¾åƒ</font><font style="vertical-align: inherit;">åˆ›å»º&nbsp; </font></font><code>UIImage?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯ä¸€ä¸ª</font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ç°protocol </font><font style="vertical-align: inherit;">çš„ç±»</font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå…·æœ‰ä¸¤ä¸ª&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å±æ€§ï¼š</font></font><br>
<br>
<ul>
<li><code>@Published url: URL?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æ˜¯</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å›¾åƒ</font></font></li>
<li><code>@Published var image: UIImage?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æ˜¯æ¥è‡ª</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„å›¾ç‰‡æœ¬èº«</font><font style="vertical-align: inherit;">ï¼š</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/li/o6/kr/lio6krhn0v1eyeiwg_cgpwcigia.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å†ä¸€æ¬¡ï¼Œåˆå§‹åŒ–ç±»çš„å®ä¾‹æ—¶ï¼Œ&nbsp; </font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æˆ‘ä»¬å¿…é¡»å°†é“¾ä»è¾“å…¥â€œ publisherâ€&nbsp; </font></font><code>$url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å»¶ä¼¸åˆ°è¾“å‡ºâ€œ publisherâ€ </font></font><code>AnyPublisher&lt;UIImage?, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œç¨åå°†</font><font style="vertical-align: inherit;">&nbsp;â€œè®¢é˜…â€ </font><font style="vertical-align: inherit;">åˆ°è¾“å‡ºå¹¶è·å¾—æ‰€éœ€çš„å›¾åƒ</font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/gi/2s/bagi2swivajzz0pkgqzzsswudww.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬ä½¿ç”¨è¿ç®—ç¬¦</font></font><code>&nbsp;flatMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œä¸€ä¸ªéå¸¸ç®€å•çš„â€œ subscriberâ€ </font></font><code>assign (to: \image, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†å…¶åˆ†é…ç»™æ¥è‡ªâ€œ publisherâ€çš„</font><font style="vertical-align: inherit;">æ¥æ”¶è€…&nbsp; </font><font style="vertical-align: inherit;">``å±æ€§å€¼</font></font><code>@Published image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/eq/3k/4-/eq3k4-0pbruhk4qbcu8hmyinfmg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å†æ¬¡</font><font style="vertical-align: inherit;">ä½¿ç”¨æ“ä½œç¬¦</font></font><code>cancellableSet </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å­˜å‚¨</font><font style="vertical-align: inherit;">åœ¨å˜é‡&nbsp; </font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">''é¢„è®¢''ä¸­&nbsp; </font></font><code>store(in: &amp;self.cancellableSet)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤â€œå›¾åƒä¸‹è½½å™¨â€çš„é€»è¾‘æ˜¯ï¼Œæ‚¨ä»</font></font><code> nil URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ²¡æœ‰é¢„åŠ è½½</font><font style="vertical-align: inherit;">çš„å›¾åƒä¹‹å¤–çš„å…¶ä»–ä½ç½®ä¸‹è½½å›¾åƒ</font><font style="vertical-align: inherit;">ï¼Œå³</font></font><code>image == nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚å¦‚æœåœ¨ä¸‹è½½è¿‡ç¨‹ä¸­æ£€æµ‹åˆ°ä»»ä½•é”™è¯¯ï¼Œåˆ™å›¾åƒå°†ä¸å­˜åœ¨ï¼Œå³</font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ƒå°†ä¿æŒç›¸ç­‰</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬çš„å¸®åŠ©</font></font><code>ArticleImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹ï¼Œ</font></font><code>imageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;è¯¥ç±»</font><font style="vertical-align: inherit;">çš„å®ä¾‹ä½¿ç”¨æ­¤</font><font style="vertical-align: inherit;">å›¾åƒæ¥æ˜¾ç¤ºå›¾åƒ</font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚å¦‚æœä»–çš„å›¾åƒå›¾åƒä¸ç›¸ç­‰</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåˆ™ä½¿ç”¨æ¥æ˜¾ç¤º</font></font><code> Image (...)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½†å¦‚æœç›¸ç­‰</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåˆ™æ ¹æ®</font><font style="vertical-align: inherit;">å›¾åƒçš„ç›¸ç­‰æ€§</font><font style="vertical-align: inherit;">ï¼Œ</font><font style="vertical-align: inherit;">ä¸</font><font style="vertical-align: inherit;">æ˜¾ç¤º</font></font><code>url </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»»ä½•å†…å®¹</font></font><code>EmptyView()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ–è€…æ˜¾ç¤º</font></font><code>Rectangle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¸¦æœ‰æ—‹è½¬æ–‡æœ¬T </font><font style="vertical-align: inherit;">çš„çŸ©å½¢</font></font><code>ext("Loading...")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mh/nq/yi/mhnqyirurke0w6yibfxm86gap1i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤é€»è¾‘é€‚ç”¨äºè¿™ç§æƒ…å†µå½“æ‚¨è‚¯å®šçŸ¥é“çš„æ—¶å€™ï¼ˆ&nbsp; </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é™¤äº†&nbsp; </font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è·å¾—å›¾ç‰‡ï¼‰</font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œç”µå½±ç”µå½±æ•°æ®åº“å°±æ˜¯è¿™ç§æƒ…å†µã€‚&nbsp;</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TMDb</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.orgï¼Œ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–°é—»èšåˆå™¨&nbsp; </font><font style="vertical-align: inherit;">&nbsp; å°±ä¸åŒäº†ã€‚æŸäº›ä¿¡æ¯æ¥æºçš„æ–‡ç« ä¸</font></font><code>nil&nbsp;URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å›¾åƒ</font><font style="vertical-align: inherit;">æä¾›äº†ä¸åŒçš„ä¿¡æ¯&nbsp; </font><font style="vertical-align: inherit;">ï¼Œä½†æ˜¯å¯¹å®ƒçš„è®¿é—®æ˜¯å°é—­çš„ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª</font></font><code>Rectangle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¸¦æœ‰æ—‹è½¬æ–‡æœ¬</font><font style="vertical-align: inherit;">çš„çŸ©å½¢</font><font style="vertical-align: inherit;">ï¼Œ</font><font style="vertical-align: inherit;">è¯¥çŸ©å½¢</font></font><code>Text("Loading...")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†æ°¸è¿œä¸ä¼šè¢«æ›¿æ¢ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sh/tq/lp/shtqlpz4wx-iobt19-wv9j2pb7w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœ</font></font><code>&nbsp;URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å›¾åƒä¸åŒäº&nbsp; </font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåˆ™</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å›¾åƒ&nbsp; </font><font style="vertical-align: inherit;">çš„ç›¸ç­‰æ€§&nbsp; </font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯èƒ½æ„å‘³ç€å›¾åƒæ­£åœ¨åŠ è½½ä»¥åŠåŠ è½½æ—¶å‘ç”Ÿé”™è¯¯çš„äº‹å®ï¼Œæˆ‘ä»¬å°†æ°¸è¿œä¸ä¼šå¾—åˆ°å›¾ç‰‡</font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ä¸ºäº†åŒºåˆ†è¿™ä¸¤ç§æƒ…å†µï¼Œæˆ‘ä»¬å‘è¯¥ç±»ä¸­</font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;çš„ä¸¤ä¸ªç°æœ‰</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å±æ€§</font><font style="vertical-align: inherit;">æ·»åŠ äº†&nbsp; </font><font style="vertical-align: inherit;">ä¸€ä¸ªï¼š&nbsp;</font></font><br>
<br>
<code>&nbsp;@Published var noData = false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;-è¿™æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å°†æŒ‡ç¤ºç”±äºé€‰æ‹©è¿‡ç¨‹ä¸­çš„é”™è¯¯è€Œå¯¼è‡´å›¾åƒæ•°æ®ä¸å­˜åœ¨çš„æƒ…å†µï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kp/jc/sq/kpjcsqugrsfzyghmefnge0unscy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ›å»ºâ€œè®¢é˜…â€æ—¶ï¼Œæˆ‘ä»¬å°†</font></font><code> init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ•è·</font></font><code> Error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŠ è½½å›¾åƒæ—¶å‘ç”Ÿçš„</font><font style="vertical-align: inherit;">æ‰€æœ‰é”™è¯¯</font><font style="vertical-align: inherit;">å¹¶åœ¨</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å±æ€§ä¸­</font><font style="vertical-align: inherit;">ç´¯ç§¯å®ƒä»¬çš„å­˜åœ¨&nbsp; </font></font><code>self.noData = true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚å¦‚æœä¸‹è½½æˆåŠŸï¼Œåˆ™è·å¾—å›¾åƒ</font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">
æˆ‘ä»¬</font><font style="vertical-align: inherit;">&nbsp;åŸºäºä»¥ä¸‹&nbsp; </font><font style="vertical-align: inherit;">&nbsp;å‡½æ•°</font><font style="vertical-align: inherit;">åˆ›å»º</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â€œå‘å¸ƒè€…â€&nbsp; </font><font style="vertical-align: inherit;">ï¼š</font><font style="vertical-align: inherit;">æˆ‘ä»¬</font><font style="vertical-align: inherit;">é€šè¿‡åˆå§‹åŒ–â€œå‘å¸ƒè€…â€&nbsp; </font><font style="vertical-align: inherit;">å¼€å§‹åˆ›å»ºæ–¹æ³•</font><font style="vertical-align: inherit;">ï¼Œè¯¥æ–¹æ³•å¯ç”¨äº</font><font style="vertical-align: inherit;">ä½¿ç”¨é—­åŒ…</font><font style="vertical-align: inherit;">å¼‚æ­¥è·å–å•ä¸ªTYPEå€¼</font><font style="vertical-align: inherit;">ã€‚é—­åŒ…æœ‰ä¸€ä¸ªå‚æ•°- </font><font style="vertical-align: inherit;">è¿™æ˜¯TYPEçš„å‡½æ•°&nbsp; </font><font style="vertical-align: inherit;">ï¼š</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†</font><font style="vertical-align: inherit;">
ç»“æœ</font><font style="vertical-align: inherit;">è½¬æ¢ä¸º</font></font><code>AnyPublisher&lt;UIImage?, Error&gt;</code><font style="vertical-align: inherit;"></font><code>url</code><font style="vertical-align: inherit;"></font><code>fetchImageErr (for url: URL?)</code><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/7f/ek/jf/7fekjfrbihaieypuxaovub1-op8.png"><br>
<br><font style="vertical-align: inherit;"></font><code>fetchImageErr</code><font style="vertical-align: inherit;"></font><code>Future</code><font style="vertical-align: inherit;"></font><code>Result</code><font style="vertical-align: inherit;"></font><code>Promise</code><font style="vertical-align: inherit;"></font><code>(Result&lt;Output, Failure&gt;) â†’ Void</code><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/iu/ch/_u/iuch_uvhdkz42-mfyuiuq3jiosg.png"><br>
<br><font style="vertical-align: inherit;"></font><code>Future</code><font style="vertical-align: inherit;"></font><code>AnyPublisher &lt;UIImage?, Error&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨â€œæ“¦é™¤ç±»å‹â€è¿ç®—ç¬¦çš„å¸®åŠ©ä¸‹</font></font><code>eraseToAnyPublisher()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ‰§è¡Œä¸‹åˆ—æ­¥éª¤ï¼Œè€ƒè™‘åˆ°æ‰€æœ‰å¯èƒ½å‡ºç°çš„é”™è¯¯ï¼ˆæˆ‘ä»¬ä¸ä¼šè¯†åˆ«é”™è¯¯ï¼Œé‚£ç®€ç›´æ˜¯é‡è¦çš„ï¼Œæˆ‘ä»¬çŸ¥é“æœ‰ä¸€ä¸ªé”™è¯¯ï¼‰ï¼š</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
0æ£€æŸ¥</font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”¨äº</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å’Œ&nbsp; </font></font><code>noData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸Š</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚æœæ˜¯è¿™æ ·ï¼Œåˆ™è¿”å›é”™è¯¯ï¼Œå¦‚æœä¸æ˜¯ï¼Œä¼ è¾“ï¼š</font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šè¿‡è¿›ä¸€æ­¥é“¾ï¼Œ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.åˆ›å»ºä¸€ä¸ª</font></font><code>dataTaskPublisher(for:)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¾“å…¥ä¸º- </font><font style="vertical-align: inherit;">çš„â€œå‘å¸ƒè€…â€ </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¹¶ä¸”è¾“å‡ºå€¼ä¸º</font></font><code>Output</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€ä¸ªå…ƒç»„</font></font><code>(data: Data, response: URLResponse)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œä¸€ä¸ªé”™è¯¯&nbsp; </font></font><code>URLError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.ä½¿ç”¨</font></font><code> tryMap { }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ç»“æœå…ƒç»„</font><font style="vertical-align: inherit;">è¿›è¡Œåˆ†æ</font></font><code>(data: Data, response: URLResponse)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼šå¦‚æœå®ƒ</font></font><code>response.statusCode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨èŒƒå›´å†…</font></font><code>200...299</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåˆ™ä¸ºäº†è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ï¼Œæˆ‘ä»¬ä»…è·å–æ•°æ®&nbsp; </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬ä¼šâ€œæŠ›å‡ºâ€é”™è¯¯ï¼ˆæ— è®ºå¦‚ä½•ï¼‰ï¼Œ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.æˆ‘ä»¬</font></font><code>map { }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è½¬æ¢æ•°æ®</font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸º</font></font><code>UIImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4ä¼ é€’ç»“æœåˆ°</font></font><code>main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æµï¼Œå› ä¸ºæˆ‘ä»¬è®¤ä¸ºæˆ‘ä»¬å°†åœ¨è®¾è®¡ä¸­ç”¨åˆ°å®ƒ</font><font style="vertical-align: inherit;">çš„è¿‡ç¨‹</font></font><code>UI</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -æˆ‘ä»¬â€œè®¢é˜…â€æ¥æ”¶åˆ°çš„â€œå‘è¡Œäººâ€ç”¨</font></font><code>sink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è‡ªå·±çš„å°é—­</font></font><code>receiveCompletion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><code>receiveValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - 5ã€‚å¦‚æœæˆ‘ä»¬</font></font><code>receiveCompletion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å‘ç°é”™è¯¯</font><font style="vertical-align: inherit;">åœ¨å°é—­&nbsp; </font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬æŠ¥å‘Šä½¿ç”¨å®ƒ</font></font><code>promise (.failure(error)))</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -åœ¨å°é—­6ï¼Œ&nbsp; </font></font><code>receiveValue </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å‘ŠçŸ¥æˆåŠŸæ¥æ”¶çš„ä½¿ç”¨ç‰©å“çš„é˜µåˆ—</font></font><code> promise (.success($0))</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨å¯å˜7.æˆ‘ä»¬è®°å¾—æ”¶åˆ°â€œè®¢é˜…â€&nbsp; </font></font><code>cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä»¥ä¿è¯ç±»å®ä¾‹çš„â€œç”Ÿå‘½å‘¨æœŸâ€å†…çš„ç”Ÿå­˜èƒ½åŠ›</font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8å¤§å®¶â€œæ“¦é™¤â€çš„â€œå‡ºç‰ˆå•†â€ TYPEå¹¶è¿”å›å®ä¾‹</font></font><code>AnyPublisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å›åˆ°</font></font><code>ArticleImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨æ–°&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å˜é‡çš„åœ°æ–¹</font></font><code>noData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ²¡æœ‰å›¾åƒæ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†ä¸æ˜¾ç¤ºä»»ä½•å†…å®¹ï¼Œå³</font></font><code>EmptyView ()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3k/wr/v_/3kwrv_cecjy2f8jea3rgnnpkzri.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åï¼Œæˆ‘ä»¬å°†æŠŠæ˜¾ç¤º</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–°é—»</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">èšåˆå™¨</font></a><font style="vertical-align: inherit;">ä¸­</font><font style="vertical-align: inherit;">æ•°æ®çš„æ‰€æœ‰å¯èƒ½æ€§æ‰“åŒ…</font><font style="vertical-align: inherit;">åœ¨</font></font><code>TabView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yq/xb/ra/yqxbraupq1d0tgeygy2lb05o4xo.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœåŠ¡å™¨è·å–å’Œè§£ç JSONæ•°æ®æ—¶æ˜¾ç¤ºé”™è¯¯&nbsp; </font><font style="vertical-align: inherit;">ã€‚</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®¿é—®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœåŠ¡å™¨æ—¶ï¼Œ&nbsp; </font><font style="vertical-align: inherit;">å¯èƒ½ä¼šå‘ç”Ÿ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">é”™è¯¯</font></a><font style="vertical-align: inherit;">ï¼Œä¾‹å¦‚ï¼Œç”±äºæ‚¨æŒ‡å®šäº†é”™è¯¯çš„å¯†é’¥ï¼Œ</font></font><code>API-key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–è€…ç”±äºå¼€å‘äººå‘˜çš„è´¹ç”¨ä¸è®¡ä»»ä½•è´¹ç”¨ï¼Œè¶…å‡ºäº†å…è®¸çš„è¯·æ±‚æ•°é‡æˆ–å…¶ä»–åŸå› ã€‚åŒæ—¶ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœåŠ¡å™¨&nbsp; </font><font style="vertical-align: inherit;">&nbsp;ä¸ºæ‚¨æä¾›</font></font><code>HTTP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»£ç å’Œç›¸åº”çš„æ¶ˆæ¯ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_f/2n/zv/_f2nzv5bndlu8auo9cygjyk9fta.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¿…é¡»å¤„ç†è¿™ç§æœåŠ¡å™¨é”™è¯¯ã€‚å¦åˆ™ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºç”¨æˆ·å°†é™·å…¥çªç„¶çš„æƒ…å†µï¼Œæ— ç¼˜æ— æ•…ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœåŠ¡å™¨&nbsp; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">å°†</font></a><font style="vertical-align: inherit;"> &nbsp;åœæ­¢å¤„ç†ä»»ä½•è¯·æ±‚ï¼Œä½¿ç”¨æˆ·å®Œå…¨èŒ«ç„¶ï¼Œå‡ºç°ç©ºç™½å±å¹•ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ°ç›®å‰ä¸ºæ­¢ï¼Œ</font><font style="vertical-align: inherit;">ä»</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;">æœåŠ¡å™¨&nbsp; </font><font style="vertical-align: inherit;">é€‰æ‹©æ–‡ç« &nbsp; </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œä¿¡æ¯æ¥æºæ—¶&nbsp;</font></font><code>[Source]</code><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æˆ‘ä»¬å¿½ç•¥äº†æ‰€æœ‰é”™è¯¯ï¼Œå¹¶ä¸”åœ¨é”™è¯¯å‡ºç°çš„æƒ…å†µä¸‹è¿”å›ç©ºæ•°ç»„</font></font><code>[Article]()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ&nbsp; </font><font style="vertical-align: inherit;">ç»“æœæ˜¯&nbsp; </font></font><code>[Source]()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»é”™è¯¯å¤„ç†å¼€å§‹ï¼Œè®©æˆ‘ä»¬åŸºäºç°æœ‰çš„</font></font><code>fetchArticles (from endpoint: Endpoint) -&gt; AnyPublisher&lt;[Article], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æ–‡ç« é€‰æ‹©</font></font><code>NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;æ–¹æ³•</font><font style="vertical-align: inherit;">åœ¨ç±»ä¸­åˆ›å»º</font><font style="vertical-align: inherit;">å¦ä¸€ä¸ªæ–¹æ³•</font><font style="vertical-align: inherit;">ï¼Œè¯¥&nbsp; </font><font style="vertical-align: inherit;">æ–¹æ³•</font></font><code>fetchArticlesErr (from endpoint: Endpoint) -&gt; AnyPublisher&lt;[Article], NewsError&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ä»…å°†è¿”å›æ–‡ç« æ•°ç»„</font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè€Œä¸”è¿˜å¯èƒ½è¿”å›é”™è¯¯&nbsp; </font></font><code>NewsError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetchArticlesErr</span><span class="hljs-params">(from endpoint: Endpoint)</span></span> -&gt;
                            <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">Article</span>], <span class="hljs-type">NewsError</span>&gt; {<font></font>
<font></font>
. . . . . . . .<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤æ–¹æ³•ä¸æ–¹æ³•ä¸€æ ·</font></font><code>fetchArticles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåœ¨è¾“å…¥å¤„æ¥å—</font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å¹¶è¿”å›å¸¦æœ‰æ–‡ç« æ•°ç»„å½¢å¼çš„å€¼çš„â€œå‘å¸ƒè€…â€ </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½†ä¸æ˜¯æ²¡æœ‰é”™è¯¯</font></font><code>Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè€Œæ˜¯ç”±æšä¸¾å®šä¹‰äº†ä¸€ä¸ªé”™è¯¯</font></font><code>NewsError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x9/es/ey/x9eseyq8jbapjkmgdoj7aggc6f0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬é€šè¿‡åˆå§‹åŒ–â€œå‘å¸ƒè€…â€å¼€å§‹åˆ›å»ºæ–°æ–¹æ³•&nbsp; </font></font><code>Future</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè¯¥æ–¹æ³•ç”¨äº</font></font><code>Result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨é—­åŒ…</font><font style="vertical-align: inherit;">å¼‚æ­¥è·å–å•ä¸ªTYPEå€¼</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">é—­åŒ…æœ‰ä¸€ä¸ªå‚æ•°- </font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™æ˜¯TYPEçš„å‡½æ•°&nbsp; </font></font><code>(Result&lt;Output, Failure&gt;) -&gt; Void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†</font><font style="vertical-align: inherit;">ä½¿ç”¨â€œ TYPE Eraseâ€è¿ç®—ç¬¦</font><font style="vertical-align: inherit;">å°†</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3w/bw/ct/3wbwctuso0qweiz3a8qk_h1aiom.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¥æ”¶</font></font><code>Future</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ°çš„ä¿¡æ¯è½¬æ¢æˆæˆ‘ä»¬éœ€è¦çš„â€œ publisherâ€&nbsp; </font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">
åœ¨æ–°æ–¹æ³•ä¸­ï¼Œ</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†é‡å¤æ‰§è¡Œè¯¥æ–¹æ³•ä¸­çš„æ‰€æœ‰æ­¥éª¤&nbsp;</font></font><code>AnyPublisher &lt;[Article], NewsError&gt;</code><font style="vertical-align: inherit;"></font><code>eraseToAnyPublisher()</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>fetchArticlesErr</code><font style="vertical-align: inherit;"></font><code>fetchArticles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½†æˆ‘ä»¬ä¼šè€ƒè™‘æ‰€æœ‰å¯èƒ½çš„é”™è¯¯ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pb/xz/i0/pbxzi0rn5-cuandt3rtu74ofj8s.png"><br>
<br>
<ul>
<li>0.   endpoint&nbsp; <code>URL endpoint.absoluteURL </code>    , <code> url </code> <code>nil</code>:  <code>nil</code>,    <code>.urlError</code>,   â€”  <code>url</code>   ,</li>
<li>1.  Â«Â» <code>dataTaskPublisher(for:)</code>,     â€” <code>url</code>,    <code>Output</code>   <code>(data: Data, response: URLResponse)</code>  &nbsp;<code>URLError</code>,</li>
<li>2.    <code>tryMap { }</code>&nbsp;  <code>(data: Data, response: URLResponse)</code>:  <code>response.statusCode</code>    <code>200...299</code>,       &nbsp;<code>data</code>.    Â«Â»  <code>.responseError</code>,  &nbsp;&nbsp;<code>data</code>,    <code>String</code>,    ,</li>
<li>3. <code> JSON</code>    ,   &nbsp;<code>NewsResponse</code>,</li>
<li>4.    <code>main</code> ,         <code>UI</code></li>
<li>Â«Â»   Â«Â»   <code>sink</code>    <code>receiveCompletion</code>  <code>receiveValue</code>,<br>
 <ul>
<li>5.&nbsp; &nbsp;&nbsp;<code>receiveCompletion</code>&nbsp;  <code>error</code>,       <code>promise (.failure(...)))</code>,</li>
<li> 6.&nbsp;&nbsp;&nbsp;<code>receiveValue</code>         <code>promise (.success($0.articles))</code>,</li>
</ul>&nbsp;</li>
<li>7.&nbsp;  Â«Â»  &nbsp;<code>var subscriptions</code>,       Â« Â»   <code>NewsAPI</code>,</li>
<li>8. Â«Â»  Â«Â»    <code>AnyPublisher</code>.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œâ€œå‘å¸ƒè€…â€&nbsp; </font></font><code>dataTaskPublisher(for:)</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ƒçš„åŸå‹çš„</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">ä¸åŒä¹‹å¤„</font></a></font><code>dataTask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨äºï¼Œå¦‚æœ</font><font style="vertical-align: inherit;">ä¸åœ¨</font></font><code>response.statusCode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;èŒƒå›´å†…</font><font style="vertical-align: inherit;">æ—¶å‘ç”ŸæœåŠ¡å™¨é”™è¯¯</font></font><code>200...299</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå®ƒä»ç„¶ä»¥å…ƒç»„çš„å½¢å¼ä¼ é€’æˆåŠŸçš„å€¼</font></font><code>(data: Data, response: URLResponse)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè€Œä¸æ˜¯å½¢å¼ä¸Šçš„é”™è¯¯</font></font><code>(Error, URLResponse?)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒçœŸå®çš„æœåŠ¡å™¨é”™è¯¯ä¿¡æ¯åŒ…å«åœ¨ä¸­</font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å¦‚æœå®¢æˆ·ç«¯å‘ç”Ÿé”™è¯¯ï¼ˆæ— æ³•ä¸æœåŠ¡å™¨è”ç³»ï¼Œå®‰å…¨ç³»ç»Ÿç¦ä»¤</font><font style="vertical-align: inherit;">ç­‰ï¼‰</font><font style="vertical-align: inherit;">ï¼Œåˆ™</font><font style="vertical-align: inherit;">â€œå‘å¸ƒè€…â€ </font></font><code>dataTaskPublisher(for:)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å°†å‘é€é”™è¯¯&nbsp; </font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">
å¦‚æœè¦åœ¨ä¸­æ˜¾ç¤ºé”™è¯¯</font><font style="vertical-align: inherit;">ï¼Œåˆ™éœ€è¦ç›¸åº”çš„</font><font style="vertical-align: inherit;">é”™è¯¯</font><font style="vertical-align: inherit;">ï¼Œ</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†å…¶ç§°ä¸º&nbsp; </font><font style="vertical-align: inherit;">ï¼š</font><font style="vertical-align: inherit;">
åœ¨</font><font style="vertical-align: inherit;">å®ç°åè®®</font><font style="vertical-align: inherit;">çš„ç±»</font><font style="vertical-align: inherit;">ä¸­</font><font style="vertical-align: inherit;">ï¼Œè¿™æ¬¡æˆ‘ä»¬æœ‰å››ä¸ª&nbsp; </font><font style="vertical-align: inherit;">å±æ€§ï¼š</font></font><code>URLError</code><font style="vertical-align: inherit;"></font><code>ATS</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>SwiftUI</code><font style="vertical-align: inherit;"></font><code>View Model</code><font style="vertical-align: inherit;"></font><code>ArticlesViewModelErr</code><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/em/1o/qy/em1oqy5ob60o8xzmz_-kpdvzs4a.png"><br>
<br><font style="vertical-align: inherit;"></font><code>&nbsp;ArticlesViewModelErr</code><font style="vertical-align: inherit;"></font><code>ObservableObject </code><font style="vertical-align: inherit;"></font><code>@Published</code><font style="vertical-align: inherit;"></font><br>
<br>
<ol>
<li><code>@Published var indexEndpoint: Int</code> â€”   <code>Endpoint</code> (    Â«Â»,     <code> View</code>),&nbsp;</li>
<li><code>@Published var searchString: String</code> â€”   ,    &nbsp;<code>Endpoint</code>:    Â«Â» ,       (      Â«Â»,        <code>View</code>),&nbsp;</li>
<li>&nbsp;<code>@Published var articles: [Article]</code>&nbsp;-    ( Â«Â»,        &nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NewsAPI.org&nbsp;</a>)</li>
<li>&nbsp;&nbsp;<code>@Published var articlesError: NewsError?</code>&nbsp;-  ,      &nbsp;    &nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NewsAPI.org&nbsp;</a>.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“æ‚¨åˆå§‹åŒ–ä¸€ä¸ªç±»çš„å®ä¾‹æ—¶</font></font><code>ArticlesViewModelErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬å¿…é¡»å†æ¬¡ä»è¾“å…¥â€œ publishersâ€ </font><font style="vertical-align: inherit;">åˆ°è¾“å‡ºâ€œ publisherâ€&nbsp; </font><font style="vertical-align: inherit;">æ‰©å±•ä¸€æ¡é“¾ï¼Œ</font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶</font><font style="vertical-align: inherit;">ç”¨â€œ Subscriberâ€å¯¹å…¶è¿›è¡Œâ€œç­¾åâ€ï¼Œä»è€Œ</font><font style="vertical-align: inherit;">å¾—åˆ°å¾ˆå¤šæ–‡ç« </font><font style="vertical-align: inherit;">æˆ–é”™è¯¯&nbsp; </font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">
åœ¨æˆ‘ä»¬çš„è¯¾å ‚ä¸Šï¼Œ</font><font style="vertical-align: inherit;">æˆ‘ä»¬å·²ç»æ„é€ äº†&nbsp; </font><font style="vertical-align: inherit;">ä¸€ä¸ª</font><font style="vertical-align: inherit;">æ ¹æ®å€¼</font><font style="vertical-align: inherit;">è¿”å›``å‘å¸ƒè€…''&nbsp; </font><font style="vertical-align: inherit;">çš„å‡½æ•°</font><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬åªéœ€è¦ä»¥æŸç§æ–¹å¼ä½¿ç”¨``å‘å¸ƒè€…''çš„å€¼&nbsp; </font><font style="vertical-align: inherit;">å¹¶å°†&nbsp; </font><font style="vertical-align: inherit;">å®ƒä»¬å˜æˆè¯¥å‡½æ•°çš„å‚æ•°å³å¯</font><font style="vertical-align: inherit;">ã€‚&nbsp; </font><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œæˆ‘ä»¬å°†ç»“åˆâ€œå‘å¸ƒè€…â€&nbsp; </font><font style="vertical-align: inherit;">&nbsp;å’Œ&nbsp; </font><font style="vertical-align: inherit;">ã€‚ä¸ºæ­¤ï¼Œ</font><font style="vertical-align: inherit;">æœ‰ä¸€ä¸ªè¿ç®—ç¬¦</font><font style="vertical-align: inherit;">ï¼š</font></font><code>$searchString</code><font style="vertical-align: inherit;"></font><code>AnyPublisher&lt;[Article],NewsError&gt;</code><font style="vertical-align: inherit;"></font><code>sink</code><font style="vertical-align: inherit;"></font><code>articles</code><font style="vertical-align: inherit;"></font><code>articlesError</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>NewsAPI</code><font style="vertical-align: inherit;"></font><code>fetchArticlesErr (from endpoint: Endpoint)</code><font style="vertical-align: inherit;"></font><code>AnyPublisher&lt;[Article], NewsError&gt;</code><font style="vertical-align: inherit;"></font><code>endpoint</code><font style="vertical-align: inherit;"></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"></font><code>$searchString</code><font style="vertical-align: inherit;"></font><code>endpoint</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"></font><code>$searchString</code><font style="vertical-align: inherit;"></font><code>Combine</code><font style="vertical-align: inherit;"></font><code>Publishers.CombineLatest</code><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/5i/lz/zh/5ilzzh6h5_aity8uvzd6eladg7q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç„¶åï¼Œæˆ‘ä»¬å¿…é¡»å°†é”™è¯¯ç±»å‹TYPEâ€œ publisherâ€è®¾ç½®ä¸ºæ‰€éœ€çš„å€¼&nbsp; </font></font><code>NewsError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oe/85/tt/oe85tthmperdfzf6yqiy5fmy2b4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨</font></font><code>fetchArticlesErr (from endpoint: Endpoint) </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»ä¸­</font><font style="vertical-align: inherit;">çš„å‡½æ•°&nbsp; </font></font><code>NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚åƒå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬å°†åœ¨æ“ä½œå‘˜çš„å¸®åŠ©ä¸‹æ‰§è¡Œæ­¤æ“ä½œ</font></font><code>flatMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font><font style="vertical-align: inherit;">è¯¥æ“ä½œå‘˜&nbsp; </font><font style="vertical-align: inherit;">å°†æ ¹æ®ä»å…ˆå‰â€œå‘å¸ƒè€…â€æ¥æ”¶åˆ°çš„æ•°æ®åˆ›å»ºä¸€ä¸ªæ–°çš„â€œå‘å¸ƒè€…â€ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bh/bu/kx/bhbukxfbhg2q9otl4rp-ksponec.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç„¶åï¼Œåœ¨â€œè®¢é˜…è€…â€çš„å¸®åŠ©ä¸‹â€œè®¢é˜…â€è¯¥æ–°æ”¶åˆ°çš„â€œå‘å¸ƒè€…â€ </font></font><code>sink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶ä½¿ç”¨å…¶é—­åŒ…</font></font><code>receiveCompletion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><code>receiveValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥ä¾¿ä»â€œå‘å¸ƒè€…â€æ¥æ”¶æ–‡ç« æ•°ç»„çš„å€¼&nbsp; </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–é”™è¯¯</font></font><code>articlesError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/x8/iy/cqx8iyvnwanwmv1vselki10ytv4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è‡ªç„¶åœ°ï¼Œæœ‰å¿…è¦è®°ä½æŸäº›å¤–éƒ¨</font></font><code>init()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å˜é‡ä¸­</font><font style="vertical-align: inherit;">çš„ç»“æœâ€œè®¢é˜…â€ </font></font><code>cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å°†æ— æ³•å¼‚æ­¥è·å–è¯¥å€¼</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–é”™è¯¯</font></font><code>articlesError </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®Œæˆå</font></font><code>init()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kh/wh/_a/khwh_ao98y7zy9cdpenc0nzvntq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†é”®å…¥æœç´¢å­—ç¬¦ä¸²æ—¶é™ä½å‘¼å«æœåŠ¡å™¨çš„æ•°é‡</font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬ä¸åº”è¯¥ä½¿ç”¨æœç´¢æ æœ¬èº«çš„â€œå‘è¡Œäººâ€&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½†å®ƒçš„ä¿®æ”¹ç‰ˆæœ¬</font></font><code>validString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fl/op/ss/flopssp-pjixvbtesqabmpp1h2s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â€œè®¢é˜…â€å¼‚æ­¥â€œå‘è¡Œäººâ€ï¼Œæˆ‘ä»¬åˆ›é€ äº†</font></font><code>init( )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†åœ¨ç±»å®ä¾‹çš„æ•´ä¸ªâ€œç”Ÿå‘½å‘¨æœŸâ€ä¸­éƒ½ä¿æŒä¸å˜&nbsp; </font></font><code>ArticlesViewModelErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nt/iw/k4/ntiwk4eju6aneam-1wlymjqyu9a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬è¿›è¡Œæ›´æ­£</font></font><code> UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥æ˜¾ç¤ºå…¶ä¸Šå¯èƒ½çš„æ•°æ®é‡‡æ ·é”™è¯¯ã€‚åœ¨</font></font><code>SwiftU</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iä¸­ï¼Œåœ¨ç°æœ‰ç»“æ„ä¸­ï¼Œæˆ‘ä»¬&nbsp; </font></font><code>ContentVieArticles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;ä½¿ç”¨å¦ä¸€ä¸ªåˆšè·å¾—çš„ç»“æ„&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåªæ˜¯åœ¨åç§°ä¸­æ·»åŠ å­—æ¯â€œ Errâ€ã€‚è¿™æ˜¯è¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚&nbsp;&nbsp;</font></font><code>ArticlesViewModelErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå®ƒâ€œæ•è·â€äº†ä»</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœåŠ¡å™¨é€‰æ‹©å’Œ/æˆ–è§£ç æ–‡ç« æ•°æ®çš„&nbsp; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">é”™è¯¯</font></a><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kw/vy/uv/kwvyuvbthb08tcalkcdpnucqfbq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¹¶ä¸”ï¼Œå¦‚æœå‡ºç°é”™è¯¯</font></font><code>Alert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ï¼Œ</font><font style="vertical-align: inherit;">æˆ‘ä»¬è¿˜æ·»åŠ äº†ç´§æ€¥æ¶ˆæ¯çš„æ˜¾ç¤º&nbsp; </font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¾‹å¦‚ï¼Œå¦‚æœé”™è¯¯çš„APIå¯†é’¥æ˜¯ï¼š</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">APIConstants</span> </span>{
    <span class="hljs-comment">// News  API key url: https://newsapi.org</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> apiKey: <span class="hljs-type">String</span> = <span class="hljs-string">"API_KEY"</span> <font></font>
    <font></font>
   .  .  .  .  .  .  .  .  .  .  .  .  .<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
......ç„¶åæˆ‘ä»¬ä¼šæ”¶åˆ°ä»¥ä¸‹æ¶ˆæ¯ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nb/ws/si/nbwssihj8ldlqqtcbti4tjwcv7o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœè¯·æ±‚çš„é™åˆ¶å·²ç»ç”¨å®Œï¼Œæˆ‘ä»¬ä¼šæ”¶åˆ°ä»¥ä¸‹æ¶ˆæ¯ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cz/de/ux/czdeuxquiscc-6qklciy5a0w3jm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å›åˆ°é€‰æ‹©æ–‡ç« çš„æ–¹æ³•&nbsp; </font></font><code>[Article] </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ‰å¯èƒ½å‡ºç°çš„é”™è¯¯&nbsp; </font></font><code>NewsError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬å¯ä»¥ç®€åŒ–å®ƒçš„ä»£ç ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨&nbsp; </font></font><code>Generic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;â€œå‡ºç‰ˆå•†â€ </font></font><code>AnyPublisher&lt;T,NewsError&gt;,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯¥&nbsp; </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥æ”¶</font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¿¡æ¯</font><font style="vertical-align: inherit;">å¼‚æ­¥</font><font style="vertical-align: inherit;">å’Œç›´æ¥åœ°åœ¨</font></font><code>Codable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡å‹ä¸­</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;å¹¶æŠ¥å‘Šé”™è¯¯&nbsp; </font></font><code>NewsError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lc/v7/m9/lcv7m9fmdbq20ih5phivj7hl1go.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¼—æ‰€å‘¨çŸ¥ï¼Œå¦‚æœè¯¥ä»£ç çš„æ¥æºæ•°æ®</font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–°é—»&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ±‡æ€»è€…</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;æˆ–å›½å®¶/åœ°åŒº&nbsp; </font><font style="vertical-align: inherit;">ï¼Œåˆ™å¾ˆå®¹æ˜“ä½¿ç”¨æ­¤ä»£ç æ¥è·å–ç‰¹å®šçš„â€œå‘å¸ƒè€…â€</font></font><code>country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ä¿¡æ¯æºï¼Œå¹¶ä¸”è¾“å‡ºéœ€è¦å„ç§æ¨¡å‹-ä¾‹å¦‚ï¼Œæ–‡ç« åˆ—è¡¨æˆ–ä¿¡æ¯æºï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ig/ff/4q/igff4qjqmxcxloixsshjbc36uxy.png"><br>
<br>
<img src="https://habrastorage.org/webt/bh/o_/7n/bho_7nbyxpl5yxth1ihweasjbec.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»“è®º</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬äº†è§£åˆ°</font></font><code>HTTP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å€ŸåŠ©</font></font><code> Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¶</font></font><code>URLSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œå‘å¸ƒè€…â€ </font></font><code>dataTaskPublisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font><font style="vertical-align: inherit;">æ¥æ»¡è¶³</font><font style="vertical-align: inherit;">è¯·æ±‚</font><font style="vertical-align: inherit;">æ˜¯å¤šä¹ˆå®¹æ˜“</font></font><code>Codable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚å¦‚æœæ‚¨ä¸éœ€è¦è·Ÿè¸ªé”™è¯¯ï¼Œåˆ™å¯</font></font><code> Generic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥ä¸ºâ€œå‘å¸ƒè€…â€ </font><font style="vertical-align: inherit;">è·å¾—ä¸€ä¸ªéå¸¸ç®€å•çš„</font><font style="vertical-align: inherit;">5è¡Œä»£ç ï¼Œè¯¥ä»£ç </font></font><code>AnyPublisher&lt;T, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ä»¥å¼‚æ­¥æ¥æ”¶</font></font><code>JSON </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¿¡æ¯å¹¶å°†å…¶</font><font style="vertical-align: inherit;">&nbsp;åŸºäºç»™å®šçš„&nbsp; </font><font style="vertical-align: inherit;">ä¿¡æ¯ç›´æ¥æ”¾ç½®åœ¨</font></font><code>Codable </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡å‹ä¸­</font><font style="vertical-align: inherit;">ï¼š</font><font style="vertical-align: inherit;">
å¦‚æœæºæ•°æ®</font><font style="vertical-align: inherit;">æ˜¯ï¼Œ</font><font style="vertical-align: inherit;">æ­¤ä»£ç éå¸¸å®¹æ˜“è·å¾—ç‰¹å®šçš„å‘å¸ƒè€…</font><font style="vertical-align: inherit;">ï¼Œä¾‹å¦‚</font><font style="vertical-align: inherit;">ï¼Œå¹¶ä¸”è¾“å‡ºéœ€è¦å„ç§æ¨¡å‹-ä¾‹å¦‚ï¼Œä¸€ç»„æ–‡ç« æˆ–ä¿¡æ¯æºåˆ—è¡¨ã€‚</font><font style="vertical-align: inherit;">
å¦‚æœæ‚¨éœ€è¦è€ƒè™‘é”™è¯¯ï¼Œé‚£ä¹ˆ</font><font style="vertical-align: inherit;">â€œå‘å¸ƒè€…â€ </font><font style="vertical-align: inherit;">çš„ä»£ç &nbsp; </font><font style="vertical-align: inherit;">å°†ç¨å¾®å¤æ‚ä¸€äº›ï¼Œä½†æ˜¯ä»ç„¶æ˜¯éå¸¸ç®€å•çš„ä»£ç ï¼Œæ²¡æœ‰ä»»ä½•å›è°ƒï¼š</font></font><code>T</code><font style="vertical-align: inherit;"></font><code>url</code><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/2i/r_/6w/2ir_6wkuga1u9jcxsmqijle480e.png"><br>
<br><font style="vertical-align: inherit;"></font><code>url </code><font style="vertical-align: inherit;"></font><code>Endpoint</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>Generic</code><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/fi/4d/ep/fi4depxf-hbngki4p5y3ktunbny.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šè¿‡ä½¿ç”¨ä½¿ç”¨çš„</font></font><code>HTTP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŸ¥è¯¢</font><font style="vertical-align: inherit;">æ‰§è¡ŒæŠ€æœ¯</font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªâ€œå‘å¸ƒè€…â€ </font></font><code>AnyPublisher&lt;UIImage?, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥å¼‚æ­¥é€‰æ‹©æ•°æ®å¹¶æ¥æ”¶UIImageå›¾åƒå—ï¼ŸåŸºäº</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚å›¾åƒ</font></font><code>ImageLoade</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹è½½å™¨rç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œä»¥é¿å…é‡å¤çš„å¼‚æ­¥æ•°æ®æ£€ç´¢ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯ä»¥åœ¨ObservableObjectç±»ä¸­éå¸¸å®¹æ˜“åœ°ä½¿è·å¾—çš„å„ç§â€œå‘å¸ƒè€…â€å·¥ä½œï¼Œè¿™äº›ç±»ä½¿ç”¨å®ƒä»¬çš„@Publishedå±æ€§æ¥æ§åˆ¶ä½¿ç”¨SwiftUIè®¾è®¡çš„UIã€‚è¿™äº›ç±»é€šå¸¸å…·æœ‰è§†å›¾æ¨¡å‹çš„ä½œç”¨ï¼Œå› ä¸ºå®ƒä»¬å…·æœ‰ä¸æ´»åŠ¨UIå…ƒç´ ï¼ˆTextFieldï¼ŒStepperï¼ŒPickeræ–‡æœ¬æ¡†ï¼ŒToggleå•é€‰æŒ‰é’®ç­‰ï¼‰ç›¸å¯¹åº”çš„æ‰€è°“â€œ inputâ€ @Publishedå±æ€§å’Œè¾“å‡º@Publishedå±æ€§ï¼Œå®ƒä¸»è¦ç”±è¢«åŠ¨UIå…ƒç´ ï¼ˆæ–‡æœ¬æ–‡æœ¬ï¼Œå›¾åƒå›¾åƒï¼ŒCircleï¼ˆï¼‰å‡ ä½•å½¢çŠ¶ï¼ŒRectangleï¼ˆï¼‰ç­‰ï¼‰ç»„æˆã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™ç§æƒ³æ³•è´¯ç©¿äº†</font><font style="vertical-align: inherit;">æœ¬æ–‡ä»‹ç»</font><font style="vertical-align: inherit;">çš„æ•´ä¸ª</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–°é—»èšåˆå™¨</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">åº”ç”¨ç¨‹åº</font></a><font style="vertical-align: inherit;">ã€‚ç›¸å½“æ™®éï¼Œåœ¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸º</font></font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TMDb </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">ç”µå½±</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">æ•°æ®åº“</font></a><font style="vertical-align: inherit;">å’Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacker News</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–°é—»èšåˆå™¨&nbsp; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">å¼€å‘åº”ç”¨ç¨‹åº</font></a><font style="vertical-align: inherit;">ï¼Œå°†åœ¨ä»¥åçš„æ–‡ç« ä¸­è¿›è¡Œè®¨è®ºã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ¬æ–‡çš„åº”ç”¨ç¨‹åºä»£ç åœ¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Githubä¸Š</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.æˆ‘æƒ³å¼•èµ·æ‚¨çš„æ³¨æ„çš„äº‹å®æ˜¯ï¼Œå¦‚æœæ‚¨å¯¹æœ¬æ–‡ä¸­ä»‹ç»çš„åº”ç”¨ç¨‹åºä½¿ç”¨æ¨¡æ‹Ÿå™¨ï¼Œåˆ™åº”è¯¥çŸ¥é“</font></font><code>NavigationLink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡æ‹Ÿå™¨ä¼šå‡ºç°é”™è¯¯ã€‚æ‚¨å¯ä»¥ä½¿ç”¨</font></font><code>NavigationLink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨æ¨¡æ‹Ÿå™¨ä¸Šåªæœ‰1æ¬¡ã€‚</font><font style="vertical-align: inherit;">é‚£äº›ã€‚</font><font style="vertical-align: inherit;">æ‚¨ä½¿ç”¨äº†é“¾æ¥ï¼Œç„¶åè¿”å›ï¼Œå•å‡»ç›¸åŒçš„é“¾æ¥-æ²¡æœ‰ä»»ä½•ååº”ã€‚</font><font style="vertical-align: inherit;">åœ¨ä½¿ç”¨å¦ä¸€ä¸ªé“¾æ¥ä¹‹å‰ï¼Œç¬¬ä¸€ä¸ªé“¾æ¥å°†ä¸èµ·ä½œç”¨ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªé“¾æ¥å°†å˜å¾—ä¸å¯è®¿é—®ã€‚</font><font style="vertical-align: inherit;">ä½†è¿™åªèƒ½åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè§‚å¯Ÿåˆ°ï¼Œåœ¨çœŸå®è®¾å¤‡ä¸Šä¸€åˆ‡æ­£å¸¸ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.ä¸€äº›ä¿¡æ¯æºä»ç„¶</font></font><code>http</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»£æ›¿</font></font><code>https</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¶æ–‡ç« çš„â€œå›¾ç‰‡â€ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨ç¡®å®æƒ³æŸ¥çœ‹è¿™äº›â€œå›¾ç‰‡â€ï¼Œä½†æ— æ³•æ§åˆ¶å…¶å¤–è§‚çš„æ¥æºï¼Œåˆ™å¿…é¡»é…ç½®å®‰å…¨ç³»ç»Ÿ</font></font><code>ATS ( App Transport Security)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥æ¥æ”¶è¿™äº›</font></font><code>http</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œå›¾ç‰‡â€ï¼Œä½†è¿™å½“ç„¶ä¸æ˜¯ä¸€ä¸ª</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¥½ä¸»æ„</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ›´å®‰å…¨çš„é€‰é¡¹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‚è€ƒæ–‡çŒ®ï¼š</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">    HTTP   Swift 5   Combine     SwiftUI.  1 .</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Modern Networking in Swift 5 with URLSession, Combine and Codable.</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">URLSession.DataTaskPublisherâ€™s failure type</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Combine: Asynchronous Programming with Swift</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Â«SwiftUI &amp; Combine:  Â»</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Introducing Combine â€” WWDC 2019 â€” Videos â€” Apple Developer. session 722</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">(  722 Â«  CombineÂ»   )</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Combine in Practice â€” WWDC 2019 â€” Videos â€” Apple Developer. session 721</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">(  721 Â«  CombineÂ»   )</a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN488428/index.html">æˆ‘ä»¬å¦‚ä½•é¢„æµ‹Yandexæœç´¢çš„æœªæ¥ï¼šä»é”™è¯¯ä¿®å¤åˆ°å‘ç°æŸ¥è¯¢</a></li>
<li><a href="../zh-CN488432/index.html">Snoop Projectæ˜¯Internetæƒ…æŠ¥ä¸å¯æ€è®®çš„å·¥å…·ï¼ŒRuNetç”¨æˆ·å·²ç»ç­‰å¾…äº†å¾ˆé•¿æ—¶é—´-å·²æä¾›</a></li>
<li><a href="../zh-CN488436/index.html">å¿«é€Ÿåˆ›å»ºå¼€æºChiptuneéŸ³ä¹</a></li>
<li><a href="../zh-CN488438/index.html">ç”µå½±éŸ³é¢‘æ ¼å¼çš„å†å²ï¼šå¾·å›½äººå¯¹å°å‹ç›’å¸¦çš„å›ç­”-å‘å±•çš„å‘½è¿å¦‚ä½•</a></li>
<li><a href="../zh-CN488440/index.html">æœ«æ—¥ä¹‹ç‹ï¼šä¸¤ä¸ªäººå¦‚ä½•åˆ›å»ºç‹‚çƒ­çš„å°„å‡»æ¸¸æˆå¹¶æ’¼åŠ¨äº†è§†é¢‘æ¸¸æˆäº§ä¸š</a></li>
<li><a href="../zh-CN488446/index.html">ä¿„ç½—æ–¯ä»ªå™¨ï¼šæˆ‘ä»¬å°†æ‚¨çš„è®¾è®¡æ”¾åœ¨æ‰‹æŒ‡ä¸Š</a></li>
<li><a href="../zh-CN488448/index.html">ä¹˜åITMO Universityï¼šæˆ‘ä»¬çš„å¤§å¸ˆç­ï¼Œè®²ä¹ ç­ï¼Œè®²åº§å’Œå­¦ç”Ÿæ¯”èµ›</a></li>
<li><a href="../zh-CN488450/index.html">æ–°ä¸€ä»£çš„ç½‘ä¸Šé“¶è¡Œå¦‚ä½•è¿ä½œ</a></li>
<li><a href="../zh-CN488456/index.html">é«˜æ ¡çš„é¡¹ç›®æ´»åŠ¨åŠå…¶å¸¦æ¥çš„å¥½å¤„</a></li>
<li><a href="../zh-CN488458/index.html">FunCodeåç«¯Java / KotlinæŒ‘æˆ˜ï¼šè·å¥–è€…å®£å¸ƒ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>