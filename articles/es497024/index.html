<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÇüèΩ üë©üèø‚Äçüíª üîÖ ¬øPor qu√© hiperconvergencia? Descripci√≥n general y pruebas de Cisco HyperFlex üíí ‚èèÔ∏è üçí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En TI, lo principal son tres letras
 La tarea de cualquier infraestructura de TI es proporcionar una plataforma confiable para los procesos comerciale...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>¬øPor qu√© hiperconvergencia? Descripci√≥n general y pruebas de Cisco HyperFlex</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/cti/blog/497024/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En TI, lo principal son tres letras</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La tarea de cualquier infraestructura de TI es proporcionar una plataforma confiable para los procesos comerciales de la empresa. Tradicionalmente se cree que la calidad de la infraestructura de tecnolog√≠a de la informaci√≥n se eval√∫a de acuerdo con tres par√°metros principales: accesibilidad, seguridad, confiabilidad. Sin embargo, la evaluaci√≥n de este triple no est√° relacionada de ninguna manera con el negocio y los ingresos / p√©rdidas directas de la empresa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tres letras principales rigen la TI. Si las letras "RUB" no est√°n al frente de la jerarqu√≠a de TI, entonces est√° construyendo su infraestructura de TI incorrectamente. Por supuesto, es dif√≠cil construir TI directamente, comenzando solo por los ingresos / gastos, por lo tanto, existe una jerarqu√≠a de "tres letras", desde las m√°s importantes hasta las m√°s privadas. SLA, RPO, RTO, GRC: todo esto es conocido por los expertos de la industria y se ha utilizado durante mucho tiempo en la construcci√≥n de infraestructuras. Desafortunadamente, no siempre se vinculan estos indicadores en una jerarqu√≠a de extremo a extremo.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oj/wm/6n/ojwm6n6_0mqymccxwojckh8q4fi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muchas empresas hoy en d√≠a est√°n construyendo infraestructura para el futuro utilizando la tecnolog√≠a de ayer en la arquitectura de ayer. </font><font style="vertical-align: inherit;">Y al mismo tiempo, el desarrollo acelerado de TI muestra que los servicios modernos est√°n cambiando fundamentalmente no solo los negocios sino tambi√©n la sociedad: las personas de la era digital est√°n acostumbradas al hecho de que unos segundos son suficientes para acceder a cualquier informaci√≥n. </font><font style="vertical-align: inherit;">La tecnolog√≠a de la informaci√≥n de una tecnolog√≠a incomprensible se ha convertido en un lugar com√∫n para las masas, como una hamburguesa o una cafeter√≠a. </font><font style="vertical-align: inherit;">Esto ha agregado tres letras extremadamente importantes a TI. </font><font style="vertical-align: inherit;">Estas cartas - TTM (Time to market) - el tiempo antes del lanzamiento de un servicio productivo en el mercado.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ot/k1/ns/otk1nsmpnwofr1v2bzlexp5a9j8.png"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sds</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por otro lado, un kraken surgi√≥ de las profundidades de la tecnolog√≠a, volcando la TI y el estilo de vida tradicionales. A medida que crec√≠a la potencia inform√°tica de los procesadores x86, los sistemas de almacenamiento de software se convirtieron en el primer tent√°culo. Los sistemas de almacenamiento cl√°sicos eran piezas de hierro muy espec√≠ficas llenas de "silicio personalizado", varios aceleradores de hardware patentados y software especializado. Y fue administrado por una persona especialmente entrenada que era pr√°cticamente adorada en la compa√±√≠a como sacerdote de un culto oscuro. Ampliar el sistema de almacenamiento de datos que operaba en la empresa fue un proyecto completo, con muchos c√°lculos y aprobaciones. Despu√©s de todo, ¬°es costoso!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El alto costo y la complejidad impulsaron la creaci√≥n de sistemas de almacenamiento de software sobre el hardware x86 habitual con un sistema operativo com√∫n de uso general: Windows, Linux, FreeBSD o Solaris. Solo quedaba software del complejo hardware personalizado, que funcionaba ni siquiera en el n√∫cleo, sino a nivel de usuario. Los primeros sistemas de software eran, por supuesto, bastante simples y de funcionalidad limitada, a menudo eran soluciones especializadas de nicho, pero el tiempo pas√≥. Y ahora, incluso los grandes proveedores de sistemas de almacenamiento han comenzado a abandonar las soluciones de hardware especializadas: TTM para tales sistemas ya no pod√≠a soportar la competencia, y el costo del error se volvi√≥ muy alto. De hecho, con raras excepciones, incluso los sistemas de almacenamiento cl√°sicos para 2020 se convirtieron en los servidores x86 m√°s comunes, solo con hermosos bozales de pl√°stico y un mont√≥n de estantes de disco.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El segundo tent√°culo del kraken que se aproxima es la aparici√≥n y la adopci√≥n masiva por parte del mercado de la tecnolog√≠a de memoria flash, que se ha convertido en un pilar concreto que rompe la espalda de un elefante.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El rendimiento de los discos magn√©ticos no ha cambiado en muchos a√±os y los procesadores de los controladores de almacenamiento se las arreglaron completamente con cientos de discos. </font><font style="vertical-align: inherit;">Pero, por desgracia, la cantidad tarde o temprano se convertir√° en calidad, y el sistema de almacenamiento ya est√° en un nivel promedio, sin mencionar el inicial, tiene un l√≠mite superior en el n√∫mero significativo de unidades flash. </font><font style="vertical-align: inherit;">Con una cierta cantidad (literalmente de diez discos), el rendimiento del sistema no deja de crecer, pero tambi√©n puede comenzar a disminuir debido a la necesidad de procesar un volumen cada vez mayor. </font><font style="vertical-align: inherit;">Despu√©s de todo, la potencia de procesamiento y el rendimiento de los controladores no cambian con el aumento de la capacidad. </font><font style="vertical-align: inherit;">La soluci√≥n, en teor√≠a, fue la aparici√≥n de sistemas escalables que pueden ensamblar muchos estantes independientes con discos y recursos de procesador en un solo cl√∫ster que se ve desde el exterior como un √∫nico sistema de almacenamiento de m√∫ltiples controladores. </font><font style="vertical-align: inherit;">Solo quedaba un paso.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hiperconvergencia</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El paso m√°s obvio hacia el futuro fue la unificaci√≥n de puntos de procesamiento y almacenamiento de datos previamente dispares. En otras palabras, ¬øpor qu√© no implementar almacenamiento distribuido no en servidores separados, sino directamente en los hosts de virtualizaci√≥n, rechazando as√≠ una red de almacenamiento especial y hardware dedicado, y combinando as√≠ funciones? El kraken se despert√≥. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero d√©jame decirte, ya ves, porque la combinaci√≥n es la convergencia. ¬øDe d√≥nde vino este est√∫pido prefijo hiper?</font></font><br>
<blockquote>        .        +  + .    .    ,      ‚Äú ‚Äù.<br>
‚Ä¶<br>
 ,  ,            ,        .       ‚Äî       SDS.<br>
<br>
:<br>
<br>
<ul>
<li>  ‚Äî , ,       ,   /.    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sistema convergente: todo de una fuente, un soporte, un n√∫mero de socio. </font><font style="vertical-align: inherit;">No debe confundirse con el autoensamblaje de un proveedor.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y resulta que el t√©rmino para nuestra arquitectura convergente ya est√° tomado. </font><font style="vertical-align: inherit;">Exactamente la misma situaci√≥n que con el supervisor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sistema hiperconvergente: un sistema convergente con arquitectura convergente.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las definiciones est√°n tomadas del art√≠culo " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teor√≠a general y arqueolog√≠a de la virtualizaci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", en el que tom√© parte animada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© da el enfoque hiperconvergente en la aplicaci√≥n a las tres letras mencionadas?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comience con un volumen m√≠nimo (y un costo m√≠nimo)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La capacidad de almacenamiento crece con la potencia inform√°tica</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cada nodo del sistema es su controlador, y se elimina el problema del "techo de cristal" (los discos pueden, pero el controlador ya no existe)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La gesti√≥n del almacenamiento se simplific√≥ dram√°ticamente</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para el √∫ltimo p√°rrafo, a los sistemas hiperconvergentes les disgustan mucho los administradores de almacenamiento en modo antiguo que se utilizan para administrar colas en puertos Fibre Channel. </font><font style="vertical-align: inherit;">El espacio se asigna con solo unos pocos clics del mouse desde la consola de administraci√≥n de infraestructura virtual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En otras palabras, solo las nubes son m√°s r√°pidas que los sistemas hiperconvergentes al lanzar un producto, pero las nubes no son adecuadas para todos y / o no siempre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si usted es un administrador t√©cnico y ley√≥ hasta aqu√≠, al√©grate, las palabras generales han terminado y ahora te contar√© sobre mi visi√≥n personal del sistema Cisco Hyperflex, que obtuve en las patas tenaces para realizar varias pruebas en √©l.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cisco Hyperflex</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øPor qu√© Cisco?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cisco es conocido principalmente como el proveedor dominante en el mercado de equipos de red, pero al mismo tiempo est√° ampliamente presente en otros segmentos del mercado de centros de datos, ofreciendo soluciones de servidor e hiperconvergentes, as√≠ como sistemas de automatizaci√≥n y control. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sorprendentemente, para 2020, todav√≠a hay personas: ‚Äú¬øServidores Cisco? ¬øY de qui√©n se los quita?</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cisco comenz√≥ a tratar con servidores ya en 2009, eligiendo el camino de las soluciones blade de crecimiento activo en ese momento. La idea de Cisco era implementar el enfoque de calculadoras an√≥nimas. El resultado fue un sistema UCS (Unified Computing System) que consta de dos conmutadores especializados (se llamaron Fabric Interconnect) y de 1 a 20 chasis (8 blades de tama√±o medio) o hasta 160 servidores. Al mismo tiempo, el chasis se volvi√≥ generalmente est√∫pido con una pieza de hierro con alimentaci√≥n, toda la l√≥gica y la conmutaci√≥n se realizan en Fabric Interconnect; El chasis es solo una forma de alojar servidores y conectarlos al sistema. Fabric Interconnect es totalmente responsable de todas las interacciones del servidor con el mundo exterior: Ethernet, FC y administraci√≥n. Parecer√≠a que los blades y blades, lo que hay all√≠, excepto la conmutaci√≥n externa, y no como todos los dem√°s en el chasis.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un momento clave en la implementaci√≥n de esas mismas "calculadoras an√≥nimas". Como parte del concepto Cisco UCS, los servidores no tienen otra personalidad que un n√∫mero de serie. Ni MAC, ni WWN, ni nada m√°s. El sistema de administraci√≥n UCS con tecnolog√≠a de Fabric Interconnect se basa en perfiles y plantillas de servidor. Despu√©s de conectar un conjunto de servidores en el chasis, se les debe asignar un perfil apropiado, dentro del cual se configuran todas las direcciones e identificadores. Por supuesto, si solo tienes una docena de servidores, entonces el juego no valdr√≠a la pena. Pero cuando hay al menos dos, o incluso tres docenas, es una gran ventaja. Es f√°cil y r√°pido migrar configuraciones o, lo que es m√°s importante, replicar configuraciones de servidor en la cantidad correcta, aplicar los cambios inmediatamente a una gran cantidad de servidores,esencialmente administrando un conjunto de servidores (por ejemplo, una granja de virtualizaci√≥n) como una sola entidad. El enfoque propuesto dentro del sistema UCS permite, con el enfoque correcto, simplificar seriamente la vida de los administradores, aumentar la flexibilidad y reducir significativamente los riesgos, por lo que los blades UCS literalmente en 2-3 a√±os se han convertido en la plataforma blade m√°s vendida en el Hemisferio Occidental, y hoy son globalmente Una de las dos plataformas dominantes, junto con HPE.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R√°pidamente se hizo evidente que el mismo enfoque basado en una f√°brica universal con gesti√≥n integrada basada en pol√≠ticas y plantillas es totalmente demandado y se aplica no solo a los blades, sino tambi√©n a los servidores en rack. Y en este sentido, los servidores de montaje en bastidor de Cisco conectados a Fabric Interconnect obtienen los mismos beneficios que hacen que los blades sean tan populares. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoy hablar√© sobre HyperFlex, una soluci√≥n hiperconvergente de Cisco construida en servidores de montaje en rack conectados a Fabric Interconnect. Lo que hace que HyperFlex sea interesante y que valga la pena considerar en la revisi√≥n:</font></font><br>
<br>
<ul>
<li>  Cisco   ,  , ¬´¬ª ‚Äì        ,      HyperFlex;     , ,   ,         HyperFlex    ;</li>
<li>   ‚Äì          ;  HyperFlex  ,    ,      ;          ,       .</li>
<li> ¬´  ¬ª ‚Äî     ¬´ ¬ª,       ,       ;</li>
<li>           Fabric Interconnect    Cisco   -,     SAN ,       native FC;</li>
<li>    ‚Äú‚Äù ‚Äì  ,  ,     ;</li>
<li>   Cisco      ,   ,            ,      ;</li>
<li>  ,      , Cisco        HCI,      , HyperFlex      ,   ,   .</li>
</ul><br>
<h3> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HyperFlex es un verdadero sistema hiperconvergente con m√°quinas virtuales dedicadas al controlador. </font><font style="vertical-align: inherit;">Perm√≠tame recordarle que la principal ventaja de tal arquitectura es su portabilidad potencial para diferentes hipervisores. </font><font style="vertical-align: inherit;">Hoy, Cisco ha implementado el soporte para VMware ESXi y Microsoft Hyper-V, pero es posible que una de las opciones de KVM aparezca a medida que su popularidad crezca en el segmento corporativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere el mecanismo de trabajo en el ejemplo de ESXi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los dispositivos que utilizan la tecnolog√≠a VM_DIRECT_PATH (disco de cach√© y discos de nivel de almacenamiento) se lanzan directamente a la VM del controlador (en adelante CVM). </font><font style="vertical-align: inherit;">Por lo tanto, excluimos el efecto de la pila de disco del hipervisor en el rendimiento. </font><font style="vertical-align: inherit;">Se instalan paquetes VIB adicionales en el propio hipervisor:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO Visor: proporciona el punto de montaje para el almac√©n de datos NFS para el hipervisor</font></font></li>
<li>VAAI:   VMware  API  ¬´ ¬ª </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los bloques de disco virtual se distribuyen uniformemente entre todos los hosts en un cl√∫ster con relativamente poca granularidad. Cuando la VM en el host realiza algunas operaciones de disco, a trav√©s de la pila de discos del hipervisor, la operaci√≥n va al almac√©n de datos, luego a IO Visor y luego se convierte en el CVM responsable de estos bloques. En este caso, CVM puede ubicarse en cualquier host del cl√∫ster. Dados los recursos muy limitados de IO Visor, por supuesto no hay tablas de metadatos y la elecci√≥n se determina matem√°ticamente. Luego, el CVM al que lleg√≥ la solicitud la procesa. En el caso de la lectura, env√≠a datos desde uno de los niveles de cach√© (RAM, cach√© de escritura, cach√© de lectura) o desde los discos de su host. En el caso de la grabaci√≥n, escribe en el diario local y duplica la operaci√≥n para uno (RF2) o dos (RF3) CVM.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k_/hq/eq/k_hqeqytlifhbevdrf8r7mk_rv0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quiz√°s esto sea suficiente para comprender el principio del trabajo dentro del marco de esta publicaci√≥n, de lo contrario tomar√© el pan de los entrenadores de Cisco y me avergonzar√©. </font><font style="vertical-align: inherit;">En realidad no, pero s√≠ lo suficiente.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pregunta sobre pruebas sint√©ticas</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Navegador, electrodom√©sticos! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 36! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- ¬øQu√© es 36? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- ¬øQu√© pasa con los electrodom√©sticos? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algo as√≠ parece hoy la mayor√≠a de las pruebas sint√©ticas de los sistemas de almacenamiento. ¬øPorqu√© es eso? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasta hace relativamente poco, la mayor√≠a de los sistemas de almacenamiento eran planos con acceso uniforme. ¬øQu√© significa esto? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El espacio total disponible en el disco se recopil√≥ de discos con las mismas caracter√≠sticas. Por ejemplo, 300 unidades de 15k. Y el rendimiento fue el mismo en todo el espacio. Con el advenimiento de la tecnolog√≠a de almacenamiento en niveles, los sistemas de almacenamiento se han vuelto no planos: el rendimiento var√≠a dentro de un solo espacio de disco. Y no solo es diferente, sino tambi√©n impredecible, dependiendo de los algoritmos y capacidades de un modelo de almacenamiento en particular.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y todo no ser√≠a tan interesante si no aparecieran sistemas hiperconvergentes con localizaci√≥n de datos. </font><font style="vertical-align: inherit;">Adem√°s de la irregularidad del espacio del disco en s√≠ (tirings, cach√©s flash), tambi√©n hay un acceso desigual al mismo, dependiendo de si una de las copias de datos se encuentra en los discos locales del nodo o debe accederse a trav√©s de la red. </font><font style="vertical-align: inherit;">Todo esto lleva al hecho de que el n√∫mero de pruebas sint√©ticas puede ser absolutamente cualquiera, y no hablar de nada pr√°cticamente significativo. </font><font style="vertical-align: inherit;">Por ejemplo, el consumo de combustible de un autom√≥vil seg√∫n un folleto publicitario que nunca se puede lograr en la vida real.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pregunta sobre dimensionamiento</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El otro lado de los n√∫meros de prueba sint√©ticos fue dimensionar n√∫meros y especificaciones debajo del teclado de preventa. Las preventas en este caso se dividen en dos categor√≠as: algunas simplemente introducen su TK en el configurador del proveedor, y la segunda lo tomar√°n ellos mismos, porque entienden c√≥mo funciona. Pero con el segundo tendr√° que considerar en detalle lo que escribi√≥ en su TK. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como saben, sin un claro TK, el resultado de HZ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nk/li/uq/nkliuqyn2iv0ogsigw-nd_m94ky.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por experiencia pr√°ctica: cuando dimension√© un sistema hiperconvergente bastante pesado en una competencia con uno de los clientes, personalmente, despu√©s del piloto, tom√© los indicadores de carga del sistema y los compar√© con lo que estaba escrito en los TOR. Result√≥ como en una broma:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Rabinovich, ¬øes cierto que ganaste un mill√≥n en la loter√≠a? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - ¬øQui√©n te dijo eso? </font><font style="vertical-align: inherit;">No un mill√≥n, sino diez rublos, no en la loter√≠a, sino de preferencia, y no gan√≥, sino que perdi√≥.</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En otras palabras, la situaci√≥n cl√°sica de GIGO es Garbage In Garbage Out - Garbage in = Garbage in. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tama√±o pr√°ctico aplicable para la hiperconvergencia casi garantiza que sea de dos tipos: llevarnos con un margen, o durante mucho tiempo manejaremos un piloto y tomaremos indicadores.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay un punto m√°s con el dimensionamiento y la evaluaci√≥n de las especificaciones. Los diferentes sistemas se construyen de manera diferente y funcionan de manera diferente con los discos; sus controladores interact√∫an de manera diferente. Por lo tanto, es pr√°cticamente in√∫til comparar "cabeza a cabeza" de acuerdo con las especificaciones, el n√∫mero y el volumen de los discos. Tiene alg√∫n tipo de conocimientos tradicionales, dentro del cual comprende el nivel de carga. Y luego hay una cierta cantidad de cajas de cambios, dentro de las cuales se le ofrecen varios sistemas que cumplen con los requisitos de rendimiento y confiabilidad. ¬øCu√°l es la diferencia fundamental, cu√°nto cuesta un disco y qu√© tipo de sistema 1, y que en el sistema 2 hay m√°s / menos de ellos si ambos satisfacen con √©xito la tarea?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que el rendimiento a menudo est√° determinado por los controladores que viven en los mismos hosts que las m√°quinas virtuales, para algunos tipos de cargas puede flotar de manera significativa simplemente porque los procesadores con diferentes frecuencias se colocan en diferentes grupos, todas las dem√°s cosas son iguales. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En otras palabras, incluso el arquitecto archimago de preventa m√°s experimentado no le dir√° la especificaci√≥n m√°s precisamente de lo que formula los requisitos, y m√°s precisamente, que "bueno, en alg√∫n lugar SAM-VOSEM" sin proyectos piloto.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/79/su/eq/79sueqtcnez6nz-kop4mp1i4qlq.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acerca de las instant√°neas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HyperFlex puede hacer sus instant√°neas nativas de m√°quinas virtuales utilizando la tecnolog√≠a Redirect-on-Write. Y aqu√≠ es necesario detenerse por separado para considerar diferentes tecnolog√≠as de instant√°neas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, hab√≠a instant√°neas del tipo Copiar en escritura (CoW), y las instant√°neas nativas de VMware vSphere se pueden tomar como un ejemplo cl√°sico. El principio de funcionamiento es el mismo con vmdk sobre VMFS o NFS, que con sistemas de archivos nativos como VSAN. Despu√©s de crear una instant√°nea CoW, los datos originales (bloques o archivos vmdk) se congelan, y cuando intenta escribir en bloques congelados, se crea una copia y los datos se escriben en un nuevo bloque / archivo (archivo delta para vmdk). Como resultado, a medida que crece el √°rbol de instant√°neas, aumenta el n√∫mero de accesos de disco "espurios" que no tienen ning√∫n significado productivo, y</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el rendimiento cae / los retrasos crecen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego se inventaron las instant√°neas Redirect-on-Write (RoW), en las que en lugar de crear copias de bloques con datos, se crea una copia de metadatos, y el registro simplemente contin√∫a sin demoras y lecturas y comprobaciones adicionales. Con la implementaci√≥n correcta de las instant√°neas RoW, el efecto en el sistema de disco es casi nulo. El segundo efecto de trabajar con metadatos en lugar de los datos en vivo no es solo la creaci√≥n instant√°nea de instant√°neas, sino tambi√©n los clones de VM, que inmediatamente despu√©s de la creaci√≥n no ocupan espacio en absoluto (no consideramos la sobrecarga del sistema para los archivos de servicio de VM).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y el tercer punto clave que distingue radicalmente las instant√°neas de RoW de CoW para sistemas productivos es la eliminaci√≥n instant√°nea de instant√°neas. Parece que esto es as√≠? Sin embargo, debe recordar c√≥mo funcionan las instant√°neas de CoW y que eliminar una instant√°nea no es realmente una eliminaci√≥n delta, sino su confirmaci√≥n. Y aqu√≠, el momento de su confirmaci√≥n depende en gran medida del tama√±o del delta acumulado y del rendimiento del sistema de disco. Las instant√°neas RoW se confirman instant√°neamente simplemente porque no importa cu√°ntos terabytes de diferencia se acumulen, eliminar (confirmar) las instant√°neas RoW es una actualizaci√≥n de la tabla de metadatos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y aqu√≠ aparece una aplicaci√≥n interesante de instant√°neas RoW: baje el RPO a valores de decenas de minutos. Hacer copias de seguridad cada 30 minutos es casi imposible en el caso general, y en la mayor√≠a de los casos se realizan una vez al d√≠a, lo que da un RPO de 24 horas. Pero al mismo tiempo, solo podemos hacer instant√°neas de RoW en un horario, llevando el RPO a 15-30 minutos, y almacenarlas durante un d√≠a o dos. No hay penalizaci√≥n para el rendimiento, gastando solo capacidad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero hay algunos matices.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para el correcto funcionamiento de las instant√°neas nativas y la integraci√≥n con VMware, HyperFlex requiere una instant√°nea oficial llamada Sentinel. La instant√°nea de Sentinel se crea autom√°ticamente cuando crea una instant√°nea para una VM determinada a trav√©s de HXConnect, y no debe eliminarla, no debe "volver" a ella, solo tiene que soportar el hecho de que en la interfaz en la lista de instant√°neas esta es la primera instant√°nea de servicio de Sentinel. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6v/xv/fk/6vxvfkz6yuhzkylorocntklep1w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las instant√°neas HyperFlex pueden ejecutarse en modo consistente con el bloqueo o en modo consistente con la aplicaci√≥n. El segundo tipo implica "b√∫feres de vaciado" dentro de la VM, requiere VMTools y se inicia si la casilla de verificaci√≥n "Quiesce" est√° marcada en el men√∫ de instant√°neas de HXConnect.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s de las instant√°neas HyperFlex, nadie proh√≠be el uso de instant√°neas VMware "nativas". </font><font style="vertical-align: inherit;">Vale la pena que una m√°quina virtual espec√≠fica determine qu√© instant√°neas usar√° y, en el futuro, se centre en esta tecnolog√≠a, "no molestando" diferentes instant√°neas para una VM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como parte de la prueba, trat√© de crear instant√°neas y verificar su FIO. </font><font style="vertical-align: inherit;">Y, sin embargo, s√≠, puedo confirmar que las instant√°neas son realmente ROW, no afectan el rendimiento. </font><font style="vertical-align: inherit;">Las instant√°neas se crean realmente r√°pidamente (unos segundos dependiendo del perfil de carga y el tama√±o del conjunto de datos), de acuerdo con los resultados, puedo dar la siguiente recomendaci√≥n: si su carga tiene muchas operaciones de escritura aleatoria, debe comenzar a crear una instant√°nea desde la interfaz HXConnect, con la marca de verificaci√≥n "Quiesce" y con una marca preliminar la presencia de una instant√°nea de Sentinel.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pruebas</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plataforma de prueba</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La siguiente plataforma cay√≥ en patas tenaces:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 x C220 M4 (2630v4 10c x 2.20 GHz, 256, 800 + 6 * 960)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vSphere 6.7</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plataforma de datos HX 4.0.2</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prueba de parche claro</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© tipo de prueba sin CrystalDisk? As√≠ es, esto no puede ser, ¬°los chicos normales siempre comienzan un disco cristalizado! Bueno, si es necesario, entonces es necesario. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hp/tl/x5/hptlx5eb-ojjdbwet5l87h6wjx4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para el disco de cristal, se cre√≥ una m√°quina virtual especialmente creada con 2 vCPU de 4 GB y Windows 7 a bordo. Ah, y me cans√© de ponerle parches, ¬°te lo dir√©! La prueba se llev√≥ a cabo en las mejores tradiciones de las mejores casas de Londres y Par√≠s, es decir, se agreg√≥ un solo disco virtual siguiente-siguiente-final sin pensarlo y se lanz√≥ la prueba. S√≠, y por cierto, CrystalDiskMark en s√≠ no participa en las pruebas, es solo una interfaz, pero carga directamente el sistema de disco con el conocido paquete DiskSpd incluido en el kit. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ns/wt/i9/nswti9u6hmne-srf37nniqjevzq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo que me sorprendi√≥ literalmente: por alguna raz√≥n, todos omitieron la elecci√≥n de unidades en la esquina superior derecha. Y alle op!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kg/3y/th/kg3ythef08dpqq3zcsrr20wmq8w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Escucha, sinceramente, ¬°no esperaba 75 mil IOPS y m√°s de 1 gigabyte por segundo de la microm√°quina en el modo siguiente-siguiente-final! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para decirlo suavemente, no todas las empresas en Rusia tienen cargas que exceden estos indicadores en total. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se llevaron a cabo m√°s pruebas con VMware HCI Bench y Nutanix XRay, como "ideol√≥gicamente hostiles" a HyperFlex, y en consecuencia, se esperaba que no tom√°ramos prisioneros. Los n√∫meros resultaron ser extremadamente cercanos, por lo que los resultados del paquete XRay se tomaron como base simplemente porque tiene un sistema de informes m√°s conveniente y plantillas de carga listas para usar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para aquellos que no conf√≠an en nadie y desean un control total sobre el proceso, les recuerdo mi art√≠culo sobre c√≥mo construir su propio sistema para generar la carga en una plataforma hiperconvergente: "</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pruebas de rendimiento de los sistemas giperkonvergentnyh y SDS con sus propias manos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Achtung! </font><font style="vertical-align: inherit;">Uwaga! </font><font style="vertical-align: inherit;">Pozor!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos los resultados adicionales y sus interpretaciones son la opini√≥n del autor del art√≠culo, y se dan por s√≠ mismos en el marco del estudio del sistema. </font><font style="vertical-align: inherit;">La mayor√≠a de las pruebas son sint√©ticas y solo son aplicables para comprender los indicadores de l√≠mite en casos extremos y degenerados, que nunca alcanzar√° en la vida real.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microbench FourCorners</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El microtest de 4 lados est√° dise√±ado para evaluar el sistema "r√°pidamente" para obtener el m√°ximo rendimiento te√≥rico y el m√°ximo rendimiento de los controladores. La aplicaci√≥n pr√°ctica para esta prueba es verificar el sistema inmediatamente despu√©s del lanzamiento en busca de errores de configuraci√≥n y entorno, especialmente errores de red. Aquellos. si ejecuta regularmente tales sistemas, entonces solo sabe qu√© n√∫meros debe esperar "si todo est√° bien". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/wl/70/imwl70bqxpwhlum10vhlhm1kbk0.png"><br>
<br>
<img src="https://habrastorage.org/webt/61/xf/ss/61xfss1sc92seaez55-aq_shz2i.png"><br>
<br>
<img src="https://habrastorage.org/webt/4x/38/l7/4x38l7clygg4y5lavoks-lecrfs.png"><br>
<br>
<img src="https://habrastorage.org/webt/si/he/kg/sihekgnrrioansimgwwetryowme.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√∫meros finales: 280k / 174k IOPS, 3.77 / 1.72 GBps (lectura / escritura) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo se comportaron nuestros controladores?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-_/co/qv/-_coqvha1rwj6l78ng3fl_kowoi.png"><br>
<br>
<img src="https://habrastorage.org/webt/xu/hd/8s/xuhd8szlg-hrwoyeasjl-nqybbm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De lo que se puede observar que el consumo total de recursos para 4 controladores y 4 cargas de VM fue de 49 n√∫cleos de 2.2. Seg√∫n las estad√≠sticas de VMware, la utilizaci√≥n de CPU de los controladores fue de hasta el 80%, es decir, de hecho, el rendimiento estaba limitado por el rendimiento de los controladores, y espec√≠ficamente de los procesadores. La velocidad de las operaciones secuenciales se basaba espec√≠ficamente en la velocidad de la red 10G. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intentemoslo de nuevo. El rendimiento m√°ximo en un peque√±o cl√∫ster de 4 nodos con no los procesadores m√°s r√°pidos de 2.2GHz es de casi 300 mil IOPS a 4U de altura. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La conversaci√≥n "aqu√≠ tenemos 10, 20 o incluso 40% m√°s / menos" carece pr√°cticamente de sentido debido al orden de los n√∫meros. Lo mismo que comenzar a medir "y puedo tener un auto 240, tengo 280" a pesar de que el l√≠mite es 80.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
280k / 4 nodos proporciona un rendimiento m√°ximo de 70k / nodo, que por ejemplo excede los n√∫meros de la calculadora VMware VSAN, que supone que el nodo AF no emite m√°s de 46k por grupo de discos. </font><font style="vertical-align: inherit;">En nuestro caso, aqu√≠ en la terminolog√≠a de VMware solo hay un grupo de discos, que en realidad se ejecuta en x1.8.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efecto del tama√±o del bloque del almac√©n de datos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al crear un almac√©n de datos HyperFlex, puede elegir el tama√±o del bloque de datos: 4k u 8k. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øA qu√© afectar√°? </font><font style="vertical-align: inherit;">Ejecute la misma prueba cuadrangular. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/70/rc/vf/70rcvfpf8-l_zewvlxiawo6lgmm.png"><br>
<br>
<img src="https://habrastorage.org/webt/gd/s6/ys/gds6ysghq6zmspmh1aiprlngtni.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si la imagen es casi id√©ntica a la lectura, entonces el registro por el contrario importa. </font><font style="vertical-align: inherit;">La prueba cuadrangular utiliza una carga de 8k. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√∫meros totales: 280k / 280k, 172-158k / 200-180k (4k 8k). </font><font style="vertical-align: inherit;">Cuando el tama√±o del bloque coincide, se obtiene + 15% del rendimiento de escritura. </font><font style="vertical-align: inherit;">Si espera una cantidad significativa de grabaci√≥n con un bloque peque√±o (4k) en la carga, cree un almac√©n de datos para esta carga en particular con un bloque de 4k, de lo contrario use 8k.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simulador OLTP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una imagen mucho m√°s cercana a la realidad viene dada por otra prueba. </font><font style="vertical-align: inherit;">Como parte de esto, se lanzan dos generadores con un perfil cercano a un DBMS transaccional y un nivel de carga de 6000 + 400 IOPS. </font><font style="vertical-align: inherit;">Aqu√≠, se mide el retraso, que debe permanecer en un nivel bajo estable. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/aw/tb/ty/awtbtyfcnnow6yydbgr28dpgiqc.png"><br>
<br>
<img src="https://habrastorage.org/webt/o9/kd/m1/o9kdm1zv2lksnqi1g7qk8o5gl7m.png"><br>
<br>
<img src="https://habrastorage.org/webt/cp/3n/oh/cp3noh9aqrp7y0kfrdgehpd19xe.png"><br>
<br>
<img src="https://habrastorage.org/webt/rn/qh/0j/rnqh0jmup291dks_4ir4eg1ssu8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El retraso para la carga de VM fue de 1.07 / 1.08 ms. </font><font style="vertical-align: inherit;">En general, un gran resultado, ¬°pero agreguemos algo de calor!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Colocaci√≥n de la base de datos: alta intensidad</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C√≥mo se comportar√° la base transaccional, dependiendo de los retrasos, si de repente se forma un vecino ruidoso consecutivo. </font><font style="vertical-align: inherit;">Bueno, muy ruidoso. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0s/wg/1w/0swg1wykmap5tqivoahd3qymfbe.png"><br>
<br>
<img src="https://habrastorage.org/webt/kr/uy/xh/kruyxhmfiswvbc2tue7whwpwu60.png"><br>
<br>
<img src="https://habrastorage.org/webt/jw/3l/ib/jw3libpbrez473tlexzbilmepyy.png"><br>
<br>
<img src="https://habrastorage.org/webt/p1/4g/2j/p14g2jumznxoh8oyw2y1f3slyge.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, la base OLTP en el nodo 1 genera 4200 IOPS con un retraso de 0.85 ms. </font><font style="vertical-align: inherit;">¬øQu√© sucede despu√©s de que un sistema DSS de repente comienza a consumir recursos en operaciones secuenciales? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dos generadores en los nodos 2 y 3 cargan la plataforma a 1.18 / 1.08 GBps, respectivamente, esos 2.26 GBps en total. </font><font style="vertical-align: inherit;">El retraso en OLTP, por supuesto, crece y se vuelve menos plano, pero el valor promedio sigue siendo de 1.85 ms, y la base recibe sus 4200 IOPS sin ning√∫n problema.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impacto de la instant√°nea</font></font></h3><br>
<img src="https://habrastorage.org/webt/n0/eo/w8/n0eow8pfcfna7kqwhrt0xblqq8g.png"><br>
<br>
<img src="https://habrastorage.org/webt/-a/0h/dl/-a0hdlvysga1zwnpwtyvb1zq1_c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El sistema toma secuencialmente varias instant√°neas una vez por hora en una base OLTP. </font><font style="vertical-align: inherit;">No hay nada sorprendente en el cronograma y, adem√°s, esto generalmente es un indicador de c√≥mo funcionan las instant√°neas cl√°sicas de VMware, ya que Nutanix XRay no sabe c√≥mo trabajar con instant√°neas nativas, excepto las suyas. </font><font style="vertical-align: inherit;">No necesita usar instant√°neas de vSphere de forma regular, porque no todos los yogures son igualmente √∫tiles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las instant√°neas nativas de HyperFlex funcionan mucho mejor, √∫selas y su cabello se volver√° suave y sedoso.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ingesti√≥n de grandes datos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo HyperFlex digiere una gran cantidad de datos cargados secuencialmente? </font><font style="vertical-align: inherit;">Bueno, digamos 1 TB. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0f/ll/m7/0fllm7dze4walp1c2xff9msn-wg.png"><br>
<br>
<img src="https://habrastorage.org/webt/vx/go/ig/vxgoigfhqqpqguabodmsmklgmma.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La prueba tom√≥ 27 minutos, incluida la clonaci√≥n, el ajuste y el arranque de los generadores.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escalabilidad de rendimiento</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, cargue gradualmente todo el cl√∫ster y observe los n√∫meros constantes. Para comenzar con la lectura aleatoria, luego la escritura. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iu/kb/jy/iukbjyoms8btipiqv8ckw7-oikg.png"><br>
<br>
<img src="https://habrastorage.org/webt/zw/zj/gy/zwzjgyqeu9wn4ofiatztt5umy70.png"><br>
<br>
<img src="https://habrastorage.org/webt/zd/eu/r2/zdeur21emet_sylypa1p7btvg9c.png"><br>
<br>
<img src="https://habrastorage.org/webt/_u/z1/_p/_uz1_p1ht5ll4bihnaeuxj_znoa.png"><br>
<br>
<img src="https://habrastorage.org/webt/-c/ms/o4/-cmso46htkcgb6ixeetyowyninq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estamos viendo una imagen estable con una disminuci√≥n gradual en el rendimiento de la carga de la m√°quina de 78k a 55-57k IOPS, con estantes lisos. Al mismo tiempo, hay un aumento constante en el rendimiento general de 78 a 220k IOPS. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/to/cj/w0/tocjw0zga3ug1recbqb8oa133sq.png"><br>
<br>
<img src="https://habrastorage.org/webt/3z/nt/df/3zntdf3yigfx_acxr0ra6n5nwfa.png"><br>
<br>
<img src="https://habrastorage.org/webt/od/4x/jh/od4xjhnjcvxthkezbcrncc33c5a.png"><br>
<br>
<img src="https://habrastorage.org/webt/mu/zj/mz/muzjmzjtko49unkx1iwzzm_zzo0.png"><br>
<br>
<img src="https://habrastorage.org/webt/v4/wr/0j/v4wr0jbbzvpfz94majmfgisny1m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La grabaci√≥n es un poco menos suave, pero sigue siendo estantes estables de 64k a 19-21k por autom√≥vil. Al mismo tiempo, la carga en los controladores es mucho menor. Si durante la lectura el nivel de carga total del procesador aument√≥ de 44 a 109, entonces al grabar de 57 a 73 GHz.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ puede observar el ejemplo m√°s simple y obvio de las caracter√≠sticas de los sistemas hiperconvergentes: el √∫nico consumidor simplemente no puede utilizar por completo todos los recursos del sistema, y ‚Äã‚Äãcuando se agrega la carga, no hay una ca√≠da significativa en el rendimiento. </font><font style="vertical-align: inherit;">La ca√≠da que estamos presenciando ya es el resultado de cargas sint√©ticas extremas dise√±adas para exprimir todo hasta la √∫ltima gota, que casi nunca es el caso en un producto normal.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Romper OLTP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este momento, incluso se volvi√≥ aburrido lo predecible que era HyperFlex. </font><font style="vertical-align: inherit;">Necesidad urgente de romper algo! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nw/rq/da/nwrqdazu_dn_gpyg6cdu3z0paju.png"><br>
<br>
<img src="https://habrastorage.org/webt/wr/fw/ks/wrfwkshatwbjd5gr2rvvtevdf8s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El punto rojo marca el momento en que la VM del controlador se apaga en uno de los hosts con una carga. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que, por defecto, la reconstrucci√≥n en HyperFlex comienza inmediatamente solo cuando se pierde el disco, y cuando se pierde el nodo, el tiempo de espera es de 2 horas, el momento de la reconstrucci√≥n forzada se marca con un punto verde.</font></font><br>
<br>
<pre><code class="plaintext hljs">login as: admin<font></font>
 HyperFlex StorageController 4.0(2a)<font></font>
admin@192.168.***.***'s password:<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt; stcli rebalance status<font></font>
rebalanceStatus:<font></font>
    percentComplete: 0<font></font>
    rebalanceState: cluster_rebalance_not_running<font></font>
rebalanceEnabled: True<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt; stcli rebalance start -f<font></font>
msgstr: Successfully started rebalance<font></font>
params:<font></font>
msgid: Successfully started rebalance<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt; stcli rebalance status<font></font>
rebalanceStatus:<font></font>
    percentComplete: 16<font></font>
    rebalanceState: cluster_rebalance_ongoing<font></font>
rebalanceEnabled: True<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt;</code></pre><br>
<img src="https://habrastorage.org/webt/sh/ry/qo/shryqousd3rdr6w7pwmdemcjpzk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las operaciones se congelaron por un par de segundos y continuaron nuevamente, casi notando la reconstrucci√≥n. </font><font style="vertical-align: inherit;">Est√° en un estado estable cuando est√° lejos de la sobrecarga del cl√∫ster. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPor qu√© 2 horas Cisco no es un problema, aunque los competidores tienen menos n√∫meros? </font><font style="vertical-align: inherit;">Cisco recomienda encarecidamente utilizar RF3 como nivel b√°sico de protecci√≥n de datos para todo, excepto las m√°quinas que no son una pena. </font><font style="vertical-align: inherit;">Decidi√≥ instalar parches o hacer algo con el host, ap√°guelo. </font><font style="vertical-align: inherit;">Y existe la posibilidad de que en ese momento otro host falle, y luego, en el caso de RF2, todo se convertir√° en una apuesta, y con RF3 habr√° una copia activa de los datos. </font><font style="vertical-align: inherit;">Y s√≠, de hecho, es bastante posible sobrevivir 2 horas en un accidente en RF2 hasta que comience la recuperaci√≥n a RF3.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°R√≥mpeme por completo!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rompiendo, tan rompiendo. </font><font style="vertical-align: inherit;">Carga completa. </font><font style="vertical-align: inherit;">En este caso, cre√© una prueba con un perfil m√°s o menos parecido a una carga real (70% de lectura, 20% al azar, 8k, 6d 128q). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4k/6l/rr/4k6lrrwh29qbybibwy2_gvq9y-e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adivina d√≥nde se apag√≥ CVM y d√≥nde comenz√≥ la reconstrucci√≥n. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0h/ur/am/0huramdwazcpyvzycht-hn1bwks.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la situaci√≥n con la reconstrucci√≥n, HyperFlex funcion√≥ bastante bien, sin causar una ca√≠da catastr√≥fica en el rendimiento o un aumento m√∫ltiple en los retrasos, incluso bajo carga bajo los mismos tomates. </font><font style="vertical-align: inherit;">Lo √∫nico que realmente me gustar√≠a es querido Cisco, hacer que el tiempo de espera sea igual en menos de 2 horas de forma predeterminada.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recomendaciones</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para concluir, recuerdo el prop√≥sito de las pruebas: investigar el sistema Cisco HyperFlex hoy, sin mirar el historial, investigar su rendimiento utilizando sint√©ticos y sacar conclusiones sobre su aplicabilidad a un producto real. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sobre el rendimiento. El rendimiento es muy bueno, y no har√°s ning√∫n otro comentario aqu√≠. Como ten√≠a un sistema de la generaci√≥n anterior en la prueba, puedo decir exactamente una cosa: en HyperFlex All Flash, se encontrar√° con la capacidad, el procesador, la memoria, pero no los discos. Excepto tal vez el 1% de las aplicaciones supercargadas, pero debe mantener una conversaci√≥n con ellas personalmente. Las instant√°neas RoW nativas funcionan. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, seg√∫n disponibilidad. El sistema despu√©s de detectar una falla es bastante bueno (sin una ca√≠da de rendimiento a veces) cumple con la restauraci√≥n de la cantidad de copias de datos. Hay una ligera queja en el tiempo de espera predeterminado de 2 horas antes de comenzar la recuperaci√≥n (si se pierde el host), pero dado el RF3 altamente recomendado, esto es m√°s problem√°tico. La recuperaci√≥n despu√©s de una falla de disco comienza de inmediato. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n 3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, en precio y comparaci√≥n con la competencia. </font><font style="vertical-align: inherit;">El precio del sistema puede variar muchas veces dependiendo de la configuraci√≥n de un proyecto espec√≠fico. </font><font style="vertical-align: inherit;">Una gran parte del costo del proyecto ser√° un sistema de licencia y software de aplicaci√≥n, que funcionar√° sobre la plataforma de infraestructura. </font><font style="vertical-align: inherit;">Por lo tanto, la √∫nica forma de comparar con la competencia es comparar ofertas comerciales espec√≠ficas que cumplan con los requisitos t√©cnicos, espec√≠ficamente para su empresa para un proyecto espec√≠fico. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n final</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : el sistema est√° funcionando, bastante maduro para su uso en el producto para abril de 2020, si se leen y aplican las recomendaciones del proveedor, en lugar de fumar.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es497010/index.html">Invertir en per√≠odos de recesi√≥n del mercado: 3 estrategias de comportamiento en bolsa</a></li>
<li><a href="../es497014/index.html">¬øQui√©n eres, ingeniero de calidad o probador?</a></li>
<li><a href="../es497016/index.html">13 de abril Java Digest</a></li>
<li><a href="../es497020/index.html">DocuSign, un popular servicio de firma digital, ahora es compatible con la infraestructura GlobalSign</a></li>
<li><a href="../es497022/index.html">Actualizaci√≥n del acceso a la red corporativa. Nuevos conmutadores Gigabit ExtremeSwitching X435</a></li>
<li><a href="../es497028/index.html">Bienvenido a Robot Operating System MeetUp</a></li>
<li><a href="../es497030/index.html">Experiencia en la implementaci√≥n de f√°bricas de red basadas en EVPN VXLAN y Cisco ACI y una peque√±a comparaci√≥n</a></li>
<li><a href="../es497032/index.html">Negocio de servicios y crisis: historias de √©xito. ¬øC√≥mo funciona para ti pensar fuera de la caja?</a></li>
<li><a href="../es497034/index.html">¬øCu√°l es el nuevo nRF Connect SDK para Nordic? ¬øEvoluci√≥n, revoluci√≥n o alternativa?</a></li>
<li><a href="../es497036/index.html">¬øCu√°ndo detener el proceso de reconocimiento de secuencia de video?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>