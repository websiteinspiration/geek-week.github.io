<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍👨‍👧 📬 🌔 会議2018-2019のPVS-Studioブースからのタスクへの回答 🏇🏾 🦁 🧔</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは！2019年のカンファレンスシーズンはまだ本格的ですが、ブースの訪問者に以前に提供されたタスクについて説明します。2019年秋には新しい一連のタスクを開始したため、2018年と2019年前半の古い問題の解決策を公開することはすでに可能です。さらに、それらの多くは以前に公開された記事から引用...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>会議2018-2019のPVS-Studioブースからのタスクへの回答</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/476272/"><p><img src="https://habrastorage.org/getpro/habr/post_images/701/9e4/589/7019e458975e9931a108882b6fd126a8.png" alt="写真2" align="left"></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
こんにちは！</font><font style="vertical-align: inherit;">2019年のカンファレンスシーズンはまだ本格的ですが、ブースの訪問者に以前に提供されたタスクについて説明します。</font><font style="vertical-align: inherit;">2019年秋には新しい一連のタスクを開始したため、2018年と2019年前半の古い問題の解決策を公開することはすでに可能です。さらに、それらの多くは以前に公開された記事から引用され、タスクのリーフレットにはリンクまたはQRコードが含まれていました記事に関する情報。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちがスタンドのある会議に参加した場合、おそらく私たちの問題のいくつかを見たり解決したりしたことでしょう。</font><font style="vertical-align: inherit;">これらは常に、C、C ++、C＃、またはJavaプログラミング言語での実際のオープンソースプロジェクトからのコードスニペットです。</font><font style="vertical-align: inherit;">コードには、訪問者に探すことをお勧めするエラーが含まれています。</font><font style="vertical-align: inherit;">解決策（または単にエラーのディスカッション）について、賞品を提供します-デスクトップのステータス、装身具など：</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2d9/aff/240/2d9aff24000a4a61dd4eac65fef38083.jpg" alt="写真4"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じにしますか？</font><font style="vertical-align: inherit;">次の会議で私たちのブースに来てください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カンファレンスタイム！2018年の結果まとめ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」と「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カンファレンス。2019年上半期中間決算</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font><font style="vertical-align: inherit;">の記事に</font><font style="vertical-align: inherit;">は、今年と昨年のカンファレンスでの活動内容が</font><font style="vertical-align: inherit;">掲載</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">されています</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでは、「コードの誤りを見つける」というゲームを始めましょう。</font><font style="vertical-align: inherit;">まず、2018年の古いタスクを検討し、プログラミング言語によるグループ化を使用します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2018年</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クロムのバグ</font></font></b><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> kDaysInMonth[<span class="hljs-number">13</span>] = {
  <span class="hljs-number">0</span>, <span class="hljs-number">31</span>, <span class="hljs-number">28</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span><font></font>
};<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">ValidateDateTime</span><span class="hljs-params">(<span class="hljs-keyword">const</span> DateTime&amp; time)</span> </span>{
  <span class="hljs-keyword">if</span> (time.year &lt; <span class="hljs-number">1</span> || time.year &gt; <span class="hljs-number">9999</span> ||<font></font>
      time.month &lt; <span class="hljs-number">1</span> || time.month &gt; <span class="hljs-number">12</span> ||<font></font>
      time.day &lt; <span class="hljs-number">1</span> || time.day &gt; <span class="hljs-number">31</span> ||<font></font>
      time.hour &lt; <span class="hljs-number">0</span> || time.hour &gt; <span class="hljs-number">23</span> ||<font></font>
      time.minute &lt; <span class="hljs-number">0</span> || time.minute &gt; <span class="hljs-number">59</span> ||<font></font>
      time.second &lt; <span class="hljs-number">0</span> || time.second &gt; <span class="hljs-number">59</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span> (time.month == <span class="hljs-number">2</span> &amp;&amp; IsLeapYear(time.year)) {
    <span class="hljs-keyword">return</span> time.month &lt;= kDaysInMonth[time.month] + <span class="hljs-number">1</span>;<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> time.month &lt;= kDaysInMonth[time.month];<font></font>
  }<font></font>
}</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回答</font></font></b><div class="spoiler_text">,  «»    .     Chromium          2018 .        .<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span> (time.month == <span class="hljs-number">2</span> &amp;&amp; IsLeapYear(time.year)) {
  <span class="hljs-keyword">return</span> time.month &lt;= kDaysInMonth[time.month] + <span class="hljs-number">1</span>;  <span class="hljs-comment">// &lt;= day</span>
} <span class="hljs-keyword">else</span> {
  <span class="hljs-keyword">return</span> time.month &lt;= kDaysInMonth[time.month];      <span class="hljs-comment">// &lt;= day</span>
}</code></pre><br>
    <i>If-else</i>     .  <i>time.day </i>      <i>time.month</i>.    ,      <i>true</i>.      "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">31 </a>".   ,     code review.         .<br>
</div></div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アンリアルエンジンのバグ</font></font></b><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">VertInfluencedByActiveBone</span><span class="hljs-params">(
  FParticleEmitterInstance* Owner,
  USkeletalMeshComponent* InSkelMeshComponent,
  int32 InVertexIndex,
  int32* OutBoneIndex = <span class="hljs-literal">NULL</span>)</span></span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">UParticleModuleLocationSkelVertSurface::Spawn</span><span class="hljs-params">(....)</span>
</span>{<font></font>
  ....<font></font>
  int32 BoneIndex1, BoneIndex2, BoneIndex3;<font></font>
  BoneIndex1 = BoneIndex2 = BoneIndex3 = INDEX_NONE;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(!VertInfluencedByActiveBone(<font></font>
        Owner, SourceComponent, VertIndex[<span class="hljs-number">0</span>], &amp;BoneIndex1) &amp;&amp;<font></font>
     !VertInfluencedByActiveBone(<font></font>
        Owner, SourceComponent, VertIndex[<span class="hljs-number">1</span>], &amp;BoneIndex2) &amp;&amp; <font></font>
     !VertInfluencedByActiveBone(<font></font>
        Owner, SourceComponent, VertIndex[<span class="hljs-number">2</span>]) &amp;BoneIndex3)<font></font>
  {<font></font>
  ....<font></font>
}</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回答</font></font></b><div class="spoiler_text">      ,     <i>VertInfluencedByActiveBone()</i>         .     <i>if</i>.     :<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span> (!foo(....) &amp;&amp; !foo(....) &amp;&amp; !foo(....) &amp; arg)</code></pre><br>
 ,   . -     <i>VertInfluencedByActiveBone()</i>      ,        <i>&amp; </i> ( ,     <i>VertInfluencedByActiveBone()</i>  <i>bool</i>,  –   <i>BoneIndex3</i>).    .    ( ,      ):<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(!VertInfluencedByActiveBone(<font></font>
      Owner, SourceComponent, VertIndex[<span class="hljs-number">0</span>], &amp;BoneIndex1) &amp;&amp;<font></font>
   !VertInfluencedByActiveBone(<font></font>
      Owner, SourceComponent, VertIndex[<span class="hljs-number">1</span>], &amp;BoneIndex2) &amp;&amp; <font></font>
   !VertInfluencedByActiveBone(<font></font>
      Owner, SourceComponent, VertIndex[<span class="hljs-number">2</span>], &amp;BoneIndex3))</code></pre><br>
,       "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  Unreal Engine 4</a>".      «    ».     .<br>
</div></div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Androidのバグ</font></font></b><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">TagMonitor::parseTagsToMonitor</span><span class="hljs-params">(String8 tagNames)</span> </span>{
  <span class="hljs-function"><span class="hljs-built_in">std</span>::lock_guard&lt;<span class="hljs-built_in">std</span>::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mMonitorMutex)</span></span>;<font></font>
<font></font>
  <span class="hljs-comment">// Expand shorthands</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">ssize_t</span> idx = tagNames.find(<span class="hljs-string">"3a"</span>) != <span class="hljs-number">-1</span>) {
    <span class="hljs-keyword">ssize_t</span> end = tagNames.find(<span class="hljs-string">","</span>, idx);
    <span class="hljs-keyword">char</span>* start = tagNames.lockBuffer(tagNames.size());<font></font>
    start[idx] = <span class="hljs-string">'\0'</span>;<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回答</font></font></b><div class="spoiler_text">   <i>if </i>   .    ,   :<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">ssize_t</span> idx = (tagNames.find(<span class="hljs-string">"3a"</span>) != <span class="hljs-number">-1</span>))</code></pre><br>
 <i>idx </i>    0  1,        ,   .   :<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">ssize_t</span> idx = tagNames.find(<span class="hljs-string">"3a"</span>);
<span class="hljs-keyword">if</span> (idx != <span class="hljs-number">-1</span>)</code></pre><br>
   "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   PVS-Studio   Android,    </a>".<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、Androidで重要なエラーを見つけるためのもう1つのタスク：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">int32_t</span>  GGLfixed;
<span class="hljs-function">GGLfixed <span class="hljs-title">gglFastDivx</span><span class="hljs-params">(GGLfixed n, GGLfixed d)</span>
</span>{
  <span class="hljs-keyword">if</span> ((d&gt;&gt;<span class="hljs-number">24</span>) &amp;&amp; ((d&gt;&gt;<span class="hljs-number">24</span>)+<span class="hljs-number">1</span>)) {<font></font>
    n &gt;&gt;= <span class="hljs-number">8</span>;<font></font>
    d &gt;&gt;= <span class="hljs-number">8</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> gglMulx(n, gglRecip(d));<font></font>
}</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回答</font></font></b><div class="spoiler_text">   <i>(d &gt;&gt; 24) + 1</i>. <br>
<br>
  ,  8    <i>d</i>  ,       .  ,   ,       ,   0x00  0xFF.   ,    ,   (d&gt;&gt;24).         .    ,          .     d  0b11111111'00000000'00000000'00000000,      0b11111111'11111111'11111111'11111111.  1   0xFFFFFFFF  <i>int</i>,    0 (-1+1=0).  ,  <i>((d&gt;&gt;24)+1)</i>  ,        1.<br>
<br>
         «».  : «The value of E1 &gt;&gt; E2 is E1 right-shifted E2 bit positions. If E1 has an unsigned type or if E1 has a signed type and a non-negative value, the value of the result is the integral part of the quotient of E1/2^E2. <i>If E1 has a signed type and a negative value, the resulting value is implementation-defined</i>».<br>
<br>
 ,   ,    (implementation-defined behavior).      —       .         ,     <i>((d&gt;&gt;24)+1)</i>     0,      .<br>
<br>
,  .  ,   ,     "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   PVS-Studio   Android,    </a>".<br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2019年</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「GCCのせいです」</font></font></b><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> *s)</span>
</span>{
  <span class="hljs-keyword">int</span> r = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">while</span>(*s) {<font></font>
    r += ((r * <span class="hljs-number">20891</span> + *s *<span class="hljs-number">200</span>) | *s ^ <span class="hljs-number">4</span> | *s ^ <span class="hljs-number">3</span>) ^ (r &gt;&gt; <span class="hljs-number">1</span>);<font></font>
    s++;<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> r &amp; <span class="hljs-number">0x7fffffff</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プログラマーは、このコードはGCC 8コンパイラーの障害によるエラーで機能すると主張していますが、そうですか？</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回答</font></font></b><div class="spoiler_text">   .   ,          (&amp;).     .  ,    <i>r</i>   .      .   <i>r</i>   ,    ,        . ,  ,      <i>r</i>       ,   <i>r &amp; 0x7fffffff</i>               <i>r</i>.<br>
<br>
   "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> PVS-Studio 6.26</a>".<br>
</div></div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QTバグ</font></font></b><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">inline</span> <span class="hljs-keyword">const</span> QMetaObjectPrivate *<span class="hljs-title">priv</span><span class="hljs-params">(<span class="hljs-keyword">const</span> uint* data)</span>
</span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">reinterpret_cast</span>&lt;<span class="hljs-keyword">const</span> QMetaObjectPrivate*&gt;(data); }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">QMetaEnum::isFlag</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span>
</span>{
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> offset = priv(mobj-&gt;d.data)-&gt;revision &gt;= <span class="hljs-number">8</span> ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span>;
  <span class="hljs-keyword">return</span> mobj &amp;&amp; mobj-&gt;d.data[handle + offset] &amp; EnumIsFlag;<font></font>
}</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回答</font></font></b><div class="spoiler_text">  <i>mobj </i>  .   ,   . .<br>
<br>
     "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  Qt 5   PVS-Studio</a>".<br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C＃</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infer.NETのバグ</font></font></b><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> 
  <span class="hljs-title">WriteAttribute</span><span class="hljs-params">(TextWriter writer,
                 <span class="hljs-built_in">string</span> name,
                 object defaultValue, 
                 object value, 
                 Func&lt;object, <span class="hljs-built_in">string</span>&gt; converter = null)</span>
</span>{
  <span class="hljs-keyword">if</span> (   defaultValue == null &amp;&amp; value == null <font></font>
      || value.Equals(defaultValue))<font></font>
  {<font></font>
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
  <span class="hljs-built_in">string</span> stringValue = converter == null ? value.ToString() : <font></font>
                                           converter(value);<font></font>
  writer.Write($<span class="hljs-string">"{name}=\"{stringValue}\" "</span>);<font></font>
}</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回答</font></font></b><div class="spoiler_text">  <i>value.Equals(defaultValue)</i>      <i>value</i>.      ,  <i>defaultValue != null</i>,  <i>value == null</i>.<br>
<br>
   "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">     Infer.NET?</a>"<br>
</div></div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FastReportバグ</font></font></b><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FastString</span>
{</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> initCapacity = <span class="hljs-number">32</span>;
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Init</span><span class="hljs-params">(<span class="hljs-keyword">int</span> iniCapacity)</span>
  </span>{ sb = <span class="hljs-keyword">new</span> StringBuilder(iniCapacity); .... }
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">FastString</span><span class="hljs-params">()</span> </span>{ Init(initCapacity); }
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">FastString</span><span class="hljs-params">(<span class="hljs-keyword">int</span> iniCapacity)</span> </span>{ Init(initCapacity); }
  <span class="hljs-keyword">public</span> StringBuilder StringBuilder =&gt; sb;<font></font>
}<font></font>
....<font></font>
Console.WriteLine(<span class="hljs-keyword">new</span> FastString(<span class="hljs-number">256</span>).StringBuilder.Capacity);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンソールには何が表示されますか？</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FastString</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスの何が問題になってい</font><font style="vertical-align: inherit;">ますか？</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回答</font></font></b><div class="spoiler_text">    32.  —    ,    <i>Init </i> :<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">FastString</span><span class="hljs-params">(<span class="hljs-keyword">int</span> iniCapacity)</span></span>{ Init(initCapacity); }</code></pre><br>
  <i>iniCapacity</i>   .     <i>Init</i>   <i>initCapacity</i>.<br>
<br>
     "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">     .     ...</a>"<br>
</div></div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロザリンバグ</font></font></b><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> SyntaxNode <span class="hljs-title">GetNode</span><span class="hljs-params">(SyntaxNode root)</span>
</span>{<font></font>
  var current = root;<font></font>
  ....<font></font>
  <span class="hljs-keyword">while</span> (current.FullSpan.Contains(....))<font></font>
  {<font></font>
    ....<font></font>
    var nodeOrToken = current.ChildThatContainsPosition(....);<font></font>
    ....<font></font>
    current = nodeOrToken.AsNode();<font></font>
  }<font></font>
  ....<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> SyntaxNode <span class="hljs-title">AsNode</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-keyword">if</span> (_token != null)<font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> null;<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-keyword">return</span> _nodeOrParent;<font></font>
}</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回答</font></font></b><div class="spoiler_text">     <i>current </i>   <i>current.FullSpan.Contains(....)</i>.  <i>current </i>         <i>nodeOrToken.AsNode()</i>.<br>
<br>
   "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   Roslyn</a>".<br>
</div></div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unityのバグ</font></font></b><br>
<br>
<pre><code class="cpp hljs">....<font></font>
staticFields = packedSnapshot.typeDescriptions<font></font>
               .Where(t =&gt; <font></font>
                      t.staticFieldBytes != null &amp; <font></font>
                      t.staticFieldBytes.Length &gt; <span class="hljs-number">0</span>)<font></font>
               .Select(t =&gt; UnpackStaticFields(t))<font></font>
               .ToArray()<font></font>
....</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回答</font></font></b><div class="spoiler_text"> :   <i>&amp;&amp; </i>   <i>&amp;</i>.    ,   <i>t.staticFieldBytes.Length &gt; 0</i>  ,     <i>null</i>  <i>t.staticFieldBytes</i>, ,   ,      .<br>
<br>
       "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">     Unity3D</a>".<br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジャワ</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IntelliJ IDEAバグ</font></font></b><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> boolean <span class="hljs-title">checkSentenceCapitalization</span><span class="hljs-params">(@NotNull String value)</span> </span>{<font></font>
  List&lt;String&gt; words = StringUtil.split(value, <span class="hljs-string">" "</span>);<font></font>
  ....<font></font>
  <span class="hljs-keyword">int</span> capitalized = <span class="hljs-number">1</span>;<font></font>
  ....<font></font>
  <span class="hljs-keyword">return</span> capitalized / words.size() &lt; <span class="hljs-number">0.2</span>; <span class="hljs-comment">// allow reasonable amount of</span>
                                           <span class="hljs-comment">// capitalized words</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
大文字の単語数が誤って計算される理由を判断することが提案されています。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回答</font></font></b><div class="spoiler_text">   ,   20%     .    ,     ,      0  1.    ,         .        0,     .<br>
<br>
   "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">PVS-Studio  Java</a>".<br>
</div></div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spotbugsバグ</font></font></b><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getXMLType</span><span class="hljs-params">(@WillNotClose InputStream in)</span> throws IOException
</span>{<font></font>
  ....<font></font>
  String s;<font></font>
  <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">while</span> (count &lt; <span class="hljs-number">4</span>) {<font></font>
    s = r.readLine();<font></font>
    <span class="hljs-keyword">if</span> (s == null) {
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
    Matcher m = tag.matcher(s);<font></font>
    <span class="hljs-keyword">if</span> (m.find()) {
      <span class="hljs-keyword">return</span> m.group(<span class="hljs-number">1</span>);<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IOException(<span class="hljs-string">"Didn't find xml tag"</span>);<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
xmlタグ検索エラーとは何かを判断することが提案されています。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回答</font></font></b><div class="spoiler_text"> <i>count &lt; 4</i>   ,    <i>count</i>    . ,   xml-        ,  -     .<br>
<br>
 ,   ,     "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">PVS-Studio  Java</a>".<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで全部です。</font><font style="vertical-align: inherit;">次の会議でお会いしましょう。</font><font style="vertical-align: inherit;">ユニコーンスタンドを探してください。</font><font style="vertical-align: inherit;">新しい面白いパズルともちろん賞品を配ります。</font><font style="vertical-align: inherit;">またね！</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事を英語を話す視聴者と共有したい場合は、翻訳へのリンクを使用してください：Sergey Khrenov。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2018-2019の会議でPVS-Studioチームが提供するバグ発見の課題に対するソリューション</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja476260/index.html">私たちはrpm WireMockで収集します-UbuntuのPPAのFedora COPRアナログでWebサービスを介してスタブを作成するためのユーティリティ</a></li>
<li><a href="../ja476262/index.html">Centosリポジトリミラーと最適なミラーの選択について</a></li>
<li><a href="../ja476264/index.html">外国語を学ぶための電報ボット：詰め込み単語からスピーキングまで</a></li>
<li><a href="../ja476266/index.html">Mars Digital Technologiesでのインターンシップ。M＆Mでディープラーニングをどのように適用したか</a></li>
<li><a href="../ja476270/index.html">当選者：TopCoder Open 2019</a></li>
<li><a href="../ja476276/index.html">Goでシンプルなバランサーを作成する</a></li>
<li><a href="../ja476278/index.html">BLACK HAT USAカンファレンス。金持ちになるか死ぬか：Black Hatを使用してインターネットでお金を稼ぐ。パート3</a></li>
<li><a href="../ja476280/index.html">とげからDOSへ：世界を変えた4枚のフロッピーディスク</a></li>
<li><a href="../ja476284/index.html">Reactでエラーを処理するための戦略を策定します</a></li>
<li><a href="../ja476286/index.html">2020年のフロントエンド開発の上位5 JSフレームワーク。パート1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>