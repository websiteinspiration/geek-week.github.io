<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§µüèº üëçüèΩ ‚òùÔ∏è Demonstra√ß√£o da an√°lise de c√≥digo Second Reality üéÖüèΩ üê∫ ü§úüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em 23 de julho de 2013, o c√≥digo fonte da demonstra√ß√£o da Segunda Realidade (1993) foi publicado . Como muitos, eu estava ansioso para ver o interior ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Demonstra√ß√£o da an√°lise de c√≥digo Second Reality</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501030/"><div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/second_reality.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em 23 de julho de 2013, o </font><font style="vertical-align: inherit;">c√≥digo fonte da demonstra√ß√£o da Segunda Realidade (1993) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foi publicado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Como muitos, eu estava ansioso para ver o interior da demo que nos inspirou muito ao longo dos anos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu esperava ver o caos monol√≠tico do assembler, mas, em vez disso, para minha surpresa, descobri uma arquitetura complexa que combina graciosamente v√°rias linguagens. </font><font style="vertical-align: inherit;">Eu nunca vi esse c√≥digo antes, representando perfeitamente dois aspectos integrais do desenvolvimento de uma demonstra√ß√£o:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabalho em equipe.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ofusca√ß√£o.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como sempre, formei um artigo para minhas anota√ß√µes: espero que isso poupe a algu√©m algumas horas e talvez inspire outros a ler mais c√≥digo-fonte e se tornarem engenheiros mais experientes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte 1: Introdu√ß√£o</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Demo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de embarcar no c√≥digo, darei um link para capturar a demo lend√°ria em v√≠deo em HD (Michael Hut). </font><font style="vertical-align: inherit;">Hoje, essa √© a √∫nica maneira de avaliar completamente a demonstra√ß√£o sem falhas gr√°ficas (nem o DOSBox pode inici√°-la corretamente).</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/KTjnt_WSJu8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primeiro contato com o c√≥digo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O c√≥digo fonte √© postado no GitHub. </font><font style="vertical-align: inherit;">Basta digitar um comando </font></font><code>git</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<blockquote><code> git clone git@github.com:mtuomi/SecondReality.git</code></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A princ√≠pio, o conte√∫do √© confuso: 32 pastas e uma misteriosa </font></font><code>U2.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que n√£o inicia no DosBox.</font></font><br>
<br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/first_contact.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A demo teve o t√≠tulo de trabalho "Unreal 2" (o primeiro "Unreal" foi a demo anterior da Future Crew, lan√ßada para a primeira Assembl√©ia em 1992). </font><font style="vertical-align: inherit;">E somente durante o processo de desenvolvimento o nome foi alterado para "Segunda Realidade". </font><font style="vertical-align: inherit;">Isso explica o nome do arquivo ‚ÄúU2.EXE‚Äù, mas n√£o por que o arquivo n√£o funciona ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ executar o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLOC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , obteremos m√©tricas interessantes:</font></font><br>
<br>
<pre>    -------------------------------------------------------------------------------<font></font>
                                                   <font></font>
    -------------------------------------------------------------------------------<font></font>
    Assembly                        99           3029           1947          33350<font></font>
    C++                            121           1977            915          24551<font></font>
    C/C++ Header                     8             86            240            654<font></font>
    make                            17            159             25            294<font></font>
    DOS Batch                       71              3              1            253<font></font>
    -------------------------------------------------------------------------------<font></font>
    SUM:                           316           5254           3128          59102<font></font>
    -------------------------------------------------------------------------------<font></font>
</pre><br>
<ul>
<li>   ¬´¬ª  50% .</li>
<li>      Doom.</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tem dezessete makefiles. </font><font style="vertical-align: inherit;">Por que n√£o apenas um?</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iniciar demonstra√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â dif√≠cil descobrir, mas a demo lan√ßada pode ser lan√ßada no DosBox: voc√™ precisa renome√°-la </font></font><code>U2.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e execut√°-la no lugar certo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando aprendi sobre o funcionamento interno do c√≥digo, ele come√ßou a parecer muito l√≥gico:</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        CD PRINCIPAL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MOVE U2.EXE DATA / SECOND.EXE</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        DADOS DO CD</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        SECOND.EXE</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E pronto!</font></font><br>
<br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/demo.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitetura</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos anos 90, as demos eram distribu√≠das principalmente em disquetes. </font><font style="vertical-align: inherit;">Ap√≥s descompactar, era necess√°rio instalar dois arquivos grandes: </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>REALITY.FC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    . </font><font style="vertical-align: inherit;">08/08/2013 16:40</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    .. &lt;DIR&gt; 08/01/2013 16:40</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    FCINFO10 TXT 48.462 04-10-1993 11:48</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    FILE_ID DIZ 378 04-10-1993 11:30</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    README 1ST 4.222 04-10-1993 12:59</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    REALITY FC 992.188 07-10-1993 12:59 </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    SEGUNDO EXE 1.451.093 07-10-1993 13:35</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        5 arquivos 2.496.343 bytes.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        2 Dir (s) 262,111,744 Bytes gr√°tis.</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com base na minha experi√™ncia em desenvolvimento de jogos, sempre espero que o quadro todo fique assim:</font></font><br>
<br>
<ul>
<li><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: mecanismo com todos os efeitos em um arquivo execut√°vel.</font></font></li>
<li><code>REALITY.FC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Ativos (m√∫sica, efeitos sonoros, imagens) em um formato propriet√°rio / criptografado no </font></font><code>WAD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jogo Doom.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas, depois de ler, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><code>MAIN/PACK.C</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">descobri que estava enganado: o mecanismo da Segunda Realidade √© apenas um servidor Loader e Interrupt (chamado DIS). </font><font style="vertical-align: inherit;">Cada demonstra√ß√£o de cena (tamb√©m chamada de "PARTE") √© um execut√°vel do DOS totalmente funcional. </font><font style="vertical-align: inherit;">Cada pe√ßa √© carregada pelo carregador Loader e lan√ßada uma ap√≥s a outra. </font><font style="vertical-align: inherit;">As pe√ßas s√£o armazenadas no formato criptografado no final </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/architecture.png"></div><br>
<ul>
<li><code>REALITY.FC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cont√©m duas composi√ß√µes musicais tocadas durante a demo (para preenchimento de ofusca√ß√£o, preenchimento e marcador adicionados no in√≠cio).</font></font></li>
<li><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cont√©m o carregador de inicializa√ß√£o e o Demo Interrupt Server (DIS).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ap√≥s o final </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, 32 partes (PARTE) da demonstra√ß√£o s√£o adicionadas como arquivos execut√°veis ‚Äã‚Äãdo DOS (criptografados).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa arquitetura oferece muitas vantagens:</font></font><br>
<br>
<ul>
<li>     :         PART  ,       <code>_start</code>       (450 ).</li>
<li>  EXE   <code>SECOND.EXE</code>        -.</li>
<li> : Loader  DIS    20 . DOS    .</li>
<li>  :   PART     PART     . </li>
<li>   / :    ,  PART      (  ),   :   EXE     ,    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qualquer linguagem pode ser usada para programa√ß√£o PART: no c√≥digo encontramos C, Assembly ... e Pascal.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leitura recomendada</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os tr√™s pilares para entender o c√≥digo fonte da Segunda Realidade s√£o arquitetura VGA, assembler e PC (programa√ß√£o PIC e PIT). </font><font style="vertical-align: inherit;">Aqui est√£o alguns links incrivelmente √∫teis:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitetura VGA: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Projeto FreeVGA</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A arte da montagem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (especialmente o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cap√≠tulo 17</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre interrup√ß√µes e ISRs).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programa√ß√£o PIT 8254</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como o c√≥digo-fonte est√° cheio de ponteiros "FAR" e "NEAR", ser√° √∫til ler </font><font style="vertical-align: inherit;">a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documenta√ß√£o b√°sica da arquitetura</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da Intel e, em particular, o cap√≠tulo 4.3, sobre os tipos de dados do ponteiro.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artigos abrangentes de Michael Abrash do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Graphic Programming Black Book</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cap√≠tulo 3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : (Zen Timer e PIT), </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cap√≠tulo 24</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : tour VGA, cap√≠tulos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">47</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">48</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">49</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : (modo X).</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte 2: Segundo mecanismo de realidade</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conforme discutido na Parte 1, o fundamento da Segunda Realidade consiste em:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O carregador de inicializa√ß√£o como um execut√°vel do DOS.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gerenciador de mem√≥ria (pool de pilhas simples)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servidor de interrup√ß√£o de demonstra√ß√£o (DIS).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta parte, darei recomenda√ß√µes aos programadores que desejam ler o mecanismo e o gerenciador de inicializa√ß√£o (o DIS ser√° discutido na pr√≥xima parte).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo do motor</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O c√≥digo do mecanismo √© 100% ASM, mas est√° muito bem escrito e bastante bem documentado:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><code>MAIN/U2.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (testemunho).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><code>MAIN/U2A.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Servi√ßos de utilidade p√∫blica).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><code>MAIN/VMODE.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Procedimentos VGA).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No pseudo-c√≥digo, pode ser escrito assim:</font></font><br>
<br>
<pre><code class="cpp hljs">    exemus  db <span class="hljs-string">'STARTMUS.EXE'</span>,<span class="hljs-number">0</span>
    exe0    db <span class="hljs-string">'START.EXE'</span>,<span class="hljs-number">0</span><font></font>
    ...<font></font>
    exe23   db <span class="hljs-string">'ENDSCRL.EXE'</span>,<span class="hljs-number">0</span><font></font>
<font></font>
    start:<font></font>
       cli                         ; Disable all interrupts<font></font>
       mov     ah,<span class="hljs-number">4</span>ah              ; Deallocate all memory<font></font>
       call checkall               ; Check <span class="hljs-keyword">for</span> <span class="hljs-number">570</span>,<span class="hljs-number">000</span> bytes of mem, <span class="hljs-number">386</span> CPU <span class="hljs-keyword">and</span> VGA<font></font>
       call file_getexepath        <font></font>
       call dis_setint             ; Install Demo Interrupt Server on Interrupt <span class="hljs-number">0f</span>ch<font></font>
       call file_initpacking       ; <span class="hljs-function">Check exe <span class="hljs-title">signature</span> <span class="hljs-params">(no tempering)</span> !
       call file_setint            </span>; <span class="hljs-function">Replace DOS <span class="hljs-title">routines</span> <span class="hljs-params">(only OPENFILE, SEEK <span class="hljs-keyword">and</span> READ)</span> on Interrupt 021h
       call flushkbd               </span>; Flush the keyboard buffer<font></font>
       <font></font>
       call  checkcmdline          ; check/process commandline<font></font>
<font></font>
       ;======== Here we go! ========<font></font>
       call vmode_init             ; <span class="hljs-function">Init <span class="hljs-title">VGA</span> <span class="hljs-params">(<span class="hljs-keyword">not</span> necessarly Mode13h <span class="hljs-keyword">or</span> ModeX)</span>, each PARTs had its own resolution

       mov si,OFFSET exe0
       call executehigh            </span>; loaded to high in memory. Used <span class="hljs-keyword">for</span> loading music loaders <span class="hljs-keyword">and</span> stuff.<font></font>
   <font></font>
       call  _zinit ; Start music<font></font>
       call  restartmus<font></font>
<font></font>
       mov   si,OFFSET exe1     ;Parameter <span class="hljs-keyword">for</span> partexecute: Offset to exec name<font></font>
       call  partexecute<font></font>
       ; Execute all parts until exe23<font></font>
<font></font>
       call fademusic<font></font>
       ;======== And Done! (<span class="hljs-keyword">or</span> fatal <span class="hljs-built_in">exit</span>) ========<font></font>
<font></font>
    fatalexit:<font></font>
       mov cs:notextmode,<span class="hljs-number">0</span>
       call vmode_deinit</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas as etapas s√£o f√°ceis de ler:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Defina o servidor de interrup√ß√£o DIS como interrup√ß√£o </font></font><code>0fch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Substitui√ß√£o de chamadas do sistema DOS por interrup√ß√£o </font></font><code>021h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(para obter mais detalhes, consulte a se√ß√£o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Modos de desenvolvimento e produ√ß√£o"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baixe m√∫sicas para uma placa de som via mem√≥ria EMS.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√∫sica em execu√ß√£o.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Executando cada parte da demonstra√ß√£o.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feito!</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Detalhes dos procedimentos </font></font><code>execute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="cpp hljs"> execute:<font></font>
      cld<font></font>
      call  openfile ; Open the DOS executable <span class="hljs-keyword">for</span> <span class="hljs-keyword">this</span> PART<font></font>
      call  loadexe  ; loads the specified exe file to memory, does relocations <span class="hljs-keyword">and</span> creates psp<font></font>
      call  closefile<font></font>
      call  runexe   ;runs the exe file loaded previously with loadexe.<font></font>
                     ; returns after exe executed, <span class="hljs-keyword">and</span> frees the memory<font></font>
                     ; it uses.</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gerenciador de mem√≥ria</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Havia muitas lendas de que o Second Reality usa um gerenciador de mem√≥ria complexo via MMU; n√£o havia rastros no mecanismo. </font><font style="vertical-align: inherit;">O gerenciamento de mem√≥ria √© realmente transferido para o DOS: o mecanismo inicia </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">liberando toda a RAM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e depois distribuindo-a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mediante solicita√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">O √∫nico truque complicado √© a capacidade de alocar RAM a partir do final do heap: isso √© feito usando o valor de retorno do malloc DOS </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quando √© solicitada muita RAM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte 3: DIS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Demo Interrupt Server (DIS) fornece uma ampla gama de servi√ßos para cada PARTE: da troca de dados entre diferentes PARTES √† sincroniza√ß√£o com o VGA.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servi√ßos DIS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No tempo de execu√ß√£o, PART, o servidor DIS fornece servi√ßos para ele. </font><font style="vertical-align: inherit;">Uma lista de recursos pode ser encontrada em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><code>DIS/DIS.H</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os servi√ßos mais importantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Troca entre diferentes PART ( </font></font><code>dis_msgarea</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">): DIS fornece tr√™s buffers de 64 bytes </font><font style="vertical-align: inherit;">cada </font><font style="vertical-align: inherit;">para que o PART possa receber par√¢metros do carregador do PART anterior.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Emula√ß√£o de cobre ( </font></font><code>dis_setcopper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">): simulador Amiga Copper que permite executar opera√ß√µes que s√£o alteradas pelo estado do VGA.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modo Dev / Prod ( </font></font><code>dis_indemo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">): permite que a PART saiba que est√° sendo executada no modo DEV (o que significa que deve inicializar o v√≠deo) ou iniciada a partir do gerenciador de inicializa√ß√£o no modo PROD.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contagem de quadros VGA ( </font></font><code>_dis_getmframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aguardando o retorno VGA ( </font></font><code>dis_waitb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo do servidor de interrup√ß√£o de demonstra√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O c√≥digo-fonte DIS tamb√©m √© 100% ASM ... e muito bem comentado:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><code>DIS/DIS.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(manipulador de interrup√ß√£o definido como int </font></font><code>0fch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><code>DIS/DISINT.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Pr√≥prios procedimentos DIS).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como a Segunda Realidade tamb√©m √© parcialmente escrita em C, o c√≥digo possui uma interface para C: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><code>DIS/DIS.H</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><code>DIS/DISC.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como funciona</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DIS √© definido como um manipulador de interrup√ß√£o para int program√°tico </font></font><code>0fch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">O melhor de tudo √© que ele pode ser executado internamente </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quando a demonstra√ß√£o estiver em execu√ß√£o ou como um programa residente ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TSR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) no modo Dev. </font><font style="vertical-align: inherit;">Essa flexibilidade permite testar individualmente diferentes demos do PART durante o desenvolvimento:</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                          // Vamos fingir que somos desenvolvedores de FC e queremos iniciar a parte STAR diretamente.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C: \&gt; CD DDSTARS            </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C: \ DDSTARS&gt; K</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ERRO: DIS n√£o carregado. </font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          // Ops, a PART n√£o p√¥de encontrar o DIS no int 0fch.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C: \ DDSTARS&gt; CD .. \ DIS</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C: \ DIS&gt; DIS</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  Servidor de demonstra√ß√£o Int (DIS) V1.0 Copyright (C) 1993 The Future Crew</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  VERS√ÉO BETA - Compilado: 26/07/93 03:15:53 </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  Instalado (int fc).</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  NOTA: Este servidor DIS n√£o suporta sincroniza√ß√£o de cobre ou m√∫sica!</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          // DIS est√° instalado, vamos tentar novamente.</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C: \ DIS&gt; CD ../DDSTARS</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C: \ DDSTARS&gt; K</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E pronto!</font></font><br>
<br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/DDSTARTS.EXE.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cobre</font></font></h3> <br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/copper_emu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Copper" √© o coprocessador que os desenvolvedores da demo de Amiga adoraram. </font><font style="vertical-align: inherit;">Fazia parte do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conjunto de chips original</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e permitia executar um fluxo de comandos program√°vel sincronizado com o equipamento de v√≠deo. </font><font style="vertical-align: inherit;">N√£o havia tal coprocessador no PC, e a Future Crew teve que escrever um simulador de cobre rodando dentro do DIS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A equipe do FC usou os chipsets de hardware para PC 8254-PIT e 8259-PIC para simular o cobre. </font><font style="vertical-align: inherit;">Ela criou um sistema </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sincronizado com a frequ√™ncia VGA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , capaz de iniciar procedimentos em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tr√™s locais do feixe vertical para tr√°s</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Local 0: depois de ligar a tela (aproximadamente na linha de digitaliza√ß√£o 25)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Local 1: imediatamente ap√≥s a varredura do feixe reverso (√â POSS√çVEL EVIT√Å-LO)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Local 2: no feixe reverso do feixe de varredura</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como isso pode ser lido </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><code>MAIN/COPPER.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(e veja o diagrama abaixo):</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O timer do chip 8254 est√° configurado para disparar o IRQ0 com a frequ√™ncia desejada.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O manipulador de interrup√ß√£o 8h (chamado pelo PIC 8259 ap√≥s receber o IRQ0) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> substitu√≠do por um procedimento aqui </font></font><code>intti8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nota: o servi√ßo de contagem de quadros DIS √© realmente fornecido pelo simulador de cobre.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte 4: Modos Dev e Prod</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lendo o c√≥digo fonte da Second Reality, voc√™ fica mais impressionado com quanta aten√ß√£o a equipe prestou √† mudan√ßa cont√≠nua do DEV para o PROD.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modo de Desenvolvimento</font></font></h3><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/sc_dev.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No modo Desenvolvimento, cada componente da demonstra√ß√£o era um arquivo execut√°vel separado.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O DIS foi carregado no TSR residente e acessado atrav√©s de uma interrup√ß√£o </font></font><code>0cfh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O carregador de inicializa√ß√£o causou uma interrup√ß√£o do DOS </font></font><code>21h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para abrir, ler, pesquisar e fechar arquivos.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa configura√ß√£o do DEV possui as seguintes vantagens:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cada codificador e artista poderia trabalhar no arquivo execut√°vel e test√°-lo separadamente, sem afetar o restante da equipe.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A demonstra√ß√£o completa a qualquer momento pode ser testada usando uma pequena </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(sem adicionar todos os EXEs ao final). </font><font style="vertical-align: inherit;">O execut√°vel de cada PARTE foi carregado usando uma interrup√ß√£o </font></font><code>021h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do </font><font style="vertical-align: inherit;">DOS </font><font style="vertical-align: inherit;">de um arquivo separado.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Produ√ß√£o (modo de demonstra√ß√£o)</font></font></h3><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/sc_prod.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No modo Produ√ß√£o, o pequeno </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(contendo o carregador de inicializa√ß√£o), o DIS e as partes da demonstra√ß√£o como EXEs separados foram combinados em um √∫nico </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O acesso ao DIS ainda foi feito por interrup√ß√£o </font></font><code>0fch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A API de interrup√ß√£o do DOS 21h foi corrigida por suas pr√≥prias rotinas da Future Crew, que abrem arquivos a partir do final de um arquivo grande </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa configura√ß√£o do PROD tem uma vantagem em termos de tempo de carregamento e prote√ß√£o contra engenharia reversa ... mas, mais importante, do ponto de vista da programa√ß√£o ou do carregamento de PART, NADA muda ao mudar de DEV para PROD.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte 5: PARTE separada</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada um dos efeitos visuais da Segunda Realidade √© um execut√°vel do DOS totalmente funcional. </font><font style="vertical-align: inherit;">Eles s√£o chamados de PART e todos eles 23. Essa solu√ß√£o arquitet√¥nica permitiu prototipagem r√°pida, desenvolvimento paralelo (j√° que o FC provavelmente n√£o tinha ferramentas de controle de vers√£o) e livre escolha de idiomas (ASM, C e at√© Pascal s√£o encontrados na fonte).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PARTE separada</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma lista de todas as PART / EXEs pode ser encontrada no c√≥digo-fonte do mecanismo: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U2.ASM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Aqui est√° uma descri√ß√£o curta mais conveniente de todas as 23 partes (com a localiza√ß√£o do c√≥digo fonte, embora os nomes possam ser muito confusos):</font></font><br>
<br>
<div class="scrollable-table"><table cellspacing="0" cellpadding="0" border="0">
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T√≠tulo</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquivo execut√°vel</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codificador</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Captura de tela</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fonte</font></font></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STARTMUS.EXE</font></font></td>
<td></td>
<td></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PRINCIPAL / STARTMUS.C</font></font></a></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">START.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INC√äNDIOS</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/02-START_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">START / MAIN.c</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte oculta</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DDSTARS.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INC√äNDIOS</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/03-DDSTARS_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DDSTARS / STARS.ASM</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alkutekstit i</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ALKU.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INC√äNDIOS</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/04-ALKU_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ALKU / MAIN.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alkutekstit II</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U2A.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/05-U2A_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VISU / C / CPLAY.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alkutekstit III</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PAM.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TRUG / WILDFIRE</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/06-PAM_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PAM /</font></font></a></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BEGLOGO.EXE</font></font></td>
<td></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/07-BEGLOGO_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BEG / BEG.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Glenz</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GLENZ.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/08-GLENZ_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GLENZ /</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dottitunneli</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TUNNELI.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TRUG</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/09-TUNNELI_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TUNNELI / TUN10.PAS</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Techno</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TECHNO.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/10-TECHNO_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TECHNO / KOEA.ASM</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Panicfake</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PANICEND.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/11-PANICEND_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P√¢nico</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vuori-scroll</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MNTSCRL.EXE</font></font></td>
<td></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/12-MNTSCRL_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FOREST / READ2.PAS</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estrelas dos sonhos do deserto</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DDSTARS.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TRUG</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/13-DDSTARS_thumb.png"></a></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lente</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/14-LNS&amp;ZOOM_thumb.png"></a></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rotazoomer</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LNS &amp; ZOOM.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/14-LNS&amp;ZOOM-2_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LENTE /</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plasma</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INC√äNDIOS</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/15-PLZPART_thumb.png"></a></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plasmacube</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PLZPART.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INC√äNDIOS</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/15-PLZPART-2_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PLZPART /</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MiniVectorBalls</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MINVBALL.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/16-MINVBALL_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DOTS /</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peilipalloscroll</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAYSCRL.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TRUG</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/17-RAYSCRL_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WATER / DEMO.PAS</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3D sinusfield</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3DSINFLD.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/18-3DSINFLD_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COMAN / DOLOOP.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jellypic</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JPLOGO.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/19-JPLOGO_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JPLOGO / JP.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vetor parte II '</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U2E.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/20-U2E_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VISU / C / CPLAY.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Legendas / Agradecimentos</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ENDLOGO.EXE</font></font></td>
<td></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/21-ENDLOGO_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">END / END.C</font></font></a></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CRED.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INC√äNDIOS</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/22-CRED_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CR√âDITOS / PRINCIPAL.C</font></font></a></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ENDSCRL.EXE</font></font></td>
<td></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/23-ENDSCRL_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ENDSCRL / MAIN.C</font></font></a></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece que cada desenvolvedor teve sua pr√≥pria especializa√ß√£o, que poderia ser compartilhada em uma parte. </font><font style="vertical-align: inherit;">Isso √© especialmente percept√≠vel na primeira cena com rolagem, navios e explos√µes (Alkutekstit). </font><font style="vertical-align: inherit;">Embora isso pare√ßa um efeito cont√≠nuo, na verdade s√£o tr√™s arquivos execut√°veis ‚Äã‚Äãescritos por tr√™s pessoas diferentes:</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<td colspan="3"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sequ√™ncia de Alkutekstit (cr√©ditos)</font></font></b></td>
</tr>
<tr>
<td><img src="http://fabiensanglard.net/second_reality/parts/04-ALKU_seq.png"></td>
<td><img src="http://fabiensanglard.net/second_reality/parts/05-U2A_seq.png"></td>
<td><img src="http://fabiensanglard.net/second_reality/parts/06-PAM_seq.png"></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ALKU by WILDFIRE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U2A by PSI</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PAM por TRUG / WILDFIRE</font></font></td>
</tr>
</tbody></table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ativos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os ativos de imagem ( </font></font><code>.LBM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) s√£o gerados usando o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deluxe Paint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um editor de bitmap extremamente popular nos anos 90. </font><font style="vertical-align: inherit;">Curiosamente, eles s√£o convertidos em uma matriz de bytes e compilados dentro do PART. </font><font style="vertical-align: inherit;">Como resultado disso, o arquivo exe tamb√©m baixa todos os ativos. </font><font style="vertical-align: inherit;">Al√©m disso, isso complica a engenharia reversa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entre os conjuntos legais de ativos est√£o a famosa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CITY</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SHIP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da √∫ltima cena 3D:</font></font><br>
<br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/second%20reality%20city.png"></div><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/second%20reality%20ship.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unidade interna PART</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como todos foram compilados nos execut√°veis ‚Äã‚Äãdo DOS, no PART, qualquer idioma poderia ser usado:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ASM.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PASCAL: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monstro das juntas de bronze (MNTSCRL.EXE)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T√∫nel pontilhado (TUNNELI.EXE)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espada de Raytracing (RAYSCRL.EXE)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algumas PARTES foram ainda mais longe e usam C para gerar c√≥digo ASM: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GLENZ / DOLOOP.C</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (poliedro para </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">download</font></a><font style="vertical-align: inherit;"> ) e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">efeito √Ågua (3DSINFLD.EXE)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quanto ao uso de mem√≥ria, eu li muito sobre o MMU na Wikipedia e em outros sites ... mas, de fato, cada parte poderia usar qualquer coisa, porque ap√≥s a execu√ß√£o, era completamente descarregada da mem√≥ria. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao trabalhar com VGA, cada parte usou seu pr√≥prio conjunto de truques e trabalhou em sua resolu√ß√£o. </font><font style="vertical-align: inherit;">Em todos eles, n√£o foram utilizados o Modo 13h e nem o ModoX, mas um modo 13h modificado com resolu√ß√£o pr√≥pria. </font><font style="vertical-align: inherit;">O arquivo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SCRIPT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geralmente menciona 320x200 e 320x400.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, ao analisar o PART, a leitura do c√≥digo-fonte se torna uma tarefa assustadora: a qualidade do c√≥digo e dos coment√°rios diminui drasticamente. </font><font style="vertical-align: inherit;">Talvez isso tenha acontecido por causa da pressa ou porque cada PARTE trabalhou em seu pr√≥prio desenvolvedor (ou seja, n√£o havia necessidade "real" de coment√°rios ou compreens√£o do c√≥digo), mas o resultado foi algo completamente confuso:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P√¢nico</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GLENZ</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algoritmos sofisticados n√£o s√£o apenas dif√≠cil de entender at√© mesmo os nomes de vari√°veis ( </font></font><code>a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>co[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...). </font><font style="vertical-align: inherit;">O c√≥digo seria muito mais leg√≠vel se os desenvolvedores nos deixassem dicas nas notas de lan√ßamento. </font><font style="vertical-align: inherit;">Como resultado, n√£o dediquei muito tempo ao estudo de cada parte; </font><font style="vertical-align: inherit;">A exce√ß√£o foi o mecanismo 3D respons√°vel pelo U2A.EXE e U2E.EXE.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Motor 3D Segunda Realidade</font></font></h3><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/3d_end.png"></div><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/3d_end2.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfim, decidi estudar em detalhes o mecanismo 3D, que era usado em duas partes: </font></font><code>U2A.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>U2E.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O c√≥digo fonte √© C com procedimentos otimizados para montadores (especialmente preenchimento e sombra do Gouro):</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CITY.C</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (c√≥digo principal).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VISU.C</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (biblioteca </font></font><code>visu.lib</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVID.ASM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (v√≠deo otimizado do assembler (limpeza, c√≥pia de tela etc.)).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADRAW.ASM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (objetos de desenho e truncamento).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACALC.ASM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (matrizes e c√°lculos r√°pidos de pecado / cos).</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/sr_3d_engine.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A arquitetura desses componentes √© bastante not√°vel: a biblioteca </font></font><code>VISU</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">executa todas as tarefas complexas, por exemplo, carregando ativos: objetos 3DS, materiais e fluxos (movimentos de c√¢mera e navio). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O mecanismo classifica os objetos que precisam ser desenhados e os renderiza usando o algoritmo do artista. </font><font style="vertical-align: inherit;">Isso leva a uma grande quantidade de redesenho, mas como as travas VGA permitem gravar 4 pixels ao mesmo tempo, n√£o √© t√£o ruim. </font></font><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um fato interessante: o</font></font></b></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mecanismo realiza transforma√ß√µes de maneira "antiga": em vez de usar matrizes 4x4 homog√™neas comuns, usa matrizes de rota√ß√£o 3 * 3 e um vetor de deslocamento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° um resumo no pseudo-c√≥digo:</font></font><br>
<br>
<pre><code class="cpp hljs">      main(){<font></font>
<font></font>
            scenem=readfile(tmpname);  <span class="hljs-comment">// Load materials</span>
            scene0=readfile(tmpname);  <span class="hljs-comment">// Load animation</span><font></font>
<font></font>
            <span class="hljs-keyword">for</span>(f=<span class="hljs-number">-1</span>,c=<span class="hljs-number">1</span>;c&lt;d;c++){  <span class="hljs-comment">//Load objects</span>
              <span class="hljs-built_in">sprintf</span>(tmpname,<span class="hljs-string">"%s.%03i"</span>,scene,e);<font></font>
              co[c].o=vis_loadobject(tmpname);<font></font>
            }<font></font>
<font></font>
            vid_init(<span class="hljs-number">1</span>);<font></font>
            vid_setpal(cp);<font></font>
<font></font>
            <span class="hljs-keyword">for</span>(;;){<font></font>
<font></font>
                vid_switch();<font></font>
                _asm mov bx,<span class="hljs-number">1</span>   _asm <span class="hljs-keyword">int</span> <span class="hljs-number">0f</span>ch <span class="hljs-comment">// waitb for retrace via copper simulator interrupt call </span><font></font>
                vid_clear();<font></font>
                <font></font>
                <span class="hljs-comment">// parse animation stream, update objects</span>
                <span class="hljs-keyword">for</span>(;;){}<font></font>
<font></font>
                vid_cameraangle(fov); <span class="hljs-comment">// Field of vision</span><font></font>
<font></font>
                <span class="hljs-comment">// Calc matrices and add to order list (only enabled objects)</span>
                <span class="hljs-keyword">for</span>(a=<span class="hljs-number">1</span>;ac&lt;conum;a++) <span class="hljs-keyword">if</span>(co[a].on) <span class="hljs-comment">/* start at 1 to skip camera */</span><font></font>
                    calc_applyrmatrix(o-&gt;r,&amp;cam);<font></font>
<font></font>
                <span class="hljs-comment">// Zsort via Bubble Sort</span>
                <span class="hljs-keyword">for</span>(a=<span class="hljs-number">0</span>;ac&lt;ordernum;a++)
                    <span class="hljs-keyword">for</span>(b=a<span class="hljs-number">-1</span>;b&gt;=<span class="hljs-number">0</span> &amp;&amp; dis&gt;co[order[b]].dist;b--)<font></font>
<font></font>
                <span class="hljs-comment">// Draw</span>
                <span class="hljs-keyword">for</span>(a=<span class="hljs-number">0</span>;ac&lt;ordernum;a++)<font></font>
                    vis_drawobject(o);<font></font>
              }<font></font>
            }<font></font>
            <span class="hljs-keyword">return</span>(<span class="hljs-number">0</span>);<font></font>
     }</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portas para sistemas modernos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s o lan√ßamento deste artigo, muitos desenvolvedores come√ßaram a portar Second Reality para sistemas modernos. </font><font style="vertical-align: inherit;">Claudio Matsuoka come√ßou a criar a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sr-port</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , uma porta C para Linux e OpenGL ES 2.0, que at√© agora parece bastante impressionante. </font><font style="vertical-align: inherit;">Nick Kovacs fez um √≥timo trabalho no PART PLZ, portando-o para C (agora faz parte do c√≥digo-fonte sr-port), bem como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para o javascript</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/iw/l9/jm/iwl9jmypg-njcygljgtgi3zaxdg.png"></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt501016/index.html">Sobre as tend√™ncias de desenvolvimento da arquitetura do processador, ou por que acredito no sucesso da Huawei no mercado de servidores</a></li>
<li><a href="../pt501018/index.html">Como contornar algumas restri√ß√µes do Google Tradutor</a></li>
<li><a href="../pt501020/index.html">Como testar o c√≥digo que cont√©m setTimeout / setInterval sob o cap√¥</a></li>
<li><a href="../pt501022/index.html">"Estou no deserto": por que o auto-isolamento acabou sendo um estresse s√©rio para n√≥s e o que tudo isso resultou</a></li>
<li><a href="../pt501026/index.html">Identifica√ß√£o banc√°ria remota: do complexo ao simples, ou Bancos, por que voc√™ precisa de biometria?</a></li>
<li><a href="../pt501032/index.html">Servidor barato de pe√ßas chinesas. Parte 1, ferro</a></li>
<li><a href="../pt501034/index.html">Semin√°rios semanais da IBM - maio de 2020</a></li>
<li><a href="../pt501040/index.html">Erros t√≠picos em aplicativos que levam ao incha√ßo no postgresql. Andrey Salnikov</a></li>
<li><a href="../pt501042/index.html">Likbez on Compliance: entendemos os requisitos dos reguladores no campo da seguran√ßa da informa√ß√£o</a></li>
<li><a href="../pt501044/index.html">N√£o segure pessoas por idiotas ou por que uma pessoa com experi√™ncia em engenharia pode queimar uma torre de celular (v√≠deo)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>