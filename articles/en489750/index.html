<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧕🏿 💚 👈🏿 Managing a Docker Swarm Cluster Using Swarmpit 😬 🏉 🆙</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day,% username%. It's time to uncover the blog after 6 years of inactivity and try again to bring something useful to the community. 
 
 I am ext...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Managing a Docker Swarm Cluster Using Swarmpit</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489750/"><img src="https://habrastorage.org/getpro/habr/post_images/1fa/e69/e6f/1fae69e6f5c70e49c561eeecc13a5e2d.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Good day,% username%. </font><font style="vertical-align: inherit;">It's time to uncover the blog after 6 years of inactivity and try again to bring something useful to the community. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I am extremely surprised that there is still no article on Swarmpit on the hub. </font><font style="vertical-align: inherit;">Of course, I understand that most people studying Docker probably stop on it and then try to climb Mount Everest called Kubernetes. </font><font style="vertical-align: inherit;">I don’t know the exact numbers, but I think most of them get lost and either get killed on Docker or just use it. </font><font style="vertical-align: inherit;">But in vain!</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Docker Swarm is an almost perfect system for almost everyone. I very much doubt that a really large number of people need Kubernetes. I killed him for almost a day and realized that I would kill 30 more so that I could use it calmly later, BUT I am a simple programmer and all this cool DevOps is not about programming at all. And then I heard about Docker Swarm and in 1 day it was absolutely easy to penetrate into it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Who needs Docker Swarm? You are already imbued with the great features of the Docker ecosystem. Your applications are made up of microservices. At the same time, you have several servers and I would like to have fault tolerance and somehow manage the load.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And in this article I will not describe how to configure it and what it is. </font><font style="vertical-align: inherit;">I will go even further and show an insanely simple tool for working with an already configured cluster. </font><font style="vertical-align: inherit;">Yes, the cluster needs to be configured, this is actually just a couple of commands ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">more details here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<br>
<pre><code class="plaintext hljs">docker swarm init<font></font>
docker swarm join<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, I could just leave a link to the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swarmpit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> website </font><font style="vertical-align: inherit;">and finish, you all can read, but it is installed in general by 1 team and you don’t even have to think there, you just relax and launch your containers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Link </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But still, I will describe a little and show screenshots from this wonderful admin panel.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Home screen</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All information about the cluster is collected here. </font><font style="vertical-align: inherit;">You can also pin selected services here and monitor their status:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9e8/3c7/334/9e83c73348c1a7713f7124e331ddd073.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Connection of third-party registries</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By default, Swarmpit will search for images in hub.docker.com</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/859/a56/a22/859a56a22257a13f5a8420b914cea611.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Adding a new service</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everything is extremely simple and clear here. </font><font style="vertical-align: inherit;">First we find the image in open or closed registries. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/554/8d7/0ad/5548d70ad4540fea19f0d60fe851d30d.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We select the version, the name and the mode itself: global or replicated. </font><font style="vertical-align: inherit;">You can also specify a command to execute: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/34c/ff1/6cf/34cff16cfbea72a93e05df8738755144.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then configure its network. </font><font style="vertical-align: inherit;">Can add from general, configure ports and give hostname alias for the service. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e40/560/1f8/e405601f8a931c464cc012eabb96bba3.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We set environment variables, connect storage, add configs and secret configs. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/fdb/3dd/6ce/fdb3dd6ce794de2c4dbdf2701cf0a837.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We set limits for the application: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/927/0f5/f3c/9270f5f3cc6ce05c002d4aff24fc341e.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We can issue tags to the service, enable auto-update of the image, issue nodes for the deployment and generally configure the re-deployment policy to avoid application downtime: Log </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/04f/601/2c4/04f6012c4901ab0b1d97a54c7f44d5ea.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
settings:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f04/b02/ec3/f04b02ec31f08dd54dd832457ca72129.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Of course, you can add networks and change them</font></font></h4><br>
<img src="https://habrastorage.org/getpro/habr/post_images/5dd/eab/cf6/5ddeabcf601de005584f2e67c4219a27.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. View the nodes connected to the cluster</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can have several nodes on one machine (read about </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docker-machine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), but the Swarmpit instance can be connected to only one cluster and will only monitor it.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c24/527/5c0/c245275c0a8be1aff702c11bfd4d39dc.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. Add docker-controlled repositories</font></font></h4><br>
<img src="https://habrastorage.org/getpro/habr/post_images/ad4/eb2/637/ad4eb26376e475c9078db98dbccfb7c8.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. Well, by itself add configs</font></font></h4><br>
<img src="https://habrastorage.org/getpro/habr/post_images/491/9ce/d80/4919ced803c3fa2d1b05fc1201fc5291.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. You can also add users with 2 types of access</font></font></h4><br>
<img src="https://habrastorage.org/getpro/habr/post_images/03f/43f/0b4/03f43f0b45dcb8068b704ce098887a3c.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Because this docker swarm by itself can create stacks and their launch is possible only with the help of the docker-compose format: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/24a/291/816/24a291816b67f68bd4bbf7b8e672d7b3.png" alt="image"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pros:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
+ I am not a kung fu console master, although I deployed some of my services in it and killed a lot of time for this. Swarmpit saves this time great, especially when you start playing with configs for the same nginx for example. And soon they promise to make versioning of the configs with auto-discovery of related services. Those. changed the line, saved and the config automatically flew to all services where it was previously indicated. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ Also, I did not mention the presence of the API, and here there are just gorgeous opportunities for managing the cluster with my logic. You can monitor the state through the API, add replicas to the application during a surge, and reduce them when you reduce them. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minuses:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-Master password cannot be reset in any way and you need to reinstall the cluster if you lost it </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-Developers like 1-2, so they add features for a long time, but at the moment I have not found </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
any </font><font style="vertical-align: inherit;">critical bugs </font><font style="vertical-align: inherit;">-All minor flaws, but most of them are in issue and the developers promise to fulfill all 2.0 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-Control only on the connected cluster, no support for third-party cluster or connect to there and probably will not be </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
a matter of once again give a link to the website Swarmpit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tyts</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Github page Swarmpit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tyts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the moment, I have done 2 more open source projects on NodeJS, if interested I can talk about them too. </font><font style="vertical-align: inherit;">The 1st one is a redirect for an ad-free telegram and ultra-small (Docker Image weighs 27MB and is also written in NodeJS without a single package), the 2nd more complicated is the cdn server for images, which can modify images on the fly (resize, format change, quality, etc.) and can save $ 200 (maybe less, this is the price of Business CloudFlare that allows you to do the same).</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en489736/index.html">[Translation] IOC e-Sports Communiqué and Declaration</a></li>
<li><a href="../en489740/index.html">Simplify the writing of HTTP handlers in Golang</a></li>
<li><a href="../en489742/index.html">Hackathon for 200 people - what you need to organize</a></li>
<li><a href="../en489744/index.html">Convert infix notation to postfix</a></li>
<li><a href="../en489746/index.html">In most cases, serialization in Android is not needed</a></li>
<li><a href="../en489754/index.html">20 project management systems, overview of 100 chips</a></li>
<li><a href="../en489756/index.html">Create a pencil effect in SVG</a></li>
<li><a href="../en489758/index.html">Angular: an example of using NGRX</a></li>
<li><a href="../en489760/index.html">Consciousness and existence. Quantum mechanics without paradoxes</a></li>
<li><a href="../en489762/index.html">A simple example of parsing and data analytics for World of Tanks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>