<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔳 🤱🏻 👨🏻‍🚒 JPEG形式の仕組み 👩🏼‍🤝‍👨🏾 🤞🏻 📹</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="JPEG画像は私たちのデジタルライフのいたるところにありますが、この認識のカバーの背後には、人間の目では認識されない詳細を排除するアルゴリズムがあります。その結果、最小のファイルサイズで最高の視覚的品質が実現します。私たちの目が正確に見ないものを見てみましょう！
 
 
 当然のことながら、友達に写...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>JPEG形式の仕組み</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454944/"><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JPEG画像は私たちのデジタルライフのいたるところにありますが、この認識のカバーの背後には、人間の目では認識されない詳細を排除するアルゴリズムがあります。</font><font style="vertical-align: inherit;">その結果、最小のファイルサイズで最高の視覚的品質が実現します。</font><font style="vertical-align: inherit;">私たちの目が正確に見ないものを見てみましょう！</font></font></h4><br>
<img src="https://habrastorage.org/webt/xh/7m/8n/xh7m8nokzhgfqixb00fnwcmkthm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然のことながら、友達に写真を送信する機能は簡単に利用でき、使用するデバイス、ブラウザ、オペレーティングシステムについて心配する必要はありません。ただし、これは常にそうであるとは限りません。 1980年代初頭までに、コンピューターはデジタル画像を保存および表示する方法を知っていましたが、これを行う最良の方法については多くの競合するアイデアがありました。あるコンピュータから別のコンピュータに画像を送信するだけでは、すべてが機能することを期待できませんでした。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1986年にこの問題を解決するため</font><font style="vertical-align: inherit;">に、国際標準化機構（ISO）と国際電気標準会議（IEC）の共同作業の枠組みの中で設立された</font><font style="vertical-align: inherit;">「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Incorporated Panel on pictures</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」（JPEG JPEG Photographic Experts Group ） </font><font style="vertical-align: inherit;">という名前で世界中から専門家の委員会が結成</font><font style="vertical-align: inherit;">されました。 ）-本部がジュネーブ（スイス）にある2つの国際標準化組織。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JPEGと呼ばれる人々のグループが1992年にJPEGデジタル画像圧縮標準を作成しました。インターネットを使用している人は誰でも、JPEGでエンコードされた画像に遭遇する可能性がありました。これは、画像をエンコード、送信、保存する最も一般的な方法です。 Webページから電子メールやソーシャルネットワークに至るまで、JPEGは1日に何十億回も使用されます。ほとんどの場合、オンラインで画像を見たり送信したりするたびに使用されます。 JPEGがないと、Webの活気がなくなり、速度が低下し、おそらく猫の写真が少なくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、JPEG画像をデコードする方法について説明します。</font><font style="vertical-align: inherit;">つまり、コンピューターに保存されている圧縮データを画面に表示される画像に変換するために必要なものについてです。</font><font style="vertical-align: inherit;">これについて知っておく価値はあります。それは、私たちが日常的に使用しているテクノロジーを理解するために重要であるだけでなく、圧縮のレベルを明らかにすることによって、知覚と視覚、さらには目が最も敏感な詳細をよりよく理解するからです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、この方法で画像を再生することは非常に興味深いです。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/4f8/312/709/4f831270939c4f685405283f4286e867.gif"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jpegの中を見る</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンピュータでは、すべてが2進数のシーケンスとして保存されます。通常、これらのビット（0と1）は8バイトにグループ化され、バイトを構成します。コンピューターでJPEG画像を開くと、何か（ブラウザー、OS、その他）がバイトをデコードし、表示可能な色のリストの形式で元の画像を復元します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このかわいい</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">猫の写真</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をダウンロード</font><font style="vertical-align: inherit;">してテキストエディターで開くと、一貫性のないキャラクターがたくさん表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1e4/8a0/017/1e48a0017ada1830f50eefc5079410ea.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここでは、Notepad ++を使用してファイルの内容を調べています。WindowsのNotepadなどの通常のテキストエディターは保存後にバイナリを破損し、JPEG形式を満たさなくなるためです。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テキストエディタで画像を開くと、目をこすって色の斑点が見え始めるときに脳を混乱させるのと同じように、コンピュータを混乱させます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたが見るこれらのスポットは、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">閃光</font></a><font style="vertical-align: inherit;">として知られています</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、および光刺激や心によって生成された幻覚への暴露の結果ではありません。それらはあなたの脳が視神経のあらゆる電気信号が光についての情報を伝えると信じているので起こります。信号が音であるか、視覚であるか、その他のものであるかどうかを確認することは不可能であるため、脳はそのような仮定を行う必要があります。体内のすべての神経は、まったく同じ電気インパルスを伝達します。目を押すと、視覚的ではない信号が送信されますが、脳が解釈する目の受容体を活性化します-この場合、誤って-視覚的なものとして。あなたは文字通り圧力を見ることができます！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンピューターがどのように脳のように見えるかを考えるのはおかしいですが、それはデータの価値（神経によって身体を介して送信されるか、コンピューターに保存される）がその解釈にどの程度依存するかを示す有用な類推でもあります。すべてのバイナリデータはゼロと1で構成され、あらゆる種類の情報を送信できる基本コンポーネントです。コンピュータは、ファイル拡張子などのヒントを使用してそれらを解釈する方法を推測することがよくあります。そして今、私たちは彼にそれらをテキストとして解釈することを強いています。これはテキストエディターが期待していることだからです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JPEGをデコードする方法を理解するには、元の信号自体（バイナリデータ）を確認する必要があります。これは、16進エディターを使用して、または</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">元の記事のWebページで</font></a><font style="vertical-align: inherit;">直接実行</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">できます。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！テキストボックス内のすべてのバイト（ヘッダーを除く）が横にある画像が10進数形式で表示されます。あなたはそれらを変更することができ、スクリプトはその場で再コード化して新しい画像を生成します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0e/tu/az/0etuazw_ujtrjmepdjpaacmg_jo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このエディタで遊ぶだけでたくさん学ぶことができます。たとえば、ピクセルが格納されている順序を教えてください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、一部の数値を変更しても画像にまったく影響がないのは奇妙ですが、たとえば、最初の行の数値17を0に置き換えると、写真は完全に悪くなります！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ql/47/xz/ql47xznmt7fq29yoynour0fscls.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
行1988の7を数値254に置き換えるなどの他の変更では、色が変更されますが、後続のピクセルのみが変更されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tj/tu/0o/tjtu0o9qppmq2pgv5mpfh02hpzw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おそらく最も奇妙なことは、いくつかの数字が色だけでなく画像の形も変えるということです。</font><font style="vertical-align: inherit;">12行目の70を2に変更し、画像の一番上の行を見て、意味を確認します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wr/ui/w3/wruiw3ds_yihzasjgytn8vul1de.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、使用するJPEGイメージに関係なく、バイトを編集するときは常にこれらの不可解なチェスシーケンスが見つかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JPEG圧縮は3つの異なるテクノロジーで構成されているため、エディターで操作するとき、これらのバイトから写真がどのように再作成されるかを理解するのは困難です。</font><font style="vertical-align: inherit;">それぞれを個別に調べて、私たちが観察している不思議な行動を明らかにします。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3つのレベルのJPEG圧縮：</font></font></b><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">色のダウンサンプリング</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">離散コサイン変換と離散化</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系列の長さ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デルタ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ハフマンの</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">エンコード</font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
圧縮のスケールを想像できるように、上の画像は79,819の数値、つまり約79 Kbを表していることに注意してください。</font><font style="vertical-align: inherit;">圧縮せずに保存した場合、ピクセルごとに、赤、緑、青のコンポーネントに対して3つの数値が必要になります。</font><font style="vertical-align: inherit;">それは917,700の数字、またはおよそです。</font><font style="vertical-align: inherit;">917 Kb。</font><font style="vertical-align: inherit;">JPEG圧縮の結果、結果のファイルは10倍以上減少しました！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、この画像はより強力に圧縮できます。</font><font style="vertical-align: inherit;">以下は2つの画像を並べたものです。右側の写真は最大16 Kbに縮小されており、非圧縮バージョンより57倍小さくなっています。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ec8/a0f/b53/ec8a0fb53e28470aafb8fb6b04713de3.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
よく見ると、これらのイメージが同一でないことがわかります。</font><font style="vertical-align: inherit;">どちらもJPEG圧縮された画像ですが、正しいものはボリュームがはるかに小さいです。</font><font style="vertical-align: inherit;">彼女はまた少し悪く見えます（背景色の四角を見てください）。</font><font style="vertical-align: inherit;">したがって、JPEGは非可逆圧縮とも呼ばれます。</font><font style="vertical-align: inherit;">圧縮中に画像が変化し、一部の詳細が失われます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.カラーダウンサンプリング</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、最初の圧縮レベルのみを使用した画像です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bn/jq/j3/bnjqj3gjgcxd3xazrfnepcfwo-s.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（インタラクティブバージョン- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事）。 1つの数値を削除すると、すべての色が破壊されます。ただし、正確に6つの数字を削除しても、実際には画像には影響しません。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これで、数字が少しわかりやすくなりました。これはほぼ単純な色のリストであり、各バイトは正確に1ピクセルを変更しますが、同時に非圧縮画像のサイズの半分です（このような縮小サイズでは約300 KBを占有します）。なぜだと思いますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの数値が標準の赤、緑、青のコンポーネントを表していないことがわかります。すべての数値をゼロに置き換えると、緑ではなく（白ではなく）画像が得られるためです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ij/ar/qj/ijarqjsfiuanba52sxsn-ovh6q0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、これらのバイトがY（明るさ）、</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ab/sl/bt/abslbtgj10nk62g7ksdlx0lusck.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cb（相対的な青さ）、</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_s/ao/1c/_sao1c1div5bv1dltl6gahkp86a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
とCr（相対的な赤み）の写真。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mp/fz/jt/mpfzjtlicxlsmw3wmbrnqhywinu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RGBを使用しないのはなぜですか？実際、これが最新の画面のほとんどが機能する方法です。モニターは、赤、緑、青など、ピクセルごとに強度が異なる任意の色を表示できます。白は3つすべてを最大の明るさでオンにすることで得られ、黒はオフにして得られます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c27/504/f77/c27504f7737bca3efab3468f2a09aacc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それはまた、人間の目の働きに非常に似ています。私たちの目の色受容体は</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">錐体</font></a><font style="vertical-align: inherit;">と呼ばれてい</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"、および3つのタイプに分かれており、それぞれが赤、緑、または青のいずれかに敏感です[Sタイプのコーンは紫から青（英語の短-短波スペクトルからのS）、Mタイプに敏感です-緑-黄色（イングリッシュミディアム-中波からのM）、およびLタイプ-スペクトルの黄色-赤（英語からのL。スペクトル）は人に色覚を与えます</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">約]。</font><font style="vertical-align: inherit;">私たちの目のもう1つのタイプの視細胞である桿体は、明るさの変化しか検出できませんが、はるかに感度が高くなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、私たちの目は色の変化よりもはるかに優れた明るさの変化に気づきます。色を明るさから分離すると、少しの色を取り除くことができ、誰も何も気付かないでしょう。カラーダウンサンプリングは、画像のカラーコンポーネントを、輝度コンポーネントよりも低い解像度で表現するプロセスです。上記の例では、各ピクセルには1つのYコンポーネントがあり、4つのピクセルの各グループには1つのCbコンポーネントと1つのCrがあります。したがって、画像の色情報は元の画像の4分の1です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
YCbCr色空間はJPEGだけでなく使用されます。もともとは1938年にテレビ番組のために発明されました。誰もがカラーTVを持っているわけではないため、色と明るさを分離することで誰もが同じ信号を受信できるようになりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、エディターから1つの数値を削除すると、すべての色が完全に破壊されます。コンポーネントはYYYY Cb Crとして格納されます（実際には、必ずしもこの順序である必要はありません。格納順序はファイルヘッダーで指定されています）。最初の数値を削除すると、最初のCb値はY、CrはCbとして認識され、全体としてドミノ効果が発生し、画像のすべての色が切り替わります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JPEG仕様では、YCbCrを使用する必要はありません。しかし、RGBと比較してダウンサンプリング後の画像の品質が向上するため、ほとんどのファイルで使用されます。しかし、私の言葉を信じる必要はありません。以下の表で、個々のコンポーネントのダウンサンプリングがRGBとYCbCrでどのように見えるかをご確認ください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9b/fl/ei/9bfleirkdnq8sdwiudks05bdz1o.png"> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（インタラクティブバージョン- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
青を削除しても、赤や緑ほど目立ちません。これは、目の中に600万個の錐体があるためです。約64％が赤に、32％が緑に、2％が青に敏感です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンポーネントY（左下）のサブサンプリングが最もよく見られます。わずかな変化も目立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
画像をRGBからYCbCrに変換しても、ファイルサイズは小さくなりませんが、削除できる目立たない詳細を見つけやすくなります。</font><font style="vertical-align: inherit;">非可逆圧縮は第2段階で発生します。</font><font style="vertical-align: inherit;">それは、データをより圧縮可能な形式で表すという考えに基づいています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.離散コサイン変換と離散化</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この圧縮レベルの大部分は、JPEGの本質を決定します。色をYCbCrに変換した後、コンポーネントは個別に圧縮されるため、後でYコンポーネントに集中することができ、このレベルを適用した後のYコンポーネントのバイトはこのようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sr/c2/en/src2enhysp480z4qoycrgptdn5m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（インタラクティブバージョン- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事）。</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インタラクティブバージョンでは、ピクセルをクリックすると、そのピクセルを示す行までエディターがスクロールします。最後から数字を削除するか、特定の数字にいくつかのゼロを追加してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一見、それは非常に悪い圧縮のように見えます。画像には100,000ピクセルあり、明るさ（Y成分）を示すには102,400の数値が必要です。これは、何も圧縮しないよりも悪いことです！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、これらの数値のほとんどはゼロであることに注意してください。さらに、イメージを変更せずに、行末のこれらのゼロをすべて削除できます。残りの数は約26,000で、これはほぼ4分の1になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このレベルには、チェスパターンの秘密があります。私たちが見た他の効果とは異なり、これらのパターンの外観はグリッチではありません。それらは画像全体の構成要素です。エディターの各行には、64個の一意のパターンの強度に対応する64個の数値、離散コサイン変換（DCT）係数が含まれています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのパターンは、コサイングラフに基づいて形成されます。それらのいくつかは次のようになります</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/2cc/8da/dd7/2cc8dadd7ca3d6565753fdd8f14a4fcd.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。64個の係数のうち8個</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
以下は64個のパターンすべてを示す画像です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z3/8n/ri/z38nrihqi2zbdt2cznzqy3p1bh0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（インタラクティブバージョン- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オリジナルの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事）。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これらのパターンは、8x8画像の基礎を形成するため、特に重要です。線形代数に慣れていない場合は、これらの64パターンから任意の8x8画像を取得できることを意味します。 DCTは、画像を8x8ブロックに分割し、各ブロックをこれらの64個の係数の組み合わせに変換するプロセスです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どの画像も64の特定のパターンで構成できるという事実は、魔法のようです。ただし、これは、地球上の任意の場所を緯度と経度の2つの数値[半球を示す/約2桁]で表すことができるということと同じです。 transl。]。私たちは地球の表面を2次元と見なすことが多いので、必要な数は2つだけです。 8x8の画像には64の次元があるため、64の数値が必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これが圧縮の意味でどのように役立つかはまだ明らかではありません。 8x8の画像を表すために64個の数値が必要な場合、64個の輝度コンポーネントを格納するだけのほうがよいのはなぜですか？これは、3つのRGB番号を3つのYCbCr番号に変換したのと同じ理由で行います。これにより、目に見えない詳細を削除できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JPEGはDCTを8x8ブロックに適用するため、この段階でどの詳細が削除されるかを正確に確認することは困難です。しかし、誰もがそれを全体像に適用することを禁じません。画像全体に適用した場合のコンポーネントYのDCTは次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ab/sl/bt/abslbtgj10nk62g7ksdlx0lusck.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後から、</font><font style="vertical-align: inherit;">画像に</font><font style="vertical-align: inherit;">目立った変化がほとんどない状態で60,000を超える数値を削除できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/we/mq/ma/wemqmatswqyazpgyxm12k-g7l-s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、最初の5つの数値をリセットすると、違いが明白になることに注意してください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/m0/fj/tj/m0fjtjcfr_-6b50duzk3-zvl7gi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の数字は画像の低周波数の変化を示しており、私たちの目はそれらを最もよく捉えています。終わり近くの数字は、気づきにくい高周波数の変化を示しています。 「目に見えないものを見る」ために、最初の5000の数値をゼロにすることにより、これらの高周波部品を分離できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/si/gj/w2/sigjw20pylfjmu0rzqjocl6oqv4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最大の変化がピクセルごとに発生する画像のすべての領域が表示されます。猫の目、口ひげ、テリーブランケット、左下の影が目立ちます。最初の10,000の数値をクリアすると、さらに先に進むことができます：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/eg/vi/9a/egvi9a_wkwv48xktp7jiyajnhuc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
20,000：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/y9/fr/ri/y9frrialb_94gnwdd-plq_hcyqc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
40,000：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0d/ce/kr/0dcekrobg9_ir-hqnggr9fjlw4u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
60,000：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uo/8f/qx/uo8fqxadj-snukbdf1dcjgvoux0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの高周波パーツはjpegであり、圧縮フェーズ中に削除されます。色をDCT係数に変換しても損失はありません。損失は​​離散化ステップで生成され、高周波値またはゼロに近い値が削除されます。 JPEGの保存の品質を下げると、プログラムは削除された値の数のしきい値を増やします。これにより、ファイルサイズは小さくなりますが、画像はよりピクセル化されます。したがって、最初のセクションの画像は57倍小さく、このように見えました。各8x8ブロックは、より優れたバージョンと比較して、DCT係数の数がはるかに少ないようです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
画像を段階的にストリーミングするようなクールな効果を作成できます。ぼやけた画像を表示することができます。ダウンロードされる係数が増えるほど、詳細になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、楽しみのために、24,000の数値を使用した場合、</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vn/sf/xr/vnsfxrqyogsnc4qx9pzsok--rno.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または5,000 </font><font style="vertical-align: inherit;">を使用した場合に何が発生するかを示します</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oi/y3/u6/oiy3u6saz6kliguv_pm8iucdbqa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.系列の長さ、デルタ、ハフマンのコーディング</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これまでのところ、圧縮のすべての段階で損失が発生しています。</font><font style="vertical-align: inherit;">逆に、最後の段階は損失なしで行きます。</font><font style="vertical-align: inherit;">情報は削除されませんが、ファイルサイズが大幅に縮小されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
情報を破棄せずに圧縮するにはどうすればよいですか？</font><font style="vertical-align: inherit;">700 x 437の単純な黒い長方形をどのように記述するか想像してみてください。JPEG </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はこれに5000の数値を使用しますが、はるかに優れた結果を得ることができます。</font><font style="vertical-align: inherit;">このような画像を可能な限り少ないバイト数で記述するコーディングスキームを想像できますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私が思いつくことができる最小のスキームは4つを使用します。3つは色を示し、4つ目はその色を持つピクセルの数です。このように圧縮された方法で繰り返し値を表すという考え方は、系列長コーディングと呼ばれます。エンコードされたデータを元の形式で復元できるため、損失はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
黒い長方形のJPEGファイルのサイズは4バイトよりはるかに大きいです。DCTレベルでは、8x8ピクセルのブロックに圧縮が適用されることに注意してください。したがって、少なくとも64ピクセルごとに1つのDCT係数が必要です。単一のDCT係数とそれに続く63個のゼロを格納する代わりに、系列の長さをエンコードすることで1つの数値を格納し、「その他すべてがゼロ」であることを示すことができるため、1つが必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デルタコーディングは、各バイトに絶対値ではなく、ある値との差が含まれる手法です。したがって、特定のバイトを編集すると、他のすべてのピクセルの色が変更されます。たとえば、</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
12 13 14 14 14 13 13 14 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を</font><font style="vertical-align: inherit;">格納する代わりに、</font><font style="vertical-align: inherit;">12 </font><font style="vertical-align: inherit;">から始めて、次の数値を取得するためにどれだけ加算または減算する必要があるかを単に示すことができます。そして、このデルタコーディングのシーケンスは次の形式をとります。12 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1 1 0 0 -1 0 1 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変換されたデータは元のデータよりも少なくはありませんが、すでに圧縮する方が簡単です。系列の長さをエンコードする前にデルタコーディングを使用すると、ロスレス圧縮を維持しながら、大きな効果があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デルタコーディングは、8x8ブロック以外で使用される数少ないテクニックの1つです。 64のDCT係数のうち、1つは単に一定の波動関数（無地）です。輝度コンポーネントの各ブロックの平均輝度、またはCbコンポーネントの平均青さなどを表します。各DCTブロックの最初の値はDC値と呼ばれ、各DC値は前の値に対してデルタコーディングを受けます。したがって、最初のブロックの明るさを変更すると、すべてのブロックに影響します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後の謎は残っています：特異な変化はどのように全体像を完全に台無しにしますか？これまでのところ、圧縮レベルにはそのような特性はありませんでした。答えはJPEGヘッダーにあります。最初の500バイトには、画像に関するメタデータ（幅、高さなど）が含まれています。これまでのところ、これらのデータを処理していません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ヘッダーがなければ、JPEGをデコードすることはほとんど不可能です（まあ、または非常に難しい）。まるで絵を描こうとしているように見え、自分の印象を伝えるために言葉を生み出し始めます。私が伝えたいとおりの意味を持つ言葉を発明できるので、説明はおそらく非常に簡潔になりますが、他のすべての言葉には意味がありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ばかげて聞こえるかもしれませんが、まさにそれが起こります。各JPEG画像は、固有のコードで圧縮されています。コードの辞書はヘッダーに保存されます。この手法はハフマンコードと呼ばれ、辞書はハフマンテーブルと呼ばれます。ヘッダーでは、テーブルは2バイト（255と196）でマークされています。各カラーコンポーネントは独自のテーブルを持つことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テーブルへの変更は、あらゆるイメージに根本的に影響します。良い例は、15行目の12の1を変更することです</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mz/-c/xd/mz-cxdyzf2haxuj1_tojoatbl7s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、テーブルが個々のビットの読み取り方法を示しているためです。これまでは、10進形式の2進数のみを扱ってきました。しかし、これは、1をバイトに格納したい場合、00000001のように見えるという事実を隠しています。なぜなら、各バイトには1つしか必要ない場合でも、正確に8ビットである必要があるためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
小さな数が多い場合、これは潜在的にスペースの大きな無駄になります。ハフマンコードは、この要件を緩和するための手法であり、各数値は8ビットを占める必要があります。これは、2バイトが表示される場合、</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
234 115</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、ハフマンテーブルに応じて、3つの数値になる可能性があります。それらを抽出するには、まずそれらを別々のビットに分割する必要があります</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。1110101001110011 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、表を参照して、それらをグループ化する方法を理解します。たとえば、10進法では最初の6ビット（111010）または58であり、その後に5ビット（10011）または19が続き、最後に最後の4ビット（0011）または3 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
になることがあり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">したがって、バイトを理解することは非常に困難です</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">圧縮のこの段階で。バイトはそれがどう見えるかを表すものではありません。この記事では、テーブルの操作の詳細については触れませんが</font><font style="vertical-align: inherit;">、このテーマに関する</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">十分な</font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">資料</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がネットワーク上にあります</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これがわかっている場合に実行できる興味深いトリックの1つは、ヘッダーをJPEGから分離して個別に保存することです。</font><font style="vertical-align: inherit;">実際、ファイルを読み取ることができるのはあなただけです。</font><font style="vertical-align: inherit;">Facebookは、ファイルサイズをさらに削減するためにこれを行っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他にできることは、ハフマンテーブルをかなり変更することです。</font><font style="vertical-align: inherit;">他の人にとっては、破損した画像のように見えます。</font><font style="vertical-align: inherit;">そして、あなただけがその修正の魔法のバージョンを知るでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要約すると、JPEGデコードには何が必要ですか？</font><font style="vertical-align: inherit;">これは必要である：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ヘッダーからハフマンテーブルを抽出し、ビットをデコードします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 系列の長さとデルタのコーディングの逆変換を実行することにより、各8x8ブロックの各色と輝度コンポーネントの離散コサイン変換係数を抽出します。</font></font></li>
<li>     ,        88.</li>
<li>   ,    (    ).</li>
<li>    YCbCr     RGB.</li>
<li>    !</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
猫と一緒に写真を簡単に見れる本格派！</font><font style="vertical-align: inherit;">ただし、これについて私が気に入っているのは、JPEGテクノロジが人間中心である方法を確認することです。</font><font style="vertical-align: inherit;">これは、従来の技術よりもはるかに優れた圧縮を実現できる認識の特性に基づいています。</font><font style="vertical-align: inherit;">そして今、JPEGがどのように機能するかを理解すると、これらのテクノロジーを他の領域に転送する方法を想像できます。</font><font style="vertical-align: inherit;">たとえば、ビデオのデルタコーディングは、フレームごとに変化しない領域全体（たとえば、背景など）がよくあるため、ファイルサイズを大幅に削減できます。</font></font><br>
<br>
<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事で使用されているコード</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は公開</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">されて</font></a><font style="vertical-align: inherit;">おり、画像を独自のものに置き換える手順が含まれています。</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja454930/index.html">V8のガベージコレクション：新しいOrinoco GCのしくみ</a></li>
<li><a href="../ja454932/index.html">投資とソフトウェア：取引所で取引するための5つの取引端末</a></li>
<li><a href="../ja454936/index.html">Vivaldi：広告のブロックはユーザーの選択であるべきです</a></li>
<li><a href="../ja454938/index.html">FPGAベースのプロセッサシステムに埋め込むための独自のコアの開発</a></li>
<li><a href="../ja454940/index.html">旅行医療保険：詳細な手順</a></li>
<li><a href="../ja454946/index.html">グローバルな状態：それらを回避する理由と方法</a></li>
<li><a href="../ja454958/index.html">Inside View：EPFLの大学院。パート4.1：日常生活</a></li>
<li><a href="../ja454960/index.html">微生物相。薬が腸内細菌に与える影響</a></li>
<li><a href="../ja454962/index.html">世界中のIT企業は、元従業員によって競合他社からどのように保護されていますか？</a></li>
<li><a href="../ja454964/index.html">海洋調査におけるコンピュータービジョンの使用、または死者の胸に12人がいる</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>