<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌶️ 🏥 🤚🏽 Penerapan efek cat air dalam game 🦌 🐭 🗨️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="pengantar
 Ketika pada Januari 2019 kami mulai mendiskusikan permainan warna baru kami . , kami segera memutuskan bahwa efek cat air akan menjadi elem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Penerapan efek cat air dalam game</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494924/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f9b/8bc/7c5/f9b8bc7c53c4d97ed983c428ce53926b.gif" alt="gambar"></div><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengantar</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika pada Januari 2019 kami mulai mendiskusikan permainan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">warna</font></font></em></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baru kami </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><em><font style="vertical-align: inherit;">.</font></em></a><font style="vertical-align: inherit;"> , kami segera memutuskan bahwa efek cat air akan menjadi elemen paling penting. Terinspirasi oleh </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iklan </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bulgari</font></font></em></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"> ini</font></a><font style="vertical-align: inherit;"> , kami menyadari bahwa penerapan lukisan cat air harus konsisten dengan kualitas tinggi dari sumber daya yang tersisa yang kami rencanakan untuk dibuat. Kami menemukan artikel yang menarik oleh para peneliti dari Adobe </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(1)</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Teknik cat air yang dijelaskan di dalamnya tampak luar biasa, dan karena sifat vektornya (bukan piksel), ia dapat bekerja bahkan pada perangkat seluler yang lemah. Implementasi kami didasarkan pada studi ini, kami mengubah dan / atau menyederhanakannya karena persyaratan kinerja kami berbeda. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">warna</font></font></em></a><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ini adalah permainan, oleh karena itu, selain menggambar itu sendiri, kami perlu membuat seluruh lingkungan 3D dan menjalankan logika permainan dalam satu bingkai. </font><font style="vertical-align: inherit;">Kami juga berusaha memastikan bahwa simulasi dilakukan secara real time dan pemain segera melihat apa yang digambar.</font></font><br>
<a name="habracut"></a><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2e8/277/d95/2e8277d95ed5a29796176e375ecf59c5.gif"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simulasi warna air. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam artikel ini, kami akan membagikan detail masing-masing penerapan teknik ini di mesin game Unity dan berbicara tentang bagaimana kami mengadaptasinya agar berfungsi secara mulus di perangkat seluler kelas bawah. </font><font style="vertical-align: inherit;">Kami akan berbicara lebih banyak tentang tahapan utama dari algoritma ini, tetapi tanpa menunjukkan kodenya. </font><font style="vertical-align: inherit;">Implementasi ini dibuat di Unity 2018.4.2 dan kemudian diperbarui ke versi 2018.4.7.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa itu pewarnaan?</font></font></h1><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tint</font></font></em></a><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Ini adalah permainan puzzle yang memungkinkan pemain untuk menyelesaikan level, mencampur warna-warna cat air sehingga cocok dengan warna-warna origami. </font><font style="vertical-align: inherit;">Permainan ini dirilis pada musim gugur 2019 di Apple Arcade untuk iOS, macOS, dan tvOS.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bb0/630/d46/bb0630d469679d86535ec46fd97c8f0a.png" width="2224" height="1668"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tangkapan layar screenshot.</font></font></i><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Persyaratan</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Teknik yang dijelaskan dalam artikel saya dapat dibagi menjadi tiga tahap utama yang dilakukan di setiap frame:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hasilkan tempat baru berdasarkan input pemain dan tambahkan ke daftar tempat</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simulasi cat untuk semua tempat di daftar</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Render tempat</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bawah ini kita akan berbicara secara rinci tentang bagaimana kita menerapkan setiap tahapan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami bertujuan untuk mencapai 60 FPS, yaitu, tahapan ini dan semua logika yang dijelaskan di bawah ini dilakukan 60 kali per detik.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mendapatkan input</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di setiap bingkai, kami mengubah input pemain (tergantung pada platform, itu bisa berupa sentuhan, posisi mouse atau kursor virtual) menjadi struktur </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">splatData</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang berisi posisi, vektor gerakan, warna dan tekanan (2). Pertama, kami memeriksa panjang gesek pemain di layar dan membandingkannya dengan nilai ambang yang diberikan. Dengan gesekan pendek, kami menghasilkan satu titik per bingkai pada posisi input. Dalam kasus yang berlawanan, kami mengisi jarak antara titik awal dan titik akhir gesekan pemain dengan titik-titik baru yang dibuat dengan kepadatan yang telah ditentukan (ini memastikan kepadatan cat konstan terlepas dari kecepatan gesek). Warnanya menunjukkan cat saat ini digunakan, dan kemiringan gerakan menunjukkan arah gesek. Bintik-bintik baru yang dibuat ditambahkan ke koleksi yang disebut </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">splatList</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, yang juga berisi semua tempat yang dibuat sebelumnya. </font><font style="vertical-align: inherit;">Ini digunakan untuk mensimulasikan dan membuat cat pada langkah-langkah berikut. </font><font style="vertical-align: inherit;">Setiap titik individu menunjukkan "setetes" cat yang perlu dirender - blok bangunan utama lukisan cat air. </font><font style="vertical-align: inherit;">Gambar cat air jadi akan menjadi hasil rendering puluhan / ratusan tempat berpotongan. </font><font style="vertical-align: inherit;">Selain itu, nilai masa pakai (dalam bingkai) ditetapkan ke tempat yang baru dibuat, yang menentukan berapa lama tempat tersebut dapat disimulasikan.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ccb/e15/628/ccbe15628a553ba6ceb25af2fd2e2e36.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh interpolasi titik gesek panjang. </font><font style="vertical-align: inherit;">Lingkaran kosong menunjukkan tempat yang dibuat secara berkala.</font></font></i><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kanvas</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti cat asli, kita membutuhkan kanvas. </font><font style="vertical-align: inherit;">Untuk mengimplementasikannya, kami menciptakan area terbatas dalam ruang 3D yang terlihat seperti selembar kertas. </font><font style="vertical-align: inherit;">Koordinat input pemain dan semua operasi lainnya, seperti rendering mesh, direkam di ruang kanvas. </font><font style="vertical-align: inherit;">Demikian pula, ukuran dalam piksel buffer apa pun yang digunakan untuk mensimulasikan gambar tergantung pada ukuran kanvas. </font><font style="vertical-align: inherit;">Istilah "kanvas" seperti yang digunakan dalam artikel ini sama sekali tidak terkait dengan kelas Canvas dari Unity UI.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/648/367/1cc/6483671ccaa809a93bcf2a276cdd2471.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kotak hijau menunjukkan area kanvas dalam permainan</font></font></i><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Titik</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara visual, titik diwakili oleh jala bundar, ujungnya terdiri dari 25 simpul. Anda dapat melihatnya sebagai "jatuhkan" yang ditinggalkan oleh sikat basah pada selembar kertas jika Anda menyentuhnya sebentar. Kami menambahkan offset acak kecil ke posisi masing-masing titik, yang memastikan ketidakmerataan tepi bintik-bintik cat.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9bb/baa/daa/9bbbaadaaf2b6d0fc1b295f5739ff083.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh jerat jaring.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Untuk setiap titik, kami juga menyimpan vektor kecepatan luar, yang kemudian digunakan dalam fase simulasi. Kami menghasilkan beberapa jerat tersebut dengan variasi kecil antara mereka membentuk dan menyimpan data mereka dalam objek skriptuemy ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objek scriptable</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Setiap kali seorang pemain menarik tempat secara real time, kami memberinya jala yang dipilih secara acak dari set ini. Perlu disebutkan bahwa pada resolusi layar yang berbeda kanvas memiliki ukuran piksel yang berbeda. Sehingga pada semua perangkat koefisien ukuran tempat sama, ketika Anda memulai permainan, kami mengubah skala sesuai dengan ukuran kanvas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1af/f92/8de/1aff928de51a35f64351fe72f5c10d80.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh vektor tempat yang disimpan dengan data tempat baru.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Saat spot mesh dibuat, kami juga menyimpan "area pembasahan" nya, yang mendefinisikan satu set piksel yang berada di dalam batas spot asli. Area pembasahan digunakan untuk mensimulasikan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adveksi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Selama eksekusi aplikasi pada saat membuat setiap tempat baru, kami menandai kanvas di bawahnya sebagai basah. Saat mensimulasikan pergerakan cat, kami mengizinkannya untuk "menyebar" ke area-area kanvas yang sudah basah. Kami menyimpan konten kelembaban kanvas dalam buffer </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wetmap</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> global </font><font style="vertical-align: inherit;">, yang diperbarui setiap kali tempat baru ditambahkan. Selain berpartisipasi dalam pencampuran dua warna, advection juga memainkan peran penting dalam penampilan akhir dari stroke cat itu sendiri.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/31d/843/67e/31d84367e786d15bd7fe0f59cbe2e3a5.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengisian </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wetmap</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , piksel di dalam bentuk spot (lingkaran hijau) menandai buffer </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wetmap</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (kisi) sebagai basah (hijau). </font><font style="vertical-align: inherit;">Buffer wetmap sendiri memiliki resolusi yang jauh lebih tinggi. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, setiap spot juga berisi nilai </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opacity</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang merupakan fungsi dari area tersebut; </font><font style="vertical-align: inherit;">itu mewakili efek menyimpan pigmen (jumlah pigmen yang konstan di tempat). </font><font style="vertical-align: inherit;">Ketika ukuran tempat meningkat selama simulasi, opacitynya berkurang, dan sebaliknya.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a88/870/a5b/a88870a5b213286e20815f3b87ecca5d.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh cat tanpa advection (kiri) dan dengan itu (kanan).</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/341/069/348/341069348c265951c765843ca792b2c8.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh adveksi cat.</font></font></i><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siklus simulasi</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah input pemain dalam bingkai saat ini diterima dan dikonversi ke tempat baru, langkah selanjutnya adalah mensimulasikan tempat untuk mensimulasikan penyebaran cat air. Pada awal simulasi ini, kami memiliki daftar tempat yang perlu diperbarui, dan peta </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">basah yang</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diperbarui </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam setiap bingkai, kita berkeliling daftar tempat dan mengubah posisi semua simpul tempat menggunakan persamaan berikut:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4b8/6fe/91a/4b86fe91ae4f677697b43e99a3299ecc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
di mana: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah vektor gerak baru, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah parameter koreksi konstan (0.33), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah vektor kemiringan gerak = arah dinormalisasi dari gesekan pemain dikalikan dengan 0,3, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah nilai skalar dari kekasaran kanvas = Random.Range (1,1 + r), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah parameter kekasaran global, untuk cat standar kita atur ke 0.4, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah vektor kecepatan yang dibuat terlebih dahulu dengan spot mesh, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vm</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah faktor kecepatan, nilai skalar yang kita gunakan secara lokal dalam beberapa situasi untuk mempercepat adveksi, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x (t + 1)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - posisi vertex baru potensial, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x (t)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - posisi vertex saat ini, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">br</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apakah vektor kekasaran bercabang = (Random.Range (-r, r), Random.Range (-r, r)), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w (x)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah nilai pembasahan dalam buffer wetmap. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasil dari persamaan tersebut disebut </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bias random walk</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ini meniru perilaku partikel dalam cat cat air nyata. Kami mencoba untuk memindahkan setiap titik titik keluar dari pusatnya ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), menambahkan keacakan. Kemudian arah gerakan sedikit berubah dengan arah pukulan ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) dan diacak lagi oleh komponen kekasaran lainnya ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">br</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Kemudian posisi vertex baru ini dibandingkan dengan </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wetmap</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Jika kanvas di posisi baru sudah basah (nilai dalam buffer </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wetmap</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lebih besar dari 0), maka kita beri titik baru posisi </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x (t + 1)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , jika tidak kita tidak mengubah posisinya. </font><font style="vertical-align: inherit;">Akibatnya, cat hanya akan menyebar di area kanvas yang sudah basah. </font><font style="vertical-align: inherit;">Pada tahap terakhir, kami menghitung ulang area spot, yang digunakan dalam siklus rendering untuk mengubah opacity-nya.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a69/742/ae4/a69742ae4ee6d91b27bac6397bd317ff.gif"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh skala mikro dari simulasi adveksi antara dua titik aktif cat.</font></font></i><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siklus Rendering - Buffer Basah</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah menghitung tempat, Anda dapat mulai merendernya. Pada pintu keluar setelah tahap emulasi, lubang bintik sering berubah menjadi cacat (misalnya, persimpangan terjadi), oleh karena itu, untuk rendering yang benar tanpa biaya tambahan untuk triangulasi berulang, kami menggunakan solusi dengan buffer stensil dua lintasan. Antarmuka menggambar </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafik</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Unity digunakan untuk membuat bintik-bintik </font><font style="vertical-align: inherit;">, dan siklus rendering dilakukan di dalam metode Unity </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnPostRender</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Spot mesh dirender untuk membuat tekstur ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wetBuffer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) menggunakan kamera terpisah. Di awal siklus, </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wetBuffer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dihapus dan ditetapkan sebagai target render menggunakan </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Graphics.SetRenderTarget (wetBuffer)</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Selanjutnya untuk setiap tempat aktif dari </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">splatList</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami mengeksekusi urutan yang ditunjukkan pada diagram berikut:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1e7/a09/328/1e7a0932807463744d7fd50a40fddedc.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diagram siklus rendering. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mulai dengan membersihkan buffer stensil sebelum setiap tempat sehingga keadaan buffer stensil dari tempat sebelumnya tidak mempengaruhi tempat baru. </font><font style="vertical-align: inherit;">Lalu kami memilih bahan yang digunakan untuk menggambar tempat. </font><font style="vertical-align: inherit;">Bahan ini bertanggung jawab atas warna titik, dan kami memilihnya berdasarkan indeks warna yang disimpan dalam </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">splatData</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ketika pemain </font><em><font style="vertical-align: inherit;">menggambar</font></em><font style="vertical-align: inherit;"> titik. </font><font style="vertical-align: inherit;">Kemudian kita mengubah opacity warna (saluran alfa) berdasarkan area dari titik jala yang dihitung pada langkah sebelumnya. </font><font style="vertical-align: inherit;">Rendering itu sendiri dilakukan dengan menggunakan shader buffer stensil dua lulus. </font><font style="vertical-align: inherit;">Di pass pertama (Material.SetPass (0)) kami melewati mesh tempat asli untuk merekam koordinat di mana mesh diisi. </font><font style="vertical-align: inherit;">Dengan lulus ini </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ColorMask</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menetapkan nilai 0, sehingga mesh itu sendiri tidak dirender. </font><font style="vertical-align: inherit;">Pada pass kedua (Material.SetPass (1)) kami menggunakan segiempat yang dijelaskan di sekitar mesh spot. </font><font style="vertical-align: inherit;">Kami memeriksa nilai dalam buffer stensil untuk setiap piksel segi empat; </font><font style="vertical-align: inherit;">jika nilainya satu, piksel dirender, jika tidak dilewati. </font><font style="vertical-align: inherit;">Sebagai hasil dari operasi ini, kami membuat bentuk yang sama dengan spot mesh, tetapi tentu saja tidak akan berisi artefak yang tidak diinginkan, misalnya, persimpangan-sendiri.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1a9/06b/beb/1a906bbeb3f003d057430f6fb28e9257.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prosedur untuk melakukan teknik buffer stensil ganda (dari kiri ke kanan). </font><font style="vertical-align: inherit;">Perhatikan bahwa penyangga stensil ini memiliki resolusi yang jauh lebih tinggi daripada yang ditunjukkan, sehingga dapat mempertahankan bentuk aslinya dengan akurasi tinggi.</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ed5/15d/3ae/ed515d3aec23cd4eb9041761913afd2c.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh tiga titik berpotongan yang diberikan dengan cara tradisional, yang mengarah pada penampilan artefak (kiri), dan menggunakan teknik buffer stensil dua arah dengan menghilangkan semua artefak (kanan).</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Setelah merender semua tempat di </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wetBuffer,</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ditampilkan di adegan permainan. Kanvas kami menggunakan shader darurat yang menggabungkan </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wetBuffer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , peta kertas difus, dan peta normal kertas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/968/db5/55a/968db555a2a477134013c355e3898e90.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Canvas shader: hanya wetBuffer (kiri), menambahkan tekstur kertas (tengah), peta normal ditambahkan (kanan). </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Permainan ini mendukung mode untuk orang-orang dengan kebutaan warna, di mana pola-pola terpisah ditumpangkan di atas cat. </font><font style="vertical-align: inherit;">Untuk mencapai ini, kami mengubah bahan noda dengan menambahkan tekstur pola dengan ubin. </font><font style="vertical-align: inherit;">Pola mengikuti aturan pencampuran warna permainan, misalnya, biru (bar) + kuning (lingkaran) memberi hijau (lingkaran di bar) di persimpangan. </font><font style="vertical-align: inherit;">Untuk memadukan pola dengan mulus, mereka harus dirender dalam ruang UV yang sama. </font><font style="vertical-align: inherit;">Kami menyesuaikan koordinat UV segi empat yang digunakan pada lintasan kedua buffer stensil, membagi posisi x dan y (yang ditentukan dalam ruang kanvas) dengan lebar dan tinggi kanvas. </font><font style="vertical-align: inherit;">Akibatnya, kami mendapatkan nilai yang benar dari u, v di ruang dari 0 hingga 1.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7b5/057/211/7b50572119f116fae451dd321275a920.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh pola buta warna.</font></font></i><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimasi - buffer bintik kering</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti disebutkan di atas, salah satu tugas kami adalah mendukung perangkat seluler berdaya rendah. </font><font style="vertical-align: inherit;">Render tempat ternyata menjadi penghambat permainan kami. </font><font style="vertical-align: inherit;">Setiap tempat membutuhkan tiga panggilan draw (panggilan dua lintasan + hapus buffer stensil), dan karena garis cat berisi puluhan atau ratusan spot, jumlah panggilan draw meningkat dengan cepat dan menyebabkan penurunan frame rate. </font><font style="vertical-align: inherit;">Untuk mengatasinya, kami menerapkan dua teknik optimisasi: pertama, gambar simultan dari semua titik "kering" di </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dryBuffer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan kedua, percepatan lokal pengeringan titik setelah mencapai sejumlah titik aktif. </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dryBuffer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adalah tekstur render tambahan yang ditambahkan ke siklus rendering. Seperti disebutkan sebelumnya, setiap tempat memiliki masa pakai (dalam bingkai), yang berkurang dengan masing-masing bingkai. Setelah umur mencapai 0, noda dianggap "mengering". Bintik-bintik kering tidak lagi disimulasikan, bentuknya tidak berubah, dan karenanya tidak perlu dirender lagi di setiap bingkai.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b44/afe/714/b44afe714c3be2aed6d853d031e2379a.gif"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DryBuffer beraksi; bintik-bintik abu-abu menunjukkan bintik-bintik yang disalin ke dryBuffer.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Setiap tempat yang masa pakainya mencapai 0 dihapus dari </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">splatList</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan "disalin" ke </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dryBuffer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Selama proses penyalinan, siklus rendering digunakan kembali, dan kali ini </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dryBuffer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ditetapkan sebagai target membuat tekstur </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pencampuran yang tepat antara </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wetBuffer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dryBuffer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak dapat dicapai hanya dengan menumpuk buffer di kanvas shader, karena tekstur render buffer </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wetBuffer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berisi bintik-bintik yang sudah dirender dengan nilai alfa (yang setara dengan alfa prapultiplied). </font><font style="vertical-align: inherit;">Kami mengelak dari masalah ini dengan menambahkan satu langkah ke awal siklus rendering sebelum secara berulang melintasi titik-titik tersebut. </font><font style="vertical-align: inherit;">Pada titik ini, kami membuat segi empat ukuran piramida pemangkasan kamera yang menampilkan </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dryBuffer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Berkat ini, setiap noda yang </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dihasilkan</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam </font><em><font style="vertical-align: inherit;">wetBuffer</font></em><font style="vertical-align: inherit;"> sudah akan dicampur dengan noda kering yang sebelumnya dicat.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/24e/afe/417/24eafe41762bcd3e7b2363e78c8bb9c0.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Campuran bintik basah dan kering. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buffer </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dryBuffer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mengakumulasi semua "kering" tempat dan tidak dibersihkan antara frame. </font><font style="vertical-align: inherit;">Oleh karena itu, semua memori yang terkait dengan noda kedaluwarsa dapat dihapus setelah "disalin" ke buffer.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/00e/aa0/5bd/00eaa05bd29ca5c46eb8a845accc0b75.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berkat optimalisasi dengan </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dryBuffer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kami tidak lagi memiliki batasan pada jumlah cat yang dapat diterapkan pemain ke kanvas.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Menggunakan teknik </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dryBuffer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> secara terpisah memungkinkan pemain untuk menggambar dengan jumlah cat yang hampir tak terbatas, tetapi tidak menjamin kinerja yang konsisten. Seperti disebutkan di atas, goresan cat memiliki </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ketebalan</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> konstan </font><font style="vertical-align: inherit;">, yang dicapai dengan menggambar menggunakan interpolasi dari banyak titik antara titik awal dan titik akhir gesekan. Dalam kasus banyak gesekan cepat dan panjang, pemain dapat menghasilkan sejumlah besar tempat aktif. Bintik-bintik ini akan disimulasikan dan ditampilkan pada jumlah bingkai yang ditentukan oleh masa pakainya, yang pada akhirnya mengarah pada laju bingkai yang lebih rendah.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memastikan frame rate yang stabil, kami mengubah algoritme sehingga jumlah tempat aktif dibatasi oleh nilai konstan </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maxActiveSplats</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Semua tempat yang melebihi nilai ini langsung “mengering”. Ini diwujudkan dengan mengurangi rentang hidup dari titik aktif tertua ke 0, itulah sebabnya mereka disalin ke buffer bintik kering lebih awal. Karena ketika kita mempersingkat masa pakai, kita mendapatkan tempat dalam kondisi simulasi yang tidak lengkap (yang akan terlihat cukup menarik), pada saat yang sama kita meningkatkan kecepatan penyebaran cat. Karena peningkatan kecepatan, titik mencapai ukuran yang hampir sama dengan kecepatan normal dengan umur standar.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/907/c68/4c9/907c684c9c3642f6a109b4cadcf8718c.gif"></div><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d79/fe2/72b/d79fe272b648131541bfbf423384fc29.gif"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peragaan maksimal 40 titik aktif (atas) dan 80 (bawah). </font><font style="vertical-align: inherit;">Bintik-bintik kering yang disalin dalam dryBuffer ditampilkan dalam warna abu-abu. </font><font style="vertical-align: inherit;">Nilai menunjukkan "jumlah" cat yang dapat disimulasikan pada saat yang sama. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nilai </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maxActiveSplats</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah parameter kinerja yang paling penting, memungkinkan kita untuk secara tepat mengontrol jumlah panggilan undian yang dapat kita alokasikan untuk rendering cat air. </font><font style="vertical-align: inherit;">Kami mengaturnya saat startup, berdasarkan pada platform dan kekuatan perangkat. </font><font style="vertical-align: inherit;">Anda juga dapat mengubah nilai ini selama eksekusi aplikasi jika penurunan dalam frame rate terdeteksi.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penerapan algoritma ini telah menjadi tugas yang menarik dan menantang. </font><font style="vertical-align: inherit;">Kami berharap para pembaca menikmati artikel ini. </font><font style="vertical-align: inherit;">Anda dapat mengajukan pertanyaan di komentar ke </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aslinya</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Jika Anda ingin menghargai cat air kami dalam aksi, maka cobalah bermain </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">warna. </font><font style="vertical-align: inherit;">di Apple Arcade</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/959/89e/fda/95989efda4d27809e1ce3923b341ac46.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuplikan layar game yang berjalan di Apple TV</font></font></i><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(1) S. DiVerdi, A. Krishnaswamy, R. MÄch dan D. Ito, "Lukisan dengan Poligon: Mesin Cat Air Prosedural," dalam Transaksi IEEE pada Visualisasi dan Grafik Komputer, vol. </font><font style="vertical-align: inherit;">19, tidak. </font><font style="vertical-align: inherit;">5, hlm. </font><font style="vertical-align: inherit;">723-735, Mei 2013. doi: 10.1109 / TVCG.2012.295 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(2) Tekanan hanya diperhitungkan saat menggambar Pensil Apple pada iPad.</font></font></blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id494912/index.html">Kontribusi saya untuk perlindungan terhadap Covid-19</a></li>
<li><a href="../id494916/index.html">Cara menjual akun pedagang dan mengendarai gelombang minat dalam bisnis online</a></li>
<li><a href="../id494918/index.html">Minggu ketiga dari penerbangan jarak jauh - normal. Ulasan dari IT QIWI guys tentang pekerjaan penuh waktu dari rumah</a></li>
<li><a href="../id494920/index.html">Saran buruk untuk pengembang: apa yang harus dilakukan untuk “tolong” manajemen</a></li>
<li><a href="../id494922/index.html">Nizhny Novgorod untuk spesialis IT: prospek untuk pekerjaan dan peluang untuk hidup</a></li>
<li><a href="../id494938/index.html">Selamat hari cadangan! Jangan lupakan dia</a></li>
<li><a href="../id494940/index.html">DevOps - apa itu, mengapa, dan berapa banyak diminati?</a></li>
<li><a href="../id494942/index.html">CGI di rumah dengan Unreal Engine dan iPhone</a></li>
<li><a href="../id494950/index.html">Beberapa tren penyimpanan harus diwaspadai</a></li>
<li><a href="../id494956/index.html">Kehidupan Byte Data</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>