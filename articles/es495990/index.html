<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìΩÔ∏è ü§¨ üéæ Divulgaci√≥n del n√∫mero de tel√©fono y geolocalizaci√≥n a trav√©s de la vulnerabilidad en Telegram üßúüèª ‚úçüèª üßïüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recientemente, Telegram ha estado discutiendo cada vez m√°s el tema de romper a las personas y filtrar datos personales. Me preguntaba cu√°nto es resist...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Divulgaci√≥n del n√∫mero de tel√©fono y geolocalizaci√≥n a trav√©s de la vulnerabilidad en Telegram</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495990/"><img src="https://habrastorage.org/webt/ve/mw/s5/vemws5sils-r3vtvvr7rg162sdw.jpeg" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recientemente, Telegram ha estado discutiendo cada vez m√°s el tema de romper a las personas y filtrar datos personales. </font><font style="vertical-align: inherit;">Me preguntaba cu√°nto es resistente el ecosistema de Telegram a tales fugas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debajo del corte est√° la historia de c√≥mo encontr√© un error en Telegram. </font><font style="vertical-align: inherit;">El error le permite enga√±ar al usuario y empujarlo a compartir sus datos sin saberlo: geolocalizaci√≥n y n√∫mero de tel√©fono.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As√≠ es como funciona:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/o8N0kjurgfo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La complejidad del sistema siempre ha sido un enemigo de la seguridad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Telegram ha crecido, ha dejado de ser solo un mensajero y se ha convertido en una gran plataforma de medios con una funcionalidad rica. La API de Bot de Telegram se destaca como una casa separada, lo que le permite crear aplicaciones completas dentro del messenger, los llamados bots. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo m√°s probable es que todos los que intentaron crear su propio bot ya sepan que se puede enviar al usuario una solicitud de su n√∫mero de tel√©fono mediante un bot√≥n especial. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El texto en este bot√≥n se puede establecer en cualquiera. Adem√°s, el bot puede usar los mismos botones para otras interacciones: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tr/c7/k8/trc7k8xz2pvmmzac1pfbwxdlxqi.jpeg" alt="imagen" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
despu√©s de hacer clic en el bot√≥n, se le mostrar√° al usuario una advertencia de que su contacto ahora se enviar√° al bot:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/su/5t/rk/su5trkfoqcrvxad8wg82xegm3bg.png" alt="imagen" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este mensaje habla con bastante claridad sobre el riesgo de desanonimizaci√≥n y advierte al usuario reflexivo de acciones peligrosas para √©l. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al revisar las actualizaciones de la API, record√© que en alg√∫n momento Telegram dio a los usuarios la oportunidad de hacer su propia localizaci√≥n del messenger. Hubo ejemplos en los que se utiliz√≥ la localizaci√≥n para alteraciones c√≥micas de la interfaz. En ese momento, se me ocurri√≥ la misma idea que ahora: </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øPero qu√© pasa si intentas "traducir c√≥micamente" un cuadro de di√°logo que advierte al usuario acerca de transferir el n√∫mero de tel√©fono al bot y reemplazar su texto?</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/s_/gj/ed/s_gjeddr_shl8q4ghctcrur4g4s.png" alt="imagen" width="300"> <img src="https://habrastorage.org/webt/xt/cm/il/xtcmilq-vxhoyslwjpn8uolmhrs.png" alt="imagen" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al principio, pens√© que conseguir que un usuario instale una localizaci√≥n de archivos xml extra√±os en la aplicaci√≥n ser√≠a mucho m√°s dif√≠cil que simplemente convencer de hacer clic en Compartir contacto. De hecho, as√≠, usando un archivo xml, Telegram ofreci√≥ distribuir sus localizaciones entre los interlocutores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As√≠ que pens√©, hasta que encontr√© el </font><font style="vertical-align: inherit;">controlador de enlace setlanguage </font><font style="vertical-align: inherit;">en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo fuente de una aplicaci√≥n de Android</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qs/nm/xv/qsnmxvjbble2rnvl-ufuadej46w.png" alt="imagen" width="600"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Exactamente lo que se necesita! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Result√≥ que Telegram hab√≠a creado hace mucho tiempo una plataforma de traducci√≥n, translation.telegram.org, accesible para todos los usuarios de Telegram, y ahora no hay necesidad de transferir ning√∫n archivo xml. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ws/rs/ov/wsrsovq81u4lsjh10u2dxoj3kjk.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Simplemente haga clic en el enlace </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t.me/setlanguage/%lang%</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, despu√©s de lo cual el usuario ver√° un cuadro de di√°logo que le pedir√° que instale un nuevo idioma. </font><font style="vertical-align: inherit;">Y esta ventana es mucho menos intimidante que un mensaje sobre una solicitud de n√∫mero de tel√©fono:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uo/yu/mp/uoyumprj8sk-0mil-xflt1lqjre.png" alt="imagen" width="300"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øC√≥mo funciona?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reg√≠strese en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">translation.telegram.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agregue su idioma, traduzca los </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elementos de interfaz</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> necesarios </font><font style="vertical-align: inherit;">y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un par de otros m√°s</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En localizaci√≥n, puede escribir lo que quiera. Escribiremos un texto inofensivo en lugar de una terrible advertencia sobre compartir la geolocalizaci√≥n y el n√∫mero de tel√©fono. Hacemos lo mismo para las otras plataformas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuestro lenguaje venenoso est√° listo. Queda por deslizarlo al usuario. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-w/aq/38/-waq38nqpnrd9a07kthuuuybsmk.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todav√≠a no pude encontrar una manera de averiguar si el usuario instal√≥ la localizaci√≥n que se le ofreci√≥. No hubo estad√≠sticas de idioma en translation.telegram.org, ni cambios en el perfil del usuario. Bot api le permite conocer el idioma del usuario a trav√©s </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">del par√°metro language_code</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pero su valor se toma de la configuraci√≥n del sistema. </font><font style="vertical-align: inherit;">Cambiar el idioma en la aplicaci√≥n no afecta el par√°metro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, entonces solo agrega un peque√±o retraso despu√©s del mensaje con un enlace al idioma. </font><font style="vertical-align: inherit;">Despu√©s de elegir un idioma, le sugerimos al usuario que se familiarice con el men√∫ bot. </font><font style="vertical-align: inherit;">Cuando hace clic en Aceptar en este cuadro de di√°logo, el n√∫mero se filtra al bot con un mensaje, y el bot elimina este mensaje de inmediato. </font><font style="vertical-align: inherit;">Si el bot usa webhook para recibir actualizaciones, el mensaje se elimina m√°s r√°pido y el usuario puede no entender que acaba de enviar su contacto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, de manera similar a una solicitud de contacto, un bot puede pedirle a un usuario que comparta su geolocalizaci√≥n. </font><font style="vertical-align: inherit;">S√≠, y este cuadro de di√°logo tambi√©n se puede "traducir".</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como arreglar</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, no debe permitir que los usuarios traduzcan absolutamente toda la interfaz sin moderaci√≥n. Por cierto, la moderaci√≥n traducci√≥n est√° habilitada para, por ejemplo, este cuadro de di√°logo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">translations.telegram.org/rutech/ios/unsorted/AuthCode.Alert</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . La etiqueta Critical nos informa sobre la necesidad de moderaci√≥n. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ek/mq/1v/ekmq1vbreb7dxbm005uvbkx7rua.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resulta que aqu√≠ hay una omisi√≥n tan peque√±a como la ausencia de una etiqueta Cr√≠tica para los di√°logos sobre compartir n√∫meros y la geolocalizaci√≥n conducen a una fuga. Una fuga de datos muy confidenciales, como en el caso de un mensajero que desarrolla su comercializaci√≥n en torno a la privacidad / seguridad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un mensajero vinculado a su n√∫mero de tel√©fono personal, por definici√≥n, no puede ser privado. Solo puede aumentar el costo de revelar su identidad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta vulnerabilidad cay√≥ en el programa de telegrama de recompensas de errores y se calific√≥ en 100 ‚Ç¨.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PD</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ven a nosotros en Telegram chat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@secinfosec</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">All√≠ compartimos nuestra experiencia y discutimos todo lo relacionado con la seguridad de la informaci√≥n: un error de recompensa, pentests, seguridad pr√°ctica y en papel, nuevas amenazas y m√©todos para tratar con ellos.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es495978/index.html">Tres niveles de an√°lisis de audiencia: buscando ideas</a></li>
<li><a href="../es495980/index.html">C√≥mo desmontar el Tesla Model 3, modificarlo con un archivo y hacer un ventilador</a></li>
<li><a href="../es495982/index.html">Estudiamos el motor VoIP Mediastreamer2. Parte 4</a></li>
<li><a href="../es495984/index.html">Reacci√≥n, rendimiento y -500 milisegundos en el lanzamiento: el historial de nuestras optimizaciones en n√∫meros</a></li>
<li><a href="../es495986/index.html">An√°lisis de documentos internacionales sobre gesti√≥n de riesgos de seguridad de la informaci√≥n. Parte 2</a></li>
<li><a href="../es495994/index.html">Comienzo del trimestre acad√©mico o c√≥mo me convert√≠ en coordinador de educaci√≥n a distancia.</a></li>
<li><a href="../es495996/index.html">Raspberry Pi, Python y riego de plantas de interior</a></li>
<li><a href="../es495998/index.html">Crear un tema oscuro para el desbordamiento de pila</a></li>
<li><a href="../es496004/index.html">Nuevos modelos de b√∫squeda y an√°lisis de datos. WSDM 2020 a trav√©s de los ojos del equipo Yandex.Tolki</a></li>
<li><a href="../es496006/index.html">Proxy inverso superado: tecnolog√≠a para protecci√≥n remota y optimizaci√≥n del sitio sin cambiar los registros A de DNS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>