<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöµüèø ü•É üêß Internationalization: Making the Web Accessible to Everyone ‚ùå üîò üôáüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ecma International, Technical Committee 39, or simply TC39, is a group of JavaScript developers, technology implementers, academics and other interest...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Internationalization: Making the Web Accessible to Everyone</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/489858/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ecma International, Technical Committee 39, or simply TC39, is a group of JavaScript developers, technology implementers, academics and other interested parties who, together with the community, support and develop JavaScript as a platform. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TC39 participants usually share something interesting using their deep understanding of JavaScript. But some people think that they have gone too far from the problems of ordinary developers. Where is the language developer, and where is the person who writes frontends every day in practice? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's get acquainted with the report, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">which combines both the depth of understanding and high practical applicability</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Meet Romulo Cintra‚Äôs new story about internationalization issues that will be addressed by the new API, which will soon appear in JavaScript.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3g/vy/jr/3gvyjruxe2kkuvkaejvmiystznu.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Romulo Cintra</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - TC39 delegate, has been working in development and architecture for over 10 years, specializing in web, mobile development and clouds. In this report, </font><font style="vertical-align: inherit;">you will learn </font><font style="vertical-align: inherit;">first-hand the co-chair of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MessageFormat Working Group</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which options are already available for solving existing problems, and in what form they are going to be solved using the new API in JavaScript itself. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Under the cut, the full textual transcript of the Romulo report and a link to the video. If you like to read - this article has it all; you will not miss anything. If you have time to start the video recording, then you will have about an hour of good video recording with interesting slides and understandable English. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Further narration on behalf of the speaker.</font></font></b><br>
<a name="habracut"></a><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/fSPMdmfDHlM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are three things you need to know about the state of internationalization and localization: everything is very, very, very bad. My name is Romulo Cintra, and I am involved in financial architecture applications. I talk a lot with people from TC39 and see how they try to make the JavaScript world a better place. In addition, I am a strong supporter of open source, and in my free time I am a teacher at the School of Technology in Barcelona.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The issue of internationalization is very important. It so happened that on our Earth there are many different peoples and languages. In the world today there are about 195 countries and 6 thousand languages. This makes our task extremely difficult. Think about something else: I write articles and read reports in English, not in Russian; we already have a problem of internationalization. If someone does not speak English, he will be excluded from our conversation with you. To prevent this from happening, internationalization was invented.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
English internationalization abbreviate as i18n. The number 18 is the number of characters between the letters i and n in this word. In short, internationalization is the design of software in order to simplify localization as much as possible. Thanks to internationalization, the software can support local settings, language, currency, and so on. Internationalization makes the web more accessible to everyone. Here you can draw a parallel with the development through testing (test-driven development): there first the test is written, and then the code; with internationalization it is necessary to do the same. Usually people think about internationalization after the code is written, but it‚Äôs wrong.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Similar to i18n, l10n is the abbreviation for localization, and 10 is the number of characters between the first l and last n. Localization is the adaptation of a product to the language and cultural environment in which it is distributed. That is, you need to not only translate "Hello" to "Hello", but also use the local currency, decimal separator, and so on, that is, make the software more familiar to the user. It is more than just a translation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How many languages ‚Äã‚Äãdo your web projects support? Many have more than two. Is there anyone who has more than five? What about 15? We support about 25 languages. We do not have very good support, because internationalization is not organized in the best way. In the course of the report, I will explain how to improve internationalization, and talk about the measures that we are taking.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, I repeat once again: internationalization means simplifying localization, providing support for it at the architecture level. And localization is the adaptation of software to local realities. The translation very often does not correspond to the original - let's take an example from the film industry, where the name of the film ‚ÄúPain and Gain‚Äù was translated as ‚ÄúBlood and Sweat: Anabolics‚Äù. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qy/js/vr/qyjsvrmpbjcuezfforcbmbgfhn4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Or another example: an advertisement for a Russian bath, in which the English translation says ‚ÄúRussian crematorium‚Äù (Russian crematorium).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2b/zj/iy/2bzjiybwi87qtbsuy7oyegbpxiq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I doubt that this will attract customers, at least alive. </font><font style="vertical-align: inherit;">Internationalization and localization are so important precisely because they allow us to convey exactly what we want to say to the user. </font><font style="vertical-align: inherit;">In essence, internationalization is the provision of accessibility, because if you cannot understand the software you work with, then in fact your options are limited. </font><font style="vertical-align: inherit;">It is beneficial for everyone that the software is more accessible, because it provides a wider range of users, and therefore, a higher income; </font><font style="vertical-align: inherit;">it also makes the web better.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Messageformat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consider the code examples:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-string">'es-ES'</span>: { 
    <span class="hljs-attr">HELLO_WORLD</span>: <span class="hljs-string">'¬°Hola mundo!'</span> <font></font>
}, <font></font>
<span class="hljs-string">'en-GB'</span>: { 
    <span class="hljs-attr">HELLO_WORLD</span>: <span class="hljs-string">'Hello world!'</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We need to translate our string objects. We have a variable </font></font><code>HELLO_WORLD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with corresponding lines in each language. For such a translation in many languages ‚Äã‚Äã(for example, Java), the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MessageFormat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> format </font><i><font style="vertical-align: inherit;">exists</font></i><font style="vertical-align: inherit;"> . Let's try to figure out what it is. First, a little about some basic technologies - let's start with Unicode. This is a standard that creates a single space for characters from different languages. Let's draw an analogy with chess: each type of pieces can have a different shape, but we always know where exactly they should be on the board. Well, of course, there are different Unicode formats with different numbers of bytes: UTF-8, UTF-16 and UTF-32. Now the most commonly used meta tag is UTF-8. With Unicode, the browser can display special characters, if this tag</font></font><code>`meta</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forget, no one will understand what kind of symbols we have on the page. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition to Unicode, two other important technologies are CLDR and ICU. CLDR is a kind of database of alphabets, countries, currencies, time zones, etc., stored in different languages ‚Äã‚Äãof the world. Not all 6 thousand languages ‚Äã‚Äãof the world are present in it, work is still underway on this database. The last update was last October. Another important project is the ICU. This is a huge database of words, numbers and symbols from different languages, which are provided in the form of methods for sorting, normalizing, formatting, etc. These libraries are used in many programming languages. In JavaScript, ICU is at the core of the Intl API. But there are so many diverse materials in the languages ‚Äã‚Äãof the world that need to be displayed in browsers that the work of including them in these standards is far from complete.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MessageFormat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a format that allows you to associate a specific key with a specific message in a specific language. In some cases, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variables</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> can be passed </font><font style="vertical-align: inherit;">to </font><i><font style="vertical-align: inherit;">MessageFormat</font></i><font style="vertical-align: inherit;"> , it defines them and enters them in the final line. The same problem was solved in a slightly different way in other languages. In Android, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MessageFormat is</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> implemented in Java. There, to work with this format, a special library is not needed; Android is able to interact with it itself. In iOS, there is an API that is very similar to the one in JavaScript. It is built into the system, there is no need to download anything there either, just pass the necessary line to the method of this API. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How was this problem resolved in JavaScript? Not yet. But we have many libraries that offer a solution.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sc/n2/cz/scn2cz_zwkl8osmkbkhsnuc9kl0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It shows the number of downloads of the most popular of them (and two less popular, fluent from Mozilla and fbt from Facebook). </font><font style="vertical-align: inherit;">Almost two million downloads take place every week, so there is a need for libraries for internationalization.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Libraries</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We‚Äôll briefly introduce some of these libraries, and start with i18next. Its developers have made many changes to </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MessageFormat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and it does not fully follow the ICU. However, it is a very good library. Its implementation of </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MessageFormat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> has many advantages, for example, the ability to use string interpolation (which is not available in ICU format). However, there are also disadvantages, for example, plural messages cannot be placed on the same line as the only one, as can be done in the ICU. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the most famous internationalization libraries is </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intl-messageformat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Every week it is downloaded more than 700 thousand times. </font><font style="vertical-align: inherit;">Her support is handled by my colleague, Long Hu. </font><font style="vertical-align: inherit;">Its popularity is explained by the fact that react-intl is created on top of it. </font><font style="vertical-align: inherit;">So if you use React, then most likely you have this library. </font><font style="vertical-align: inherit;">Her developer also participates in ECMA-402, and therefore he tries to comply with the ICU standard.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> MESSAGES = { 
    <span class="hljs-string">'en-US'</span>: { 
        <span class="hljs-attr">NUM_PHOTOS</span>: <span class="hljs-string">'You have {numPhotos, plural, '</span> +
            <span class="hljs-string">'=0 {no photos.}'</span> +
            <span class="hljs-string">'=1 {one photo.}'</span> +
            <span class="hljs-string">'other {# photos.}}'</span><font></font>
}, <font></font>
    <span class="hljs-string">'es-MX'</span>: {
        <span class="hljs-attr">NUM_PHOTOS</span>: <span class="hljs-string">'Usted {numPhotos, plural, '</span> +
            <span class="hljs-string">'=0 {no tiene fotos.}'</span> + 
            <span class="hljs-string">'=1 {tiene una foto.}'</span> 
            +<span class="hljs-string">'other {tiene # fotos.}}'</span> <font></font>
    } <font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Its implementation is very similar to </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MessageFormat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Here you can pass variables and indicate the need for the plural. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Before moving on to the code examples, I will talk about two more new libraries that are now in fashion, they were created by Facebook and Mozilla.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gd/6s/-j/gd6s-jazqjbpx9yulgkda4fj6ye.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The whole API cannot be shown as a whole, but take my word for it: the developers of these libraries did their best, there is exactly what we are missing right now. True, Facebook made it in its own style: its own markup, the ability to run during layout, the extraction of hash maps from strings that can be automatically translated. The problem is that all this is focused on the scale with which the average programmer rarely works. The project is very young, and they want to integrate it with other well-known libraries, for example, with React. In the future, he is likely to gain popularity.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All of the above are libraries that need to be additionally downloaded, they are not built into the browser. </font><font style="vertical-align: inherit;">With only one browser, we will not go far, so everything is bad with localization. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MessageFormat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> can help us change this state of affairs </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">While we can not use it, but believe me: the future lies with him. </font><font style="vertical-align: inherit;">Now we are actively working on it, establishing stakeholders, looking for fresh ideas for the new </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MessageFormat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">In its original version, this format is already outdated, the needs of developers have evolved significantly since its inception. </font><font style="vertical-align: inherit;">The new format should be made efficiently and easy to use.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intl.DateTimeFormat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Browsers already have many built-in mechanisms for internationalization and localization, most of them simply do not know about them and do not use them. Have you heard about Intl.DateTimeFormat? In this project, we are constantly creating new APIs. It is likely that there is no longer need for </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moment.js</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Day.js</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">date-fns</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> myDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(); 
<span class="hljs-keyword">new</span> <span class="hljs-built_in">Intl</span>.DateTimeFormat(<span class="hljs-string">'ru'</span>, { <span class="hljs-attr">timeStyle</span> : <span class="hljs-string">'short'</span>}).format(myDate); 
<span class="hljs-comment">// short ‚Üí 19:49 </span>
<span class="hljs-comment">// medium ‚Üí 19:49:17 </span>
<span class="hljs-comment">// long ‚Üí 19:49:17 GMT+2</span>
<span class="hljs-comment">// full ‚Üí 19:49:17  ,  </span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is timeStyle, it was created a few months ago and it allows you to format the date and time without resorting to Moment.js. </font><font style="vertical-align: inherit;">In addition, there is a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">formatRange</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Any task associated with choosing a date range (such as on sites with a reservation function) is always difficult. </font><font style="vertical-align: inherit;">But the method for this already exists in the browser. </font><font style="vertical-align: inherit;">And, most importantly, this method supports internationalization, while eliminating the need to download additional libraries.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intl.RelativeTimeFormat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I worked on the documentation for the second part of this project, and if you also want to participate, we need help with translating into Russian and in compliance with standards. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RelativeTimeFormat is</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> needed when you need to do a countdown.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> myTime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Intl</span>.RelativeTimeFormat(<span class="hljs-string">'ru'</span>, { <span class="hljs-attr">style</span>: <span class="hljs-string">'narrow'</span> }); <font></font>
myTime.format(<span class="hljs-number">2</span> , <span class="hljs-string">'quarter'</span>); 
<span class="hljs-comment">//Style Narrow : +2 . ‚Üí in 2 qtrs. ‚Üí dentro de 2 trim. </span>
<span class="hljs-comment">//Style Long :  2  ‚Üí in 2 quarters ‚Üí dentro de 2 trimestres</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now this is quite simple to do, you can specify the time in two days, two weeks, in a quarter, etc. Previously, such formatting on the web did not exist. </font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> myTime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Intl</span>.RelativeTimeFormat(<span class="hljs-string">'ru'</span>, { <span class="hljs-attr">style</span>: <span class="hljs-string">'narrow'</span> }); <font></font>
myTime.format(<span class="hljs-number">2</span> , <span class="hljs-string">'day'</span>); 
<span class="hljs-comment">//Style Narrow : +2 . ‚Üí in 2 days ‚Üí dentro de 2 d√≠as </span>
<span class="hljs-comment">//Style Long :  2  ‚Üí dentro de 2 d√≠as myTime.format(-1 , 'day');</span>
<span class="hljs-comment">//Style Narrow : -1 . ‚Üí 1 day ago ‚Üí hace 1 d√≠a </span>
<span class="hljs-comment">//Style Long : 1   ‚Üí 1 day ago ‚Üí hace 1 d√≠a //Numeric(auto) :  ‚Üí yesterday ‚Üí ayer </span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is an example in Russian. </font><font style="vertical-align: inherit;">You yourself can test the operation of this code, because it is already in your browser.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> myTime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Intl</span>.RelativeTimeFormat(<span class="hljs-string">'ru'</span>, { <span class="hljs-attr">style</span>: <span class="hljs-string">'narrow'</span> }); <font></font>
myTime.format(<span class="hljs-number">20</span> , <span class="hljs-string">'seconds'</span>); 
<span class="hljs-comment">//Style Narrow : +20  ‚Üí in 20 sec. ‚Üí dentro de 20 s </span>
<span class="hljs-comment">//Style Long :  20  ‚Üí in 20 seconds ‚Üí dentro de 20 segundos</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This method is very useful, it can give time in the short format that you see above. </font><font style="vertical-align: inherit;">I emphasize that for all this you do not need to use any third-party libraries.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intl.NumberFormat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The next thing I wanted to share is </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intl.NumberFormat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">I will talk about the third stage, but only the second is presented in the examples, because some changes are still being discussed. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intl.NumberFormat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> works with units and record forms. </font><font style="vertical-align: inherit;">It is worth paying attention to what he does with units: he allows you to work with different styles.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">new</span> <span class="hljs-built_in">Intl</span>.NumberFormat(<span class="hljs-string">"ru"</span>, { 
<span class="hljs-attr">style</span>: <span class="hljs-string">"unit"</span>, 
<span class="hljs-attr">unit</span>: <span class="hljs-string">"liter"</span>, <span class="hljs-attr">unitDisplay</span>: <span class="hljs-string">"long"</span> 
}).format(<span class="hljs-number">16</span>); 
<span class="hljs-comment">// ‚Üí 16  ‚Üí 16 liters ‚Üí 16 litros</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All units are taken from UTC 35, and there are a lot of them. </font><font style="vertical-align: inherit;">In total, about 140 units for formatting are presented here. </font><font style="vertical-align: inherit;">So now internationalization is easier than ever. </font><font style="vertical-align: inherit;">You just need to translate your lines, and all the necessary dynamics is already contained in the browser.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> nbr = <span class="hljs-number">987654321</span>; 
<span class="hljs-keyword">new</span> <span class="hljs-built_in">Intl</span>.NumberFormat(<span class="hljs-string">'ru'</span>, { <span class="hljs-attr">notation</span>: <span class="hljs-string">'scientific'</span> }).format(nbr); 
<span class="hljs-comment">// ‚Üí 9,877E8 ‚Üí 9.877E8 (en-US) </span>
<span class="hljs-keyword">new</span> <span class="hljs-built_in">Intl</span>.NumberFormat(<span class="hljs-string">'ru'</span>, { <span class="hljs-attr">notation</span>: <span class="hljs-string">'engineering'</span> }).format(nbr); 
<span class="hljs-comment">// ‚Üí 987,654E6 ‚Üí 987.654E6 (en-US) </span>
<span class="hljs-keyword">new</span> <span class="hljs-built_in">Intl</span>.NumberFormat(<span class="hljs-string">'ru'</span>, { <span class="hljs-attr">notation</span>: <span class="hljs-string">'compact'</span> }).format(nbr); 
<span class="hljs-comment">// ‚Üí 988  ‚Üí 988M (en-US) ‚Üí 9.9‰∫ø (zn-CN) </span>
<span class="hljs-keyword">new</span> <span class="hljs-built_in">Intl</span>.NumberFormat(<span class="hljs-string">'ru'</span>, { <span class="hljs-attr">notation</span>: <span class="hljs-string">'compact'</span>, <span class="hljs-attr">compactDisplay</span>: <span class="hljs-string">'long'</span> }).format(nbr); 
<span class="hljs-comment">// ‚Üí 988  ‚Üí 988 millions (fr)</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now for the recording forms. </font><font style="vertical-align: inherit;">To be honest, I don‚Äôt use them too often, because I don‚Äôt use the form of recording with the exponent (scientific record), and I don‚Äôt need to present large numbers. </font><font style="vertical-align: inherit;">But if you need it, then there is a corresponding API specially for you.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intl.ListFormat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another useful API is </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intl.ListFormat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which is already in the third stage and allows you to format lists in two different ways. </font><font style="vertical-align: inherit;">Suppose I need to say the phrase "I'm going to HolyJS." </font><font style="vertical-align: inherit;">We can make a list that includes the lines ‚ÄúMoscow‚Äù and ‚ÄúSt. </font><font style="vertical-align: inherit;">Petersburg ‚Äù, specify the parameter‚Äú conjunction ‚Äù, and the lines will be combined by the union of the Russian language‚Äú and ‚Äù. </font><font style="vertical-align: inherit;">This is a completely new feature, and very useful. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pd/g9/yj/pdg9yjaiignxqs9-gkf_bi3cape.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you specify "disjunction", then we get the union "or". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mf/jx/rb/mfjxrbbzpkwufqyo2adyccrhft0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finally, the function can automatically determine the language and alphabet used and sort the list items accordingly.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intl.PluralRules</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another important API is </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intl.PluralRules</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">This API is the oldest of all, but for some reason no one uses it. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ht/bh/nq/htbhnqvwll52oqap3wize454olu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When I see the lists of finalists in races or in football, the numbers are always indicated next to the names: ‚Äú1‚Äù, ‚Äú2‚Äù, ‚Äú3‚Äù, etc. But this does not correspond to the way we say it would be much closer for speech, write ‚Äú1st‚Äù, ‚Äú2nd‚Äù, ‚Äú3rd‚Äù. </font><font style="vertical-align: inherit;">And for this there are special APIs, which are not so difficult to use. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/li/-k/ul/li-kulanym2mvdlhn6fdg0ldzuk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, we can write the phrases ‚Äú1 cat‚Äù, ‚Äú0 cats‚Äù, ‚Äú0.5 cats‚Äù, ‚Äú1.5 cats‚Äù, and the API will automatically select the correct plural ending.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intl.DisplayNames</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is one of the most popular APIs, because we very often have to display lists of countries. Suppose we have a list of countries - for example, in a database or in JSON. Then, each time you switch the language, we need to load a separate JSON with a new list of countries, currencies, and so on. There are too many of these JSONs, and how does it end? We create a microservice in which a database with various languages ‚Äã‚Äãis built-in, and we extract all the data from it. Of course, in the example with the list of countries we were lucky and we need to update the data infrequently - but it will not always be like that, right? We cannot solve all problems at once, but DisplayNames solves some of them. You have the API as in the example below, and you can request only a list of currencies or only a list of countries:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> currencyNames = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Intl</span>.DisplayNames([<span class="hljs-string">'en'</span>], {<span class="hljs-attr">type</span>: <span class="hljs-string">'currency'</span>}); currencyNames.of(<span class="hljs-string">'USD'</span>); <span class="hljs-comment">// "US Dollar" </span>
currencyNames.of(<span class="hljs-string">'EUR'</span>); <span class="hljs-comment">// "Euro" </span>
currencyNames.of(<span class="hljs-string">'TWD'</span>); <span class="hljs-comment">// "New Taiwan Dollar" </span>
currencyNames.of(<span class="hljs-string">'CNY'</span>); <span class="hljs-comment">// "Chinese Yuan"</span><font></font>
<font></font>
<font></font>
<span class="hljs-keyword">const</span> languageNames = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Intl</span>.DisplayNames([<span class="hljs-string">'en'</span>], {<span class="hljs-attr">type</span>: <span class="hljs-string">'language'</span>}); languageNames.of(<span class="hljs-string">'fr'</span>); <span class="hljs-comment">// "French" </span>
languageNames.of(<span class="hljs-string">'de'</span>); <span class="hljs-comment">// "German" </span>
languageNames.of(<span class="hljs-string">'fr-CA'</span>); <span class="hljs-comment">// "Canadian French" </span>
languageNames.of(<span class="hljs-string">'zh-Hant'</span>); <span class="hljs-comment">// "Traditional Chinese"</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is a very useful thing. </font><font style="vertical-align: inherit;">It works not only with countries and currencies: in the same way, you can work with months, days of the week and many other things that you as a developer need.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Results and plans for the future</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So far, we have talked about existing APIs. </font><font style="vertical-align: inherit;">Let's move on to our plans for the future. </font><font style="vertical-align: inherit;">My mother tongue is portuguese. </font><font style="vertical-align: inherit;">So on my sites I need to support at least Portuguese and English. </font><font style="vertical-align: inherit;">And since we are very close to Spain, Spanish is also useful. </font><font style="vertical-align: inherit;">Portugal is a very small country, and France is also not so far away, so it would be nice to add French to this list. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For us </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MessageFormat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">very relevant, and it will appear soon. There are libraries, and there are developers who work on them. All of these developers are working on related issues. Most creators of the most popular libraries and most large companies (Netflix, Amazon, Facebook) agree at least in one thing: now there is an urgent need for internationalization. This is also indicated by two million downloads per week. So now we can afford to write </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MessageFormat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> again, and do it in a quality </font><i><font style="vertical-align: inherit;">manner</font></i><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Who will benefit from proper internationalization? The whole web: all companies, all projects, all libraries. Libraries like </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intl.MessageFormat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will not disappear anywhere, but will begin to work in a new way. You will not need to download data, since all the data will already be in the browser. Most likely, you will not need to switch to a new library. Some of these libraries already function as polyfills for some implementations. Some implementations that I mentioned are in the third stage and are not implemented in all browsers. But libraries like </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intl.MessageFormat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> provide polyfillings for this functionality. In general, a new chapter in the history of the web is coming - a real revolution. The web will become accessible and understandable to everyone. This is extremely important.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I believe that it is very important to ensure the uniqueness of our project. If there is one format that can be used in C ++, Java, and JavaScript, then why not use this format everywhere? When we write web pages, we often need to create mobile versions of them, in which case we have to do a lot of work twice. If we had one format for everything, then we could just use the existing resources and API. We need a new level of integration with tools. Internationalization is provided not only by the work of developers directly involved in it. For her, modularity is extremely important, because it is often convenient to use your own formatting tools, your own code. Therefore, you should not close the API, they must be open so that they can connect what the situation requires.Another important point: these APIs must be native. CLDRs provide the data that the internationalization API needs. If you are running Windows or MacOS, then you are already downloading data from the CLDR. CLDR is a unique repository; nobody duplicates its function. This means that data can be downloaded only once and made common to the entire operating system. If all the data for the Intl API is already loaded in the operating system, then why not provide it for all the software on this system?If all the data for the Intl API is already loaded in the operating system, then why not provide it for all the software on this system?If all the data for the Intl API is already loaded in the operating system, then why not provide it for all the software on this system?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Our experience taught us to remember that we are not alone, that not only programmers are working on internationalization. We are developers, not translators. Suppose we need to do a line feed in our interface, we send them to the translation company. But translators often have no context for these lines. This is also absent in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MessageFormat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sometimes this leads to errors, as we have already seen in the mentioned example with the Russian crematorium.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finally, I believe that APIs for internationalization should be easy to use, and everyone should be able to do internationalization ‚Äî this should not take too much time and effort. When writing code for internationalization, you need to be guided from the very beginning. After all, with TDD, they first write a test, and then code; let's start our web projects on this principle with the right internationalization and localization. This will allow us to create sites that are convenient and accessible to everyone.</font></font><br>
<blockquote>   HolyJS 2020 Piter      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">¬´Speak my language %app%¬ª</a>.          ,          ,   :             .     HolyJS 2020 Piter   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> </a>.   ,      .</blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en489848/index.html">Why do my colleagues / employees behave like @% ¬ß?</a></li>
<li><a href="../en489850/index.html">Security Week 09: who is responsible for Android security?</a></li>
<li><a href="../en489852/index.html">Transparent authentication in ASP.Net Core on Linux</a></li>
<li><a href="../en489854/index.html">Redux vs MobX without confusion</a></li>
<li><a href="../en489856/index.html">Banach-Tarski reverse paradox or how to reduce the stored data volume by five times</a></li>
<li><a href="../en489860/index.html">The history of Telefunken: the phoenix of German electronics from Wilhelm II and Goebbels to the Beatles and today</a></li>
<li><a href="../en489862/index.html">Planning in Go: Part II - The Go Scheduler</a></li>
<li><a href="../en489868/index.html">Freezing Mozilla WebThings</a></li>
<li><a href="../en489870/index.html">Free offline intensive by Node.js in Nizhny Novgorod</a></li>
<li><a href="../en489872/index.html">How the DLP system and the OCR module prevented employees from falsifying passport scans</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>