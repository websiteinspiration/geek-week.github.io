<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕔 👃🏽 🚠 FlinkCEPを使用してデータストリーム内のイベントのチェーンを探す ✌🏾 🏧 👩🏿‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="この記事では、オープンなApache Flinkプラットフォームを使用して一連のイベントを検出する方法について説明します。この記事は、ストリーミングデータ処理の分野の初心者や、Apache Flinkについて知りたい方に適しています。
 
 現在、ビッグデータの処理、保存、フィルタリング、分析にさま...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>FlinkCEPを使用してデータストリーム内のイベントのチェーンを探す</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471946/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事では、オープンな</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Flink</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プラットフォーム</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用して</font><font style="vertical-align: inherit;">一連のイベントを検出する方法について説明します。この記事は、ストリーミングデータ処理の分野の初心者や、Apache Flinkについて知りたい方に適しています。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、ビッグデータの処理、保存、フィルタリング、分析にさまざまなアプローチがあることは明らかです。別のクラスでは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イベント駆動型アーキテクチャに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基づいてシステムを区別できます</font><font style="vertical-align: inherit;">。これらのシステムは、リアルタイムに近いモードを含むさまざまな問題を解決するように設計されています。これらのタスクの1つは、大規模な入力データストリームでの関連イベントの複雑なチェーンの検出（検出、識別）です（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FlinkCEP-パターン検出</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。通常、このタスクは複雑なイベント処理システム（CEP）によって解決されます。これは、特定のイベント、異常、詐欺システムを検索し、現在のイベントに基づいて将来を予測するために、入力データストリーム内の数百、時には数千のユーザー定義パターンを処理する必要があります。この記事では、そのような問題を解決できるFlinkCep Apache Flinkライブラリに焦点を当てます。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 このメカニズムにより、入力データの無限のストリームでリクエスト（テンプレート）によってオブジェクトを見つけることができます。</font><font style="vertical-align: inherit;">オブジェクトは、動作を設定したり、イベントのシーケンスを決定したりできるもので特徴付けられます。</font><font style="vertical-align: inherit;">テンプレートは、オブジェクトが実行できる特定のアクションのセットです。</font><font style="vertical-align: inherit;">データが所定のパターンを満たすとすぐに、システムはオブジェクトを目的のものとして識別し、結果を提供します。</font><font style="vertical-align: inherit;">したがって、テンプレートメカニズムを使用する場所は、オブジェクトの動作の特定のモデルの識別です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアプローチの利点は、データがすぐに処理されることです。</font><font style="vertical-align: inherit;">それでは、理論と例を詳しく見ていきましょう。</font></font><br>
 <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一連のイベントとは何ですか？</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一連のイベントの非常に単純な例として、たとえば、マシンの選択など、サイトでのユーザーアクションの入力データストリームを使用できます。最初に、ユーザーは個人用アカウントを開き、次にマシン構成を選択してから、ローン金利を調べました。 3つのアクションのチェーンは以下を受け取りました：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/86/up/zf/86upzf1srg0hfpquboc71ursaim.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サイト上のユーザー行動モデルの3つのアクション。入力データストリームを使用して、最初にマシン構成を取得し、次にローンレートを調べたユーザーを特定する必要があります。これにより、有利な融資提案を送信し、銀行商品の変換率を上げることができると仮定します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
世帯に一連のイベントの例を示すことができます。センサーに従ってボイラー内の温度の不安定性を追跡します。オブジェクトでは、温度が最初に上昇し、次に低下し、特定の時間間隔内で再び上昇しました。次に、温度変化の一連のイベントは次の</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_3/4k/2s/_34k2sri5e68b20mss5jubmvta8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ようになります。上記の例のように、オブジェクトの動作の特定のモデルがここに表示されます。これは、入力データストリームで見つけることができます。このチェーンが検出されると、システムの問題が検出されたことをディスパッチャーに通知できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FlinkパターンCEPを使用すると、リアルタイムで、および既存のデータ配列を処理するときに、イベントのチェーンを識別することができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オブジェクトの動作の以前から知られているモデルと呼ばれるパターンCEP（パターン）。より単純なケースでは、温度により、3つのアクションがあることがわかります。これはテンプレートで説明する必要があります-たとえば、5分で、バラ、減り、再びバラします。あなたは、疑似言語でこれを想像した場合、それはこのようなものになります。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PatternTempUpを（）_ </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">THEN </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_PatternTempDown（）_ </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">THEN </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_PatternTempUp（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> _Within（5分）</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
我々はパターンを知って、イベントの流れが与えられ、FLINKはすべてを見つけるでしょう！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、タスクを複雑にして、よく知られたテンプレートに基づいて別のタスクを設定したい場合はどうでしょうか。</font><font style="vertical-align: inherit;">温度の不安定性を検出するメカニズムはわかっていますが、オブジェクトの圧力の変化などを制御する必要もあります。</font><font style="vertical-align: inherit;">そして、この問題でFlinkCepはうまく対処しています。</font><font style="vertical-align: inherit;">単純なサブクエリに基づいて複雑なサブクエリを作成し、テンプレート自体のシーケンスを作成できます。</font><font style="vertical-align: inherit;">認識を容易にするために、単一パターンを単純なパターンと複雑なパターンを一連のパターンと呼びます。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての善は</font><i><font style="vertical-align: inherit;">「始まる」</font></i><font style="vertical-align: inherit;">という言葉から始まる</font></font><i><font style="vertical-align: inherit;"></font></i></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 イベントのシーケンスを宣言するための主なクラスは、静的な</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">begin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドを含むPatternクラス</font><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<pre><code class="java hljs">.....
<span class="hljs-comment">/**
 *    .        
* <span class="hljs-doctag">@param</span> name      
* <span class="hljs-doctag">@param</span> &lt;X&gt;    
* <span class="hljs-doctag">@return</span>    
*/</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;X&gt; <span class="hljs-function">Pattern&lt;X, X&gt; <span class="hljs-title">begin</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String name)</span> </span>{
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Pattern&lt;&gt;(name, <span class="hljs-keyword">null</span>, ConsumingStrategy.STRICT, AfterMatchSkipStrategy.noSkip());}<font></font>
.......<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、エントリポイントは、Patternクラスのbeginメソッドです。単純なテンプレートまたはテンプレートのシーケンスがある場合は、startはbeginで始まります。</font><font style="vertical-align: inherit;">イベントをサイト上のクライアントの動作に関連付けます。したがって、このイベントを表すクラスはClientEventです。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> patternFirst = Pattern.&lt;ClientEvent&gt;begin(<span class="hljs-string">"First_Pattern_sequence"</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
守らなければならない重要なルールは、各テンプレートに名前が必要であり、この名前は</font><font style="vertical-align: inherit;">単一のFlinkハンドラー内</font><font style="vertical-align: inherit;">で</font></font><u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一意</font></font></b></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">なければならないということ</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">上記で見たように、名前はbeginメソッドの引数に渡されます。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パターンAPIツール</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テンプレートは単一または円形にすることができます。</font><font style="vertical-align: inherit;">テンプレートのトリガー方法をカスタマイズできます。</font><font style="vertical-align: inherit;">1回のみ、1時間に2回以下、2回以上、およびその他の可能なオプション。</font><font style="vertical-align: inherit;">この設定は「量指定子」と呼ばれ、次のタイプがあります。</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド名</font></font></th>
<th></th>
<th></th>
</tr>
<tr>
<td>Times(value)</td>
<td>   . Value —   </td>
<td>Pattern.times(3) —  3 </td>
</tr>
<tr>
<td>Times(#FromValue, #ToValue)</td>
<td>       #FromValue  #ToValue</td>
<td>Pattern.times(0,3) —   0  3 </td>
</tr>
<tr>
<td>Optional()</td>
<td>,     ,       </td>
<td>Pattern.times(3).optional() —   0  3 </td>
</tr>
<tr>
<td>Greedy()</td>
<td>      </td>
<td>Pattern.times(3,5).greedy() —  3-5      . Pattern.times(2,4).optional().greedy() —  0, 2-4      <br>
 </td>
</tr>
<tr>
<td>OneOrMore()</td>
<td>      . <u>.     until()  within()</u></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pattern.oneOrMore（）-少なくとも1つの出現が予想されます。</font><font style="vertical-align: inherit;">Pattern.oneOrMore（）。オプション（）-0回以上の出現が期待されます</font></font></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最も重要なことは、動作モデルが決定される条件を設定することです。</font><font style="vertical-align: inherit;">明らかに、これには演算子が使用されます-比較操作を考慮に入れることができる条件。</font><font style="vertical-align: inherit;">次の表は、これらの演算子を示しています。</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テンプレート操作</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どこ（状態）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イベントに適用される条件を定義します。</font><font style="vertical-align: inherit;">whereメソッドは、ブール型になる比較演算を使用します。</font></font><br>
 </td>
</tr>
<tr>
<td colspan="2"> <pre><code class="java hljs">Pattern.&lt;ClientEvent&gt; begin(<span class="hljs-string">"open_LC"</span>).where((value,ctx) -&gt; <span class="hljs-keyword">return</span> value.getPlace.equals(<span class="hljs-string">"  "</span>))
                </code></pre></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または（条件）</font></font></td>
<td> "<u></u>",       .   or    ,     boolean.     "<u>where</u>"   "<u>or</u>".<br>
 </td>
</tr>
<tr>
<td colspan="2"> <br>
 <pre><code class="java hljs">Pattern.&lt;ClientEvent&gt; begin(<span class="hljs-string">"open_LC"</span>).where((value,ctx) -&gt; <span class="hljs-keyword">return</span> value.getPlace.equals(<span class="hljs-string">"  "</span>)).or((value,ctx) -&gt; <span class="hljs-keyword">return</span> value.getPlace.equals(<span class="hljs-string">"    "</span>))
                </code></pre><br>
 </td>
</tr>
<tr>
<td>Until(condition)</td>
<td>   .   until    ,     boolean.    ,     .   ,    oneOrMore().<br>
 </td>
</tr>
<tr>
<td colspan="2"> <br>
 <pre><code class="java hljs">Pattern.&lt;ClientEvent&gt; begin(<span class="hljs-string">"open_LC"</span>).where((value,ctx) -&gt; <span class="hljs-keyword">return</span> value.getPlace.equals(<span class="hljs-string">"  "</span>)).oneOrMore().until((value,ctx) -&gt; <span class="hljs-keyword">return</span> value.getPlace.equals(<span class="hljs-string">"  "</span>))
                </code></pre><br>
 </td>
</tr>
<tr>
<td>Subtype(SubClass)</td>
<td>  .   ,    .<br>
 </td>
</tr>
<tr>
<td colspan="2"> <pre><code class="java hljs">DataStream&lt;ClientEvent&gt; input = <font></font>
env.fromElements(<span class="hljs-keyword">new</span> ClientEvent(), <span class="hljs-keyword">new</span> SubClientEvent(), <span class="hljs-keyword">new</span> ClientEvent()); <font></font>
<font></font>
Pattern&lt;ClientEvent, ?&gt; pattern = Pattern.&lt;ClientEvent&gt; begin(<span class="hljs-string">"start"</span>).subtype(SubClientEvent.class)
                        </code></pre><br>
 </td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テンプレートの形成は、3つのアクションで構成されます。テンプレートを作成し、検索を示し、条件をトリガーします。</font><font style="vertical-align: inherit;">しかし、テンプレート自体を一連のアクションに組み合わせるにはどうすればよいでしょうか。</font><font style="vertical-align: inherit;">これを行うには、テンプレート間の関係を確立し、すでに作成されたテンプレートを再利用し、存続期間を示し、各イベントの検索を形成することを可能にする演算子があります。</font><font style="vertical-align: inherit;">これらの演算子には次の3つのタイプがあります。</font></font><br>
<br>
<ol>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">厳密な隣接性</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -厳密なコミュニケーション。すべての一致するイベントは、厳密に次々と実行される必要があります。</font></font></li>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">近接性の緩和</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -弱い接続。一致するイベントの間に現れる不一致のイベントを無視できます。</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非決定論的な緩和された隣接性</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -さらに弱い接続により、一部の一致イベントが見逃す可能性がある追加の一致が可能になります。</font></font></li>
</ol><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テンプレート操作</font></font></th>
<th></th>
</tr>
<tr>
<td>Begin(#name)</td>
<td>      <br>
<pre><code class="java hljs">Pattern&lt;ClientEvent, ?&gt; start = <span class="hljs-function">Pattern&lt;ClientEvent&gt; <span class="hljs-title">begin</span><span class="hljs-params">(“start”)</span>.<span class="hljs-title">where</span><span class="hljs-params">(#any condition)</span></span></code></pre><br>
</td>
</tr>
<tr>
<td>Begin(#pattern)</td>
<td>       ( )<br>
<pre><code class="java hljs">Pattern&lt;ClientEvent, ?&gt; start = <span class="hljs-function">Pattern&lt;ClientEvent&gt; <span class="hljs-title">begin</span>
<span class="hljs-params">(Pattern&lt;ClientEvent&gt; begin(“nested_pattern”)</span>)</span></code></pre><br>
</td>
</tr>
<tr>
<td>Next(#name)</td>
<td>     .         ( <u>strict contiguity</u>)<br>
<pre><code class="java hljs">Pattern&lt;ClientEvent, ?&gt; next = start.next(“next_pattern”)</code></pre><br>
</td>
</tr>
<tr>
<td>Next(#pattern)</td>
<td>      .          ( <u>strict contiguity</u>)<br>
<pre><code class="java hljs">Pattern&lt;ClientEvent, ?&gt; next = start.next(<span class="hljs-function">Pattern&lt;ClientEvent&gt; <span class="hljs-title">begin</span><span class="hljs-params">(“nested_pattern”)</span>.<span class="hljs-title">where</span><span class="hljs-params">(#any condition)</span>)</span></code></pre><br>
</td>
</tr>
<tr>
<td>FollowedBy(#name)</td>
<td>     .           ( <u>relaxed contiguity</u>)<br>
<pre><code class="java hljs">Pattern&lt;ClientEvent, ?&gt; followedBy = start.followedBy(“followedBy _pattern”)</code></pre><br>
</td>
</tr>
<tr>
<td>FollowedBy(#pattern)</td>
<td>     .            ( <u>relaxed contiguity</u>)<br>
<pre><code class="java hljs"> Pattern&lt;ClientEvent, ?&gt; followedBy = start.next(Pattern&lt;ClientEvent&gt;begin(“nested_pattern”).where(#any condition)) </code></pre><br>
</td>
</tr>
<tr>
<td>FollowedByAny(#name)</td>
<td>     .          ,          ( <u>non-deterministic relaxed contiguity</u>)<br>
<pre><code class="java hljs">Pattern&lt;ClientEvent, ?&gt; followedByAny = start.followedByAny(“followedByAny _pattern”)</code></pre><br>
</td>
</tr>
<tr>
<td>FollowedByAny (#pattern)</td>
<td>     .          ,          ( <u>non-deterministic relaxed contiguity</u>)<br>
<pre><code class="java hljs"> Pattern&lt;ClientEvent, ?&gt; followedByAny = start.next(Pattern&lt;ClientEvent&gt;begin(“nested_pattern”).where(#any condition)) </code></pre><br>
</td>
</tr>
<tr>
<td>NotNext(#name)</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいネガティブテンプレートを追加します。</font><font style="vertical-align: inherit;">イベント（負）は、検出された直前のイベントの直後に続く必要があります（</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">厳密な隣接</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプ</font><font style="vertical-align: inherit;">）</font></font><br>
<pre><code class="java hljs">Pattern&lt;ClientEvent, ?&gt;notNext = start.notNext(“not”) </code></pre><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NotFollowedBy（#name）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいネガティブテンプレートを追加します。</font><font style="vertical-align: inherit;">イベントの部分的マッチングシーケンスは、他のイベントがマッチング（負の）イベントと以前のマッチングイベント（入力との間に発生しても破棄される</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">緩和連続性</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><br>
<pre><code class="java hljs">Pattern&lt;ClientEvent, ?&gt;notFollowedBy = start.next(Pattern&lt;ClientEvent&gt;begin(“nested_pattern”).where(#any condition))</code></pre><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（時間内）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一連のイベントが生成される最大時間間隔を定義します。</font><font style="vertical-align: inherit;">不完全なイベントのシーケンスが存在する場合、それは破棄されます。</font></font><br>
<pre><code class="java hljs">start.within(Times.seconds(<span class="hljs-number">50</span>))</code></pre><br>
</td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">理論はもちろん良いですが、具体的で単純な例を使用してシステムの動作を検討すると、より視覚的になります。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フリンクパターンCEPの例</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Java + Mavenでプロジェクトを作成します。</font><font style="vertical-align: inherit;">Flink-streaming-javaおよびFlink-Cepを追加します。</font></font><br>
<br>
<pre><code class="xml hljs">  <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">flink.version</span>&gt;</span>1.9.1<span class="hljs-tag">&lt;/<span class="hljs-name">flink.version</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.flink<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>flink-streaming-java_2.12<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${flink.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.flink<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>flink-cep_2.12<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${flink.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
イベントクラス（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Event</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">を作成します。</font><font style="vertical-align: inherit;">例をわかりやすくするために、クラスには1つのフィールド（id）のみが含まれます。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Event</span> </span>{
  <span class="hljs-keyword">private</span> Integer id;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、ループと1から3までのidのランダムな値を持つ単純な入力データソースを追加します。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MonitoringEvent</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">SourceFunction</span>&lt;<span class="hljs-title">Event</span>&gt; </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">(SourceContext sourceContext)</span> </span>{<font></font>
<font></font>
        Random random1 = <span class="hljs-keyword">new</span> Random();<font></font>
<font></font>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {<font></font>
            Event Event = <span class="hljs-keyword">new</span> Event(random1.nextInt(<span class="hljs-number">3</span>));<font></font>
            System.out.println(<span class="hljs-string">"Source  "</span> + Event);<font></font>
            sourceContext.collect(Event);<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">cancel</span><span class="hljs-params">()</span> </span>{}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Strict Contiguity、Relaxed Contiguity、Non-Deterministic Relaxed Contiguityの3つの例を作成してみましょう。</font><font style="vertical-align: inherit;">入力データストリームで、id = 1、次にid = 2のイベントが最初に検索されるという条件で。</font></font><br>
<br>
<ul>
<li><b>Strict Contiguity</b><br>
        —  id  1,      id  2.  ,        ,          id  1. <br>
 <br>
 : <br>
<br>
<pre><code class="plaintext hljs">Source  Event(id=1)<font></font>
Source  Event(id=1)<font></font>
Source  Event(id=2)<font></font>
Source  Event(id=2)<font></font>
Source  Event(id=2)<font></font>
Source  Event(id=2)<font></font>
Source  Event(id=1)<font></font>
Source  Event(id=1)<font></font>
Source  Event(id=0)<font></font>
Source  Event(id=1)<font></font>
result &gt; &lt;u&gt;{first=[Event(id=1)], next=[Event(id=2)]}&lt;/u&gt;</code></pre><br>
<div class="spoiler"><b class="spoiler_title">   Strict Contiguity</b><div class="spoiler_text"><pre><code class="java hljs">StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();<font></font>
env.setStreamTimeCharacteristic(TimeCharacteristic.EventTime);<font></font>
DataStream&lt;Event&gt; inputEventStream = env.addSource(<span class="hljs-keyword">new</span> MonitoringEvent())<font></font>
        .assignTimestampsAndWatermarks(<span class="hljs-keyword">new</span> IngestionTimeExtractor&lt;&gt;());<font></font>
<font></font>
Pattern&lt;Event, ?&gt; warningPattern = Pattern.&lt;Event&gt;begin(<span class="hljs-string">"first"</span>).where(<span class="hljs-keyword">new</span> IterativeCondition&lt;Event&gt;() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">2392863109523984059L</span>;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">filter</span><span class="hljs-params">(Event value, Context&lt;Event&gt; ctx)</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">return</span> value.getId() == <span class="hljs-number">1</span>;<font></font>
    }<font></font>
}).next(<span class="hljs-string">"next"</span>).where(<span class="hljs-keyword">new</span> IterativeCondition&lt;Event&gt;() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">2392863109523984059L</span>;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">filter</span><span class="hljs-params">(Event value, Context&lt;Event&gt; ctx)</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">return</span> value.getId() == <span class="hljs-number">2</span>;<font></font>
    }<font></font>
});<font></font>
<font></font>
PatternStream&lt;Event&gt; idEventStream = CEP.pattern(inputEventStream, warningPattern);<font></font>
DataStream&lt;Map&lt;String, List&lt;Event&gt;&gt;&gt; warnings = idEventStream.select(<span class="hljs-keyword">new</span> PatternSelectFunction&lt;Event, Map&lt;String, List&lt;Event&gt;&gt;&gt;() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;Event&gt;&gt; select(Map&lt;String, List&lt;Event&gt;&gt; pattern) <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">return</span> pattern;<font></font>
    }<font></font>
});<font></font>
warnings.print();<font></font>
env.execute(<span class="hljs-string">"monitoring job"</span>);
</code></pre><br>
</div></div></li>
<li><b>Relaxed Contiguity</b><br>
       —  id  1,      id  2.  ,        ,           .   .<br>
 <br>
 : <br>
<br>
<pre><code class="plaintext hljs">Source  Event(id=0)<font></font>
Source  Event(id=0)<font></font>
Source  Event(id=1)<font></font>
Source  Event(id=1)<font></font>
Source  Event(id=2)<font></font>
Source  Event(id=2)<font></font>
Source  Event(id=1)<font></font>
Source  Event(id=1)<font></font>
Source  Event(id=0)<font></font>
Source  Event(id=0)<font></font>
result &gt; &lt;u&gt;{first=[Event(id=1)], followedBy=[Event(id=2)]}&lt;/u&gt;<font></font>
result &gt; &lt;u&gt;{first=[Event(id=1)], followedBy=[Event(id=2)]}&lt;/u&gt;</code></pre><br>
<div class="spoiler"><b class="spoiler_title">   Relaxed Contiguity</b><div class="spoiler_text"><pre><code class="java hljs"> <font></font>
StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();<font></font>
env.setStreamTimeCharacteristic(TimeCharacteristic.EventTime);<font></font>
<font></font>
DataStream&lt;Event&gt; inputEventStream = env.addSource(<span class="hljs-keyword">new</span> MonitoringEvent())<font></font>
        .assignTimestampsAndWatermarks(<span class="hljs-keyword">new</span> IngestionTimeExtractor&lt;&gt;());<font></font>
<font></font>
Pattern&lt;Event, ?&gt; warningPattern = Pattern.&lt;Event&gt;begin(<span class="hljs-string">"first"</span>).where(<span class="hljs-keyword">new</span> IterativeCondition&lt;Event&gt;() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">2392863109523984059L</span>;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">filter</span><span class="hljs-params">(Event value, Context&lt;Event&gt; ctx)</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">return</span> value.getId() == <span class="hljs-number">1</span>;<font></font>
    }<font></font>
}).followedBy(<span class="hljs-string">"followedBy"</span>).where(<span class="hljs-keyword">new</span> IterativeCondition&lt;Event&gt;() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">2392863109523984059L</span>;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">filter</span><span class="hljs-params">(Event value, Context&lt;Event&gt; ctx)</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">return</span> value.getId() == <span class="hljs-number">2</span>;<font></font>
    }<font></font>
});<font></font>
<font></font>
PatternStream&lt;Event&gt; idEventStream = CEP.pattern(inputEventStream, warningPattern);<font></font>
<font></font>
DataStream&lt;Map&lt;String, List&lt;Event&gt;&gt;&gt; warnings = idEventStream.select(<span class="hljs-keyword">new</span> PatternSelectFunction&lt;Event, Map&lt;String, List&lt;Event&gt;&gt;&gt;() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;Event&gt;&gt; select(Map&lt;String, List&lt;Event&gt;&gt; pattern) <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">return</span> pattern;<font></font>
    }<font></font>
});<font></font>
warnings.print();<font></font>
env.execute(<span class="hljs-string">"monitoring job"</span>);
</code></pre></div></div></li>
<li><b>Non-Deterministic Relaxed Contiguity</b><br>
       —  id  1,      id  2.  ,        ,           .          . <br>
 <br>
 : <br>
<br>
<pre><code class="plaintext hljs">Source  Event(id=0)<font></font>
Source  Event(id=1)<font></font>
Source  Event(id=1)<font></font>
Source  Event(id=1)<font></font>
Source  Event(id=1)<font></font>
Source  Event(id=1)<font></font>
Source  Event(id=2)<font></font>
Source  Event(id=0)<font></font>
Source  Event(id=1)<font></font>
Source  Event(id=0)<font></font>
result &gt; &lt;u&gt;{first=[Event(id=1)], followedByAny=[Event(id=2)]}&lt;/u&gt;<font></font>
result &gt; &lt;u&gt;{first=[Event(id=1)], followedByAny=[Event(id=2)]}&lt;/u&gt;<font></font>
result &gt;&lt;u&gt; {first=[Event(id=1)], followedByAny=[Event(id=2)]}&lt;/u&gt;<font></font>
result &gt;&lt;u&gt; {first=[Event(id=1)], followedByAny=[Event(id=2)]}&lt;/u&gt;<font></font>
result &gt;&lt;u&gt; {first=[Event(id=1)], followedByAny=[Event(id=2)]}&lt;/u&gt;</code></pre><br>
<div class="spoiler"><b class="spoiler_title">   Non-Deterministic Relaxed Contiguity</b><div class="spoiler_text"><pre><code class="java hljs">StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();<font></font>
env.setStreamTimeCharacteristic(TimeCharacteristic.EventTime);<font></font>
<font></font>
DataStream&lt;Event&gt; inputEventStream = env.addSource(<span class="hljs-keyword">new</span> MonitoringEvent())<font></font>
        .assignTimestampsAndWatermarks(<span class="hljs-keyword">new</span> IngestionTimeExtractor&lt;&gt;());<font></font>
<font></font>
Pattern&lt;Event, ?&gt; warningPattern = Pattern.&lt;Event&gt;begin(<span class="hljs-string">"first"</span>).where(<span class="hljs-keyword">new</span> IterativeCondition&lt;Event&gt;() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">2392863109523984059L</span>;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">filter</span><span class="hljs-params">(Event value, Context&lt;Event&gt; ctx)</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">return</span> value.getId() == <span class="hljs-number">1</span>;<font></font>
    }<font></font>
}).followedByAny(<span class="hljs-string">"followedByAny"</span>).where(<span class="hljs-keyword">new</span> IterativeCondition&lt;Event&gt;() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">2392863109523984059L</span>;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">filter</span><span class="hljs-params">(Event value, Context&lt;Event&gt; ctx)</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">return</span> value.getId() == <span class="hljs-number">2</span>;<font></font>
    }<font></font>
});<font></font>
<font></font>
PatternStream&lt;Event&gt; idEventStream = CEP.pattern(inputEventStream, warningPattern);<font></font>
<font></font>
DataStream&lt;Map&lt;String, List&lt;Event&gt;&gt;&gt; warnings = idEventStream.select(<span class="hljs-keyword">new</span> PatternSelectFunction&lt;Event, Map&lt;String, List&lt;Event&gt;&gt;&gt;() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;Event&gt;&gt; select(Map&lt;String, List&lt;Event&gt;&gt; pattern) <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">return</span> pattern;<font></font>
    }<font></font>
});<font></font>
<font></font>
warnings.print();<font></font>
env.execute(<span class="hljs-string">"monitoring job"</span>);
</code></pre><br>
</div></div></li>
</ul><br>
<h4>  AfterMatchSkipStrategy</h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
イベントマッチングパターンの設定の重要な特徴の1つは、スキップ戦略です。</font><font style="vertical-align: inherit;">イベントに割り当てられる一致の数と方法を制御するには、メソッドの引数でテンプレートを作成するときに（つまり、</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beginで</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">スキップ戦略を指定する必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の値を含む文字列型の入力データストリームがあるとします：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b5</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b6</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a7</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">およびパターン：</font></font><br>
<br>
<pre><code class="java hljs"> Pattern&lt;EventSkipStrategy, ?&gt; warningPattern = Pattern.&lt;EventSkipStrategy&gt;begin(<span class="hljs-string">"first"</span>)<font></font>
        .where(<span class="hljs-keyword">new</span> IterativeCondition&lt;EventSkipStrategy&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">filter</span><span class="hljs-params">(EventSkipStrategy value, Context&lt;EventSkipStrategy&gt; ctx)</span> </span>{
                <span class="hljs-keyword">return</span> value.getId().contains(<span class="hljs-string">"a"</span>);<font></font>
            }<font></font>
        }).times(<span class="hljs-number">2</span>).next(<span class="hljs-string">"next"</span>).where(<span class="hljs-keyword">new</span> IterativeCondition&lt;EventSkipStrategy&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">filter</span><span class="hljs-params">(EventSkipStrategy value, Context&lt;EventSkipStrategy&gt; ctx)</span> </span>{
                <span class="hljs-keyword">return</span> value.getId().contains(<span class="hljs-string">"b"</span>);<font></font>
            }<font></font>
        });</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テンプレートによると、文字</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を含む2つのイベントを連続して検索する必要があります</font><font style="vertical-align: inherit;">。その後に厳密に続くのは、文字</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を含むイベントです</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">スキップ戦略には5つのタイプがあります。</font><font style="vertical-align: inherit;">詳細に検討してください。</font></font><br>
<br>
<ul>
<li><u>NO_SKIP</u>:     .      .       : <br>
<br>
<pre><code class="plaintext hljs"> {first=[Event(id=a1), Event(id=a2)], next=[Event(id=b3)]}<font></font>
{first=[Event(id=a2), Event(id=a4)], next=[Event(id=b5)]}</code></pre><br>
       . <br>
</li>
<li><u>SKIP_TO_NEXT</u>:    ,      ,     .     : <br>
<br>
<pre><code class="plaintext hljs">Pattern.&lt;Event&gt;begin("first", AfterMatchSkipStrategy.skipToNext())</code></pre><br>
      : <br>
<br>
<pre><code class="plaintext hljs">{first=[Event(id=a1), Event(id=a2)], next=[Event(id=b3)]}<font></font>
{first=[Event(id=a2), Event(id=a4)], next=[Event(id=b5)]} </code></pre><br>
,    SKIP_TO_NEXT  NO_SKIP.      ,            b: <b>a1</b>,<b>a2</b>, <b>b3</b>, <b>b4</b>, <b>b5</b>. <br>
<br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><pre><code class="java hljs">Pattern&lt;Event, ?&gt; warningPattern = Pattern.&lt;Event&gt;begin(<span class="hljs-string">"first"</span>)<font></font>
.where(<span class="hljs-keyword">new</span> IterativeCondition&lt;Event&gt;() {
  <span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">filter</span><span class="hljs-params">(Event value, Context&lt;Event&gt; ctx)</span> <span class="hljs-keyword">throws</span> Exception </span>{
     <span class="hljs-keyword">return</span> value.getId().contains(<span class="hljs-string">"a"</span>);<font></font>
    }<font></font>
}).times(<span class="hljs-number">2</span>).next(<span class="hljs-string">"next"</span>).where(<span class="hljs-keyword">new</span> IterativeCondition&lt;Event&gt;() {
   <span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">filter</span><span class="hljs-params">(Event value, Context&lt;Event&gt; ctx)</span> <span class="hljs-keyword">throws</span> Exception </span>{
     <span class="hljs-keyword">return</span> value.getId().contains(<span class="hljs-string">"b"</span>);<font></font>
    }<font></font>
}).oneOrMore();</code></pre></div></div><div class="scrollable-table"><table>
<tbody><tr>
<th> </th>
<th>  </th>
<th></th>
</tr>
<tr>
<td>NO_SKIP</td>
<td><code>a1,a2,b3<br>
a1,a2,b3,b4<br>
a1,a2,b3,b4,b5</code></td>
<td> ,    b3,    ,    </td>
</tr>
<tr>
<td>SKIP_TO_NEXT</td>
<td><code>a1,a2,b3</code></td>
<td> ,    b3,      b4  b5     </td>
</tr>
</tbody></table></div></li>
<li><u>SKIP_PAST_LAST_EVENT</u>:    ,      .     : <br>
<br>
<pre><code class="plaintext hljs">Pattern.&lt;Event&gt;begin("first", AfterMatchSkipStrategy.skipPastLastEvent())</code></pre><br>
      : <br>
<br>
<pre><code class="plaintext hljs"> {first=[Event(id=a1), Event(id=a2)], next=[Event(id=b3)]}</code></pre><br>
    a4,      .<br>
</li>
<li><u>SKIP_TO_FIRST</u>:    ,     ,   ,        .      ,            .<br>
<br>
<div class="spoiler"><b class="spoiler_title">        'first'</b><div class="spoiler_text"><pre><code class="plaintext hljs">{first=[Event(id=a1), Event(id=a2)], next=[Event(id=b3)]}<font></font>
{first=[Event(id=a2), Event(id=a4)], next=[Event(id=b6)]}</code></pre></div></div><br>
<div class="spoiler"><b class="spoiler_title">      c  'next'</b><div class="spoiler_text"><pre><code class="plaintext hljs">{first=[Event(id=a1), Event(id=a2)], next=[Event(id=b3)]}</code></pre></div></div><br>
</li>
<li><u>SKIP_TO_LAST</u>:    ,     ,   ,        .             .<br>
<br>
  : <b>ab1</b>, <b>ab2</b>, <b>a3</b>, <b>ab4</b>, <b>ab5</b>, <b>b6</b>, <b>ab7</b>   : <br>
<br>
<div class="spoiler"><b class="spoiler_title">        'first'</b><div class="spoiler_text"><pre><code class="plaintext hljs">{first=[Event(id=ab2), Event(id=a3)], next=[Event(id=ab4)]}<font></font>
{first=[Event(id=a3), Event(id=ab4)], next=[Event(id=ab5)]}<font></font>
{first=[Event(id=ab4), Event(id=ab5)], next=[Event(id=b6)]}</code></pre></div></div><br>
<div class="spoiler"><b class="spoiler_title">      c  'next'</b><div class="spoiler_text"><pre><code class="plaintext hljs">{first=[Event(id=ab2), Event(id=a3)], next=[Event(id=ab4)]}<font></font>
{first=[Event(id=ab4), Event(id=ab5)], next=[Event(id=b6)]}</code></pre></div></div></li>
</ul><br>
<h4></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パターンFlinkCepにより、イベントフローの分析と必要なデータの検出が容易になります。</font><font style="vertical-align: inherit;">ストリーミングイベントを分析し、オブジェクトの監視に必要なデータを特定するための強力なツールですが、十分に文書化されたシンプルなAPIがあり、多くのコードを記述する必要はありません。</font><font style="vertical-align: inherit;">このライブラリのアプリケーションの範囲は、不正防止からシステム内のログの分析まで、非常に広範囲にわたる可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事で使用されている例を含むgithubへのリンク。</font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Flink開発者による温度変化の実例</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja471928/index.html">Mikrotikルーターで最後に保存された構成を自動的に復元する</a></li>
<li><a href="../ja471930/index.html">アトミックデザインのミタップ-文字、色、ユニフォーム、チーム、お金</a></li>
<li><a href="../ja471938/index.html">レイアウトのメモ：2019年に役立つGoogle Chrome拡張機能</a></li>
<li><a href="../ja471940/index.html">据え置き和解における不払いのリスクを削減する方法：ビジネスのファクタリング</a></li>
<li><a href="../ja471942/index.html">要件に応じて：Kingston DC500RおよびDC500M SSDのプロフェッショナルテスト</a></li>
<li><a href="../ja471948/index.html">ボックスで遊ぶ</a></li>
<li><a href="../ja471950/index.html">未来への私のビジョンD</a></li>
<li><a href="../ja471954/index.html">自分のインターネットラジオ</a></li>
<li><a href="../ja471956/index.html">アニメーション化された状態グラフ</a></li>
<li><a href="../ja471958/index.html">バグのあるGAのAmazon EX Windowsですが、誰よりも高速です</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>