<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👍🏻 🎅 😧 HandsAppMVP: arquitectura iOS para la subcontratación de desarrollo de estudio 🙅🏾 🌠 🔎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Un buen código comienza con la arquitectura, y las aplicaciones de iOS no son una excepción. Existen muchos patrones estándar, pero el propósito de es...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>HandsAppMVP: arquitectura iOS para la subcontratación de desarrollo de estudio</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503364/"><img src="https://habrastorage.org/webt/01/ch/_7/01ch_7_gicde7x_bhhlzcbhxzzq.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un buen código comienza con la arquitectura, y las aplicaciones de iOS no son una excepción. </font><font style="vertical-align: inherit;">Existen muchos patrones estándar, pero el propósito de este artículo no es hablar sobre ellos, sino sobre la experiencia de adaptar uno de ellos y desarrollar el suyo propio. </font><font style="vertical-align: inherit;">Llamamos a esta adaptación HandsAppMVP.</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/iy/lv/a8/iylva8cqu4kcrnft2g2ygjvwngy.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el desarrollo de iOS, la arquitectura determina principalmente la organización de clases y dependencias para un ViewController específico. </font><font style="vertical-align: inherit;">Sin embargo, el componente central puede ser no solo él, sino simplemente UIView. </font><font style="vertical-align: inherit;">La elección depende de la tarea específica.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comparación de arquitectura</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existen varias plantillas arquitectónicas estándar para iOS: MVC, MVP, MVVM, VIPER (los enlaces a la descripción de cada uno se pueden encontrar al final del artículo). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al elegir una arquitectura para el desarrollo, identificamos los principales parámetros a los que debe corresponder: velocidad de desarrollo, flexibilidad y un umbral de entrada bajo. A continuación, comenzamos a comparar tres arquitecturas conocidas con estos parámetros en mente (la plantilla de la comunidad MVC iOS ha estado enterrada durante mucho tiempo debido al grave incumplimiento de la responsabilidad única). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para un equipo de outsourcing, la velocidad de desarrollo es especialmente importante. VIPER es la arquitectura más compleja y "lenta", el desarrollo es más rápido utilizando MVP o MVVM puro, ya que tienen menos componentes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Flexibilidad significa la adición o eliminación indolora de funcionalidad en la aplicación. Este parámetro se correlaciona fuertemente con la velocidad de desarrollo en todas las etapas de la vida de la aplicación, excepto la inicial. La flexibilidad también está estrechamente relacionada con la simplicidad de las pruebas: las pruebas automáticas le dan al desarrollador la confianza de que no romperá nada y ayudan a evitar errores. MVP clásico está mal cubierto por las pruebas, especialmente si no utiliza las interfaces de clase que se analizan a continuación. MVVM desde el punto de vista de las pruebas también tiene un bajo rendimiento, ya que la prueba del código reactivo lleva mucho más tiempo. VIPER es excelente para escribir exámenes porque respeta el principio de responsabilidad exclusiva en la mayor medida posible y las clases dependen de abstracciones.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y el último parámetro que consideramos es el umbral de entrada. </font><font style="vertical-align: inherit;">Muestra la rapidez con la que los nuevos desarrolladores (en primer lugar, los jones) penetran en la arquitectura. </font><font style="vertical-align: inherit;">Aquí MVVM que usa bibliotecas reactivas de terceros (RxSwift, PromiseKit, etc.) ocupa un último lugar honorable por razones obvias. </font><font style="vertical-align: inherit;">VIPER también es una arquitectura bastante compleja debido a la gran cantidad de componentes. </font><font style="vertical-align: inherit;">MVP tiene el umbral de entrada más bajo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de sopesar los pros y los contras, llegamos a la conclusión de que necesitamos algo tan simple como MVP y tan flexible como VIPER. </font><font style="vertical-align: inherit;">Entonces, la idea nació para crear su propia arquitectura basada en ellos: HandsAppMVP.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Expandir MVP</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los componentes principales de nuestra arquitectura son Modelo, Vista, Presentador. </font><font style="vertical-align: inherit;">Realizan las mismas funciones que en el MVP clásico de acuerdo con el esquema bien conocido: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/af/pv/w0/afpvw04g8ed4z5ekrdfz6srthdi.png" alt="imagen"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Esquema del MVP clásico]</font></font></i><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Aquí y a continuación, cada componente de interacción (cuadrado azul) en los diagramas es una clase cuya vida coincide con la vida útil de la Vista. </font><font style="vertical-align: inherit;">Una flecha sólida indica la propiedad de otro objeto, un enlace fuerte, y una flecha punteada indica un enlace débil. </font><font style="vertical-align: inherit;">Con referencias débiles, evitamos dependencias circulares y pérdidas de memoria.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interfaces</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, agregamos las interfaces ViewInput y ViewOutput a este esquema clásico. </font><font style="vertical-align: inherit;">Tomamos en cuenta el quinto principio de SOLID: el principio de inversión de dependencia. </font><font style="vertical-align: inherit;">Es más probable que no sea una adición, sino un refinamiento para MVP. </font><font style="vertical-align: inherit;">La dependencia de las abstracciones ayuda a eliminar la estricta conexión de los componentes y le permite escribir pruebas normalmente. </font><font style="vertical-align: inherit;">El esquema que tiene en cuenta las interfaces tiene este aspecto: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nj/1k/kk/nj1kkk-j6gxd9ezng-ypprtow3a.png" alt="imagen"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Agregar interfaces ViewInput y ViewOutput] Un</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
pequeño rectángulo es una interfaz. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un desarrollador atento preguntará, ¿dónde están las interfaces para Model? </font><font style="vertical-align: inherit;">Ahora nos dirigimos a ellos.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabajar con datos</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El modelo de datos en arquitecturas móviles es un concepto colectivo. Un ejemplo estándar: una aplicación llama a la red para interactuar con el servidor, luego guarda datos en CoreData para el trabajo fuera de línea, escribe información simple en UserDefaults y almacena el JWT en Keychain. Todos estos datos con los que se interactúa forman el Modelo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La clase que es responsable de interactuar con el contenedor de datos de un tipo particular, llamamos al servicio de datos. Para cada contenedor (base de datos remota, base de datos local, UserDefaults, etc.), se agrega una clase de servicio a HandsAppMVP que interactúa con el presentador. Ahora también puede agregar interfaces de entrada / salida para cada servicio de datos: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ff/i3/xr/ffi3xrythzbe8w3pwlakmmkpkpk.png" alt="imagen"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Agregar servicios para trabajar con datos]</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No todas las clases de servicio deben conectarse al presentador mediante una interfaz, como, por ejemplo, cuando se utiliza Moya. </font><font style="vertical-align: inherit;">Moya es una biblioteca de red de código abierto. </font><font style="vertical-align: inherit;">Moya proporciona una clase de servicio preparada (MoyaProvider), y al escribir pruebas, no tenemos que crear un objeto simulado que reemplace a ApiProvider. </font><font style="vertical-align: inherit;">Moya proporciona un modo de prueba especial, cuando está activado, MoyaProvider no interrumpe la red, pero devuelve datos de prueba (se pueden encontrar más detalles aquí). </font><font style="vertical-align: inherit;">En este caso, el presentador no se refiere a la abstracción de MoyaProvider, sino a la implementación. </font><font style="vertical-align: inherit;">Y recibimos comentarios de este servicio mediante cierres. </font><font style="vertical-align: inherit;">Un ejemplo de implementación se puede encontrar en el proyecto de demostración. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este ejemplo es más una excepción que una regla, y muestra que la adhesión a SOLID no siempre es la mejor solución.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Navegación</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consideramos la navegación en la aplicación como una responsabilidad separada. </font><font style="vertical-align: inherit;">HandsAppMVP utiliza una clase especial para ello: enrutador. </font><font style="vertical-align: inherit;">El enrutador contiene un enlace débil a la Vista, con el que puede mostrar una nueva pantalla o cerrar la actual. </font><font style="vertical-align: inherit;">El enrutador también interactúa con el presentador utilizando la interfaz RouterInput: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l7/yp/_k/l7yp_kce5hkr1rel_cdcogrt5mw.png" alt="imagen"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Agregar un componente para la navegación (Enrutador)]</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensamblaje de componentes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La última adición al MVP clásico que usamos es Assembly, una clase de colección. </font><font style="vertical-align: inherit;">Se utiliza para inicializar la Vista y otros componentes de HandsAppMVP, así como para implementar dependencias. </font><font style="vertical-align: inherit;">El ensamblaje contiene el único método público: `assemble () -&gt; UIViewController`, cuyo resultado es el UIViewController deseado (o UIView) con el gráfico de dependencia necesario. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No mostraremos Ensamblaje en el diagrama de arquitectura, ya que no está conectado con componentes MVP y su ciclo de vida finaliza inmediatamente después de su creación.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codigo de GENERACION</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para ahorrar tiempo, automatizamos el proceso de creación de clases HandsAppMVP usando Generamba. </font><font style="vertical-align: inherit;">Las plantillas utilizadas para Generamba se pueden encontrar en nuestro repositorio. </font><font style="vertical-align: inherit;">Un ejemplo de configuración para Generamba está en el proyecto de demostración. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado de generar una pantalla específica, obtenemos un conjunto de clases que corresponde al esquema HandsAppMVP, un conjunto de pruebas unitarias para crear e implementar componentes, y también una clase de plantilla para pruebas de presentador.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que pasó</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si compara Head-to-Head HandsAppMVP y VIPER, notará que son muy similares y el primero solo se distingue por la ausencia del componente Interactor. Pero, al deshacernos de la capa entre los servicios y el presente (el interactor), además de simplificar la interacción con la red usando Moya, recibimos un notable aumento en la velocidad de desarrollo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le recomendamos que preste suficiente atención a la arquitectura en la etapa de diseño para evitar errores globales, disputas con los clientes y el tormento de los desarrolladores en el futuro, y en su lugar liderar el proceso de desarrollo de manera competente y previsible.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recuerde que cualquier arquitectura puede no ser adecuada específicamente para su proyecto, así que no se apresure a aferrarse ciegamente a plantillas ya preparadas e historias exitosas de su aplicación. </font><font style="vertical-align: inherit;">No tenga miedo de desarrollar y aplicar sus soluciones, pueden ser más valiosas y flexibles para usted que las ya preparadas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conclusión, recomendaremos algunos buenos artículos sobre la arquitectura de las aplicaciones de iOS que nos ayudaron a comprender las complejidades y tomar una decisión:</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Patrones arquitectónicos en iOS</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iOS Swift: Arquitectura MVP</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Análisis de la arquitectura VIPER en el ejemplo de una pequeña aplicación iOS en Swift 4</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implemente MVVM en iOS con RxSwift</font></font></a></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentación de código abierto de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SurfStudio </font><font style="vertical-align: inherit;">también </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">fue</font></a><font style="vertical-align: inherit;"> muy útil e inspirada </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, estamos poniendo un enlace en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proyecto DEMO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , escrito en HandsAppMVP, que hemos mencionado repetidamente en el artículo.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es503330/index.html">Cómo aprender de un científico de datos: las habilidades técnicas más buscadas</a></li>
<li><a href="../es503338/index.html">Mis trabajos para Outline 2020</a></li>
<li><a href="../es503342/index.html">El modelo más simple de macroeconomía y tendencias en el soporte de información de mercado.</a></li>
<li><a href="../es503346/index.html">Sitio web de la conferencia apoyado por el Ministerio de Serbia</a></li>
<li><a href="../es503358/index.html">3D ML. Parte 1: formularios de presentación de datos 3D</a></li>
<li><a href="../es503366/index.html">¿Por qué un guión se convierte en una pregunta? O problemas con la codificación de datos en SQL</a></li>
<li><a href="../es503368/index.html">Gigantomanía: ¿por qué los juegos modernos pesan tanto?</a></li>
<li><a href="../es503372/index.html">Ethereum 2.0 puede retrasarse nuevamente debido a errores, problemas y competidores</a></li>
<li><a href="../es503380/index.html">Empleos Asincrónicos en Django con Apio</a></li>
<li><a href="../es503382/index.html">Rastrille caminando en un campo limpio o cómo recopilar direcciones MAC de dispositivos Wi-Fi cercanos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>