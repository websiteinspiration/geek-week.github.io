<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛐 🅰️ 🧕🏼 Wie man ein Smart Home baut und nicht verrückt wird 🌵 🏡 🏭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Intelligente Möbel, die sich selbst um die Bestellung im Haus kümmern, sind ein Muss für fast jedes futuristische Bild. Ein selbstregulierendes Klima,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Wie man ein Smart Home baut und nicht verrückt wird</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/bary_io/blog/502056/"><img src="https://habrastorage.org/webt/io/mx/xk/iomxxk5qmmqlguhptngp9zjlptu.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intelligente Möbel, die sich selbst um die Bestellung im Haus kümmern, sind ein Muss für fast jedes futuristische Bild. Ein selbstregulierendes Klima, automatische Ein- und Ausschaltbeleuchtung und Sprachsteuerung von Haushaltsgeräten - all dies kann jetzt konfiguriert werden. Aber es braucht ein wenig Erfahrung, Grundkenntnisse auf dem Gebiet der Technologie und manchmal der Programmierung sowie ein ganzes Meer von Fantasien. In meinem Fall habe ich das so gemacht, dass nur Fantasie genug ist, aber das Wichtigste zuerst ...</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/bq/rp/k5/bqrpk5eo6zggo-delsghlgs7y1o.jpeg" width="300" height="200" align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vor ungefähr fünf Jahren interessierte ich mich für die Idee eines „Smart Home“. Zuerst habe ich das einfachste System gemacht. Sie steuerte das Licht im Korridor und im Badezimmer über den Bewegungssensor, die Motorhaube über den Feuchtigkeitssensor und auch die Wetterstation - zu dieser Zeit waren alle verrückt nach ihnen. Jede DIY-Box mit Selbstachtung musste eine Wetterstation bauen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zunächst habe ich die Wohnung mit einem kontrollierten Relais ausgestattet, um das Licht im Flur und im Badezimmer automatisch einzuschalten. Es sah so aus: Ein Sensor stand im Flur, der zweite im Badezimmer.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn jemand ins Badezimmer ging, erkannte der Korridorsensor seine Bewegung und schaltete sofort das Licht im Korridor und im Badezimmer ein. Wenn gleichzeitig niemand das Badezimmer betrat, wurde dies bereits durch den Sensor im Badezimmer behoben. Nach 15 Sekunden ging das Licht dort aus. Wenn eine Person das Badezimmer betrat, ging das Licht im Korridor nach einer Minute aus.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich dachte auch an solche Fälle, wenn jemand zu viel nachdachte, während er auf einem „weißen Freund“ im Badezimmer saß (ich hatte ein kombiniertes Badezimmer). Dafür wurde das Licht im Bad in zwei Gruppen eingeteilt. Einer schaltete sich 3 Minuten aus, nachdem der Sensor im Badezimmer keine Bewegungen mehr erkannte, der andere nach 5 Minuten. Es funktionierte also nicht, länger als fünf Minuten im Badezimmer im Licht bewegungslos zu bleiben. Sehr disziplinierend. Sie können jedoch jederzeit Ihre Hand bewegen und weiterhin über das Wesentliche nachdenken. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Feuchtigkeitssensor funktionierte auch im Badezimmer, der die Haube automatisch startete, wenn die Luftfeuchtigkeit 50% überschritt. Sobald der Raum auf 45% Luftfeuchtigkeit belüftet war, schaltete sich die Haube aus.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Management hat die Arduino-Plattform durchlaufen - oder vielmehr versucht.&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a8/lo/0v/a8lo0valnq03awxxkgr-j2bvnxa.jpeg" width="265" height="222"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Foto von der Website des </font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Herstellers</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fast sofort wurde klar, dass es bei dieser Plattform nicht nur darum ging, ein Smart Home zu schaffen. Der Hauptnachteil der Arbeit mit Arduino bestand darin, dass die Plattform ohne Netzwerk funktionierte und ohne dieses Netzwerk kein wirklich einheitliches Ökosystem erhalten werden konnte. Natürlich könnte ich das Arduino wiederholen und Netzwerkunterstützung hinzufügen, aber warum? Ich habe einen einfacheren Weg gewählt und diese Plattform auf eine andere geändert.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem ich genug mit Arduino gespielt hatte, verband ich das Haus wieder mit dem ESP-8266-Board. Tatsächlich ist dies das gleiche Arduino, aber mit Wi-Fi + ist es kompakter. Dieses Modul ist bei Herstellern von Gadgets für Smart Homes nach wie vor beliebt.&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ui/kh/ql/uikhqljobo7gz8pz2tpcfcqhbvm.jpeg" width="265" height="222"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Foto aus dem </font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parallel dazu habe ich versucht, das Smart Home noch intelligenter zu machen. Lösen Sie beispielsweise das Problem einer Fußbodenheizung rund um die Uhr oder einer Klimaanlage, die immer eingeschaltet ist. Dafür habe ich Beok Chinese WiFi Thermostate gekauft. Sie durften die Fußbodenheizung aus der Ferne ausschalten, mussten dies jedoch über eine spezielle Anwendung im Telefon tun.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe das Problem der Fernsteuerung der Klimaanlage mit dem Infrarotsignalemulator Broadlink RM Pro gelöst. Nichts Kompliziertes: Sie zeichnen ein Signal vom Bedienfeld der Klimaanlage zum Emulator auf (es kann eine beliebige Technik geben, die von der Fernbedienung gesteuert wird), und dann drücken Sie auf dem Telefon eine Taste in der Anwendung, und der Emulator spielt das zuvor aufgezeichnete Signal ab. Bei der Klimaanlage hatte ich die Möglichkeit, sie ein- und auszuschalten, den Betriebsmodus einzustellen und andere Parameter aus der Ferne einzustellen.&nbsp;&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auch Livolo-Schalter installiert. Mit ihrer Hilfe konnte ich auch das Licht über Funk ein- und ausschalten.&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/to/bz/s6/tobzs6u41nh4d_b_eq7tovpop8y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Von den Minuspunkten: Zur Steuerung musste ich erneut eine separate Anwendung installieren und es gab keine Rückmeldung, das heißt, ich konnte nicht sehen, dass das Licht an war, wenn es von jemandem manuell mit einem herkömmlichen Schalter ein- oder ausgeschaltet wurde.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verschiedene kontrollierte WiFi-Relais wie Sonoff oder Tuya und sogar das teure Danalock zum Verschließen der Wohnung, für das ebenfalls eine separate Anwendung erforderlich war, erschienen ebenfalls im Haus. Fast all diese kleinen Dinge (mit Ausnahme von Danalock) habe ich auf der chinesischen Website Aliexpress gekauft, wo sie einen Cent kosten und mir erlauben, ohne ernsthafte Investitionen zu experimentieren.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einer der ersten relativ ernsthaften Käufe war die Tion-Verschnaufpause. </font><font style="vertical-align: inherit;">Mit der automatischen CO2-Regelung kam er mehr oder weniger zurecht, aber die Temperatur der Luftheizung im Winter musste ständig manuell angepasst werden. </font><font style="vertical-align: inherit;">Und wieder - um es zu verwalten, musste eine separate Anwendung installiert werden.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8w/pn/pd/8wpnpdu6oip9ck-a_qn8z6bv8i4.jpeg" width="265" height="222"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Foto wurde von der Website des </font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Herstellers aufgenommen.</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Alle Sensoren und Steuerungen, die ich damals ausprobiert habe, kann ich mich nicht einmal erinnern. </font><font style="vertical-align: inherit;">Mein Smartphone war mit Anwendungen zur Verwaltung verstopft. </font><font style="vertical-align: inherit;">Es war ein ganzer Zoo, der ständig folgen musste. </font><font style="vertical-align: inherit;">Ich habe versucht, die Verwaltung dieser Anwendungen über alle Arten von Aggregatoren wie HomeBridge / MajorDomo usw. zu kombinieren. </font><font style="vertical-align: inherit;">Aber alle zeigten ihre erheblichen Mängel:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unfreundliche Schnittstelle und manchmal nur eine schreckliche Schnittstelle</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mangelnde Unterstützung für alle verwendeten Anwendungen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">komplexe Verbindung</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Suche nach einer Anwendung für die zentrale Verwaltung eines solchen Volumens von Sensoren, Steuerungen und anderen Steuerungssystemen hat nicht zum Erfolg geführt. Dann habe ich versucht, selbständig an eines der „intelligenten“ Geräte zu erinnern - die Tion-Verschnaufpause. Ich habe ein Skript geschrieben, um die Heiztemperatur abhängig von der Raumtemperatur automatisch zu steuern. Tatsache ist, dass das Lüftungssystem keine automatische Anpassung der Luftheiztemperatur hatte. Es stellte sich heraus, dass der Raum entweder super heiß oder super kalt war. Es gab keine Möglichkeit, einen Mittelweg zu erreichen. Hier wurde dieses Problem mit Hilfe eines schriftlichen Skripts und einer Verschnaufpause gelöst.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Erfolg mit einem Skript für die Verschnaufpause veranlasste mich, meine eigene Anwendung für die Verwaltung eines Smart Homes zu erstellen. Das Hauptziel war die Erstellung eines Programms mit bequemer Integration intelligenter Geräte, mehrstufigen Automatisierungsbedingungen und der Möglichkeit, alle Geräte im Haus zu verwalten.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ungefähr ein Jahr lang war ich selbst mit der Entwicklung von Back-End- und Front-End-Anwendungen beschäftigt.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Serverseite ist in NodeJS geschrieben. Die Entscheidung für NodeJS wurde aufgrund der entwickelten Community getroffen, in der Protokolle für fast alle Geräte auf dem Markt implementiert sind. Der Client-Teil ist in Angular (Ionic) geschrieben und läuft unter Android / iOS. Im Allgemeinen die klassische Client-Server-Architektur. </font></font><br>
<br>
<i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auf eine Anmerkung:</font></font></strong></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Während der Arbeit an der Anwendung erhielt ich einen technischen Einblick in die Verwendung von Verunreinigungen beim Schreiben von Gerätetreibern. </font><font style="vertical-align: inherit;">Ich weiß nicht, vielleicht ist es für einige elementar, aber es wurde mir wirklich leichter zu atmen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe Gerätetreiber viele Male umgeschrieben, bis ich zu so etwas kam:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispielcode eines der Geräte</font></font></b>
                        <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> {XiaomiSubdeviceV2} <span class="hljs-keyword">from</span> <span class="hljs-string">'../xiaomi.subdevice.v2'</span>;
<span class="hljs-keyword">import</span> {load_power} <span class="hljs-keyword">from</span> <span class="hljs-string">'../capabilities/load_power'</span>;
<span class="hljs-keyword">import</span> {power_plug} <span class="hljs-keyword">from</span> <span class="hljs-string">'../capabilities/power_plug'</span>;
<span class="hljs-keyword">import</span> {PowerPurpose} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../base/PowerPurpose'</span>;
<span class="hljs-keyword">import</span> {Relay} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../base/types/Relay'</span>;
<span class="hljs-keyword">import</span> {HomeKitAccessory} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../hap/HomeKitAccessory'</span>;
<span class="hljs-keyword">import</span> {Lightbulb2Accessory} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../hap/Lightbulb2Accessory'</span>;
<span class="hljs-keyword">import</span> {Yandex} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../yandex/Yandex'</span>;
<span class="hljs-keyword">import</span> {YandexLightOrSwitch} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../yandex/YandexLightOrSwitch'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LumiPlug</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">XiaomiSubdeviceV2</span>.<span class="hljs-title">with</span>(<span class="hljs-title">Relay</span>, <span class="hljs-title">power_plug</span>, <span class="hljs-title">load_power</span>, <span class="hljs-title">PowerPurpose</span>,
  <span class="hljs-title">HomeKitAccessory</span>, <span class="hljs-title">Lightbulb2Accessory</span>,
  <span class="hljs-title">Yandex</span>, <span class="hljs-title">YandexLightOrSwitch</span>) </span>{<font></font>
<font></font>
  onCreate() {<font></font>
    <span class="hljs-keyword">super</span>.onCreate();
    <span class="hljs-keyword">this</span>.model = <span class="hljs-string">'Mi Smart Plug'</span>;
    <span class="hljs-keyword">this</span>.class_name = <span class="hljs-string">'lumi.plug'</span>;
    <span class="hljs-keyword">this</span>.driver_name = <span class="hljs-string">'Mi Smart Plug'</span>;
    <span class="hljs-keyword">this</span>.driver_type = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">this</span>.parent_class_name = <span class="hljs-string">'lumi.gateway'</span>;<font></font>
  }<font></font>
<font></font>
  getIcon() {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-string">'socket'</span>;<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Fazit ist, dass trotz der Fülle unterschiedlicher Geräte alle ungefähr das Gleiche tun und ungefähr die gleichen Informationen liefern. </font><font style="vertical-align: inherit;">Daher wurden alle Fähigkeiten der Geräte in getrennten Verunreinigungen untergebracht, aus denen der endgültige Treiber letztendlich besteht. </font><font style="vertical-align: inherit;">Beispielsweise unterstützt die Anwendung viele Geräte mit der Ein / Aus-Funktion. </font><font style="vertical-align: inherit;">Es wird in einer separaten Verunreinigung hergestellt und für alle Geräte identisch verwendet. </font><font style="vertical-align: inherit;">Grundstufe, Watson!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was hat das gebracht: Jeder Treiber eines neuen Geräts ist ziemlich schnell und einfach zu schreiben, weil Alles ist standardisiert und es besteht kein Grund zur weiteren Speicherung der empfangenen Informationen. Für völlig neue Protokolle (die ich noch nicht hatte) werden auch Verunreinigungen geschrieben, die auf bestehenden basieren. Sie empfangen bereits Geräteinformationen und senden diese weiter unten in der Kette. Dieser Ansatz ermöglichte es uns, die Codemenge um das Zehnfache zu reduzieren (anfangs war jeder Treiber eine Kopie eines ähnlichen Treibers). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also ging ich nach und nach durch alle Kreise der Hölle, um den Rücken und die Front zu beenden. Als die Anwendung ein ziemlich erträgliches Aussehen erhielt, dachte ich: Warum nicht Ihre Entwicklung mit der Öffentlichkeit teilen? Für das Projekt wurden Partner und Assistenten gefunden, die an die Anwendung erinnern.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zunächst musste an das Design der Anwendung erinnert werden. Dazu musste ich mich an professionelle Designer wenden. Ich glaubte naiv, dass es 3-4 Monate dauern würde, aber am Ende zog sich der Prozess hin. Trotz der Tatsache, dass sich die Struktur der Anwendung gegenüber der ursprünglichen Quelle nicht wesentlich geändert hat, musste buchstäblich alles überarbeitet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parallel dazu kaufte ich - nicht allein, sondern mit einem Team von Projektpartnern - die beliebtesten Geräte für ein Smart Home und fügte eine Anwendung hinzu, wenn diese Geräte nicht unterstützt wurden. Bald wurde jedoch klar, dass nicht genug Geld für alle intelligenten Geräte vorhanden war. Daher beschlossen wir, mit bestehenden Marktteilnehmern zu sprechen und kostenlose Testmuster für Geräte zu vereinbaren. Wir wurden nicht bestritten und Wirenboard und MiMiSmart wurden die ersten ernsthaften Lieferanten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deshalb habe ich zusammen mit den Jungs eine neue Anwendung für die Smart-Home-Automatisierung mit einer klassischen Client-Server-Architektur erstellt, die auf jeder Plattform installiert werden kann, und mit einem praktischen modernen Design. </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Treffen Sie die BARY *. </font></font></a></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* Der Name stammt nicht vom Namen Bari Alibasov, sondern vom Charakter von Arthur C. Doyles Buch "The Hound of the Baskervilles" von Barrymores Butler - Ihrem persönlichen "intelligenten Butler".&nbsp;</font></font></i><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist passiert: Beschreibung der Anwendung mit schönen Bildern und Katzen</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Hauptbildschirm ist ein praktisches Dashboard mit der Möglichkeit, Parameter automatisierter Räume anzuzeigen und zu verwalten. Praktisch - dies ist das Schlüsselwort, da Dashboards in den Anwendungen, mit denen ich selbst arbeiten wollte, manuell konfiguriert werden mussten. Nicht der angenehmste Zeitvertreib. Das </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gz/dl/9k/gzdl9kdk2n5x2fjmlmfwtcnxjas.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Haus kann in Zonen und Zonen unterteilt werden - in Räume. Jeder Raum verfügt über verschiedene Parameter: Temperatur, Luftfeuchtigkeit, aktueller Stromverbrauch usw. sowie ausgewählte Aktionen. Wenn wir auf den Raum klicken, fallen wir in die Liste der angeschlossenen Geräte: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yg/f-/22/ygf-224hyp7be9qrzf2ifh3plv8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier können Sie das Gerät ein- und ausschalten und auch dessen Hauptparameter sehen. Beim Wechsel zu einem Gerät steht eine detailliertere Steuerung mit einer vollständigen Liste der Funktionen zur Verfügung.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle Geräte werden mit denselben Einstellungen verbunden. Für viele Geräte gibt es einen Verbindungsassistenten. Keine Konfiguration für diejenigen, die heißer mögen! Grundsätzlich kommt es darauf an, die IP-Adresse des Geräts anzugeben (für viele Geräte gibt es eine automatische Suche). Wenn sich die IP-Adresse plötzlich ändert, ist dies in Ordnung. Der Server findet sie automatisch an der neuen Adresse.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q1/2b/ee/q12beeqowea3lu7egovw_8y0yry.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt eine Integration mit Apple HomeKit, es wird für die Sprachsteuerung über Siri verwendet. Alle in BARY unterstützten Geräte lassen sich mit einem einzigen Häkchen in Apple HomeKit integrieren (Hallo an HomeBridge-Fans). Nicht ohne die Unterstützung von Yandex Alice. Sie war freundlicher in Bezug auf Schnittstellenbefehle. Zum Beispiel möchte Siri die Vorhänge nicht mit dem Befehl „Vorhänge schließen“ schließen, kann im Fernsehen keinen bestimmten Lautstärkepegel einstellen und so weiter. Yandex.Alice hat keine solchen Verrückten.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Verwaltung von Smart Lands zu vereinfachen, wurde die Automatisierung implementiert: die Regeln für die Ausführung von Aktionen, wenn eine Reihe von Bedingungen erfüllt sind. Automatisierungen sind logisch, mehrstufig, d.h. Sie können etwas tun wie: "Bedingung 1 und (Bedingung 2 oder Bedingung 3)." Alles in einem schönen logischen Automatisierungseditor:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/c-/hg/bf/c-hgbflmqnmyu7ld7owltj5g5ao.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Persönlich hatte ich bereits hundert Automatisierungsprogramme, und jedes davon kann schnell gefunden werden, weil Alles ist nach Raum und Gerät gruppiert: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xl/xz/n9/xlxzn9o8tycbcxwnvtlw9w014ym.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Skripte werden auch in der Anwendung unterstützt. Ein Szenario ist ein Komplex von Aktionen, die unter bestimmten Bedingungen aus der Automatisierung ausgeführt werden. Für mein Smart Home verwende ich nur das Standard-Set: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fy/62/_d/fy62_dwup-9j5zyhvj-b3jd0i-4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe </font><font style="vertical-align: inherit;">mein Zuhause </font><font style="vertical-align: inherit;">verlassen / über Apple TV nach Hause zurückgekehrt - es wird automatisch ein- und ausgeschaltet, wenn alle das Haus verlassen haben oder jemand nach Hause zurückgekehrt ist. Du kommst nach Hause und der Ansager mit traurigen Augen von Kanal 1 trifft dich dort bereits. Gut, ok? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was für ein Smart Home ohne die Möglichkeit, eine Katze zu beobachten? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cl/4l/sj/cl4lsjn0wyslby9mavknwlmplts.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können jede Kamera anschließen, die einen RTSP-Stream liefern kann.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Separat möchte ich zum Statistikblock sagen. Es stellte sich als recht informativ heraus: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8k/vh/g4/8kvhg4ixvnkduzunurcf-lputrg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Legende ist der rote Balken die Abweichung von den Durchschnittswerten der letzten sechs Monate, der graue Balken die Durchflussrate innerhalb der Durchschnittswerte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf dem Bild meine Statistik für September. Es war kalt, die Heizung war noch nicht gegeben worden, so dass die Heizung an der Lüftung ständig eingeschaltet war. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können auch Statistiken für jedes angeschlossene Gerät anzeigen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/at/iw/ju/atiwjujpwobznspvzjvidoc8g9m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durch die Verfügbarkeit von Automatisierung und Statistiken konnten die Stromkosten um mehr als das Zweifache gesenkt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle auftretenden Ereignisse werden gespeichert und können angezeigt werden: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qh/ss/kw/qhsskw7yzjbhg8vhfpj1bsohmdo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf der Hauptseite befindet sich außerdem eine spezielle Registerkarte, auf der alle vom Benutzer ausgewählten Hauptindikatoren erfasst werden:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lw/78/kc/lw78kcs-ca7xyq_uljlybmp5uqc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Wassermessung erfolgt übrigens über den Xiaomi-Sensor zum Öffnen von Türen und Fenstern. </font><font style="vertical-align: inherit;">Zu diesem Zweck wird anstelle eines Reed-Schalters der Ausgang des Impulszählers an einen speziellen Kontakt gelötet und in BARY ein virtueller Zähler erstellt, in dem Sie diesen Sensor als Impulsquelle angeben können.</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architektur und Sicherheit</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Client-Server-Austausch wird mithilfe der AES-Technologie verschlüsselt, und der Server befindet sich direkt im automatisierten Raum. </font><font style="vertical-align: inherit;">Meiner Meinung nach schützt dies das System so weit wie möglich vor unerwünschten Eingriffen Dritter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn keine weiße IP-Adresse vorhanden ist, können Sie eine Verbindung zur Cloud herstellen. </font><font style="vertical-align: inherit;">Es wird als Vermittler fungieren, ohne die Fähigkeit, Befehle zu entschlüsseln, weil </font><font style="vertical-align: inherit;">Schlüssel sind auf dem Server.&nbsp;</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wo bekommt man</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Serverseite kann auf fast jeder vorhandenen Plattform ausgeführt werden - dank NodeJS. </font><font style="vertical-align: inherit;">Für die gängigsten Plattformen haben wir Skripte vorbereitet, die die gesamte Arbeit automatisch erledigen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für Raspberry Pi basierend auf Debian Stretch: </font></font><br>
<br>
<code>wget -qO- "http://bary.io/install?target=pi" | sudo bash</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Zielparameter ist für die Zielplattform verantwortlich und kann die folgenden Werte haben:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi (Debian Stretch)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pi</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Himbeer-Pi (Debian Buster)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pi_buster</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bastelbrett (Debian Stretch)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tb</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wiren Board (Debian Stretch)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wb</font></font><br>
</td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn jemand auf einer anderen Plattform installieren möchte, schreiben Sie uns und wir werden das Skript aktualisieren. </font><font style="vertical-align: inherit;">Wenn Sie auf Schwierigkeiten stoßen - schreiben Sie auch. </font><font style="vertical-align: inherit;">Wir brauchen wirklich Feedback.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Anwendung ist bei </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Play</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App Store</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> frei verfügbar </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Möglicherweise wird der Antrag bis Ende des Jahres bezahlt.</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Warum habe ich diesen Artikel geschrieben? </font><font style="vertical-align: inherit;">Das Hauptziel ist es, Feedback von Ihnen zu erhalten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Derzeit entwickelt sich das Projekt rasant und unser gesamtes Team versucht, die Liste der auf dem Markt verfügbaren unterstützten Geräte zu maximieren. </font><font style="vertical-align: inherit;">Obwohl ich nicht alleine an dem Projekt arbeite, blieben die Aufgaben dieselben - die bequemste Anwendung zu erstellen, die die Wünsche berücksichtigt und die Probleme aller löst, die an der unabhängigen Installation intelligenter Lösungen für zu Hause beteiligt waren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sind offen für den Dialog über mögliche Integrationen und bereit, die Geräteunterstützung von Unternehmen, die an einer Partnerschaft interessiert sind, so bald wie möglich umzusetzen. </font><font style="vertical-align: inherit;">Sie erhalten eine vorgefertigte Anwendung und verschwenden keine Zeit mit der Entwicklung von Software. </font><font style="vertical-align: inherit;">Und wir erhalten eine breite Palette unterstützter Geräte für jeden Geschmack und jede Farbe. </font><font style="vertical-align: inherit;">Alles ist gut.&nbsp;</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sofortpläne und Regenbogenwunschliste</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Derzeit sind mein Team und ich aktiv an der Entwicklung eines Videospeichers beteiligt. Das Video kann in Ihrem Heimspeicher oder in einem Cloud-Dienst abgelegt werden. Ich denke, Anfang nächsten Jahres wird es möglich sein, über eine neue Version zu sprechen. Sollte es möglich sein, die besten Perlen einer Katze zu überprüfen, die sich selbst unterhält, während die Besitzer nicht zu Hause sind?&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nächstes Jahr planen wir weitere Integrationen mit verschiedenen Diensten: eine Liste der Einkäufe und Aufgaben, einen Kalender usw. Er kam hoch, schaute auf einen Bildschirm - und alles war in voller Sicht. Mehrere schlüsselfertige Projekte haben gezeigt, dass diese Aufgabe relevant ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir planen auch, die Produktion von Controllern mit vorinstallierter Software für Batch-Lösungen eines Smart Home zu starten (derzeit ist die Batch-Lösung "Software + Hardware" zusammen mit unseren Partnern erhältlich</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wiren Board</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und Unterstützung für Google Home und Amazon Alexa. </font><font style="vertical-align: inherit;">Natürlich die Erweiterung des Angebots an unterstützten Geräten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Übrigens, wen interessiert das schon, Sie können die Liste der unterstützten Geräte (nicht vollständig) auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unserer Website sehen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wenn etwas in der Liste nicht gefunden wird, fragen Sie in der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegrammgruppe nach</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sind Ihnen sehr dankbar, wenn Sie uns mitteilen, was Ihnen in vorhandenen Anwendungen fehlt und welche Funktionen Sie an unserer Stelle hinzufügen würden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielen Dank fürs Lesen. </font><font style="vertical-align: inherit;">Lassen Sie uns gemeinsam unser Zuhause intelligenter machen!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de502046/index.html">Fünf Jahre Rost</a></li>
<li><a href="../de502048/index.html">Komplexes Verhalten ohne neuronale Netze und Training. Die philosophische Basis</a></li>
<li><a href="../de502050/index.html">Ein paar Anmerkungen zur Kultur</a></li>
<li><a href="../de502052/index.html">Best Practices von Kubernetes. Erstellen Sie kleine Container</a></li>
<li><a href="../de502054/index.html">Faltungsneurales Netzwerk und seine Integration in iOS (Teil 2)</a></li>
<li><a href="../de502062/index.html">Wer hat Java erstellt? Die Hauptsache bei James Gosling</a></li>
<li><a href="../de502066/index.html">Einfache Konsolenbefehle, die jeder kennen sollte</a></li>
<li><a href="../de502068/index.html">110 Volt an Ihrem Computer</a></li>
<li><a href="../de502070/index.html">Die Geschichte von Pentax (Artikel plus Video)</a></li>
<li><a href="../de502072/index.html">Andocken der ISS mit JavaScript und Kompass</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>