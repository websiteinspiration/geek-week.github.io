<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧤 🍀 🍺 Kaboom: un sapeur insolite 🚌 👨🏾‍🎓 🕴🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Enfant, je me suis assis au travail de mon père trois fois par semaine pendant une heure et demie. On m'a permis d'aller à un ordinateur, où du divert...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kaboom: un sapeur insolite</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/cloud4y/blog/487052/"><img src="https://habrastorage.org/webt/8r/zx/fj/8rzxfjri6jhsbbuodzrjy8eauae.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enfant, je me suis assis au travail de mon père trois fois par semaine pendant une heure et demie. On m'a permis d'aller à un ordinateur, où du divertissement il n'y avait qu'un sapeur et Paint. J'étais fatigué de dessiner rapidement, mais le désir d'ouvrir tout le terrain et de ne pas exploser m'a motivé à chercher de nouvelles et nouvelles façons de jouer à ce jeu. Plusieurs années plus tard, je suis tombé accidentellement sur un article intéressant sur un clone d'un sapeur et je n'ai pas pu passer. Je vous suggère de vous familiariser avec cela. Il s'agit d'une histoire sur le développement de Kaboom, un clone du légendaire jeu de démineur avec son propre zeste.</font></font></i><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le démineur est apparu il y a assez longtemps selon les normes d'un jeu sur ordinateur. </font><font style="vertical-align: inherit;">Mais il me semble que la plupart des gens se souviennent des jeux qui faisaient partie des versions antérieures de Windows. </font><font style="vertical-align: inherit;">Je n'ai jamais été bon au démineur, mais je l'ai joué de temps en temps. </font><font style="vertical-align: inherit;">Certaines personnes jouent </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plus sérieusement</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Et pour ceux qui veulent se réconforter, je recommande de regarder </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Démineur - Le film</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Idée</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Récemment, j'ai eu une idée: que faire si vous devez jouer au démineur contre un ordinateur plus sage? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En règle générale, l'emplacement des mines est déterminé au début du jeu (mais il y a quelques astuces ici - par exemple, vous ne pouvez donc pas perdre le premier clic). Mais que faire si l'emplacement des mines n'avait pas été déterminé à l'avance et que le jeu aurait pu choisir l'emplacement des mines après le début du jeu? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce serait assez cruel: si vous cliquez sur un carré qui peut contenir une mine, il la contiendra toujours! Ainsi, vous devez prouver à l'avance que le carré est sûr.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/um/0i/hg/um0ihg9b97wzjslibzfalc5ovmy.png"><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans l'image ci-dessus, dans les cellules marquées d'un point, il n'y a aucune mine garantie, et les cellules marquées d'un point d'exclamation sont garanties d'en contenir une. Les points d'interrogation signifient une incertitude: peut-être que si vous ouvrez plus de cellules, vous pouvez calculer si une mine y est cachée ou non.</font></font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Par contre, il y a des situations où vous devez deviner:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ji/_r/c0/ji_rc06pslel8r2olgyyjfeqx5g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
il y a une mine dans l'une des cellules inférieures. Mais dans lequel, il est impossible de comprendre. Vous devez en choisir un. Mais selon la condition dont je viens de parler, cela signifierait une mort certaine! Je voulais que le jeu soit brutal, mais maintenant il est évidemment en train de perdre.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par conséquent, je changerai légèrement l'idée. Vous pouvez deviner, mais seulement s'il n'y a plus de cellules sûres. Ainsi, le jeu sera cruel, mais juste.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En d'autres termes:</font></font><br>
<br>
<ul>
<li>      ,   .</li>
<li>      ,    ,   .</li>
<li>      , :<br>
<br>
<ol>
<li>     ,       ,      .</li>
<li>   ,   ,      .</li>
</ol></li>
</ul><br>
<h2>  </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment implémenter un tel jeu? Je pourrais essayer de calculer tous les champs possibles, mais ce n'est pas réaliste: même un petit champ de 10x10 signifie 2 ^ 100 possibilités. Ne sélectionner que ceux qui contiennent exactement N min n'aide pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heureusement, je n'ai pas besoin de m'inquiéter pour tout le domaine. Nous ne savons rien des mines terrestres non adjacentes aux étiquettes. Je ne m'intéresse qu'à ceux qui sont à la frontière, le reste peut être déterminé tout à fait par accident. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zl/vp/qc/zlvpqcqpuapldwssoa5lhjtaff4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, je peux calculer toutes les options pour l'emplacement des mines à la frontière conformément aux étiquettes. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Backtracking</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (backtracking) - une bonne technique qui vous permet de trier toutes les combinaisons, mais aussi de reculer rapidement dès que l'on détermine qu'une branche ne peut pas calculer.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6z/0h/cf/6z0hcf6bfakj_2x3n0jyfz9bpf8.png"><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les deux emplacements possibles des mines à la frontière sont indiqués ci-dessus. </font><font style="vertical-align: inherit;">En les combinant, nous comprendrons quelles cellules sont garanties d'être vides ou extraites. </font></font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai également besoin de suivre le nombre total de mines. </font><font style="vertical-align: inherit;">Ainsi, l'emplacement ressemble vraiment à «5 min à la frontière, 5 min à l'extérieur». </font><font style="vertical-align: inherit;">C'est important car sinon j'aurais pu créer trop de mines à la frontière (ou trop peu!)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, j'ai toutes les options. </font><font style="vertical-align: inherit;">Que se passe-t-il lorsqu'un joueur décide d'ouvrir une cage?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Choisissez une option aléatoire (qui satisfait aux règles «cruelles mais justes»). </font><font style="vertical-align: inherit;">Cela permettra de déterminer l'emplacement des mines à la frontière.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dispersez au hasard ceux qui restent à l'extérieur de la frontière.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S'il y a une mine dans la cellule sélectionnée, la partie est terminée.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autrement:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Définir une nouvelle étiquette pour la cellule identifiée</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Révéler des cellules supplémentaires s'il est égal à 0</font></font></li>
<li>    ,    !       .</li>
</ol></li>
</ul><br>
<h2>  </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour les petits champs, c'est normal. </font><font style="vertical-align: inherit;">Habituellement, il n'y a que quelques combinaisons possibles ... attendez, c'est quoi? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/df/9n/k_/df9nk_sulyltttsf-u4pafb8fxe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oh non! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g1/5w/nu/g15wnu_xlthcmvg94n7kjeqsg_k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'une manière ou d'une autre, j'ai réussi à débloquer 18 millions d'emplacements de mines possibles. </font><font style="vertical-align: inherit;">Mon Firefox dévore 12 gigaoctets de mémoire et il faut une demi-minute pour ouvrir la cellule. </font><font style="vertical-align: inherit;">Évidemment, j'ai besoin d'un meilleur algorithme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quelqu'un peut remarquer que Démineur est un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jeu complet NP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et donc un temps qui augmente de façon exponentielle ne peut pas être évité. </font><font style="vertical-align: inherit;">Et dans le cas général, cela est vrai - il y aura des positions qui prendront beaucoup de temps à calculer. </font><font style="vertical-align: inherit;">Mais pour une petite zone, cela fonctionne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je n'ai pas besoin de me souvenir de toutes les combinaisons. </font><font style="vertical-align: inherit;">Je n'ai même pas besoin de calculer toutes les combinaisons. </font><font style="vertical-align: inherit;">Tout ce qui est nécessaire est un moyen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vérifier si la cellule est sûre, dangereuse ou vague,</font></font></li>
<li>    (,   ,       ).</li>
</ul><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au lieu d'essayer les options moi-même, je vais utiliser le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solveur SAT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ce sont des outils qui prennent une formule composée de variables logiques et recherchent un ensemble de valeurs qui rendraient la formule vraie. Une telle méthode imaginaire, mais tout à fait valable pour notre tâche. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une classe de logiciels plus puissante est constituée par les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solveurs SMT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui fonctionnent avec une plus large gamme de valeurs et de formules, telles que la logique du premier ordre (quantificateurs), les tableaux, les entiers, etc. Cela aidera au moins à définir certaines équations pour les entiers. Mais j'ai besoin de quelque chose qui fonctionne dans le navigateur. Les gens ont réussi à porter certains outils sophistiqués comme </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z3Prover</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur le navigateur, mais la version WebAssembly pèse</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17 Mo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et c'est trop. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai trouvé </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MiniSat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un petit solveur SAT qui a été compilé pour Javascript par Joel Galenson. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le fichier compilé ne</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> prend que 200 kilo-octets, donc je l'utilise.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formules CNF</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les solveurs SAT fonctionnent avec des formules normales conjonctives ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CNF</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). La formule de CNF est «un ET de OU», par exemple: </font></font><br>
<br>
<code>(a | ~ b | ~ c) &amp; (c | d ~ e) &amp; f</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vous pouvez convertir n'importe quelle formule de logique de phrase (variables, et, ou non, implication) en CNF, c'est donc une sorte de format universel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment l'utilisons-nous? Supposons que nous ayons un tableau: </font><font style="vertical-align: inherit;">
si je crée des variables pour des cellules inconnues (dans le sens horaire: x1, x2, x3), elles devront satisfaire les équations suivantes: </font><font style="vertical-align: inherit;">
Mais comment exprimer «la somme des variables est 2» en CNF? </font><font style="vertical-align: inherit;">
J'ai trouvé une méthode qui, comme je l'ai appris plus tard, est appelée «codage binomial» et est le codage le plus simple. Vous devez considérer tous les sous-ensembles possibles de variables. Par exemple, pour vous avez </font><font style="vertical-align: inherit;">besoin des formules suivantes:</font></font><br>
<br>
<code>? ? 1<br>
2 ? 1</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>1 + 2 + 3 = 2<br>
2 + 3 = 1<br>
2 + 3 = 1 (   )</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>x1 + x2 + x3 = 2 </code><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour chaque sous-ensemble de 2 variables, au moins une est vraie. </font><font style="vertical-align: inherit;">Cela garantit que le montant est supérieur à 1.</font></font><br>
<code>(x1 | x2) &amp; (x1 | x3) &amp; (x2 | x3)</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au moins une variable est fausse. </font><font style="vertical-align: inherit;">Cela garantit que le montant est inférieur à 3.</font></font><br>
<code>(~ x1 | ~ x2 | ~ x3)</code></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour </font></font><code>x2 + x3 = 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moi, j'ai besoin d'un ensemble similaire de formules:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au moins une des variables est correcte: </font></font><code>(x2 | x3)</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au moins une des variables est fausse </font></font><code>(~ x2 | ~ x3)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En combinant cela, j'obtiens une formule CNF avec 6 points. Au format DIMACS standard: </font><font style="vertical-align: inherit;">
toutes les lignes de position se terminent par 0 et la négation est marquée d'un moins. Si je le connecte à MiniSat (essayez par vous-même), j'obtiens: </font><font style="vertical-align: inherit;">
Cela signifie que MiniSat a trouvé une solution où x1 et x2 sont vraies et x3 sont fausses. Voici à quoi ressemblera le tableau: </font><font style="vertical-align: inherit;">
L'ensemble du programme est un peu plus compliqué: ce n'est qu'une solution, il y en a une autre. Par conséquent, pour savoir si x1, x2, x3 peuvent être vrais (ou faux), vous devez effectuer plus de demandes. Je dois demander: «Étant donné la formule ci-dessus, ainsi que x1, est-ce possible? Que diriez-vous de la formule ci-dessus, ainsi que ~ x1 "?</font></font><br>
<br>
<code>p cnf 3 6<br>
1 2 0<br>
1 3 0<br>
2 3 0<br>
-1 -2 -3 0<br>
2 3 0<br>
-2 -3 0 </code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>SAT 1 2 -3</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>! ! 1<br>
2 . 1</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'encodage signifie que je dois trouver toutes les combinaisons possibles (par exemple, tous les sous-ensembles de 3) d'un ensemble de variables. </font><font style="vertical-align: inherit;">Cependant, pour cette équation, il n'y aura que 8 variables, donc la formule est généralement assez petite pour que MiniSat puisse la résoudre rapidement.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivi min</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, ce n'est pas une solution complète! J'ai encore besoin de savoir combien il reste de mines. Certaines combinaisons sont impossibles, car sinon vous pouvez créer plus de mines que ce qui est autorisé, et il sera impossible de gagner. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vj/ic/pz/vjicpzij8cclzqcvewcn3hpzgpq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, le cas contraire est également possible: s'il y a trop peu de mines, le jeu se terminera, car il n'y aura rien à placer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par conséquent, je dois indiquer dans la formule SAT que «le nombre de mines n'est pas inférieur à X et pas supérieur à Y». Au début, je pensais pouvoir utiliser l'astuce avec toutes les combinaisons. Malheureusement, cela ne fonctionne pas trop bien avec de grands nombres. S'il y a, disons, 20 cellules et 10 min, alors après avoir connecté les nombres au </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coefficient binomial,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous découvrons que le nombre de combinaisons est déjà à 6 chiffres!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai donc découvert qu'il existe de nombreuses autres façons de coder la somme des variables dans la formule SAT. Vous devez créer un schéma qui combinera les variables individuelles. Voir, par exemple, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette réponse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur StackExchange ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">celle-ci</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalement, j'ai réalisé l'idée d'un article intitulé «Codage CNF efficace avec des contraintes de cardinalité booléennes», </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">écrit par</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Olivier Baillot et Yasin Bufhad. Nous voyons un arbre qui ajoute récursivement des nombres unaires (ou trie les bits pour que tout le monde soit au début):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/_s/n8/cg_sn8kuz4tyzsklfiftc9pxr6i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À la fin de ce diagramme, vous obtiendrez un ensemble trié de variables de «sortie». Pour confirmer que la somme n'est pas inférieure à X, vérifiez que les premiers X des variables résultantes sont 1. Pour affirmer que la somme n'est pas supérieure à Y, vérifiez que les derniers N - Y des variables résultantes sont 0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est bien mieux que d'utiliser toutes les combinaisons possibles, cependant, ce schéma est toujours irrationnel car il génère des phrases Ө (N ^ 2). Lorsque le nombre de cellules ouvertes est d'environ 100, le jeu devient lent. Nous pouvons optimiser davantage le jeu. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Réduisez les demandes</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En étudiant le problème, j'ai remarqué que je pouvais réduire le nombre de requêtes au solveur. </font><font style="vertical-align: inherit;">Je voulais déterminer l'état de toutes les cellules (c'est-à-dire vérifier si elles sont garanties dangereuses, sûres ou non). </font><font style="vertical-align: inherit;">Je l'ai fait en utilisant une simple boucle. </font><font style="vertical-align: inherit;">Disons que la planche est décrite par la formule F:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Décidez </font></font><code>F &amp; ~ x1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de vérifier si x1 peut être 0</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Décidez </font></font><code>F &amp; x1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de vérifier si x1 peut être 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Décidez </font></font><code> F &amp; ~ x2 </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de vérifier si x2 peut être égal à 0</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Décidez </font></font><code>F &amp; x2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de vérifier si x2 peut être 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etc.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'est-ce que j'ai remarqué? </font><font style="vertical-align: inherit;">Si j'obtiens une solution pour F &amp; ~ x1, elle contiendra également les valeurs de toutes les autres variables. </font><font style="vertical-align: inherit;">Cela répond déjà à de nombreuses autres questions: si la solution contient x2 = 0, je n'ai pas besoin de demander si x2 peut être 0, car je le sais déjà. </font><font style="vertical-align: inherit;">Cela me permet de réduire le nombre de demandes d'environ 2 à 5 fois.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise en cache</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela ne résout pas le problème de l'énorme formule générée par le circuit de "comptage". Comme je l'ai dit, le nombre de phrases est de l'ordre de N ^ 2. Sur un grand tableau, la formule peut aller jusqu'à 10 000 hypothèses. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heureusement, la plupart du temps, nous connaissons la signification exacte de nombreuses cellules. Si la cellule est garantie vide ou remplie garantie, la valeur ne changera jamais! Cela signifie que nous pouvons le mettre en cache et ne pas l'inclure dans la formule SAT. Une fois que nous aurons déterminé l'état de la cellule, nous n'aurons plus besoin de l'inclure à nouveau dans le calcul. Les cellules seront utilisées tant qu'elles ne sont pas définies. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette optimisation est légèrement dangereuse: nous n'avons plus de formule confirmant l'exactitude de l'ensemble de la planche. Si tout le reste fonctionne comme prévu, ce n'est pas un problème, mais cela peut compliquer le suivi des erreurs.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un autre cas: jouer à l'étranger </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Êtes-vous autorisé à cliquer n'importe où sur la carte en dehors de la frontière entre la zone ouverte et non ouverte du champ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au départ, je pensais que c'était la même chose que de deviner: s'il n'y a pas de cellules sûres, vous pouvez simplement cliquer n'importe où sur le champ. </font><font style="vertical-align: inherit;">Mais certains trouvent étrange que cela garantisse l'ouverture d'une cage vide. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai donc changé le jeu pour qu'un clic hors de la frontière soit toujours puni. </font><font style="vertical-align: inherit;">À l'exception du début du jeu, bien sûr, car alors tout le plateau est «à l'extérieur». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais il s'avère qu'il existe un autre scénario: que faire si tous les champs frontaliers sont mortels? </font><font style="vertical-align: inherit;">
Vous n'avez pas d'autre choix que de révéler autre chose. </font><font style="vertical-align: inherit;">Cette situation peut rendre le jeu infranchissable dès le départ. </font><font style="vertical-align: inherit;">Alors maintenant, il y a encore une exception. </font><font style="vertical-align: inherit;">Vous êtes autorisé à jouer en dehors des frontières si:</font></font><br>
<br>
<code>3 . .<br>
. . .<br>
. . .<br>
</code><br><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le champ n'est pas ouvert</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les cellules minées peuvent être situées à la frontière (cliquer sur l'extérieur devrait être sûr), ou</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il doit y avoir des bombes dans toutes les cellules de la frontière (il faut cliquer à l'extérieur).</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise à jour</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Le changement s'est avéré controversé, car la restriction est quelque peu artificielle. </font><font style="vertical-align: inherit;">J'ai ajouté un interrupteur qui permettra / interdira de jouer avec ces conditions.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est tout</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez jouer à Kaboom </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Essayez d'activer le mode de débogage: cela rend le jeu trivial, mais il montre bien comment cela fonctionne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Code source </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il n'est pas très beau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pourriez également être intéressé par un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jeu similaire</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Simon Tatham, créateur de PuTTY. Sa version a une tournure différente: il est toujours résoluble sans spéculation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jouez sagement! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quoi d'autre peut être utile à lire sur le blog </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud4Y</font></font></a></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment la banque s'est «cassée»</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Confidentialité personnelle? Non, ils n'ont pas entendu</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ La </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grande théorie des flocons de neige</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diagnostic des connexions réseau sur un routeur EDGE virtuel</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les virus résistants aux CRISPR construisent des abris pour protéger les génomes des enzymes pénétrant l'ADN.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Abonnez-vous à notre </font><font style="vertical-align: inherit;">chaîne </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour ne manquer aucun autre article! </font><font style="vertical-align: inherit;">Nous écrivons pas plus de deux fois par semaine et uniquement pour affaires. </font><font style="vertical-align: inherit;">Nous vous rappelons que les startups peuvent obtenir 1 million de roubles. </font><font style="vertical-align: inherit;">de Cloud4Y. </font><font style="vertical-align: inherit;">Conditions générales pour ceux qui le souhaitent - sur notre site Web: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bit.ly/2sj6dPK</font></font></a></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr487038/index.html">Soudain, un système de collecte des ordures à lui seul ne suffit pas</a></li>
<li><a href="../fr487040/index.html">Firefox Preview Nightly pour Android prend en charge uBlock Origin</a></li>
<li><a href="../fr487042/index.html">Le Ryzen Threadripper 3990X à 64 cœurs a battu tous les processeurs Intel lors des tests, dont 20 000 $ Xeon</a></li>
<li><a href="../fr487044/index.html">Intimité? Non pas entendu</a></li>
<li><a href="../fr487046/index.html">Comment créer une bibliothèque native pour Android</a></li>
<li><a href="../fr487054/index.html">ROS: Dédié à ceux qui sont coincés dans Gazebo ... Plate-forme pour un robot pour 28 000 roubles</a></li>
<li><a href="../fr487056/index.html">Est-il dangereux de garder RDP ouvert sur Internet?</a></li>
<li><a href="../fr487058/index.html">"Hadoop. ZooKeeper »de la série Technostream de Mail.Ru Group« Traitement distribué de grandes données dans Hadoop »</a></li>
<li><a href="../fr487060/index.html">Vous utilisez Google Chrome? Ainsi, Google collecte vos données via X-client-data</a></li>
<li><a href="../fr487062/index.html">CBS a permis aux utilisateurs de Linux de regarder la série Star Trek, grâce à elle pour cela</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>