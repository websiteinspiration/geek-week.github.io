<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üß§ üçÄ üç∫ Kaboom: un sapeur insolite üöå üë®üèæ‚Äçüéì üï¥üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Enfant, je me suis assis au travail de mon p√®re trois fois par semaine pendant une heure et demie. On m'a permis d'aller √† un ordinateur, o√π du divert...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kaboom: un sapeur insolite</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/cloud4y/blog/487052/"><img src="https://habrastorage.org/webt/8r/zx/fj/8rzxfjri6jhsbbuodzrjy8eauae.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enfant, je me suis assis au travail de mon p√®re trois fois par semaine pendant une heure et demie. On m'a permis d'aller √† un ordinateur, o√π du divertissement il n'y avait qu'un sapeur et Paint. J'√©tais fatigu√© de dessiner rapidement, mais le d√©sir d'ouvrir tout le terrain et de ne pas exploser m'a motiv√© √† chercher de nouvelles et nouvelles fa√ßons de jouer √† ce jeu. Plusieurs ann√©es plus tard, je suis tomb√© accidentellement sur un article int√©ressant sur un clone d'un sapeur et je n'ai pas pu passer. Je vous sugg√®re de vous familiariser avec cela. Il s'agit d'une histoire sur le d√©veloppement de Kaboom, un clone du l√©gendaire jeu de d√©mineur avec son propre zeste.</font></font></i><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le d√©mineur est apparu il y a assez longtemps selon les normes d'un jeu sur ordinateur. </font><font style="vertical-align: inherit;">Mais il me semble que la plupart des gens se souviennent des jeux qui faisaient partie des versions ant√©rieures de Windows. </font><font style="vertical-align: inherit;">Je n'ai jamais √©t√© bon au d√©mineur, mais je l'ai jou√© de temps en temps. </font><font style="vertical-align: inherit;">Certaines personnes jouent </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plus s√©rieusement</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Et pour ceux qui veulent se r√©conforter, je recommande de regarder </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©mineur - Le film</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Id√©e</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R√©cemment, j'ai eu une id√©e: que faire si vous devez jouer au d√©mineur contre un ordinateur plus sage? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En r√®gle g√©n√©rale, l'emplacement des mines est d√©termin√© au d√©but du jeu (mais il y a quelques astuces ici - par exemple, vous ne pouvez donc pas perdre le premier clic). Mais que faire si l'emplacement des mines n'avait pas √©t√© d√©termin√© √† l'avance et que le jeu aurait pu choisir l'emplacement des mines apr√®s le d√©but du jeu? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce serait assez cruel: si vous cliquez sur un carr√© qui peut contenir une mine, il la contiendra toujours! Ainsi, vous devez prouver √† l'avance que le carr√© est s√ªr.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/um/0i/hg/um0ihg9b97wzjslibzfalc5ovmy.png"><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans l'image ci-dessus, dans les cellules marqu√©es d'un point, il n'y a aucune mine garantie, et les cellules marqu√©es d'un point d'exclamation sont garanties d'en contenir une. Les points d'interrogation signifient une incertitude: peut-√™tre que si vous ouvrez plus de cellules, vous pouvez calculer si une mine y est cach√©e ou non.</font></font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Par contre, il y a des situations o√π vous devez deviner:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ji/_r/c0/ji_rc06pslel8r2olgyyjfeqx5g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
il y a une mine dans l'une des cellules inf√©rieures. Mais dans lequel, il est impossible de comprendre. Vous devez en choisir un. Mais selon la condition dont je viens de parler, cela signifierait une mort certaine! Je voulais que le jeu soit brutal, mais maintenant il est √©videmment en train de perdre.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, je changerai l√©g√®rement l'id√©e. Vous pouvez deviner, mais seulement s'il n'y a plus de cellules s√ªres. Ainsi, le jeu sera cruel, mais juste.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En d'autres termes:</font></font><br>
<br>
<ul>
<li>      ,   .</li>
<li>      ,    ,   .</li>
<li>      , :<br>
<br>
<ol>
<li>     ,       ,      .</li>
<li>   ,   ,      .</li>
</ol></li>
</ul><br>
<h2>  </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment impl√©menter un tel jeu? Je pourrais essayer de calculer tous les champs possibles, mais ce n'est pas r√©aliste: m√™me un petit champ de 10x10 signifie 2 ^ 100 possibilit√©s. Ne s√©lectionner que ceux qui contiennent exactement N min n'aide pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heureusement, je n'ai pas besoin de m'inqui√©ter pour tout le domaine. Nous ne savons rien des mines terrestres non adjacentes aux √©tiquettes. Je ne m'int√©resse qu'√† ceux qui sont √† la fronti√®re, le reste peut √™tre d√©termin√© tout √† fait par accident. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zl/vp/qc/zlvpqcqpuapldwssoa5lhjtaff4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, je peux calculer toutes les options pour l'emplacement des mines √† la fronti√®re conform√©ment aux √©tiquettes. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Backtracking</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (backtracking) - une bonne technique qui vous permet de trier toutes les combinaisons, mais aussi de reculer rapidement d√®s que l'on d√©termine qu'une branche ne peut pas calculer.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6z/0h/cf/6z0hcf6bfakj_2x3n0jyfz9bpf8.png"><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les deux emplacements possibles des mines √† la fronti√®re sont indiqu√©s ci-dessus. </font><font style="vertical-align: inherit;">En les combinant, nous comprendrons quelles cellules sont garanties d'√™tre vides ou extraites. </font></font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai √©galement besoin de suivre le nombre total de mines. </font><font style="vertical-align: inherit;">Ainsi, l'emplacement ressemble vraiment √† ¬´5 min √† la fronti√®re, 5 min √† l'ext√©rieur¬ª. </font><font style="vertical-align: inherit;">C'est important car sinon j'aurais pu cr√©er trop de mines √† la fronti√®re (ou trop peu!)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, j'ai toutes les options. </font><font style="vertical-align: inherit;">Que se passe-t-il lorsqu'un joueur d√©cide d'ouvrir une cage?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Choisissez une option al√©atoire (qui satisfait aux r√®gles ¬´cruelles mais justes¬ª). </font><font style="vertical-align: inherit;">Cela permettra de d√©terminer l'emplacement des mines √† la fronti√®re.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dispersez au hasard ceux qui restent √† l'ext√©rieur de la fronti√®re.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S'il y a une mine dans la cellule s√©lectionn√©e, la partie est termin√©e.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autrement:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©finir une nouvelle √©tiquette pour la cellule identifi√©e</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©v√©ler des cellules suppl√©mentaires s'il est √©gal √† 0</font></font></li>
<li>    ,    !       .</li>
</ol></li>
</ul><br>
<h2>  </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour les petits champs, c'est normal. </font><font style="vertical-align: inherit;">Habituellement, il n'y a que quelques combinaisons possibles ... attendez, c'est quoi? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/df/9n/k_/df9nk_sulyltttsf-u4pafb8fxe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oh non! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g1/5w/nu/g15wnu_xlthcmvg94n7kjeqsg_k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'une mani√®re ou d'une autre, j'ai r√©ussi √† d√©bloquer 18 millions d'emplacements de mines possibles. </font><font style="vertical-align: inherit;">Mon Firefox d√©vore 12 gigaoctets de m√©moire et il faut une demi-minute pour ouvrir la cellule. </font><font style="vertical-align: inherit;">√âvidemment, j'ai besoin d'un meilleur algorithme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quelqu'un peut remarquer que D√©mineur est un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jeu complet NP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et donc un temps qui augmente de fa√ßon exponentielle ne peut pas √™tre √©vit√©. </font><font style="vertical-align: inherit;">Et dans le cas g√©n√©ral, cela est vrai - il y aura des positions qui prendront beaucoup de temps √† calculer. </font><font style="vertical-align: inherit;">Mais pour une petite zone, cela fonctionne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je n'ai pas besoin de me souvenir de toutes les combinaisons. </font><font style="vertical-align: inherit;">Je n'ai m√™me pas besoin de calculer toutes les combinaisons. </font><font style="vertical-align: inherit;">Tout ce qui est n√©cessaire est un moyen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v√©rifier si la cellule est s√ªre, dangereuse ou vague,</font></font></li>
<li>    (,   ,       ).</li>
</ul><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au lieu d'essayer les options moi-m√™me, je vais utiliser le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solveur SAT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ce sont des outils qui prennent une formule compos√©e de variables logiques et recherchent un ensemble de valeurs qui rendraient la formule vraie. Une telle m√©thode imaginaire, mais tout √† fait valable pour notre t√¢che. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une classe de logiciels plus puissante est constitu√©e par les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solveurs SMT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui fonctionnent avec une plus large gamme de valeurs et de formules, telles que la logique du premier ordre (quantificateurs), les tableaux, les entiers, etc. Cela aidera au moins √† d√©finir certaines √©quations pour les entiers. Mais j'ai besoin de quelque chose qui fonctionne dans le navigateur. Les gens ont r√©ussi √† porter certains outils sophistiqu√©s comme </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z3Prover</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur le navigateur, mais la version WebAssembly p√®se</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17 Mo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et c'est trop. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai trouv√© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MiniSat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un petit solveur SAT qui a √©t√© compil√© pour Javascript par Joel Galenson. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le fichier compil√© ne</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> prend que 200 kilo-octets, donc je l'utilise.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formules CNF</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les solveurs SAT fonctionnent avec des formules normales conjonctives ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CNF</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). La formule de CNF est ¬´un ET de OU¬ª, par exemple: </font></font><br>
<br>
<code>(a | ~ b | ~ c) &amp; (c | d ~ e) &amp; f</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vous pouvez convertir n'importe quelle formule de logique de phrase (variables, et, ou non, implication) en CNF, c'est donc une sorte de format universel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment l'utilisons-nous? Supposons que nous ayons un tableau: </font><font style="vertical-align: inherit;">
si je cr√©e des variables pour des cellules inconnues (dans le sens horaire: x1, x2, x3), elles devront satisfaire les √©quations suivantes: </font><font style="vertical-align: inherit;">
Mais comment exprimer ¬´la somme des variables est 2¬ª en CNF? </font><font style="vertical-align: inherit;">
J'ai trouv√© une m√©thode qui, comme je l'ai appris plus tard, est appel√©e ¬´codage binomial¬ª et est le codage le plus simple. Vous devez consid√©rer tous les sous-ensembles possibles de variables. Par exemple, pour vous avez </font><font style="vertical-align: inherit;">besoin des formules suivantes:</font></font><br>
<br>
<code>? ? 1<br>
2 ? 1</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>1 + 2 + 3 = 2<br>
2 + 3 = 1<br>
2 + 3 = 1 (   )</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>x1 + x2 + x3 = 2 </code><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour chaque sous-ensemble de 2 variables, au moins une est vraie. </font><font style="vertical-align: inherit;">Cela garantit que le montant est sup√©rieur √† 1.</font></font><br>
<code>(x1 | x2) &amp; (x1 | x3) &amp; (x2 | x3)</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au moins une variable est fausse. </font><font style="vertical-align: inherit;">Cela garantit que le montant est inf√©rieur √† 3.</font></font><br>
<code>(~ x1 | ~ x2 | ~ x3)</code></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour </font></font><code>x2 + x3 = 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moi, j'ai besoin d'un ensemble similaire de formules:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au moins une des variables est correcte: </font></font><code>(x2 | x3)</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au moins une des variables est fausse </font></font><code>(~ x2 | ~ x3)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En combinant cela, j'obtiens une formule CNF avec 6 points. Au format DIMACS standard: </font><font style="vertical-align: inherit;">
toutes les lignes de position se terminent par 0 et la n√©gation est marqu√©e d'un moins. Si je le connecte √† MiniSat (essayez par vous-m√™me), j'obtiens: </font><font style="vertical-align: inherit;">
Cela signifie que MiniSat a trouv√© une solution o√π x1 et x2 sont vraies et x3 sont fausses. Voici √† quoi ressemblera le tableau: </font><font style="vertical-align: inherit;">
L'ensemble du programme est un peu plus compliqu√©: ce n'est qu'une solution, il y en a une autre. Par cons√©quent, pour savoir si x1, x2, x3 peuvent √™tre vrais (ou faux), vous devez effectuer plus de demandes. Je dois demander: ¬´√âtant donn√© la formule ci-dessus, ainsi que x1, est-ce possible? Que diriez-vous de la formule ci-dessus, ainsi que ~ x1 "?</font></font><br>
<br>
<code>p cnf 3 6<br>
1 2 0<br>
1 3 0<br>
2 3 0<br>
-1 -2 -3 0<br>
2 3 0<br>
-2 -3 0 </code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>SAT 1 2 -3</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>! ! 1<br>
2 . 1</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'encodage signifie que je dois trouver toutes les combinaisons possibles (par exemple, tous les sous-ensembles de 3) d'un ensemble de variables. </font><font style="vertical-align: inherit;">Cependant, pour cette √©quation, il n'y aura que 8 variables, donc la formule est g√©n√©ralement assez petite pour que MiniSat puisse la r√©soudre rapidement.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivi min</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, ce n'est pas une solution compl√®te! J'ai encore besoin de savoir combien il reste de mines. Certaines combinaisons sont impossibles, car sinon vous pouvez cr√©er plus de mines que ce qui est autoris√©, et il sera impossible de gagner. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vj/ic/pz/vjicpzij8cclzqcvewcn3hpzgpq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, le cas contraire est √©galement possible: s'il y a trop peu de mines, le jeu se terminera, car il n'y aura rien √† placer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, je dois indiquer dans la formule SAT que ¬´le nombre de mines n'est pas inf√©rieur √† X et pas sup√©rieur √† Y¬ª. Au d√©but, je pensais pouvoir utiliser l'astuce avec toutes les combinaisons. Malheureusement, cela ne fonctionne pas trop bien avec de grands nombres. S'il y a, disons, 20 cellules et 10 min, alors apr√®s avoir connect√© les nombres au </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coefficient binomial,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous d√©couvrons que le nombre de combinaisons est d√©j√† √† 6 chiffres!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai donc d√©couvert qu'il existe de nombreuses autres fa√ßons de coder la somme des variables dans la formule SAT. Vous devez cr√©er un sch√©ma qui combinera les variables individuelles. Voir, par exemple, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette r√©ponse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur StackExchange ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">celle-ci</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalement, j'ai r√©alis√© l'id√©e d'un article intitul√© ¬´Codage CNF efficace avec des contraintes de cardinalit√© bool√©ennes¬ª, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©crit par</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Olivier Baillot et Yasin Bufhad. Nous voyons un arbre qui ajoute r√©cursivement des nombres unaires (ou trie les bits pour que tout le monde soit au d√©but):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/_s/n8/cg_sn8kuz4tyzsklfiftc9pxr6i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä la fin de ce diagramme, vous obtiendrez un ensemble tri√© de variables de ¬´sortie¬ª. Pour confirmer que la somme n'est pas inf√©rieure √† X, v√©rifiez que les premiers X des variables r√©sultantes sont 1. Pour affirmer que la somme n'est pas sup√©rieure √† Y, v√©rifiez que les derniers N - Y des variables r√©sultantes sont 0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est bien mieux que d'utiliser toutes les combinaisons possibles, cependant, ce sch√©ma est toujours irrationnel car il g√©n√®re des phrases ”® (N ^ 2). Lorsque le nombre de cellules ouvertes est d'environ 100, le jeu devient lent. Nous pouvons optimiser davantage le jeu. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R√©duisez les demandes</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En √©tudiant le probl√®me, j'ai remarqu√© que je pouvais r√©duire le nombre de requ√™tes au solveur. </font><font style="vertical-align: inherit;">Je voulais d√©terminer l'√©tat de toutes les cellules (c'est-√†-dire v√©rifier si elles sont garanties dangereuses, s√ªres ou non). </font><font style="vertical-align: inherit;">Je l'ai fait en utilisant une simple boucle. </font><font style="vertical-align: inherit;">Disons que la planche est d√©crite par la formule F:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©cidez </font></font><code>F &amp; ~ x1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de v√©rifier si x1 peut √™tre 0</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©cidez </font></font><code>F &amp; x1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de v√©rifier si x1 peut √™tre 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©cidez </font></font><code> F &amp; ~ x2 </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de v√©rifier si x2 peut √™tre √©gal √† 0</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©cidez </font></font><code>F &amp; x2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de v√©rifier si x2 peut √™tre 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etc.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'est-ce que j'ai remarqu√©? </font><font style="vertical-align: inherit;">Si j'obtiens une solution pour F &amp; ~ x1, elle contiendra √©galement les valeurs de toutes les autres variables. </font><font style="vertical-align: inherit;">Cela r√©pond d√©j√† √† de nombreuses autres questions: si la solution contient x2 = 0, je n'ai pas besoin de demander si x2 peut √™tre 0, car je le sais d√©j√†. </font><font style="vertical-align: inherit;">Cela me permet de r√©duire le nombre de demandes d'environ 2 √† 5 fois.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise en cache</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela ne r√©sout pas le probl√®me de l'√©norme formule g√©n√©r√©e par le circuit de "comptage". Comme je l'ai dit, le nombre de phrases est de l'ordre de N ^ 2. Sur un grand tableau, la formule peut aller jusqu'√† 10 000 hypoth√®ses. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heureusement, la plupart du temps, nous connaissons la signification exacte de nombreuses cellules. Si la cellule est garantie vide ou remplie garantie, la valeur ne changera jamais! Cela signifie que nous pouvons le mettre en cache et ne pas l'inclure dans la formule SAT. Une fois que nous aurons d√©termin√© l'√©tat de la cellule, nous n'aurons plus besoin de l'inclure √† nouveau dans le calcul. Les cellules seront utilis√©es tant qu'elles ne sont pas d√©finies. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette optimisation est l√©g√®rement dangereuse: nous n'avons plus de formule confirmant l'exactitude de l'ensemble de la planche. Si tout le reste fonctionne comme pr√©vu, ce n'est pas un probl√®me, mais cela peut compliquer le suivi des erreurs.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un autre cas: jouer √† l'√©tranger </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√ätes-vous autoris√© √† cliquer n'importe o√π sur la carte en dehors de la fronti√®re entre la zone ouverte et non ouverte du champ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au d√©part, je pensais que c'√©tait la m√™me chose que de deviner: s'il n'y a pas de cellules s√ªres, vous pouvez simplement cliquer n'importe o√π sur le champ. </font><font style="vertical-align: inherit;">Mais certains trouvent √©trange que cela garantisse l'ouverture d'une cage vide. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai donc chang√© le jeu pour qu'un clic hors de la fronti√®re soit toujours puni. </font><font style="vertical-align: inherit;">√Ä l'exception du d√©but du jeu, bien s√ªr, car alors tout le plateau est ¬´√† l'ext√©rieur¬ª. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais il s'av√®re qu'il existe un autre sc√©nario: que faire si tous les champs frontaliers sont mortels? </font><font style="vertical-align: inherit;">
Vous n'avez pas d'autre choix que de r√©v√©ler autre chose. </font><font style="vertical-align: inherit;">Cette situation peut rendre le jeu infranchissable d√®s le d√©part. </font><font style="vertical-align: inherit;">Alors maintenant, il y a encore une exception. </font><font style="vertical-align: inherit;">Vous √™tes autoris√© √† jouer en dehors des fronti√®res si:</font></font><br>
<br>
<code>3 . .<br>
. . .<br>
. . .<br>
</code><br><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le champ n'est pas ouvert</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les cellules min√©es peuvent √™tre situ√©es √† la fronti√®re (cliquer sur l'ext√©rieur devrait √™tre s√ªr), ou</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il doit y avoir des bombes dans toutes les cellules de la fronti√®re (il faut cliquer √† l'ext√©rieur).</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise √† jour</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Le changement s'est av√©r√© controvers√©, car la restriction est quelque peu artificielle. </font><font style="vertical-align: inherit;">J'ai ajout√© un interrupteur qui permettra / interdira de jouer avec ces conditions.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est tout</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez jouer √† Kaboom </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Essayez d'activer le mode de d√©bogage: cela rend le jeu trivial, mais il montre bien comment cela fonctionne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Code source </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il n'est pas tr√®s beau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pourriez √©galement √™tre int√©ress√© par un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jeu similaire</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Simon Tatham, cr√©ateur de PuTTY. Sa version a une tournure diff√©rente: il est toujours r√©soluble sans sp√©culation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jouez sagement! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quoi d'autre peut √™tre utile √† lire sur le blog </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud4Y</font></font></a></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
‚Üí </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment la banque s'est ¬´cass√©e¬ª</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
‚Üí </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Confidentialit√© personnelle? Non, ils n'ont pas entendu</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
‚Üí La </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grande th√©orie des flocons de neige</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
‚Üí </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diagnostic des connexions r√©seau sur un routeur EDGE virtuel</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
‚Üí</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les virus r√©sistants aux CRISPR construisent des abris pour prot√©ger les g√©nomes des enzymes p√©n√©trant l'ADN.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Abonnez-vous √† notre </font><font style="vertical-align: inherit;">cha√Æne </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour ne manquer aucun autre article! </font><font style="vertical-align: inherit;">Nous √©crivons pas plus de deux fois par semaine et uniquement pour affaires. </font><font style="vertical-align: inherit;">Nous vous rappelons que les startups peuvent obtenir 1 million de roubles. </font><font style="vertical-align: inherit;">de Cloud4Y. </font><font style="vertical-align: inherit;">Conditions g√©n√©rales pour ceux qui le souhaitent - sur notre site Web: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bit.ly/2sj6dPK</font></font></a></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr487038/index.html">Soudain, un syst√®me de collecte des ordures √† lui seul ne suffit pas</a></li>
<li><a href="../fr487040/index.html">Firefox Preview Nightly pour Android prend en charge uBlock Origin</a></li>
<li><a href="../fr487042/index.html">Le Ryzen Threadripper 3990X √† 64 c≈ìurs a battu tous les processeurs Intel lors des tests, dont 20 000 $ Xeon</a></li>
<li><a href="../fr487044/index.html">Intimit√©? Non pas entendu</a></li>
<li><a href="../fr487046/index.html">Comment cr√©er une biblioth√®que native pour Android</a></li>
<li><a href="../fr487054/index.html">ROS: D√©di√© √† ceux qui sont coinc√©s dans Gazebo ... Plate-forme pour un robot pour 28 000 roubles</a></li>
<li><a href="../fr487056/index.html">Est-il dangereux de garder RDP ouvert sur Internet?</a></li>
<li><a href="../fr487058/index.html">"Hadoop. ZooKeeper ¬ªde la s√©rie Technostream de Mail.Ru Group¬´ Traitement distribu√© de grandes donn√©es dans Hadoop ¬ª</a></li>
<li><a href="../fr487060/index.html">Vous utilisez Google Chrome? Ainsi, Google collecte vos donn√©es via X-client-data</a></li>
<li><a href="../fr487062/index.html">CBS a permis aux utilisateurs de Linux de regarder la s√©rie Star Trek, gr√¢ce √† elle pour cela</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>