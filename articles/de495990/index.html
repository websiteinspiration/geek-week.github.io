<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍⚖️ 👩‍🏭 📣 Offenlegung von Telefonnummer und Geolokalisierung durch Sicherheitslücke in Telegramm 🤶🏾 💅🏻 📈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In letzter Zeit hat Telegram zunehmend das Thema des Durchbruchs von Personen und der Weitergabe personenbezogener Daten diskutiert. Ich habe mich gef...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Offenlegung von Telefonnummer und Geolokalisierung durch Sicherheitslücke in Telegramm</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495990/"><img src="https://habrastorage.org/webt/ve/mw/s5/vemws5sils-r3vtvvr7rg162sdw.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In letzter Zeit hat Telegram zunehmend das Thema des Durchbruchs von Personen und der Weitergabe personenbezogener Daten diskutiert. </font><font style="vertical-align: inherit;">Ich habe mich gefragt, wie sehr das Telegramm-Ökosystem selbst gegen solche Lecks resistent ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unter dem Schnitt ist die Geschichte, wie ich einen Fehler in Telegram gefunden habe. </font><font style="vertical-align: inherit;">Der Fehler ermöglicht es Ihnen, den Benutzer irrezuführen und ihn dazu zu bringen, seine Daten unwissentlich weiterzugeben - Geolokalisierung und Telefonnummer.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So funktioniert das:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/o8N0kjurgfo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Systemkomplexität war schon immer ein Feind der Sicherheit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Telegramm ist gewachsen, ist nicht mehr nur ein Messenger und hat sich zu einer großen Medienplattform mit umfangreichen Funktionen entwickelt. Die Telegram Bot API zeichnet sich als separates Haus aus, mit dem Sie ganze Anwendungen im Messenger erstellen können - die sogenannten Bots. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Höchstwahrscheinlich weiß jeder, der versucht hat, einen eigenen Bot zu erstellen, dass dem Benutzer über eine spezielle Schaltfläche eine Anfrage nach seiner Telefonnummer gesendet werden kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Text auf dieser Schaltfläche kann auf einen beliebigen Wert eingestellt werden. Darüber hinaus kann der Bot dieselben Schaltflächen für andere Interaktionen verwenden: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tr/c7/k8/trc7k8xz2pvmmzac1pfbwxdlxqi.jpeg" alt="Bild" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Klicken auf die Schaltfläche wird dem Benutzer natürlich eine Warnung angezeigt, dass nun sein Kontakt an den Bot gesendet wird:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/su/5t/rk/su5trkfoqcrvxad8wg82xegm3bg.png" alt="Bild" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Nachricht spricht ganz klar über das Risiko einer Dekanonymisierung und warnt den nachdenklichen Benutzer vor für ihn gefährlichen Handlungen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als ich die API-Updates durchging, fiel mir ein, dass Telegram den Benutzern irgendwann die Möglichkeit gab, den Messenger selbst zu lokalisieren. Es gab Beispiele, bei denen die Lokalisierung für komische Änderungen der Benutzeroberfläche verwendet wurde. In diesem Moment kam mir der gleiche Gedanke, den Sie jetzt vielleicht haben: </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aber was ist, wenn Sie versuchen, ein Dialogfeld "komisch zu übersetzen", das den Benutzer warnt, die Telefonnummer an den Bot zu übertragen und seinen Text zu ersetzen?</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/s_/gj/ed/s_gjeddr_shl8q4ghctcrur4g4s.png" alt="Bild" width="300"> <img src="https://habrastorage.org/webt/xt/cm/il/xtcmilq-vxhoyslwjpn8uolmhrs.png" alt="Bild" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst dachte ich, dass es viel schwieriger sein würde, den Benutzer dazu zu bringen, eine externe XML-Dateilokalisierung in der Anwendung zu installieren, als nur zu überzeugen, auf Kontakt freigeben zu klicken. Genau so bot Telegram unter Verwendung einer XML-Datei an, seine Lokalisierungen unter den Gesprächspartnern zu verteilen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also dachte ich, bis ich auf den </font><font style="vertical-align: inherit;">setlanguage Link Handler im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quellcode</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> der </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Android-Anwendung stieß</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qs/nm/xv/qsnmxvjbble2rnvl-ufuadej46w.png" alt="Bild" width="600"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Genau das, was benötigt wird! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellte sich heraus, dass Telegram vor langer Zeit eine Übersetzungsplattform, translations.telegram.org, für alle Telegrammbenutzer zugänglich gemacht hatte und jetzt keine XML-Dateien mehr übertragen werden müssen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ws/rs/ov/wsrsovq81u4lsjh10u2dxoj3kjk.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klicken Sie einfach auf den Link </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t.me/setlanguage/%lang%</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Danach wird dem Benutzer ein Dialogfeld angezeigt, in dem Sie aufgefordert werden, eine neue Sprache zu installieren. </font><font style="vertical-align: inherit;">Und dieses Fenster ist viel weniger einschüchternd als eine Nachricht über eine Telefonnummernanfrage:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uo/yu/mp/uoyumprj8sk-0mil-xflt1lqjre.png" alt="Bild" width="300"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie es funktioniert?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Registrieren Sie sich unter </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">translations.telegram.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fügen Sie Ihre Sprache hinzu, übersetzen Sie die erforderlichen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oberflächenelemente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einige weitere</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Lokalisierung können Sie alles schreiben, was Sie wollen. Wir werden einen harmlosen Text anstelle einer schrecklichen Warnung über die Weitergabe von Geolokalisierung und Telefonnummer schreiben. Wir machen das gleiche für die anderen Plattformen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere giftige Sprache ist bereit. Es bleibt dem Benutzer zu überlassen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-w/aq/38/-waq38nqpnrd9a07kthuuuybsmk.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich konnte immer noch keinen Weg finden, um herauszufinden, ob der Benutzer die ihm angebotene Lokalisierung installiert hat. Es gab weder Sprachstatistiken auf translations.telegram.org noch Änderungen im Benutzerprofil. Mit der Bot-API können Sie die Sprache des Benutzers über </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">den Parameter language_code ermitteln</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aber sein Wert wird aus den Systemeinstellungen übernommen. </font><font style="vertical-align: inherit;">Das Ändern der Sprache in der Anwendung wirkt sich nicht auf den Parameter aus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun, dann fügen Sie einfach eine kleine Verzögerung nach der Nachricht mit einem Link zur Sprache hinzu. </font><font style="vertical-align: inherit;">Nach Auswahl einer Sprache empfehlen wir dem Benutzer, sich mit dem Bot-Menü vertraut zu machen. </font><font style="vertical-align: inherit;">Wenn Sie in diesem Dialogfeld auf OK klicken, wird die Nummer mit einer Nachricht an den Bot weitergeleitet, und der Bot löscht diese Nachricht sofort. </font><font style="vertical-align: inherit;">Wenn der Bot Webhook verwendet, um Updates zu erhalten, wird die Nachricht schneller gelöscht und der Benutzer versteht möglicherweise nicht, dass er gerade seinen Kontakt gesendet hat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Übrigens kann ein Bot ähnlich wie bei einer Kontaktanfrage einen Benutzer auffordern, seine Geolokalisierung mitzuteilen. </font><font style="vertical-align: inherit;">Ja, und dieses Dialogfeld kann auch übersetzt werden.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie repariert man</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Natürlich sollten Sie Benutzern nicht erlauben, die gesamte Benutzeroberfläche ohne Moderation zu übersetzen. Übrigens ist die Übersetzungsmoderation beispielsweise für dieses Dialogfeld </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">translations.telegram.org/rutech/ios/unsorted/AuthCode.Alert</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aktiviert </font><font style="vertical-align: inherit;">. Die Notwendigkeit der Moderation wird uns vom Critical-Label gemeldet. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ek/mq/1v/ekmq1vbreb7dxbm005uvbkx7rua.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellt sich heraus, dass eine so kleine Auslassung wie das Fehlen einer kritischen Bezeichnung für Dialoge über das Teilen von Nummern und die Geolokalisierung zu einem Leck führt. Ein Leck sehr sensibler Daten, wie bei einem Messenger, der sein Marketing auf Datenschutz / Sicherheit ausrichtet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Messenger, der per Definition an Ihre persönliche Telefonnummer gebunden ist, kann nicht privat sein. Dies kann nur die Kosten für die Offenlegung Ihrer Identität erhöhen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Sicherheitsanfälligkeit fiel in das Bug-Bounty-Telegrammprogramm und wurde mit 100 € bewertet.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Kommen Sie zu uns im Telegramm-Chat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@secinfosec</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dort teilen wir unsere Erfahrungen und diskutieren alles, was mit Informationssicherheit zu tun hat: ein Kopfgeldfehler, Pentests, Papier und praktische Sicherheit, neue Bedrohungen und Methoden, um mit ihnen umzugehen.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de495978/index.html">Drei Ebenen der Publikumsanalyse: Suche nach Einsichten</a></li>
<li><a href="../de495980/index.html">So zerlegen Sie das Tesla Model 3, ändern es mit einer Feile und bauen ein Beatmungsgerät</a></li>
<li><a href="../de495982/index.html">Wir untersuchen die Mediastreamer2 VoIP-Engine. Teil 4</a></li>
<li><a href="../de495984/index.html">Reaktion, Leistung und -500 Millisekunden zu Beginn - die Geschichte unserer Optimierungen in Zahlen</a></li>
<li><a href="../de495986/index.html">Analyse internationaler Dokumente zum Informationssicherheits-Risikomanagement. Teil 2</a></li>
<li><a href="../de495994/index.html">Beginn des akademischen Quartals oder wie ich zum Koordinator des Fernunterrichts wurde</a></li>
<li><a href="../de495996/index.html">Raspberry Pi, Python und Bewässerung von Zimmerpflanzen</a></li>
<li><a href="../de495998/index.html">Erstellen eines dunklen Themas für den Stapelüberlauf</a></li>
<li><a href="../de496004/index.html">Neue Modelle der Datensuche und -analyse. WSDM 2020 mit den Augen des Yandex.Tolki-Teams</a></li>
<li><a href="../de496006/index.html">Herauswachsender Reverse Proxy - Technologie für Fernschutz und Standortoptimierung ohne Änderung der DNS-A-Einträge</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>