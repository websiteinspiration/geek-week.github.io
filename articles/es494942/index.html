<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëßüèª üï≥Ô∏è üë®‚Äçüë®‚Äçüëß‚Äçüëß CGI en casa con Unreal Engine y iPhone üóæ ‚ÜôÔ∏è üå∏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬°Hola a todos! Mi nombre es Vasily Mazalov, trabajo como editor senior de video en Pixonic. Nuestro departamento est√° creando creatividades de video p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>CGI en casa con Unreal Engine y iPhone</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pixonic/blog/494942/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Hola a todos! </font><font style="vertical-align: inherit;">Mi nombre es Vasily Mazalov, trabajo como editor senior de video en Pixonic. </font><font style="vertical-align: inherit;">Nuestro departamento est√° creando creatividades de video para el marketing y la comunidad: videos para p√°ginas en p√°ginas, videos de revisi√≥n de innovaciones de juegos y otro contenido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando no creo creatividad, monitorizo ‚Äã‚Äãen Internet nuevos formatos y formas de presentar material para hacer que nuestro propio contenido sea m√°s diverso, interesante y atractivo para los nuevos jugadores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hace un a√±o, me encontr√© con el siguiente video:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ver el v√≠deo</font></font></b><div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/i51CizUXd7A" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© vemos aqu√≠? </font><font style="vertical-align: inherit;">El chico se puso un traje para capturar el movimiento del cuerpo (hasta ahora nada inusual), colg√≥ un iPhone frente a √©l (pero esto es interesante) y, por lo tanto, transmite la animaci√≥n de la cara y el cuerpo del personaje directamente en tiempo real en Unreal Engine, y el resultado busca una implementaci√≥n tan simple Bastante alta calidad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buena idea, pens√©. </font><font style="vertical-align: inherit;">Luego cerr√≥ el video. </font><font style="vertical-align: inherit;">Y continu√≥ trabajando m√°s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seis meses despu√©s, el material de capacitaci√≥n sobre c√≥mo capturar animaci√≥n facial en Unreal Engine usando una aplicaci√≥n en el iPhone result√≥ ser de dominio p√∫blico. </font><font style="vertical-align: inherit;">Al mismo tiempo, descubr√≠ que se compr√≥ un traje para capturar movimiento en nuestro departamento de arte. </font><font style="vertical-align: inherit;">Analiz√≥ su compatibilidad con UE: todo sali√≥ bien. </font><font style="vertical-align: inherit;">Solo quedaba por encontrar un iPhone para seguir trabajando, pero hoy en d√≠a hay a√∫n menos problemas con esto.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ver el v√≠deo</font></font></b><div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/AIHoDo7Y4_g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hubo muchas preguntas. </font><font style="vertical-align: inherit;">Antes de m√≠ hab√≠a un campo inculto de animaci√≥n inexplorada, el Unreal Engine, el modelado de la cara y el cuerpo humano, y otras cosas completamente remotas de la edici√≥n de video, pero al mismo tiempo, un gran deseo de darse cuenta de lo que se pretend√≠a. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El largo proceso de estudiar diversos documentos ha comenzado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo que sucedi√≥ como resultado y c√≥mo lo logramos, sigue leyendo.</font></font><br>
<a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Animaci√≥n de la cara</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para realizar nuestra idea, no era rentable para nosotros usar y esculpir el personaje desde cero: tomar√≠a mucho tiempo y requerir√≠a mejoras complejas y, a menudo, injustificadas. Por lo tanto, decidimos usar DAZ Studio: los huesos faciales se colocaron originalmente all√≠, lo que le permite crear r√°pidamente las contracciones y emociones faciales necesarias, en las que el escultor pasar√≠a mucho m√°s tiempo. S√≠, los modelos creados en DAZ est√°n lejos de ser una imagen fotorrealista, pero fueron ideales para nuestros objetivos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para grabar animaciones faciales, solo necesit√°bamos un iPhone con una c√°mara frontal TrueDepth, es decir, desde iPhone X y superior. Fue esta tecnolog√≠a la que ley√≥ la topolog√≠a facial y transfiri√≥ los valores necesarios en Unreal a nuestro modelo.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/yo/11/huyo11io_r0xlfw8nzzdzhawcvc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las formas de mezcla son responsables de diferentes expresiones faciales: modelos 3D de la misma topolog√≠a, es decir, con el mismo n√∫mero de v√©rtices, pero con formas diferentes. </font><font style="vertical-align: inherit;">Face AR usa 51 mezclas, y gracias a la documentaci√≥n detallada de Apple que describe qu√© mezclas espec√≠ficas se usan en DAZ, pudimos hacerlas lo suficientemente r√°pido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El conjunto de emociones y mezclas en un modelo 3D se ve m√°s o menos as√≠: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/rx/ep/berxephpsuciz3wxd7vcachheo0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mezcla formas de Internet </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/jo/9q/p2/jo9qp2iqqqyo1vyp514j-7xacpu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nuestras mezclas</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Entonces, primero obtenemos nuestra cara de Unreal Engine para las pruebas, luego construimos la aplicaci√≥n y volvemos a Unreal para obtener el resultado.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fh/x1/ui/fhx1uimpcjayhq0ybay3ifq8rdq.png"><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Animaci√≥n del cuerpo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para crear un cuerpo, era necesario tener en cuenta los detalles del software para trabajar con un traje. Trabajamos con el traje de captura de movimiento Perception Neuron 2.0 Motion Capture de Noitom. Cuesta alrededor de 2500 d√≥lares. Este es el traje m√°s barato del mercado y no el mejor representante entre los an√°logos: es muy sensible a la radiaci√≥n electromagn√©tica, lo que hace que las coordenadas de los sensores se muevan si est√° dentro del radio de la radiaci√≥n activa, y ser√° a√∫n m√°s dif√≠cil limpiar la animaci√≥n. Afortunadamente, nos mudamos a otro piso, y en un lugar nuevo estaba bastante desierto, lo que significa que la radiaci√≥n electromagn√©tica se redujo al m√≠nimo, es decir, era ideal para nosotros.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jv/df/qt/jvdfqtdhz19xnag1w_4_lrtg1bw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPor qu√© un traje? Las animaciones listas para usar de varias bibliotecas no nos conven√≠an, porque nuestro personaje deber√≠a tener un car√°cter y un comportamiento √∫nicos, y la cara y el cuerpo deber√≠an reflejarlos con precisi√≥n. Si hici√©ramos la animaci√≥n desde cero, llevar√≠a un mes, o incluso dos. El uso de equipos de captura de movimiento ahorr√≥ esta vez. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A diferencia de la cara, los propios artistas pintaron el modelo del cuerpo desde cero. Luego fue necesario hacerla aparejar y desollar en Maya. Despu√©s de ensamblar el cuerpo, lo comenzamos en Unreal, all√≠ recolectamos todo para el mocap, grabamos la animaci√≥n, despu√©s de lo cual el resultado solo queda para amasar.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1c/na/r0/1cnar0oe7evduomjsu9v_q-gyx0.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que la animaci√≥n se transmitiera con precisi√≥n, las mejoras fueron m√≠nimas o para evitarlas, y para transmitir la animaci√≥n del disfraz directamente al Unreal Engine, fue necesario establecer correctamente los huesos y eliminar valores innecesarios de nuestro modelo. Noitom tiene un modelo 3D aproximado para el Unreal Engine, con el cual, como referencia, necesit√°bamos refinar nuestro propio modelo: colocarlo en la posici√≥n T, colocar las palmas y los dedos en posiciones de modelado no est√°ndar y restablecer todos los valores a cero. Era muy importante que todos los huesos estuvieran sin giros innecesarios, de lo contrario el programa los multiplicar√°, distorsionando en gran medida el movimiento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En total, tom√≥ aproximadamente dos horas calibrar el traje y grabar los primeros videos. </font><font style="vertical-align: inherit;">Configuramos los ajustes en Unreal Engine, grabamos la animaci√≥n del cuerpo con todas las pausas necesarias de acuerdo con el gui√≥n, luego grabamos la animaci√≥n de la cara de acuerdo con los movimientos del cuerpo y el mismo gui√≥n y obtuvimos el resultado, que ver√°n en la siguiente ilustraci√≥n.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/E77DXw-zSu4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de grabar, la animaci√≥n necesitaba ser mejorada, por lo que le asignamos al animador la tarea de limpiarla. </font><font style="vertical-align: inherit;">Le llev√≥ tres d√≠as limpiar dos minutos de animaci√≥n.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/h1KUncMcTCw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego nos llev√≥ unas tres semanas hasta la versi√≥n final, y si excluimos el refinamiento de ciertos factores tanto en el modelo de la cara como en el cuerpo, este per√≠odo puede reducirse en otra semana. </font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øPor qu√© lo usamos?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tomemos un descanso del proceso de CGI y hablemos sobre cu√°les eran los objetivos del proyecto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En ese momento, cuando profundic√© en este tema y reun√≠ la informaci√≥n necesaria para el trabajo, los pilotos aparecieron en nuestro juego. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo general, cuando sale nuevo contenido, ya sea una voz fuera de la pantalla que habla sobre √©l, o los propios desarrolladores, o la informaci√≥n simplemente llega de alguna manera a trav√©s del juego. Ahora tenemos la oportunidad de crear un personaje, prepararlo adecuadamente, reunir a partir de activos de alta calidad las ubicaciones en las que se ubicar√° y, a trav√©s de este h√©roe, comunicarse con los jugadores: desde la historia y la revisi√≥n de videos hasta las transmisiones en vivo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por primera vez en un juego sobre robots, aparecieron personajes en vivo, y despu√©s de ellos historias que pueden contar sobre s√≠ mismos y el mundo. Y pens√© que ser√≠a genial si fuera posible recopilar cinem√°ticas de juego con personajes que sumergir√≠an a los jugadores en el mundo del juego tan r√°pido como hacemos videos en el motor. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vu/3j/lf/vu3jlfs_gtgsym1a0slfy_otmg0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Junto con el departamento de la comunidad, comenzamos a idear una imagen del personaje, c√≥mo se ver√≠a y cu√°l ser√≠a su historia. Nuestro gerente superior de la comunidad escribi√≥ el gui√≥n, que posteriormente desarrollamos en t√©rminos de ahorro de tiempo y simplificaci√≥n de la producci√≥n.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/RQ6y8dRT2x8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este video puedes ver casi todas las pruebas que hemos realizado con animaci√≥n facial y animaci√≥n corporal. </font><font style="vertical-align: inherit;">Como tienen especificaciones diferentes, tuvieron que probarse por turnos y solo mezclarse al final. </font><font style="vertical-align: inherit;">Para las pruebas de animaci√≥n corporal, se tom√≥ un modelo de vestuario del tr√°iler de CGI para el nuevo lanzamiento:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/sl-P_8CSahg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, ahora vamos a mostrar lo que obtuvimos como resultado:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3WMqrO1-6ww" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con un traje de captura de movimiento, iPhone, modelo 3D y Unreal Marketplace con una gran selecci√≥n de activos de calidad gratuitos, podemos recopilar historias interesantes para nuestros jugadores en solo un par de semanas. </font><font style="vertical-align: inherit;">Tambi√©n adquirimos experiencia y comprensi√≥n sobre c√≥mo crear r√°pidamente un nuevo personaje y, en la etapa de su creaci√≥n, tener en cuenta todas las caracter√≠sticas de producci√≥n para lograr el mejor resultado en poco tiempo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPor qu√© no buscamos alcanzar la calidad de cinem√°ticas geniales como Blizzard? </font><font style="vertical-align: inherit;">Para contenido de marketing y basado en la comunidad, la calidad actual es suficiente para brindar a nuestros usuarios una nueva perspectiva sobre el mundo de los juegos. </font><font style="vertical-align: inherit;">Sin embargo, aunque todav√≠a no hay necesidad de mejorar la calidad de los clips, siempre estamos en busca de nuevas soluciones.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es494920/index.html">Mal consejo para el desarrollador: qu√© hacer para "complacer" a la gerencia</a></li>
<li><a href="../es494922/index.html">Nizhny Novgorod para un especialista en TI: perspectivas de trabajo y oportunidades para la vida</a></li>
<li><a href="../es494924/index.html">La implementaci√≥n del efecto acuarela en los juegos.</a></li>
<li><a href="../es494938/index.html">¬°Feliz d√≠a de respaldo! No te olvides de el</a></li>
<li><a href="../es494940/index.html">DevOps: ¬øqu√© es, por qu√© y cu√°nto demanda?</a></li>
<li><a href="../es494948/index.html">Cree un buz√≥n VIP en Zimbra Collaboration Open-Source Edition</a></li>
<li><a href="../es494950/index.html">Algunas tendencias de almacenamiento a tener en cuenta</a></li>
<li><a href="../es494956/index.html">Data Byte Life</a></li>
<li><a href="../es494964/index.html">Redes neuronales y comercio. Implementaci√≥n pr√°ctica</a></li>
<li><a href="../es494966/index.html">SCRUM: un poema sobre el amor y el dolor.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>