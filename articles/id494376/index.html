<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍💼 🍥 🤞🏿 Buffer Kedalaman Hirarkis ♟️ 🔹 💠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ulasan singkat
 Penyangga kedalaman hierarkis adalah penyangga kedalaman multi-level (penyangga-Z) yang digunakan sebagai struktur percepatan untuk ku...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Buffer Kedalaman Hirarkis</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494376/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/fr/kx/e8/frkxe8hnnru9xzoo2g9k8qec2sq.png"></div><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ulasan singkat</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penyangga kedalaman hierarkis adalah penyangga kedalaman multi-level (penyangga-Z) yang digunakan sebagai struktur percepatan untuk kueri kedalaman. Seperti dalam kasus rantai mip tekstur, ukuran masing-masing tingkat biasanya merupakan hasil dari pembagian oleh dua ukuran buffer resolusi penuh. Pada artikel ini, saya akan berbicara tentang dua cara untuk menghasilkan buffer kedalaman hirarkis dari buffer resolusi penuh. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, saya akan menunjukkan cara menghasilkan rantai mip lengkap untuk buffer kedalaman, yang menjaga keakuratan kueri kedalaman dalam ruang koordinat tekstur (atau NDC) bahkan untuk ukuran buffer kedalaman tidak sama dengan kekuatan dua. (Di Internet, saya menemukan contoh kode yang tidak menjamin keakuratan ini, yang mempersulit pelaksanaan kueri akurat pada level mip tinggi.)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian, untuk kasus-kasus di mana hanya satu level downsampling diperlukan, saya akan mendemonstrasikan bagaimana menghasilkan level ini dengan satu panggilan ke shader komputasi yang menggunakan operasi atom dalam memori bersama dari workgroup. </font><font style="vertical-align: inherit;">Untuk aplikasi saya, di mana hanya diperlukan resolusi 1/16 x 1/16 (mip level 4), metode dengan shader komputasi </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2-3 kali lebih cepat</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> daripada pendekatan biasa dengan downsampling rantai mip dalam beberapa lintasan.</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengantar</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hierarchical Depths (juga disebut Hi-Z) adalah teknik yang sering digunakan dalam grafik 3D. Hal ini digunakan untuk mempercepat pemangkasan geometri tak terlihat (oklusi culling) (di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serta</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), perhitungan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">refleksi di ruang layar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kabut volumetrik,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan banyak lagi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, GPU </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hi-Z sering diimplementasikan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sebagai bagian dari pipa rasterisasi. Operasi pencarian Hi-Z yang cepat dalam cache pada chip memungkinkan Anda untuk melompati ubin fragmen sepenuhnya jika tertutup sepenuhnya oleh primitif yang sebelumnya diberikan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ide dasar Hi-Z adalah untuk mempercepat operasi kueri mendalam dengan membaca dari buffer resolusi lebih rendah. </font><font style="vertical-align: inherit;">Ini lebih cepat daripada membaca kedalaman resolusi penuh dari buffer, karena dua alasan:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Satu texel (atau hanya beberapa texels) dari buffer resolusi yang lebih rendah dapat digunakan sebagai nilai perkiraan sejumlah pluralitas dari buffer resolusi tinggi.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penyangga resolusi yang lebih rendah bisa cukup kecil dan di-cache, yang sangat mempercepat pelaksanaan operasi pencarian (terutama dengan akses acak).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isi level buffer Hi-Z sampel-rendah tergantung pada bagaimana mereka digunakan (apakah buffer kedalaman akan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"terbalik"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , jenis permintaan apa yang harus digunakan). Secara umum, sebuah texel di level penyangga Hi-Z menyimpan </font></font><code>min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau </font></font><code>max</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">semua texel yang sesuai dengannya di level sebelumnya. Terkadang nilai-nilai </font></font><code>min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font><font style="vertical-align: inherit;">disimpan pada saat yang sama </font></font><code>max</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Nilai rata-rata sederhana (yang sering digunakan dalam level mip dari tekstur reguler) jarang digunakan karena jarang digunakan untuk jenis pertanyaan seperti itu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buffer Hi-Z paling sering diminta segera di pintu keluar untuk menghindari pemrosesan lebih lanjut dan operasi pencarian yang lebih akurat dalam buffer resolusi penuh. Misalnya, jika kita menyimpan nilai</font></font><code>max</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk buffer kedalaman non-terbalik (di mana semakin besar nilai kedalaman, semakin jauh objeknya), kita dapat dengan cepat menentukan dengan tepat apakah posisi tertentu di ruang layar ditutupi oleh buffer kedalaman (jika koordinatnya Z&gt; adalah nilai (maks) yang disimpan dalam beberapa tingkat yang lebih tinggi (mis., resolusi lebih rendah) dari buffer Hi-Z). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Harap dicatat bahwa saya menggunakan frasa "tepat": jika koordinat Z &lt;= nilai yang diterima (maks), maka tidak diketahui apakah buffernya tumpang tindih. </font><font style="vertical-align: inherit;">Dalam beberapa aplikasi, dalam kasus ketidakpastian, mungkin perlu mencari buffer untuk kedalaman resolusi penuh; </font><font style="vertical-align: inherit;">dalam kasus lain, ini tidak diperlukan (misalnya, jika hanya perhitungan yang tidak perlu dipertaruhkan, dan bukan render yang benar).</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aplikasi saya: rendering partikel dalam shader komputasi</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya dihadapkan dengan kebutuhan untuk menggunakan Hi-Z ketika mengimplementasikan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rendering partikel dalam shader komputasi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di mesin aplikasi VR </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PARTICULATE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> saya </font><font style="vertical-align: inherit;">. Karena teknik rendering ini tidak menggunakan rasterisasi dengan fungsi tetap, ia perlu menggunakan pemeriksaan kedalaman sendiri untuk setiap partikel dengan ukuran satu piksel. Dan karena partikel tidak diurutkan dengan cara apa pun, akses ke buffer kedalaman (dalam kasus terburuk) hampir acak. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Operasi pencarian pada tekstur akses acak layar penuh adalah cara untuk kinerja yang buruk. Untuk mengurangi beban, pertama-tama saya mencari kedalaman di buffer kedalaman yang dikurangi dengan resolusi 1/16 x 1/16 dari aslinya. Buffer ini berisi nilai kedalaman.</font></font><code>min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, yang memungkinkan shading rendering komputasi untuk sebagian besar partikel yang terlihat melewati tes kedalaman resolusi penuh. (Jika kedalaman partikel &lt;kedalaman minimum disimpan dalam buffer resolusi lebih rendah, maka kita tahu bahwa itu benar-benar terlihat. Jika itu adalah = = min, maka kita perlu memeriksa buffer kedalaman resolusi penuh.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berkat ini, tes kedalaman untuk partikel yang terlihat dalam kasus umum menjadi operasi berbiaya rendah. (Untuk partikel yang tumpang tindih oleh geometri, itu lebih mahal, tetapi itu cocok untuk kita karena tidak menyebabkan biaya rendering, oleh karena itu partikel masih memerlukan sedikit perhitungan.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena fakta bahwa pencarian pertama kali dilakukan dalam buffer kedalaman resolusi yang lebih rendah (seperti yang disebutkan di atas) , </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">waktu rendering partikel berkurang maksimum 35%</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dibandingkan dengan kasus ketika pencarian hanya dilakukan dalam buffer resolusi penuh. </font><font style="vertical-align: inherit;">Karena itu, untuk aplikasi saya, Hi-Z sangat bermanfaat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita akan melihat dua teknik untuk menghasilkan buffer kedalaman hirarkis.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teknik 1: menghasilkan rantai Mip lengkap</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam banyak aplikasi Hi-Z, penciptaan rantai mip buffer kedalaman lengkap diperlukan. Sebagai contoh, ketika melakukan oklusi pemusnahan menggunakan Hi-Z, volume pembatas diproyeksikan ke ruang layar dan ukuran yang diproyeksikan digunakan untuk memilih tingkat mip yang sesuai (sehingga sejumlah texel tetap terlibat dalam setiap uji tumpang tindih). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menghasilkan rantai mip dari buffer kedalaman resolusi penuh biasanya merupakan tugas sederhana - untuk setiap texel pada level N kami mengambil </font></font><code>max</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(atau </font></font><code>min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, atau keduanya) 4 </font><font style="vertical-align: inherit;">texel </font><font style="vertical-align: inherit;">yang sesuai pada level N-1 yang dihasilkan sebelumnya. Kami melakukan operan berurutan (setiap kali mengurangi ukurannya setengah) sampai kami mendapatkan ukuran mip level 1x1 terakhir.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, dalam hal buffer kedalaman, ukuran yang tidak sesuai dengan kekuatan dua, semuanya lebih rumit. Karena Hi-Z untuk buffer dalam sering dibangun dari resolusi layar standar (yang jarang memiliki kekuatan dua), kita perlu menemukan solusi yang dapat diandalkan untuk masalah ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama-tama mari kita putuskan apa artinya nilai dari setiap penyangga kedalaman tingkat-mex texel. Dalam artikel ini, kita akan mengasumsikan bahwa rantai mip menyimpan nilai </font></font><code>min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Operasi pencarian kedalaman harus menggunakan pemfilteran tetangga terdekat, karena interpolasi nilai tidak </font></font><code>min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berguna bagi kami dan akan merusak sifat hierarkis rantai kedalaman mip yang dibuat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, apa sebenarnya nilai dari masing-masing texel pada mip-level N yang diperoleh oleh kita? Ini harus menjadi nilai minimum (</font></font><code>min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) dari semua texels dari buffer kedalaman layar penuh yang menempati ruang yang sama dalam ruang koordinat tekstur (dinormalisasi). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan kata lain, jika koordinat terpisah dari tekstur (dalam interval)</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mn>0</mn><mo>,</mo><mn>1</mn><msup><mo stretchy=&quot;false&quot;>]</mo><mn>2</mn></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.707ex" height="2.884ex" viewBox="0 -916.9 2457.1 1241.8" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-30" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-31" x="1224" y="0"></use><g transform="translate(1724,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-32" x="393" y="513"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mn>1</mn><msup><mo stretchy="false">]</mo><mn>2</mn></msup></math></span></span><script type="math/tex" id="MathJax-Element-1">[0, 1]^2</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) dipetakan (dengan memfilter tetangga terdekat) ke masing-masing texel buffer resolusi penuh, maka texel resolusi penuh ini harus dianggap sebagai kandidat untuk nilai yang </font></font><code>min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dihitung untuk texel pada setiap tingkat mip berikutnya yang lebih tinggi yang dipetakan dengan koordinat tekstur yang sama. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika korespondensi ini dijamin, maka kami akan yakin bahwa operasi pencarian pada level mip tinggi tidak akan pernah mengembalikan nilai kedalaman&gt; nilai texel dalam tekstur yang sama sesuai dengan buffer resolusi penuh (level 0). Dalam kasus N yang terpisah, jaminan ini dipertahankan untuk semua level di bawahnya (&lt;N).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk dimensi genap (dan dalam hal buffer resolusi penuh, yang merupakan kekuatan dua, dimensi genap di setiap level hingga yang terakhir, di mana dimensi menjadi sama dengan 1) akan mudah dilakukan. </font><font style="vertical-align: inherit;">Dalam kasus satu dimensi, untuk texel dengan indeks</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>i</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.802ex" height="2.009ex" viewBox="0 -755.5 345.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-69" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-2">i</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pada level N kita perlu mengambil texels pada level N-1 dengan indeks </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-32" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-3">2</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.968ex" height="2.134ex" viewBox="0 -755.5 2569.4 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-69" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2B" x="1068" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-31" x="2068" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-4">2i + 1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan temukan artinya </font></font><code>min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Yaitu</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>D</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi></mrow></msub><mo stretchy=&quot;false&quot;>[</mo><mi>i</mi><mo stretchy=&quot;false&quot;>]</mo><mo>=</mo><mtext>min</mtext><mo stretchy=&quot;false&quot;>(</mo><msub><mi>D</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>[</mo><mn>2</mn><mi>i</mi><mo stretchy=&quot;false&quot;>]</mo><mo>,</mo><msub><mi>D</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>[</mo><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy=&quot;false&quot;>]</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="37.481ex" height="2.634ex" viewBox="0 -809.3 16137.7 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-44" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-4E" x="1171" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5B" x="1556" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-69" x="1835" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5D" x="2180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-3D" x="2737" y="0"></use><g transform="translate(3793,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-6D"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-69" x="833" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-6E" x="1112" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-28" x="5461" y="0"></use><g transform="translate(5851,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-44" x="0" y="0"></use><g transform="translate(828,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-4E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2212" x="888" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-31" x="1667" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5B" x="8312" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-32" x="8590" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-69" x="9091" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5D" x="9436" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2C" x="9715" y="0"></use><g transform="translate(10160,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-44" x="0" y="0"></use><g transform="translate(828,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-4E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2212" x="888" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-31" x="1667" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5B" x="12621" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-32" x="12900" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-69" x="13400" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2B" x="13968" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-31" x="14969" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5D" x="15469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-29" x="15748" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>D</mi><mrow class="MJX-TeXAtom-ORD"><mi>N</mi></mrow></msub><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mtext>min</mtext><mo stretchy="false">(</mo><msub><mi>D</mi><mrow class="MJX-TeXAtom-ORD"><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">[</mo><mn>2</mn><mi>i</mi><mo stretchy="false">]</mo><mo>,</mo><msub><mi>D</mi><mrow class="MJX-TeXAtom-ORD"><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">[</mo><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-5">D_{N}[i] = \text{min}(D_{N-1}[2i], D_{N-1}[2i + 1])</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Kita dapat langsung membandingkan texel dalam rasio "2 banding 1" (dan karena itu ukuran koordinat tekstur), karena ukuran setiap level tepat dua kali lebih kecil dari yang sebelumnya.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/11f/ca7/b43/11fca7b43dd706d72f35590f69422e2c.svg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh ukuran level genap: 6 texels pada level ini dikurangi menjadi 3 pada level yang lebih tinggi. </font><font style="vertical-align: inherit;">Ukuran koordinat tekstur dari masing-masing tiga texel tingkat tinggi tepat ditumpangkan pada setiap dua texel tingkat rendah. </font><font style="vertical-align: inherit;">(Titik adalah pusat dari texels, dan kotak adalah dimensi dari koordinat tekstur ketika menyaring tetangga terdekat.)</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dalam kasus ukuran tingkat ganjil (dan buffer resolusi penuh yang bukan kekuatan dua akan memiliki setidaknya satu tingkat dengan ukuran ganjil) semuanya semakin sulit. </font><font style="vertical-align: inherit;">Untuk level N-1 ukuran aneh</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>d</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>i</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>m</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.595ex" height="2.384ex" viewBox="0 -755.5 3270.2 1026.6" role="img" focusable="false" style="vertical-align: -0.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAINI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAINI-69" x="511" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAINI-6D" x="819" y="0"></use><g transform="translate(1637,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-4E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2212" x="888" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-31" x="1667" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">d</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-6">\mathit{dim}_{N-1}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ukuran level berikutnya (N) akan sama </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>d</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>i</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>m</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi></mrow></msub><mo>=</mo><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x230A;</mo><mfrac><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>d</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>i</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>m</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mn>2</mn></mfrac><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x230B;</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.865ex" height="3.759ex" viewBox="0 -1132.2 7261.2 1618.6" role="img" focusable="false" style="vertical-align: -1.13ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAINI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAINI-69" x="511" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAINI-6D" x="819" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-4E" x="2315" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-3D" x="2643" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-230A" x="3699" y="0"></use><g transform="translate(4144,0)"><g transform="translate(120,0)"><rect stroke="none" width="2432" height="60" x="0" y="220"></rect><g transform="translate(60,558)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAINI-64" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAINI-69" x="511" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAINI-6D" x="819" y="0"></use><g transform="translate(1157,-107)"><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-4E" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2212" x="888" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-31" x="1667" y="0"></use></g></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-32" x="1469" y="-542"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-230B" x="6816" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">d</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>N</mi></mrow></msub><mo>=</mo><mo fence="false" stretchy="false">⌊</mo><mfrac><msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">d</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msub><mn>2</mn></mfrac><mo fence="false" stretchy="false">⌋</mo></math></span></span><script type="math/tex" id="MathJax-Element-7">\mathit{dim}_{N} = \lfloor \frac{\mathit{dim}_{N-1}}{2} \rfloor</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, yaitu </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2260;</mo><mfrac><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>d</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>i</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>m</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mn>2</mn></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.66ex" height="3.759ex" viewBox="0 -1132.2 3728.6 1618.6" role="img" focusable="false" style="vertical-align: -1.13ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2260" x="0" y="0"></use><g transform="translate(778,0)"><g transform="translate(397,0)"><rect stroke="none" width="2432" height="60" x="0" y="220"></rect><g transform="translate(60,558)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAINI-64" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAINI-69" x="511" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAINI-6D" x="819" y="0"></use><g transform="translate(1157,-107)"><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-4E" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2212" x="888" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-31" x="1667" y="0"></use></g></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-32" x="1469" y="-542"></use></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>≠</mo><mfrac><msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">d</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msub><mn>2</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-8">\neq \frac{\mathit{dim}_{N-1}}{2}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini berarti bahwa sekarang kita tidak memiliki pemetaan 2-ke-1 yang jelas dari texel level N-1 ke texels level N. Sekarang ukuran koordinat tekstur dari setiap texel pada level N ditumpangkan pada ukuran </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> texels pada level N-1.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/48d/9d6/6e1/48d9d66e16424a3781e695a3340d2cb4.svg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh ukuran level ganjil: 7 texels dari level ini dikurangi menjadi 3 texels di level berikutnya. </font><font style="vertical-align: inherit;">Dimensi koordinat tekstur tiga texel tingkat tinggi ditumpangkan pada ukuran tiga texels dari tingkat yang lebih rendah. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karenanya</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>D</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi></mrow></msub><mo stretchy=&quot;false&quot;>[</mo><mi>i</mi><mo stretchy=&quot;false&quot;>]</mo><mo>=</mo><mtext>min</mtext><mo stretchy=&quot;false&quot;>(</mo><msub><mi>D</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>[</mo><mn>2</mn><mi>i</mi><mo stretchy=&quot;false&quot;>]</mo><mo>,</mo><msub><mi>D</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>[</mo><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy=&quot;false&quot;>]</mo><mo>,</mo><msub><mi>D</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>[</mo><mn>2</mn><mi>i</mi><mo>+</mo><mn>2</mn><mo stretchy=&quot;false&quot;>]</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="51.493ex" height="2.634ex" viewBox="0 -809.3 22170.5 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-44" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-4E" x="1171" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5B" x="1556" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-69" x="1835" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5D" x="2180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-3D" x="2737" y="0"></use><g transform="translate(3793,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-6D"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-69" x="833" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-6E" x="1112" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-28" x="5461" y="0"></use><g transform="translate(5851,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-44" x="0" y="0"></use><g transform="translate(828,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-4E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2212" x="888" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-31" x="1667" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5B" x="8312" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-32" x="8590" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-69" x="9091" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5D" x="9436" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2C" x="9715" y="0"></use><g transform="translate(10160,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-44" x="0" y="0"></use><g transform="translate(828,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-4E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2212" x="888" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-31" x="1667" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5B" x="12621" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-32" x="12900" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-69" x="13400" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2B" x="13968" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-31" x="14969" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5D" x="15469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2C" x="15748" y="0"></use><g transform="translate(16193,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-44" x="0" y="0"></use><g transform="translate(828,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-4E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2212" x="888" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-31" x="1667" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5B" x="18654" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-32" x="18933" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-69" x="19433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2B" x="20001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-32" x="21002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5D" x="21502" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-29" x="21781" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>D</mi><mrow class="MJX-TeXAtom-ORD"><mi>N</mi></mrow></msub><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mtext>min</mtext><mo stretchy="false">(</mo><msub><mi>D</mi><mrow class="MJX-TeXAtom-ORD"><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">[</mo><mn>2</mn><mi>i</mi><mo stretchy="false">]</mo><mo>,</mo><msub><mi>D</mi><mrow class="MJX-TeXAtom-ORD"><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">[</mo><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>,</mo><msub><mi>D</mi><mrow class="MJX-TeXAtom-ORD"><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">[</mo><mn>2</mn><mi>i</mi><mo>+</mo><mn>2</mn><mo stretchy="false">]</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-9">D_{N}[i] = \text{min}(D_{N-1}[2i], D_{N-1}[2i + 1], D_{N-1}[2i + 2])</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ini berarti bahwa satu texel pada level N-1 kadang-kadang mempengaruhi nilai yang </font></font><code>min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dihitung untuk </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> texel pada level N. Hal ini diperlukan untuk mempertahankan perbandingan yang dijelaskan di atas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deskripsi di atas telah disajikan hanya dalam satu dimensi untuk kesederhanaan. </font><font style="vertical-align: inherit;">Dalam dua dimensi, jika kedua dimensi level N-1 genap, maka wilayah 2x2 texel di level N-1 dipetakan ke satu texel di level N. Jika salah satu dimensi ganjil, wilayah 2x3 atau 3x2 di level N-1 dipetakan ke satu texel pada level N. Jika </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kedua</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dimensi </font><font style="vertical-align: inherit;">ganjil </font><font style="vertical-align: inherit;">, maka texel “angular” juga harus diperhitungkan, yaitu, wilayah 3x3 pada level N-1 dibandingkan dengan satu texel pada level N.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh kode</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode shader GLSL yang ditunjukkan di bawah ini mengimplementasikan algoritma yang kami jelaskan. </font><font style="vertical-align: inherit;">Itu harus dijalankan untuk setiap mip berikutnya, mulai dari level 1 (level 0 adalah level resolusi penuh).</font></font><br>
<br>
<pre><code class="cpp hljs">uniform sampler2D u_depthBuffer;<font></font>
uniform <span class="hljs-keyword">int</span> u_previousLevel;<font></font>
uniform ivec2 u_previousLevelDimensions;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{<font></font>
	ivec2 thisLevelTexelCoord = ivec2(gl_FragCoord);<font></font>
	ivec2 previousLevelBaseTexelCoord = <span class="hljs-number">2</span> * thisLevelTexelCoord;<font></font>
<font></font>
	vec4 depthTexelValues;<font></font>
	depthTexelValues.x = texelFetch(u_depthBuffer,<font></font>
                                    previousLevelBaseTexelCoord,<font></font>
                                    u_previousLevel).r;<font></font>
	depthTexelValues.y = texelFetch(u_depthBuffer,<font></font>
                                    previousLevelBaseTexelCoord + ivec2(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>),<font></font>
                                    u_previousLevel).r;<font></font>
	depthTexelValues.z = texelFetch(u_depthBuffer,<font></font>
                                    previousLevelBaseTexelCoord + ivec2(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>),<font></font>
                                    u_previousLevel).r;<font></font>
	depthTexelValues.w = texelFetch(u_depthBuffer,<font></font>
                                    previousLevelBaseTexelCoord + ivec2(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>),<font></font>
                                    u_previousLevel).r;<font></font>
<font></font>
	<span class="hljs-keyword">float</span> minDepth = min(min(depthTexelValues.x, depthTexelValues.y),<font></font>
                         min(depthTexelValues.z, depthTexelValues.w));<font></font>
<font></font>
    <span class="hljs-comment">// Incorporate additional texels if the previous level's width or height (or both) </span>
    <span class="hljs-comment">// are odd. </span>
	<span class="hljs-keyword">bool</span> shouldIncludeExtraColumnFromPreviousLevel = ((u_previousLevelDimensions.x &amp; <span class="hljs-number">1</span>) != <span class="hljs-number">0</span>);
	<span class="hljs-keyword">bool</span> shouldIncludeExtraRowFromPreviousLevel = ((u_previousLevelDimensions.y &amp; <span class="hljs-number">1</span>) != <span class="hljs-number">0</span>);
	<span class="hljs-keyword">if</span> (shouldIncludeExtraColumnFromPreviousLevel) {<font></font>
		vec2 extraColumnTexelValues;<font></font>
		extraColumnTexelValues.x = texelFetch(u_depthBuffer,<font></font>
                                              previousLevelBaseTexelCoord + ivec2(<span class="hljs-number">2</span>, <span class="hljs-number">0</span>),<font></font>
                                              u_previousLevel).r;<font></font>
		extraColumnTexelValues.y = texelFetch(u_depthBuffer,<font></font>
                                              previousLevelBaseTexelCoord + ivec2(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>),<font></font>
                                              u_previousLevel).r;<font></font>
<font></font>
		<span class="hljs-comment">// In the case where the width and height are both odd, need to include the </span>
        <span class="hljs-comment">// 'corner' value as well. </span>
		<span class="hljs-keyword">if</span> (shouldIncludeExtraRowFromPreviousLevel) {
			<span class="hljs-keyword">float</span> cornerTexelValue = texelFetch(u_depthBuffer,<font></font>
                                                previousLevelBaseTexelCoord + ivec2(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>),<font></font>
                                                u_previousLevel).r;<font></font>
			minDepth = min(minDepth, cornerTexelValue);<font></font>
		}<font></font>
		minDepth = min(minDepth, min(extraColumnTexelValues.x, extraColumnTexelValues.y));<font></font>
	}<font></font>
	<span class="hljs-keyword">if</span> (shouldIncludeExtraRowFromPreviousLevel) {<font></font>
		vec2 extraRowTexelValues;<font></font>
		extraRowTexelValues.x = texelFetch(u_depthBuffer,<font></font>
                                           previousLevelBaseTexelCoord + ivec2(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>),<font></font>
                                           u_previousLevel).r;<font></font>
		extraRowTexelValues.y = texelFetch(u_depthBuffer,<font></font>
                                           previousLevelBaseTexelCoord + ivec2(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>),<font></font>
                                           u_previousLevel).r;<font></font>
		minDepth = min(minDepth, min(extraRowTexelValues.x, extraRowTexelValues.y));<font></font>
	}<font></font>
<font></font>
	gl_FragDepth = minDepth;<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kelemahan dalam kode ini</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, dalam hal buffer kedalaman resolusi penuh yang satu dimensi lebih dari dua kali ukuran dimensi lain, indeks panggilan </font></font><code>texelFetch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mungkin melampaui </font></font><code>u_depthBuffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. (Dalam kasus seperti itu, dimensi yang lebih kecil berubah menjadi 1 sebelum yang lain.) Saya ingin menggunakan dalam contoh ini </font></font><code>texelFetch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(menggunakan koordinat bilangan bulat), sehingga apa yang terjadi sejelas mungkin, dan tidak secara pribadi menemukan penyangga kedalaman lebar / tinggi seperti itu. Jika Anda mengalami masalah seperti itu, Anda dapat membatasi ( </font></font><code>clamp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font><code>texelFetch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koordinat yang </font><font style="vertical-align: inherit;">ditransmisikan </font><font style="vertical-align: inherit;">atau menggunakan </font></font><code>texture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koordinat tekstur yang dinormalisasi (dalam sampler, menetapkan batas di tepi). Ketika menghitung </font></font><code>min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau </font></font><code>max</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus selalu mempertimbangkan satu texel beberapa kali untuk adanya kasus batas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kedua, meskipun fakta bahwa empat panggilan pertama </font></font><code>texelFetch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dapat diganti dengan satu </font></font><code>textureGather</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ini mempersulit hal-hal (karena </font></font><code>textureGather</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tingkat mip tidak dapat diindikasikan); </font><font style="vertical-align: inherit;">Selain itu, saya tidak melihat peningkatan kecepatan saat menggunakan </font></font><code>textureGather</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performa</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menggunakan shader fragmen di atas untuk menghasilkan dua rantai mip penuh untuk dua (satu untuk setiap mata) buffer kedalaman di mesin VR saya. </font><font style="vertical-align: inherit;">Dalam tes tersebut, resolusi untuk setiap mata adalah 1648x1776, yang menyebabkan terciptanya 10 level mip tambahan yang dikurangi (yang berarti 10 lintasan). </font><font style="vertical-align: inherit;">Butuh 0,25 ms pada NVIDIA GTX 980 dan 0,30 ms pada AMD R9 290 untuk menghasilkan rantai penuh untuk kedua mata.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/805/461/815/8054618153533c29d1de1000fcee2878.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a8f/2b6/950/a8f2b6950b278655f3deff3ca456874c.png"></div><br>
<i>Mip- 4, 5  6,    ,     . ( ,     ,  ,     .) Mip- 4 — ,    (103x111)     2.</i><br>
<br>
<h2>   mip-</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tugas algoritma yang dijelaskan di atas adalah untuk menjaga keakuratan kueri kedalaman dalam ruang koordinat tekstur (atau NDC). Untuk kelengkapan (dan karena saya menolak jaminan ini dalam teknik di bawah 2), saya ingin menunjukkan metode lain yang saya temui (misalnya, dalam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perhatikan bahwa, seperti yang sebelumnya, metode alternatif ini dirancang untuk bekerja dengan buffer resolusi penuh yang ukurannya bukan kekuatan dua (tetapi, tentu saja, mereka bekerja dengan ukuran yang sama dengan kekuatan dua).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam metode alternatif ini, ketika melakukan downsampling level dengan lebar ganjil (atau tinggi) alih-alih menambahkan untuk setiap output texel kolom tambahan (atau baris) dari texels dari level sebelumnya (lebih rendah), kami melakukan operasi ini hanya untuk texels output dengan indeks maksimum (texels "ekstrim" ) Satu-satunya hal yang berubah dalam fragmen shader yang disajikan di atas adalah menetapkan nilai </font></font><code>shouldIncludeExtraColumnFromPreviousLevel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>shouldIncludeExtraRowFromPreviousLevel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">// If the previous level's width is odd and this is the highest-indexed "edge" texel for </span>
<span class="hljs-comment">// this level, incorporate the rightmost edge texels from the previous level. The same goes </span>
<span class="hljs-comment">// for the height. </span>
<span class="hljs-keyword">bool</span> shouldIncludeExtraColumnFromPreviousLevel =<font></font>
    (previousMipLevelBaseTexelCoords.x == u_previousLevelDimensions.x - <span class="hljs-number">3</span>);
<span class="hljs-keyword">bool</span> shouldIncludeExtraRowFromPreviousLevel =<font></font>
    (previousMipLevelBaseTexelCoords.y == u_previousLevelDimensions.y - <span class="hljs-number">3</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena itu, texels ekstrem dengan indeks tertinggi menjadi sangat "tebal", karena setiap divisi dengan 2 dimensi ganjil mengarah pada fakta bahwa mereka menempati interval yang lebih besar secara proporsional dari ruang koordinat tekstur yang dinormalisasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kerugian dari pendekatan ini adalah bahwa menjadi lebih sulit untuk melakukan query kedalaman level mip tinggi. </font><font style="vertical-align: inherit;">Alih-alih hanya menggunakan koordinat tekstur yang dinormalisasi, pertama-tama kita perlu menentukan resolusi penuh texel yang sesuai dengan koordinat ini, dan kemudian mentransfer koordinat texel ini ke koordinat tingkat mip yang sesuai, permintaan yang sedang dieksekusi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuplikan kode di bawah ini bermigrasi dari ruang NDC</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mo>&amp;#x2212;</mo><mn>1</mn><mo>,</mo><mn>1</mn><msup><mo stretchy=&quot;false&quot;>]</mo><mn>2</mn></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.515ex" height="2.884ex" viewBox="0 -916.9 3235.6 1241.8" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2212" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-31" x="1057" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-2C" x="1557" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-31" x="2002" y="0"></use><g transform="translate(2503,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-5D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-32" x="393" y="513"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mo>−</mo><mn>1</mn><mo>,</mo><mn>1</mn><msup><mo stretchy="false">]</mo><mn>2</mn></msup></math></span></span><script type="math/tex" id="MathJax-Element-10">[-1, 1]^2</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk mengirim koordinat di tingkat mip </font></font><code>higherMipLevel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="cpp hljs">vec2 windowCoords = (<span class="hljs-number">0.5</span> * ndc.xy + vec2(<span class="hljs-number">0.5</span>)) * textureSize(u_depthBuffer, <span class="hljs-number">0</span>);
<span class="hljs-comment">// Account for texel centers being halfway between integers. </span>
ivec2 texelCoords = ivec2(round(windowCoords.xy - vec2(<span class="hljs-number">0.5</span>)));<font></font>
ivec2 higherMipLevelTexelCoords =<font></font>
    min(texelCoords / (<span class="hljs-number">1</span> &lt;&lt; higherMipLevel),<font></font>
        textureSize(u_depthBuffer, higherMipLevel).xy - ivec2(<span class="hljs-number">1</span>));</code></pre><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teknik 2: Hasilkan Level Hi-Z Tunggal Menggunakan Compader Shader</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menghasilkan rantai mip lengkap cukup cepat, tetapi agak mengganggu saya bahwa aplikasi saya menghasilkan semua level ini dan hanya menggunakan salah satunya (level 4). </font><font style="vertical-align: inherit;">Selain menghilangkan sedikit inefisiensi ini, saya juga ingin melihat seberapa banyak semuanya bisa dipercepat jika saya hanya menggunakan satu panggilan shader komputasi untuk menghasilkan level yang saya butuhkan. </font><font style="vertical-align: inherit;">(Perlu dicatat bahwa aplikasi saya dapat berhenti pada level 4 saat menggunakan solusi dengan shader fragmen multi-pass, jadi pada akhir bagian ini saya menggunakannya sebagai dasar untuk membandingkan runtimes.)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sebagian besar aplikasi Hi-Z, hanya satu tingkat kedalaman yang diperlukan, jadi saya menemukan situasi ini biasa. Saya menulis shader komputasi untuk persyaratan spesifik saya sendiri (menghasilkan level 4, yang memiliki resolusi 1/16 x 1/16 dari aslinya). Kode serupa dapat digunakan untuk menghasilkan level yang berbeda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Shader komputasi sangat cocok untuk tugas ini, karena dapat menggunakan memori kelompok kerja bersama untuk bertukar data antara utas. Setiap kelompok kerja bertanggung jawab untuk satu texel keluaran (dikurangi dengan downsampling buffer), dan utas kelompok kerja berbagi pekerjaan menghitung </font></font><code>min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">texel yang sesuai dengan resolusi penuh, membagikan hasilnya melalui memori bersama.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya mencoba dua solusi utama berdasarkan komputasi shader. Di bagian pertama, setiap utas meminta </font></font><code>atomicMin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">satu variabel memori bersama. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perhatikan bahwa karena programmer tidak dapat (tanpa ekstensi untuk perangkat keras dari pabrikan tertentu) melakukan operasi atom pada nilai-nilai non-integer (dan kedalaman saya disimpan sebagai </font></font><code>float</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), beberapa trik diperlukan di sini. Karena nilai floating-point non-negatif dari standar IEEE 754 menjaga urutannya ketika bit mereka diproses sebagai nilai integer yang tidak ditandatangani, kita dapat menggunakan </font></font><code>floatBitsToUint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk membawa (menggunakan reinterpretasi gips) nilai kedalaman </font></font><code>float</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke </font></font><code>uint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan kemudian memanggil </font></font><code>atomicMin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(untuk kemudian mengeksekusi </font></font><code>uintBitsToFloat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk nilai minimum selesai </font></font><code>uint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solusi paling jelas </font></font><code>atomicMin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah membuat grup thread 16x16 di mana setiap thread menerima satu texel dan kemudian mengeksekusinya </font></font><code>atomicMin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan nilai di memori bersama. Saya membandingkan pendekatan ini menggunakan blok aliran yang lebih kecil (8x8, 4x8, 4x4, 2x4, 2x2), di mana setiap aliran menerima wilayah texel dan menghitung minimum lokalnya sendiri, dan kemudian memanggil </font></font><code>atomicMin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yang tercepat dari semua solusi teruji ini</font></font><code>atomicMin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NVIDIA dan AMD ternyata memiliki solusi dengan blok aliran 4x4 (di mana setiap aliran itu sendiri menerima area texel 4x4). </font><font style="vertical-align: inherit;">Saya tidak begitu mengerti mengapa opsi ini ternyata menjadi yang tercepat, tetapi mungkin ini mencerminkan kompromi antara persaingan operasi atom dan perhitungan dalam arus independen. </font><font style="vertical-align: inherit;">Perlu juga dicatat bahwa ukuran workgroup 4x4 hanya menggunakan 16 utas per warp / wave (dan juga mungkin menggunakan 32 atau 64), yang menarik. </font><font style="vertical-align: inherit;">Contoh di bawah ini menerapkan pendekatan ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai alternatif untuk menggunakan, </font></font><code>atomicMin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saya mencoba melakukan reduksi paralel menggunakan teknik yang digunakan dalam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">presentasi NVIDIA yang dikutip secara aktif ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">(Ide dasarnya adalah menggunakan array memori bersama dengan ukuran yang sama dengan jumlah utas di workgroup, serta</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>log</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>&amp;#x2061;</mo><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.23ex" height="2.634ex" viewBox="0 -809.3 3112.9 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-6C"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-6F" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-67" x="779" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-32" x="1809" y="-343"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-28" x="1733" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMATHI-6E" x="2122" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/494376/&amp;usg=ALkJrhgQMawvxr4e6guccVyGUdOhqVSuXg#MJMAIN-29" x="2723" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>log</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo>⁡</mo><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-11">\log_{2} (n)</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lulus untuk perhitungan bersama berurutan dari </font></font><code>min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">minimum setiap aliran sampai minimum akhir dari seluruh kelompok kerja diperoleh.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya mencoba solusi ini dengan semua ukuran yang sama dari kelompok kerja seperti dalam solusi c </font></font><code>atomicMin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Bahkan dengan semua optimasi yang dijelaskan dalam presentasi NVIDIA, solusi reduksi paralel sedikit lebih lambat (dalam sepuluh GPU pada kedua GPU) daripada solusi yang </font></font><code>atomicMin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saya gunakan. </font><font style="vertical-align: inherit;">Selain itu, solusi dengan </font></font><code>atomicMin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jauh lebih sederhana dalam hal kode.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh kode</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan metode ini, cara termudah adalah tidak mencoba mempertahankan konsistensi dalam ruang koordinat tekstur yang dinormalisasi antara texel buffer yang direduksi dan resolusi penuh. </font><font style="vertical-align: inherit;">Anda cukup melakukan konversi dari koordinat texel resolusi penuh ke koordinat texel resolusi berkurang:</font></font><br>
<br>
<pre><code class="cpp hljs">ivec2 reducedResTexelCoords = texelCoords / ivec2(downscalingFactor);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kasus saya (menghasilkan setara dengan mip-level 4) </font></font><code>downscalingFactor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah 16. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti disebutkan di atas, shader komputasi GLSL ini mengimplementasikan solusi dengan </font></font><code>atomicMin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ukuran workgroup 4x4, di mana setiap thread menerima area texel 4x4 dari buffer resolusi penuh. </font><font style="vertical-align: inherit;">Buffer kedalaman nilai yang dikurangi yang dihasilkan </font></font><code>min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah 1/16 x 1/16 dari ukuran buffer resolusi penuh (dibulatkan ketika ukuran resolusi penuh tidak habis dibagi 16 oleh sepenuhnya).</font></font><br>
<br>
<pre><code class="cpp hljs">uniform sampler2D u_inputDepthBuffer;<font></font>
uniform <span class="hljs-keyword">restrict</span> writeonly image2DArray u_outputDownsampledMinDepthBufferImage;
<span class="hljs-comment">// The dimension in normalized texture coordinate space of a single texel in </span>
<span class="hljs-comment">// u_inputDepthBuffer. </span><font></font>
uniform vec2 u_texelDimensions;<font></font>
<font></font>
<span class="hljs-comment">// Resulting image is 1/16th x 1/16th resolution, but we fetch 4x4 texels per thread, hence </span>
<span class="hljs-comment">// the divisions by 4 here. </span>
layout(local_size_x = <span class="hljs-number">16</span>/<span class="hljs-number">4</span>, local_size_y = <span class="hljs-number">16</span>/<span class="hljs-number">4</span>, local_size_z = <span class="hljs-number">1</span>) in;<font></font>
<font></font>
<span class="hljs-comment">// This is stored as uint because atomicMin only works on integer types. Luckily </span>
<span class="hljs-comment">// (non-negative) floats maintain their order when their bits are interpreted as uint (using </span>
<span class="hljs-comment">// floatBitsToUint). </span><font></font>
shared uint s_workgroupMinDepthEncodedAsUint;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
	<span class="hljs-keyword">if</span> (gl_LocalInvocationIndex == <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// Initialize to 1.0 (max depth) before performing atomicMin's. </span>
		s_workgroupMinDepthEncodedAsUint = floatBitsToUint(<span class="hljs-number">1.0</span>);<font></font>
	}<font></font>
<font></font>
	memoryBarrierShared();<font></font>
	barrier();<font></font>
<font></font>
	<span class="hljs-comment">// Fetch a 4x4 texel region per thread with 4 calls to textureGather. 'gatherCoords' </span>
    <span class="hljs-comment">// are set up to be equidistant from the centers of the 4 texels being gathered (which </span>
    <span class="hljs-comment">// puts them on integer values). In my tests textureGather was not faster than </span>
    <span class="hljs-comment">// individually fetching each texel - I use it here only for conciseness. </span>
    <span class="hljs-comment">// </span>
    <span class="hljs-comment">// Note that in the case of the full-res depth buffer's dimensions not being evenly </span>
    <span class="hljs-comment">// divisible by the downscaling factor (16), these textureGather's may try to fetch </span>
    <span class="hljs-comment">// out-of-bounds coordinates - that's fine as long as the texture sampler is set to </span>
    <span class="hljs-comment">// clamp-to-edge, as redundant values don't affect the resulting min. </span><font></font>
<font></font>
	uvec2 baseTexelCoords = <span class="hljs-number">4</span> * gl_GlobalInvocationID.xy;<font></font>
	vec2 gatherCoords1 = (baseTexelCoords + uvec2(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)) * u_texelDimensions;<font></font>
	vec2 gatherCoords2 = (baseTexelCoords + uvec2(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>)) * u_texelDimensions;<font></font>
	vec2 gatherCoords3 = (baseTexelCoords + uvec2(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>)) * u_texelDimensions;<font></font>
	vec2 gatherCoords4 = (baseTexelCoords + uvec2(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>)) * u_texelDimensions;<font></font>
<font></font>
	vec4 gatheredTexelValues1 = textureGather(u_inputDepthBuffer, gatherCoords1);<font></font>
	vec4 gatheredTexelValues2 = textureGather(u_inputDepthBuffer, gatherCoords2);<font></font>
	vec4 gatheredTexelValues3 = textureGather(u_inputDepthBuffer, gatherCoords3);<font></font>
	vec4 gatheredTexelValues4 = textureGather(u_inputDepthBuffer, gatherCoords4);<font></font>
<font></font>
	<span class="hljs-comment">// Now find the min across the 4x4 region fetched, and apply that to the workgroup min </span>
    <span class="hljs-comment">// using atomicMin. </span><font></font>
	vec4 gatheredTexelMins = min(min(gatheredTexelValues1, gatheredTexelValues2),<font></font>
                                 min(gatheredTexelValues3, gatheredTexelValues4));<font></font>
	<span class="hljs-keyword">float</span> finalMin = min(min(gatheredTexelMins.x, gatheredTexelMins.y),<font></font>
                         min(gatheredTexelMins.z, gatheredTexelMins.w));<font></font>
	atomicMin(s_workgroupMinDepthEncodedAsUint, floatBitsToUint(finalMin));<font></font>
<font></font>
	memoryBarrierShared();<font></font>
	barrier();<font></font>
<font></font>
    <span class="hljs-comment">// Thread 0 writes workgroup-wide min to image. </span>
	<span class="hljs-keyword">if</span> (gl_LocalInvocationIndex == <span class="hljs-number">0</span>) {
		<span class="hljs-keyword">float</span> workgroupMinDepth = uintBitsToFloat(s_workgroupMinDepthEncodedAsUint);<font></font>
<font></font>
		imageStore(u_outputDownsampledMinDepthBufferImage,<font></font>
		           ivec2(gl_WorkGroupID.xy),<font></font>
                   <span class="hljs-comment">// imageStore can only be passed vec4, but only a float is stored. </span><font></font>
				   vec4(workgroupMinDepth));<font></font>
	}<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performa</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menggunakan shader komputasi di atas untuk memproses buffer kedalaman resolusi penuh dengan dimensi yang sama yang digunakan untuk menghasilkan rantai mip penuh (buffer 1648x1776 untuk setiap mata). </font><font style="vertical-align: inherit;">Ini berjalan dalam 0,12 ms pada NVIDIA GTX 980 dan 0,08 ms pada AMD R9 290. Jika kita bandingkan dengan waktu pembuatan hanya tingkat mip 1–4 (0,22 ms pada NVIDIA, 0,25 ms AMD), maka Solusi dengan komputasi shader ternyata </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menjadi 87% lebih cepat dengan GPU NVIDIA</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">197% lebih cepat dari GPU AMD</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara absolut, akselerasi tidak begitu besar, tetapi setiap 0,1 ms penting, terutama di VR :)</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id494364/index.html">GDPR: Persetujuan untuk pemrosesan data pribadi</a></li>
<li><a href="../id494366/index.html">Mitaps online untuk seluruh minggu, mulai dari 27 Maret (untuk back, mobile, QA, PM, dan semuanya)</a></li>
<li><a href="../id494370/index.html">Arsitektur Bersih melalui mata pengembang Python</a></li>
<li><a href="../id494372/index.html">Perangkat Lunak Verifikasi Semua-Rusia - Tampilan Dalam</a></li>
<li><a href="../id494374/index.html">Bus listrik dan baterainya: apa itu lithium titanate? (Bagian 1)</a></li>
<li><a href="../id494380/index.html">Pengantar Manajemen Produk Strategis</a></li>
<li><a href="../id494384/index.html">Survei fungsional</a></li>
<li><a href="../id494390/index.html">Pencetakan 3D memangkas biaya penyetelan otomatis hingga setengahnya</a></li>
<li><a href="../id494398/index.html">Playstation Doom Polygons</a></li>
<li><a href="../id494400/index.html">Coronavirus dan Internet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>