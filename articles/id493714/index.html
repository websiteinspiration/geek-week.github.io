<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕵🏻 🤾🏿 🤝 Lembar Cheat Keamanan: Nodejs 🦎 👩🏼‍🚀 👩🏻‍⚖️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sudah banyak yang dikatakan tentang popularitas NodeJS. Peningkatan jumlah aplikasi jelas - NodeJS cukup mudah dipelajari, memiliki sejumlah besar per...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Lembar Cheat Keamanan: Nodejs</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/acribia/blog/493714/"><img src="https://habrastorage.org/webt/bs/ml/lo/bsmllozt2li3jmn_6ec8vy4krdq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sudah banyak yang dikatakan tentang popularitas NodeJS. </font><font style="vertical-align: inherit;">Peningkatan jumlah aplikasi jelas - NodeJS cukup mudah dipelajari, memiliki sejumlah besar perpustakaan, serta ekosistem yang berkembang secara dinamis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami telah menyiapkan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rekomendasi untuk pengembang NodeJS</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> berdasarkan OWASP Cheat Sheets untuk membantu Anda mengantisipasi masalah keamanan saat mengembangkan aplikasi. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rekomendasi keamanan untuk aplikasi NodeJS dapat dibagi ke dalam kategori berikut:</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keamanan selama pengembangan aplikasi;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keamanan server;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keamanan platform;</font></font></li>
</ul><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keamanan Pengembangan Aplikasi</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menghindari panggilan balik</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
menggunakan fungsi panggilan balik (callback) adalah salah satu kekuatan terbesar NodeJS, namun ketika bersarang panggilan balik, Anda dapat dengan mudah lupa untuk menangani kesalahan di salah satu fungsi. </font><font style="vertical-align: inherit;">Salah satu cara untuk menghindari panggilan balik neraka adalah dengan menggunakan janji. </font><font style="vertical-align: inherit;">Bahkan jika modul yang Anda gunakan tidak mendukung bekerja dengan janji-janji, Anda selalu dapat menggunakan Promise.promisifyAll (). </font><font style="vertical-align: inherit;">Namun meski menggunakan janji, perlu diperhatikan untuk bersarang. </font><font style="vertical-align: inherit;">Untuk benar-benar menghindari kesalahan panggilan balik neraka, patuhi rantai janji “datar”. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh panggilan balik neraka:</font></font></i><br>
<br>
<pre><code class="java hljs"><span class="hljs-function">function <span class="hljs-title">func1</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">500</span>);<font></font>
}<font></font>
<span class="hljs-function">function <span class="hljs-title">func2</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">100</span>);<font></font>
}<font></font>
<span class="hljs-function">function <span class="hljs-title">func3</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">900</span>);<font></font>
}<font></font>
<span class="hljs-function">function <span class="hljs-title">func4</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">3000</span>);<font></font>
}<font></font>
<font></font>
func1(<span class="hljs-string">"input1"</span>, function(err, result1){
   <span class="hljs-keyword">if</span>(err){
      <span class="hljs-comment">// error operations</span><font></font>
   }<font></font>
   <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">//some operations</span>
      func2(<span class="hljs-string">"input2"</span>, function(err, result2){
         <span class="hljs-keyword">if</span>(err){
            <span class="hljs-comment">//error operations</span><font></font>
         }<font></font>
         <span class="hljs-keyword">else</span>{
            <span class="hljs-comment">//some operations</span>
            func3(<span class="hljs-string">"input3"</span>, function(err, result3){
               <span class="hljs-keyword">if</span>(err){
                  <span class="hljs-comment">//error operations</span><font></font>
               }<font></font>
               <span class="hljs-keyword">else</span>{
                  <span class="hljs-comment">// some operations</span>
                  func4(<span class="hljs-string">"input 4"</span>, function(err, result4){
                     <span class="hljs-keyword">if</span>(err){
                        <span class="hljs-comment">// error operations</span><font></font>
                     }<font></font>
                     <span class="hljs-keyword">else</span> {
                        <span class="hljs-comment">// some operations</span><font></font>
                     }<font></font>
                  });<font></font>
               }<font></font>
            });<font></font>
         }<font></font>
      });<font></font>
   }<font></font>
});<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode yang sama menggunakan janji rantai datar:</font></font></i><br>
<br>
<pre><code class="java hljs"><span class="hljs-function">function <span class="hljs-title">func1</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">500</span>);<font></font>
}<font></font>
<span class="hljs-function">function <span class="hljs-title">func2</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">100</span>);<font></font>
}<font></font>
<span class="hljs-function">function <span class="hljs-title">func3</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">900</span>);<font></font>
}<font></font>
<span class="hljs-function">function <span class="hljs-title">func4</span><span class="hljs-params">(name, callback)</span> </span>{<font></font>
   setTimeout(function() {<font></font>
      <span class="hljs-comment">// operations</span>
   }, <span class="hljs-number">3000</span>);<font></font>
}<font></font>
<font></font>
func1(<span class="hljs-string">"input1"</span>)<font></font>
   .then(function (result){<font></font>
      <span class="hljs-keyword">return</span> func2(<span class="hljs-string">"input2"</span>);<font></font>
   })<font></font>
   .then(function (result){<font></font>
      <span class="hljs-keyword">return</span> func3(<span class="hljs-string">"input3"</span>);<font></font>
   })<font></font>
   .then(function (result){<font></font>
      <span class="hljs-keyword">return</span> func4(<span class="hljs-string">"input4"</span>);<font></font>
   })<font></font>
   .<span class="hljs-keyword">catch</span>(function (error) {
      <span class="hljs-comment">// error operations</span><font></font>
   });<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Batasi ukuran permintaan.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Mem-parsing badan </font><b><font style="vertical-align: inherit;">permintaan</font></b><font style="vertical-align: inherit;"> bisa menjadi sumber daya yang cukup intensif. Jika Anda tidak membatasi ukuran permintaan, penyerang akan dapat mengirim permintaan yang cukup besar yang dapat mengisi semua ruang disk atau menghabiskan semua sumber daya server, tetapi pada saat yang sama, membatasi ukuran permintaan untuk semua kasus mungkin salah, karena ada permintaan, seperti mengunduh file. Karena itu, disarankan untuk menetapkan batas untuk berbagai jenis konten. Misalnya, menggunakan kerangka kerja ekspres, ini dapat diimplementasikan sebagai berikut:</font></font><br>
<br>
<pre><code class="java hljs">app.use(express.urlencoded({ limit: <span class="hljs-string">"1kb"</span> }));<font></font>
app.use(express.json({ limit: <span class="hljs-string">"1kb"</span> }));<font></font>
app.use(express.multipart({ limit:<span class="hljs-string">"10mb"</span> }));
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Perlu dicatat bahwa penyerang dapat mengubah jenis konten permintaan dan menghindari batasan, oleh karena itu, perlu untuk memeriksa apakah konten permintaan cocok dengan jenis konten yang ditentukan dalam header permintaan. </font><font style="vertical-align: inherit;">Jika memeriksa tipe konten memengaruhi kinerja, Anda hanya dapat memeriksa tipe atau kueri tertentu yang lebih besar dari ukuran tertentu. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jangan memblokir loop acara</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
. Komponen penting dari bahasa ini adalah loop acara, yang hanya memungkinkan Anda untuk mengubah konteks eksekusi tanpa menunggu operasi selesai. </font><font style="vertical-align: inherit;">Namun, ada operasi pemblokiran yang penyelesaiannya NodeJS harus menunggu sebelum melanjutkan dengan kode. </font><font style="vertical-align: inherit;">Misalnya, sebagian besar metode sinkron memblokir:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> fs = require(<span class="hljs-string">'fs'</span>);<font></font>
fs.unlinkSync(<span class="hljs-string">'/file.txt'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Disarankan untuk melakukan operasi seperti itu secara serempak:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> fs = require(<span class="hljs-string">'fs'</span>);<font></font>
fs.unlink(<span class="hljs-string">'/file.txt'</span>, (err) =&gt; {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Pada saat yang sama, jangan lupa bahwa kode yang berdiri setelah panggilan asinkron akan dieksekusi tanpa menunggu selesainya operasi sebelumnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalnya, dalam kode di bawah ini, file akan dihapus sebelum dibaca, yang dapat menyebabkan kondisi balapan.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> fs = require(<span class="hljs-string">'fs'</span>);<font></font>
fs.readFile(<span class="hljs-string">'/file.txt'</span>, (err, data) =&gt; {
  <span class="hljs-comment">// perform actions on file content</span><font></font>
});<font></font>
fs.unlinkSync(<span class="hljs-string">'/file.txt'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Untuk menghindari ini, Anda dapat menulis semua operasi dalam fungsi yang tidak menghalangi:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> fs = require(<span class="hljs-string">'fs'</span>);<font></font>
fs.readFile(<span class="hljs-string">'/file.txt'</span>, (err, data) =&gt; {
  <span class="hljs-comment">// perform actions on file content</span>
  fs.unlink(<span class="hljs-string">'/file.txt'</span>, (err) =&gt; {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<font></font>
  });<font></font>
});<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Periksa bidang input.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Memeriksa bidang </font><b><font style="vertical-align: inherit;">input</font></b><font style="vertical-align: inherit;"> adalah bagian penting dari keamanan aplikasi apa pun. Kesalahan validasi dapat menyebabkan aplikasi Anda menjadi rentan segera terhadap berbagai jenis serangan: injeksi sql, xss, injeksi perintah, dan lainnya. Untuk menyederhanakan validasi formulir, Anda dapat menggunakan paket validator, mongo-express-sanitize. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escape data pengguna</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Salah satu aturan yang akan membantu Anda melindungi diri dari serangan xss adalah untuk melindungi data pengguna. Anda dapat menggunakan perpustakaan escape-html atau node-esapi untuk ini. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simpan log</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Selain itu, ini akan membantu dalam kesalahan debugging, logging dapat digunakan untuk menanggapi insiden. Anda dapat membaca lebih lanjut tentang perlunya login di </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini.</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Salah satu paket logging NodeJS yang paling populer adalah Winston dan Bunyan. </font><font style="vertical-align: inherit;">Contoh di bawah ini menunjukkan cara menggunakan Winston untuk membuat log ke konsol dan file:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> logger = <span class="hljs-keyword">new</span> (Winston.Logger) ({<font></font>
    transports: [<font></font>
        <span class="hljs-keyword">new</span> (winston.transports.Console)(),
        <span class="hljs-keyword">new</span> (winston.transports.File)({ filename: <span class="hljs-string">'application.log'</span> })<font></font>
    ],<font></font>
    level: <span class="hljs-string">'verbose'</span><font></font>
});<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengontrol siklus peristiwa</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Jika server Anda berada dalam kondisi lalu lintas jaringan yang intensif, pengguna mungkin mengalami kesulitan dengan ketersediaan layanan Anda. </font><font style="vertical-align: inherit;">Ini pada dasarnya adalah serangan DoS. </font><font style="vertical-align: inherit;">Dalam hal ini, Anda dapat melacak waktu respons dan, jika melebihi waktu yang ditentukan, mengirim pesan ke 503 Server Terlalu Sibuk. </font><font style="vertical-align: inherit;">Modul toobusy-js dapat membantu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh menggunakan modul:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> toobusy = require(<span class="hljs-string">'toobusy-js'</span>);
<span class="hljs-keyword">var</span> express = require(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">var</span> app = express();<font></font>
app.use(function(req, res, next) {<font></font>
    <span class="hljs-keyword">if</span> (toobusy()) {
        <span class="hljs-comment">// log if you see necessary</span>
        res.send(<span class="hljs-number">503</span>, <span class="hljs-string">"Server Too Busy"</span>);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
    next();<font></font>
    }<font></font>
});<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ambil tindakan pencegahan terhadap kekuatan brutal</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
, sekali lagi, modul datang untuk menyelamatkan. </font><font style="vertical-align: inherit;">Misalnya, express-brute atau express-bouncer. </font><font style="vertical-align: inherit;">Contoh penggunaan:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> bouncer = require(<span class="hljs-string">'express-bouncer'</span>);<font></font>
bouncer.whitelist.push(<span class="hljs-string">'127.0.0.1'</span>); <span class="hljs-comment">// whitelist an IP address</span>
<span class="hljs-comment">// give a custom error message</span><font></font>
bouncer.blocked = function (req, res, next, remaining) {<font></font>
    res.send(<span class="hljs-number">429</span>, <span class="hljs-string">"Too many requests have been made. Please wait "</span> + remaining/<span class="hljs-number">1000</span> + <span class="hljs-string">" seconds."</span>);<font></font>
};<font></font>
<span class="hljs-comment">// route to protect</span>
app.post(<span class="hljs-string">"/login"</span>, bouncer.block, function(req, res) {
    <span class="hljs-keyword">if</span> (LoginFailed){  }
    <span class="hljs-keyword">else</span> {<font></font>
        bouncer.reset( req );<font></font>
    }<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan CAPTCHA adalah penanggulangan brute force umum lainnya. </font><font style="vertical-align: inherit;">Modul yang sering digunakan untuk membantu mengimplementasikan CAPTCHA adalah svg-captcha. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menggunakan Token CSRF</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Salah satu cara yang paling dapat diandalkan untuk melindungi terhadap serangan CSRF adalah dengan menggunakan token CSRF. </font><font style="vertical-align: inherit;">Token harus dibuat dengan entropi tinggi, diperiksa ketat dan diikat ke sesi pengguna. </font><font style="vertical-align: inherit;">Untuk memastikan pengoperasian token CSRF, Anda dapat menggunakan modul csurf. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh penggunaan:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> csrf = require(<span class="hljs-string">'csurf'</span>);<font></font>
csrfProtection = csrf({ cookie: <span class="hljs-keyword">true</span> });<font></font>
app.get(<span class="hljs-string">'/form'</span>, csrfProtection, function(req, res) {<font></font>
    res.render(<span class="hljs-string">'send'</span>, { csrfToken: req.csrfToken() })<font></font>
})<font></font>
app.post(<span class="hljs-string">'/process'</span>, parseForm, csrfProtection, function(req, res) {<font></font>
    res.send(<span class="hljs-string">'data is being processed'</span>);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jangan lupa menambahkan token ke bidang tersembunyi di halaman:</font></font><br>
<br>
<pre><code class="plaintext hljs">&lt;input type="hidden" name="_csrf" value="{{ csrfToken }}"&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat membaca lebih lanjut tentang token CSRF di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hapus rute yang tidak perlu.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Aplikasi web tidak boleh berisi halaman yang tidak digunakan oleh pengguna, karena ini dapat meningkatkan permukaan serangan. Karena itu, semua rute API yang tidak digunakan harus dinonaktifkan. Anda terutama harus memperhatikan pertanyaan ini jika Anda menggunakan kerangka kerja Sails atau Feathers, karena mereka secara otomatis menghasilkan titik akhir API. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lindungi diri Anda dari HPP (Polusi Parameter HTTP)</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Secara default, express menambahkan semua parameter dari permintaan ke array. OWASP merekomendasikan menggunakan modul hpp, yang mengabaikan semua nilai parameter dari req.query dan / atau req.body dan hanya memilih nilai terakhir dari yang duplikat.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> hpp = require(<span class="hljs-string">'hpp'</span>);<font></font>
app.use(hpp());<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pantau nilai yang dikembalikan.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Misalnya, tabel pengguna dapat menyimpan data penting: kata sandi, alamat email, tanggal lahir, dll. </font><font style="vertical-align: inherit;">Karena itu, penting untuk hanya mengembalikan data yang diperlukan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contohnya:</font></font><br>
<br>
<pre><code class="java hljs"> <span class="hljs-keyword">exports</span>.sanitizeUser = function(user) {
  <span class="hljs-keyword">return</span> {<font></font>
    id: user.id,<font></font>
    username: user.username,<font></font>
    fullName: user.fullName<font></font>
  };<font></font>
};<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gunakan deskriptor</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Gunakan deskriptor untuk menggambarkan perilaku properti untuk berbagai operasi: dapat ditulis - apakah mungkin untuk mengubah nilai properti, dapat dihitung - apakah mungkin untuk menggunakan properti dalam for..in loop, dapat dikonfigurasi - apakah mungkin untuk menimpa properti. </font><font style="vertical-align: inherit;">Dianjurkan untuk memperhatikan properti yang terdaftar, karena ketika mendefinisikan properti suatu objek, semua atribut ini disetel ke true secara default. </font><font style="vertical-align: inherit;">Anda dapat mengubah nilai properti sebagai berikut:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> o = {};<font></font>
Object.defineProperty(o, <span class="hljs-string">"a"</span>, {<font></font>
    writable: <span class="hljs-keyword">true</span>,<font></font>
    enumerable: <span class="hljs-keyword">true</span>,<font></font>
    configurable: <span class="hljs-keyword">true</span>,<font></font>
    value: <span class="hljs-string">"A"</span><font></font>
});<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gunakan ACL</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Acl dapat membantu membedakan akses data berdasarkan peran. </font><font style="vertical-align: inherit;">Misalnya, menambahkan izin terlihat seperti ini:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-comment">// guest is allowed to view blogs</span>
acl.allow(<span class="hljs-string">'guest'</span>, <span class="hljs-string">'blogs'</span>, <span class="hljs-string">'view'</span>)
<span class="hljs-comment">// allow function accepts arrays as any parameter</span>
acl.allow(<span class="hljs-string">'member'</span>, <span class="hljs-string">'blogs'</span>, [<span class="hljs-string">'edit'</span>, <span class="hljs-string">'view'</span>, <span class="hljs-string">'delete'</span>])
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tangkap uncaughtException</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Secara default, jika ada pengecualian yang tidak tertangkap, NodeJS akan membuang jejak stack saat ini dan mengakhiri utas eksekusi. </font><font style="vertical-align: inherit;">Namun, NodeJS memungkinkan Anda untuk menyesuaikan perilaku ini. </font><font style="vertical-align: inherit;">Jika ada pengecualian yang tidak tertangkap, peristiwa uncaughtException dimunculkan, yang dapat ditangkap menggunakan objek proses:</font></font><br>
<br>
<pre><code class="java hljs">process.on(<span class="hljs-string">"uncaughtException"</span>, function(err) {
    <span class="hljs-comment">// clean up allocated resources</span>
    <span class="hljs-comment">// log necessary error details to log files</span>
    process.exit(); <span class="hljs-comment">// exit the process to avoid unknown state</span><font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perlu diingat bahwa ketika terjadi uncaughtException, perlu untuk menghapus semua sumber daya yang dialokasikan (misalnya, deskriptor file dan penangan) sebelum menyelesaikan proses Z untuk menghindari kesalahan yang tidak terduga. </font><font style="vertical-align: inherit;">Sangat tidak disarankan bahwa program terus berjalan jika uncaughtException terjadi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juga, saat menampilkan pesan kesalahan, pengguna tidak boleh mengungkapkan informasi kesalahan terperinci, seperti tumpukan jejak.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keamanan server</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengatur flag untuk header ketika bekerja dengan cookie.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ada beberapa flag yang dapat membantu melindungi terhadap serangan seperti xss dan csrf: httpOnly, yang mencegah akses ke cookie melalui javascript; </font><font style="vertical-align: inherit;">Aman - memungkinkan pengiriman cookie hanya melalui HTTPS dan SameSite, yang menentukan kemampuan untuk mentransfer cookie ke sumber daya pihak ketiga. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh penggunaan:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> session = require(<span class="hljs-string">'express-session'</span>);<font></font>
app.use(session({<font></font>
    secret: <span class="hljs-string">'your-secret-key'</span>,<font></font>
    key: <span class="hljs-string">'cookieName'</span>,<font></font>
    cookie: { secure: <span class="hljs-keyword">true</span>, httpOnly: <span class="hljs-keyword">true</span>, path: <span class="hljs-string">'/user'</span>, sameSite: <span class="hljs-keyword">true</span>}<font></font>
}));<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menyetel tajuk HTTP untuk keamanan</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Berikut ini tajuk dan contoh cara menghubungkannya untuk membantu Anda melindungi diri dari sejumlah serangan umum. </font><font style="vertical-align: inherit;">Header diatur menggunakan modul helm </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• Strict-Transport-Security: HTTP Strict Transport Security (HSTS) memberi tahu browser bahwa aplikasi hanya dapat diakses melalui HTTPS</font></font><br>
<br>
<pre><code class="java hljs">app.use(helmet.hsts()); <span class="hljs-comment">// default configuration</span>
app.use(helmet.hsts(<span class="hljs-string">"&lt;max-age&gt;"</span>, <span class="hljs-string">"&lt;includeSubdomains&gt;"</span>)); <span class="hljs-comment">// custom configuration</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• X-Frame-Options: menentukan apakah halaman dapat digunakan dalam bingkai, iframe, embed atau objek</font></font><br>
<br>
<pre><code class="java hljs">app.use(hemlet.xframe()); <span class="hljs-comment">// default behavior (DENY)</span>
helmet.xframe(<span class="hljs-string">'sameorigin'</span>); <span class="hljs-comment">// SAMEORIGIN</span>
helmet.xframe(<span class="hljs-string">'allow-from'</span>, <span class="hljs-string">'http://alloweduri.com'</span>); <span class="hljs-comment">//ALLOW-FROM uri</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• X-XSS-Protection: memungkinkan browser untuk berhenti memuat halaman jika mendeteksi serangan XSS yang dipantulkan.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> xssFilter = require(<span class="hljs-string">'x-xss-protection'</span>);<font></font>
app.use(xssFilter());<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• X-Content-Type-Options: digunakan untuk mencegah serangan menggunakan tipe MIME</font></font><br>
<br>
<pre><code class="java hljs">app.use(helmet.noSniff());
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• Kebijakan Konten-Keamanan-: Mencegah serangan seperti XSS dan serangan injeksi data</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> csp = require(<span class="hljs-string">'helmet-csp'</span>)<font></font>
app.use(csp({<font></font>
   directives: {<font></font>
       defaultSrc: [<span class="hljs-string">"'self'"</span>],  <span class="hljs-comment">// default value for all directives that are absent</span>
       scriptSrc: [<span class="hljs-string">"'self'"</span>],   <span class="hljs-comment">// helps prevent XSS attacks</span>
       frameAncestors: [<span class="hljs-string">"'none'"</span>],  <span class="hljs-comment">// helps prevent Clickjacking attacks</span>
       imgSrc: [<span class="hljs-string">"'self'"</span>, <span class="hljs-string">"'http://imgexample.com'"</span>],<font></font>
       styleSrc: [<span class="hljs-string">"'none'"</span>]<font></font>
    }<font></font>
}))<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• Kontrol Cache dan Pragma: untuk mengelola caching, terutama tajuk ini dapat berguna untuk halaman yang berisi data sensitif. </font><font style="vertical-align: inherit;">Namun, ingat bahwa menonaktifkan caching di semua halaman dapat memengaruhi kinerja.</font></font><br>
<br>
<pre><code class="java hljs">app.use(helmet.noCache());
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• Opsi X-Unduh: header mencegah Inter Explorer dari menjalankan file yang diunduh</font></font><br>
<br>
<pre><code class="java hljs">app.use(helmet.ieNoOpen());
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• Expect-CT: Certificate Transparansi - mekanisme yang dibuat untuk menyelesaikan beberapa masalah dengan infrastruktur sertifikat SSL, header ini memberi tahu browser tentang perlunya verifikasi sertifikat tambahan dalam log CT</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> expectCt = require(<span class="hljs-string">'expect-ct'</span>);<font></font>
app.use(expectCt({ maxAge: <span class="hljs-number">123</span> }));<font></font>
app.use(expectCt({ enforce: <span class="hljs-keyword">true</span>, maxAge: <span class="hljs-number">123</span> }));<font></font>
app.use(expectCt({ enforce: <span class="hljs-keyword">true</span>, maxAge: <span class="hljs-number">123</span>, reportUri: <span class="hljs-string">'http://example.com'</span>}));
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• X-Powered-By: Header opsional yang digunakan untuk menunjukkan teknologi yang digunakan di server. </font><font style="vertical-align: inherit;">Anda dapat menyembunyikan tajuk ini sebagai berikut:</font></font><br>
<br>
<pre><code class="java hljs">app.use(helmet.hidePoweredBy());
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Selain itu, Anda dapat mengubah nilai untuk menyembunyikan informasi nyata tentang teknologi yang Anda gunakan:</font></font><br>
<br>
<pre><code class="java hljs">app.use(helmet.hidePoweredBy({ setTo: <span class="hljs-string">'PHP 4.2.0'</span> }));
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keamanan platform</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perbarui paket Anda</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Keamanan aplikasi Anda bergantung pada keamanan paket yang Anda gunakan, jadi penting untuk menggunakan versi terbaru paket. Untuk memastikan bahwa paket yang Anda gunakan tidak mengandung kerentanan yang diketahui, Anda dapat menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">daftar OWASP khusus</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Anda juga dapat menggunakan pustaka yang memeriksa paket untuk kerentanan yang diketahui Retire.js. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jangan gunakan fungsi yang tidak aman.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada beberapa fungsi yang direkomendasikan untuk dibuang jika memungkinkan. Di antara fungsi-fungsi ini adalah eval (), yang mengeksekusi string yang diambil sebagai argumen. Dalam kombinasi dengan input pengguna, menggunakan fungsi ini dapat menyebabkan kerentanan dalam eksekusi kode jarak jauh, karena untuk alasan yang sama, menggunakan child_process.exec juga tidak aman, karena fungsi meneruskan argumen yang diterima ke bin / sh. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, ada sejumlah modul yang harus Anda gunakan dengan hati-hati. Misalnya, modul fs untuk bekerja dengan file. Jika dengan cara tertentu input pengguna yang dihasilkan dilewatkan ke fungsi, maka aplikasi Anda mungkin menjadi rentan untuk memasukkan file lokal dan direktori traversal.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modul vm, yang menyediakan API untuk mengkompilasi dan menjalankan kode pada mesin virtual V8, harus digunakan hanya di kotak pasir. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di sini</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anda dapat membiasakan diri dengan fungsi-fungsi lain yang dapat membuat aplikasi Anda tidak aman. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hati-hati menggunakan ekspresi reguler. Ekspresi</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
reguler dapat ditulis sehingga Anda dapat mencapai situasi di mana ekspresi akan tumbuh secara eksponensial, yang dapat menyebabkan penolakan layanan. Serangan semacam itu disebut ReDoS. Ada beberapa alat untuk memeriksa apakah ekspresi reguler aman, salah satunya adalah vuln-regex-detector. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jalankan linter secara berkala</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selama pengembangan, sulit untuk mengingat semua rekomendasi keselamatan, dan ketika menyangkut pengembangan tim, tidaklah mudah untuk mencapai kepatuhan dengan aturan oleh semua anggota tim. Untuk tujuan tersebut, ada alat untuk analisis keamanan statis. Alat semacam itu, tanpa mengeksekusi kode Anda, mencari kerentanan di dalamnya. Selain itu, linter memungkinkan Anda untuk menambahkan aturan khusus untuk menemukan tempat dalam kode yang mungkin rentan. Linter yang paling umum digunakan adalah ESLint dan JSHint. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gunakan mode ketat.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Javascript memiliki sejumlah fungsi tidak aman dan usang yang tidak boleh digunakan. Untuk mengecualikan kemungkinan menggunakan fungsi-fungsi ini, mode ketat juga disediakan. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Patuhi prinsip keselamatan umum</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rekomendasi tersebut menjelaskan fokus pada NodeJS, tetapi jangan lupa tentang prinsip keamanan umum yang harus diperhatikan terlepas dari platform yang digunakan.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id493702/index.html">Transisi besar-besaran ke pekerjaan jarak jauh: masalah teknis dan ancaman terhadap keamanan</a></li>
<li><a href="../id493704/index.html">Menggunakan TypeScript dalam JavaScript tanpa menulis TypeScript</a></li>
<li><a href="../id493706/index.html">Ketahui musuh Anda: buat backdoor Node.js</a></li>
<li><a href="../id493708/index.html">Anatomi kluster Kubernetes rumah saya</a></li>
<li><a href="../id493712/index.html">Fitur TypeScript baru untuk meningkatkan kegunaan</a></li>
<li><a href="../id493716/index.html">Ketik inferensi dengan TypeScript menggunakan konstruk sebagai const dan kata kunci inferior</a></li>
<li><a href="../id493718/index.html">Diskusi: utilitas standar UNIX yang sedikit digunakan dan saat ini digunakan</a></li>
<li><a href="../id493720/index.html">Badai yang sempurna: bagaimana teknologi mengubah industri layanan makanan</a></li>
<li><a href="../id493724/index.html">RPA | Proses robotisasi melalui mata seorang analis</a></li>
<li><a href="../id493726/index.html">Kompleks Deteksi Merokok melalui foto atau video berdasarkan Intel NUC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>