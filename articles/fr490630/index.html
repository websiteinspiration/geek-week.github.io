<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üññüèª üë®üèº‚Äç‚öñÔ∏è üßëüèæ‚Äçü§ù‚Äçüßëüèª Chargement de tableaux NumPy √† partir du disque: comparaison de memmap () et Zarr / HDF5 üèôÔ∏è üÜô ‚ô®Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Si votre tableau NumPy est trop grand pour tenir dans la RAM, vous pouvez le traiter en le divisant en fragments . Vous pouvez le faire en mode transp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Chargement de tableaux NumPy √† partir du disque: comparaison de memmap () et Zarr / HDF5</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/490630/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si votre tableau NumPy est trop grand pour tenir dans la RAM, vous pouvez le traiter en le divisant en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fragments</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Vous pouvez le faire en mode transparent ou explicitement en chargeant ces fragments √† partir du disque un par un. </font><font style="vertical-align: inherit;">
Dans cette situation, vous pouvez recourir √† deux classes d'outils:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/2n/8r/ck/2n8rckf95tnhx1yrkvvlfy2cf_4.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La m√©thode NumPy </font></font><code>memmap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, un m√©canisme transparent qui vous permet de percevoir un fichier situ√© sur un disque comme s'il √©tait enti√®rement en m√©moire.&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formats de stockage de donn√©es Zarr et HDF5 similaires les uns aux autres, qui permettent, si n√©cessaire, de charger √† partir du disque et d'enregistrer des fragments compress√©s de la matrice sur disque.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chacune de ces m√©thodes a ses propres forces et faiblesses.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le mat√©riel, dont nous publions la traduction aujourd'hui, est consacr√© √† l'analyse des caract√©ristiques de ces m√©thodes de travail avec les donn√©es, et √† l'histoire des situations dans lesquelles elles peuvent √™tre utiles. </font><font style="vertical-align: inherit;">En particulier, une attention particuli√®re sera accord√©e aux formats de donn√©es qui sont optimis√©s pour effectuer des calculs et qui ne sont pas n√©cessairement con√ßus pour transf√©rer ces donn√©es √† d'autres programmeurs.</font></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que se passe-t-il lors de la lecture de donn√©es √† partir d'un disque ou de l'√©criture de donn√©es sur un disque?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsqu'un fichier est lu sur le disque pour la premi√®re fois, le syst√®me d'exploitation ne copie pas simplement les donn√©es dans la m√©moire de processus. </font><font style="vertical-align: inherit;">Tout d'abord, il copie ces donn√©es dans sa m√©moire, en en stockant une copie dans le soi-disant ¬´cache tampon¬ª. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quelle est l'utilit√© ici? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le fait est que le syst√®me d'exploitation stocke les donn√©es dans le cache au cas o√π vous auriez besoin de relire les m√™mes donn√©es √† partir du m√™me fichier.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8c5/896/e36/8c5896e36f5312d8e00b92103b7d037f.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si les donn√©es sont relues, elles entrent dans la m√©moire du programme non pas √† partir du disque, mais √† partir de la RAM, ce qui est plus rapide de plusieurs ordres de grandeur.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cf3/382/7a3/cf33827a346960cbcc33f54835b9bce3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si la m√©moire occup√©e par le cache est n√©cessaire pour autre chose, le cache sera automatiquement vid√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque les donn√©es sont √©crites sur le disque, elles se d√©placent dans la direction oppos√©e. </font><font style="vertical-align: inherit;">Au d√©but, ils sont √©crits uniquement dans le cache tampon. </font><font style="vertical-align: inherit;">Cela signifie que les op√©rations d'√©criture sont g√©n√©ralement tr√®s rapides, car le programme n'a pas besoin de se concentrer sur un disque lent. </font><font style="vertical-align: inherit;">Elle, pendant l'enregistrement, n'a besoin de travailler qu'avec de la RAM.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ed3/6be/592/ed36be592685ca4f42954971e000eb89.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, les donn√©es sont vid√©es sur le disque √† partir du cache.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ffc/0bb/0fc/ffc0bb0fc60c346671dfba89e8c78c1c.png"></div><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation d'un tableau √† l'aide de memmap ()</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans notre cas, </font></font><code>memmap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cela nous permet de percevoir un fichier sur disque comme s'il s'agissait d'un tableau stock√© en m√©moire. </font><font style="vertical-align: inherit;">Le syst√®me d'exploitation, transparent pour le programme, effectue des op√©rations de lecture / √©criture, acc√©dant soit au cache tampon soit au disque dur, selon que les donn√©es demand√©es sont mises en cache ou non en m√©moire. </font><font style="vertical-align: inherit;">Un algorithme comme celui-ci est ex√©cut√© ici:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les donn√©es sont-elles dans le cache? </font><font style="vertical-align: inherit;">Si c'est le cas - g√©nial - vous pouvez les contacter directement.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les donn√©es sont-elles sur le disque? </font><font style="vertical-align: inherit;">Leur acc√®s sera plus lent, mais vous n'aurez pas √† vous en soucier, ils seront charg√©s en mode transparent.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme avantage suppl√©mentaire, </font></font><code>memmap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">on peut noter que dans la plupart des cas, le cache de tampon pour le fichier sera int√©gr√© dans la m√©moire du programme. </font><font style="vertical-align: inherit;">Cela signifie que le syst√®me n'a pas √† conserver une copie suppl√©mentaire des donn√©es dans la m√©moire du programme en dehors de la m√©moire tampon.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/47e/922/86e/47e92286e0761142e8f411c84d188e76.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La m√©thode </font></font><code>memmap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est int√©gr√©e √† NumPy:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<font></font>
array = np.memmap(<span class="hljs-string">"mydata/myarray.arr"</span>, mode=<span class="hljs-string">"r"</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dtype=np.int16, shape=(<span class="hljs-number">1024</span>, <span class="hljs-number">1024</span>))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ex√©cutez ce code et vous aurez √† votre disposition un tableau dont le travail sera compl√®tement transparent pour le programme, que le travail soit effectu√© avec le cache de tampon ou avec le disque dur.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limitations de Memmap ()</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien que dans certaines situations, elle </font></font><code>memmap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puisse se montrer assez bien, cette m√©thode a √©galement des limites:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les donn√©es doivent √™tre stock√©es dans le syst√®me de fichiers. </font><font style="vertical-align: inherit;">Les donn√©es ne peuvent pas √™tre t√©l√©charg√©es √† partir du stockage binaire comme AWS S3.</font></font></li>
<li>        ,      .   ,       . ,           ,  ,      .</li>
<li>   N-        ,      ,        ,        .         .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Expliquons le dernier point. </font><font style="vertical-align: inherit;">Imaginez que nous ayons un tableau √† deux dimensions contenant des entiers 32 bits (4 octets). </font><font style="vertical-align: inherit;">4096 octets sont lus par disque. </font><font style="vertical-align: inherit;">Si vous lisez des donn√©es situ√©es dans un fichier de mani√®re s√©quentielle √† partir d'un disque (par exemple, ces donn√©es sont dans les lignes d'un tableau), apr√®s chaque op√©ration de lecture, nous aurons 1024 entiers. </font><font style="vertical-align: inherit;">Mais si vous lisez des donn√©es dont l'emplacement dans le fichier ne correspond pas √† leur emplacement dans le tableau (par exemple, les donn√©es situ√©es dans les colonnes), chaque op√©ration de lecture vous permettra d'obtenir seulement 1 num√©ro requis. </font><font style="vertical-align: inherit;">En cons√©quence, il s'av√®re que pour obtenir la m√™me quantit√© de donn√©es, vous devez effectuer mille fois plus d'op√©rations de lecture.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zarr et HDF5</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de surmonter les limitations ci-dessus, vous pouvez utiliser des formats de stockage de donn√©es </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zarr</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou HDF5, qui sont tr√®s similaires:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez travailler avec des fichiers HDF5 en Python en utilisant </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pytables</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h5py</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ce format est plus ancien que Zarr et a plus de restrictions, mais son avantage est qu'il peut √™tre utilis√© dans des programmes √©crits dans diff√©rentes langues.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zarr est un format impl√©ment√© √† l'aide du package Python du m√™me nom. </font><font style="vertical-align: inherit;">Il est beaucoup plus moderne et flexible que HDF5, mais vous ne pouvez l'utiliser (au moins pour l'instant) que dans l'environnement Python. </font><font style="vertical-align: inherit;">Selon mes sentiments, dans la plupart des situations, s'il n'y a pas besoin de support multilingue pour HDF5, cela vaut la peine de choisir Zarr. </font><font style="vertical-align: inherit;">Zarr, par exemple, a un meilleur support multithreading.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, nous ne discuterons que de Zarr, mais si vous √™tes int√©ress√© par le format HDF5 et sa comparaison plus approfondie avec Zarr, vous pouvez regarder </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vid√©o.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation de Zarr</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zarr vous permet de stocker des √©l√©ments de donn√©es et de les charger en m√©moire sous forme de tableaux, et √©galement - d'√©crire ces √©l√©ments de donn√©es sous forme de tableaux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici comment charger un tableau √† l'aide de Zarr:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> zarr, numpy <span class="hljs-keyword">as</span> np
<span class="hljs-meta">&gt;&gt;&gt; </span>z = zarr.open(<span class="hljs-string">'example.zarr'</span>, mode=<span class="hljs-string">'a'</span>,
<span class="hljs-meta">... </span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shape=(<span class="hljs-number">1024</span>, <span class="hljs-number">1024</span>),
<span class="hljs-meta">... </span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; chunks=(<span class="hljs-number">512</span>,<span class="hljs-number">512</span>), dtype=np.int16)
<span class="hljs-meta">&gt;&gt;&gt; </span>type(z)<font></font>
&lt;<span class="hljs-class"><span class="hljs-keyword">class</span> '<span class="hljs-title">zarr</span>.<span class="hljs-title">core</span>.<span class="hljs-title">Array</span>'&gt;
&gt;&gt;&gt; <span class="hljs-title">type</span>(<span class="hljs-params">z[<span class="hljs-number">100</span>:<span class="hljs-number">200</span>]</span>)
&lt;<span class="hljs-title">class</span> '<span class="hljs-title">numpy</span>.<span class="hljs-title">ndarray</span>'&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veuillez noter que jusqu'√† r√©ception d'une tranche de l'objet, nous ne serons pas √† notre disposition </font></font><code>numpy.ndarray</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Une entit√© </font></font><code>zarr.core.array</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n'est que des m√©tadonn√©es. </font><font style="vertical-align: inherit;">Seules les donn√©es incluses dans la tranche sont charg√©es √† partir du disque.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi ai-je choisi Zarr?</font></font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zarr contourne les limitations </font></font><code>memmap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">discut√©es ci-dessus:</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les fragments de donn√©es peuvent √™tre stock√©s sur disque, dans le stockage AWS S3 ou dans un syst√®me de stockage qui offre la possibilit√© de travailler avec des enregistrements de format cl√© / valeur.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La taille et la structure du fragment de donn√©es sont d√©termin√©es par le programmeur. </font><font style="vertical-align: inherit;">Par exemple, les donn√©es peuvent √™tre organis√©es de mani√®re √† pouvoir lire efficacement des informations situ√©es sur diff√©rents axes d'un r√©seau multidimensionnel. </font><font style="vertical-align: inherit;">Cela est vrai pour HDF5.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les fragments peuvent √™tre compress√©s. </font><font style="vertical-align: inherit;">La m√™me chose peut √™tre dite de HDF5.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arr√™tons-nous plus en d√©tail sur les deux derniers points.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dimensions des fragments</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons que nous travaillons avec un tableau de 30 000 x 3 000 √©l√©ments. </font><font style="vertical-align: inherit;">Si vous devez lire ce tableau et vous d√©placer le long de son axe </font></font><code>X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et se d√©placer le long de son axe </font></font><code>Y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, vous pouvez enregistrer des fragments contenant les donn√©es de ce tableau, comme indiqu√© ci-dessous (en pratique, vous aurez probablement besoin de plus de 9 fragments):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8c3/ef4/df7/8c3ef4df7f8f782bbc28e998913f8e34.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D√©sormais, les donn√©es situ√©es √† la fois sur l'axe </font></font><code>X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et sur l'axe </font></font><code>Y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">peuvent √™tre charg√©es efficacement. </font><font style="vertical-align: inherit;">Selon le type de donn√©es n√©cessaires dans le programme, vous pouvez t√©l√©charger, par exemple, des fragments (1, 0), (1, 1), (1, 2) ou des fragments (0, 1), (1, 1), (2, 1).</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compression des donn√©es</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque fragment peut √™tre compress√©. </font><font style="vertical-align: inherit;">Cela signifie que les donn√©es peuvent entrer dans le programme plus rapidement que le disque ne vous permet de lire les informations non compress√©es. </font><font style="vertical-align: inherit;">Si les donn√©es sont compress√©es 3 fois, cela signifie qu'elles peuvent √™tre t√©l√©charg√©es du disque 3 fois plus rapidement que les donn√©es non compress√©es, moins le temps n√©cessaire au processeur pour les d√©compresser.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/677/f42/f3f/677f42f3fc5539051f4adeb8f391684a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une fois les fragments t√©l√©charg√©s, ils peuvent √™tre supprim√©s de la m√©moire du programme.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©sum√©: memmap () ou Zarr?</font></font></font></h2><br><font style="vertical-align: inherit;"></font><code>memmap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quel est le </font><font style="vertical-align: inherit;">
meilleur √† utiliser - </font><font style="vertical-align: inherit;">ou Zarr? </font></font><br>
<br>
<code>Memmap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela semble int√©ressant dans de tels cas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il existe de nombreux processus qui lisent des parties du m√™me fichier. </font><font style="vertical-align: inherit;">Ces processus, gr√¢ce √† l'application </font></font><code>memmap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pourront partager le m√™me cache tampon. </font><font style="vertical-align: inherit;">Cela signifie qu'une seule copie des donn√©es doit √™tre conserv√©e en m√©moire, quel que soit le nombre de processus en cours d'ex√©cution.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le d√©veloppeur n'a aucune envie de g√©rer manuellement la m√©moire. </font><font style="vertical-align: inherit;">Il pr√©voit de simplement s'appuyer sur les capacit√©s du syst√®me d'exploitation, ce qui r√©soudra tous les probl√®mes de gestion de la m√©moire automatiquement et de mani√®re invisible pour le d√©veloppeur.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zarr est particuli√®rement utile dans les situations suivantes (dans certains d'entre eux, comme cela sera not√©, le format HDF5 est √©galement applicable):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les donn√©es sont t√©l√©charg√©es √† partir de sources distantes et non √† partir du syst√®me de fichiers local.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il est tr√®s probable que le goulot d'√©tranglement du syst√®me lira √† partir du disque. </font><font style="vertical-align: inherit;">La compression des donn√©es permettra une utilisation plus efficace des capacit√©s mat√©rielles. </font><font style="vertical-align: inherit;">Cela vaut √©galement pour HDF5.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous avez besoin d'obtenir des tranches de tableaux multidimensionnels le long de diff√©rents axes, Zarr aide √† optimiser ces op√©rations en s√©lectionnant la taille et la structure appropri√©es des fragments. </font><font style="vertical-align: inherit;">Cela est vrai pour HDF5.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je choisirais entre </font></font><code>memmap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zarr et, tout d'abord, j'essaierais d'utiliser Zarr - en raison de la flexibilit√© que ce package offre et du format de stockage de donn√©es qu'il impl√©mente. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chers lecteurs! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment r√©solvez-vous le probl√®me de travailler avec de grands tableaux NumPy?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr490620/index.html">Quand j'entends les mots "restaur√© le r√©seau neuronal", je grimpe pour v√©rifier les sauvegardes</a></li>
<li><a href="../fr490622/index.html">Lutte contre les fuites de m√©moire dans les applications Web</a></li>
<li><a href="../fr490624/index.html">En-t√™te HTTP et contr√¥le du navigateur Web</a></li>
<li><a href="../fr490626/index.html">Un guide complet des attributs data- * HTML</a></li>
<li><a href="../fr490628/index.html">Que faire lorsque CSS bloque l'analyse des pages?</a></li>
<li><a href="../fr490634/index.html">√âv√©nements num√©riques √† Moscou du 2 au 8 mars</a></li>
<li><a href="../fr490636/index.html">√âv√©nements num√©riques √† Saint-P√©tersbourg du 2 au 8 mars</a></li>
<li><a href="../fr490640/index.html">Surcharge en C ++. Partie III. Surcharge des instructions new / delete</a></li>
<li><a href="../fr490642/index.html">Plugin pour la surveillance des applications K8s DevOpsProdigy KubeGraf v1.3.0: nouvelle version et nouvelles fonctionnalit√©s</a></li>
<li><a href="../fr490644/index.html">R√©f√©rentiel rpm simple utilisant Inotify et webdav</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>