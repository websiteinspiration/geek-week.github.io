<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ö°Ô∏è ‚úÖ ‚ÜîÔ∏è √Ä propos du fonctionnement d'un PC en utilisant l'exemple de Windows 10 et le clavier de la partie 2 üïµÔ∏è üí¥ üïë</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cette partie, nous verrons dans quelle direction vont les informations sur la touche enfonc√©e du clavier vers le CPU, il y aura beaucoup de photo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>√Ä propos du fonctionnement d'un PC en utilisant l'exemple de Windows 10 et le clavier de la partie 2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489166/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans cette partie, nous verrons dans quelle direction vont les informations sur la touche enfonc√©e du clavier vers le CPU, il y aura beaucoup de photos et ce n'est pas la derni√®re partie. Je vais en parler du point de vue d'un programmeur qui √©crit en mode utilisateur - programmes utilisateur, web, applications mobiles - donc, il peut y avoir des inexactitudes. Les personnes impliqu√©es dans l'√©lectronique ne trouveront probablement rien d'utile pour elles-m√™mes. La premi√®re partie est </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wl/me/mo/wlmemoyr_plutwlcq7nhezslr78.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le probl√®me de l'enseignement sup√©rieur programmeur est que les √©tudiants √©tudient en d√©tail les aspects individuels pris hors contexte sans comprendre comment tout cela s'imbrique. Plusieurs semestres de math√©matiques sup√©rieures pour comprendre la physique, comprendre le g√©nie √©lectrique, les appareils √©lectriques, l'assembleur, le syst√®me d'exploitation, les algorithmes, la programmation syst√®me et un tas d'autres sujets regroup√©s dans un programme standard de cinq ans. L'abondance de d√©tails et personne n'explique comment cela s'inscrit dans la grande image, on suppose qu'apr√®s 5 ans, l'√©tudiant le liera lui-m√™me dans sa t√™te, puis il ira travailler avec .Net et ne touchera jamais l'√©lectronique et le mode noyau. Je crois qu'il n'est pas n√©cessaire de conna√Ætre de mani√®re aussi d√©taill√©e le fonctionnement d'un ordinateur, il suffit d'avoir une compr√©hension g√©n√©rale de ce qui se passe dans la pile technologique. Si les personnes qui composent les programmes de formation des universit√©s ont ouvert des auto-√©coles,vous apprenez le russe, la calligraphie et l'hydrodynamique, car vous devez communiquer avec les inspecteurs, changer de fluide et r√©diger des notes explicatives. Il y aura quelques inexactitudes dans l'article, il ne sera donc pas adapt√© pour r√©ussir l'examen dans des mati√®res sp√©cialis√©es, mais apr√®s cela, il sera plus facile de comprendre le p√©riph√©rique PC.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sous la circulation des chats.</font></font></i><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une touche du clavier est un bouton qui ferme les contacts et un courant √©lectrique les traverse. </font><font style="vertical-align: inherit;">Le m√©canisme de fermeture / ouverture est r√©alis√© de mani√®re √† ce que le bouton ne doive pas √™tre enfonc√© compl√®tement, sinon les doigts se fatigueront rapidement et le clavier ne sera pas ergonomique. </font><font style="vertical-align: inherit;">Dans la section, la cl√© ressemble √† ceci. </font><font style="vertical-align: inherit;">Sur le c√¥t√© droit se trouve le contact auquel la tension est appliqu√©e.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/g5/c1/ay/g5c1aykcd7h6pbxwih_ci_dcsk0.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le ¬´cerveau¬ª du clavier qui peut d√©terminer la frappe est un </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">microcontr√¥leur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui est essentiellement un mini-ordinateur avec un programme qui v√©rifie chaque touche en lui appliquant une tension et s'il passe, puis la touche est enfonc√©e. Les jambes du microcontr√¥leur ont leurs propres noms et sont accessibles en code, elles sont utilis√©es pour communiquer avec le monde ext√©rieur. Les jambes peuvent contr√¥ler le fonctionnement du microcontr√¥leur, signaler l'√©tat de la puce ou servir √† lire / transmettre des donn√©es.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/ek/uq/om/ekuqom94exvedvmbel6ky6botvm.png"></td>
<td><img src="https://habrastorage.org/webt/mb/wm/14/mbwm14xm-h71gr7plnv5oglrhak.png"></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le programme ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">firmware</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) peut √™tre √©crit en C ou assembleur, il est t√©l√©charg√© sur le microcontr√¥leur via le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">programmateur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . C'est un appareil avec un connecteur pour installer un microcontr√¥leur et peut √™tre connect√© √† un ordinateur via USB, sur lequel un logiciel sp√©cial est en cours d'ex√©cution. Voici √† quoi ressemble le programmeur dans la vraie vie:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/4q/qz/ut/4qqzutlhi4hlltp4ubcclyv2rtu.png"></td>
<td><img src="https://habrastorage.org/webt/hy/ex/xj/hyexxj5ezr-gkg4jva6rerfkbnw.png"></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gr√¢ce au programme, chaque jambe peut √™tre r√©gl√©e ou mesur√©e la tension. </font><font style="vertical-align: inherit;">L'algorithme pour trouver la touche enfonc√©e consiste √† appliquer une tension √† une jambe et √† la mesurer sur l'autre, et si la touche a √©t√© enfonc√©e, la deuxi√®me jambe aura √† peu pr√®s le m√™me volt que l'entr√©e. </font><font style="vertical-align: inherit;">Ainsi, dans une boucle infinie, toutes les cl√©s sont v√©rifi√©es. </font><font style="vertical-align: inherit;">En r√®gle g√©n√©rale, le clavier a 80-110 boutons et le contr√¥leur de contact (broches) est beaucoup plus petit. </font><font style="vertical-align: inherit;">Par cons√©quent, ils utilisent une approche telle que la ¬´matrice de clavier¬ª - toutes les touches sont r√©parties dans des colonnes et des lignes, et l'algorithme est r√©duit √† trouver une colonne qui coupe la ligne √† laquelle le programme a appliqu√© la tension. </font><font style="vertical-align: inherit;">La correspondance colonne / ligne avec les contacts est mise en √©vidence ici.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dm/3w/yn/dm3wynvz4faugjchr5h94ywdwgq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En r√©alit√©, la matrice peut ressembler √† ceci. </font><font style="vertical-align: inherit;">√Ä gauche, c'est industriel et √† droite, fait maison.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/-y/3o/ik/-y3oikaoyykmeihyhgskuihxgoo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur le pseudo-code, la partie du programme du micrologiciel qui d√©termine les touches enfonc√©es peut ressembler √† ceci.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; COLSC; i++) {<font></font>
 	SetPower(columns[i], <span class="hljs-number">3.0</span> f);
  	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; ROWSC; j++) {
    		<span class="hljs-keyword">float</span> power = GetPower(rows[j]);
    		<span class="hljs-keyword">if</span> (power &gt;= <span class="hljs-number">3.0f</span> - THRESHOLD) {<font></font>
      			BYTE key = keys[i, j];<font></font>
      			SendKey(key);<font></font>
    		}<font></font>
  	}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque cl√© correspond √† un code de num√©risation, elle est normalis√©e et est un nombre √† 8 bits, c'est-√†-dire un octet. Par cons√©quent, lorsque la touche Y est enfonc√©e, le contr√¥leur de clavier devra envoyer le num√©ro 21 (0x15), et une fois rel√¢ch√© - 149 (0x95). Comment se d√©roule l'exp√©dition? Vous avez s√ªrement travaill√© avec JSON, des services Web ou envoy√© des donn√©es entre les processus et vous savez que pour envoyer des donn√©es, vous devez </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s√©rialiser</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , c'est-√†-dire se transformer en un tableau d'octets ou de texte format√© que le destinataire peut </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©s√©rialiser</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , c'est-√†-dire recr√©er un objet dans son espace d'adressage. Et qu'est-ce qui peut s√©rialiser des donn√©es √† un niveau aussi bas? Nous devons transf√©rer seulement 1 octet (8 bits). Pour l'avenir, je dirai que nous transmettrons les donn√©es petit √† petit.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En math√©matiques, il existe une formule qui peut convertir n'importe quel nombre d√©cimal auquel nous sommes habitu√©s en une s√©quence de z√©ros et de uns et vice versa. Cette formule a trouv√© une application dans la technologie informatique. Dans la premi√®re partie, j'ai mentionn√© avec d√©sinvolture que la technologie analogique exploite les lois de la physique, tandis que le num√©rique fonctionne au niveau des z√©ros et des uns. Cela signifie qu'un t√©l√©phone analogique code le spectre entier de la voix humaine en une s√©quence d'ondes √©lectromagn√©tiques, et un t√©l√©phone num√©rique utilise une puce qui convertit la voix humaine en donn√©es num√©riques, par exemple, dans des fichiers WAV, puis les transmet dans une s√©quence de z√©ros et de uns sous la forme d'ondes √©lectromagn√©tiques. Seulement dans ce cas, au lieu de tout le spectre de la voix, seules deux valeurs doivent √™tre repr√©sent√©es - 0 et 1. Elles peuvent √™tre repr√©sent√©es par des ondes de longueurs diff√©rentes, de tensions diff√©rentesdes impulsions lumineuses √† travers la fibre optique, des rayures noires et blanches sur du papier, des trous sur la carte perfor√©e.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code de balayage de la touche Y enfonc√©e en binaire ressemble √† 0001 0101. Nous les transmettrons le long de la jambe du microcontr√¥leur qui est responsable des donn√©es ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DATA</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'unit√© logique</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est 3,3 V ou plus, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z√©ro logique</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- la tension est d'environ 0V. Voici le probl√®me - comment passer trois z√©ros de suite? Pour ce faire, nous avons besoin d'un deuxi√®me tron√ßon que nous appellerons CLOCK, lorsque sur celui-ci on veut dire que la session de transmission d'un bit a commenc√©, et z√©ro est termin√©e. Un tel changement de valeurs (tensions) se produira avec un certain intervalle de temps, disons 50 nanosecondes, car √† l'autre extr√©mit√© il y a un deuxi√®me microcontr√¥leur qui fonctionne √† sa propre vitesse et √©coute les jambes auxquelles CLOCK et DATA sont connect√©s dans une boucle sans fin. Dans cet exemple, je suppose que le clavier est connect√© via le connecteur PS2, comme illustr√© ci-dessous. Via le port USB, l'algorithme de transfert sera diff√©rent. Comme vous pouvez le voir, le port PS2 a des broches appel√©es donn√©es, horloge.En plus d'eux, il y a √©galement un contact par lequel le contr√¥leur de port PS2 distribue la tension de 5 V n√©cessaire au fonctionnement au clavier et un contact de masse, qui est simplement affich√© sur le corps du clavier. Les autres contacts ne sont pas utilis√©s.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/8g/ug/g7/8gugg7htfuyfrzclfypvowdzkhq.png"></td>
<td><img src="https://habrastorage.org/webt/dy/zf/_w/dyzf_w-iqlutb2xiju_om0e4abq.png"></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le port PS / 2 est appel√© </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bus s√©rie</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , car il transmet les bits un par un (une s√©quence de bits). </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le port parall√®le</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> transmet des donn√©es √† la fois √† plusieurs contacts et peut transf√©rer par exemple un octet (8 bits) √† la fois pour une session de transfert de donn√©es. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelle est la diff√©rence entre un port, un bus et un protocole? Un bus, comme un port, est un ensemble de contacts (c√¢blage) et un accord sur la fa√ßon de les utiliser, seul le port a une connexion pour connecter des p√©riph√©riques externes, et le bus est utilis√© pour communiquer des composants sur la carte m√®re. Un port est essentiellement un bus avec un connecteur au milieu. Un protocole est une interaction par le biais de contacts. Dans l'exemple avec PS / 2, c'√©tait l'ordre de transfert des donn√©es via les contacts Horloge et Donn√©es.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auparavant, le microcontr√¥leur Intel 8042 √©tait tr√®s courant et √©tait utilis√© √† la fois dans le clavier et comme contr√¥leur de port PS2, c'est-√†-dire deux puces identiques ont √©chang√© des donn√©es. Le pilote de port PS2 sous Windows s'appelle 8042prt.sys.</font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
En fait, nous ne transmettons pas 8 bits, mais 11, car les donn√©es sont transmises sous forme </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de paquet de donn√©es</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">message</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . 3 bits suppl√©mentaires indiquent le d√©but et la fin des donn√©es - un z√©ro au d√©but et 0 1 √† la fin, un tel protocole pour transf√©rer des donn√©es de l'appareil vers l'h√¥te dans PS2. Cela peut ressembler √† la fonction </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SendKey</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en pseudo-code, si vous pr√©f√©rez comprendre le code. Il envoie des donn√©es sur la touche enfonc√©e via le bus PS2.</font></font><br>
<br>
<pre><code class="cpp hljs">
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SendBit</span><span class="hljs-params">(BYTE bit)</span> </span>{
	<span class="hljs-keyword">float</span> power = (bit != <span class="hljs-number">0</span>) ? <span class="hljs-number">3.3f</span> : <span class="hljs-number">0.0f</span>;<font></font>
	SetPower(DATA, power);<font></font>
	SetPower(CLOCK, <span class="hljs-number">3.3f</span>);<font></font>
	Sleep(<span class="hljs-number">50</span>);<font></font>
	SetPower(CLOCK, <span class="hljs-number">0.0f</span>);<font></font>
	Sleep(<span class="hljs-number">50</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SendData</span><span class="hljs-params">(BYTE data)</span> </span>{<font></font>
	SendBit(<span class="hljs-number">0</span>);<font></font>
	<font></font>
	<span class="hljs-keyword">for</span> (BYTE i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">sizeof</span>(BYTE); i++) {<font></font>
		BYTE bit = (data &gt;&gt; i) &amp; <span class="hljs-number">1</span>;<font></font>
		SendBit(bit);<font></font>
	}<font></font>
<font></font>
	SendBit(<span class="hljs-number">0</span>);<font></font>
	SendBit(<span class="hljs-number">1</span>);<font></font>
}<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il n'est pas toujours n√©cessaire de r√©gler manuellement la tension sur chaque branche individuellement pour le transfert de donn√©es. </font><font style="vertical-align: inherit;">Dans certains cas, la valeur stock√©e dans le registre est automatiquement affich√©e sur les contacts. </font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur le graphique, un tel transfert de donn√©es sera visualis√© comme suit. </font><font style="vertical-align: inherit;">Le temps est le long de l'axe X et la tension est le long de l'axe Y.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zs/cy/p8/zscyp8ur1i1t0lmau3n50evbuke.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En technologie analogique, le signal peut √™tre d√©form√©, c'est-√†-dire </font><font style="vertical-align: inherit;">le fil n'est connect√© √† rien, mais le voltm√®tre affiche 0,5 V sur lui en raison du fait qu'il y a un champ √©lectromagn√©tique √† proximit√©. </font><font style="vertical-align: inherit;">Par cons√©quent, le concept de tension de seuil est utilis√©. </font><font style="vertical-align: inherit;">Si la tension est inf√©rieure au seuil, alors nous supposons que nous avons obtenu un z√©ro logique, sinon l'unit√©. </font><font style="vertical-align: inherit;">Compte tenu des distorsions possibles, le code de balayage de la touche Y enfonc√©e peut se pr√©senter comme suit:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/sl/u4/3k/slu43kce6evjxlk3qgrzzwpfhmg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant d'examiner de plus pr√®s comment les donn√©es du clavier parviennent au processeur, parlons des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">micropuces</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bus</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cartes m√®res</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microcontr√¥leurs et microcircuits</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le microcontr√¥leur peut ex√©cuter un programme qui y est cousu, dispose d'une certaine quantit√© de m√©moire RAM et d'un emplacement pour stocker les donn√©es et le code du programme. Dans la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puce, le</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> programme peut √™tre d√©fini au stade de la conception. La cr√©ation manuelle d'un circuit √©lectrique mettant en ≈ìuvre un algorithme prend beaucoup de temps et, par cons√©quent, un langage de programmation sp√©cial appel√© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VHDL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Hardware Description Language) </font><font style="vertical-align: inherit;">peut √™tre utilis√© pour concevoir des microcircuits </font><font style="vertical-align: inherit;">. Il s'agit d'un langage de programmation de haut niveau qui se traduit par un plan de circuit, il est ex√©cut√© via un programme qui trouve l'emplacement optimal des √©l√©ments radio sur la carte et est finalement r√©alis√© sous forme physique. Les images sont √† but illustratif uniquement.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/6c/rt/vp/6crtvpo861utguxs56v37-7syx4.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gk/r8/q7/gkr8q7m78x8ldyxvdxu7tp9pxhc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment les donn√©es et les commandes sont-elles repr√©sent√©es dans les micropuces et les microcontr√¥leurs? </font><font style="vertical-align: inherit;">La base de la technologie informatique est un transistor, que l'humanit√© a appris √† fabriquer dans des dimensions microscopiques. </font><font style="vertical-align: inherit;">Un transistor est un tel √©l√©ment radio qui a trois jambes: une entr√©e, une sortie et entre elles une commande qui ouvre ou ferme le courant entre deux jambes. </font><font style="vertical-align: inherit;">La figure ci-dessous illustre le fonctionnement du transistor, l'eau illustre le courant.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/1g/kj/bw/1gkjbwtax3xmpshjmbllzgpvkoo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La tension est appliqu√©e √† la jambe d'entr√©e, si le contr√¥le a une tension, alors le courant passe √† la sortie, sinon il y aura 0V. </font><font style="vertical-align: inherit;">Ayant 8 transistors, dont chacun a une LED connect√©e √† la jambe de sortie qui s'allume ou non, nous pouvons imaginer 256 combinaisons uniques (2 √† la puissance de 8). </font><font style="vertical-align: inherit;">Lapochki sont interpr√©t√©s de droite √† gauche, ainsi que les nombres d√©cimaux. </font><font style="vertical-align: inherit;">Les chiffres inf√©rieurs sont √† droite.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/bt/gb/9l/btgb9ln9dejdgz-v-e7l_6mjx9u.png"></td>
<td><img src="https://habrastorage.org/webt/vb/js/yg/vbjsygneuovkp0ocaml6yfvoigy.png"></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ceux. </font><font style="vertical-align: inherit;">une ampoule repr√©sente un bit d'information (0 ou 1), et huit de ces ampoules correspondent √† un octet. </font><font style="vertical-align: inherit;">Il est possible de construire des op√©rateurs logiques ET, OU, NON, XOR sur des transistors.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wu/rw/gz/wurwgzgga7mny0qhn3daju6hdic.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, dans les circuits de l'op√©rateur ET (√† gauche dans l'image ci-dessus), la sortie n'aura de tension que si les deux tensions d'entr√©e ne sont pas nulles. </font><font style="vertical-align: inherit;">Quelqu'un a d√©j√† invent√© des algorithmes d'addition, de multiplication, de division et de soustraction bas√©s sur des op√©rations logiques et des d√©calages de bits. </font><font style="vertical-align: inherit;">Les fabricants de puces doivent simplement les mettre en ≈ìuvre. </font><font style="vertical-align: inherit;">Le fonctionnement de l'algorithme d'addition au niveau du bit est illustr√© ci-dessous; nous ne l'analyserons pas:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9k/t3/m5/9kt3m5uiw9wp1xk7ferifgngpzi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les nanotransistors sont microscopiques et peuvent √™tre plac√©s sur la carte par millions. </font><font style="vertical-align: inherit;">Le processeur Intel est illustr√© ci-dessous et √† quoi pourrait ressembler l'un de ses c≈ìurs. </font><font style="vertical-align: inherit;">L'image est illustrative.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hy/77/gt/hy77gt038gktsayjog-kg9rh65u.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les microcircuits peuvent contenir un microcontr√¥leur sur la m√™me carte et dans le m√™me bo√Ætier.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pneus</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En r√®gle g√©n√©rale, dans les manuels, les pneus sont repr√©sent√©s par des fl√®ches en gras, comme dans l'image ci-dessous. </font><font style="vertical-align: inherit;">Ceci est fait pour ne pas dessiner toutes les connexions des contacts, qui peuvent √™tre nombreuses. </font><font style="vertical-align: inherit;">Le fonctionnement du bus PS2 est tr√®s simple, tout ce dont vous avez besoin est de trois broches. </font><font style="vertical-align: inherit;">Mais il existe des bus qui, par exemple, ont 124 contacts pour le transfert de donn√©es.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zu/-a/vd/zu-avduvaicswxtkaeihnnwureu.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe les types de pneus suivants:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Donn√©es - les bits sur ces contacts sont interpr√©t√©s comme des donn√©es: nombre, symbole, partie d'une image ou autres donn√©es binaires. </font><font style="vertical-align: inherit;">La largeur du bus affecte le d√©bit, le nombre de bits transmis par seconde</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adresses - les bits sur ces broches sont interpr√©t√©s comme une adresse physique en m√©moire. </font><font style="vertical-align: inherit;">La largeur de ce bus d√©termine la capacit√© RAM maximale prise en charge.</font></font></li>
<li> ‚Äî          . CPU         RAM   I/O.</li>
<li>.         ,      .    ATX 24 Pin 12V PSU Connector,       .<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/am/cb/mq/amcbmq-jxkqdth45s_79xrg6uwa.png"></div></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un pneu peut √™tre constitu√© de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">substrats</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , c'est-√†-dire </font><font style="vertical-align: inherit;">certains contacts sont utilis√©s pour les donn√©es, d'autres pour les adresses, d'autres pour le contr√¥le et les contacts auxquels l'alimentation est transmise. </font><font style="vertical-align: inherit;">L'approche lorsque les m√™mes contacts sont utilis√©s alternativement pour transmettre √† la fois des donn√©es et des adresses s'appelle le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">multiplexage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Par exemple, le processeur Intel 8086 a un bus de donn√©es et d'adresses de 20 bits, sur le diagramme des broches ses contacts sont indiqu√©s par </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AD0-AD19</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (jambes 16-2 et 39-35).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/jp/wy/tx/jpwytxl5cbiuv_hky79ledmfzjk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans un cas plus complexe, nous pouvons avoir plusieurs microcircuits connect√©s aux m√™mes contacts. </font><font style="vertical-align: inherit;">Pour une communication normale, ils ont besoin d'une puce suppl√©mentaire qui d√©terminera qui √† quel moment peut les utiliser, il s'agit d'un </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contr√¥leur de bus</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dans la figure ci-dessous, un bus sph√©rique dans le vide: quatre microcontr√¥leurs identiques transmettent des donn√©es au microcontr√¥leur grand public via le contr√¥leur de bus. Le fil rouge est la tension que le contr√¥leur de bus distribue √† toutes les puces qui lui sont connect√©es. Les donn√©es sont transmises via les fils verts et la ¬´n√©gociation¬ª avec le contr√¥leur de bus est effectu√©e, et le fil bleu est Horloge, √† travers laquelle le contr√¥leur de bus synchronise la communication des contr√¥leurs, car ils peuvent fonctionner √† diff√©rentes vitesses. Si l'unit√© logique est sur le fil bleu, la puce autoris√©e √† utiliser le bus peut effectuer un acte d'interaction avec le monde ext√©rieur - lire un peu, par exemple.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/3a/tc/pq/3atcpqqtqdpmnbvrjho1h1y-bww.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le contr√¥leur de bus peut √™tre consid√©r√© comme un composant int√©gral, car la communication avec le monde ext√©rieur passera par lui et le nombre de puces ou de vrais p√©riph√©riques externes r√©ellement sur le bus n'est pas important. </font><font style="vertical-align: inherit;">Pour le transfert de donn√©es, la carte m√®re dispose d'un vaste r√©seau de bus. </font><font style="vertical-align: inherit;">Malgr√© le fait qu'il existe un grand nombre de jeux de puces, ils suivent pour la plupart une disposition typique, car tous les appareils connect√©s √† la carte m√®re sont divis√©s en:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lent - clavier, disque dur, carte r√©seau, audio, etc. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rapide - CPU, RAM, GPU. </font></font></li>
</ul><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sur la base de cette division, la carte m√®re a deux puces principales - le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pont sud</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui coordonne le travail de tous les appareils lents, et le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pont nord,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour la coordination des appareils rapides. Dans les ordinateurs modernes, le Northbridge est situ√© dans le CPU lui-m√™me, et le Southbridge peut √™tre appel√© le Platform Controller Hub, mais cela ne change pas l'essence. Ces deux ponts sont reli√©s entre eux par un bus gr√¢ce auquel ils s'informent mutuellement des √©v√©nements importants. Le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g√©n√©rateur d'horloge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par lequel le processeur, la RAM et la carte graphique synchronisent leur travail, le m√™me fil bleu, </font><font style="vertical-align: inherit;">est particuli√®rement int√©ressant </font><font style="vertical-align: inherit;">. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Overclocking</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cela modifie essentiellement les param√®tres du BIOS afin que la synchronisation se produise plus souvent, tandis que le mat√©riel, principalement le CPU, chauffera plus fort, consommera plus d'√©nergie et d√©veloppera plus rapidement ses ressources. L'inverse est l' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">overclocking</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , lorsque la vitesse diminue pour √©conomiser la batterie ou r√©duire le bruit. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un chipset</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un ensemble de puces qui ont toutes √©t√© con√ßues pour fonctionner les unes avec les autres. Ils assurent la communication entre les composants de la carte m√®re et fournissent des fonctionnalit√©s telles que des minuteries. Le jeu de puces fonctionne avec une seule marque de processeur, AMD ne peut pas √™tre ins√©r√© dans la carte m√®re avec le chipset Intel, ils ont m√™me des contacts diff√©rents. Le sch√©ma de la carte m√®re est pr√©sent√© ci-dessous:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/hd/zk/ld/hdzkldbz0h6vjddegg2iqwir-f0.png"></td>
<td><img src="https://habrastorage.org/webt/2h/sl/-f/2hsl-f2t77a-x4xy0dn5xqo2ua0.png"></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous voulez un exemple d'encapsulation mat√©rielle? </font><font style="vertical-align: inherit;">Les chipsets Intel ont une puce appel√©e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Super IO</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , elle est illustr√©e dans l'image ci-dessous et est connect√©e au pont sud via le bus LPC. </font><font style="vertical-align: inherit;">LPC est le nom intelligent pour le c√¢blage CLOCK, DATA, VCC (POWER). </font><font style="vertical-align: inherit;">Cette puce contient l'√©mulation de toutes les anciennes puces jamais utilis√©es pour les p√©riph√©riques, y compris la puce 8042 utilis√©e pour le port PS2. </font><font style="vertical-align: inherit;">Il existe √©galement un √©mulateur de contr√¥leur de port pour Floppy et d'autres reliques qui interf√®rent avec la progression. </font><font style="vertical-align: inherit;">Dans le sch√©ma g√©n√©ral de la carte m√®re, Super IO et le bus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LPC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sont indiqu√©s ci-dessus </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bf/wx/sm/bfwxsm3i9gekd4yjd0uizbusb3u.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le port PS2 moderne se connecte directement √† la puce Super I / O. </font><font style="vertical-align: inherit;">Le vert est le clavier, le violet est la souris. </font><font style="vertical-align: inherit;">Auparavant, il √©tait connect√© au microcontr√¥leur Intel 8042.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ae/za/tj/aezatje8p9gbwod0uap92v7sv-e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La carte m√®re est en di√©lectrique, c'est-√†-dire </font><font style="vertical-align: inherit;">mat√©riau qui ne conduit pas de courant. </font><font style="vertical-align: inherit;">Le courant ne peut passer que sur les lignes imprim√©es sur la carte. </font><font style="vertical-align: inherit;">La carte m√®re a de nombreuses couches, chacune ayant ses propres contacts imprim√©s et donc si vous percez la carte m√®re l√† o√π les lignes ne sont pas visibles, vous pouvez la g√¢cher en endommageant les contacts invisibles √† l'int√©rieur de la carte. </font><font style="vertical-align: inherit;">Vous pouvez maintenant regarder de plus pr√®s le processus de distribution des donn√©es de la PS2 vers le CPU.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La route de la PS2 au processeur</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En r√®gle g√©n√©rale, l'architecture informatique est consid√©r√©e sur le processeur 8086. D'une part, cela est correct, car il est assez simple par rapport aux processeurs modernes, et d'autre part, il est faux, car il est ancien et ne refl√®te pas l'architecture d'une machine moderne. Intel 8086 n'avait pas besoin de ponts, car il √©tait si lent qu'il pouvait fonctionner avec des p√©riph√©riques sur un bus, c'est-√†-dire √† une fr√©quence. Je ne connais pas les processeurs et jeux de puces modernes, je vais donc les expliquer sur des fictifs qui ressemblent √† de vrais. Dans mon exemple, il y aura un CPU fictif tr√®s similaire √† </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel 8086</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. La puce Super IO a plus de cent contacts et il existe de la documentation sur Internet, mais je ne vois pas l'int√©r√™t de trier les broches que le clavier et le bus LPC utilisent r√©ellement pour communiquer avec South Bridge. L'essentiel est le principe, qui peut √™tre mis en ≈ìuvre de diff√©rentes mani√®res. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetons un rapide coup d'≈ìil √† la photo pour nous souvenir que nous sommes d√©j√† pass√©s. Les fl√®ches vertes indiquent le chemin que nous allons emprunter.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/82/ic/2e/82ic2e8smxmv-z0epnfxzk1f6n8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, les donn√©es du clavier sont d√©j√† arriv√©es au contr√¥leur de port PS2, qui √©tait autrefois une puce Intel 8042, et est maintenant √©mul√© par une puce Super IO. Et maintenant, analysons la suite des actions sur ma carte m√®re fictive avec un processeur fictif. Le contr√¥leur PS2 a re√ßu un code de balayage de la touche Y enfonc√©e et fournit maintenant une tension au signal de contact (ligne violette, voir l'image ci-dessous) sur laquelle le contr√¥leur d'interruption programmable doit notifier les donn√©es du clavier. Ce signal est transmis d'une puce √† l'autre jusqu'√† ce que le North Bridge le transmette au gestionnaire d'interruption.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zh/jb/jb/zhjbjbwyj8dgyhydsaeryyfyfrm.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le contr√¥leur d'interruption programmable</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une puce </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel 8259</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans laquelle 8 branches (leurs noms IRQ0-IRQ7) sont r√©serv√©es pour recevoir des notifications de certains ports ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nterrupt </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> uest). Un clavier est li√© √† la broche IRQ1, IRQ7 √† une imprimante, une disquette √† une broche, une carte son, des ports parall√®les et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autres</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Bien s√ªr, il peut y avoir beaucoup plus de huit appareils, donc une technique telle que la cascade a √©t√© utilis√©e lorsqu'un autre PIC similaire a √©t√© connect√© √† une jambe avec le nom IRQ2, auquel le d√©compte n'a pas commenc√© √† partir de 0, mais 7. La souris est li√©e √† IRQ12, c'est-√†-dire pied IRQ5 sur le deuxi√®me PIC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le contr√¥leur d'interruption doit maintenant informer le CPU de l'√©v√©nement sur le clavier. Cela se produit comme suit:</font></font><br>
<ol>
<li>      INT (Interrupt) ,     INTR (<i>Interrupt Request</i>) . CPU            ,        , ..       .     ,       .        exception  .</li>
<li>               INTR,        .</li>
<li>       ( D0-D7)  ,    .      PIC          (   IRQ).<br>
<br>
<i> ,   ?     .               .   ‚Äî      (x, y, z, w).        .</i></li>
<li>CPU     AD0-AD7  ,  .      IDT (<i>Interrupt Descriptior Table</i>)    ,     ,         .   CPU   .<br>
<br>
<i>             .       .    ,   IDT        C# .</i><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">IDT_entry</span>{</span>
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">short</span> <span class="hljs-keyword">int</span> offset_lowerbits;
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">short</span> <span class="hljs-keyword">int</span> selector;
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> zero;
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> type_attr;
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">short</span> <span class="hljs-keyword">int</span> offset_higherbits;<font></font>
};<font></font>
 <font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">IDT_entry</span> <span class="hljs-title">IDT</span>[256];</span>
</code></pre></li>
<li>        ,          INTA (<b>Int</b>errupt <b>A</b>cknowledged).<br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le gestionnaire d'interruption du clavier dans le code le plus simple ressemblera √† ceci. Il appelle une commande qui signale la fin du traitement d'interruption, c'est-√†-dire envoie un signal au pied INTA.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">irq1_handler</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{<font></font>
	  outb(<span class="hljs-number">0x20</span>, <span class="hljs-number">0x20</span>); <span class="hljs-comment">//EOI</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez en savoir plus sur la configuration de la table des vecteurs d'interruption sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">osdev</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous savons maintenant comment l'interruption s'est produite, mais nous ne savons pas comment le gestionnaire d'interruption lit les informations sur la touche enfonc√©e. D'un point de vue logiciel, le port PS2 est deux registres, seulement ils ne sont pas accessibles par des </font><font style="vertical-align: inherit;">noms ou des </font><font style="vertical-align: inherit;">adresses en m√©moire </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">par le num√©ro de port d' </font><font style="vertical-align: inherit;">E / S</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ces deux registres √† un octet sont affect√©s aux ports 0x60 et 0x64, le premier (0x60) contiendra le code de balayage de la cl√©. Le deuxi√®me port est utilis√© pour transf√©rer l'√©tat et les commandes vers le port PS2 (pas le clavier!). Le jeu d'instructions d'architecture x86 a la commande </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN </font></font></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">storeTo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fromPortNum</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui lit la valeur du port d'E / S sp√©cifi√© dans le registre sp√©cifi√©. </font><font style="vertical-align: inherit;">Par exemple, EN AL, 0x60 enregistrera les donn√©es du clavier dans le registre AL. </font><font style="vertical-align: inherit;">Cela pourrait fonctionner comme ceci:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le processeur que nous consid√©rons, il existe des jambes AD0-AD20, elles peuvent √™tre utilis√©es pour indiquer l'adresse et les donn√©es. </font><font style="vertical-align: inherit;">Il s'agit √† la fois d'un bus de donn√©es et d'un bus d'adresses. </font><font style="vertical-align: inherit;">En plus d'eux, il y a un certain nombre de jambes de contr√¥le, par exemple, la broche n ¬∞ 28 (S2), dont la valeur indiquera au pont nord o√π la lecture aura lieu - √† partir de la m√©moire ou d'un p√©riph√©rique d'entr√©e / sortie. </font><font style="vertical-align: inherit;">La commande IN d√©finit la valeur ici en parlant du p√©riph√©rique d'E / S.</font></font></li>
<li>   CPU (-   AD0-AD20)   0110 0000,    0x60.      CPU    ,     .        , -   , - .       0x60        SuperIO ,    -    .</li>
<li>    Super IO            .   0x60        PS2,         . </li>
<li>    .   Intel 8042,     SuperIO,   LPC       ,       . ..        ,    .</li>
<li>     CPU              (- 8   AD0-AD20). </li>
<li> CPU                   AL.         .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout cet algorithme fonctionne √† l'√©chelle nanoseconde et s'ex√©cute donc presque instantan√©ment, m√™me si le processeur a mis un certain temps √† attendre l'op√©ration d'E / S. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous le comprenez maintenant, la lecture √† partir de p√©riph√©riques externes, m√™me comme la m√©moire RAM, etc. Le processeur est plut√¥t lent. Cette lenteur peut √™tre remarqu√©e en √©crivant un programme qui imprime 10 000 lignes dans un fichier ligne par ligne, au lieu de les copier dans le tampon et d'enregistrer imm√©diatement. Le disque dur est connect√© au pont sud et √† l'int√©rieur il y a √©galement un contr√¥leur qui contr√¥le le placement direct des donn√©es.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La RAM est connect√©e au CPU via le bus et sa lecture prend un certain temps. Pour acc√©l√©rer le CPU, il dispose d'un cache, c'est-√†-dire La zone dans laquelle se trouvent les transistors repr√©sentant des donn√©es qui seront bient√¥t n√©cessaires ou souvent utilis√©es, leur lecture est beaucoup plus rapide que celle de la carte RAM, qui communique avec le CPU via le North Bridge. La RAM est appel√©e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dynamic Random Access Memory</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , car les condensateurs sont utilis√©s pour repr√©senter les donn√©es qu'elle contient. Un condensateur est un √©l√©ment radio qui, comme une batterie, conserve une charge pendant un certain temps jusqu'√† ce qu'il soit compl√®tement d√©charg√©. Ce n'est qu'ici que la d√©charge se produit tr√®s rapidement. Par cons√©quent, les condensateurs doivent √™tre recharg√©s, cela se produit instantan√©ment, il suffit d'appliquer une tension. Condensateur charg√© - logique 1, sinon 0. Pour la m√©moire cache est utilis√©e</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM statique,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> c'est-√†-dire </font><font style="vertical-align: inherit;">il n'a pas besoin d'√™tre recharg√© et fonctionne donc plus rapidement, mais co√ªte plus cher. </font><font style="vertical-align: inherit;">Le cache est divis√© en 3 niveaux, qui sont v√©rifi√©s s√©quentiellement lors de la recherche des donn√©es demand√©es avant que le processeur n'acc√®de √† la RAM. </font><font style="vertical-align: inherit;">Sur les processeurs plus anciens, le cache de premier niveau (L1) faisait partie du processeur et fonctionnait avec lui √† la m√™me fr√©quence, lorsque les caches L2 et L3 √©taient des puces externes. </font><font style="vertical-align: inherit;">Maintenant, ils sont tous sur la m√™me puce que le processeur. </font><font style="vertical-align: inherit;">Le cache L1 est le plus rapide et le plus petit en taille de m√©moire, L2 a plus de m√©moire mais plus lentement. </font><font style="vertical-align: inherit;">L3 est le plus grand cache et le plus lent, souvent appel√© </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cache partag√©</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , car il stocke les donn√©es pour tous les c≈ìurs de processeur, tandis que L1 et L2 sont cr√©√©s pour chaque c≈ìur individuel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la partie suivante, nous parlerons de la fa√ßon dont Windows re√ßoit et traite les donn√©es re√ßues.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr489152/index.html">Petersburg vs Paris: comment les mus√©es se reconstituent et comment diminuent le domaine public</a></li>
<li><a href="../fr489156/index.html">Qui est plus intelligent que IDEA?</a></li>
<li><a href="../fr489160/index.html">R√©sultats d'une √©tude sur les offres d'emploi pour un concepteur de produits num√©riques. Premi√®re partie - R√©sultats et statistiques</a></li>
<li><a href="../fr489162/index.html">Le gestionnaire remettra</a></li>
<li><a href="../fr489164/index.html">Mise √† niveau du cluster Kubernetes sans temps d'arr√™t</a></li>
<li><a href="../fr489172/index.html">Nous attachons l'autorisation ActiveDirectory √† Kubernetes avec Keycloak</a></li>
<li><a href="../fr489174/index.html">Principe de responsabilit√© unique (PRS) avec Laravel</a></li>
<li><a href="../fr489178/index.html">GSMout - recevez des SMS et des appels ¬´√† la maison¬ª</a></li>
<li><a href="../fr489188/index.html">Se connecter dans un environnement microservice .Net en pratique</a></li>
<li><a href="../fr489190/index.html">Etude RedHat: l'open source d√©place les logiciels propri√©taires du segment entreprise</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>