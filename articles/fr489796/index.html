<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍞 🍴 🥁 Téléphone GSM avec numéroteur à disque 👩‍❤️‍👨 🛌🏽 👨‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Certes, de nombreux amateurs de radio ont eu l'idée d'adapter un téléphone avec un numéroteur à disque pour les communications radio mobiles. 
 
 La c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Téléphone GSM avec numéroteur à disque</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489796/"><img src="https://habrastorage.org/webt/dn/3a/ch/dn3achv8ylmriosnw_nkwcveo4g.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Certes, de nombreux amateurs de radio ont eu l'idée d'adapter un téléphone avec un numéroteur à disque pour les communications radio mobiles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La communication filaire devient progressivement une chose du passé, et de tels appareils accumulent de la poussière sur une étagère. </font><font style="vertical-align: inherit;">J'ai toujours aimé l'apparence de ces appareils. </font><font style="vertical-align: inherit;">Je n'ai pas pu résister et il y a deux ans j'ai décidé de refaire le téléphone, qui fonctionne toujours, sans échecs.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus du téléphone, les appareils suivants sont nécessaires:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tout téléphone mobile bouton;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">batterie lithium-ion de taille 18650 et un dispositif de charge (Powerbank);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Câble micro répartiteur USB BF (femelle) -2 x Micro USB BM (mâle);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contrôleur sur la puce ATtiny2313.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Électronique</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diagramme de l'ensemble du microcontrôleur avec un téléphone portable et un numéroteur. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2s/wi/an/2swianzi_5w7dxx5ksereqrv0xc.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, il faut souder aux contacts des boutons du téléphone mobile, la boucle de câble et se connecter au contrôleur. </font><font style="vertical-align: inherit;">Un contrôleur pour apprendre à composer lors de la composition des numéros correspondants sur le disque. </font><font style="vertical-align: inherit;">Très probablement, la disposition des boutons sur la plupart des téléphones mobiles sera similaire. </font><font style="vertical-align: inherit;">Pour mon schéma, il est nécessaire: un fil commun pour les groupes de boutons 1-4-7, 2-5-8-0 et 3-6-9 et un fil pour chaque chiffre; </font><font style="vertical-align: inherit;">une paire de conducteurs sur le bouton d'appel, le bouton d'annulation et le bouton pour passer d'une carte SIM à une seconde.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9p/ak/od/9pakoda86qhnbxsuozdlz7qzsvu.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après le soudage, nous récupérons le téléphone portable dans le boîtier et le fixons à l'intérieur du téléphone avec des supports. J'ai monté le téléphone mobile avec l'écran orienté vers le bas afin de pouvoir visualiser les informations à travers la fenêtre existante en bas du téléphone, ainsi que d'accéder aux autres boutons qui ne sont pas associés au numéroteur à disque. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la composition d'un numéro sur un disque, une paire de contacts s'ouvre (contacts NC normalement fermés, fil vert-jaune). Le nombre d'ouvertures (P) correspond au chiffre défini, par exemple lors de la composition de "1" = --, "2" = ----, etc. Lorsque le doigt atteint la butée, une autre paire de contacts se ferme brièvement (blanc-brun). À l'aide de ces deux paires de contacts, vous pouvez programmer le processus de numérotation.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ss/ag/1i/ssag1ihyv-rvkpbyfakzxwk2d-a.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La carte contrôleur est réalisée en tenant compte de la forme de l'appareil et de l'emplacement du groupe de contact sous le tube. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque contact sous le bouton est commuté par un optocoupleur dont l'inclusion est contrôlée par le microcontrôleur.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ze/6p/_e/ze6p_ecgxsa75vegwsemeyzz-wo.jpeg" alt="image"><br>
<br>
<img src="https://habrastorage.org/webt/zz/bw/uz/zzbwuzpe4kgkgbeh3hqnqwofx7y.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La banque d'alimentation (sur la photo dans le boîtier noir) continue de fonctionner comme source, en commençant par une charge d'environ 20 mA, si elle est inférieure, elle passera en mode veille. Par conséquent, un interrupteur à lames a été monté près du levier qui, lors du levage du tube, alimente la LED par une résistance (non représentée sur le schéma de circuit). La LED, en tant que charge, devrait être utilisée plus puissante, une petite ne fonctionnera pas. Vous pouvez également alimenter le circuit directement à partir des contacts de la batterie, mais vous devez ensuite régler l'alimentation du microcontrôleur à une basse tension lorsque les bits de fusible clignotent. La batterie est alimentée par la carte contrôleur et le téléphone portable. La banque d'alimentation est chargée via un câble USB. Même sans passer en mode veille, la capacité de la batterie pour alimenter la carte contrôleur et le téléphone portable est suffisante pour deux semaines d'autonomie.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/7z/qm/gw7zqme_aiqmawjykp7grk4h80w.jpeg" alt="image"><br>
<br>
<img src="https://habrastorage.org/webt/ae/cf/ir/aecfirlszhxpof2ovpzqz3z2zgk.jpeg" alt="image"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez monter un casque de téléphone portable dans le combiné, au lieu des capsules de microphone et de haut-parleur. Mais je suis allé dans l'autre sens et refait le combiné avec des capsules et la prise audio 3,5 mm. Connexion: la base du connecteur - sur les fils jaunes et blancs («-» du microphone (360Ω) et «-» du haut-parleur (340 Ω)); le second à partir de la base de l'anneau - sur marron (microphone «+»); le troisième de la base de l'anneau - au vert (haut-parleur «+»). Les couleurs des fils pour chaque modèle d'appareils sont différentes! Des impédances supplémentaires ont été sélectionnées en fonction de la résistance des bobines du casque, du microphone (2000 Ω) et du haut-parleur (45 Ω). Pour les autres modèles de téléphones mobiles, la résistance doit être différente. Expérimentez avec des téléphones portables auxquels vous avez déjà dit au revoir, pas le fait qu'ils survivront après de telles manipulations!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le schéma, vous devez ajouter un nœud pour passer un appel, car l'appel électronique ordinaire d'un téléphone mobile s'est avéré moins coloré que dans l'ancien appareil et silencieux! </font><font style="vertical-align: inherit;">Dans mon cas, il n'y avait pas de conclusions supplémentaires sur le microcontrôleur, j'ai donc dû refuser l'appel électromécanique, ce que j'ai regretté plus tard. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant le fonctionnement, j'ai découvert que vous devez toujours dupliquer le numéroteur de disque avec les boutons. </font><font style="vertical-align: inherit;">Comme le disque ne fonctionnera pas pour écrire du texte, disons envoyer un SMS lors de l'inscription.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algorithme de fonctionnement du contrôleur</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne donnerai que l'algorithme (commentaires). Toute l'essence de l'algorithme, dans un cycle: activer, désactiver les ports sous certaines conditions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
while (1) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 { </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Procédure pour une pression de courte durée sur le bouton «annuler l'appel» depuis le bouton sous le combiné (lorsque le combiné est décroché, le contact est constamment fermé). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. S'il y a 0 sur PA1 (le contact  est fermé, le récepteur est décroché), passez au code ci-dessous: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Allumez PD4 (le téléphone portable sort du mode veille); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Éteignez le PD4. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. S'il y a 1 sur PA1 (AUCUN contact n'est ouvert, le bouton est enfoncé, l'appel est annulé lorsqu'un appel entrant est reçu), passez ensuite au code ci-dessous: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Démarrez le compteur de la minuterie sous le combiné. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si les contacts des boutons sous le combiné ont été ouverts pendant moins de 3,1 secondes, suivez le code ci-dessous:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Activez PD2 (annulation d'appel pour un appel entrant); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Éteignez PD2; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Mise à zéro du numéro, pour un nouvel ensemble avec un appel sortant. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si les contacts du bouton sous le combiné ont été ouverts pendant plus de 3,1 secondes, alors le code ci-dessous: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Réinitialise l'état des contacts du bouton sous le combiné pour recommencer le cycle </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Réinitialise le numéro pour une nouvelle numérotation avec un appel sortant. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Procédure d'interrogation des contacts PD0 et PD1: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - S'il y a 0 sur PD1 (contact NO fermé) et 1 sur PD0 (contact NC ouvert), passez au code ci-dessous: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Compteur du chiffre composé du numéro (de 0 à 9); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - S'il y a 0 sur PD0 (contact NF fermé), passez au code ci-dessous; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - S'il y a 1 sur PD1 (contact NO ouvert), passez au code ci-dessous;</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Le compteur du nombre de chiffres composés (total 11: 87.XX.XXXXXXX). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. La procédure pour basculer automatiquement vers une deuxième carte SIM (vers un autre opérateur télécom, en fonction du préfixe du code numérique, 3e et 4e chiffres): </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Mettre en surbrillance des dizaines dans le préfixe p10 = n * 10; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - L'allocation des unités dans le préfixe p1 = n; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Formation d'un préfixe pour la condition ci-dessous; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Si le préfixe opérateur n ° 1 est basculé sur SIM1. Dans le jeu suivant, si le préfixe est le même, le passage à SIM1 ne se fera pas </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Allumez PD3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - </font><font style="vertical-align: inherit;">Désactivez </font><font style="vertical-align: inherit;">PD3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Si le préfixe opérateur n ° 2 passe à SIM2. Dans le jeu suivant, si le préfixe est le même, le passage à SIM2 n'aura pas lieu </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Allumez PD3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - </font><font style="vertical-align: inherit;">Désactivez </font><font style="vertical-align: inherit;">PD3</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6. La procédure pour allumer la LED "passage à SIM1": </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - pour que la LED ne fonctionne pas en mode veille; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - commutation. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7. Activez les broches des ports PB et PD pour les boutons 0–9. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8. La procédure d'appel du numéro composé. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
} </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le cinquième point pour passer automatiquement à une autre carte SIM, quelqu'un n'en aura pas besoin et vous pouvez l'exclure. Le code est assez primitif (si {} else {} dans une boucle infinie), c'est pourquoi il fonctionne de manière stable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la conception, essayez de ne pas endommager le boîtier en perçant et en sciant à l'aide d'ouvertures et de fentes standard. Certes, la norme GSM sera complètement obsolète, il y aura de nouvelles normes de communication qui peuvent être utilisées en la mettant en œuvre dans le même cas rétro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je tiens à avertir les concepteurs qui veulent répéter l'assemblage d'un appareil similaire qu'après cela il y a toujours une envie de démonter et de mettre à jour le remplissage, à la vue des rares téléphones. </font><font style="vertical-align: inherit;">Et pourtant, ne parlez pas sur un tel appareil à l'extérieur, les témoins oculaires peuvent penser mal de vous!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr489784/index.html">27 février - début du projet pour les étudiants de NX Bootcamp à Novossibirsk</a></li>
<li><a href="../fr489786/index.html">Chaud, tube et très dangereux</a></li>
<li><a href="../fr489788/index.html">Comment jouer sur Nintendo 64?</a></li>
<li><a href="../fr489790/index.html">Terminal tactile pour environnements difficiles</a></li>
<li><a href="../fr489794/index.html">Article non technique sur les articles techniques</a></li>
<li><a href="../fr489798/index.html">Assembleur dans l'industrie aéronautique: entretien avec un développeur de pilote automatique ASM pour avions et drones</a></li>
<li><a href="../fr489800/index.html">Les premiers ordinateurs en Afrique de l'Est</a></li>
<li><a href="../fr489802/index.html">Démolition de la tour et calcul précis. April Fools NUC Intel contest</a></li>
<li><a href="../fr489804/index.html">Les autotests pensent-ils aux bugs électriques</a></li>
<li><a href="../fr489806/index.html">Comment supprimer le facteur humain du processus d'embauche et l'accélérer par ordre de grandeur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>