<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎐 🛌🏾 ↙️ Überarbeitung des Webasyst-Administrationsbereichs ✅ ⛄️ 🌛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel möchte ich erklären, wie ich auf einfache Weise mein Leben ein wenig vereinfachen kann, indem ich die Site in der WebAsyst-Engine au...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Überarbeitung des Webasyst-Administrationsbereichs</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486768/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In diesem Artikel möchte ich erklären, wie ich auf einfache Weise mein Leben ein wenig vereinfachen kann, indem ich die Site in der WebAsyst-Engine ausfülle, sofort Produkte bearbeite und alle Kontrollkästchen auf der Seite entfernen kann. </font><font style="vertical-align: inherit;">Außerdem sparen Sie möglicherweise 500 Rubel beim Kauf eines Plugins, das eines dieser Probleme behebt.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vorwort</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich arbeite im Bereich der Erstellung und Förderung von Websites, und für Online-Shops greifen wir hauptsächlich auf die Webasyst-Engine zurück. </font><font style="vertical-align: inherit;">Ich kann nichts schlechtes über ihn sagen, aber in einem Jahr des Ausfüllens von Websites wurde mir klar, dass mich zwei Dinge nerven, über die ich später sprechen werde. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und als ich mich entschied, in den Code des Admin-Panels selbst zu schauen und zu versuchen, das zu beheben, was mir nicht gefällt.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wechseln Sie zur Produktbearbeitung, indem Sie im Admin-Bereich darauf klicken</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So sieht die Warenliste aus: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gf/9d/o0/gf9do01zggbynyrtierao2amic0.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie einfach auf den Namen in der Warenliste klicken, öffnet sich ein solches Zwischenfenster: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4l/mt/qv/4lmtqv9cxs6mj5-3i_ojgl9y_fk.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Darin können Sie Fotos bearbeiten oder den Namen ändern ... Und wenn Sie auf die Schaltfläche "Bearbeiten" klicken, wird der Übergang direkt angezeigt zum Bearbeiten. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bc/2o/4r/bc2o4rqql7otuvgaywvy7ygdj0c.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielleicht fühlt sich jemand wohl. </font><font style="vertical-align: inherit;">Jemand, aber nicht ich.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erkunden</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie sich den Link ansehen, wird klar, dass die Zwischenseite eine Adresse hat </font></font><br>
<br>
<pre><code class="bash hljs">https:///webasyst/shop/?action=products<span class="hljs-comment">#/product/id</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und die Bearbeitungsseite ist </font></font><code>/edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">am Ende </font><font style="vertical-align: inherit;">gleich + </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir korrigieren</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es war nicht schwierig, die Vorlage für die Produktlisten-Anzeigeseite zu finden. Sie befindet sich unter:</font></font><br>
<br>
<pre><code class="bash hljs">//wa-apps/shop/templates/actions/products/</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt 3 Dateien, deren Name mit beginnt </font></font><code>product_list_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Alle zeichnen das Admin-Panel in 3 Variationen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/d8/uf/en/d8ufennx7rqi39cu3y6wo9vqupi.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anzeige von Waren in Form einer Tabelle, Symbolen und einer Tabelle mit Artikeln. </font><font style="vertical-align: inherit;">Ich benutze nur die Tabellenansicht, daher wähle ich die Datei</font></font><br>
<br>
<pre><code class="bash hljs">product_list_table.html</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem ich den Browser-Seiteninspektor im Admin-Bereich geöffnet hatte, stellte ich fest, dass Produktlinks ungefähr so ​​aussehen: </font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"drag-handle s-product-name"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#/product/6037"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>.  <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"shortener"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gefunden die Zeile in der obigen Datei: </font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"drag-handle s-product-name"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#/product/{%#p.id%}/"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{%#p.name%}<span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"shortener"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> 
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
und am Ende der Bearbeitung hinzugefügt, stellte sich heraus, dass:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"drag-handle s-product-name"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#/product/{%#p.id%}/edit"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{%#p.name%}<span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"shortener"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> 
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und es hat funktioniert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Übrigens habe ich auf den Flächen des Installationsprogramms ein Plug-In gesehen, das für dieselbe Aufgabe benötigt wird, aber 500 Rubel kostet.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kontrollkästchen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf der Baustelle, die am häufigsten gefüllt werden muss, werden verschiedene zusätzliche Komponenten für Türen mit den "Services" implementiert. </font><font style="vertical-align: inherit;">Jedes Produkt (Tür) ist seiner Kategorie zugeordnet. Da es unmöglich ist, einer Kategorie eine Dienstleistung zuzuweisen, werden alle Produkte weiterhin in verschiedene Warentypen sortiert, bei denen es sich normalerweise um doppelte Kategorien handelt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das heißt, alles, was sich in der Kategorie „Eins“ befindet, gehört zum Produkttyp „Eins“. </font><font style="vertical-align: inherit;">Es gibt jedoch Ausnahmen, wenn der Preis für Komponenten in einer Kategorie je nach Farbe der Tür usw. unterschiedlich ist. </font><font style="vertical-align: inherit;">Dann werden die Produkttypen "one.1", "one.2" usw. erstellt. </font><font style="vertical-align: inherit;">Und für jeden Typ müssen Sie Ihre eigenen Dienste mit ihren eigenen Preisen erstellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ansicht im Admin-Bereich: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xl/4a/k7/xl4ak7jmqpwyjbjczh_lwms4xli.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ansicht vor Ort:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ov/o1/uc/ovo1ucvxwrga45h4xtwth_dob6w.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es war erforderlich, viele solcher Services zu erstellen, und es war erforderlich, 1 bis 5 Kontrollkästchen zu markieren. Beim Erstellen eines neuen „Service“ waren standardmäßig alle Kontrollkästchen in der Liste der Produkttypen bereits markiert. </font><font style="vertical-align: inherit;">Zuerst habe ich alles manuell entfernt, so dass es notwendig war, aber natürlich hat es viel Zeit gekostet, ungefähr hundert Kontrollkästchen zu entfernen, und ich habe jedes Mal, wenn ich einen „Dienst“ erstellt habe, angefangen, den Code in die Konsole zu schreiben:</font></font><br>
<br>
<pre><code class="javascript hljs">$(<span class="hljs-string">'body input:checkbox'</span>).prop(<span class="hljs-string">'checked'</span>, <span class="hljs-literal">false</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Code entfernt alle aktivierten Kontrollkästchen auf der Seite. </font><font style="vertical-align: inherit;">Es hat funktioniert, aber es war immer noch nicht sehr praktisch. </font><font style="vertical-align: inherit;">Daher habe ich zwei Optionen gesehen: Bearbeiten Sie den Code so, dass beim Erstellen des Dienstes die Kontrollkästchen im deaktivierten Status und nicht im markierten Status angezeigt werden, oder fügen Sie der Administrationsoberfläche die Schaltfläche "Alle Kontrollkästchen entfernen" hinzu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meine Kenntnisse in JS sind extrem gering, deshalb habe ich mich für die zweite Methode entschieden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wurde eine Renderdatei für die Dienstbearbeitungsoberfläche gefunden:</font></font><br>
<br>
<pre><code class="bash hljs">//wa-apps/shop/templates/actions/services/Services.html</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und darin ist der Schaltflächencode für den "Dienst löschen":</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"s-delete-service"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon16 delete"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><font></font>
        [`Delete this service`]<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ohne nachzudenken, fügte ich eine Schaltfläche direkt neben dem aktuellen einsamen "Löschen" hinzu, indem ich den folgenden Code platzierte: </font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"  "</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">"$('body input:checkbox').prop('checked', false);"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie darauf klicken, wird der obige JS-Code ausgeführt und alles funktioniert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vor dem Klicken: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oe/4d/w8/oe4dw8cwr238w6qub5_7fk7z2xu.jpeg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Drücken: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7n/du/44/7ndu44vigzremn1175tmek7q_su.jpeg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielleicht könnte all dies einfacher gelöst werden, aber ich entschied mich so gut ich konnte. </font><font style="vertical-align: inherit;">Ich hoffe, jemand wird dies hilfreich finden.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de486768/">https://habr.com/ru/post/de486768/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de486756/index.html">Python für den Tester: Wie kleine C-Pandas-Skripte helfen, große Datenmengen zu testen</a></li>
<li><a href="../de486760/index.html">Sicherheitswoche 06: Werbe-Tracker in mobilen Anwendungen</a></li>
<li><a href="../de486762/index.html">Bedside Hosting: die gruselige Praxis des Home Hosting</a></li>
<li><a href="../de486764/index.html">Do-it-yourself Schema.org: Anpassen des Mikrolayouts ohne Programmierer</a></li>
<li><a href="../de486766/index.html">Wie übertrage ich alle Transaktionen online auf dem archaischen Factoring-Markt? Erfahrung mit Sberbank Factoring</a></li>
<li><a href="../de486772/index.html">Brennen, aber nicht brennen - brennen, um zu glänzen</a></li>
<li><a href="../de486776/index.html">Code-Vervollständigung und Typprüfung für boto3</a></li>
<li><a href="../de486778/index.html">SSO zur Microservice-Architektur. Wir benutzen Keycloak. Teilenummer 1</a></li>
<li><a href="../de486780/index.html">Frontend-Entwicklung im Unternehmen: Was es ist und wie es effektiv gemacht werden kann</a></li>
<li><a href="../de486782/index.html">UI / UX - Design. Trends und Prognosen für 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>