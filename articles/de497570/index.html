<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüè≠ ü•ò üëàüèº Datenbanken auf der IIoT-Plattform: Funktionsweise von Mail.ru Cloud Solutions mit Petabyte an Daten von mehreren Ger√§ten üöé üé¶ üë©üèø‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo, ich bin Andrey Sergeev, der Leiter der Entwicklungsgruppe f√ºr IoT-L√∂sungen bei Mail.ru Cloud Solutions . Es ist bekannt, dass keine universelle...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Datenbanken auf der IIoT-Plattform: Funktionsweise von Mail.ru Cloud Solutions mit Petabyte an Daten von mehreren Ger√§ten</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/497570/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/cq/9y/ln/cq9yln3qusppabwqddmvvyftzdk.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hallo, ich bin Andrey Sergeev, der Leiter der Entwicklungsgruppe f√ºr IoT-L√∂sungen bei </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mail.ru Cloud Solutions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Es ist bekannt, dass keine universelle Datenbank existiert. </font><font style="vertical-align: inherit;">Insbesondere, wenn Sie eine Internet-of-Things-Plattform aufbauen m√ºssen, die in der Lage ist, Millionen von Ereignissen von Sensoren pro Sekunde nahezu in Echtzeit zu verarbeiten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser Produkt </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mail.ru IoT Platform</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> begann mit einem Prototyp, der auf Tarantool basiert. </font><font style="vertical-align: inherit;">Ich werde Ihnen sagen, welchen Weg wir gegangen sind, auf welche Probleme wir gesto√üen sind und wie wir sie gel√∂st haben. </font><font style="vertical-align: inherit;">Und zeigen Sie auch die aktuelle Architektur der modernen Plattform des industriellen Internet der Dinge. </font><font style="vertical-align: inherit;">In dem Artikel werden wir sprechen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√ºber unsere Datenbankanforderungen, die universelle L√∂sung und den CAP-Satz;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ob die Datenbank + der Anwendungsserver in einem Ansatz eine Silberkugel ist;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√ºber die Entwicklung der Plattform und der darin verwendeten Datenbanken;</font></font></li>
<li> ,     Tarantool‚Äô       .</li>
</ul><a name="habracut"></a><br>
<i>  ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">@Databases Meetup</a> by Mail.ru Cloud Solutions.    ,  :</i><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/wigSv2_zWBU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<h2>Mail.ru IoT Platform   </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser Produkt Mail.ru IoT Platform ist eine skalierbare und hardwareunabh√§ngige Plattform zum Erstellen von L√∂sungen f√ºr das industrielle Internet der Dinge. </font><font style="vertical-align: inherit;">Sie k√∂nnen damit Daten von Hunderttausenden von Ger√§ten gleichzeitig erfassen und diesen Stream im Echtzeitmodus (d. H. Quasi-Echtzeit) verarbeiten, einschlie√ülich der Verwendung benutzerdefinierter Regeln - Skripte in Python oder Lua. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Plattform kann eine unbegrenzte Menge an Rohdaten aus Quellen speichern. Es gibt eine Reihe vorgefertigter Komponenten zur Visualisierung und Analyse von Daten, integrierte Tools f√ºr die pr√§diktive Analyse und die Erstellung von Anwendungen auf der Basis der Plattform.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/kz/eq/lx/kzeqlxssqhyx4fop4gl2ifrnxwe.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So sieht das Ger√§t der Mail.ru IoT-Plattform aus.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Derzeit steht die Plattform f√ºr die Installation nach dem On-Premise-Modell beim Kunden zur Verf√ºgung. In diesem Jahr ist geplant, die Plattform als Service in der √∂ffentlichen Cloud freizugeben.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarantool-Prototyp: Wie alles begann</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere Plattform begann als Pilotprojekt - ein Prototyp mit einer einzelnen Instanz von Tarantool, dessen Hauptfunktion darin bestand, den Datenfluss von einem OPC-Server zu empfangen, empfangene Ereignisse mithilfe von Lua-Skripten in Echtzeit zu verarbeiten, darauf basierende Schl√ºsselindikatoren zu √ºberwachen und Ereignisse und Warnungen in zu generieren √ºberlegene Systeme.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/258/2a5/f8c/2582a5f8c1d12d5717365bb82081efa4.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarantool-Prototyp-Schema</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dieser Prototyp arbeitete sogar mehrere Monate unter Kampfbedingungen an einem Cluster-Standort. Er ist eine Plattform f√ºr die √ñlf√∂rderung auf hoher See im Irak am Persischen Golf. </font><font style="vertical-align: inherit;">Er √ºberwachte Schl√ºsselindikatoren und lieferte Daten f√ºr das Visualisierungssystem und das Ereignisprotokoll. </font><font style="vertical-align: inherit;">Der Pilot wurde als erfolgreich anerkannt, aber wie so oft bei Prototypen - er ging nicht √ºber den Piloten hinaus und der Prototyp wurde lange Zeit auf Eis gelegt, bis er in unsere H√§nde fiel.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unsere Ziele bei der Entwicklung einer IoT-Plattform</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusammen mit dem Prototyp hatten wir die Aufgabe, eine vollwertige, skalierbare und fehlertolerante IoT-Plattform zu erstellen, die sp√§ter als Dienst in einer √∂ffentlichen Cloud gestartet werden konnte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir mussten eine Plattform mit der folgenden Einf√ºhrung erstellen:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schlie√üen Sie Hunderttausende von Ger√§ten gleichzeitig an.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erhalten Sie Millionen von Ereignissen pro Sekunde.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stream-Verarbeitung im Echtzeitmodus.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speicherung von Rohdaten √ºber mehrere Jahre.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tools f√ºr Streaming-Analysen und historische Analysen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bereitstellungsunterst√ºtzung in mehreren Rechenzentren f√ºr maximale Notfallwiederherstellung.</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vor- und Nachteile des Plattformprototyps</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Zeitpunkt des Beginns der aktiven Entwicklung sah der Prototyp wie folgt aus:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarantool, das als Datenbank + Anwendungsserver (Anwendungsserver) verwendet wird;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alle Daten werden im Tarantool-Speicher gespeichert.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine Anwendung auf Lua im selben Tarantool, die die Funktionen zum Empfangen, Verarbeiten und Aufrufen von Benutzerskripten f√ºr eingehende Daten ausf√ºhrt.</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieser Ansatz zum Erstellen von Anwendungen hat seine Vorteile</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Code und die Daten befinden sich an einem Ort, sodass Sie die Daten direkt im Speicher der Anwendung verarbeiten k√∂nnen und die f√ºr herk√∂mmliche Anwendungen typischen Overhead-Kosten f√ºr Netzwerkbesuche entfallen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarantool verwendet JIT (Just in Time Compiler) f√ºr Lua, das zur Kompilierungszeit Lua-Code in Maschinencode kompiliert, wodurch einfache Lua-Skripte mit einer Geschwindigkeit ausgef√ºhrt werden k√∂nnen, die mit C-Code vergleichbar ist (40.000 RPS von einem Kern - und dies ist nicht die Grenze !).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarantool basiert auf kooperativem Multitasking, dh jeder Aufruf der gespeicherten Prozedur wird in einer eigenen Faser gestartet, einem Analogon von Coroutine, das die Leistung bei Aufgaben mit E / A-Vorg√§ngen, z. B. Netzwerkbesuchen, noch weiter steigert.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Effiziente Ressourcennutzung - Nur wenige Tools k√∂nnen 40.000 Anforderungen pro Sekunde von einem einzelnen CPU-Kern aus verarbeiten.</font></font></li>
</ol><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt jedoch erhebliche Nachteile</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir m√ºssen Rohdaten von Ger√§ten mehrere Jahre lang speichern, aber wir haben nicht Hunderte von Petabyte Speicher f√ºr Tarantool.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine direkte Folge des ersten Plus: Der gesamte Code unserer Plattform sind gespeicherte Prozeduren in der Datenbank. Dies bedeutet, dass jede Aktualisierung der Codebasis der Plattform eine Aktualisierung der Datenbank ist, was sehr schmerzhaft ist.</font></font></li>
<li>  ,           .  ,        Tarantool       24-32   (Tarantool       )    .          ‚Äî        Tarantool,    .</li>
<li>        .    - ,  Tarantool   Lua    ,   - ,  LuaJIT           .</li>
</ol><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tarantool ist eine gute Wahl f√ºr die Erstellung von MVP, aber f√ºr eine vollwertige, skalierbare, einfach zu unterst√ºtzende und fehlertolerante IoT-Plattform, die Daten von Hunderttausenden von Ger√§ten empfangen, verarbeiten und speichern kann, ist es nicht geeignet.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Hauptschmerzen des Prototyps, die wir loswerden wollten</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zun√§chst wollten wir zwei Schmerzen unseres Prototyps heilen:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verlassen Sie das Konzept des Datenbank- und Anwendungsdienstes. </font><font style="vertical-align: inherit;">Wir wollten den Anwendungscode unabh√§ngig vom Datenspeicher aktualisieren.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vereinfachen Sie die dynamische Skalierung unter Last. </font><font style="vertical-align: inherit;">Ich wollte eine einfache unabh√§ngige horizontale Skalierung von so vielen Funktionen wie m√∂glich erhalten.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um diese Probleme zu l√∂sen, haben wir einen innovativen und noch nicht getesteten Ansatz gew√§hlt: Microservice-Architektur und Trennung von Diensten in Stateless-Anwendungen und Stateful-Datenbanken. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um den Betrieb und die horizontale Skalierung von zustandslosen Diensten weiter zu vereinfachen, haben wir sie containerisiert und Kubernetes √ºbernommen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0db/687/017/0db687017d254d99d9502d5b4362a4f2.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben herausgefunden, dass zustandslose Dienste noch zu entscheiden sind, was mit den Daten geschehen soll.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grundlegende Datenbankanforderungen f√ºr die IoT-Plattform</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anfangs wollten wir den Garten nicht umz√§unen und alle Plattformdaten in einer universellen Datenbank speichern. </font><font style="vertical-align: inherit;">Nach der Analyse der Ziele kamen wir zu der folgenden Liste von Anforderungen f√ºr eine universelle Datenbank:</font></font><br>
<br>
<ol>
<li><strong>ACID-</strong> ‚Äî        ,          .</li>
<li><strong> </strong> ‚Äî         .</li>
<li><strong>     </strong> ‚Äî      ,         near real-time.</li>
<li><strong></strong> ‚Äî        -    .</li>
<li><strong></strong> ‚Äî      ,          .</li>
<li><strong> </strong> <strong>  </strong> ‚Äî          (  !),     .</li>
<li><strong> </strong>‚Äî           ,       (      !).</li>
<li><strong>SQL</strong> ‚Äî         .</li>
</ol><br>
<h2>      CAP-</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bevor wir anfingen, alle auf dem Markt befindlichen Datenbanken zu sortieren, um unsere Anforderungen zu erf√ºllen, haben wir uns entschlossen, unsere Anforderungen an die Vernunft mit einem ziemlich bekannten Tool - CAP-Theoremen - zu validieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das CAP-Theorem besagt, dass ein verteiltes System maximal zwei der folgenden drei Eigenschaften haben kann:</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konsistenz (Datenkonsistenz)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - In allen Rechenknoten zu einem bestimmten Zeitpunkt widersprechen sich die Daten nicht.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verf√ºgbarkeit</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Jede Anfrage an ein verteiltes System endet mit einer korrekten Antwort, jedoch ohne Garantie, dass die Antworten aller Knoten im System √ºbereinstimmen.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partitionstoleranz</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Auch wenn keine Verbindung zwischen Knoten besteht, arbeiten diese weiterhin unabh√§ngig voneinander.</font></font></li>
</ol><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/_p/8i/0o/_p8i0olwyxcps5ymii2x6j1diow.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das klassische CA-System ist beispielsweise ein PostgreSQL-Master-Slave-Cluster mit synchroner Replikation, und das klassische AP-System ist Cassandra. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kehren wir zu unseren Anforderungen zur√ºck und klassifizieren sie anhand des CAP-Theorems:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACID-Transaktionen und strenge Konsistenz (oder zumindest keine eventuelle Konsistenz) sind C.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die horizontale Skalierung zum Schreiben und Lesen sowie die hohe Verf√ºgbarkeit betr√§gt A (Multi-Master).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Fehlertoleranz ist P, wenn ein Rechenzentrum ausf√§llt, sollte die Plattform nicht sterben.</font></font></li>
</ol><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xv/fr/ju/xvfrjubabyxcsbepcrhpr_fuht0.jpeg"></div><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schlussfolgerung</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Die universelle Datenbank, die wir ben√∂tigen, muss alle drei Eigenschaften des CAP-Theorems haben, was bedeutet, dass es keine universelle Datenbank f√ºr alle unsere Anforderungen gibt.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ausw√§hlen einer Datenbank f√ºr die Daten, mit denen die IoT-Plattform arbeitet</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie keine universelle Datenbank ausw√§hlen k√∂nnen, haben wir uns entschieden, die Datentypen auszuw√§hlen, mit denen die Plattform arbeiten soll, und f√ºr jeden Typ eine Datenbank auszuw√§hlen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In erster N√§herung haben wir die Daten in zwei Typen unterteilt:</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metainformationen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sind ein Modell der Welt, Ger√§te, Einstellungen, Regeln, fast alle Daten, au√üer denen, die Endger√§te √ºbertragen.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rohdaten von Ger√§ten</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Sensorwerte, Telemetrie und Serviceinformationen von Ger√§ten. </font><font style="vertical-align: inherit;">Tats√§chlich handelt es sich hierbei um Zeitreihen, in denen jede einzelne Nachricht einen Wert und einen Zeitstempel enth√§lt.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ausw√§hlen einer Datenbank f√ºr Metadaten</font></font></h3><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datenbankanforderungen f√ºr Metadaten</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Metadaten sind von Natur aus relational. Sie zeichnen sich durch eine geringe Menge aus, werden selten ge√§ndert, sind jedoch wichtige Daten und k√∂nnen nicht verloren gehen. Daher ist die Konsistenz auch im Rahmen der asynchronen Replikation sowie der ACID-Transaktionen und der horizontalen Leseskalierung wichtig. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt relativ wenig solcher Daten und sie werden relativ selten ge√§ndert, sodass Sie die horizontale Skalierung f√ºr die Aufzeichnung sowie die m√∂gliche Unzug√§nglichkeit der Aufzeichnungsdatenbank im Falle eines Unfalls opfern k√∂nnen. Das hei√üt, im Sinne des CAP-Theorems ben√∂tigen wir ein CA-System. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Welches ist im Normalfall geeignet</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mit einer solchen Problemstellung w√§re jede klassische relationale Datenbank mit Unterst√ºtzung f√ºr Cluster mit asynchroner Replikation wie PostgreSQL oder MySQL f√ºr uns durchaus geeignet.</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Merkmale unserer Plattform</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wir brauchten auch Unterst√ºtzung f√ºr B√§ume mit spezifischen Anforderungen. Als Teil des Prototyps gab es eine Funktion aus den Systemen der BDVV-Klasse (Echtzeitdatenbanken) - die Modellierung der Welt mithilfe eines Tag-Baums. Mit ihnen k√∂nnen Sie alle Clientger√§te in einer Baumstruktur kombinieren, was die Verwaltung einer gro√üen Anzahl von Ger√§ten und deren Anzeige erleichtert.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b7c/58e/f7e/b7c58ef7ef64fc742bcbd0f3190d5510.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So sieht die Anzeige von Ger√§ten in Form einer Baumstruktur aus. Mit einem</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
solchen Baum k√∂nnen Sie Endger√§te mit der Umgebung verkn√ºpfen. Sie k√∂nnen beispielsweise Ger√§te, die sich physisch in einem Raum befinden, in einem Teilbaum platzieren, was die Arbeit mit ihnen in Zukunft erheblich erleichtert. </font><font style="vertical-align: inherit;">Dies ist eine praktische Funktion, au√üerdem wollten wir in der Nische des Luftz√ºndsystems arbeiten, und dort ist das Vorhandensein einer solchen Funktionalit√§t tats√§chlich der Industriestandard. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr die vollst√§ndige Implementierung von Tag-B√§umen muss eine potenzielle Datenbank die folgenden Anforderungen erf√ºllen:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unterst√ºtzung f√ºr B√§ume mit beliebiger Breite und Tiefe.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ñnderung von Baumelementen in ACID-Transaktionen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hohe Leistung beim √úberqueren eines Baumes.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klassische relationale Datenbanken k√∂nnen mit kleinen B√§umen ziemlich gut umgehen, aber mit beliebigen B√§umen nicht so gut. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√∂gliche L√∂sung. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden Sie zwei Datenbanken - eine Diagrammdatenbank zum Speichern eines Baums und eine relationale Datenbank zum Speichern der restlichen Metainformationen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Ansatz hat mehrere gro√üe Nachteile gleichzeitig:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um die Konsistenz zwischen zwei Datenbanken sicherzustellen, m√ºssen Sie einen externen Transaktionskoordinator hinzuf√ºgen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieses Design ist schwer zu warten und nicht sehr zuverl√§ssig.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei der Ausgabe erhalten wir zwei Datenbanken anstelle von einer, w√§hrend die Diagrammdatenbank nur zur Unterst√ºtzung eingeschr√§nkter Funktionen ben√∂tigt wird.</font></font></li>
</ol><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5db/00d/e2d/5db00de2daec50d59dded73a98bc932c.jpg"></div><br>
<h4><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine m√∂gliche, aber nicht sehr gute L√∂sung mit zwei Datenbanken</font></font></i></h4><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unsere L√∂sung zum Speichern von Metadaten</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wir haben auch gedacht und uns daran erinnert, dass diese Funktionalit√§t urspr√ºnglich in einem auf Tarantool basierenden Prototyp implementiert wurde und sich als sehr gut herausstellte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bevor ich fortfahre, m√∂chte ich eine nicht standardm√§√üige Definition von Tarantool geben: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarantool ist keine Datenbank, sondern eine Reihe von</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Grundelementen zum </font><strong><font style="vertical-align: inherit;">Erstellen einer Datenbank f√ºr Ihren speziellen Fall. </font></strong></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sofort verf√ºgbare Grundelemente:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speicherplatz - ein Analogon der Tabellen in der Datenbank zum Speichern von Daten.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vollwertige ACID-Transaktionen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Replikation erfolgt asynchron mithilfe von WAL-Protokollen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Sharding-Tool, das das automatische Resharding unterst√ºtzt.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Superschnelles LuaJIT f√ºr gespeicherte Prozeduren.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gro√üe Standardbibliothek.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LuaRocks Paketmanager mit noch mehr Paketen.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere CA-L√∂sung war eine relationale + Graph-Datenbank, die auf Tarantool basierte. </font><font style="vertical-align: inherit;">Wir haben das Traum-Meta-Informations-Repository basierend auf Tarantool-Grundelementen zusammengestellt:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Platz f√ºr Datenspeicherung.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACID-Transaktionen - waren verf√ºgbar.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asynchrone Replikation - war verf√ºgbar.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beziehungen - f√ºr gespeicherte Prozeduren.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B√§ume - auch auf gespeicherten Prozeduren erstellt.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Cluster-Installation, die wir haben, ist klassisch f√ºr solche Systeme - ein Master zum Schreiben und mehrere Slive mit asynchroner Replikation zum Skalieren zum Lesen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ergebnis: eine schnelle, skalierbare Mischung aus relationaler und grafischer Datenbank. </font><font style="vertical-align: inherit;">Eine einzelne Tarantool-Instanz kann Tausende von Leseanforderungen verarbeiten, einschlie√ülich solcher mit aktivem Baumdurchlauf.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ausw√§hlen einer Datenbank f√ºr Daten von Ger√§ten</font></font></h3><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datenbankanforderungen f√ºr Daten von Ger√§ten</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Diese Daten zeichnen sich durch h√§ufiges Aufzeichnen und eine gro√üe Datenmenge aus: Millionen von Ger√§ten, mehrj√§hrige Speicherung, Petabyte an Informationen sowohl eingehender als auch gespeicherter Daten. Ihre hohe Verf√ºgbarkeit ist wichtig, da es haupts√§chlich die Sensorwerte sind, die sowohl f√ºr Benutzerregeln als auch f√ºr unsere internen Dienste gelten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr eine Datenbank sind die horizontale Skalierung zum Lesen und Schreiben, die Verf√ºgbarkeit und Fehlertoleranz sowie die Verf√ºgbarkeit vorgefertigter Analysetools f√ºr die Arbeit mit diesem Datenarray, vorzugsweise basierend auf SQL, wichtig. Gleichzeitig k√∂nnen wir Konsistenz- und ACID-Transaktionen opfern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das hei√üt, im Rahmen des CAP-Theorems ben√∂tigen wir ein AP-System. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zus√§tzliche Anforderungen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wir hatten mehrere zus√§tzliche Anforderungen, um zu entscheiden, wo die riesigen Datenmengen gespeichert werden sollen:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeitreihen - Daten von Sensoren sind Zeitreihen, ich wollte eine spezialisierte Basis bekommen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open Source - Die Vorteile von Open Source Code erfordern keine Kommentare.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein freier Cluster ist eine h√§ufige Plage unter neuen Datenbanken.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gute Komprimierung - Angesichts der Datenmenge und im Allgemeinen ihrer Einheitlichkeit wollte ich die gespeicherten Daten effektiv komprimieren.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erfolgreicher Betrieb - Wir wollten mit einer Datenbank beginnen, die bereits jemand in der N√§he unserer Lasten aktiv nutzt, um Risiken zu minimieren.</font></font></li>
</ol><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unsere Entscheidung</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ClickHouse entsprach ausschlie√ülich unseren Anforderungen - eine spaltenbasierte Datenbank mit Zeitreihen mit Replikation, Multimaster, Sharding, SQL-Unterst√ºtzung und einem kostenlosen Cluster. </font><font style="vertical-align: inherit;">Dar√ºber hinaus verf√ºgt Mail.ru √ºber langj√§hrige erfolgreiche Erfahrung im Betrieb eines der gr√∂√üten ClickHouse-Cluster im Speichervolumen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber egal wie gut ClickHouse ist, und wir haben Probleme damit.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datenbankprobleme f√ºr diese Ger√§te und ihre L√∂sung</font></font></h3><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Problem mit der Schreibleistung.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sofort gab es ein Problem mit der Schreibleistung eines gro√üen Datenstroms. Sie m√ºssen so schnell wie m√∂glich in die Analysedatenbank gebracht werden, damit die Regeln, die den Ereignisfluss in Echtzeit analysieren, den Verlauf eines bestimmten Ger√§ts anzeigen und entscheiden k√∂nnen, ob eine Warnung ausgel√∂st werden soll oder nicht. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L√∂sung des Problems</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ClickHouse toleriert nicht mehrere einzelne Einf√ºgungen (Einf√ºgungen), funktioniert jedoch gut mit gro√üen Datenstapeln (Batches) - es kann problemlos Stapel in Millionen von Zeilen aufzeichnen. Wir haben uns entschlossen, den eingehenden Datenstrom zu puffern und diese Daten dann stapelweise einzuf√ºgen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/66f/85b/77d/66f85b77dfb1fe8788658f7455bbb56b.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir haben also mit einer schlechten Aufzeichnungsleistung fertig geworden. Das Aufzeichnungsproblem</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
wurde behoben, aber es kostete uns eine erhebliche Verz√∂gerung von mehreren Sekunden zwischen der Eingabe von Daten in das System und ihrem Auftreten in unserer Datenbank. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist entscheidend f√ºr verschiedene Algorithmen, die in Echtzeit auf Daten von Sensoren reagieren. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leistungsproblem lesen.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Stream-Analysen f√ºr die Echtzeit-Datenverarbeitung ben√∂tigen st√§ndig Informationen aus der Datenbank - dies sind Zehntausende kleiner Abfragen. Im Durchschnitt enth√§lt ein ClickHouse-Knoten ungef√§hr hundert analytische Abfragen gleichzeitig. Er wurde f√ºr seltene schwere analytische Abfragen zur Verarbeitung gro√üer Datenmengen erstellt. Dies ist nat√ºrlich nicht geeignet, um Trends im Datenfluss von Hunderttausenden von Sensoren zu berechnen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/20a/34a/2a9/20a34a2a9469b6a0276c8437a7dd6ec8.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei einer gro√üen Anzahl von Anfragen funktioniert ClickHouse nicht gut. </font></font></i><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L√∂sen des Problems</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wir haben uns entschlossen, einen Cache vor ClickHouse zu platzieren, der die am h√§ufigsten angeforderten hei√üen Daten der letzten 24 Stunden enth√§lt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Daten f√ºr die letzten 24 Stunden sind keine Daten f√ºr ein Jahr, sondern auch eine betr√§chtliche Datenmenge. Daher ben√∂tigen wir hier auch ein AP-System mit horizontaler Skalierung zum Lesen und Schreiben, das sich jedoch auf die Leistung sowohl f√ºr die Aufzeichnung einzelner als auch f√ºr mehrere Ereignisse konzentriert lesen. Es erfordert auch Hochverf√ºgbarkeit, Zeitreihenanalyse, Persistenz und integrierte TTL.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Ende brauchten wir ein schnelles ClickHouse, das aus Geschwindigkeitsgr√ºnden sogar alles im Speicher speichern kann. </font><font style="vertical-align: inherit;">Wir haben keine geeignete L√∂sung auf dem Markt gefunden und beschlossen, sie auf der Basis von Tarantool-Grundelementen zu konstruieren:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Persistenz - ist (WAL-Protokolle + Schnappsch√ºsse).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leistung - es gibt alle Daten im Speicher.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skalierung - es gibt Replikation + Sharding.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hohe Verf√ºgbarkeit - gibt es.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tools zur Analyse von Zeitreihen (Gruppierung, Aggregation usw.), die f√ºr gespeicherte Prozeduren erstellt wurden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TTL - erstellt auf gespeicherten Prozeduren mit einer Hintergrundfaser (Coroutine).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellte sich als bequeme und produktive L√∂sung heraus - eine Instanz enth√§lt 10.000 RPCs zum Lesen, einschlie√ülich analytischer Abfragen von bis zu Zehntausenden von Abfragen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist die resultierende Architektur:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb3/ef4/260/fb3ef426007f70be5c2a737b75cea80b.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Endg√ºltige Architektur: ClickHouse als analytische Datenbank und Tarantool-Cache, in dem Daten innerhalb von 24 Stunden gespeichert werden</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neuer Datentyp - Status und dessen Speicherung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben spezialisierte Datenbanken f√ºr alle Daten ausgew√§hlt, aber die Plattform wurde entwickelt und ein neuer Datentyp wurde angezeigt - state. </font><font style="vertical-align: inherit;">Der Status enth√§lt den aktuellen Status von Ger√§ten und Sensoren sowie verschiedene globale Variablen f√ºr Stream-Analyseregeln. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Beispiel gibt es eine Gl√ºhbirne im Raum. </font><font style="vertical-align: inherit;">Es kann sowohl ein- als auch ausgeschaltet werden, und Sie m√ºssen immer Zugriff auf den aktuellen Status haben, auch in den Regeln. </font><font style="vertical-align: inherit;">Ein anderes Beispiel ist eine Variable in Stream-Regeln, beispielsweise eine Art Z√§hler. </font><font style="vertical-align: inherit;">Diese Art von Daten zeichnet sich durch die Notwendigkeit h√§ufiger Aufzeichnungen und schnellen Zugriffs aus, gleichzeitig nehmen die Daten selbst eine relativ geringe Menge ein.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Meta-Informations-Repository ist f√ºr diese Datentypen schlecht geeignet, da sich der Status h√§ufig √§ndern kann und in unserem Fall die Aufzeichnungsobergrenze auf einen Master beschr√§nkt ist. </font><font style="vertical-align: inherit;">Langzeit- und Betriebslager sind ebenfalls schlecht geeignet, da sich unser Zustand vor drei Jahren zuletzt ge√§ndert hat und es wichtig ist, dass wir einen schnellen Lesezugriff haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das hei√üt, f√ºr die Datenbank, in der der Status gespeichert ist, sind horizontale Skalierung zum Lesen und Schreiben, hohe Verf√ºgbarkeit und Fehlertoleranz wichtig, w√§hrend Konsistenz auf der Ebene der Werte / Dokumente erforderlich ist. </font><font style="vertical-align: inherit;">Sie k√∂nnen auf die Gesamtkonsistenz und die ACID-Transaktionen zur√ºckgreifen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine geeignete L√∂sung kann ein beliebiger Schl√ºsselwert oder eine Dokumentendatenbank sein: ein schattierter Redis-Cluster, MongoDB oder erneut Tarantool. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tarantool-Vorteile:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies ist die beliebteste Art, Tarantool zu verwenden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Horizontale Skalierung - Es gibt asynchrone Replikation + Sharding.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konsistenz auf Dokumentebene - ist.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Ergebnis haben wir jetzt drei Tarantools, die wir f√ºr v√∂llig unterschiedliche F√§lle verwenden: Speichern von Metainformationen, einen Cache zum schnellen Lesen von Daten von Ger√§ten und Speichern von Statusdaten.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So w√§hlen Sie eine Datenbank f√ºr die IoT-Plattform aus</font></font></h2><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine universelle Datenbank existiert nicht.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jeder Datentyp verf√ºgt √ºber eine eigene Datenbank, die f√ºr ihn am besten geeignet ist.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manchmal ist die von Ihnen ben√∂tigte Datenbank m√∂glicherweise nicht auf dem Markt verf√ºgbar.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarantool eignet sich als Basis f√ºr eine spezialisierte Datenbank.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Vortrag wurde erstmals bei </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Databases Meetup</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> von Mail.ru Cloud Solutions gehalten. </font><font style="vertical-align: inherit;">Sehen Sie sich ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Video mit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> anderen Auff√ºhrungen an und melden Sie sich f√ºr Ank√ºndigungen von Telegrammveranstaltungen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rund um Kubernetes bei der Mail.ru Group an</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was noch zu lesen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Welche Datenbank f√ºr das Projekt ausgew√§hlt werden soll, um nicht erneut auszuw√§hlen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mehr als Ceph: Blockspeicher in der MCS-Cloud</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ol><br>
</div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de497560/index.html">Wie sich Quarant√§ne auf den Arbeitsmarkt in der IT auswirkt</a></li>
<li><a href="../de497562/index.html">Mitap: Bleib zu Hause und GOnline</a></li>
<li><a href="../de497564/index.html">Lokaler Hack Day - Online Hackathon</a></li>
<li><a href="../de497566/index.html">Huffman-Komprimierungsalgorithmus</a></li>
<li><a href="../de497568/index.html">Wie LANIT-Mitarbeiter an entfernten Standorten in Italien und Wei√ürussland arbeiten</a></li>
<li><a href="../de497572/index.html">Serviceorientiertes Zustandsmanagement mit Lampe-Luwak</a></li>
<li><a href="../de497574/index.html">Onkologie im Kontext der COVID-19-Pandemie: Wie man maximale Leben rettet</a></li>
<li><a href="../de497578/index.html">AMD ist bestrebt, einen bedeutenden Marktanteil f√ºr Rechenzentren zu erlangen</a></li>
<li><a href="../de497580/index.html">Harte Quarant√§ne ist sehr sehr schlecht</a></li>
<li><a href="../de497582/index.html">Habr belegt den ersten Platz in der Rangliste der digitalen Rechte der Nutzer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>