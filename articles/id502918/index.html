<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐧 👩🏻‍🎤 🕣 Kesalahan dengan arahan #line dalam kompiler Visual C ++ 🧢 🎹 🐚</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Arahan #line ditambahkan oleh preprocessor dan kemudian dapat digunakan untuk memahami file mana dan baris bagian tertentu dari kode dalam file prepro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kesalahan dengan arahan #line dalam kompiler Visual C ++</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/502918/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c23/e6f/6ec/c23e6f6ecd4b643e19f80e58db05104a.png" alt="image1.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arahan #line ditambahkan oleh preprocessor dan kemudian dapat digunakan untuk memahami file mana dan baris bagian tertentu dari kode dalam file preprocessed milik. </font><font style="vertical-align: inherit;">Arahan #line memberi tahu alat kode untuk mengubah nomor baris tersimpan internal dan nama file kompiler ke nomor baris yang ditentukan. </font><font style="vertical-align: inherit;">Baris berikut sudah akan dihitung relatif terhadap posisi yang diberikan. </font><font style="vertical-align: inherit;">Preprocessing eksplisit terutama digunakan untuk debugging atau oleh berbagai generator. </font><font style="vertical-align: inherit;">Dalam kasus apa pun, kesalahan dalam fungsi semacam itu dapat menyebabkan berbagai konsekuensi negatif. </font><font style="vertical-align: inherit;">Salah satu masalah ini terjadi pada pengguna PVS-Studio di Visual Studio 2019.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Riwayat dan deskripsi kesalahan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arahan #line adalah bagian penting dari file pracroses yang digunakan oleh penganalisa PVS-Studio untuk mengeluarkan peringatan pada baris kode pengguna yang diperlukan. Di sinilah kisah pencarian kesalahan dimulai. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salah satu pengguna kami dengan basis kode besar mulai menerjemahkan seluruh proyek dari Platform Toolset versi v141 ke v142 di Visual Studio 2019. Setelah itu, dalam hasil analisis, gelombang peringatan V002 muncul dan beberapa puluh peringatan lainnya dikeluarkan untuk baris kode yang salah (kesalahan satu baris) )</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diagnostik V002 hanya mendeteksi situasi seperti itu (penomoran baris tidak benar). </font><font style="vertical-align: inherit;">Ini biasanya terjadi karena makro multi-baris atau arahan preprosesor lainnya (mis. #Pragma). </font><font style="vertical-align: inherit;">Masalahnya tidak sering terjadi, tetapi terutama pada kompiler dari Microsoft. </font><font style="vertical-align: inherit;">Gelombang masalah pada satu proyek seperti itu tidak terduga, karena </font><font style="vertical-align: inherit;">sistem pengujian kami tidak menunjukkan adanya masalah serius seperti itu, dan kami mulai men-debug penganalisa pada file pengguna yang sudah diproses sebelumnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah beberapa jam melakukan debug, kami menemukan bahwa penganalisa sudah bekerja dengan data yang salah tentang baris kode dan mampu membuat contoh uji:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MACRO(a, b)              <span class="hljs-comment">// line1</span></span>
                                 <span class="hljs-comment">// line2</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>* argv[])</span> <span class="hljs-comment">// line3</span>
</span>{                                <span class="hljs-comment">// line4</span>
    MACRO(<span class="hljs-string">"Some string"</span>,         <span class="hljs-comment">// line5</span>
        <span class="hljs-number">42</span>);                     <span class="hljs-comment">// line6</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;                    <span class="hljs-comment">// line7 &lt;=</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
File yang sudah diproses adalah sebagai berikut:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">line</span> 1 <span class="hljs-meta-string">"D:\\_Tests\\TestApp\\Project2\\rnd_bs.cpp"</span></span><font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>* argv[])</span>
</span>{<font></font>
  ;<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">line</span> 8 <span class="hljs-meta-string">"D:\\_Tests\\TestApp\\Project2\\rnd_bs.cpp"</span></span>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pernyataan kembali</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah pada </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baris dalam file sumber, dan titik-titik preprocessor ke </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-8</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> line. </font><font style="vertical-align: inherit;">Kesalahan ini terjadi di preprocessor, mungkin karena makro multi-line.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versi Rilis Dirilis</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada saat penulisan, masalah ini relevan untuk versi terbaru dari Visual Studio, hingga versi 16.4.3 (tanggal 14 Januari 2020). Kami membuka Laporan Bug " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arahan # line tidak valid setelah preprocessing (VS2019, v142)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " dan setelah 4 hari menerima jawaban yang menarik: </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Masalah ini telah diidentifikasi sebagai duplikat dari umpan balik yang dilaporkan sebelumnya yang ditautkan di sini: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">developercommunity.visualstudio.com/content/problem /738407/preprocessor-generates-incorrect-line-information.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Jika Anda melaporkan atau memilih di sini, suara Anda telah diterapkan pada masalah aslinya. Semua orang dapat menambahkan suara mereka secara langsung di umpan balik tertaut di atas. Voting membantu meningkatkan prioritas masalah dengan mengkonsolidasikan dampak pelanggan di bawah satu umpan balik. Terima kasih!</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata masalah ini telah dilaporkan, dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pada 18 September 2019</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - hampir setengah tahun yang lalu: " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preprocessor menghasilkan informasi garis yang salah</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". Pengguna memberikan contoh kode serupa untuk mereproduksi kesalahan. Menurut penulis, kesalahan ada setidaknya dengan Visual Studio 2019 16.2. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak diketahui apakah ini kebetulan atau tidak, tetapi setelah beberapa hari aktivitas kami, kesalahan tersebut diberi status </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetap Rilis Tertunda</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada 19 Mei 2020, versi revisi dari Visual Studio 2019 16.6.0 dirilis. Kami merekomendasikan bahwa semua pengguna PVS-Studio beralih ke sana.</font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/898/3b6/5a7/8983b65a74adb29a2113eba12fbec3f1.png"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda ingin berbagi artikel ini dengan audiens yang berbahasa Inggris, silakan gunakan tautan ke terjemahan: Svyatoslav Razmyslov. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug yang Disebabkan oleh Petunjuk #line dalam Visual C ++ Compiler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id502904/index.html">Contoh utang teknis dalam menerapkan sistem BI</a></li>
<li><a href="../id502908/index.html">VKontakte, MIPT dan GSOM SPbSU telah menciptakan kursus pembelajaran mesin untuk guru ilmu komputer</a></li>
<li><a href="../id502910/index.html">Sejarah Internet: Era Fragmentasi; bagian 2: menabur gurun</a></li>
<li><a href="../id502914/index.html">Logika matematika yang dapat membantu memeriksa lebih banyak orang untuk coronavirus</a></li>
<li><a href="../id502916/index.html">Tes unit untuk kode RxSwift</a></li>
<li><a href="../id502920/index.html">Saat kami menguji kinerja prosesor baru di cloud untuk 1C menurut tes Gilyov</a></li>
<li><a href="../id502922/index.html">Crowd marketing sebagai alat untuk meningkatkan vitalitas bisnis</a></li>
<li><a href="../id502924/index.html">Ulasan Telepon IP Snom D735</a></li>
<li><a href="../id502926/index.html">Paul Graham: Brevity = Kekuatan</a></li>
<li><a href="../id502928/index.html">Konferensi mini "Pekerjaan aman dengan layanan cloud"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>