<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😿 🤸🏽 👶🏽 Yandex.Cloudで管理されたデータベースサービスをどのように配置するか 🔴 🕡 🖖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="あなたが持っている最も貴重なもの、つまりアプリケーションまたはサービスのデータを信頼するとき、この誰かがあなたの最大の価値をどのように扱うかを想像したいと思います。
 
 私の名前はウラジミールボロディンです。私はYandex.Cloudデータプラットフォームの責任者です。本日は、Yandexマネー...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Yandex.Cloudで管理されたデータベースサービスをどのように配置するか</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/477860/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなたが持っている最も貴重なもの、つまりアプリケーションまたはサービスのデータを信頼するとき、この誰かがあなたの最大の価値をどのように扱うかを想像したいと思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の名前はウラジミールボロディンです。私はYandex.Cloudデータプラットフォームの責任者です。本日は、Yandexマネージドデータベースサービス内ですべてがどのように配置され機能するか、なぜすべてが同じように行われるのか、そしてユーザーの観点から見ると、さまざまなソリューションの利点は何なのかをお話ししたいと思います。そしてもちろん、近い将来に私たちがファイナライズする予定のものがきっと見つかります。それにより、サービスを必要とするすべての人にとってサービスがより良く、より便利になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
じゃあ行こう！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xw/qq/id/xwqqid27hmguyyigukvb2z3o8da.png" alt="画像"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マネージドデータベース（Yandexマネージドデータベース）は、最も人気のあるYandex.Cloudサービスの1つです。</font><font style="vertical-align: inherit;">より正確には、これは人気のあるYandex Compute Cloud仮想マシンに次ぐ2番目のサービス全体です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yandexマネージドデータベースを使用すると、稼働中のデータベースをすばやく取得して、次のようなタスクを実行できます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スケーリング-コンピューティングリソースまたはディスク領域を追加する基本的な機能から、レプリカおよびシャードの数の増加まで。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マイナーおよびメジャーのアップデートをインストールします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バックアップと復元。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォールトトレランスを提供します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モニタリング</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">便利な構成および管理ツールを提供します。</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マネージドデータベースサービスの配置方法：トップビュー</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このサービスは、コントロールプレーンとデータプレーンの2つの主要部分で構成されています。</font><font style="vertical-align: inherit;">コントロールプレーンは、簡単に言うと、データベースを作成、変更、または削除できるデータベース管理APIです。</font><font style="vertical-align: inherit;">データプレーンは、直接データストレージのレベルです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vo/4c/o-/vo4co-q4zc3r6xwe0is2pl9hrri.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、サービスユーザーには2つのエントリポイントがあります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コントロールプレーン内。</font><font style="vertical-align: inherit;">実際、Webコンソール、CLIユーティリティ、およびパブリックAPI（gRPCとREST）を提供するゲートウェイAPIの多くの入力があります。</font><font style="vertical-align: inherit;">しかし、それらすべては最終的には内部APIと呼ばれるものに移動するため、これをコントロールプレーンへの1つのエントリポイントと見なします。</font><font style="vertical-align: inherit;">実際、これは、責任のある管理データベース（MDB）サービス領域が始まるポイントです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データプレーン内。</font><font style="vertical-align: inherit;">これは、DBMSへのアクセスプロトコルを介した実行中のデータベースへの直接接続です。</font><font style="vertical-align: inherit;">たとえばPostgreSQLの場合、それは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">libpqインターフェースになります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/cr/l5/pq/crl5pqrbr2mqqlun6ivgwlvn0u8.png" alt="画像"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下では、データプレーンで発生するすべてのことを詳しく説明し、コントロールプレーンの各コンポーネントを分析します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データプレーン</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コントロールプレーンのコンポーネントを見る前に、データプレーンで何が起こっているかを見てみましょう。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仮想マシンの内部</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MDBは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex Compute Cloudで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供されるのと同じ仮想マシンでデータベースを実行します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-w/gm/qj/-wgmqjlxi30m4jz7dgp4sct86cw.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、PostgreSQLなどのデータベースエンジンがデプロイされます。</font><font style="vertical-align: inherit;">並行して、さまざまな補助プログラムを起動できます。</font><font style="vertical-align: inherit;">PostgreSQLの場合、これは</font><font style="vertical-align: inherit;">データベース接続プーラーで</font><font style="vertical-align: inherit;">ある</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Odyssey</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、仮想マシン内では、DBMSごとに独自の特定の標準サービスセットが起動されます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バックアップを作成するためのサービス。</font><font style="vertical-align: inherit;">PostgreSQLの場合、これはオープンソースの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WAL-G</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ツールです</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">。</font></a><font style="vertical-align: inherit;">バックアップを作成し、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex Object Storageに保存し</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Salt Minionは、</font><font style="vertical-align: inherit;">運用と構成管理のため</font><font style="vertical-align: inherit;">の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SaltStack</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムのコンポーネントです</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これについての詳細は、デプロイインフラストラクチャの説明で後述します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MDBメトリック。データベースメトリックを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex Monitoring</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">およびMDBヘルスクラスターとホストのステータスを監視するためのマイクロサービスに</font><font style="vertical-align: inherit;">転送します</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DBMSログと請求ログをLogbrokerサービスに送信するプッシュクライアントは、データを収集して配信するための特別なソリューションです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MDB cron-私たちのバイク。通常のcronとは異なり、1秒の精度で定期的なタスクを実行できます。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークトポロジー</font></font></h3><br>
<img src="https://habrastorage.org/webt/x8/_6/ge/x8_6ge0uluxqju22unryyrxxhxw.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各データプレーンホストには2つのネットワークインターフェイスがあります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらの1つがユーザーのネットワークに侵入します。</font><font style="vertical-align: inherit;">一般に、製品の負荷に対応するために必要です。</font><font style="vertical-align: inherit;">それを通じて、レプリケーションは追いかけられています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つ目は、ホストがコントロールプレーンにアクセスするための管理対象ネットワークの1つです。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はい、さまざまなクライアントのホストがそのような管理されたネットワークにスタックしていますが、これは恐ろしいことではありません。管理されたインターフェイスでは（ほとんど）何もリッスンしていないため、コントロールプレーンの発信ネットワーク接続はそこからのみ開かれます。</font><font style="vertical-align: inherit;">開いているポート（SSHなど）があるため、ほとんど誰もいませんが、特定のホストからの接続のみを許可するローカルファイアウォールによって閉じられています。</font><font style="vertical-align: inherit;">したがって、攻撃者がデータベースを備えた仮想マシンにアクセスした場合、攻撃者は他の人のデータベースにアクセスできなくなります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データプレーンのセキュリティ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
セキュリティについて話しているので、攻撃者がクラスター仮想マシンでrootになるルートの計算でサービスを最初に設計したと言う必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、私たちは次のことを行うために多くの努力をしました：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ローカルおよび大規模なファイアウォール。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての接続とバックアップの暗号化。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべて認証と承認が必要です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AppArmor</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自己記述IDS。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、コントロールプレーンのコンポーネントについて考えます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コントロールプレーン</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部API</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
内部APIは、コントロールプレーンへの最初のエントリポイントです。</font><font style="vertical-align: inherit;">ここですべてがどのように機能するか見てみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vb/ru/j7/vbruj7qxxu2tmlaplki2dt_74cy.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
内部APIがデータベースクラスターの作成要求を受け取ったとします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、内部APIがクラウドサービスのアクセスサービスにアクセスします。このサービスは、ユーザーの認証と承認の確認を担当します。</font><font style="vertical-align: inherit;">ユーザーが検証に合格すると、内部APIはリクエスト自体の有効性をチェックします。</font><font style="vertical-align: inherit;">たとえば、名前を指定せずに、またはすでに取得した名前でクラスターを作成するリクエストは、テストに失敗します。</font></font><br>
<blockquote>  Internal API     API  .         ,       B, Internal API  ,         A,     B.    ,   B   A.       API .</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要求が有効な場合、作成されたクラスターに関する情報がメタベースに保存されます。</font><font style="vertical-align: inherit;">これをMetaDBと呼び、PostgreSQLにデプロイされます。</font><font style="vertical-align: inherit;">MetaDBには、操作のキューを含むテーブルがあります。</font><font style="vertical-align: inherit;">内部APIは、操作に関する情報を保存し、トランザクションにタスクを設定します。</font><font style="vertical-align: inherit;">その後、ユーザーは操作に関する情報を返します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、内部APIのほとんどのリクエストを処理するには、MetaDBと関連サービスのAPIを使用するだけで十分です。</font><font style="vertical-align: inherit;">ただし、内部APIがいくつかのクエリに答えるために使用するコンポーネントがさらに2つあります。ユーザークラスターログが配置されているLogsDBとMDBヘルスです。</font><font style="vertical-align: inherit;">それぞれについて、以下で詳しく説明します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ワーカー</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ワーカーは、MetaDB内の操作のキューにクエリを実行し、それらを取得して実行する一連のプロセスです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ez/u7/q8/ezu7q86g82hjjt2nqrdssqhxpn0.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラスターが作成されたときにワーカーは正確に何をしますか？まず、イメージから仮想マシンを作成するためのインフラストラクチャAPIを使用します（必要なパッケージがすべてインストールされており、ほとんどのものが構成されており、イメージは1日に1回更新されます）。仮想マシンが作成され、ネットワークが仮想マシンに導入されると、ワーカーはデプロイインフラストラクチャ（後で詳しく説明します）を使用して、ユーザーが仮想マシンに必要なものをデプロイします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、ワーカーは他のクラウドサービスにアクセスします。たとえば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex Object Storage</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して、クラスターバックアップが保存されるバケットを作成します。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Yandex Monitoring</font></a><font style="vertical-align: inherit;">サービスへ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、データベースメトリックを収集して視覚化します。</font><font style="vertical-align: inherit;">ワーカーはそこでクラスターメタ情報を作成する必要があります。</font><font style="vertical-align: inherit;">DNS APIに対して、ユーザーがパブリックIPアドレスをクラスターホストに割り当てたい場合。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、労働者は非常に簡単に働きます。</font><font style="vertical-align: inherit;">メタベースキューからタスクを受け取り、目的のサービスにアクセスします。</font><font style="vertical-align: inherit;">各ステップが完了すると、ワーカーは操作の進行状況に関する情報をメタベースに格納します。</font><font style="vertical-align: inherit;">障害が発生した場合、タスクは再開され、中断したところから実行されます。</font><font style="vertical-align: inherit;">ただし、ワーカーのほとんどすべてのタイプのタスクがべき等に記述されているため、最初から再開することも問題ありません。</font><font style="vertical-align: inherit;">これは、ワーカーが操作の1つまたは別のステップを実行できるが、MetaDBにはこれに関する情報がないためです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インフラストラクチャの導入</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一番下で</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Pythonで作成されたかなり一般的なオープンソースの構成管理システム</font><font style="vertical-align: inherit;">である</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">SaltStackが</font></a><font style="vertical-align: inherit;">使用さ</font><font style="vertical-align: inherit;">れています。このシステムは非常に</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張可能</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">であり、私たちが気に入っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソルトの主なコンポーネントは、何をどこに適用するかに関する情報を格納するソルトマスターと、各ホストにインストールされているエージェントであるソルトミニオンがマスターと対話し、ソルトマスターからホストに直接ソルトを適用できます。この記事の目的のために、この知識は十分にあります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">詳しくは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SaltStackのドキュメントをご覧ください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つのソルトマスターはフォールトトレラントではなく、数千のミニオンに拡張できません。いくつかのマスターが必要です。これをワーカーから直接操作するのは不便で、ソルトにバインディングを記述しました。これをデプロイフレームワークと呼びます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ir/x6/8o/irx68o0wo493tgj6o8xh0xj0x3o.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ワーカーのエントリポイントは、Deploy APIのみです。DeployAPIは、「状態全体またはその個々の部分をそのようなミニオンに適用する」や「そのようなミニオンにステータスを伝える」などのメソッドを実装します。 Deploy APIは、すべてのロールアウトとその特定の手順に関する情報をDeployDBに格納します。ここでもPostgreSQLを使用しています。すべてのミニオンとマスターに関する情報、および1番目から2番目への所属に関する情報もここに格納されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つの追加コンポーネントがソルトマスターにインストールされます。</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deploy APIが対話してロールアウトを起動する</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Salt REST API</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">REST APIはローカルのsalt-masterに渡され、彼はすでにZeroMQを使用してミニオンと通信しています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本質は、それがDeploy APIに行き、このソルトマスターに接続する必要があるすべてのミニオンの公開鍵を受け取ることです。</font><font style="vertical-align: inherit;">マスターに公開鍵がないと、ミニオンはマスターに接続できません。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソルトミニオンに加えて、データプレーンには2つのコンポーネントがあります。</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Returner-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モジュール（saltの拡張可能な部分の1つ）。これは、salt-masterだけでなく、Deploy APIにもロールアウトの結果をもたらします。</font><font style="vertical-align: inherit;">Deploy APIはウィザードのREST APIに移動してデプロイを開始し、ミニオンからリターナーを介して結果を受け取ります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マスターミニオンの接続先のDeploy APIを定期的にポーリングするマスターピンガー。</font><font style="vertical-align: inherit;">Deploy APIが新しいマスターアドレスを返す場合（たとえば、古いマスターアドレスが停止しているか、過負荷になっているため）、pingerはミニオンを再構成します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SaltStackの拡張性を使用するもう1つの場所は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ext_pillar-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部のどこかから</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ピラー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を取得する機能</font><font style="vertical-align: inherit;">（PostgreSQL、ユーザー、データベース、拡張機能などの静的情報など）です。</font><font style="vertical-align: inherit;">クラスター固有の設定はMetaDBに格納されているため、モジュールから内部APIに移動してクラスター固有の設定を取得します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これとは別に、ピラーには機密情報（ユーザーパスワード、TLS証明書、バックアップを暗号化するためのGPGキー）も含まれていることに注意してください。したがって、まず、すべてのコンポーネント間のすべてのやり取りが暗号化されます（データベースにはありません）すべての場所でTLS、HTTPSなしで提供され、ミニオンとマスターもすべてのトラフィックを暗号化します）。</font><font style="vertical-align: inherit;">次に、これらのシークレットはすべてMetaDBで暗号化され、シークレットの分離が使用されます。内部APIマシンには、MetaDBに格納される前にすべてのシークレットを暗号化する公開鍵があり、プライベート部分はソルトマスターにあり、ソルトマスターのみが取得できます。秘密を開いて、支柱としてミニオンに送信します（これも暗号化されたチャネル経由で）。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MDBヘルス</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データベースを操作するときは、そのステータスを知っておくと役立ちます。</font><font style="vertical-align: inherit;">このために、MDB Healthマイクロサービスがあります。</font><font style="vertical-align: inherit;">MDB仮想マシンMDBの内部コンポーネントからホストステータス情報を受け取り、独自のデータベース（この場合はRedis）に保存します。</font><font style="vertical-align: inherit;">また、特定のクラスターのステータスに関するリクエストが内部APIに到着すると、内部APIはMetaDBおよびMDBヘルスからのデータを使用します。</font></font><br>
<br>
<img width="500" src="https://habrastorage.org/webt/ee/su/qu/eesuquvflpn5k_frgbcqlakkfkc.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのホストに関する情報は処理され、APIで理解可能な形式で表示されます。</font><font style="vertical-align: inherit;">一部のDBMSのホストとクラスターの状態に加えて、MDBヘルスは特定のホストがマスターであるかレプリカであるかを追加で返します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MDB DNS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CNAMEレコードを管理するには、MDB DNSマイクロサービスが必要です。データベースに接続するためのドライバーが接続文字列で複数のホストを転送することを許可しない場合は、特別な</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CNAMEに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続でき</font><font style="vertical-align: inherit;">ます。これは常にクラスター内の現在のマスターを示します。マスターが切り替わると、CNAMEが変更されます。</font></font><br>
<br>
<img width="500" src="https://habrastorage.org/webt/2y/g2/sd/2yg2sd8z2cgvuy9spzxo00w3eoy.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはどのように起こりますか？上記で述べたように、仮想マシン内にはMDB cronがあり、次の内容のハートビートをMDB DNSに定期的に送信します。 MDB DNSは、すべての仮想マシンからのこのようなメッセージを受け入れ、CNAMEレコードを変更するかどうかを決定します。必要に応じて、DNS APIを介してレコードを変更します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜこれのために別のサービスを作ったのですか？</font><font style="vertical-align: inherit;">DNS APIにはゾーンレベルでのみアクセス制御があるためです。</font><font style="vertical-align: inherit;">潜在的な攻撃者が別の仮想マシンにアクセスして、他のユーザーのCNAMEレコードを変更する可能性があります。</font><font style="vertical-align: inherit;">MDB DNSは承認をチェックするため、このシナリオを除外します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースログの配信と表示</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
仮想マシン上のデータベースがログに書き込むと、特別なプッシュクライアントコンポーネントがこのレコードを読み取り、Logbrokerに表示されたばかりの行を送信します（Habré </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ですでに書き込み</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">済みです</font><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">LogBrokerとのプッシュクライアントインタラクションは、厳密に一致するセマンティクスで構築されています。確実に送信し、厳密に1度義務付けられます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マシンの個別のプール-LogConsumers-は、LogBrokerキューからログを取得して、LogsDBデータベースに保存します。</font><font style="vertical-align: inherit;">ClickHouse DBMSはログデータベースに使用されます。</font></font><br>
<br>
<img width="500" src="https://habrastorage.org/webt/w-/zc/mr/w-zcmrza7z9pg6gacszmpm0kojo.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特定のクラスターの特定の時間間隔のログを表示するリクエストが内部APIに送信されると、内部APIは認証をチェックし、リクエストをLogsDBに送信します。</font><font style="vertical-align: inherit;">したがって、ログ配信ループはログ表示ループから完全に独立しています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">課金</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
請求スキームは同様の方法で構築されます。仮想マシンの内部には、すべてのものがデータベースで正常であることを特定の周期でチェックするコンポーネントがあります。すべて問題なければ、前回の起動以降、この時間間隔で課金を実行できます。この場合、レコードは請求ログに作成され、プッシュクライアントはそのレコードをLogBrokerに送信します。 Logbrokerからのデータは課金システムに転送され、そこで計算が行われます。これは、クラスターを実行するための課金スキームです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラスターがオフになっている場合、コンピューティングリソースの使用は課金されなくなりますが、ディスク領域は課金されます。</font><font style="vertical-align: inherit;">この場合、仮想マシンから請求を行うことは不可能であり、2番目の回路（オフラインの請求回路）が関係しています。</font><font style="vertical-align: inherit;">シャットダウンクラスタのリストをMetaDBから取得し、Logbrokerに同じ形式でログを書き込むマシンの個別のプールがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オフライン課金は課金にも使用でき、クラスターも含まれますが、実行中であってもホストに課金しますが、機能しません。</font><font style="vertical-align: inherit;">たとえば、クラスターにホストを追加すると、ホストはバックアップからデプロイされ、レプリケーションに追いつきます。</font><font style="vertical-align: inherit;">ホストがこの期間非アクティブであるため、ユーザーに請求するのは誤りです。</font></font><br>
<br>
<img width="500" src="https://habrastorage.org/webt/fa/gx/hw/fagxhwoaqe0fb5q60chfthefkv8.png" alt="画像"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バックアップ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バックアップスキームはDBMSによって若干異なる場合がありますが、一般的な原則は常に同じです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各データベースエンジンは、独自のバックアップツールを使用します。</font><font style="vertical-align: inherit;">PostgreSQLおよびMySQLの場合、これは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WAL-G</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">バックアップを作成、圧縮、暗号化して、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex Object Storageに保存し</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">同時に、各クラスターは個別のバケットに配置され（1つは分離用、2つ目はバックアップ用のスペースを節約しやすくするため）、独自の暗号化キーで暗号化されます。</font></font><br>
<br>
<img width="500" src="https://habrastorage.org/webt/mf/dh/w0/mfdhw0bgyo59pytnhaqkaqghbou.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これがコントロールプレーンとデータプレーンの動作方法です。</font><font style="vertical-align: inherit;">これらすべてから、Yandex.Cloud管理データベースのサービスが形成されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なぜすべてがこのように配置されているのですか</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、グローバルレベルでは、より簡単なスキームに従って何かを実装できます。しかし、抵抗を最小限に抑える道をたどらないのには、私たち自身の理由がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、すべてのタイプのDBMSに共通のコントロールプレーンが必要でした。どちらを選択してもかまいません。最終的に、リクエストは同じ内部APIに送られ、その下のすべてのコンポーネントもすべてのDBMSに共通です。これは私たちにとってテクノロジーの面で生活を少し難しくします。一方、すべてのDBMSに影響する新しい機能を導入する方がはるかに簡単です。これは6回ではなく1回実行されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちにとって2番目の重要な瞬間-データプレーンとコントロールプレーンの独立性をできる限り確保したかったのです。そして今日、コントロールプレーンが完全に利用できない場合でも、すべてのデータベースは引き続き機能します。サービスは信頼性と可用性を保証します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第三に、ほとんどすべてのサービスの開発は常に妥協です。一般的な意味では、大まかに言えば、リリースのリリースの速度がどこかより重要であり、どこかで信頼性が追加されます。同時に、現在、年に1〜2回のリリースを行う余裕はありません。これは明らかです。コントロールプレーンを見ると、ここでは開発のスピード、新機能の迅速な導入、更新を週に数回展開することに重点を置いています。また、データプレーンは、データベースの安全性、フォールトトレランスを担当するため、ここでは完全に異なるリリースサイクルを週単位で測定します。また、開発の面でのこの柔軟性は、相互の独立性ももたらします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の例：通常管理されているデータベースサービスは、ユーザーにネットワークドライブのみを提供します。</font><font style="vertical-align: inherit;">Yandex.Cloudはローカルドライブも提供します。</font><font style="vertical-align: inherit;">理由は簡単です。速度がはるかに速いです。</font><font style="vertical-align: inherit;">たとえば、ネットワークドライブを使用すると、仮想マシンを簡単にスケールアップおよびスケールダウンできます。</font><font style="vertical-align: inherit;">ネットワークストレージのスナップショットの形式でバックアップを作成する方が簡単です。</font><font style="vertical-align: inherit;">しかし、多くのユーザーは高速を必要とするため、バックアップツールをさらに高いレベルにしています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今後の計画</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、中期的にサービスを改善する計画について一言。これらは、個々のDBMSではなく、Yandex管理対象データベース全体に影響する計画です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、バックアップ作成の頻度をより柔軟に設定できるようにしたいと考えています。日中にバックアップを数時間ごとに、週に1日に1回、月に1週間に、年に1度、月に1度行う必要があるシナリオがあります。これを行うために、内部APIと</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex Object Storageの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">間に別のコンポーネントを開発しています</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーにとっても私たちにとっても重要なもう1つの重要な点は、操作の速度です。デプロイインフラストラクチャに最近大きな変更を加え、ほぼすべての操作の実行時間を数秒に短縮しました。クラスターの作成とクラスターへのホストの追加の操作だけはカバーされていません。 2番目の操作の実行時間は、データの量によって異なります。しかし、ユーザーがCI / CDパイプラインでクラスターを作成および削除することがよくあるため、近い将来に最初の1つはスピードアップします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要なケースのリストには、ディスクのサイズを自動的に増やす機能の追加が含まれています。これは手動で行われるため、あまり便利ではなく、あまり良くありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、データベースで何が起こっているかを示す多数のグラフをユーザーに提供します。</font><font style="vertical-align: inherit;">ログへのアクセスを許可します。</font><font style="vertical-align: inherit;">同時に、データが不十分な場合もあります。</font><font style="vertical-align: inherit;">他のグラフィック、他のスライスが必要です。</font><font style="vertical-align: inherit;">ここでも改善を計画しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マネージドデータベースサービスについての話は長く、おそらくかなり退屈なものでした。</font><font style="vertical-align: inherit;">どんな言葉や説明よりも優れており、実際の練習のみです。</font><font style="vertical-align: inherit;">したがって、必要に応じて、サービスの機能を個別に評価できます。</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL用のYandexマネージドサービス</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL用Yandexマネージドサービス</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MongoDB用のYandexマネージドサービス</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClickHouse用Yandexマネージドサービス</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redis用Yandexマネージドサービス</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandexデータプロシージャ</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja477850/index.html">React Native-すべての問題に対する特効薬？Profi.ruのクロスプラットフォームツールをどのように選択したか</a></li>
<li><a href="../ja477852/index.html">無毒の偽善</a></li>
<li><a href="../ja477854/index.html">VPNトンネルの内部と外部に接続するとどうなりますか</a></li>
<li><a href="../ja477856/index.html">800GBから6.4TBのPCI-Eフラッシュアクセラレータ：夜明けから通常のPC /サーバーでの生活まで</a></li>
<li><a href="../ja477858/index.html">予定外の作業：事前加速後に実際に判明したプロジェクトは何ですか？</a></li>
<li><a href="../ja477862/index.html">そして、それは可能でしたか？1つの会議での科学とIT</a></li>
<li><a href="../ja477864/index.html">TableauのClickHouseでデータを操作するためのTabPy</a></li>
<li><a href="../ja477866/index.html">ワークショップ：ビジネス向けのハイブリッドITソリューション。12月5日、サンクトペテルブルク</a></li>
<li><a href="../ja477870/index.html">BeerTenderビールシステムのGrafanaダッシュボード</a></li>
<li><a href="../ja477872/index.html">c.tech：データの説明＃4新年のリリース</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>