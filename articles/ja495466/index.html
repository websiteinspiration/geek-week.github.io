<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🗓️ 👃🏼 🤞🏻 ハッカートラップ。Canarytokensでハッキングを早期に検出 ⌛️ 🤹 🤞🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ハニートークン（英語-「ハニーサイン/サイン/識別子」）はハニーポットのアイデアの一種であり、侵入者がハッキングの事実を検出したり、そのソースを特定したりするための餌です。攻撃者が既にシステムに侵入している場合、通常のユーザーには通常とは異なるアクションを実行する可能性があります。これは、ハッキング...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ハッカートラップ。Canarytokensでハッキングを早期に検出</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/495466/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハニートークン（英語-「ハニーサイン/サイン/識別子」）はハニーポットのアイデアの一種であり、侵入者がハッキングの事実を検出したり、そのソースを特定したりするための餌です。</font><font style="vertical-align: inherit;">攻撃者が既にシステムに侵入している場合、通常のユーザーには通常とは異なるアクションを実行する可能性があります。</font><font style="vertical-align: inherit;">これは、ハッキングを検出する方法として使用できます。</font><font style="vertical-align: inherit;">この記事では、独自のトリガーを作成してハッキングを早期に検出することがいかに簡単かを見ていきます。</font><font style="vertical-align: inherit;">このようなトラップは、システム管理者だけでなく、データのプライバシーを心配している一般ユーザーにも役立ちます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/xq/wk/ks/xqwkksjf6adatsv3lhu-am4ph6w.jpeg"></div></a><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ガス分析装置が発明される前は、鉱山労働者はカナリアを持って鉱山に行きました。</font><font style="vertical-align: inherit;">体が小さく、代謝が速いため、鳥は空中の危険なガスにはるかに早く反応し、鉱山労働者に警告しました。</font></font></i></font><a name="habracut"></a><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なぜこれが必要なのですか？</font></font></font></h3><br>
<img src="https://habrastorage.org/webt/ji/uf/cb/jiufcbwkepg-izswuadwxjkerxe.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ハッカーは、新しいシステムに入ると、アパートに侵入した泥棒が宝石を探すためにすべての箱を開け始めると、周りを見回し始めます。</font><font style="vertical-align: inherit;">攻撃者は事前にどの特定のデータが価値があるかはわかりませんが、高い確率ですべての可能なオプションをチェックします。</font><font style="vertical-align: inherit;">したがって、トラップが実際のデータのように見え、攻撃者にとって可能な限り魅力的であることが重要です。</font><font style="vertical-align: inherit;">所有者がトラップがトリガーされたことに気づくほど、ハッキングされたことに気づき、応答できるようになります。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カナリアトークンサービス</font></font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canarytokens.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ハッキング用の独自のマーカー（hanitokens）を便利に作成するためのオンラインサービスです。</font><font style="vertical-align: inherit;">いくつかのトリガーオプションをサポートし、メールが添付された既製のトリガーを生成できます。トリガーが機能した場合に通知が送信されます。</font></font><br>
<img src="https://habrastorage.org/webt/dt/as/lm/dtaslm6-vs_4c-cl6h5nqzlqh70.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このサービスは完全に無料で、登録なしで即座にトリガーを生成できます。</font><font style="vertical-align: inherit;">インフラストラクチャを秘密にしておくことを好むユーザー向けのセルフホストバージョンもあります。</font><font style="vertical-align: inherit;">次に、各トリガーがどのように機能するかを確認し、最後に独自のカナリアトークンサーバーをDockerコンテナーにデプロイします。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.docおよびpdfファイルを開くときにトリガー</font></font></font></h3><br>
<img width="300" src="https://habrastorage.org/webt/x9/mw/tn/x9mwtnlqxhixsnu5o6fod1tgwao.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
文書が表示のためにプログラムによって開かれた場合に機能します。</font><font style="vertical-align: inherit;">私はこのトリックを頻繁に使用します。</font><font style="vertical-align: inherit;">各コンピューターとフラッシュドライブに、Passwords.pdfやBitcoins.docなどの魅力的な名前のドキュメントがあります。</font><font style="vertical-align: inherit;">私は好奇心のある会計士が彼らに転送されたフラッシュドライブ上のすべてのファイルを検査する方法を見るのが大好きです。</font></font><br>
 &nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 このトリガーは、情報セキュリティの専門家から初心者まで、すべてのカテゴリのユーザーにとって最も効果的で有用だと思います。</font><font style="vertical-align: inherit;">PDFビューアがファイルを開くという事実をドキュメントの所有者に伝えることができることを誰も知らない。</font><font style="vertical-align: inherit;">誰もがこれに遭遇します。</font></font><br>
 &nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 ドキュメントを開くという事実を把握するには、いくつかの方法があります。</font><font style="vertical-align: inherit;">Canarytokensは、ドキュメントに埋め込まれたドキュメント固有のURLを使用して、失効したSSL証明書（証明書失効リスト）を検証します。</font><font style="vertical-align: inherit;">その結果、プログラムはこのアドレスに移動し、トリガーが起動します。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DNS解決によるトリガー</font></font></font></h3><br>
<img width="500" src="https://habrastorage.org/webt/am/i1/wh/ami1whax3utfizv4zfgxuerxc9g.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは非常に興味深いトリガーであり、その利点はすぐにはわかりません。</font><font style="vertical-align: inherit;">誰かが生成されたサブドメインのIPアドレスを要求した場合に機能します。これは、偶然に推測したり、ねじれたりできないように特別に生成されたものです。</font><font style="vertical-align: inherit;">したがって、偶発的な操作は除外されます。</font><font style="vertical-align: inherit;">このトリガーは、フォルダーを開いたことを検出したり、MS SQLデータベースでトリガーとして使用したりするなど、以下で説明する多くの手法で使用されます。</font><font style="vertical-align: inherit;">実際、このトリガーを使用するには多くのオプションがあります。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URLトリガー</font></font></font></h3><br>
<img width="500" src="https://habrastorage.org/webt/60/mk/dn/60mkdnqqsqvla-5cc7-2nbkotrs.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、GET、POST、またはHEADリクエストを参照で実行するだけで十分です。</font><font style="vertical-align: inherit;">これによりトリガーがトリガーされます。</font><font style="vertical-align: inherit;">通常の使用に加えて、コンテンツのプレビューを表示するためにリンクをたどるパーサーをチェックするスクリプトで使用することもできます。</font><font style="vertical-align: inherit;">たとえば、インスタントメッセンジャーの場合も同様です。メッセンジャーサーバーからクリックした入力フィールドにリンクを書き込むだけです。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">画像</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
古典的な1x1ピクセルの画像は、オンライン広告を追跡するすべての人に知られています。</font><font style="vertical-align: inherit;">トリガーは、画像ファイルがアップロードされている場合に機能します。</font><font style="vertical-align: inherit;">このようなピクセルは、任意のhtmlページまたはレターに挿入できます。</font><font style="vertical-align: inherit;">必要な条件が機能している場合は、ページ上のJSスクリプトから呼び出すと便利です。</font><font style="vertical-align: inherit;">標準のピクセルを独自の画像に置き換えることもできます。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メールトリガー</font></font></font></h3><br>
<img width="300" src="https://habrastorage.org/webt/mo/4e/sm/mo4esmyilw_y8lzwqhhw2-kaemq.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
生成されたメールボックスに手紙が届いた場合、トリガーが機能します。</font><font style="vertical-align: inherit;">電子メールアドレス、連絡先リストなどを使用して、データベースの漏洩を監視すると便利です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、このアドレスを連絡先リストに追加して、連絡先リストへのアクセスを要求するアプリケーションによって、携帯電話のノートブックがいつ統合されるかを確認できます。 。</font><font style="vertical-align: inherit;">すべての従業員が異なるトリガーアドレスをコンピューター、電話、電子メールクライアントのノートブックに追加し、連絡先の送信元を追跡することもできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
予測できない電子メールアドレスが特別に生成されるため、トリガーが選択されて誤ってトリガーされる可能性は除外されます。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windowsフォルダーオープントリガー</font></font></font></h3><br>
<img width="100" src="https://habrastorage.org/webt/fp/zd/hx/fpzdhxc0olbpomnpgglqlhrd9f4.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
確かに多くの人が、すべてのWindowsフォルダにある非表示のdesktop.iniファイルを見ました。</font><font style="vertical-align: inherit;">彼はそれほど単純ではないことがわかりました。</font><font style="vertical-align: inherit;">その中で、UNCパスを使用してリモートサーバー上のアイコンのアドレスを指定できます（これらはネットワークドライブに使用され、\\で始まります）。Windowsはアイコンへのリンクで指定されたドメインでDNS解決を実行し、トリガーをアクティブにします。</font><font style="vertical-align: inherit;">desktop.iniファイルは、他のファイルと一緒にアーカイブにパックすることができ、アーカイブが解凍されると機能します。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイト複製トリガー</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドメインからページが開かれていない場合に機能するWebページ用の簡単なスクリプト。</font><font style="vertical-align: inherit;">フィッシングの検出に役立つ場合があります。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (<span class="hljs-built_in">document</span>.domain != <span class="hljs-string">"mydomain.com"</span>) {
    <span class="hljs-keyword">var</span> l = location.href;
    <span class="hljs-keyword">var</span> r = <span class="hljs-built_in">document</span>.referrer;
    <span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Image();<font></font>
    m.src = <span class="hljs-string">"http://canarytokens.com/"</span>+
            <span class="hljs-string">"blablabla.jpg?l="</span>+
            <span class="hljs-built_in">encodeURI</span>(l) + <span class="hljs-string">"&amp;r="</span> + <span class="hljs-built_in">encodeURI</span>(r);<font></font>
}</code></pre><br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EXEファイルまたはDLLを実行するトリガー</font></font></font></h3><br>
<img width="300" src="https://habrastorage.org/webt/co/3f/q5/co3fq5b-ivp-imere3zbbdcmmfe.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
既存の実行可能.exeファイルまたはライブラリでトリガーを接着できるようにします。</font><font style="vertical-align: inherit;">アンチウイルスでは検出されません。</font><font style="vertical-align: inherit;">このような接着は一部のプログラムを破壊する可能性があるため、単純なものを使用することをお勧めします。</font><font style="vertical-align: inherit;">実際、これはトロイの木馬やウイルスを拡散させるために使用される長い間知られた方法ですが、私たちの場合にのみ、隠された機能は完全に無害です。</font><font style="vertical-align: inherit;">ただし、実行可能ファイルは攻撃者により大きな警戒感を与える可能性があり、攻撃者のオペレーティングシステムで実行されない可能性があることに注意してください。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS SQLのトリガー</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MS SQLでは、INSERT、SELECT、DELETEなどを実行するトリガーを追加できます。トリガーをトリガーするには、desktop.iniファイルと同じ方法を使用します。つまり、UNCパスを介してDNS名を解決します。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS SQLのトリガーの例</font></font></b><div class="spoiler_text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-canarytokenにpingするストアドプロシージャを作成します</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 CREATE proc ping_canarytoken </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 AS </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 BEGIN </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 宣言します</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザー名</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> varchar（最大）、 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base64</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> varchar（最大）、@ tokendomain varchar（128）、@ unc varchar（128）、 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイズ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">終わった</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランダム</font></font></a> varchar(3);<br>
<br>
--setup the variables<br>
 set @tokendomain = 'qo2dd6tftntl1pej9j68v31k6.canarytokens.com';<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">size</a> = 128;<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">done</a> = 0;<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">random</a> = cast(round(rand()*100,0) as varchar(2));<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">random</a> = concat(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">random</a>, '.');<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">username</a> = SUSER_SNAME();<br>
<br>
--loop runs until the UNC path is 128 chars or less<br>
 while <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">done</a> &lt;= 0<br>
 begin<br>
 --convert username into base64<br>
 select <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">base64</a> = (SELECT<br>
 CAST(N'' AS XML).value(<br>
 'xs:base64Binary(xs:hexBinary(sql:column(«bin»)))'<br>
, 'VARCHAR(MAX)'<br>
 ) Base64Encoding<br>
 FROM (<br>
 SELECT CAST(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">username</a> AS VARBINARY(MAX)) AS bin<br>
 ) AS bin_sql_server_temp);<br>
<br>
--replace base64 padding as dns will choke on =<br>
 select <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">base64</a> = replace(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">base64</a>,'=','-')<br>
<br>
--construct the UNC path<br>
 select @unc = concat('\\',@base64,'.',@random,@tokendomain,'\a')<br>
<br>
 — if too big, trim the username and try again<br>
 if len(@unc) &lt;= <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">size</a><br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">done</a> = 1<br>
 else<br>
 --trim from the front, to keep the username and lose domain details<br>
 select <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">username</a> = substring(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">username</a>, 2, len(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">username</a>)-1)<br>
 end<br>
 exec master.dbo.xp_fileexist @unc;<br>
 END<br>
<br>
--add a trigger if data is altered<br>
 CREATE TRIGGER TRIGGER1<br>
 ON TABLE1<br>
 AFTER INSERT<br>
 AS<br>
 BEGIN<br>
 exec ping_canarytoken<br>
 end<br>
</div></div><br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アマゾンウェブサービスログイントリガー</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AmazonサービスAPIキーは、攻撃者に何が含まれているかを確認するように仕向ける必要があります。</font><font style="vertical-align: inherit;">このAPIキーがログインに使用されると、トリガーが起動します。</font><font style="vertical-align: inherit;">この場合、もちろん、そこにデータはありません。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その他のトリガー</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
canarytokens.orgサービスは、SVNフック、Webリダイレクト、QRコードの読み取り、Slack APIキーなど、他のトリガーもサポートしています。</font><font style="vertical-align: inherit;">これらはすべて同様の原則を使用しており、必要に応じて独自のトリガーを独自に作成し、武器にDNS名、画像とのリンク、メールアドレス、人気のあるサービスのAPIキーを含めることができます。</font><font style="vertical-align: inherit;">電子メール通知に加えて、トリガーが起動した場合、CanarytokenはWebフックをプルできます。</font><font style="vertical-align: inherit;">操作のメカニズムはドキュメントに記載されています。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Canarytokensネイティブサーバー</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
経験豊富なクラッカーは、ソースコードでcanarytokens.orgのアドレスを見て、すぐにすべてを推測します。</font><font style="vertical-align: inherit;">したがって、会社で使用する場合は、独自のカナリアトークンインスタンスをデプロイして、すべてのトリガーアドレスが会社の内部ドメインに移動し、実際の内部サービスと区別できないようにすることをお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発者は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すぐに使用できるDockerイメージを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">インストールプロセスはどのイメージでも非常に一般的であるため、このトピックについては触れません。</font><font style="vertical-align: inherit;">自明ではない点のみを説明します。</font><font style="vertical-align: inherit;">インストールする前に、ファイル</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">frontend.env</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">switchboard.env</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を編集する必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># ()       </span>
<span class="hljs-comment">#     IP-    Docker.        SSL-.</span><font></font>
CANARY_DOMAINS=example1.com,example2.com<font></font>
<font></font>
<span class="hljs-comment">#            PDF-</span>
<span class="hljs-comment">#    NS-          .</span>
<span class="hljs-comment">#   example3.com     example1.com  example2.com</span><font></font>
CANARY_NXDOMAINS=example3.com<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メールを送信するには、Sendgridが不安定であるため、Mailgunサービスの使用をお勧めします。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのような罠は本当に効果的です。</font><font style="vertical-align: inherit;">私の場合、PDFファイルを使用したトリガーが特に役立ちます。</font><font style="vertical-align: inherit;">このサービスは、一般ユーザーと経験豊富なペンテスターの両方に役立ちます。</font><font style="vertical-align: inherit;">ハニポットとハニトケンの存在を知っている巧妙な攻撃者でさえ、ドキュメントにあるサブドメインを少なくとも冷静にしようとする誘惑に抵抗することはできません。</font><font style="vertical-align: inherit;">トラップを注意深く賢く使うと、クラッカーを早い段階で発見できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの手法は、サーバー、デスクトップコンピューター、ファイルストレージ、さらには電話でも使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カナリアトークンを独自のDockerインスタンスにデプロイする場合は、仮想マシンにDockerを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マーケットプレイス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">からワンクリックでインストールし</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">さらに、</font><b><font style="vertical-align: inherit;">DONTPANIC</font></b><font style="vertical-align: inherit;">プロモーションコードを使用すると、すべてのサーバーが15％割引になります</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja495456/index.html">＃家に座っているときに生産性を高めるのに役立つFigmaの14の新しいプラグインのレビュー</a></li>
<li><a href="../ja495458/index.html">子供たちがあなたの周りを走り回り、「何のために働きますか？」</a></li>
<li><a href="../ja495460/index.html">地球の22,000倍の気泡が天王星で爆発した</a></li>
<li><a href="../ja495462/index.html">.NET Core：仮想マシンのx86_64組み込み関数</a></li>
<li><a href="../ja495464/index.html">情報メッセージ404-間違いだけでなく休日も</a></li>
<li><a href="../ja495468/index.html">データ収集端末でも機能する値札認識アルゴリズム</a></li>
<li><a href="../ja495472/index.html">菜食主義に切り替えてもCOVID-19のような病気に感染するのを防ぐことはできません</a></li>
<li><a href="../ja495474/index.html">DataGrip 2020.1：構成の起動、Excelへのエクスポート、エディターでの結果など</a></li>
<li><a href="../ja495476/index.html">Atari DeepMind AIの成功が残念な理由</a></li>
<li><a href="../ja495478/index.html">大小のデータテスター：トレンド、理論、私のストーリー</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>