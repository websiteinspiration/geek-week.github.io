<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍👩‍👧‍👧 👇🏿 👩‍🍳 Primitivas de estilo OpenGL RAII 👩🏻‍🔧 😕 👩🏻‍🚒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Buenas tardes, usuarios de Habra. No he escrito durante mucho tiempo y tal vez alguien estaba esperando artículos míos, por supuesto que no. Como mi t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Primitivas de estilo OpenGL RAII</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495068/"><img src="https://habrastorage.org/webt/0u/1b/ti/0u1btiovpgzzcwrqhahy0w1yymw.png" align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buenas tardes, usuarios de Habra. </font><font style="vertical-align: inherit;">No he escrito durante mucho tiempo y tal vez alguien estaba esperando artículos míos, por supuesto que no. </font><font style="vertical-align: inherit;">Como mi tiempo libre se volvió un poco más y mi GitHub está completamente vacío, decidí escribir mi clon </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mein kampf</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Minecraft. </font><font style="vertical-align: inherit;">Con alta probabilidad, documentaré esto: siga mis artículos en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habr.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Hoy mostraré cómo envolví las primitivas de OpenGL en el estilo RAII, si es interesante, bajo cat.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Escriba en los comentarios sobre lo que le gustaría leer. </font><font style="vertical-align: inherit;">¿Debo escribir Minecraft desde cero? </font><font style="vertical-align: inherit;">Ahora comencemos. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mostraré el objeto Buffer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como ejemplo </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Lo primero que haremos es hacer las llamadas principales ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">glGenBuffers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">glDeleteBuffers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) en una clase separada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En algún lugar como este:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">buffer_object</span>
{</span>
<span class="hljs-keyword">public</span>:<font></font>
    buffer_object() <span class="hljs-keyword">noexcept</span> {<font></font>
        glGenBuffers(<span class="hljs-number">1</span>, m_object);<font></font>
    }<font></font>
    <font></font>
    ~buffer_object() <span class="hljs-keyword">noexcept</span> {<font></font>
        glDeleteBuffers(<span class="hljs-number">1</span>, m_object);<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">uint32_t</span> <span class="hljs-title">get_object</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span> </span>{
        <span class="hljs-keyword">return</span> m_object;<font></font>
    }<font></font>
<span class="hljs-keyword">private</span>:
    <span class="hljs-keyword">uint32_t</span> m_object;<font></font>
};</code></pre><br>
<font color="#008000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pros:</font></font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No es necesario controlar la eliminación del búfer</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La habilitación del encabezado OpenGL no sobresale (si transferimos la definición de funciones a * .cpp)</font></font></li>
</ul><br>
<font color="#FF0000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desventajas:</font></font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No podemos especificar el tipo de búfer (matriz, elemento ...) al vincular</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No se pueden crear múltiples buffers con una sola llamada a glGenBuffers</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problemas para acceder a un objeto remoto si se copió el búfer</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para resolver el problema con la copia, simplemente lo prohibimos. </font><font style="vertical-align: inherit;">Para hacer esto, cree una clase no copiable y herede. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejemplo de clase no copiable:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">noncopyable</span>
{</span>
    noncopyable() = <span class="hljs-keyword">default</span>;<font></font>
            <font></font>
    noncopyable(noncopyable&amp;&amp;) = <span class="hljs-keyword">default</span>;<font></font>
    noncopyable&amp; <span class="hljs-keyword">operator</span> = (noncopyable&amp;&amp;) = <span class="hljs-keyword">default</span>;<font></font>
            <font></font>
    noncopyable(<span class="hljs-keyword">const</span> noncopyable&amp;) = <span class="hljs-keyword">delete</span>;<font></font>
    noncopyable&amp; <span class="hljs-keyword">operator</span> = (<span class="hljs-keyword">const</span> noncopyable&amp;) = <span class="hljs-keyword">delete</span>;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Genial, menos un problema. </font><font style="vertical-align: inherit;">Pensamos más, cómo resolveríamos el problema con el enlace ... agregue las funciones de vinculación / desvinculación:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">bind</span><span class="hljs-params">(buffer_type type)</span> <span class="hljs-keyword">noexcept</span> </span>{<font></font>
    glBindBuffer(<span class="hljs-keyword">static_cast</span>&lt;GLenum&gt;(type), m_object);<font></font>
}<font></font>
    <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">unbind</span><span class="hljs-params">()</span> <span class="hljs-keyword">noexcept</span> </span>{<font></font>
    glBindBuffer(<span class="hljs-keyword">static_cast</span>&lt;GLenum&gt;(type), <span class="hljs-number">0</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
buffer_type es una clase enum, pero puede hacer que extern const (en * .hpp) y en (* .cpp) hagan algo como:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">const</span> <span class="hljs-keyword">uint32_t</span> array_buffer = GL_ARRAY_BUFFER;</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De nuevo, eso no sobresaldría </font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;GL/glew.h&gt;</span></span></code></pre><br>
<font color="#008000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pros:</font></font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No es necesario controlar la eliminación del búfer</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La habilitación del encabezado OpenGL no sobresale (si transferimos la definición de funciones a * .cpp)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Podemos indicar el tipo de búfer (matriz, elemento ...) cuando se vincula</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin copia - sin problemas de copia</font></font></li>
</ul><br>
<font color="#FF0000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desventajas:</font></font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No se pueden crear múltiples buffers con una sola llamada a glGenBuffers</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, casi todo es super, pero aún no podemos crear varios buffers ... Arreglemoslo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
glGenBuffers puede llevar un puntero a una matriz y el número de buffers para generar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Necesitamos una matriz, podríamos usar std :: vector, pero necesitamos asignar memoria solo una vez, y preferiría std :: array aquí, aunque en el futuro tendremos que hacer un nivel más de abstracción debido a esto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reescribimos nuestra clase en std :: array y agregamos un poco de plantillas:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">uint8_t</span> default_object_count = <span class="hljs-number">1</span>;
<span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">size_t</span>  default_index        = <span class="hljs-number">0</span>;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;type::buffer_type type, <span class="hljs-keyword">uint32_t</span> count = default_object_count&gt;<font></font>
class buffer_object : noncopyable<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:<font></font>
    buffer_object() <span class="hljs-keyword">noexcept</span> {<font></font>
        glGenBuffers(count, m_object.data());<font></font>
    }<font></font>
    <font></font>
    ~buffer_object() <span class="hljs-keyword">noexcept</span> {<font></font>
        glDeleteBuffers(count, m_object.data());<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">size_t</span> index = default_index&gt;
    <span class="hljs-keyword">void</span> bind() <span class="hljs-keyword">noexcept</span><font></font>
    {<font></font>
        <span class="hljs-keyword">static_assert</span>(index &lt; count, <span class="hljs-string">"index larger than array size"</span>);<font></font>
        glBindBuffer(<span class="hljs-keyword">static_cast</span>&lt;GLenum&gt;(type), m_object[index]);<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">unbind</span><span class="hljs-params">()</span> <span class="hljs-keyword">noexcept</span> </span>{<font></font>
        glBindBuffer(<span class="hljs-keyword">static_cast</span>&lt;GLenum&gt;(type), <span class="hljs-number">0</span>);<font></font>
    }<font></font>
    <font></font>
    buffer_object(buffer_object&amp;&amp;) = <span class="hljs-keyword">default</span>;<font></font>
    buffer_object&amp; <span class="hljs-keyword">operator</span> = (buffer_object&amp;&amp;) = <span class="hljs-keyword">default</span>;<font></font>
    <font></font>
<span class="hljs-keyword">private</span>:
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">array</span>&lt;<span class="hljs-keyword">uint32_t</span>, count&gt; m_object;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y aquí está lo que tenemos. </font></font><br>
<br>
<font color="#008000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pros:</font></font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No es necesario controlar la eliminación del búfer</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Podemos indicar el tipo de búfer (matriz, elemento ...) cuando se vincula</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin copia - sin problemas de copia</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Podemos crear varios buffers con una sola llamada a glGenBuffers</font></font></li>
</ul><br>
<font color="#FF0000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desventajas:</font></font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No se pueden vincular diferentes buffers en el mismo objeto.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Habilitar el encabezado OpenGL sobresale</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno ... demasiados contras, ¿qué se puede hacer? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede eliminar la inclusión de GL / glew.h agregando otro nivel de abstracción en el que se llamarán las funciones de OpenGL (en cualquier caso, esto debería hacerse si se planea la compatibilidad con OpenGL + DirectX). </font><font style="vertical-align: inherit;">La vinculación con diferentes búferes es un poco más complicada, ya que podemos olvidar qué índice con qué búfer fue prohibido, como opción, agregar otra matriz y escribirle el tipo de búfer. </font><font style="vertical-align: inherit;">Todavía no he hecho esto; en esta etapa de desarrollo, esto es suficiente para mí.</font></font><br>
<br>
<h3><font color="#4682B4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prima</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para un uso más conveniente, hice una clase de vinculación con ámbito. </font><font style="vertical-align: inherit;">Ahi esta:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">uint32_t</span> default_bind_index = <span class="hljs-number">0</span>;
<span class="hljs-keyword">template</span> &lt;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">T</span>&gt;
<span class="hljs-title">class</span> <span class="hljs-title">binder</span> :</span> utils::noncopyable<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
      <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">uint32_t</span> index = default_bind_index&gt;<font></font>
      binder(T&amp; ref) : m_ref(ref) { m_ref.<span class="hljs-keyword">template</span> bind&lt;index&gt;(); }<font></font>
    ~binder()                            { m_ref.unbind();}<font></font>
        <font></font>
<span class="hljs-keyword">private</span>:<font></font>
    T&amp; m_ref;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algunos pueden estar desconcertados por esta línea: </font></font><br>
<br>
<pre><code class="cpp hljs">m_ref.<span class="hljs-keyword">template</span> bind&lt;index&gt;();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si no especificamos la palabra clave de plantilla, </font></font><br>
<br>
<font color="#FF0000"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">detectamos</font></font></b></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> el siguiente error: </font><font color="#FF0000"><b><font style="vertical-align: inherit;">binder.hpp: 22: 46: falta la palabra clave 'plantilla' antes del nombre de plantilla dependiente 'bind'.</font></b></font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Esto significa que en este caso, cuando T es un tipo dependiente. El compilador aún no sabe de qué tipo es m_ref. Como todavía no había ningún enlace, el compilador lo procesa de manera puramente sintáctica, por lo tanto, &lt;se interpreta como un operador menor que. Para indicarle al compilador que esto es, de hecho, una especialización de una plantilla de función miembro, debe agregar la palabra clave de plantilla inmediatamente después del operador de punto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y un ejemplo de uso:</font></font><br>
<br>
<pre><code class="cpp hljs">GLuint VAO;<font></font>
    <font></font>
primitive::buffer_object&lt;type::buffer_type::<span class="hljs-built_in">array</span>&gt; vbo;<font></font>
primitive::buffer_object&lt;type::buffer_type::element&gt; ebo;<font></font>
    <font></font>
glGenVertexArrays(<span class="hljs-number">1</span>, &amp;VAO);<font></font>
glBindVertexArray(VAO);<font></font>
    <font></font>
{<font></font>
    primitive::binder bind{vbo};<font></font>
        <font></font>
    glBufferData(GL_ARRAY_BUFFER, ...);<font></font>
        <font></font>
    glVertexAttribPointer(...);<font></font>
    glEnableVertexAttribArray(...);<font></font>
        <font></font>
    glVertexAttribPointer(...);<font></font>
    glEnableVertexAttribArray(...);<font></font>
}<font></font>
    <font></font>
{<font></font>
    primitive::binder bind{ebo};<font></font>
        <font></font>
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, ...);<font></font>
        <font></font>
    glBindVertexArray(<span class="hljs-number">0</span>);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este código no usa el objeto para Vertex Array, porque no funciona, no he descubierto las razones, pero pronto lo descubriré xD </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Además, los envoltorios para las llamadas de datos de búfer y OpenGL aún no están listos, no se han reescrito en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSA (Acceso directo al estado)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gracias a quienes lo leyeron hasta el final. </font><font style="vertical-align: inherit;">Estaré muy contento con las críticas y los comentarios.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es495030/index.html">Cómo memorizar palabras y frases extranjeras</a></li>
<li><a href="../es495032/index.html">Lo que necesita saber sobre las colecciones basadas en hash</a></li>
<li><a href="../es495036/index.html">Un simple bot de Telegram en Flask con informes meteorológicos</a></li>
<li><a href="../es495038/index.html">Diseño en Confluence</a></li>
<li><a href="../es495042/index.html"># 01 - Y un byte completo no es suficiente ... | ¿Qué son las intro?</a></li>
<li><a href="../es495072/index.html">Home Office en un dispositivo móvil: uso de Samsung DeX</a></li>
<li><a href="../es495076/index.html">Diseño compositivo en iOS 13. Aspectos básicos</a></li>
<li><a href="../es495078/index.html">Cómo usamos itracker para un experimento cuantitativo</a></li>
<li><a href="../es495080/index.html">Cuentos de un director técnico experimentado</a></li>
<li><a href="../es495082/index.html">Información de confianza cero</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>