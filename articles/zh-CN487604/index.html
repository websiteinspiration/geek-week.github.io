<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‡ğŸ» âš”ï¸ ğŸ”— åµŒå…¥ç¨‹åºå‘˜çš„ç®€çŸ­è¯´æ˜ï¼šå¾®æ§åˆ¶å™¨å†…å­˜ä¸­çš„èŠ‚é‡å¤ ğŸ”¬ ğŸ‘©ğŸ¾â€ğŸ« ğŸ³ï¸â€ğŸŒˆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åˆå§‹çŠ¶æ€
 æœ‰ä¸€ä¸ªåŸºäºå¾®æ§åˆ¶å™¨çš„è®¾å¤‡ï¼ˆä¾‹å¦‚ï¼Œå°†é‡‡ç”¨stm32f405rgt6ï¼‰ã€‚å¯ç”¨åï¼Œå®ƒå°†æ ¹æ®ç”¨æˆ·é¦–é€‰é¡¹æˆ–é»˜è®¤è®¾ç½®è°ƒæ•´å¤–å›´è®¾å¤‡ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ä¸€ç§å¯èƒ½çš„ç•Œé¢ï¼ˆCLIèœå•æˆ–ç”¨äºè®¾ç½®é€šè¿‡äºŒè¿›åˆ¶åè®®å·¥ä½œçš„å·¥ä½œå‚æ•°çš„å®ç”¨ç¨‹åºï¼‰åœ¨è®¾å¤‡è¿è¡ŒæœŸé—´æ›´æ”¹è®¾ç½®ï¼ˆé€šå¸¸ï¼Œä»…åœ¨é›†æˆåˆ°ç»„åˆç³»ç»Ÿæ—¶ï¼‰ã€‚è®¾ç½®å®Œå‚æ•°åï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ç‰¹...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>åµŒå…¥ç¨‹åºå‘˜çš„ç®€çŸ­è¯´æ˜ï¼šå¾®æ§åˆ¶å™¨å†…å­˜ä¸­çš„èŠ‚é‡å¤</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487604/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆå§‹çŠ¶æ€</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ‰ä¸€ä¸ªåŸºäºå¾®æ§åˆ¶å™¨çš„è®¾å¤‡ï¼ˆä¾‹å¦‚ï¼Œå°†é‡‡ç”¨stm32f405rgt6ï¼‰ã€‚</font><font style="vertical-align: inherit;">å¯ç”¨åï¼Œå®ƒå°†æ ¹æ®ç”¨æˆ·é¦–é€‰é¡¹æˆ–é»˜è®¤è®¾ç½®è°ƒæ•´å¤–å›´è®¾å¤‡ã€‚</font><font style="vertical-align: inherit;">ç”¨æˆ·å¯ä»¥é€šè¿‡ä¸€ç§å¯èƒ½çš„ç•Œé¢ï¼ˆCLIèœå•æˆ–ç”¨äºè®¾ç½®é€šè¿‡äºŒè¿›åˆ¶åè®®å·¥ä½œçš„å·¥ä½œå‚æ•°çš„å®ç”¨ç¨‹åºï¼‰åœ¨è®¾å¤‡è¿è¡ŒæœŸé—´æ›´æ”¹è®¾ç½®ï¼ˆé€šå¸¸ï¼Œä»…åœ¨é›†æˆåˆ°ç»„åˆç³»ç»Ÿæ—¶ï¼‰ã€‚</font><font style="vertical-align: inherit;">è®¾ç½®å®Œå‚æ•°åï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ç‰¹æ®Šå‘½ä»¤ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡å¯èƒ½çš„æ¥å£ä¹‹ä¸€ï¼‰ä¿å­˜è®¾ç½®ã€‚</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»»åŠ¡</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºäº†å‡å°‘è¿è¡ŒæœŸé—´è®¿é—®è®¾å¤‡è®¾ç½®å˜é‡æ‰€éœ€çš„æ—¶é—´ï¼Œæ‚¨éœ€è¦å°†å½“å‰å€¼ä¿ç•™åœ¨RAMä¸­ï¼ˆé€šå¸¸ï¼Œè¿™äº›æ•°æ®çš„æ•°é‡ä»åå‡ ä¸ªå˜é‡åˆ°3 KBä¸ç­‰ï¼Œå…·ä½“å–å†³äºè®¾å¤‡ï¼‰ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¿…é¡»å°†ç”¨æˆ·è®¾ç½®ä¸€å¼ä¸¤ä»½å­˜å‚¨åœ¨å¾®æ§åˆ¶å™¨çš„é—ªå­˜ä¸­ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”¨æˆ·è®¾ç½®çš„æ¯ä¸ªå®ä¾‹éƒ½å¿…é¡»åœ¨æœ‰æ•ˆè´Ÿè½½ä¹‹åç«‹å³ä»¥CRC32ç»“å°¾ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹äºæ¯ä¸ªç”¨æˆ·è®¾ç½®å®ä¾‹ï¼Œé—ªå­˜ä¸­éƒ½ä¼šä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„é¡µé¢ï¼ˆå³ä½¿æœ‰ç”¨æ•°æ®ä¸º2 kbï¼Œå¹¶ä¸”è¿™äº›é¡µé¢é™¤ä»¥128 kbï¼Œç„¶åæ•´ä¸ªé¡µé¢éƒ½åœ¨ä¸€ä¸ªå—å†…ç»™å‡ºï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¾®æ§åˆ¶å™¨è½¯ä»¶ä»£ç å¿…é¡»å­˜å‚¨é»˜è®¤è®¾ç½®ï¼Œå¦‚æœä¸¤è€…å‡å·²æŸåï¼Œåˆ™é»˜è®¤è®¾ç½®åº”ä¸ºç”¨æˆ·è®¾ç½®å—</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°è¯•è§£å†³</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GCCï¼ˆåœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼‰æ²¡æœ‰æ ‡è®°æ¥è·å–è¯¥èŠ‚çš„å‰¯æœ¬ã€‚</font><font style="vertical-align: inherit;">ç”¨â€œé­”æœ¯çº¿â€è¡¥å……LDè„šæœ¬ä¹Ÿå¤±è´¥ã€‚</font><font style="vertical-align: inherit;">å¯ä»¥ä½¿ç”¨objcopyè¿›è¡Œå·¥ä½œï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•éå¸¸éšå¼ï¼Œå¹¶å¯¼è‡´ç»†å¾®çš„é”™è¯¯ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å†³æ–­</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è§£å†³æ–¹æ¡ˆæ˜¯åœ¨ç”¨æˆ·ä»£ç ä¸­åˆ›å»ºæ‰€éœ€å®ä½“ï¼ˆå˜é‡ï¼Œç»“æ„ï¼Œæ•°ç»„ç­‰ï¼‰çš„éšå¼å‰¯æœ¬ï¼Œç„¶ååœ¨å†…å­˜ä¸­åˆ›å»ºå®ƒä»¬çš„ä½ç½®ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»ºç”¨äºéšè—ç»“æ„å¤åˆ¶çš„å®</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå®ï¼Œé€šè¿‡è¯¥å®æˆ‘ä»¬å°†ä¸ºRAMä¸­çš„ç»“æ„ï¼Œåœ¨å•ç‹¬é¡µé¢ä¸Šä»¥åŠç”¨æˆ·ä»£ç ä¸­ï¼ˆç”¨äºåˆå§‹å€¼ï¼‰çš„2ä¸ªFlashå­˜å‚¨å™¨å®ä¾‹ä¿ç•™ä¸€ä¸ªä½ç½®ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> USER_CFG_DATA_STRUCT(TYPE,NAME,...) \
    __attribute__((aligned(4), section (<span class="hljs-meta-string">".user_cfg_data_ram_page"</span>))) \
    TYPE NAME = __VA_ARGS__; \
    __attribute__((aligned(4), section (<span class="hljs-meta-string">".user_cfg_data_flash_default_page"</span>))) \
    TYPE flash_default_page_##NAME = __VA_ARGS__; \
    __attribute__((aligned(4), section (<span class="hljs-meta-string">".user_cfg_data_flash_page_1"</span>))) \
    TYPE flash_page_1_##NAME = __VA_ARGS__; \
    __attribute__((aligned(4), section (<span class="hljs-meta-string">".user_cfg_data_flash_page_2"</span>))) \
    TYPE flash_page_2_##NAME = __VA_ARGS__;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨å®ï¼Œå°†åˆ›å»ºå…·æœ‰ä¸åŒåç§°çš„4ä¸ªç»“æ„å®ä¾‹ã€‚</font><font style="vertical-align: inherit;">åœ¨é¡¹ç›®ä»£ç ä¸­ï¼ˆç”¨äºç”¨æˆ·è®¾ç½®å­˜å‚¨é¡µé¢çš„ç³»ç»Ÿé™¤å¤–ï¼‰ï¼Œæ‰€æœ‰æ¨¡å—å¿…é¡»ä½¿ç”¨ä¸å¸¦å‰ç¼€çš„ç»“æ„ï¼ˆå®ä¸­æŒ‡å®šçš„åç§°ï¼‰ï¼Œè¯¥ç»“æ„å°†ä½äºRAMä¸­ï¼ˆå¯ä»¥æ›´æ”¹è´Ÿè´£ç”¨æˆ·äº¤äº’çš„æ¨¡å—ï¼Œå…¶ä½™çš„ä»…åº”ä»ä¸­è¯»å–ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨ç”¨æˆ·ä»£ç ä¸­ä½¿ç”¨å®çš„ç¤ºä¾‹ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">test_st</span> {</span>
    <span class="hljs-keyword">uint32_t</span> a1;
    <span class="hljs-keyword">uint32_t</span> a2;<font></font>
} <span class="hljs-keyword">test_st_t</span>;<font></font>
<font></font>
USER_CFG_DATA_STRUCT(<span class="hljs-keyword">test_st_t</span>, name_st, {<font></font>
    .a1 = <span class="hljs-number">1</span>,<font></font>
    .a2 = <span class="hljs-number">2</span>
})</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»é¡¹ç›®ä»£ç ä¸­å¯è·å¾—ç»“æ„å®ä¾‹name_stä¹‹åã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»ºå®ä»¥éšè—å…¶ä»–å®ä½“</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦åˆ›å»ºå˜é‡ï¼Œæ‚¨åªéœ€è¦æ‰§è¡Œå®æ›¿æ¢å³å¯åˆ›å»ºç»“æ„ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºæ•°ç»„ï¼Œæ·»åŠ å…ƒç´ æ•°ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> USER_CFG_DATA_VAR USER_CFG_DATA_STRCUT</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> USER_CFG_DATA_ARRAY(TYPE,NAME,SIZE,...) \
    __attribute__((aligned(4), section (<span class="hljs-meta-string">".user_cfg_data_ram_page"</span>))) \
    TYPE NAME[SIZE] = __VA_ARGS__; \
    __attribute__((aligned(4), section (<span class="hljs-meta-string">".user_cfg_data_flash_default_page"</span>))) \
    TYPE flash_default_page_##NAME[SIZE] = __VA_ARGS__; \
    __attribute__((aligned(4), section (<span class="hljs-meta-string">".user_cfg_data_flash_page_1"</span>))) \
    TYPE flash_page_1_##NAME[SIZE] = __VA_ARGS__; \
    __attribute__((aligned(4), section (<span class="hljs-meta-string">".user_cfg_data_flash_page_2"</span>))) \
    TYPE flash_page_2_##NAME[SIZE] = __VA_ARGS__;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨åŸç†ç±»ä¼¼äºä½¿ç”¨ç»“æ„ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LDè„šæœ¬å®Œæˆ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ›å»ºå®ä½“å‰¯æœ¬æ—¶ï¼Œä¼šæŒ‡å‡ºå®ƒä»¬ä½äºå“ªäº›éƒ¨åˆ†ã€‚</font><font style="vertical-align: inherit;">ç°åœ¨ï¼Œæ‚¨åº”è¯¥åœ¨LDè„šæœ¬ä¸­åˆ›å»ºè¿™äº›éƒ¨åˆ†ã€‚</font><font style="vertical-align: inherit;">å¯¹äºF4ï¼Œæ¥è‡ªSTçš„å¢å¼ºLDè„šæœ¬å°†å¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LDè„šæœ¬</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">MEMORY<font></font>
{<font></font>
    FLASH (rx) : ORIGIN = <span class="hljs-number">0x08000000</span>, LENGTH = <span class="hljs-number">1024</span>K - <span class="hljs-number">256</span>K <span class="hljs-comment">/* 256   user_cfg */</span>
   USER_CFG_PAGE_1 (rx) : ORIGIN = <span class="hljs-number">0x080C0000</span>, LENGTH = <span class="hljs-number">128</span>K - <span class="hljs-number">4</span>     <span class="hljs-comment">/* 4  CRC32 */</span>
    USER_CFG_PAGE_2 (rx) : ORIGIN = <span class="hljs-number">0x080E0000</span>, LENGTH = <span class="hljs-number">128</span>K - <span class="hljs-number">4</span>     <span class="hljs-comment">/* 4  CRC32 */</span>
    CCM (xrw) : ORIGIN = <span class="hljs-number">0x10000000</span>, LENGTH = <span class="hljs-number">64</span>K<font></font>
    RAM (xrw) : ORIGIN = <span class="hljs-number">0x20000000</span>, LENGTH = <span class="hljs-number">128</span>K<font></font>
}<font></font>
</code></pre><br>
<pre><code class="cpp hljs"><span class="hljs-comment">/*       CRC32.
       .      - . */</span>
user_cfg_data_flash_page_1_size = LENGTH(user_cfg_PAGE_1) + <span class="hljs-number">4</span>;<font></font>
user_cfg_data_flash_page_2_size = LENGTH(user_cfg_PAGE_2) + <span class="hljs-number">4</span>;<font></font>
user_cfg_data_flash_page_size = user_cfg_data_flash_page_1_size;<font></font>
<font></font>
<span class="hljs-comment">/*
 * The '__stack' definition is required by crt0, do not remove it.
 */</span><font></font>
__stack = ORIGIN(RAM) + LENGTH(RAM);<font></font>
<font></font>
_estack = __stack;     <span class="hljs-comment">/* STM specific definition */</span><font></font>
<font></font>
<span class="hljs-comment">/*
 * Default stack sizes.
 * These are used by the startup in order to allocate stacks
 * for the different modes.
 */</span><font></font>
<font></font>
__Main_Stack_Size = <span class="hljs-number">1024</span> ;<font></font>
<font></font>
PROVIDE ( _Main_Stack_Size = __Main_Stack_Size ) ;<font></font>
<font></font>
__Main_Stack_Limit = __stack  - __Main_Stack_Size ;<font></font>
<font></font>
<span class="hljs-comment">/*"PROVIDE" allows to easily override these values from an object file or the command line. */</span><font></font>
PROVIDE ( _Main_Stack_Limit = __Main_Stack_Limit ) ;<font></font>
<font></font>
<span class="hljs-comment">/*
 * There will be a link error if there is not this amount of
 * RAM free at the end.
 */</span>
_Minimum_Stack_Size = <span class="hljs-number">512</span> ;<font></font>
<font></font>
<span class="hljs-comment">/*
 * Default heap definitions.
 * The heap start immediately after the last statically allocated
 * .sbss/.noinit section, and extends up to the main stack limit.
 */</span><font></font>
PROVIDE ( _Heap_Begin = _end_noinit ) ;<font></font>
PROVIDE ( _Heap_Limit = __stack - __Main_Stack_Size ) ;<font></font>
<font></font>
SECTIONS<font></font>
{<font></font>
    .isr_vector :<font></font>
    {<font></font>
        KEEP(*(.isr_vector))         <span class="hljs-comment">/* Interrupt vectors */</span>
        KEEP(*(.cfmconfig))            <span class="hljs-comment">/* Freescale configuration words */</span>
        *(.after_vectors .after_vectors.*)    <span class="hljs-comment">/* Startup code and ISR */</span>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
    } &gt;FLASH<font></font>
<font></font>
    .inits :<font></font>
    {<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
<font></font>
        <span class="hljs-comment">/*
         * These are the old initialisation sections, intended to contain
         * naked code, with the prologue/epilogue added by crti.o/crtn.o
         * when linking with startup files. The standalone startup code
         * currently does not run these, better use the init arrays below.
         */</span><font></font>
        KEEP(*(.init))<font></font>
        KEEP(*(.fini))<font></font>
<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
<font></font>
        <span class="hljs-comment">/*
         * The preinit code, i.e. an array of pointers to initialisation
         * functions to be performed before constructors.
         */</span><font></font>
        PROVIDE_HIDDEN (__preinit_array_start = .);<font></font>
<font></font>
        <span class="hljs-comment">/*
         * Used to run the SystemInit() before anything else.
         */</span><font></font>
        KEEP(*(.preinit_array_sysinit .preinit_array_sysinit.*))<font></font>
<font></font>
        <span class="hljs-comment">/*
         * Used for other platform inits.
         */</span><font></font>
        KEEP(*(.preinit_array_platform .preinit_array_platform.*))<font></font>
<font></font>
        <span class="hljs-comment">/*
         * The application inits. If you need to enforce some order in
         * execution, create new sections, as before.
         */</span><font></font>
        KEEP(*(.preinit_array .preinit_array.*))<font></font>
<font></font>
        PROVIDE_HIDDEN (__preinit_array_end = .);<font></font>
<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
<font></font>
        <span class="hljs-comment">/*
         * The init code, i.e. an array of pointers to static constructors.
         */</span><font></font>
        PROVIDE_HIDDEN (__init_array_start = .);<font></font>
        KEEP(*(SORT(.init_array.*)))<font></font>
        KEEP(*(.init_array))<font></font>
        PROVIDE_HIDDEN (__init_array_end = .);<font></font>
<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
<font></font>
        <span class="hljs-comment">/*
         * The fini code, i.e. an array of pointers to static destructors.
         */</span><font></font>
        PROVIDE_HIDDEN (__fini_array_start = .);<font></font>
        KEEP(*(SORT(.fini_array.*)))<font></font>
        KEEP(*(.fini_array))<font></font>
        PROVIDE_HIDDEN (__fini_array_end = .);<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
<font></font>
    } &gt;FLASH<font></font>
<font></font>
    <span class="hljs-comment">/*
     * For some STRx devices, the beginning of the startup code
     * is stored in the .flashtext section, which goes to FLASH.
     */</span><font></font>
    .flashtext :<font></font>
    {<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
        *(.flashtext .flashtext.*)    <span class="hljs-comment">/* Startup code */</span>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
    } &gt;FLASH<font></font>
<font></font>
<font></font>
    <span class="hljs-comment">/*
     * The program code is stored in the .text section,
     * which goes to FLASH.
     */</span><font></font>
    .text :<font></font>
    {<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
<font></font>
        *(.text .text.*)            <span class="hljs-comment">/* all remaining code */</span><font></font>
<font></font>
        *(.rodata .rodata.*)         <span class="hljs-comment">/* read-only data (constants) */</span><font></font>
<font></font>
        *(vtable)                    <span class="hljs-comment">/* C++ virtual tables */</span><font></font>
<font></font>
        KEEP(*(.eh_frame*))<font></font>
<font></font>
        <span class="hljs-comment">/*
         * Stub sections generated by the linker, to glue together
         * ARM and Thumb code. .glue_7 is used for ARM code calling
         * Thumb code, and .glue_7t is used for Thumb code calling
         * ARM code. Apparently always generated by the linker, for some
         * architectures, so better leave them here.
         */</span><font></font>
        *(.glue_7)<font></font>
        *(.glue_7t)<font></font>
    } &gt;FLASH<font></font>
<font></font>
    .user_cfg_data_flash_default_page :<font></font>
    {<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
        user_cfg_data_flash_default_page_start = .;<font></font>
        KEEP(*(.user_cfg_data_flash_default_page .user_cfg_data_flash_default_page.*))<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
        user_cfg_data_flash_default_page_stop = .;<font></font>
    } &gt;FLASH<font></font>
<font></font>
    <span class="hljs-comment">/* ARM magic sections */</span><font></font>
    .ARM.extab :<font></font>
       {<font></font>
       *(.ARM.extab* .gnu.linkonce.armextab.*)<font></font>
       } &gt; FLASH<font></font>
<font></font>
       __exidx_start = .;<font></font>
       .ARM.exidx :<font></font>
       {<font></font>
       *(.ARM.exidx* .gnu.linkonce.armexidx.*)<font></font>
       } &gt; FLASH<font></font>
       __exidx_end = .;<font></font>
<font></font>
    . = ALIGN(<span class="hljs-number">4</span>);<font></font>
    _etext = .;<font></font>
    __etext = .;<font></font>
<font></font>
    <span class="hljs-comment">/*
     * This address is used by the startup code to
     * initialise the .data section.
     */</span><font></font>
    _sidata = _etext;<font></font>
<font></font>
    <span class="hljs-comment">/* MEMORY_ARRAY */</span>
    <span class="hljs-comment">/*
    .ROarraySection :
    {
         *(.ROarraySection .ROarraySection.*)
    } &gt;MEMORY_ARRAY
    */</span><font></font>
<font></font>
    <span class="hljs-comment">/*
     * The initialised data section.
     * The program executes knowing that the data is in the RAM
     * but the loader puts the initial values in the FLASH (inidata).
     * It is one task of the startup to copy the initial values from
     * FLASH to RAM.
     */</span><font></font>
    .data  : AT ( _sidata )<font></font>
    {<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
<font></font>
        <span class="hljs-comment">/* This is used by the startup code to initialise the .data section */</span>
        _sdata = . ;            <span class="hljs-comment">/* STM specific definition */</span><font></font>
        __data_start__ = . ;<font></font>
        *(.data_begin .data_begin.*)<font></font>
<font></font>
        *(.data .data.*)<font></font>
<font></font>
        *(.data_end .data_end.*)<font></font>
<font></font>
        *(.ramfunc*)<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
<font></font>
        <span class="hljs-comment">/* This is used by the startup code to initialise the .data section */</span>
        _edata = . ;            <span class="hljs-comment">/* STM specific definition */</span><font></font>
        __data_end__ = . ;<font></font>
<font></font>
    } &gt;RAM<font></font>
<font></font>
<font></font>
    <span class="hljs-comment">/*
     * The uninitialised data section. NOLOAD is used to avoid
     * the "section `.bss' type changed to PROGBITS" warning
     */</span><font></font>
    .bss (NOLOAD) :<font></font>
    {<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
        __bss_start__ = .;         <span class="hljs-comment">/* standard newlib definition */</span>
        _sbss = .;              <span class="hljs-comment">/* STM specific definition */</span><font></font>
        *(.bss_begin .bss_begin.*)<font></font>
<font></font>
        *(.bss .bss.*)<font></font>
        *(COMMON)<font></font>
<font></font>
        *(.bss_end .bss_end.*)<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
        __bss_end__ = .;        <span class="hljs-comment">/* standard newlib definition */</span>
        _ebss = . ;             <span class="hljs-comment">/* STM specific definition */</span><font></font>
    } &gt;RAM<font></font>
<font></font>
    .user_cfg_data_ram_page :<font></font>
    {<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
        user_cfg_data_ram_page_start = .;<font></font>
        KEEP(*(.user_cfg_data_ram_page .user_cfg_data_ram_page.*))<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
        user_cfg_data_ram_page_stop = .;<font></font>
    } &gt; CCM<font></font>
<font></font>
    user_cfg_data_ram_page_size = user_cfg_data_ram_page_stop - user_cfg_data_ram_page_start;<font></font>
<font></font>
    .user_cfg_data_page_1 :<font></font>
    {<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
        user_cfg_data_flash_page_1_start = .;<font></font>
         KEEP(*(.user_cfg_data_flash_page_1 .user_cfg_data_flash_page_1.*))<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
        user_cfg_data_flash_page_1_stop = .;<font></font>
    } &gt; user_cfg_PAGE_1<font></font>
<font></font>
    .user_cfg_data_page_2 :<font></font>
    {<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
        user_cfg_data_flash_page_2_start = .;<font></font>
         KEEP(*(.user_cfg_data_flash_page_2 .user_cfg_data_flash_page_2.*))<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
        user_cfg_data_flash_page_2_stop = .;<font></font>
    } &gt; user_cfg_PAGE_2<font></font>
<font></font>
    .noinit (NOLOAD) :<font></font>
    {<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
        _noinit = .;<font></font>
<font></font>
        *(.noinit .noinit.*)<font></font>
<font></font>
         . = ALIGN(<span class="hljs-number">4</span>) ;<font></font>
        _end_noinit = .;<font></font>
    } &gt; RAM<font></font>
<font></font>
    <span class="hljs-comment">/* Mandatory to be word aligned, _sbrk assumes this */</span>
    PROVIDE ( end = _end_noinit ); <span class="hljs-comment">/* was _ebss */</span><font></font>
    PROVIDE ( _end = _end_noinit );<font></font>
    PROVIDE ( __end = _end_noinit );<font></font>
    PROVIDE ( __end__ = _end_noinit );<font></font>
<font></font>
    <span class="hljs-comment">/*
     * Used for validation only, do not allocate anything here!
     *
     * This is just to check that there is enough RAM left for the Main
     * stack. It should generate an error if it's full.
     */</span><font></font>
    ._check_stack :<font></font>
    {<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
        . = . + _Minimum_Stack_Size ;<font></font>
        . = ALIGN(<span class="hljs-number">4</span>);<font></font>
    } &gt;RAM<font></font>
<font></font>
<font></font>
    <span class="hljs-comment">/* After that there are only debugging sections. */</span><font></font>
<font></font>
    <span class="hljs-comment">/* This can remove the debugging information from the standard libraries */</span>
    <span class="hljs-comment">/*
    DISCARD :
    {
     libc.a ( * )
     libm.a ( * )
     libgcc.a ( * )
     }
     */</span><font></font>
<font></font>
    <span class="hljs-comment">/* Stabs debugging sections.  */</span>
    .stab          <span class="hljs-number">0</span> : { *(.stab) }<font></font>
    .stabstr       <span class="hljs-number">0</span> : { *(.stabstr) }<font></font>
    .stab.excl     <span class="hljs-number">0</span> : { *(.stab.excl) }<font></font>
    .stab.exclstr  <span class="hljs-number">0</span> : { *(.stab.exclstr) }<font></font>
    .stab.index    <span class="hljs-number">0</span> : { *(.stab.index) }<font></font>
    .stab.indexstr <span class="hljs-number">0</span> : { *(.stab.indexstr) }<font></font>
    .comment       <span class="hljs-number">0</span> : { *(.comment) }
    <span class="hljs-comment">/*
     * DWARF debug sections.
     * Symbols in the DWARF debugging sections are relative to the beginning
     * of the section so we begin them at 0.
     */</span>
    <span class="hljs-comment">/* DWARF 1 */</span>
    .debug          <span class="hljs-number">0</span> : { *(.debug) }<font></font>
    .line           <span class="hljs-number">0</span> : { *(.line) }
    <span class="hljs-comment">/* GNU DWARF 1 extensions */</span>
    .debug_srcinfo  <span class="hljs-number">0</span> : { *(.debug_srcinfo) }<font></font>
    .debug_sfnames  <span class="hljs-number">0</span> : { *(.debug_sfnames) }
    <span class="hljs-comment">/* DWARF 1.1 and DWARF 2 */</span>
    .debug_aranges  <span class="hljs-number">0</span> : { *(.debug_aranges) }<font></font>
    .debug_pubnames <span class="hljs-number">0</span> : { *(.debug_pubnames) }
    <span class="hljs-comment">/* DWARF 2 */</span>
    .debug_info     <span class="hljs-number">0</span> : { *(.debug_info .gnu.linkonce.wi.*) }<font></font>
    .debug_abbrev   <span class="hljs-number">0</span> : { *(.debug_abbrev) }<font></font>
    .debug_line     <span class="hljs-number">0</span> : { *(.debug_line) }<font></font>
    .debug_frame    <span class="hljs-number">0</span> : { *(.debug_frame) }<font></font>
    .debug_str      <span class="hljs-number">0</span> : { *(.debug_str) }<font></font>
    .debug_loc      <span class="hljs-number">0</span> : { *(.debug_loc) }<font></font>
    .debug_macinfo  <span class="hljs-number">0</span> : { *(.debug_macinfo) }
    <span class="hljs-comment">/* SGI/MIPS DWARF 2 extensions */</span>
    .debug_weaknames <span class="hljs-number">0</span> : { *(.debug_weaknames) }<font></font>
    .debug_funcnames <span class="hljs-number">0</span> : { *(.debug_funcnames) }<font></font>
    .debug_typenames <span class="hljs-number">0</span> : { *(.debug_typenames) }<font></font>
    .debug_varnames  <span class="hljs-number">0</span> : { *(.debug_varnames) }<font></font>
}<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œé…ç½®ç»“æ„ä¸ä½äºRAMåŒºåŸŸä¸­ï¼Œè€Œæ˜¯ä½äºCCMRAMä¸­ï¼Œä»¥æé«˜æ€§èƒ½ã€‚</font><font style="vertical-align: inherit;">æˆ‘è¿˜æ³¨æ„åˆ°ï¼Œç”¨æˆ·è®¾ç½®æ•°æ®å—æ˜¯æœ€å2ä¸ªé—ªå­˜é¡µé¢ï¼Œæ¯ä¸ªé¡µé¢å‡ä¸º128 kbã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‰¯æœ¬çš„åˆå§‹åŒ–å’Œæ§åˆ¶</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å†…å­˜å°†ç”±ç¨‹åºå‘˜è´Ÿè´£ã€‚é¦–æ¬¡ä½¿ç”¨è¯¥åŒºåŸŸä¸­çš„æ•°æ®ä¹‹å‰ï¼Œéœ€è¦åˆå§‹åŒ–è¯¥åŒºåŸŸã€‚åœ¨é—ªå­˜ä¸­ï¼Œå°†ç¨‹åºåŠ è½½åˆ°å¾®æ§åˆ¶å™¨ä¸­æ—¶ï¼Œæ•°æ®å°†ä»¥ç¨‹åºä»£ç ä¸­æŒ‡å®šçš„åˆå§‹å€¼è¿›è¡Œé¢„è®°å½•ã€‚å¦‚æœç”¨æˆ·è®¾ç½®å—ä»¥CRC32ç»“å°¾ï¼Œåˆ™ä¼šåœ¨å•ç‹¬çš„é¡µé¢ä¸­ç”Ÿæˆæ— æ•ˆçš„å‰¯æœ¬ï¼ˆå› ä¸ºä¸æ‰§è¡ŒCRC32çš„è®¡ç®—ã€‚æ‚¨çš„ä»£ç å¯ä»¥è¿™æ ·åšã€‚ä¹Ÿè¦åœ¨é¦–æ¬¡ä½¿ç”¨é…ç½®å‚æ•°ä¹‹å‰ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦ç¼–å†™ç”¨äºé…ç½®å—çš„æ¨¡å—ï¼Œæ‚¨å°†éœ€è¦ä½¿ç”¨LDè„šæœ¬ä¸­çš„å˜é‡ã€‚å°†éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">extern</span> <span class="hljs-keyword">uint32_t</span> user_cfg_data_flash_default_page_start;
<span class="hljs-keyword">extern</span> <span class="hljs-keyword">uint32_t</span> user_cfg_data_flash_page_1_start;
<span class="hljs-keyword">extern</span> <span class="hljs-keyword">uint32_t</span> user_cfg_data_flash_page_2_start;
<span class="hljs-keyword">extern</span> <span class="hljs-keyword">uint32_t</span> user_cfg_data_ram_page_start;<font></font>
<font></font>
<span class="hljs-keyword">extern</span> <span class="hljs-keyword">uint32_t</span> user_cfg_data_flash_page_size;
<span class="hljs-keyword">extern</span> <span class="hljs-keyword">uint32_t</span> user_cfg_data_ram_page_size;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒæ ·ï¼Œä¸è¦å¿˜è®°</font><font style="vertical-align: inherit;">å¯ä»¥å°†</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">user_cfg_data_flash_page_size</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">user_cfg_data_ram_page_size</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ†é…ä¸ºå¸¸è§„å€¼ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯</font><font style="vertical-align: inherit;">å¿…é¡»é€šè¿‡ï¼†æŒ‡å®š</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">user_cfg_data_flash_page_1_start</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œå…¶ä»–å­˜å‚¨åœ°å€çš„å˜é‡ã€‚</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN487584/index.html">ä¿¡æ¯å®‰å…¨åŒ–</a></li>
<li><a href="../zh-CN487588/index.html">å¤¸åº“æ–¯ï¼šè¶…éŸ³é€ŸäºšåŸå­å…½åŒ»</a></li>
<li><a href="../zh-CN487592/index.html">VMware vSAN 6.7-é›·å£°å¤§ä½œ</a></li>
<li><a href="../zh-CN487594/index.html">æœ‰è¶£çš„åŠ©è®°ç¬¦ï¼šæˆ‘ä»¬ä»è§†è§‰ä¸Šæ”¶é›†å¬è§‰è®°å¿†</a></li>
<li><a href="../zh-CN487596/index.html">Googleå¼€å‘äººå‘˜Eugene Varavvaã€‚å¦‚ä½•ç”¨5ä¸ªå­—æ¥å½¢å®¹Google</a></li>
<li><a href="../zh-CN487606/index.html">å¯è§†åŒ–å¼ åŠ›çº¿å’Œé™ç”µè·çš„è¿åŠ¨ï¼Œæ¨¡æ‹Ÿå¤ªé˜³ç³»çš„è¡Œæ˜Ÿè¿åŠ¨</a></li>
<li><a href="../zh-CN487610/index.html">çœŸå®ä¸–ç•Œï¼šaiohttpï¼ŒTortoise ORM</a></li>
<li><a href="../zh-CN487612/index.html">è½»æ¾æ·»åŠ ï¼Œåˆ é™¤å’Œé‡å‘½åCMakeé¡¹ç›®ä¸­çš„æ–‡ä»¶å’Œç›®æ ‡</a></li>
<li><a href="../zh-CN487616/index.html">ä½¿ç”¨Cï¼ƒfor Windows Formä¸­çš„ç¤ºä¾‹è¡¨åˆ›å»ºè‡ªå®šä¹‰é¡¹</a></li>
<li><a href="../zh-CN487620/index.html">ä½¿ç”¨pwnable.kr 27è§£å†³é—®é¢˜-tiny_easyã€‚äº†è§£çƒŸå›±å–·æ¶‚</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>