<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📑 🙇🏽 👈🏽 etcd 3.4.3: Speicherzuverlässigkeits- und Sicherheitsforschung 😺 👊🏽 👂🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hinweis perev. : Der Inhalt dieses Artikels ist nicht ganz typisch für unseren Blog. Wie viele wissen, befindet sich etcd jedoch im Herzen von Kuberne...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>etcd 3.4.3: Speicherzuverlässigkeits- und Sicherheitsforschung</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/487534/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis perev.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Der Inhalt dieses Artikels ist nicht ganz typisch für unseren Blog. Wie viele wissen, befindet sich etcd jedoch im Herzen von Kubernetes, weshalb sich diese Studie, die von einem unabhängigen Berater auf dem Gebiet der Zuverlässigkeit durchgeführt wurde, unter Ingenieuren, die dieses System betreiben, als interessant herausstellte. Interessant ist auch, wie Open Source-Projekte, die sich bereits in der Produktion bewährt haben, auch auf einem so "niedrigen" Niveau verbessert werden.</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/xd/av/d3/xdavd35rjqklgnrnd-0wulkpayo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Der</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tresor für</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Schlüsselwerte (KV)</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"> usw.</font></a><font style="vertical-align: inherit;"> ist eine verteilte Datenbank, die auf dem Raft-Konsensalgorithmus basiert. In einer</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2014 durchgeführten</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Analyse</font><font style="vertical-align: inherit;">haben wir festgestellt, dass etcd 0.4.1 standardmäßig von den sogenannten veralteten Lesevorgängen betroffen ist</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Leseoperationen, die aufgrund einer Verzögerung der Synchronisation einen alten, irrelevanten Wert zurückgeben - ca. übersetzt)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wir haben uns entschlossen, zu etcd zurückzukehren (diesmal zu Version 3.4.3), um das Potenzial im Bereich Zuverlässigkeit und Sicherheit erneut im Detail zu bewerten.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben festgestellt, dass die Operation mit Paaren von "Schlüsselwerten" streng serialisierbar ist und dass die Prozesse des Beobachters </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Uhren)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bei jeder Änderung des Bestellschlüssels geliefert werden. </font><font style="vertical-align: inherit;">Allerdings </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schlösser</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in ETCD sind grundsätzlich unsicher, und die mit ihnen verbundenen Risiken werden durch einen Fehler verschlimmert, als Folge davon die Relevanz des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mietvertrags</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nicht geprüft wird , </font><font style="vertical-align: inherit;">nach einer </font><font style="vertical-align: inherit;">Wartezeit für das Schloss. </font><font style="vertical-align: inherit;">Sie können den Kommentar der etcd-Entwickler in unserem Bericht </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im Projektblog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lesen </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Studie wurde von der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud Native Computing Foundation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (CNCF) gesponsert, die Teil der Linux Foundation ist. </font><font style="vertical-align: inherit;">Es wurde in voller Übereinstimmung mit den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ethischen Richtlinien von Jepsen durchgeführt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Hintergrund</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Etc KV-Repository ist ein verteiltes System, das als Grundlage für die Koordination dient. Wie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zookeeper</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consul</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> speichert etcd kleine Mengen selten aktualisierter Status ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">standardmäßig bis zu 8 GB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) in Form einer Schlüsselwertzuordnung und bietet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">streng serialisierbare</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lese-, Schreib- und Mikrotransaktionen im gesamten Data Warehouse sowie Koordinationsprimitive wie </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sperren</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und Nachverfolgung </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Uhren)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und Führerauswahl. Viele verteilte Systeme wie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenStack</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verwenden etcd, um Cluster-Metadaten zu speichern, koordinierte Ansichten von Daten zu koordinieren, einen Leiter auszuwählen usw.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Jahr 2014 haben wir bereits eine Bewertung von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">etcd 0.4.1 durchgeführt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dann haben wir festgestellt, dass es aufgrund der Optimierung standardmäßig zu veralteten Lesevorgängen kommt. Während in der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeit an Raft-Prinzipien</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die Notwendigkeit erörtert wird, Lesevorgänge in Threads aufzuteilen und diese durch ein Konsenssystem zu leiten, um die Lebensfähigkeit sicherzustellen, liest etcd jeden Anführer lokal, ohne nach einem aktuelleren Status des neueren Leiters zu suchen. Das etcd-Entwicklungsteam implementierte das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">optionale Quorum-Flag</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und in der etcd-Version 3.0-API </font><font style="vertical-align: inherit;">wurde </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">standardmäßig die </font></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linearisierbarkeit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> für alle Vorgänge mit Ausnahme der Nachverfolgungsvorgänge </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">angezeigt</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die etcd 3.0-API konzentriert sich auf eine flache KV-Karte, in der die Schlüssel und Werte undurchsichtig sind</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">undurchsichtige</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Byte-Arrays. Mithilfe von Bereichsabfragen können Sie hierarchische Schlüssel simulieren. Benutzer können Schlüssel lesen, schreiben und löschen sowie den Aktualisierungsfluss für einen einzelnen Schlüssel oder Schlüsselbereich überwachen. Das etcd-Toolkit wird durch Leases (variable Objekte mit begrenzter Lebensdauer, die durch Heartbeat-Anforderungen des Clients im aktiven Zustand gehalten werden), Sperren (dedizierte benannte Objekte, die an Leases gebunden sind) und die Auswahl von Leitern ergänzt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Version 3.0 bietet etcd eine eingeschränkte </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transaktions-API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">für atomare Operationen mit vielen Schlüsseln. </font><font style="vertical-align: inherit;">In diesem Modell ist eine Transaktion ein bedingter Ausdruck mit einem Prädikat, einem wahren Zweig und einem falschen Zweig. </font><font style="vertical-align: inherit;">Ein Prädikat kann eine Verbindung mehrerer Schlüsselvergleiche sein: Gleichheit oder verschiedene Ungleichungen, je nach Version eines Schlüssels, globaler Revision usw. oder dem aktuellen Schlüsselwert. </font><font style="vertical-align: inherit;">Wahre und falsche Verzweigungen können mehrere Lese- und Schreibvorgänge umfassen. </font><font style="vertical-align: inherit;">Alle von ihnen werden abhängig vom Ergebnis der Prädikatenschätzung atomar angewendet.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1 Garantien für die Konsistenz der Dokumentation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ab Oktober 2019 heißt es in der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dokumentation zur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> etcd- </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Dokumentation</font></a><font style="vertical-align: inherit;"> : „Alle API-Aufrufe weisen eine konsistente Konsistenz auf - die stärkste Form der Konsistenzgarantie, die auf verteilten Systemen verfügbar ist.“ Dies ist nicht der Fall: Die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">konsistente Konsistenz ist</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streng schwächer als die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linearisierbarkeit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und Linearisierbarkeit ist definitiv in verteilten Systemen erreichbar. Ferner wird in der Dokumentation angegeben, dass "während des Lesevorgangs etcd nicht die Übertragung des [letzten (gemessen durch die externe Uhr nach Abschluss der Anforderung)] Werts garantiert, der auf einem Vertreter des Clusters verfügbar ist". Dies ist auch eine zu konservative Aussage: Wenn etcd Linearisierbarkeit bietet, werden Leseoperationen immer mit dem letzten festgeschriebenen Zustand in der Linearisierungsreihenfolge verknüpft. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Dokumentation behauptet auch, dass etcd eine </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">serialisierbare Isolation</font></a><font style="vertical-align: inherit;"> garantiert</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Alle Vorgänge (auch solche, die mehrere Schlüssel betreffen) werden in einer allgemeinen Reihenfolge ausgeführt. Die Autoren beschreiben die serialisierbare Isolation als "die stärkste Isolationsstufe, die in verteilten Systemen verfügbar ist". Dies (abhängig davon, was Sie mit der „Isolationsstufe“ meinen) ist auch nicht wahr; Die strikte Serialisierbarkeit ist stärker als die einfache Serialisierbarkeit, während die erstere auch in verteilten Systemen erreichbar ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Dokumentation besagt, dass alle Operationen (außer Tracking) in etcd standardmäßig linearisierbar sind. In diesem Fall wird Linearisierbarkeit als Konsistenz mit schwach synchronisierten globalen Uhren definiert. Es ist zu beachten, dass eine solche Definition nicht nur mit der </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Definition der Linearisierbarkeit</font></a><font style="vertical-align: inherit;"> unvereinbar ist</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Herlihy &amp; Wing impliziert aber auch eine Verletzung der Kausalität: Knoten mit führenden Stunden werden versuchen, die Ergebnisse von Operationen zu lesen, die noch nicht einmal begonnen haben. Wir gehen davon aus, dass etcd immer noch keine Zeitmaschine ist, und da es auf dem Raft-Algorithmus basiert, sollte die allgemein akzeptierte Definition der Linearisierbarkeit angewendet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da KV-Operationen in etcd serialisierbar und linearisierbar sind, denken wir, dass etcd standardmäßig eine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strikte Serialisierung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bietet </font><font style="vertical-align: inherit;">. Dies ist sinnvoll, da sich alle Schlüssel usw. in einer einzigen Zustandsmaschine befinden und Raft die vollständige Reihenfolge aller Vorgänge auf dieser Zustandsmaschine bereitstellt. Tatsächlich ist der gesamte etcd-Datensatz ein einzelnes linearisierbares Objekt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Optionale Flagge </font></font><code>serializable</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">senkt sich</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Ebene der Lesevorgänge von strikter bis zu regulärer serialisierbarer Konsistenz, die das Lesen eines veralteten festgeschriebenen Status ermöglicht. </font><font style="vertical-align: inherit;">Beachten Sie, dass das Flag </font></font><code>serializable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Serialisierbarkeit der Story nicht beeinflusst. </font><font style="vertical-align: inherit;">KV-Operationen etcd sind in allen Fällen serialisierbar.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Testentwicklung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eine Testsuite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu erstellen </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">, haben</font></a><font style="vertical-align: inherit;"> wir die entsprechende </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jepsen-Bibliothek verwendet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Die Version etcd 3.4.3 (spätestens ab Oktober 19) wurde analysiert und arbeitete an Debian Stretch-Clustern, die aus 5 Knoten bestehen. Wir haben eine Reihe von Fehlern in diesen Clustern implementiert, darunter Netzwerkpartitionen, Isolieren einzelner Knoten, Aufteilen des Clusters in eine Mehrheit und eine Minderheit sowie nicht-transitive Partitionen mit einer überlappenden Mehrheit. Sie haben zufällige Untergruppen von Knoten „fallen gelassen“ und suspendiert sowie Führungskräfte absichtlich behindert. Zeitliche Verzerrungen von bis zu mehreren hundert Sekunden wurden sowohl in Intervallen von mehreren Sekunden als auch in Intervallen von Millisekunden eingeführt (schnelles „Flimmern“). Da etcd das dynamische Ändern der Anzahl der Komponenten unterstützt, haben wir während des Tests zufällig Knoten hinzugefügt und entfernt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zu den Testlasten gehörten Register, Sets und Transaktionstests zur Überprüfung des Betriebs von KV sowie Speziallasten für Schlösser und Uhren.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1 Register</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Zuverlässigkeit von etcd während KV-Operationen zu bewerten, wurde ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registertest</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entwickelt, </font><font style="vertical-align: inherit;">bei dem zufällige Lese-, Schreib-, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vergleichs- und Einstelloperationen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> an Einheitsschlüsseln durchgeführt wurden. </font><font style="vertical-align: inherit;">Die Ergebnisse wurden unter </font><font style="vertical-align: inherit;">Verwendung des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Knossos-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Linearisierbarkeitstools unter </font><font style="vertical-align: inherit;">Verwendung des Vergleichs- / Installationsregistermodells und der Versionsinformationen </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">bewertet</font></a><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2 Sätze</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um veraltete Lesevorgänge zu quantifizieren, wurde ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entwickelt </font><font style="vertical-align: inherit;">, der eine </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vergleichs- und</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Satztransaktion verwendete </font><font style="vertical-align: inherit;">, um einen Satz von Ganzzahlen von einem einzelnen Schlüssel zu lesen und diesem Satz dann einen Wert hinzuzufügen. </font><font style="vertical-align: inherit;">Während des Tests haben wir auch eine parallele Ablesung des gesamten Sets durchgeführt. </font><font style="vertical-align: inherit;">Nach Abschluss des Tests wurden die Ergebnisse auf das Auftreten von Fällen analysiert, in denen das Element, von dem bekannt war, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dass</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es im Satz vorhanden war, in den Leseergebnissen </font><i><font style="vertical-align: inherit;">nicht</font></i><font style="vertical-align: inherit;"> vorhanden war. </font><font style="vertical-align: inherit;">Diese Fälle wurden verwendet, um veraltete Lesevorgänge und verlorene Aktualisierungen zu quantifizieren.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.3 Test anhängen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die strikte Serialisierbarkeit zu überprüfen, wurde ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Append-Test</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entwickelt </font><font style="vertical-align: inherit;">, bei dem Transaktionen parallel gelesen und Listen mit eindeutigen Ganzzahlsätzen mit Werten versehen wurden. Jede Liste wurde in einem etcd-Schlüssel gespeichert, und innerhalb jeder Transaktion wurden Ergänzungen vorgenommen, wobei </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jeder Schlüssel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gelesen wurde </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">, der</font></a><font style="vertical-align: inherit;"> in einer Transaktion </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">geändert</font></a><font style="vertical-align: inherit;"> werden musste. Anschließend wurden </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diese Schlüssel geschrieben und</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in der zweiten Transaktion, die </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">geschützt war, </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">gelesen</font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um sicherzustellen, dass sich seit dem ersten Lesen kein aufgezeichneter Schlüssel geändert hat. </font><font style="vertical-align: inherit;">Am Ende des Tests haben wir die Beziehung zwischen Transaktionen basierend auf der Echtzeitpriorität und der Beziehung zwischen Lese- und Additionsoperationen aufgezeichnet. </font><font style="vertical-align: inherit;">Durch Überprüfen dieses Diagramms auf Schleifen konnte festgestellt werden, ob die Operationen streng serialisierbar waren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Während etcd verhindert, dass Transaktionen denselben Schlüssel mehrmals schreiben, können Sie Transaktionen mit bis zu einem Datensatz pro Schlüssel erstellen. </font><font style="vertical-align: inherit;">Wir haben auch sichergestellt, dass Lesevorgänge innerhalb derselben Transaktion frühere Schreibvorgänge aus derselben Transaktion widerspiegeln.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.4 Schlösser</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Koordinierungsdienst verspricht etcd integrierte </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unterstützung für verteiltes Sperren</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wir haben diese Schlösser auf zwei Arten untersucht. Zunächst wurden </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zufällige Sperr- und Entsperranforderungen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> generiert </font><font style="vertical-align: inherit;">, die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">für jede Sperre</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eine </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Lease erhielten und diese</font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code> keepalive</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bis zur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Freigabe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mithilfe des integrierten </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">etc-</font></a><font style="vertical-align: inherit;"> Clients im Java-Client </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">geöffnet ließen</font></a><font style="vertical-align: inherit;"> . Wir haben die Ergebnisse mit Knossos getestet, um festzustellen, ob sie eine linearisierte Implementierung des Sperrdienstes bilden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für einen praktischeren Test (und um die Häufigkeit von Sperrfehlern zu quantifizieren) haben wir Sperren und etcd verwendet, um den </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">gegenseitigen Ausschluss</font></a><font style="vertical-align: inherit;"> zu organisieren, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wenn Aktualisierungen des Satzes im Speicher vorgenommen werden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und suchte nach verlorenen Updates in diesem Set. </font><font style="vertical-align: inherit;">Mit diesem Test konnten wir direkt bestätigen, ob Systeme, die etcd als Mutex verwenden, den internen Status sicher aktualisieren können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die dritte Version des </font><font style="vertical-align: inherit;">Sperrtests umfasste Schutzmaßnahmen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">für den Lease-Schlüssel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um das in etcd gespeicherte Set zu ändern.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.5 Verfolgung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um zu überprüfen, ob die Uhren Informationen zu jeder Schlüsselaktualisierung liefern, wurde im Rahmen des Tests ein Schlüssel erstellt und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blind</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eindeutige Ganzzahlwerte </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">zugewiesen</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">In der Zwischenzeit teilten Kunden </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diesen Schlüssel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mehrere Sekunden lang. </font><font style="vertical-align: inherit;">Jedes Mal nach dem Start der Uhr begann der Kunde mit der Überarbeitung, bei der er das letzte Mal gestoppt hatte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Ende dieses Prozesses haben wir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sichergestellt,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dass jeder Client dieselbe Abfolge von Schlüsseländerungen beobachtet.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Ergebnisse</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1 Tracking ab der 0. Revision</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Verfolgen eines Schlüssels können Clients eine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erste Revision</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> angeben </font><font style="vertical-align: inherit;">, bei der es sich um eine optionale Revision handelt, mit der die Verfolgung (einschließlich) beginnt. Wenn der Benutzer jede Operation mit einem bestimmten Schlüssel sehen möchte, kann er die erste Revision von etcd angeben. Was ist dieses Audit? </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Datenmodell</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Glossar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geben keine Antwort auf diese Frage. Revisionen werden als monoton ansteigende 64-Bit-Zähler beschrieben, es ist jedoch unklar, ob etcd bei 0 oder 1 beginnt. Es ist vernünftig anzunehmen, dass der Countdown von Grund auf neu ist (nur für den Fall). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leider ist das falsch. Wenn Sie die 0. Revision anfordern, sendet etcd Updates, beginnend mit der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aktuellen Revision auf dem Server plus eins</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aber nicht mit dem allerersten. </font><font style="vertical-align: inherit;">Die Anfrage für die 1. Revision enthält alle Änderungen. </font><font style="vertical-align: inherit;">Dieses Verhalten ist </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nirgendwo dokumentiert</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir glauben, dass diese Subtilität in der Praxis wahrscheinlich nicht zu Produktionsproblemen führt, da die meisten Cluster bei der ersten Überarbeitung nicht verweilen. </font><font style="vertical-align: inherit;">Darüber hinaus ETCD Kompressen die Geschichte ohnehin im </font><font style="vertical-align: inherit;">Laufe der </font><font style="vertical-align: inherit;">Zeit, so in realen Anwendungen, höchstwahrscheinlich, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in jedem Fall ist es</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nicht erforderlich , </font><font style="vertical-align: inherit;">alle Versionen zu </font><font style="vertical-align: inherit;">lesen, mit der ersten Revision beginnen. </font><font style="vertical-align: inherit;">Ein solches Verhalten ist gerechtfertigt, würde jedoch die entsprechende Beschreibung in der Dokumentation nicht beeinträchtigen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2 Mythische Schlösser</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In der API-Dokumentation für Sperren</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> heißt es, dass ein gesperrter Schlüssel "in Verbindung mit Transaktionen verwendet werden kann, um sicherzustellen, dass Aktualisierungen in etcd nur dann erfolgen, wenn die Sperre im Besitz ist." Seltsam, aber es gibt keine Garantie für die Schlösser selbst und ihr Zweck wird nicht erklärt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In anderen Materialien teilen die Betreuer usw. jedoch weiterhin Informationen über die Verwendung von Schlössern. In </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der Release-Ankündigung zu etcd 3.2 wird</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> beispielsweise eine Anwendung </font></font><code>etcdctl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zum Blockieren von Änderungen an der Dateifreigabe auf einer Festplatte beschrieben. Darüber hinaus </font><font style="vertical-align: inherit;">beantwortete einer der etcd-Entwickler </font><font style="vertical-align: inherit;">in einem Problem auf GitHub mit einer Frage zum </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spezifischen Zweck der Sperren</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Folgendes:</font></font><br>
<br>
<blockquote>     etcd  ,   (  )        ,     (        etcd), - :<br>
<br>
<ol>
<li>    etcd;</li>
<li>  - ( ,     etcd);</li>
<li>    .</li>
</ol></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein solches Beispiel finden Sie in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>  etcdctl</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Zum Schutz des Teams </font></font><code>put</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wurde </font><font style="vertical-align: inherit;">eine Sperre verwendet, </font><font style="vertical-align: inherit;">die den Sperrschlüssel jedoch nicht an das Update gebunden hat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leider ist dies nicht sicher, da mehrere Clients gleichzeitig dieselbe Sperre halten können. Das Problem wird durch die Unterbrechung von Prozessen, Netzwerkabstürzen oder Partitionen verschärft. Es kann jedoch auch in vollständig fehlerfreien Clustern ohne externe Fehler auftreten. In diesem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testlauf setzt beispielsweise</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Prozess Nummer 3 die Sperre erfolgreich, und Prozess 1 erhält dieselbe Sperre parallel, noch bevor Prozess 3 die Möglichkeit hat, sie zu entfernen:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ko/hy/lz/kohylznbfb8bh5a2m1l88kysrg4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Mutex-Verletzung war bei Leasingverträgen mit kurzen TTLs am auffälligsten: TTLs von 1, 2 und 3 Sekunden konnten bereits nach wenigen Testminuten (selbst in gesunden Clustern) keinen gegenseitigen Ausschluss bewirken. Prozesssuspensionen und Netzwerkpartitionen führten noch schneller zu Problemen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einer unserer Lock-Test-Varianten wurden etcd-Mutexe verwendet, um gemeinsame Aktualisierungen einer Reihe von Ganzzahlen zu schützen (wie in der Dokumentation etcd vorgeschlagen). Bei jeder Aktualisierung wird der aktuelle speicherinterne Beispielwert gelesen und nach etwa einer Sekunde wird diese Sammlung mit einem eindeutigen Element zurückgeschrieben. Mit Leases mit einer TTL von zwei Sekunden, fünf parallelen Prozessen und einer Prozesspause alle fünf Sekunden konnten wir einen stetigen Verlust von etwa 18% der bestätigten Aktualisierungen verursachen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Problem wurde durch den internen Verriegelungsmechanismus in etcd verschärft. Wenn ein Client darauf gewartet hat, dass ein anderer Client ihn entsperrt, seine Lease verloren hat und die Sperre danach aufgehoben wurde, hat der Server </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Lease nicht erneut überprüft</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um sicherzustellen, dass sie noch gültig ist, bevor er den Client darüber informiert hat, dass die Sperre jetzt dahinter steht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Aufnahme einer zusätzlichen Mietvertragsprüfung sowie die Auswahl längerer TTLs und die sorgfältige Festlegung von </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wahlzeitüberschreitungen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verringern die Häufigkeit dieses Problems. Mutex-Verstöße können jedoch nicht vollständig beseitigt werden, da verteilte Sperren in asynchronen Systemen grundsätzlich unsicher sind. Dr. Martin Kleppmann beschreibt dies in </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">seinem Artikel</font></a><font style="vertical-align: inherit;"> überzeugend</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Über verteilte Sperren. Ihm zufolge müssen Blockierungsdienste die Korrektheit opfern, um die Lebensfähigkeit in asynchronen Systemen aufrechtzuerhalten: Wenn der Prozess während der Steuerung der Blockierung abstürzt, benötigt der Blockierungsdienst eine Möglichkeit, das Entsperren der Blockierung zu erzwingen. Wenn der Prozess jedoch tatsächlich nicht abgebrochen wurde, sondern nur langsam abläuft oder vorübergehend nicht verfügbar ist, kann das Entsperren dazu führen, dass er an mehreren Stellen gleichzeitig ausgeführt wird.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber selbst wenn der verteilte Blockierungsdienst beispielsweise eine Art magischen Fehlerdetektor verwendet und tatsächlich den gegenseitigen Ausschluss garantieren kann, ist seine Verwendung im Fall einer nicht lokalen Ressource immer noch unsicher. Angenommen, Prozess A sendet eine Nachricht an die Datenbank D, während er eine Sperre hält. Danach stürzt Prozess A ab und Prozess B empfängt eine Sperre und sendet auch eine Nachricht an Basis D. Das Problem besteht darin, dass eine Nachricht von Prozess A (aufgrund von Asynchronität) nach einer Nachricht von Prozess B kommen kann, wodurch die gegenseitige Ausnahme verletzt wird, die die Sperre bereitstellen sollte. . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dieses Problem zu vermeiden, muss man sich darauf verlassen, dass </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">das Speichersystem selbst</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die Richtigkeit von Transaktionen unterstützt oder, wenn der Sperrdienst einen solchen Mechanismus bereitstellt, verwendet</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fechten"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -Token</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , das in allen vom Schlosshalter ausgeführten Vorgängen enthalten ist. Dadurch wird sichergestellt, dass zwischen den Vorgängen des aktuellen Schlossbesitzers keine Operationen des vorherigen Schlosshalters plötzlich auftreten. Im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chubby-Blockierungsdienst von</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Google </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">werden</font></a><font style="vertical-align: inherit;"> diese Token beispielsweise als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sequenzer bezeichnet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In etcd können Sie die Revision des Sperrschlüssels als global geordnetes Blockierungs-Token verwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Darüber hinaus können Sperrschlüssel in etcd verwendet werden, um Transaktionsaktualisierungen in etcd selbst zu schützen. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überprüfen der Sperrschlüsselversion als Teil der Transaktion</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benutzer können eine Transaktion verhindern, wenn die Sperre nicht mehr gehalten wird (d. h. die Version des Sperrschlüssels ist größer als Null). </font><font style="vertical-align: inherit;">In unseren Tests konnten wir mit diesem Ansatz Lese-, Änderungs- und Schreibvorgänge erfolgreich isolieren, bei denen das Schreiben die einzige durch Sperren geschützte Transaktion war. </font><font style="vertical-align: inherit;">Dieser Ansatz bietet eine ähnliche Isolation wie Barrage-Token, garantiert jedoch (wie Barrage-Token) keine Atomizität: Ein Prozess kann während eines Updates, das aus vielen Vorgängen besteht, abstürzen oder einen Mutex verlieren, wodurch etcd in einem logisch inkonsistenten Zustand verbleibt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Ergebnisse der Arbeit in den Themen des Projekts:</font></font><br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uhren ab Revision 0 starten später</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nicht entschieden;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sperren kehren nach dem Blockieren zurück, ohne den Besitz zu überprüfen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - im Master;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sperren werden nicht als unsicher dokumentiert</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nicht gelöst.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Diskussion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unseren Tests hat etcd 3.4.3 die Erwartungen hinsichtlich der KV-Operationen erfüllt: Wir haben trotz der Unterbrechung von Prozessen, Abstürzen, Manipulationen der Uhr und des Netzwerks sowie einer Änderung der Anzahl der Clustermitglieder eine streng serialisierbare Konsistenz von Lese-, Schreib- und sogar Mehrschlüsseltransaktionen beobachtet . </font><font style="vertical-align: inherit;">In KV-Operationen wurde standardmäßig streng serialisierbares Verhalten implementiert. </font><font style="vertical-align: inherit;">Die Durchführung von Messwerten mit </font></font><code>serializable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gesetztem </font><font style="vertical-align: inherit;">Flag </font><font style="vertical-align: inherit;">führte zum Auftreten veralteter Lesevorgänge (wie in der Dokumentation beschrieben). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Überwachen Sie </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Uhren)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um richtig zu arbeiten - zumindest an den einzelnen Tasten. </font><font style="vertical-align: inherit;">Bis die Komprimierung des Verlaufs die alten Daten zerstörte, gab die Uhr jedes Schlüsselupdate erfolgreich aus.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellte sich jedoch heraus, dass Sperren in etcd (wie alle verteilten Sperren) keinen gegenseitigen Ausschluss bieten. Verschiedene Prozesse können die Sperre gleichzeitig halten - auch in gesunden Clustern mit perfekt synchronisierten Uhren. Die Dokumentation mit der Sperr-API sagte nichts darüber aus, und die vorgestellten Beispiele für Sperren waren unsicher. Einige der Probleme mit den Sperren mussten jedoch nach der Veröffentlichung </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dieses Patches behoben werden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Ergebnis unserer Zusammenarbeit hat das etcd-Team eine Reihe von Änderungen an der Dokumentation vorgenommen (diese wurden bereits auf GitHub veröffentlicht und werden in zukünftigen Versionen der Projektwebsite veröffentlicht). Auf der GitHub Warranties API-Seite wird jetzt angegeben, dass etcd standardmäßig </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">streng serialisierbar ist</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und die Behauptung, dass seriell und serialisierbar die stärksten in verteilten Systemen verfügbaren Konsistenzniveaus sind, wurde entfernt. In Bezug auf Revisionen wird jetzt angegeben, dass der Start </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von Einheit (1) aus erfolgen sollte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , obwohl in der API-Dokumentation </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">immer noch nicht angegeben ist,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dass ein Versuch, mit der 0. Revision zu beginnen, dazu </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">führt,</font></a><font style="vertical-align: inherit;"> dass Ereignisse ausgegeben werden, die nach der aktuellen Revision plus 1 aufgetreten sind. anstelle des erwarteten "Versands aller Ereignisse". Die Dokumentation von Sicherheitsproblemen bei Sperren befindet sich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in der Entwicklung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einige Dokumentationsänderungen, z. B. die Beschreibung des besonderen Verhaltens von etcd beim Versuch zu lesen, beginnend mit einer Null-Revision, erfordern weiterhin Aufmerksamkeit.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie üblich betonen wir, dass Jepsen einen experimentellen Ansatz zur Sicherheitsüberprüfung bevorzugt: Wir können das Vorhandensein von Fehlern bestätigen, nicht jedoch deren Fehlen. </font><font style="vertical-align: inherit;">Es werden erhebliche Anstrengungen unternommen, um Probleme zu finden, aber wir können die allgemeine Richtigkeit von etcd nicht beweisen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1 Empfehlungen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie Sperren in etcd verwenden, überlegen Sie, ob Sie diese aus Sicherheitsgründen oder einfach zur Leistungssteigerung benötigen, indem Sie die Parallelität wahrscheinlich einschränken. Etcd-Sperren können verwendet werden, um die Leistung zu steigern. Die Verwendung aus Sicherheitsgründen kann jedoch riskant sein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Insbesondere wenn Sie die etcd-Sperre verwenden, um eine gemeinsam genutzte Ressource wie eine Datei, eine Datenbank oder einen Dienst zu schützen, sollte diese Ressource die Sicherheit gewährleisten, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ohne sie zu</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> blockieren. Eine Möglichkeit, dies zu erreichen, ist die Verwendung eines </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">monotonen Sperrmarkers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dies kann beispielsweise eine etcd-Revision sein, die dem aktuell gehaltenen Sperrschlüssel zugeordnet ist. Die gemeinsam genutzte Ressource muss sicherstellen, dass der Client das Token verwendet hat</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um eine Operation auszuführen, wird jede Operation mit einem Token </font></font><code>x &lt; y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abgelehnt. Dieser Ansatz stellt keine Atomizität sicher, garantiert jedoch, dass Operationen im Rahmen der Verriegelung in der richtigen Reihenfolge und nicht zeitweise ausgeführt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir vermuten, dass normale Benutzer dieses Problem wahrscheinlich nicht haben. Wenn Sie sich jedoch darauf </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verlassen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , alle Änderungen von etcd zu lesen, beginnend mit der ersten Revision, denken Sie daran, dass Sie 1 und nicht 0 als Parameter übergeben müssen. Unsere Experimente zeigen, dass eine Null-Revision in diesem Fall „aktuelle Revision“ bedeutet und nicht "Früheste."</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schließlich führen Sperren und etcd (wie alle verteilten Sperren) Benutzer in die Irre: Sie möchten sie möglicherweise als reguläre Sperren verwenden, sind jedoch sehr überrascht, wenn sie feststellen, dass diese Sperren keinen gegenseitigen Ausschluss bieten. </font><font style="vertical-align: inherit;">Die API-Dokumentation, Blog-Beiträge und Probleme auf GitHub sagen nichts über dieses Risiko aus. </font><font style="vertical-align: inherit;">Wir empfehlen, dass Sie Informationen in die etcd-Dokumentation aufnehmen, dass Sperren keinen gegenseitigen Ausschluss bieten, und Beispiele für die Verwendung von Sperr-Token zum Aktualisieren des Status freigegebener Ressourcen anstelle von Beispielen angeben, die zum Verlust von Updates führen können.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2 Weitere Pläne</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das etcd-Projekt gilt seit mehreren Jahren als stabil: Der darauf basierende Raft-Algorithmus hat gut funktioniert, die API für KV-Operationen ist einfach und unkompliziert. Obwohl einige zusätzliche Funktionen kürzlich eine neue API erhalten haben, ist ihre Semantik relativ einfach. Wir glauben, dass wir bereits genug grundlegende Befehle wie </font></font><code>get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>put</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Transaktionen, Blockieren und Verfolgen studiert haben. Es gibt jedoch andere Tests, die durchgeführt werden sollten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Derzeit haben wir keine ausreichend detaillierte Bewertung der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Löschungen durchgeführt.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Mit Versionen und Revisionen können Grenzfälle verbunden sein, wenn Objekte ständig erstellt und gelöscht werden. In zukünftigen Tests beabsichtigen wir, die Entfernungsvorgänge einer genaueren Untersuchung zu unterziehen. Wir haben auch keine Bereichsabfragen oder Verfolgungsoperationen mit mehreren Schlüsseln getestet, obwohl wir vermuten, dass ihre Semantik Operationen mit einzelnen Schlüsseln ähnelt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den Tests verwendeten wir die Unterbrechung von Prozessen, Abstürzen, Manipulationen mit der Uhr, das Netzwerk wurde geteilt und die Zusammensetzung des Clusters geändert; Hinter den Kulissen gab es Probleme wie Festplattenschäden und andere </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">byzantinische Fehler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf der Ebene eines Knotens. Diese Möglichkeiten können in zukünftigen Forschungen untersucht werden. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Arbeit wurde von der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud Native Computing Foundation unterstützt.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Teil der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux Foundation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und entspricht </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">den ethischen Richtlinien von Jepsen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wir möchten dem etcd-Team für ihre Hilfe und insbesondere den folgenden Vertretern danken: Chris Aniszczyk, Gyuho Lee, Xiang Li, Hitoshi Mitake, Jingyi Hu und Brandon Philips.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS vom Übersetzer</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lesen Sie auch in unserem Blog:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TiKV - verteilte Schlüsselwertdatenbank für Cloud-native</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zetcd von CoreOS: Ersetzen von ZooKeeper durch ... Speicher etcd</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KeyDB als [potenzieller] Ersatz für Redis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datenbanken und Kubernetes (Überprüfung und Videobericht)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ."</font></font></li>
</ul></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de487516/index.html">Jagdtechniken und -taktiken von Angreifern, die Prefetch-Dateien verwenden</a></li>
<li><a href="../de487518/index.html">Radioaktive Produkte. Gammaspektrometer. Teil 2</a></li>
<li><a href="../de487522/index.html">Wir lassen das Terminal fliegen (Teil 1)</a></li>
<li><a href="../de487524/index.html">Warum braucht ein Hardware-Startup-Hackathon?</a></li>
<li><a href="../de487528/index.html">Изменения в пользовательском соглашении и политике конфиденциальности на сервисах Хабра</a></li>
<li><a href="../de487538/index.html">.NET Interactive ist da! | .NET Notebooks Vorschau 2</a></li>
<li><a href="../de487540/index.html">HighLoad ++, Anastasia Tsymbalyuk, Stanislav Tselovalnikov (Sberbank): Wie wir zu MDA wurden</a></li>
<li><a href="../de487542/index.html">PRESENT - Ultraleichte Blockverschlüsselung (Übersetzung des Originals PRESENT: Eine ultraleichte Blockverschlüsselung)</a></li>
<li><a href="../de487544/index.html">.NET-Dokumentation: Was ist neu im Januar?</a></li>
<li><a href="../de487548/index.html">Neues Experiment: Aufrufen von .NET gRPC-Diensten über einen Browser mit gRPC-Web</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>