<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯРЮ ЁЯЪ┤ЁЯП╛ ЁЯСиЁЯП╜тАНЁЯФз MonsterMQ рднрд╛рдЧ 3 рдХреЗ рд╕рд╛рде RabbitMQ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ ЁЯСПЁЯП╝ ЁЯШв ЁЯНН</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╣рдорд╛рд░реЗ рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдореЗрдВ, рд╣рдордиреЗ рдПрдХ рдХрд╛рд░реНрдп рдХрддрд╛рд░ рдмрдирд╛рдИ рдереАред рдпрд╣ рдорд╛рдирддрд╛ рд╣реИ рдХрд┐ рд╕рдВрджреЗрд╢ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рдХрд╛рд░реНрдп рдПрдХ рдкреНрд░рд╛рдкреНрддрдХрд░реНрддрд╛ рдХреЛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рд╣рдо рдХреБрдЫ рдФрд░ рдХрд░реЗрдВрдЧреЗ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>MonsterMQ рднрд╛рдЧ 3 рдХреЗ рд╕рд╛рде RabbitMQ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489692/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдорд╛рд░реЗ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдореЗрдВ,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рдордиреЗ рдПрдХ рдХрд╛рд░реНрдп рдХрддрд╛рд░ рдмрдирд╛рдИ рдереАред </font><font style="vertical-align: inherit;">рдпрд╣ рдорд╛рдирддрд╛ рд╣реИ рдХрд┐ рд╕рдВрджреЗрд╢ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рдХрд╛рд░реНрдп рдПрдХ рдкреНрд░рд╛рдкреНрддрдХрд░реНрддрд╛ рдХреЛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рд╣рдо рдХреБрдЫ рдФрд░ рдХрд░реЗрдВрдЧреЗ, рд╣рдо рдПрдХ рдмрд╛рд░ рдореЗрдВ рдХрдИ рдкреНрд░рд╛рдкреНрддрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдПрдХ рд╕рдВрджреЗрд╢ рднреЗрдЬреЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рд╣рдо рдПрдХ рд▓реЙрдЧрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдмрдирд╛рдПрдВрдЧреЗ рдЬрд┐рд╕рдореЗрдВ рджреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд╣реЛрдВрдЧреЗ: рдкрд╣рд▓рд╛ рд╕рдВрджреЗрд╢ рднреЗрдЬреЗрдЧрд╛, рдФрд░ рджреВрд╕рд░рд╛ рдЙрдиреНрд╣реЗрдВ рдкреНрд░рд╛рдкреНрдд рдФрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдЧрд╛ред </font><font style="vertical-align: inherit;">рд╣рдорд╛рд░реА рдкреНрд░рдгрд╛рд▓реА рдореЗрдВ, рд╕рднреА рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рд╛рдкреНрддрдХрд░реНрддрд╛ рдкреНрд░реЗрд╖рдХ рджреНрд╡рд╛рд░рд╛ рднреЗрдЬреЗ рдЧрдП рдПрдХ рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВрдЧреЗред</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХреНрд╕рдЪреЗрдВрдЬ (рдПрдХреНрд╕рдЪреЗрдВрдЬ)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦреЛрдВ рдореЗрдВ, рд╣рдордиреЗ рдХрддрд╛рд░реЛрдВ рд╕реЗ рд╕рдВрджреЗрд╢ рднреЗрдЬреЗ рдФрд░ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдП, рдЕрдм рдпрд╣ рдЦрд░рдЧреЛрд╢рдмрд┐рдЯрдо рдореЗрдВ рдПрдХ рдкреВрд░реНрдг рд╕рдВрджреЗрд╢ рдЕрдЧреНрд░реЗрд╖рдг рдореЙрдбрд▓ рдкреЗрд╢ рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдЗрдП рдЬрд▓реНрджреА рд╕реЗ рд╣рдо рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦреЛрдВ рдореЗрдВ рдХреНрдпрд╛ рд╢рд╛рдорд┐рд▓ рдХрд░рддреЗ рд╣реИрдВ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рд░реНрдорд╛рддрд╛ - рдПрдХ рдЖрд╡реЗрджрди рдЬреЛ рд╕рдВрджреЗрд╢ рднреЗрдЬрддрд╛ рд╣реИ </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрддрд╛рд░ - рдПрдХ рдмрдлрд░ рдЬреЛ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдкрднреЛрдХреНрддрд╛ - рдПрдХ рдЖрд╡реЗрджрди рдЬреЛ рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддрд╛ рд╣реИ </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RabbitMQ (рдпрд╛ рдПрдПрдордХреНрдпреВрдкреА) рдХрд╛ рдореБрдЦреНрдп рд╡рд┐рдЪрд╛рд░ рдпрд╣ рд╣реИ рдХрд┐ рдкреНрд░реЗрд╖рдХ (рдирд┐рд░реНрдорд╛рддрд╛) рдХрднреА рднреА рд╕рдВрджреЗрд╢ рдХреЛ рд╕реАрдзреЗ рдХрддрд╛рд░ рдореЗрдВ рдирд╣реАрдВ рднреЗрдЬрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╡рд╣ рдпрд╣ рднреА рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рдХрд┐ рдпрд╣ рдХрддрд╛рд░ рдореЗрдВ рд╣реИ рдпрд╛ рдирд╣реАрдВред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рдкреНрд░реЗрд╖рдХ рдПрдХреНрд╕рдЪреЗрдВрдЬрд░реНрд╕ (рдПрдХреНрд╕рдЪреЗрдВрдЬ) рдХреЛ рд╕рдВрджреЗрд╢ рднреЗрдЬрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдПрдХреНрд╕рдЪреЗрдВрдЬрд░ рдПрдХ рдмрд╣реБрдд рд╣реА рд╕рд░рд▓ рдЪреАрдЬ рд╣реИ, рдпрд╣ рджреЛ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ: рдпрд╣ рдкреНрд░реЗрд╖рдХреЛрдВ рд╕реЗ рдПрдХ рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдХрддрд╛рд░ рдореЗрдВ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдПрдХреНрд╕рдЪреЗрдВрдЬрд░реНрд╕ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╣реЛрддреЗ рд╣реИрдВ: рдХреБрдЫ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрддрд╛рд░ (рдбрд╛рдпрд░реЗрдХреНрдЯ рдЯрд╛рдЗрдк) рдХреЛ рд╕рдВрджреЗрд╢ рднреЗрдЬрддреЗ рд╣реИрдВ, рджреВрд╕рд░реЗ рдПрдХ рд╣реА рд╕рдВрджреЗрд╢ рдХреЛ рдПрдХ рд╕рд╛рде рдХрдИ рдХрддрд╛рд░реЛрдВ рдореЗрдВ рднреЗрдЬрддреЗ рд╣реИрдВ (рдкреНрд░рд╢рдВрд╕рдХ рдкреНрд░рдХрд╛рд░), рдЕрдиреНрдп рд╡рд┐рд╢рд┐рд╖реНрдЯ, рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рди рдирд┐рдпрдореЛрдВ (рд╡рд┐рд╖рдп рдкреНрд░рдХрд╛рд░) рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдПрдХ рдХрддрд╛рд░ рдореЗрдВ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рддреЗ рд╣реИрдВред </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1bd/dc5/c2d/1bddc5c2d6aa4b26ba0f675162aaecf7.png" alt="рдЫрд╡рд┐"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RabbitMQ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕рд╛рдЗрдЯ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕реЗ рд▓реА рдЧрдИ рдЫрд╡рд┐ </font><font style="vertical-align: inherit;">)</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдЗрдП рдПрдХ рдХрдЯреНрдЯрд░ рдкреНрд░рдХрд╛рд░ рдХреЗ рдПрдХреНрд╕рдЪреЗрдВрдЬрд░ рдХреЛ рджреЗрдЦреЗрдВред </font><font style="vertical-align: inherit;">рдЗрд╕реЗ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рд▓рд┐рдЦреЗрдВ:</font></font><br>
<br>
<pre><code class="php hljs">$producer-&gt;newFanoutExchange(<span class="hljs-string">'logs'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдлреИрдирдЖрдЙрдЯ рдПрдХреНрд╕рдЪреЗрдВрдЬрд░ рдПрдХ рдмрд╣реБрдд рд╣реА рд╕рд░рд▓ рдпреЛрдЬрдирд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдпрд╣ рдХреЗрд╡рд▓ рдкреНрд░рд╛рдкреНрдд рд╕рдВрджреЗрд╢ рдХреЛ рдЗрд╕рд╕реЗ рдЬреБрдбрд╝реА рд╕рднреА рдХрддрд╛рд░реЛрдВ рдореЗрдВ рднреЗрдЬрддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рд░реНрд╡рд░ рдкрд░ рдореМрдЬреВрдж рд╕рднреА рдПрдХреНрд╕рдЪреЗрдВрдЬрд░реНрд╕ рдХреЛ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, </font><b><font style="vertical-align: inherit;">rabbitmqctl рдкрд░</font></b><font style="vertical-align: inherit;"> рдХреЙрд▓ рдХрд░реЗрдВ</font></font><b><font style="vertical-align: inherit;"></font></b><br>
<br>
<pre><code class="bash hljs">sudo rabbitmqctl list_exchanges</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рд╕реВрдЪреА </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореЗрдВ рдПрдордХ рд╢рд╛рдорд┐рд▓</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣реЛрдЧрд╛ </font><b><font style="vertical-align: inherit;">ред *</font></b><font style="vertical-align: inherit;"> рдПрдХреНрд╕рдЪреЗрдВрдЬрд░реНрд╕ рдФрд░ рдПрдХ рдорд╛рдирдХ рдирд╛рдо рд░рд╣рд┐рдд (рдЦрд╛рд▓реА рд▓рд╛рдЗрди) рдПрдХреНрд╕рдЪреЗрдВрдЬрд░ред рдЙрди рдкрд░ рдзреНрдпрд╛рди рди рджреЗрдВ рд╣рдореЗрдВ рдЕрднреА рддрдХ рдЙрдирдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдореЗрдВ, рд╣рдо рдПрдХреНрд╕рдЪреЗрдВрдЬрд░реНрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рдирд╣реАрдВ рдЬрд╛рдирддреЗ рдереЗ, рд▓реЗрдХрд┐рди рдлрд┐рд░ рднреА рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдереЗред рдРрд╕рд╛ рдЗрд╕рд▓рд┐рдП рд╣реБрдЖ рдХреНрдпреЛрдВрдХрд┐ рдЕрдЧрд░ рдореЙрдиреНрд╕реНрдЯрд░рдореНрдпреВрдХ рдореЗрдВ рдЖрдк рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдПрдХреНрд╕рдЪреЗрдВрдЬрд░ рдХреЛ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рд░реНрдорд╛рддрд╛</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЗ рддреАрд╕рд░реЗ рддрд░реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ </font><b><font style="vertical-align: inherit;">:: рдкреНрд░рдХрд╛рд╢рди ()</font></b><font style="vertical-align: inherit;"> рд╡рд┐рдзрд┐, </font><font style="vertical-align: inherit;">рдкреБрд╕реНрддрдХрд╛рд▓рдп рдорд╛рдирдХ рдирд╛рдордорд╛рддреНрд░ рдПрдХреНрд╕рдЪреЗрдВрдЬрд░ RabbitMQ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛, рдЬреЛ рдЙрди рдХрддрд╛рд░реЛрдВ рдореЗрдВ рд╕рдВрджреЗрд╢ рднреЗрдЬрддрд╛ рд╣реИ рдЬрд┐рдирдХреЗ рдирд╛рдо </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рд░реНрдорд╛рддрд╛ рдХреЗ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд▓рд┐рдП рджреВрд╕рд░реЗ рддрд░реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рд░рд┐рдд рдХрд┐рдП рдЧрдП рд╣реИрдВ </font><b><font style="vertical-align: inherit;">:: рдкреНрд░рдХрд╛рд╢рди ()</font></b><font style="vertical-align: inherit;"> рд╡рд┐рдзрд┐ </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм рд╣рдо </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рд░реНрдорд╛рддрд╛</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЗ рддреАрд╕рд░реЗ рддрд░реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрд╕рдХрд╛ рдирд╛рдо рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдХреЗ рдЕрдкрдиреЗ рдирдП рдПрдХреНрд╕рдЪреЗрдВрдЬрд░ рдХреЛ рд╕рдВрджреЗрд╢ рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВ </font><b><font style="vertical-align: inherit;">:: рдкреНрд░рдХрд╛рд╢рди ()</font></b><font style="vertical-align: inherit;"> рд╡рд┐рдзрд┐ </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="php hljs">$producer-&gt;publish($message, <span class="hljs-string">''</span>, <span class="hljs-string">'logs'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм рджреЛ рдХрд╛рд░реНрдпрдХрд░реНрддрд╛рдУрдВ рдХреЛ рджреЛ рдХрддрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рдмрдирд╛рддреЗ рд╣реИрдВ рдЬреЛ рддрдм рддрдХ рдореМрдЬреВрдж рд░рд╣реЗрдВрдЧреЗ рдЬрдм рддрдХ рдХрд┐ рдЬрд┐рди рдХрд╛рд░реНрдпрдХрд░реНрддрд╛рдУрдВ рдиреЗ рдШреЛрд╖рдгрд╛ рдХреА рдереА рд╡реЗ рд╕рдХреНрд░рд┐рдп рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЖрдк рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-comment">//Worker 1</span>
$producer-&gt;queue(<span class="hljs-string">'queue-1'</span>)-&gt;setExclusive()-&gt;declare();
</code></pre><br>
<pre><code class="php hljs"><span class="hljs-comment">//Worker 2</span>
$producer-&gt;queue(<span class="hljs-string">'queue-2'</span>)-&gt;setExclusive()-&gt;declare();
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм рдЬрдм рдЬрд┐рд╕ рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рдиреЗ рдХрддрд╛рд░ рдХреА рдШреЛрд╖рдгрд╛ рдХреА рд╣реИ рд╡рд╣ рд╕рддреНрд░ рд╕рдорд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдХрд░рддрд╛ рд╣реИ, рдпрд╣ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </font><font style="vertical-align: inherit;">рдпрджрд┐ рджреЛрдиреЛрдВ рд╢реНрд░рдорд┐рдХ рдЕрдкрдирд╛ рдХрд╛рдо рдкреВрд░рд╛ рдХрд░ рд▓реЗрддреЗ рд╣реИрдВ, рддреЛ рджреЛрдиреЛрдВ рдХрддрд╛рд░реЗрдВ рд╣рдЯрд╛ рджреА рдЬрд╛рдПрдВрдЧреАред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рдХрддрд╛рд░ рдХреЛ рдПрдХреНрд╕рдЪреЗрдВрдЬрд░ рд╕реЗ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╣реА рдПрдХ рдПрдХреНрд╕рдЪреЗрдВрдЬрд░ (рд╡рд┐рдирд┐рдордп) рдФрд░ рдПрдХ рдХрддрд╛рд░ (рдХрддрд╛рд░) рдмрдирд╛рдпрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЕрдм рд╣рдореЗрдВ рдПрдХреНрд╕рдЪреЗрдВрдЬрд░реЛрдВ рдХреЛ рдЕрдкрдиреА рдХрддрд╛рд░реЛрдВ рдореЗрдВ рднреЗрдЬреЗ рдЧрдП рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рдирд╛ рд╣реЛрдЧрд╛ред </font><font style="vertical-align: inherit;">рд╣рдореЗрдВ </font><font style="vertical-align: inherit;">рдПрдХреНрд╕рдЪреЗрдВрдЬрд░ рдФрд░ рдХрддрд╛рд░реЛрдВ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛ рдмрд╛рдВрдзрдиреЗ рдХреА</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЬрд░реВрд░рдд </font><i><font style="vertical-align: inherit;">рд╣реИ</font></i><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рд▓рд┐рдЦреЗрдВ:</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-comment">//Worker 1</span>
$producer-&gt;queue(<span class="hljs-string">'queue-1'</span>)-&gt;bind(<span class="hljs-string">'logs'</span>);
</code></pre><br>
<pre><code class="php hljs"><span class="hljs-comment">//Worker 2</span>
$producer-&gt;queue(<span class="hljs-string">'queue-2'</span>)-&gt;bind(<span class="hljs-string">'logs'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм рд╕реЗ, рд╣рдорд╛рд░реЗ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЙрдЧ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХреНрд╕рдЪреЗрдВрдЬрд░ </font><font style="vertical-align: inherit;">рд╣рдорд╛рд░реА рдХрддрд╛рд░реЛрдВ рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реБрдП рд╣реИрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдкреНрд░рд╛рдкреНрдд рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░реЗрдВрдЧреЗред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдк рд▓рд┐рдирдХреНрд╕ рдкрд░ рдирд┐рдореНрди рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рд╕рднреА рдореМрдЬреВрджрд╛ рд▓рд┐рдВрдХ рд╕реВрдЪреАрдмрджреНрдз рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ</font></font><br>
<br>
<pre><code class="bash hljs">rabbitmqctl list_bindings</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛрдб рдХреЛ рдПрдХ рд╕рд╛рде рд░рдЦрдирд╛</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд┐рдЫрд▓реЗ рдкрд╛рда рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рд╣рдорд╛рд░реА рдкреНрд░реЗрд╖рдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рдмрд╣реБрдд рдмрджрд▓рд╛рд╡ рдирд╣реАрдВ рд╣реБрдЖ рд╣реИред </font><font style="vertical-align: inherit;">рдореБрдЦреНрдп рдЕрдВрддрд░ рдпрд╣ рд╣реИ рдХрд┐ рдЕрдм рдпрд╣ рдкрд╣рд▓реЗ рдШреЛрд╖рд┐рдд рдПрдХреНрд╕рдЪреЗрдВрдЬрд░ рдХреЛ рд╕рдВрджреЗрд╢ рднреЗрдЬрддрд╛ рд╣реИ, рдФрд░ рдорд╛рдирдХ рдПрдХ (рдмреЙрдХреНрд╕ рд╕реЗ рд╕реБрд▓рдн) рдХреЗ рд▓рд┐рдП рдирд╣реАрдВред </font><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ </font><b><font style="vertical-align: inherit;">Send.php</font></b><font style="vertical-align: inherit;"> рдХреЛрдб рд╣реИ</font></font><b><font style="vertical-align: inherit;"></font></b><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">try</span> {<font></font>
   $producer = \MonsterMQ\Client\Producer();<font></font>
<font></font>
   $producer-&gt;connect(<span class="hljs-string">'127.0.0.1'</span>, <span class="hljs-number">5672</span>);<font></font>
   $producer-&gt;logIn(<span class="hljs-string">'guest'</span>, <span class="hljs-string">'guest'</span>);<font></font>
<font></font>
   $producer-&gt;newFanoutExchange(<span class="hljs-string">'logs'</span>);<font></font>
<font></font>
   $message = implode(<span class="hljs-string">' '</span>, array_slice($argv, <span class="hljs-number">1</span>));<font></font>
   $message = <span class="hljs-keyword">empty</span>($message) ? <span class="hljs-string">'Hello world!'</span> : $message;<font></font>
<font></font>
   $producer-&gt;publish($message, <span class="hljs-string">''</span>, <span class="hljs-string">'logs'</span>);<font></font>
<font></font>
   <span class="hljs-keyword">echo</span> <span class="hljs-string">"\n Sent {$message} \n"</span>;<font></font>
} <span class="hljs-keyword">catch</span>(\<span class="hljs-built_in">Exception</span> $e) {<font></font>
   var_dump($e);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рдХрд┐рд╕реА рдПрдХреНрд╕рдЪреЗрдВрдЬрд░ рдХреЛ рдПрдХ рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ рд╕реЗ рдЬреЛ рдХрд┐рд╕реА рднреА рдХрддрд╛рд░ рд╕реЗ рдЬреБрдбрд╝рд╛ рдирд╣реАрдВ рд╣реИ, рд╕рдВрджреЗрд╢ рдЦреЛ рдЬрд╛рдПрдЧрд╛ред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЕрдм рдпрд╣ рд╣рдореЗрдВ рд╕реВрдЯ рдХрд░рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╣рдордиреЗ рдЕрднреА рддрдХ рдЕрдкрдиреЗ рдкреНрд░рд╛рдкреНрддрдХрд░реНрддрд╛ рд▓реЙрдиреНрдЪ рдирд╣реАрдВ рдХрд┐рдП рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣рд╛рдБ рд╣рдорд╛рд░реЗ рдкрд╣рд▓реЗ </font><b><font style="vertical-align: inherit;">рдХрд╛рд░реНрдпрдХрд░реНрддрд╛</font></b><font style="vertical-align: inherit;"> рдХреЗ рд▓рд┐рдП рдХреЛрдб </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣реИ- 1. рдПрдлрдкреА рдХрд╛рд░реНрдпрдХрд░реНрддрд╛</font></font></b><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">try</span> {<font></font>
   $consumer = \MonsterMQ\Client\Consumer();<font></font>
<font></font>
   $consumer-&gt;connect(<span class="hljs-string">'127.0.0.1'</span>, <span class="hljs-number">5672</span>);<font></font>
   $consumer-&gt;logIn(<span class="hljs-string">'guest'</span>, <span class="hljs-string">'guest'</span>);<font></font>
<font></font>
   $producer-&gt;queue(<span class="hljs-string">'queue-1'</span>)-&gt;setExclusive()-&gt;declare();<font></font>
   $producer-&gt;queue(<span class="hljs-string">'queue-1'</span>)-&gt;bind(<span class="hljs-string">'logs'</span>);<font></font>
<font></font>
   $consumer-&gt;consume(<span class="hljs-string">'queue-1'</span>);<font></font>
<font></font>
   $consumer-&gt;wait(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$message, $channelNumber</span>) <span class="hljs-title">use</span> (<span class="hljs-params">$consumer</span>)</span>{
      <span class="hljs-keyword">echo</span> <span class="hljs-string">"\n $message \n"</span>;<font></font>
   });<font></font>
} <span class="hljs-keyword">catch</span>(\<span class="hljs-built_in">Exception</span> $e) {<font></font>
   var_dump($e);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣рд╛рдВ рджреВрд╕рд░реЗ </font><b><font style="vertical-align: inherit;">рд╡рд░реНрдХрд░-2. рдПрдлрдкреА рд╡рд░реНрдХрд░</font></b><font style="vertical-align: inherit;"> рдХреЗ рд▓рд┐рдП рдХреЛрдб рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ</font></font><b><font style="vertical-align: inherit;"></font></b><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">try</span> {<font></font>
   $consumer = \MonsterMQ\Client\Consumer();<font></font>
<font></font>
   $consumer-&gt;connect(<span class="hljs-string">'127.0.0.1'</span>, <span class="hljs-number">5672</span>);<font></font>
   $consumer-&gt;logIn(<span class="hljs-string">'guest'</span>, <span class="hljs-string">'guest'</span>);<font></font>
<font></font>
   $producer-&gt;queue(<span class="hljs-string">'queue-2'</span>)-&gt;setExclusive()-&gt;declare();<font></font>
   $producer-&gt;queue(<span class="hljs-string">'queue-2'</span>)-&gt;bind(<span class="hljs-string">'logs'</span>);<font></font>
<font></font>
   $consumer-&gt;consume(<span class="hljs-string">'queue-2'</span>);<font></font>
<font></font>
   $consumer-&gt;wait(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$message, $channelNumber</span>) <span class="hljs-title">use</span> (<span class="hljs-params">$consumer</span>)</span>{
      <span class="hljs-keyword">echo</span> <span class="hljs-string">"\n $message \n"</span>;<font></font>
   });<font></font>
} <span class="hljs-keyword">catch</span>(\<span class="hljs-built_in">Exception</span> $e) {<font></font>
   var_dump($e);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ рдЖрдк рдХрд┐рд╕реА рд▓реЙрдЧ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдкрд╣рд▓реЗ рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рдХреЛ рднреЗрдЬреЗ рдЧрдП рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рд╕рд╣реЗрдЬрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдмрд╕ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХреЛ рдХрдВрд╕реЛрд▓ рдореЗрдВ рдХреЙрд▓ рдХрд░реЗрдВ:</font></font><br>
<br>
<pre><code class="bash hljs">php worker-1.php &gt; logs_from_rabbit.log</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рджреЛрдиреЛрдВ рд╢реНрд░рдорд┐рдХреЛрдВ рдХреЛ рд╢реБрд░реВ рдХрд░рдиреЗ рдФрд░ рдЯрд░реНрдорд┐рдирд▓ рд╡рд┐рдВрдбреЛ рдореЗрдВ рд╕рдВрджреЗрд╢ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрди рдЖрджреЗрд╢реЛрдВ рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВ, рдкреНрд░рддреНрдпреЗрдХ рдЕрдкрдиреА рдЦрд┐рдбрд╝рдХреА рдореЗрдВ:</font></font><br>
<br>
<pre><code class="bash hljs">php worker-1.php</code></pre><br>
<pre><code class="bash hljs">php worker-2.php</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЖрджреЗрд╢ рдкрд░ рдХреЙрд▓ рдХрд░реЗрдВ:</font></font><br>
<br>
<pre><code class="bash hljs">php send.php</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореЗрдВ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдЧрд▓реЗ рдкрд╛рда,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рдо рдХреИрд╕реЗ рдХреЗрд╡рд▓ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рднреЗрдЬреЗ рдЧрдП рд╕рдВрджреЗрд╢реЛрдВ рд╕реЗ рдХреА рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕рдмрд╕реЗрдЯ рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░ рджрд┐рдЦреЗрдЧрд╛ред</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi489676/index.html">рд╣рдо Nuxt.js, GraphQL, Strapi рдФрд░ рд╕реНрдЯреНрд░рд╛рдЗрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЦрд╛рджреНрдп рд╡рд┐рддрд░рдг рд╕реЗрд╡рд╛ рдХрд╛ рдПрдХ рдХреНрд▓реЛрди рдмрдирд╛рддреЗ рд╣реИрдВред рднрд╛рдЧ 1/7</a></li>
<li><a href="../hi489678/index.html">рдЕрд╡рд┐рдирд╛рд╢реА рд╕реНрдореГрддрд┐, рдЕрд╡рд┐рдирд╛рд╢реА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдБ</a></li>
<li><a href="../hi489682/index.html">рдХреНрд░реЛрдо рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕ рдореЗрдВ рдХреНрд░реЙрд╕-рдУрд░рд┐рдЬрд┐рди рд░реАрдбрд┐рдВрдЧ рдмреНрд▓реЙрдХрд┐рдВрдЧ (CORB)</a></li>
<li><a href="../hi489684/index.html">рдпрд╣ рд╕рд╛рдорд╛рдиреНрдп рдирдХреНрд╢реЗ рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдорд╛рдирдХ - 4: рд╣реИ</a></li>
<li><a href="../hi489688/index.html">Android рдЖрд╡реЗрджрди рдХреЗ рд▓рд┐рдП OData + RxJava + рд░реЗрдЯреНрд░реЛрдлрд┐рдЯ 2</a></li>
<li><a href="../hi489696/index.html">рдХреИрд╕реЗ рдмрд╛рдпреЛрдПрдХрд╛рд╕реНрдЯрд┐рдХреНрд╕ рдЬрд╛рдирд╡рд░реЛрдВ рдХреЗ рд╕рд╛рдореНрд░рд╛рдЬреНрдп рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi489700/index.html">рдХрд╣рд╛рдБ рдЬрд╛рдирд╛ рд╣реИ: рдореЙрд╕реНрдХреЛ рдореЗрдВ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП рдЕрдЧрд▓реЗ рдореБрдлреНрдд рдХрд╛рд░реНрдпрдХреНрд░рдо (25 рдлрд░рд╡рд░реА - 11 рдорд╛рд░реНрдЪ)</a></li>
<li><a href="../hi489704/index.html">24 рдлрд░рд╡рд░реА рд╕реЗ 1 рдорд╛рд░реНрдЪ рддрдХ рдорд╛рд╕реНрдХреЛ рдореЗрдВ рдбрд┐рдЬрд┐рдЯрд▓ рдХрд╛рд░реНрдпрдХреНрд░рдо</a></li>
<li><a href="../hi489706/index.html">24 рдлрд░рд╡рд░реА рд╕реЗ 1 рдорд╛рд░реНрдЪ рддрдХ рд╕реЗрдВрдЯ рдкреАрдЯрд░реНрд╕рдмрд░реНрдЧ рдореЗрдВ рдбрд┐рдЬрд┐рдЯрд▓ рдХрд╛рд░реНрдпрдХреНрд░рдо</a></li>
<li><a href="../hi489708/index.html">рдФрд░ рдПрдХ рдорд╛рдЙрд╕ рдФрд░ рдПрдХ рдореЗрдВрдврдХред рдпреВрдирд┐рд╡рд░реНрд╕рд▓ рдХрдВрдкрд╛рдЗрд▓рд░</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>