<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐄 🛀🏼 🤑 マイクロテンプレートを使用してコンポーネントを作成する 🚃 🦒 🙅🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="みなさん、こんにちは。
 Angularフレームワークについて書いた人は、Angular Material Libraryに出くわした（または働いた）かもしれません。これは、柔軟なスタイル設定が可能な非常によく記述されたコンポーネントライブラリであり、アプリケーションにさまざまなテーマを作成する機能...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>マイクロテンプレートを使用してコンポーネントを作成する</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454804/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">みなさん、こんにちは。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angularフレームワークについて書いた人は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Angular Material</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Libraryに出くわした（または働いた）</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">かもしれません</font></a><font style="vertical-align: inherit;">。これは、柔軟なスタイル設定が可能な非常によく記述されたコンポーネントライブラリであり、アプリケーションにさまざまなテーマを作成する機能を通じて実装されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の毎日の仕事では、1つのプロジェクトでそれなしにできることはありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、このライブラリの柔軟性のすべてのプラスに加えて、独自のコンポーネントを作成する際の作成者の経験を利用することも可能であり、これは私にとって、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Angularの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベストプラクティス開発に関する最良のマニュアル</font><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、モジュールに実装されている複雑なテンプレートを使用してアプローチを実装する方法を紹介します</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MatTableModule</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例として、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ページ付けとフィルターを追加する機能を備えたカードのリスト</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を作成する方法を示したいと</font><font style="vertical-align: inherit;">思います。また、基本として、MatTableコンポーネントのモデルモデルを取り上げます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テンプレート（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソース</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">mat-table</span> [<span class="hljs-attr">dataSource</span>]=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mat-elevation-z8"</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">ng-container</span> <span class="hljs-attr">matColumnDef</span>=<span class="hljs-string">"position"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">mat-header-cell</span> *<span class="hljs-attr">matHeaderCellDef</span>&gt;</span> No. <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">mat-cell</span> *<span class="hljs-attr">matCellDef</span>=<span class="hljs-string">"let element"</span>&gt;</span> {{element.position}} <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ng-container</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">ng-container</span> <span class="hljs-attr">matColumnDef</span>=<span class="hljs-string">"name"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">mat-header-cell</span> *<span class="hljs-attr">matHeaderCellDef</span>&gt;</span> Name <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">mat-cell</span> *<span class="hljs-attr">matCellDef</span>=<span class="hljs-string">"let element"</span>&gt;</span> {{element.name}} <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ng-container</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">ng-container</span> <span class="hljs-attr">matColumnDef</span>=<span class="hljs-string">"weight"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">mat-header-cell</span> *<span class="hljs-attr">matHeaderCellDef</span>&gt;</span> Weight <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">mat-cell</span> *<span class="hljs-attr">matCellDef</span>=<span class="hljs-string">"let element"</span>&gt;</span> {{element.weight}} <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ng-container</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">ng-container</span> <span class="hljs-attr">matColumnDef</span>=<span class="hljs-string">"symbol"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">mat-header-cell</span> *<span class="hljs-attr">matHeaderCellDef</span>&gt;</span> Symbol <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">mat-cell</span> *<span class="hljs-attr">matCellDef</span>=<span class="hljs-string">"let element"</span>&gt;</span> {{element.symbol}} <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ng-container</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">mat-header-row</span> *<span class="hljs-attr">matHeaderRowDef</span>=<span class="hljs-string">"displayedColumns"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">mat-row</span> *<span class="hljs-attr">matRowDef</span>=<span class="hljs-string">"let row; columns: displayedColumns;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テンプレートを検討すると、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ng-container</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タグで</font><font style="vertical-align: inherit;">テーブルの特定の列のマークアップ</font><font style="vertical-align: inherit;">を示すことが明らかになり</font><font style="vertical-align: inherit;">ますが、それは内部でどのように機能しますか？</font><font style="vertical-align: inherit;">この設計を見たときに私が尋ねたのは、動的コンポーネントを処理しなかったという事実もあって、この質問でした。</font><font style="vertical-align: inherit;">それでは、始めましょう</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ソースコード）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構造</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作成する必要があるエンティティのセット。</font><font style="vertical-align: inherit;">このブロック図は、それらの相互作用を示しています。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/69b/791/021/69b79102165ba6e5f7bef7f2fa7ba93a.svg" alt="画像"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一歩</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マイクロテンプレートを登録するサービスが必要です。 </font></font><br>
<br>
<pre><code class="javascript hljs">@Injectable()
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RegisterPropertyDef</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-comment">//        Map </span>
  <span class="hljs-comment">//    -  ,    </span>
  <span class="hljs-comment">//         </span>
  <span class="hljs-comment">//        </span>
  private store = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>&lt;ComponentInstance, <span class="hljs-built_in">Map</span>&lt;string, TemplateRef&lt;T&gt;&gt;&gt;();<font></font>
<font></font>
  setTemplateById(cmp: ComponentInstance, <span class="hljs-attr">id</span>: string, <span class="hljs-attr">template</span>: TemplateRef&lt;any&gt;): <span class="hljs-keyword">void</span> {
    <span class="hljs-keyword">const</span> state = <span class="hljs-keyword">this</span>.store.get(cmp) || <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();<font></font>
    state.set(id, template);<font></font>
<font></font>
    <span class="hljs-keyword">this</span>.store.set(cmp, state);<font></font>
  }<font></font>
<font></font>
  getTemplate(cmp: ComponentInstance, <span class="hljs-attr">id</span>: string): TemplateRef&lt;T&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.store.get(cmp).get(id);<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二段階</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テンプレートを登録するためのディレクティブを作成します。</font></font><br>
<br>
<pre><code class="javascript hljs">@Directive({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'[providePropertyDefValue]'</span><font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProvidePropertyDefValueDirective</span>&lt;<span class="hljs-title">T</span>&gt; <span class="hljs-title">implements</span> <span class="hljs-title">OnInit</span> </span>{<font></font>
  @Input() providePropertyDefValueId: string;<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>(<font></font>
    private container: ViewContainerRef,<font></font>
    private template: TemplateRef&lt;any&gt;, //      <font></font>
    private registerPropertyDefService: RegisterPropertyDefService&lt;any&gt;, //   <font></font>
    @Optional() private parent: Alias&lt;T[]&gt; //             <font></font>
  ) {}<font></font>
<font></font>
  ngOnInit(): <span class="hljs-keyword">void</span> {
    <span class="hljs-keyword">this</span>.container.clear(); <span class="hljs-comment">//    ,   </span>
    <span class="hljs-keyword">this</span>.registerPropertyDefService.setTemplateById(
      <span class="hljs-keyword">this</span>.parent <span class="hljs-keyword">as</span> ComponentInstance,
      <span class="hljs-keyword">this</span>.providePropertyDefValueId,
      <span class="hljs-keyword">this</span>.template<font></font>
    );<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ3</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンポーネントを作成します。</font></font><br>
<br>
<pre><code class="javascript hljs">@Component({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'lib-card-list'</span>,
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
  &lt;mat-card *ngFor="let source of sources"&gt;
    &lt;ul&gt;
      &lt;li *ngFor="let key of displayedColumns"&gt;
        &lt;span&gt;{{ findColumnByKey(key)?.label }}&lt;/span&gt;
        &lt;span&gt;
          &lt;ng-container
            [ngTemplateOutlet]="findColumnByKey(key)?.template || default"
            [ngTemplateOutletContext]="{ $implicit: source }"
          &gt;&lt;/ng-container&gt;
        &lt;/span&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/mat-card&gt;
  &lt;ng-template #default&gt;&lt;/ng-template&gt;
  `</span>,
  <span class="hljs-attr">styles</span>: [
    <span class="hljs-string">'mat-card { margin: 10px; }'</span><font></font>
  ]<font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CardListComponent</span>&lt;<span class="hljs-title">T</span>&gt; <span class="hljs-title">implements</span> <span class="hljs-title">OnInit</span>, <span class="hljs-title">AfterViewInit</span> </span>{<font></font>
  @Input() defaultColumns: DefaultColumn[];<font></font>
  @Input() source$: Observable&lt;T[]&gt;;<font></font>
<font></font>
  displayedColumns = [];<font></font>
  sources: T[] = [];<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>(private readonly registerPropertyDefService: RegisterPropertyDefService&lt;T&gt;,<font></font>
              private readonly parent: Alias&lt;T[]&gt;) { }<font></font>
<font></font>
  ngOnInit() {<font></font>
    <span class="hljs-keyword">this</span>.source$.subscribe(<span class="hljs-function">(<span class="hljs-params">data: T[]</span>) =&gt;</span> <span class="hljs-keyword">this</span>.sources = data);
    <span class="hljs-keyword">this</span>.displayedColumns = <span class="hljs-keyword">this</span>.defaultColumns.map(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.id);<font></font>
  }<font></font>
<font></font>
  findColumnByKey(key: string): DefaultColumn {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.defaultColumns.find(<span class="hljs-function"><span class="hljs-params">column</span> =&gt;</span> column.id === key);<font></font>
  }<font></font>
<font></font>
  ngAfterViewInit(): <span class="hljs-keyword">void</span> {
    <span class="hljs-keyword">this</span>.defaultColumns = <span class="hljs-keyword">this</span>.defaultColumns.map(<span class="hljs-function"><span class="hljs-params">column</span> =&gt;</span>
      <span class="hljs-built_in">Object</span>.assign(column, {
        <span class="hljs-attr">template</span>: <span class="hljs-keyword">this</span>.registerPropertyDefService.getTemplate(<span class="hljs-keyword">this</span>.parent <span class="hljs-keyword">as</span> ComponentInstance, column.id)<font></font>
      })<font></font>
    );<font></font>
  }<font></font>
<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少し説明すると、コンポーネントの主な作業は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ngAfterViewInit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドのデータ構造の定義を充実させること</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">ここでは、テンプレートを初期化した後、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">defaultColumns</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モデル</font><i><font style="vertical-align: inherit;">を</font></i><font style="vertical-align: inherit;">テンプレートで</font><font style="vertical-align: inherit;">更新し</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マークアップでは、次の行に注意を払うことができます-</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">ng-container</span> [<span class="hljs-attr">ngTemplateOutlet</span>]=<span class="hljs-string">"findColumnByKey(key)?.template || default"</span>
            [<span class="hljs-attr">ngTemplateOutletContext</span>]=<span class="hljs-string">"{ $implicit: source }"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ng-container</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">して（AngularJSのように）スコープをマークアップに渡します。</font><font style="vertical-align: inherit;">これにより</font><font style="vertical-align: inherit;">、データが置か</font><font style="vertical-align: inherit;">れる</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">let-my-var</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンストラクトを通じて、マイクロテンプレートで変数を快適に宣言できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用する</font></font></h2><br>
<pre><code class="xml hljs">// app.component.html
<span class="hljs-tag">&lt;<span class="hljs-name">lib-card-list</span> [<span class="hljs-attr">defaultColumns</span>]=<span class="hljs-string">"defaultColumns"</span> [<span class="hljs-attr">source</span>$]=<span class="hljs-string">"sources$"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">lib-card-list</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">ng-container</span>  *<span class="hljs-attr">libProvidePropertyDefValue</span>=<span class="hljs-string">"let element; id: 'id'"</span>&gt;</span><font></font>
  {{ element.id }}<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">ng-container</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ng-container</span> *<span class="hljs-attr">libProvidePropertyDefValue</span>=<span class="hljs-string">"let element; id: 'title'"</span>&gt;</span><font></font>
  {{ element.title }}<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">ng-container</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいコンポーネントを初期化し、それにパラメーターを渡します。</font><i><font style="vertical-align: inherit;">ng-container</font></i><font style="vertical-align: inherit;">および</font><i><font style="vertical-align: inherit;">libProvidePropertyDefValue</font></i><font style="vertical-align: inherit;">ディレクティブ</font><i><font style="vertical-align: inherit;">による</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
テンプレート定義</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
ここで最も重要なことは</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「要素をしましょう。</font><font style="vertical-align: inherit;">やった' "</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素が</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リストからのデータとオブジェクトと等価であるテンプレートの範囲であり、</font></font><br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IDは、</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マイクロテンプレートの識別子です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">providePropertyDefValue</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクティブ</font><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">ngOnInit</font></i><font style="vertical-align: inherit;">メソッドに</font><i><font style="vertical-align: inherit;">戻り</font></i><font style="vertical-align: inherit;">ます。</font></font><i><font style="vertical-align: inherit;"></font></i><br>
<br>
<pre><code class="javascript hljs">  ngOnInit(): <span class="hljs-keyword">void</span> {
    <span class="hljs-keyword">this</span>.container.clear();<font></font>
...<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例に示すようにマイクロテンプレートを配置し、ディレクティブで「クリーン」にするか、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lib-card-list</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネント内に定義を完全に転送する</font><font style="vertical-align: inherit;">ことができるため、マークアップは次のようになります。</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">lib-card-list</span> [<span class="hljs-attr">defaultColumns</span>]=<span class="hljs-string">"defaultColumns"</span> [<span class="hljs-attr">source</span>$]=<span class="hljs-string">"sources$"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">ng-container</span>  *<span class="hljs-attr">libProvidePropertyDefValue</span>=<span class="hljs-string">"let element; id: 'id'"</span>&gt;</span><font></font>
     {{ element.id }}<font></font>
   <span class="hljs-tag">&lt;/<span class="hljs-name">ng-container</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">ng-container</span> *<span class="hljs-attr">libProvidePropertyDefValue</span>=<span class="hljs-string">"let element; id: 'title'"</span>&gt;</span><font></font>
    {{ element.title }}<font></font>
   <span class="hljs-tag">&lt;/<span class="hljs-name">ng-container</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">lib-card-list</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
客観的には、2番目の使用例の方が生産的です。</font></font><br>
<br>
<pre><code class="javascript hljs">@Component({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-root'</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./app.component.html'</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'./app.component.css'</span>],
  <span class="hljs-attr">providers</span>: [{ <span class="hljs-attr">provide</span>: Alias, <span class="hljs-attr">useExisting</span>: forwardRef(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> AppComponent) }]<font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Alias</span>&lt;<span class="hljs-title">any</span>&gt; </span>{<font></font>
  title = <span class="hljs-string">'card-list-example'</span>;<font></font>
<font></font>
  defaultColumns: DefaultColumn[] = [<font></font>
    {<font></font>
      <span class="hljs-attr">id</span>: <span class="hljs-string">'id'</span>,
      <span class="hljs-attr">label</span>: <span class="hljs-string">'ID'</span><font></font>
    },<font></font>
    {<font></font>
      <span class="hljs-attr">id</span>: <span class="hljs-string">'title'</span>,
      <span class="hljs-attr">label</span>: <span class="hljs-string">'Title'</span><font></font>
    }<font></font>
  ];<font></font>
<font></font>
  sources$ = <span class="hljs-keyword">of</span>([<font></font>
    {<font></font>
      <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'Hello'</span><font></font>
    },<font></font>
    {<font></font>
      <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'World'</span><font></font>
    }<font></font>
  ]);<font></font>
<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここではすべてが非常に初歩的であり、考慮すべき唯一のものは次のとおりです。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロバイダー：[{provide：Alias、useExisting：forwardRef（（）=&gt; AppComponent）}]</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この設計は、テンプレートとそれらを使用するコンポーネントをリンクするために必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのサービスでは、コンストラクターはインジェクターからAppComponentコンポーネントのインスタンスを受け取ります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さらに</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、プロジェクトで繰り返し使用できるようにコンポーネントを作成する方法を検討しました。データを含むさまざまなテンプレートを転送でき、これらのテンプレートは間違いなく何でもかまいません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改善方法？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angular Materialとフィルタリングからページネーションを追加できます。</font></font><br>
<br>
<pre><code class="xml hljs">// card-list.component.html
<span class="hljs-tag">&lt;<span class="hljs-name">mat-paginator</span> [<span class="hljs-attr">pageSize</span>]=<span class="hljs-string">"5"</span><span class="hljs-attr">showFirstLastButton</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mat-paginator</span>&gt;</span>
</code></pre><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// card-list.component.ts</span><font></font>
<font></font>
@ViewChild(MatPaginator) paginator: MatPaginator;<font></font>
<font></font>
 <span class="hljs-keyword">this</span>.paginator.initialized.subscribe(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
   <span class="hljs-comment">//    </span><font></font>
});<font></font>
<span class="hljs-keyword">this</span>.paginator.page.subscribe(<span class="hljs-function">(<span class="hljs-params">pageEvent: PageEvent</span>) =&gt;</span> {
 <span class="hljs-comment">//      </span><font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フィルタリングは、mat-form-fieldを介して実装できます。ページネーション中にページを切り替えるのと同様に、データを更新します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで全部です。</font><font style="vertical-align: inherit;">ライブラリのソースコードを定期的に確認することを強くお勧めします</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角度のある</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/素材、私の意見では、これは柔軟で生産的なコンポーネントの作成に関する知識を高める良い機会です。</font><font style="vertical-align: inherit;">ご清聴ありがとうございました。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja454778/index.html">本「機械学習：ビジネスのためのアルゴリズム」</a></li>
<li><a href="../ja454780/index.html">マイクロサービスについて知っていること</a></li>
<li><a href="../ja454788/index.html">慎重な投資家の武器：投資債券の公正価値を考慮する</a></li>
<li><a href="../ja454790/index.html">Javaネイティブイメージ：ユーザビリティチェック</a></li>
<li><a href="../ja454792/index.html">交換ソーティングアルゴリズムの比較</a></li>
<li><a href="../ja454806/index.html">Cisco 200-125 CCNA v3.0のトレーニング。9日目。スイッチの物理的な世界。パート1</a></li>
<li><a href="../ja454808/index.html">宇宙船と宇宙について。途中で製品全体を変更してフィーチャーを作成する方法</a></li>
<li><a href="../ja454810/index.html">火星の新鮮な空気：CO2分子を曲げて酸素を得る</a></li>
<li><a href="../ja454816/index.html">WSLでのphp-fpm + nginxバンドルの構成</a></li>
<li><a href="../ja454818/index.html">Rekko Challenge-レコメンデーションシステムを作成するためのコンテストで2位になる方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>