<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚵🏿 👃🏽 🤵🏽 SIL et Salesforce ⛩️ 🛀🏿 🧗🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, je vais vous expliquer comment vous pouvez travailler avec Salesforce à partir de SIL. 
 
 SIL est un langage de programmation pour ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>SIL et Salesforce</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498826/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans cet article, je vais vous expliquer comment vous pouvez travailler avec Salesforce à partir de SIL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SIL est un langage de programmation pour automatiser les actions dans Atlassian Jira et Confluence. </font><font style="vertical-align: inherit;">Vous pouvez en savoir plus sur SIL&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
 <a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe 3 options pour travailler avec Salesforce à partir de SIL:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisez le plug-in&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Power Salesforce Connector</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Écrivez vos fonctions sur SIL.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Écrivez votre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extension pour SIL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, nous examinerons les deux premières options. </font><font style="vertical-align: inherit;">Vous pouvez découvrir comment créer vos propres extensions pour SIL </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais avant de passer au code, vous devez configurer Salesforce.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration de Salesforce</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous utiliserons l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API Salesforce Rest</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour travailler avec Salesforce, nous devons donc d'abord configurer l'application connectée. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour configurer l'application plug-in, allez dans gear -&gt; Setup: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2g/hu/n4/2ghun4dh2qhhta_feal3ggd5zto.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Choisissez App -&gt; App Manager: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/q8/3e/qr/q83eqr95rupzl-oxpyujd7ssu08.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cliquez sur le bouton New Connected App: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tx/9r/r-/tx9rr-eyxuqytte2efkrrm8c-a4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sélectionnez l'option pour activer OAuth (Enable OAuth settings). Installez&nbsp; </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Full Access</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cliquez sur le bouton&nbsp; </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> puis sur le bouton&nbsp; </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enregistrer</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur la page suivante, sous les paramètres OAuth, nous verrons la clé du consommateur et l'option pour ouvrir le secret du consommateur. N'oubliez pas ces deux paramètres. Nous en aurons besoin pour établir une connexion avec Salesforce.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, vous devez générer un jeton secret utilisateur. </font><font style="vertical-align: inherit;">Pour ce faire, accédez à Paramètres utilisateur → Réinitialiser mon jeton de sécurité. </font><font style="vertical-align: inherit;">Une nouvelle clé d'utilisateur secrète sera envoyée à notre e-mail: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n8/q6/sm/n8q6smflp-zy1zso0zwkpir0smy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nous avons maintenant tout ce dont nous avons besoin pour travailler avec Salesforce de SIL.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connecteur d'alimentation Salesforce</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le connecteur Power Salesforce vous permet de travailler avec de tels objets dans Salesforce comme compte et opportunité.En outre, vous pouvez recevoir des résultats de requête dans SOQL. </font><font style="vertical-align: inherit;">Vous pouvez trouver </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toutes les</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fonctions disponibles dans le plugin SIL </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ici</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'avantage d'utiliser le plugin est que vous n'avez pas besoin d'écrire vos fonctions SIL pour travailler avec Salesforce et comprendre les subtilités de l'API Salesforce Rest. </font><font style="vertical-align: inherit;">Cela vous permettra de vous concentrer sur les tâches métier et non sur les tâches techniques. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais bien sûr, le plugin présente également un certain nombre d'inconvénients:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'API Salesforce Rest est beaucoup plus riche que de travailler avec Account, Opportunity et d'obtenir les résultats des requêtes SOQL. </font><font style="vertical-align: inherit;">Si vous avez besoin de fonctions qui ne sont pas dans le plugin, vous devrez écrire vos fonctions SIL.</font></font></li>
<li>    Account  Opportunity     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>.       ,   Salesforce     .           Salesforce.</li>
<li>  ,     ,          :&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Power Scripts</a>,&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Power Actions</a>,&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Power Custom Fields Pro</a>,&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Database Custom Fields</a>,&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Rights DNA</a>,&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">KIWI</a>,&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">User Group Picker</a>.</li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons donc que nous ayons décidé d'utiliser le connecteur Power Salesforce. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous devons d'abord installer ce plugin depuis </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atlassian Marketplace</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puis créer une connexion à Salesforce depuis Atlassian Jira (équipement -&gt; gérer les applications -&gt; Configuration de connexion SFDC): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/if/y0/bk/ify0bkqxxgfz-5ldyge0o7rv5ro.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cliquez sur le bouton Ajouter une connexion: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wb/ox/k2/wboxk2zoi5fdiz_bke371hi8yxw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
remplissez les champs requis et cliquez sur le bouton Enregistrer. Lors de la saisie du mot de passe, vous devez saisir le mot de passe utilisateur puis la clé secrète de l'utilisateur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous pouvons écrire du code en SIL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, sélectionnez Opportunité dans Salesforce. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Allons dans SIL Manager, créons un nouveau fichier et écrivons le code suivant:</font></font><br>
<br>
<pre><code class="java hljs">SFDCConnection sfdcConnection = connectToSalesforce(<span class="hljs-string">"My SFDC Connection"</span>);<font></font>
SFDCOpportunity opp = sfdcGetOpportunity(sfdcConnection, <span class="hljs-string">"0064F00000NKA7CQAX"</span>);<font></font>
runnerLog(opp);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, pour écrire des données d'opportunité, nous n'avons écrit que 2 lignes de code. </font><font style="vertical-align: inherit;">Dans la première ligne, nous nous connectons à Salesforce (j'ai appelé ma connexion Ma connexion SFDC). </font><font style="vertical-align: inherit;">Sur la deuxième ligne, nous obtenons des données de Salesforce à l'aide de l'ID d'opportunité. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de modifier un champ dans Opportunity, nous allons écrire ce code:</font></font><br>
<br>
<pre><code class="java hljs">SFDCConnection sfdcConnection = connectToSalesforce(<span class="hljs-string">"My SFDC Connection"</span>);<font></font>
SFDCOpportunity opp;<font></font>
opp.Description = <span class="hljs-string">"My new description"</span>;<font></font>
sfdcUpdateOpportunity(sfdcConnection, <span class="hljs-string">"0064F00000NKA7CQAX"</span>, opp);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, le code est assez simple et, en outre, la documentation du plugin contient des exemples pour chaque fonction implémentée dans le plugin. </font><font style="vertical-align: inherit;">Des exemples peuvent être trouvés&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais que faire si le connecteur Power Salesforce ne vous convient pas? </font><font style="vertical-align: inherit;">Dans ce cas, nous pouvons créer nos propres fonctions SIL.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Création de vos propres fonctions SIL</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Créez d'abord la fonction de connexion Salesforce:</font></font><br>
<br>
<pre><code class="java hljs">struct SFDCConnection {<font></font>
    string access_token;<font></font>
    string instance_url;<font></font>
    string id;<font></font>
    string token_type;<font></font>
    string issued_at;<font></font>
    string signature;<font></font>
}<font></font>
<font></font>
<span class="hljs-function">function <span class="hljs-title">connectToSalesforce</span><span class="hljs-params">(string consumer_key,
                      string consumer_secret,
                      string user_name,
                      string user_password)</span> </span>{<font></font>
    HttpRequest request;<font></font>
    HttpHeader header = httpCreateHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>);<font></font>
    request.headers += header;<font></font>
    string dummyPayload;<font></font>
    string url = <span class="hljs-string">"https://login.salesforce.com/services/oauth2/token"</span>;<font></font>
    string url_string = <span class="hljs-string">"?grant_type=password&amp;client_id="</span> + consumer_key+ 
                    <span class="hljs-string">"&amp;client_secret="</span> + consumer_secret + 
                    <span class="hljs-string">"&amp;username="</span> + user_name + 
                    <span class="hljs-string">"&amp;password="</span> + user_password; <font></font>
    SFDCConnection connection = httpPost(url + url_string, request, dummyPayload);<font></font>
    runnerLog(httpGetErrorMessage());<font></font>
    <span class="hljs-keyword">return</span> connection;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, nous avons créé un framework basé sur JSON qui revient de Salesforce lorsqu'il est connecté. </font><font style="vertical-align: inherit;">Ils ont ensuite utilisé la méthode&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://login.salesforce.com/services/oauth2/token</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;pour se connecter à Salesforce. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Créons maintenant une fonction pour récupérer les données d'opportunité. </font><font style="vertical-align: inherit;">Pour ce faire, nous utilisons la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">méthode XX.X / sobjects / SObjectNam / id</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> /:</font></font><br>
<br>
<pre><code class="java hljs">struct Opportunity {<font></font>
    string Id;<font></font>
    string AccountId;<font></font>
    string Name;<font></font>
    string Description;<font></font>
    string StageName;<font></font>
    string OwnerId;<font></font>
}<font></font>
<font></font>
<span class="hljs-function">function <span class="hljs-title">getOppFromOppId</span><span class="hljs-params">(string access_token,
                string url,
                string oppId)</span> </span>{<font></font>
    Opportunity result;<font></font>
    HttpRequest request;<font></font>
    HttpHeader header = httpCreateHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>);<font></font>
    request.headers += header;<font></font>
    header = httpCreateHeader(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + access_token);<font></font>
    request.headers += header;<font></font>
    result = httpGet(url + <span class="hljs-string">"/services/data/v39.0/sobjects/Opportunity/"</span> + oppId, request);
    <span class="hljs-keyword">return</span> result;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encore une fois, nous avons défini la structure des données d'opportunité, puis appelé la méthode API Salesforce Rest. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Écrivons maintenant un code qui utilise nos fonctions:</font></font><br>
<br>
<pre><code class="java hljs">SFDCConnection connection = connectToSalesforce(consumer_key, consumer_secret, user_name, user_password);<font></font>
Opportunity opp = getOppFromOppId(connection.access_token, connection.instance_url, <span class="hljs-string">"0064F00000NKA7CQAX"</span>);<font></font>
runnerLog(opp);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons obtenu les mêmes 2 lignes de code. </font><font style="vertical-align: inherit;">Cependant, notre code complet ressemble à ceci:</font></font><br>
<br>
<pre><code class="java hljs">struct SFDCConnection {<font></font>
    string access_token;<font></font>
    string instance_url;<font></font>
    string id;<font></font>
    string token_type;<font></font>
    string issued_at;<font></font>
    string signature;<font></font>
}<font></font>
<font></font>
<span class="hljs-function">function <span class="hljs-title">connectToSalesforce</span><span class="hljs-params">(string consumer_key,
                      string consumer_secret,
                      string user_name,
                      string user_password)</span> </span>{<font></font>
    HttpRequest request;<font></font>
    HttpHeader header = httpCreateHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>);<font></font>
    request.headers += header;<font></font>
    string dummyPayload;<font></font>
    string url = <span class="hljs-string">"https://login.salesforce.com/services/oauth2/token"</span>;<font></font>
    string url_string = <span class="hljs-string">"?grant_type=password&amp;client_id="</span> + consumer_key+ 
                    <span class="hljs-string">"&amp;client_secret="</span> + consumer_secret + 
                    <span class="hljs-string">"&amp;username="</span> + user_name + 
                    <span class="hljs-string">"&amp;password="</span> + user_password; <font></font>
    SFDCConnection connection = httpPost(url + url_string, request, dummyPayload);<font></font>
    runnerLog(httpGetErrorMessage());<font></font>
    <span class="hljs-keyword">return</span> connection;<font></font>
}<font></font>
<font></font>
struct Opportunity {<font></font>
    string Id;<font></font>
    string Name;<font></font>
    string Description;<font></font>
    string StageName;<font></font>
    string OwnerId;<font></font>
}<font></font>
<font></font>
<span class="hljs-function">function <span class="hljs-title">getOppFromOppId</span><span class="hljs-params">(string access_token,
                string url,
                string oppId)</span> </span>{<font></font>
    Opportunity result;<font></font>
    HttpRequest request;<font></font>
    HttpHeader header = httpCreateHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>);<font></font>
    request.headers += header;<font></font>
    header = httpCreateHeader(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + access_token);<font></font>
    request.headers += header;<font></font>
    result = httpGet(url + <span class="hljs-string">"/services/data/v39.0/sobjects/Opportunity/"</span> + oppId, request);
    <span class="hljs-keyword">return</span> result;<font></font>
}<font></font>
<font></font>
string consumer_key = <span class="hljs-string">"your consumer key"</span>;<font></font>
string consumer_secret = <span class="hljs-string">"your consumer secret"</span>;  <font></font>
string user_name = <span class="hljs-string">"your user name"</span>;<font></font>
string user_password = <span class="hljs-string">"password and user secret token"</span>;<font></font>
<font></font>
SFDCConnection connection = connectToSalesforce(consumer_key, consumer_secret, user_name, user_password);<font></font>
Opportunity opp = getOppFromOppId(connection.access_token, connection.instance_url, <span class="hljs-string">"0064F00000NKA7CQAX"</span>);<font></font>
runnerLog(opp);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous souhaitez, par exemple, mettre à jour Opportunity, vous devez implémenter votre fonction SIL pour cela, à l'aide de l'API Salesforce Rest. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, comme on peut le voir dans notre exemple, nous avons reçu les champs suivants de l'opportunité: id, nom, description, stagename et propriétaire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons que vous souhaitiez ajouter un champ accountid. </font><font style="vertical-align: inherit;">Pour ce faire, vous devez modifier la structure comme suit:</font></font><br>
<br>
<pre><code class="java hljs">struct Opportunity {<font></font>
    string Id;<font></font>
    string Name;<font></font>
    string Description;<font></font>
    string StageName;<font></font>
    string OwnerId;<font></font>
    string AccountId;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons ajouté le champ AccountId à la fin de la structure. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les exemples montrent que si vous écrivez vos fonctions SIL, vous pouvez implémenter un appel à n'importe quelle méthode d'API Salesforce Rest, mais pour cela, vous devez passer beaucoup plus de temps à écrire votre code. </font><font style="vertical-align: inherit;">Mais là encore, c'est gratuit.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr498800/index.html">Comment j'ai appris à mon ordinateur à jouer à Dobble avec OpenCV et Deep Learning</a></li>
<li><a href="../fr498808/index.html">Vim avec prise en charge YAML pour Kubernetes</a></li>
<li><a href="../fr498814/index.html">Vous avez échoué une question théorique sur la sécurité sociale, et ils ont mis fin à vous. C'est normal? // Nous sommes condamnés # 3</a></li>
<li><a href="../fr498816/index.html">La vérité tout d'abord, ou pourquoi le système doit être conçu en fonction du périphérique de base de données</a></li>
<li><a href="../fr498820/index.html">Quelques questions plus délicates sur .NET et C #</a></li>
<li><a href="../fr498828/index.html">Comment le sel de table et les protéines augmenteront la survie des implants</a></li>
<li><a href="../fr498830/index.html">Hash + cache: optimisation du traitement des flux</a></li>
<li><a href="../fr498832/index.html">Présentation des possibilités de Qt Creator 4.12 et QBS 1.16 pour la programmation de microcontrôleurs</a></li>
<li><a href="../fr498834/index.html">33 mitaps en ligne de la semaine. Choisissez-en un ou ayez du temps pour tout?</a></li>
<li><a href="../fr498836/index.html">[Infographie] Les 50 meilleures franchises de jeux avec des revenus de plus d'un milliard</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>