<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîë ‚öïÔ∏è üë©üèø‚Äçüéì A dor e o sofrimento ao depurar microsservi√ßos no desenvolvimento web üå¶Ô∏è ü§≤üèΩ üôÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em TI, voc√™ raramente v√™ uma pessoa que nunca ouviu falar de microsservi√ßos. Existem muitos artigos na Internet e em sites especializados sobre esse a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>A dor e o sofrimento ao depurar microsservi√ßos no desenvolvimento web</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489912/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em TI, voc√™ raramente v√™ uma pessoa que nunca ouviu falar de microsservi√ßos. Existem muitos artigos na Internet e em sites especializados sobre esse assunto que geralmente explicam as diferen√ßas entre o mon√≥lito e, de fato, os microsservi√ßos. Um desenvolvedor Java inexperiente, depois de ler artigos da categoria "O que s√£o microsservi√ßos para aplicativos da Web e o que eles comem", est√° cheio de alegria e confian√ßa de que agora tudo ser√° maravilhoso. Afinal, o principal objetivo √© "atravessar" o mon√≥lito monstruoso (o artefato final, que, em regra, √© um arquivo de guerra / ouvido), que executa um monte de tudo, em v√°rios servi√ßos vivos separados, cada um deles executando uma fun√ß√£o estritamente definida relacionada apenas a ele, e far√° bem. Al√©m disso, vem a escalabilidade horizontal - basta fazer o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dimensionamento</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√≥s correspondentes, e tudo ser√° √≥timo. </font><font style="vertical-align: inherit;">Mais usu√°rios chegaram ou s√£o necess√°rias mais capacidades - apenas adicionamos de 5 a 10 novas inst√¢ncias de servi√ßo. </font><font style="vertical-align: inherit;">Grosso modo, em geral, √© assim que funciona, mas, como voc√™ sabe, o diabo est√° nos detalhes, e o que inicialmente parecia bastante simples, ap√≥s uma an√°lise mais aprofundada, pode se transformar em problemas que ningu√©m levou em considera√ß√£o inicialmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste post, colegas da pr√°tica Java da Rexoft compartilham suas experi√™ncias sobre como depurar microsservi√ßos para a web.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/si/ls/xd/silsxdh5v-rwgybittlu4bvbcz0.png"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como obter integridade de dados transacionais</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao tentar transferir a arquitetura de um mon√≥lito para microsservi√ßos, as equipes que n√£o tinham essa experi√™ncia costumavam come√ßar a dividir servi√ßos em objetos de n√≠vel superior do modelo de dom√≠nio, por exemplo: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usu√°rio / Cliente / Empregado</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> etc. No futuro, com um estudo mais detalhado, o entendimento aparece, o que √© mais conveniente para quebrar blocos maiores que agregam v√°rios objetos do dom√≠nio do dom√≠nio dentro de si. Devido a isso, voc√™ pode evitar chamadas desnecess√°rias para servi√ßos de terceiros.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O segundo ponto importante √© o suporte √† integridade de dados transacionais. No mon√≥lito, esse problema √© resolvido atrav√©s do Application Server, onde a guerra / ouvido est√° girando, dentro da qual o cont√™iner, de fato, descreve os limites das transa√ß√µes. No caso de microsservi√ßos, os limites das transa√ß√µes s√£o borrados e, al√©m de escrever o c√≥digo da l√≥gica de neg√≥cios, √© necess√°rio ser capaz de gerenciar a integridade dos dados, manter a consist√™ncia entre diferentes partes do sistema. Esta √© uma tarefa bastante n√£o trivial. Recomenda√ß√µes para resolver esse tipo de problema de arquitetura podem ser encontradas na Internet e nas comunidades t√©cnicas relevantes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo, tentaremos descrever dificuldades t√©cnicas espec√≠ficas que surgem quando as equipes tentam trabalhar com microsservi√ßos e maneiras de solucion√°-las. Observo imediatamente que as op√ß√µes propostas n√£o s√£o as √∫nicas verdadeiras. Talvez haja servi√ßos mais elegantes, mas as recomenda√ß√µes que darei s√£o testadas na pr√°tica e resolvem com precis√£o as dificuldades existentes, e a possibilidade de us√°-las ou n√£o √© uma quest√£o pessoal para todos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O principal problema com microservices √© que eles s√£o extremamente f√°ceis de executar localmente (por exemplo, usando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spring.io</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IntelliJ IDEA</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , isso pode ser feito em apenas 5 minutos, ou at√© menos). No entanto, ao tentar fazer o mesmo no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No cluster (se voc√™ tinha pouca experi√™ncia com ele antes), um simples lan√ßamento do controlador que imprime </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúHello World‚Äù</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ao acessar um endpoint espec√≠fico pode levar meio dia. </font><font style="vertical-align: inherit;">No caso de um mon√≥lito, a situa√ß√£o √© mais simples. </font><font style="vertical-align: inherit;">Cada desenvolvedor possui um servidor de aplicativos local. </font><font style="vertical-align: inherit;">O processo de implanta√ß√£o tamb√©m √© bastante simples - voc√™ precisa copiar o artefato final war / ear para o lugar certo no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Application Server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> manualmente ou usando o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IDE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Geralmente isso n√£o √© um problema.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depurando nuances</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O segundo ponto importante √© a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">depura√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Em situa√ß√µes com um mon√≥lito, presume-se que o desenvolvedor tenha um servidor de aplicativos em sua m√°quina, no qual seu </font><b><font style="vertical-align: inherit;">war / ear esteja</font></b><font style="vertical-align: inherit;"> implantado</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Voc√™ sempre pode depurar, porque tudo que voc√™ precisa est√° dispon√≠vel. Com os microsservi√ßos, tudo √© um pouco mais complicado, um servi√ßo geralmente √© uma coisa em si. Como regra, ele tem seu pr√≥prio esquema de banco de dados, no qual seus dados est√£o localizados, executa fun√ß√µes espec√≠ficas espec√≠ficas a ele, toda a comunica√ß√£o com outros servi√ßos √© organizada por meio de chamadas HTTP s√≠ncronas (por exemplo, via RestTemplate ou Feign), ass√≠ncronas (por exemplo, Kafka ou RabbitMQ). Portanto, a tarefa essencialmente simples de salvar ou validar um determinado objeto que foi implementado anteriormente em um s√≥ lugar, dentro de um √∫nico arquivo war / ear, no caso geral com uma abordagem de microsservi√ßo, se torna represent√°vel na forma: v√° para um ou N servi√ßos adjacentes, sejam opera√ß√µes de aquisi√ß√£o de dados , por exemplo, alguns valores de refer√™ncia ou a opera√ß√£o de salvar entidades adjacentes,cujos dados s√£o necess√°rios para executar a l√≥gica de neg√≥cios em nosso servi√ßo. Escrever l√≥gica de neg√≥cios nesse caso se torna muito mais dif√≠cil.</font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por conseguinte, as op√ß√µes de solu√ß√£o s√£o as seguintes</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escreva seu c√≥digo l√≥gico de neg√≥cios. </font><font style="vertical-align: inherit;">Ao mesmo tempo, todas as chamadas externas s√£o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zombadas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - contratos externos s√£o emulados, testes s√£o escritos sob a premissa de que os contratos externos s√£o exatamente assim, depois que h√° uma implanta√ß√£o no circuito para verifica√ß√£o. </font><font style="vertical-align: inherit;">√Äs vezes √© uma sorte e a integra√ß√£o funciona imediatamente, √†s vezes √© uma infelicidade - voc√™ precisa refazer o c√≥digo da l√≥gica de neg√≥cios uma en√©sima vez, porque durante o tempo em que implementamos a funcionalidade, o c√≥digo no servi√ßo adjacente foi atualizado, as assinaturas da API foram alteradas e precisamos refaz√™-lo parte da tarefa est√° do seu lado.</font></font></li>
<li>     <b></b>.     ,  ,         <b>Kubernetes</b>, . .  ,       ‚Äî     ,     <b>remote debug</b>  .      ,     <b>runtime</b> ,   ,    . -,      ,          2‚Äì5 , . .         ,  <b>Kubernetes</b> ,        . -,           (<b>Per thread</b>),    ,      .</li>
</ol><br>
<h2>     Kubernetes</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma solu√ß√£o para esse problema, de fato, √© a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">telepresen√ßa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Provavelmente existem outros programas desse tipo, mas a experi√™ncia pessoal estava apenas com ele, e ele se estabeleceu positivamente. </font><font style="vertical-align: inherit;">Em geral, o princ√≠pio de opera√ß√£o √© o seguinte: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na m√°quina local, o desenvolvedor </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instala a telepresen√ßa</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e configura o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para acessar o cluster Kubernetes correspondente (adiciona a configura√ß√£o do loop a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~ / .kube / config</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Depois disso, a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">telepresen√ßa √©</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> iniciada </font><font style="vertical-align: inherit;">, que de fato atua como um </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proxy</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entre o computador desenvolvedor local e o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Existem diferentes op√ß√µes de inicializa√ß√£o, √© melhor consultar mais detalhadamente o guia oficial, mas, no caso mais b√°sico, ele se resume a duas etapas:</font></font><br>
<br>
<ol>
<li><b>Sudo telepresence</b> (,     Linux-  ,     sudo  .  ,        root/).          Kubernetes    deployment   <b>telepresence</b>  .  deployment          Kubernetes.</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iniciar sua inst√¢ncia de servi√ßo √© como de costume no computador local do desenvolvedor. </font><font style="vertical-align: inherit;">No entanto, nesse caso, ele ter√° acesso a toda a infraestrutura do cluster Kubernetes, seja </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Service Discovery (Eureka, Consul), Api Gateway (Zuul), Kafka</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e suas filas, se houver, e assim por diante. </font><font style="vertical-align: inherit;">Na verdade, temos acesso a todo o ambiente de cluster de que precisamos, mas localmente. </font><font style="vertical-align: inherit;">O b√¥nus √© a possibilidade de depura√ß√£o local, mas em um ambiente de cluster, e j√° ser√° muito mais r√°pido, porque, de fato, estamos dentro do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (atrav√©s do t√∫nel) e n√£o o </font><b><font style="vertical-align: inherit;">acessamos</font></b><font style="vertical-align: inherit;"> de fora via porta para depura√ß√£o remota.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta solu√ß√£o tem v√°rias desvantagens:</font></font><br>
<br>
<ol>
<li><b>Telepresence</b>    Linux  Mac,   Windows     VFS,  ,  issue  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">GitHub</a>.          .   ,    - Linux/Mac,      .</li>
<li>      ,      <b>Service Discovery (Eureka, Consul) </b>      ‚Äî                 <b>Round Robin</b>  ,         endpoint  ,  ,   ,    : </li>
</ol><br>
<ul>
<li>       kubernetes -&gt;   .   <b>telepresence</b>      deployment  ,      ¬´¬ª     Eureka   <b>ip-address:port/service-name</b>  <b>dns-name:port/service-name</b>    ,  . .   Kubernetes        ,      timeout;</li>
<li>      deployment     -  Kubernetes    , <b> </b>      (   )           (Round Robin),    ;</li>
<li>  endpoint,      <b>feature</b>,     HTTP 404    endpoint  <b>Gateway</b>,          <b>Service Discovery</b>     ,    <b>Round Robin</b> .         Service Discovery  endpoint  ,    HTTP 404.</li>
<li> ,    ,        <b> </b> .</li>
</ul><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com o roteamento din√¢mico de uma solicita√ß√£o, queremos dizer que o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API Gateway (Zuul)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tem a capacidade de escolher entre v√°rias inst√¢ncias do mesmo servi√ßo que precisamos. No caso geral, esse problema pode ser resolvido adicionando um predicado que permite selecionar o servi√ßo desejado no pool de servi√ßos comum com o mesmo nome no est√°gio de processamento da solicita√ß√£o. Naturalmente, cada servi√ßo entre aqueles com os quais queremos rotear dinamicamente precisar√° ter algum tipo de meta-informa√ß√£o contendo dados que ser√£o usados ‚Äã‚Äãpara determinar se esse servi√ßo √© necess√°rio ou n√£o. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O Spring Cloud</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (no caso do Eureka), por exemplo, permite fazer isso especificando em um bloco de metadados especial no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">application.yml</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">eureka:<font></font>
  instance:<font></font>
    preferIpAddress: true<font></font>
    metadata-map:<font></font>
      service.label: develop</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s registrar esse servi√ßo no Service Discovery em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com.netflix.appinfo.InstanceInfo # getMetadata,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> haver√° um r√≥tulo com a chave </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">service.label</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e o valor </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">develop</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que pode ser obtido em tempo de execu√ß√£o. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um ponto importante no in√≠cio de um servi√ßo √© verificar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se existe uma inst√¢ncia de servi√ßo no Service Discovery com essas meta-informa√ß√µes ou n√£o, a fim de evitar poss√≠veis colis√µes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Op√ß√µes de roteamento</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois disso, a solu√ß√£o do problema pode ser reduzida para duas op√ß√µes:</font></font><br>
<br>
<ol>
<li>API Gateway        .         , ,          , ,  Headers: <b>DestionationService: feature/PRJ-001</b>.     ,       ,           Header        .       ,         ‚Äî - API Gateway.</li>
<li>  API Gateway,        , . ., ,    ,     <b>Zuul 1</b>    endpoint-  <b>/api/users/</b>‚Ä¶       user,      <b>feature/PRJ-001</b>,    <b>Zuul 2</b>    endpoint- <b> /api/users/</b>‚Ä¶       user,      <b>feature/PRJ-002</b>.       ,         N API Gateway  N , . .        , . .   feature ‚Äî ,  ,  ,             ,    ,     ,        .          <b>API Gateway</b>, , . .,  ,   ,     ‚Äî   ,     .</li>
</ol><br>
<img src="https://habrastorage.org/webt/si/ls/xd/silsxdh5v-rwgybittlu4bvbcz0.png"><br>
<br>
<i>   </i><br>
<br>
<h2>       </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como parte da API do Gateway, tamb√©m vale a pena fornecer um mecanismo que permita alterar as regras de roteamento em tempo de execu√ß√£o. √â melhor colocar essas configura√ß√µes no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mapa de configura√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nesse caso, ser√° suficiente reescrever as novas rotas e reiniciar a API do Gateway no Kubernetes para atualizar o roteamento ou usar o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring Boot Actuator</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (desde que haja uma depend√™ncia correspondente na API do Gateway) - chame o endpoint / refresh, que basicamente rel√™ dados do config-map e atualizar√° as rotas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um ponto importante √© tamb√©m que n√£o deve haver, relativamente falando, uma inst√¢ncia de refer√™ncia de servi√ßo (por exemplo, identificado como </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desenvolver</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que ser√° coletado na ramifica√ß√£o principal do desenvolvimento do servi√ßo) e em uma API de gateway principal separada, sempre especificada nas configura√ß√µes em que ele acessar√° esse servi√ßo. Em ess√™ncia, estamos nos oferecendo um </font><font style="vertical-align: inherit;">ambiente de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prepara√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> independente </font><font style="vertical-align: inherit;">que sempre estar√° operacional no contexto do roteamento din√¢mico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um exemplo de um bloco de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mapa de configura√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para a API do Gateway que cont√©m configura√ß√µes para roteamento (aqui √© apenas um exemplo de como pode parecer, para uma opera√ß√£o adequada, √© necess√°ria uma liga√ß√£o correspondente na forma de c√≥digo no lado de back-end do servi√ßo de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gateway</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da </font><b><font style="vertical-align: inherit;">API)</font></b><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">{<font></font>
  "kind": "ConfigMap",<font></font>
  "apiVersion": "v1",<font></font>
  "metadata": {<font></font>
    ...<font></font>
  },  <font></font>
"data": {<font></font>
    ...        <font></font>
    "rules.meta.user": "develop",<font></font>
    "rules.meta.client": "develop",<font></font>
    "rules.meta.notification": "feature/PRJ-010",<font></font>
    ...    <font></font>
  }<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rules.meta</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© um mapa que cont√©m regras de roteamento para servi√ßos. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usu√°rio / cliente / notifica√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - o nome do servi√ßo em que est√° registrado no Eureka. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">develop / feature / PRJ-010</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - etiqueta de servi√ßo de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">application.yml do</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> servi√ßo correspondente, com base no qual o servi√ßo desejado ser√° selecionado entre todos os servi√ßos dispon√≠veis com o mesmo nome no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Service Discovery</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , se houver mais de uma inst√¢ncia desse servi√ßo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como tudo neste mundo, as ferramentas e solu√ß√µes em TI n√£o s√£o perfeitas. </font><font style="vertical-align: inherit;">N√£o pense que, se voc√™ alterar a arquitetura, todos os problemas terminar√£o de uma s√≥ vez. </font><font style="vertical-align: inherit;">Somente uma imers√£o detalhada nas tecnologias usadas e sua pr√≥pria experi√™ncia fornecer√£o uma imagem real do que est√° acontecendo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espero que este material ajude voc√™ a resolver seu problema. </font><font style="vertical-align: inherit;">Tarefas interessantes e venda sem bugs!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt489898/index.html">Outro artigo sobre wc</a></li>
<li><a href="../pt489900/index.html">Antipadr√µes do PostgreSQL: alterando dados ignorando um gatilho</a></li>
<li><a href="../pt489902/index.html">Como medir a efic√°cia de uma carteira de investimentos: 3 abordagens pr√°ticas</a></li>
<li><a href="../pt489904/index.html">Por que e como estamos testando a atualiza√ß√£o</a></li>
<li><a href="../pt489906/index.html">Provador virtual em OpenCV</a></li>
<li><a href="../pt489914/index.html">Clustering no Proxmox VE</a></li>
<li><a href="../pt489916/index.html">Protocolo de comunica√ß√£o front-end estruturado Protobuf ou JSON?</a></li>
<li><a href="../pt489918/index.html">Como implementamos o projeto do cart√£o virtual de combust√≠vel</a></li>
<li><a href="../pt489920/index.html">Sites, v√° para IPv6, dois</a></li>
<li><a href="../pt489924/index.html">Onde o Elasticsearch come√ßa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>