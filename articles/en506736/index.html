<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôã üßôüèΩ üîù How many methods should be in a class? ‚è© üêã üëï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Perhaps this is one of the most important issues faced by developers using classes. We have the principles of SOLID, we have our own vision of the bea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How many methods should be in a class?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/506736/"><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/ht/bc/ds/htbcds3dl1emxblkn29nn5cqr0w.png"></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perhaps this is one of the most important issues faced by developers using classes. We have the principles of SOLID, we have our own vision of the beautiful and a huge number of discrepancies. I do not hope to give an exhaustive answer ‚Äúhow many methods should be in your class‚Äù. But I will share my thoughts on why there should be fewer methods in classes, much less. Up to 1. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To a greater extent, my reasoning concerns services (stateless objects), which in my opinion prevail over any other types of objects in real projects. A class should not store in itself a hodgepodge of methods only because of their similar implementation!</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After getting to know the basics of OOP, beginners associate classes and objects with cats and dogs. That is, under the first impression, objects are perceived as projections of the real world or some models containing a set of necessary methods for solving the problem. And this is a great opinion about OOP, more precisely than it should be. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But after a couple of commercial projects, the view collapses. Enterprise is ruled by services and anemic models. I don‚Äôt know if it‚Äôs good or bad, but it‚Äôs reality. Therefore, in practice, thick classes are often obtained that have no analogies with the real world and are not amenable to unambiguous generalization. Often they are called services, often they form layers. And understanding of the object drops to the level - a group of methods with a similar purpose. Or methods that work with similar data. Or something else similar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Every time I start writing a service, I think for a long time about the name ... Meaningless AnotherEntityService again and again. </font><font style="vertical-align: inherit;">But what if there should not be any noun? </font><font style="vertical-align: inherit;">How does the name of the service reflect the hodgepodge of requests collected inside? </font><font style="vertical-align: inherit;">Who generally uses these methods at once? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The refactoring example from Uncle Bob doesn‚Äôt let me go for a long time [Clean Code, p. 177]:</font></font><br>
<br>
<pre><code class="plaintext hljs">class Sql {<font></font>
    constructor(private table: string, private columns: Column[]) {}<font></font>
<font></font>
    public create(): string;<font></font>
    public insert(fields: object[]): string;<font></font>
    public selectAll(): string;<font></font>
    public select(criteria: Criteria): string;<font></font>
<font></font>
    // ...<font></font>
}<font></font>
</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Sql class changes when a new type of command is added. </font><font style="vertical-align: inherit;">In addition, it will change when changing the details of the implementation of an existing type of command ... Two reasons for the change mean that the Sql class violates the principle of uniform responsibility.</font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here is the result of the conversion.</font></font><br>
<br>
<pre><code class="plaintext hljs">abstract class Sql {<font></font>
    constructor(private table: string, private columns: Column[]) {}<font></font>
<font></font>
    public abstract generate(): string;<font></font>
}<font></font>
<font></font>
class CreateSql extends Sql {<font></font>
    public generate(): string;<font></font>
}<font></font>
<font></font>
class SelectSql extends Sql {<font></font>
    public generate(): string;<font></font>
}<font></font>
<font></font>
// ...<font></font>
</code></pre><br>
<blockquote>      . ,    ,    .  ,       ,  .            ,       .<br>
<br>
   ,      Update,         !<br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Cheka has repeatedly mentioned that classes should be compact. But this example pleases with its specificity, and it is simply amazing! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I thought, because there are so many advantages to splitting, why in reality bloated classes prevail? Because we will break up classes to the level of functions and it will become more difficult to understand the big picture? (But do FP-Schnicks complex about this?) Or because encapsulation will spill out of our fat services-services? It seems to me that there is a dark side that keeps the secret of large classes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What does the class give in terms of program language constructs, if we discard the romance? The class has a bright side - public methods that automatically form the interface of the object. The interface forms an abstraction, which should simplify the program. This is romance.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But if you look pragmatically, then the class only collects the necessary dependencies through the constructor, stores private members that are not used anywhere else and provides clients with a set of sticking (public) functions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And this is the dark side - private fields, private methods and dependencies. This is what developers are most often guided by combining methods in the service. Sometimes it seems that if the class contains all the necessary members, then this is the best place for a new method! And the service turns into a custodian of dependencies and methods that need these dependencies.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since when should common dependencies unite something? </font><font style="vertical-align: inherit;">The similarity of the internal implementation is not the reason for creating the abstraction. </font><font style="vertical-align: inherit;">In other words, adding a new method to the service because it is ‚Äúvery similar to other methods‚Äù in its implementation, we violate encapsulation, SRP, OCP and ISP. </font><font style="vertical-align: inherit;">But I constantly come across this. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, in practice, service architecture does not form high-level abstractions, but merely represents an analogy of proceduralism. </font><font style="vertical-align: inherit;">Moreover, the worst analogy, since procedures do not have superfluous entities in the form of pseudo-generalizing service names and do not pull unused dependencies. </font><font style="vertical-align: inherit;">(Somewhere gloomy FPShniki). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's look at an example from the official Angular documentation.</font></font><br>
<br>
<pre><code class="javascript hljs">@Injectable({ <span class="hljs-attr">providedIn</span>: <span class="hljs-string">'root'</span> })
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HeroService</span> </span>{<font></font>
 private heroesUrl = <span class="hljs-string">'api/heroes'</span>;<font></font>
 private httpOptions = { <span class="hljs-attr">headers</span>: <span class="hljs-keyword">new</span> HttpHeaders({ <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> }) };<font></font>
 <font></font>
 <span class="hljs-keyword">constructor</span>(private http: HttpClient, private messageService: MessageService) {}<font></font>
 <font></font>
 getHero(id: number): Observable&lt;Hero&gt; {<font></font>
   <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.heroesUrl}</span>/<span class="hljs-subst">${id}</span>`</span>;
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.http.get&lt;Hero&gt;(url).pipe(<font></font>
     tap(<span class="hljs-function">(<span class="hljs-params">_</span>) =&gt;</span> <span class="hljs-keyword">this</span>.log(<span class="hljs-string">`fetched hero id=<span class="hljs-subst">${id}</span>`</span>)),<font></font>
     catchError(<span class="hljs-keyword">this</span>.handleError&lt;Hero&gt;(<span class="hljs-string">`getHero id=<span class="hljs-subst">${id}</span>`</span>)),<font></font>
   );<font></font>
 }<font></font>
 <font></font>
 addHero(hero: Hero): Observable&lt;Hero&gt; {<font></font>
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.http.post&lt;Hero&gt;(<span class="hljs-keyword">this</span>.heroesUrl, hero, <span class="hljs-keyword">this</span>.httpOptions).pipe(<font></font>
     tap(<span class="hljs-function">(<span class="hljs-params">newHero: Hero</span>) =&gt;</span> <span class="hljs-keyword">this</span>.log(<span class="hljs-string">`added hero w/ id=<span class="hljs-subst">${newHero.id}</span>`</span>)),<font></font>
     catchError(<span class="hljs-keyword">this</span>.handleError&lt;Hero&gt;(<span class="hljs-string">'addHero'</span>)),<font></font>
   );<font></font>
 }<font></font>
 <font></font>
 <span class="hljs-comment">// ...</span><font></font>
 <font></font>
 private handleError&lt;T&gt;(operation = <span class="hljs-string">'operation'</span>, result?: T) {
   <span class="hljs-keyword">return</span> (error: any): Observable&lt;T&gt; =&gt; {
     <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> send the error to remote logging infrastructure</span>
     <span class="hljs-built_in">console</span>.error(error); <span class="hljs-comment">// log to console instead</span>
     <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> better job of transforming error for user consumption</span>
     <span class="hljs-keyword">this</span>.log(<span class="hljs-string">`<span class="hljs-subst">${operation}</span> failed: <span class="hljs-subst">${error.message}</span>`</span>);
     <span class="hljs-keyword">return</span> <span class="hljs-keyword">of</span>(result <span class="hljs-keyword">as</span> T);<font></font>
   };<font></font>
 }<font></font>
}<font></font>
</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HeroService fully</font></font></b>
                        <div class="spoiler_text"><pre><code class="javascript hljs">@Injectable({ <span class="hljs-attr">providedIn</span>: <span class="hljs-string">'root'</span> })
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HeroService</span> </span>{<font></font>
 <font></font>
 private heroesUrl = <span class="hljs-string">'api/heroes'</span>;  <span class="hljs-comment">// URL to web api</span><font></font>
 <font></font>
 httpOptions = {<font></font>
   <span class="hljs-attr">headers</span>: <span class="hljs-keyword">new</span> HttpHeaders({ <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> })<font></font>
 };<font></font>
 <font></font>
 <span class="hljs-keyword">constructor</span>(<font></font>
   private http: HttpClient,<font></font>
   private messageService: MessageService) { }<font></font>
 <font></font>
 <span class="hljs-comment">/** GET heroes from the server */</span><font></font>
 getHeroes(): Observable&lt;Hero[]&gt; {<font></font>
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.http.get&lt;Hero[]&gt;(<span class="hljs-keyword">this</span>.heroesUrl)<font></font>
     .pipe(<font></font>
       tap(<span class="hljs-function"><span class="hljs-params">_</span> =&gt;</span> <span class="hljs-keyword">this</span>.log(<span class="hljs-string">'fetched heroes'</span>)),<font></font>
       catchError(<span class="hljs-keyword">this</span>.handleError&lt;Hero[]&gt;(<span class="hljs-string">'getHeroes'</span>, []))<font></font>
     );<font></font>
 }<font></font>
 <font></font>
 <span class="hljs-comment">/** GET hero by id. Will 404 if id not found */</span><font></font>
 getHero(id: number): Observable&lt;Hero&gt; {<font></font>
   <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.heroesUrl}</span>/<span class="hljs-subst">${id}</span>`</span>;
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.http.get&lt;Hero&gt;(url).pipe(<font></font>
     tap(<span class="hljs-function"><span class="hljs-params">_</span> =&gt;</span> <span class="hljs-keyword">this</span>.log(<span class="hljs-string">`fetched hero id=<span class="hljs-subst">${id}</span>`</span>)),<font></font>
     catchError(<span class="hljs-keyword">this</span>.handleError&lt;Hero&gt;(<span class="hljs-string">`getHero id=<span class="hljs-subst">${id}</span>`</span>))<font></font>
   );<font></font>
 }<font></font>
 <font></font>
 <span class="hljs-comment">/* GET heroes whose name contains search term */</span><font></font>
 searchHeroes(term: string): Observable&lt;Hero[]&gt; {<font></font>
   <span class="hljs-keyword">if</span> (!term.trim()) {
     <span class="hljs-comment">// if not search term, return empty hero array.</span>
     <span class="hljs-keyword">return</span> <span class="hljs-keyword">of</span>([]);<font></font>
   }<font></font>
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.http.get&lt;Hero[]&gt;(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.heroesUrl}</span>/?name=<span class="hljs-subst">${term}</span>`</span>).pipe(<font></font>
     tap(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.length ?
        <span class="hljs-keyword">this</span>.log(<span class="hljs-string">`found heroes matching "<span class="hljs-subst">${term}</span>"`</span>) :
        <span class="hljs-keyword">this</span>.log(<span class="hljs-string">`no heroes matching "<span class="hljs-subst">${term}</span>"`</span>)),<font></font>
     catchError(<span class="hljs-keyword">this</span>.handleError&lt;Hero[]&gt;(<span class="hljs-string">'searchHeroes'</span>, []))<font></font>
   );<font></font>
 }<font></font>
 <font></font>
 <span class="hljs-comment">//////// Save methods //////////</span><font></font>
 <font></font>
 <span class="hljs-comment">/** POST: add a new hero to the server */</span><font></font>
 addHero(hero: Hero): Observable&lt;Hero&gt; {<font></font>
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.http.post&lt;Hero&gt;(<span class="hljs-keyword">this</span>.heroesUrl, hero, <span class="hljs-keyword">this</span>.httpOptions).pipe(<font></font>
     tap(<span class="hljs-function">(<span class="hljs-params">newHero: Hero</span>) =&gt;</span> <span class="hljs-keyword">this</span>.log(<span class="hljs-string">`added hero w/ id=<span class="hljs-subst">${newHero.id}</span>`</span>)),<font></font>
     catchError(<span class="hljs-keyword">this</span>.handleError&lt;Hero&gt;(<span class="hljs-string">'addHero'</span>))<font></font>
   );<font></font>
 }<font></font>
 <font></font>
 <span class="hljs-comment">/** DELETE: delete the hero from the server */</span><font></font>
 deleteHero(hero: Hero | number): Observable&lt;Hero&gt; {<font></font>
   <span class="hljs-keyword">const</span> id = <span class="hljs-keyword">typeof</span> hero === <span class="hljs-string">'number'</span> ? hero : hero.id;
   <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.heroesUrl}</span>/<span class="hljs-subst">${id}</span>`</span>;<font></font>
 <font></font>
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.http.delete&lt;Hero&gt;(url, <span class="hljs-keyword">this</span>.httpOptions).pipe(<font></font>
     tap(<span class="hljs-function"><span class="hljs-params">_</span> =&gt;</span> <span class="hljs-keyword">this</span>.log(<span class="hljs-string">`deleted hero id=<span class="hljs-subst">${id}</span>`</span>)),<font></font>
     catchError(<span class="hljs-keyword">this</span>.handleError&lt;Hero&gt;(<span class="hljs-string">'deleteHero'</span>))<font></font>
   );<font></font>
 }<font></font>
 <font></font>
 <span class="hljs-comment">/** PUT: update the hero on the server */</span><font></font>
 updateHero(hero: Hero): Observable&lt;any&gt; {<font></font>
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.http.put(<span class="hljs-keyword">this</span>.heroesUrl, hero, <span class="hljs-keyword">this</span>.httpOptions).pipe(<font></font>
     tap(<span class="hljs-function"><span class="hljs-params">_</span> =&gt;</span> <span class="hljs-keyword">this</span>.log(<span class="hljs-string">`updated hero id=<span class="hljs-subst">${hero.id}</span>`</span>)),<font></font>
     catchError(<span class="hljs-keyword">this</span>.handleError&lt;any&gt;(<span class="hljs-string">'updateHero'</span>))<font></font>
   );<font></font>
 }<font></font>
 <font></font>
 <span class="hljs-comment">/**
  * Handle Http operation that failed.
  * Let the app continue.
  * <span class="hljs-doctag">@param <span class="hljs-variable">operation</span></span> - name of the operation that failed
  * <span class="hljs-doctag">@param <span class="hljs-variable">result</span></span> - optional value to return as the observable result
  */</span>
 private handleError&lt;T&gt;(operation = <span class="hljs-string">'operation'</span>, result?: T) {
   <span class="hljs-keyword">return</span> (error: any): Observable&lt;T&gt; =&gt; {<font></font>
 <font></font>
     <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> send the error to remote logging infrastructure</span>
     <span class="hljs-built_in">console</span>.error(error); <span class="hljs-comment">// log to console instead</span><font></font>
 <font></font>
     <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> better job of transforming error for user consumption</span>
     <span class="hljs-keyword">this</span>.log(<span class="hljs-string">`<span class="hljs-subst">${operation}</span> failed: <span class="hljs-subst">${error.message}</span>`</span>);<font></font>
 <font></font>
     <span class="hljs-comment">// Let the app keep running by returning an empty result.</span>
     <span class="hljs-keyword">return</span> <span class="hljs-keyword">of</span>(result <span class="hljs-keyword">as</span> T);<font></font>
   };<font></font>
 }<font></font>
 <font></font>
 <span class="hljs-comment">/** Log a HeroService message with the MessageService */</span><font></font>
 private log(message: string) {<font></font>
   <span class="hljs-keyword">this</span>.messageService.add(<span class="hljs-string">`HeroService: <span class="hljs-subst">${message}</span>`</span>);<font></font>
 }<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is a typical service. </font><font style="vertical-align: inherit;">(I would even say ‚Äúbest practices‚Äù). </font><font style="vertical-align: inherit;">And at first glance everything is fine with him. </font><font style="vertical-align: inherit;">HeroService works with Hero entities, nothing more. </font><font style="vertical-align: inherit;">A lot of superfluous! </font><font style="vertical-align: inherit;">No client uses the interface in a consistent way - only in parts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What to do when a new API method for Hero appears? </font><font style="vertical-align: inherit;">When do you need to stop folding everything into one and breaking up the class? </font><font style="vertical-align: inherit;">I am sure that everyone asked these questions. </font><font style="vertical-align: inherit;">But the very presence of this service in the project only confuses developers, pushing them to write code through a change, not an extension. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's see what makes the methods built into HeroService ‚Äúsimilar‚Äù and how it breaks down.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All methods use a common url - it is solved by putting BASE_HERO_API_URL into the constant.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Some methods use the same http-headers - it is decided by putting them in an interceptor. </font><font style="vertical-align: inherit;">Or you can select a special HttpClient that will wrap the get, post, put, delete methods with the necessary options.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">handleError - is solved by putting it into a separate class, which will perfectly serve as the person responsible for handling errors.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It turned out that all the unifying factors are optional details of the implementation, which could have been different if it were not for the will of random circumstances. </font><font style="vertical-align: inherit;">There were no external reasons for the merger. </font><font style="vertical-align: inherit;">We write web, and it is strange when one button first calls addHero, and then it uses the other HeroService functionality.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Show me the code!</font></font></b>
                        <div class="spoiler_text"><pre><code class="javascript hljs">@Injectable({ <span class="hljs-attr">providedIn</span>: <span class="hljs-string">'root'</span> })
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GetHeroesOperation</span> </span>{
 <span class="hljs-keyword">constructor</span>(<font></font>
   private http: HeroHttpClient,<font></font>
   private messageService: MessageService,<font></font>
   private errorHandler: ErrorHandler,<font></font>
 ) {}<font></font>
 <font></font>
 execute(): Observable&lt;Hero[]&gt; {<font></font>
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.http.get&lt;Hero[]&gt;().pipe(<font></font>
     tap(<span class="hljs-function">(<span class="hljs-params">_</span>) =&gt;</span> <span class="hljs-keyword">this</span>.messageService.add(<span class="hljs-string">'fetched heroes'</span>)),<font></font>
     catchError(<span class="hljs-keyword">this</span>.errorHandler.handleError&lt;Hero[]&gt;(<span class="hljs-string">'getHeroes'</span>, [])),<font></font>
   );<font></font>
 }<font></font>
}<font></font>
 <font></font>
@Injectable({ <span class="hljs-attr">providedIn</span>: <span class="hljs-string">'root'</span> })
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AddHeroOperation</span> </span>{
 <span class="hljs-keyword">constructor</span>(<font></font>
   private http: HeroHttpClient,<font></font>
   private messageService: MessageService,<font></font>
   private errorHandler: ErrorHandler,<font></font>
 ) {}<font></font>
 <font></font>
 execute(hero: Hero): Observable&lt;Hero&gt; {<font></font>
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.http.post&lt;Hero&gt;(<span class="hljs-string">''</span>, hero).pipe(<font></font>
     tap(<span class="hljs-function">(<span class="hljs-params">newHero: Hero</span>) =&gt;</span> <span class="hljs-keyword">this</span>.logAddedHero(newHero)),<font></font>
     catchError(<span class="hljs-keyword">this</span>.errorHandler.handleError&lt;Hero&gt;(<span class="hljs-string">'addHero'</span>)),<font></font>
   );<font></font>
 }<font></font>
 <font></font>
 private logAddedHero(newHero: Hero): <span class="hljs-keyword">void</span> {
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.messageService.add(<span class="hljs-string">`AddHeroOperation: added hero w/ id=<span class="hljs-subst">${newHero.id}</span>`</span>);<font></font>
 }<font></font>
}<font></font>
 <font></font>
@Injectable({ <span class="hljs-attr">providedIn</span>: <span class="hljs-string">'root'</span> })
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ErrorHandler</span> </span>{
 <span class="hljs-keyword">constructor</span>(private messageService: MessageService) {}<font></font>
 <font></font>
 handleError&lt;T&gt;(operation: string, result?: T) {<font></font>
   <span class="hljs-keyword">return</span> (error: any): Observable&lt;T&gt; =&gt; {
     <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> send the error to remote logging infrastructure</span>
     <span class="hljs-built_in">console</span>.error(error); <span class="hljs-comment">// log to console instead</span><font></font>
 <font></font>
     <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> better job of transforming error for user consumption</span>
     <span class="hljs-keyword">this</span>.messageService.add(<span class="hljs-string">`<span class="hljs-subst">${operation}</span> failed: <span class="hljs-subst">${error.message}</span>`</span>);<font></font>
 <font></font>
     <span class="hljs-comment">// Let the app keep running by returning an empty result.</span>
     <span class="hljs-keyword">return</span> <span class="hljs-keyword">of</span>(result <span class="hljs-keyword">as</span> T);<font></font>
   };<font></font>
 }<font></font>
}<font></font>
 <font></font>
@Injectable({ <span class="hljs-attr">providedIn</span>: <span class="hljs-string">'root'</span> })
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HeroHttpClient</span> </span>{<font></font>
 private httpOptions = { <span class="hljs-attr">headers</span>: <span class="hljs-keyword">new</span> HttpHeaders({ <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> }) };<font></font>
 <font></font>
 <span class="hljs-keyword">constructor</span>(@Inject(BASE_HERO_API_URL) private baseUrl: string, private http: HttpClient) {}<font></font>
 <font></font>
 get&lt;T&gt;(endpoint = <span class="hljs-string">''</span>): Observable&lt;T&gt; {
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.http.get&lt;T&gt;(<span class="hljs-keyword">this</span>.getUrl(endpoint));<font></font>
 }<font></font>
 <font></font>
 private getUrl(endpoint: string): string {<font></font>
   <span class="hljs-keyword">return</span> Location.joinWithSlash(<span class="hljs-keyword">this</span>.baseUrl, endpoint);<font></font>
 }<font></font>
 <font></font>
 post&lt;T&gt;(endpoint = <span class="hljs-string">''</span>, <span class="hljs-attr">data</span>: unknown): Observable&lt;T&gt; {
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.http.post&lt;T&gt;(<span class="hljs-keyword">this</span>.getUrl(endpoint), data, <span class="hljs-keyword">this</span>.httpOptions);<font></font>
 }<font></font>
 <font></font>
 put&lt;T&gt;(endpoint = <span class="hljs-string">''</span>, <span class="hljs-attr">data</span>: unknown): Observable&lt;T&gt; {
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.http.put&lt;T&gt;(<span class="hljs-keyword">this</span>.getUrl(endpoint), data, <span class="hljs-keyword">this</span>.httpOptions);<font></font>
 }<font></font>
 <font></font>
 <span class="hljs-keyword">delete</span>&lt;T&gt;(endpoint = <span class="hljs-string">''</span>): Observable&lt;T&gt; {
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.http.delete&lt;T&gt;(<span class="hljs-keyword">this</span>.getUrl(endpoint), <span class="hljs-keyword">this</span>.httpOptions);<font></font>
 }<font></font>
}<font></font>
 <font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I am not trying (and do not want) to make statements, such as: ‚ÄúA class cannot have more than the 1st method!‚Äù. Of course, maybe when an object has a state, other rules come into effect. Also, I am not opposed to including methods that should be used consistently in the class: isExecutable, validateParams, execute. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What I am saying is more about monster services. Since services most often do not constitute a sane abstraction. And it would be better if the emphasis shifted towards their decrease. For myself, I formulated the following principle: A </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">class should not contain a set of methods only because of their similar implementation.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Following this rule, you can detect lost system elements that are hidden in private methods. </font><font style="vertical-align: inherit;">This approach will help to comply with OCP and ISP literally. </font><font style="vertical-align: inherit;">When your features really expand the program, and do not add methods in 10 classes in 10 layers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I hope you enjoyed it. </font><font style="vertical-align: inherit;">Thank! </font><font style="vertical-align: inherit;">Till!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en506716/index.html">Multithreaded Linear List: Element Existence Problem, Productivity Improvement, and STL Relation</a></li>
<li><a href="../en506726/index.html">Experience in using Rutoken technology for registration and authorization of users in the system (part 2)</a></li>
<li><a href="../en506730/index.html">Snort or Suricata. Part 1: choose a free IDS / IPS to protect the corporate network</a></li>
<li><a href="../en506732/index.html">Organization-wide reuse of UI components</a></li>
<li><a href="../en506734/index.html">Transient calculations in electrical networks</a></li>
<li><a href="../en506740/index.html">How to use Microsoft SQL for reports in Power BI. On the example of Mindbox</a></li>
<li><a href="../en506742/index.html">Why the center of the pixel should be at (0.5; 0.5)</a></li>
<li><a href="../en506748/index.html">Who has quarantined sales growing?</a></li>
<li><a href="../en506758/index.html">Products organized a conference on the principle of open-source, and for 10 years each participant is an organizer</a></li>
<li><a href="../en506762/index.html">Security Week 25: Microsoft's record-breaking patch set</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>