<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèáüèª üßîüèø üêï Android em um controlador industrial üöÆ üë∑üèº üçØ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em qualquer trabalho de engenharia, o pensamento se move de maneira a aplicar no desenvolvimento as solu√ß√µes mais adequadas ao mesmo tempo em todos os...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Android em um controlador industrial</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498618/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em qualquer trabalho de engenharia, o pensamento se move de maneira a aplicar no desenvolvimento as solu√ß√µes mais adequadas ao mesmo tempo em todos os aspectos. E em um setor em que a automa√ß√£o √© necess√°ria, o controle t√°cito de alguns processos, a interven√ß√£o humana √© ainda indesej√°vel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa. se voc√™ precisa monitorar alguns objetos em oficinas industriais sem contato, sem coletar fios longos, coletar estat√≠sticas em um banco de dados para an√°lise, por que n√£o tentar por um longo tempo j√° familiar ... Android-smartphones.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ possui algumas habilidades de programa√ß√£o para o Android, ent√£o, por assim dizer, todo o hardware do controlador industrial no smartphone j√° possui: sensores, comunica√ß√µes m√≥veis e uma bateria para autonomia. Bem, a tela, √© claro, tamb√©m √© necess√°ria por um tempo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por√©m, se algu√©m de repente fizesse um dispositivo Android compacto e confi√°vel, com hardware exatamente como um smartphone, mas sem tela - seria o ideal. E sim - este n√£o √© apenas um dongle HDMI-WiFi para uma TV, com bateria, m√≥dulo GSM e c√¢mera.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na atribui√ß√£o - nenhum sensor pode ser usado, quente. Muito quente. Essa. voc√™ precisa controlar o n√£o contato - nada al√©m de uma c√¢mera serve. Existem c√≥digos QR suficientes para a c√¢mera controlar os objetos necess√°rios. Mas, ao mesmo tempo, o controlador deve estar localizado em um local fresco, com temperaturas normais. Tudo acaba sendo real. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A Internet m√≥vel agora est√° nas cidades, mesmo nas empresas - √© bastante suport√°vel, pelo menos a operadora pode ser atendida com um n√≠vel de sinal tolerante. E at√© o 4G j√° pode ser usado, embora, √© claro, o n√≠vel do sinal possa se equilibrar a ponto de se desligar - mas mais tarde. Portanto, enviar dados para o servidor (com ac√∫mulo preliminar no banco de dados local), pois a Internet est√° dispon√≠vel, n√£o √© um problema.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s o desenvolvimento preliminar do software e dos testes, verifica-se que as condi√ß√µes de temperatura do smartphone s√£o totalmente fornecidas, temperaturas de at√© 40 graus. As baterias de l√≠tio modernas nos smartphones s√£o totalmente declaradas at√© 45 ¬∞ C e, aos 50 anos - smartphones modernos que controlam a temperatura com um sensor integrado na bateria - come√ßam a "gritar" por superaquecimento e desligam programaticamente o carregamento se estiver conectado. Portanto, o resfriamento deve ser levado em considera√ß√£o. Portanto, a viabilidade j√° foi totalmente comprovada, o sistema √© simples na estrutura geral, todas as partes do sistema se encaixam perfeitamente na cabe√ßa - ou seja, "para a frente e com a m√∫sica", para codificar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No que diz respeito ao desenvolvimento do gabinete do controlador, inclu√≠mos um smartphone Android com um adaptador de energia, com uma entrada cuidadosa no cabo de alimenta√ß√£o. E um sistema de refrigera√ß√£o. O que, como se v√™ depois, √© muito necess√°rio, e n√£o apenas para resfriar o ferro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chegou a hora, e o sistema j√° est√° funcionando completamente, o servidor mostra aos usu√°rios as placas e gr√°ficos de dados, verifica os intervalos dos par√¢metros medidos e notifica os usu√°rios sobre os pr√≥ximos f ... k-ups e, gradualmente, ... as nuances de um sistema estruturalmente "simples" come√ßam a aparecer ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o, n√£o h√° problemas com a bateria, o smartphone est√° constantemente conectado ao carregador, o controlador interno da bateria √© √≥timo, sopra e faz seu trabalho cont√≠nuo. Mas, para o reconhecimento confi√°vel dos c√≥digos QR, o √¢ngulo da c√¢mera, a ilumina√ß√£o e as sombras que cobrem parcialmente o c√≥digo e o estado do c√≥digo, que gradualmente queima sob alta temperatura, s√£o importantes ao mesmo tempo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, depois de um m√™s de testes de "combate", subitamente parece que a qualidade do reconhecimento dos c√≥digos QR piorou gradualmente todo esse tempo, e agora n√£o √© de todo adequado: verifica-se que a poeira est√° constantemente presente no ar, o que n√£o √© vis√≠vel durante uma breve inspe√ß√£o da oficina, mas que se instala gradualmente no vidro que cobre a lente da c√¢mera. Uma camada de poeira se acumula lentamente e ... fica claro como isso acaba, no final.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â aqui que o sistema de resfriamento foi √∫til, n√£o apenas para resfriamento, mas agora tamb√©m para prote√ß√£o contra poeira, criando press√£o de ar ‚Äúexcessiva‚Äù por dentro, soprando ao redor da lente e impedindo a poeira de se depositar na lente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante todos esses eventos, √© claro, h√° uma depura√ß√£o cont√≠nua de software, algoritmos e hardware, aos quais os desenvolvedores n√£o t√™m acesso f√≠sico - apenas atrav√©s de controle remoto. Alguns lan√ßamentos por dia, como o algoritmo geral de opera√ß√£o do equipamento na oficina, descrito previamente, perfeitamente compreendido nos desenhos e desenhos, tamb√©m cont√©m, na realidade, um monte de pequenas nuances. E os algoritmos de verifica√ß√£o no c√≥digo se multiplicam continuamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para gerenciamento remoto e atualiza√ß√µes de software no Android, o TeamViewer Host √© usado (usado!). N√£o houve problemas com ele, provavelmente entre 4 e 5 meses, tudo estava maravilhosamente conectado, o acesso √† tela do smartphone era. Tudo funcionou atrav√©s da Internet 4G de um operador federal russo, em um modo livre. Obviamente, pensamos que mais cedo ou mais tarde seria necess√°rio adquirir uma licen√ßa comercial, porque compor todo o sistema de controle remoto sozinho √© inconveniente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo n√£o estava ruim at√© que os desenvolvedores do TeamViewer come√ßaram a atualizar algo no sistema deles e n√£o tivemos acesso. Bem, logicamente, pensamos que isso se devia a uma limita√ß√£o livre, embora fosse uma honra saber, e adquirimos uma licen√ßa (por um longo tempo e n√£o completamente surpresa com o seu custo). Mas isso n√£o ajudou - este foi o come√ßo dos problemas t√©cnicos do TeamViewer, que exigiram a reinstala√ß√£o do cliente, as configura√ß√µes e a confirma√ß√£o na tela do smartphone. Para o qual n√£o havia acesso f√≠sico nem virtual. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais tarde, o acesso ao sistema foi restaurado apenas ao chegar fisicamente ao smartphone - esqueci de mencionar que o smartphone era novo na loja, com firmware oficial. Sem acesso root a todas as fun√ß√µes do SO. E funcionou muito bem por um tempo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em resumo, sobre o TeamViewer (TV) - ap√≥s esses primeiros tormentos, o pagamento da conta comercial foi retornado (apenas por telefone, nenhuma maneira de obter suporte via Internet √© irreal). Ficou claro que precis√°vamos de alternativas √† TV. Mais tarde, quando a situa√ß√£o se repetiu, por algum motivo, entramos nesse rake pela segunda vez com a aquisi√ß√£o de uma conta comercial TeamViewer, mas ficou claro que n√£o somos atormentados sozinhos, mas um monte de usu√°rios com montanhas de dispositivos Android com uma licen√ßa comercial. E o trabalho com este software foi suspenso.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E ficou claro que, para qualquer equipamento industrial, o mais importante √© a capacidade de reiniciar. Incluindo um comando remoto externo. Para recuperar o acesso ao sistema, independentemente de falhas no software. E de acordo com isso, decidiu-se fazer um smartphone com root e desenvolver seu software de controle remoto adicional, atrav√©s de seu pr√≥prio servidor, √© claro, com a possibilidade de reiniciar o smartphone. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E esse software foi desenvolvido e seu uso foi confirmado mais de uma vez: al√©m do controle remoto via servidor, os comandos foram implementados via mensagens SMS.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante todo esse tempo, apenas um componente do sistema n√£o foi satisfat√≥rio e funcionou quase o tempo todo, e at√© surpreso, porque Mais de seis meses de opera√ß√£o cont√≠nua do sistema atrav√©s de 4G j√° passaram. O smartphone foi controlado, os dados flu√≠ram, a capacidade de reiniciar remotamente v√°rias vezes ajudou a superar falhas de seu pr√≥prio software principal que funciona com a c√¢mera e os c√≥digos QR. A Internet desapareceu muito raramente e literalmente em algumas dezenas de segundos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas nada √© "para sempre sob a lua" e uma vez que o sistema desapareceu. Absolutamente. Nem dados no servidor, nem dados do rastreamento geogr√°fico do Google, nem uma resposta por meio de seu pr√≥prio software de controle remoto. Bem, √© hora de redefinir o sistema atrav√©s de um comando em uma mensagem SMS. Mas a FIG. E n√£o ajudou. E o comando para ligar a conex√£o √† Internet n√£o ajudou.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao mesmo tempo, uma chamada recebida para o n√∫mero do cart√£o SIM inserido no smartphone passou completamente por si mesma, n√£o importa quantas vezes voc√™ a verifique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu j√° pensei que os kulhackers do mal entraram no sistema, removeram todo o meu software Android e, no final, "bateram a porta" - cortaram a Internet m√≥vel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por fim, a operadora de telecomunica√ß√µes respondeu que "pedimos desculpas pelo problema t√©cnico da c√©lula que voc√™ est√° usando". Mas a chamada funciona, mas o SMS n√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E ent√£o me lembrei de que, uma vez, havia previsto a inclus√£o for√ßada de WiFi no software, n√£o sei por que - essa conex√£o n√£o √© usada nas lojas da empresa. E o smartphone j√° foi conectado ao Wi-Fi na fase de desenvolvimento, √© claro. Resta tentar em outro smartphone ligar o ponto de acesso WiFi, nome√°-lo com o nome da minha rede dom√©stica, definir a senha correspondente √† rede e ... e BINGO - o peda√ßo de ironia entrou em contato! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nem um √∫nico SMS ap√≥s a falha do operador no Android, meu software n√£o os recebeu. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E apenas reinicializando o peda√ßo de ferro enquanto havia Internet WiFi, era poss√≠vel restaurar o cart√£o SIM da operadora e a Internet m√≥vel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E agora a capacidade de reinicializar com a ajuda de uma chamada de entrada regular est√° inclu√≠da no software de controle remoto, para que esse batente do operador n√£o interfira no trabalho.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conclus√£o: o sistema funciona por cerca de 10 meses, a bateria do smartphone est√° OK, a c√¢mera est√° OK. </font><font style="vertical-align: inherit;">Portanto, n√£o √© necess√°rio montar ou comprar um computador industrial caro, conectar perif√©ricos externos a ele - √© bem poss√≠vel fazer isso com um smartphone Android moderno. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas tenho certeza de que n√£o conseguir√° evitar "hemorr√≥idas" e todo tipo de nuances desagrad√°veis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E fiz essa conclus√£o para mim: as etapas para configurar um smartphone Android para trabalho remoto offline como parte de um controlador industrial</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Escolhendo um dispositivo para uso industrial - somente com a capacidade de obter Root (para a possibilidade de reinicializa√ß√£o)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Atualize tudo o que √© poss√≠vel automaticamente e desative as atualiza√ß√µes</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Obtenha o Root no dispositivo (!)</font></font></li>
<li>  ()  Google Play Market ‚Äî  (   ),       </li>
<li>      : ¬´    ¬ª</li>
<li>   :  ¬´ ¬ª</li>
<li>  SIM- ‚Äì  - ( SIM ‚Äî  !)</li>
<li>    SIM-:   </li>
<li>    RemoteControl ‚Äî       </li>
<li>      (AirDroid, Teamviewer Host)  </li>
<li>   -  ( ,  )</li>
<li>     -</li>
<li>   </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Instale o iniciador padr√£o (aplicativo host) (se poss√≠vel, configure no √∫ltimo momento)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Instalando o utilit√°rio RemoteReset - reiniciando o Android raiz por SMS e chamando (!) - verifique a reinicializa√ß√£o e o in√≠cio autom√°tico de todos os itens acima (e verifique a opera√ß√£o pela Internet)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ligue o WiFi e conecte-se √†s redes antecipadamente: especialmente ao ponto de acesso m√≥vel do smartphone da operadora; para acesso alternativo do smartphone √† Internet com a ativa√ß√£o local desse ponto de acesso)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Carregue a bateria</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Inicie o aplicativo host principal</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Desconecte o dispositivo at√© que ele seja ligado durante a instala√ß√£o</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS: os detalhes mais detalhados, √© claro, n√£o permitem o compartilhamento de obriga√ß√µes comerciais / legais.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt498604/index.html">Remova seus filhos de nossas telas azuis ou por que voc√™ n√£o pode comprar o Yandex.</a></li>
<li><a href="../pt498608/index.html">Making of NES gameinvitro "MULTIDEFENDER"</a></li>
<li><a href="../pt498610/index.html">Como reutilizar c√≥digo com pacotes symfony 5? Parte 3. Integra√ß√£o do pacote configur√°vel com o host: modelos, estilos, JS</a></li>
<li><a href="../pt498612/index.html">N√£o decida para o designer a tarefa do designer</a></li>
<li><a href="../pt498614/index.html">An√°lise de uma s√©rie de v√≠deos promocionais para o jogo Spin Voyage</a></li>
<li><a href="../pt498620/index.html">Tocando o mundo: biomec√¢nica de receptores de pele humana</a></li>
<li><a href="../pt498624/index.html">[Instru√ß√£o] Criando testes do Google (formul√°rios do Google)</a></li>
<li><a href="../pt498628/index.html">Como construir um acelerador de foguete para scripts PowerCLI¬†</a></li>
<li><a href="../pt498630/index.html">Simula√ß√£o f√≠sica de centenas de milhares de part√≠culas no Unity + DOTS</a></li>
<li><a href="../pt498632/index.html">Pept√≠deo para um belo mulato</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>