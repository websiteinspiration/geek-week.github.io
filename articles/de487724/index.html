<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍💼 👌🏾 ⚫️ BlazingPizza: Blazor App von Anfang bis Ende. Teil 2. Fügen Sie eine Komponente hinzu 👳🏿 🚴 ⏪</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo an alle! An alle, die etwas mehr über Blazor erfahren möchten. Heute werden wir weiterhin unsere Website für eine Pizzeria erstellen, nämlich ei...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>BlazingPizza: Blazor App von Anfang bis Ende. Teil 2. Fügen Sie eine Komponente hinzu</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487724/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo an alle! </font><font style="vertical-align: inherit;">An alle, die etwas mehr über Blazor erfahren möchten. </font><font style="vertical-align: inherit;">Heute werden wir weiterhin unsere Website für eine Pizzeria erstellen, nämlich einen Web-API-Controller erstellen und versuchen, die daraus resultierenden Daten auf der Blazor-Komponente anzuzeigen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da es in unserer Anwendung um Pizza geht, wäre es logisch, sofort eine Klasse hinzuzufügen, die unser Hauptprodukt darstellt. </font><b><font style="vertical-align: inherit;">Nennen Sie</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
es </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und fügen Sie es dem Projekt </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.DomainModels hinzu</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Meiner Meinung nach ist das Hinzufügen einer neuen Klasse in Rider sehr cool. Ein nicht blockierendes Dialogfeld wird angezeigt. Wir geben den Klassennamen ein und können dann auswählen, was wir erstellen möchten:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q-/pl/95/q-pl95jcw5o2sdhgzzduaxzotke.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach erscheint ein Dialogfeld mit der Aufforderung, eine Datei zu git hinzuzufügen. Wir werden dies bejahen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klasseninhalt:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BasePizza</span><font></font>
{<font></font>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> Id { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">decimal</span> BasePrice { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Description { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> ImageUrl { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist eine Vorlage für eine Art Pizza. Später kann sie nach Belieben konfiguriert werden, die Größe ändern, Beläge hinzufügen und vieles mehr. Der Name der Felder scheint mir für sich zu sprechen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.DomainPizza-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Projekt </font><font style="vertical-align: inherit;">werden Klassen vorhanden sein, die die Geschäftsdomäne unserer Anwendung darstellen. Das heißt, sie sollten und werden nichts darüber wissen, wie unsere Daten gespeichert sind oder wie sie angezeigt werden. Nur Informationen zum Geschäftsobjekt, dh Pizza. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes brauchen wir etwas, um diese Daten irgendwie zum Client zu bringen. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wechseln Sie dazu zum</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Projekt </font><b><font style="vertical-align: inherit;">BlazingPizza.Server</font></b><font style="vertical-align: inherit;"> und </font><font style="vertical-align: inherit;">fügen Sie den </font><b><font style="vertical-align: inherit;">PizzasController</font></b><font style="vertical-align: inherit;"> zum Ordner </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controller</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hinzu </font><font style="vertical-align: inherit;">:</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PizzasController</span> : <span class="hljs-title">Controller</span><font></font>
{<font></font>
    <span class="hljs-comment">// GET</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IActionResult <span class="hljs-title">Index</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        <span class="hljs-keyword">return</span> View();<font></font>
    }<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir brauchen eine Methode, die uns eine Liste aller Grundlagen für Pizza gibt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusätzlich zum Hinzufügen einer Methode müssen Sie einige einfache Schritte ausführen:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Markieren wir den Controller mit dem Attribut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ApiController]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">das einige Vorteile bietet, insbesondere die automatische Rückgabe von 400-Code, wenn das Modell die Validierung nicht bestanden hat, ohne dass es sich um einen normalen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVC-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Controller handelt, der View bietet.</font></font></li>
<li>  <b>[Route(«pizzas»)]</b>.     Attribute Routing,        ,      <b>Conventional Routing</b>,    .   “pizzas”   ?        <b>http{s}://hostName/pizzas/{}</b><br>
      .</li>
<li>    <b>Controller</b>  <b>ControllerBase</b>,      MVC .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ok, zum Beispiel haben wir eine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 5000 / pizzas-Anfrage gestellt, in der Hoffnung, eine Liste aller Pizzen zu erhalten, und nichts ist passiert. Auch hier ist der Deal in den Vereinbarungen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn es sich um eine </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anfrage handelte, muss entweder eine Methode ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktion</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in Bezug auf </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asp.Net</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) mit dem Attribut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[HttpGet]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> markiert sein </font><font style="vertical-align: inherit;">, oder, noch offensichtlicher, nur eine Methode namens </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und das </font><b><font style="vertical-align: inherit;">wars</font></b><font style="vertical-align: inherit;"> ! Alles andere .Netz und Reflexion werden für uns tun. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Benennen Sie daher die einzige Index-Methode um, die abgerufen werden soll. </font><b><font style="vertical-align: inherit;">Ändern Sie den</font></b><font style="vertical-align: inherit;"> Typ des Rückgabewerts in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEnumerable &lt;BasePizza&gt;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vergessen Sie nicht, die erforderliche Verwendung hinzuzufügen. </font><font style="vertical-align: inherit;">Fügen Sie vorübergehend einen Stub ein, dessen Methode nicht implementiert ist, um den Code irgendwie zu kompilieren und sicherzustellen, dass keine Fehler vorliegen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infolgedessen sieht PizzasController.cs folgendermaßen aus:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> Microsoft.AspNetCore.Mvc;
<span class="hljs-keyword">using</span> BlazingPizza.DomainModels;<font></font>
<font></font>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">BlazingPizza.Server.Controllers</span><font></font>
{<font></font>
    [<span class="hljs-meta">ApiController</span>]<font></font>
    [<span class="hljs-meta">Route(<span class="hljs-meta-string">"pizzas"</span>)</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PizzasController</span> : <span class="hljs-title">ControllerBase</span><font></font>
    {<font></font>
        <span class="hljs-comment">// GET</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> IEnumerable&lt;BasePizza&gt;  <span class="hljs-title">Get</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException();<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Starten Sie jetzt die Debugging-Anwendung, eine Schaltfläche mit einem grünen Fehler. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nl/p6/pp/nlp6ppjxbnbnhjiwxb1_qbtgwsw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
und stellen Sie sicher, dass die Routen korrekt konfiguriert sind. </font><font style="vertical-align: inherit;">Der Port, an dem Sie Anforderungen stellen müssen, wird auf der Registerkarte " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konsole"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> angezeigt </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yp/i0/hp/ypi0hpgkoc9cv68k8zvi9zsthnu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserem Fall ist es 5000. Wenn Sie eine Anforderung über den </font><font style="vertical-align: inherit;">Pfad " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 5000 / pizzas" stellen, rufen wir die Aktion "Get" auf und fangen eine NotImplementedException ab. </font><font style="vertical-align: inherit;">Das heißt, während unser Controller nichts Nützliches tut, akzeptiert er einfach Anforderungen und schlägt mit einem Fehler fehl.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir geben Daten vom Controller zurück</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist Zeit, unseren Code dazu zu bringen, etwas Nützliches zu tun, wie beispielsweise die Rückgabe von Pizzen. </font><font style="vertical-align: inherit;">Bisher haben wir keine Datenschicht implementiert, daher geben wir nur ein paar Pizzen von unserer </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktion zurück</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geben</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sie dazu ein Array zurück, das aus zwei </font><b><font style="vertical-align: inherit;">BasePizza-</font></b><font style="vertical-align: inherit;"> Objekten besteht </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">sieht wie im folgenden Beispiel aus:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-comment">// GET</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> IEnumerable&lt;BasePizza&gt;  <span class="hljs-title">Get</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>[]<font></font>
    {<font></font>
        <span class="hljs-keyword">new</span> BasePizza()<font></font>
        {<font></font>
            BasePrice = <span class="hljs-number">500</span>,<font></font>
            Description = <span class="hljs-string">"     "</span>,<font></font>
            Id = <span class="hljs-number">0</span>,<font></font>
            ImageUrl = <span class="hljs-string">"img/pizzas/pepperoni.jpg"</span><font></font>
        },<font></font>
        <span class="hljs-keyword">new</span> BasePizza()<font></font>
        {<font></font>
            BasePrice = <span class="hljs-number">400</span>,<font></font>
            Description = <span class="hljs-string">"   "</span>,<font></font>
            Id = <span class="hljs-number">1</span>,<font></font>
            ImageUrl = <span class="hljs-string">"img/pizzas/meaty.jpg"</span><font></font>
        },<font></font>
    };<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ergebnis der Anfrage im Browser sieht folgendermaßen aus:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-c/ep/f0/-cepf0dkn90kagmz-gul-dib42u.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Richten Sie die Homepage ein</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der sichtbare Teil der Anwendung befindet sich in den .razor-Komponenten im </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.Client-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Projekt </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wir sind an </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Index.razor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im Ordner </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pages</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> interessiert. </font><font style="vertical-align: inherit;">Öffnen Sie es und löschen Sie alle Inhalte, die wir vom Standardprojekt geerbt haben. </font><font style="vertical-align: inherit;">Und lassen Sie uns hinzufügen, was wir wirklich brauchen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Hinzufügen:</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"/"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Diese Anweisung wird zum Konfigurieren des Client-Routings verwendet und besagt, dass dieses Steuerelement standardmäßig geladen wird </font><font style="vertical-align: inherit;">, dh </font><font style="vertical-align: inherit;">wenn wir nur zur Adresse der </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost-</font></font></a><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anwendung gehen </font><b><font style="vertical-align: inherit;">: 5000 /</font></b><font style="vertical-align: inherit;"> without any / Index, / Pizzas oder etwas anderes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">injizieren</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HttpClient HttpClient</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verwenden der Richtlinie</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">injizieren</font></font></a> </b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fügen Sie unserer Seite einen Dienst wie HttpClient hinzu und rufen Sie auch das Objekt </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HttpClient auf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ein Objekt vom Typ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HttpClient ist</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bereits vom Blazor-Framework für uns konfiguriert, sodass wir nur die Anforderungen stellen können, die wir benötigen. </font><font style="vertical-align: inherit;">Diese Art der Injektion wird als </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eigenschaftsinjektion bezeichnet</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Eine bekanntere Implementierung durch den Konstruktor wird nicht unterstützt. Wie die Entwickler sagen, ist es unwahrscheinlich, dass sie jemals angezeigt wird. Wird sie hier jedoch benötigt? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Fügen Sie eine Direktive hinzu</font></font><br>
<br>
<b><pre><code class="cs hljs"> @code{<font></font>
<font></font>
 }<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wird speziell benötigt, um Client-C # -Code zu hosten, der auch JavaScript ersetzt. </font><font style="vertical-align: inherit;">Innerhalb dieses Blocks platzieren wir eine Sammlung von Objekten vom Typ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel</font></font></b><br>
<br>
<b><pre><code class="cs hljs">IEnumerable&lt;BasePizzaViewModel&gt; PizzaViewModels;</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Wie Sie bereits verstanden haben, existiert </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nicht. Es ist an der Zeit, es zu erstellen. Dieses Modell ist vollständig analog zum </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizza-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Domänenmodell, mit der </font><font style="vertical-align: inherit;">Ausnahme, dass es den Ausdruckskörper </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetFormattedBasePrice enthält,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> der den Preis der </font><b><font style="vertical-align: inherit;">Basispizza</font></b><font style="vertical-align: inherit;"> in dem von uns benötigten Format zurückgibt. </font><font style="vertical-align: inherit;">Das Modell wird zum Stammverzeichnis der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.ViewModels-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Datei </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel.cs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> des Projekts </font><b><font style="vertical-align: inherit;">hinzugefügt</font></b><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BasePizzaViewModel</span><font></font>
{<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> Id { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">decimal</span> BasePrice { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Description { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> ImageUrl { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-title">GetFormattedBasePrice</span>(<span class="hljs-params"></span>)</span> =&gt; BasePrice.ToString(<span class="hljs-string">"0.00"</span>);<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Zurück zu unserem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Index.razor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und Block</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fügen Sie einen Code hinzu, um alle verfügbaren Pizzen zu erhalten. </font><font style="vertical-align: inherit;">Wir werden diesen Code im platzieren </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">async </font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">override</span> Task <span class="hljs-title">OnInitializedAsync</span>(<span class="hljs-params"></span>)</span> {<font></font>
	<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Methode wird aufgerufen, nachdem die Komponente initialisiert wurde und zum Zeitpunkt des Aufrufs alle ihre Parameter bereits von der übergeordneten Komponente initialisiert wurden. Darin können Sie einige asynchrone Vorgänge ausführen, nach denen eine Statusaktualisierung erforderlich ist. Ich werde später genauer darauf eingehen. Die Methode wird beim Erstellen der Komponente nur einmal aufgerufen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fügen Sie zum Schluss die Pizzas hinzu:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">var</span> queryResult = <span class="hljs-keyword">await</span> HttpClient.GetJsonAsync&lt;IEnumerable&lt;BasePizza&gt;&gt;(<span class="hljs-string">"pizzas"</span>);
</code></pre></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pizzas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ein relativer Pfad, der der Basis hinzugefügt wird und von </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blazor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bereits für uns </font><b><font style="vertical-align: inherit;">festgelegt wurde</font></b><font style="vertical-align: inherit;"> . Wie aus der Methodensignatur hervorgeht, werden die Daten von der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anforderung </font><font style="vertical-align: inherit;">angefordert </font><b><font style="vertical-align: inherit;">,</font></b><font style="vertical-align: inherit;"> und der Client versucht dann, sie in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEnumerable &lt;BasePizza&gt;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu serialisieren </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6. Da wir Daten des falschen Typs erhalten haben, die in der Komponente angezeigt werden sollen, müssen wir Objekte vom Typ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel abrufen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linq</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und seine Select-Methode verwenden sie, um Objekte aus der eingehenden Sammlung in Objekte des Typs zu konvertieren </font><font style="vertical-align: inherit;">, den wir verwenden möchten </font><font style="vertical-align: inherit;">. Fügen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> am Ende die </font><b><font style="vertical-align: inherit;">OnInitializedAsync-</font></b><font style="vertical-align: inherit;"> Methode hinzu </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<b><pre><code class="cs hljs">PizzaViewModels = queryResult.Select(i =&gt; <span class="hljs-keyword">new</span> BasePizzaViewModel()<font></font>
{<font></font>
    BasePrice = i.BasePrice,<font></font>
    Description = i.Description,<font></font>
    Id = i.Id,<font></font>
    ImageUrl = i.ImageUrl,<font></font>
    Name = i.Name<font></font>
});<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Später werde ich zeigen, wie man ohne das Schreiben dieses Vorlagencodes auskommt, aber jetzt lassen wir es so, wie es ist. </font><font style="vertical-align: inherit;">Es scheint, dass wir alles haben, was wir brauchen, und wir können fortfahren, die empfangenen Daten anzuzeigen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7. Fügen Sie über der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Direktive </font><font style="vertical-align: inherit;">den </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Code hinzu, in dem sich die Pizzen selbst befinden:</font></font><br>
<br>
<b><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pizza-cards"</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen können, ist die Liste ul mit dem Namen der sprechenden Klasse "Pizza-Karten" bisher leer. Wir werden dieses Versehen beheben:</font></font><br>
<br>
<b><pre><code class="cs hljs">@foreach (<span class="hljs-keyword">var</span> pizza <span class="hljs-keyword">in</span> PizzaViewModels)<font></font>
{<font></font>
    &lt;li style=<span class="hljs-string">"background-image: url('@pizza.ImageUrl')"</span>&gt;<font></font>
        &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"pizza-info"</span>&gt;<font></font>
            &lt;span <span class="hljs-keyword">class</span>=<span class="hljs-string">"title"</span>&gt;@pizza.Name&lt;/span&gt;<font></font>
                @pizza.Description<font></font>
            &lt;span <span class="hljs-keyword">class</span>=<span class="hljs-string">"price"</span>&gt;@pizza.GetFormattedBasePrice()&lt;/span&gt;                    <font></font>
        &lt;/div&gt;<font></font>
    &lt;/li&gt;<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der ganze Spaß hier ist in der Schleife. </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">für jedes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(var {item} in {items})</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dies ist ein typisches </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Razor-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Markup, mit dem wir die Leistung von </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C #</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf derselben Seite wie regulärer </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Code verwenden können. Die Hauptsache ist, das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"@"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -Symbol vor die Schlüsselwörter und Variablen der Sprache zu setzen </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Innerhalb der Schleife greifen wir einfach auf die Eigenschaften des </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pizzaobjekts zu</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Ende zeigen wir den formatierten Grundpreis der Pizza mit der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetFormattedBasePrice-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode an </font><font style="vertical-align: inherit;">. Dies ist übrigens der Unterschied zwischen dem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizza-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Domänenmodell </font><font style="vertical-align: inherit;">und seinem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ViewModel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Darstellungen, da diese Methode die einfachste Logik zur Anzeige des Preises im erforderlichen Format enthält, die wir auf Serviceebene nicht benötigen, wo wir den Preis irgendwie manipulieren, ihn aber nirgendwo anzeigen. </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir zeigen die empfangenen Daten im Browser an</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben alle notwendigen Daten zur Anzeige. Es ist Zeit, unsere Anwendung zu starten und sicherzustellen, dass alles funktioniert. Wir klicken auf die Schaltfläche </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Debuggen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rider</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> startet die </font><font style="vertical-align: inherit;">Schaltfläche </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ausführen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nur die Anwendung ohne </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Debug-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Funktion </font><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und ooh-ho, auch nichts funktioniert :) Öffnen Sie die Konsole ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F12</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) und sehen Sie, dass alles rot ist, etwas ist offensichtlich schief gelaufen. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blazor ist</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> beim Debuggen nicht so hoffnungslos und der gesamte </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aufrufstapel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kann in der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konsole </font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">angezeigt</font></b><font style="vertical-align: inherit;"> werden </font><font style="vertical-align: inherit;">, und meiner Meinung nach ist dies sogar noch besser als im selben </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Winkel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sie müssen nicht anhand indirekter Anzeichen erraten, wo der Fehler aufgetreten ist. Schauen Sie sich einfach den </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aufrufstapel an</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font><b><font style="vertical-align: inherit;">Beim</font></b></font><br>
<br>
<img src="https://habrastorage.org/webt/g-/4f/m5/g-4fm5pnokogbwv_c7vy3ru-5zk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Rendern der Seite ist eine </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NullReferenceException-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nachricht </font><b><font style="vertical-align: inherit;">aufgetreten</font></b><font style="vertical-align: inherit;"> . Wie könnte dies passieren, weil wir die </font><font style="vertical-align: inherit;">einzige Sammlung </font><font style="vertical-align: inherit;">initialisiert haben, die </font><font style="vertical-align: inherit;">wir </font><font style="vertical-align: inherit;">in der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode verwenden </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fügen Sie zum besseren Verständnis die Zeitausgabe an den richtigen Stellen ein, um den Zeitrahmen des Geschehens anzuzeigen:</font></font><br>
<br>
<b><ol>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from markup block: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>);</code></pre></li>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from cycle: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>);</code></pre></li>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from code block, before await: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>);</code></pre></li>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from code block, after await: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>); </code></pre></li>
</ol></b><br>
<img src="https://habrastorage.org/webt/oi/va/ch/oivachjfzw1mfopljcqmxwhurvy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im folgenden Screenshot in der Konsole, was zum Zeitpunkt des Renderns der Seite passiert ist. Es ist ersichtlich, dass die Seite bereits vor Abschluss der asynchronen Methoden gerendert wird. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim ersten Durchgang wurde </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PizzaViewModels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> noch nicht initialisiert und wir haben eine </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NullReferenceException abgefangen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nachdem die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Task</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode in den </font><b><font style="vertical-align: inherit;">RanToCompletion-</font></b><font style="vertical-align: inherit;"> Status </font><b><font style="vertical-align: inherit;">zurückversetzt</font></b><font style="vertical-align: inherit;"> hatte, wurde das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Steuerelement </font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">erwartungsgemäß</font></b><font style="vertical-align: inherit;"> neu entwickelt. Was bemerkenswert ist, während des zweiten Durchgangs sind wir in einen Zyklus geraten, wie aus den Nachrichten in der Konsole ersichtlich ist. Zu diesem Zeitpunkt wird die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benutzeroberfläche jedoch</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nicht mehr aktualisiert und es werden keine sichtbaren Änderungen angezeigt.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ki/_r/yx/ki_ryxdxd-8xizlytgtgtb5lhpk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tatsächlich ist das Problem sehr einfach zu lösen. Sie müssen lediglich eine </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nullprüfung</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> asynchron ausführen, bevor Sie die Schleife ausführen </font><font style="vertical-align: inherit;">. Dann tritt zum ersten Mal keine Ausnahme auf, und während des zweiten Durchlaufs werden die benötigten Daten angezeigt.</font></font><br>
<b><pre><code class="cs hljs">@if (PizzaViewModels != <span class="hljs-literal">null</span>)<font></font>
{<font></font>
    @foreach (<span class="hljs-keyword">var</span> pizza <span class="hljs-keyword">in</span> PizzaViewModels)<font></font>
    {<font></font>
        ……………………….. <span class="hljs-comment">//    </span><font></font>
    }<font></font>
}</code></pre><br>
</b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es scheint jetzt ein bisschen besser zu sein, es gibt keine Fehlermeldungen mehr in der Konsole und Sie können die Informationen sehen, die vom Server zu uns gekommen sind: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ed/sj/zt/edsjztoc2aqa_wibm2mpdwvm2hy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist viel besser, aber es gibt nicht genügend Stile und Ressourcen, insbesondere Bilder. Ersetzen Sie den Inhalt des Ordners wwwroot durch den Inhalt des Ordners "~ / Articles / Part2" /BlazingPizza.Client/wwwroot "Repository (Link am Ende des Artikels) und führen Sie das Projekt erneut aus, viel besser. </font><font style="vertical-align: inherit;">Obwohl immer noch alles andere als ideal:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mk/ar/f-/mkarf-kymgsseuioay24uwx0wui.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komponentenlebensereignisse</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da wir bereits eines der Lebensereignisse der OnInitializedAsync-Komponente getroffen haben, wäre es logisch, die anderen zu erwähnen:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initialisierungsmethoden</font></font><br>
</th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oninitialisiert</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wird aufgerufen, wenn die Komponente bereits initialisiert ist und ihre Parameter bereits von der übergeordneten Komponente festgelegt wurden. </font><font style="vertical-align: inherit;">Während der Lebensdauer einer Komponente wird sie nach ihrer Initialisierung einmal aufgerufen.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asynchrone Version der ersten Methode Nach der Ausführung wird die Komponente erneut gerendert. </font><font style="vertical-align: inherit;">Daher müssen Sie beim Schreiben von Code berücksichtigen, dass einige Objekte möglicherweise null sind.</font></font><br>
</td>
</tr>
<tr>
<th colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ausführbare Methode vor dem Festlegen von Parameterwerten</font></font><br>
</th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetParametersAsync</font></font><br>
</td>
<td> ,      .    <b>ParameterView</b>      .<br>
<br>
              <b>[Parameter]</b>  <b>[CascadingParameter]</b>    <b>ParameterView</b>.      ,    .        ,               )<br>
</td>
</tr>
<tr>
<th colspan="2">    <br>
</th>
</tr>
<tr>
<td>OnParametersSet<br>
</td>
<td>           .      ,      <br>
<br>
 —             .<br>
 —    ,                    .<br>
</td>
</tr>
<tr>
<td>OnParametersSetAsync</td>
<td>  OnParametersSet</td>
</tr>
<tr>
<th colspan="2">    </th>
</tr>
<tr>
<td>OnAfterRender</td>
<td>      .        .     JavaScript     DOM      .    bool  firstRender   true     .<br>
</td>
</tr>
<tr>
<td>OnAfterRenderAsync<br>
</td>
<td>   ,     Task   ,        -          .<br>
</td>
</tr>
<tr>
<th colspan="2">  <br>
</th>
</tr>
<tr>
<td>ShouldRender<br>
</td>
<td>          UI,     -  .      .             .<br>
</td>
</tr>
<tr>
<td>StateHasChanged<br>
</td>
<td>      ,    Blazor        .<br>
</td>
</tr>
<tr>
<td>Dispose<br>
</td>
<td>   ,       UI.  <b>StateHasChanged</b>  <b>Dispose</b>  .   Dispose     <b>IDisposable</b>,       <b>@implements IDisposable</b><br>
</td>
</tr>
</tbody></table></div><br>
<h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Teil haben wir gelernt, wie Daten vom Controller empfangen und dem Benutzer angezeigt werden. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im nächsten Teil werden wir das Layout aufräumen und eine Datenzugriffsebene hinzufügen, um echte Daten auf der Hauptseite anzuzeigen. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zum Repository dieser Artikelserie. </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zur Originalquelle.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de487702/index.html">Eine Auswahl von Artikeln zum maschinellen Lernen: Fallstudien, Leitfäden und Forschungsergebnisse für Januar 2020</a></li>
<li><a href="../de487704/index.html">Wie wir auf der SSRS 2014 dynamische Berichte erstellt haben</a></li>
<li><a href="../de487706/index.html">Service Discovery in verteilten Systemen anhand des Consul-Beispiels. Alexander Sigachev</a></li>
<li><a href="../de487716/index.html">Perfekt SAST. Parser</a></li>
<li><a href="../de487720/index.html">Zum Wettbewerbskorutinismus (am Beispiel der reaktiven Programmierung)</a></li>
<li><a href="../de487728/index.html">@ Pythonetc-Zusammenstellung, Januar 2020</a></li>
<li><a href="../de487730/index.html">Verarbeitung natürlicher Sprache. Ergebnisse 2019 und Trends für 2020</a></li>
<li><a href="../de487734/index.html">Beschleunigung des Entity Framework-Kerns</a></li>
<li><a href="../de487738/index.html">Schemaanimation in SCADA</a></li>
<li><a href="../de487740/index.html">Zusammenbau eines tragbaren Magnetometers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>