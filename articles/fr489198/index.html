<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💈 🚋 👨🏿‍🔧 Comment ne pas se tirer une balle dans le pied avec Liquibase 🛌 ✝️ 🚉</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jamais été, et là encore!
 

Sur le prochain projet, nous avons décidé d'utiliser Liquibase dès le début pour éviter des problèmes à l'avenir. Il s'es...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment ne pas se tirer une balle dans le pied avec Liquibase</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/epam_systems/blog/489198/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jamais été, et là encore!</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sur le prochain projet, nous avons décidé d'utiliser Liquibase dès le début pour éviter des problèmes à l'avenir. </font><font style="vertical-align: inherit;">Il s'est avéré que tous les jeunes membres de l'équipe ne savent pas comment l'utiliser correctement. </font><font style="vertical-align: inherit;">J'ai tenu un atelier interne, que j'ai ensuite décidé de transformer en article.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'article comprend des conseils utiles et des descriptions des trois pièges les plus évidents dans lesquels vous pouvez tomber lorsque vous travaillez avec des outils de migration de bases de données relationnelles, en particulier Liquibase. </font><font style="vertical-align: inherit;">Conçu pour les développeurs Java de niveau junior et intermédiaire, pour les développeurs plus expérimentés, il peut être intéressant de structurer et de répéter ce qui est probablement déjà connu.</font></font></p><br>
<p><img src="https://habrastorage.org/webt/sk/c7/tl/skc7tlfms0xp65pdjizh3tsywpi.png"></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liquibase et Flyway sont les principales technologies concurrentes pour résoudre les problèmes de contrôle de version des structures relationnelles dans le monde Java. </font><font style="vertical-align: inherit;">Le premier est entièrement gratuit, en pratique, il est le plus souvent choisi pour une utilisation, et donc Liquibase est choisi comme le héros de la publication. </font><font style="vertical-align: inherit;">Cependant, certaines des pratiques décrites peuvent être universelles, selon l'architecture de votre application.</font></font></p><br>
<p>   –           .          ,            .    ,   ,        . ,        . </p><br>
<p>             ,       :</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> Liquibase      Spring Boot .  1</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> Liquibase      Spring Boot .  2</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Liquibase  Maven</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">    </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Spring MVC/Security, REST, Hibernate, Liquibase    </a></li>
</ul><br>
<p> ,        :</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> Liquibase   . 10     </a></li>
</ul><br>
<h2 id="sovety"></h2><br>
<p>     ,    ,       .</p><br>
<h3 id="1--pered-rabotoy-sleduet-oznakomitsya-s-razdelom-luchshih-praktik-na-saytehttpswwwliquibaseorgbestpracticeshtml-liquibase">1.          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> Liquibase</h3><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>  ,    ,        .  ,              .              ,    ,         .  ,    Liquibase          rollback      .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://habr.com/ru/post/178665/</a>   ,    rollback . </p><br>
<h3 id="2-esli-nachali-ispolzovat-sredstva-migracii--ne-dopuskayte-manualnyh-ispravleniy-v-strukture-bazy">2.      –       </h3><br>
<p> : «  Persil —  Persil».        Liquibase —        ,       .   —      ,    —  .      DBA Architect « »,     ,    ,           SQL Developer. </p><br>
<h3 id="3-esli-chendzhset-uzhe-byl-zapushen-v-repozitoriy-izbegayte-redaktirovaniya">3.       ,  </h3><br>
<p>    pull   ,    , —      ,      .    -     —     .        - —   Liquibase.      -.     ,           .     SQL  XML  , ,  ,    .    ,          . </p><br>
<h3 id="4--imey-proverennye-bekapy-baz-dannyh-esli-eto-vozmozhno">4.     ,   </h3><br>
<p>, ,  .       ,     .  Liquibase    ,        ,          ,      .  ,        . </p><br>
<h3 id="5-ispolzuy-proverennye-bekapy-baz-dannyh-v-razrabotke-esli-eto-vozmozhno">5.       ,   </h3><br>
<p>      privacy,     ,        —        ,      ,    100%    . </p><br>
<h3 id="6-obschaysya-s-drugimi-razrabotchikami-v-komande">6.      </h3><br>
<p>        ,   .      , ,          ,       .  -    —    .        ,    .          code review. </p><br>
<h3 id="7-dumay-chto-delaesh">7. ,  !</h3><br>
<p> ,  ,    .      ,      ,         .         . </p><br>
<h2 id="lovushki"></h2><br>
<p>    ,    ,     ,  , , -?</p><br>
<h3 id="situaciya-1-dva-razrabotchika-pytayutsya-odnovremenno-dobavlyat-novye-chendzhsety"> 1.       </h3><br>
<p><img src="https://habrastorage.org/webt/wk/c4/zr/wkc4zrjh3j2whf1hb8tohjqbkbm.png"><br>
       4,     .      ,   pull request,    .     :</p><br>
<h4 id="kak-reshat"> </h4><br>
<ol>
<li>-    ,       , ,     . </li>
<li>-            5.      Cherry Pick   . </li>
<li>       .<br>
    Liquibase        4,      .          4   .            . </li>
</ol><br>
<p> , Liquibase,   ,     .      validCheckSum,     1.7      -       ,     .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://www.liquibase.org/documentation/changeset.html</a>  :</p><br>
<blockquote>Add a checksum that is considered valid for this changeSet, regardless of what is stored in the database. Used primarily when you need to change a changeSet and don't want errors thrown on databases on which it has already run (not a recommended procedure)</blockquote><p>-,    .          </p><br>
<h3 id="situaciya-2-migraciya-kotoraya-zavisit-ot-dannyh"> 2. ,    </h3><br>
<p><img src="https://habrastorage.org/webt/sn/t3/ty/snt3tygw_imodbrzi-ah66jtkui.png"></p><br>
<p>,           .   ,           pull request  .      ,    ,   .      .</p><br>
<p>    ,      .     ,     -       . ,        ,        . ,    ,        Foreign Key,     .      ,   100%       . </p><br>
<h4 id="kak-reshat-1"> </h4><br>
<ul>
<li>  ,             .              ,  -      ,   .  , ,   ,            . </li>
<li>   —   .   ,   ,        ,  .  ,   -       . </li>
<li>    —      environment          ,  ,    .<br>
<img src="https://habrastorage.org/webt/gw/_c/mv/gw_cmvusmz4xdru2fofsxboecak.png"></li>
</ul><br>
<p> ,           ,   ,      . , ,      ,    ,     -. </p><br>
<h3 id="situaciya-3-liquibase-nachinaet-primenyatsya-uzhe-posle-vyhoda-v-prodakshn"> 3. Liquibase       </h3><br>
<p>,       Liquibase,           .</p><br>
<p>,    ,              ,         ,     . </p><br>
<h4 id="kak-reshat-2"> </h4><br>
<p>    :</p><br>
<ul>
<li>    —   ,         . </li>
<li> —  ,  Liquibase ,     Liquibase Context,   .   Liquibase Context   : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://www.liquibase.org/documentation/contexts.html</a>.     ,     , ,  . </li>
<li>     .         .       - environment’       -.           Liquibase ,             «   »       .  ,          2,    environments    .<br>
<img src="https://habrastorage.org/webt/pk/m0/mk/pkm0mkzcgp20h-ejd3vvvan0fog.png"></li>
</ul><br>
<h3 id="situaciya-4-migracii-stanovyatsya-ogromnymi-i-ne-uspevayut-vypolnyatsya"> 4.       </h3><br>
<p>   ,  , Liquibase    ,       .         :</p><br>
<ul>
<li>      .</li>
<li>     , ,      .<br>
            .  ,           ,        . </li>
</ul><br>
<h4 id="kak-reshat-3"> </h4><br>
<p>      ,   ,  Liquibase      .   ,  Liquibase     jar ,       ,   . </p><br>
<p>         CI/CD        \  .      Liquibase <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://www.liquibase.org/documentation/command_line.html</a>.           ,      .</p><br>
<h2 id="vyvod"></h2><br>
<p>            ,       .  ,     ,       .           ,        .    , ,  ,   –      .</p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr489188/index.html">Se connecter dans un environnement microservice .Net en pratique</a></li>
<li><a href="../fr489190/index.html">Etude RedHat: l'open source déplace les logiciels propriétaires du segment entreprise</a></li>
<li><a href="../fr489192/index.html">Smart Engines est entré dans le top 3 du classement FWCI parmi les organisations de base de FizTech</a></li>
<li><a href="../fr489194/index.html">Comment OpenShift modifie la structure organisationnelle d'une organisation informatique. L'évolution des modèles organisationnels lors du passage au PaaS</a></li>
<li><a href="../fr489196/index.html">Magic Smoke: microcontrôleurs vs régulateurs linéaires</a></li>
<li><a href="../fr489200/index.html">Ce que les startups recherchent Y Combinator en 2020</a></li>
<li><a href="../fr489204/index.html">Un aperçu de la fiabilité des services Facebook</a></li>
<li><a href="../fr489210/index.html">Test de performance du code Linux avec des exemples</a></li>
<li><a href="../fr489212/index.html">1C-Bitrix empêche la désinscription à la newsletter par l'obligation de soumettre leurs données personnelles</a></li>
<li><a href="../fr489214/index.html">Approche moderne pour tester la localisation sur iOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>