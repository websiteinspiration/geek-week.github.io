<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚫️ 👫 💇🏻 Webdienste in Oracle 👨🏽‍🏫 🤴🏻 ✴️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Internetdiensteweit verbreitet für die Integration zwischen Komponenten eines Systems oder zwischen verschiedenen Systemen. Die Popularität von Webdie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Webdienste in Oracle</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/custis/blog/502030/"><img src="https://habrastorage.org/webt/bn/fa/9y/bnfa9ydnf9mlh7nubs0t86xfdm4.png"><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internetdienste</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">weit verbreitet für die Integration zwischen Komponenten eines Systems oder zwischen verschiedenen Systemen. Die Popularität von Webdiensten als Integrationsmöglichkeit beruht auf ihrer Vielseitigkeit sowie der einfachen Implementierung und dem Debugging. Vielseitigkeit ist mit der Datenübertragung über das Internet und das HTTP-Protokoll verbunden. Webdienste machen es relativ einfach, Integrationen zwischen Komponenten zu erstellen, die in verschiedenen Sprachen geschrieben sind und auf verschiedenen Betriebssystemen und Plattformen ausgeführt werden. Die einfache Implementierung von Webdiensten wird durch integrierte Tools und Komponenten in vielen IDEs erreicht, mit denen Sie sowohl den Webdienst (Anbieterseite) als auch den erforderlichen Code zum Aufrufen des Dienstes auf der Clientseite schnell entwickeln können. Debugging-Dienste werden durch die Verwendung von lesbaren Datenaustauschformaten - XML ​​und JSON - vereinfacht. Außerdem,Es gibt viele Dienstprogramme zum Debuggen und Testen von Diensten, einschließlich Laden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Artikel werden verschiedene Möglichkeiten zum Erstellen von Webdiensten direkt aus Oracle DBMS betrachtet, dh ohne Verwendung von Tools von Drittanbietern.</font></font><br>
<a name="habracut"></a><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inhalt</font></font></b>
                        <div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Native Oracle XML DB Web Services</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> Oracle XML DB HTTP server</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   HTTP</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   -</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> Access List (ACL)</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> -    </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Oracle REST Data Service</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> 1:   POST-</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">    WS</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  HTTP-</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CGI-</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> 2:     ORDS</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">     ORDS</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Java Servlet</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Database Access Descriptor (PL/SQL Servlet)</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a></div>
                    </div><br>
<a name="Introduction"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hintergrund</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gegeben: Informationsgeschäftssystem eines großen Vertriebsnetzes (ca. tausend Einzelhandelsgeschäfte), bestehend aus vielen Komponenten und Subsystemen. </font><font style="vertical-align: inherit;">In jedem Geschäft befindet sich ein Hauptserver - eine Oracle-Datenbank mit der Hauptgeschäftslogik. </font><font style="vertical-align: inherit;">Geldknoten werden von einer separaten Software aus ihrer lokalen Datenbank verwaltet. </font><font style="vertical-align: inherit;">Diese Software sammelt regelmäßig Daten vom Hauptserver (über WS SOAP) und gibt die Ergebnisse des Verkaufs zurück (Dateiaustausch).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Fortschritt blieb nicht stehen und neue Geräte erschienen in den Läden. Daten von diesem Gerät sollten regelmäßig an den Hauptserver des Geschäfts gesendet werden (Zeitraum - alle paar Minuten). Die Integration muss unbedingt über den Webdienst erfolgen. Die Nachricht muss ein bestimmtes Format haben. Eine Authentifizierung ist nicht erforderlich. Wir haben uns die Datenaustauschverträge angesehen und festgestellt, dass die verwendete Technologie von Webdiensten keine Integration von Gebäuden in solche Geräte ermöglicht. Und die Suche nach einer Lösung begann ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infolgedessen wurden mehrere Optionen für die Implementierung des erforderlichen Webdienstes in Betracht gezogen, bis eine separate Komponente geschrieben wurde, die ein Fenster für die Oracle-Datenbank für die Oracle-Datenbank öffnen würde: Zum einen würde ein Webdienst bereitgestellt, zum anderen würde über JDBC mit der Datenbank interagiert. </font><font style="vertical-align: inherit;">Die Schwierigkeit besteht darin, dass die neue Komponente zum einen in tausend Filialen installiert werden müsste und zum anderen ein weiterer Link aufgetaucht wäre, der begleitet werden müsste. </font><font style="vertical-align: inherit;">Daher war die Priorität weiterhin die Option, einen Webdienst mit integrierten Oracle-Tools zu implementieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Ergebnis der Suche haben wir vier Möglichkeiten gefunden, die wir in diesem Artikel berücksichtigen werden:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Native Oracle XML DB-Webdienste</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle REST Data Service</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Servlet</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datenbankzugriffsdeskriptor (PL / SQL-Servlet)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die ersten beiden Optionen werden genauer betrachtet. </font><font style="vertical-align: inherit;">Ursprünglich wurden in unserem System native Oracle XML DB-Webdienste verwendet, dh sie wurden sozusagen vererbt. </font><font style="vertical-align: inherit;">ORDS wurde ein Ersatz für diese veraltete Technologie (trotz der Tatsache, dass ich immer noch hart arbeiten und ORDS in tausend Geschäften installieren musste). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zwei weitere Methoden - Java Servlet und PL / SQL Servlet - haben wir zusammen mit ORDS bei der Suche nach einer Alternative zu Native Oracle WS in Betracht gezogen, diese jedoch im Projekt nicht verwendet. </font><font style="vertical-align: inherit;">Daher werden wir diese Ansätze nicht im Detail betrachten und uns auf eine kurze Referenz beschränken. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Artikel enthält einige praktische Beispiele für die Implementierung von Webdiensten mit Anweisungen zum Erstellen eines funktionierenden Dienstes.</font></font><br>
<br>
<a name="NativeOracle"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Native Oracle XML DB-Webdienste</font></font></h2><br>
<a name="NativeOracleFeatures"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fähigkeiten</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ermöglicht das Organisieren des Zugriffs auf die Oracle-Datenbank über HTTP mithilfe von WS SOAP (Version 1.1):</font></font><br>
<br>
<ul>
<li> SQL-  XQuery-  SOAP.</li>
<li>     (   ).</li>
</ul><br>
<b></b><br>
<br>
<ul>
<li>  -     :      ,   HTTP-.</li>
<li> -    (WSDL),          ,  -.</li>
<li>     -.  ,    —    ,      —        .</li>
<li>   XML-.   ,  ,        XML,            - —   Oracle  .   ,      WS-    Oracle    —    ,    - . </li>
</ul><br>
<b></b><br>
<br>
<ul>
<li>  WSDL   ,      ,    - .        —       WSDL,      WSDL ,    .</li>
<li>       ( 50 ).          ,   —  ,     . ,     - —   ,  ,   .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist zu beachten, dass für alle Anforderungen an den Webdienst eine Authentifizierung erforderlich ist (aus der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dokumentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Basisauthentifizierung: Oracle XML DB unterstützt die Standardauthentifizierung, bei der ein Client den Benutzernamen und das Kennwort im Klartext im Autorisierungsheader sendet). </font><font style="vertical-align: inherit;">In Oracle können Sie den anonymen Zugriff auf Serverressourcen über HTTP konfigurieren - mithilfe des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle XML DB Protocol Server-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Setups </font><font style="vertical-align: inherit;">. Tatsächlich funktioniert dies jedoch nur für GET-Anforderungen, und für POST-Anforderungen ist eine Authentifizierung erforderlich. </font><font style="vertical-align: inherit;">Da Native Oracle WS nur über POST-Anforderungen funktioniert, kann der anonyme Zugriff für diese Technologie nicht konfiguriert werden.</font></font><br>
<br>
<a name="NativeOracleSetup"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anpassung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um Native Oracle WS verwenden zu können, benötigen Sie: </font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie den integrierten HTTP-Server in Oracle.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie den Zugriff in der Oracle-Datenbank (öffnen Sie den HTTP-Port).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie ein Servlet.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie die ACL (Zugriffsliste).</font></font></li>
</ol><br>
<a name="NativeOracleSetup-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie den Oracle XML DB HTTP-Server</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der HTTP-Server sollte bereits standardmäßig funktionieren. In einigen Fällen ist jedoch möglicherweise eine zusätzliche Listener-Konfiguration erforderlich, mit der DESCRIPTION_LIST der folgende Block hinzugefügt wird:</font></font><br>
<br>
<pre><code class="sql hljs">(DESCRIPTION=<font></font>
  (ADDRESS=(PROTOCOL=tcp)(HOST=localhost)(PORT=8080))(Presentation=HTTP)(Session=RAW)<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach müssen Sie den Listener neu starten.</font></font><br>
<br>
<a name="NativeOracleSetup-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie den HTTP-Zugriff</font></font></h4><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überprüfen des aktuellen Ports auf HTTP.</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> dbms_xdb.gethttpport() <span class="hljs-keyword">AS</span> http_port <span class="hljs-keyword">FROM</span> dual;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Wert "0" bedeutet, dass der HTTP-Zugriff deaktiviert ist.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port-Setup.</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--    web-services</span>
    dbms_xdb.setHttpPort(<span class="hljs-number">8080</span>);
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre></li>
</ol><br>
<a name="NativeOracleSetup-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen eines Servlets für einen Webdienst</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit der Webdienst funktioniert, ist in der Datenbankkonfiguration eine Servlet-Registrierung erforderlich.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skript zum Erstellen eines Servlets</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-comment">--   SYS</span>
<span class="hljs-keyword">DECLARE</span>
    l_servlet_name      <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">32</span>)  := <span class="hljs-string">'orawsv'</span>;
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--   orawsv   Native Web Services</span><font></font>
    DBMS_XDB.deleteServletMapping(l_servlet_name);<font></font>
    DBMS_XDB.deleteServlet(l_servlet_name);<font></font>
 <font></font>
    DBMS_XDB.addServlet( NAME     =&gt; l_servlet_name<font></font>
                       , LANGUAGE =&gt; 'C'<font></font>
                       , DISPNAME =&gt; 'Oracle Query Web Service'<font></font>
                       , DESCRIPT =&gt; 'Servlet for issuing queries as a Web Service'<font></font>
                       , SCHEMA   =&gt; 'XDB');<font></font>
 <font></font>
    DBMS_XDB.addServletSecRole( SERVNAME =&gt; l_servlet_name<font></font>
                              , ROLENAME =&gt; 'XDB_WEBSERVICES'<font></font>
                              , ROLELINK =&gt; 'XDB_WEBSERVICES');<font></font>
 <font></font>
    DBMS_XDB.addServletMapping( PATTERN =&gt; '/orawsv<span class="hljs-comment">/*'
                              , NAME    =&gt; l_servlet_name);
    COMMIT;
END;
/</span></code></pre></div>
                    </div><br>
<a name="NativeOracleSetup-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie die Zugriffsliste</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um über HTTP auf Oracle zuzugreifen, müssen Sie der DBMS-Konfiguration Regeln hinzufügen. </font><font style="vertical-align: inherit;">Dies erfolgt mithilfe der integrierten DBMS-Dienstprogramme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die ACL zu konfigurieren, benötigen Sie:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skript zur Bearbeitung der Datenbankkonfiguration (unten);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datenbankschema, für das die Konfiguration durchgeführt wird.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das heißt, das Datenbankschema, für das die ACL konfiguriert wird, muss bereits erstellt sein. </font><font style="vertical-align: inherit;">In den folgenden Beispielen finden Sie Verweise auf diesen Abschnitt an den Stellen, an denen Sie neue Datenbankschemata erstellen müssen. Für diese müssen Sie die ACL konfigurieren.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im SYS-Schema führen wir das ACL-Konfigurationsskript aus:</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-comment">--   SYS</span>
<span class="hljs-keyword">DECLARE</span>
    l_ws_user       <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">32</span>)  := <span class="hljs-string">'WS_SOAP_TEST'</span>; <span class="hljs-comment">--    ,        WS</span><font></font>
    l_acl           VARCHAR2(250) := 'acl_allow_all.xml';<font></font>
    l_tmp           VARCHAR2(250);<font></font>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">IMMEDIATE</span> <span class="hljs-string">'GRANT XDB_WEBSERVICES TO "'</span>||l_ws_user||<span class="hljs-string">'"'</span>;
    <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">IMMEDIATE</span> <span class="hljs-string">'GRANT XDB_WEBSERVICES_OVER_HTTP TO "'</span>||l_ws_user||<span class="hljs-string">'"'</span>;
    <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">IMMEDIATE</span> <span class="hljs-string">'GRANT XDB_WEBSERVICES_WITH_PUBLIC TO "'</span>||l_ws_user||<span class="hljs-string">'"'</span>;<font></font>
 <font></font>
    <span class="hljs-comment">--       PL/SQL </span>
    <span class="hljs-keyword">BEGIN</span>
        dbms_network_acl_admin.drop_acl(acl =&gt; <span class="hljs-string">'/sys/acls/'</span>||l_acl);<font></font>
    EXCEPTION<font></font>
        WHEN dbms_network_acl_admin.acl_not_found THEN<font></font>
            NULL;<font></font>
    <span class="hljs-keyword">END</span>;<font></font>
 <font></font>
    <span class="hljs-comment">--  ACL</span><font></font>
    dbms_network_acl_admin.create_acl( acl         =&gt; l_acl<font></font>
                                     , description =&gt; 'Allow all connections'<font></font>
                                     , is_grant    =&gt; TRUE<font></font>
                                     , start_date  =&gt; SYSTIMESTAMP<font></font>
                                     , end_date    =&gt; NULL<font></font>
                                     , principal   =&gt; 'SYS'<font></font>
                                     , privilege   =&gt; 'connect');<font></font>
 <font></font>
    dbms_network_acl_admin.assign_acl( acl        =&gt; l_acl<font></font>
                                     , host       =&gt; '*'<font></font>
                                     , lower_port =&gt; NULL<font></font>
                                     , upper_port =&gt; NULL);<font></font>
 <font></font>
    <span class="hljs-comment">--    (resolve) </span><font></font>
    dbms_network_acl_admin.add_privilege( acl        =&gt; l_acl<font></font>
                                        , principal  =&gt; l_ws_user<font></font>
                                        , is_grant   =&gt; TRUE<font></font>
                                        , privilege  =&gt; 'resolve'<font></font>
                                        , POSITION   =&gt; NULL<font></font>
                                        , start_date =&gt; SYSTIMESTAMP<font></font>
                                        , end_date   =&gt; NULL);<font></font>
 <font></font>
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es sollte sofort beachtet werden, dass eine ACL-Konfiguration erforderlich ist, wenn nicht nur Native Oracle WS, sondern auch alle anderen in diesem Artikel beschriebenen Methoden zum Erstellen von Webdiensten verwendet werden.</font></font><br>
<br>
<a name="NativeOracleExample"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webdienstbeispiel mit einer Stapelprozedur</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir brauchen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Datenbankschema, in dem sich die Objekte zur Verarbeitung von Webdienstanforderungen befinden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabelle für die Protokollierung.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paket mit Prozedur / Funktion.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jedes Tool, mit dem Sie Webanfragen senden können. </font><font style="vertical-align: inherit;">In diesem Fall wurde die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SOAP-UI-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anwendung verwendet </font><font style="vertical-align: inherit;">, Sie können jedoch bis zur Befehlszeile ein anderes Tool auswählen.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eigenschaften: </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prozedurparameter müssen entweder einfache oder Objekttypen haben. </font><font style="vertical-align: inherit;">Andernfalls wird die Prozedur nicht als Webdienstmethode wahrgenommen und nicht in die Liste der Dienstmethoden aufgenommen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um komplexe Strukturen von Eingabe- oder Ausgabedaten zu implementieren, müssen Sie Objekttypen verwenden (Stapeltypen können nicht verwendet werden).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir erstellen die notwendigen Datenbankobjekte:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schema </font></font><code>WS_TEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> WS_SOAP_TEST <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> ws_soap_test <span class="hljs-keyword">QUOTA</span> <span class="hljs-number">200</span>M <span class="hljs-keyword">ON</span> <span class="hljs-keyword">USERS</span>;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SESSION</span>, <span class="hljs-keyword">RESOURCE</span> <span class="hljs-keyword">TO</span> ws_soap_test;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fügen Sie der ACL sofort ein neues Schema hinzu. </font><font style="vertical-align: inherit;">Das Skript im vorherigen Abschnitt.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie im neuen Schema eine Tabelle für die Protokollierung </font></font><code>T_WS_REQ_LOG</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> T_WS_REQ_LOG<font></font>
(<font></font>
  id_log      <span class="hljs-built_in">NUMBER</span> <span class="hljs-keyword">GENERATED</span> <span class="hljs-keyword">ALWAYS</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>,<font></font>
  message     <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  proc        <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">128</span>),<font></font>
  dtm_request <span class="hljs-built_in">TIMESTAMP</span>(<span class="hljs-number">6</span>) <span class="hljs-keyword">DEFAULT</span> SYSTIMESTAMP<font></font>
);<font></font>
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> T_WS_REQ_LOG <span class="hljs-keyword">IS</span> <span class="hljs-string">' HTTP-'</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.id_log <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.message <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.proc <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.dtm_request <span class="hljs-keyword">IS</span> <span class="hljs-string">'/ '</span>;</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paket mit einem einfachen Verfahren:</font></font><br>
<br>
<pre><code class="sql hljs">
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> PK_NATIVE_WS_TEST <span class="hljs-keyword">IS</span><font></font>
 <font></font>
<span class="hljs-keyword">PROCEDURE</span> proc_simple<font></font>
    ( a_id      <span class="hljs-built_in">INTEGER</span>
    , a_data    <span class="hljs-built_in">VARCHAR2</span>
    , o_result  <span class="hljs-keyword">OUT</span> <span class="hljs-built_in">VARCHAR2</span><font></font>
    );<font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_NATIVE_WS_TEST;<font></font>
/<font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> <span class="hljs-keyword">BODY</span> PK_NATIVE_WS_TEST <span class="hljs-keyword">IS</span><font></font>
 <font></font>
<span class="hljs-keyword">PROCEDURE</span> proc_simple<font></font>
    ( a_id      <span class="hljs-built_in">INTEGER</span>
    , a_data    <span class="hljs-built_in">VARCHAR2</span>
    , o_result  <span class="hljs-keyword">OUT</span> <span class="hljs-built_in">VARCHAR2</span><font></font>
    )<font></font>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_ws_req_log (message, proc)
    <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'ID='</span>||a_id||<span class="hljs-string">'; DATA='</span>||a_data, <span class="hljs-string">'proc_simple'</span>)
    <span class="hljs-keyword">RETURNING</span> id_log <span class="hljs-keyword">INTO</span> o_result;
<span class="hljs-keyword">END</span> proc_simple;<font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_NATIVE_WS_TEST;<font></font>
/</code></pre></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der einfachste Webdienst wird erstellt und ist sofort einsatzbereit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um auf den Dienst zugreifen zu können, müssen Sie die URL im folgenden Format verwenden:</font></font><br>
<br>
<pre><code class="sql hljs">http://[server]:[port]/[servlet_name]/[DB_SCHEMA]/[WS_OBJ]?wsdl</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wobei: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Server]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Domänenname oder IP-Adresse des Oracle-Datenbankservers </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Port]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Port für den Zugriff über HTTP im Abschnitt "Konfigurieren des Zugriffs über HTTP" </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Servlet-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Name </font><b><font style="vertical-align: inherit;">]</font></b><font style="vertical-align: inherit;"> - Name des </font><b><font style="vertical-align: inherit;">Servlets</font></b><font style="vertical-align: inherit;"> im Abschnitt "Erstellen eines Servlets für das Web" service ” </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[DB_SCHEMA]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Name des Datenbankschemas (in Großbuchstaben) </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[WS_OBJ]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Name des Dienstes (in Großbuchstaben), der in unserem Fall dem Namen des Datenbankobjekts entspricht - der Name des Pakets </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beachten Sie, dass die URL wichtig ist! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Linkbeispiel:</font></font><br>
<br>
<pre><code class="sql hljs">http://my.server:8080/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST?wsdl
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir im Browser auf diesen Link klicken, werden wir automatisch basierend auf unserem WSDL-Paket erstellt: </font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wsdl</font></font></b>
                        <div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">definitions</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TEST"</span>
    <span class="hljs-attr">targetNamespace</span>=<span class="hljs-string">"http://xmlns.oracle.com/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>
    <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://schemas.xmlsoap.org/wsdl/"</span>
    <span class="hljs-attr">xmlns:tns</span>=<span class="hljs-string">"http://xmlns.oracle.com/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>
    <span class="hljs-attr">xmlns:xsd</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema"</span>
    <span class="hljs-attr">xmlns:soap</span>=<span class="hljs-string">"http://schemas.xmlsoap.org/wsdl/soap/"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">types</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">xsd:schema</span> <span class="hljs-attr">targetNamespace</span>=<span class="hljs-string">"http://xmlns.oracle.com/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>
     <span class="hljs-attr">elementFormDefault</span>=<span class="hljs-string">"qualified"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEInput"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">xsd:complexType</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">xsd:sequence</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"A_DATA-VARCHAR2-IN"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xsd:string"</span>/&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"A_ID-NUMBER-IN"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xsd:integer"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:sequence</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:complexType</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:element</span>&gt;</span><font></font>
 <font></font>
      <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEOutput"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">xsd:complexType</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">xsd:sequence</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"O_RESULT"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xsd:string"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:sequence</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:complexType</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:element</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:schema</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">types</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">message</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEInputMessage"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">part</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">"tns:PROC_SIMPLEInput"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">message</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">message</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEOutputMessage"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">part</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">"tns:PROC_SIMPLEOutput"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">message</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">portType</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTPortType"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">operation</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLE"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">message</span>=<span class="hljs-string">"tns:PROC_SIMPLEInputMessage"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">output</span> <span class="hljs-attr">message</span>=<span class="hljs-string">"tns:PROC_SIMPLEOutputMessage"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">operation</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">portType</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">binding</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTBinding"</span>
           <span class="hljs-attr">type</span>=<span class="hljs-string">"tns:PK_NATIVE_WS_TESTPortType"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">soap:binding</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"document"</span> <span class="hljs-attr">transport</span>=<span class="hljs-string">"http://schemas.xmlsoap.org/soap/http"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">operation</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLE"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">soap:operation</span>
 <span class="hljs-attr">soapAction</span>=<span class="hljs-string">"PROC_SIMPLE"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">soap:body</span> <span class="hljs-attr">parts</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">use</span>=<span class="hljs-string">"literal"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">output</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">soap:body</span> <span class="hljs-attr">parts</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">use</span>=<span class="hljs-string">"literal"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">output</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">operation</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">binding</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTService"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">documentation</span>&gt;</span>Oracle Web Service<span class="hljs-tag">&lt;/<span class="hljs-name">documentation</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">port</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTPort"</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">"tns:PK_NATIVE_WS_TESTBinding"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">soap:address</span> 
             <span class="hljs-attr">location</span>=<span class="hljs-string">"http://******:8080/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>/&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">port</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span><font></font>
 <font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">definitions</span>&gt;</span></code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie zum Testen des Dienstes ein neues SOAP-Projekt in der SOAP-Benutzeroberfläche. </font><font style="vertical-align: inherit;">Geben Sie als URL die Adresse aus dem obigen Beispiel an. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Öffnen sehen </font></font><code>Request 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wir, dass die Anforderungsvorlage bereits automatisch von der angegebenen WSDL generiert wird. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fügen Sie sofort die Basisautorisierung für die Anforderung hinzu - Anmeldung und Kennwort sind dieselben wie beim Herstellen einer Verbindung zur Datenbank. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qi/e_/re/qie_rezy1hizdhgrcy-y--2ghae.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beispielanforderung und Antwort. </font><font style="vertical-align: inherit;">Bitte beachten Sie, dass der automatisch generierten Anfrage eine Zeile hinzugefügt wurde </font></font><code>&lt;pk:O_RESULT-VARCHAR2-OUT/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Tatsache ist, dass es in Oracle 12c einen Fehler gibt: OUT-Variablen werden der WSDL für Native Oracle WS nicht hinzugefügt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j6/ch/em/j6chemtum0xqyl4tz6kmandwjdc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ergebnis des Aufrufs ist in der Protokolltabelle sichtbar.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/5t/sy/be5tsyoz24pbltgramyceh86xf8.png"><br>
<br>
<a name="NativeOracleSummary"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergebnisse</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die native Oracle XML DB-Webdiensttechnologie kann als industrielle Lösung verwendet werden, sofern dieser Webdienst nicht stark belastet wird (eine Anforderung in wenigen Sekunden). </font><font style="vertical-align: inherit;">Diese Option ist geeignet, wenn Verbraucher keine strengen Anforderungen an einen Webdienst (dessen Attribute, Datenstrukturen, Verarbeitungslogik) haben und kein strikt vorgegebener Vertrag besteht. </font><font style="vertical-align: inherit;">Wenn Sie einen Webdienst gemäß einer vordefinierten WSDL erstellen müssen (wie in unserem Fall mit neuen Geräten), ist die native Oracle WS-Technologie ungeeignet.</font></font><br>
<br>
<a name="OracleREST"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle REST Data Service</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ab Version 11.1 führte Oracle die vollständige RESTful-Unterstützung in Form eines separaten Moduls namens Oracle REST Data Service (ORDS) ein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ORDS ist eine Java-Anwendung, mit der Sie mithilfe von SQL und PL / SQL eine RESTful-API für eine Oracle-Datenbank erstellen können. Es ist eine Alternative zur Verwendung von Oracle HTTP Server und mod_plsql. Im Wesentlichen ist ORDS eine HTTP-Schnittstelle zwischen der Außenwelt und einer Oracle-Datenbank. Über diese Schnittstelle können Sie eingehende HTTP-Anforderungen an jedes Datenbankobjekt schließen - eine Tabelle oder eine PL / SQL-Prozedur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie müssen lediglich ORDS für die erforderliche Datenbank installieren, konfigurieren und ausführen. Der weitere Prozess zum Erstellen von REST-Services besteht darin, Code in PL / SQL zu schreiben (oder sogar durch Klicken mit der Maus in der IDE, wenn der Code zu faul zum Schreiben ist). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für die Installation von ORDS sind keine zusätzlichen Lizenzen erforderlich.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bedarf:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java JDK 8 oder höher;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle 11.1 oder höher (Oracle 11 XE Release 2 wird ebenfalls unterstützt).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es werden verschiedene ORDS-Bereitstellungsoptionen unterstützt:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standalone-Modus;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf dem Anwendungsserver (Oracle WebLogic Server, Apache Tomcat).</font></font></li>
</ul><br>
<a name="OracleRESTFeatures"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fähigkeiten</font></font></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit ORDS können Sie: </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organisieren Sie den Zugriff auf Ressourcen in einem RESTful-Stil.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie eine Interaktion im Stil von "Remote Procedure Call" (Interaktion im RPC-Stil).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einfach ausgedrückt, können Sie mit Hilfe von ORDS den Zugriff über HTTP auf bestimmte Datenbankobjekte öffnen - Tabellen, Prozeduren, Funktionen, Pakete. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im ersten Fall handelt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es sich um Ressourcen in dem Sinne, dass sie im RESTful-Architekturstil verstanden werden. Jede Ressource wird durch einen eindeutigen URI definiert, und Operationen mit Ressourcen (CRUD - Erstellen, Lesen, Ändern, Löschen) werden durch Operationen aus der HTTP-Anforderung bestimmt: PUT, POST, GET, DELETE. Wenn die Ressource beispielsweise ein Eintrag in der Mitarbeitertabelle ist, ist dieser Eintrag über eine URI des Formulars verfügbar:</font></font><br>
<br>
<pre><code class="sql hljs">GET https://server:port/ords/workspace/hr/employees/7369</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier werden der Name des Datenbankschemas, der Tabellenname und die Datensatz-ID in der Tabelle in der URI angegeben. Somit führt diese HTTP-Anforderung tatsächlich eine SELECT-Operation aus der angegebenen Tabelle aus. Bei anderen Vorgängen (Hinzufügen, Ändern, Löschen) ist das Kommunikationsprinzip dasselbe: Der Pfad zur Ressource wird im URI angegeben, und zusätzliche Parameter werden im Anforderungshauptteil angegeben, z. B. die Feldwerte zum Einfügen des Datensatzes in die Tabelle. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im zweiten Fall wird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> anstelle des Zugriffs auf die Ressource direkt ein Prozeduraufruf verwendet, der alles wie im ersten Fall (CRUD) ausführen und jede andere Logik ausführen kann, die den erforderlichen Geschäftsprozess implementiert. Ein Prozeduraufruf von einem Paket kann unter Verwendung einer HTTP-Anforderung dieses Formats erfolgen:</font></font><br>
<br>
<pre><code class="sql hljs">http://localhost:8080/ords/my_schema/my_pkg/MY_PROC</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Parameter für die Prozedur werden im Anforderungshauptteil in Form von JSON-Formatstrukturen übertragen </font></font><code>{"param" : "value"}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Der gleiche Ansatz wird bei der Verwendung des oben beschriebenen nativen Oracle WS verwendet, bei REST-Diensten gibt es jedoch keine Einschränkungen durch das SOAP-Protokoll. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Profis</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein flexibler Mechanismus, mit dem Sie Webdienste beliebiger Komplexität implementieren können.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einfache Implementierung: Um eine PL / SQL-Prozedur in einen Webdienst umzuwandeln, müssen Sie nur einige typische Befehle ausführen. </font><font style="vertical-align: inherit;">Mit SQL Developer wird das Erstellen einer REST-API zu einem Mausklick mit einem Minimum an Code.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Möglichkeit, einen Webdienst ohne Authentifizierung zu implementieren.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minus</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ORDS ist nicht im Standardpaket von Oracle enthalten - es muss für jeden Server separat installiert werden (zusätzliche Lizenzen sind, wie bereits erwähnt, nicht erforderlich). </font><font style="vertical-align: inherit;">Dies kann ein Problem sein, wenn Sie Tausende von Datenbankservern haben.</font></font></li>
</ul><br>
<a name="OracleRESTSetup"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anpassung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ORDS kann in zwei Modi gestartet werden: über den Anwendungsserver oder im Standalone-Modus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Artikel wird nur die Option zum Ausführen im Standalone-Modus erläutert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit ORDS funktioniert, benötigen Sie:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie die Einstellungen vor der Installation.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schließen Sie die ODRS-Installation ab.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Starten Sie ORDS.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie die ACL (für das gewünschte Datenbankschema).</font></font></li>
</ol><br>
<a name="OracleRESTSetup-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Einstellungen</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die ORDS-Distribution verfügt standardmäßig über eine Datei mit folgenden Parametern:</font></font><br>
<br>
<pre><code class="sql hljs">db.hostname=<font></font>
db.port=<font></font>
db.servicename=<font></font>
db.sid=<font></font>
db.username=APEX_PUBLIC_USER<font></font>
migrate.apex.rest=false<font></font>
rest.services.apex.add=<font></font>
rest.services.ords.add=true<font></font>
schema.tablespace.default=SYSAUX<font></font>
schema.tablespace.temp=TEMP<font></font>
standalone.http.port=8080<font></font>
standalone.static.images=<font></font>
user.tablespace.default=USERS<font></font>
user.tablespace.temp=TEMP<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Beschreibung der Parameter finden Sie in der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dokumentation</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Parameter für den Standalone-Modus:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parameter</font></font></b></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beschreibung</font></font></b></td>
</tr>
<tr>
<td><code>db.hostname</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Name oder IP-Adresse des Oracle-Datenbankservers </font></font></td>
</tr>
<tr>
<td><code>db.port</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB-Port (z. B. 1521)</font></font></td>
</tr>
<tr>
<td><code>db.servicename</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servicename-Datenbank</font></font></td>
</tr>
<tr>
<td><code>db.username</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Benutzername des PL / SQL-Gateways. </font><font style="vertical-align: inherit;">Standard = APEX_PUBLIC_USER, aber das Beispiel plant nicht die Verwendung von APEX, sodass Sie diesen Parameter leer lassen können</font></font></td>
</tr>
<tr>
<td><code>db.password</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benutzerpasswort (auch nicht ausfüllen) </font></font></td>
</tr>
<tr>
<td><code>migrate.apex.rest</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Übergang von RESTful APEX-Diensten zu ORDS. </font><font style="vertical-align: inherit;">Auf false setzen, wenn APEX nicht verwendet wird.</font></font></td>
</tr>
<tr>
<td><code>rest.services.apex.add</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie ORDS für die Verwendung in APEX</font></font></td>
</tr>
<tr>
<td><code>rest.services.ords.add</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Legen Sie das Datenbankschema für ORDS fest (ORDS_PUBLIC_USER und ORDS_METADATA). </font><font style="vertical-align: inherit;">Wert muss wahr sein</font></font></td>
</tr>
<tr>
<td><code>schema.tablespace.default</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standardtabellenbereich für das ORDS_METADATA-Schema</font></font></td>
</tr>
<tr>
<td><code>schema.tablespace.temp</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temporärer Tabellenbereich für das ORDS_METADATA-Schema</font></font></td>
</tr>
<tr>
<td><code>standalone.http.port</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Port, auf dem ORDS ausgeführt wird. </font><font style="vertical-align: inherit;">Dieser Port wird im URI für den Zugriff auf WS verwendet.</font></font></td>
</tr>
<tr>
<td><code>user.tablespace.default</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standardtabellenbereich für das Schema ORDS_PUBLIC_USER</font></font></td>
</tr>
<tr>
<td><code>user.tablespace.temp</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temporärer Tabellenbereich für das Schema ORDS_PUBLIC_USER</font></font></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daher sollte der Inhalt der Datei ungefähr so ​​aussehen:</font></font><br>
<br>
<pre><code class="sql hljs">db.hostname=your_server_host_name<font></font>
db.port=1521<font></font>
db.servicename=your_db_servicename<font></font>
migrate.apex.rest=false<font></font>
rest.services.apex.add=false<font></font>
rest.services.ords.add=true<font></font>
schema.tablespace.default=SYSAUX<font></font>
schema.tablespace.temp=TEMP<font></font>
standalone.http.port=8888<font></font>
standalone.static.images=<font></font>
user.tablespace.default=USERS<font></font>
user.tablespace.temp=TEMP</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn die erforderlichen Einstellungen abgeschlossen sind, können Sie mit der Installation fortfahren.</font></font><br>
<br>
<a name="OracleRESTSetup-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir führen den Befehl im Betriebssystem aus:</font></font><br>
<br>
<pre><code class="sql hljs">java -jar ords.war</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Standardmäßig wird die Konfigurationsdatei aus dem Verzeichnis </font></font><code>params</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neben übernommen </font></font><code>ords.war</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Sie können den Pfad zu dieser Datei explizit mit dem folgenden Parameter angeben </font></font><code>--parameterFile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="xml hljs">java -jar ords.war --parameterFile /path/to/params/myown_params.properties</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gehen Sie im Installationsdialog wie folgt vor: </font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir geben den Pfad zum Verzeichnis zum Speichern der Konfiguration an (in dem angegebenen Beispiel wird </font></font><code>conf </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">als Ergebnis in demselben Verzeichnis, in dem sich die Datei befindet </font></font><code>ords.war</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ein Verzeichnis erstellt, </font></font><code>conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in dem die Dateien mit der ORDS-Konfiguration erstellt werden).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nachdem der Befehl Datenbankkennwort für ORDS_PUBLIC_USER eingeben angezeigt wird, geben wir das Kennwort für das Schema ein </font></font><code>ORDS_PUBLIC_USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Unter diesem Benutzer stellt ORDS eine Verbindung zur Datenbank her.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach der Eingabeaufforderung Geben Sie 1 ein, wenn Sie PL / SQL Gateway verwenden möchten, oder 2, um diesen Schritt zu überspringen. Wir antworten mit „2“, da wir APEX nicht verwenden und nicht migrieren müssen </font></font><code>mod_plsql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach der Anweisung Geben Sie 1 ein, wenn Sie im Standalone-Modus starten möchten, oder 2, um [1] zu beenden, und antworten Sie mit „1“.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach der Anweisung Geben Sie 1 ein, wenn Sie HTTP verwenden, oder 2, wenn Sie HTTPS verwenden [1]. Wir antworten 1.</font></font></li>
</ol><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installationsdialog</font></font></b>
                        <div class="spoiler_text"><code>D:\ords-19.2.0.199.1647&gt;java -jar ords.war install<br>
This Oracle REST Data Services instance has not yet been configured.<br>
Please complete the following prompts<br>
 <br>
 <br>
Enter the location to store configuration data: conf<br>
Enter the database password for ORDS_PUBLIC_USER:<br>
Confirm password:<br>
 03, 2019 2:47:49 PM oracle.dbtools.rt.config.setup.SchemaSetup getInstallOrUpgrade<br>
WARNING: Failed to connect to user ORDS_PUBLIC_USER jdbc:oracle:thin:@//***YOUR_HOST_NAME.DOMAIN***:1521/***YOUR_SERVICE_NAME.DOMAIN***<br>
 <br>
Enter 1 if you want to use PL/SQL Gateway or 2 to skip this step.<br>
If using Oracle Application Express or migrating from mod_plsql then you must enter 1 [1]:2<br>
 03, 2019 2:48:32 PM<br>
INFO: reloaded pools: []<br>
Enter 1 if you wish to start in standalone mode or 2 to exit [1]:<br>
Enter 1 if using HTTP or 2 if using HTTPS [1]:<br>
2019-09-03 14:48:49.754:INFO::main: Logging initialized @4276887ms to org.eclipse.jetty.util.log.StdErrLog<br>
 03, 2019 2:48:49 PM<br>
INFO: HTTP and HTTP/2 cleartext listening on port: 8082<br>
 03, 2019 2:48:50 PM<br>
INFO: Disabling document root because the specified folder does not exist: D:\ords-19.2.0.199.1647\conf\ords\standalone\doc_root<br>
Exception in thread "main" java.lang.reflect.InvocationTargetException<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)<br>
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)<br>
 at java.lang.reflect.Method.invoke(Unknown Source)<br>
 at oracle.dbtools.jarcl.Entrypoint.invoke(Entrypoint.java:66)<br>
 at oracle.dbtools.jarcl.Entrypoint.main(Entrypoint.java:89)<br>
Caused by: java.lang.OutOfMemoryError: Java heap space<br>
 at java.util.Arrays.copyOf(Unknown Source)<br>
 at java.lang.AbstractStringBuilder.ensureCapacityInternal(Unknown Source)<br>
 at java.lang.AbstractStringBuilder.append(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at java.util.AbstractMap.toString(Unknown Source)<br>
 at java.lang.String.valueOf(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at oracle.dbtools.jarcl.zip.ZipIndex.toString(ZipIndex.java:166)<br>
 at java.lang.String.valueOf(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at oracle.dbtools.jarcl.JarClassLoader.toString(JarClassLoader.java:51)<br>
 at org.eclipse.jetty.server.ClassLoaderDump.dump(ClassLoaderDump.java:67)<br>
 at org.eclipse.jetty.util.component.Dumpable.dumpObjects(Dumpable.java:225)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dumpObjects(ContainerLifeCycle.java:746)<br>
 at org.eclipse.jetty.server.handler.ContextHandler.dump(ContextHandler.java:259)<br>
 at org.eclipse.jetty.util.component.Dumpable.dumpObjects(Dumpable.java:162)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dumpObjects(ContainerLifeCycle.java:746)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dump(ContainerLifeCycle.java:701)<br>
 at org.eclipse.jetty.util.component.Dumpable.dump(Dumpable.java:62)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dump(ContainerLifeCycle.java:684)<br>
 at oracle.dbtools.standalone.StandaloneConfiguration.start(StandaloneConfiguration.java:241)<br>
 at oracle.dbtools.standalone.Standalone.execute(Standalone.java:508)<br>
 at oracle.dbtools.cmdline.DefaultCommand.execute(DefaultCommand.java:137)<br>
 at oracle.dbtools.cmdline.Commands.execute(Commands.java:207)<br>
 at oracle.dbtools.cmdline.Commands.main(Commands.java:163)<br>
 at oracle.dbtools.cmdline.Commands.main(Commands.java:368)<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)<br>
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)<br>
 at java.lang.reflect.Method.invoke(Unknown Source)<br>
 at oracle.dbtools.jarcl.Entrypoint.invoke(Entrypoint.java:66)</code></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infolgedessen wird ein Verzeichnis mit der ORDS-Konfiguration erstellt und Dienstprogrammschemata für ORDS werden in der Datenbank angezeigt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sehen </font><font style="vertical-align: inherit;">Außerdem: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installieren Sie Oracle REST Data Services 3.0.X in weniger als 5 Minuten</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a name="OracleRESTSetup-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Starten</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Starten im Standalone-Modus wird mit dem folgenden Befehl ausgeführt:</font></font><br>
<br>
<pre><code class="sql hljs">java -jar ords.war standalone</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dialog starten</font></font></b>
                        <div class="spoiler_text"><code>D:\ords-19.2.0.199.1647&gt;java -jar ords.war standalone<br>
2019-09-03 15:52:45.825:INFO::main: Logging initialized @2079ms to org.eclipse.jetty.util.log.StdErrLog<br>
 03, 2019 3:52:45 PM<br>
INFO: HTTP and HTTP/2 cleartext listening on port: 8082<br>
 03, 2019 3:52:45 PM<br>
INFO: Disabling document root because the specified folder does not exist: D:\ords-19.2.0.199.1647\conf\ords\standalone\doc_root<br>
2019-09-03 15:52:47.124:INFO:oejs.Server:main: jetty-9.4.z-SNAPSHOT; built: 2019-05-02T09:46:34.874Z; git: 14f32d50076f2b706f41a33066eb364d8492e199; jvm 1.8.0_221-b11<br>
2019-09-03 15:52:47.179:INFO:oejs.session:main: DefaultSessionIdManager workerName=node0<br>
2019-09-03 15:52:47.179:INFO:oejs.session:main: No SessionScavenger set, using defaults<br>
2019-09-03 15:52:47.180:INFO:oejs.session:main: node0 Scavenging every 660000ms<br>
 03, 2019 3:52:48 PM<br>
INFO: Configuration properties for: |apex|pu|<br>
db.hostname=***YOUR_HOST_NAME.DOMAIN***<br>
db.password=******<br>
db.port=1521<br>
db.servicename=***YOUR_SERVICE_NAME.DOMAIN***<br>
db.username=ORDS_PUBLIC_USER<br>
resource.templates.enabled=true<br>
 <br>
 03, 2019 3:52:48 PM<br>
WARNING: *** jdbc.MaxLimit in configuration |apex|pu| is using a value of 10, this setting may not be sized adequately for a production environment ***<br>
 03, 2019 3:52:48 PM<br>
WARNING: *** jdbc.InitialLimit in configuration |apex|pu| is using a value of 3, this setting may not be sized adequately for a production environment ***<br>
 03, 2019 3:52:50 PM<br>
INFO: Oracle REST Data Services initialized<br>
Oracle REST Data Services version : 19.2.0.r1991647<br>
Oracle REST Data Services server info: jetty/9.4.z-SNAPSHOT<br>
 <br>
2019-09-03 15:52:50.484:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@d56d67{/ords,null,AVAILABLE}<br>
2019-09-03 15:52:50.658:INFO:oejs.AbstractConnector:main: Started ServerConnector@12325ad{HTTP/1.1,[http/1.1, h2c]}{0.0.<br>
0.0:8082}<br>
2019-09-03 15:52:50.659:INFO:oejs.Server:main: Started @6914ms</code></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach ist ORDS betriebsbereit. </font><font style="vertical-align: inherit;">Die Webdienstadresse lautet http: // &lt;Hostname&gt;: / ords / ..., wobei &lt;Hostname&gt; der Name des Computers ist, auf dem ORDS ausgeführt wird (er muss nicht mit dem Namen des Datenbankservers übereinstimmen, dh ORDS kann auf einem anderen Host ausgeführt werden ), &lt;Port&gt; - der in der ORDS-Konfiguration angegebene Port. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie möchten, können Sie ein Skript erstellen, um ORDS beim Start des Betriebssystems automatisch auszuführen.</font></font><br>
<br>
<a name="OracleRESTSetup-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zugriffseinstellung</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der letzte Schritt besteht darin, die ACL zu konfigurieren. </font><font style="vertical-align: inherit;">Die Schritte sind die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gleichen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wie bei der Verwendung von Native Oracle WS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie müssen diesen Schritt ausführen, nachdem das Datenbankschema erstellt wurde. In den folgenden Beispielen wird daher separat angegeben, wann Sie diese Konfiguration durchführen müssen. </font><font style="vertical-align: inherit;">Bisher können wir davon ausgehen, dass alle vorbereitenden Schritte abgeschlossen sind, und mit den Beispielen fortfahren.</font></font><br>
<br>
<a name="OracleRESTExample1"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel 1: Handler für eine POST-Anforderung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betrachten Sie als Beispiel die Interaktionsimplementierungsoption im RPC-Stil. Das heißt, wir erstellen eine Webdienstmethode, deren Handler eine Stapelprozedur ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In dieser Version wurde die Arbeit mit ORDS in unserem Projekt für das Vertriebsnetz implementiert, und das Ergebnis entsprach den Erwartungen. </font><font style="vertical-align: inherit;">Es stellte sich als schnelle und universelle Möglichkeit heraus, neue Methoden für Webdienste für verschiedene Geschäftsprozesse zu erstellen - von der Arbeit mit Geräten bis zur API für Websites. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie oben erwähnt, ist die ORDS-Unterstützung auch in SQL Developer (der von Oracle entwickelten Datenbank-IDE) enthalten. </font><font style="vertical-align: inherit;">In SQL Developer ist das Erstellen von Webdiensten direkt über Menüelemente oder das Kontextmenü verfügbar.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Artikel werden Beispiele mit SQL Developer (Version 18) erstellt. Der PL / SQL-Code, der aufgrund von Aktionen in der IDE in der Datenbank ausgeführt wird, ist jedoch ebenfalls enthalten. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Version der Datenbank, in der die Experimente durchgeführt wurden:</font></font><br>
<br>
<pre><code class="sql hljs">SQL&gt; <span class="hljs-keyword">SELECT</span> v.BANNER <span class="hljs-keyword">FROM</span> v$<span class="hljs-keyword">version</span> v;<font></font>
 <font></font>
BANNER<font></font>
<span class="hljs-comment">--------------------------------------------------------------------------------</span>
Oracle DATABASE 12c Enterprise Edition <span class="hljs-keyword">Release</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - <span class="hljs-number">64</span><span class="hljs-built_in">bit</span> Production<font></font>
PL/<span class="hljs-keyword">SQL</span> <span class="hljs-keyword">Release</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - Production<font></font>
CORE	<span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span>	Production<font></font>
TNS <span class="hljs-keyword">FOR</span> Linux: <span class="hljs-keyword">Version</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - Production<font></font>
NLSRTL <span class="hljs-keyword">Version</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - Production</code></pre><br>
<a name="OracleRESTExample1-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen eines Testbenutzers für WS</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Beispiel brauchen wir wieder ein neues Schema - erstellen Sie es:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> WS_TEST <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> ws_test <span class="hljs-keyword">QUOTA</span> <span class="hljs-number">200</span>M <span class="hljs-keyword">ON</span> <span class="hljs-keyword">USERS</span>;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SESSION</span>, <span class="hljs-keyword">RESOURCE</span> <span class="hljs-keyword">TO</span> ws_test;</code></pre><br>
<a name="OracleRESTExample1-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einrichten eines Datenbankschemas</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem das Diagramm erstellt wurde, muss es über ORDS zugänglich gemacht werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dafür:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie in SQL Developer eine Verbindung für </font></font><code>WS_TEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rufen Sie in der Liste der Verbindungen das Kontextmenü für die neue Verbindung auf. </font><font style="vertical-align: inherit;">Wählen Sie </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REST Services → REST Services aktivieren ...</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/qy/yv/jqqyyveitff-wlvruwzfefp8bae.png"><br>
 </li>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktivieren</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sie </font><font style="vertical-align: inherit;">im Dialogfeld das Kontrollkästchen neben </font><b><font style="vertical-align: inherit;">Schema aktivieren</font></b><font style="vertical-align: inherit;"> (Sie können hier auch den Parameter " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schema-Alias</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " ändern, </font><font style="vertical-align: inherit;">wenn anstelle des Schemanamens </font></font><code>ws_test</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anderer Text im URI angezeigt werden soll):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jc/0d/f-/jc0df-k8qea-djnenwxg4spe2xw.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie auf </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Weiter"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> klicken </font><font style="vertical-align: inherit;">, wird der PL / SQL-Code angezeigt, der eventuell in der Datenbank ausgeführt wird (und den Sie selbst schreiben können, ohne die IDE zu verwenden):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wg/pd/pb/wgpdpbaxjzxzqv7ju6vf4yzp2i0.png"><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listing:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">BEGIN</span>
    ORDS.ENABLE_SCHEMA( p_enabled             =&gt; <span class="hljs-literal">TRUE</span>
                      , p_schema              =&gt; <span class="hljs-string">'WS_TEST'</span>
                      , p_url_mapping_type    =&gt; <span class="hljs-string">'BASE_PATH'</span>
                      , p_url_mapping_pattern =&gt; <span class="hljs-string">'ws_test'</span>
                      , p_auto_rest_auth      =&gt; <span class="hljs-literal">FALSE</span>);<font></font>
 <font></font>
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre><br>
<a name="OracleRESTExample1-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modul und Vorlage erstellen</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Nächstes müssen Sie ein Modul und eine Vorlage für die Ressource erstellen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Modul</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist eine strukturelle Einheit, mit der Sie mehrere logisch zusammengehörige Ressourcenvorlagen gruppieren können. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine Vorlage</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein bestimmter Webdienst, der bestimmte Methoden für eine Ressource bereitstellt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ressourcenmodul:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eine Organisationseinheit, mit der verwandte Ressourcenvorlagen gruppiert werden. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ressourcenvorlage:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ein einzelner RESTful-Service, der Anforderungen für bestimmte URIs (Universal Resource Identifiers) bearbeiten kann. Der Satz von URIs wird durch das URI-Muster der Ressourcenvorlage definiert.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Für einen Online-Shop kann beispielsweise ein Modul aufgerufen werden</font></font><code>shop </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- In diesem Modul werden alle APIs des Geschäfts kombiniert. </font><font style="vertical-align: inherit;">Die Vorlagen können bestimmte Ressourcen sein, z. B. eine Bestellung (Vorlage </font></font><code>order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), ein Produktkatalog (Vorlage </font></font><code>item</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), eine Zahlung (Vorlage </font></font><code>payment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) usw. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um ein Modul und eine Vorlage zu erstellen, müssen Sie die folgenden Schritte ausführen:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Öffnen Sie in der Objektstruktur den Abschnitt REST Data Services, rufen Sie das Kontextmenü im Abschnitt </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf </font><font style="vertical-align: inherit;">, wählen Sie </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neues Modul ...</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ar/uv/ry/aruvrywejhtzq-3oigkirmjy0qy.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geben Sie im Dialogfeld zur Modulerstellung den Modulnamen </font><font style="vertical-align: inherit;">( </font></font><code>shop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) und den Präfix-URI an (wir geben auch an </font></font><code>shop </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- im folgenden Beispiel sehen wir sofort, wie die Webdienst-Adressvorlage aussehen wird), setzen Sie eine Morgendämmerung vor " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Veröffentlichen"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und klicken Sie auf </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Weiter&gt;"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/db/ak/mf/dbakmfibj3ir0cxttme-zjuz4qu.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geben Sie im nächsten Dialogfeld beispielsweise den Namen der Vorlage an </font></font><code>order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und klicken Sie erneut auf </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Weiter&gt;"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im letzten Dialog sehen wir alle eingegebenen Parameter des Moduls und der Vorlage. </font><font style="vertical-align: inherit;">Auf der Registerkarte </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sehen Sie den PL / SQL-Code, der in der Datenbank ausgeführt wird, wenn Sie auf </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fertig stellen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> klicken </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yj/al/g0/yjalg0-ud3fp5x37qtx5nyemwxq.png"><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um ein Modul zu </font><font style="vertical-align: inherit;">erstellen </font></font><code>shop </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, können Sie mehr Muster hinzufügen - auch im Objektbaum, das Kontextmenü und wählen Sie </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Vorlage hinzufügen ...</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codeauflistung zum Erstellen eines Moduls und einer Vorlage</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">BEGIN</span>
    ORDS.DEFINE_MODULE( p_module_name    =&gt; <span class="hljs-string">'shop'</span>
                      , p_base_path      =&gt; <span class="hljs-string">'shop'</span>
                      , p_items_per_page =&gt;  <span class="hljs-number">25</span>
                      , p_status         =&gt; <span class="hljs-string">'PUBLISHED'</span>
                      , p_comments       =&gt; <span class="hljs-literal">NULL</span>);<font></font>
 <font></font>
    ORDS.DEFINE_TEMPLATE( p_module_name    =&gt; 'shop'<font></font>
                        , p_pattern        =&gt; 'order'<font></font>
                        , p_priority       =&gt; 0<font></font>
                        , p_etag_type      =&gt; 'HASH'<font></font>
                        , p_etag_query     =&gt; NULL<font></font>
                        , p_comments       =&gt; NULL);<font></font>
 <font></font>
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre></div>
                    </div><br>
<a name="OracleRESTExample1-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen eines HTTP-Anforderungshandlers</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt müssen wir einen HTTP-Anforderungshandler für unseren Service erstellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst müssen wir Datenbankobjekte erstellen, die die Anforderungsverarbeitungslogik enthalten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir benötigen eine Tabelle für die Protokollierung und ein Paket, in dem sich ein Handlercode befindet.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie eine Tabelle mit einem Skript:</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> T_WS_LOG<font></font>
(<font></font>
  id_log          <span class="hljs-built_in">NUMBER</span> <span class="hljs-keyword">GENERATED</span> <span class="hljs-keyword">ALWAYS</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>,<font></font>
  message         <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  request_header  <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  request_body    <span class="hljs-keyword">CLOB</span>,<font></font>
  response_header <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  response_body   <span class="hljs-keyword">CLOB</span>,<font></font>
  dtz_log         <span class="hljs-built_in">TIMESTAMP</span>(<span class="hljs-number">6</span>) <span class="hljs-keyword">WITH</span> <span class="hljs-built_in">TIME</span> ZONE <span class="hljs-keyword">DEFAULT</span> SYSTIMESTAMP<font></font>
);<font></font>
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> T_WS_LOG <span class="hljs-keyword">IS</span> <span class="hljs-string">'  HTTP- (ORDS)'</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.id_log <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.message <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.request_header <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.request_body <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.response_header <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.response_body <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.dtz_log <span class="hljs-keyword">IS</span> <span class="hljs-string">'/  '</span>;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> T_WS_LOG <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> PK_T_WS_LOG PRIMARY <span class="hljs-keyword">KEY</span> (ID_LOG) <span class="hljs-keyword">USING</span> <span class="hljs-keyword">INDEX</span>;</code></pre></div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie ein Paket:</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> PK_ORDS_API <span class="hljs-keyword">IS</span><font></font>
 <font></font>
 <font></font>
<span class="hljs-keyword">FUNCTION</span> blob2clob<font></font>
    ( a_blob            <span class="hljs-built_in">BLOB</span>
    , a_from_charset    <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    , a_to_charset      <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    ) <span class="hljs-keyword">RETURN</span>            <span class="hljs-keyword">CLOB</span>;<font></font>
 <font></font>
 <font></font>
PROCEDURE process_request<font></font>
    ( a_request     CLOB<font></font>
    );<font></font>
 <font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_ORDS_API;<font></font>
/<font></font>
 <font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> <span class="hljs-keyword">BODY</span> PK_ORDS_API <span class="hljs-keyword">IS</span><font></font>
 <font></font>
 <font></font>
<span class="hljs-keyword">FUNCTION</span> blob2clob<font></font>
    ( a_blob            <span class="hljs-built_in">BLOB</span>
    , a_from_charset    <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    , a_to_charset      <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    ) <span class="hljs-keyword">RETURN</span>            <span class="hljs-keyword">CLOB</span>
<span class="hljs-keyword">AS</span>
    l_clob      <span class="hljs-keyword">CLOB</span>;<font></font>
    l_amount    NUMBER := 2000;<font></font>
    l_offset    NUMBER := 1;<font></font>
    l_buffer    VARCHAR2(32767);<font></font>
    l_length    PLS_INTEGER := dbms_lob.getlength(a_blob);<font></font>
<span class="hljs-keyword">BEGIN</span>
    dbms_lob.createtemporary(l_clob, <span class="hljs-literal">TRUE</span>);<font></font>
    dbms_lob.OPEN(l_clob, dbms_lob.lob_readwrite);<font></font>
    WHILE l_offset &lt;= l_length LOOP<font></font>
        l_buffer := UTL_RAW.cast_to_varchar2(UTL_RAW.convert( r            =&gt; dbms_lob.substr(a_blob, l_amount, l_offset)<font></font>
                                                            , from_charset =&gt; a_from_charset<font></font>
                                                            , to_charset   =&gt; a_to_charset));<font></font>
        IF LENGTH(l_buffer) &gt; 0 THEN<font></font>
            dbms_lob.writeappend(l_clob, LENGTH(l_buffer), l_buffer);<font></font>
        <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;<font></font>
        l_offset := l_offset + l_amount;<font></font>
        EXIT WHEN l_offset &gt; l_length;<font></font>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<font></font>
    RETURN l_clob;<font></font>
<span class="hljs-keyword">END</span> blob2clob;<font></font>
 <font></font>
 <font></font>
PROCEDURE process_request<font></font>
    ( a_request     CLOB<font></font>
    )<font></font>
AS<font></font>
    TYPE TStringHash IS TABLE OF VARCHAR2(256) INDEX BY VARCHAR2(256);<font></font>
    lh_hdr              TStringHash;<font></font>
    l_hdr               VARCHAR2(256);<font></font>
    l_resp              CLOB;<font></font>
    l_response_status   INTEGER := 200;<font></font>
    l_ccontent_type     VARCHAR2(64) := 'application/json';<font></font>
    l_in_headers        VARCHAR2(32767);<font></font>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--      </span>
    lh_hdr(<span class="hljs-string">'SERVER_SOFTWARE'</span>)       := OWA_UTIL.get_cgi_env(<span class="hljs-string">'SERVER_SOFTWARE'</span>);<font></font>
    lh_hdr('SERVER_NAME')           := OWA_UTIL.get_cgi_env('SERVER_NAME');<font></font>
    lh_hdr('GATEWAY_INTERFACE')     := OWA_UTIL.get_cgi_env('GATEWAY_INTERFACE');<font></font>
    lh_hdr('SERVER_PROTOCOL')       := OWA_UTIL.get_cgi_env('SERVER_PROTOCOL');<font></font>
    lh_hdr('SERVER_PORT')           := OWA_UTIL.get_cgi_env('SERVER_PORT');<font></font>
    lh_hdr('REQUEST_METHOD')        := OWA_UTIL.get_cgi_env('REQUEST_METHOD');<font></font>
    lh_hdr('PATH_INFO')             := OWA_UTIL.get_cgi_env('PATH_INFO');<font></font>
    lh_hdr('PATH_TRANSLATED')       := OWA_UTIL.get_cgi_env('PATH_TRANSLATED');<font></font>
    lh_hdr('SCRIPT_NAME')           := OWA_UTIL.get_cgi_env('SCRIPT_NAME');<font></font>
    lh_hdr('QUERY_STRING')          := OWA_UTIL.get_cgi_env('QUERY_STRING');<font></font>
    lh_hdr('REMOTE_HOST')           := OWA_UTIL.get_cgi_env('REMOTE_HOST');<font></font>
    lh_hdr('REMOTE_ADDR')           := OWA_UTIL.get_cgi_env('REMOTE_ADDR');<font></font>
    lh_hdr('AUTH_TYPE')             := OWA_UTIL.get_cgi_env('AUTH_TYPE');<font></font>
    lh_hdr('REMOTE_USER')           := OWA_UTIL.get_cgi_env('REMOTE_USER');<font></font>
    lh_hdr('REMOTE_IDENT')          := OWA_UTIL.get_cgi_env('REMOTE_IDENT');<font></font>
    lh_hdr('CONTENT-TYPE')          := OWA_UTIL.get_cgi_env('CONTENT-TYPE');<font></font>
    lh_hdr('CONTENT-LENGTH')        := OWA_UTIL.get_cgi_env('CONTENT-LENGTH');<font></font>
    lh_hdr('HTTP_ACCEPT')           := OWA_UTIL.get_cgi_env('HTTP_ACCEPT');<font></font>
    lh_hdr('HTTP_ACCEPT_LANGUAGE')  := OWA_UTIL.get_cgi_env('HTTP_ACCEPT_LANGUAGE');<font></font>
    lh_hdr('HTTP_USER_AGENT')       := OWA_UTIL.get_cgi_env('HTTP_USER_AGENT');<font></font>
    lh_hdr('HTTP_COOKIE')           := OWA_UTIL.get_cgi_env('HTTP_COOKIE');<font></font>
 <font></font>
    l_hdr := lh_hdr.FIRST;<font></font>
    WHILE l_hdr IS NOT NULL LOOP<font></font>
        IF lh_hdr(l_hdr) IS NOT NULL THEN<font></font>
            l_in_headers := l_in_headers||CHR(10)||l_hdr||': '||lh_hdr(l_hdr);<font></font>
        <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;<font></font>
        l_hdr := lh_hdr.NEXT(l_hdr);<font></font>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<font></font>
 <font></font>
    l_resp := '{ "result" : "success" }';<font></font>
 <font></font>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_ws_log<font></font>
        ( message<font></font>
        , request_header<font></font>
        , request_body<font></font>
        , response_header<font></font>
        , response_body)<font></font>
    <span class="hljs-keyword">VALUES</span>
        ( <span class="hljs-literal">NULL</span><font></font>
        , l_in_headers<font></font>
        , a_request<font></font>
        , <span class="hljs-string">'Content-Type: '</span>||l_ccontent_type<font></font>
        , l_resp<font></font>
        );<font></font>
 <font></font>
    OWA_UTIL.STATUS_LINE(nstatus =&gt; l_response_status, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.MIME_HEADER(ccontent_type =&gt; l_ccontent_type, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.HTTP_HEADER_CLOSE();<font></font>
    htp.p(l_resp);<font></font>
<span class="hljs-keyword">END</span> process_request;<font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_ORDS_API;<font></font>
/</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für die erstellte Vorlage müssen Sie nun einen Handler hinzufügen. </font><font style="vertical-align: inherit;">Fügen Sie einen Handler für die HTTP-Methode hinzu </font></font><code>POST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Führen Sie dazu die folgenden Schritte aus:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir rufen das Kontextmenü für die Vorlage auf, wählen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add Handler</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und dann die HTTP-Methode:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gh/hs/2l/ghhs2llhlojihuhzkko_pcfm6bo.png"></li>
<li>     .   <b>SQL Worksheet</b>  PL/SQL-,         HTTP-   <code>POST</code>.     ,   <code>process_request</code>    .  ,     bind- <code>:body</code> —    ORDS,          (    BLOB).       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://oracle-base.com/articles/misc/oracle-rest-data-services-ords-"></a>.      <code>:body_text</code>,        CLOB.        ,   ,   ,       ORDS  .     <code>:body_text</code>   ,        «» .       <code>:body</code>,      CLOB    . ,     :<br>
<br>
<img src="https://habrastorage.org/webt/z7/jw/md/z7jwmdky6orqwntld4kwoy_lw7i.png"><br>
</li>
<li>  Save REST Handler —      .<br>
<br>
   POST-:<br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DECLARE</span>
    l_blob <span class="hljs-built_in">BLOB</span> := :<span class="hljs-keyword">body</span>;
<span class="hljs-keyword">BEGIN</span><font></font>
    PK_ORDS_API.process_request(a_request =&gt; PK_ORDS_API.blob2clob(l_blob));<font></font>
EXCEPTION<font></font>
    WHEN OTHERS THEN<font></font>
        OWA_UTIL.STATUS_LINE(nstatus =&gt; 500, bclose_header =&gt; FALSE);<font></font>
        OWA_UTIL.MIME_HEADER(ccontent_type =&gt; 'application/json');<font></font>
        htp.p('{ "result" : "error", "message" : "'||SQLERRM||'" }');<font></font>
<span class="hljs-keyword">END</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei Bedarf können Sie den PL / SQL-Code zum Erstellen eines Handlers abrufen. </font><font style="vertical-align: inherit;">Wählen Sie dazu im Kontextmenü des ORDS-Moduls REST-Definition aus und geben Sie an, wo das Modulerstellungsskript beispielsweise in die Zwischenablage ausgegeben werden soll:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6i/r4/ww/6ir4wwzdqbzg2zen2mmshbmmroq.png"></li>
</ol><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der resultierende Code zum Erstellen des Moduls</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-comment">-- Generated by Oracle SQL Developer REST Data Services 18.1.0.095.1630</span>
<span class="hljs-comment">-- Exported REST Definitions from ORDS Schema Version 18.4.0.r3541002</span>
<span class="hljs-comment">-- Schema: WS_TEST   Date: Wed Oct 23 20:19:54 MSK 2019</span>
<span class="hljs-comment">--</span>
<span class="hljs-keyword">BEGIN</span><font></font>
  ORDS.ENABLE_SCHEMA(<font></font>
      p_enabled             =&gt; <span class="hljs-literal">TRUE</span>,<font></font>
      p_schema              =&gt; <span class="hljs-string">'WS_TEST'</span>,<font></font>
      p_url_mapping_type    =&gt; <span class="hljs-string">'BASE_PATH'</span>,<font></font>
      p_url_mapping_pattern =&gt; <span class="hljs-string">'ws_test'</span>,<font></font>
      p_auto_rest_auth      =&gt; <span class="hljs-literal">TRUE</span>);    <font></font>
 <font></font>
  ORDS.DEFINE_MODULE(<font></font>
      p_module_name    =&gt; 'shop',<font></font>
      p_base_path      =&gt; '/shop/',<font></font>
      p_items_per_page =&gt;  25,<font></font>
      p_status         =&gt; 'PUBLISHED',<font></font>
      p_comments       =&gt; NULL);      <font></font>
  ORDS.DEFINE_TEMPLATE(<font></font>
      p_module_name    =&gt; 'shop',<font></font>
      p_pattern        =&gt; 'order',<font></font>
      p_priority       =&gt; 0,<font></font>
      p_etag_type      =&gt; 'HASH',<font></font>
      p_etag_query     =&gt; NULL,<font></font>
      p_comments       =&gt; NULL);<font></font>
  ORDS.DEFINE_HANDLER(<font></font>
      p_module_name    =&gt; 'shop',<font></font>
      p_pattern        =&gt; 'order',<font></font>
      p_method         =&gt; 'POST',<font></font>
      p_source_type    =&gt; 'plsql/block',<font></font>
      p_items_per_page =&gt;  0,<font></font>
      p_mimes_allowed  =&gt; '',<font></font>
      p_comments       =&gt; NULL,<font></font>
      p_source         =&gt; <font></font>
'<span class="hljs-keyword">DECLARE</span>
    l_blob <span class="hljs-built_in">BLOB</span> := :<span class="hljs-keyword">body</span>;
<span class="hljs-keyword">BEGIN</span><font></font>
    PK_ORDS_API.process_request(a_request =&gt; PK_ORDS_API.blob2clob(l_blob));<font></font>
EXCEPTION<font></font>
    WHEN OTHERS THEN<font></font>
        OWA_UTIL.STATUS_LINE(nstatus =&gt; 500, bclose_header =&gt; FALSE);<font></font>
        OWA_UTIL.MIME_HEADER(ccontent_type =&gt; ''application/json'');<font></font>
        htp.p(''{ "result" : "error", "message" : "''||SQLERRM||''" }'');<font></font>
<span class="hljs-keyword">END</span>;'<font></font>
      );<font></font>
 <font></font>
 <font></font>
  <span class="hljs-keyword">COMMIT</span>; 
<span class="hljs-keyword">END</span>;</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hinweis: Wenn Sie die Modulerstellung </font></font><code>ORDS.DEFINE_MODULE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erneut </font><font style="vertical-align: inherit;">ausführen </font><font style="vertical-align: inherit;">, werden alle Vorlagen dieses Moduls automatisch gelöscht, und es wird keine Warnung angezeigt!</font></font><br>
<br>
<a name="OracleRESTExample1-Step5"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel aufrufen</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist unser Webservice bereit. </font><font style="vertical-align: inherit;">Es bleibt seine Arbeit zu überprüfen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zur Überprüfung führen wir die Anfrage aus:</font></font><br>
<br>
<pre><code class="xml hljs">POST http://****:8888/ords/ws_test/shop/order HTTP/1.1<font></font>
Accept-Encoding: gzip,deflate<font></font>
Content-Type: application/json<font></font>
Content-Length: 22<font></font>
Host: ****:8888<font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)<font></font>
 <font></font>
{ "message" : "test" }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Antwort erhalten wir:</font></font><br>
<br>
<pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date: Wed, 23 Oct 2019 16:54:53 GMT<font></font>
Content-Type: application/json<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{ "result" : "success" }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ergebnis der Methodenausführung ist ein Datensatz mit dem Hauptteil der Anforderung und Antwort in der Protokolltabelle: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cj/89/tp/cj89tpjfzxvmdot-nsdr15nn49c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen können, wurde die gesendete HTTP-Anforderung von der Prozedur aus dem Paket erfolgreich verarbeitet.</font></font><br>
<br>
<a name="OracleRESTExample1-Step6"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parameter aus der Anfrage</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oben haben wir bereits das Ergebnis eines einfachen Webdienstes gesehen. </font><font style="vertical-align: inherit;">Lassen Sie uns nun die Aufgabe etwas komplizieren, indem wir der Anforderung zusätzliche Parameter hinzufügen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt zwei Möglichkeiten, Parameter zu übergeben: </font></font><br>
 <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Über URL. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Parameter werden in der URL im Standardformular festgelegt:</font></font><br>
<br>
<pre><code class="sql hljs">http://...URI...?p1=val1&amp;p2=val2</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Über HEADER. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Parameter werden im Anforderungsheader wie </font></font><code>p1: val1</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
folgt festgelegt: In ORDS im Anforderungshandler werden Parameter </font><font style="vertical-align: inherit;">als </font><font style="vertical-align: inherit;">Bindevariablen definiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir fügen dem vorherigen Beispiel zwei Parameter hinzu: </font></font><code>prm1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Parameter im URI, </font></font><code>prm2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Parameter im Anforderungsheader. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um diese Parameter zu verarbeiten, </font></font><code>PK_ORDS_API.process_request:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fügen wir die </font><font style="vertical-align: inherit;">Prozedur hinzu, </font><font style="vertical-align: inherit;">fügen die Parameter hinzu </font></font><code>a_prm_uri</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>a_prm_hdr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, zu denen die Werte unserer Parameter aus der Anforderung kommen.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Request-Handler-Prozedur mit neuen Parametern</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">PROCEDURE process_request<font></font>
    ( a_request     CLOB<font></font>
    , a_prm_uri     VARCHAR2 := NULL<font></font>
    , a_prm_hdr     VARCHAR2 := NULL<font></font>
    )<font></font>
AS<font></font>
    TYPE TStringHash IS TABLE OF VARCHAR2(256) INDEX BY VARCHAR2(256);<font></font>
    lh_hdr              TStringHash;<font></font>
    l_hdr               VARCHAR2(256);<font></font>
    l_resp              CLOB;<font></font>
    l_response_status   INTEGER := 200;<font></font>
    l_ccontent_type     VARCHAR2(64) := 'application/json';<font></font>
    l_in_headers        VARCHAR2(32767);<font></font>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--      </span>
    lh_hdr(<span class="hljs-string">'SERVER_SOFTWARE'</span>)       := OWA_UTIL.get_cgi_env(<span class="hljs-string">'SERVER_SOFTWARE'</span>);<font></font>
    lh_hdr('SERVER_NAME')           := OWA_UTIL.get_cgi_env('SERVER_NAME');<font></font>
    lh_hdr('GATEWAY_INTERFACE')     := OWA_UTIL.get_cgi_env('GATEWAY_INTERFACE');<font></font>
    lh_hdr('SERVER_PROTOCOL')       := OWA_UTIL.get_cgi_env('SERVER_PROTOCOL');<font></font>
    lh_hdr('SERVER_PORT')           := OWA_UTIL.get_cgi_env('SERVER_PORT');<font></font>
    lh_hdr('REQUEST_METHOD')        := OWA_UTIL.get_cgi_env('REQUEST_METHOD');<font></font>
    lh_hdr('PATH_INFO')             := OWA_UTIL.get_cgi_env('PATH_INFO');<font></font>
    lh_hdr('PATH_TRANSLATED')       := OWA_UTIL.get_cgi_env('PATH_TRANSLATED');<font></font>
    lh_hdr('SCRIPT_NAME')           := OWA_UTIL.get_cgi_env('SCRIPT_NAME');<font></font>
    lh_hdr('QUERY_STRING')          := OWA_UTIL.get_cgi_env('QUERY_STRING');<font></font>
    lh_hdr('REMOTE_HOST')           := OWA_UTIL.get_cgi_env('REMOTE_HOST');<font></font>
    lh_hdr('REMOTE_ADDR')           := OWA_UTIL.get_cgi_env('REMOTE_ADDR');<font></font>
    lh_hdr('AUTH_TYPE')             := OWA_UTIL.get_cgi_env('AUTH_TYPE');<font></font>
    lh_hdr('REMOTE_USER')           := OWA_UTIL.get_cgi_env('REMOTE_USER');<font></font>
    lh_hdr('REMOTE_IDENT')          := OWA_UTIL.get_cgi_env('REMOTE_IDENT');<font></font>
    lh_hdr('CONTENT-TYPE')          := OWA_UTIL.get_cgi_env('CONTENT-TYPE');<font></font>
    lh_hdr('CONTENT-LENGTH')        := OWA_UTIL.get_cgi_env('CONTENT-LENGTH');<font></font>
    lh_hdr('HTTP_ACCEPT')           := OWA_UTIL.get_cgi_env('HTTP_ACCEPT');<font></font>
    lh_hdr('HTTP_ACCEPT_LANGUAGE')  := OWA_UTIL.get_cgi_env('HTTP_ACCEPT_LANGUAGE');<font></font>
    lh_hdr('HTTP_USER_AGENT')       := OWA_UTIL.get_cgi_env('HTTP_USER_AGENT');<font></font>
    lh_hdr('HTTP_COOKIE')           := OWA_UTIL.get_cgi_env('HTTP_COOKIE');<font></font>
    lh_hdr('a_prm_uri')             := a_prm_uri;<font></font>
    lh_hdr('a_prm_hdr')             := a_prm_hdr;<font></font>
 <font></font>
    l_hdr := lh_hdr.FIRST;<font></font>
    WHILE l_hdr IS NOT NULL LOOP<font></font>
        IF lh_hdr(l_hdr) IS NOT NULL THEN<font></font>
            l_in_headers := l_in_headers||CHR(10)||l_hdr||': '||lh_hdr(l_hdr);<font></font>
        <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;<font></font>
        l_hdr := lh_hdr.NEXT(l_hdr);<font></font>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<font></font>
 <font></font>
    l_resp := '{ "result" : "success" }';<font></font>
 <font></font>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_ws_log<font></font>
        ( message<font></font>
        , request_header<font></font>
        , request_body<font></font>
        , response_header<font></font>
        , response_body)<font></font>
    <span class="hljs-keyword">VALUES</span>
        ( <span class="hljs-literal">NULL</span><font></font>
        , l_in_headers<font></font>
        , a_request<font></font>
        , <span class="hljs-string">'Content-Type: '</span>||l_ccontent_type<font></font>
        , l_resp);<font></font>
 <font></font>
    OWA_UTIL.STATUS_LINE(nstatus =&gt; l_response_status, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.MIME_HEADER(ccontent_type =&gt; l_ccontent_type, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.HTTP_HEADER_CLOSE();<font></font>
    htp.p(l_resp);<font></font>
<span class="hljs-keyword">END</span> process_request;</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Innerhalb der Prozedur zeichnen wir einfach die Werte der neuen Parameter im Protokoll auf. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fügen Sie dem POST-Anforderungshandler neue Parameter hinzu - in Form von Bindevariablen </font></font><code>:prm_uri</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>:prm_hdr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Handler der POST-Anforderungsanforderung mit neuen Parametern:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DECLARE</span>
    l_blob <span class="hljs-built_in">BLOB</span> := :<span class="hljs-keyword">body</span>;
<span class="hljs-keyword">BEGIN</span><font></font>
    PK_ORDS_API.process_request(a_request =&gt; PK_ORDS_API.blob2clob(l_blob), a_prm_uri =&gt; :prm_uri, a_prm_hdr =&gt; :prm_hdr);<font></font>
EXCEPTION<font></font>
    WHEN OTHERS THEN<font></font>
        OWA_UTIL.STATUS_LINE(nstatus =&gt; 500, bclose_header =&gt; FALSE);<font></font>
        OWA_UTIL.MIME_HEADER(ccontent_type =&gt; 'application/json');<font></font>
        htp.p('{ "result" : "error", "message" : "'||SQLERRM||'" }');<font></font>
<span class="hljs-keyword">END</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Handler auf dem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parameter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Registerkarte </font><font style="vertical-align: inherit;">deklariert die Variablen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mc/cx/mh/mccxmhpqkgnbkll850xmlojvy6e.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In dieser Form das erste Feld ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Name</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> der ) enthält den Namen des Parameters, der </font><font style="vertical-align: inherit;">in der Anforderung, das zweite Feld (erwartet wird </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bind Parameter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) - der Name der Bind - </font><font style="vertical-align: inherit;">Variablen , </font><font style="vertical-align: inherit;">die in der Prozedur dieser Anfrage angegeben werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns die Anforderung mit neuen Parametern ausführen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k1/rj/e5/k1rje5cdkd9prfi8r-canaolczs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ergebnis - Die Parameter aus der Anforderung wurden im Protokoll gespeichert: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4y/vy/c6/4yvyc6zvhi_xkhod215lxywbdee.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bitte beachten Sie, dass die Parameter aus dem URI auch aus der CGI-Variablen abgerufen werden </font></font><code>QUERY_STRING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">können, dh um die Parameter </font><font style="vertical-align: inherit;">abzurufen, müssen die Bindevariablen </font><font style="vertical-align: inherit;">nicht gestartet werden. Sie können sie in der Handler-Prozedur analysieren Anfrage.</font></font><br>
<br>
<a name="OracleRESTExample1-Step7"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CGI-Variablen</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Arbeit mit HTTP in Oracle können die Werte von Umgebungsvariablen abgerufen werden, die den Kontext der HTTP-Anforderung widerspiegeln. </font><font style="vertical-align: inherit;">Mit der Prozedur können Sie die Werte von Variablen abrufen </font></font><code>OWA_UTIL.get_cgi_env</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liste der in PL / SQL verfügbaren CGI-Variablen</font></font></b>
                        <div class="spoiler_text"><code>APEX_LISTENER_VERSION<br>
GATEWAY_INTERFACE<br>
GATEWAY_IVERSION<br>
HTTP_ACCEPT_ENCODING<br>
HTTP_HOST<br>
HTTP_PORT<br>
HTTP_USER_AGENT<br>
PATH_ALIAS<br>
PATH_INFO<br>
PLSQL_GATEWAY<br>
QUERY_STRING<br>
REMOTE_ADDR<br>
REMOTE_USER<br>
REQUEST_CHARSET<br>
REQUEST_IANA_CHARSET<br>
REQUEST_METHOD<br>
REQUEST_PROTOCOL<br>
REQUEST_SCHEME<br>
SCRIPT_NAME<br>
SERVER_NAME<br>
SERVER_PORT<br>
SERVER_PROTOCOL<br>
SERVER_SOFTWARE<br>
WEB_AUTHENT_PREFIX<br>
host<br>
user-agent<br>
CONTENT-LENGTH<br>
CONTENT-TYPE</code></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Siehe auch: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://oracle-base.com/articles/misc/oracle-rest-data-services-ords-"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP-Header (OWA_UTIL) und ORDS-spezifische Bindungsvariablen</font></font></a><br>
<br>
<a name="OracleRESTExample2"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel 2: Zugriff auf eine Tabelle über ORDS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Beispiel betrachten wir die Organisation des Zugriffs auf ein Datenbankobjekt (auf eine Tabelle) über ORDS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie im vorherigen Beispiel machen wir den Zugriff ohne Autorisierung. </font><font style="vertical-align: inherit;">Informationen zum sicheren Zugriff auf Ressourcen finden Sie in der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dokumentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um ein Datenbankobjekt über ORDS zugänglich zu machen, müssen Sie nur einen Schritt ausführen - den Befehl </font></font><code>ORDS.ENABLE_OBJECT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Danach kann über eine URI des Formulars auf das Objekt zugegriffen werden:</font></font><br>
<br>
<pre><code class="sql hljs">http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<a name="OracleRESTExample2-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie ein Testmuster</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Beispiel erstellen wir die Tabelle "Bestellungen". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Skript zur Tabellenerstellung:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> T_ORDER<font></font>
(<font></font>
  id_order   <span class="hljs-built_in">NUMBER</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-keyword">NUM</span>        <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">32</span>),<font></font>
  buyer_name <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">256</span>),<font></font>
  dt_order   <span class="hljs-built_in">DATE</span>,<font></font>
  memo       <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>)<font></font>
);<font></font>
 <font></font>
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> T_ORDER <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.id_order <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.num <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.buyer_name <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.dt_order <span class="hljs-keyword">IS</span> <span class="hljs-string">'  '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.memo <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> T_ORDER <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> PK_T_ORDER PRIMARY <span class="hljs-keyword">KEY</span> (ID_ORDER) <span class="hljs-keyword">USING</span> <span class="hljs-keyword">INDEX</span>;</code></pre><br>
<a name="OracleRESTExample2-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabellenzugriff über ORDS öffnen</font></font></h4><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In SQL Developer Rufen Sie </font><font style="vertical-align: inherit;">das Kontextmenü für die gewünschte Tabelle, wählen Sie </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">das den Dienst den REST aktiviert ...</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jm/pe/iw/jmpeiwllpn8ailltyqp-zmyfxji.png"><br>
<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktivieren Sie im </font><font style="vertical-align: inherit;">Fenster mit den Zugriffseinstellungen das Kontrollkästchen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Objekt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aktivieren, deaktivieren Sie das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kontrollkästchen Autorisierung erforderlich</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , klicken Sie auf </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Fertig stellen"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (oder </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Weiter"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um den empfangenen PL / SQL-Code </font><font style="vertical-align: inherit;">anzuzeigen </font><font style="vertical-align: inherit;">):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9q/fj/9e/9qfj9eql816su08ignjwhfbjp24.png"><br>
<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach Ausführung dieser Schritte wird die Tabelle </font></font><code>T_ORDER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">über HTTP verfügbar, den Basis-URI für den Zugriff auf die Ressource:</font></font><br>
<br>
<pre><code class="sql hljs">http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auflistung der Tabelleneinschlüsse:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DECLARE</span>
  <span class="hljs-keyword">PRAGMA</span> AUTONOMOUS_TRANSACTION;
<span class="hljs-keyword">BEGIN</span><font></font>
 <font></font>
    ORDS.ENABLE_OBJECT(p_enabled =&gt; <span class="hljs-literal">TRUE</span>,<font></font>
                       p_schema =&gt; <span class="hljs-string">'WS_TEST'</span>,<font></font>
                       p_object =&gt; <span class="hljs-string">'T_ORDER'</span>,<font></font>
                       p_object_type =&gt; <span class="hljs-string">'TABLE'</span>,<font></font>
                       p_object_alias =&gt; <span class="hljs-string">'t_order'</span>,<font></font>
                       p_auto_rest_auth =&gt; <span class="hljs-literal">FALSE</span>);<font></font>
 <font></font>
    <span class="hljs-keyword">commit</span>;<font></font>
 <font></font>
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre><br>
</li>
</ol><br>
<a name="OracleRESTExample2-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen oder bearbeiten Sie einen Datensatz</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Zugriff auf die Tabelle ist offen. Wir prüfen, wie Sie über ORDS Datensätze in der Tabelle erstellen und bearbeiten können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um einen Datensatz zu erstellen, führen wir die Anforderung aus </font></font><code>PUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der ORDS-Dokumentation wird die folgende Beschreibung in der Methodenbeschreibung </font></font><code>PUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">angegeben:</font></font><br>
<br>
<pre><code class="sql hljs">PUT http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/&lt;KeyValues&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das heißt, das Feld </font></font><code>KeyValues</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Datensatzschlüssel) muss auch für die Erstellung eines neuen Datensatzes ausgefüllt werden. </font><font style="vertical-align: inherit;">Die Abfrage selbst sollte alle Felder in der Tabelle auflisten (das Schlüsselfeld kann jedoch weggelassen werden).</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anfrage</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">PUT http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25 HTTP/1.1<font></font>
Accept-Encoding: gzip,deflate<font></font>
Content-Type: application/json;charset=UTF-8<font></font>
Content-Length: 157<font></font>
Host: &lt;server&gt;:&lt;port&gt;<font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)<font></font>
 <font></font>
{<font></font>
	"num" : "ords-3472634",<font></font>
	"buyer_name" : "Buyer Name",<font></font>
	"dt_order" : "2019-10-25T12:00:00Z",<font></font>
	"memo" : "  1"<font></font>
}</code></pre></div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Als Antwort erhalten wir alle Felder des gerade erstellten Datensatzes:</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><font></font>
HTTP/1.1 200 OK<font></font>
Content-Type: application/json<font></font>
Content-Location: http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25<font></font>
ETag: "..."<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{<font></font>
   "id_order": 25,<font></font>
   "num": "ords-3472634",<font></font>
   "buyer_name": "Buyer Name",<font></font>
   "dt_order": "2019-10-25T12:00:00Z",<font></font>
   "memo": "  1",<font></font>
   "links":    [<font></font>
            {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "edit",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "describedby",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/metadata-catalog/t_order/item"<font></font>
      },<font></font>
            {<font></font>
         "rel": "collection",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      }<font></font>
   ]<font></font>
}</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sehen uns den Inhalt der Tabelle an - unser neuer Datensatz wurde angezeigt: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oy/sb/ud/oysbudug0wwzgn8u7rz5jacs4ng.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um den Datensatz zu ändern, rufen wir dieselbe PUT-Methode auf. </font><font style="vertical-align: inherit;">Ändern Sie den Hinweis in unserer Bestellung:</font></font><br>
<br>
<pre><code class="sql hljs">PUT http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25 HTTP/1.1<font></font>
Accept-Encoding: gzip,deflate<font></font>
Content-Type: application/json;charset=UTF-8<font></font>
Content-Length: 178<font></font>
Host: &lt;server&gt;:&lt;port&gt;<font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)<font></font>
 <font></font>
{<font></font>
	"num" : "ords-3472634",<font></font>
	"buyer_name" : "Buyer Name",<font></font>
	"dt_order" : "2019-10-25T12:00:00Z",<font></font>
	"memo" : "  1.  "<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Antwort erhalten wir denselben JSON mit den Parametern des geänderten Datensatzes. </font><font style="vertical-align: inherit;">In der Tabelle sehen wir, dass der Hinweis aktualisiert wurde:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gb/ba/ax/gbbaax7cmuudt8bd9osl3ugr6to.png"><br>
<br>
<a name="OracleRESTExample2-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datensätze aus einer Tabelle abrufen</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt drei Modi zum Abfragen von Daten aus einer Tabelle:</font></font><br>
 <br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seitenanfrage:</font></font><br>
<br>
<pre><code class="sql hljs">GET http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/?offset=&lt;Offset&gt;&amp;limit=&lt;Limit&gt;</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anfrage für Bedingungen:</font></font><br>
<br>
<pre><code class="sql hljs"> GET http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/?q=&lt;FilterClause&gt;</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primärschlüsselanforderung:</font></font><br>
 <br>
<pre><code class="sql hljs">GET http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/&lt;KeyValues&gt;</code></pre></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um alle Datensätze abzurufen, können Sie die Abfrage ausführen, ohne Parameter anzugeben:</font></font><br>
<br>
<pre><code class="sql hljs">GET http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antworten</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date: Fri, 25 Oct 2019 15:39:58 GMT<font></font>
Content-Type: application/json<font></font>
ETag: "..."<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{<font></font>
   "items": [   {<font></font>
      "id_order": 25,<font></font>
      "num": "ords-3472634",<font></font>
      "buyer_name": "Buyer Name",<font></font>
      "dt_order": "2019-10-25T12:00:00Z",<font></font>
      "memo": "ўµЃ‚ѕІ‹№ ·°є°· 1.  ·јµЅ‚Њ їЂјµ‡°Ѕµ",<font></font>
      "links": [      {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      }]<font></font>
   }],<font></font>
   "hasMore": false,<font></font>
   "limit": 25,<font></font>
   "offset": 0,<font></font>
   "count": 1,<font></font>
   "links":    [<font></font>
            {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      },<font></font>
            {<font></font>
         "rel": "edit",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      },<font></font>
            {<font></font>
         "rel": "describedby",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/metadata-catalog/t_order/"<font></font>
      },<font></font>
            {<font></font>
         "rel": "first",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      }<font></font>
   ]<font></font>
}</code></pre></div>
                    </div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist eine offene Frage, wie Oracle dazu gebracht wird, dem Content-Type-Header eine Codierung hinzuzufügen.</font></font></i><br>
<br>
<pre><code class="sql hljs">GET http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antworten</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date: Fri, 25 Oct 2019 15:44:35 GMT<font></font>
Content-Type: application/json<font></font>
ETag: "..."<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{<font></font>
   "id_order": 25,<font></font>
   "num": "ords-3472634",<font></font>
   "buyer_name": "Buyer Name",<font></font>
   "dt_order": "2019-10-25T12:00:00Z",<font></font>
   "memo": "ўµЃ‚ѕІ‹№ ·°є°· 1.  ·јµЅ‚Њ їЂјµ‡°Ѕµ",<font></font>
   "links":    [<font></font>
            {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "edit",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "describedby",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/metadata-catalog/t_order/item"<font></font>
      },<font></font>
            {<font></font>
         "rel": "collection",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      }<font></font>
   ]<font></font>
}</code></pre></div>
                    </div><br>
<a name="OracleRESTExample2-Step5"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aufzeichnung löschen</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwenden Sie zum Löschen die HTTP-Methode </font></font><code>DELETE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anfrage:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">http</span>://&lt;<span class="hljs-keyword">server</span>&gt;:&lt;port&gt;/ords/ws_test/t_order/?q={<span class="hljs-string">"id_order"</span>:<span class="hljs-number">25</span>}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Anfrage in ihrer ursprünglichen Form:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">http</span>://&lt;<span class="hljs-keyword">server</span>&gt;:&lt;port&gt;/ords/ws_test/t_order/?q=%<span class="hljs-number">7</span>B%<span class="hljs-number">22</span>id_order%<span class="hljs-number">22</span>%<span class="hljs-number">3</span>A25%<span class="hljs-number">7</span>D</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antworten:</font></font><br>
<br>
<pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date=Fri, 25 Oct 2019 16:23:39 GMT<font></font>
Content-Type=application/json<font></font>
Transfer-Encoding=chunked<font></font>
 <font></font>
{"rowsDeleted":1}</code></pre><br>
<a name="OracleRESTSummary"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergebnisse</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ORDS ist ein ziemlich flexibler und universeller Mechanismus für die Arbeit mit Webdiensten, mit dem Sie ein vollwertiges REST implementieren können. In Bezug auf die Leistung ist es Native Oracle WS mit seiner umfangreichen internen XML-Analyse weit überlegen. Für die Implementierung eines hoch ausgelasteten Systems ist dieser Ansatz nicht geeignet: In diesem Fall wird ein anderer Technologie-Stack benötigt - ein separater Anwendungsserver, Proxy-Anforderungen, Verwendung von Clusterdatenbanken usw. Für die Implementierung von Systemen mit einer relativ geringen Anzahl von HTTP-Anforderungen (bis zu 10–20 pro Sekunde) ist ORDS jedoch der optimale Ansatz in Bezug auf Leistung und Flexibilität. ORDS ist Native Oracle WS nur in Bezug auf die Generierung einer Webdienstspezifikation unterlegen: Letzteres bietet eine vollständig fertige Spezifikation (WSDL), die den Verbrauchern des Dienstes "wie besehen" zur Verfügung gestellt werden kann. ORDS hat auch die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fähigkeit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Generierung einer Beschreibung, aber für den in diesem Artikel betrachteten Ansatz mit einem vollständig universellen Dienst (wenn es ein gemeinsames Verarbeitungsverfahren für alle Dienste gibt) wird die automatische Generierung der Spezifikation unmöglich. </font><font style="vertical-align: inherit;">Oracle generiert nur eine Spezifikation der obersten Ebene, und die Details (Datenmodelle) müssen manuell beschrieben werden.</font></font><br>
<br>
<a name="Alternatives"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alternative Ansätze</font></font></h2><br>
<a name="JavaServlet"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Servlet</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Option zum Erstellen von Webdiensten in der Konfigurationsmethode ähnelt der von Native Oracle WS: Sie erfordert auch die Verwendung des integrierten HTTP-Servers von Oracle sowie ACL-Einstellungen (wie in der Tat alle anderen Methoden). Im Gegensatz zu Native Oracle WS funktioniert diese Option jedoch mit reinem HTTP. Request - </font><font style="vertical-align: inherit;">Handler in diesem Fall sind in Java geschrieben und schauen nur auf dem HTTP-Anfrage - </font><font style="vertical-align: inherit;">Typ ( </font></font><code>PUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>GET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>POST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und so weiter, obwohl sie und einen Handler für alle Arten getan werden kann), und die </font><font style="vertical-align: inherit;">Verarbeitungslogik bleibt vollständig im Ermessen des Entwicklers. Sie können den Anforderungshauptteil "wie er ist" in die Datenbanklogik übertragen, ihn zerlegen und dort verarbeiten. Sie können einen Teil der Logik auf der Seite des Java-Handlers belassen und die gewünschte Prozedur aus der Datenbank aufrufen, abhängig von den Daten, die in der Anforderung eingegangen sind.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Ansatz für die Implementierung von Webdiensten ist sehr universell und erfordert auch keine Installation zusätzlicher Komponenten. </font><font style="vertical-align: inherit;">Wir konnten es nicht nur aufgrund der strengen Anforderungen für den Dienst anwenden: Wir brauchten einen Webdienst, für den keine Authentifizierung erforderlich war. </font><font style="vertical-align: inherit;">Bei der Implementierung dieses Ansatzes ist eine Authentifizierung erforderlich, die nicht umgangen werden kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weitere Informationen zu dieser Methode finden Sie in der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle-Dokumentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a name="DatabaseAccessDescriptor"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datenbankzugriffsdeskriptor (PL / SQL-Servlet)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Option ist der vorherigen völlig ähnlich, nur die gespeicherte PL / SQL-Prozedur fungiert als Anforderungshandler. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beispiel-URL - Der Paketname, der Prozedurname und die Parameter (GET-Anforderung) werden angegeben:</font></font><br>
<br>
<pre><code class="sql hljs">GET http://&lt;server&gt;:&lt;port&gt;/servlet_plsql/pi_test.test_serv?p_path=ppp </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei einer POST-Anforderung müssen die Parameternamen über das Zeichen "=" direkt in den Anforderungshauptteil eingegeben werden, was ziemlich unpraktisch ist, da der Typ des Anforderungsinhalts (ContentType) in diesem Fall nur Text sein kann. </font><font style="vertical-align: inherit;">Sie können eine XML- oder JSON-Struktur nur in dieser Form übertragen:</font></font><br>
<br>
<pre><code class="sql hljs">p_proc_param_name=&lt;xml_data&gt;…&lt;/xml_data&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Version des Webdienstes ist nur in Fällen anwendbar, in denen es sich um sehr einfache Anforderungen handelt - Prozeduraufrufe mit einfachen Datentypen. </font><font style="vertical-align: inherit;">Das Übertragen komplexer mehrstufiger Strukturen in dieser Option funktioniert nicht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Ansatz wird </font><font style="vertical-align: inherit;">auf der ORACLE-BASE-Website </font><font style="vertical-align: inherit;">ausführlich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beschrieben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a name="Conclusion"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Erstellen eines Webdienstes in Oracle ist eine recht einfache Aufgabe, für die kein superkomplexer Code geschrieben werden muss. Gleichzeitig erhalten Oracle-Entwickler einen ziemlich leistungsstarken Mechanismus in ihr Arsenal, mit dem Sie heterogene Systeme oder Systemteile über HTTP integrieren können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Artikel haben wir vier Ansätze zum Erstellen von Webdiensten untersucht. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Native Oracle WS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist eine veraltete Technologie, die dennoch ihre Vorteile hat: automatisch generierte WSDL, automatisches Parsen von XML, keine Installation zusätzlicher Software. Der Hauptnachteil ist die geringe Leistung und Einschränkung der unterstützten Datentypen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BESTELLUNGEN</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Meiner Meinung nach der bevorzugte Weg, um Webdienste zu erstellen. Flexibel genug und vielseitig. Von den Unannehmlichkeiten dieser Methode können wir nur unterscheiden, dass sie nicht im Standardpaket von Oracle enthalten ist, dh eine separate Installation erfordert. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Servlet</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist eine völlig universelle Methode, bei der keine zusätzliche Software installiert werden muss. Alles muss jedoch vollständig manuell erfolgen, da keine Möglichkeit zur automatischen Generierung von Diensten besteht. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PL / SQL-Servlet</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist der am wenigsten erfolgreiche Ansatz. Von den Pluspunkten können wir unterscheiden, dass wir mit dieser Option gespeicherte Prozeduren über HTTP aufrufen können, ohne zusätzliche Software installieren zu müssen oder ohne zusätzlichen Code in anderen Sprachen zu schreiben: Der gesamte Code wird nur in PL / SQL geschrieben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielen Dank für Ihre Aufmerksamkeit! </font><font style="vertical-align: inherit;">Ich hoffe, dass das Material des Artikels für diejenigen nützlich sein wird, die irgendwie mit Oracle-Produkten verbunden sind und von den Problemen der systeminternen und systemübergreifenden Integration verwirrt sind.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusätzliche Materialien</font></font></b>
                        <div class="spoiler_text"><b>Native Oracle XML DB Web Services </b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Using Native Oracle XML DB Web Services</a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Native Oracle XML DB Web Services in Oracle 11g Release 1</a><br>
<br>
<b>ORDS</b><br>
<br>
: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Installation, Configuration, and Development Guide</a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Install Oracle REST Data Services 3.0.X in under 5 minutes</a><br>
<br>
CGI-: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://oracle-base.com/articles/misc/oracle-rest-data-services-ords-">HTTP Headers (OWA_UTIL) and ORDS-Specific Bind Variables</a><br>
<br>
  ORDS: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Oracle REST Data Services (ORDS)&nbsp;: Authentication</a><br>
<br>
ORDS  Open API (Swagger): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Oracle REST Data Services (ORDS)&nbsp;: Open API 2.0 (Swagger) Support</a><br>
<br>
ORDS,  BLOB: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ORDS web services returning BLOBs</a> <br>
<br>
<b>Java Servlet </b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Writing Oracle XML DB HTTP Servlets in Java</a><br>
<br>
<b>Database Access Descriptor (PL/SQL Servlet)</b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DBMS_EPG — The Embedded PL/SQL Gateway in Oracle 10g Database Release 2</a> <br>
</div>
                    </div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de501998/index.html">Teurer Preis für Stile. Yandex-Bericht</a></li>
<li><a href="../de502000/index.html">12 Data Engineering Online-Kurse</a></li>
<li><a href="../de502004/index.html">Kanban-Methode: Verstehen Sie Ihren Prozess als kollektiven Wissensaufbauprozess - Teil 1 (Rezepte)</a></li>
<li><a href="../de502008/index.html">Programmierung für die Massen</a></li>
<li><a href="../de502028/index.html">Vanya geht zu Großmutter oder dynamischem JavaScript adaptiv</a></li>
<li><a href="../de502034/index.html">Kontrollierte und unkontrollierte Komponenten in React müssen nicht kompliziert sein</a></li>
<li><a href="../de502038/index.html">Ein Atom anheben, Ansatz 2.0.1</a></li>
<li><a href="../de502040/index.html">Über Phrasal Verbs-5 (hoch / runter)</a></li>
<li><a href="../de502046/index.html">Fünf Jahre Rost</a></li>
<li><a href="../de502048/index.html">Komplexes Verhalten ohne neuronale Netze und Training. Die philosophische Basis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>