<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐍 🦐 🤔 书籍“ Kubernetes模式：本机云应用程序开发模式” 🤵🏽 👩🏽‍✈️ 🖕🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="您好，habrozhiteli！
 
 随着微服务和容器的发展，设计，创建和启动软件的方法已经改变。探索实现Kubernetes云应用程序所需的新设计模式和原理。
 
 本书适用于希望为Kubernetes平台设计和开发基于云的应用程序的开发人员。这样做的最大好处是，至少对容器有一点点了解并希望提高...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>书籍“ Kubernetes模式：本机云应用程序开发模式”</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/490844/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/z1/xp/jr/z1xpjrbdjk7o8hr1ydymen7sxsm.jpeg" align="left" alt="图片"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您好，habrozhiteli！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
随着微服务和容器的发展，设计，创建和启动软件的方法已经改变。</font><font style="vertical-align: inherit;">探索实现Kubernetes云应用程序所需的新设计模式和原理。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本书适用于希望为Kubernetes平台设计和开发基于云的应用程序的开发人员。</font><font style="vertical-align: inherit;">这样做的最大好处是，至少对容器有一点点了解并希望提高到一个新水平的读者。</font><font style="vertical-align: inherit;">每个设计模式都是对实际问题的描述，解决方案受特定代码示例的支持和说明。</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">摘抄。</font><font style="vertical-align: inherit;">边车图案</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sidecar模式（Trailer）用于定义一个容器，该容器在不更改现有容器的情况下扩展了其功能。</font><font style="vertical-align: inherit;">这是基本的容器模式之一，它使您可以创建相互紧密协作的高度专业化的容器。</font><font style="vertical-align: inherit;">在本章中，您将学习与Sidecar模式（Trailer）概念有关的所有内容。</font><font style="vertical-align: inherit;">在第16章和第17章中，您将熟悉这种模式的特殊变体-分别为Adapter和Ambassador模式。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任务</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
容器是一种流行的打包技术，它允许开发人员和系统管理员以统一的方式创建，交付和运行应用程序。容器通过其运行时，发布周期，API和它所属的开发团队来代表功能单元的自然边界。一个典型的容器就像在Linux上的一个进程一样，可以解决一个问题，并且可以很好地完成它，并且是在具有替换和重用可能性的前提下创建的。后者特别重要，因为它使您可以使用现有的专用容器快速创建应用程序。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当前，为了发送HTTP请求，您无需编写客户端库，只需使用现有的客户端库即可。</font><font style="vertical-align: inherit;">同样，要维护网站，您无需使用Web服务器创建容器，只需使用现有的容器即可。</font><font style="vertical-align: inherit;">这种方法使开发人员不必重新发明轮子，而是创建具有更少容器的生态系统，以提供更好的维护质量。</font><font style="vertical-align: inherit;">但是，为了能够使用高度专业化的可重用容器，需要扩展其功能的方法以及用于组织它们之间的交互的方法。</font><font style="vertical-align: inherit;">Sidecar模式（Trailer）描述了一种当一个容器扩展另一个现有容器的功能时组织交互的方式。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决断</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在第1章中，我们了解了Pod如何使您将多个容器组合成一个块。在运行时，在幕后还有一个容器，但它是在炉膛中所有其他容器前面的一个暂停（实际上是使用pause命令）过程开始的。它什么也不做，只存储应用程序容器在整个pod生命周期中用于交互的所有Linux名称空间。除了此实现细节之外，炉床抽象提供的所有特征也很有趣。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Under是一个基本的原语，它存在于许多云平台中，尽管名称不同，但始终具有相似的功能。作为部署单元，在其下对其容器施加某些运行时限制。例如，所有容器都部署在一个节点上并具有共同的生命周期。另外，under允许其容器使用共享卷并通过本地网络或使用主机进程间通信工具交换数据。这就是为什么用户将容器组合到容器中的原因。 Sidecar模式（Trailer），有时也称为Sidekick（Companion），描述了向下方添加一个容器以扩展另一个容器的功能的场景。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
演示此模式的典型示例是HTTP服务器以及与Git存储库的同步机制。 HTTP服务器容器解决了与通过HTTP服务文件相关的问题，并且不知道这些文件的来源和来源。同样，与Git进行同步的容器的唯一目的是使本地文件系统中的数据与Git服务器上的数据同步。他不在乎同步后文件将如何处理，他的唯一任务是将本地文件夹的内容与远程Git服务器上的内容进行同步。清单15.1提供了一个pod定义，其中两个容器配置为使用该卷进行文件共享。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
清单15.1 Sidecar模式实施（预告片）</font></font><br>
<br>
<pre><code class="bash hljs">apiVersion: v1<font></font>
kind: Pod<font></font>
metadata:<font></font>
    name: web-app<font></font>
spec:<font></font>
    containers:<font></font>
    - name: app<font></font>
      image: docker.io/centos/httpd ❶<font></font>
      ports:<font></font>
      - containerPort: 80<font></font>
      volumeMounts:<font></font>
      - mountPath: /var/www/html ❸<font></font>
      name: git<font></font>
    - name: poll<font></font>
      image: axeclbr/git ❷<font></font>
      volumeMounts:<font></font>
      - mountPath: /var/lib/data ❸<font></font>
        name: git<font></font>
      env:<font></font>
      - name: GIT_REPO<font></font>
         value: https://github.com/mdn/beginner-html-site-scripted<font></font>
      <span class="hljs-built_in">command</span>:<font></font>
      - <span class="hljs-string">"sh"</span>
      - <span class="hljs-string">"-c"</span>
      - <span class="hljs-string">"git clone <span class="hljs-subst">$(GIT_REPO)</span> . &amp;&amp; watch -n 600 git pull"</span><font></font>
      workingDir: /var/lib/data<font></font>
volumes:<font></font>
- emptyDir: {}<font></font>
      name: git</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（1）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主应用程序容器通过HTTP提供文件。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（2）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并行运行的辅助容器（拖车），并从Git服务器接收数据。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（3）一个</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">共享文件夹，用于在主容器和辅助容器之间交换数据。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此示例显示了具有Git的同步容器如何添加HTTP服务器要提供的内容并使其保持最新状态。</font><font style="vertical-align: inherit;">您也可以说两个容器紧密合作，并且同等重要，但是Sidecar模式（Trailer）假设存在一个主容器（主容器）和辅助容器，这些容器扩展了集体行为。</font><font style="vertical-align: inherit;">通常，主要容器在容器列表中排在第一位，并代表默认容器（例如，由kubectl exec命令启动）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这种简单的模式如图2所示。</font><font style="vertical-align: inherit;">15.1确保容器在运行时紧密协作，同时允许使用不同的编程语言，不同版本的发布周期等共享可能属于不同开发团队的任务。它还促进了容器的互换性和重用性-从某种意义上说，HTTP服务器和Git同步机制可以在其他应用程序和其他设置中独立使用或与其他容器结合使用。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/28/5g/wy/285gwyeypygwt7r2pkwue45p_7y.jpeg" alt="图片"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">说明</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上面已经说过，容器图像类似于类，并且容器类似于面向对象编程（OOP）中的对象。继续这个类比，我们可以将容器功能的扩展与OOP中的继承进行比较，并将多个容器在炉膛中的联合工作与在OOP中接收组合进行比较。这两种方法都允许代码重用，但是继承定义了更紧密的关系并表示容器之间的“是”关系。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
炉膛中的成分代表“有”的关系-更加灵活，因为在组装过程中不需要容器的组合，这使得稍后可以在炉膛定义中更改容器。但是组合还意味着存在同时运行的多个容器（进程），以及主应用程序容器，这些容器必须进行可操作性检查并重新启动并消耗资源，并且这些容器（进程）也必须同时运行。 Sidecar模式（Trailer）涉及创建占用最少资源的小型辅助容器，但是您决定是启动一个单独的进程还是将所有任务更好地组合到一个主容器中。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从另一个角度来看，容器的组成类似于面向方面的编程，当使用其他容器时，与主容器无关的正交（独立）功能将添加到子容器中。</font><font style="vertical-align: inherit;">最近几个月，Sidecar模式已经越来越流行，特别是对于网络管理和服务监视任务，其中每项服务还以辅助容器的形式出现。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
»关于这本书的更多信息上可以找到</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出版商的网站</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
» </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
» </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">摘录</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
对于Khabrozhiteley 25％的优惠券折扣- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
在缴付书的纸质版本，电子书是通过电子邮件发送。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN490832/index.html">鞋标：当我们投入流通时，有200万种标码“ 1C” +“诚实标志”</a></li>
<li><a href="../zh-CN490836/index.html">如何打开评论而不被垃圾邮件淹没</a></li>
<li><a href="../zh-CN490838/index.html">WiFi 6在这里：市场提供什么以及我们为什么需要这种技术</a></li>
<li><a href="../zh-CN490840/index.html">资源规划。第4.1部分。在制定资源计划之前</a></li>
<li><a href="../zh-CN490842/index.html">图片中的GPT-2（变形金刚语言模型的可视化）</a></li>
<li><a href="../zh-CN490846/index.html">我们如何为卡拉什尼科夫学院开发网站并成为两项比赛的获奖者</a></li>
<li><a href="../zh-CN490850/index.html">帮助编译器帮助您</a></li>
<li><a href="../zh-CN490852/index.html">详细介绍SpinLaunch-航天工业中最热衷的秘密</a></li>
<li><a href="../zh-CN490854/index.html">使用AI对物品进行分类的仓库机器人已准备就绪</a></li>
<li><a href="../zh-CN490856/index.html">汽车地牢大师</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>