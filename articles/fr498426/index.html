<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥓 🎌 💆🏿 Comment nous avons évacué le changement de service de Yandex 🤸🏻 🤦🏽 💐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lorsque le travail tient dans un ordinateur portable et peut être effectué de manière autonome par rapport à d'autres personnes, il n'y a aucun problè...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons évacué le changement de service de Yandex</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/498426/"><img src="https://habrastorage.org/webt/as/kx/qr/askxqrmenpitf9-j1es44_nly14.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque le travail tient dans un ordinateur portable et peut être effectué de manière autonome par rapport à d'autres personnes, il n'y a aucun problème à se déplacer vers un endroit éloigné - restez simplement à la maison le matin. </font><font style="vertical-align: inherit;">Mais tout le monde n'a pas eu autant de chance. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Duty Shift est une équipe de spécialistes de la disponibilité des services (SRE). </font><font style="vertical-align: inherit;">Il comprend des administrateurs de service, des développeurs, des gestionnaires, ainsi qu'un «tableau de bord» commun de 26 panneaux LCD de 55 pouces chacun. </font><font style="vertical-align: inherit;">La stabilité des services de l'entreprise et la rapidité de résolution des problèmes dépendent du travail du quart de travail. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aujourd'hui Dmitry Melikov</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tal10n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, le superviseur de quart, parlera de la façon dont ils ont réussi à transporter l'équipement à leur domicile et à établir de nouveaux processus de travail en quelques jours. </font><font style="vertical-align: inherit;">Je lui donne la parole.</font></font><br>
<br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Lorsque vous avez une quantité infinie de temps, vous pouvez vous déplacer confortablement avec n'importe quoi n'importe où. </font><font style="vertical-align: inherit;">Mais la propagation rapide du coronavirus nous a mis dans des conditions complètement différentes. </font><font style="vertical-align: inherit;">Les employés de Yandex ont été parmi les premiers à passer au travail à distance - avant même l'introduction du régime d'auto-isolement. </font><font style="vertical-align: inherit;">C'est arrivé comme ça. </font><font style="vertical-align: inherit;">Le jeudi 12 mars, on m'a demandé d'évaluer l'opportunité de transférer le travail de l'équipe à la maison. </font><font style="vertical-align: inherit;">Vendredi 13, il a été recommandé de passer au travail à distance. </font><font style="vertical-align: inherit;">Dans la nuit du mardi 17 mars, tout était prêt pour nous: les préposés ont travaillé à domicile, le matériel a été transporté, le logiciel manquant a été écrit, les processus ont été reconfigurés. </font><font style="vertical-align: inherit;">Et maintenant je vais vous dire comment nous l'avons fait. </font><font style="vertical-align: inherit;">Mais vous devez d'abord vous souvenir des tâches qui sont résolues par le quart de travail.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qui nous sommes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yandex est une grande entreprise avec des centaines de services. La stabilité de la recherche, de l'assistant vocal et de tous les autres produits ne dépend pas seulement des développeurs. Le centre de données peut interrompre l'alimentation. Un travailleur peut accidentellement endommager un câble optique lors du remplacement de l'asphalte. Ou il peut y avoir une augmentation de l'activité des utilisateurs, qui nécessitera une réallocation urgente de l'alimentation. De plus, nous vivons tous dans une grande infrastructure complexe et la libération de l'un des produits peut accidentellement entraîner la dégradation de l'autre.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
26 panneaux dans notre espace ouvert sont un millier et demi d'alertes et plus d'une centaine de graphiques et panneaux de nos services. En fait, c'est un énorme panneau de diagnostic. Un administrateur de service expérimenté, en la regardant, comprend rapidement l'état des nœuds importants et peut établir une direction pour enquêter sur un problème technologique. Cela ne signifie pas qu'une personne doit constamment regarder tous les appareils: l'automatisation elle-même attirera l'attention en envoyant une notification à l'interface spéciale de la personne de garde, mais sans panneau visuel, la solution au problème peut être retardée. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque des problèmes surviennent, le préposé évalue d'abord leur priorité. Il isole ensuite le problème ou minimise son impact sur les utilisateurs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe plusieurs façons standard d'isoler un problème. L'un d'eux est la dégradation des services, lorsque l'administrateur en service désactive certaines des fonctions que les utilisateurs remarquent le moins. Cela vous permet de réduire temporairement la charge et de comprendre ce qui s'est passé. En cas de problème avec le centre de données, le préposé contacte l'équipe d'exploitation, comprend le problème, surveille le timing de sa solution et, si nécessaire, met en relation des équipes spécialisées. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque l'administrateur en service ne peut pas isoler le problème survenu en raison de la publication, il le signale à l'équipe de service - et les développeurs recherchent des erreurs dans le nouveau code. S'ils ne sont pas en mesure de le comprendre, l'administrateur attire des développeurs d'autres produits ou ingénieurs pour la disponibilité des services.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je peux parler longtemps de la façon dont tout est arrangé avec nous, mais je pense que j'ai déjà transmis l'essentiel. </font><font style="vertical-align: inherit;">Le quart de travail coordonne le travail de tous les services et contrôle les problèmes mondiaux. </font><font style="vertical-align: inherit;">Il est important que l'administrateur de garde ait un panneau de diagnostic devant les yeux. </font><font style="vertical-align: inherit;">C'est pourquoi lorsque vous passez au travail à distance, vous ne pouvez pas simplement prendre et donner à tout le monde un ordinateur portable. </font><font style="vertical-align: inherit;">Les graphiques et les alertes ne tiennent pas sur l'écran. </font><font style="vertical-align: inherit;">Que faire?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Idée</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au bureau, les dix administrateurs en poste travaillent en équipe derrière un tableau de bord, qui comprend 26 moniteurs, deux ordinateurs, quatre cartes vidéo NVIDIA Quadro NVS 810, deux blocs d'alimentation sans coupure et plusieurs accès réseau indépendants. Mais nous devions donner à chacun la possibilité de travailler à la maison. Il ne suffit tout simplement pas d’assembler un tel mur dans l’appartement (ma femme en sera particulièrement heureuse), nous avons donc décidé de créer une version portable qui peut être apportée et assemblée à la maison. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons commencé à expérimenter la configuration. Nous devions adapter tous les appareils sur moins d'écrans, donc la principale exigence pour le moniteur était une densité de pixels élevée. Parmi les moniteurs 4K disponibles dans notre environnement, le Lenovo P27u-10 a été choisi pour les tests.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Des ordinateurs portables, ils ont pris un MacBook Pro 16 pouces. </font><font style="vertical-align: inherit;">Il dispose d'un sous-système graphique assez puissant, nécessaire pour le rendu des images sur plusieurs écrans 4K, et de quatre connecteurs universels de type C. </font><font style="vertical-align: inherit;">Vous pouvez vous demander: pourquoi pas un bureau? </font><font style="vertical-align: inherit;">Le remplacement d'un ordinateur portable par exactement le même depuis un entrepôt est beaucoup plus facile et plus rapide que l'assemblage et la configuration d'une unité centrale identique. </font><font style="vertical-align: inherit;">Oui, et ça pèse moins. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il fallait maintenant comprendre combien de moniteurs nous pouvions réellement connecter à l'ordinateur portable. </font><font style="vertical-align: inherit;">Et le problème ici n'est pas le nombre de connecteurs, nous n'avons pu le découvrir qu'en testant le système complet.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6i/oe/tn/6ioetnysrbrhlu7qi03q5uorozy.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essai</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons placé assez confortablement tous les graphiques et alertes sur quatre moniteurs et les avons même connectés à un ordinateur portable, mais nous avons rencontré un problème. Le rendu des pixels 4 × 4K sur les moniteurs connectés a tellement chargé la carte vidéo que l'ordinateur portable a été déchargé même pendant le chargement. Heureusement, le problème a été résolu avec l'aide de la station d'accueil Lenovo ThinkPad Thunderbolt 3 Dock Gen 2. Nous avons réussi à connecter un moniteur, une alimentation et même une souris préférée avec un clavier à la station d'accueil.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais immédiatement un autre problème est apparu: le GPU a tellement soufflé que l'ordinateur portable a surchauffé, ce qui signifie que la batterie a également surchauffé, ce qui en conséquence est passé en mode de protection et a cessé de prendre en charge. En général, il s'agit d'un mode très utile qui protège contre les situations dangereuses. Dans certains cas, le problème a été résolu à l'aide d'un appareil de haute technologie - un stylo à bille, placé sous un ordinateur portable pour améliorer la ventilation. Mais cela n'a pas aidé tout le monde, nous avons donc également tordu la vitesse d'un ventilateur régulier.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y avait une autre caractéristique désagréable. </font><font style="vertical-align: inherit;">Tous les graphiques et alertes doivent être situés dans un endroit strictement défini. </font><font style="vertical-align: inherit;">Imaginez que vous pilotez un avion pour atterrir - et ici, les indicateurs de vitesse, altimètres, variomètres, indicateurs d'horizon, boussoles et indicateurs de position commencent à se redimensionner et à sauter à différents endroits. </font><font style="vertical-align: inherit;">Nous avons donc décidé de faire une application qui vous aidera. </font><font style="vertical-align: inherit;">En une soirée, nous l'avons écrit sur Electron.js, en prenant une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> prête à l'emploi </font><font style="vertical-align: inherit;">pour créer et gérer des fenêtres. </font><font style="vertical-align: inherit;">Nous avons ajouté un gestionnaire de configuration et leur mise à jour périodique, ainsi que la prise en charge d'un nombre limité de moniteurs. </font><font style="vertical-align: inherit;">Un peu plus tard, nous avons ajouté la prise en charge de diverses configurations.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assemblage et livraison</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lundi, les assistants du helpdesk avaient pour nous 40 moniteurs, dix ordinateurs portables et autant de stations d'accueil. Je ne sais pas comment ils l'ont fait, mais merci beaucoup. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y5/ig/_i/y5ig_i-32ogwdzgodtoghqxtkvs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il restait à porter tout cela dans les appartements des administrateurs de service. Et ce sont dix adresses dans différentes parties de Moscou: sud, est, centre, également Balashikha, qui est à 45 kilomètres du bureau (en passant, un stagiaire de Serpukhov a été ajouté plus tard). Il fallait en quelque sorte répartir tout cela entre les gens, pour construire la logistique.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai conduit toutes les adresses sur nos cartes, il y a encore la possibilité d'optimiser l'itinéraire entre différents points (j'ai utilisé la version beta gratuite de l'outil pour les coursiers). </font><font style="vertical-align: inherit;">Nous avons divisé notre équipe en quatre équipes indépendantes de deux personnes, chacune ayant son propre itinéraire. </font><font style="vertical-align: inherit;">Ma voiture était la plus spacieuse, j'ai donc pris l'équipement pour quatre employés à la fois. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l0/fa/sl/l0faslaayow0ip3rkaglz9nfmhm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La livraison entière a pris un record de trois heures. </font><font style="vertical-align: inherit;">Lundi, nous avons quitté le bureau à dix heures du soir. </font><font style="vertical-align: inherit;">À une heure du matin, j'étais déjà à la maison. </font><font style="vertical-align: inherit;">Cette même nuit, nous sommes partis en service avec de nouveaux équipements.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quel est le résultat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au lieu d'une grande console de diagnostic, nous en avons récupéré dix relativement portables dans l'appartement de chaque personne de service. </font><font style="vertical-align: inherit;">Bien sûr, il restait à régler quelques petites choses. </font><font style="vertical-align: inherit;">Par exemple, auparavant, nous avions un téléphone «en fer» de la personne de garde pour les notifications. </font><font style="vertical-align: inherit;">Dans les nouvelles conditions, cela n'a pas fonctionné, nous avons donc mis au point des «téléphones virtuels» pour les personnes en service (en fait, des canaux dans le messager). </font><font style="vertical-align: inherit;">Il y a eu d'autres changements. </font><font style="vertical-align: inherit;">Mais l'essentiel est qu'en un temps record, nous avons réussi à transférer non seulement des personnes, réduisant le risque d'infection, mais tout notre travail à domicile sans nuire aux processus et à la stabilité des produits. </font><font style="vertical-align: inherit;">Dans ce mode, nous travaillons depuis un mois. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous trouverez ci-dessous des photos des vrais emplois de nos préposés.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pc/mi/rj/pcmirjydwy5emc9qvy76fshoune.png"><br>
<br>
<img src="https://habrastorage.org/webt/jl/mm/v_/jlmmv_hymx3mh7aiyvda2noqbwk.png"><br>
<br>
<img src="https://habrastorage.org/webt/-b/5w/nz/-b5wnzqoyqixrodue2opshmjgnw.png"><br>
<br>
<img src="https://habrastorage.org/webt/xh/3u/wx/xh3uwxiartgspsynry7c9ufxfzs.png"><br>
<br>
<img src="https://habrastorage.org/webt/ll/a0/f0/lla0f0dinjjmlwsytvp7krxsbni.png"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr498406/index.html">Comment la personnalité d'un brillant jeune programmeur a été détruite</a></li>
<li><a href="../fr498410/index.html">Vivaldi pour PC et Vivaldi pour Android - Jeu d'équipe avec score 3.0</a></li>
<li><a href="../fr498412/index.html">La conscience est simple ou ce qui ne va pas avec le temps</a></li>
<li><a href="../fr498416/index.html">Yandex liera automatiquement la carte à un autre compte</a></li>
<li><a href="../fr498418/index.html">Implémentation de WebRTC dans un serveur multimédia - pratique et politique</a></li>
<li><a href="../fr498428/index.html">WAL-G: nouvelles fonctionnalités et extension de la communauté. Georgy Rylov</a></li>
<li><a href="../fr498430/index.html">Qu'arrive-t-il au transport le 22 avril</a></li>
<li><a href="../fr498436/index.html">Guide GitLab CI / CD pour le (presque) absolu débutant</a></li>
<li><a href="../fr498438/index.html">8 questions faciles pour les mentors de stage</a></li>
<li><a href="../fr498440/index.html">Pleins feux sur les menaces: virus de fichier Neshta</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>