<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😊 👶 ⚕️ Un guide modeste des schémas de base de données 🧕🏼 🌵 ✍️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Géométrie des fleurs par Mookiezoolook 
 
 Pour les applications qui évolueront en fonction du trafic et de la complexité, il est extrêmement importan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Un guide modeste des schémas de base de données</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/501598/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/al/m2/zoalm23rpnu233blf2nybyz6tk0.jpeg"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Géométrie des fleurs par Mookiezoolook</font></font></i></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pour les applications qui évolueront en fonction du trafic et de la complexité, il est extrêmement important de concevoir initialement un schéma de base de données compétent. Si vous faites un mauvais choix, vous devrez dépenser beaucoup d'efforts pour que ce mauvais modèle ne se propage pas aux services et aux contrôleurs de backend et, finalement, au frontend.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais comment évaluer quel circuit est le meilleur? Et que signifie «mieux» lorsque nous parlons d'architecture de base de données? L'équipe</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mail.ru Cloud Solutions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vous invite à</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> suivre les recommandations de Mike Alcha</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , consultant en développement logiciel. Il nous semble qu'il a résumé assez succinctement quelques principes d'une architecture compétente.</font></font><br>
<a name="habracut"></a><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tg/ed/6j/tged6jbyakg4f0no_up6r9c-9aw.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Directeur: </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je pense que nous devrions construire une base de données SQL </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">. </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">Développeur (comprend-il même de quoi il parle, ou a-t-il simplement vu une sorte de publicité dans un magazine professionnel? ..): </font></i><i><font style="vertical-align: inherit;">« </font></i><i><font style="vertical-align: inherit;">De quelle couleur voulez-vous la base de données? </font></i><i><font style="vertical-align: inherit;">". </font></i><i><font style="vertical-align: inherit;">Réalisateur: </font></i><i><font style="vertical-align: inherit;">" </font></i><i><font style="vertical-align: inherit;">Peut-être que le lilas a le plus de mémoire </font></i><i><font style="vertical-align: inherit;">. </font></i><i><font style="vertical-align: inherit;">"</font></i></font><i><font style="vertical-align: inherit;"></font></i><br>
<br>
<i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><br>
<br>
<i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelques conseils de base</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est donc important de viser </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deux choses principales</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque vous divisez des informations en tableaux, toutes les informations sont stockées.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La redondance de stockage est minime.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quant au deuxième point: voulons-nous réduire la redondance uniquement en raison d'un problème de taille de stockage? </font><font style="vertical-align: inherit;">Non, nous le faisons principalement parce que la présence de données redondantes entraîne </font></font><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des problèmes d'incohérence</font></font></strong></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> si vous ne mettez pas à jour tous les champs représentant les mêmes informations lors de la mise à jour. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici quelques conseils </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour se rapprocher d'une bonne architecture</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisez au moins un troisième formulaire normal (dans lequel chaque attribut non clé "doit fournir des informations sur la clé, la clé complète et rien que la clé", selon </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le libellé</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Bill Kent).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créez la dernière ligne de défense sous forme de restrictions.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ne stockez jamais des adresses entières dans un seul champ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ne stockez jamais le prénom et le nom dans un seul champ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Définissez des conventions pour les noms de table et de champ et respectez-les.</font></font></li>
</ol><br>
<i><div style="text-align:center;"><img src="https://habrastorage.org/webt/qu/lx/pr/qulxprdoqnbq5twc8dgw47qewry.jpeg"></div></i><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Sur quoi travailles-tu? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
" </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimiser cette requête SQL." </font><font style="vertical-align: inherit;">Cela ralentit et les utilisateurs commencent à se plaindre. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et un langage obscène dans les commentaires est </font></font></i><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nécessaire</font></font></strong></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour l'optimisation? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous avez vu le </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">code d' </font></i></font><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">origine</font></font></strong></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , vous ne demanderiez pas. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons ces recommandations plus en détail.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Utilisez au moins une troisième forme normale</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'architecture de la base de données peut être divisée dans les catégories suivantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La première forme normale.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La deuxième forme normale.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Troisième forme normale.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La forme normale de Boyce-Codd.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces catégories représentent une classification par qualité. </font><font style="vertical-align: inherit;">Nous passerons brièvement en revue toutes les catégories et verrons pourquoi au moins une troisième forme normale est nécessaire.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Première forme normale</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour la première forme normale, chaque valeur de chaque colonne de chaque table de la base de données doit être atomique. </font><font style="vertical-align: inherit;">Que signifie atomique? </font><font style="vertical-align: inherit;">Bref, la valeur atomique est une «chose unique». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, nous avons un tableau comme celui-ci:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prénom</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nom de famille</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">âge</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">domaines</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jhon</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Biche</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{«Conception de site Web», «Recherche de clientèle»}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marie</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jeanne</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{«Planification stratégique à long terme», «Recrutement»}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À M</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Forgeron</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"Commercialisation"}</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, la colonne des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zones</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contient des valeurs qui ne sont pas atomiques. </font><font style="vertical-align: inherit;">Par exemple, dans une ligne John Doe, le champ stocke deux entités: la conception de sites Web et la recherche de clients. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce tableau n'est donc pas dans la première forme normale. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour l'amener à ce formulaire, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">une seule valeur doit être stockée dans chaque champ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deuxième forme normale</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la deuxième forme normale, aucune colonne qui ne fait pas partie de la clé primaire (ou qui peut faire partie d'une autre clé primaire) ne peut être dérivée de la </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plus petite partie de la clé primaire</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'est-ce que ça veut dire? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons que vous ayez une telle architecture de base (j'ai souligné les champs correspondant à la clé primaire dans ce tableau):</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">employé_id</font></font></u></td>
<td><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project_id</font></font></u></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heures</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nom de l'employé</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nom du projet</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dix</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">John</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«Conception de site Web»</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vingt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marie</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«Conception de site Web»</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce projet, le nom de l'employé peut être directement déduit de employeee_id, car l'idée est que le nom de l'employé est uniquement déterminé par son identifiant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De même, le nom du projet est identifié de manière unique par l'identifiant project_id. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, nous avons deux colonnes qui peuvent être déduites de la partie clé primaire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chacun de ces exemples suffirait à jeter ce tableau hors de la deuxième forme normale. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre conclusion est que si la table était dans la première forme normale et que toutes les clés primaires sont des colonnes uniques, la table est déjà dans la deuxième forme normale.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Troisième forme normale</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour que la table corresponde à la troisième forme normale, elle doit être dans la deuxième forme normale, alors qu'il ne doit y avoir aucun attribut (colonnes), à l'exception du principal, qui dépend transitoirement de la clé primaire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'est-ce que ça veut dire? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Disons que vous avez l'architecture suivante (ce qui est loin d'être idéal):</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nom de l'employé</font></font></td>
<td><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">employé_id</font></font></u></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">âge</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">numéro_département</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nom du département</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">John</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Commercialisation"</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marie</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">456</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Opérationnel"</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À M</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Commercialisation"</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce tableau, department_number peut être déduit de employee_id et department_name peut être déduit de department_number. Donc, nom_département dépend transitoirement de l'employé_id! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S'il existe une telle dépendance transitive: id_employé → numéro_département → nom_département, alors cette table n'est pas sous la troisième forme normale. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quels problèmes surviennent à cause de cela</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si le nom du service peut être dérivé de son numéro, le stockage de ce champ pour chaque employé entraîne une redondance excessive. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez que le service marketing change de nom pour "Marketing et ventes". Pour maintenir la cohérence, vous devrez mettre à jour la cellule de chaque ligne du tableau pour chaque employé de ce département! Dans la troisième forme normale, cela ne serait pas arrivé.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, voici ce qui se passe si Mary décide de quitter l'entreprise: nous devons supprimer sa ligne du tableau, mais si elle était la seule employée du service des opérations, alors le service devra également être supprimé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous ces problèmes peuvent être complètement évités sous une troisième forme normale.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c45/93e/423/c4593e423e573702d0039506bdbe562f.png"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les exploits de maman</font></font></i></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Le nom de sa fille est Help! </font><font style="vertical-align: inherit;">Je suis forcé de truquer les passeports</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Créer la dernière ligne de défense sous forme de restrictions</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La base de données avec laquelle vous travaillez est plus qu'un simple groupe de tables. Certaines fonctionnalités y sont intégrées. Beaucoup de ces fonctionnalités contribuent à garantir la qualité et la précision des données. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les restrictions définissent les règles, les valeurs pouvant être saisies dans les champs de la base de données. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la définition de relations dans une base de données, veillez à définir des contraintes de clé étrangère. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veillez à spécifier ce qui doit se produire lors de la suppression et de la mise à jour d'une ligne associée à d'autres lignes dans d'autres tables (règles ON DELETE et ON UPDATE). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veillez à utiliser NOT NULL pour tous les champs qui ne doivent jamais être annulés. Il peut être judicieux de définir une vérification sur le backend, mais n'oubliez pas que les plantages se produisent toujours, donc l'ajout de ce type de restriction ne nuira pas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Définissez les limites de vérification CHECK pour vous assurer que les valeurs du tableau sont dans la plage acceptable, par exemple, le prix d'un produit a toujours une valeur positive. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un fait intéressant</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : en avril 2020, c'est une telle restriction dans les logiciels qui a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">empêché la négociation sur le MICEX de Moscou</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> car le prix des contrats à terme sur le pétrole WTI est tombé en dessous de zéro. </font><font style="vertical-align: inherit;">Contrairement à la bourse de Moscou, le New York Mercantile Exchange NYMEX a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mis à jour le logiciel une semaine avant l'incident</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , de sorte qu'il a pu mener à bien les transactions à un prix négatif, c'est-à-dire avec un supplément à l'acheteur du vendeur - env. </font><font style="vertical-align: inherit;">trans. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes les limitations de PostgreSQL peuvent être trouvées </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Ne stockez jamais des adresses entières dans un seul champ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si votre application ou votre site Web a un formulaire avec un champ où l'utilisateur entre son adresse, cela sent mauvais. Il est très probable que dans ce cas, vous disposiez également d'un champ dans la base de données pour stocker l'adresse sous la forme d'une chaîne simple. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais que faire si vous devez combiner les achats des clients par ville afin de voir quelle ville quel produit est le plus populaire? pouvez-vous le faire? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce sera très dur! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Étant donné que l'adresse complète est stockée sous forme de chaîne dans le champ de la base de données, vous devrez d'abord déterminer la proportion de cette chaîne dans la ville! Et c'est une tâche presque impossible, étant donné tous les formats d'adresse possibles dans ce domaine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par conséquent, assurez-vous de diviser le champ universel "Adresse" en champs spécifiques: rue, numéro de maison, ville, région, code postal, etc.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un autre problème d'adresse - Champs anonymes</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici une illustration tirée du livre de Michaels Blach, The Copper Bullet pour améliorer la qualité des logiciels:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b98/165/d9e/b98165d9e6cd4b9e43350285a75609ba.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quels problèmes potentiels sont visibles ici? </font><font style="vertical-align: inherit;">Pouvez-vous facilement distinguer la ville de Chicago des rues de Chicago? </font><font style="vertical-align: inherit;">Probablement pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par conséquent, n'oubliez pas de toujours donner des noms de colonne clairs à chaque unité d'information.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0e/te/dp/0etedpf1hxfr2sci5m1jliwd4zi.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment rédiger un CV</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avez-vous de l'expérience en SQL? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Non (non). </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alors écrivez: expert NoSQL.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Ne stockez jamais le prénom et le nom dans un seul champ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Similaire à la situation avec les adresses: le nombre de variations du nom et du prénom est trop important pour les distinguer clairement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien sûr, vous pouvez séparer le nom du nom de famille, s'il y a un espace entre eux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, «Mike Alche» → le nom «Mike» et le nom de famille «Alche». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais que se passe-t-il si l'utilisateur entre un deuxième prénom? Ou a-t-il un double nom de famille? Mais qu'en est-il s'il y a un deuxième prénom et un double nom de famille? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment déterminer où est le nom et où est le nom de famille pour diviser la chaîne? Les erreurs sont inévitables. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un moyen d'éviter de nombreux problèmes consiste à créer des champs distincts (dans les formulaires) pour les noms d'utilisateur prénom et nom. De cette façon, vous autorisez les utilisateurs à partager leurs propres noms et pouvez stocker des données de manière cohérente. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Je ne dis pas que les espaces sont interdits dans les champs de la base de données. </font><font style="vertical-align: inherit;">Par exemple, pour des noms tels que Juan Martin Del Potro, la première partie de Juan Martin est dans le champ first_name et Del Potro est dans le champ last_name. </font><font style="vertical-align: inherit;">Bien sûr, ce n'est </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pas parfait</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Vous pouvez éventuellement avoir les colonnes middle_name et second_last_name. </font><font style="vertical-align: inherit;">Pour en savoir plus sur les variations possibles des prénoms et des noms de famille, consultez la liste « </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Idées fausses des programmeurs sur les noms</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> » et l'article « </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Idées fausses des programmeurs sur les noms - avec des exemples</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> » </font><font style="vertical-align: inherit;">Vous devez vous mettre d'accord sur une sorte de compromis entre précision et praticité.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Définissez des conventions pour les noms de table et de champ et respectez-les</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est assez ennuyeux de travailler avec des données qui ressemblent à user.firstName, user.lst_name, user.birthDate et ainsi de suite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vous conseillerais d'établir des règles de dénomination de soulignement, car tous les moteurs SQL ne gèrent pas les lettres majuscules de la même manière, et tout mettre entre guillemets est très fastidieux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Choisissez la même chose que d'appeler les tables - au pluriel ou au singulier (par exemple, les utilisateurs au pluriel ou l'utilisateur au singulier). </font><font style="vertical-align: inherit;">J'aime plus le singulier, mais tous les frameworks backend semblent être pluriels par défaut. </font><font style="vertical-align: inherit;">Vous devez suivre le modèle et utiliser le pluriel. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quoi d'autre à lire</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelle base de données choisir pour le projet, afin que vous n'ayez pas à choisir à nouveau</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   IIoT-:  Mail.ru Cloud Solutions       </a>.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">      </a>.</li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr501582/index.html">Comment les prix dynamiques sur Amazon et AliExpress conduisent à 24 millions de dollars de marchandises</a></li>
<li><a href="../fr501588/index.html">Grands tests de processeurs de diverses architectures</a></li>
<li><a href="../fr501590/index.html">Articles en anglais: Merciless War of Rules and Exceptions</a></li>
<li><a href="../fr501594/index.html">Échapper au zoo ou comment j'ai fait des jeux occasionnels sur iOS</a></li>
<li><a href="../fr501596/index.html">Comment faciliter la vie lors de l'utilisation de Git (ainsi qu'une sélection de matériaux pour une immersion profonde)</a></li>
<li><a href="../fr501600/index.html">Console de jeux stm32</a></li>
<li><a href="../fr501604/index.html">Traduction du livre d'Andrew Un, Passion for Machine Learning. Chapitres 51 et 52</a></li>
<li><a href="../fr501610/index.html">Barre de défilement personnalisée en angulaire</a></li>
<li><a href="../fr501612/index.html">Quelle carte graphique choisir pour votre ordinateur en 2020</a></li>
<li><a href="../fr501614/index.html">Antipatterns PostgreSQL: quelle est la profondeur du trou du lapin? passer par la hiérarchie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>