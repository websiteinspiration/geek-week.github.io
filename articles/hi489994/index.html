<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тЩгя╕П ЁЯТк ЁЯзХЁЯП╛ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдЯрд┐рдкреНрд╕ рдПрдВрдб рдЯреНрд░рд┐рдХреНрд╕: рдПрдирдЬреАрдЖрдИрдПрдирдПрдХреНрд╕ рдФрд░ рдкреАрдПрдЪрдкреА-рдПрдлрдкреАрдПрдо рдореЗрдВ рд╕реБрд╢реЛрднрд┐рдд рд╢рдЯрдбрд╛рдЙрди рд░рдирдЯрд╛рдЗрдо рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ ЁЯО│ ЁЯМН ЁЯПб</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kubernetes рдореЗрдВ CI / CD рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реНрдерд┐рддрд┐: рдЖрд╡реЗрджрди рдХреЛ рд░реЛрдХрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдирдП рдХреНрд▓рд╛рдЗрдВрдЯ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдЯрд┐рдкреНрд╕ рдПрдВрдб рдЯреНрд░рд┐рдХреНрд╕: рдПрдирдЬреАрдЖрдИрдПрдирдПрдХреНрд╕ рдФрд░ рдкреАрдПрдЪрдкреА-рдПрдлрдкреАрдПрдо рдореЗрдВ рд╕реБрд╢реЛрднрд┐рдд рд╢рдЯрдбрд╛рдЙрди рд░рдирдЯрд╛рдЗрдо рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/489994/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes рдореЗрдВ CI / CD рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реНрдерд┐рддрд┐: рдЖрд╡реЗрджрди рдХреЛ рд░реЛрдХрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдирдП рдХреНрд▓рд╛рдЗрдВрдЯ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдФрд░ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд, рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдореМрдЬреВрджрд╛ рд╡рд╛рд▓реЗ рдХреЛ рдкреВрд░рд╛ рдХрд░рдирд╛ред </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ka/ry/ef/karyefzfd99wtpxne9r_o73wies.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдХрд╛ рдЕрдиреБрдкрд╛рд▓рди рдЖрдкрдХреЛ рддреИрдирд╛рддреА рдХреЗ рджреМрд░рд╛рди рд╢реВрдиреНрдп рдбрд╛рдЙрдирдЯрд╛рдЗрдо рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдмрд╣реБрдд рд▓реЛрдХрдкреНрд░рд┐рдп рдмрдВрдбрд▓реЛрдВ (рдЬреИрд╕реЗ рдХрд┐ NGINX рдФрд░ PHP-FPM) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рдЖрдк рдХрдард┐рдирд╛рдЗрдпреЛрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╣рд░ рддреИрдирд╛рддреА рдХреЗ рд╕рд╛рде рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХрд╛ рдПрдХ рдмрдбрд╝рд╛ рдХрд╛рд░рдг рд╣реЛрдЧрд╛ ...</font></font><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд┐рджреНрдзрд╛рдВрддред </font><font style="vertical-align: inherit;">рдлрд▓реА рдХреИрд╕реЗ рд░рд╣рддреА рд╣реИ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдордиреЗ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рд▓реЗрдЦ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреЙрдб рдЬреАрд╡рди рдЪрдХреНрд░ рдХреЗ рдмрд╛рд░реЗ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдореЗрдВ</font></a><font style="vertical-align: inherit;"> рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд┐рдпрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред рдЗрд╕ рд╡рд┐рд╖рдп рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ, рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ: рдЙрд╕ рд╕рдордп рдЬрдм рдкреЙрдб </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯрд░реНрдорд┐рдиреЗрдЯрд┐рдВрдЧ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">, рддреЛ рдирдП рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рдирд╛ рдмрдВрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ ( </font><font style="vertical-align: inherit;">рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рд╕рдорд╛рдкрди рдмрд┐рдВрджреБ рдХреА рд╕реВрдЪреА рд╕реЗ </font><font style="vertical-align: inherit;">рдкреЙрдб </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )ред рдЗрд╕ рдкреНрд░рдХрд╛рд░, рддреИрдирд╛рддреА рдХреЗ рджреМрд░рд╛рди рдбрд╛рдЙрдирдЯрд╛рдЗрдо рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдорд╛рд░реЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рд▓рд┐рдП, рдЖрд╡реЗрджрди рдХреА рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рднреА рдпрд╛рдж рд░рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдЕрдиреБрдЧреНрд░рд╣ рдЕрд╡рдзрд┐ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">30 рд╕реЗрдХрдВрдб</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣реИ </font><font style="vertical-align: inherit;">: рдЗрд╕рдХреЗ рдмрд╛рдж, рдлрд▓реА рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдЖрд╡реЗрджрди рдХреЛ рдЗрд╕ рдЕрд╡рдзрд┐ рд╕реЗ рдкрд╣рд▓реЗ рд╕рднреА рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдзреНрдпрд╛рди рджреЗрдВ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: рд╣рд╛рд▓рд╛рдВрдХрд┐ рдХреЛрдИ рднреА рдЕрдиреБрд░реЛрдз рдЬреЛ 5-10 рд╕реЗрдХрдВрдб рд╕реЗ рдЕрдзрд┐рдХ рд╕рдордп рддрдХ рдЪрд▓рддрд╛ рд╣реИ, рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕рдорд╕реНрдпрд╛рдЧреНрд░рд╕реНрдд рд╣реИ, рдФрд░ рд╕реБрдВрджрд░ рд╢рдЯрдбрд╛рдЙрди рдЙрд╕реЗ рдЕрдм рдФрд░ рдорджрдж рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ ...</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рдпрд╣ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдкреЙрдб рдЕрдкрдирд╛ рдХрд╛рдо рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рджреМрд░рд╛рди рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИ, рдпрд╣ рдирд┐рдореНрди рдпреЛрдЬрдирд╛ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zx/pt/ou/zxptou-qe7zxqgab6pszsdo5vlk.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A1, B1 - рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A2 рдХреА </font><font style="vertical-align: inherit;">рд╕реНрдерд┐рддрд┐ </font><font style="vertical-align: inherit;">: SIGTERM </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
B2 </font><font style="vertical-align: inherit;">рднреЗрдЬрдирд╛ </font><font style="vertical-align: inherit;">- рд╕рдорд╛рдкрди рдмрд┐рдВрджреБ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
B3 </font><font style="vertical-align: inherit;">рд╕реЗ рдкреЙрдб рдирд┐рдХрд╛рд▓рдирд╛ </font><font style="vertical-align: inherit;">- рдкрд░рд┐рд╡рд░реНрддрди (рд╕рдорд╛рдкрди рдмрд┐рдВрджреБ рд╕реВрдЪреА рдмрджрд▓ рдЧрдИ рд╣реИ) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
B4 - iptables рдирд┐рдпрдо рдЕрджреНрдпрддрди рдХрд░рдирд╛</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рдиреЛрдЯ: рд╕рдорд╛рдкрди рдмрд┐рдВрджреБ рдкреЙрдб рдирд┐рдХрд╛рд▓рдирд╛ рдФрд░ SIGTERM рднреЗрдЬрдирд╛ рдХреНрд░рдорд┐рдХ рд░реВрдк рд╕реЗ рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдФрд░ рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ рдЗрдирдЧреНрд░реЗрдб рдХреЛ рддреБрд░рдВрдд рдПрдВрдбрдкреЙрдЗрдВрдЯ рдХреА рдПрдХ рдЕрджреНрдпрддрди рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реЗ рдирдП рдЕрдиреБрд░реЛрдз рдкреЙрдб рдореЗрдВ рднреЗрдЬреЗ рдЬрд╛рдПрдВрдЧреЗ, рдЬрд┐рд╕рд╕реЗ рдкреЙрдб рд╕рдорд╛рдкреНрддрд┐ рдХреЗ рджреМрд░рд╛рди 500 рддреНрд░реБрдЯрд┐рдпрд╛рдВ рд╣реЛрдВрдЧреА</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рд╣рдордиреЗ рдЗрд╕ рдореБрджреНрджреЗ рдкрд░ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддреГрдд рд╕рд╛рдордЧреНрд░реА рдХрд╛ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрд╡рд╛рдж рдХрд┐рдпрд╛ рд╣реИ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рдЖрдкрдХреЛ рдирд┐рдореНрди рддрд░реАрдХреЛрдВ рд╕реЗ рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрдиреЗрдХреНрд╢рди рдХреЗ рд╣реЗрдбрд░ рдореЗрдВ рднреЗрдЬреЗрдВ: рдирдЬрджреАрдХреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ (рдпрджрд┐ рдпрд╣ HTTP рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреА рдЪрд┐рдВрддрд╛ рдХрд░рддрд╛ рд╣реИ)ред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдпрджрд┐ рдХреЛрдб рдореЗрдВ рдмрджрд▓рд╛рд╡ рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рд▓реЗрдЦ рдПрдХ рд╕рдорд╛рдзрд╛рди рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдЕрдиреБрдЧреНрд░рд╣ рдЕрд╡рдзрд┐ рдХреЗ рдЕрдВрдд рддрдХ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд┐рджреНрдзрд╛рдВрддред </font><font style="vertical-align: inherit;">рдХреИрд╕реЗ NGINX рдФрд░ PHP-FPM рдЕрдкрдиреА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nginx</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдирдЬреАрдЖрдИрдПрдирдПрдХреНрд╕ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдХреЗ рд╕рд╛рде рд╕рдм рдХреБрдЫ рдХрдо рдпрд╛ рдЬреНрдпрд╛рджрд╛ рд╕реНрдкрд╖реНрдЯ рд╣реИред </font><font style="vertical-align: inherit;">рд╕рд┐рджреНрдзрд╛рдВрдд рдореЗрдВ рдбреВрдмреЗ рд╣реБрдП, рд╣рдо рд╕реАрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдПрдирдЬреАрдЖрдИрдПрдирдПрдХреНрд╕ рдореЗрдВ рдПрдХ рдорд╛рд╕реНрдЯрд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реИ рдФрд░ рдХрдИ "рдХрд╛рд░реНрдпрдХрд░реНрддрд╛" рд╣реИрдВ - рдпреЗ рдмрдЪреНрдЪреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рд╣реИрдВ рдЬреЛ рдХреНрд▓рд╛рдЗрдВрдЯ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддреА рд╣реИрдВред </font><font style="vertical-align: inherit;">рдПрдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╕реБрд╡рд┐рдзрд╛ рдкреНрд░рджрд╛рди рдХреА рдЬрд╛рддреА рд╣реИ: </font></font><code>nginx -s &lt;SIGNAL&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддреЗрдЬреА рд╕реЗ рдмрдВрдж рдореЛрдб рдореЗрдВ рдпрд╛ рд╕реБрдВрджрд░ рд╢рдЯрдбрд╛рдЙрди рдореЗрдВ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ </font><font style="vertical-align: inherit;">рдХреЛ </font><font style="vertical-align: inherit;">рд╕рдорд╛рдкреНрдд </font><font style="vertical-align: inherit;">рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЬрд╛рд╣рд┐рд░ рд╣реИ, рд╣рдо рдареАрдХ рдмрд╛рдж рд╡рд╛рд▓реЗ рд╡рд┐рдХрд▓реНрдк рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рддрдм рд╕рдм рдХреБрдЫ рд╕рд░рд▓ рд╣реИ: рдЖрдкрдХреЛ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░реАрд╕рдЯреЙрдк рд╣реБрдХ рдореЗрдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдХрдорд╛рдВрдб</font></a><font style="vertical-align: inherit;"> рдЬреЛрдбрд╝рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">рдЬреЛ рдХрд┐ рд╢рдЯрдбрд╛рдЙрди рд╢рдЯрдбрд╛рдЙрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рд╕рдВрдХреЗрдд рднреЗрдЬреЗрдЧрд╛ред </font><font style="vertical-align: inherit;">рдпрд╣ рдХрдВрдЯреЗрдирд░ рдмреНрд▓реЙрдХ рдореЗрдВ, рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:</font></font><br>
<br>
<pre><code class="plaintext hljs">       lifecycle:<font></font>
          preStop:<font></font>
            exec:<font></font>
              command:<font></font>
              - /usr/sbin/nginx<font></font>
              - -s<font></font>
              - quit</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм, рдЬрдм рдлрд▓реА NGINX рдХрдВрдЯреЗрдирд░ рд▓реЙрдЧ рдореЗрдВ рдЕрдкрдирд╛ рдХрд╛рдо рдкреВрд░рд╛ рдХрд░рддреА рд╣реИ, рддреЛ рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рджреЗрдЦреЗрдВрдЧреЗ:</font></font><br>
<br>
<pre><code class="plaintext hljs">2018/01/25 13:58:31 [notice] 1#1: signal 3 (SIGQUIT) received, shutting down<font></font>
2018/01/25 13:58:31 [notice] 11#11: gracefully shutting down</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реЛрдЧрд╛ рдХрд┐ рд╣рдореЗрдВ рдХреНрдпрд╛ рдЪрд╛рд╣рд┐рдП: NGINX рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдорд╛рд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рд╕рдорд╕реНрдпрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдиреАрдЪреЗ рдЪрд░реНрдЪрд╛ рдХреА рдЬрд╛рдПрдЧреА, рдЬрд┐рд╕рдХреЗ рдХрд╛рд░рдг, рдпрджрд┐ рдХреЛрдИ рдЖрджреЗрд╢ рд╣реИ, рддреЛ рднреА </font></font><code>nginx -s quit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдкреВрд░реА рдирд╣реАрдВ рд╣реЛрддреА рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдЗрд╕ рд╕реНрддрд░ рдкрд░ рд╣рдо NGINX рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛ рдЪреБрдХреЗ рд╣реИрдВ: рдХрдо рд╕реЗ рдХрдо рдЖрдк рдЙрди рд▓реЙрдЧ рд╕реЗ рд╕рдордЭ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд╕рдм рдХреБрдЫ рдЙрд╕реА рддрд░рд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдЬреИрд╕рд╛ рдЙрд╕реЗ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PHP-FPM рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛? </font><font style="vertical-align: inherit;">рдпрд╣ рдХреИрд╕реЗ рд╕реБрдВрджрд░ рдмрдВрдж рдХреЛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИ? </font><font style="vertical-align: inherit;">рдЪрд▓реЛ рдареАрдХ рд╣реИред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреАрдПрдЪрдкреА-рдПрдл рдкреА рдПрдо</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PHP-FPM рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдереЛрдбрд╝реА рдХрдо рдЬрд╛рдирдХрд╛рд░реАред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк </font><font style="vertical-align: inherit;">PHP-FPM рдкрд░ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдореИрдиреБрдЕрд▓</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░ </font><font style="vertical-align: inherit;">рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">, рддреЛ рдпрд╣ рдЖрдкрдХреЛ рдмрддрд╛рдПрдЧрд╛ рдХрд┐ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд POSIX рд╕рд┐рдЧреНрдирд▓ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреЗ рд╣реИрдВ:</font></font><br>
<br>
<ol>
<li> <code>SIGINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>SIGTERM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рддреЗрдЬреА рд╕реЗ рдмрдВрдж;</font></font></li>
<li> <code>SIGQUIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - рд╕реБрдВрджрд░ рд╢рдЯрдбрд╛рдЙрди (рд╣рдореЗрдВ рдХреНрдпрд╛ рдЪрд╛рд╣рд┐рдП)ред</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдореЗрдВ рдмрд╛рдХреА рд╕рдВрдХреЗрддреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП, рдЙрдирдХреЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЛ рдЫреЛрдбрд╝ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреНрд░реАрд╕реНрдЯреЙрдк рд╣реБрдХ рд▓рд┐рдЦрдирд╛ рд╣реЛрдЧрд╛:</font></font><br>
<br>
<pre><code class="plaintext hljs">        lifecycle:<font></font>
          preStop:<font></font>
            exec:<font></font>
              command:<font></font>
              - /bin/kill<font></font>
              - -SIGQUIT<font></font>
              - "1"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд╣рд▓реА рдирдЬрд╝рд░ рдореЗрдВ, рдпрд╣ рд╕рдм рджреЛрдиреЛрдВ рдХрдВрдЯреЗрдирд░реЛрдВ рдореЗрдВ рдПрдХ рд╕реБрдВрджрд░ рд╢рдЯрдбрд╛рдЙрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред </font><font style="vertical-align: inherit;">рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рд▓рдЧрдиреЗ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдХрд╛рд░реНрдп рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдмрд╛рдж, рд╣рдордиреЗ рджреЛ рдорд╛рдорд▓реЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХреА, рдЬрд┐рд╕рдореЗрдВ рд╕реБрд╢реЛрднрд┐рдд рд╢рдЯрдбрд╛рдЙрди рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рдерд╛ рдФрд░ рддреИрдирд╛рддреА рдХреЗ рджреМрд░рд╛рди рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреА рдЕрд▓реНрдкрдХрд╛рд▓рд┐рдХ рдЕрдХреНрд╖рдорддрд╛ рдХрд╛ рдХрд╛рд░рдг рдмрдирддрд╛ рдерд╛ред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрднреНрдпрд╛рд╕ред </font><font style="vertical-align: inherit;">рд╕реБрдВрджрд░ рд╢рдЯрдбрд╛рдЙрди рдХреЗ рд╕рд╛рде рд╕рдВрднрд╛рд╡рд┐рдд рд╕рдорд╕реНрдпрд╛рдПрдВ</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nginx</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рдпрд╛рдж рд░рдЦрдирд╛ рдЙрдкрдпреЛрдЧреА рд╣реИ: рдХрдорд╛рдВрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рдЕрд▓рд╛рд╡рд╛, </font></font><code>nginx -s quit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдФрд░ рдХрджрдо рд╣реИ рдЬрд┐рд╕ рдкрд░ рдЖрдкрдХреЛ рдзреНрдпрд╛рди рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдПред рд╣рдо рдПрдХ рд╕рдорд╕реНрдпрд╛ рдореЗрдВ рднрд╛рдЧ рдЧрдП рдЬрдм рдПрдХ SIGQUIT рд╕рд┐рдЧреНрдирд▓ рдХреЗ рдмрдЬрд╛рдп NGINX рдиреЗ рд╡реИрд╕реЗ рднреА SIGTERM рдХреЛ рднреЗрдЬрд╛, рдЬрд┐рд╕рдХреЗ рдХрд╛рд░рдг рдЕрдиреБрд░реЛрдз рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рдкреВрд░реЗ рдирд╣реАрдВ рд╣реБрдПред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рднреА рдРрд╕реЗ рд╣реА рдорд╛рдорд▓реЗ рджреЗрдЦреЗ рдЬрд╛ рд╕рдХрддреЗ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рд╣реИрдВ</font></a><font style="vertical-align: inherit;"> ред рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рд╣рдо рдЗрд╕ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░рдг рд╕реНрдерд╛рдкрд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХреЗ: рдПрдирдЬреАрдЖрдИрдПрдирдПрдХреНрд╕ рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рд╕рдВрджреЗрд╣ рдерд╛, рд▓реЗрдХрд┐рди рдЗрд╕рдХреА рдкреБрд╖реНрдЯрд┐ рдирд╣реАрдВ рдХреА рдЧрдИ рдереАред рд░реЛрдЧрд╕реВрдЪрдХрддрд╛ рдпрд╣ рдереА рдХрд┐ NGINX рдХрдВрдЯреЗрдирд░ рдХреЗ рд▓реЙрдЧ рдореЗрдВ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдЦреБрд▓рд╛ рд╕реЙрдХреЗрдЯ # 10 рдХрдиреЗрдХреНрд╢рди 5 рдореЗрдВ рдЫреЛрдбрд╝ рджрд┐рдпрд╛ рдЧрдпрд╛"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рдВрджреЗрд╢ рджреЗрдЦреЗ рдЧрдП </font><font style="vertical-align: inherit;">, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдлрд▓реА рдмрдВрдж рд╣реЛ рдЧрдИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рдЗрд╕ рддрд░рд╣ рдХреА рд╕рдорд╕реНрдпрд╛ рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдЗрдирдЧреНрд░реЗрдб рдХреЗ рдЬрд╡рд╛рдмреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/um/sz/ip/umszip1dlpudotn2dstg17qfnzs.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддреИрдирд╛рддреА рдХреЗ рд╕рдордп рд╕реНрдерд┐рддрд┐ рдХреЛрдб рд╕рдВрдХреЗрддрдХ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рд╣рдореЗрдВ рдХреЗрд╡рд▓ 503 рддреНрд░реБрдЯрд┐ рдХреЛрдб рдЗрдирдЧреНрд░реЗрдб рд╕реЗ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреЗ рд╣реИрдВ: рдпрд╣ NGINX рдХрдВрдЯреЗрдирд░ рддрдХ рдирд╣реАрдВ рдкрд╣реБрдВрдЪ рд╕рдХрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЕрдм рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк NGINX рдХреЗ рд╕рд╛рде рдХрдВрдЯреЗрдирд░ рдХреЗ рд▓реЙрдЧ рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВ, рддреЛ рдЙрдирдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:</font></font><br>
<br>
<pre><code class="plaintext hljs">[alert] 13939#0: *154 open socket #3 left in connection 16<font></font>
[alert] 13939#0: *168 open socket #6 left in connection 13</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕реНрдЯреЙрдк рд╕рд┐рдЧреНрдирд▓ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рдмрд╛рдж, рдХрдВрдЯреЗрдирд░ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдмрдВрдж рд╣реЛрдирд╛ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ: рдЗрд╕ рддрдереНрдп рдХреА рдкреБрд╖реНрдЯрд┐ рдХреА рдЬрд╛рддреА рд╣реИ рдХрд┐ 503 рддреНрд░реБрдЯрд┐ рдЕрдм рдирд╣реАрдВ рджреЗрдЦреА рдЧрдИ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ рдЖрдк рдПрдХ рд╕рдорд╛рди рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИ рдХрд┐ рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдХреМрди рд╕реЗ рд╕реНрдЯреЙрдк рд╕рд┐рдЧреНрдирд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдкреНрд░реАрд╕реНрдЯреЙрдк рд╣реБрдХ рдмрд┐рд▓реНрдХреБрд▓ рдХреИрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдЗрд╕рдХрд╛ рдХрд╛рд░рдг рдареАрдХ рд╣реИред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP-FPM ... рдФрд░ рдмрд╣реБрдд рдХреБрдЫ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PHP-FPM рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛ рдХреЛ рддреБрдЪреНрдЫ рд░реВрдк рд╕реЗ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: рдпрд╣ рдмрдЪреНрдЪреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдЙрдиреНрд╣реЗрдВ рд╕рдорд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рддреИрдирд╛рддреА рдФрд░ рдЕрдиреНрдп рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рджреМрд░рд╛рди 502 рддреНрд░реБрдЯрд┐рдпрд╛рдВ рд╣реИрдВред 2005 рдХреЗ рдмрд╛рдж рд╕реЗ Bugs.php.net рдкрд░ рдХрдИ рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рдЖрдП рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) рдЬреЛ рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреЗ рд╣реИрдВред рд▓реЗрдХрд┐рди рдЖрдк рд╢рд╛рдпрдж рд▓реЙрдЧ рдореЗрдВ рдХреБрдЫ рднреА рдирд╣реАрдВ рджреЗрдЦреЗрдВрдЧреЗ: PHP-FPM рдмрд┐рдирд╛ рдХрд┐рд╕реА рддреНрд░реБрдЯрд┐ рдпрд╛ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╢рди рдХреЗ рдЕрдкрдиреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкреВрд░реА рдХрд░рдиреЗ рдХреА рдШреЛрд╖рдгрд╛ рдХрд░реЗрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рд╕реНрдкрд╖реНрдЯ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рд╕рдорд╕реНрдпрд╛ рд╕реНрд╡рдпрдВ рдХрдо рдпрд╛ рдЕрдзрд┐рдХ рд╣рдж рддрдХ, рд╕реНрд╡рдпрдВ рдЖрд╡реЗрджрди рдкрд░ рдирд┐рд░реНрднрд░ рд╣реЛ рд╕рдХрддреА рд╣реИ рдФрд░ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдирд┐рдЧрд░рд╛рдиреА рдореЗрдВ рджрд┐рдЦрд╛рдИ рдирд╣реАрдВ рджреЗ рд╕рдХрддреА рд╣реИред рдпрджрд┐ рдЖрдк рдЕрднреА рднреА рдЗрд╕рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдПрдХ рд╕рд░рд▓ рд╕рдорд╛рдзрд╛рди рджрд┐рдорд╛рдЧ рдореЗрдВ рдЖрддрд╛ рд╣реИ: рдкреНрд░реАрд╕реНрдЯреЙрдк рд╣реБрдХ рдХреЗ рд╕рд╛рде рдЬреЛрдбрд╝реЗрдВ</font></font><code>sleep(30)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдпрд╣ рдЖрдкрдХреЛ рдЙрди рд╕рднреА рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ рдЬреЛ рдкрд╣рд▓реЗ рдереЗ (рд╣рдо рдирдП рд╕реНрд╡реАрдХрд╛рд░ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдкреЙрдб </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╣рд▓реЗ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕реЗ рд╣реА </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдорд╛рдкреНрддрд┐</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реИ </font><font style="vertical-align: inherit;">), рдФрд░ 30 рд╕реЗрдХрдВрдб рдХреЗ рдмрд╛рдж рдлрд▓реА рд╕реНрд╡рдпрдВ рдПрдХ рд╕рдВрдХреЗрдд рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рдПрдЧреА </font></font><code>SIGTERM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ </font></font><code>lifecycle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдВрдЯреЗрдирд░ рдХреЗ рд▓рд┐рдП рдпрд╣ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛:</font></font><br>
<br>
<pre><code class="plaintext hljs">    lifecycle:<font></font>
      preStop:<font></font>
        exec:<font></font>
          command:<font></font>
          - /bin/sleep<font></font>
          - "30"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рд╛рд▓рд╛рдВрдХрд┐, 30 рд╕реЗрдХрдВрдб рдХреЗ рд╕рдВрдХреЗрдд рдХреЗ рдХрд╛рд░рдг, </font></font><code>sleep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо </font><font style="vertical-align: inherit;">рддреИрдирд╛рддреА рд╕рдордп рдореЗрдВ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╛рдлреА</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╡реГрджреНрдзрд┐ </font><font style="vertical-align: inherit;">рдХрд░реЗрдВрдЧреЗ </font><font style="vertical-align: inherit;">, рдХреНрдпреЛрдВрдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рдкреЙрдб рдХреЛ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдо рд╕реЗ рдХрдо</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 30 рд╕реЗрдХрдВрдб рдХреЗ </font><font style="vertical-align: inherit;">рд▓рд┐рдП рд╕рдорд╛рдкреНрдд рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ </font><font style="vertical-align: inherit;">, рдЬреЛ рдЦрд░рд╛рдм рд╣реИред рдЗрд╕рд╕реЗ рдХреНрдпрд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдЗрдП рдЖрд╡реЗрджрди рдХреЗ рд╕реАрдзреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рдкрд╛рд░реНрдЯреА рдХреА рдУрд░ рдореБрдбрд╝реЗрдВред рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP-FPM рд╣реИ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдЬреЛ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЕрдкрдиреЗ рдмрдЪреНрдЪреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреА рдирд┐рдЧрд░рд╛рдиреА рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : рдорд╛рд╕реНрдЯрд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рддреБрд░рдВрдд рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рддреА рд╣реИред рдпрд╣ рд╡реНрдпрд╡рд╣рд╛рд░ рдПрдХ рдирд┐рд░реНрджреЗрд╢ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ </font></font><code>process_control_timeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреЛ рдмрд╛рд▓ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рджреНрд╡рд╛рд░рд╛ рдорд╛рд╕реНрдЯрд░ рд╕реЗ рд╕рдВрдХреЗрддреЛрдВ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдордп рд╕реАрдорд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИред рдпрджрд┐ рдЖрдк 20 рд╕реЗрдХрдВрдб рдХреЗ рд▓рд┐рдП рдорд╛рди рд╕реЗрдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдЕрдзрд┐рдХрд╛рдВрд╢ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдХрд╡рд░ рдХрд░реЗрдЧрд╛, рдФрд░ рдЙрдирдХреЗ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж рдорд╛рд╕реНрдЯрд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд░реЛрдХ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рдЬреНрдЮрд╛рди рдХреЗ рд╕рд╛рде, рд╣рдо рдЕрдкрдиреА рдкрд┐рдЫрд▓реА рд╕рдорд╕реНрдпрд╛ рдкрд░ рд▓реМрдЯ рдЖрдПрдВрдЧреЗред рдЬреИрд╕рд╛ рдХрд┐ рдкрд╣рд▓реЗ рд╣реА рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдПрдХ рдЕрдЦрдВрдб рдордВрдЪ рдирд╣реАрдВ рд╣реИ: рдЗрд╕рдХреЗ рд╡рд┐рднрд┐рдиреНрди рдШрдЯрдХреЛрдВ рдХреЗ рдмреАрдЪ рдмрд╛рддрдЪреАрдд рдХреЗ рд▓рд┐рдП рдХреБрдЫ рд╕рдордп рд▓рдЧрддрд╛ рд╣реИред рдпрд╣ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд╕рдЪ рд╣реИ рдЬрдм рд╣рдо рдЗрдирдЧреНрд░реЗрдб рдФрд░ рдЕрдиреНрдп рд╕рдВрдмрдВрдзрд┐рдд рдШрдЯрдХреЛрдВ рдХреЗ рдХрд╛рдо рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рддреИрдирд╛рддреА рдХреЗ рд╕рдордп рдЗрд╕ рддрд░рд╣ рдХреА рджреЗрд░реА рдХреЗ рдХрд╛рд░рдг 500 рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХрд╛ рдЙрдЫрд╛рд▓ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЕрдкрд╕реНрдЯреНрд░реАрдо рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрдиреБрд░реЛрдз рднреЗрдЬрдиреЗ рдХреЗ рдЪрд░рдг рдореЗрдВ рдПрдХ рддреНрд░реБрдЯрд┐ рд╣реЛ рд╕рдХрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдШрдЯрдХреЛрдВ рдХреЗ рдмреАрдЪ рдмрд╛рддрдЪреАрдд рдХрд╛ "рд╕рдордп рдЕрдВрддрд░рд╛рд▓" рдХрдо рдмрд▓реНрдХрд┐ рдПрдХ рд╕реЗрдХрдВрдб рд╕реЗ рдХрдо рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд▓рд┐рдП, </font><font style="vertical-align: inherit;">рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рдирд┐рд░реНрджреЗрд╢ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЗ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рд╛рде </font><b><font style="vertical-align: inherit;">рд╕рдВрдпреЛрдЬрди</font></b><font style="vertical-align: inherit;"> рдХреЗ рд▓рд┐рдП </font></font><code>process_control_timeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдирд┐рд░реНрдорд╛рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ </font></font><code>lifecycle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">lifecycle:<font></font>
  preStop:<font></font>
    exec:<font></font>
      command: ["/bin/bash","-c","/bin/sleep 1; kill -QUIT 1"]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рдЯреАрдо рджреНрд╡рд╛рд░рд╛ рджреЗрд░реА рдХреЗ рд▓рд┐рдП рдХреНрд╖рддрд┐рдкреВрд░реНрддрд┐ </font></font><code>sleep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рддреИрдирд╛рддреА рд╕рдордп рдХреЛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд░реВрдк рд╕реЗ рдирд╣реАрдВ рдмрдврд╝рд╛рддреЗ рд╣реИрдВ: рдХреНрдпрд╛ 30 рд╕реЗрдХрдВрдб рдФрд░ рдПрдХ рдХреЗ рдмреАрдЪ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рдЕрдВрддрд░ рд╣реИ? .. рдЕрдирд┐рд╡рд╛рд░реНрдп рд░реВрдк рд╕реЗ </font></font><code>process_control_timeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font><font style="vertical-align: inherit;">рдпрд╣ "рдореБрдЦреНрдп рдиреМрдХрд░реА" рдкрд░ рд▓реЗ рдЬрд╛рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">, рд▓реЗрдХрд┐рди </font></font><code>lifecycle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реИрдЧ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдХреЗрд╡рд▓ "рд╕реБрд░рдХреНрд╖рд╛ рдЬрд╛рд▓" рдХреЗ рд░реВрдк </font><font style="vertical-align: inherit;">рдореЗрдВ </font><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рд╛рдорд╛рдиреНрдпрддрдпрд╛, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд░реНрдгрд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ рдФрд░ рд╕рдВрдмрдВрдзрд┐рдд рд╡рд░реНрдХрдЕрд░рд╛рдЙрдВрдб рдЪрд┐рдВрддрд╛ рди рдХреЗрд╡рд▓ PHP-FPM</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рдЕрдиреНрдп рднрд╛рд╖рд╛рдУрдВ / рд░реВрдкрд░реЗрдЦрд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рдЗрд╕реА рддрд░рд╣ рдХреА рд╕реНрдерд┐рддрд┐ рдПрдХ рдпрд╛ рджреВрд╕рд░реЗ рддрд░реАрдХреЗ рд╕реЗ рдЙрддреНрдкрдиреНрди рд╣реЛ рд╕рдХрддреА рд╣реИред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рдЕрдиреНрдп рддрд░реАрдХреЛрдВ рд╕реЗ рд╕реБрд╢реЛрднрд┐рдд рд╢рдЯрдбрд╛рдЙрди рдХреЛ рдареАрдХ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ - рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреЛрдб рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрдирд╛ рддрд╛рдХрд┐ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╕рдорд╛рдкреНрддрд┐ рдХреЗ рд╕рдВрдХреЗрддреЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддрд╛ рд╣реИ - рдЖрдк рд╡рд░реНрдгрд┐рдд рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдпрд╣ рд╕рдмрд╕реЗ рд╕реБрдВрджрд░ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрднреНрдпрд╛рд╕ред </font><font style="vertical-align: inherit;">рдлрд▓реА рдкреНрд░рджрд░реНрд╢рди рдХреЛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд▓реЛрдб рдкрд░реАрдХреНрд╖рдг</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЛрдб рдкрд░реАрдХреНрд╖рдг рдпрд╣ рдЬрд╛рдВрдЪрдиреЗ рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ рд╣реИ рдХрд┐ рдХрдВрдЯреЗрдирд░ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЖрдкрдХреЛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдореБрдХрд╛рдмрд▓рд╛ рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЗ рдХрд░реАрдм рд▓рд╛рддреА рд╣реИ рдЬрдм рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рд╛рдЗрдЯ рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВред рдЖрдк рдЙрдкрд░реЛрдХреНрдд рд╕рд┐рдлрд╛рд░рд┐рд╢реЛрдВ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex.Tank</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">: рдпрд╣ рд╣рдорд╛рд░реА рд╕рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХрд╡рд░ рдХрд░рддрд╛ рд╣реИред рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдПрдХ рд╕реНрдкрд╖реНрдЯ рдХреЗ рд╕рд╛рде рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рдпреБрдХреНрддрд┐рдпрд╛рдВ рдФрд░ рдЪрд╛рд▓реЗрдВ рд╣реИрдВ - рдЧреНрд░реЗрдлрд╛рдирд╛ рдФрд░ рдпреИрдВрдбреЗрдХреНрд╕ рдХреЗ рдЧреНрд░рд╛рдлрд╝ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рджред рдЦреБрдж - рд╣рдорд╛рд░реЗ рдЕрдиреБрднрд╡ рд╕реЗ рдПрдХ рдЙрджрд╛рд╣рд░рдгред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣рд╛рдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░рдгреЛрдВ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдХреА рдЬрд╛рдВрдЪ рдХрд░рдирд╛ рд╣реИред</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдПрдХ рдирдпрд╛ рдлрд┐рдХреНрд╕ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рдж, рдкрд░реАрдХреНрд╖рдг рдЪрд▓рд╛рдПрдВ рдФрд░ рджреЗрдЦреЗрдВ рдХрд┐ рдкрд┐рдЫрд▓реЗ рд▓реЙрдиреНрдЪ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдкрд░рд┐рдгрд╛рдо рдмрджрд▓ рдЧрдП рд╣реИрдВ рдпрд╛ рдирд╣реАрдВред рдЕрдиреНрдпрдерд╛, рдЕрдкреНрд░рднрд╛рд╡реА рд╕рдорд╛рдзрд╛рдиреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реЛрдЧрд╛, рдФрд░ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЖрдк рдХреЗрд╡рд▓ рдиреБрдХрд╕рд╛рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рддреИрдирд╛рддреА рдХреЛ рдмрдврд╝рд╛рдПрдВ)ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдХ рдФрд░ рдЪреЗрддрд╛рд╡рдиреА - рдЗрд╕рдХреА рд╕рдорд╛рдкреНрддрд┐ рдХреЗ рджреМрд░рд╛рди рдХрдВрдЯреЗрдирд░ рдХреЗ рд▓реЙрдЧ рдХреЛ рджреЗрдЦреЗрдВред рдХреНрдпрд╛ рд╕реБрдВрджрд░ рд╢рдЯрдбрд╛рдЙрди рдЬрд╛рдирдХрд╛рд░реА рд╡рд╣рд╛рдБ рджрд░реНрдЬ рдХреА рдЧрдИ рд╣реИ? рдЕрдиреНрдп рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рд▓реЙрдЧ рдореЗрдВ рдХреЛрдИ рддреНрд░реБрдЯрд┐ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рдкрдбрд╝реЛрд╕реА PHP-FPM рдХрдВрдЯреЗрдирд░)? рдЖрд╡реЗрджрди рдХреА рддреНрд░реБрдЯрд┐рдпрд╛рдВ (рдЬреИрд╕рд╛ рдХрд┐ рдКрдкрд░ рд╡рд░реНрдгрд┐рдд NGINX рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ)? рдореБрдЭреЗ рдЙрдореНрдореАрдж рд╣реИ рдХрд┐ рдЗрд╕ рд▓реЗрдЦ рд╕реЗ рдкрд░рд┐рдЪрдпрд╛рддреНрдордХ рдЬрд╛рдирдХрд╛рд░реА рдпрд╣ рд╕рдордЭрдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдЧреА рдХрд┐ рдХрдВрдЯреЗрдирд░ рдХреЗ рд╕рдорд╛рдкреНрдд рд╣реЛрдиреЗ рдХреЗ рджреМрд░рд╛рди рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд▓рд┐рдП, </font></font><code>lifecycle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕рд░реНрд╡рд░ рдХреЗ рд▓рд┐рдП рдмрд┐рдирд╛ рдЕрддрд┐рд░рд┐рдХреНрдд рдирд┐рд░реНрджреЗрд╢реЛрдВ </font><font style="vertical-align: inherit;">рдХреЗ рдкрд╣рд▓рд╛ рдЯреЗрд╕реНрдЯ рд░рди рд╣реБрдЖ </font><font style="vertical-align: inherit;">(</font></font><code>process_control_timeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP-FPM рдореЗрдВ)ред рдЗрд╕ рдкрд░реАрдХреНрд╖рдг рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рд▓рдЧрднрдЧ рдЕрдиреБрдорд╛рдирд┐рдд рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдирд╛ рдерд╛ (рдФрд░ рдХреНрдпрд╛ рд╡реЗ рд╕рднреА рдореМрдЬреВрдж рд╣реИрдВ)ред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЕрддрд┐рд░рд┐рдХреНрдд рдЬрд╛рдирдХрд╛рд░реА рд╕реЗ, рдпрд╣ рдЬреНрдЮрд╛рдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рдЪреВрд▓реНрд╣реЗ рдХреА рдФрд╕рдд рддреИрдирд╛рддреА рдХрд╛ рд╕рдордп рдкреВрд░реНрдг рддрддреНрдкрд░рддрд╛ рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд▓рдЧрднрдЧ 5-10 рд╕реЗрдХрдВрдб рдерд╛ред рдкрд░рд┐рдгрд╛рдо рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реИрдВ: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ce/yw/ap/ceywapg8q2kpztr-zdslhjy8brm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yandex.Tank рд╕реВрдЪрдирд╛ рдкреИрдирд▓ рдкрд░ 502 рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХрд╛ рдПрдХ рд╕реНрдкрд▓реИрд╢ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИ, рдЬреЛ рддреИрдирд╛рддреА рдХреЗ рд╕рдордп рд╣реБрдЖ рдФрд░ рдФрд╕рддрди 5 рд╕реЗрдХрдВрдб рддрдХ рдЪрд▓рд╛ред рд╕рдВрднрд╡рдд: рдЗрд╕рдиреЗ рдкреБрд░рд╛рдиреЗ рдкреЙрдб рдореЗрдВ рдореМрдЬреВрджрд╛ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░ рджрд┐рдпрд╛ рдерд╛ред рдЙрд╕рдХреЗ рдмрд╛рдж, 503 рддреНрд░реБрдЯрд┐рдпрд╛рдВ рджрд┐рдЦрд╛рдИ рджреАрдВ, рдЬреЛ рдПрдХ рд░реБрдХрд╛ рд╣реБрдЖ рдПрдирдЬреАрдЖрдИрдПрдирдПрдХреНрд╕ рдХрдВрдЯреЗрдирд░ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рдерд╛, рдЬреЛ рдмреИрдХрдПрдВрдб рдХреЗ рдХрд╛рд░рдг рднреА рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рд╣реЛ рдЧрдпрд╛ рдерд╛ (рдЬрд┐рд╕рдХреЗ рдХрд╛рд░рдг рдЗрдирдЧреНрд░реЗрдб рдЗрд╕реЗ рдХрдиреЗрдХреНрдЯ рдирд╣реАрдВ рдХрд░ рд╕рдХрд╛)ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдЗрдП рджреЗрдЦреЗрдВ рдХреИрд╕реЗ</font></font><code>process_control_timeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP-FPM рдореЗрдВ рд╣рдореЗрдВ рдмрдЪреНрдЪреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдореЗрдВ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдорд┐рд▓реЗрдЧреА, рдЕрд░реНрдерд╛рддред </font><font style="vertical-align: inherit;">рдРрд╕реА рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рдареАрдХ рдХрд░реЗрдВред </font><font style="vertical-align: inherit;">рдЗрд╕ рдирд┐рд░реНрджреЗрд╢ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдмрд╛рд░-рдмрд╛рд░ рддреИрдирд╛рддреА: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/t5/8g/0c/t58g0cs5b6umhjkmvlhjktbkio0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
500s рдХреА рддреИрдирд╛рддреА рдХреЗ рджреМрд░рд╛рди рдХреЛрдИ рдФрд░ рддреНрд░реБрдЯрд┐ рдирд╣реАрдВ рд╣реИ! </font><font style="vertical-align: inherit;">рддреИрдирд╛рддреА рд╕рдлрд▓ рд╣реИ, рд╕реБрдВрджрд░ рд╢рдЯрдбрд╛рдЙрди рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рдЗрдирдЧреНрд░реЗрдб рдХрдВрдЯреЗрдирд░ рдХреЗ рд╕рд╛рде рдЙрд╕ рдХреНрд╖рдг рдХреЛ рдпрд╛рдж рд░рдЦрдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХрд╛ рдПрдХ рдЫреЛрдЯрд╛ рдкреНрд░рддрд┐рд╢рдд рдЬрд┐рд╕рдореЗрдВ рд╣рдо рдПрдХ рд╕рдордп рдЕрдВрддрд░рд╛рд▓ рдХреЗ рдХрд╛рд░рдг рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЙрдирд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдирд┐рд░реНрдорд╛рдг рдХреЛ рдЬреЛрдбрд╝рдиреЗ </font></font><code>sleep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рддреИрдирд╛рддреА рдХреЛ рджреЛрд╣рд░рд╛рдиреЗ рдХреЗ </font><font style="vertical-align: inherit;">рд▓рд┐рдП рд░рд╣рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рд╣рд╛рд▓рд╛рдБрдХрд┐, рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ рдорд╛рдорд▓реЗ рдореЗрдВ, рдХреЛрдИ рднреА рдкрд░рд┐рд╡рд░реНрддрди рджрд┐рдЦрд╛рдИ рдирд╣реАрдВ рджрд┐рдпрд╛ (рдлрд┐рд░ рд╕реЗ рдХреЛрдИ рддреНрд░реБрдЯрд┐ рдирд╣реАрдВ)ред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рд╖реНрдХрд░реНрд╖</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╕рд╣реА рд╕рдорд╛рдкрди рдХреЗ рд▓рд┐рдП, рд╣рдо рдЖрд╡реЗрджрди рд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ рдХреА рдЕрдкреЗрдХреНрд╖рд╛ рдХрд░рддреЗ рд╣реИрдВ:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреБрдЫ рд╕реЗрдХрдВрдб рд░реБрдХреЗрдВ, рдлрд┐рд░ рдирдП рдХрдиреЗрдХреНрд╢рди рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдирд╛ рдмрдВрдж рдХрд░реЗрдВред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рднреА рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдФрд░ рдмрдВрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рднреА рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░реЗрдВ рдЬреЛ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдкрдиреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкреВрд░реА рдХрд░реЗрдВред</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╕рднреА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрд╕ рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреА рд╡рд╛рд╕реНрддрд╡рд┐рдХрддрд╛рдУрдВ рдореЗрдВ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рдПрдХ рд╕рдорд╛рдзрд╛рди рд╣реИ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреНрд░реА-рд╕реНрдЯреЙрдк рд╣реБрдХ рдЬреЛрдбрд╝рдирд╛ рдЬреЛ рдХреБрдЫ рд╕реЗрдХрдВрдб рдЗрдВрддрдЬрд╛рд░ рдХрд░реЗрдЧрд╛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░реЗ рдмреИрдХрдПрдВрдб рдХреА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдирд╛ред</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдирдЬреАрдЖрдИрдПрдирдПрдХреНрд╕ рдЙрджрд╛рд╣рд░рдг рд╣рдореЗрдВ рдпрд╣ рд╕рдордЭрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдХрд┐ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдПрдХ рдЖрд╡реЗрджрди рдЬрд┐рд╕реЗ рд╢реБрд░реВ рдореЗрдВ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрдХреЗрддреЛрдВ рдХреЛ рдареАрдХ рд╕реЗ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдРрд╕рд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрд╡реЗрджрди рдХреА рддреИрдирд╛рддреА рдХреЗ рджреМрд░рд╛рди 500 рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред рдпрд╣ рдЖрдкрдХреЛ рд╕рдорд╕реНрдпрд╛ рдХреЛ рдЕрдзрд┐рдХ рд╡реНрдпрд╛рдкрдХ рд░реВрдк рд╕реЗ рджреЗрдЦрдиреЗ рдФрд░ рдПрдХ рдЕрд▓рдЧ рдкреЙрдб рдпрд╛ рдХрдВрдЯреЗрдирд░ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдкреВрд░реЗ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХреЛ рдПрдХ рдкреВрд░реЗ рдХреЗ рд░реВрдк рдореЗрдВ рджреЗрдЦрддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yandex.Tank рдХреЛ рдХрд┐рд╕реА рднреА рдирд┐рдЧрд░рд╛рдиреА рдкреНрд░рдгрд╛рд▓реА рдХреЗ рд╕рд╛рде рд╕рдВрдпреЛрдЬрди рдХреЗ рд░реВрдк рдореЗрдВ рдкрд░реАрдХреНрд╖рдг рдЙрдкрдХрд░рдг рдХреЗ рд░реВрдк рдореЗрдВ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ рдХреЗ рд░реВрдк рдореЗрдВ рдмреИрдХрдПрдВрдб рдХреЗ рд╕рд╛рде рдЧреНрд░рд╛рдлрд╛рдирд╛ рдХрд╛ рдбреЗрдЯрд╛ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдерд╛)ред рдЧреНрд░реЗрд╕рдлреБрд▓ рд╢рдЯрдбрд╛рдЙрди рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛рдПрдВ рднрд╛рд░реА рднрд╛рд░ рдХреЗ рддрд╣рдд рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИрдВ рдЬреЛ рдмреЗрдВрдЪрдорд╛рд░реНрдХ рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддреА рд╣реИрдВ, рдФрд░ рдирд┐рдЧрд░рд╛рдиреА рдкрд░реАрдХреНрд╖рдг рдХреЗ рджреМрд░рд╛рди рдпрд╛ рдмрд╛рдж рдореЗрдВ рд╕реНрдерд┐рддрд┐ рдХрд╛ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддреА рд╣реИред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдЦ рдкрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд╛ рдЬрд╡рд╛рдм рджреЗрдирд╛: рдпрд╣ рдЙрд▓реНрд▓реЗрдЦрдиреАрдп рд╣реИ рдХрд┐ NGINX Ingress рдХреЗ рд╕рдВрдмрдВрдз рдореЗрдВ рд╕рдорд╕реНрдпрд╛рдУрдВ рдФрд░ рд╕рдорд╛рдзрд╛рдиреЛрдВ рдХрд╛ рд╡рд░реНрдгрди рдпрд╣рд╛рдБ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЕрдиреНрдп рдорд╛рдорд▓реЛрдВ рдХреЗ рд▓рд┐рдП, рдЕрдиреНрдп рд╕рдорд╛рдзрд╛рди рд╣реИрдВ, рд╢рд╛рдпрдж, рд╣рдо рдЪрдХреНрд░ рдХреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рд╛рдордЧреНрд░рд┐рдпреЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреБрдирд╢реНрдЪ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
K8s рдЯрд┐рдкреНрд╕ рдПрдВрдб рдЯреНрд░рд┐рдХреНрд╕ рдЪрдХреНрд░ рд╕реЗ рдЕрдиреНрдп:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдирдЬреАрдЖрдИрдПрдирдПрдХреНрд╕ рдЗрдирдЧреНрд░реЗрдб рдореЗрдВ рдирд┐рдЬреАрдХреГрдд рддреНрд░реБрдЯрд┐ рдкреГрд╖реНрда</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдиреЛрдбреНрд╕ рдФрд░ рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдкрд░ рд▓реЛрдб рдХреЗ рдЖрд╡рдВрдЯрди рдкрд░</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреЗрд╡-рд╕реНрдерд▓реЛрдВ рддрдХ рдкрд╣реБрдВрдЪ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрдбрд╝реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдмреВрдЯрд╕реНрдЯреНрд░реИрдк рдХреЛ рддреЗрдЬ рдХрд░рдирд╛ред</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "</font></font></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi489984/index.html">Udalenka рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдПрдордП: рдкреВрдЫреЗрдВ - рд╣рдо рдЬрд╡рд╛рдм рджреЗрддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi489986/index.html">рдкрд╛рд╡рд░ рд╕реНрдЯреЗрдЬ рдбрд┐рдЬрд╛рдЗрдирд░ рдЙрдкрдпреЛрдЧрд┐рддрд╛ - рдкрд╛рд╡рд░ рдЗрд▓реЗрдХреНрдЯреНрд░реЙрдирд┐рдХреНрд╕ рдбреЗрд╡рд▓рдкрд░ рдЯреВрд▓</a></li>
<li><a href="../hi489988/index.html">"рдЕрдкрдиреЗ рд╣рд╛рде рд╣рд╡рд╛ рдореЗрдВ рд░рдЦреЛ!": Playme TIO S рдХреЗ рдбреИрд╢рдмреЛрд░реНрдб рдХреА рдореЛрдиреЛ рд╕рдореАрдХреНрд╖рд╛</a></li>
<li><a href="../hi489990/index.html">рд╕рд░реНрд╡рд┐рд╕ рдбреЗрд╕реНрдХ рдиреЗ рдПрдХ рд╕реЗрд╡рд╛ рдХрдВрдкрдиреА рдХреЛ рдХреИрд╕реЗ рдмрдЪрд╛рдпрд╛, рдпрд╛ рдпрджрд┐ рдЖрдкрдХрд╛ рд╡реНрдпрд╡рд╕рд╛рдп рдмрдврд╝рддрд╛ рд╣реИ рддреЛ рдХреНрдпрд╛ рд╣реЛрдЧрд╛?</a></li>
<li><a href="../hi489992/index.html">рдХреБрдмреЗрд░рдиреЗрдЯ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд╕рд╣реА рдкреЙрдб рд╢рдЯрдбрд╛рдЙрди</a></li>
<li><a href="../hi489998/index.html">11. рдлреЛрд░реНрдЯрд┐рдиреЗрдЯ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдирд╛ v6.0ред рд▓рд╛рдЗрд╕реЗрдВрд╕рд┐рдВрдЧ</a></li>
<li><a href="../hi490002/index.html">рдХреЛрдЯрд▓рд┐рди рдФрд░ рдорд╛рдЗрдХреНрд░реЛрдПрдиреЗрдЯ рдкрд░ рдЧреНрд░рд╛рдлрдХреНрдпреВрдПрд▓ рдХреИрд╕реЗ рдХрд░реЗрдВ рдФрд░ рдХрдИ рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╡рд┐рд╕ рдХреЗ рдПрдкреАрдЖрдИ рдХреЗ рд▓рд┐рдП рдПрдХ рдПрдХрд▓ рдПрдХреНрд╕реЗрд╕ рдкреНрд╡рд╛рдЗрдВрдЯ рдмрдирд╛рдПрдВ</a></li>
<li><a href="../hi490006/index.html">рддрдХрдиреАрдХреА рд╡рд┐рд╢рд┐рд╖реНрдЯрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╢реИрдХреНрд╖рд┐рдХ рдХрд╛рд░реНрдпрдХреНрд░рдо</a></li>
<li><a href="../hi490010/index.html">рд╕рдВрдЧреАрдд рдХреА рд╢реБрджреНрдзрддрд╛ рдХреА рдЬрд╛рдБрдЪ рдХреЗ рд▓рд┐рдП рдЯрд╛рдЗрдк рд╕рд┐рд╕реНрдЯрдо рдХреА рдЬрд╛рдБрдЪ</a></li>
<li><a href="../hi490012/index.html">рдЕрд▓рд░реНрдЯ-рдПрд╕ рдФрд░ рд╕реНрдЯреЛрд░реЗрдЬ рдХреЗ рдПрд░рд░-рдПрд╕, рдЙрдирд╕реЗ рдХреИрд╕реЗ рдирд┐рдкрдЯреЗрдВ?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>