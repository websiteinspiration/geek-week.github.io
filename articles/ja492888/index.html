<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🚒 🚌 👎🏽 WireGuardを使用すべきでない理由 👨🏽‍🔧 🚶🏿 🕵🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="最近、WireGuardは多くの注目を集めています。実際、これはVPNの新しい「スター」です。しかし、彼は見た目と同じくらい上手ですか？ IPSecまたはOpenVPNに代わるソリューションではない理由を説明するために、いくつかの観察について議論し、WireGuardの実装を検討したいと思います。
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>WireGuardを使用すべきでない理由</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dcmiran/blog/492888/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最近、WireGuardは多くの注目を集めています。実際、これはVPNの新しい「スター」です。しかし、彼は見た目と同じくらい上手ですか？ IPSecまたはOpenVPNに代わるソリューションではない理由を説明するために、いくつかの観察について議論し、WireGuardの実装を検討したいと思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、[WireGuardに関する]いくつかの神話を覆します。はい、読むには長い時間がかかるので、お茶やコーヒーを淹れていないのなら、今がその時です。私の混沌とし​​た考えを校正してくれたピーターにも感謝します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WireGuard開発者の信用を落とし、彼らの努力やアイデアの価値を下げるという目標は設定していません。彼らの製品は実用的なものですが、個人的には実際の製品とはまったく異なる形で提示されていると私は思います。IPsecやOpenVPNの代わりとして提供されており、実際には存在しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意として、WireGuardのそのような位置付けの責任は、プロジェクト自体やその作成者ではなく、それについて話したメディアにあることを付け加えたいと思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最近、Linuxカーネルのトピックに関してあまり良いニュースはありません。</font><font style="vertical-align: inherit;">そのため、ソフトウェアによって平準化されたプロセッサの巨大な脆弱性について知らされ、Linus Torvaldsは、それが開発者のあまりにも無礼で退屈で実用的な言語であると語りました。</font><font style="vertical-align: inherit;">スケジューラまたはネットワークスタックのゼロレベル-光沢のある雑誌のトピックも明確すぎません。</font><font style="vertical-align: inherit;">そして、WireGuardが表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
紙の上ではすべてが素晴らしいように聞こえます。刺激的な新しいテクノロジーです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、彼女をもう少し注意深く見てみましょう。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WireGuardテクニカルドキュメント</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事は</font><font style="vertical-align: inherit;">、Jason Donenfeld </font><font style="vertical-align: inherit;">が作成した</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WireGuard</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">公式ドキュメントに</font></a><font style="vertical-align: inherit;">基づいてい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">そこで彼は、Linuxカーネルにおける[WireGuard]の概念、目的、および技術的な実装について説明しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の文は次のとおりです。</font></font><br>
<br>
<blockquote>WireGuard [...]    IPsec     ,         / TLS,   OpenVPN,     ,      []. </blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、すべての新しいテクノロジーの主な利点は</font><font style="vertical-align: inherit;">、（以前のものと比較して）</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シンプル</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">であることです。</font><font style="vertical-align: inherit;">しかし、VPNは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">効率的で安全で</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なければなりません</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでは、次は何ですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[VPNから]これが必要ないと言った場合は、読み上げを終了できます。</font><font style="vertical-align: inherit;">ただし、そのようなタスクは他のトンネリングテクノロジーよりも優先されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の引用の中で最も興味深いのは、「ほとんどの場合」という言葉にあります。もちろん、それはマスコミによって無視されました。</font><font style="vertical-align: inherit;">そして、私たちはここにいます。この記事では、この過失によって生じた混乱のせいで終わりました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6a/6i/mh/6a6imhnuzbtscbkm7rdwladwddm.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WireGuardは、サイト間の[IPsec] VPN接続を置き換えますか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
番号。</font><font style="vertical-align: inherit;">シスコ、ジュニパーなどの大規模ベンダーが自社製品のWireGuardを購入する可能性はまったくありません。</font><font style="vertical-align: inherit;">大きな必要がない限り、彼らは外出先で「電車を飛び越す」ことはありません。</font><font style="vertical-align: inherit;">後で、たとえ彼らが望んでいたとしても、おそらく彼らがWireGuard製品を搭載することができない理由のいくつかについて話します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WireGuardはRoadWarriorをラップトップからデータセンターに転送しますか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
番号。 WireGuardは現在、このようなことを実行できるように重要な機能を多数実装していません。たとえば、トンネルのサーバー側で動的IPアドレスを使用することはできません。これだけで、製品を同様に使用するシナリオ全体を壊します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IPFireは、DSLやケーブル接続などの低コストのインターネットチャネルによく使用されます。これは、高速ファイバーを必要としない中小企業にとって理にかなっています。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[翻訳者からのメモ：通信の面では、ロシアと一部のCIS諸国はヨーロッパとアメリカよりもはるかに進んでいることを忘れないでください。私たちはずっと後にネットワークの構築を開始し、標準としてイーサネットと光ファイバーネットワークの登場により、再構築が容易になりました。同じEU諸国または米国では、3〜5 Mbpsの速度でのxDSLブロードバンドアクセスが依然として一般的な規範であり、光ファイバー接続は、私たちの基準では非現実的なお金がかかります。したがって、この記事の著者は、昔の過去ではなく、DSLまたはケーブル接続について通常どおり話しています。]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ただし、DSL、ケーブル、LTE（およびその他のワイヤレスアクセス方法）には動的IPアドレスがあります。もちろん、時々それらは頻繁には変化しませんが、それでも変化します。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">「wg-dynamic」</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
というサブプロジェクトがあります</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザー空間デーモンは、この欠点を克服するために追加されます。</font><font style="vertical-align: inherit;">上記のユーザーシナリオの大きな問題は、動的IPv6アドレッシングによる状況の悪化です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ディストリビューターの観点から見ると、これらすべてもあまり良くありません。</font><font style="vertical-align: inherit;">設計目標の1つは、プロトコルをシンプルかつクリーンに保つことでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながら、これらすべてが実際にはシンプルでプリミティブになりすぎたため、実際の条件でこの設計全体を実行可能にするには、追加のソフトウェアを使用する必要があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WireGuardはとても使いやすいですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
未だに。 WireGuardが2点間でトンネルを転送するための優れた代替手段になることは決してありませんが、これまでのところ、製品のアルファバージョンにすぎません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、彼は実際に何をしますか？ IPSecは本当に操作がはるかに難しいのですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかにそうではありません。 IPsecプロバイダーはこの点を考慮し、IPFireなどのインターフェイスと共に製品を提供しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IPsec経由のVPNトンネルを構成するには、構成に入力する必要がある5セットのデータが必要です。独自のパブリックIPアドレス、受信側のパブリックIPアドレス、このVPN接続を通じてパブリックにして、事前共有するサブネットキー。したがって、VPNは数分で構成され、どのベンダーとも互換性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながら、このストーリーにはいくつかの例外があります。</font><font style="vertical-align: inherit;">IPsecを介してVPNトンネルをOpenBSD上のマシンに転送しようとしたすべての人が、私が話していることを理解しています。</font><font style="vertical-align: inherit;">さらに厄介な例がいくつかありますが、実際には、IPsecを使用することの優れた実践ははるかに多くあります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロトコルの複雑さについて</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エンドユーザーはプロトコルの複雑さを心配する必要はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これがユーザーの真の関心事である世界に住んでいたとしたら、10年以上前に作成されたSIP、H.323、FTP、およびその他のプロトコルがNATでうまく機能しないため、はるか昔にそれを排除していたでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IPsecがWireGuardよりも複雑である理由はいくつかあります。それは、多くのことを実行します。たとえば、EAPを使用したログイン/パスワードまたはSIMカードを使用したユーザー認証。新しい</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暗号プリミティブ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を追加する拡張機能があり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、WireGuardはそうではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてこれは、暗号プリミティブの1つが弱体化するか完全に危険にさらされるため、WireGuardがいつか壊れることを意味します。技術文書の作者はこれを言っています：</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WireGuardは暗号的には自信があることは注目に値します。</font><font style="vertical-align: inherit;">彼は意図的に暗号とプロトコルの柔軟性に欠けています。</font><font style="vertical-align: inherit;">基になるプリミティブに重大な穴が見つかった場合は、すべてのエンドポイントを更新する必要があります。</font><font style="vertical-align: inherit;">進行中のSLL / TLSの脆弱性のストリームからわかるように、暗号化の柔軟性が大幅に向上しました。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後の文は絶対に本当です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用する暗号化に関する合意を構築すると、IKEやTLSなどのプロトコルが</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">より</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複雑に</font><font style="vertical-align: inherit;">なります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">複雑すぎる？</font><font style="vertical-align: inherit;">はい、脆弱性はTLS / SSLでかなり一般的であり、それらに代わるものはありません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実際の問題の無視について</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
世界中のどこかに、200の戦闘クライアントを持つVPNサーバーがあるとします。これは非常に標準的な使用例です。暗号化を変更する必要がある場合は、これらのラップトップ、スマートフォンなどのWireGuardのすべてのコピーにアップデートを配信する必要があります。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同時に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">お届けします。それは文字通り不可能です。これを行おうとする管理者は、必要な構成を展開するのに数か月かかり、中規模の企業はそのようなイベントをホストするのに文字どおり数年かかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IPsecとOpenVPNは暗号ネゴシエーションを提供します。したがって、新しい暗号化を有効にしてしばらくすると、古い暗号化が機能します。これにより、現在のお客様は新しいバージョンにアップグレードできます。更新がロールアウトされたら、脆弱な暗号化をオフにするだけです。そして、それだけです！できた！あなたはゴージャスです！そして、顧客もそれに気付かないでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは実際には大規模な展開の非常に一般的なケースであり、OpenVPNでさえいくつかの問題があります。下位互換性は重要であり、より弱い暗号化を使用しますが、多くの場合、これはビジネスの閉鎖を引き起こしません。それは彼らの仕事をすることができないために何百もの顧客の麻痺につながるからです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WireGuardチームはプロトコルを簡素化しましたが、トンネルの両方のピアを常に制御できない人にはまったく適していません。</font><font style="vertical-align: inherit;">私の経験では、これが最も一般的なシナリオです。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/xz/8g/un/xz8gunpa9bqpa5viwsssog6fbv0.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暗号化！</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、WireGuardが使用するこの興味深い新しい暗号化は何ですか？</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WireGuardは、鍵交換にCurve25519、暗号化にChaCha20、データ認証にPoly1305を使用します。</font><font style="vertical-align: inherit;">また、ハッシュキーにはSipHashを使用し、ハッシュにはBLAKE2を使用します。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ChaCha20-Poly1305は、IPsecおよびOpenVPN（TLS経由）向けに標準化されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかに、ダニエルバーンスタインの開発は非常に頻繁に使用されます。 BLAKE2は、SHA-2との類似性のために勝利しなかったSHA-3ファイナリストであるBLAKEの後継です。 SHA-2がハッキングされた場合、BLAKEが侵害される可能性が高くなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IPsecとOpenVPNは、設計上、SipHashを必要としません。したがって、現時点でそれらを使用できないのは、標準化されるまではBLAKE2だけです。これは大きな欠点ではありません。VPNはHMACを使用して整合性を作成するため、MD5と組み合わせても強力なソリューションと見なされます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、すべてのVPNがほぼ同じ暗号化ツールのセットを使用しているという結論に達しました。</font><font style="vertical-align: inherit;">したがって、WireGuardは、暗号化やデータの整合性に関しては、他の関連製品よりも安全ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、これはプロジェクトの公式ドキュメントによると注意する必要がある最も重要なことではありません。</font><font style="vertical-align: inherit;">結局のところ、主なものは速度です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WireGuardは他のVPNソリューションよりも高速ですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、いいえ、速くはありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ChaCha20は、ソフトウェアで実装しやすいストリーム暗号です。一度に1ビットを暗号化します。 AESなどのブロックプロトコルは、一度に128ビットのブロックを暗号化します。ハードウェアサポートを実装するには、より多くのトランジスタが必要になるため、より大きなプロセッサには、暗号化プロセスのいくつかのタスクを実行してスピードアップする命令セットの拡張であるAES-NIが付属しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AES-NIがスマートフォンにヒットすることはないと予想されていました[そしてヒットしました-約。トランス。このために、ChaCha20が開発されました-バッテリー電力を節約する簡単で経済的な代替手段として。したがって、今日購入できるすべてのスマートフォンにAES向けのアクセラレーションがあり、この暗号化をChaCha20よりも高速かつ低消費電力で使用できることは、あなたにとって朗報かもしれません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかに、ここ数年で購入したほとんどすべてのデスクトップ/サーバープロセッサにAES-NIが搭載されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、すべてのシナリオでAESがChaCha20を超えると期待しています。 WireGuardの公式ドキュメントには、AVX512のおかげで、ChaCha20-Poly1305はAES-NIよりも優れているが、このコマンドセット拡張は、大規模なプロセッサでのみ利用可能であり、AESで常により高速に動作する、より小型でより多くのモバイル機器には役立ちません。 NI。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これがWireGuardの開発中に予測されたのかどうかはわかりませんが、今日では1つの暗号化に釘付けにされているという事実は、その動作にあまり影響を与えない可能性がある欠点です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IPsecを使用すると、アプリケーションに最適な暗号化を自由に選択できます。もちろん、これは、たとえば、VPN接続を介して10ギガバイト以上のデータを転送する場合に必要です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux統合の問題</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WireGuardは最新の暗号化プロトコルを選択しましたが、これはすでに多くの問題を引き起こしています。</font><font style="vertical-align: inherit;">そのため、そのままのカーネルでサポートされているものを使用する代わりに、Linuxにはこれらのプリミティブがないため、WireGuardの統合が何年も遅れていました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は他のオペレーティングシステムの状況を完全には認識していませんが、おそらくLinuxの状況と大差ありません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">現実はどのように見えますか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながら、クライアントからVPN接続をセットアップするように依頼されるたびに、古い資格情報と暗号化を使用しているというトピックに遭遇します。 MD5と組み合わせた3DESは、AES-256やSHA1と同様に、依然として一般的な方法です。後者の方が少し優れていますが、これは2020年に使用すべきものではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
鍵交換には</font><font style="vertical-align: inherit;">、RSAが</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用されます-低速ですがかなり安全なツールです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私のクライアントは、税関や他の州の組織や機関、および世界中でその名前が知られている大企業と関係があります。それらのすべてが数十年前に作成されたリクエストフォームを使用し、SHA-512を使用する機能が追加されたことはありません。これがどういうわけか技術の進歩に明らかに影響しているとは言えませんが、明らかにそれは企業プロセスを遅くします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IPsecは2005年以降、曲線から離れた楕円曲線をサポートしていたため、これを見るのは面倒です。Curve25519もより新しく、アクセスしやすくなっています。 CamelliaやChaCha20など、AESに代わるものはまだありますが、すべてがCiscoやその他の大手サプライヤーによってサポートされているわけではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして人々はそれを使います。</font><font style="vertical-align: inherit;">多くのシスコキットがあり、シスコで動作するように設計されたキットが多数あります。</font><font style="vertical-align: inherit;">彼らはこのセグメントの市場リーダーであり、イノベーションにはあまり関心がありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はい、[企業セグメント]の状況はひどいですが、WireGuardによる変更はありません。</font><font style="vertical-align: inherit;">製造元はおそらく、すでに使用しているツールと暗号化でパフォーマンスの問題を明らかにすることは決してなく、IKEv2の使用で問題が発生することはないため、代替手段を探していません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、シスコを放棄することについて考えたことはありますか？</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベンチマーク</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、WireGuardのドキュメントからベンチマークに移りましょう。この[ドキュメント]は科学的な記事ではありませんが、開発者がより科学的なアプローチを取るか、参照として科学的なアプローチを使用することを期待していました。ベンチマークは再現できない場合は役に立ちません。さらに、実験室で取得した場合は役に立ちません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Linux用のWireGuardビルドでは、GSO-Generic Segmentation Offloadingを利用しています。彼のおかげで、クライアントは64キロバイトの巨大なパケットを作成し、1つのアプローチで暗号化/復号化します。したがって、暗号化操作の呼び出しと実装のコストが削減されます。 VPN接続の帯域幅を最大化したい場合、これは良い考えです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、いつものように、実際にはそれほど単純ではありません。このような大きなパケットをネットワークアダプターに送信するには、パケットを多数の小さなパケットにスライスする必要があります。一般的な送信サイズは1,500バイトです。つまり、巨大な64キロバイトは45パケット（1240バイトの情報と20バイトのIPヘッダー）に分割されます。その後、しばらくの間、ネットワークアダプターを完全にブロックします。これは、それらを一緒にすぐに送信する必要があるためです。その結果、これにより優先順位が急上昇し、VoIPなどのパケットがキューに入れられます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、WireGuardが大胆に主張している高スループットは、他のアプリケーションのネットワーク動作を遅くすることによって達成されます。そしてWireGuardチームは</font><font style="vertical-align: inherit;">私のこの結論を</font><font style="vertical-align: inherit;">すでに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確認し</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">てい</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、先に進みましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
技術文書のベンチマークによると、接続は1011 Mbit /秒の帯域幅を示しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
印象的です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つのギガビットイーサネット接続の理論上の最大帯域幅は966 Mbit / sで、パケットサイズは1,500バイトからIPヘッダーあたり20バイトを差し引いたもの、IPヘッダーあたり20バイト、UDPヘッダーあたり8バイト、ワイヤーヘッダー自体あたり16バイトであるため、これは特に印象的です。 。カプセル化されたパケットには別のIPヘッダーがあり、20バイトのTCPには別のIPヘッダーがあります。では、この余分な帯域幅はどこから来たのでしょうか。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記で説明した巨大なフレームとGSOの利点により、フレームサイズが9000バイトの場合の理論上の最大値は1014メガビット/秒になります。通常、そのようなスループットは大きな困難を伴うため、実際には達成できません。したがって、64キロバイトのサイズを超えるさらに太字のフレームを使用してテストが実行されたと想定できますが、理論上の最大値は1023メガビット/秒であり、これは一部のネットワークアダプターでのみサポートされています。しかし、これは実際の状況ではまったく当てはまりません。または、テストスタンド内でのみ、互いに直接接続されている2つのステーション間でのみ使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、VPNトンネルは、大きなフレームをまったくサポートしないインターネット接続を使用して2つのホスト間で転送されるため、スタンドで達成された結果を標準とすることはできません。</font><font style="vertical-align: inherit;">これは単に非現実的な実験室の成果であり、これは不可能であり、実際の戦闘状況では適用できません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データセンターに座っていても、9000バイトを超えるフレームを転送できません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実生活での適用性の基準は完全に違反されており、私が思うに、「測定」の作者は明らかな理由で真剣に信用を失っています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/ra/2b/pora2bzrbixbty-gnnngbffbc-i.png"><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">希望の最後のかすかな光</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WireGuardのWebサイトはコンテナについて多くのことを話し、実際に何が意図されているかが明らかになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
構成を必要とせず、Amazonのクラウドなどの大規模なオーケストレーションツールを使用して展開および構成できるシンプルで高速なVPN。具体的には、Amazonは前述の最新のハードウェア機能を使用しています。たとえば、AVX512です。これは、作業を高速化するために行われ、x86やその他のアーキテクチャーに縛られることはありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サイズが9000バイトを超える帯域幅とパケットを最適化します。これにより、コンテナー同士の通信、またはバックアップ操作、スナップショットの作成、またはこれらのコンテナーのデプロイのために巨大なカプセル化フレームが生成されます。</font><font style="vertical-align: inherit;">私が説明したシナリオの場合、動的IPアドレスでさえWireGuardの動作に影響を与えません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
悪くはない。</font><font style="vertical-align: inherit;">見事な実装と非常に薄い、ほぼ参照プロトコル。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、完全に制御するデータセンター以外の世界には適していません。</font><font style="vertical-align: inherit;">リスクを冒してWireGuardの使用を開始した場合、暗号化プロトコルの開発と実装に常に妥協する必要があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WireGuardの準備がまだ整っていないと私が判断するのは簡単です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、既存のソリューションの多くの問題に対する軽量で迅速なソリューションとして考えられました。残念ながら、これらのソリューションのために、彼はほとんどのユーザーに関連する多くの機能を犠牲にしました。そのため、IPsecやOpenVPNを置き換えることはできません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WireGuardが競争力を持つためには、少なくともIPアドレス構成とルーティングおよびDNS構成を追加する必要があります。明らかに、これは暗号化されたチャネルが必要とされるものです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
セキュリティは私の最優先事項であり、現時点では、IKEまたはTLSが何らかの形で危険にさらされている、または壊れていると信じる理由はありません。どちらも最新の暗号化がサポートされており、数十年の運用でテストされています。新しい何かがそれが何かであることを意味しない場合、それはより良いです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ステーションを管理していないサードパーティに連絡する場合、相互運用性は非常に重要です。</font><font style="vertical-align: inherit;">IPsecは事実上の標準であり、ほぼすべての場所でサポートされています。</font><font style="vertical-align: inherit;">そしてそれは機能します。</font><font style="vertical-align: inherit;">そして、どのように見えても、理論的には、将来のWireGuardはそれ自体のバージョンが異なっていても互換性がない可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
暗号化による保護は遅かれ早かれハッキングされるため、交換または更新する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらすべての事実を否定し、やみくもにWireGuardを使用してiPhoneをホームワークステーションに接続することは、砂に頭を突き刺すことに関する単なるワークショップです。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja492874/index.html">モバイル向けのレンダリングの最適化</a></li>
<li><a href="../ja492878/index.html">オタクのスリッパ：一時的なオフィス閉鎖でポジティブを探す</a></li>
<li><a href="../ja492880/index.html">私たちはスマートホームを何を建てるべきですか？</a></li>
<li><a href="../ja492884/index.html">YouTubeブロードキャストからのメッセージの受信+ PHPでのGoogle認証</a></li>
<li><a href="../ja492886/index.html">大量採用テスターのレシピ</a></li>
<li><a href="../ja492892/index.html">彼らが無料または割引価格で提供するものは、検疫で試してください。ビジネスセレクション</a></li>
<li><a href="../ja492894/index.html">数分ですべてのお金を失うか、アルゴリズム取引でリスク管理をしない方法</a></li>
<li><a href="../ja492898/index.html">味と色について：スマートホームへのアプローチのグラデーション</a></li>
<li><a href="../ja492900/index.html">音楽ジェネレーター Web Audio API 初心者体験</a></li>
<li><a href="../ja492906/index.html">さまざまなMBTIタイプがストレスにどのように反応するか</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>