<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💂🏼 🤙🏽 👨🏽‍🚀 責任あるJavaScript開発パート2 🏦 👵 👂🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="今年の4月に、JavaScript開発への責任あるアプローチに特化したシリーズの最初の資料の翻訳を公開しました。そこで、著者は最新のウェブ技術とその合理的な使用について考察しました。このシリーズの2番目の記事の翻訳を提供します。Webプロジェクトの設計に関する技術的な詳細に焦点を当てています。
 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>責任あるJavaScript開発パート2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/460797/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今年の4月に、</font><font style="vertical-align: inherit;">JavaScript開発への責任あるアプローチに特化したシリーズの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初の資料の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳を公開しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">そこで、著者は最新のウェブ技術とその合理的な使用について考察しました。</font><font style="vertical-align: inherit;">このシリーズの2番目の記事の翻訳を提供します。</font><font style="vertical-align: inherit;">Webプロジェクトの設計に関する技術的な詳細に焦点を当てています。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/fu/0j/zo/fu0jzokbsmkz97fxen8dedmtg9e.jpeg"></a><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">考えがある</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたとあなたのチームは、会社の老朽化したウェブサイトの完全な見直しを熱心に推進しました。あなたの要求はリーダーシップに達し、最高の人々の意見にさえ至りました。あなたは青信号を与えられました。あなたのチームは熱心に仕事に取り掛かり、デザイナー、コピーライター、その他の専門家を惹きつけました。すぐに新しいコードを公開しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その作業は無邪気に始まりました。チームは</font></font><code>npm install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここに、チームは</font></font><code>npm install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そこにいます。周りを見回すとすぐに、プロジェクト開発が荒々しい酒のように生産依存関係がすでに確立されており、あなたは明日の朝のことをまったく気にしません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それから始めました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、クレイジーな飲み会の結果とは異なり、恐ろしいことが翌朝始まりませんでした。</font><font style="vertical-align: inherit;">残念ながら、翌朝ではありません。</font><font style="vertical-align: inherit;">計算は数か月で行われました。</font><font style="vertical-align: inherit;">新しいサイトの立ち上げ後、コンバージョンと収益が減少した理由を疑問に思っていた会社のオーナーとミドルマネージャーにとって、彼女は不快な形の軽い吐き気と頭痛を感じました。</font><font style="vertical-align: inherit;">その後、災害は勢いを増しました。</font><font style="vertical-align: inherit;">これは、テクニカルディレクターが週末に町の外で過ごしたときに戻ってきたときに起こりました。</font><font style="vertical-align: inherit;">彼は、会社のWebサイトが自分の電話に（たとえあったとしても）非常にゆっくりと読み込まれているのか疑問に思いました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前は誰にとっても良いものでした。</font><font style="vertical-align: inherit;">今、他の暗い時代が来ています。</font><font style="vertical-align: inherit;">JavaScriptを大量に消費した後の最初の二日酔いに会います。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これはあなたのせいではありません</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたが地獄のような二日酔いに対処しようとしている間、「私はあなたにそう言った」のような言葉は、あなたにふさわしい叱責のように聞こえるでしょう。そして、あなたがその時に戦うことができたなら、彼らは戦いの機会として役立つことができました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JavaScriptの無謀な使用の結果に関しては、すべての人と全員を非難することができます。しかし、有罪を探すことは時間の無駄です。最新のWebデバイス自体では、企業は競合他社よりも早く問題を解決する必要があります。このようなプレッシャーは、生産性を可能な限り向上させるために努力している私たちが何かをつかむ可能性が高いことを意味します。これは、高い確率で（これは避けられないとは言えませんが）、過剰なアプリケーションを作成し、アプリケーションのパフォーマンスと可用性を損なうパターンを使用する可能性が高いことを意味します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Web開発は簡単な作業ではありません。</font><font style="vertical-align: inherit;">これは長い仕事です。</font><font style="vertical-align: inherit;">最初の試行でうまく実行されることはほとんどありません。</font><font style="vertical-align: inherit;">ただし、この作業の最も良い点は、最初からすべてを完璧に行う必要がないことです。</font><font style="vertical-align: inherit;">プロジェクトの立ち上げ後にプロジェクトを改善することができます。実際、この資料はこれに特化しており、JS開発への責任あるアプローチに関する一連の記事の2番目です。</font><font style="vertical-align: inherit;">完璧さは非常に遠い目標です。</font><font style="vertical-align: inherit;">それまでの間</font><font style="vertical-align: inherit;">
 、近い将来、サイトの</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクリプト</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を改善することで、JavaScriptの二日酔いに対処しましょう</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般的な問題に対処します</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、問題を解決するための機械的なアプローチのように思えるかもしれませんが、最初に、一般的な問題のリストとその対処方法を確認します。</font><font style="vertical-align: inherit;">大規模な開発チームでは、このようなことはしばしば忘れられます。</font><font style="vertical-align: inherit;">これは、複数のリポジトリを使用するチームや、プロジェクトに最適化されたテンプレートを使用しないチームに特に当てはまります。</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">treeツリー揺れアルゴリズムを適用する</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、ツールが</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ツリー揺れ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アルゴリズムを実装するように構成されているかどうかを確認します</font><font style="vertical-align: inherit;">。これまでにこの概念に遭遇したことがない場合は</font><font style="vertical-align: inherit;">、昨年作成された</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">資料を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ご覧ください</font></a><font style="vertical-align: inherit;">。このアルゴリズムの動作を簡単に説明すると、アプリケーションのプロダクションアセンブリでの使用のおかげで、プロジェクトにインポートされたものの、使用されていないパッケージは含まれていないと言えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下のような-木の揺れのアルゴリズムを実装することは、現代bundlersの標準機能である</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のWebPACK</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロールアップ、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小包</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作男</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一息</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タスクマネージャーです。彼らはこれをしません。バンドラーとは異なり、タスクマネージャーは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依存関係グラフを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作成しません</font><font style="vertical-align: inherit;">。タスクマネージャは、必要なプラグインを使用して、転送されたファイルに対して個別の操作を実行します。タスクマネージャーの機能はプラグインを使用して拡張できるため、バンドルツールを使用してJavaScriptを処理することができます。タスクマネージャーの機能をこの方向に拡張することが問題であると思われる場合は、コードベースを手動で確認し、そこから未使用のコードを削除する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ツリー揺れアルゴリズムが効率的に機能するためには、次の条件を満たす必要があります。</font></font><br>
<br>
<ol>
<li>          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> ES6</a>.   tree shaking  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">CommonJS</a>-  .</li>
<li>     ES6-   -      .      ,    Babel,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">@Babel/present-env</a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">modules: false</a>.    ,  ES6-     ,    CommonJS.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
突然、プロジェクトの構築時にツリー揺れアルゴリズムが適用されない場合、このメカニズムを含めることで状況を改善できます。</font><font style="vertical-align: inherit;">もちろん、このアルゴリズムの有効性はプロジェクトごとに異なります。</font><font style="vertical-align: inherit;">さらに、その使用の可能性は、インポートされたモジュール</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に副作用</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があるかどうかによって異なります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは、不要なインポートモジュールをアセンブリに含めないようにするバンドラーの機能に影響を与える可能性があります。</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">theコードを分割する</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すでに何らかの形式の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コード分​​離</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用している可能性が非常に高いです</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ただし、これがどのように行われるかを正確に確認する必要があります。</font><font style="vertical-align: inherit;">コードをどのように分離するかに関係なく、次の2つの非常に貴重な質問を自問してみてください。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">入力ポイント</font></a><font style="vertical-align: inherit;">から</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重複したコード</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を削除します</font><font style="vertical-align: inherit;">か？</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">動的インポートで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この方法でロードできるすべてのものを遅延ロードします</font><font style="vertical-align: inherit;">か？</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
冗長なコードの量を減らすことは重要なパフォーマンス要素であるため、これらの問題は重要です。</font><font style="vertical-align: inherit;">コードを遅延読み込みすると、ページに含まれ、読み込まれたときに読み込まれるJavaScriptコードの量が減るため、パフォーマンスも向上します。</font><font style="vertical-align: inherit;">プロジェクトに冗長コードが存在するかどうかのプロジェクトの分析について説明する場合は、Bundle Buddyなどのツールを使用できます。</font><font style="vertical-align: inherit;">プロジェクトでこれに問題がある場合、このツールはそれについて通知します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/37f/e95/0f3/37fe950f3567d6e53c77969632713df8.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bundle Buddyツールは、webpackコンパイルに関する情報をチェックし、バンドルで使用されている同一のコードの量を確認できます</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
。マテリアルの遅延読み込みについて話すと、この最適化を適用する機会を探す場所を</font><i><font color="#999999"><font style="vertical-align: inherit;">見つけるのは</font></font></i><font style="vertical-align: inherit;">困難な場合があります。遅延読み込みを使用する可能性について既存のプロジェクトを調査するとき、コードベースで、ユーザーによるコードの操作が関係する場所を探します。たとえば、マウスまたはキーボードのイベントハンドラーや、その他の同様のものを使用できます。実行に何らかのユーザーアクションが必要なコードは、動的コマンドを適用するのに適してい</font></font><code>import()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、スクリプトをオンデマンドでロードすると、システムをインタラクティブモードに移行する際に顕著な遅延が発生するリスクがあります。実際、プログラムがユーザーと対話的に対話する前に、適切なスクリプトをダウンロードする必要があります。転送されるデータ量が気にならない場合は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rel = prefetch</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソースヒント</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用して、</font><font style="vertical-align: inherit;">優先度の低いスクリプトをロード</font><font style="vertical-align: inherit;">することを検討してください</font><font style="vertical-align: inherit;">。このようなリソースは、重要なリソースと帯域幅をめぐって競合することはありません。ユーザーのブラウザが</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポートしている場合</font></font></a> <code>rel=prefetch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、このツールチップを使用</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">すること</font></a><font style="vertical-align: inherit;">は有益です。そうでない場合、ブラウザは理解できないマークアップを単に無視するため、問題は発生しません。</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">webwebpack外部オプションを使用して、外部サーバーにあるリソースにマークを付けます</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理想的には、自分のサーバーでサイトの依存関係をできるだけ多くホストする必要があります。</font><font style="vertical-align: inherit;">何らかの理由で、オプションなしで、他の人のサーバーから依存関係をダウンロードする必要がある場合-それらを</font><font style="vertical-align: inherit;">webpack設定の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブロック</font><font style="vertical-align: inherit;">に配置します。</font><font style="vertical-align: inherit;">これが行われていない場合、これは、サイトへの訪問者が、ホストしているコードと同じコードの両方を他のユーザーのサーバーからダウンロードすることを意味している可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような何かがあなたのリソースに害を与える可能性がある架空の状況を見てみましょう。サイトがLodashライブラリをパブリックCDNリソースからダウンロードするとします。また、ローカル開発のためにプロジェクトにLodashをインストールしました。ただし、Lodashが外部依存関係であることをWebpack設定で指定しない場合、実稼働コードはCDNからライブラリをロードしますが、同時にサーバーでホストされているバンドルに含まれます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたがバンドラーに精通しているなら、これらすべてはあなたにとってありふれた真実に思えるかもしれません。しかし、私はこれらのものがいかに注目されていないかを見ました。したがって、上記の問題についてプロジェクトを再確認するために時間をかけないでください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サードパーティの開発者が作成した依存関係を自分でホストする必要がないと考える場合は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dns-prefetch</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">preconnect</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、または場合によっては</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">preload</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヒントを使用することを検討してください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これにより、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TTI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（インタラクティブまでの時間、</font><font style="vertical-align: inherit;">サイトの</font><font style="vertical-align: inherit;">最初の対話までの時間）</font><font style="vertical-align: inherit;">スコア</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">減らすことができ</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">また、サイトのコンテンツを表示するためにJavaScript機能が必要な場合は、</font><font style="vertical-align: inherit;">サイトの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">速度インデックスも</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要です</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">より小さい代替ライブラリとユーザーシステムのオーバーヘッドの削減</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いわゆる「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーランドJavaScript</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」（ユーザーが開発したJSライブラリ）は、わいせつな巨大キャンディーストアのようです。このすべてのオープンソースの素晴らしさと多様性は、開発者である私たちに畏敬の念を抱かせます。フレームワークとライブラリを使用すると、アプリケーションを拡張し、さまざまな問題の解決に役立つ機能を迅速に装備できます。同じ機能を自分で実装しなければならない場合、多くの時間と労力がかかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は自分のプロジェクトでクライアントフレームワークとライブラリの使用を積極的に最小化することを個人的に主張していますが、それらの大きな価値と有用性を認めざるを得ません。しかし、それにもかかわらず、プロジェクトに新しい依存関係をインストールすることになると、かなりの量の疑いでそれらのそれぞれを扱う必要があります。すでに何かを作成して起動している場合、その動作はインストールされている多くの依存関係に依存します。これは、これらすべてが作成するシステムへの追加の負荷に耐えることを意味します。パッケージ開発者だけが開発を最適化してこの問題に対処できる可能性があります。そうですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おそらくこれはそうですが、おそらくそうではありません。使用する依存関係によって異なります。たとえば、Reactは非常に人気のあるライブラリです。しかし</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preact</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reactの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">非常に小さな</font></a><font style="vertical-align: inherit;">代替手段であり、開発者にほぼ同じAPIを提供し、Reactの多くのアドオンとの互換性を維持します。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Luxon</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">date-fns</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">moment.js</font></a><font style="vertical-align: inherit;">に代わるもので</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、このライブラリ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はそれほど小さく</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ません</font></a><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Lodashの</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ようなライブラリで</font><font style="vertical-align: inherit;">は、多くの便利なメソッドを見つけることができます。しかし、それらのいくつかは、標準のES6メソッドで簡単に置き換えることができます。たとえば、Lodash </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">コンパクト</font></a><font style="vertical-align: inherit;">メソッド</font><font style="vertical-align: inherit;">は、標準の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">フィルター</font></a><font style="vertical-align: inherit;">アレイメソッドに置き換えることができます</font><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">たくさんの</font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他のLodashメソッドも標準のメソッドで安全に置き換えることができます。</font><font style="vertical-align: inherit;">この置き換えの利点は、ライブラリを使用する場合と同じ機能が得られることですが、かなり大きな依存関係がなくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何を使用しても、一般的な考え方は同じです。選択肢にもっとコンパクトな選択肢があるかどうかを尋ねます。</font><font style="vertical-align: inherit;">標準の言語ツールで同じ問題を解決できるかどうかを確認してください。</font><font style="vertical-align: inherit;">アプリケーションのサイズとユーザーシステムにかかる不要な負荷の量を大幅に削減するために努力する必要が少ないことに、驚くほど喜ばれるかもしれません。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクリプト差分読み込みテクノロジを使用する</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たぶん、バベルはあなたのツールチェーンにいるでしょう。</font><font style="vertical-align: inherit;">このツールは、ES6準拠のソースコードを、従来のブラウザーで実行できるコードに変換するために使用されます。</font><font style="vertical-align: inherit;">これは、古いブラウザーがすべて消えるまで、それらを必要としないブラウザーにも巨大なバンドルを提供する運命にあることを意味しますか？</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">もちろん違い</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます！</font><font style="vertical-align: inherit;">差分リソースの読み込みは、ES6コードに基づいて2つの異なるアセンブリを作成することにより、この問題を回避するのに役立ちます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初のアセンブリには、サイトがレガシーブラウザで機能するために必要なすべてのコード変換とポリフィルが含まれています。</font><font style="vertical-align: inherit;">おそらく、あなたは今、この特定のアセンブリを顧客に提供しています。</font></font></li>
<li>        ,     .     .   ,   , , .   —  .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アセンブリの差動荷重のテクノロジーを使用するには、少し作業する必要があります。ここでは詳しく説明しません</font><font style="vertical-align: inherit;">。このテクノロジーを実装する方法の1つについて説明している資料への</font><font style="vertical-align: inherit;">より良い</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リンク</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を提供します。これらすべての本質は、プロジェクトのビルド中にサイトのJSバンドルの追加バージョンが作成されるように、ビルド構成を変更できることです。この追加のバンドルはメインのバンドルよりも小さくなります。最新のブラウザのみを対象としています。最良の部分は、このアプローチにより、バンドルのサイズを最適化できると同時に、プロジェクトの機能をまったく犠牲にしないことです。アプリケーションコードによっては、バンドルサイズを大幅に節約できる場合があります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/58a/fa7/803/58afa780391bbe685486a4a55f99b76b.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レガシーブラウザー用のバンドル（左）と新しいブラウザー用のバンドル（右）の分析。バンドルの調査は、webpack-bundle-analyzerを使用して行われました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちらが</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この画像のフルサイズ版です。</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
次のトリックを使用して、異なるブラウザーに異なるバンドルを与えるのが最も簡単です。最新のブラウザでうまく機能します：</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;!--     : --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js/app.mjs"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><font></font>
&lt;!--     : --&gt;<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">defer</span> <span class="hljs-attr">nomodule</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js/app.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながら、このアプローチには欠点があります。 IE11のような古いブラウザー、およびEdgeバージョン15-18などの比較的最近のブラウザーでも、両方のバンドルがロードされます。それを我慢する準備ができている場合は、このテクニックを使用し、何も心配しないでください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一方、</font><font style="vertical-align: inherit;">古いブラウザが両方のバンドルをダウンロードする必要があるという事実がアプリケーションのパフォーマンスに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与える影響</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が懸念される場合は、何かを考え出す必要が</font><font style="vertical-align: inherit;">あります。 （</font></font><code>&lt;script&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上記で使用し</font><font style="vertical-align: inherit;">たタグの代わりに）スクリプトインジェクションを使用するこの問題の1つの潜在的な解決策を次に示します</font><font style="vertical-align: inherit;">。適切なブラウザによるバンドルの二重読み込みを回避します。これが私たちが話していることです：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> scriptEl = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"script"</span>);<font></font>
<font></font>
<span class="hljs-keyword">if</span> (<span class="hljs-string">"noModule"</span> <span class="hljs-keyword">in</span> scriptEl) {
&nbsp;&nbsp;<span class="hljs-comment">//   </span>
&nbsp;&nbsp;scriptEl.src = <span class="hljs-string">"/js/app.mjs"</span>;<font></font>
&nbsp;&nbsp;scriptEl.type = <span class="hljs-string">"module"</span>;<font></font>
} <span class="hljs-keyword">else</span> {
&nbsp;&nbsp;<span class="hljs-comment">//   </span>
&nbsp;&nbsp;scriptEl.src = <span class="hljs-string">"/js/app.js"</span>;<font></font>
&nbsp;&nbsp;scriptEl.defer = <span class="hljs-literal">true</span>; <span class="hljs-comment">// type="module"   ,    .</span><font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//  !</span>
<span class="hljs-built_in">document</span>.body.appendChild(scriptEl);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このスクリプトは、ブラウザ</font><font style="vertical-align: inherit;">が要素の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nomodule</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">サポートしている場合</font></font><code>script</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、デザインを理解していることを</font><font style="vertical-align: inherit;">前提として</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">い</font></a><font style="vertical-align: inherit;">ます</font></font><code>type="module"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これにより、レガシーブラウザーはそれら用に設計されたスクリプトのみを受け取り、最新のブラウザーはそれら用に設計されたスクリプトを受け取ります。</font><font style="vertical-align: inherit;">ただし、動的に埋め込まれたスクリプトはデフォルトで非同期に読み込まれることに注意してください。</font><font style="vertical-align: inherit;">したがって、依存関係の読み込み順序が重要な場合は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">async</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">をに</font><font style="vertical-align: inherit;">設定します</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">伝えにくい</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでバベルを攻撃するつもりはありません。</font><font style="vertical-align: inherit;">このツールは、最新のWeb開発に必要ですが、非常に厄介なエンティティです。</font><font style="vertical-align: inherit;">Babelが生成するコードには、開発者が知らない可能性がある多くのものが追加されます。</font><font style="vertical-align: inherit;">したがって、バベルの腸を調べて、彼が正確に何をしているのかを知っていても後悔しません。</font><font style="vertical-align: inherit;">特に、バベルの内部メカニズムの知識は、誰かがコードを書く方法への小さな変更が、バベルが生成するものに良い影響を与えることができることを明らかにしています。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ff/159/898/6ff159898be42a49a07d2990071d1b37.png"></div><br>
<i><font color="#999999"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トランスポーズ少ない</font></font></a></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
。つまり、これは私たちが話しているものです。</font><font style="vertical-align: inherit;">たとえば</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、デフォルトのオプション</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、すでに使用しているES6の非常に便利な機能です。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logger</span>(<span class="hljs-params">message, level = <span class="hljs-string">"log"</span></span>) </span>{
&nbsp;&nbsp;<span class="hljs-built_in">console</span>[level](message);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは</font></font><code>level</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、デフォルト値が文字列で</font><font style="vertical-align: inherit;">あるパラメータに注意を払う</font><font style="vertical-align: inherit;">価値があります</font></font><code>log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは</font></font><code>console.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ラッパー関数を使用し</font><font style="vertical-align: inherit;">て呼び出す</font><font style="vertical-align: inherit;">場合、</font></font><code>logger</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この関数を渡す必要がないことを</font><font style="vertical-align: inherit;">意味し</font><font style="vertical-align: inherit;">ます</font></font><code>level</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。便利でしょ？これはすべて良好です-この関数を変換するときにBabelが取得するコードを除きます。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logger</span>(<span class="hljs-params">message</span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">var</span> level = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : <span class="hljs-string">"log"</span>;<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-built_in">console</span>[level](message);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、私たちが善意に導かれているにもかかわらず、バベルが提供する快適さがマイナスの結果につながる可能性のある例です。プログラムの製品版では、ソースコードのほんの数文字がはるかに長い構成になっています。このコードを縮小記号などで処理する場合、キーワードが</font></font><code>arguments</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">削減されない</font><font style="vertical-align: inherit;">ため、これは特に役立ち</font><font style="vertical-align: inherit;">ません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、この問題の解決策は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">残りのパラメーターの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構文を使用することだと思い</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">か？残念ながら、このBabel構文はさらに複雑な構成に拡張されます。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//  </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logger</span>(<span class="hljs-params">...args</span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [level, message] = args;<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-built_in">console</span>[level](message);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//   Babel</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logger</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(_len), _key = <span class="hljs-number">0</span>; _key &lt; _len; _key++) {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;args[_key] = <span class="hljs-built_in">arguments</span>[_key];<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> level = args[<span class="hljs-number">0</span>],<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message = args[<span class="hljs-number">1</span>];
&nbsp;&nbsp;<span class="hljs-built_in">console</span>[level](message);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">最新のブラウザ</font></a><font style="vertical-align: inherit;">を対象</font><font style="vertical-align: inherit;">
とした</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ babel / preset-env</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">設定のプロジェクトでもBabelがこのコードを変換するため、状況は悪化し</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。つまり、差分読み込みを使用している場合でも、最新のブラウザー用に設計されたバンドルには、このようなコード変換の結果が含まれます。この問題を軽減するために、「弱い」コード変換モードを使用できます（</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ルーズ</font></a></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメーターに設定</font><font style="vertical-align: inherit;">）。このオプションをオンにして取得したバンドルは通常、より深い変換を受けるバンドルよりも少し小さくなるため、これは興味深いアイデアです。しかし、「弱い」コード変換モードを使用すると、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">問題が発生</font></a><font style="vertical-align: inherit;">する可能性があり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトのビルドに使用した一連のツールから後でBabelを削除した場合。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コード変換の「弱い」モードを使用するかどうかに関係なく、Babelツールでデフォルトのパラメータを処理することによって取得される厄介な変換コードを取り除く1つの方法を次に示します。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// Babel     </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logger</span>(<span class="hljs-params">message, level</span>) </span>{
&nbsp;&nbsp;<span class="hljs-built_in">console</span>[level || <span class="hljs-string">"log"</span>](message);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、デフォルトのパラメーターは、転記されるコードで注意を払う必要がある最新のJavaScript機能だけではありません。</font><font style="vertical-align: inherit;">展開</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構文も処理されます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">矢印関数</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その他の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多く</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">の構造で発生し</font></a><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの機会を完全に放棄したくない場合は、トランスパイレーションによるコードへの悪影響を軽減する方法がいくつかあります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリを作成する場合は</font><font style="vertical-align: inherit;">、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">@ babel / plugin-transform-runtime</font></a><font style="vertical-align: inherit;">と組み合わせ</font><font style="vertical-align: inherit;">て</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ babel / runtime</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">し</font></a><font style="vertical-align: inherit;">て</font><font style="vertical-align: inherit;">、Babelがコードに追加する重複するヘルパー関数を削除することを</font><font style="vertical-align: inherit;">検討し</font><font style="vertical-align: inherit;">てください。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションの特定の機能を実装するためにポリフィルが必要な場合、それらをコードに選択的に含めることができます。</font><font style="vertical-align: inherit;">これは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ babel / polyfillパッケージ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して行われ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">パラメータを設定することで有効にできます</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バベル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">preset</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -env </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">useBuiltins</font></a><font style="vertical-align: inherit;"> to value </font></font><code>usage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今お話しするのは私の意見だけですが、最新のブラウザ用に設計されたバンドルを作成することは、トランスパイレーションをまったく使用しないことが最善だと思います。</font><font style="vertical-align: inherit;">特に</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">JSX</font></a><font style="vertical-align: inherit;">構文を使用する場合は、これが常に可能であるとは限りません。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、すべてのブラウザで転置する必要がある場合、またはワイドブラウザのサポートをまだ利用していない最新の言語機能を使用する場合。</font><font style="vertical-align: inherit;">後者の場合、ユーザーがプロジェクトから最も肯定的な印象を得ることができるように、プロジェクトでこれらの新機能が本当に必要かどうかを尋ねる価値があります。</font><font style="vertical-align: inherit;">実際、これはまれにしか発生しません。</font><font style="vertical-align: inherit;">ツールチェーンでBabelが絶対に必要であるという結論に達した場合は、それによって生成されたコードを調べる必要があります。</font><font style="vertical-align: inherit;">これにより、Babelによって生成された最適でない構成を検出できます。</font><font style="vertical-align: inherit;">それらを見つけたら、それらを排除することを期待してコードを改善するための対策を講じることができます。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論：プロジェクトの改善は競争ではありません</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
始めたところに戻りましょう。ひどいJavaScriptの二日酔いに苦しんでいるあなたは、頭を悩ませて、それがいつ終わるのかを考えます。そして、ユーザーが私たちのサイトを操作するのを妨げているすべてのものを取り除くときに、それはまさに終わります。ウェブ開発コミュニティは、競争に勝つためのスピードに取りつかれています。しかし</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、少し遅くする</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">があり</font></a><font style="vertical-align: inherit;">ます。このアプローチでは、あなたの製品は競合他社の製品ほど速く開発されないが、あなたが得るものは彼らが得るものより速く働くことがわかるでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで提示されているアイデアを考慮して、コードベースに実装してください。一晩でそれ自体が改善されるわけではないことに注意してください。</font><font style="vertical-align: inherit;">Web開発は仕事です。</font><font style="vertical-align: inherit;">深刻な前向きな結果を伴うケースは、私たちが慎重に仕事に取り組み、この仕事に長い間専念するときに行われます。</font><font style="vertical-align: inherit;">継続的な改善に焦点を当てます。</font><font style="vertical-align: inherit;">コードのパフォーマンスを測定し、テストし、好ましくないものを修正し、このサイクルを繰り返します。</font><font style="vertical-align: inherit;">これにより、プロジェクトによってユーザーエクスペリエンスが向上し、プロジェクト自体が徐々に速くなるという事実につながります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読者の皆様！</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSコードのトランスパイルを拒否するという考えについてどう思いますか？</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/rw/6v/yn/rw6vyn2bxx4usoqc39holmj2z8m.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja460779/index.html">高度なデバッグ</a></li>
<li><a href="../ja460783/index.html">ノードの評判に関するコンセンサス。必要ですか？</a></li>
<li><a href="../ja460785/index.html">Androidオペレーティングシステム上の電子書籍のアプリケーション。パート1.導入とオフィスアプリケーション</a></li>
<li><a href="../ja460793/index.html">Reactアプリケーションの構造化</a></li>
<li><a href="../ja460795/index.html">JavaScriptアプリケーションのパフォーマンスを改善するための12のヒント</a></li>
<li><a href="../ja460799/index.html">標準ブラウザAPI支払いリクエスト</a></li>
<li><a href="../ja460801/index.html">現代のJavaScript開発者向けの27の素晴らしいVS Codeツール</a></li>
<li><a href="../ja460803/index.html">夏の読書：技術者向けの本</a></li>
<li><a href="../ja460805/index.html">マイクロコントローラー間で100 Mbpsでデータを転送する方法</a></li>
<li><a href="../ja460807/index.html">7回測定し、一度BIツールを実装する</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>